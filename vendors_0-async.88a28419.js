(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]||[]).push([["vendors_0"],{"000ce906":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{createContext:function(){return y;},createImmutable:function(){return w;},useContext:function(){return _;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("ee64167d"),l=a._(s),u=i("8a826376"),c=a._(u),f=i("4b97d3c2"),d=a._(f),h=i("044bdec0"),p=a._(h),m=i("609f48be"),g=o._(m),v=i("792e90bc");function y(n){var r=g.createContext(void 0);return{Context:r,Provider:function(n){var i=n.value,a=n.children,o=g.useRef(i);o.current=i;var s=g.useState(function(){return{getValue:function(){return o.current;},listeners:new Set};}),u=(0,l.default)(s,1)[0];return(0,d.default)(function(){(0,v.unstable_batchedUpdates)(function(){u.listeners.forEach(function(n){n(i);});});},[i]),g.createElement(r.Provider,{value:u},a);},defaultValue:n};}function _(n,r){var i=(0,c.default)("function"==typeof r?r:function(n){if(void 0===r)return n;if(!Array.isArray(r))return n[r];var i={};return r.forEach(function(r){i[r]=n[r];}),i;}),a=g.useContext(null==n?void 0:n.Context),o=a||{},s=o.listeners,u=o.getValue,f=g.useRef();f.current=i(a?u():null==n?void 0:n.defaultValue);var h=g.useState({}),m=(0,l.default)(h,2)[1];return(0,d.default)(function(){if(a)return s.add(n),function(){s.delete(n);};function n(n){var r=i(n);(0,p.default)(f.current,r,!0)||m({});}},[a]),f.current;}var b=i("7cfeda15"),x=a._(b),E=i("002639b3");function w(){var n=g.createContext(null);function r(){return g.useContext(n);}return{makeImmutable:function(i,a){var o=(0,E.supportRef)(i),s=function(s,l){var u=o?{ref:l}:{},c=g.useRef(0),f=g.useRef(s);return null!==r()?g.createElement(i,(0,x.default)({},s,u)):((!a||a(f.current,s))&&(c.current+=1),f.current=s,g.createElement(n.Provider,{value:c.current},g.createElement(i,(0,x.default)({},s,u))));};return o?g.forwardRef(s):s;},responseImmutable:function(n,i){var a=(0,E.supportRef)(n),o=function(i,o){return r(),g.createElement(n,(0,x.default)({},i,a?{ref:o}:{}));};return a?g.memo(g.forwardRef(o),i):g.memo(o,i);},useImmutableMark:r};}var S=w();S.makeImmutable,S.responseImmutable,S.useImmutableMark;},"001de73b":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return d;}});var a=i("777fffbe"),o=a._(i("9b84be4b")),s=a._(i("e4870cf0")),l=a._(i("a854094b")),u=i("553ee311"),c=a._(i("6654a076")),f=i("8970bd89");class d extends c.default{constructor(...n){super(...n),(0,l.default)(this,"texture",void 0),(0,l.default)(this,"updateTexture",()=>{let{createTexture2D:n}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),setTimeout(()=>{this.layerService.throttleRenderLayers();});return;}this.texture=n({data:this.iconService.getCanvas(),mag:u.gl.LINEAR,min:u.gl.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128,mipmap:!0});});}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,UV:10});}getUninforms(){if(this.rendererService.getDirty()){var n;null===(n=this.texture)||void 0===n||n.bind();}let r=this.getCommonUniformsInfo(),i=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,s.default)((0,s.default)({},r.uniformsOption),i.uniformsOption);}getCommonUniformsInfo(){let{raisingHeight:n=0,heightfixed:r=!1}=this.layer.getLayerConfig(),i={u_textSize:[1024,this.iconService.canvasHeight||128],u_raisingHeight:Number(n),u_heightfixed:Number(r),u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(i);}initModels(){var n=this;return(0,o.default)(function*(){return n.iconService.on("imageUpdate",n.updateTexture),n.updateTexture(),n.buildModels();})();}clearModels(){var n;null===(n=this.texture)||void 0===n||n.destroy(),this.iconService.off("imageUpdate",this.updateTexture);}buildModels(){var n=this;return(0,o.default)(function*(){return n.initUniformsBuffer(),[(yield n.layer.buildLayerModel({moduleName:"pointImage",vertexShader:'layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;\nlayout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;\nlayout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;\nlayout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;\n\nlayout(std140) uniform commonUniforms {\n  vec2 u_textSize;\n  float u_raisingHeight;\n  float u_heightfixed;\n};\n\nout vec4 v_color;\nout vec2 v_uv;\nout float v_opacity;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97\n  v_color = a_Color;\n  v_opacity = opacity;\n  v_uv = a_Uv;\n  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);\n\n  vec2 offset = project_pixel(offsets);\n\n  float raisingHeight = u_raisingHeight;\n  if (u_heightfixed < 1.0) {\n    // false\n    raisingHeight = project_pixel(u_raisingHeight);\n  } else {\n    if (\n      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET\n    ) {\n      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);\n      raisingHeight = u_raisingHeight * mapboxZoomScale;\n    }\n  }\n\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));\n\n  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;\n  setPickingColor(a_PickingColor);\n}\n',fragmentShader:'layout(std140) uniform commonUniforms {\n  vec2 u_textSize;\n  float u_raisingHeight;\n  float u_heightfixed;\n};\n\nuniform sampler2D u_texture;\n\nin vec4 v_color;\nin vec2 v_uv;\nin float v_opacity;\n\n#pragma include "picking"\n\nout vec4 outputColor;\n\nvoid main(){\n  vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;\n  vec4 textureColor;\n\n  // Y = 0.299R + 0.587G + 0.114B // \u4EAE\u5EA6\u63D0\u53D6\n  \n  textureColor = texture(SAMPLER_2D(u_texture), pos);\n\n  // Tip: \u53BB\u9664\u8FB9\u7F18\u90E8\u5206 mipmap \u5BFC\u81F4\u7684\u6DF7\u5408\u53D8\u6697\n  float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);\n  if(fragmengTocenter >= 0.5) {\n        float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;\n        textureColor.a *= luma;\n  }\n  \n  if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){\n        outputColor= textureColor;\n  }else {\n        outputColor= step(0.01, textureColor.z) * v_color;\n  }\n  outputColor.a *= v_opacity;\n  if (outputColor.a < 0.01) {\n      discard;\n  }\n  outputColor = filterColor(outputColor);\n}\n',triangulation:f.PointImageTriangulation,defines:n.getDefines(),inject:n.getInject(),depth:{enable:!1},primitive:u.gl.POINTS}))];})();}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:u.AttributeType.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:u.gl.DYNAMIC_DRAW,data:[],type:u.gl.FLOAT},size:1,update:n=>{let{size:r=5}=n;return Array.isArray(r)?[r[0]]:[r];}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:u.AttributeType.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:u.gl.DYNAMIC_DRAW,data:[],type:u.gl.FLOAT},size:2,update:n=>{let r=this.iconService.getIconMap(),{shape:i}=n,{x:a,y:o}=r[i]||{x:-64,y:-64};return[a,o];}}});}}},"0047230b":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),r.default=function(){return!!("undefined"!=typeof window&&window.document&&window.document.createElement);};},"007fa019":function(n,r,i){var a=i("ca53fc7e"),o=i("4a936d43"),s=i("22702128"),l=i("07ba0bdb"),u=i("7dd83cf2"),c=i("e4cbb1a3"),f=i("743ea378");n.exports=function(n,r){return l(n)&&u(r)?c(f(n),r):function(i){var l=o(i,n);return void 0===l&&l===r?s(i,n):a(r,l,3);};};},"00ab32b8":function(n,r,i){var a,o;a=this,o=function(){"use strict";function n(n,i,a,o){r(n,a,o),r(i,2*a,2*o),r(i,2*a+1,2*o+1);}function r(n,r,i){var a=n[r];n[r]=n[i],n[i]=a;}function i(n,r,i,a){var o=n-i,s=r-a;return o*o+s*s;}var a,o=function(n){return n[0];},s=function(n){return n[1];},l=function(r,i,a,l,u){void 0===i&&(i=o),void 0===a&&(a=s),void 0===l&&(l=64),void 0===u&&(u=Float64Array),this.nodeSize=l,this.points=r;for(var c=r.length<65536?Uint16Array:Uint32Array,f=this.ids=new c(r.length),d=this.coords=new u(2*r.length),h=0;h<r.length;h++)f[h]=h,d[2*h]=i(r[h]),d[2*h+1]=a(r[h]);!function r(i,a,o,s,l,u){if(!(l-s<=o)){var c=s+l>>1;(function r(i,a,o,s,l,u){for(;l>s;){if(l-s>600){var c=l-s+1,f=o-s+1,d=Math.log(c),h=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*h*(c-h)/c)*(f-c/2<0?-1:1),m=Math.max(s,Math.floor(o-f*h/c+p)),g=Math.min(l,Math.floor(o+(c-f)*h/c+p));r(i,a,o,m,g,u);}var v=a[2*o+u],y=s,_=l;for(n(i,a,s,o),a[2*l+u]>v&&n(i,a,s,l);y<_;){for(n(i,a,y,_),y++,_--;a[2*y+u]<v;)y++;for(;a[2*_+u]>v;)_--;}a[2*s+u]===v?n(i,a,s,_):n(i,a,++_,l),_<=o&&(s=_+1),o<=_&&(l=_-1);}})(i,a,c,s,l,u%2),r(i,a,o,s,c-1,u+1),r(i,a,o,c+1,l,u+1);}}(f,d,l,0,f.length-1,0);};l.prototype.range=function(n,r,i,a){return function(n,r,i,a,o,s,l){for(var u,c,f=[0,n.length-1,0],d=[];f.length;){var h=f.pop(),p=f.pop(),m=f.pop();if(p-m<=l){for(var g=m;g<=p;g++)u=r[2*g],c=r[2*g+1],u>=i&&u<=o&&c>=a&&c<=s&&d.push(n[g]);continue;}var v=Math.floor((m+p)/2);u=r[2*v],c=r[2*v+1],u>=i&&u<=o&&c>=a&&c<=s&&d.push(n[v]);var y=(h+1)%2;(0===h?i<=u:a<=c)&&(f.push(m),f.push(v-1),f.push(y)),(0===h?o>=u:s>=c)&&(f.push(v+1),f.push(p),f.push(y));}return d;}(this.ids,this.coords,n,r,i,a,this.nodeSize);},l.prototype.within=function(n,r,a){return function(n,r,a,o,s,l){for(var u=[0,n.length-1,0],c=[],f=s*s;u.length;){var d=u.pop(),h=u.pop(),p=u.pop();if(h-p<=l){for(var m=p;m<=h;m++)i(r[2*m],r[2*m+1],a,o)<=f&&c.push(n[m]);continue;}var g=Math.floor((p+h)/2),v=r[2*g],y=r[2*g+1];i(v,y,a,o)<=f&&c.push(n[g]);var _=(d+1)%2;(0===d?a-s<=v:o-s<=y)&&(u.push(p),u.push(g-1),u.push(_)),(0===d?a+s>=v:o+s>=y)&&(u.push(g+1),u.push(h),u.push(_));}return c;}(this.ids,this.coords,n,r,a,this.nodeSize);};var u={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(n){return n;}},c=Math.fround||(a=new Float32Array(1),function(n){return a[0]=+n,a[0];}),f=function(n){this.options=g(Object.create(u),n),this.trees=Array(this.options.maxZoom+1);};function d(n){return{type:"Feature",id:n.id,properties:h(n),geometry:{type:"Point",coordinates:[(n.x-.5)*360,360*Math.atan(Math.exp((180-360*n.y)*Math.PI/180))/Math.PI-90]}};}function h(n){var r=n.numPoints,i=r>=1e4?Math.round(r/1e3)+"k":r>=1e3?Math.round(r/100)/10+"k":r;return g(g({},n.properties),{cluster:!0,cluster_id:n.id,point_count:r,point_count_abbreviated:i});}function p(n){return n/360+.5;}function m(n){var r=Math.sin(n*Math.PI/180),i=.5-.25*Math.log((1+r)/(1-r))/Math.PI;return i<0?0:i>1?1:i;}function g(n,r){for(var i in r)n[i]=r[i];return n;}function v(n){return n.x;}function y(n){return n.y;}return f.prototype.load=function(n){var r=this.options,i=r.log,a=r.minZoom,o=r.maxZoom,s=r.nodeSize;i&&console.time("total time");var u="prepare "+n.length+" points";i&&console.time(u),this.points=n;for(var f=[],d=0;d<n.length;d++)n[d].geometry&&f.push(function(n,r){var i=n.geometry.coordinates,a=i[0],o=i[1];return{x:c(p(a)),y:c(m(o)),zoom:1/0,index:r,parentId:-1};}(n[d],d));this.trees[o+1]=new l(f,v,y,s,Float32Array),i&&console.timeEnd(u);for(var h=o;h>=a;h--){var g=+Date.now();f=this._cluster(f,h),this.trees[h]=new l(f,v,y,s,Float32Array),i&&console.log("z%d: %d clusters in %dms",h,f.length,+Date.now()-g);}return i&&console.timeEnd("total time"),this;},f.prototype.getClusters=function(n,r){var i=((n[0]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,n[1])),o=180===n[2]?180:((n[2]+180)%360+360)%360-180,s=Math.max(-90,Math.min(90,n[3]));if(n[2]-n[0]>=360)i=-180,o=180;else if(i>o){var l=this.getClusters([i,a,180,s],r),u=this.getClusters([-180,a,o,s],r);return l.concat(u);}for(var c=this.trees[this._limitZoom(r)],f=c.range(p(i),m(s),p(o),m(a)),h=[],g=0;g<f.length;g+=1){var v=f[g],y=c.points[v];h.push(y.numPoints?d(y):this.points[y.index]);}return h;},f.prototype.getChildren=function(n){var r=this._getOriginId(n),i=this._getOriginZoom(n),a="No cluster with the specified id.",o=this.trees[i];if(!o)throw Error(a);var s=o.points[r];if(!s)throw Error(a);for(var l=this.options.radius/(this.options.extent*Math.pow(2,i-1)),u=o.within(s.x,s.y,l),c=[],f=0;f<u.length;f+=1){var h=u[f],p=o.points[h];p.parentId===n&&c.push(p.numPoints?d(p):this.points[p.index]);}if(0===c.length)throw Error(a);return c;},f.prototype.getLeaves=function(n,r,i){r=r||10,i=i||0;var a=[];return this._appendLeaves(a,n,r,i,0),a;},f.prototype.getTile=function(n,r,i){var a=this.trees[this._limitZoom(n)],o=Math.pow(2,n),s=this.options,l=s.extent,u=s.radius/l,c=(i-u)/o,f=(i+1+u)/o,d={features:[]};return this._addTileFeatures(a.range((r-u)/o,c,(r+1+u)/o,f),a.points,r,i,o,d),0===r&&this._addTileFeatures(a.range(1-u/o,c,1,f),a.points,o,i,o,d),r===o-1&&this._addTileFeatures(a.range(0,c,u/o,f),a.points,-1,i,o,d),d.features.length?d:null;},f.prototype.getClusterExpansionZoom=function(n){for(var r=this._getOriginZoom(n)-1;r<=this.options.maxZoom;){var i=this.getChildren(n);if(r++,1!==i.length)break;n=i[0].properties.cluster_id;}return r;},f.prototype._appendLeaves=function(n,r,i,a,o){for(var s=this.getChildren(r),l=0;l<s.length;l+=1){var u=s[l],c=u.properties;if(c&&c.cluster?o+c.point_count<=a?o+=c.point_count:o=this._appendLeaves(n,c.cluster_id,i,a,o):o<a?o++:n.push(u),n.length===i)break;}return o;},f.prototype._addTileFeatures=function(n,r,i,a,o,s){for(var l=0;l<n.length;l+=1){var u=r[n[l]],c=u.numPoints,f=void 0,d=void 0,g=void 0;if(c)f=h(u),d=u.x,g=u.y;else{var v=this.points[u.index];f=v.properties,d=p(v.geometry.coordinates[0]),g=m(v.geometry.coordinates[1]);}var y={type:1,geometry:[[Math.round(this.options.extent*(d*o-i)),Math.round(this.options.extent*(g*o-a))]],tags:f},_=void 0;c?_=u.id:this.options.generateId?_=u.index:this.points[u.index].id&&(_=this.points[u.index].id),void 0!==_&&(y.id=_),s.features.push(y);}},f.prototype._limitZoom=function(n){return Math.max(this.options.minZoom,Math.min(Math.floor(+n),this.options.maxZoom+1));},f.prototype._cluster=function(n,r){for(var i=[],a=this.options,o=a.radius,s=a.extent,l=a.reduce,u=a.minPoints,f=o/(s*Math.pow(2,r)),d=0;d<n.length;d++){var h=n[d];if(!(h.zoom<=r)){h.zoom=r;for(var p=this.trees[r+1],m=p.within(h.x,h.y,f),g=h.numPoints||1,v=g,y=0;y<m.length;y+=1){var _=m[y],b=p.points[_];b.zoom>r&&(v+=b.numPoints||1);}if(v>g&&v>=u){for(var x,E,w,S,T=h.x*g,A=h.y*g,C=l&&g>1?this._map(h,!0):null,O=(d<<5)+(r+1)+this.points.length,M=0;M<m.length;M+=1){var R=m[M],P=p.points[R];if(!(P.zoom<=r)){P.zoom=r;var k=P.numPoints||1;T+=P.x*k,A+=P.y*k,P.parentId=O,l&&(C||(C=this._map(h,!0)),l(C,this._map(P)));}}h.parentId=O,i.push((x=T/v,E=A/v,w=v,S=C,{x:c(x),y:c(E),zoom:1/0,id:O,parentId:-1,numPoints:w,properties:S}));}else if(i.push(h),v>1)for(var I=0;I<m.length;I+=1){var L=m[I],N=p.points[L];N.zoom<=r||(N.zoom=r,i.push(N));}}}return i;},f.prototype._getOriginId=function(n){return n-this.points.length>>5;},f.prototype._getOriginZoom=function(n){return(n-this.points.length)%32;},f.prototype._map=function(n,r){if(n.numPoints)return r?g({},n.properties):n.properties;var i=this.points[n.index].properties,a=this.options.map(i);return r&&a===i?g({},a):a;},f;},"object"==typeof r&&void 0!==n?n.exports=o():(a="undefined"!=typeof globalThis?globalThis:a||self).Supercluster=o();},"013645fb":function(n,r,i){"use strict";n.exports=function(n){var r=n.stateHandler.getState;return{isDetectable:function(n){var i=r(n);return i&&!!i.isDetectable;},markAsDetectable:function(n){r(n).isDetectable=!0;},isBusy:function(n){return!!r(n).busy;},markBusy:function(n,i){r(n).busy=!!i;}};};},"016e8963":function(n,r,i){"use strict";function a(n,r){this.x=n,this.y=r;}n.exports=a,a.prototype={clone:function(){return new a(this.x,this.y);},add:function(n){return this.clone()._add(n);},sub:function(n){return this.clone()._sub(n);},multByPoint:function(n){return this.clone()._multByPoint(n);},divByPoint:function(n){return this.clone()._divByPoint(n);},mult:function(n){return this.clone()._mult(n);},div:function(n){return this.clone()._div(n);},rotate:function(n){return this.clone()._rotate(n);},rotateAround:function(n,r){return this.clone()._rotateAround(n,r);},matMult:function(n){return this.clone()._matMult(n);},unit:function(){return this.clone()._unit();},perp:function(){return this.clone()._perp();},round:function(){return this.clone()._round();},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y);},equals:function(n){return this.x===n.x&&this.y===n.y;},dist:function(n){return Math.sqrt(this.distSqr(n));},distSqr:function(n){var r=n.x-this.x,i=n.y-this.y;return r*r+i*i;},angle:function(){return Math.atan2(this.y,this.x);},angleTo:function(n){return Math.atan2(this.y-n.y,this.x-n.x);},angleWith:function(n){return this.angleWithSep(n.x,n.y);},angleWithSep:function(n,r){return Math.atan2(this.x*r-this.y*n,this.x*n+this.y*r);},_matMult:function(n){var r=n[0]*this.x+n[1]*this.y,i=n[2]*this.x+n[3]*this.y;return this.x=r,this.y=i,this;},_add:function(n){return this.x+=n.x,this.y+=n.y,this;},_sub:function(n){return this.x-=n.x,this.y-=n.y,this;},_mult:function(n){return this.x*=n,this.y*=n,this;},_div:function(n){return this.x/=n,this.y/=n,this;},_multByPoint:function(n){return this.x*=n.x,this.y*=n.y,this;},_divByPoint:function(n){return this.x/=n.x,this.y/=n.y,this;},_unit:function(){return this._div(this.mag()),this;},_perp:function(){var n=this.y;return this.y=this.x,this.x=-n,this;},_rotate:function(n){var r=Math.cos(n),i=Math.sin(n),a=r*this.x-i*this.y,o=i*this.x+r*this.y;return this.x=a,this.y=o,this;},_rotateAround:function(n,r){var i=Math.cos(n),a=Math.sin(n),o=r.x+i*(this.x-r.x)-a*(this.y-r.y),s=r.y+a*(this.x-r.x)+i*(this.y-r.y);return this.x=o,this.y=s,this;},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this;}},a.convert=function(n){return n instanceof a?n:Array.isArray(n)?new a(n[0],n[1]):n;};},"01746c28":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{genColumnKey:function(){return m;},isBordered:function(){return h;},isMergeCell:function(){return p;},mergePagination:function(){return c;},parseDefaultColumnConfig:function(){return g;},postDataPipeline:function(){return d;},useActionType:function(){return f;}});var a=i("777fffbe"),o=a._(i("23934e00")),s=a._(i("9b84be4b")),l=a._(i("e4870cf0")),u=a._(i("99c0cd4c"));function c(n,r,i){if(!1===n)return!1;var a,o,s=r.total,c=r.current,f=r.pageSize,d=r.setPageInfo,h="object"===(0,u.default)(n)?n:{};return(0,l.default)((0,l.default)({showTotal:function(n,r){return"".concat(i.getMessage("pagination.total.range","\u7B2C")," ").concat(r[0],"-").concat(r[1]," ").concat(i.getMessage("pagination.total.total","\u6761/\u603B\u5171")," ").concat(n," ").concat(i.getMessage("pagination.total.item","\u6761"));},total:s},h),{},{current:!0!==n&&n&&null!==(a=n.current)&&void 0!==a?a:c,pageSize:!0!==n&&n&&null!==(o=n.pageSize)&&void 0!==o?o:f,onChange:function(r,i){var a=n.onChange;null==a||a(r,i||20),(i!==f||c!==r)&&d({pageSize:i,current:r});}});}function f(n,r,i){var a,u,c,f=(0,l.default)((0,l.default)({},i.editableUtils),{},{pageInfo:r.pageInfo,reload:(a=(0,s.default)((0,o.default)().mark(function n(i){return(0,o.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!i){n.next=3;break;}return n.next=3,r.setPageInfo({current:1});case 3:return n.next=5,null==r?void 0:r.reload();case 5:case"end":return n.stop();}},n);})),function(n){return a.apply(this,arguments);}),reloadAndRest:(u=(0,s.default)((0,o.default)().mark(function n(){return(0,o.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i.onCleanSelected(),n.next=3,r.setPageInfo({current:1});case 3:return n.next=5,null==r?void 0:r.reload();case 5:case"end":return n.stop();}},n);})),function(){return u.apply(this,arguments);}),reset:(c=(0,s.default)((0,o.default)().mark(function n(){var a;return(0,o.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.resetAll();case 2:return n.next=4,null==r||null===(a=r.reset)||void 0===a?void 0:a.call(r);case 4:return n.next=6,null==r?void 0:r.reload();case 6:case"end":return n.stop();}},n);})),function(){return c.apply(this,arguments);}),fullScreen:function(){return i.fullScreen();},clearSelected:function(){return i.onCleanSelected();},setPageInfo:function(n){return r.setPageInfo(n);}});n.current=f;}function d(n,r){return r.filter(function(n){return n;}).length<1?n:r.reduce(function(n,r){return r(n);},n);}var h=function(n,r){return void 0!==r&&("boolean"==typeof r?r:r[n]);},p=function(n){var r;return n&&"object"===(0,u.default)(n)&&(null==n||null===(r=n.props)||void 0===r?void 0:r.colSpan);},m=function(n,r){return n?Array.isArray(n)?n.join("-"):n.toString():"".concat(r);};function g(n){var r={},i={};return n.forEach(function(n){var a,o=Array.isArray(a=n.dataIndex)?a.join(","):null==a?void 0:a.toString();o&&(n.filters&&(void 0===n.defaultFilteredValue?r[o]=null:r[o]=n.defaultFilteredValue),n.sorter&&n.defaultSortOrder&&(i[o]=n.defaultSortOrder));}),{sort:i,filter:r};}},"018c5f61":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),r.mergeClasses=void 0;var a=l(i("7d370577")),o=l(i("9e002045")),s=Object.assign||function(n){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a]);}return n;};function l(n){return n&&n.__esModule?n:{default:n};}var u=r.mergeClasses=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=n.default&&(0,o.default)(n.default)||{};return r.map(function(r){var o=n[r];return o&&(0,a.default)(o,function(n,r){i[r]||(i[r]={}),i[r]=s({},i[r],o[r]);}),r;}),i;};r.default=u;},"01b2eefa":function(n,r,i){"use strict";function a(n,r){r||(r=[]);var i,a=n?Math.min(r.length,n.length):0,o=r.slice();return function(s){for(i=0;i<a;++i)o[i]=n[i]*(1-s)+r[i]*s;return o;};}function o(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView);}i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return a;},isNumberArray:function(){return o;}});},"01c1137e":function(n,r,i){"use strict";function a(n,r,i,a,o){for(var s,l=n.children,u=-1,c=l.length,f=n.value&&(o-i)/n.value;++u<c;)(s=l[u]).x0=r,s.x1=a,s.y0=i,s.y1=i+=s.value*f;}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},"01f98d92":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{arrAdd:function(){return f;},arrDel:function(){return c;},calcDropPosition:function(){return g;},calcSelectedKeys:function(){return v;},conductExpandParent:function(){return _;},getDragChildrenKeys:function(){return h;},isFirstChild:function(){return m;},isLastChild:function(){return p;},parseCheckedKeys:function(){return y;},posToArr:function(){return d;}});var a=i("777fffbe"),o=a._(i("f1020fa4")),s=a._(i("99c0cd4c")),l=a._(i("a275200c"));i("609f48be"),i("202d5e21");var u=a._(i("07aa9410"));function c(n,r){if(!n)return[];var i=n.slice(),a=i.indexOf(r);return a>=0&&i.splice(a,1),i;}function f(n,r){var i=(n||[]).slice();return -1===i.indexOf(r)&&i.push(r),i;}function d(n){return n.split("-");}function h(n,r){var i=[];return!function n(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];r.forEach(function(r){var a=r.key,o=r.children;i.push(a),n(o);});}((0,u.default)(r,n).children),i;}function p(n){if(n.parent){var r=d(n.pos);return Number(r[r.length-1])===n.parent.children.length-1;}return!1;}function m(n){var r=d(n.pos);return 0===Number(r[r.length-1]);}function g(n,r,i,a,o,s,l,c,f,d){var h,g=n.clientX,v=n.clientY,y=n.target.getBoundingClientRect(),_=y.top,b=y.height,x=(("rtl"===d?-1:1)*(((null==o?void 0:o.x)||0)-g)-12)/a,E=f.filter(function(n){var r;return null===(r=c[n])||void 0===r||null===(r=r.children)||void 0===r?void 0:r.length;}),w=(0,u.default)(c,i.eventKey);if(v<_+b/2){var S=l.findIndex(function(n){return n.key===w.key;}),T=l[S<=0?0:S-1].key;w=(0,u.default)(c,T);}var A=w.key,C=w,O=w.key,M=0,R=0;if(!E.includes(A))for(var P=0;P<x&&p(w);P+=1)w=w.parent,R+=1;var k=r.data,I=w.node,L=!0;return m(w)&&0===w.level&&v<_+b/2&&s({dragNode:k,dropNode:I,dropPosition:-1})&&w.key===i.eventKey?M=-1:(C.children||[]).length&&E.includes(O)?s({dragNode:k,dropNode:I,dropPosition:0})?M=0:L=!1:0===R?x>-1.5?s({dragNode:k,dropNode:I,dropPosition:1})?M=1:L=!1:s({dragNode:k,dropNode:I,dropPosition:0})?M=0:s({dragNode:k,dropNode:I,dropPosition:1})?M=1:L=!1:s({dragNode:k,dropNode:I,dropPosition:1})?M=1:L=!1,{dropPosition:M,dropLevelOffset:R,dropTargetKey:w.key,dropTargetPos:w.pos,dragOverNodeKey:O,dropContainerKey:0===M?null:(null===(h=w.parent)||void 0===h?void 0:h.key)||null,dropAllowed:L};}function v(n,r){if(n)return r.multiple?n.slice():n.length?[n[0]]:n;}function y(n){var r;if(!n)return null;if(Array.isArray(n))r={checkedKeys:n,halfCheckedKeys:void 0};else{if("object"!==(0,s.default)(n))return(0,l.default)(!1,"`checkedKeys` is not an array or an object"),null;r={checkedKeys:n.checked||void 0,halfCheckedKeys:n.halfChecked||void 0};}return r;}function _(n,r){var i=new Set;return(n||[]).forEach(function(n){!function n(a){if(!i.has(a)){var o=(0,u.default)(r,a);if(o){i.add(a);var s=o.parent;!o.node.disabled&&s&&n(s.key);}}}(n);}),(0,o.default)(i);}i("d105a374");},"0272f1d7":function(n,r,i){n.exports=function(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this;};},"02a23b09":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{GridContext:function(){return m;},gridHelpers:function(){return g;},useGridHelpers:function(){return v;}});var a=i("777fffbe"),o=a._(i("99c0cd4c")),s=a._(i("e4870cf0")),l=a._(i("613f75ca")),u=a._(i("78a22024")),c=a._(i("adf76174")),f=i("609f48be"),d=i("dac8af92"),h=["children","Wrapper"],p=["children","Wrapper"],m=(0,f.createContext)({grid:!1,colProps:void 0,rowProps:void 0}),g=function(n){var r=n.grid,i=n.rowProps,a=n.colProps;return{grid:!!r,RowWrapper:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.children,o=n.Wrapper,u=(0,l.default)(n,h);return r?(0,d.jsx)(c.default,(0,s.default)((0,s.default)((0,s.default)({gutter:8},i),u),{},{children:a})):o?(0,d.jsx)(o,{children:a}):a;},ColWrapper:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.children,o=n.Wrapper,c=(0,l.default)(n,p),h=(0,f.useMemo)(function(){var n=(0,s.default)((0,s.default)({},a),c);return void 0===n.span&&void 0===n.xs&&(n.xs=24),n;},[c]);return r?(0,d.jsx)(u.default,(0,s.default)((0,s.default)({},h),{},{children:i})):o?(0,d.jsx)(o,{children:i}):i;}};},v=function(n){var r=(0,f.useMemo)(function(){return"object"===(0,o.default)(n)?n:{grid:n};},[n]),i=(0,f.useContext)(m),a=i.grid,s=i.colProps;return(0,f.useMemo)(function(){return g({grid:!!(a||r.grid),rowProps:null==r?void 0:r.rowProps,colProps:(null==r?void 0:r.colProps)||s,Wrapper:null==r?void 0:r.Wrapper});},[null==r?void 0:r.Wrapper,r.grid,a,JSON.stringify([s,null==r?void 0:r.colProps,null==r?void 0:r.rowProps])]);};},"02f16af6":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return l;}});var a=i("777fffbe")._(i("4017e4bc")),o=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,s=RegExp(o.source,"g");function l(n,r){var i,l,u,c,f,d=o.lastIndex=s.lastIndex=0,h=-1,p=[],m=[];for(n+="",r+="";(u=o.exec(n))&&(c=s.exec(r));)(f=c.index)>d&&(f=r.slice(d,f),p[h]?p[h]+=f:p[++h]=f),(u=u[0])===(c=c[0])?p[h]?p[h]+=c:p[++h]=c:(p[++h]=null,m.push({i:h,x:(0,a.default)(u,c)})),d=s.lastIndex;return d<r.length&&(f=r.slice(d),p[h]?p[h]+=f:p[++h]=f),p.length<2?m[0]?(i=m[0].x,function(n){return i(n)+"";}):(l=r,function(){return l;}):(r=m.length,function(n){for(var i,a=0;a<r;++a)p[(i=m[a]).i]=i.x(n);return p.join("");});}},"036338e2":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{Polar:function(){return o;},getPolarOptions:function(){return a;}});let a=(n={})=>{var r,i;let a=Object.assign(Object.assign({},{startAngle:-Math.PI/2,endAngle:3*Math.PI/2,innerRadius:0,outerRadius:1}),n);return Object.assign(Object.assign({},a),(r=a.startAngle,i=a.endAngle,r%=2*Math.PI,i%=2*Math.PI,r<0&&(r=2*Math.PI+r),i<0&&(i=2*Math.PI+i),r>=i&&(i+=2*Math.PI),{startAngle:r,endAngle:i}));},o=n=>{let{startAngle:r,endAngle:i,innerRadius:o,outerRadius:s}=a(n);return[["translate",0,.5],["reflect.y"],["translate",0,-.5],["polar",r,i,o,s]];};o.props={};},"0381584d":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{Marker:function(){return v;}});var a=i("777fffbe"),o=i("3862611d"),s=i("da5c7e2c"),l=a._(s),u=i("47a6bde3"),c=i("a602d54e"),f=i("b0ea517f"),d=i("14887fae"),h=i("428badac"),p=a._(h),m=i("d0572d97"),g=a._(m),v=function(n){function r(){return null!==n&&n.apply(this,arguments)||this;}return(0,o.__extends)(r,n),r.prototype.render=function(n,i){var a,s=n.x,u=void 0===s?0:s,d=n.y,h=void 0===d?0:d,m=this.getSubShapeStyle(n),v=m.symbol,y=m.size,_=void 0===y?16:y,b=(0,o.__rest)(m,["symbol","size"]),x=["base64","url","image"].includes(a=function(n){var r="default";if((0,p.default)(n)&&n instanceof Image)r="image";else if((0,l.default)(n))r="symbol";else if((0,g.default)(n)){var i=RegExp("data:(image|text)");r=n.match(i)?"base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(n)?"url":"symbol";}return r;}(v))?"image":v&&"symbol"===a?"path":null;(0,c.ifShow)(!!x,(0,f.select)(i),function(n){n.maybeAppendByClassName("marker",x).attr("className","marker ".concat(x,"-marker")).call(function(n){if("image"===x){var i=2*_;n.styles({img:v,width:i,height:i,x:u-_,y:h-_});}else{var i=_/2,a=(0,l.default)(v)?v:r.getSymbol(v);n.styles((0,o.__assign)({d:null==a?void 0:a(u,h,i)},b));}});});},r.MARKER_SYMBOL_MAP=new Map,r.registerSymbol=function(n,i){r.MARKER_SYMBOL_MAP.set(n,i);},r.getSymbol=function(n){return r.MARKER_SYMBOL_MAP.get(n);},r.getSymbols=function(){return Array.from(r.MARKER_SYMBOL_MAP.keys());},r;}(u.Component);v.registerSymbol("cross",d.cross),v.registerSymbol("hyphen",d.hyphen),v.registerSymbol("line",d.line),v.registerSymbol("plus",d.plus),v.registerSymbol("tick",d.tick),v.registerSymbol("circle",d.circle),v.registerSymbol("point",d.point),v.registerSymbol("bowtie",d.bowtie),v.registerSymbol("hexagon",d.hexagon),v.registerSymbol("square",d.square),v.registerSymbol("diamond",d.diamond),v.registerSymbol("triangle",d.triangle),v.registerSymbol("triangle-down",d.triangleDown),v.registerSymbol("line",d.line),v.registerSymbol("dot",d.dot),v.registerSymbol("dash",d.dash),v.registerSymbol("smooth",d.smooth),v.registerSymbol("hv",d.hv),v.registerSymbol("vh",d.vh),v.registerSymbol("hvh",d.hvh),v.registerSymbol("vhv",d.vhv);},"041c1263":function(n,r,i){n.exports=function(n,r){for(var i=-1,a=null==n?0:n.length;++i<a&&!1!==r(n[i],i,n););return n;};},"04e1d050":function(n,r,i){"use strict";function a(n,r,i,a){this.cx=3*n,this.bx=3*(i-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(a-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=r,this.p2x=i,this.p2y=a;}n.exports=a,a.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n;},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n;},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx;},solveCurveX:function(n,r){if(void 0===r&&(r=1e-6),n<0)return 0;if(n>1)return 1;for(var i=n,a=0;a<8;a++){var o=this.sampleCurveX(i)-n;if(Math.abs(o)<r)return i;var s=this.sampleCurveDerivativeX(i);if(1e-6>Math.abs(s))break;i-=o/s;}var l=0,u=1;for(a=0,i=n;a<20&&!(Math.abs((o=this.sampleCurveX(i))-n)<r);a++)n>o?l=i:u=i,i=(u-l)*.5+l;return i;},solve:function(n,r){return this.sampleCurveY(this.solveCurveX(n,r));}};},"04ecc0fa":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return v;}});var a=i("777fffbe"),o=a._(i("23934e00")),s=a._(i("9b84be4b")),l=a._(i("613f75ca")),u=a._(i("e4870cf0")),c=a._(i("ddaa0afd")),f=i("a275200c"),d=i("609f48be"),h=i("cd1e34ba"),p=i("efd8a033"),m=i("dac8af92"),g=["onFinish","step","formRef","title","stepProps"],v=function(n){var r,i=(0,d.useRef)(),a=(0,d.useContext)(p.StepsFormProvide),v=(0,d.useContext)(p.StepFormProvide),y=(0,u.default)((0,u.default)({},n),v),_=y.onFinish,b=y.step,x=y.formRef,E=(y.title,y.stepProps,(0,l.default)(y,g));return(0,f.noteOnce)(!E.submitter,"StepForm \u4E0D\u5305\u542B\u63D0\u4EA4\u6309\u94AE\uFF0C\u8BF7\u5728 StepsForm \u4E0A"),(0,d.useImperativeHandle)(x,function(){return i.current;},[null==x?void 0:x.current]),(0,d.useEffect)(function(){if(y.name||y.step){var n=(y.name||y.step).toString();return null==a||a.regForm(n,y),function(){null==a||a.unRegForm(n);};}},[]),a&&null!=a&&a.formArrayRef&&(a.formArrayRef.current[b||0]=i),(0,m.jsx)(h.BaseForm,(0,u.default)({formRef:i,onFinish:(r=(0,s.default)((0,o.default)().mark(function n(r){return(0,o.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(E.name&&(null==a||a.onFormFinish(E.name,r)),!_){n.next=9;break;}return null==a||a.setLoading(!0),n.next=5,null==_?void 0:_(r);case 5:return n.sent&&(null==a||a.next()),null==a||a.setLoading(!1),n.abrupt("return");case 9:null!=a&&a.lastStep||null==a||a.next();case 10:case"end":return n.stop();}},n);})),function(n){return r.apply(this,arguments);}),onInit:function(n,r){var o;i.current=r,a&&null!=a&&a.formArrayRef&&(a.formArrayRef.current[b||0]=i),null==E||null===(o=E.onInit)||void 0===o||o.call(E,n,r);},layout:"vertical"},(0,c.default)(E,["layoutType","columns"])));};},"04fd6645":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return B;}});var a=i("777fffbe"),o=i("9b84be4b"),s=a._(o),l=i("a854094b"),u=a._(l),c=i("e333157c"),f=a._(c),d=i("824b66b4"),h=a._(d),p=i("991309e4"),m=a._(p),g=i("c0d77826"),v=a._(g),y=i("001de73b"),_=a._(y),b=i("9063dcee"),x=a._(b),E=i("21da3e32"),w=a._(E),S=i("e4870cf0"),T=a._(S),A=i("553ee311"),C=i("9479dab9"),O=i("6654a076"),M=a._(O),R=i("8970bd89");function P(){return(P=(0,s.default)(function*(n){if(window.createImageBitmap){let r=yield fetch(n);return yield createImageBitmap((yield r.blob()));}{let r=new window.Image;return new Promise(i=>{r.onload=()=>i(r),r.src=n,r.crossOrigin="Anonymous";});}})).apply(this,arguments);}class k extends M.default{constructor(...n){super(...n),(0,u.default)(this,"texture",void 0);}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,NORMAL:10,UV:11});}getUninforms(){let n=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,T.default)((0,T.default)({},n.uniformsOption),r.uniformsOption);}getCommonUniformsInfo(){let{mapTexture:n,heightfixed:r=!1,raisingHeight:i=0,topsurface:a=!0,sidesurface:o=!0,sourceColor:s,targetColor:l}=this.layer.getLayerConfig(),u=0,c=[1,1,1,1],f=[1,1,1,1];s&&l&&(c=(0,C.rgb2arr)(s),f=(0,C.rgb2arr)(l),u=1);let d={u_sourceColor:c,u_targetColor:f,u_linearColor:u,u_topsurface:Number(a),u_sidesurface:Number(o),u_heightfixed:Number(r),u_raisingHeight:Number(i)};return n&&this.texture&&(d.u_texture=this.texture,this.textures=[this.texture]),this.getUniformsBufferInfo(d);}initModels(){var n=this;return(0,s.default)(function*(){return yield n.loadTexture(),n.buildModels();})();}buildModels(){var n=this;return(0,s.default)(function*(){let{frag:r,vert:i,type:a}=n.getShaders();return n.initUniformsBuffer(),[(yield n.layer.buildLayerModel({moduleName:a,vertexShader:i,fragmentShader:r,depth:{enable:!0},defines:n.getDefines(),inject:n.getInject(),triangulation:R.PolygonExtrudeTriangulation}))];})();}getShaders(){let{pickLight:n,mapTexture:r}=this.layer.getLayerConfig();return r?{frag:'uniform sampler2D u_texture;\n\nlayout(std140) uniform commonUniforms {\n  vec4 u_sourceColor;\n  vec4 u_targetColor;\n  float u_linearColor;\n  float u_topsurface;\n  float u_sidesurface;\n  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A\n  float u_raisingHeight;\n};\n\nin vec4 v_Color;\nin vec3 v_uvs;\nin vec2 v_texture_data;\n\n#pragma include "scene_uniforms"\n#pragma include "picking"\n\nout vec4 outputColor;\n\nvoid main() {\n  float opacity = u_opacity;\n  float isSide = v_texture_data.x;\n  float lightWeight = v_texture_data.y;\n  float topU = v_uvs[0];\n  float topV = 1.0 - v_uvs[1];\n  float sidey = v_uvs[2];\n\n  outputColor = texture(SAMPLER_2D(u_texture), vec2(topU, topV));\n  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9\n  if (isSide < 0.999) {// \u662F\u5426\u662F\u8FB9\u7F18\n    // side face\n    if (u_sidesurface < 1.0) {\n      discard;\n    }\n\n    if (u_linearColor == 1.0) {\n      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);\n      linearColor.rgb *= lightWeight;\n      outputColor = linearColor;\n    } else {\n      outputColor = v_Color;\n    }\n  } else {\n     // top face\n    if (u_topsurface < 1.0) {\n      discard;\n    }\n  }\n  \n  outputColor.a *= opacity;\n  outputColor = filterColor(outputColor);\n}\n',vert:'layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;\nlayout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;\nlayout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;\nlayout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;\nlayout(location = ATTRIBUTE_LOCATION_UV) in vec3 a_uvs;\n\nlayout(std140) uniform commonUniforms {\n  vec4 u_sourceColor;\n  vec4 u_targetColor;\n  float u_linearColor;\n  float u_topsurface;\n  float u_sidesurface;\n  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A\n  float u_raisingHeight;\n};\n\nout vec4 v_Color;\nout vec3 v_uvs;\nout vec2 v_texture_data;\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nvoid main() {\n  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);\n  vec4 project_pos = project_position(pos, a_Position64Low);\n  float lightWeight = calc_lighting(project_pos);\n  v_uvs = a_uvs;\n  v_Color = a_Color;\n  v_Color.a *= opacity;\n\n  v_texture_data = vec2(a_Position.z, lightWeight);\n\n  if (u_heightfixed > 0.0) {\n    // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6\n    project_pos.z = a_Position.z * a_Size;\n    project_pos.z += u_raisingHeight;\n\n    if (\n      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET\n    ) {\n      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);\n      project_pos.z *= mapboxZoomScale;\n      project_pos.z += u_raisingHeight * mapboxZoomScale;\n    }\n  }\n\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  setPickingColor(a_PickingColor);\n}\n',type:"polygonExtrudeTexture"}:n?{frag:'\nlayout(std140) uniform commonUniforms {\n  vec4 u_sourceColor;\n  vec4 u_targetColor;\n  float u_linearColor;\n  float u_topsurface;\n  float u_sidesurface;\n  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A\n  float u_raisingHeight;\n};\n\nin vec4 v_Color;\nin vec3 v_uvs;\nin vec2 v_texture_data;\nout vec4 outputColor;\n\n#pragma include "scene_uniforms"\n#pragma include "picking"\n\nvoid main() {\n  float isSide =  v_texture_data.x;\n  float sidey = v_uvs[2];\n  float lightWeight = v_texture_data.y;\n\n  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9\n  if(isSide < 0.999) {\n    // side face\n    if(u_sidesurface < 1.0) {\n      discard;\n    }\n    \n    if( u_linearColor == 1.0) {\n      // side use linear\n      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);\n      linearColor.rgb *= lightWeight;\n      outputColor = linearColor;\n    } else {\n      // side notuse linear\n       outputColor = v_Color;\n    }\n  } else {\n    // top face\n    if(u_topsurface < 1.0) {\n      discard;\n    }\n    outputColor = v_Color;\n  }\n\n  outputColor = filterColorAlpha(outputColor, lightWeight);\n}\n',vert:'layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;\nlayout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;\nlayout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;\nlayout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;\nlayout(location = ATTRIBUTE_LOCATION_UV) in vec3 a_uvs;\n\nlayout(std140) uniform commonUniforms {\n  vec4 u_sourceColor;\n  vec4 u_targetColor;\n  float u_linearColor;\n  float u_topsurface;\n  float u_sidesurface;\n  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A\n  float u_raisingHeight;\n};\n\nout vec4 v_Color;\nout vec3 v_uvs;\nout vec2 v_texture_data;\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nvoid main() {\n  v_uvs = a_uvs;\n  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97\n  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);\n  vec4 project_pos = project_position(pos, a_Position64Low);\n\n  if (u_heightfixed > 0.0) {\n    // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6\n    project_pos.z = a_Position.z * a_Size;\n    project_pos.z += u_raisingHeight;\n    if (\n      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET\n    ) {\n      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);\n      project_pos.z *= mapboxZoomScale;\n      project_pos.z += u_raisingHeight * mapboxZoomScale;\n    }\n  }\n\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  float lightWeight = calc_lighting(project_pos);\n  v_texture_data = vec2(a_Position.z, lightWeight);\n\n  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);\n\n  setPickingColor(a_PickingColor);\n}\n',type:"polygonExtrudePickLight"}:{frag:'layout(std140) uniform commonUniforms {\n  vec4 u_sourceColor;\n  vec4 u_targetColor;\n  float u_linearColor;\n  float u_topsurface;\n  float u_sidesurface;\n  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A\n  float u_raisingHeight;\n};\n\nin vec4 v_Color;\n#pragma include "scene_uniforms"\n#pragma include "picking"\nout vec4 outputColor;\nvoid main() {\n\n     // top face\n    if(u_topsurface < 1.0) {\n      discard;\n    }\n\n    outputColor = v_Color;\n  \n  outputColor = filterColor(outputColor);\n}\n',vert:'layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;\nlayout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;\nlayout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;\nlayout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;\nlayout(location = ATTRIBUTE_LOCATION_UV) in vec3 a_uvs;\n\nlayout(std140) uniform commonUniforms {\n  vec4 u_sourceColor;\n  vec4 u_targetColor;\n  float u_linearColor;\n  float u_topsurface;\n  float u_sidesurface;\n  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A\n  float u_raisingHeight;\n};\n\nout vec4 v_Color;\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nvoid main() {\n  float isSide = a_Position.z;\n  float topU = a_uvs[0];\n  float topV = 1.0 - a_uvs[1];\n  float sidey = a_uvs[2];\n\n  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);\n\n  vec4 project_pos = project_position(pos, a_Position64Low);\n  float lightWeight = calc_lighting(project_pos);\n\n  if (u_heightfixed > 0.0) {\n    // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6\n    project_pos.z = a_Position.z * a_Size;\n    project_pos.z += u_raisingHeight;\n\n    if (\n      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET\n    ) {\n      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);\n      project_pos.z *= mapboxZoomScale;\n      project_pos.z += u_raisingHeight * mapboxZoomScale;\n    }\n  }\n\n gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9\n  if (isSide < 0.999) {\n    // side face\n    // if(u_sidesurface < 1.0) {\n    //   discard;\n    // }\n\n    if (u_linearColor == 1.0) {\n      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);\n      linearColor.rgb *= lightWeight;\n      v_Color = linearColor;\n    } else {\n      v_Color = a_Color;\n    }\n\n  } else {\n    v_Color = a_Color;\n  }\n\n  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);\n\n  setPickingColor(a_PickingColor);\n}\n',type:"polygonExtrude"};}clearModels(){var n;null===(n=this.texture)||void 0===n||n.destroy(),this.textures=[];}registerBuiltinAttributes(){let n=this.layer.getSource().extent,r=n[2]-n[0],i=n[3]-n[1];this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uvs",type:A.AttributeType.Attribute,descriptor:{name:"a_uvs",shaderLocation:this.attributeLocation.UV,buffer:{usage:A.gl.STATIC_DRAW,data:[],type:A.gl.FLOAT},size:3,update:(a,o,s)=>{let l=s[0],u=s[1];return[(l-n[0])/r,(u-n[1])/i,s[4]];}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:A.AttributeType.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:A.gl.STATIC_DRAW,data:[],type:A.gl.FLOAT},size:3,update:(n,r,i,a,o)=>o}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:A.AttributeType.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:A.gl.DYNAMIC_DRAW,data:[],type:A.gl.FLOAT},size:1,update:n=>{let{size:r=10}=n;return Array.isArray(r)?[r[0]]:[r];}}});}loadTexture(){var n=this;return(0,s.default)(function*(){let{mapTexture:r}=n.layer.getLayerConfig(),{createTexture2D:i}=n.rendererService;if(n.texture=i({height:1,width:1}),r){let a=yield function(n){return P.apply(this,arguments);}(r);n.texture=i({data:a,width:a.width,height:a.height,wrapS:A.gl.CLAMP_TO_EDGE,wrapT:A.gl.CLAMP_TO_EDGE,min:A.gl.LINEAR,mag:A.gl.LINEAR});}})();}}class I extends M.default{constructor(...n){super(...n),(0,u.default)(this,"texture",void 0);}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,NORMAL:10,EXTRUSION_BASE:11});}getUninforms(){let n=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,T.default)((0,T.default)({},n.uniformsOption),r.uniformsOption);}getCommonUniformsInfo(){return this.getUniformsBufferInfo({});}initModels(){var n=this;return(0,s.default)(function*(){return n.buildModels();})();}buildModels(){var n=this;return(0,s.default)(function*(){let{frag:r,vert:i,type:a}=n.getShaders();return n.initUniformsBuffer(),[(yield n.layer.buildLayerModel({moduleName:a,vertexShader:i,fragmentShader:r,defines:n.getDefines(),inject:n.getInject(),triangulation:R.PolygonExtrudeTriangulation,depth:{enable:!0}}))];})();}getShaders(){return{frag:'\nin vec4 v_Color;\n#pragma include "scene_uniforms"\n#pragma include "picking"\nout vec4 outputColor;\nvoid main() {\n\n  outputColor = v_Color;\n  outputColor = filterColor(outputColor);\n}\n',vert:'layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;\nlayout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;\nlayout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;\nlayout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;\n\nout vec4 v_Color;\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nvoid main() {\n  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size + (1.0 - a_Position.z) * extrusionBase, 1.0);\n\n  vec4 project_pos = project_position(pos, a_Position64Low);\n  float lightWeight = calc_lighting(project_pos);\n  v_Color = a_Color;\n  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);\n\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  setPickingColor(a_PickingColor);\n}\n',type:"polygonExtrude"};}clearModels(){var n;null===(n=this.texture)||void 0===n||n.destroy();}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"normal",type:A.AttributeType.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:A.gl.STATIC_DRAW,data:[],type:A.gl.FLOAT},size:3,update:(n,r,i,a,o)=>o}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:A.AttributeType.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:A.gl.DYNAMIC_DRAW,data:[],type:A.gl.FLOAT},size:1,update:n=>{let{size:r=10}=n;return Array.isArray(r)?[r[0]]:[r];}}}),this.styleAttributeService.registerStyleAttribute({name:"extrusionBase",type:A.AttributeType.Attribute,descriptor:{name:"a_ExtrusionBase",shaderLocation:this.attributeLocation.EXTRUSION_BASE,buffer:{usage:A.gl.STATIC_DRAW,data:[],type:A.gl.FLOAT},size:1,update:n=>{let{extrusionBase:r=0}=n;return[r];}}});}}class L extends M.default{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,LINEAR:9});}getUninforms(){let n=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,T.default)((0,T.default)({},n.uniformsOption),r.uniformsOption);}getCommonUniformsInfo(){let{raisingHeight:n=0,opacityLinear:r={enable:!1,dir:"in"}}=this.layer.getLayerConfig(),i={u_raisingHeight:Number(n),u_opacitylinear:Number(r.enable),u_dir:"in"===r.dir?1:0};return this.getUniformsBufferInfo(i);}initModels(){var n=this;return(0,s.default)(function*(){return n.buildModels();})();}buildModels(){var n=this;return(0,s.default)(function*(){let{frag:r,vert:i,triangulation:a,type:o}=n.getModelParams();return n.initUniformsBuffer(),n.layer.triangulation=a,[(yield n.layer.buildLayerModel({moduleName:o,vertexShader:i,fragmentShader:r,defines:n.getDefines(),inject:n.getInject(),triangulation:a,primitive:A.gl.TRIANGLES,depth:{enable:!1}}))];})();}registerBuiltinAttributes(){this.registerPosition64LowAttribute();let{opacityLinear:n={enable:!1,dir:"in"}}=this.layer.getLayerConfig();n.enable&&this.styleAttributeService.registerStyleAttribute({name:"linear",type:A.AttributeType.Attribute,descriptor:{name:"a_linear",shaderLocation:this.attributeLocation.LINEAR,buffer:{usage:A.gl.STATIC_DRAW,data:[],type:A.gl.FLOAT},size:3,update:(n,r,i)=>[i[3],i[4],i[5]]}});}getModelParams(){let{opacityLinear:n={enable:!1}}=this.layer.getLayerConfig();return n.enable?{frag:'\nlayout(std140) uniform commonUniforms {\n  float u_raisingHeight;\n  float u_opacitylinear;\n  float u_dir;\n};\n\nin vec4 v_color;\nin vec3 v_linear;\nin vec2 v_pos;\nout vec4 outputColor;\n#pragma include "scene_uniforms"\n#pragma include "picking"\n\nvoid main() {\n  outputColor = v_color;\n  if (u_opacitylinear > 0.0) {\n    outputColor.a *= u_dir == 1.0 ? 1.0 - length(v_pos - v_linear.xy)/v_linear.z : length(v_pos - v_linear.xy)/v_linear.z;\n  }\n  outputColor = filterColor(outputColor);\n}\n',vert:'layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;\nlayout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;\nlayout(location = ATTRIBUTE_LOCATION_LINEAR) in vec3 a_linear;\n\nlayout(std140) uniform commonUniforms {\n  float u_raisingHeight;\n  float u_opacitylinear;\n  float u_dir;\n};\n\nout vec4 v_color;\nout vec3 v_linear;\nout vec2 v_pos;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  if (u_opacitylinear > 0.0) {\n    v_linear = a_linear;\n    v_pos = a_Position.xy;\n  }\n  v_color = vec4(a_Color.xyz, a_Color.w * opacity);\n  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);\n  project_pos.z += u_raisingHeight;\n\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n    project_pos.z *= mapboxZoomScale;\n    project_pos.z += u_raisingHeight * mapboxZoomScale;\n  }\n\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  setPickingColor(a_PickingColor);\n}\n',type:"polygonLinear",triangulation:R.polygonTriangulationWithCenter}:{frag:'in vec4 v_color;\n#pragma include "scene_uniforms"\n#pragma include "picking"\nout vec4 outputColor;\nvoid main() {\n  outputColor = v_color;\n  outputColor = filterColor(outputColor);\n}\n',vert:'layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;\nlayout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;\n\nlayout(std140) uniform commonUniforms {\n  float u_raisingHeight;\n};\n\nout vec4 v_color;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97\n\n  v_color = vec4(a_Color.xyz, a_Color.w * opacity);\n  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);\n\n  project_pos.z += u_raisingHeight;\n\n  if (\n    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET\n  ) {\n    float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);\n    project_pos.z *= mapboxZoomScale;\n    project_pos.z += u_raisingHeight * mapboxZoomScale;\n  }\n\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  setPickingColor(a_PickingColor);\n}\n\n',type:"polygonFill",triangulation:R.polygonTriangulation};}}class N extends M.default{constructor(...n){super(...n),(0,u.default)(this,"texture1",void 0),(0,u.default)(this,"texture2",void 0),(0,u.default)(this,"texture3",void 0);}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9});}getUninforms(){let n=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,T.default)((0,T.default)({},n.uniformsOption),r.uniformsOption);}getCommonUniformsInfo(){let{watercolor:n="#6D99A8",watercolor2:r="#0F121C"}=this.layer.getLayerConfig(),i={u_watercolor:(0,C.rgb2arr)(n),u_watercolor2:(0,C.rgb2arr)(r),u_time:this.layer.getLayerAnimateTime(),u_texture1:this.texture1,u_texture2:this.texture2,u_texture3:this.texture3};return this.textures=[this.texture1,this.texture2,this.texture3],this.getUniformsBufferInfo(i);}getAnimateUniforms(){return{u_time:this.layer.getLayerAnimateTime()};}initModels(){var n=this;return(0,s.default)(function*(){return n.loadTexture(),n.buildModels();})();}buildModels(){var n=this;return(0,s.default)(function*(){return n.initUniformsBuffer(),[(yield n.layer.buildLayerModel({moduleName:"polygonOcean",vertexShader:'layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_uv;\n\nlayout(std140) uniform commonUniforms {\n  vec4 u_watercolor;\n  vec4 u_watercolor2;\n  float u_time;\n};\n\nout vec2 v_uv;\nout float v_opacity;\n\n#pragma include "projection"\n\nvoid main() {\n  v_uv = a_uv;\n  v_opacity = opacity;\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n}\n\n',fragmentShader:"\nlayout(std140) uniform commonUniforms {\n  vec4 u_watercolor;\n  vec4 u_watercolor2;\n  float u_time;\n};\n\nin vec2 v_uv;\nin float v_opacity;\nout vec4 outputColor;\n\nfloat coast2water_fadedepth = 0.10;\nfloat large_waveheight      = .750; // change to adjust the \"heavy\" waves\nfloat large_wavesize        = 3.4;  // factor to adjust the large wave size\nfloat small_waveheight      = 0.6;  // change to adjust the small random waves\nfloat small_wavesize        = 0.5;   // factor to ajust the small wave size\nfloat water_softlight_fact  = 15.;  // range [1..200] (should be << smaller than glossy-fact)\nfloat water_glossylight_fact= 120.; // range [1..200]\nfloat particle_amount       = 70.;\n\nvec3 water_specularcolor    = vec3(1.3, 1.3, 0.9);    // specular Color (RGB) of the water-highlights\n#define light                 vec3(-0., sin(u_time*0.5)*.5 + .35, 2.8) // position of the sun\n\nuniform sampler2D u_texture1;\nuniform sampler2D u_texture2;\nuniform sampler2D u_texture3;\n\n  \n\nfloat hash( float n ) {\n    return fract(sin(n)*43758.5453123);\n}\n\n// 2d noise function\nfloat noise1( in vec2 x ) {\n  vec2 p  = floor(x);\n  vec2 f  = smoothstep(0.0, 1.0, fract(x));\n  float n = p.x + p.y*57.0;\n  return mix(mix( hash(n+  0.0), hash(n+  1.0),f.x),\n    mix( hash(n+ 57.0), hash(n+ 58.0),f.x),f.y);\n}\n\nfloat noise(vec2 p) {\n    return texture(SAMPLER_2D(u_texture2),p*vec2(1./256.)).x;\n}\n\nvec4 highness(vec2 p) {\n    vec4 t = texture(SAMPLER_2D(u_texture1),fract(p));\n    float clipped = -2.0-smoothstep(3.,10.,t.a)*6.9-smoothstep(10.,100.,t.a)*89.9-smoothstep(0.,10000.,t.a)*10000.0;\n    return clamp(t, 0.0,3.0)+clamp(t/3.0-1.0, 0.0,1.0)+clamp(t/16.0-1.0, 0.0,1.0);\n}\n\nfloat height_map( vec2 p ) {\n    vec4 height=highness(p);\n    /*\n    height = -0.5+\n        0.5*smoothstep(-100.,0.,-height)+\n        2.75*smoothstep(0.,2.,height)+\n        1.75*smoothstep(2.,4.,height)+\n        2.75*smoothstep(4.,16.,height)+\n        1.5*smoothstep(16.,1000.,height);\n    */\n\n    mat2 m = mat2( 0.9563*1.4,  -0.2924*1.4,  0.2924*1.4,  0.9563*1.4 );\n    //p = p*6.;\n    float f = 0.6000*noise1( p ); p = m*p*1.1*6.;\n    f += 0.2500*noise( p ); p = m*p*1.32;\n    f += 0.1666*noise( p ); p = m*p*1.11;\n    f += 0.0834*noise( p ); p = m*p*1.12;\n    f += 0.0634*noise( p ); p = m*p*1.13;\n    f += 0.0444*noise( p ); p = m*p*1.14;\n    f += 0.0274*noise( p ); p = m*p*1.15;\n    f += 0.0134*noise( p ); p = m*p*1.16;\n    f += 0.0104*noise( p ); p = m*p*1.17;\n    f += 0.0084*noise( p );\n    f = .25*f+dot(height,vec4(-.03125,-.125,.25,.25))*.5;\n        const float FLAT_LEVEL = 0.92525;\n        //f = f*0.25+height*0.75;\n    if (f<FLAT_LEVEL)\n        f = f;\n    else\n        f = pow((f-FLAT_LEVEL)/(1.-FLAT_LEVEL), 2.)*(1.-FLAT_LEVEL)*2.0+FLAT_LEVEL; // makes a smooth coast-increase\n    return clamp(f, 0., 10.);\n}\n\nvec3 plasma_quintic( float x ) {\n    x = clamp( x, 0.0, 1.0);\n    vec4 x1 = vec4( 1.0, x, x * x, x * x * x ); // 1 x x2 x3\n    vec4 x2 = x1 * x1.w * x; // x4 x5 x6 x7\n    return vec3(\n        dot( x1.xyzw, vec4( +0.063861086, +1.992659096, -1.023901152, -0.490832805 ) ) + dot( x2.xy, vec2( +1.308442123, -0.914547012 ) ),\n        dot( x1.xyzw, vec4( +0.049718590, -0.791144343, +2.892305078, +0.811726816 ) ) + dot( x2.xy, vec2( -4.686502417, +2.717794514 ) ),\n        dot( x1.xyzw, vec4( +0.513275779, +1.580255060, -5.164414457, +4.559573646 ) ) + dot( x2.xy, vec2( -1.916810682, +0.570638854 ) ) );\n}\n\nvec4 color(vec2 p){\n    vec4 c1 = vec4(1.7,1.6,.9,1);\n    vec4 c2 = vec4(.2,.94,.1,1);\n    vec4 c3 = vec4(.3,.2,.0,1);\n    vec4 c4 = vec4(.99,.99,1.6,1);\n    vec4 v = highness(p);\n    float los = smoothstep(0.1,1.1,v.b);\n    float his = smoothstep(3.5,6.5,v.b);\n    float ces = smoothstep(1.,5.,v.a);\n    vec4 lo = mix(c1,c2,los);\n    vec4 hi = mix(c3,c4,his);\n    vec4 ce = mix(lo,hi,ces);\n\n    return vec4(plasma_quintic(ces),1).ragb;\n}\n\nvec3 terrain_map( vec2 p )\n{\n  return color(p).rgb*0.75+0.25*vec3(0.7, .55, .4)+texture(SAMPLER_2D(u_texture3), fract(p*5.)).rgb*.5; // test-terrain is simply 'sandstone'\n}\n\nconst mat2 m = mat2( 0.72, -1.60,  1.60,  0.72 );\n\nfloat water_map( vec2 p, float height ) {\n    vec2 p2 = p*large_wavesize;\n    vec2 shift1 = 0.001*vec2( u_time*160.0*2.0, u_time*120.0*2.0 );\n    vec2 shift2 = 0.001*vec2( u_time*190.0*2.0, -u_time*130.0*2.0 );\n\n    // coarse crossing 'ocean' waves...\n    float f = 0.6000*noise( p );\n    f += 0.2500*noise( p*m );\n    f += 0.1666*noise( p*m*m );\n    float wave = sin(p2.x*0.622+p2.y*0.622+shift2.x*4.269)*large_waveheight*f*height*height ;\n\n    p *= small_wavesize;\n    f = 0.;\n    float amp = 1.0, s = .5;\n    for (int i=0; i<9; i++)\n    { p = m*p*.947; f -= amp*abs(sin((noise( p+shift1*s )-.5)*2.)); amp = amp*.59; s*=-1.329; }\n    \n    return wave+f*small_waveheight;\n}\n\nfloat nautic(vec2 p) {\n    p *= 18.;\n    float f = 0.;\n    float amp = 1.0, s = .5;\n    for (int i=0; i<3; i++)\n    { p = m*p*1.2; f += amp*abs(smoothstep(0., 1., noise( p+u_time*s ))-.5); amp = amp*.5; s*=-1.227; }\n    return pow(1.-f, 5.);\n}\n\nfloat particles(vec2 p) {\n    p *= 200.;\n    float f = 0.;\n    float amp = 1.0, s = 1.5;\n    for (int i=0; i<3; i++)\n    { p = m*p*1.2; f += amp*noise( p+u_time*s ); amp = amp*.5; s*=-1.227; }\n    return pow(f*.35, 7.)*particle_amount;\n}\n\nfloat test_shadow( vec2 xy, float height) {\n    vec3 r0 = vec3(xy, height);\n    vec3 rd = normalize( light - r0 );\n    \n    float hit = 1.0;\n    float t   = 0.001;\n    for (int j=1; j<25; j++)\n    {\n        vec3 p = r0 + t*rd;\n        float h = height_map( p.xy );\n        float height_diff = p.z - h;\n        if (height_diff<0.0)\n        {\n            return 0.0;\n        }\n        t += 0.01+height_diff*.02;\n        hit = min(hit, 2.*height_diff/t); // soft shaddow   \n    }\n    return hit;\n}\n\nvec3 CalcTerrain(vec2 uv, float height) {\n    vec3 col = terrain_map( uv );\n    vec2 iResolution = vec2(512.);\n    float h1 = height_map(uv-vec2(0., 0.5)/ iResolution.xy);\n    float h2 = height_map(uv+vec2(0., 0.5)/ iResolution.xy);\n    float h3 = height_map(uv-vec2(0.5, 0.)/ iResolution.xy);\n    float h4 = height_map(uv+vec2(0.5, 0.)/ iResolution.xy);\n    vec3 norm = normalize(vec3(h3-h4, h1-h2, 1.));\n    vec3 r0 = vec3(uv, height);\n    vec3 rd = normalize( light - r0 );\n    float grad = dot(norm, rd);\n    col *= grad+pow(grad, 8.);\n    float terrainshade = test_shadow( uv, height );\n    col = mix(col*.25, col, terrainshade);\n    return col;\n}\n\n\nvoid main() {\n  vec3 watercolor = u_watercolor.rgb;\n  vec3 watercolor2 = u_watercolor2.rgb;\n  vec2 uv = v_uv;\n  float WATER_LEVEL = 0.84; // Water level (range: 0.0 - 2.0)\n  float deepwater_fadedepth   = 0.4 + coast2water_fadedepth;\n  float height = height_map( uv );\n  vec3 col;\n\n    float waveheight = clamp(WATER_LEVEL*3.-1.5, 0., 1.);\n    float level = WATER_LEVEL + .2*water_map(uv*15. + vec2(u_time*.1), waveheight);\n    if (height > level)\n    {\n        col = CalcTerrain(uv, height);\n    }\n    if (height <= level)\n    {\n        vec2 dif = vec2(.0, .01);\n        vec2 pos = uv*15. + vec2(u_time*.01);\n        float h1 = water_map(pos-dif,waveheight);\n        float h2 = water_map(pos+dif,waveheight);\n        float h3 = water_map(pos-dif.yx,waveheight);\n        float h4 = water_map(pos+dif.yx,waveheight);\n        vec3 normwater = normalize(vec3(h3-h4, h1-h2, .125)); // norm-vector of the 'bumpy' water-plane\n        uv += normwater.xy*.002*(level-height);\n        \n        col = CalcTerrain(uv, height);\n\n        float coastfade = clamp((level-height)/coast2water_fadedepth, 0., 1.);\n        float coastfade2= clamp((level-height)/deepwater_fadedepth, 0., 1.);\n        float intensity = col.r*.2126+col.g*.7152+col.b*.0722;\n        watercolor = mix(watercolor*intensity, watercolor2, smoothstep(0., 1., coastfade2));\n\n        vec3 r0 = vec3(uv, WATER_LEVEL);\n        vec3 rd = normalize( light - r0 ); // ray-direction to the light from water-position\n        float grad     = dot(normwater, rd); // dot-product of norm-vector and light-direction\n        float specular = pow(grad, water_softlight_fact);  // used for soft highlights                          \n        float specular2= pow(grad, water_glossylight_fact); // used for glossy highlights\n        float gradpos  = dot(vec3(0., 0., 1.), rd);\n        float specular1= smoothstep(0., 1., pow(gradpos, 5.));  // used for diffusity (some darker corona around light's specular reflections...)                          \n        float watershade  = test_shadow( uv, level );\n        watercolor *= 2.2+watershade;\n        watercolor += (.2+.8*watershade) * ((grad-1.0)*.5+specular) * .25;\n        watercolor /= (1.+specular1*1.25);\n        watercolor += watershade*specular2*water_specularcolor;\n        watercolor += watershade*coastfade*(1.-coastfade2)*(vec3(.5, .6, .7)*nautic(uv)+vec3(1., 1., 1.)*particles(uv));\n        \n        col = mix(col, watercolor, coastfade);\n    }\n    \n  outputColor = vec4(col, v_opacity);  \n}\n",defines:n.getDefines(),inject:n.getInject(),triangulation:R.polygonTriangulation,primitive:A.gl.TRIANGLES,depth:{enable:!1}}))];})();}clearModels(){var n,r,i;null===(n=this.texture1)||void 0===n||n.destroy(),null===(r=this.texture2)||void 0===r||r.destroy(),null===(i=this.texture3)||void 0===i||i.destroy();}registerBuiltinAttributes(){let[n,r,i,a]=this.layer.getSource().extent,o=i-n,s=a-r;this.styleAttributeService.registerStyleAttribute({name:"oceanUv",type:A.AttributeType.Attribute,descriptor:{name:"a_uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:A.gl.STATIC_DRAW,data:[],type:A.gl.FLOAT},size:2,update:(i,a,l)=>{let[u,c]=l;return[(u-n)/o,(c-r)/s];}}});}loadTexture(){let{createTexture2D:n}=this.rendererService,r={height:0,width:0};function i(r){return n({data:r,width:r.width,height:r.height,wrapS:A.gl.MIRRORED_REPEAT,wrapT:A.gl.MIRRORED_REPEAT,min:A.gl.LINEAR,mag:A.gl.LINEAR});}this.texture1=n(r),this.texture2=n(r),this.texture3=n(r),function(n){let r=0,i=[];["https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*MJ22QbpuCzIAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-z2HSIVDsHIAAAAAAAAAAAAAARQnAQ"].map(a=>{let o=new Image;o.crossOrigin="",o.src=a,i.push(o),o.onload=()=>{3==++r&&n(i);};});}(n=>{this.texture1=i(n[0]),this.texture2=i(n[1]),this.texture3=i(n[2]),this.layerService.reRender();});}}class D extends M.default{constructor(...n){super(...n),(0,u.default)(this,"texture",void 0);}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9});}getUninforms(){let n=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,T.default)((0,T.default)({},n.uniformsOption),r.uniformsOption);}getCommonUniformsInfo(){let{speed:n=.5}=this.layer.getLayerConfig(),r={u_speed:n,u_time:this.layer.getLayerAnimateTime(),u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(r);}getAnimateUniforms(){return{u_time:this.layer.getLayerAnimateTime()};}initModels(){var n=this;return(0,s.default)(function*(){return n.loadTexture(),n.buildModels();})();}buildModels(){var n=this;return(0,s.default)(function*(){return n.initUniformsBuffer(),[(yield n.layer.buildLayerModel({moduleName:"polygonWater",vertexShader:'layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;\nlayout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_uv;\n\nlayout(std140) uniform commonUniforms {\n  float u_speed;\n  float u_time;\n};\nout vec4 v_Color;\nout vec2 v_uv;\n\n#pragma include "projection"\n\nvoid main() {\n  v_uv = a_uv;\n  v_Color = a_Color;\n  v_Color.a *= opacity;\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n}\n\n',fragmentShader:"uniform sampler2D u_texture;\nlayout(std140) uniform commonUniforms {\n  float u_speed;\n  float u_time;\n};\n\nout vec4 outputColor;\n\n\nin vec4 v_Color;\nin vec2 v_uv;\n\nfloat rand(vec2 n) { return 0.5 + 0.5 * fract(sin(dot(n.xy, vec2(12.9898, 78.233)))* 43758.5453); }\n\nfloat water(vec3 p) {\n  float t = u_time * u_speed;\n  p.z += t * 2.; p.x += t * 2.;\n  vec3 c1 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;\n  p.z += t * 3.; p.x += t * 0.52;\n  vec3 c2 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;\n  p.z += t * 4.; p.x += t * 0.8;\n  vec3 c3 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;\n  c1 += c2 - c3;\n  float z = (c1.x + c1.y + c1.z) / 3.;\n  return p.y + z / 4.;\n}\n\nfloat map(vec3 p) {\n  float d = 100.0;\n  d = water(p);\n  return d;\n}\n\nfloat intersect(vec3 ro, vec3 rd) {\n  float d = 0.0;\n  for (int i = 0; i <= 100; i++) {\n    float h = map(ro + rd * d);\n    if (h < 0.1) return  d;\n    d += h;\n  }\n  return 0.0;\n}\n\nvec3 norm(vec3 p) {\n  float eps = .1;\n  return normalize(vec3(\n    map(p + vec3(eps, 0, 0)) - map(p + vec3(-eps, 0, 0)),\n    map(p + vec3(0, eps, 0)) - map(p + vec3(0, -eps, 0)),\n    map(p + vec3(0, 0, eps)) - map(p + vec3(0, 0, -eps))\n  ));\n} \n\nfloat calSpc() {\n  vec3 l1 = normalize(vec3(1, 1, 1));\n  vec3 ro = vec3(-3, 20, -8);\n  vec3 rc = vec3(0, 0, 0);\n  vec3 ww = normalize(rc - ro);\n  vec3 uu = normalize(cross(vec3(0,1,0), ww));\n  vec3 vv = normalize(cross(rc - ro, uu));\n  vec3 rd = normalize(uu * v_uv.x + vv * v_uv.y + ww);\n  float d = intersect(ro, rd);\n  vec3 p = ro + rd * d;\n  vec3 n = norm(p);\n  float spc = pow(max(0.0, dot(reflect(l1, n), rd)), 30.0);\n  return spc;\n}\n\nvoid main() {\n\n  outputColor = v_Color;\n  float spc = calSpc();\n  outputColor += spc * 0.4;\n}\n",triangulation:R.polygonTriangulation,defines:n.getDefines(),inject:n.getInject(),primitive:A.gl.TRIANGLES,depth:{enable:!1},pickingEnabled:!1,diagnosticDerivativeUniformityEnabled:!1}))];})();}clearModels(){var n;null===(n=this.texture)||void 0===n||n.destroy();}registerBuiltinAttributes(){let[n,r,i,a]=this.layer.getSource().extent,o=i-n,s=a-r;this.styleAttributeService.registerStyleAttribute({name:"waterUv",type:A.AttributeType.Attribute,descriptor:{name:"a_uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:A.gl.STATIC_DRAW,data:[],type:A.gl.FLOAT},size:2,update:(i,a,l)=>{let[u,c]=l;return[(u-n)/o,(c-r)/s];}}});}loadTexture(){let{waterTexture:n}=this.layer.getLayerConfig(),{createTexture2D:r}=this.rendererService;this.texture=r({height:1,width:1});let i=new Image;i.crossOrigin="",n?(console.warn("L7 recommend\uFF1Ahttps://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ"),i.src=n):i.src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ",i.onload=()=>{this.texture=r({data:i,width:i.width,height:i.height,wrapS:A.gl.MIRRORED_REPEAT,wrapT:A.gl.MIRRORED_REPEAT,min:A.gl.LINEAR,mag:A.gl.LINEAR}),this.layerService.reRender();};}}let F={fill:L,line:h.default,extrude:k,text:w.default,point_fill:v.default,point_image:_.default,point_normal:x.default,point_extrude:m.default,water:D,ocean:N,extrusion:I};class B extends f.default{constructor(...n){super(...n),(0,u.default)(this,"type","PolygonLayer"),(0,u.default)(this,"enableShaderEncodeStyles",["opacity","extrusionBase","rotation","offsets","stroke"]);}buildModels(){var n=this;return(0,s.default)(function*(){let r=n.getModelType();n.layerModel=new F[r](n),yield n.initLayerModels();})();}getModelType(){var n;let r=this.styleAttributeService.getLayerStyleAttribute("shape"),i=null==r||null===(n=r.scale)||void 0===n?void 0:n.field;return"fill"!==i&&i?"extrude"===i?"extrude":"extrusion"===i?"extrusion":"water"===i?"water":"ocean"===i?"ocean":"line"===i?"line":this.getPointModelType():"fill";}getPointModelType(){let n=this.getEncodedData(),{shape2d:r,shape3d:i}=this.getLayerConfig(),a=this.iconService.getIconMap(),o=n.find(n=>n.hasOwnProperty("shape"));if(!o)return"fill";{let n=o.shape;return"dot"===n?"point_normal":(null==r?void 0:r.indexOf(n))!==-1?"point_fill":(null==i?void 0:i.indexOf(n))!==-1?"point_extrude":a.hasOwnProperty(n)?"point_image":"text";}}}},"05378a0d":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return s;}});var a=i("777fffbe")._(i("42520f5c"));function o(n){this._context=n;}function s(n){return new o(n);}o.prototype={areaStart:a.default,areaEnd:a.default,lineStart:function(){this._point=0;},lineEnd:function(){this._point&&this._context.closePath();},point:function(n,r){n=+n,r=+r,this._point?this._context.lineTo(n,r):(this._point=1,this._context.moveTo(n,r));}};},"05da3880":function(n,r,i){"use strict";n.exports=o;var a=i("a7af6284");function o(n){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(n)?n:new Uint8Array(n||0),this.pos=0,this.type=0,this.length=this.buf.length;}o.Varint=0,o.Fixed64=1,o.Bytes=2,o.Fixed32=5;var s="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8");function l(n){return n.type===o.Bytes?n.readVarint()+n.pos:n.pos+1;}function u(n,r,i){var a=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));i.realloc(a);for(var o=i.pos-1;o>=n;o--)i.buf[o+a]=i.buf[o];}function c(n,r){for(var i=0;i<n.length;i++)r.writeVarint(n[i]);}function f(n,r){for(var i=0;i<n.length;i++)r.writeSVarint(n[i]);}function d(n,r){for(var i=0;i<n.length;i++)r.writeFloat(n[i]);}function h(n,r){for(var i=0;i<n.length;i++)r.writeDouble(n[i]);}function p(n,r){for(var i=0;i<n.length;i++)r.writeBoolean(n[i]);}function m(n,r){for(var i=0;i<n.length;i++)r.writeFixed32(n[i]);}function g(n,r){for(var i=0;i<n.length;i++)r.writeSFixed32(n[i]);}function v(n,r){for(var i=0;i<n.length;i++)r.writeFixed64(n[i]);}function y(n,r){for(var i=0;i<n.length;i++)r.writeSFixed64(n[i]);}function _(n,r){return(n[r]|n[r+1]<<8|n[r+2]<<16)+16777216*n[r+3];}function b(n,r,i){n[i]=r,n[i+1]=r>>>8,n[i+2]=r>>>16,n[i+3]=r>>>24;}function x(n,r){return(n[r]|n[r+1]<<8|n[r+2]<<16)+(n[r+3]<<24);}o.prototype={destroy:function(){this.buf=null;},readFields:function(n,r,i){for(i=i||this.length;this.pos<i;){var a=this.readVarint(),o=a>>3,s=this.pos;this.type=7&a,n(o,r,this),this.pos===s&&this.skip(a);}return r;},readMessage:function(n,r){return this.readFields(n,r,this.readVarint()+this.pos);},readFixed32:function(){var n=_(this.buf,this.pos);return this.pos+=4,n;},readSFixed32:function(){var n=x(this.buf,this.pos);return this.pos+=4,n;},readFixed64:function(){var n=_(this.buf,this.pos)+4294967296*_(this.buf,this.pos+4);return this.pos+=8,n;},readSFixed64:function(){var n=_(this.buf,this.pos)+4294967296*x(this.buf,this.pos+4);return this.pos+=8,n;},readFloat:function(){var n=a.read(this.buf,this.pos,!0,23,4);return this.pos+=4,n;},readDouble:function(){var n=a.read(this.buf,this.pos,!0,52,8);return this.pos+=8,n;},readVarint:function(n){var r,i,a=this.buf;return(r=127&(i=a[this.pos++]),i<128)?r:(r|=(127&(i=a[this.pos++]))<<7,i<128)?r:(r|=(127&(i=a[this.pos++]))<<14,i<128)?r:(r|=(127&(i=a[this.pos++]))<<21,i<128)?r:function(n,r,i){var a,o,s,l,u=i.buf;if(s=(112&(l=u[i.pos++]))>>4,l<128||(s|=(127&(l=u[i.pos++]))<<3,l<128)||(s|=(127&(l=u[i.pos++]))<<10,l<128)||(s|=(127&(l=u[i.pos++]))<<17,l<128)||(s|=(127&(l=u[i.pos++]))<<24,l<128)||(s|=(1&(l=u[i.pos++]))<<31,l<128)){return a=n,o=s,r?4294967296*o+(a>>>0):(o>>>0)*4294967296+(a>>>0);}throw Error("Expected varint not more than 10 bytes");}(r|=(15&(i=a[this.pos]))<<28,n,this);},readVarint64:function(){return this.readVarint(!0);},readSVarint:function(){var n=this.readVarint();return n%2==1?-((n+1)/2):n/2;},readBoolean:function(){return!!this.readVarint();},readString:function(){var n,r=this.readVarint()+this.pos,i=this.pos;return(this.pos=r,r-i>=12&&s)?(n=this.buf,s.decode(n.subarray(i,r))):function(n,r,i){for(var a="",o=r;o<i;){var s,l,u,c=n[o],f=null,d=c>239?4:c>223?3:c>191?2:1;if(o+d>i)break;1===d?c<128&&(f=c):2===d?(192&(s=n[o+1]))==128&&(f=(31&c)<<6|63&s)<=127&&(f=null):3===d?(s=n[o+1],l=n[o+2],(192&s)==128&&(192&l)==128&&((f=(15&c)<<12|(63&s)<<6|63&l)<=2047||f>=55296&&f<=57343)&&(f=null)):4===d&&(s=n[o+1],l=n[o+2],u=n[o+3],(192&s)==128&&(192&l)==128&&(192&u)==128&&((f=(15&c)<<18|(63&s)<<12|(63&l)<<6|63&u)<=65535||f>=1114112)&&(f=null)),null===f?(f=65533,d=1):f>65535&&(f-=65536,a+=String.fromCharCode(f>>>10&1023|55296),f=56320|1023&f),a+=String.fromCharCode(f),o+=d;}return a;}(this.buf,i,r);},readBytes:function(){var n=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,n);return this.pos=n,r;},readPackedVarint:function(n,r){if(this.type!==o.Bytes)return n.push(this.readVarint(r));var i=l(this);for(n=n||[];this.pos<i;)n.push(this.readVarint(r));return n;},readPackedSVarint:function(n){if(this.type!==o.Bytes)return n.push(this.readSVarint());var r=l(this);for(n=n||[];this.pos<r;)n.push(this.readSVarint());return n;},readPackedBoolean:function(n){if(this.type!==o.Bytes)return n.push(this.readBoolean());var r=l(this);for(n=n||[];this.pos<r;)n.push(this.readBoolean());return n;},readPackedFloat:function(n){if(this.type!==o.Bytes)return n.push(this.readFloat());var r=l(this);for(n=n||[];this.pos<r;)n.push(this.readFloat());return n;},readPackedDouble:function(n){if(this.type!==o.Bytes)return n.push(this.readDouble());var r=l(this);for(n=n||[];this.pos<r;)n.push(this.readDouble());return n;},readPackedFixed32:function(n){if(this.type!==o.Bytes)return n.push(this.readFixed32());var r=l(this);for(n=n||[];this.pos<r;)n.push(this.readFixed32());return n;},readPackedSFixed32:function(n){if(this.type!==o.Bytes)return n.push(this.readSFixed32());var r=l(this);for(n=n||[];this.pos<r;)n.push(this.readSFixed32());return n;},readPackedFixed64:function(n){if(this.type!==o.Bytes)return n.push(this.readFixed64());var r=l(this);for(n=n||[];this.pos<r;)n.push(this.readFixed64());return n;},readPackedSFixed64:function(n){if(this.type!==o.Bytes)return n.push(this.readSFixed64());var r=l(this);for(n=n||[];this.pos<r;)n.push(this.readSFixed64());return n;},skip:function(n){var r=7&n;if(r===o.Varint)for(;this.buf[this.pos++]>127;);else if(r===o.Bytes)this.pos=this.readVarint()+this.pos;else if(r===o.Fixed32)this.pos+=4;else if(r===o.Fixed64)this.pos+=8;else throw Error("Unimplemented type: "+r);},writeTag:function(n,r){this.writeVarint(n<<3|r);},realloc:function(n){for(var r=this.length||16;r<this.pos+n;)r*=2;if(r!==this.length){var i=new Uint8Array(r);i.set(this.buf),this.buf=i,this.length=r;}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length);},writeFixed32:function(n){this.realloc(4),b(this.buf,n,this.pos),this.pos+=4;},writeSFixed32:function(n){this.realloc(4),b(this.buf,n,this.pos),this.pos+=4;},writeFixed64:function(n){this.realloc(8),b(this.buf,-1&n,this.pos),b(this.buf,Math.floor(23283064365386963e-26*n),this.pos+4),this.pos+=8;},writeSFixed64:function(n){this.realloc(8),b(this.buf,-1&n,this.pos),b(this.buf,Math.floor(23283064365386963e-26*n),this.pos+4),this.pos+=8;},writeVarint:function(n){if((n=+n||0)>268435455||n<0){!function(n,r){var i,a,o,s,l,u;if(n>=0?(i=n%4294967296|0,a=n/4294967296|0):(i=~(-n%4294967296),a=~(-n/4294967296),4294967295^i?i=i+1|0:(i=0,a=a+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw Error("Given varint doesn't fit into 10 bytes");r.realloc(10),o=i,r.buf[r.pos++]=127&o|128,o>>>=7,r.buf[r.pos++]=127&o|128,o>>>=7,r.buf[r.pos++]=127&o|128,o>>>=7,r.buf[r.pos++]=127&o|128,o>>>=7,r.buf[r.pos]=127&o,s=a,l=r,u=(7&s)<<4,l.buf[l.pos++]|=u|((s>>>=3)?128:0),!s||(l.buf[l.pos++]=127&s|((s>>>=7)?128:0),!s)||(l.buf[l.pos++]=127&s|((s>>>=7)?128:0),!s)||(l.buf[l.pos++]=127&s|((s>>>=7)?128:0),s&&(l.buf[l.pos++]=127&s|((s>>>=7)?128:0),s&&(l.buf[l.pos++]=127&s)));}(n,this);return;}this.realloc(4),this.buf[this.pos++]=127&n|(n>127?128:0),!(n<=127)&&(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),!(n<=127)&&(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=n>>>7&127)));},writeSVarint:function(n){this.writeVarint(n<0?-(2*n)-1:2*n);},writeBoolean:function(n){this.writeVarint(!!n);},writeString:function(n){n=String(n),this.realloc(4*n.length),this.pos++;var r=this.pos;this.pos=function(n,r,i){for(var a,o,s=0;s<r.length;s++){if((a=r.charCodeAt(s))>55295&&a<57344){if(o){if(a<56320){n[i++]=239,n[i++]=191,n[i++]=189,o=a;continue;}a=o-55296<<10|a-56320|65536,o=null;}else{a>56319||s+1===r.length?(n[i++]=239,n[i++]=191,n[i++]=189):o=a;continue;}}else o&&(n[i++]=239,n[i++]=191,n[i++]=189,o=null);a<128?n[i++]=a:(a<2048?n[i++]=a>>6|192:(a<65536?n[i++]=a>>12|224:(n[i++]=a>>18|240,n[i++]=a>>12&63|128),n[i++]=a>>6&63|128),n[i++]=63&a|128);}return i;}(this.buf,n,this.pos);var i=this.pos-r;i>=128&&u(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i;},writeFloat:function(n){this.realloc(4),a.write(this.buf,n,this.pos,!0,23,4),this.pos+=4;},writeDouble:function(n){this.realloc(8),a.write(this.buf,n,this.pos,!0,52,8),this.pos+=8;},writeBytes:function(n){var r=n.length;this.writeVarint(r),this.realloc(r);for(var i=0;i<r;i++)this.buf[this.pos++]=n[i];},writeRawMessage:function(n,r){this.pos++;var i=this.pos;n(r,this);var a=this.pos-i;a>=128&&u(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a;},writeMessage:function(n,r,i){this.writeTag(n,o.Bytes),this.writeRawMessage(r,i);},writePackedVarint:function(n,r){r.length&&this.writeMessage(n,c,r);},writePackedSVarint:function(n,r){r.length&&this.writeMessage(n,f,r);},writePackedBoolean:function(n,r){r.length&&this.writeMessage(n,p,r);},writePackedFloat:function(n,r){r.length&&this.writeMessage(n,d,r);},writePackedDouble:function(n,r){r.length&&this.writeMessage(n,h,r);},writePackedFixed32:function(n,r){r.length&&this.writeMessage(n,m,r);},writePackedSFixed32:function(n,r){r.length&&this.writeMessage(n,g,r);},writePackedFixed64:function(n,r){r.length&&this.writeMessage(n,v,r);},writePackedSFixed64:function(n,r){r.length&&this.writeMessage(n,y,r);},writeBytesField:function(n,r){this.writeTag(n,o.Bytes),this.writeBytes(r);},writeFixed32Field:function(n,r){this.writeTag(n,o.Fixed32),this.writeFixed32(r);},writeSFixed32Field:function(n,r){this.writeTag(n,o.Fixed32),this.writeSFixed32(r);},writeFixed64Field:function(n,r){this.writeTag(n,o.Fixed64),this.writeFixed64(r);},writeSFixed64Field:function(n,r){this.writeTag(n,o.Fixed64),this.writeSFixed64(r);},writeVarintField:function(n,r){this.writeTag(n,o.Varint),this.writeVarint(r);},writeSVarintField:function(n,r){this.writeTag(n,o.Varint),this.writeSVarint(r);},writeStringField:function(n,r){this.writeTag(n,o.Bytes),this.writeString(r);},writeFloatField:function(n,r){this.writeTag(n,o.Fixed32),this.writeFloat(r);},writeDoubleField:function(n,r){this.writeTag(n,o.Fixed64),this.writeDouble(r);},writeBooleanField:function(n,r){this.writeVarintField(n,!!r);}};},"06753dad":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return l;}});var a=i("777fffbe"),o=a._(i("bf98e12a")),s=a._(i("2cc7f81c")),l=(0,o.default)(s.default,"Map");},"06c64a8e":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return o;}});var a={}.toString,o=function(n,r){return a.call(n)==="[object "+r+"]";};},"06ecdd39":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return p;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("7cfeda15"),l=a._(s),u=i("609f48be"),c=o._(u),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},d=i("887aaf6c"),h=a._(d),p=c.forwardRef(function(n,r){return c.createElement(h.default,(0,l.default)({},n,{ref:r,icon:f}));});},"0705d96b":function(n,r,i){n.exports=function(n,r,i){for(var a=-1,o=null==n?0:n.length;++a<o;)if(i(r,n[a]))return!0;return!1;};},"078616b2":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{bezier:function(){return h;},clamp:function(){return s;},defaultEasing:function(){return p;},degreesToRadians:function(){return v;},extend:function(){return f;},interpolates:function(){return o;},pick:function(){return d;},uniqueId:function(){return c;},warnOnce:function(){return g;},wrap:function(){return l;}});var a=i("777fffbe")._(i("04e1d050"));let o={number:function(n,r,i){return n+i*(r-n);}};function s(n,r,i){return Math.min(i,Math.max(r,n));}function l(n,r,i){let a=i-r,o=((n-r)%a+a)%a+r;return o===r?i:o;}let u=1;function c(){return u++;}function f(n,...r){for(let i of r)for(let r in i)n[r]=i[r];return n;}function d(n,r){let i={};for(let a=0;a<r.length;a++){let o=r[a];o in n&&(i[o]=n[o]);}return i;}function h(n,r,i,o){let s=new a.default(n,r,i,o);return n=>s.solve(n);}let p=h(.25,.1,.25,1),m={};function g(n){m[n]||("undefined"!=typeof console&&console.warn(n),m[n]=!0);}function v(n){return n*Math.PI/180;}},"07aa9410":function(n,r,i){"use strict";function a(n,r){return n[r];}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},"07ba0bdb":function(n,r,i){var a=i("bbc15be8"),o=i("7bcda897"),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/;n.exports=function(n,r){if(a(n))return!1;var i=typeof n;return!!("number"==i||"symbol"==i||"boolean"==i||null==n||o(n))||l.test(n)||!s.test(n)||null!=r&&n in Object(r);};},"07cf43fc":function(n,r,i){"use strict";var a,o,s,l,u;i.d(r,"__esModule",{value:!0}),i.e(r,{CanvasUpdateType:function(){return p;},LinearDir:function(){return f;},SizeUnitType:function(){return h;},TextureBlend:function(){return d;},lineStyleType:function(){return c;}});let c=((a={})[a.solid=0]="solid",a[a.dash=1]="dash",a),f=((o={}).VERTICAL="vertical",o.HORIZONTAL="horizontal",o),d=((s={}).NORMAL="normal",s.REPLACE="replace",s),h=((l={})[l.pixel=0]="pixel",l[l.meter=1]="meter",l),p=((u={}).ALWAYS="always",u.DRAGEND="dragend",u);},"08dda30e":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return p;}});var a=i("777fffbe"),o=i("852bbaa9"),s=a._(i("ee64167d")),l=a._(i("8bbe4f57")),u=a._(i("85158032")),c=i("78ba7479"),f=i("5dd400a3"),d=o._(i("da755037")),h=(0,c.createMat4)(),p=function(){function n(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.width,a=r.height,o=r.viewMatrix,s=void 0===o?h:o,u=r.projectionMatrix,f=void 0===u?h:u;(0,l.default)(this,n),this.width=i||1,this.height=a||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=s,this.projectionMatrix=f;var p=(0,c.createMat4)();d.multiply(p,p,this.projectionMatrix),d.multiply(p,p,this.viewMatrix),this.viewProjectionMatrix=p;var m=(0,c.createMat4)();d.scale(m,m,[this.width/2,-this.height/2,1]),d.translate(m,m,[1,-1,0]),d.multiply(m,m,this.viewProjectionMatrix);var g=d.invert((0,c.createMat4)(),m);if(!g)throw Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=m,this.pixelUnprojectionMatrix=g,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this);}return(0,u.default)(n,[{key:"equals",value:function(r){return r instanceof n&&r.width===this.width&&r.height===this.height&&d.equals(r.projectionMatrix,this.projectionMatrix)&&d.equals(r.viewMatrix,this.viewMatrix);}},{key:"project",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.topLeft,a=this.projectPosition(n),o=(0,f.worldToPixels)(a,this.pixelProjectionMatrix),l=(0,s.default)(o,2),u=l[0],c=l[1],d=void 0===i||i?c:this.height-c;return 2===n.length?[u,d]:[u,d,o[2]];}},{key:"unproject",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.topLeft,a=r.targetZ,o=(0,s.default)(n,3),l=o[0],u=o[1],c=o[2],d=void 0===i||i?u:this.height-u,h=a&&a*this.pixelsPerMeter,p=(0,f.pixelsToWorld)([l,d,c],this.pixelUnprojectionMatrix,h),m=this.unprojectPosition(p),g=(0,s.default)(m,3),v=g[0],y=g[1],_=g[2];return Number.isFinite(c)?[v,y,_]:Number.isFinite(a)?[v,y,a]:[v,y];}},{key:"projectPosition",value:function(n){var r=this.projectFlat(n),i=(0,s.default)(r,2);return[i[0],i[1],(n[2]||0)*this.pixelsPerMeter];}},{key:"unprojectPosition",value:function(n){var r=this.unprojectFlat(n),i=(0,s.default)(r,2);return[i[0],i[1],(n[2]||0)/this.pixelsPerMeter];}},{key:"projectFlat",value:function(n){return arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale,n;}},{key:"unprojectFlat",value:function(n){return arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale,n;}}]),n;}();},"08eace5d":function(n,r,i){window._iconfont_svg_string_3580659='<svg><symbol id="l7-icon-area1" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.064889 219.136l38.798223 466.261333a113.777778 113.777778 0 1 1-133.518223 145.237334H279.210667a113.777778 113.777778 0 1 1-60.302223-137.272889L697.856 227.555556A113.777778 113.777778 0 0 1 796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m577.592889-534.072889L269.198222 796.444444c4.152889 7.168 7.509333 14.791111 10.012445 22.812445h465.578666a114.119111 114.119111 0 0 1 65.479111-71.224889l-38.798222-466.261333a112.924444 112.924444 0 0 1-23.210666-7.964445zM796.444444 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-area" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.008 219.136l38.855112 466.261333a113.777778 113.777778 0 0 1-16.497778 224.540445L853.333333 967.111111a113.777778 113.777778 0 0 1-108.544-79.644444H279.210667a113.834667 113.834667 0 0 1-100.067556 79.36L170.666667 967.111111a113.777778 113.777778 0 0 1-17.066667-226.304l30.492444-351.175111a113.777778 113.777778 0 0 1 34.986667-218.680889L227.555556 170.666667a113.777778 113.777778 0 0 1 99.896888 59.221333l355.84-71.395556a113.777778 113.777778 0 0 1 104.675556-101.262222L796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m526.051555-582.314666L340.650667 296.903111a113.891556 113.891556 0 0 1-88.462223 98.645333l-30.947555 355.84c27.477333 13.653333 48.64 38.115556 58.026667 67.754667h465.521777a114.119111 114.119111 0 0 1 65.536-71.168l-38.855111-466.261333a113.948444 113.948444 0 0 1-74.752-56.206222zM227.555556 238.933333a45.511111 45.511111 0 1 0 0 91.022223 45.511111 45.511111 0 0 0 0-91.022223z m568.888888-113.777777a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-delete" viewBox="0 0 1024 1024"><path d="M705.422222 85.333333a34.133333 34.133333 0 0 1 34.133334 34.133334V227.555556h136.533333a34.133333 34.133333 0 0 1 0 68.266666h-25.543111l-24.348445 610.076445a34.133333 34.133333 0 0 1-34.133333 32.768H231.936a34.133333 34.133333 0 0 1-34.076444-32.768L173.340444 295.822222H147.911111a34.133333 34.133333 0 1 1 0-68.266666H284.444444V119.466667a34.133333 34.133333 0 0 1 34.133334-34.133334h386.844444zM241.720889 295.822222l22.983111 574.577778h494.535111l23.04-574.577778H241.720889zM671.288889 153.6H352.711111V227.555556h318.577778V153.6z"  ></path></symbol><symbol id="l7-icon-color" viewBox="0 0 1024 1024"><path d="M512 56.888889c9.841778 0 19.626667 0.341333 29.354667 0.910222 69.176889 4.437333 119.068444 62.577778 124.302222 131.072l0.455111 9.386667c0.739556 44.600889 15.303111 84.935111 44.999111 114.631111 27.022222 27.022222 62.805333 41.528889 102.570667 44.430222l12.060444 0.568889c72.476444 1.194667 135.793778 52.451556 140.458667 124.757333 1.137778 18.261333 1.251556 36.807111 0.170667 55.637334-13.198222 233.585778-211.399111 424.220444-445.326223 428.714666L512 967.111111a455.111111 455.111111 0 0 1-455.054222-464.156444c4.551111-233.927111 195.185778-432.128 428.771555-445.326223C494.535111 57.116444 503.296 56.888889 512 56.888889z m0 68.266667a385.706667 385.706667 0 0 0-22.414222 0.625777C291.726222 136.988444 129.080889 305.948444 125.155556 504.263111c-4.152889 212.366222 163.100444 387.185778 372.508444 394.353778l13.425778 0.227555 8.533333-0.113777c198.371556-3.811556 367.331556-166.456889 378.538667-364.373334a396.174222 396.174222 0 0 0-0.170667-47.331555c-1.991111-31.232-29.127111-56.604444-67.128889-60.472889l-8.248889-0.455111-14.051555-0.682667c-56.547556-4.209778-107.406222-25.884444-145.806222-64.284444-38.855111-38.798222-60.416-90.225778-64.284445-145.749334l-0.910222-21.333333c-2.901333-38.001778-28.785778-66.048-60.302222-68.096A433.891556 433.891556 0 0 0 512 125.155556zM438.044444 682.666667a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m-170.666666-227.555556a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m142.222222-227.555555a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z"  ></path></symbol><symbol id="l7-icon-base-map" viewBox="0 0 1024 1024"><path d="M923.761778 115.029333A34.133333 34.133333 0 0 1 967.111111 147.911111v624.128a34.133333 34.133333 0 0 1-22.186667 32.028445l-278.755555 103.992888a34.133333 34.133333 0 0 1-23.665778 0.056889L381.724444 812.714667a34.133333 34.133333 0 0 0-23.665777 0.113777L102.968889 908.060444a34.133333 34.133333 0 0 1-45.738667-26.965333L56.888889 876.088889V251.960889a34.133333 34.133333 0 0 1 22.186667-32.028445l278.755555-103.992888a34.133333 34.133333 0 0 1 20.992-0.967112l266.183111 72.988445a34.133333 34.133333 0 0 0 18.204445 0zM403.911111 192.625778v555.576889l216.177778 79.075555V251.960889l-216.177778-59.335111z m-68.266667 4.380444L125.155556 275.569778v551.310222l210.432-78.506667V197.006222zM898.844444 192.853333l-210.545777 58.936889v575.089778l210.545777-78.563556V192.853333z"  ></path></symbol><symbol id="l7-icon-dot" viewBox="0 0 1024 1024"><path d="M341.333333 739.555556a113.777778 113.777778 0 0 1 8.533334 227.271111L341.333333 967.111111a113.777778 113.777778 0 0 1-8.533333-227.271111L341.333333 739.555556z m0 68.266666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM910.222222 341.333333a113.777778 113.777778 0 0 1 8.533334 227.271111L910.222222 568.888889a113.777778 113.777778 0 0 1-8.533333-227.271111L910.222222 341.333333z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM227.555556 56.888889a113.777778 113.777778 0 0 1 8.533333 227.271111L227.555556 284.444444a113.777778 113.777778 0 0 1-8.533334-227.271111L227.555556 56.888889z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-display" viewBox="0 0 1024 1024"><path d="M512 170.666667c284.444444 0 455.111111 227.555556 455.111111 341.333333s-170.666667 341.333333-455.111111 341.333333-455.111111-227.555556-455.111111-341.333333 170.666667-341.333333 455.111111-341.333333z m0 68.266666C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 110.762667 178.574222 273.066667 386.844444 273.066667s386.844444-162.304 386.844444-273.066667c0-110.762667-178.574222-273.066667-386.844444-273.066667zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-enlarge" viewBox="0 0 1024 1024"><path d="M546.133333 147.911111l-0.056889 329.955556H876.088889a34.133333 34.133333 0 0 1 0 68.266666H546.076444v329.955556a34.133333 34.133333 0 0 1-68.266666 0V546.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h329.898667V147.911111a34.133333 34.133333 0 0 1 68.266666 0z"  ></path></symbol><symbol id="l7-icon-export-picture" viewBox="0 0 1024 1024"><path d="M883.873684 161.684211a32.336842 32.336842 0 0 1 32.336842 32.336842v582.063158a32.336842 32.336842 0 0 1-32.336842 32.336842H86.231579a32.336842 32.336842 0 0 1-32.336842-32.336842V194.021053a32.336842 32.336842 0 0 1 32.336842-32.336842h797.642105z m-32.336842 64.673684H118.568421v517.389473h170.792421a32.175158 32.175158 0 0 1 0.431158-0.646736l3.772632-4.473264 330.320842-330.374736a32.336842 32.336842 0 0 1 38.588631-5.389474l4.473263 3.018105 184.589474 147.725474V226.357895z m-202.428631 248.131368L379.850105 743.747368H851.536842v-107.304421l-202.428631-161.953684zM323.368421 323.368421a107.789474 107.789474 0 1 1 0 215.578947 107.789474 107.789474 0 0 1 0-215.578947z m0 64.673684a43.115789 43.115789 0 1 0 0 86.231579 43.115789 43.115789 0 0 0 0-86.231579z"  ></path></symbol><symbol id="l7-icon-exit-fullscreen" viewBox="0 0 1024 1024"><path d="M841.955556 591.644444a34.133333 34.133333 0 0 1 5.518222 67.811556l-5.518222 0.455111h-133.745778l192 192.056889a34.133333 34.133333 0 0 1-38.343111 55.182222l-5.176889-2.958222-4.721778-3.982222L659.911111 708.266667V841.955556a34.133333 34.133333 0 0 1-28.615111 33.678222L625.777778 876.088889a34.133333 34.133333 0 0 1-33.678222-28.615111L591.644444 841.955556V625.777778a34.133333 34.133333 0 0 1 28.615112-33.678222L625.777778 591.644444h216.177778z m-443.733334 0a34.133333 34.133333 0 0 1 33.678222 28.615112L432.355556 625.777778v216.177778a34.133333 34.133333 0 0 1-67.811556 5.518222L364.088889 841.955556v-133.745778l-192.056889 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L315.847111 659.911111H182.044444a34.133333 34.133333 0 0 1-33.678222-28.615111L147.911111 625.777778a34.133333 34.133333 0 0 1 28.615111-33.678222L182.044444 591.644444H398.222222zM167.310222 119.808l4.721778 3.982222L364.088889 315.847111V182.044444a34.133333 34.133333 0 0 1 28.615111-33.678222L398.222222 147.911111a34.133333 34.133333 0 0 1 33.678222 28.615111L432.355556 182.044444V398.222222a34.133333 34.133333 0 0 1-28.615112 33.678222L398.222222 432.355556H182.044444a34.133333 34.133333 0 0 1-5.518222-67.811556L182.044444 364.088889h133.802667L123.790222 172.032a34.133333 34.133333 0 0 1 43.52-52.224z m732.899556 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L708.266667 364.088889H841.955556a34.133333 34.133333 0 0 1 33.678222 28.615111L876.088889 398.222222a34.133333 34.133333 0 0 1-28.615111 33.678222L841.955556 432.355556H625.777778a34.133333 34.133333 0 0 1-33.678222-28.615112L591.644444 398.222222V182.044444a34.133333 34.133333 0 0 1 67.811556-5.518222l0.455111 5.518222v133.802667l192.056889-192.056889a34.133333 34.133333 0 0 1 48.241778 0z"  ></path></symbol><symbol id="l7-icon-line" viewBox="0 0 1024 1024"><path d="M853.333333 56.888889a113.777778 113.777778 0 0 1 8.533334 227.271111L853.333333 284.444444c-19.000889 0-36.864-4.664889-52.622222-12.856888l-529.123555 529.066666a113.777778 113.777778 0 0 1-92.387556 166.115556L170.666667 967.111111a113.777778 113.777778 0 0 1-8.533334-227.271111L170.666667 739.555556c19.000889 0 36.864 4.664889 52.622222 12.856888l529.123555-529.066666a113.777778 113.777778 0 0 1 92.387556-166.115556L853.333333 56.888889zM170.666667 807.822222a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m682.666666-682.666666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-layer" viewBox="0 0 1024 1024"><path d="M767.089778 625.777778l180.167111 82.773333a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730667-420.977778 193.422222a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422222a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730667L256.853333 625.777778l81.749334 37.546666L172.771556 739.555556 512 895.374222 851.171556 739.555556l-165.831112-76.231112 81.749334-37.546666z m0-227.555556l180.167111 82.773334a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730666-420.977778 193.422223a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422223a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730666L256.853333 398.222222l81.749334 37.546667-165.831111 76.174222L512 667.818667l339.171556-155.875556-165.831112-76.174222L767.089778 398.222222zM497.720889 60.017778a34.133333 34.133333 0 0 1 28.558222 0l420.977778 193.422222a34.133333 34.133333 0 0 1 0 62.008889l-420.977778 193.422222a34.133333 34.133333 0 0 1-28.558222 0l-420.977778-193.422222a34.133333 34.133333 0 0 1 0-62.008889zM512 128.568889L172.771556 284.387556 512 440.263111l339.171556-155.875555L512 128.568889z"  ></path></symbol><symbol id="l7-icon-narrow" viewBox="0 0 1024 1024"><path d="M910.222222 512a34.133333 34.133333 0 0 1-34.133333 34.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h728.177778a34.133333 34.133333 0 0 1 34.133333 34.133333z"  ></path></symbol><symbol id="l7-icon-fullscreen" viewBox="0 0 1024 1024"><path d="M645.176889 597.674667l4.721778 3.982222L841.955556 793.6l0.056888-133.688889a34.133333 34.133333 0 0 1 28.615112-33.678222L876.088889 625.777778a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 659.911111v216.177778a34.133333 34.133333 0 0 1-28.615111 33.678222L876.088889 910.222222h-216.177778a34.133333 34.133333 0 0 1-5.518222-67.811555l5.518222-0.455111h133.745778l-192-192.056889a34.133333 34.133333 0 0 1 43.52-52.224z m-222.833778 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L230.286222 841.955556H364.088889a34.133333 34.133333 0 0 1 33.678222 28.615111L398.222222 876.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L364.088889 910.222222H147.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 876.088889v-216.177778a34.133333 34.133333 0 0 1 67.811555-5.518222l0.455111 5.518222-0.056888 133.745778 192.113777-192a34.133333 34.133333 0 0 1 48.241778 0zM364.088889 113.777778a34.133333 34.133333 0 0 1 5.518222 67.811555L364.088889 182.044444H230.343111l192 192.056889a34.133333 34.133333 0 0 1-43.52 52.224l-4.721778-3.982222-192.113777-192.056889L182.044444 364.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L147.911111 398.222222a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 364.088889V147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L147.911111 113.777778h216.177778z m512 0a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 147.911111v216.177778a34.133333 34.133333 0 0 1-67.811555 5.518222L841.955556 364.088889l-0.056889-133.745778-192 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L793.6 182.044444H659.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L625.777778 147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L659.911111 113.777778h216.177778z"  ></path></symbol><symbol id="l7-icon-hide" viewBox="0 0 1024 1024"><path d="M875.52 87.836444a34.133333 34.133333 0 0 1 7.281778 43.121778l-3.527111 5.006222-682.666667 796.444445a34.133333 34.133333 0 0 1-55.409778-39.367111l3.527111-5.006222 97.166223-113.379556C123.164444 697.969778 56.888889 582.940444 56.888889 512c0-113.777778 170.666667-341.333333 455.111111-341.333333a496.64 496.64 0 0 1 208.952889 45.112889l106.439111-124.188445a34.133333 34.133333 0 0 1 48.128-3.754667z m-38.684444 202.524445C921.031111 362.951111 967.111111 452.835556 967.111111 512c0 113.777778-170.666667 341.333333-455.111111 341.333333-50.631111 0-97.678222-7.224889-140.8-19.740444l50.232889-58.595556A417.393778 417.393778 0 0 0 512 785.066667c208.270222 0 386.844444-162.304 386.844444-273.066667 0-52.849778-40.675556-117.418667-105.813333-170.496l43.804445-51.2zM512 238.933333C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 66.787556 64.853333 152.291556 162.133333 209.692444L377.173333 616.675556a170.666667 170.666667 0 0 1 217.713778-253.895112l78.620445-91.704888A432.924444 432.924444 0 0 0 512 238.933333z m166.684444 236.088889a170.666667 170.666667 0 0 1-177.664 207.303111l177.607112-207.303111zM512 409.6a102.4 102.4 0 0 0-88.746667 153.486222L548.864 416.426667A102.172444 102.172444 0 0 0 512 409.6z"  ></path></symbol><symbol id="l7-icon-rectangle" viewBox="0 0 1024 1024"><path d="M170.666667 56.888889a113.777778 113.777778 0 0 1 108.544 79.644444H853.333333a34.133333 34.133333 0 0 1 33.678223 28.615111L887.466667 170.666667v574.122666a113.777778 113.777778 0 1 1-142.677334 142.734223L170.666667 887.466667a34.133333 34.133333 0 0 1-33.678223-28.615111L136.533333 853.333333V279.210667A113.777778 113.777778 0 0 1 170.666667 56.888889z m682.666666 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-34.133333-603.022222H279.210667a114.062222 114.062222 0 0 1-74.353778 74.410667L204.8 819.2h539.989333a114.062222 114.062222 0 0 1 74.410667-74.410667V204.8zM170.666667 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-ranging" viewBox="0 0 1024 1024"><path d="M723.171556 50.403556l250.424888 250.424888a31.061333 31.061333 0 0 1 0 43.918223L344.746667 973.596444a31.061333 31.061333 0 0 1-43.918223 0L50.403556 723.171556a31.061333 31.061333 0 0 1 0-43.918223L679.253333 50.403556a31.061333 31.061333 0 0 1 43.918223 0z m-21.959112 74.524444l-39.765333 39.822222 98.986667 98.872889a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222 62.179556 62.122667a34.133333 34.133333 0 0 1-44.088889 51.882667L563.2 387.242667 501.077333 325.063111 437.191111 388.949333l98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222L387.242667 563.2a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.584-62.122667-62.179556-63.886222 63.886222 98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-39.765333 39.822222 197.802667 197.745778 576.284444-576.284444-197.802667-197.745778z"  ></path></symbol><symbol id="l7-icon-reposition" viewBox="0 0 1024 1024"><path d="M512 56.888889a34.133333 34.133333 0 0 1 34.133333 34.133333v24.177778A398.336 398.336 0 0 1 908.856889 477.866667h24.177778a34.133333 34.133333 0 0 1 0 68.266666h-24.177778A398.336 398.336 0 0 1 546.133333 908.856889L546.133333 932.977778a34.133333 34.133333 0 0 1-68.266666 0v-24.177778A398.336 398.336 0 0 1 115.2 546.133333L91.022222 546.133333a34.133333 34.133333 0 1 1 0-68.266666h24.177778A398.336 398.336 0 0 1 477.866667 115.2V91.022222A34.133333 34.133333 0 0 1 512 56.888889z m34.190222 126.862222L546.133333 193.422222a34.133333 34.133333 0 1 1-68.266666 0v-9.671111A330.069333 330.069333 0 0 0 183.751111 477.866667h9.671111a34.133333 34.133333 0 1 1 0 68.266666l-9.671111 0.056889A330.069333 330.069333 0 0 0 477.866667 840.248889V830.577778a34.133333 34.133333 0 0 1 68.266666 0l0.056889 9.671111A330.069333 330.069333 0 0 0 840.248889 546.133333L830.577778 546.133333a34.133333 34.133333 0 0 1 0-68.266666h9.671111A330.069333 330.069333 0 0 0 546.133333 183.751111zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-round" viewBox="0 0 1024 1024"><path d="M512 56.888889a455.111111 455.111111 0 0 1 391.395556 687.502222 113.777778 113.777778 0 0 1-159.061334 158.890667A455.111111 455.111111 0 0 1 120.604444 279.608889 113.777778 113.777778 0 0 1 279.608889 120.604444 452.835556 452.835556 0 0 1 512 56.888889z m0 68.266667a384.910222 384.910222 0 0 0-191.715556 50.744888A113.777778 113.777778 0 0 1 175.957333 320.284444a386.844444 386.844444 0 0 0 527.815111 527.758223 113.777778 113.777778 0 0 1 144.270223-144.440889A386.844444 386.844444 0 0 0 512 125.155556z m299.406222 640.739555a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM212.593778 167.082667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-guanbi" viewBox="0 0 1024 1024"><path d="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z"  ></path></symbol></svg>',function(n){try{var r=(r=document.getElementsByTagName("script"))[r.length-1],i=r.getAttribute("data-injectcss"),r=r.getAttribute("data-disable-injectsvg");if(!r){var a,o,s,l,u,c=function(n,r){r.parentNode.insertBefore(n,r);};if(i&&!n.__iconfont__svg__cssinject__){n.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>");}catch(n){console&&console.log(n);}}a=function(){var r,i=document.createElement("div");i.innerHTML=n._iconfont_svg_string_3580659,(i=i.getElementsByTagName("svg")[0])&&(i.setAttribute("aria-hidden","true"),i.style.position="absolute",i.style.width=0,i.style.height=0,i.style.overflow="hidden",(r=document.body).firstChild?c(i,r.firstChild):r.appendChild(i));},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(a,0):(o=function(){document.removeEventListener("DOMContentLoaded",o,!1),a();},document.addEventListener("DOMContentLoaded",o,!1)):document.attachEvent&&(s=a,l=n.document,u=!1,function n(){try{l.documentElement.doScroll("left");}catch(r){return void setTimeout(n,50);}f();}(),l.onreadystatechange=function(){"complete"==l.readyState&&(l.onreadystatechange=null,f());});}function f(){u||(u=!0,s());}}catch(n){}}(window);},"08f49370":function(n,r,i){var a=i("2d19bd14"),o=i("a2950f5c"),s=i("bbc15be8"),l=i("bb289a91"),u=i("45451182"),c=i("743ea378");n.exports=function(n,r,i){r=a(r,n);for(var f=-1,d=r.length,h=!1;++f<d;){var p=c(r[f]);if(!(h=null!=n&&i(n,p)))break;n=n[p];}return h||++f!=d?h:!!(d=null==n?0:n.length)&&u(d)&&l(p,d)&&(s(n)||o(n));};},"09a8d13a":function(n,r,i){!function(r,i,a,o){"use strict";var s,l=["","webkit","Moz","MS","ms","o"],u=i.createElement("div"),c=Math.round,f=Math.abs,d=Date.now;function h(n,r,i){return setTimeout(b(n,i),r);}function p(n,r,i){return!!Array.isArray(n)&&(m(n,i[r],i),!0);}function m(n,r,i){var a;if(n){if(n.forEach)n.forEach(r,i);else if(n.length!==o)for(a=0;a<n.length;)r.call(i,n[a],a,n),a++;else for(a in n)n.hasOwnProperty(a)&&r.call(i,n[a],a,n);}}function g(n,i,a){var o="DEPRECATED METHOD: "+i+"\n"+a+" AT \n";return function(){var i=Error("get-stack-trace"),a=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s=r.console&&(r.console.warn||r.console.log);return s&&s.call(r.console,o,a),n.apply(this,arguments);};}s="function"!=typeof Object.assign?function(n){if(null==n)throw TypeError("Cannot convert undefined or null to object");for(var r=Object(n),i=1;i<arguments.length;i++){var a=arguments[i];if(null!=a)for(var o in a)a.hasOwnProperty(o)&&(r[o]=a[o]);}return r;}:Object.assign;var v=g(function(n,r,i){for(var a=Object.keys(r),s=0;s<a.length;)(!i||i&&n[a[s]]===o)&&(n[a[s]]=r[a[s]]),s++;return n;},"extend","Use `assign`."),y=g(function(n,r){return v(n,r,!0);},"merge","Use `assign`.");function _(n,r,i){var a,o=r.prototype;(a=n.prototype=Object.create(o)).constructor=n,a._super=o,i&&s(a,i);}function b(n,r){return function(){return n.apply(r,arguments);};}function x(n,r){return"function"==typeof n?n.apply(r&&r[0]||o,r):n;}function E(n,r,i){m(A(r),function(r){n.addEventListener(r,i,!1);});}function w(n,r,i){m(A(r),function(r){n.removeEventListener(r,i,!1);});}function S(n,r){for(;n;){if(n==r)return!0;n=n.parentNode;}return!1;}function T(n,r){return n.indexOf(r)>-1;}function A(n){return n.trim().split(/\s+/g);}function C(n,r,i){if(n.indexOf&&!i)return n.indexOf(r);for(var a=0;a<n.length;){if(i&&n[a][i]==r||!i&&n[a]===r)return a;a++;}return -1;}function O(n){return Array.prototype.slice.call(n,0);}function M(n,r,i){for(var a=[],o=[],s=0;s<n.length;){var l=r?n[s][r]:n[s];0>C(o,l)&&a.push(n[s]),o[s]=l,s++;}return i&&(a=r?a.sort(function(n,i){return n[r]>i[r];}):a.sort()),a;}function R(n,r){for(var i,a,s=r[0].toUpperCase()+r.slice(1),u=0;u<l.length;){if((a=(i=l[u])?i+s:r)in n)return a;u++;}return o;}var P=1;function k(n){var i=n.ownerDocument||n;return i.defaultView||i.parentWindow||r;}var I="ontouchstart"in r,L=R(r,"PointerEvent")!==o,N=I&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),D="touch",F="mouse",B=["x","y"],j=["clientX","clientY"];function z(n,r){var i=this;this.manager=n,this.callback=r,this.element=n.element,this.target=n.options.inputTarget,this.domHandler=function(r){x(n.options.enable,[n])&&i.handler(r);},this.init();}function U(n,r,i){var a,s,l,u,c,h,p,m,g,v,y,_,b,x,E,w=i.pointers.length,T=i.changedPointers.length,A=1&r&&w-T==0,C=12&r&&w-T==0;i.isFirst=!!A,i.isFinal=!!C,A&&(n.session={}),i.eventType=r,a=n.session,l=(s=i.pointers).length,a.firstInput||(a.firstInput=V(i)),l>1&&!a.firstMultiple?a.firstMultiple=V(i):1===l&&(a.firstMultiple=!1),u=a.firstInput,h=(c=a.firstMultiple)?c.center:u.center,p=i.center=G(s),i.timeStamp=d(),i.deltaTime=i.timeStamp-u.timeStamp,i.angle=q(h,p),i.distance=X(h,p),m=i.center,g=a.offsetDelta||{},v=a.prevDelta||{},y=a.prevInput||{},(1===i.eventType||4===y.eventType)&&(v=a.prevDelta={x:y.deltaX||0,y:y.deltaY||0},g=a.offsetDelta={x:m.x,y:m.y}),i.deltaX=v.x+(m.x-g.x),i.deltaY=v.y+(m.y-g.y),i.offsetDirection=W(i.deltaX,i.deltaY),_=H(i.deltaTime,i.deltaX,i.deltaY),i.overallVelocityX=_.x,i.overallVelocityY=_.y,i.overallVelocity=f(_.x)>f(_.y)?_.x:_.y,i.scale=c?(b=c.pointers,X(s[0],s[1],j)/X(b[0],b[1],j)):1,i.rotation=c?(x=c.pointers,q(s[1],s[0],j)+q(x[1],x[0],j)):0,i.maxPointers=a.prevInput?i.pointers.length>a.prevInput.maxPointers?i.pointers.length:a.prevInput.maxPointers:i.pointers.length,function(n,r){var i,a,s,l,u=n.lastInterval||r,c=r.timeStamp-u.timeStamp;if(8!=r.eventType&&(c>25||u.velocity===o)){var d=r.deltaX-u.deltaX,h=r.deltaY-u.deltaY,p=H(c,d,h);a=p.x,s=p.y,i=f(p.x)>f(p.y)?p.x:p.y,l=W(d,h),n.lastInterval=r;}else i=u.velocity,a=u.velocityX,s=u.velocityY,l=u.direction;r.velocity=i,r.velocityX=a,r.velocityY=s,r.direction=l;}(a,i),E=n.element,S(i.srcEvent.target,E)&&(E=i.srcEvent.target),i.target=E,n.emit("hammer.input",i),n.recognize(i),n.session.prevInput=i;}function V(n){for(var r=[],i=0;i<n.pointers.length;)r[i]={clientX:c(n.pointers[i].clientX),clientY:c(n.pointers[i].clientY)},i++;return{timeStamp:d(),pointers:r,center:G(r),deltaX:n.deltaX,deltaY:n.deltaY};}function G(n){var r=n.length;if(1===r)return{x:c(n[0].clientX),y:c(n[0].clientY)};for(var i=0,a=0,o=0;o<r;)i+=n[o].clientX,a+=n[o].clientY,o++;return{x:c(i/r),y:c(a/r)};}function H(n,r,i){return{x:r/n||0,y:i/n||0};}function W(n,r){return n===r?1:f(n)>=f(r)?n<0?2:4:r<0?8:16;}function X(n,r,i){i||(i=B);var a=r[i[0]]-n[i[0]],o=r[i[1]]-n[i[1]];return Math.sqrt(a*a+o*o);}function q(n,r,i){i||(i=B);var a=r[i[0]]-n[i[0]];return 180*Math.atan2(r[i[1]]-n[i[1]],a)/Math.PI;}z.prototype={handler:function(){},init:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(k(this.element),this.evWin,this.domHandler);},destroy:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(k(this.element),this.evWin,this.domHandler);}};var $={mousedown:1,mousemove:2,mouseup:4};function Y(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.pressed=!1,z.apply(this,arguments);}_(Y,z,{handler:function(n){var r=$[n.type];1&r&&0===n.button&&(this.pressed=!0),2&r&&1!==n.which&&(r=4),this.pressed&&(4&r&&(this.pressed=!1),this.callback(this.manager,r,{pointers:[n],changedPointers:[n],pointerType:F,srcEvent:n}));}});var Z={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},K={2:D,3:"pen",4:F,5:"kinect"},Q="pointerdown",J="pointermove pointerup pointercancel";function ee(){this.evEl=Q,this.evWin=J,z.apply(this,arguments),this.store=this.manager.session.pointerEvents=[];}r.MSPointerEvent&&!r.PointerEvent&&(Q="MSPointerDown",J="MSPointerMove MSPointerUp MSPointerCancel"),_(ee,z,{handler:function(n){var r=this.store,i=!1,a=Z[n.type.toLowerCase().replace("ms","")],o=K[n.pointerType]||n.pointerType,s=o==D,l=C(r,n.pointerId,"pointerId");1&a&&(0===n.button||s)?l<0&&(r.push(n),l=r.length-1):12&a&&(i=!0),!(l<0)&&(r[l]=n,this.callback(this.manager,a,{pointers:r,changedPointers:[n],pointerType:o,srcEvent:n}),i&&r.splice(l,1));}});var et={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function en(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,z.apply(this,arguments);}function er(n,r){var i=O(n.touches),a=O(n.changedTouches);return 12&r&&(i=M(i.concat(a),"identifier",!0)),[i,a];}_(en,z,{handler:function(n){var r=et[n.type];if(1===r&&(this.started=!0),this.started){var i=er.call(this,n,r);12&r&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,r,{pointers:i[0],changedPointers:i[1],pointerType:D,srcEvent:n});}}});var ei={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function ea(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},z.apply(this,arguments);}function eo(n,r){var i=O(n.touches),a=this.targetIds;if(3&r&&1===i.length)return a[i[0].identifier]=!0,[i,i];var o,s,l=O(n.changedTouches),u=[],c=this.target;if(s=i.filter(function(n){return S(n.target,c);}),1===r)for(o=0;o<s.length;)a[s[o].identifier]=!0,o++;for(o=0;o<l.length;)a[l[o].identifier]&&u.push(l[o]),12&r&&delete a[l[o].identifier],o++;if(u.length)return[M(s.concat(u),"identifier",!0),u];}function es(){z.apply(this,arguments);var n=b(this.handler,this);this.touch=new ea(this.manager,n),this.mouse=new Y(this.manager,n),this.primaryTouch=null,this.lastTouches=[];}function el(n,r){1&n?(this.primaryTouch=r.changedPointers[0].identifier,eu.call(this,r)):12&n&&eu.call(this,r);}function eu(n){var r=n.changedPointers[0];if(r.identifier===this.primaryTouch){var i={x:r.clientX,y:r.clientY};this.lastTouches.push(i);var a=this.lastTouches;setTimeout(function(){var n=a.indexOf(i);n>-1&&a.splice(n,1);},2500);}}function ec(n){for(var r=n.srcEvent.clientX,i=n.srcEvent.clientY,a=0;a<this.lastTouches.length;a++){var o=this.lastTouches[a],s=Math.abs(r-o.x),l=Math.abs(i-o.y);if(s<=25&&l<=25)return!0;}return!1;}_(ea,z,{handler:function(n){var r=ei[n.type],i=eo.call(this,n,r);i&&this.callback(this.manager,r,{pointers:i[0],changedPointers:i[1],pointerType:D,srcEvent:n});}}),_(es,z,{handler:function(n,r,i){var a=i.pointerType==D,o=i.pointerType==F;if(!o||!i.sourceCapabilities||!i.sourceCapabilities.firesTouchEvents){if(a)el.call(this,r,i);else if(o&&ec.call(this,i))return;this.callback(n,r,i);}},destroy:function(){this.touch.destroy(),this.mouse.destroy();}});var ef=R(u.style,"touchAction"),ed=o!==ef,eh="compute",ep="auto",em="manipulation",eg="none",ev="pan-x",ey="pan-y",e_=function(){if(!ed)return!1;var n={},i=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(a){n[a]=!i||r.CSS.supports("touch-action",a);}),n;}();function eb(n,r){this.manager=n,this.set(r);}function ex(n){var r;this.options=s({},this.defaults,n||{}),this.id=P++,this.manager=null,this.options.enable=o===(r=this.options.enable)||r,this.state=1,this.simultaneous={},this.requireFail=[];}function eE(n){return 16&n?"cancel":8&n?"end":4&n?"move":2&n?"start":"";}function ew(n){return 16==n?"down":8==n?"up":2==n?"left":4==n?"right":"";}function eS(n,r){var i=r.manager;return i?i.get(n):n;}function eT(){ex.apply(this,arguments);}function eA(){eT.apply(this,arguments),this.pX=null,this.pY=null;}function eC(){eT.apply(this,arguments);}function eO(){ex.apply(this,arguments),this._timer=null,this._input=null;}function eM(){eT.apply(this,arguments);}function eR(){eT.apply(this,arguments);}function eP(){ex.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0;}function ek(n,r){var i,a;return(r=r||{}).recognizers=(i=r.recognizers,a=ek.defaults.preset,o===i?a:i),new eI(n,r);}function eI(n,r){var i;this.options=s({},ek.defaults,r||{}),this.options.inputTarget=this.options.inputTarget||n,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=n,this.input=new((i=this.options.inputClass)?i:L?ee:N?ea:I?es:Y)(this,U),this.touchAction=new eb(this,this.options.touchAction),eL(this,!0),m(this.options.recognizers,function(n){var r=this.add(new n[0](n[1]));n[2]&&r.recognizeWith(n[2]),n[3]&&r.requireFailure(n[3]);},this);}function eL(n,r){var i,a=n.element;a.style&&(m(n.options.cssProps,function(o,s){i=R(a.style,s),r?(n.oldCssProps[i]=a.style[i],a.style[i]=o):a.style[i]=n.oldCssProps[i]||"";}),r||(n.oldCssProps={}));}eb.prototype={set:function(n){n==eh&&(n=this.compute()),ed&&this.manager.element.style&&e_[n]&&(this.manager.element.style[ef]=n),this.actions=n.toLowerCase().trim();},update:function(){this.set(this.manager.options.touchAction);},compute:function(){var n=[];return m(this.manager.recognizers,function(r){x(r.options.enable,[r])&&(n=n.concat(r.getTouchAction()));}),function(n){if(T(n,eg))return eg;var r=T(n,ev),i=T(n,ey);return r&&i?eg:r||i?r?ev:ey:T(n,em)?em:ep;}(n.join(" "));},preventDefaults:function(n){var r=n.srcEvent,i=n.offsetDirection;if(this.manager.session.prevented){r.preventDefault();return;}var a=this.actions,o=T(a,eg)&&!e_[eg],s=T(a,ey)&&!e_[ey],l=T(a,ev)&&!e_[ev];if(o){var u=1===n.pointers.length,c=n.distance<2,f=n.deltaTime<250;if(u&&c&&f)return;}if((!l||!s)&&(o||s&&6&i||l&&24&i))return this.preventSrc(r);},preventSrc:function(n){this.manager.session.prevented=!0,n.preventDefault();}},ex.prototype={defaults:{},set:function(n){return s(this.options,n),this.manager&&this.manager.touchAction.update(),this;},recognizeWith:function(n){if(p(n,"recognizeWith",this))return this;var r=this.simultaneous;return r[(n=eS(n,this)).id]||(r[n.id]=n,n.recognizeWith(this)),this;},dropRecognizeWith:function(n){return p(n,"dropRecognizeWith",this)||(n=eS(n,this),delete this.simultaneous[n.id]),this;},requireFailure:function(n){if(p(n,"requireFailure",this))return this;var r=this.requireFail;return -1===C(r,n=eS(n,this))&&(r.push(n),n.requireFailure(this)),this;},dropRequireFailure:function(n){if(p(n,"dropRequireFailure",this))return this;n=eS(n,this);var r=C(this.requireFail,n);return r>-1&&this.requireFail.splice(r,1),this;},hasRequireFailures:function(){return this.requireFail.length>0;},canRecognizeWith:function(n){return!!this.simultaneous[n.id];},emit:function(n){var r=this,i=this.state;function a(i){r.manager.emit(i,n);}i<8&&a(r.options.event+eE(i)),a(r.options.event),n.additionalEvent&&a(n.additionalEvent),i>=8&&a(r.options.event+eE(i));},tryEmit:function(n){if(this.canEmit())return this.emit(n);this.state=32;},canEmit:function(){for(var n=0;n<this.requireFail.length;){if(!(33&this.requireFail[n].state))return!1;n++;}return!0;},recognize:function(n){var r=s({},n);if(!x(this.options.enable,[this,r])){this.reset(),this.state=32;return;}56&this.state&&(this.state=1),this.state=this.process(r),30&this.state&&this.tryEmit(r);},process:function(n){},getTouchAction:function(){},reset:function(){}},_(eT,ex,{defaults:{pointers:1},attrTest:function(n){var r=this.options.pointers;return 0===r||n.pointers.length===r;},process:function(n){var r=this.state,i=n.eventType,a=6&r,o=this.attrTest(n);return a&&(8&i||!o)?16|r:a||o?4&i?8|r:2&r?4|r:2:32;}}),_(eA,eT,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var n=this.options.direction,r=[];return 6&n&&r.push(ey),24&n&&r.push(ev),r;},directionTest:function(n){var r=this.options,i=!0,a=n.distance,o=n.direction,s=n.deltaX,l=n.deltaY;return o&r.direction||(6&r.direction?(o=0===s?1:s<0?2:4,i=s!=this.pX,a=Math.abs(n.deltaX)):(o=0===l?1:l<0?8:16,i=l!=this.pY,a=Math.abs(n.deltaY))),n.direction=o,i&&a>r.threshold&&o&r.direction;},attrTest:function(n){return eT.prototype.attrTest.call(this,n)&&(2&this.state||!(2&this.state)&&this.directionTest(n));},emit:function(n){this.pX=n.deltaX,this.pY=n.deltaY;var r=ew(n.direction);r&&(n.additionalEvent=this.options.event+r),this._super.emit.call(this,n);}}),_(eC,eT,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[eg];},attrTest:function(n){return this._super.attrTest.call(this,n)&&(Math.abs(n.scale-1)>this.options.threshold||2&this.state);},emit:function(n){if(1!==n.scale){var r=n.scale<1?"in":"out";n.additionalEvent=this.options.event+r;}this._super.emit.call(this,n);}}),_(eO,ex,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ep];},process:function(n){var r=this.options,i=n.pointers.length===r.pointers,a=n.distance<r.threshold,o=n.deltaTime>r.time;if(this._input=n,a&&i&&(!(12&n.eventType)||o)){if(1&n.eventType)this.reset(),this._timer=h(function(){this.state=8,this.tryEmit();},r.time,this);else if(4&n.eventType)return 8;}else this.reset();return 32;},reset:function(){clearTimeout(this._timer);},emit:function(n){8===this.state&&(n&&4&n.eventType?this.manager.emit(this.options.event+"up",n):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)));}}),_(eM,eT,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[eg];},attrTest:function(n){return this._super.attrTest.call(this,n)&&(Math.abs(n.rotation)>this.options.threshold||2&this.state);}}),_(eR,eT,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return eA.prototype.getTouchAction.call(this);},attrTest:function(n){var r,i=this.options.direction;return 30&i?r=n.overallVelocity:6&i?r=n.overallVelocityX:24&i&&(r=n.overallVelocityY),this._super.attrTest.call(this,n)&&i&n.offsetDirection&&n.distance>this.options.threshold&&n.maxPointers==this.options.pointers&&f(r)>this.options.velocity&&4&n.eventType;},emit:function(n){var r=ew(n.offsetDirection);r&&this.manager.emit(this.options.event+r,n),this.manager.emit(this.options.event,n);}}),_(eP,ex,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[em];},process:function(n){var r=this.options,i=n.pointers.length===r.pointers,a=n.distance<r.threshold,o=n.deltaTime<r.time;if(this.reset(),1&n.eventType&&0===this.count)return this.failTimeout();if(a&&o&&i){if(4!=n.eventType)return this.failTimeout();var s=!this.pTime||n.timeStamp-this.pTime<r.interval,l=!this.pCenter||X(this.pCenter,n.center)<r.posThreshold;if(this.pTime=n.timeStamp,this.pCenter=n.center,l&&s?this.count+=1:this.count=1,this._input=n,0==this.count%r.taps)return this.hasRequireFailures()?(this._timer=h(function(){this.state=8,this.tryEmit();},r.interval,this),2):8;}return 32;},failTimeout:function(){return this._timer=h(function(){this.state=32;},this.options.interval,this),32;},reset:function(){clearTimeout(this._timer);},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input));}}),ek.VERSION="2.0.7",ek.defaults={domEvents:!1,touchAction:eh,enable:!0,inputTarget:null,inputClass:null,preset:[[eM,{enable:!1}],[eC,{enable:!1},["rotate"]],[eR,{direction:6}],[eA,{direction:6},["swipe"]],[eP],[eP,{event:"doubletap",taps:2},["tap"]],[eO]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},eI.prototype={set:function(n){return s(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this;},stop:function(n){this.session.stopped=n?2:1;},recognize:function(n){var r,i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var a=this.recognizers,o=i.curRecognizer;(!o||o&&8&o.state)&&(o=i.curRecognizer=null);for(var s=0;s<a.length;)r=a[s],2!==i.stopped&&(!o||r==o||r.canRecognizeWith(o))?r.recognize(n):r.reset(),!o&&14&r.state&&(o=i.curRecognizer=r),s++;}},get:function(n){if(n instanceof ex)return n;for(var r=this.recognizers,i=0;i<r.length;i++)if(r[i].options.event==n)return r[i];return null;},add:function(n){if(p(n,"add",this))return this;var r=this.get(n.options.event);return r&&this.remove(r),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n;},remove:function(n){if(p(n,"remove",this))return this;if(n=this.get(n)){var r=this.recognizers,i=C(r,n);-1!==i&&(r.splice(i,1),this.touchAction.update());}return this;},on:function(n,r){if(o!==n&&o!==r){var i=this.handlers;return m(A(n),function(n){i[n]=i[n]||[],i[n].push(r);}),this;}},off:function(n,r){if(o!==n){var i=this.handlers;return m(A(n),function(n){r?i[n]&&i[n].splice(C(i[n],r),1):delete i[n];}),this;}},emit:function(n,r){this.options.domEvents&&((a=i.createEvent("Event")).initEvent(n,!0,!0),a.gesture=r,r.target.dispatchEvent(a));var a,o=this.handlers[n]&&this.handlers[n].slice();if(o&&o.length){r.type=n,r.preventDefault=function(){r.srcEvent.preventDefault();};for(var s=0;s<o.length;)o[s](r),s++;}},destroy:function(){this.element&&eL(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null;}},s(ek,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:eI,Input:z,TouchAction:eb,TouchInput:ea,MouseInput:Y,PointerEventInput:ee,TouchMouseInput:es,SingleTouchInput:en,Recognizer:ex,AttrRecognizer:eT,Tap:eP,Pan:eA,Swipe:eR,Pinch:eC,Rotate:eM,Press:eO,on:E,off:w,each:m,merge:y,extend:v,assign:s,inherit:_,bindFn:b,prefixed:R}),(void 0!==r?r:"undefined"!=typeof self?self:{}).Hammer=ek,void 0!==n&&n.exports?n.exports=ek:r[a]=ek;}(window,document,"Hammer");},"09b9e239":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return o;}});var a=i("777fffbe")._(i("277e4603"));function o(n,r){var i,o={},s={};for(i in(null===n||"object"!=typeof n)&&(n={}),(null===r||"object"!=typeof r)&&(r={}),r)i in n?o[i]=(0,a.default)(n[i],r[i]):s[i]=r[i];return function(n){for(i in o)s[i]=o[i](n);return s;};}},"0a6d0fa0":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{ascending:function(){return a;},bisect:function(){return l;},bisector:function(){return o;},quantile:function(){return v;},tickIncrement:function(){return p;},tickStep:function(){return m;},ticks:function(){return h;}});var a=function(n,r){return n<r?-1:n>r?1:n>=r?0:NaN;},o=function(n){var r;return 1===n.length&&(r=n,n=function(n,i){return a(r(n),i);}),{left:function(r,i,a,o){for(null==a&&(a=0),null==o&&(o=r.length);a<o;){var s=a+o>>>1;0>n(r[s],i)?a=s+1:o=s;}return a;},right:function(r,i,a,o){for(null==a&&(a=0),null==o&&(o=r.length);a<o;){var s=a+o>>>1;n(r[s],i)>0?o=s:a=s+1;}return a;}};},s=o(a),l=s.right;s.left;var u=Array.prototype;u.slice,u.map;var c=Math.sqrt(50),f=Math.sqrt(10),d=Math.sqrt(2),h=function(n,r,i){var a,o,s,l,u=-1;if(i=+i,(n=+n)==(r=+r)&&i>0)return[n];if((a=r<n)&&(o=n,n=r,r=o),0===(l=p(n,r,i))||!isFinite(l))return[];if(l>0)for(n=Math.ceil(n/l),s=Array(o=Math.ceil((r=Math.floor(r/l))-n+1));++u<o;)s[u]=(n+u)*l;else for(s=Array(o=Math.ceil((n=Math.floor(n*l))-(r=Math.ceil(r*l))+1));++u<o;)s[u]=(n-u)/l;return a&&s.reverse(),s;};function p(n,r,i){var a=(r-n)/Math.max(0,i),o=Math.floor(Math.log(a)/Math.LN10),s=a/Math.pow(10,o);return o>=0?(s>=c?10:s>=f?5:s>=d?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(s>=c?10:s>=f?5:s>=d?2:1);}function m(n,r,i){var a=Math.abs(r-n)/Math.max(0,i),o=Math.pow(10,Math.floor(Math.log(a)/Math.LN10)),s=a/o;return s>=c?o*=10:s>=f?o*=5:s>=d&&(o*=2),r<n?-o:o;}var g=function(n){return null===n?NaN:+n;},v=function(n,r,i){if(null==i&&(i=g),a=n.length){if((r=+r)<=0||a<2)return+i(n[0],0,n);if(r>=1)return+i(n[a-1],a-1,n);var a,o=(a-1)*r,s=Math.floor(o),l=+i(n[s],s,n);return l+(+i(n[s+1],s+1,n)-l)*(o-s);}};},"0ac9c851":function(n,r,i){"use strict";n.exports=function(n){var r={};function i(i){var a=n.get(i);return void 0===a?[]:r[a]||[];}return{get:i,add:function(i,a){var o=n.get(i);r[o]||(r[o]=[]),r[o].push(a);},removeListener:function(n,r){for(var a=i(n),o=0,s=a.length;o<s;++o)if(a[o]===r){a.splice(o,1);break;}},removeAllListeners:function(n){var r=i(n);r&&(r.length=0);}};};},"0c09091c":function(n,r,i){"use strict";var a,o;a=this,o=function(){function n(n){var r,l,u=[];return n.AMapUI&&u.push((r=n.AMapUI,new Promise(function(n,l){var u=[];if(r.plugins)for(var c=0;c<r.plugins.length;c+=1)-1==a.AMapUI.plugins.indexOf(r.plugins[c])&&u.push(r.plugins[c]);if(o.AMapUI===i.failed)l("\u524D\u6B21\u8BF7\u6C42 AMapUI \u5931\u8D25");else if(o.AMapUI===i.notload){o.AMapUI=i.loading,a.AMapUI.version=r.version||a.AMapUI.version,c=a.AMapUI.version;var f=document.body||document.head,d=document.createElement("script");d.type="text/javascript",d.src="https://webapi.amap.com/ui/"+c+"/main.js",d.onerror=function(n){o.AMapUI=i.failed,l("\u8BF7\u6C42 AMapUI \u5931\u8D25");},d.onload=function(){if(o.AMapUI=i.loaded,u.length)window.AMapUI.loadUI(u,function(){for(var r=0,i=u.length;r<i;r++){var a=u[r].split("/").slice(-1)[0];window.AMapUI[a]=arguments[r];}for(n();s.AMapUI.length;)s.AMapUI.splice(0,1)[0]();});else for(n();s.AMapUI.length;)s.AMapUI.splice(0,1)[0]();},f.appendChild(d);}else o.AMapUI===i.loaded?r.version&&r.version!==a.AMapUI.version?l("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):u.length?window.AMapUI.loadUI(u,function(){for(var r=0,i=u.length;r<i;r++){var a=u[r].split("/").slice(-1)[0];window.AMapUI[a]=arguments[r];}n();}):n():r.version&&r.version!==a.AMapUI.version?l("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):s.AMapUI.push(function(r){r?l(r):u.length?window.AMapUI.loadUI(u,function(){for(var r=0,i=u.length;r<i;r++){var a=u[r].split("/").slice(-1)[0];window.AMapUI[a]=arguments[r];}n();}):n();});}))),n.Loca&&u.push((l=n.Loca,new Promise(function(n,r){if(o.Loca===i.failed)r("\u524D\u6B21\u8BF7\u6C42 Loca \u5931\u8D25");else if(o.Loca===i.notload){o.Loca=i.loading,a.Loca.version=l.version||a.Loca.version;var u=a.Loca.version,c=a.AMap.version.startsWith("2"),f=u.startsWith("2");if(c&&!f||!c&&f)r("JSAPI \u4E0E Loca \u7248\u672C\u4E0D\u5BF9\u5E94\uFF01\uFF01");else{c=a.key,f=document.body||document.head;var d=document.createElement("script");d.type="text/javascript",d.src="https://webapi.amap.com/loca?v="+u+"&key="+c,d.onerror=function(n){o.Loca=i.failed,r("\u8BF7\u6C42 AMapUI \u5931\u8D25");},d.onload=function(){for(o.Loca=i.loaded,n();s.Loca.length;)s.Loca.splice(0,1)[0]();},f.appendChild(d);}}else o.Loca===i.loaded?l.version&&l.version!==a.Loca.version?r("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):n():l.version&&l.version!==a.Loca.version?r("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):s.Loca.push(function(n){n?r(n):r();});}))),Promise.all(u);}if(!window)throw Error("AMap JSAPI can only be used in Browser.");(r=i||(i={})).notload="notload",r.loading="loading",r.loaded="loaded",r.failed="failed";var r,i,a={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},o={AMap:i.notload,AMapUI:i.notload,Loca:i.notload},s={AMap:[],AMapUI:[],Loca:[]},l=[],u=function(n){"function"==typeof n&&(o.AMap===i.loaded?n(window.AMap):l.push(n));};return{load:function(r){return new Promise(function(s,c){if(o.AMap==i.failed)c("");else if(o.AMap==i.notload){var f=r.key,d=r.version,h=r.plugins;f?(window.AMap&&"lbs.amap.com"!==location.host&&c("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),a.key=f,a.AMap.version=d||a.AMap.version,a.AMap.plugins=h||a.AMap.plugins,o.AMap=i.loading,d=document.body||document.head,window.___onAPILoaded=function(a){if(delete window.___onAPILoaded,a)o.AMap=i.failed,c(a);else for(o.AMap=i.loaded,n(r).then(function(){s(window.AMap);}).catch(c);l.length;)l.splice(0,1)[0]();},(h=document.createElement("script")).type="text/javascript",h.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+a.AMap.version+"&key="+f+"&plugin="+a.AMap.plugins.join(","),h.onerror=function(n){o.AMap=i.failed,c(n);},d.appendChild(h)):c("\u8BF7\u586B\u5199key");}else if(o.AMap==i.loaded){if(r.key&&r.key!==a.key)c("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(r.version&&r.version!==a.AMap.version)c("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{if(f=[],r.plugins)for(d=0;d<r.plugins.length;d+=1)-1==a.AMap.plugins.indexOf(r.plugins[d])&&f.push(r.plugins[d]);f.length?window.AMap.plugin(f,function(){n(r).then(function(){s(window.AMap);}).catch(c);}):n(r).then(function(){s(window.AMap);}).catch(c);}}else if(r.key&&r.key!==a.key)c("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(r.version&&r.version!==a.AMap.version)c("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{var p=[];if(r.plugins)for(d=0;d<r.plugins.length;d+=1)-1==a.AMap.plugins.indexOf(r.plugins[d])&&p.push(r.plugins[d]);u(function(){p.length?window.AMap.plugin(p,function(){n(r).then(function(){s(window.AMap);}).catch(c);}):n(r).then(function(){s(window.AMap);}).catch(c);});}});},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,a={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},o={AMap:i.notload,AMapUI:i.notload,Loca:i.notload},s={AMap:[],AMapUI:[],Loca:[]};}};},"object"==typeof r&&void 0!==n?n.exports=o():(a=a||self).AMapLoader=o();},"0c2b9405":function(n,r,i){"use strict";var a=i("89a0cb41").default;Object.defineProperty(r,"__esModule",{value:!0}),r.clearContainerCache=function(){f.clear();},r.injectCSS=m,r.removeCSS=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=g(n,r);i&&h(r).removeChild(i);},r.updateCSS=function(n,r){var i,a,s,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=h(u),v=p(c),y=(0,o.default)((0,o.default)({},u),{},{styles:v});!function(n,r){var i=f.get(n);if(!i||!(0,l.default)(document,i)){var a=m("",r),o=a.parentNode;f.set(n,o),n.removeChild(a);}}(c,y);var _=g(r,y);if(_)return null!==(i=y.csp)&&void 0!==i&&i.nonce&&_.nonce!==(null===(a=y.csp)||void 0===a?void 0:a.nonce)&&(_.nonce=null===(s=y.csp)||void 0===s?void 0:s.nonce),_.innerHTML!==n&&(_.innerHTML=n),_;var b=m(n,y);return b.setAttribute(d(y),r),b;};var o=a(i("3bbc6f6c")),s=a(i("0047230b")),l=a(i("1536f4d4")),u="data-rc-order",c="data-rc-priority",f=new Map;function d(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.mark;return r?r.startsWith("data-")?r:"data-".concat(r):"rc-util-key";}function h(n){return n.attachTo?n.attachTo:document.querySelector("head")||document.body;}function p(n){return Array.from((f.get(n)||n).children).filter(function(n){return"STYLE"===n.tagName;});}function m(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,s.default)())return null;var i=r.csp,a=r.prepend,o=r.priority,l=void 0===o?0:o,f="queue"===a?"prependQueue":a?"prepend":"append",d="prependQueue"===f,m=document.createElement("style");m.setAttribute(u,f),d&&l&&m.setAttribute(c,"".concat(l)),null!=i&&i.nonce&&(m.nonce=null==i?void 0:i.nonce),m.innerHTML=n;var g=h(r),v=g.firstChild;if(a){if(d){var y=(r.styles||p(g)).filter(function(n){return!!["prepend","prependQueue"].includes(n.getAttribute(u))&&l>=Number(n.getAttribute(c)||0);});if(y.length)return g.insertBefore(m,y[y.length-1].nextSibling),m;}g.insertBefore(m,v);}else g.appendChild(m);return m;}function g(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=h(r);return(r.styles||p(i)).find(function(i){return i.getAttribute(d(r))===n;});}},"0c4be061":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});var a=i("852bbaa9")._(i("609f48be")).createContext({renderWithProps:!1});},"0cf4df74":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{createOffscreenGroup:function(){return c;},isInOffscreenGroup:function(){return f;}});var a=i("3862611d"),o=i("5e195043"),s=i("5e195043"),l=i("f1d8aa22"),u=function(n){function r(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s=n.apply(this,(0,a.__spreadArray)([],(0,a.__read)(r),!1))||this;return s.isMutationObserved=!0,s.addEventListener(o.ElementEvent.INSERTED,function(){(0,l.hide)(s);}),s;}return(0,a.__extends)(r,n),r;}(s.Group);function c(n){var r=n.appendChild(new u({class:"offscreen"}));return(0,l.hide)(r),r;}function f(n){for(var r=n;r;){if("offscreen"===r.className)return!0;r=r.parent;}return!1;}},"0d102543":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{abs:function(){return a;},acos:function(){return g;},asin:function(){return v;},atan2:function(){return o;},cos:function(){return s;},epsilon:function(){return d;},halfPi:function(){return p;},max:function(){return l;},min:function(){return u;},pi:function(){return h;},sin:function(){return c;},sqrt:function(){return f;},tau:function(){return m;}});let a=Math.abs,o=Math.atan2,s=Math.cos,l=Math.max,u=Math.min,c=Math.sin,f=Math.sqrt,d=1e-12,h=Math.PI,p=h/2,m=2*h;function g(n){return n>1?0:n<-1?h:Math.acos(n);}function v(n){return n>=1?p:n<=-1?-p:Math.asin(n);}},"0dcab6c6":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{SEARCH_MARK:function(){return f;},default:function(){return p;}});var a=i("777fffbe"),o=i("852bbaa9"),s=a._(i("a854094b")),l=a._(i("e4870cf0")),u=a._(i("f1020fa4")),c=o._(i("609f48be")),f="__rc_cascader_search_mark__",d=function(n,r,i){var a=i.label,o=void 0===a?"":a;return r.some(function(r){return String(r[o]).toLowerCase().includes(n.toLowerCase());});},h=function(n,r,i,a){return r.map(function(n){return n[a.label];}).join(" / ");},p=function(n,r,i,a,o,p){var m=o.filter,g=void 0===m?d:m,v=o.render,y=void 0===v?h:v,_=o.limit,b=void 0===_?50:_,x=o.sort;return c.useMemo(function(){var o=[];return n?(!function r(c,d){var h=arguments.length>2&&void 0!==arguments[2]&&arguments[2];c.forEach(function(c){if(x||!1===b||!(b>0)||!(o.length>=b)){var m,v=[].concat((0,u.default)(d),[c]),_=c[i.children],E=h||c.disabled;(!_||0===_.length||p)&&g(n,v,{label:i.label})&&o.push((0,l.default)((0,l.default)({},c),{},(m={disabled:E},(0,s.default)(m,i.label,y(n,v,a,i)),(0,s.default)(m,f,v),(0,s.default)(m,i.children,void 0),m))),_&&r(c[i.children],v,E);}});}(r,[]),x&&o.sort(function(r,a){return x(r[f],a[f],n,i);}),!1!==b&&b>0?o.slice(0,b):o):[];},[n,r,i,a,y,p,g,x,b]);};},"0e2cd74b":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return p;}});var a=i("777fffbe"),o=i("480dd2d5"),s=a._(o),l=i("6f0d7bd0"),u=a._(l);function c(n){return(0,u.default)(n)&&"[object Arguments]"==(0,s.default)(n);}var f=Object.prototype,d=f.hasOwnProperty,h=f.propertyIsEnumerable,p=c(function(){return arguments;}())?c:function(n){return(0,u.default)(n)&&d.call(n,"callee")&&!h.call(n,"callee");};},"0fbce506":function(n,r,i){"use strict";(n.exports={}).getOption=function(n,r,i){var a=n[r];return null==a&&void 0!==i?i:a;};},10039389:function(n,r,i){"use strict";n.exports=function(n){function r(){}var i={log:r,warn:r,error:r};if(!n&&window.console){var a=function(n,r){n[r]=function(){var n=console[r];if(n.apply)n.apply(console,arguments);else for(var i=0;i<arguments.length;i++)n(arguments[i]);};};a(i,"log"),a(i,"warn"),a(i,"error");}return i;};},"10d71b98":function(n,r,i){var a=i("34c0deef"),o=i("43f60061"),s=i("07ba0bdb"),l=i("743ea378");n.exports=function(n){return s(n)?a(l(n)):o(n);};},"110b1906":function(n,r,i){"use strict";function a(n){return function(){return n;};}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},"1110bbab":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return l;}});var a=i("852bbaa9")._(i("609f48be")),o=i("4f68f1f3"),s=["onMouseEnter","onMouseLeave"];function l(n){return a.useMemo(function(){return(0,o.pickProps)(n,s);},[n]);}},"115c0a49":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return x;},getNumberPrecision:function(){return g;},num2str:function(){return v;},toFixed:function(){return function n(r,i,a){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(""===r)return"";var s=p(r),l=s.negativeStr,u=s.integerStr,c=s.decimalStr,f="".concat(i).concat(c),d="".concat(l).concat(u);if(a>=0){var h=Number(c[a]);return h>=5&&!o?n(x(r).add("".concat(l,"0.").concat("0".repeat(a)).concat(10-h)).toString(),i,a,o):0===a?d:"".concat(d).concat(i).concat(c.padEnd(a,"0").slice(0,a));}return".0"===f?d:"".concat(d).concat(f);};},trimNumber:function(){return p;},validateNumber:function(){return y;}});var a=i("777fffbe"),o=i("8bbe4f57"),s=a._(o),l=i("85158032"),u=a._(l),c=i("a854094b"),f=a._(c);function d(){return"function"==typeof BigInt;}function h(n){return!n&&0!==n&&!Number.isNaN(n)||!String(n).trim();}function p(n){var r=n.trim(),i=r.startsWith("-");i&&(r=r.slice(1)),(r=r.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,"")).startsWith(".")&&(r="0".concat(r));var a=r||"0",o=a.split("."),s=o[0]||"0",l=o[1]||"0";"0"===s&&"0"===l&&(i=!1);var u=i?"-":"";return{negative:i,negativeStr:u,trimStr:a,integerStr:s,decimalStr:l,fullStr:"".concat(u).concat(a)};}function m(n){var r=String(n);return!Number.isNaN(Number(r))&&r.includes("e");}function g(n){var r=String(n);if(m(n)){var i=Number(r.slice(r.indexOf("e-")+2)),a=r.match(/\.(\d+)/);return null!=a&&a[1]&&(i+=a[1].length),i;}return r.includes(".")&&y(r)?r.length-r.indexOf(".")-1:0;}function v(n){var r=String(n);if(m(n)){if(n>Number.MAX_SAFE_INTEGER)return String(d()?BigInt(n).toString():Number.MAX_SAFE_INTEGER);if(n<Number.MIN_SAFE_INTEGER)return String(d()?BigInt(n).toString():Number.MIN_SAFE_INTEGER);r=n.toFixed(g(r));}return p(r).fullStr;}function y(n){return"number"==typeof n?!Number.isNaN(n):!!n&&(/^\s*-?\d+(\.\d+)?\s*$/.test(n)||/^\s*-?\d+\.\s*$/.test(n)||/^\s*-?\.\d+\s*$/.test(n));}var _=function(){function n(r){if((0,s.default)(this,n),(0,f.default)(this,"origin",""),(0,f.default)(this,"negative",void 0),(0,f.default)(this,"integer",void 0),(0,f.default)(this,"decimal",void 0),(0,f.default)(this,"decimalLen",void 0),(0,f.default)(this,"empty",void 0),(0,f.default)(this,"nan",void 0),h(r)){this.empty=!0;return;}if(this.origin=String(r),"-"===r||Number.isNaN(r)){this.nan=!0;return;}var i=r;if(m(i)&&(i=Number(i)),y(i="string"==typeof i?i:v(i))){var a=p(i);this.negative=a.negative;var o=a.trimStr.split(".");this.integer=BigInt(o[0]);var l=o[1]||"0";this.decimal=BigInt(l),this.decimalLen=l.length;}else this.nan=!0;}return(0,u.default)(n,[{key:"getMark",value:function(){return this.negative?"-":"";}},{key:"getIntegerStr",value:function(){return this.integer.toString();}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0");}},{key:"alignDecimal",value:function(n){return BigInt("".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(n,"0")));}},{key:"negate",value:function(){var r=new n(this.toString());return r.negative=!r.negative,r;}},{key:"cal",value:function(r,i,a){var o=Math.max(this.getDecimalStr().length,r.getDecimalStr().length),s=i(this.alignDecimal(o),r.alignDecimal(o)).toString(),l=a(o),u=p(s),c=u.negativeStr,f=u.trimStr,d="".concat(c).concat(f.padStart(l+1,"0"));return new n("".concat(d.slice(0,-l),".").concat(d.slice(-l)));}},{key:"add",value:function(r){if(this.isInvalidate())return new n(r);var i=new n(r);return i.isInvalidate()?this:this.cal(i,function(n,r){return n+r;},function(n){return n;});}},{key:"multi",value:function(r){var i=new n(r);return this.isInvalidate()||i.isInvalidate()?new n(NaN):this.cal(i,function(n,r){return n*r;},function(n){return 2*n;});}},{key:"isEmpty",value:function(){return this.empty;}},{key:"isNaN",value:function(){return this.nan;}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN();}},{key:"equals",value:function(n){return this.toString()===(null==n?void 0:n.toString());}},{key:"lessEquals",value:function(n){return 0>=this.add(n.negate().toString()).toNumber();}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString());}},{key:"toString",value:function(){var n=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return n?this.isInvalidate()?"":p("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin;}}]),n;}(),b=function(){function n(r){if((0,s.default)(this,n),(0,f.default)(this,"origin",""),(0,f.default)(this,"number",void 0),(0,f.default)(this,"empty",void 0),h(r)){this.empty=!0;return;}this.origin=String(r),this.number=Number(r);}return(0,u.default)(n,[{key:"negate",value:function(){return new n(-this.toNumber());}},{key:"add",value:function(r){if(this.isInvalidate())return new n(r);var i=Number(r);if(Number.isNaN(i))return this;var a=this.number+i;if(a>Number.MAX_SAFE_INTEGER)return new n(Number.MAX_SAFE_INTEGER);if(a<Number.MIN_SAFE_INTEGER)return new n(Number.MIN_SAFE_INTEGER);var o=Math.max(g(this.number),g(i));return new n(a.toFixed(o));}},{key:"multi",value:function(r){var i=Number(r);if(this.isInvalidate()||Number.isNaN(i))return new n(NaN);var a=this.number*i;if(a>Number.MAX_SAFE_INTEGER)return new n(Number.MAX_SAFE_INTEGER);if(a<Number.MIN_SAFE_INTEGER)return new n(Number.MIN_SAFE_INTEGER);var o=Math.max(g(this.number),g(i));return new n(a.toFixed(o));}},{key:"isEmpty",value:function(){return this.empty;}},{key:"isNaN",value:function(){return Number.isNaN(this.number);}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN();}},{key:"equals",value:function(n){return this.toNumber()===(null==n?void 0:n.toNumber());}},{key:"lessEquals",value:function(n){return 0>=this.add(n.negate().toString()).toNumber();}},{key:"toNumber",value:function(){return this.number;}},{key:"toString",value:function(){var n=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return n?this.isInvalidate()?"":v(this.number):this.origin;}}]),n;}();function x(n){return d()?new _(n):new b(n);}},"11bba482":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{FormListContext:function(){return T;},ProFormList:function(){return A;}});var a=i("777fffbe"),o=i("852bbaa9"),s=a._(i("f1020fa4")),l=a._(i("e4870cf0")),u=a._(i("613f75ca")),c=a._(i("a774639c")),f=a._(i("a788b59c")),d=i("64681837"),h=i("4701d2de"),p=a._(i("a5a99096")),m=a._(i("f34e933b")),g=a._(i("064ecd09")),v=i("a275200c"),y=o._(i("609f48be")),_=a._(i("2faf3d77")),b=i("02a23b09"),x=i("8fe0a95a"),E=i("4783ed5c"),w=i("dac8af92"),S=["transform","actionRender","creatorButtonProps","label","alwaysShowItemLabel","tooltip","creatorRecord","itemRender","rules","itemContainerRender","fieldExtraRender","copyIconProps","children","deleteIconProps","actionRef","style","prefixCls","actionGuard","min","max","colProps","wrapperCol","rowProps","onAfterAdd","onAfterRemove","isValidateList","emptyListMessage","className","containerClassName","containerStyle","readonly"],T=y.default.createContext({});function A(n){var r=(0,y.useRef)(),i=(0,y.useContext)(p.default.ConfigContext),a=(0,y.useContext)(T),o=i.getPrefixCls("pro-form-list"),A=(0,d.useIntl)(),C=y.default.useContext(_.default).setFieldValueType,O=n.transform,M=n.actionRender,R=n.creatorButtonProps,P=n.label,k=n.alwaysShowItemLabel,I=n.tooltip,L=n.creatorRecord,N=n.itemRender,D=n.rules,F=n.itemContainerRender,B=n.fieldExtraRender,j=n.copyIconProps,z=void 0===j?{Icon:c.default,tooltipText:A.getMessage("copyThisLine","\u590D\u5236\u6B64\u9879")}:j,U=n.children,V=n.deleteIconProps,G=void 0===V?{Icon:f.default,tooltipText:A.getMessage("deleteThisLine","\u5220\u9664\u6B64\u9879")}:V,H=n.actionRef,W=n.style,X=n.prefixCls,q=n.actionGuard,$=n.min,Y=n.max,Z=n.colProps,K=n.wrapperCol,Q=n.rowProps,J=n.onAfterAdd,ee=n.onAfterRemove,et=n.isValidateList,en=void 0!==et&&et,er=n.emptyListMessage,ei=void 0===er?"\u5217\u8868\u4E0D\u80FD\u4E3A\u7A7A":er,ea=n.className,eo=n.containerClassName,es=n.containerStyle,el=n.readonly,eu=(0,u.default)(n,S),ec=(0,b.useGridHelpers)({colProps:Z,rowProps:Q}),ef=ec.ColWrapper,ed=ec.RowWrapper,eh=(0,y.useContext)(h.ProFormContext),ep=(0,y.useMemo)(function(){return void 0===a.name?[eu.name].flat(1):[a.name,eu.name].flat(1);},[a.name,eu.name]);(0,y.useImperativeHandle)(H,function(){return(0,l.default)((0,l.default)({},r.current),{},{get:function(n){return eh.formRef.current.getFieldValue([].concat((0,s.default)(ep),[n]));},getList:function(){return eh.formRef.current.getFieldValue((0,s.default)(ep));}});},[ep,eh.formRef]),(0,y.useEffect)(function(){(0,v.noteOnce)(!!eh.formRef,"ProFormList \u5FC5\u987B\u8981\u653E\u5230 ProForm \u4E2D,\u5426\u5219\u4F1A\u9020\u6210\u884C\u4E3A\u5F02\u5E38\u3002"),(0,v.noteOnce)(!!eh.formRef,"Proformlist must be placed in ProForm, otherwise it will cause abnormal behavior.");},[eh.formRef]),(0,y.useEffect)(function(){C&&n.name&&C([n.name].flat(1).filter(function(n){return void 0!==n;}),{valueType:"formList",transform:O});},[n.name,C,O]);var em=(0,E.useStyle)(o),eg=em.wrapSSR,ev=em.hashId;return eh.formRef?eg((0,w.jsx)(ef,{children:(0,w.jsx)("div",{className:(0,g.default)(o,ev),style:W,children:(0,w.jsx)(m.default.Item,(0,l.default)((0,l.default)({label:P,prefixCls:X,tooltip:I,style:W,required:null==D?void 0:D.some(function(n){return n.required;}),wrapperCol:K,className:ea},eu),{},{name:en?ep:void 0,rules:en?[{validator:function(n,r){return r&&0!==r.length?Promise.resolve():Promise.reject(Error(ei));},required:!0}]:void 0,children:(0,w.jsx)(m.default.List,(0,l.default)((0,l.default)({rules:D},eu),{},{name:ep,children:function(n,i,a){return r.current=i,(0,w.jsxs)(ed,{children:[(0,w.jsx)(x.ProFormListContainer,{name:ep,readonly:!!el,originName:eu.name,copyIconProps:z,deleteIconProps:G,formInstance:eh.formRef.current,prefixCls:o,meta:a,fields:n,itemContainerRender:F,itemRender:N,fieldExtraRender:B,creatorButtonProps:R,creatorRecord:L,actionRender:M,action:i,actionGuard:q,alwaysShowItemLabel:k,min:$,max:Y,count:n.length,onAfterAdd:function(n,r,i){en&&eh.formRef.current.validateFields([ep]),null==J||J(n,r,i);},onAfterRemove:function(n,r){en&&0===r&&eh.formRef.current.validateFields([ep]),null==ee||ee(n,r);},containerClassName:eo,containerStyle:es,children:U}),(0,w.jsx)(m.default.ErrorList,{errors:a.errors})]});}}))}))})})):null;}},"12787c53":function(n,r,i){var a=i("7505d865"),o=i("bbc15be8");n.exports=function(n,r,i){var s=r(n);return o(n)?s:a(s,i(n));};},"12a871f9":function(n,r,i){var a=i("f53c9952"),o=i("88ddf3cf");n.exports=function(n,r){return n&&a(r,o(r),n);};},"148614a5":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{coordOf:function(){return c;},coordinate2Transform:function(){return u;},createCoordinate:function(){return l;},isHelix:function(){return d;},isParallel:function(){return p;},isPolar:function(){return f;},isRadar:function(){return y;},isRadial:function(){return v;},isReflect:function(){return g;},isReflectY:function(){return _;},isTheta:function(){return m;},isTranspose:function(){return h;}});var a=i("19d769ab"),o=i("c4368857"),s=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};function l(n,r,i){let[s]=(0,o.useLibrary)("coordinate",i),{innerHeight:l,innerWidth:u,insetLeft:c,insetTop:f,insetRight:d,insetBottom:h}=n,{coordinates:p=[]}=r,m=p.find(n=>"cartesian"===n.type||"cartesian3D"===n.type)?p:[...p,{type:"cartesian"}],g="cartesian3D"===m[0].type,v=Object.assign(Object.assign({},n),{x:c,y:f,width:u-c-d,height:l-h-f,transformations:m.flatMap(s)});return g?new a.Coordinate3D(v):new a.Coordinate(v);}function u(n,r){let{coordinate:i={},coordinates:a}=n,l=s(n,["coordinate","coordinates"]);if(a)return n;let{type:u,transform:c=[]}=i,f=s(i,["type","transform"]);if(!u)return Object.assign(Object.assign({},l),{coordinates:c});let[,d]=(0,o.useLibrary)("coordinate",r),{transform:h=!1}=d(u).props||{};if(h)throw Error(`Unknown coordinate: ${u}.`);return Object.assign(Object.assign({},l),{coordinates:[Object.assign({type:u},f),...c]});}function c(n,r){return n.filter(n=>n.type===r);}function f(n){return c(n,"polar").length>0;}function d(n){return c(n,"helix").length>0;}function h(n){return c(n,"transpose").length%2==1;}function p(n){return c(n,"parallel").length>0;}function m(n){return c(n,"theta").length>0;}function g(n){return c(n,"reflect").length>0;}function v(n){return c(n,"radial").length>0;}function y(n){return c(n,"radar").length>0;}function _(n){return c(n,"reflectY").length>0;}},"14887fae":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{bowtie:function(){return d;},button:function(){return T;},circle:function(){return a;},cross:function(){return p;},dash:function(){return _;},diamond:function(){return l;},dot:function(){return y;},hexagon:function(){return f;},hv:function(){return x;},hvh:function(){return w;},hyphen:function(){return v;},line:function(){return h;},plus:function(){return g;},point:function(){return o;},smooth:function(){return b;},square:function(){return s;},tick:function(){return m;},triangle:function(){return u;},triangleDown:function(){return c;},vh:function(){return E;},vhv:function(){return S;}});var a=function(n,r,i){return[["M",n-i,r],["A",i,i,0,1,0,n+i,r],["A",i,i,0,1,0,n-i,r],["Z"]];},o=a,s=function(n,r,i){return[["M",n-i,r-i],["L",n+i,r-i],["L",n+i,r+i],["L",n-i,r+i],["Z"]];},l=function(n,r,i){return[["M",n-i,r],["L",n,r-i],["L",n+i,r],["L",n,r+i],["Z"]];},u=function(n,r,i){var a=i*Math.sin(1/3*Math.PI);return[["M",n-i,r+a],["L",n,r-a],["L",n+i,r+a],["Z"]];},c=function(n,r,i){var a=i*Math.sin(1/3*Math.PI);return[["M",n-i,r-a],["L",n+i,r-a],["L",n,r+a],["Z"]];},f=function(n,r,i){var a=i/2*Math.sqrt(3);return[["M",n,r-i],["L",n+a,r-i/2],["L",n+a,r+i/2],["L",n,r+i],["L",n-a,r+i/2],["L",n-a,r-i/2],["Z"]];},d=function(n,r,i){var a=i-1.5;return[["M",n-i,r-a],["L",n+i,r+a],["L",n+i,r-a],["L",n-i,r+a],["Z"]];},h=function(n,r,i){return[["M",n,r+i],["L",n,r-i]];},p=function(n,r,i){return[["M",n-i,r-i],["L",n+i,r+i],["M",n+i,r-i],["L",n-i,r+i]];},m=function(n,r,i){return[["M",n-i/2,r-i],["L",n+i/2,r-i],["M",n,r-i],["L",n,r+i],["M",n-i/2,r+i],["L",n+i/2,r+i]];},g=function(n,r,i){return[["M",n-i,r],["L",n+i,r],["M",n,r-i],["L",n,r+i]];},v=function(n,r,i){return[["M",n-i,r],["L",n+i,r]];},y=function(n,r,i){return[["M",n-i,r],["L",n+i,r]];},_=y,b=function(n,r,i){return[["M",n-i,r],["A",i/2,i/2,0,1,1,n,r],["A",i/2,i/2,0,1,0,n+i,r]];},x=function(n,r,i){return[["M",n-i-1,r-2.5],["L",n,r-2.5],["L",n,r+2.5],["L",n+i+1,r+2.5]];},E=function(n,r,i){return[["M",n-i-1,r+2.5],["L",n,r+2.5],["L",n,r-2.5],["L",n+i+1,r-2.5]];},w=function(n,r,i){return[["M",n-(i+1),r+2.5],["L",n-i/2,r+2.5],["L",n-i/2,r-2.5],["L",n+i/2,r-2.5],["L",n+i/2,r+2.5],["L",n+i+1,r+2.5]];};function S(n,r){return[["M",n-5,r+2.5],["L",n-5,r],["L",n,r],["L",n,r-3],["L",n,r+3],["L",n+6.5,r+3]];}var T=function(n,r,i){return[["M",n-i,r-i],["L",n+i,r],["L",n-i,r+i],["Z"]];};},"149f2852":function(n,r,i){"use strict";function a(n,r){return n=+n,r=+r,function(i){return Math.round(n*(1-i)+r*i);};}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},"1536f4d4":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),r.default=function(n,r){if(!n)return!1;if(n.contains)return n.contains(r);for(var i=r;i;){if(i===n)return!0;i=i.parentNode;}return!1;};},"1552e56f":function(n,r,i){var a=i("74fc3704");n.exports=function(n,r){return n&&n.length&&r&&r.length?a(n,r):n;};},"156120ad":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return d;}});var a=i("777fffbe"),o=a._(i("e4870cf0")),s=a._(i("613f75ca")),l=a._(i("609f48be")),u=a._(i("551ddf56")),c=i("dac8af92"),f=["fieldProps","min","proFieldProps","max"],d=l.default.forwardRef(function(n,r){var i=n.fieldProps,a=n.min,l=n.proFieldProps,d=n.max,h=(0,s.default)(n,f);return(0,c.jsx)(u.default,(0,o.default)({valueType:"digit",fieldProps:(0,o.default)({min:a,max:d},i),ref:r,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:l},h));});},"15fcf050":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return m;}});var a=i("777fffbe"),o=i("852bbaa9"),s=a._(i("e4870cf0")),l=a._(i("613f75ca")),u=o._(i("609f48be")),c=a._(i("2faf3d77")),f=a._(i("551ddf56")),d=i("dac8af92"),h=["fieldProps","proFieldProps"],p="dateTime",m=u.default.forwardRef(function(n,r){var i=n.fieldProps,a=n.proFieldProps,o=(0,l.default)(n,h),m=(0,u.useContext)(c.default);return(0,d.jsx)(f.default,(0,s.default)({ref:r,fieldProps:(0,s.default)({getPopupContainer:m.getPopupContainer},i),valueType:p,proFieldProps:a,filedConfig:{valueType:p,customLightMode:!0}},o));});},"16d095ff":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"Handle",{enumerable:!0,get:function(){return p;}});var a=i("3862611d"),o=i("47a6bde3"),s=i("fc81244b"),l=i("a602d54e"),u=i("b0ea517f"),c=i("a63b8d99"),f=i("e77a4c2e"),d=(0,s.classNames)({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),h=function(n){function r(){return null!==n&&n.apply(this,arguments)||this;}return(0,a.__extends)(r,n),r.prototype.render=function(n,r){var i=n.x,o=n.y,s=n.size,l=void 0===s?10:s,c=n.radius,f=n.orientation,h=(0,a.__rest)(n,["x","y","size","radius","orientation"]),p=2.4*l,m=(0,u.select)(r).maybeAppendByClassName(d.iconRect,"rect").styles((0,a.__assign)((0,a.__assign)({},h),{width:l,height:p,radius:void 0===c?l/4:c,x:i-l/2,y:o-p/2,transformOrigin:"center"})),g=i+1/3*l-l/2,v=i+2/3*l-l/2,y=o+1/4*p-p/2,_=o+3/4*p-p/2;m.maybeAppendByClassName("".concat(d.iconLine,"-1"),"line").styles((0,a.__assign)({x1:g,x2:g,y1:y,y2:_},h)),m.maybeAppendByClassName("".concat(d.iconLine,"-2"),"line").styles((0,a.__assign)({x1:v,x2:v,y1:y,y2:_},h)),"vertical"===f&&(m.node().style.transform="rotate(90)");},r;}(o.Component),p=function(n){function r(r){return n.call(this,r,f.HANDLE_DEFAULT_CFG)||this;}return(0,a.__extends)(r,n),r.prototype.renderLabel=function(n){var r=this,i=this.attributes,o=i.x,s=i.y,h=i.showLabel,p=(0,c.subStyleProps)(this.attributes,"label"),m=p.x,g=void 0===m?0:m,v=p.y,y=void 0===v?0:v,_=p.transform,b=p.transformOrigin,x=(0,a.__rest)(p,["x","y","transform","transformOrigin"]),E=(0,a.__read)((0,c.splitStyle)(x,[]),2),w=E[0],S=E[1],T=(0,u.select)(n).maybeAppendByClassName(d.labelGroup,"g").styles(S),A=(0,a.__assign)((0,a.__assign)({},f.HANDLE_LABEL_DEFAULT_CFG),w),C=A.text,O=(0,a.__rest)(A,["text"]);(0,l.ifShow)(!!h,T,function(n){r.label=n.maybeAppendByClassName(d.label,"text").styles((0,a.__assign)((0,a.__assign)({},O),{x:o+g,y:s+y,transform:_,transformOrigin:b,text:"".concat(C)})),r.label.on("mousedown",function(n){n.stopPropagation();}),r.label.on("touchstart",function(n){n.stopPropagation();});});},r.prototype.renderIcon=function(n){var r=this.attributes,i=r.x,o=r.y,s=r.orientation,l=r.type,p=(0,a.__assign)((0,a.__assign)({x:i,y:o,orientation:s},f.HANDLE_ICON_DEFAULT_CFG),(0,c.subStyleProps)(this.attributes,"icon")),m=this.attributes.iconShape,g=void 0===m?function(){return new h({style:p});}:m;(0,u.select)(n).maybeAppendByClassName(d.iconGroup,"g").selectAll(d.icon.class).data([g]).join(function(n){return n.append("string"==typeof g?g:function(){return g(l);}).attr("className",d.icon.name);},function(n){return n.update(p);},function(n){return n.remove();});},r.prototype.render=function(n,r){this.renderIcon(r),this.renderLabel(r);},r;}(o.Component);},"176581f8":function(n,r,i){n.exports=function(n){var r=-1,i=Array(n.size);return n.forEach(function(n){i[++r]=n;}),i;};},"1915def0":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"parseSeriesAttr",{enumerable:!0,get:function(){return l;}});var a=i("777fffbe"),o=a._(i("1f338b89")),s=a._(i("1daaa764"));function l(n){if((0,o.default)(n))return[n,n,n,n];if((0,s.default)(n)){var r=n.length;if(1===r)return[n[0],n[0],n[0],n[0]];if(2===r)return[n[0],n[1],n[0],n[1]];if(3===r)return[n[0],n[1],n[2],n[1]];if(4===r)return n;}return[0,0,0,0];}},"191f48a8":function(n,r,i){var a=i("9cbba6e7");n.exports=function(n){return"function"==typeof n?n:a;};},19503730:function(n,r,i){"use strict";function a(n){return function(r){var i=new o;for(var a in n)i[a]=n[a];return i.stream=r,i;};}function o(){}i.d(r,"__esModule",{value:!0}),i.d(r,"transformer",{enumerable:!0,get:function(){return a;}}),o.prototype={constructor:o,point:function(n,r){this.stream.point(n,r);},sphere:function(){this.stream.sphere();},lineStart:function(){this.stream.lineStart();},lineEnd:function(){this.stream.lineEnd();},polygonStart:function(){this.stream.polygonStart();},polygonEnd:function(){this.stream.polygonEnd();}};},"19d769ab":function(n,r,i){var a,o;a=this,o=function(n){"use strict";function r(n){var r="function"==typeof Symbol&&Symbol.iterator,i=r&&n[r],a=0;if(i)return i.call(n);if(n&&"number"==typeof n.length)return{next:function(){return{value:(n=n&&a>=n.length?void 0:n)&&n[a++],done:!n};}};throw TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.");}function i(n,r){var i="function"==typeof Symbol&&n[Symbol.iterator];if(!i)return n;var a,o,s=i.call(n),l=[];try{for(;(void 0===r||0<r--)&&!(a=s.next()).done;)l.push(a.value);}catch(n){o={error:n};}finally{try{a&&!a.done&&(i=s.return)&&i.call(s);}finally{if(o)throw o.error;}}return l;}function a(n,r,i){if(i||2==arguments.length)for(var a,o=0,s=r.length;o<s;o++)!a&&o in r||((a=a||Array.prototype.slice.call(r,0,o))[o]=r[o]);return n.concat(a||Array.prototype.slice.call(r));}function o(n){return u(n,"Function");}var s,l={}.toString,u=function(n,r){return l.call(n)==="[object "+r+"]";},c=function(n){return Array.isArray?Array.isArray(n):u(n,"Array");},f=function(n){if("object"!=typeof n||null===n||!u(n,"Object"))return!1;if(null===Object.getPrototypeOf(n))return!0;for(var r=n;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r;},d=Object.values?function(n){return Object.values(n);}:function(n){var r,i=[],a=function(r,a){o(n)&&"prototype"===a||i.push(r);};if(n){if(c(n))for(var s=0,l=n.length;s<l&&!1!==a(n[s],s);s++);else if(r=typeof n,null!==n&&"object"==r||"function"==r){for(var u in n)if(n.hasOwnProperty(u)&&!1===a(n[u],u))break;}}return i;};function h(n){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];for(var a=0;a<r.length;a+=1)!function n(r,i,a,o){for(var s in a=a||0,o=o||5,i){var l;i.hasOwnProperty(s)&&(null!==(l=i[s])&&f(l)?(f(r[s])||(r[s]={}),a<o?n(r[s],l,a+1,o):r[s]=i[s]):c(l)?(r[s]=[],r[s]=r[s].concat(l)):void 0!==l&&(r[s]=l));}}(n,r[a]);return n;}function p(n){return n;}!function(n,r){var i;if(o(n))return(i=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var s,l=r?r.apply(this,a):a[0],u=i.cache;return u.has(l)?u.get(l):(s=n.apply(this,a),u.set(l,s),s);}).cache=new Map;throw TypeError("Expected a function");}(function(n,r){var i=(r=void 0===r?{}:r).fontSize,a=r.fontFamily,o=r.fontWeight,s=r.fontStyle,r=r.fontVariant;return(m=m||document.createElement("canvas").getContext("2d")).font=[s,r,o,i+"px",a].join(" "),m.measureText(u(n,"String")?n:"").width;},function(n,r){return(function(){for(var n=0,r=0,i=arguments.length;r<i;r++)n+=arguments[r].length;for(var a=Array(n),o=0,r=0;r<i;r++)for(var s=arguments[r],l=0,u=s.length;l<u;l++,o++)a[o]=s[l];return a;})([n],d(r=void 0===r?{}:r)).join("");});var m,g="undefined"!=typeof Float32Array?Float32Array:Array;function v(){var n=new g(9);return g!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1,n;}Math.hypot||(Math.hypot=function(){for(var n=0,r=arguments.length;r--;)n+=arguments[r]*arguments[r];return Math.sqrt(n);});var y=function(n,r,i){var a=r[0],o=r[1],s=r[2],l=r[3],u=r[4],c=r[5],f=r[6],d=r[7],r=r[8],h=i[0],p=i[1],m=i[2],g=i[3],v=i[4],y=i[5],_=i[6],b=i[7],i=i[8];return n[0]=h*a+p*l+m*f,n[1]=h*o+p*u+m*d,n[2]=h*s+p*c+m*r,n[3]=g*a+v*l+y*f,n[4]=g*o+v*u+y*d,n[5]=g*s+v*c+y*r,n[6]=_*a+b*l+i*f,n[7]=_*o+b*u+i*d,n[8]=_*s+b*c+i*r,n;};function _(){var n=new g(16);return g!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n;}var b=function(n,r,i){var a=r[0],o=r[1],s=r[2],l=r[3],u=r[4],c=r[5],f=r[6],d=r[7],h=r[8],p=r[9],m=r[10],g=r[11],v=r[12],y=r[13],_=r[14],r=r[15],b=i[0],x=i[1],E=i[2],w=i[3];return n[0]=b*a+x*u+E*h+w*v,n[1]=b*o+x*c+E*p+w*y,n[2]=b*s+x*f+E*m+w*_,n[3]=b*l+x*d+E*g+w*r,b=i[4],x=i[5],E=i[6],w=i[7],n[4]=b*a+x*u+E*h+w*v,n[5]=b*o+x*c+E*p+w*y,n[6]=b*s+x*f+E*m+w*_,n[7]=b*l+x*d+E*g+w*r,b=i[8],x=i[9],E=i[10],w=i[11],n[8]=b*a+x*u+E*h+w*v,n[9]=b*o+x*c+E*p+w*y,n[10]=b*s+x*f+E*m+w*_,n[11]=b*l+x*d+E*g+w*r,b=i[12],x=i[13],E=i[14],w=i[15],n[12]=b*a+x*u+E*h+w*v,n[13]=b*o+x*c+E*p+w*y,n[14]=b*s+x*f+E*m+w*_,n[15]=b*l+x*d+E*g+w*r,n;};function x(n){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return n?r.reduce(function(n,r){return function(i){return r(n(i));};},n):p;}function E(n){return n instanceof Float32Array||n instanceof Array;}function w(n,r,i){for(;n<r;)n+=2*Math.PI;for(;i<n;)n-=2*Math.PI;return n;}function S(n,r,a,o,s){var l=(n=i(n,2))[0],n=n[1],u=v();return l=[l,n],(n=u)[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=l[0],n[7]=l[1],n[8]=1,n;}function T(n,...r){return r.reduce((n,r)=>i=>n(r(i)),n);}function A(n,r){return r-n?i=>(i-n)/(r-n):n=>.5;}N=new g(3),g!=Float32Array&&(N[0]=0,N[1]=0,N[2]=0),N=new g(4),g!=Float32Array&&(N[0]=0,N[1]=0,N[2]=0,N[3]=0);let C=Math.sqrt(50),O=Math.sqrt(10),M=Math.sqrt(2);function R(n,r,i){return n=Math.floor(Math.log(r=(r-n)/Math.max(0,i))/Math.LN10),i=r/10**n,0<=n?(i>=C?10:i>=O?5:i>=M?2:1)*10**n:-(10**-n)/(i>=C?10:i>=O?5:i>=M?2:1);}let P=(n,r,i=5)=>{let a=0,o=(n=[n,r]).length-1,s=n[a],l=n[o],u;return l<s&&([s,l]=[l,s],[a,o]=[o,a]),0<(u=R(s,l,i))?u=R(s=Math.floor(s/u)*u,l=Math.ceil(l/u)*u,i):u<0&&(u=R(s=Math.ceil(s*u)/u,l=Math.floor(l*u)/u,i)),0<u?(n[a]=Math.floor(s/u)*u,n[o]=Math.ceil(l/u)*u):u<0&&(n[a]=Math.ceil(s*u)/u,n[o]=Math.floor(l*u)/u),n;};function k(n){return null!=n&&!Number.isNaN(n);}function I(n,r){return i=>{i.prototype.rescale=function(){this.initRange(),this.nice();var[n]=this.chooseTransforms();this.composeOutput(n,this.chooseClamp(n));},i.prototype.initRange=function(){var r=this.options.interpolator;this.options.range=n(r);},i.prototype.composeOutput=function(n,i){var{domain:a,interpolator:o,round:s}=this.getOptions(),a=r(a.map(n)),s=s?n=>u(n=o(n),"Number")?Math.round(n):n:o;this.output=T(s,a,i,n);},i.prototype.invert=void 0;};}var L,N={exports:{}},D={exports:{}},F=Array.prototype.concat,B=Array.prototype.slice,j=D.exports=function(n){for(var r=[],i=0,a=n.length;i<a;i++){var o=n[i];!(!o||"string"==typeof o)&&(o instanceof Array||Array.isArray(o)||0<=o.length&&(o.splice instanceof Function||Object.getOwnPropertyDescriptor(o,o.length-1)&&"String"!==o.constructor.name))?r=F.call(r,B.call(o)):r.push(o);}return r;},z=(j.wrap=function(n){return function(){return n(j(arguments));};},{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),U=D.exports,V=Object.hasOwnProperty,G=Object.create(null);for(L in z)V.call(z,L)&&(G[z[L]]=L);var H=N.exports={to:{},get:{}};function W(n,r,i){return Math.min(Math.max(r,n),i);}function X(n){return(n=Math.round(n).toString(16).toUpperCase()).length<2?"0"+n:n;}H.get=function(n){var r,i;switch(n.substring(0,3).toLowerCase()){case"hsl":r=H.get.hsl(n),i="hsl";break;case"hwb":r=H.get.hwb(n),i="hwb";break;default:r=H.get.rgb(n),i="rgb";}return r?{model:i,value:r}:null;},H.get.rgb=function(n){if(!n)return null;var r,i,a,o=[0,0,0,1];if(r=n.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(a=r[2],r=r[1],i=0;i<3;i++){var s=2*i;o[i]=parseInt(r.slice(s,2+s),16);}a&&(o[3]=parseInt(a,16)/255);}else if(r=n.match(/^#([a-f0-9]{3,4})$/i)){for(a=(r=r[1])[3],i=0;i<3;i++)o[i]=parseInt(r[i]+r[i],16);a&&(o[3]=parseInt(a+a,16)/255);}else{if(r=n.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/))for(i=0;i<3;i++)o[i]=parseInt(r[i+1],0);else{if(!(r=n.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(r=n.match(/^(\w+)$/))?"transparent"===r[1]?[0,0,0,0]:V.call(z,r[1])?((o=z[r[1]])[3]=1,o):null:null;for(i=0;i<3;i++)o[i]=Math.round(2.55*parseFloat(r[i+1]));}r[4]&&(r[5]?o[3]=.01*parseFloat(r[4]):o[3]=parseFloat(r[4]));}for(i=0;i<3;i++)o[i]=W(o[i],0,255);return o[3]=W(o[3],0,1),o;},H.get.hsl=function(n){var r;return(n=n&&n.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(r=parseFloat(n[4]),[(parseFloat(n[1])%360+360)%360,W(parseFloat(n[2]),0,100),W(parseFloat(n[3]),0,100),W(isNaN(r)?1:r,0,1)]):null;},H.get.hwb=function(n){var r;return(n=n&&n.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(r=parseFloat(n[4]),[(parseFloat(n[1])%360+360)%360,W(parseFloat(n[2]),0,100),W(parseFloat(n[3]),0,100),W(isNaN(r)?1:r,0,1)]):null;},H.to.hex=function(){var n=U(arguments);return"#"+X(n[0])+X(n[1])+X(n[2])+(n[3]<1?X(Math.round(255*n[3])):"");},H.to.rgb=function(){var n=U(arguments);return n.length<4||1===n[3]?"rgb("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+")":"rgba("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+", "+n[3]+")";},H.to.rgb.percent=function(){var n=U(arguments),r=Math.round(n[0]/255*100),i=Math.round(n[1]/255*100),a=Math.round(n[2]/255*100);return n.length<4||1===n[3]?"rgb("+r+"%, "+i+"%, "+a+"%)":"rgba("+r+"%, "+i+"%, "+a+"%, "+n[3]+")";},H.to.hsl=function(){var n=U(arguments);return n.length<4||1===n[3]?"hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)":"hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, "+n[3]+")";},H.to.hwb=function(){var n=U(arguments),r="";return 4<=n.length&&1!==n[3]&&(r=", "+n[3]),"hwb("+n[0]+", "+n[1]+"%, "+n[2]+"%"+r+")";},H.to.keyword=function(n){return G[n.slice(0,3)];};var q=N.exports;function $(n,r,i){let a=i;return a<0&&(a+=1),1<a&&--a,a<1/6?n+6*(r-n)*a:a<.5?r:a<2/3?n+(r-n)*(2/3-a)*6:n;}function Y(n){var r,i,a,n=q.get(n);return n?({model:n,value:r}=n,"rgb"===n?r:"hsl"===n?(r=(n=r)[0]/360,i=n[1]/100,a=n[2]/100,n=n[3],0==i?[255*a,255*a,255*a,n]:[255*$(i=2*a-(a=a<.5?a*(1+i):a+i-a*i),a,r+1/3),255*$(i,a,r),255*$(i,a,r-1/3),n]):null):null;}let Z=(n,r)=>i=>n*(1-i)+r*i,K=(n,r)=>{if("number"==typeof n&&"number"==typeof r)return Z(n,r);if("string"!=typeof n||"string"!=typeof r)return()=>n;{let i=Y(n),a=Y(r);return null===i||null===a?i?()=>n:()=>r:n=>{var r=[,,,,];for(let l=0;l<4;l+=1){var o=i[l],s=a[l];r[l]=o*(1-n)+s*n;}var[l,u,c,f]=r;return`rgba(${Math.round(l)}, ${Math.round(u)}, ${Math.round(c)}, ${f})`;};}},Q=(n,r)=>{let i=Z(n,r);return n=>Math.round(i(n));};function J({map:n,initKey:r},i){return r=r(i),n.has(r)?n.get(r):i;}function ee(n){return"object"==typeof n?n.valueOf():n;}class et extends Map{constructor(n){if(super(),this.map=new Map,this.initKey=ee,null!==n)for(var[r,i]of n)this.set(r,i);}get(n){return super.get(J({map:this.map,initKey:this.initKey},n));}has(n){return super.has(J({map:this.map,initKey:this.initKey},n));}set(n,r){var i,a;return super.set(([{map:n,initKey:i},a]=[{map:this.map,initKey:this.initKey},n],i=i(a),n.has(i)?n.get(i):(n.set(i,a),a)),r);}delete(n){var r,i;return super.delete(([{map:n,initKey:r},i]=[{map:this.map,initKey:this.initKey},n],r=r(i),n.has(r)&&(i=n.get(r),n.delete(r)),i));}}class en{constructor(n){this.options=h({},this.getDefaultOptions()),this.update(n);}getOptions(){return this.options;}update(n={}){this.options=h({},this.options,n),this.rescale(n);}rescale(n){}}let er=Symbol("defaultUnknown");function ei(n,r,i){for(let a=0;a<r.length;a+=1)n.has(r[a])||n.set(i(r[a]),a);}function ea(n){var{value:n,from:r,to:i,mapper:a,notFoundReturn:o}=n;let s=a.get(n);if(void 0===s){if(o!==er)return o;s=r.push(n)-1,a.set(n,s);}return i[s%i.length];}function eo(n){return n instanceof Date?n=>""+n:"object"==typeof n?n=>JSON.stringify(n):n=>n;}class es extends en{getDefaultOptions(){return{domain:[],range:[],unknown:er};}constructor(n){super(n);}map(n){return 0===this.domainIndexMap.size&&ei(this.domainIndexMap,this.getDomain(),this.domainKey),ea({value:this.domainKey(n),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown});}invert(n){return 0===this.rangeIndexMap.size&&ei(this.rangeIndexMap,this.getRange(),this.rangeKey),ea({value:this.rangeKey(n),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown});}rescale(n){var[r]=this.options.domain,[i]=this.options.range;this.domainKey=eo(r),this.rangeKey=eo(i),this.rangeIndexMap?(n&&!n.range||this.rangeIndexMap.clear(),(!n||n.domain||n.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)):(this.rangeIndexMap=new Map,this.domainIndexMap=new Map);}clone(){return new es(this.options);}getRange(){return this.options.range;}getDomain(){var n,r;return this.sortedDomain||({domain:n,compare:r}=this.options,this.sortedDomain=r?[...n].sort(r):n),this.sortedDomain;}}class el extends es{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:er,flex:[]};}constructor(n){super(n);}clone(){return new el(this.options);}getStep(n){return void 0===this.valueStep?1:"number"==typeof this.valueStep?this.valueStep:void 0===n?Array.from(this.valueStep.values())[0]:this.valueStep.get(n);}getBandWidth(n){return void 0===this.valueBandWidth?1:"number"==typeof this.valueBandWidth?this.valueBandWidth:void 0===n?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(n);}getRange(){return this.adjustedRange;}getPaddingInner(){var{padding:n,paddingInner:r}=this.options;return 0<n?n:r;}getPaddingOuter(){var{padding:n,paddingOuter:r}=this.options;return 0<n?n:r;}rescale(){super.rescale();var{align:n,domain:r,range:i,round:a,flex:o}=this.options,{adjustedRange:n,valueBandWidth:i,valueStep:a}=function(n){var r=n.domain;if(0===(r=r.length))return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!(null==(i=n.flex)||!i.length))return function(n){let{domain:r,range:i,paddingOuter:a,paddingInner:o,flex:s,round:l,align:u}=n;var c=r.length,f=0<(f=(n=c)-(d=s).length)?[...d,...Array(f).fill(1)]:f<0?d.slice(0,n):d,[n,d]=i,d=d-n,h=d/(2/c*a+1-1/c*o);let p=h*o/c;h-=c*p;let m=function(n){let r=Math.min(...n);return n.map(n=>n/r);}(f),g=h/m.reduce((n,r)=>n+r);var f=new et(r.map((n,r)=>(r=m[r]*g,[n,l?Math.floor(r):r]))),v=new et(r.map((n,r)=>(r=m[r]*g+p,[n,l?Math.floor(r):r]))),h=Array.from(v.values()).reduce((n,r)=>n+r),n=n+(d-(h-h/c*o))*u;let y=l?Math.round(n):n;var _=Array(c);for(let n=0;n<c;n+=1){_[n]=Math.round(1e12*(b=y))/1e12;var b=r[n];y+=v.get(b);}return{valueBandWidth:f,valueStep:v,adjustedRange:_};}(n);var{range:i,paddingOuter:n,paddingInner:a,round:o,align:s}=n;let l,u,c=i[0];return l=(i=i[1]-c)/Math.max(1,2*n+(r-a)),o&&(l=Math.floor(l)),c+=(i-l*(r-a))*s,u=l*(1-a),o&&(c=Math.round(c),u=Math.round(u)),n=Array(r).fill(0).map((n,r)=>c+r*l),{valueStep:l,valueBandWidth:u,adjustedRange:n};}({align:n,range:i,round:a,flex:o,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:r});this.valueStep=a,this.valueBandWidth=i,this.adjustedRange=n;}}let eu=(n,r,i)=>{let a,o,s=n,l=r;if(s===l&&0<i)return[s];let u=R(s,l,i);if(0===u||!Number.isFinite(u))return[];if(0<u){s=Math.ceil(s/u),o=Array(a=Math.ceil((l=Math.floor(l/u))-s+1));for(let n=0;n<a;n+=1)o[n]=(s+n)*u;}else{s=Math.ceil(s*(u=-u)),o=Array(a=Math.ceil((l=Math.floor(l*u))-s+1));for(let n=0;n<a;n+=1)o[n]=(s+n)/u;}return o;},ec=(n,r,i)=>{let a;var[n,o]=n,[r,s]=r;return T(n<o?(a=A(n,o),i(r,s)):(a=A(o,n),i(s,r)),a);},ef=(n,r,i)=>{let a=Math.min(n.length,r.length)-1,o=Array(a),s=Array(a);var l=n[0]>n[a],u=l?[...n].reverse():n,c=l?[...r].reverse():r;for(let n=0;n<a;n+=1)o[n]=A(u[n],u[n+1]),s[n]=i(c[n],c[n+1]);return r=>{var i=function(n,r,i,a,o){let s=1,l=a||n.length;for(var u=n=>n;s<l;){var c=Math.floor((s+l)/2);u(n[c])>r?l=c:s=c+1;}return s;}(n,r,0,a)-1,l=o[i];return T(s[i],l)(r);};},ed=(n,r,i,a)=>(2<Math.min(n.length,r.length)?ef:ec)(n,r,a?Q:i);class eh extends en{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:Z,tickCount:5};}map(n){return k(n)?this.output(n):this.options.unknown;}invert(n){return k(n)?this.input(n):this.options.unknown;}nice(){var n,r,i,a;this.options.nice&&([n,r,i,...a]=this.getTickMethodOptions(),this.options.domain=this.chooseNice()(n,r,i,...a));}getTicks(){var n=this.options.tickMethod,[r,i,a,...o]=this.getTickMethodOptions();return n(r,i,a,...o);}getTickMethodOptions(){var{domain:n,tickCount:r}=this.options;return[n[0],n[n.length-1],r];}chooseNice(){return P;}rescale(){this.nice();var[n,r]=this.chooseTransforms();this.composeOutput(n,this.chooseClamp(n)),this.composeInput(n,r,this.chooseClamp(r));}chooseClamp(n){var{clamp:r,range:i}=this.options,n=this.options.domain.map(n),i=Math.min(n.length,i.length);if(r){r=n[0];let a=(n=n[i-1])<r?n:r,o=n<r?r:n;return n=>Math.min(Math.max(a,n),o);}return p;}composeOutput(n,r){var{domain:i,range:a,round:o,interpolate:s}=this.options,i=ed(i.map(n),a,s,o);this.output=T(i,r,n);}composeInput(n,r,i){var{domain:a,range:o}=this.options,o=ed(o,a.map(n),Z);this.input=T(r,i,o);}}class ep extends eh{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:K,tickMethod:eu,tickCount:5};}chooseTransforms(){return[p,p];}clone(){return new ep(this.options);}}class em extends el{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:er,paddingInner:1,paddingOuter:0};}constructor(n){super(n);}getPaddingInner(){return 1;}clone(){return new em(this.options);}update(n){super.update(n);}getPaddingOuter(){return this.options.padding;}}function eg(n,r){for(var i=[],a=0,o=n.length;a<o;a++)i.push(n[a].substr(0,r));return i;}var ev,D=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],N=["January","February","March","April","May","June","July","August","September","October","November","December"],ey=eg(N,3);!function(n){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];for(var a=0;a<r.length;a++){var o,s=r[a];for(o in s)n[o]=s[o];}}({},{dayNamesShort:eg(D,3),dayNames:D,monthNamesShort:ey,monthNames:N,amPm:["am","pm"],DoFn:function(n){return n+["th","st","nd","rd"][3<n%10?0:(n-n%10!=10?1:0)*n%10];}});let e_=ev=class extends ep{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:p,tickMethod:eu,tickCount:5};}constructor(n){super(n);}clone(){return new ev(this.options);}};e_=ev=function(n,r,i,a){var o,s=arguments.length,l=s<3?r:null===a?a=Object.getOwnPropertyDescriptor(r,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(n,r,i,a);else for(var u=n.length-1;0<=u;u--)(o=n[u])&&(l=(s<3?o(l):3<s?o(r,i,l):o(r,i))||l);return 3<s&&l&&Object.defineProperty(r,i,l),l;}([I(function(n){return[n(0),n(1)];},n=>{var[n,r]=n;return T(Z(0,1),A(n,r));})],e_);let eb=s=class extends ep{getDefaultOptions(){return{domain:[0,.5,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:p,tickMethod:eu,tickCount:5};}constructor(n){super(n);}clone(){return new s(this.options);}};function ex(n,r,a,o,s){var l=new ep({range:[r,r+o]}),u=new ep({range:[a,a+s]});return{transform:function(n){var n=i(n,2),r=n[0],n=n[1];return[l.map(r),u.map(n)];},untransform:function(n){var n=i(n,2),r=n[0],n=n[1];return[l.invert(r),u.invert(n)];}};}function eE(n,r,a,o,s){return(0,i(n,1)[0])(r,a,o,s);}function ew(n,r,a,o,s){return i(n,1)[0];}function eS(n,r,a,o,s){var l=(n=i(n,4))[0],u=n[1],c=n[2],n=n[3],f=new ep({range:[c,n]}),d=new ep({range:[l,u]}),h=1<(c=s/o)?1:c,p=1<c?1/c:1;return{transform:function(n){var n=i(n,2),r=n[0],n=n[1],r=d.map(r),n=f.map(n);return[n*Math.cos(r)*h*.5+.5,n*Math.sin(r)*p*.5+.5];},untransform:function(n){var n=i(n,2),r=n[0],n=n[1],r=2*(r-.5)/h,n=2*(n-.5)/p,a=Math.sqrt(Math.pow(r,2)+Math.pow(n,2)),n=w(Math.atan2(n,r),l,u);return[d.invert(n),f.invert(a)];}};}function eT(n,r,a,o,s){return{transform:function(n){var n=i(n,2),r=n[0];return[n[1],r];},untransform:function(n){var n=i(n,2),r=n[0];return[n[1],r];}};}function eA(n){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return ek.apply(void 0,a([[-1,-1]],i(r),!1));}function eC(n){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return ek.apply(void 0,a([[-1,1]],i(r),!1));}function eO(n){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return ek.apply(void 0,a([[1,-1]],i(r),!1));}function eM(n,r,a,o,s){var l,n=i(n,1)[0],u=v();return l=Math.sin(n),n=Math.cos(n),u[0]=n,u[1]=l,u[2]=0,u[3]=-l,u[4]=n,u[5]=0,u[6]=0,u[7]=0,u[8]=1,u;}function eR(n,r,a,o,s){var l=(n=i(n,4))[0],u=n[1],c=n[2],f=(n[3]-c)/(+u/(2*Math.PI)+1),d=f/(2*Math.PI),h=new ep({range:[c,c+.99*f]}),p=new ep({range:[l,u]}),m=1<(n=s/o)?1:n,g=1<n?1/n:1;return{transform:function(n){var n=i(n,2),r=n[0],n=n[1],r=p.map(r),n=h.map(n);return[Math.cos(r)*(d*r+n)*m*.5+.5,Math.sin(r)*(d*r+n)*g*.5+.5];},untransform:function(n){var n=i(n,2),r=n[0],n=n[1],r=2*(r-.5)/m,n=2*(n-.5)/g,a=Math.sqrt(Math.pow(r,2)+Math.pow(n,2)),n=w(Math.atan2(n,r)+Math.floor(a/f)*Math.PI*2,l,u),r=a-d*n;return[p.invert(n),h.invert(r)];}};}function eP(n,r,a,o,s){var l=(n=i(n,4))[0],u=n[1],c=n[2],n=n[3],f=new ep({range:[c,n]});return{transform:function(n){for(var r=[],i=n.length,a=new em({domain:Array(i).fill(0).map(function(n,r){return r;}),range:[l,u]}),o=0;o<i;o++){var s=n[o],c=a.map(o),s=f.map(s);r.push(c,s);}return r;},untransform:function(n){for(var r=[],i=0;i<n.length;i+=2){var a=n[i+1];r.push(f.invert(a));}return r;}};}eb=s=function(n,r,i,a){var o,s=arguments.length,l=s<3?r:null===a?a=Object.getOwnPropertyDescriptor(r,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(n,r,i,a);else for(var u=n.length-1;0<=u;u--)(o=n[u])&&(l=(s<3?o(l):3<s?o(r,i,l):o(r,i))||l);return 3<s&&l&&Object.defineProperty(r,i,l),l;}([I(function(n){return[n(0),n(.5),n(1)];},n=>{let[r,i,a]=n,o=T(Z(0,.5),A(r,i)),s=T(Z(.5,1),A(i,a));return n=>(r>a?n<i?s:o:n<i?o:s)(n);})],eb);var ek=function(n,r,a,o,s){var n=i(n,2),l=n[0],n=n[1],u=v();return l=[l,n],(n=u)[0]=l[0],n[1]=0,n[2]=0,n[3]=0,n[4]=l[1],n[5]=0,n[6]=0,n[7]=0,n[8]=1,n;};function eI(n){return 1/Math.tan(n);}function eL(n,r,a,o,s){var l=eI(i(n,1)[0]);return{transform:function(n){var n=i(n,2),r=n[0],n=n[1];return[r+n*l,n];},untransform:function(n){var n=i(n,2),r=n[0],n=n[1];return[r-n*l,n];}};}function eN(n,r,a,o,s){var l=eI(i(n,1)[0]);return{transform:function(n){var n=i(n,2),r=n[0];return[r,n[1]+r*l];},untransform:function(n){var n=i(n,2),r=n[0];return[r,n[1]-r*l];}};}function eD(n,r,i,a,o){var s=n<r,o=(s?r-a:o-r)||o-a,a=s?-1:1;return a*o*(i+1)/(i+o/((n-r)*a))+r;}function eF(n,r,i,a,o){var s=n<r,o=(s?r-a:o-r)||o-a;return o/(o*(i+1)/(n-r)-i*(s?-1:1))+r;}function eB(n,r,i){return i?new ep({range:[0,1],domain:[0,r]}).map(n):n;}function ej(n,r,a,o,s){var l=(n=i(n,3))[0],u=n[1],n=n[2],c=eB(l,o,void 0!==n&&n);return{transform:function(n){var n=i(n,2),r=n[0],n=n[1];return[eD(r,c,u,0,1),n];},untransform:function(n){var n=i(n,2),r=n[0],n=n[1];return[eF(r,c,u,0,1),n];}};}function ez(n,r,a,o,s){var l=(n=i(n,3))[0],u=n[1],n=n[2],c=eB(l,s,void 0!==n&&n);return{transform:function(n){return[(n=i(n,2))[0],eD(n[1],c,u,0,1)];},untransform:function(n){return[(n=i(n,2))[0],eF(n[1],c,u,0,1)];}};}function eU(n,r,a,o,s){var l=(n=i(n,5))[0],u=n[1],c=n[2],f=n[3],n=n[4],d=eB(l,o,n=void 0!==n&&n),h=eB(u,s,n);return{transform:function(n){var n=i(n,2),r=n[0],n=n[1];return[eD(r,d,c,0,1),eD(n,h,f,0,1)];},untransform:function(n){var n=i(n,2),r=n[0],n=n[1];return[eF(r,d,c,0,1),eF(n,h,f,0,1)];}};}function eV(n,r,a,o,s){var l=(n=i(n,5))[0],u=n[1],c=n[2],f=n[3],n=void 0!==(n=n[4])&&n,d=new ep({range:[0,o]}),h=new ep({range:[0,s]}),p=n?l:d.map(l),m=n?u:h.map(u);return{transform:function(n){var n=i(n,2),r=n[0],n=n[1],a=d.map(r)-p,o=h.map(n)-m,s=Math.sqrt(a*a+o*o);return c<s?[r,n]:(s=p+(r=eD(s,0,f,0,c))*Math.cos(n=Math.atan2(o,a)),o=m+r*Math.sin(n),[d.invert(s),h.invert(o)]);},untransform:function(n){var n=i(n,2),r=n[0],n=n[1],a=d.map(r)-p,o=h.map(n)-m,s=Math.sqrt(a*a+o*o);return c<s?[r,n]:(s=p+(r=eF(s,0,f,0,c))*Math.cos(n=Math.atan2(o,a)),o=m+r*Math.sin(n),[d.invert(s),h.invert(o)]);}};}function eG(n,r,a,o,s,l,u){var c=new ep({range:[r,r+s]}),f=new ep({range:[a,a+l]}),d=new ep({range:[o,o+u]});return{transform:function(n){var n=i(n,3),r=n[0],a=n[1],n=n[2];return[c.map(r),f.map(a),d.map(n)];},untransform:function(n){var n=i(n,3),r=n[0],a=n[1],n=n[2];return[c.invert(r),f.invert(a),d.invert(n)];}};}function eH(n,r,a,o,s,l,u){var c,f=(n=i(n,3))[0],d=n[1],n=n[2];return c=_(),f=[f,d,n],c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=f[0],c[13]=f[1],c[14]=f[2],c[15]=1,c;}function eW(n,r,a,o,s,l,u){return{transform:function(n){var n=i(n,3),r=n[0];return[n[1],r,n[2]];},untransform:function(n){var n=i(n,3),r=n[0];return[n[1],r,n[2]];}};}function eX(n,r,a,o,s,l,u){var c,f=(n=i(n,3))[0],d=n[1],n=n[2];return c=_(),f=[f,d,n],c[0]=f[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=f[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=f[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c;}function eq(n){this.options={x:0,y:0,width:300,height:150,transformations:[]},this.transformers={cartesian:ex,translate:S,custom:eE,matrix:ew,polar:eS,transpose:eT,scale:ek,"shear.x":eL,"shear.y":eN,reflect:eA,"reflect.x":eC,"reflect.y":eO,rotate:eM,helix:eR,parallel:eP,fisheye:eU,"fisheye.x":ej,"fisheye.y":ez,"fisheye.circular":eV},this.update(n);}function e$(n){this.options={x:0,y:0,z:0,width:300,height:150,depth:150,transformations:[]},this.transformers={cartesian3D:eG,translate3D:eH,scale3D:eX,transpose3D:eW},this.update(n);}eq.prototype.update=function(n){this.options=h({},this.options,n),this.recoordinate();},eq.prototype.clone=function(){return new eq(this.options);},eq.prototype.getOptions=function(){return this.options;},eq.prototype.clear=function(){this.update({transformations:[]});},eq.prototype.getSize=function(){var n=this.options;return[n.width,n.height];},eq.prototype.getCenter=function(){var n=this.options,r=n.x,i=n.y;return[(2*r+n.width)/2,(2*i+n.height)/2];},eq.prototype.transform=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=this.options.transformations;return this.update({transformations:a(a([],i(o),!1),[a([],i(n),!1)],!1)}),this;},eq.prototype.map=function(n){return this.output(n);},eq.prototype.invert=function(n){return this.input(n);},eq.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0);},eq.prototype.compose=function(n){function o(n,r){d.push((r=void 0===r||r)?function(r){for(var o=[],s=0;s<r.length-1;s+=2){var l=[r[s],r[s+1]],l=n(l);o.push.apply(o,a([],i(l),!1));}return o;}:n);}var s,l,u=(n=void 0!==n&&n)?a([],i(this.options.transformations),!1).reverse():this.options.transformations,c=n?function(n){return n.untransform;}:function(n){return n.transform;},f=[],d=[];try{for(var h=r(u),m=h.next();!m.done;m=h.next()){var g,v,y,_,b,w,S=i(m.value),T=S[0],A=S.slice(1),C=this.transformers[T];C&&(v=(g=this.options).x,y=g.y,_=g.width,b=g.height,E(w=C(a([],i(A),!1),v,y,_,b))?f.push(w):(f.length&&(o(this.createMatrixTransform(f,n)),f.splice(0,f.length)),o(c(w)||p,"parallel"!==T)));}}catch(n){s={error:n};}finally{try{m&&!m.done&&(l=h.return)&&l.call(h);}finally{if(s)throw s.error;}}return f.length&&o(this.createMatrixTransform(f,n)),x.apply(void 0,a([],i(d),!1));},eq.prototype.createMatrixTransform=function(n,r){var i,a,o,s,l,u,c,f,d,h,p,m,_=v();return r&&n.reverse(),n.forEach(function(n){return y(_,_,n);}),r&&(r=n=_,(m=new g(9))[0]=r[0],m[1]=r[1],m[2]=r[2],m[3]=r[3],m[4]=r[4],m[5]=r[5],m[6]=r[6],m[7]=r[7],m[8]=r[8],m=(r=m)[0],i=r[1],a=r[2],o=r[3],s=r[4],l=r[5],u=r[6],c=r[7],p=m*(f=(r=r[8])*s-l*c)+i*(d=-r*o+l*u)+a*(h=c*o-s*u))&&(n[0]=f*(p=1/p),n[1]=(-r*i+a*c)*p,n[2]=(l*i-a*s)*p,n[3]=d*p,n[4]=(r*m-a*u)*p,n[5]=(-l*m+a*o)*p,n[6]=h*p,n[7]=(-c*m+i*u)*p,n[8]=(s*m-i*o)*p),function(n){var r,i,a,o,n=[n[0],n[1],1];return a=(i=r=n)[0],o=i[1],i=i[2],r[0]=a*_[0]+o*_[3]+i*_[6],r[1]=a*_[1]+o*_[4]+i*_[7],r[2]=a*_[2]+o*_[5]+i*_[8],[n[0],n[1]];};},D=eq,e$.prototype.update=function(n){this.options=h({},this.options,n),this.recoordinate();},e$.prototype.clone=function(){return new e$(this.options);},e$.prototype.getOptions=function(){return this.options;},e$.prototype.clear=function(){this.update({transformations:[]});},e$.prototype.getSize=function(){var n=this.options;return[n.width,n.height,n.depth];},e$.prototype.getCenter=function(){var n=this.options,r=n.x,i=n.y,a=n.z;return[(2*r+n.width)/2,(2*i+n.height)/2,(2*a+n.depth)/2];},e$.prototype.transform=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=this.options.transformations;return this.update({transformations:a(a([],i(o),!1),[a([],i(n),!1)],!1)}),this;},e$.prototype.map=function(n){return this.output(n);},e$.prototype.invert=function(n){return this.input(n);},e$.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0);},e$.prototype.compose=function(n){function o(n,r){d.push((r=void 0===r||r)?function(r){for(var o=[],s=0;s<r.length-1;s+=3){var l=[r[s],r[s+1],r[s+2]],l=n(l);o.push.apply(o,a([],i(l),!1));}return o;}:n);}var s,l,u=(n=void 0!==n&&n)?a([],i(this.options.transformations),!1).reverse():this.options.transformations,c=n?function(n){return n.untransform;}:function(n){return n.transform;},f=[],d=[];try{for(var h=r(u),m=h.next();!m.done;m=h.next()){var g,v,y,_,b,w,S,T,A=i(m.value),C=A[0],O=A.slice(1),M=this.transformers[C];M&&(v=(g=this.options).x,y=g.y,_=g.z,b=g.width,w=g.height,S=g.depth,E(T=M(a([],i(O),!1),v,y,_,b,w,S))?f.push(T):(f.length&&(o(this.createMatrixTransform(f,n)),f.splice(0,f.length)),o(c(T)||p,!0)));}}catch(n){s={error:n};}finally{try{m&&!m.done&&(l=h.return)&&l.call(h);}finally{if(s)throw s.error;}}return f.length&&o(this.createMatrixTransform(f,n)),x.apply(void 0,a([],i(d),!1));},e$.prototype.createMatrixTransform=function(n,r){var i,a,o,s,l,u,c,f,d,h,p,m,v,y,x,E,w,S,T,A,C,O,M,R,P,k,I,L,N=_();return r&&n.reverse(),n.forEach(function(n){return b(N,N,n);}),r&&(r=n=N,(L=new g(16))[0]=r[0],L[1]=r[1],L[2]=r[2],L[3]=r[3],L[4]=r[4],L[5]=r[5],L[6]=r[6],L[7]=r[7],L[8]=r[8],L[9]=r[9],L[10]=r[10],L[11]=r[11],L[12]=r[12],L[13]=r[13],L[14]=r[14],L[15]=r[15],L=(r=L)[0],i=r[1],a=r[2],o=r[3],s=r[4],l=r[5],u=r[6],c=r[7],f=r[8],d=r[9],h=r[10],p=r[11],m=r[12],v=r[13],y=r[14],r=r[15],I=(x=L*l-i*s)*(k=h*r-p*y)-(E=L*u-a*s)*(P=d*r-p*v)+(w=L*c-o*s)*(R=d*y-h*v)+(S=i*u-a*l)*(M=f*r-p*m)-(T=i*c-o*l)*(O=f*y-h*m)+(A=a*c-o*u)*(C=f*v-d*m))&&(n[0]=(l*k-u*P+c*R)*(I=1/I),n[1]=(a*P-i*k-o*R)*I,n[2]=(v*A-y*T+r*S)*I,n[3]=(h*T-d*A-p*S)*I,n[4]=(u*M-s*k-c*O)*I,n[5]=(L*k-a*M+o*O)*I,n[6]=(y*w-m*A-r*E)*I,n[7]=(f*A-h*w+p*E)*I,n[8]=(s*P-l*M+c*C)*I,n[9]=(i*M-L*P-o*C)*I,n[10]=(m*T-v*w+r*x)*I,n[11]=(d*w-f*T-p*x)*I,n[12]=(l*O-s*R-u*C)*I,n[13]=(L*R-i*O+a*C)*I,n[14]=(v*E-m*S-y*x)*I,n[15]=(f*S-d*E+h*x)*I),function(n){var r,i,a,o,s,n=[n[0],n[1],n[2],1];return a=(i=r=n)[0],o=i[1],s=i[2],i=i[3],r[0]=N[0]*a+N[4]*o+N[8]*s+N[12]*i,r[1]=N[1]*a+N[5]*o+N[9]*s+N[13]*i,r[2]=N[2]*a+N[6]*o+N[10]*s+N[14]*i,r[3]=N[3]*a+N[7]*o+N[11]*s+N[15]*i,[n[0],n[1],n[2]];};},ey=e$,n.Coordinate=D,n.Coordinate3D=ey,Object.defineProperty(n,"__esModule",{value:!0});},"object"==typeof r&&void 0!==n?o(r):"function"==typeof define&&define.amd?define(["exports"],o):o((a="undefined"!=typeof globalThis?globalThis:a||self).Coordinate={});},"19faa3be":function(n,r,i){"use strict";function a(n,r){let i,a;if(void 0===r)for(let r of n)null!=r&&(void 0===i?r>=r&&(i=a=r):(i>r&&(i=r),a<r&&(a=r)));else{let o=-1;for(let s of n)null!=(s=r(s,++o,n))&&(void 0===i?s>=s&&(i=a=s):(i>s&&(i=s),a<s&&(a=s)));}return[i,a];}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},"1aa293eb":function(n,r,i){"use strict";n.exports=function(n){var r=n.idGenerator,i=n.stateHandler.getState;return{get:function(n){var r=i(n);return r&&void 0!==r.id?r.id:null;},set:function(n){var a=i(n);if(!a)throw Error("setId required the element to have a resize detection state.");var o=r.generate();return a.id=o,o;}};};},"1b34850d":function(n,r,i){var a=i("f53c9952"),o=i("21446f8a");n.exports=function(n,r){return n&&a(r,o(r),n);};},"1b4ebcab":function(n,r,i){"use strict";var a=Object.prototype.hasOwnProperty,o="~";function s(){}function l(n,r,i){this.fn=n,this.context=r,this.once=i||!1;}function u(n,r,i,a,s){if("function"!=typeof i)throw TypeError("The listener must be a function");var u=new l(i,a||n,s),c=o?o+r:r;return n._events[c]?n._events[c].fn?n._events[c]=[n._events[c],u]:n._events[c].push(u):(n._events[c]=u,n._eventsCount++),n;}function c(n,r){0==--n._eventsCount?n._events=new s:delete n._events[r];}function f(){this._events=new s,this._eventsCount=0;}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(o=!1)),f.prototype.eventNames=function(){var n,r,i=[];if(0===this._eventsCount)return i;for(r in n=this._events)a.call(n,r)&&i.push(o?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(n)):i;},f.prototype.listeners=function(n){var r=o?o+n:n,i=this._events[r];if(!i)return[];if(i.fn)return[i.fn];for(var a=0,s=i.length,l=Array(s);a<s;a++)l[a]=i[a].fn;return l;},f.prototype.listenerCount=function(n){var r=o?o+n:n,i=this._events[r];return i?i.fn?1:i.length:0;},f.prototype.emit=function(n,r,i,a,s,l){var u=o?o+n:n;if(!this._events[u])return!1;var c,f,d=this._events[u],h=arguments.length;if(d.fn){switch(d.once&&this.removeListener(n,d.fn,void 0,!0),h){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,r),!0;case 3:return d.fn.call(d.context,r,i),!0;case 4:return d.fn.call(d.context,r,i,a),!0;case 5:return d.fn.call(d.context,r,i,a,s),!0;case 6:return d.fn.call(d.context,r,i,a,s,l),!0;}for(f=1,c=Array(h-1);f<h;f++)c[f-1]=arguments[f];d.fn.apply(d.context,c);}else{var p,m=d.length;for(f=0;f<m;f++)switch(d[f].once&&this.removeListener(n,d[f].fn,void 0,!0),h){case 1:d[f].fn.call(d[f].context);break;case 2:d[f].fn.call(d[f].context,r);break;case 3:d[f].fn.call(d[f].context,r,i);break;case 4:d[f].fn.call(d[f].context,r,i,a);break;default:if(!c)for(p=1,c=Array(h-1);p<h;p++)c[p-1]=arguments[p];d[f].fn.apply(d[f].context,c);}}return!0;},f.prototype.on=function(n,r,i){return u(this,n,r,i,!1);},f.prototype.once=function(n,r,i){return u(this,n,r,i,!0);},f.prototype.removeListener=function(n,r,i,a){var s=o?o+n:n;if(!this._events[s])return this;if(!r)return c(this,s),this;var l=this._events[s];if(l.fn)l.fn!==r||a&&!l.once||i&&l.context!==i||c(this,s);else{for(var u=0,f=[],d=l.length;u<d;u++)(l[u].fn!==r||a&&!l[u].once||i&&l[u].context!==i)&&f.push(l[u]);f.length?this._events[s]=1===f.length?f[0]:f:c(this,s);}return this;},f.prototype.removeAllListeners=function(n){var r;return n?(r=o?o+n:n,this._events[r]&&c(this,r)):(this._events=new s,this._eventsCount=0),this;},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=o,f.EventEmitter=f,void 0!==n&&(n.exports=f);},"1b9893fb":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{GridContext:function(){return u.GridContext;},ProFormDependency:function(){return m.default;},ProFormField:function(){return y.default;},default:function(){return l.ProForm;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("d1751d7c"),l=i("2e660475");i("1d7423c1"),i("050eb703"),i("43b75ea7"),i("a3be40a8"),i("9e4a2107"),i("00cc2f86"),i("c163f000");var u=i("02a23b09");i("4701d2de");var c=i("7c302f45");a._(c);var f=i("9a0d8613");a._(f);var d=i("4c05700a");a._(d);var h=i("15fcf050");a._(h);var p=i("dfb73c9a"),m=a._(p),g=i("156120ad");a._(g);var v=i("551ddf56"),y=a._(v),_=i("9f61e6e3");a._(_);var b=i("ef77f514");o._(b);var x=i("da74b122");a._(x),i("11bba482");var E=i("f6e5d622");a._(E);var w=i("b0cb32eb");a._(w);var S=i("904df147");a._(S);var T=i("22e5bac1");a._(T);var A=i("6172027d");a._(A);var C=i("6810f89b");a._(C);var O=i("80e01657");a._(O),i("2faf3d77"),s._(i("37e36e70"),r);},"1c0d7fd1":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return V;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("9b84be4b"),l=a._(s),u=i("a854094b"),c=a._(u),f=i("e333157c"),d=a._(f),h=i("553ee311"),p=i("6654a076"),m=a._(p),g=i("9479dab9");function v(n){let r=n.coordinates;return{vertices:[...r],indices:[0],size:r.length};}class y extends m.default{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9});}getDefaultStyle(){return{blend:"additive"};}getCommonUniformsInfo(){let{blend:n,strokeOpacity:r=1,strokeWidth:i=0,stroke:a="#fff"}=this.layer.getLayerConfig(),o={u_stroke_color:(0,g.rgb2arr)(a),u_additive:"additive"===n?1:0,u_stroke_opacity:r,u_stroke_width:i};return this.getUniformsBufferInfo(o);}initModels(){var n=this;return(0,l.default)(function*(){return n.buildModels();})();}buildModels(){var n=this;return(0,l.default)(function*(){return n.layer.triangulation=v,n.initUniformsBuffer(),[(yield n.layer.buildLayerModel({moduleName:"pointSimple",vertexShader:'\nlayout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;\nlayout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;\nlayout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;\n\nlayout(std140) uniform commonUniorm {\n  vec4 u_stroke_color;\n  float u_additive;\n  float u_stroke_opacity;\n  float u_stroke_width;\n};\n\nout vec4 v_color;\nout float v_blur;\nout float v_innerRadius;\n\n#pragma include "projection"\n#pragma include "picking"\n#pragma include "project"\nvoid main() {\n  v_color = vec4(a_Color.xyz, a_Color.w * opacity);\n  v_blur = 1.0 - max(2.0 / a_Size, 0.05);\n  v_innerRadius = max((a_Size - u_stroke_width) / a_Size, 0.0);\n\n  vec2 offset = project_pixel(u_offsets);\n\n  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);\n  gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));\n\n  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;\n  setPickingColor(a_PickingColor);\n}\n',fragmentShader:'\nlayout(std140) uniform commonUniorm {\n  vec4 u_stroke_color;\n  float u_additive;\n  float u_stroke_opacity;\n  float u_stroke_width;\n};\n\nin vec4 v_color;\nin float v_blur;\nin float v_innerRadius;\n\nout vec4 outputColor;\n\n#pragma include "picking"\nvoid main() {\n  vec2 center = vec2(0.5);\n\n  // Tip: \u7247\u5143\u5230\u4E2D\u5FC3\u70B9\u7684\u8DDD\u79BB 0 - 1\n  float fragmengTocenter = distance(center, gl_PointCoord) * 2.0;\n  // Tip: \u7247\u5143\u7684\u526A\u5207\u6210\u5706\u5F62\n  float circleClipOpacity = 1.0 - smoothstep(v_blur, 1.0, fragmengTocenter);\n\n\n  if(v_innerRadius < 0.99) {\n    // \u5F53\u5B58\u5728 stroke \u4E14 stroke > 0.01\n    float blurWidth = (1.0 - v_blur)/2.0;\n    vec4 stroke = vec4(u_stroke_color.rgb, u_stroke_opacity);\n    if(fragmengTocenter > v_innerRadius + blurWidth) {\n      outputColor = stroke;\n    } else if(fragmengTocenter > v_innerRadius - blurWidth){\n      float mixR = (fragmengTocenter - (v_innerRadius - blurWidth)) / (blurWidth * 2.0);\n      outputColor = mix(v_color, stroke, mixR);\n    } else {\n      outputColor = v_color;\n    }\n  } else {\n    // \u5F53\u4E0D\u5B58\u5728 stroke \u6216 stroke <= 0.01\n    outputColor = v_color;\n  }\n\n  outputColor = filterColor(outputColor);\n  \n  if(u_additive > 0.0) {\n    outputColor *= circleClipOpacity;\n  } else {\n    outputColor.a *= circleClipOpacity;\n  }\n\n}\n',defines:n.getDefines(),inject:n.getInject(),triangulation:v,depth:{enable:!1},primitive:h.gl.POINTS}))];})();}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:h.AttributeType.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:h.gl.DYNAMIC_DRAW,data:[],type:h.gl.FLOAT},size:1,update:n=>{let{size:r=1}=n;return Array.isArray(r)?[r[0]]:[r];}}});}}var _=i("8970bd89"),b=i("9400daad");let{isNumber:x}=g.lodashUtil;class E extends m.default{constructor(...n){super(...n),(0,c.default)(this,"raiseCount",0),(0,c.default)(this,"raiseRepeat",0);}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,POS:10,NORMAL:11});}getCommonUniformsInfo(){let{animateOption:n={enable:!1,speed:.01,repeat:!1},opacity:r=1,sourceColor:i,targetColor:a,pickLight:o=!1,heightfixed:s=!0,opacityLinear:l={enable:!1,dir:"up"},lightEnable:u=!0}=this.layer.getLayerConfig(),c=0,f=[0,0,0,0],d=[0,0,0,0];if(i&&a&&(f=(0,g.rgb2arr)(i),d=(0,g.rgb2arr)(a),c=1),this.raiseCount<1&&this.raiseRepeat>0&&n.enable){let{speed:r=.01}=n;this.raiseCount+=r,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1);}let h={u_sourceColor:f,u_targetColor:d,u_linearColor:c,u_pickLight:Number(o),u_heightfixed:Number(s),u_r:n.enable&&this.raiseRepeat>0?this.raiseCount:1,u_opacity:x(r)?r:1,u_opacitylinear:Number(l.enable),u_opacitylinear_dir:"up"===l.dir?1:0,u_lightEnable:Number(u)};return this.getUniformsBufferInfo(h);}initModels(){var n=this;return(0,l.default)(function*(){return n.initUniformsBuffer(),n.buildModels();})();}buildModels(){var n=this;return(0,l.default)(function*(){let{animateOption:{repeat:r=1}}=n.layer.getLayerConfig();return n.raiseRepeat=r,[(yield n.layer.buildLayerModel({moduleName:"pointEarthExtrude",vertexShader:'precision highp float;\n\n#define pi 3.1415926535\n#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\nlayout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;\nlayout(location = ATTRIBUTE_LOCATION_SIZE) in vec3 a_Size;\nlayout(location = ATTRIBUTE_LOCATION_POS) in vec3 a_Pos;\nlayout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;\n\nlayout(std140) uniform commonUniform {\n  vec4 u_sourceColor;\n  vec4 u_targetColor;\n  float u_linearColor: 0;\n  float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A\n  float u_globel;\n  float u_r;\n  float u_pickLight: 0.0;\n  float u_opacitylinear: 0.0;\n  float u_opacitylinear_dir: 1.0;\n  float u_lightEnable: 1.0;\n};\n\nout vec4 v_color;\nout float v_lightWeight;\nout float v_barLinearZ;\n// \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143\n\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nfloat getYRadian(float x, float z) {\n  if(x > 0.0 && z > 0.0) {\n    return atan(x/z);\n  } else if(x > 0.0 && z <= 0.0){\n    return atan(-z/x) + pi/2.0;\n  } else if(x <= 0.0 && z <= 0.0) {\n    return  pi + atan(x/z); //atan(x/z) +\n  } else {\n    return atan(z/-x) + pi*3.0/2.0;\n  }\n}\n\nfloat getXRadian(float y, float r) {\n  return atan(y/r);\n}\n\nvoid main() {\n\n  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97\n  vec3 size = a_Size * a_Position;\n\n  // a_Position.z \u662F\u5728\u6784\u5EFA\u7F51\u683C\u7684\u65F6\u5019\u4F20\u5165\u7684\u6807\u51C6\u503C 0 - 1\uFF0C\u5728\u63D2\u503C\u5668\u63D2\u503C\u53EF\u4EE5\u83B7\u53D6 0\uFF5E1 \u7EBF\u6027\u6E10\u53D8\u7684\u503C\n  v_barLinearZ =  a_Position.z;\n\n  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB\n  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6\n    //\n  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);\n    }\n  }\n\n\n  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));\n\n  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F\n  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);\n\n  // \u5706\u67F1\u5149\u7167\u6548\u679C\n  float lightWeight = 1.0;\n  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027\n    lightWeight = calc_lighting(pos);\n  }\n  v_lightWeight = lightWeight;\n  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272\n  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272\n    v_color = mix(u_sourceColor, u_targetColor, v_barLinearZ);\n    v_color.rgb *= lightWeight;\n  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272\n     v_color = a_Color;\n  }\n  v_color.a *= u_opacity;\n\n\n  // \u5728\u5730\u7403\u6A21\u5F0F\u4E0B\uFF0C\u5C06\u539F\u672C\u5782\u76F4\u4E8E xy \u5E73\u9762\u7684\u5706\u67F1\u8C03\u6574\u59FF\u6001\u5230\u9002\u5E94\u5706\u7684\u89D2\u5EA6\n  //\u65CB\u8F6C\u77E9\u9635mx\uFF0C\u521B\u5EFA\u7ED5x\u8F74\u65CB\u8F6C\u77E9\u9635\n  float r = sqrt(a_Pos.z*a_Pos.z + a_Pos.x*a_Pos.x);\n  float xRadian = getXRadian(a_Pos.y, r);\n  float xcos = cos(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C\n  float xsin = sin(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C\n  mat4 mx = mat4(\n    1,0,0,0,\n    0,xcos,-xsin,0,\n    0,xsin,xcos,0,\n    0,0,0,1);\n\n  //\u65CB\u8F6C\u77E9\u9635my\uFF0C\u521B\u5EFA\u7ED5y\u8F74\u65CB\u8F6C\u77E9\u9635\n  float yRadian = getYRadian(a_Pos.x, a_Pos.z);\n  float ycos = cos(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C\n  float ysin = sin(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C\n  mat4 my = mat4(\n    ycos,0,-ysin,0,\n    0,1,0,0,\n    ysin,0,ycos,0,\n    0,0,0,1);\n\n  gl_Position = u_ViewProjectionMatrix * vec4(( my * mx *  vec4(a_Position * a_Size, 1.0)).xyz + a_Pos, 1.0);\n\n\n  setPickingColor(a_PickingColor);\n}\n',fragmentShader:'precision highp float;\nin vec4 v_color;\n\n#pragma include "picking"\n\nlayout(std140) uniform commonUniform {\n  vec4 u_sourceColor;\n  vec4 u_targetColor;\n  float u_linearColor: 0;\n  float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A\n  float u_globel;\n  float u_r;\n  float u_pickLight: 0.0;\n  float u_opacitylinear: 0.0;\n  float u_opacitylinear_dir: 1.0;\n  float u_lightEnable: 1.0;\n};\nin float v_lightWeight;\nin float v_barLinearZ;\nout vec4 outputColor;\nvoid main() {\n\n   outputColor = v_color;\n\n  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8\n  if(u_opacitylinear > 0.0) {\n    outputColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - v_barLinearZ): v_barLinearZ;\n  }\n\n  // picking\n  if(u_pickLight > 0.0) {\n    outputColor = filterColorAlpha(outputColor, v_lightWeight);\n  } else {\n    outputColor = filterColor(outputColor);\n  }\n}\n',triangulation:_.PointExtrudeTriangulation,depth:{enable:!0},defines:n.getDefines(),inject:n.getInject(),cull:{enable:!0,face:h.gl.FRONT},blend:n.getBlend()}))];})();}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:h.AttributeType.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:h.gl.DYNAMIC_DRAW,data:[],type:h.gl.FLOAT},size:3,update:n=>{let{size:r}=n;if(!r)return[2,2,2];{let n=[];return Array.isArray(r)&&(n=2===r.length?[r[0],r[0],r[1]]:r),Array.isArray(r)||(n=[r,r,r]),n;}}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:h.AttributeType.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:h.gl.STATIC_DRAW,data:[],type:h.gl.FLOAT},size:3,update:(n,r,i,a,o)=>o}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:h.AttributeType.Attribute,descriptor:{name:"a_Pos",shaderLocation:this.attributeLocation.POS,buffer:{usage:h.gl.DYNAMIC_DRAW,data:[],type:h.gl.FLOAT},size:3,update:n=>{let r=(0,g.calculateCentroid)(n.coordinates);return(0,b.lglt2xyz)([r[0],r[1]]);}}});}}var w=i("da755037"),S=o._(w),T=i("377bcc16"),A=o._(T);class C extends m.default{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,SHAPE:10,EXTRUDE:11});}getCommonUniformsInfo(){let{strokeOpacity:n=1,strokeWidth:r=0,blend:i,blur:a=0}=this.layer.getLayerConfig();return this.layer.getLayerConfig(),this.getUniformsBufferInfo({u_additive:"additive"===i?1:0,u_stroke_opacity:n,u_stroke_width:r,u_blur:a});}initModels(){var n=this;return(0,l.default)(function*(){return n.initUniformsBuffer(),n.buildModels();})();}buildModels(){var n=this;return(0,l.default)(function*(){return n.layer.triangulation=_.GlobelPointFillTriangulation,[(yield n.layer.buildLayerModel({moduleName:"pointEarthFill",vertexShader:'layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;\nlayout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;\nlayout(location = ATTRIBUTE_LOCATION_SHAPE) in float a_Shape;\nlayout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;\n\nlayout(std140) uniform commonUniform {\n  float u_additive;\n  float u_stroke_opacity : 1;\n  float u_stroke_width : 2;\n  float u_blur : 0.0;\n};\nout vec4 v_data;\nout vec4 v_color;\nout float v_radius;\n\n#pragma include "projection"\n#pragma include "picking"\n\n\nvoid main() {\n  vec3 extrude = a_Extrude;\n  float shape_type = a_Shape;\n  /*\n  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F\n  */\n  float newSize = setPickingSize(a_Size);\n  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;\n\n  // unpack color(vec2)\n  v_color = a_Color;\n\n  // radius(16-bit)\n  v_radius = newSize;\n\n  // anti-alias\n  //  float antialiased_blur = -max(u_blur, antialiasblur);\n  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);\n\n  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F\n  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);\n\n  gl_Position = u_ViewProjectionMatrix * vec4(a_Position + extrude * newSize * 0.1 + vec3(u_offsets,0.0), 1.0);\n\n  setPickingColor(a_PickingColor);\n}\n',fragmentShader:"in vec4 v_data;\nin vec4 v_color;\nin float v_radius;\n\nlayout(std140) uniform commonUniform {\n  float u_additive;\n  float u_stroke_opacity : 1;\n  float u_stroke_width : 2;\n  float u_blur : 0.0;\n};\n#pragma include \"sdf_2d\"\n#pragma include \"picking\"\n\nout vec4 outputColor;\n\nvoid main() {\n  int shape = int(floor(v_data.w + 0.5));\n\n  vec4 strokeColor = u_stroke == vec4(0.0) ? v_color : u_stroke;\n\n  lowp float antialiasblur = v_data.z;\n  float r = v_radius / (v_radius + u_stroke_width);\n\n  float outer_df;\n  float inner_df;\n  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'\n  if (shape == 0) {\n    outer_df = sdCircle(v_data.xy, 1.0);\n    inner_df = sdCircle(v_data.xy, r);\n  } else if (shape == 1) {\n    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);\n    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);\n  } else if (shape == 2) {\n    outer_df = sdBox(v_data.xy, vec2(1.));\n    inner_df = sdBox(v_data.xy, vec2(r));\n  } else if (shape == 3) {\n    outer_df = sdPentagon(v_data.xy, 0.8);\n    inner_df = sdPentagon(v_data.xy, r * 0.8);\n  } else if (shape == 4) {\n    outer_df = sdHexagon(v_data.xy, 0.8);\n    inner_df = sdHexagon(v_data.xy, r * 0.8);\n  } else if (shape == 5) {\n    outer_df = sdOctogon(v_data.xy, 1.0);\n    inner_df = sdOctogon(v_data.xy, r);\n  } else if (shape == 6) {\n    outer_df = sdHexagram(v_data.xy, 0.52);\n    inner_df = sdHexagram(v_data.xy, r * 0.52);\n  } else if (shape == 7) {\n    outer_df = sdRhombus(v_data.xy, vec2(1.0));\n    inner_df = sdRhombus(v_data.xy, vec2(r));\n  } else if (shape == 8) {\n    outer_df = sdVesica(v_data.xy, 1.1, 0.8);\n    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);\n  }\n\n  if(outer_df > antialiasblur + 0.018) discard;\n\n  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);\n\n  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(\n    antialiasblur,\n    0.0,\n    inner_df\n  );\n\n  if(u_stroke_width < 0.01) {\n    outputColor = vec4(v_color.rgb, v_color.a * u_opacity);\n  } else {\n    outputColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);\n  }\n\n  if(u_additive > 0.0) {\n    outputColor *= opacity_t;\n    outputColor = filterColorAlpha(outputColor, outputColor.a);\n  } else {\n    outputColor.a *= opacity_t;\n    outputColor = filterColor(outputColor);\n  }\n}\n",triangulation:_.GlobelPointFillTriangulation,defines:n.getDefines(),inject:n.getInject(),depth:{enable:!0},blend:n.getBlend()}))];})();}animateOption2Array(n){return[n.enable?0:1,n.speed||1,n.rings||3,0];}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"extrude",type:h.AttributeType.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:h.gl.DYNAMIC_DRAW,data:[],type:h.gl.FLOAT},size:3,update:(n,r,i,a)=>{let[o,s,l]=i,u=A.fromValues(0,0,1),c=A.fromValues(o,0,l),f=o>=0?A.angle(u,c):2*Math.PI-A.angle(u,c),d=2*Math.PI-Math.asin(s/100),h=S.create();S.rotateY(h,h,f),S.rotateX(h,h,d);let p=A.fromValues(1,1,0);A.transformMat4(p,p,h),A.normalize(p,p);let m=A.fromValues(-1,1,0);A.transformMat4(m,m,h),A.normalize(m,m);let g=A.fromValues(-1,-1,0);A.transformMat4(g,g,h),A.normalize(g,g);let v=A.fromValues(1,-1,0);A.transformMat4(v,v,h),A.normalize(v,v);let y=[...p,...m,...g,...v],_=a%4*3;return[y[_],y[_+1],y[_+2]];}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:h.AttributeType.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:h.gl.DYNAMIC_DRAW,data:[],type:h.gl.FLOAT},size:1,update:n=>{let{size:r=5}=n;return Array.isArray(r)?[r[0]]:[r];}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:h.AttributeType.Attribute,descriptor:{name:"a_Shape",shaderLocation:this.attributeLocation.SHAPE,buffer:{usage:h.gl.DYNAMIC_DRAW,data:[],type:h.gl.FLOAT},size:1,update:n=>{let{shape:r=2}=n;return[this.layer.getLayerConfig().shape2d.indexOf(r)];}}});}}var O=i("991309e4"),M=a._(O),R=i("c0d77826"),P=a._(R),k=i("07cf43fc");class I extends m.default{constructor(...n){super(...n),(0,c.default)(this,"meter2coord",1),(0,c.default)(this,"texture",void 0),(0,c.default)(this,"isMeter",!1),(0,c.default)(this,"radian",0),(0,c.default)(this,"updateTexture",()=>{let{createTexture2D:n}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),this.layerService.throttleRenderLayers();return;}this.texture=n({data:this.iconService.getCanvas(),mag:h.gl.LINEAR,min:h.gl.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128,mipmap:!0}),this.textures=[this.texture];});}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,EXTRUDE:10,UV:11});}getCommonUniformsInfo(){let{raisingHeight:n=0,heightfixed:r=!1,unit:i="pixel"}=this.layer.getLayerConfig();if(this.rendererService.getDirty()){var a;null===(a=this.texture)||void 0===a||a.bind();}let o={u_textSize:[1024,this.iconService.canvasHeight||128],u_heightfixed:Number(r),u_raisingHeight:Number(n),u_size_unit:k.SizeUnitType[i]};return this.getUniformsBufferInfo(o);}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),_.PointFillTriangulation);}initModels(){var n=this;return(0,l.default)(function*(){return n.iconService.on("imageUpdate",n.updateTexture),n.updateTexture(),n.buildModels();})();}buildModels(){var n=this;return(0,l.default)(function*(){return n.initUniformsBuffer(),[(yield n.layer.buildLayerModel({moduleName:"pointFillImage",vertexShader:'layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;\nlayout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;\nlayout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;\nlayout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;\nlayout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;\n\nlayout(std140) uniform commonUniform {\n  vec2 u_textSize;\n  float u_heightfixed;\n  float u_raisingHeight;\n  float u_size_unit;\n};\n\nout vec2 v_uv;\nout vec2 v_Iconuv;\nout float v_opacity;\n\n#pragma include "projection"\n#pragma include "picking"\n#pragma include "rotation_2d"\n\nvoid main() {\n  vec3 extrude = a_Extrude;\n  v_uv = (a_Extrude.xy + 1.0) / 2.0;\n  v_uv.y = 1.0 - v_uv.y;\n  v_Iconuv = a_Uv;\n  v_opacity = opacity;\n  float newSize = a_Size;\n  if (u_size_unit == 1.0) {\n    newSize = newSize * u_PixelsPerMeter.z;\n  }\n\n  // vec2 offset = (u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);\n  vec2 offset = extrude.xy * newSize + offsets;\n\n  offset = rotate_matrix(offset, rotation);\n\n  offset = project_pixel(offset);\n\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0), a_Position64Low);\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));\n\n  setPickingColor(a_PickingColor);\n}\n',fragmentShader:'in vec2 v_uv;// \u672C\u8EAB\u7684 uv \u5750\u6807\nin vec2 v_Iconuv;\nin float v_opacity;\nout vec4 outputColor;\n\nuniform sampler2D u_texture;\nlayout(std140) uniform commonUniform {\n  vec2 u_textSize;\n  float u_heightfixed: 0.0;\n  float u_raisingHeight: 0.0;\n  float u_size_unit;\n};\n\n#pragma include "scene_uniforms"\n#pragma include "sdf_2d"\n#pragma include "picking"\n\nvoid main() {\n  vec2 pos = v_Iconuv / u_textSize + v_uv / u_textSize * 64.;\n  outputColor = texture(SAMPLER_2D(u_texture), pos);\n  outputColor.a *= v_opacity;\n  outputColor = filterColor(outputColor);\n}\n',triangulation:_.PointFillTriangulation,depth:{enable:!1},defines:n.getDefines(),inject:n.getInject(),cull:{enable:!0,face:h.gl.FRONT}}))];})();}clearModels(){var n;this.iconService.off("imageUpdate",this.updateTexture),null===(n=this.texture)||void 0===n||n.destroy();}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:h.AttributeType.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:h.gl.DYNAMIC_DRAW,data:[],type:h.gl.FLOAT},size:2,update:n=>{let r=this.iconService.getIconMap(),{shape:i}=n,{x:a,y:o}=r[i]||{x:-64,y:-64};return[a,o];}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:h.AttributeType.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:h.gl.DYNAMIC_DRAW,data:[],type:h.gl.FLOAT},size:3,update:(n,r,i,a)=>{let o=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],s=a%4*3;return[o[s],o[s+1],o[s+2]];}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:h.AttributeType.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:h.gl.DYNAMIC_DRAW,data:[],type:h.gl.FLOAT},size:1,update:n=>{let{size:r=5}=n;return Array.isArray(r)?[r[0]]:[r];}}});}}var L=i("001de73b"),N=a._(L),D=i("9063dcee"),F=a._(D);class B extends m.default{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,EXTRUDE:10});}getCommonUniformsInfo(){let{blend:n,speed:r=1,unit:i="pixel"}=this.layer.getLayerConfig(),a={u_additive:"additive"===n?1:0,u_size_unit:k.SizeUnitType[i],u_speed:r,u_time:this.layer.getLayerAnimateTime()};return this.getUniformsBufferInfo(a);}getAnimateUniforms(){return{};}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),_.PointFillTriangulation);}initModels(){var n=this;return(0,l.default)(function*(){return n.buildModels();})();}buildModels(){var n=this;return(0,l.default)(function*(){return n.initUniformsBuffer(),[(yield n.layer.buildLayerModel({moduleName:"pointRadar",vertexShader:'layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;\nlayout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;\nlayout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;\nlayout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;\n\nlayout(std140) uniform commonUniorm {\n  float u_additive;\n  float u_size_unit;\n  float u_speed: 1.0;\n  float u_time;\n};\n\nout vec4 v_data;\nout vec4 v_color;\nout float v_radius;\nout vec2 v_extrude;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  float newSize = setPickingSize(a_Size);\n\n  float time = u_time * u_speed;\n  mat2 rotateMatrix = mat2(\n    cos(time), sin(time),\n    -sin(time), cos(time)\n  );\n  v_extrude = rotateMatrix * a_Extrude.xy;\n\n  v_color = a_Color;\n  v_color.a *= opacity;\n\n  float blur = 0.0;\n  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, blur);\n\n  if(u_size_unit == 1.) {\n    newSize = newSize  * u_PixelsPerMeter.z;\n  }\n  v_radius = newSize;\n\n  vec2 offset = (a_Extrude.xy * (newSize));\n\n  offset = project_pixel(offset);\n\n  v_data = vec4(a_Extrude.x, a_Extrude.y, antialiasblur, -1.0);\n\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0), a_Position64Low);\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));\n\n  setPickingColor(a_PickingColor);\n}\n',fragmentShader:'\nlayout(std140) uniform commonUniorm{\n  float u_additive;\n  float u_size_unit;\n  float u_speed: 1.0;\n  float u_time;\n};\nin vec4 v_data;\nin vec4 v_color;\nin float v_radius;\nin vec2 v_extrude;\n#pragma include "sdf_2d"\n#pragma include "picking"\n\nout vec4 outputColor;\n\nvoid main() {\n\n  lowp float antialiasblur = v_data.z;\n  float r = v_radius / (v_radius);\n\n  float outer_df = sdCircle(v_data.xy, 1.0);\n  float inner_df = sdCircle(v_data.xy, r);\n\n  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);\n\n  outputColor = vec4(v_color.rgb, v_color.a);\n\n  if(u_additive > 0.0) {\n    outputColor *= opacity_t;\n  } else {\n    outputColor.a *= opacity_t;\n  }\n\n  if(outputColor.a > 0.0) {\n    outputColor = filterColor(outputColor);\n  }\n\n  vec2 extrude =  v_extrude;\n  vec2 dir = normalize(extrude);\n  vec2 baseDir = vec2(1.0, 0.0);\n  float pi = 3.14159265359;\n  float flag = sign(dir.y);\n  float rades = dot(dir, baseDir);\n  float radar_v = (flag - 1.0) * -0.5 * acos(rades)/pi;\n  // simple AA\n  if(radar_v > 0.99) {\n    radar_v = 1.0 - (radar_v - 0.99)/0.01;\n  }\n\n  outputColor.a *= radar_v;\n}\n',triangulation:_.PointFillTriangulation,defines:n.getDefines(),inject:n.getInject(),depth:{enable:!1}}))];})();}animateOption2Array(n){return[n.enable?0:1,n.speed||1,n.rings||3,0];}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:h.AttributeType.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:h.gl.DYNAMIC_DRAW,data:[],type:h.gl.FLOAT},size:3,update:(n,r,i,a)=>{let o=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],s=a%4*3;return[o[s],o[s+1],o[s+2]];}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:h.AttributeType.Attribute,descriptor:{shaderLocation:this.attributeLocation.SIZE,name:"a_Size",buffer:{usage:h.gl.DYNAMIC_DRAW,data:[],type:h.gl.FLOAT},size:1,update:n=>{let{size:r=5}=n;return Array.isArray(r)?[r[0]]:[r];}}});}}var j=i("21da3e32"),z=a._(j);let U={fillImage:I,fill:P.default,radar:B,image:N.default,normal:F.default,simplePoint:y,extrude:M.default,text:z.default,earthFill:C,earthExtrude:E};class V extends d.default{constructor(...n){super(...n),(0,c.default)(this,"type","PointLayer"),(0,c.default)(this,"enableShaderEncodeStyles",["stroke","offsets","opacity","rotation"]),(0,c.default)(this,"enableDataEncodeStyles",["textOffset","textAnchor"]),(0,c.default)(this,"defaultSourceConfig",{data:[],options:{parser:{type:"json",x:"lng",y:"lat"}}});}buildModels(){var n=this;return(0,l.default)(function*(){let r=n.getModelType();n.layerModel&&n.layerModel.clearModels(),n.layerModel=new U[r](n),yield n.initLayerModels();})();}rebuildModels(){var n=this;return(0,l.default)(function*(){yield n.buildModels();})();}getModelTypeWillEmptyData(){if(this.shapeOption){let{field:n,values:r}=this.shapeOption,{shape2d:i}=this.getLayerConfig(),a=this.iconService.getIconMap();if(n&&(null==i?void 0:i.indexOf(n))!==-1)return"fill";if("text"===r)return"text";if(r&&r instanceof Array){for(let n of r)if("string"==typeof n&&a.hasOwnProperty(n))return"image";}}return"normal";}getDefaultConfig(){return({fillImage:{},normal:{blend:"additive"},radar:{},simplePoint:{},fill:{blend:"normal"},extrude:{},image:{},text:{blend:"normal"},tile:{},tileText:{},earthFill:{},earthExtrude:{}})[this.getModelType()];}getModelType(){let n=this.getEncodedData(),{shape2d:r,shape3d:i,billboard:a=!0}=this.getLayerConfig(),o=this.iconService.getIconMap(),s=n.find(n=>n.hasOwnProperty("shape"));if(!s)return this.getModelTypeWillEmptyData();{let n=s.shape;return"dot"===n?"normal":"simple"===n?"simplePoint":"radar"===n?"radar":"fillImage"===this.layerType||!1===a?"fillImage":(null==r?void 0:r.indexOf(n))!==-1?"GLOBEL"===this.mapService.version?"earthFill":"fill":(null==i?void 0:i.indexOf(n))!==-1?"GLOBEL"===this.mapService.version?"earthExtrude":"extrude":o.hasOwnProperty(n)?"image":"text";}}}},"1c5a6150":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"treeDataTransform",{enumerable:!0,get:function(){return y;}});var a=i("777fffbe"),o=a._(i("1daaa764")),s=a._(i("da8e1cea")),l=a._(i("4c1ff8e6")),u=a._(i("7b8bcee7")),c=a._(i("48fdc2f5")),f=a._(i("1df9042c")),d=a._(i("a96a4c71")),h=a._(i("01c1137e")),p=a._(i("42fc1f40")),m=a._(i("3efd64b7")),g=a._(i("f0a50269")),v=i("cbed5754");function y(n,r,i){var a;let{value:y}=i,_=function(n,r){let i={treemapBinary:f.default,treemapDice:d.default,treemapSlice:h.default,treemapSliceDice:p.default,treemapSquarify:m.default,treemapResquarify:g.default},a="treemapSquarify"===n?i[n].ratio(r):i[n];if(!a)throw TypeError("Invalid tile method!");return a;}(r.tile,r.ratio),b=(a=r.path,Array.isArray(n)?"function"==typeof a?(0,l.default)().path(a)(n):(0,l.default)()(n):(0,u.default)(n));(0,o.default)(n)?function n(r){let i=(0,s.default)(r,["data","name"]);i.replaceAll&&(r.path=i.replaceAll(".","/").split("/")),r.children&&r.children.forEach(r=>{n(r);});}(b):function n(r,i=[r.data.name]){r.id=r.id||r.data.name,r.path=i,r.children&&r.children.forEach(a=>{a.id=`${r.id}/${a.data.name}`,a.path=[...i,a.data.name],n(a,a.path);});}(b),y?b.sum(n=>r.ignoreParentValue&&n.children?0:(0,v.field)(y)(n)).sort(r.sort):b.count(),(0,c.default)().tile(_).size(r.size).round(r.round).paddingInner(r.paddingInner).paddingOuter(r.paddingOuter).paddingTop(r.paddingTop).paddingRight(r.paddingRight).paddingBottom(r.paddingBottom).paddingLeft(r.paddingLeft)(b);let x=b.descendants().map(n=>Object.assign(n,{id:n.id.replace(/^\//,""),x:[n.x0,n.x1],y:[n.y0,n.y1]}));return[x.filter("function"==typeof r.layer?r.layer:n=>n.height===r.layer),x];}},"1cf5f081":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{ARRAY_TYPE:function(){return o;},EPSILON:function(){return a;}});var a=1e-6,o="undefined"!=typeof Float32Array?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var n=0,r=arguments.length;r--;)n+=arguments[r]*arguments[r];return Math.sqrt(n);});},"1d1b11bd":function(n,r,i){"use strict";function a(n){return null==n?null:o(n);}function o(n){if("function"!=typeof n)throw Error();return n;}i.d(r,"__esModule",{value:!0}),i.e(r,{optional:function(){return a;},required:function(){return o;}});},"1d3bdddd":function(n,r,i){n.exports=function(n,r){for(var i=-1,a=null==n?0:n.length,o=0,s=[];++i<a;){var l=n[i];r(l,i,n)&&(s[o++]=l);}return s;};},"1d53d00e":function(n,r,i){var a=i("60c1e561");n.exports=function(n){return n&&n.length?a(n):[];};},"1daaa764":function(n,r,i){"use strict";function a(n){return Array.isArray(n);}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},"1df9042c":function(n,r,i){"use strict";function a(n,r,i,a,o){var s,l,u=n.children,c=u.length,f=Array(c+1);for(f[0]=l=s=0;s<c;++s)f[s+1]=l+=u[s].value;!function n(r,i,a,o,s,l,c){if(r>=i-1){var d=u[r];d.x0=o,d.y0=s,d.x1=l,d.y1=c;return;}for(var h=f[r],p=a/2+h,m=r+1,g=i-1;m<g;){var v=m+g>>>1;f[v]<p?m=v+1:g=v;}p-f[m-1]<f[m]-p&&r+1<m&&--m;var y=f[m]-h,_=a-y;if(l-o>c-s){var b=a?(o*_+l*y)/a:l;n(r,m,y,o,s,b,c),n(m,i,_,b,s,l,c);}else{var x=a?(s*_+c*y)/a:c;n(r,m,y,o,s,l,x),n(m,i,_,o,x,l,c);}}(0,c,n.value,r,i,a,o);}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},"1e224d4e":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"ModalForm",{enumerable:!0,get:function(){return w;}});var a=i("777fffbe"),o=i("852bbaa9"),s=a._(i("23934e00")),l=a._(i("9b84be4b")),u=a._(i("e4870cf0")),c=a._(i("ee64167d")),f=a._(i("613f75ca")),d=i("4175825c"),h=a._(i("a5a99096")),p=a._(i("be348412")),m=a._(i("ce03fd86")),g=i("dd8ccb36"),v=i("a275200c"),y=o._(i("609f48be")),_=i("792e90bc"),b=i("cd1e34ba"),x=i("dac8af92"),E=["children","trigger","onVisibleChange","onOpenChange","modalProps","onFinish","submitTimeout","title","width","visible","open"];function w(n){var r,i,a,o,w=n.children,S=n.trigger,T=n.onVisibleChange,A=n.onOpenChange,C=n.modalProps,O=n.onFinish,M=n.submitTimeout,R=n.title,P=n.width,k=n.visible,I=n.open,L=(0,f.default)(n,E);(0,v.noteOnce)(!L.footer||!(null!=C&&C.footer),"ModalForm \u662F\u4E00\u4E2A ProForm \u7684\u7279\u6B8A\u5E03\u5C40\uFF0C\u5982\u679C\u60F3\u81EA\u5B9A\u4E49\u6309\u94AE\uFF0C\u8BF7\u4F7F\u7528 submit.render \u81EA\u5B9A\u4E49\u3002");var N=(0,y.useContext)(h.default.ConfigContext),D=(0,y.useState)([]),F=(0,c.default)(D,2)[1],B=(0,y.useState)(!1),j=(0,c.default)(B,2),z=j[0],U=j[1],V=(0,m.default)(!!k,{value:I||k,onChange:A||T}),G=(0,c.default)(V,2),H=G[0],W=G[1],X=(0,y.useRef)(null),q=(0,y.useCallback)(function(n){null===X.current&&n&&F([]),X.current=n;},[]),$=(0,y.useRef)(),Y=(0,y.useCallback)(function(){var n,r,i,a=null!==(n=null!==(r=L.form)&&void 0!==r?r:null===(i=L.formRef)||void 0===i?void 0:i.current)&&void 0!==n?n:$.current;a&&null!=C&&C.destroyOnClose&&a.resetFields();},[null==C?void 0:C.destroyOnClose,L.form,L.formRef]);(0,y.useImperativeHandle)(L.formRef,function(){return $.current;},[$.current]),(0,y.useEffect)(function(){(I||k)&&(null==A||A(!0),null==T||T(!0));},[k,I]);var Z=(0,y.useMemo)(function(){var n;return S?y.default.cloneElement(S,(0,u.default)((0,u.default)({key:"trigger"},S.props),{},{onClick:(n=(0,l.default)((0,s.default)().mark(function n(r){var i,a;return(0,s.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:W(!H),null===(i=S.props)||void 0===i||null===(a=i.onClick)||void 0===a||a.call(i,r);case 2:case"end":return n.stop();}},n);})),function(r){return n.apply(this,arguments);})})):null;},[W,S,H]),K=(0,y.useMemo)(function(){var n,r,i,a,o,s,l;return!1!==L.submitter&&(0,g.merge)({searchConfig:{submitText:null!==(n=null!==(r=null==C?void 0:C.okText)&&void 0!==r?r:null===(i=N.locale)||void 0===i||null===(i=i.Modal)||void 0===i?void 0:i.okText)&&void 0!==n?n:"\u786E\u8BA4",resetText:null!==(a=null!==(o=null==C?void 0:C.cancelText)&&void 0!==o?o:null===(s=N.locale)||void 0===s||null===(s=s.Modal)||void 0===s?void 0:s.cancelText)&&void 0!==a?a:"\u53D6\u6D88"},resetButtonProps:{preventDefault:!0,disabled:M?z:void 0,onClick:function(n){var r;W(!1),null==C||null===(r=C.onCancel)||void 0===r||r.call(C,n);}}},null!==(l=L.submitter)&&void 0!==l?l:{});},[null===(a=N.locale)||void 0===a||null===(a=a.Modal)||void 0===a?void 0:a.cancelText,null===(o=N.locale)||void 0===o||null===(o=o.Modal)||void 0===o?void 0:o.okText,C,L.submitter,W,z,M]),Q=(0,y.useCallback)(function(n,r){return(0,x.jsxs)(x.Fragment,{children:[n,X.current&&r?(0,x.jsx)(y.default.Fragment,{children:(0,_.createPortal)(r,X.current)},"submitter"):r]});},[]),J=(0,y.useCallback)((r=(0,l.default)((0,s.default)().mark(function n(r){var i,a,o;return(0,s.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=null==O?void 0:O(r),M&&i instanceof Promise&&(U(!0),a=setTimeout(function(){return U(!1);},M),i.finally(function(){clearTimeout(a),U(!1);})),n.next=4,i;case 4:return(o=n.sent)&&W(!1),n.abrupt("return",o);case 7:case"end":return n.stop();}},n);})),function(n){return r.apply(this,arguments);}),[O,W,M]),ee=(0,d.openVisibleCompatible)(H);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(p.default,(0,u.default)((0,u.default)((0,u.default)({title:R,width:P||800},C),ee),{},{onCancel:function(n){var r;M&&z||(W(!1),null==C||null===(r=C.onCancel)||void 0===r||r.call(C,n));},afterClose:function(){var n;Y(),H&&W(!1),null==C||null===(n=C.afterClose)||void 0===n||n.call(C);},footer:!1!==L.submitter?(0,x.jsx)("div",{ref:q,style:{display:"flex",justifyContent:"flex-end"}}):null,children:(0,x.jsx)(b.BaseForm,(0,u.default)((0,u.default)({formComponentType:"ModalForm",layout:"vertical"},L),{},{onInit:function(n,r){var i;L.formRef&&(L.formRef.current=r),null==L||null===(i=L.onInit)||void 0===i||i.call(L,n,r),$.current=r;},formRef:$,submitter:K,onFinish:(i=(0,l.default)((0,s.default)().mark(function n(r){var i;return(0,s.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,J(r);case 2:return i=n.sent,n.abrupt("return",i);case 4:case"end":return n.stop();}},n);})),function(n){return i.apply(this,arguments);}),contentRender:Q,children:w}))})),Z]});}},"1e27b7a9":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return p;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("7cfeda15"),l=a._(s),u=i("609f48be"),c=o._(u),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},d=i("887aaf6c"),h=a._(d),p=c.forwardRef(function(n,r){return c.createElement(h.default,(0,l.default)({},n,{ref:r,icon:f}));});},"1e27b829":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{createColumnOf:function(){return d;},initializeMark:function(){return f;}});var a=i("1f4e7f4b"),o=i("f5373dff"),s=i("c4368857"),l=i("7d5002fc"),u=this&&this.__awaiter||function(n,r,i,a){return new(i||(i=Promise))(function(o,s){function l(n){try{c(a.next(n));}catch(n){s(n);}}function u(n){try{c(a.throw(n));}catch(n){s(n);}}function c(n){var r;n.done?o(n.value):((r=n.value)instanceof i?r:new i(function(n){n(r);})).then(l,u);}c((a=a.apply(n,r||[])).next());});},c=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};function f(n,r,i){return u(this,void 0,void 0,function*(){let[f,d]=yield function(n,r,i){return u(this,void 0,void 0,function*(){let{library:a}=i,[o]=(0,s.useLibrary)("transform",a),{preInference:u=[],postInference:c=[]}=r,{transform:f=[]}=n,d=[l.applyDefaults,l.applyDataTransform,l.flatEncode,l.inferChannelsType,l.maybeVisualChannel,l.extractColumns,l.maybeArrayField,l.maybeNonAnimate,l.addGuideToScale,l.normalizeTooltip,...u.map(o),...f.map(o),...c.map(o),l.extractTooltip],h=[],p=n;for(let n of d)[h,p]=yield n(h,p,i);return[h,p];});}(n,r,i),{encode:h,scale:p,data:m,tooltip:g}=d;if(!1===Array.isArray(m))return null;let{channels:v}=r,y=(0,a.rollups)(Object.entries(h).filter(([,n])=>(0,o.defined)(n)),n=>n.map(([n,r])=>Object.assign({name:n},r)),([n])=>{var r;let i=null===(r=/([^\d]+)\d*$/.exec(n))||void 0===r?void 0:r[1],a=v.find(n=>n.name===i);return(null==a?void 0:a.independent)?n:i;}),_=v.filter(n=>{let{name:r,required:i}=n;if(y.find(([n])=>n===r))return!0;if(i)throw Error(`Missing encoding for channel: ${r}.`);return!1;}).flatMap(n=>{let{name:r,scale:i,scaleKey:a,range:o,quantitative:s,ordinal:l}=n;return y.filter(([n])=>n.startsWith(r)).map(([n,r],u)=>{let f=r.some(n=>n.visual),d=r.some(n=>n.constant),h=p[n]||{},{independent:m=!1,key:g=a||n,type:v=d?"constant":f?"identity":i}=h,y=c(h,["independent","key","type"]),_="constant"===v;return{name:n,values:r,scaleKey:m||_?Symbol("independent"):g,scale:Object.assign(Object.assign({type:v,range:_?void 0:o},y),{quantitative:s,ordinal:l})};});});return[d,Object.assign(Object.assign({},r),{index:f,channels:_,tooltip:g})];});}function d(n){let[r]=(0,s.useLibrary)("encode",n);return(n,i)=>void 0===i||void 0===n?null:Object.assign(Object.assign({},i),{type:"column",value:r(i)(n),field:function(n){let{type:r,value:i}=n;return"field"===r&&"string"==typeof i?i:null;}(i)});}},"1f338b89":function(n,r,i){"use strict";function a(n){return"number"==typeof n;}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},"1f4e7f4b":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return f;},groups:function(){return d;},rollup:function(){return h;},rollups:function(){return p;}});var a=i("777fffbe");class o extends Map{constructor(n,r=l){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),null!=n)for(let[r,i]of n)this.set(r,i);}get(n){return super.get(s(this,n));}has(n){return super.has(s(this,n));}set(n,r){return super.set(function({_intern:n,_key:r},i){let a=r(i);return n.has(a)?n.get(a):(n.set(a,i),i);}(this,n),r);}delete(n){return super.delete(function({_intern:n,_key:r},i){let a=r(i);return n.has(a)&&(i=n.get(i),n.delete(a)),i;}(this,n));}}function s({_intern:n,_key:r},i){let a=r(i);return n.has(a)?n.get(a):i;}function l(n){return null!==n&&"object"==typeof n?n.valueOf():n;}var u=i("496cbcb8"),c=a._(u);function f(n,...r){return m(n,c.default,c.default,r);}function d(n,...r){return m(n,Array.from,c.default,r);}function h(n,r,...i){return m(n,c.default,r,i);}function p(n,r,...i){return m(n,Array.from,r,i);}function m(n,r,i,a){return function n(s,l){if(l>=a.length)return i(s);let u=new o,c=a[l++],f=-1;for(let n of s){let r=c(n,++f,s),i=u.get(r);i?i.push(n):u.set(r,[n]);}for(let[r,i]of u)u.set(r,n(i,l));return r(u);}(n,0);}},"1f547793":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return o;}});var a=Object.prototype,o=function(n){var r=n&&n.constructor;return n===("function"==typeof r&&r.prototype||a);};},"1f9d5621":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return l;}});var a=i("777fffbe"),o=a._(i("83684c30")),s=a._(i("62a7c4f2"));function l(n){return(0,o.default)(n)?0:(0,s.default)(n)?n.length:Object.keys(n).length;}},"1fe7fa71":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{BaseInput:function(){return b;},default:function(){return L;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("e4870cf0"),l=a._(s),u=i("7cfeda15"),c=a._(u),f=i("a854094b"),d=a._(f),h=i("99c0cd4c"),p=a._(h),m=i("064ecd09"),g=a._(m),v=i("609f48be"),y=o._(v),_=i("8ccd78b4"),b=y.default.forwardRef(function(n,r){var i,a,o,s=n.inputElement,u=n.children,f=n.prefixCls,h=n.prefix,m=n.suffix,v=n.addonBefore,b=n.addonAfter,x=n.className,E=n.style,w=n.disabled,S=n.readOnly,T=n.focused,A=n.triggerFocus,C=n.allowClear,O=n.value,M=n.handleReset,R=n.hidden,P=n.classes,k=n.classNames,I=n.dataAttrs,L=n.styles,N=n.components,D=n.onClear,F=null!=u?u:s,B=(null==N?void 0:N.affixWrapper)||"span",j=(null==N?void 0:N.groupWrapper)||"span",z=(null==N?void 0:N.wrapper)||"span",U=(null==N?void 0:N.groupAddon)||"span",V=(0,y.useRef)(null),G=(0,_.hasPrefixSuffix)(n),H=(0,y.cloneElement)(F,{value:O,className:(0,g.default)(null===(i=F.props)||void 0===i?void 0:i.className,!G&&(null==k?void 0:k.variant))||null}),W=(0,y.useRef)(null);if(y.default.useImperativeHandle(r,function(){return{nativeElement:W.current||V.current};}),G){var X=null;if(C){var q=!w&&!S&&O,$="".concat(f,"-clear-icon"),Y="object"===(0,p.default)(C)&&null!=C&&C.clearIcon?C.clearIcon:"\u2716";X=y.default.createElement("button",{type:"button",tabIndex:-1,onClick:function(n){null==M||M(n),null==D||D();},onMouseDown:function(n){return n.preventDefault();},className:(0,g.default)($,(0,d.default)((0,d.default)({},"".concat($,"-hidden"),!q),"".concat($,"-has-suffix"),!!m))},Y);}var Z="".concat(f,"-affix-wrapper"),K=(0,g.default)(Z,(0,d.default)((0,d.default)((0,d.default)((0,d.default)((0,d.default)({},"".concat(f,"-disabled"),w),"".concat(Z,"-disabled"),w),"".concat(Z,"-focused"),T),"".concat(Z,"-readonly"),S),"".concat(Z,"-input-with-clear-btn"),m&&C&&O),null==P?void 0:P.affixWrapper,null==k?void 0:k.affixWrapper,null==k?void 0:k.variant),Q=(m||C)&&y.default.createElement("span",{className:(0,g.default)("".concat(f,"-suffix"),null==k?void 0:k.suffix),style:null==L?void 0:L.suffix},X,m);H=y.default.createElement(B,(0,c.default)({className:K,style:null==L?void 0:L.affixWrapper,onClick:function(n){var r;null!==(r=V.current)&&void 0!==r&&r.contains(n.target)&&(null==A||A());}},null==I?void 0:I.affixWrapper,{ref:V}),h&&y.default.createElement("span",{className:(0,g.default)("".concat(f,"-prefix"),null==k?void 0:k.prefix),style:null==L?void 0:L.prefix},h),H,Q);}if((0,_.hasAddon)(n)){var J="".concat(f,"-group"),ee="".concat(J,"-addon"),et="".concat(J,"-wrapper"),en=(0,g.default)("".concat(f,"-wrapper"),J,null==P?void 0:P.wrapper,null==k?void 0:k.wrapper),er=(0,g.default)(et,(0,d.default)({},"".concat(et,"-disabled"),w),null==P?void 0:P.group,null==k?void 0:k.groupWrapper);H=y.default.createElement(j,{className:er,ref:W},y.default.createElement(z,{className:en},v&&y.default.createElement(U,{className:ee},v),H,b&&y.default.createElement(U,{className:ee},b)));}return y.default.cloneElement(H,{className:(0,g.default)(null===(a=H.props)||void 0===a?void 0:a.className,x)||null,style:(0,l.default)((0,l.default)({},null===(o=H.props)||void 0===o?void 0:o.style),E),hidden:R});}),x=i("f1020fa4"),E=a._(x),w=i("ee64167d"),S=a._(w),T=i("613f75ca"),A=a._(T),C=i("ce03fd86"),O=a._(C),M=i("ddaa0afd"),R=a._(M),P=i("3cf89988"),k=a._(P),I=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","onKeyUp","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],L=(0,y.forwardRef)(function(n,r){var i,a=n.autoComplete,o=n.onChange,s=n.onFocus,u=n.onBlur,f=n.onPressEnter,h=n.onKeyDown,p=n.onKeyUp,m=n.prefixCls,v=void 0===m?"rc-input":m,x=n.disabled,w=n.htmlSize,T=n.className,C=n.maxLength,M=n.suffix,P=n.showCount,L=n.count,N=n.type,D=n.classes,F=n.classNames,B=n.styles,j=n.onCompositionStart,z=n.onCompositionEnd,U=(0,A.default)(n,I),V=(0,y.useState)(!1),G=(0,S.default)(V,2),H=G[0],W=G[1],X=(0,y.useRef)(!1),q=(0,y.useRef)(!1),$=(0,y.useRef)(null),Y=(0,y.useRef)(null),Z=function(n){$.current&&(0,_.triggerFocus)($.current,n);},K=(0,O.default)(n.defaultValue,{value:n.value}),Q=(0,S.default)(K,2),J=Q[0],ee=Q[1],et=null==J?"":String(J),en=(0,y.useState)(null),er=(0,S.default)(en,2),ei=er[0],ea=er[1],eo=(0,k.default)(L,P),es=eo.max||C,el=eo.strategy(et),eu=!!es&&el>es;(0,y.useImperativeHandle)(r,function(){var n;return{focus:Z,blur:function(){var n;null===(n=$.current)||void 0===n||n.blur();},setSelectionRange:function(n,r,i){var a;null===(a=$.current)||void 0===a||a.setSelectionRange(n,r,i);},select:function(){var n;null===(n=$.current)||void 0===n||n.select();},input:$.current,nativeElement:(null===(n=Y.current)||void 0===n?void 0:n.nativeElement)||$.current};}),(0,y.useEffect)(function(){q.current&&(q.current=!1),W(function(n){return(!n||!x)&&n;});},[x]);var ec=function(n,r,i){var a,s,l=r;if(!X.current&&eo.exceedFormatter&&eo.max&&eo.strategy(r)>eo.max)l=eo.exceedFormatter(r,{max:eo.max}),r!==l&&ea([(null===(a=$.current)||void 0===a?void 0:a.selectionStart)||0,(null===(s=$.current)||void 0===s?void 0:s.selectionEnd)||0]);else if("compositionEnd"===i.source)return;ee(l),$.current&&(0,_.resolveOnChange)($.current,n,o,l);};(0,y.useEffect)(function(){if(ei){var n;null===(n=$.current)||void 0===n||n.setSelectionRange.apply(n,(0,E.default)(ei));}},[ei]);var ef=eu&&"".concat(v,"-out-of-range");return y.default.createElement(b,(0,c.default)({},U,{prefixCls:v,className:(0,g.default)(T,ef),handleReset:function(n){ee(""),Z(),$.current&&(0,_.resolveOnChange)($.current,n,o);},value:et,focused:H,triggerFocus:Z,suffix:function(){var n=Number(es)>0;if(M||eo.show){var r=eo.showFormatter?eo.showFormatter({value:et,count:el,maxLength:es}):"".concat(el).concat(n?" / ".concat(es):"");return y.default.createElement(y.default.Fragment,null,eo.show&&y.default.createElement("span",{className:(0,g.default)("".concat(v,"-show-count-suffix"),(0,d.default)({},"".concat(v,"-show-count-has-suffix"),!!M),null==F?void 0:F.count),style:(0,l.default)({},null==B?void 0:B.count)},r),M);}return null;}(),disabled:x,classes:D,classNames:F,styles:B,ref:Y}),(i=(0,R.default)(n,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames","onClear"]),y.default.createElement("input",(0,c.default)({autoComplete:a},i,{onChange:function(n){ec(n,n.target.value,{source:"change"});},onFocus:function(n){W(!0),null==s||s(n);},onBlur:function(n){q.current&&(q.current=!1),W(!1),null==u||u(n);},onKeyDown:function(n){f&&"Enter"===n.key&&!q.current&&(q.current=!0,f(n)),null==h||h(n);},onKeyUp:function(n){"Enter"===n.key&&(q.current=!1),null==p||p(n);},className:(0,g.default)(v,(0,d.default)({},"".concat(v,"-disabled"),x),null==F?void 0:F.input),style:null==B?void 0:B.input,ref:$,size:w,type:void 0===N?"text":N,onCompositionStart:function(n){X.current=!0,null==j||j(n);},onCompositionEnd:function(n){X.current=!1,ec(n,n.currentTarget.value,{source:"compositionEnd"}),null==z||z(n);}}))));});},"202d5e21":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return P;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("7cfeda15"),l=a._(s),u=i("a854094b"),c=a._(u),f=i("e4870cf0"),d=a._(f),h=i("ee64167d"),p=a._(h),m=i("613f75ca"),g=a._(m),v=i("609f48be"),y=o._(v),_=i("064ecd09"),b=a._(_),x=i("ae8eb856"),E=a._(x),w=i("b7c8f320"),S=y.memo(function(n){for(var r=n.prefixCls,i=n.level,a=n.isStart,o=n.isEnd,s="".concat(r,"-indent-unit"),l=[],u=0;u<i;u+=1)l.push(y.createElement("span",{key:u,className:(0,b.default)(s,(0,c.default)((0,c.default)({},"".concat(s,"-start"),a[u]),"".concat(s,"-end"),o[u]))}));return y.createElement("span",{"aria-hidden":"true",className:"".concat(r,"-indent")},l);}),T=i("07aa9410"),A=a._(T),C=i("d105a374"),O=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove","selectable"],M="open",R="close",P=function(n){var r,i,a,o=n.eventKey,s=n.className,u=n.style,f=n.dragOver,h=n.dragOverGapTop,m=n.dragOverGapBottom,v=n.isLeaf,_=n.isStart,x=n.isEnd,T=n.expanded,P=n.selected,k=n.checked,I=n.halfChecked,L=n.loading,N=n.domRef,D=n.active,F=n.data,B=n.onMouseMove,j=n.selectable,z=(0,g.default)(n,O),U=y.default.useContext(w.TreeContext),V=y.default.useContext(w.UnstableContext),G=y.default.useRef(null),H=y.default.useState(!1),W=(0,p.default)(H,2),X=W[0],q=W[1],$=!!(U.disabled||n.disabled||null!==(r=V.nodeDisabled)&&void 0!==r&&r.call(V,F)),Y=y.default.useMemo(function(){return!!U.checkable&&!1!==n.checkable&&U.checkable;},[U.checkable,n.checkable]),Z=function(r){$||U.onNodeSelect(r,(0,C.convertNodePropsToEventData)(n));},K=function(r){$||!Y||n.disableCheckbox||U.onNodeCheck(r,(0,C.convertNodePropsToEventData)(n),!k);},Q=y.default.useMemo(function(){return"boolean"==typeof j?j:U.selectable;},[j,U.selectable]),J=function(r){U.onNodeClick(r,(0,C.convertNodePropsToEventData)(n)),Q?Z(r):K(r);},ee=function(r){U.onNodeDoubleClick(r,(0,C.convertNodePropsToEventData)(n));},et=function(r){U.onNodeMouseEnter(r,(0,C.convertNodePropsToEventData)(n));},en=function(r){U.onNodeMouseLeave(r,(0,C.convertNodePropsToEventData)(n));},er=function(r){U.onNodeContextMenu(r,(0,C.convertNodePropsToEventData)(n));},ei=y.default.useMemo(function(){return!!(U.draggable&&(!U.draggable.nodeDraggable||U.draggable.nodeDraggable(F)));},[U.draggable,F]),ea=function(r){L||U.onNodeExpand(r,(0,C.convertNodePropsToEventData)(n));},eo=y.default.useMemo(function(){return!!(((0,A.default)(U.keyEntities,o)||{}).children||[]).length;},[U.keyEntities,o]),es=y.default.useMemo(function(){return!1!==v&&(v||!U.loadData&&!eo||U.loadData&&n.loaded&&!eo);},[v,U.loadData,eo,n.loaded]);y.default.useEffect(function(){L||"function"!=typeof U.loadData||!T||es||n.loaded||U.onNodeLoad((0,C.convertNodePropsToEventData)(n));},[L,U.loadData,U.onNodeLoad,T,es,n]);var el=y.default.useMemo(function(){var n;return null!==(n=U.draggable)&&void 0!==n&&n.icon?y.default.createElement("span",{className:"".concat(U.prefixCls,"-draggable-icon")},U.draggable.icon):null;},[U.draggable]),eu=function(r){var i=n.switcherIcon||U.switcherIcon;return"function"==typeof i?i((0,d.default)((0,d.default)({},n),{},{isLeaf:r})):i;},ec=y.default.useMemo(function(){if(!Y)return null;var r="boolean"!=typeof Y?Y:null;return y.default.createElement("span",{className:(0,b.default)("".concat(U.prefixCls,"-checkbox"),(0,c.default)((0,c.default)((0,c.default)({},"".concat(U.prefixCls,"-checkbox-checked"),k),"".concat(U.prefixCls,"-checkbox-indeterminate"),!k&&I),"".concat(U.prefixCls,"-checkbox-disabled"),$||n.disableCheckbox)),onClick:K,role:"checkbox","aria-checked":I?"mixed":k,"aria-disabled":$||n.disableCheckbox,"aria-label":"Select ".concat("string"==typeof n.title?n.title:"tree node")},r);},[Y,k,I,$,n.disableCheckbox,n.title]),ef=y.default.useMemo(function(){return es?null:T?M:R;},[es,T]),ed=y.default.useMemo(function(){return y.default.createElement("span",{className:(0,b.default)("".concat(U.prefixCls,"-iconEle"),"".concat(U.prefixCls,"-icon__").concat(ef||"docu"),(0,c.default)({},"".concat(U.prefixCls,"-icon_loading"),L))});},[U.prefixCls,ef,L]),eh=y.default.useMemo(function(){var r=!!U.draggable;return!n.disabled&&r&&U.dragOverNodeKey===o?U.dropIndicatorRender({dropPosition:U.dropPosition,dropLevelOffset:U.dropLevelOffset,indent:U.indent,prefixCls:U.prefixCls,direction:U.direction}):null;},[U.dropPosition,U.dropLevelOffset,U.indent,U.prefixCls,U.direction,U.draggable,U.dragOverNodeKey,U.dropIndicatorRender]),ep=y.default.useMemo(function(){var r,i,a=n.title,o=void 0===a?"---":a,s="".concat(U.prefixCls,"-node-content-wrapper");if(U.showIcon){var l=n.icon||U.icon;r=l?y.default.createElement("span",{className:(0,b.default)("".concat(U.prefixCls,"-iconEle"),"".concat(U.prefixCls,"-icon__customize"))},"function"==typeof l?l(n):l):ed;}else U.loadData&&L&&(r=ed);return i="function"==typeof o?o(F):U.titleRender?U.titleRender(F):o,y.default.createElement("span",{ref:G,title:"string"==typeof o?o:"",className:(0,b.default)(s,"".concat(s,"-").concat(ef||"normal"),(0,c.default)({},"".concat(U.prefixCls,"-node-selected"),!$&&(P||X))),onMouseEnter:et,onMouseLeave:en,onContextMenu:er,onClick:J,onDoubleClick:ee},r,y.default.createElement("span",{className:"".concat(U.prefixCls,"-title")},i),eh);},[U.prefixCls,U.showIcon,n,U.icon,ed,U.titleRender,F,ef,et,en,er,J,ee]),em=(0,E.default)(z,{aria:!0,data:!0}),eg=((0,A.default)(U.keyEntities,o)||{}).level,ev=x[x.length-1],ey=!$&&ei,e_=U.draggingNodeKey===o;return y.default.createElement("div",(0,l.default)({ref:N,role:"treeitem","aria-expanded":v?void 0:T,className:(0,b.default)(s,"".concat(U.prefixCls,"-treenode"),(a={},(0,c.default)((0,c.default)((0,c.default)((0,c.default)((0,c.default)((0,c.default)((0,c.default)((0,c.default)((0,c.default)((0,c.default)(a,"".concat(U.prefixCls,"-treenode-disabled"),$),"".concat(U.prefixCls,"-treenode-switcher-").concat(T?"open":"close"),!v),"".concat(U.prefixCls,"-treenode-checkbox-checked"),k),"".concat(U.prefixCls,"-treenode-checkbox-indeterminate"),I),"".concat(U.prefixCls,"-treenode-selected"),P),"".concat(U.prefixCls,"-treenode-loading"),L),"".concat(U.prefixCls,"-treenode-active"),D),"".concat(U.prefixCls,"-treenode-leaf-last"),ev),"".concat(U.prefixCls,"-treenode-draggable"),ei),"dragging",e_),(0,c.default)((0,c.default)((0,c.default)((0,c.default)((0,c.default)((0,c.default)((0,c.default)(a,"drop-target",U.dropTargetKey===o),"drop-container",U.dropContainerKey===o),"drag-over",!$&&f),"drag-over-gap-top",!$&&h),"drag-over-gap-bottom",!$&&m),"filter-node",null===(i=U.filterTreeNode)||void 0===i?void 0:i.call(U,(0,C.convertNodePropsToEventData)(n))),"".concat(U.prefixCls,"-treenode-leaf"),es))),style:u,draggable:ey,onDragStart:ey?function(r){r.stopPropagation(),q(!0),U.onNodeDragStart(r,n);try{r.dataTransfer.setData("text/plain","");}catch(n){}}:void 0,onDragEnter:ei?function(r){r.preventDefault(),r.stopPropagation(),U.onNodeDragEnter(r,n);}:void 0,onDragOver:ei?function(r){r.preventDefault(),r.stopPropagation(),U.onNodeDragOver(r,n);}:void 0,onDragLeave:ei?function(r){r.stopPropagation(),U.onNodeDragLeave(r,n);}:void 0,onDrop:ei?function(r){r.preventDefault(),r.stopPropagation(),q(!1),U.onNodeDrop(r,n);}:void 0,onDragEnd:ei?function(r){r.stopPropagation(),q(!1),U.onNodeDragEnd(r,n);}:void 0,onMouseMove:B},void 0!==j?{"aria-selected":!!j}:void 0,em),y.default.createElement(S,{prefixCls:U.prefixCls,level:eg,isStart:_,isEnd:x}),el,function(){if(es){var n=eu(!0);return!1!==n?y.default.createElement("span",{className:(0,b.default)("".concat(U.prefixCls,"-switcher"),"".concat(U.prefixCls,"-switcher-noop"))},n):null;}var r=eu(!1);return!1!==r?y.default.createElement("span",{onClick:ea,className:(0,b.default)("".concat(U.prefixCls,"-switcher"),"".concat(U.prefixCls,"-switcher_").concat(T?M:R))},r):null;}(),ec,ep);};P.isTreeNode=1;},20367225:function(n,r,i){var a=i("fc6080b6"),o=Object.prototype.hasOwnProperty;n.exports=function(n,r,i,s,l,u){var c=1&i,f=a(n),d=f.length;if(d!=a(r).length&&!c)return!1;for(var h=d;h--;){var p=f[h];if(!(c?p in r:o.call(r,p)))return!1;}var m=u.get(n),g=u.get(r);if(m&&g)return m==r&&g==n;var v=!0;u.set(n,r),u.set(r,n);for(var y=c;++h<d;){var _=n[p=f[h]],b=r[p];if(s)var x=c?s(b,_,p,r,n,u):s(_,b,p,n,r,u);if(!(void 0===x?_===b||l(_,b,i,s,u):x)){v=!1;break;}y||(y="constructor"==p);}if(v&&!y){var E=n.constructor,w=r.constructor;E!=w&&"constructor"in n&&"constructor"in r&&!("function"==typeof E&&E instanceof E&&"function"==typeof w&&w instanceof w)&&(v=!1);}return u.delete(n),u.delete(r),v;};},"20cb6955":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"ProFormListItem",{enumerable:!0,get:function(){return O;}});var a=i("777fffbe"),o=i("852bbaa9"),s=a._(i("a854094b")),l=a._(i("23934e00")),u=a._(i("9b84be4b")),c=a._(i("e4870cf0")),f=a._(i("ee64167d")),d=a._(i("613f75ca")),h=a._(i("a774639c")),p=a._(i("a788b59c")),m=a._(i("0790431f")),g=i("64681837"),v=a._(i("a5a99096")),y=a._(i("7376d2b3")),_=a._(i("064ecd09")),b=a._(i("f3efd1e9")),x=a._(i("dd8ccb36")),E=o._(i("609f48be")),w=i("11bba482"),S=i("a6284f72"),T=i("02a23b09"),A=i("dac8af92"),C=["creatorButtonProps","deleteIconProps","copyIconProps","itemContainerRender","itemRender","alwaysShowItemLabel","prefixCls","creatorRecord","action","actionGuard","children","actionRender","fields","meta","field","index","formInstance","originName","containerClassName","containerStyle","min","max","count"],O=function(n){n.creatorButtonProps;var r,i,a=n.deleteIconProps,o=n.copyIconProps,O=n.itemContainerRender,M=n.itemRender,R=n.alwaysShowItemLabel,P=n.prefixCls,k=(n.creatorRecord,n.action),I=(n.actionGuard,n.children),L=n.actionRender,N=n.fields,D=n.meta,F=n.field,B=n.index,j=n.formInstance,z=n.originName,U=n.containerClassName,V=n.containerStyle,G=n.min,H=n.max,W=n.count,X=(0,d.default)(n,C),q=(0,E.useContext)(g.ProProvider).hashId,$=((null===(r=v.default.useConfig)||void 0===r?void 0:r.call(v.default))||{componentSize:"middle"}).componentSize,Y=(0,E.useContext)(w.FormListContext),Z=(0,E.useRef)(!1),K=(0,E.useContext)(S.EditOrReadOnlyContext).mode,Q=(0,E.useState)(!1),J=(0,f.default)(Q,2),ee=J[0],et=J[1],en=(0,E.useState)(!1),er=(0,f.default)(en,2),ei=er[0],ea=er[1];(0,E.useEffect)(function(){return function(){Z.current=!0;};},[]);var eo=function(){return j.getFieldValue([Y.listName,z,null==B?void 0:B.toString()].flat(1).filter(function(n){return null!=n;}));},es={getCurrentRowData:eo,setCurrentRowData:function(n){var r,i=(null==j||null===(r=j.getFieldsValue)||void 0===r?void 0:r.call(j))||{},a=[Y.listName,z,null==B?void 0:B.toString()].flat(1).filter(function(n){return null!=n;}),o=(0,x.default)(i,a,(0,c.default)((0,c.default)({},eo()),n||{}));return j.setFieldsValue(o);}},el=(Array.isArray(I)?I:"function"==typeof I?[I]:(0,b.default)(I)).map(function(n){return"function"==typeof n?null==n?void 0:n(F,B,(0,c.default)((0,c.default)({},k),es),W):n;}).map(function(n,r){if(E.default.isValidElement(n)){var i;return E.default.cloneElement(n,(0,c.default)({key:n.key||(null==n||null===(i=n.props)||void 0===i?void 0:i.name)||r},(null==n?void 0:n.props)||{}));}return n;}),eu=(0,E.useMemo)(function(){if("read"===K||!1===o||H===W)return null;var n=o.Icon,r=void 0===n?h.default:n,i=o.tooltipText;return(0,A.jsx)(y.default,{title:i,children:ei?(0,A.jsx)(m.default,{}):(0,A.jsx)(r,{className:(0,_.default)("".concat(P,"-action-icon action-copy"),q),onClick:(0,u.default)((0,l.default)().mark(function n(){var r;return(0,l.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return ea(!0),r=null==j?void 0:j.getFieldValue([Y.listName,z,F.name].filter(function(n){return void 0!==n;}).flat(1)),n.next=4,k.add(r);case 4:ea(!1);case 5:case"end":return n.stop();}},n);}))})},"copy");},[o,H,W,ei,P,q,j,Y.listName,F.name,z,k]),ec=(0,E.useMemo)(function(){if("read"===K||!1===a||G===W)return null;var n=a.Icon,r=void 0===n?p.default:n,i=a.tooltipText;return(0,A.jsx)(y.default,{title:i,children:ee?(0,A.jsx)(m.default,{}):(0,A.jsx)(r,{className:(0,_.default)("".concat(P,"-action-icon action-remove"),q),onClick:(0,u.default)((0,l.default)().mark(function n(){return(0,l.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return et(!0),n.next=3,k.remove(F.name);case 3:Z.current||et(!1);case 4:case"end":return n.stop();}},n);}))})},"delete");},[a,G,W,ee,P,q,k,F.name]),ef=(0,E.useMemo)(function(){return[eu,ec].filter(function(n){return null!=n;});},[eu,ec]),ed=(null==L?void 0:L(F,k,ef,W))||ef,eh=ed.length>0&&"read"!==K?(0,A.jsx)("div",{className:(0,_.default)("".concat(P,"-action"),(0,s.default)({},"".concat(P,"-action-small"),"small"===$),q),children:ed}):null,ep={name:X.name,field:F,index:B,record:null==j||null===(i=j.getFieldValue)||void 0===i?void 0:i.call(j,[Y.listName,z,F.name].filter(function(n){return void 0!==n;}).flat(1)),fields:N,operation:k,meta:D},em=(0,T.useGridHelpers)().grid,eg=(null==O?void 0:O(el,ep))||el,ev=(null==M?void 0:M({listDom:(0,A.jsx)("div",{className:(0,_.default)("".concat(P,"-container"),U,q),style:(0,c.default)({width:em?"100%":void 0},V),children:eg}),action:eh},ep))||(0,A.jsxs)("div",{className:(0,_.default)("".concat(P,"-item"),q,(0,s.default)((0,s.default)({},"".concat(P,"-item-default"),void 0===R),"".concat(P,"-item-show-label"),R)),style:{display:"flex",alignItems:"flex-end"},children:[(0,A.jsx)("div",{className:(0,_.default)("".concat(P,"-container"),U,q),style:(0,c.default)({width:em?"100%":void 0},V),children:eg}),eh]});return(0,A.jsx)(w.FormListContext.Provider,{value:(0,c.default)((0,c.default)({},F),{},{listName:[Y.listName,z,F.name].filter(function(n){return void 0!==n;}).flat(1)}),children:ev});};},"20e31a38":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return E;},quantileIndex:function(){return w;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("63aba70a"),l=a._(s),u=i("cf1ac170"),c=a._(u),f=i("d8cea4a1"),d=a._(f),h=i("7b424aab"),p=a._(h),m=i("944abdfb");function g(n,r,i=0,a=1/0,o){if(r=Math.floor(r),i=Math.floor(Math.max(0,i)),a=Math.floor(Math.min(n.length-1,a)),!(i<=r&&r<=a))return n;for(o=void 0===o?m.ascendingDefined:(0,m.compareDefined)(o);a>i;){if(a-i>600){let s=a-i+1,l=r-i+1,u=Math.log(s),c=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1),d=Math.max(i,Math.floor(r-l*c/s+f)),h=Math.min(a,Math.floor(r+(s-l)*c/s+f));g(n,r,d,h,o);}let s=n[r],l=i,u=a;for(v(n,i,r),o(n[a],s)>0&&v(n,i,a);l<u;){for(v(n,l,u),++l,--u;0>o(n[l],s);)++l;for(;o(n[u],s)>0;)--u;}0===o(n[i],s)?v(n,i,u):v(n,++u,a),u<=r&&(i=u+1),r<=u&&(a=u-1);}return n;}function v(n,r,i){let a=n[r];n[r]=n[i],n[i]=a;}var y=i("5007e869"),_=o._(y),b=i("4f81a096"),x=a._(b);function E(n,r,i){if(!(!(a=(n=Float64Array.from((0,_.numbers)(n,i))).length)||isNaN(r=+r))){if(r<=0||a<2)return(0,d.default)(n);if(r>=1)return(0,l.default)(n);var a,o=(a-1)*r,s=Math.floor(o),u=(0,l.default)(g(n,s).subarray(0,s+1));return u+((0,d.default)(n.subarray(s+1))-u)*(o-s);}}function w(n,r,i=_.default){if(!isNaN(r=+r)){if(a=Float64Array.from(n,(r,a)=>(0,_.default)(i(n[a],a,n))),r<=0)return(0,p.default)(a);if(r>=1)return(0,c.default)(a);var a,o=Uint32Array.from(n,(n,r)=>r),s=a.length-1,l=Math.floor(s*r);return g(o,l,0,s,(n,r)=>(0,m.ascendingDefined)(a[n],a[r])),(l=function(n,r=x.default){let i;let a=!1;if(1===r.length){let o;for(let s of n){let n=r(s);(a?(0,x.default)(n,o)>0:0===(0,x.default)(n,n))&&(i=s,o=n,a=!0);}}else for(let o of n)(a?r(o,i)>0:0===r(o,o))&&(i=o,a=!0);return i;}(o.subarray(0,l+1),n=>a[n]))>=0?l:-1;}}},"21da3e32":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{TextTrianglation:function(){return M;},default:function(){return R;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("e4870cf0"),l=a._(s),u=i("9b84be4b"),c=a._(u),f=i("a854094b"),d=a._(f),h=i("553ee311"),p=i("9479dab9"),m=i("6654a076"),g=a._(m),v=i("da755037"),y=o._(v),_=i("26429605"),b=o._(_);class x{constructor(n,r,i){(0,d.default)(this,"boxCells",[]),(0,d.default)(this,"xCellCount",void 0),(0,d.default)(this,"yCellCount",void 0),(0,d.default)(this,"boxKeys",void 0),(0,d.default)(this,"bboxes",void 0),(0,d.default)(this,"width",void 0),(0,d.default)(this,"height",void 0),(0,d.default)(this,"xScale",void 0),(0,d.default)(this,"yScale",void 0),(0,d.default)(this,"boxUid",void 0);let a=this.boxCells;this.xCellCount=Math.ceil(n/i),this.yCellCount=Math.ceil(r/i);for(let n=0;n<this.xCellCount*this.yCellCount;n++)a.push([]);this.boxKeys=[],this.bboxes=[],this.width=n,this.height=r,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/r,this.boxUid=0;}insert(n,r,i,a,o){this.forEachCell(r,i,a,o,this.insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(r),this.bboxes.push(i),this.bboxes.push(a),this.bboxes.push(o);}query(n,r,i,a,o){return this.queryHitTest(n,r,i,a,!1,o);}hitTest(n,r,i,a,o){return this.queryHitTest(n,r,i,a,!0,o);}insertBoxCell(n,r,i,a,o,s){this.boxCells[o].push(s);}queryHitTest(n,r,i,a,o,s){if(i<0||n>this.width||a<0||r>this.height)return!o&&[];let l=[];if(n<=0&&r<=0&&this.width<=i&&this.height<=a){if(o)return!0;for(let n=0;n<this.boxKeys.length;n++)l.push({key:this.boxKeys[n],x1:this.bboxes[4*n],y1:this.bboxes[4*n+1],x2:this.bboxes[4*n+2],y2:this.bboxes[4*n+3]});return s?l.filter(s):l;}return this.forEachCell(n,r,i,a,this.queryCell,l,{hitTest:o,seenUids:{box:{},circle:{}}},s),o?l.length>0:l;}queryCell(n,r,i,a,o,s,l,u){let c=l.seenUids,f=this.boxCells[o];if(null!==f){let o=this.bboxes;for(let d of f)if(!c.box[d]){c.box[d]=!0;let f=4*d;if(n<=o[f+2]&&r<=o[f+3]&&i>=o[f+0]&&a>=o[f+1]&&(!u||u(this.boxKeys[d]))){if(l.hitTest)return s.push(!0),!0;s.push({key:this.boxKeys[d],x1:o[f],y1:o[f+1],x2:o[f+2],y2:o[f+3]});}}}return!1;}forEachCell(n,r,i,a,o,s,l,u){let c=this.convertToXCellCoord(n),f=this.convertToYCellCoord(r),d=this.convertToXCellCoord(i),h=this.convertToYCellCoord(a);for(let p=c;p<=d;p++)for(let c=f;c<=h;c++){let f=this.xCellCount*c+p;if(o.call(this,n,r,i,a,f,s,l,u))return;}}convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)));}convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)));}}class E{constructor(n,r){(0,d.default)(this,"width",void 0),(0,d.default)(this,"height",void 0),(0,d.default)(this,"grid",void 0),(0,d.default)(this,"viewportPadding",100),(0,d.default)(this,"screenRightBoundary",void 0),(0,d.default)(this,"screenBottomBoundary",void 0),(0,d.default)(this,"gridRightBoundary",void 0),(0,d.default)(this,"gridBottomBoundary",void 0),this.width=n,this.height=r,this.viewportPadding=Math.max(n,r),this.grid=new x(n+this.viewportPadding,r+this.viewportPadding,25),this.screenRightBoundary=n+this.viewportPadding,this.screenBottomBoundary=r+this.viewportPadding,this.gridRightBoundary=n+2*this.viewportPadding,this.gridBottomBoundary=r+2*this.viewportPadding;}placeCollisionBox(n){let r=n.x1+n.anchorPointX+this.viewportPadding,i=n.y1+n.anchorPointY+this.viewportPadding,a=n.x2+n.anchorPointX+this.viewportPadding,o=n.y2+n.anchorPointY+this.viewportPadding;return!this.isInsideGrid(r,i,a,o)||this.grid.hitTest(r,i,a,o)?{box:[]}:{box:[r,i,a,o]};}insertCollisionBox(n,r){this.grid.insert({featureIndex:r},n[0],n[1],n[2],n[3]);}project(n,r,i){let a=b.fromValues(r,i,0,1),o=b.create(),s=y.fromValues(...n);return b.transformMat4(o,a,s),{x:(o[0]/o[3]+1)/2*this.width+this.viewportPadding,y:(-o[1]/o[3]+1)/2*this.height+this.viewportPadding};}isInsideGrid(n,r,i,a){return i>=0&&n<this.gridRightBoundary&&a>=0&&r<this.gridBottomBoundary;}}function w(n){let r=.5,i=.5;switch(n){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0;break;default:r=.5;}switch(n){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0;break;default:i=.5;}return{horizontalAlign:r,verticalAlign:i};}function S(n,r,i,a,o){if(!o)return;let s=n[a],l=s.glyph;if(l){let u=r[l].advance*s.scale,c=(n[a].x+u)*o;for(let r=i;r<=a;r++)n[r].x-=c;}}function T(n,r,i,a,o,s,l){let u=(r-i)*o,c=(-a*l+.5)*s;for(let r of n)r.x+=u,r.y+=c;}let A='#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105\n#define FONT_SIZE 48.0\n\nuniform sampler2D u_sdf_map;\nlayout(std140) uniform commonUniforms {\n  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];\n  vec2 u_sdf_map_size;\n  float u_raisingHeight: 0.0;\n  float u_stroke_width : 2;\n  float u_gamma_scale : 0.5;\n  float u_halo_blur : 0.5;\n};\n\nin vec2 v_uv;\nin float v_gamma_scale;\nin vec4 v_color;\nin vec4 v_stroke_color;\nin float v_fontScale;\n\nout vec4 outputColor;\n\n#pragma include "picking"\nvoid main() {\n  // get style data mapping\n\n  // get sdf from atlas\n  float dist = texture(SAMPLER_2D(u_sdf_map), v_uv).a;\n\n  lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;\n  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;\n\n  highp float gamma_scaled = gamma * v_gamma_scale;\n\n  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n  outputColor = mix(v_color, v_stroke_color, smoothstep(0., 0.5, 1.- dist));\n\n  outputColor.a *= alpha;\n   // \u4F5C\u4E3A mask \u6A21\u677F\u65F6\u9700\u8981\u4E22\u5F03\u900F\u660E\u7684\u50CF\u7D20\n  if (outputColor.a < 0.01) {\n    discard;\n  }\n  outputColor = filterColor(outputColor);\n}\n',C='#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105\n#define FONT_SIZE 24.0\n\nlayout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;\nlayout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;\nlayout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;\nlayout(location = ATTRIBUTE_LOCATION_TEXT_OFFSETS) in vec2 a_textOffsets;\nlayout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_tex;\n\nlayout(std140) uniform commonUniforms {\n  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];\n  vec2 u_sdf_map_size;\n  float u_raisingHeight: 0.0;\n  float u_stroke_width : 2;\n  float u_gamma_scale : 0.5;\n  float u_halo_blur : 0.5;\n};\n\nout vec2 v_uv;\nout float v_gamma_scale;\nout vec4 v_color;\nout vec4 v_stroke_color;\nout float v_fontScale;\n\n#pragma include "projection"\n#pragma include "picking"\n#pragma include "rotation_2d"\n\nvoid main() {\n  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97\n\n  v_uv = a_tex / u_sdf_map_size;\n\n\n\n  v_color = vec4(a_Color.xyz, a_Color.w * opacity);\n  v_stroke_color = vec4(u_stroke_color.xyz, u_stroke_color.w * opacity);\n\n  // \u6587\u672C\u7F29\u653E\u6BD4\u4F8B\n  float fontScale = a_Size / FONT_SIZE;\n  v_fontScale = fontScale;\n\n  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);\n  // vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  vec2 offset = rotate_matrix(a_textOffsets,rotation);\n\n  // gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);\n\n  float raiseHeight = u_raisingHeight;\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n    raiseHeight = u_raisingHeight * mapboxZoomScale;\n  }\n\n  vec4 projected_position = project_common_position_to_clipspace(vec4(project_pos.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));\n\n  gl_Position = vec4(\n    projected_position.xy / projected_position.w + offset * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);\n  v_gamma_scale = gl_Position.w;\n  setPickingColor(a_PickingColor);\n\n}\n',{isEqual:O}=p.lodashUtil;function M(n){let r=n.id,i=[],a=[];if(!this.glyphInfoMap||!this.glyphInfoMap[r])return{vertices:[],indices:[],size:7};let o=this.glyphInfoMap[r].centroid,s=2===o.length?[o[0],o[1],0]:o;return this.glyphInfoMap[r].glyphQuads.forEach((n,r)=>{i.push(...s,n.tex.x,n.tex.y+n.tex.height,n.tl.x,n.tl.y,...s,n.tex.x+n.tex.width,n.tex.y+n.tex.height,n.tr.x,n.tr.y,...s,n.tex.x+n.tex.width,n.tex.y,n.br.x,n.br.y,...s,n.tex.x,n.tex.y,n.bl.x,n.bl.y),a.push(0+4*r,1+4*r,2+4*r,2+4*r,3+4*r,0+4*r);}),{vertices:i,indices:a,size:7};}class R extends g.default{constructor(...n){var r;super(...n),r=this,(0,d.default)(this,"glyphInfo",void 0),(0,d.default)(this,"glyphInfoMap",{}),(0,d.default)(this,"rawEncodeData",void 0),(0,d.default)(this,"texture",void 0),(0,d.default)(this,"currentZoom",-1),(0,d.default)(this,"extent",void 0),(0,d.default)(this,"textureHeight",0),(0,d.default)(this,"textCount",0),(0,d.default)(this,"preTextStyle",{}),(0,d.default)(this,"mapping",(0,c.default)(function*(){r.initGlyph(),r.updateTexture(),yield r.reBuildModel();}));}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,TEXT_OFFSETS:10,UV:11});}getUninforms(){let n=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,l.default)((0,l.default)((0,l.default)({},n.uniformsOption),r.uniformsOption),{u_sdf_map:this.textures[0]});}getCommonUniformsInfo(){let{stroke:n="#fff",strokeWidth:r=0,halo:i=.5,gamma:a=2,raisingHeight:o=0}=this.layer.getLayerConfig(),s=this.getFontServiceMapping(),l=this.getFontServiceCanvas();s&&Object.keys(s).length!==this.textCount&&l&&(this.updateTexture(),this.textCount=Object.keys(s).length),this.preTextStyle=this.getTextStyle();let u={u_stroke_color:(0,p.rgb2arr)(n),u_sdf_map_size:[(null==l?void 0:l.width)||1,(null==l?void 0:l.height)||1],u_raisingHeight:Number(o),u_stroke_width:r,u_gamma_scale:a,u_halo_blur:i};return this.getUniformsBufferInfo(u);}initModels(){var n=this;return(0,c.default)(function*(){return n.bindEvent(),n.extent=n.textExtent(),n.rawEncodeData=n.layer.getEncodedData(),n.preTextStyle=n.getTextStyle(),n.initUniformsBuffer(),n.buildModels();})();}buildModels(){var n=this;return(0,c.default)(function*(){let{textAllowOverlap:r=!1}=n.layer.getLayerConfig();return n.initGlyph(),n.updateTexture(),r||n.filterGlyphs(),[(yield n.layer.buildLayerModel({moduleName:"pointText",vertexShader:C,fragmentShader:A,defines:n.getDefines(),inject:n.getInject(),triangulation:M.bind(n),depth:{enable:!1}}))];})();}needUpdate(){var n=this;return(0,c.default)(function*(){let{textAllowOverlap:r=!1,textAnchor:i="center",textOffset:a,padding:o,fontFamily:s,fontWeight:l}=n.getTextStyle();if(!O(o,n.preTextStyle.padding)||!O(a,n.preTextStyle.textOffset)||!O(i,n.preTextStyle.textAnchor)||!O(s,n.preTextStyle.fontFamily)||!O(l,n.preTextStyle.fontWeight))return yield n.mapping(),!0;if(r)return!1;let u=n.mapService.getZoom(),c=n.mapService.getBounds(),f=(0,p.boundsContains)(n.extent,c);return(Math.abs(n.currentZoom-u)>.5||!f||r!==n.preTextStyle.textAllowOverlap)&&(yield n.reBuildModel(),!0);})();}clearModels(){var n;null===(n=this.texture)||void 0===n||n.destroy(),this.layer.off("remapping",this.mapping);}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:h.AttributeType.Attribute,descriptor:{shaderLocation:this.attributeLocation.TEXT_OFFSETS,name:"a_textOffsets",buffer:{usage:h.gl.STATIC_DRAW,data:[],type:h.gl.FLOAT},size:2,update:(n,r,i)=>[i[5],i[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:h.AttributeType.Attribute,descriptor:{name:"a_tex",shaderLocation:this.attributeLocation.UV,buffer:{usage:h.gl.DYNAMIC_DRAW,data:[],type:h.gl.FLOAT},size:2,update:(n,r,i)=>[i[3],i[4]]}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:h.AttributeType.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:h.gl.DYNAMIC_DRAW,data:[],type:h.gl.FLOAT},size:1,update:n=>{let{size:r=12}=n;return Array.isArray(r)?[r[0]]:[r];}}});}bindEvent(){this.layer.isTileLayer||this.layer.on("remapping",this.mapping);}textExtent(){let n=this.mapService.getBounds();return(0,p.padBounds)(n,.5);}initTextFont(){let{fontWeight:n,fontFamily:r}=this.getTextStyle(),i=this.rawEncodeData,a=[];i.forEach(n=>{let{shape:r=""}=n;for(let n of r=r.toString())-1===a.indexOf(n)&&a.push(n);}),this.fontService.setFontOptions({characterSet:a,fontWeight:n,fontFamily:r,iconfont:!1});}initIconFontTex(){let{fontWeight:n,fontFamily:r}=this.getTextStyle(),i=this.rawEncodeData,a=[];i.forEach(n=>{let{shape:r=""}=n;r=`${r}`,-1===a.indexOf(r)&&a.push(r);}),this.fontService.setFontOptions({characterSet:a,fontWeight:n,fontFamily:r,iconfont:!0});}getTextStyle(){let{fontWeight:n="400",fontFamily:r="sans-serif",textAllowOverlap:i=!1,padding:a=[0,0],textAnchor:o="center",textOffset:s=[0,0],opacity:l=1,strokeOpacity:u=1,strokeWidth:c=0,stroke:f="#000"}=this.layer.getLayerConfig();return{fontWeight:n,fontFamily:r,textAllowOverlap:i,padding:a,textAnchor:o,textOffset:s,opacity:l,strokeOpacity:u,strokeWidth:c,stroke:f};}generateGlyphLayout(n){let r=this.getFontServiceMapping(),{spacing:i=2,textAnchor:a="center",textOffset:o}=this.layer.getLayerConfig(),s=this.rawEncodeData;this.glyphInfo=s.map(s=>{let{shape:l="",id:u,size:c=1}=s,f=s.textOffset?s.textOffset:o||[0,0],d=s.textAnchor?s.textAnchor:a||"center",h=function(n,r,i,a,o,s,l=[0,0],u){let c=n.split("\n"),f=[],d={positionedGlyphs:f,top:l[1],bottom:l[1],left:l[0],right:l[0],lineCount:c.length,text:n};return u?function(n,r,i,a,o,s,l){let u=0,c=-8,f=0,d=n.positionedGlyphs,h="right"===s?1:"left"===s?0:.5,p=d.length;i.forEach(n=>{let i=r[n];i&&(d.push({glyph:n,x:i.advance/2,y:c+0,vertical:!1,scale:1,metrics:i}),u+=i.advance+l),d.length!==p&&(f=Math.max(u-l,f),S(d,r,p,d.length-1,h)),u=0,c-=a+5;});let{horizontalAlign:m,verticalAlign:g}=w(o);T(d,h,m,g,f,a,i.length);let v=c- -8;n.top+=-g*v,n.bottom=n.top-v,n.left+=-m*f,n.right=n.left+f;}(d,r,c,i,a,o,s):function(n,r,i,a,o,s,l){let u=0,c=-8,f=0,d=n.positionedGlyphs,h="right"===s?1:"left"===s?0:.5,p=d.length;i.forEach(n=>{n.split("").forEach(n=>{let i=r[n];i&&(d.push({glyph:n,x:u,y:c+0,vertical:!1,scale:1,metrics:i}),u+=i.advance+l);}),d.length!==p&&(f=Math.max(u-l,f),S(d,r,p,d.length-1,h)),u=0,c-=a+5;});let{horizontalAlign:m,verticalAlign:g}=w(o);T(d,h,m,g,f,a,i.length);let v=c- -8;n.top+=-g*v,n.bottom=n.top-v,n.left+=-m*f,n.right=n.left+f;}(d,r,c,i,a,o,s),!!f.length&&d;}(l.toString(),r,c,d,"left",i,f,n),m=function(n,r=[0,0],i){let{positionedGlyphs:a=[]}=n,o=[];for(let n of a){let a=n.metrics,s=a.advance*n.scale/2,l=i?[n.x+s,n.y]:[0,0],u=i?[0,0]:[n.x+s+r[0],n.y+r[1]],c=-4*n.scale-s+u[0],f=-4*n.scale+u[1],d=c+a.width*n.scale,h=f+a.height*n.scale,p={x:c,y:f},m={x:d,y:f},g={x:c,y:h},v={x:d,y:h};o.push({tl:p,tr:m,bl:g,br:v,tex:a,glyphOffset:l});}return o;}(h,f,!1);return s.shaping=h,s.glyphQuads=m,s.centroid=(0,p.calculateCentroid)(s.coordinates),this.glyphInfoMap[u]={shaping:h,glyphQuads:m,centroid:(0,p.calculateCentroid)(s.coordinates)},s;});}getFontServiceMapping(){let{fontWeight:n="400",fontFamily:r="sans-serif"}=this.layer.getLayerConfig();return this.fontService.getMappingByKey(`${r}_${n}`);}getFontServiceCanvas(){let{fontWeight:n="400",fontFamily:r="sans-serif"}=this.layer.getLayerConfig();return this.fontService.getCanvasByKey(`${r}_${n}`);}filterGlyphs(){let{padding:n=[0,0],textAllowOverlap:r=!1}=this.layer.getLayerConfig();if(r)return;this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();let{width:i,height:a}=this.rendererService.getViewportSize(),o=new E(i,a);this.glyphInfo.filter(r=>{let{shaping:i,id:a=0}=r,s=r.centroid,l=r.size/16,u=this.mapService.lngLatToContainer(s),{box:c}=o.placeCollisionBox({x1:i.left*l-n[0],x2:i.right*l+n[0],y1:i.top*l-n[1],y2:i.bottom*l+n[1],anchorPointX:u.x,anchorPointY:u.y});return!!c&&!!c.length&&(o.insertCollisionBox(c,a),!0);}).forEach(n=>{this.glyphInfoMap[n.id]=n;});}initGlyph(){let{iconfont:n=!1}=this.layer.getLayerConfig();n?this.initIconFontTex():this.initTextFont(),this.generateGlyphLayout(n);}updateTexture(){let{createTexture2D:n}=this.rendererService,r=this.getFontServiceCanvas();this.textureHeight=r.height,this.texture&&this.texture.destroy(),this.texture=n({data:r,mag:h.gl.LINEAR,min:h.gl.LINEAR,width:r.width,height:r.height}),this.textures=[this.texture];}reBuildModel(){var n=this;return(0,c.default)(function*(){n.filterGlyphs();let r=yield n.layer.buildLayerModel({moduleName:"pointText",vertexShader:C,fragmentShader:A,triangulation:M.bind(n),defines:n.getDefines(),inject:n.getInject(),depth:{enable:!1}});n.layer.models=[r];})();}}},"2247dc85":function(n,r,i){"use strict";var a=i("f5a08f97").default,o=i("89a0cb41").default;Object.defineProperty(r,"__esModule",{value:!0}),r.generate=function n(r,i,a){return a?h.default.createElement(r.tag,(0,s.default)((0,s.default)({key:i},m(r.attrs)),a),(r.children||[]).map(function(a,o){return n(a,"".concat(i,"-").concat(r.tag,"-").concat(o));})):h.default.createElement(r.tag,(0,s.default)({key:i},m(r.attrs)),(r.children||[]).map(function(a,o){return n(a,"".concat(i,"-").concat(r.tag,"-").concat(o));}));},r.getSecondaryColor=function(n){return(0,u.generate)(n)[0];},r.iconStyles=void 0,r.isIconDefinition=function(n){return"object"===(0,l.default)(n)&&"string"==typeof n.name&&"string"==typeof n.theme&&("object"===(0,l.default)(n.icon)||"function"==typeof n.icon);},r.normalizeAttrs=m,r.normalizeTwoToneColors=function(n){return n?Array.isArray(n)?n:[n]:[];},r.useInsertStyles=r.svgBaseProps=void 0,r.warning=function(n,r){(0,d.default)(n,"[@ant-design/icons] ".concat(r));};var s=o(i("3bbc6f6c")),l=o(i("d03c096f")),u=i("0d7b2f56"),c=i("0c2b9405"),f=i("a2d16fe8"),d=o(i("80a41602")),h=a(i("609f48be")),p=o(i("7c9399ac"));function m(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(n).reduce(function(r,i){var a=n[i];return"class"===i?(r.className=a,delete r.class):(delete r[i],r[i.replace(/-(.)/g,function(n,r){return r.toUpperCase();})]=a),r;},{});}r.svgBaseProps={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"};var g=r.iconStyles="\n.anticon {\n  display: inline-flex;\n  align-items: center;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n";r.useInsertStyles=function(n){var r=(0,h.useContext)(p.default),i=r.csp,a=r.prefixCls,o=r.layer,s=g;a&&(s=s.replace(/anticon/g,a)),o&&(s="@layer ".concat(o," {\n").concat(s,"\n}")),(0,h.useEffect)(function(){var r=n.current,a=(0,f.getShadowRoot)(r);(0,c.updateCSS)(s,"@ant-design-icons",{prepend:!o,csp:i,attachTo:a});},[]);};},22702128:function(n,r,i){var a=i("c565fed6"),o=i("08f49370");n.exports=function(n,r){return null!=n&&o(n,r,a);};},"22aea40b":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{computedExpandedClassName:function(){return d;},findAllChildrenKeys:function(){return f;},renderExpandIcon:function(){return c;}});var a=i("777fffbe"),o=i("852bbaa9"),s=a._(i("a854094b")),l=o._(i("609f48be")),u=a._(i("064ecd09"));function c(n){var r=n.prefixCls,i=n.record,a=n.onExpand,o=n.expanded,c=n.expandable,f="".concat(r,"-row-expand-icon");return c?l.createElement("span",{className:(0,u.default)(f,(0,s.default)((0,s.default)({},"".concat(r,"-row-expanded"),o),"".concat(r,"-row-collapsed"),!o)),onClick:function(n){a(i,n),n.stopPropagation();}}):l.createElement("span",{className:(0,u.default)(f,"".concat(r,"-row-spaced"))});}function f(n,r,i){var a=[];return!function n(o){(o||[]).forEach(function(o,s){a.push(r(o,s)),n(o[i]);});}(n),a;}function d(n,r,i,a){return"string"==typeof n?n:"function"==typeof n?n(r,i,a):"";}},"22e5bac1":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return h;}});var a=i("777fffbe"),o=a._(i("e4870cf0"));i("a3273044");var s=i("64681837"),l=a._(i("38ab0c18")),u=a._(i("f34e933b")),c=a._(i("ddaa0afd")),f=i("609f48be"),d=i("dac8af92"),h=function(n){var r=(0,s.useIntl)(),i=u.default.useFormInstance();if(!1===n.render)return null;var a=n.onSubmit,h=n.render,p=n.onReset,m=n.searchConfig,g=void 0===m?{}:m,v=n.submitButtonProps,y=n.resetButtonProps,_=s.proTheme.useToken().token,b=function(){i.submit(),null==a||a();},x=function(){i.resetFields(),null==p||p();},E=g.submitText,w=void 0===E?r.getMessage("tableForm.submit","\u63D0\u4EA4"):E,S=g.resetText,T=void 0===S?r.getMessage("tableForm.reset","\u91CD\u7F6E"):S,A=[];!1!==y&&A.push((0,f.createElement)(l.default,(0,o.default)((0,o.default)({},(0,c.default)(null!=y?y:{},["preventDefault"])),{},{key:"rest",onClick:function(n){var r;null!=y&&y.preventDefault||x(),null==y||null===(r=y.onClick)||void 0===r||r.call(y,n);}}),T)),!1!==v&&A.push((0,f.createElement)(l.default,(0,o.default)((0,o.default)({type:"primary"},(0,c.default)(v||{},["preventDefault"])),{},{key:"submit",onClick:function(n){var r;null!=v&&v.preventDefault||b(),null==v||null===(r=v.onClick)||void 0===r||r.call(v,n);}}),w));var C=h?h((0,o.default)((0,o.default)({},n),{},{form:i,submit:b,reset:x}),A):A;return C?Array.isArray(C)?(null==C?void 0:C.length)<1?null:(null==C?void 0:C.length)===1?C[0]:(0,d.jsx)("div",{style:{display:"flex",gap:_.marginXS,alignItems:"center"},children:C}):C:null;};},"23b4cb91":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{getTileFactory:function(){return z;}});var a=i("777fffbe"),o=i("553ee311"),s=i("9b84be4b"),l=a._(s),u=i("6f3d386c"),c=a._(u),f=i("1c0d7fd1"),d=a._(f),h=i("e4870cf0"),p=a._(h),m=i("a854094b"),g=a._(m),v=i("cf4f8679"),y=i("04fd6645"),_=a._(y);class b extends v.EventEmitter{constructor(n,r){super(),(0,g.default)(this,"x",void 0),(0,g.default)(this,"y",void 0),(0,g.default)(this,"z",void 0),(0,g.default)(this,"key",void 0),(0,g.default)(this,"parent",void 0),(0,g.default)(this,"sourceTile",void 0),(0,g.default)(this,"visible",!0),(0,g.default)(this,"layers",[]),(0,g.default)(this,"isLoaded",!1),(0,g.default)(this,"tileMaskLayers",[]),(0,g.default)(this,"tileMask",void 0),this.parent=r,this.sourceTile=n,this.x=n.x,this.y=n.y,this.z=n.z,this.key=`${this.x}_${this.y}_${this.z}`;}getLayers(){return this.layers;}styleUpdate(...n){}lnglatInBounds(n){let[r,i,a,o]=this.sourceTile.bounds,{lng:s,lat:l}=n;return s>=r&&s<=a&&l>=i&&l<=o;}getLayerOptions(){var n;let r=this.parent.getLayerConfig();return(0,p.default)((0,p.default)({},r),{},{textAllowOverlap:!0,autoFit:!1,maskLayers:this.getMaskLayer(),tileMask:-1!==["PolygonLayer","LineLayer"].indexOf(this.parent.type),mask:r.mask||(null===(n=r.maskLayers)||void 0===n?void 0:n.length)!==0&&r.enableMask});}getMaskLayer(){let{maskLayers:n}=this.parent.getLayerConfig(),r=[];return null==n||n.forEach(n=>{if(!n.tileLayer)return r.push(n),n;let i=n.tileLayer.getTile(this.sourceTile.key),a=null==i?void 0:i.getLayers()[0];a&&r.push(a);}),r;}addTileMask(){var n=this;return(0,l.default)(function*(){let r=new _.default({name:"mask",visible:!0,enablePicking:!1}).source({type:"FeatureCollection",features:[n.sourceTile.bboxPolygon]},{parser:{type:"geojson",featureId:"id"}}).shape("fill").color("#0f0").style({opacity:.5}),i=(0,o.createLayerContainer)(n.parent.container);r.setContainer(i),yield r.init(),n.tileMask=r;let a=n.getMainLayer();return void 0!==a&&(a.tileMask=r),r;})();}addMask(n,r){var i=this;return(0,l.default)(function*(){let a=(0,o.createLayerContainer)(i.parent.container);r.setContainer(a),yield r.init(),n.addMask(r),i.tileMaskLayers.push(r);})();}addLayer(n){var r=this;return(0,l.default)(function*(){n.isTileLayer=!0;let i=(0,o.createLayerContainer)(r.parent.container);n.setContainer(i),r.layers.push(n),yield n.init();})();}updateVisible(n){this.visible=n,this.updateOptions("visible",n);}updateOptions(n,r){this.layers.forEach(i=>{i.updateLayerConfig({[n]:r});});}getMainLayer(){return this.layers[0];}getFeatures(n){return[];}getFeatureById(n){return[];}destroy(){var n;null===(n=this.tileMask)||void 0===n||n.destroy(),this.layers.forEach(n=>n.destroy());}}class x extends b{initTileLayer(){var n=this;return(0,l.default)(function*(){let r=n.getSourceOption(),i=r.data.features[0].properties,a=new c.default().source(r.data,r.options).size(1).shape("line").color("red"),o=new d.default({minZoom:n.z-1,maxZoom:n.z+1,textAllowOverlap:!0}).source([i],{parser:{type:"json",x:"x",y:"y"}}).size(20).color("red").shape(n.key).style({stroke:"#fff",strokeWidth:2});yield n.addLayer(a),yield n.addLayer(o),n.isLoaded=!0;})();}getSourceOption(){let n=this.parent.getSource();return{data:{type:"FeatureCollection",features:this.sourceTile.data.layers.testTile.features},options:{parser:{type:"geojson"},transforms:n.transforms}};}}var E=i("f653f760"),w=a._(E);class S extends b{initTileLayer(){var n=this;return(0,l.default)(function*(){let r=n.parent.getLayerAttributeConfig(),i=n.getLayerOptions(),a=n.getSourceOption(),o=new w.default((0,p.default)({},i)).source(a.data,a.options);r&&Object.keys(r).forEach(n=>{var i,a;o[n](null===(i=r[n])||void 0===i?void 0:i.field,null===(a=r[n])||void 0===a?void 0:a.values);}),yield n.addLayer(o),n.isLoaded=!0;})();}getSourceOption(){let n=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:n.transforms}};}}var T=i("7d31d91a"),A=a._(T);class C extends b{initTileLayer(){var n=this;return(0,l.default)(function*(){let r=n.parent.getLayerAttributeConfig(),i=n.getLayerOptions(),a=n.getSourceOption(),o=new A.default((0,p.default)({},i)).source(a.data,a.options);r&&Object.keys(r).forEach(n=>{var i,a;o[n](null===(i=r[n])||void 0===i?void 0:i.field,null===(a=r[n])||void 0===a?void 0:a.values);}),yield n.addLayer(o),n.isLoaded=!0;})();}getFeatures(n){return n?this.sourceTile.data.getTileData(n):[];}getSourceOption(){let n=this.parent.getSource(),{sourceLayer:r,featureId:i}=this.parent.getLayerConfig();return{data:{type:"FeatureCollection",features:this.getFeatures(r)},options:{parser:{type:"geojson",featureId:i},transforms:n.transforms}};}}var O=i("613f75ca"),M=a._(O),R=i("d105ec89"),P=a._(R);let k=["rasterData"];class I extends b{initTileLayer(){var n=this;return(0,l.default)(function*(){let r=n.parent.getLayerAttributeConfig(),i=n.getLayerOptions(),a=n.getSourceOption(),o=new P.default((0,p.default)({},i)).source(a.data,a.options);r&&Object.keys(r).forEach(n=>{var i,a;o[n](null===(i=r[n])||void 0===i?void 0:i.field,null===(a=r[n])||void 0===a?void 0:a.values);}),yield n.addLayer(o),n.isLoaded=!0;})();}getSourceOption(){let n=this.parent.getSource(),r=this.sourceTile.data.data,{rasterData:i}=r,a=(0,M.default)(r,k);return{data:i,options:{parser:(0,p.default)({type:"rasterRgb",extent:this.sourceTile.bounds},a),transforms:n.transforms}};}}class L extends b{initTileLayer(){var n=this;return(0,l.default)(function*(){let r=n.parent.getLayerAttributeConfig(),i=n.getLayerOptions(),a=n.getSourceOption(),o=new P.default((0,p.default)({},i)).source(a.data,a.options);r&&Object.keys(r).forEach(n=>{var i,a;o[n](null===(i=r[n])||void 0===i?void 0:i.field,null===(a=r[n])||void 0===a?void 0:a.values);}),yield n.addLayer(o),n.isLoaded=!0;})();}getSourceOption(){let n=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:n.transforms}};}}var N=i("9479dab9");let D=["rasterData"],F={positions:[0,1],colors:["#000","#fff"]};class B extends b{constructor(...n){super(...n),(0,g.default)(this,"colorTexture",void 0);}initTileLayer(){var n=this;return(0,l.default)(function*(){let r=n.parent.getLayerAttributeConfig(),i=n.getLayerOptions(),a=n.getSourceOption(),{rampColors:o,domain:s}=n.getLayerOptions();n.colorTexture=n.parent.textureService.getColorTexture(o,s);let l=new P.default((0,p.default)((0,p.default)({},i),{},{colorTexture:n.colorTexture})).source(a.data,a.options);r&&Object.keys(r).forEach(n=>{var i,a;l[n](null===(i=r[n])||void 0===i?void 0:i.field,null===(a=r[n])||void 0===a?void 0:a.values);}),yield n.addLayer(l),n.isLoaded=!0;})();}getSourceOption(){let n=this.parent.getSource(),r=this.sourceTile.data.data,{rasterData:i}=r,a=(0,M.default)(r,D);return{data:i,options:{parser:(0,p.default)({type:"raster",extent:this.sourceTile.bounds},a),transforms:n.transforms}};}styleUpdate(...n){let{rampColors:r=F,domain:i}=n;this.colorTexture=this.parent.textureService.getColorTexture(r,i||(0,N.getDefaultDomain)(r)),this.layers.forEach(n=>n.style({colorTexture:this.colorTexture}));}destroy(){this.layers.forEach(n=>n.destroy());}}class j extends b{initTileLayer(){var n=this;return(0,l.default)(function*(){var r;let i=n.parent.getLayerAttributeConfig(),a=n.getLayerOptions(),o="PolygonLayer"===(r=n.parent.type)?_.default:"LineLayer"===r?c.default:d.default,s=n.getSourceOption();if(!s){n.isLoaded=!0,n.emit("loaded");return;}let l=new o((0,p.default)({},a)).source(s.data,s.options);Object.keys(i).forEach(n=>{var r,a;l[n](null===(r=i[n])||void 0===r?void 0:r.field,null===(a=i[n])||void 0===a?void 0:a.values);}),yield n.addLayer(l),a.tileMask&&(yield n.addTileMask()),n.setLayerMinMaxZoom(l),n.isLoaded=!0,n.emit("loaded");})();}getSourceOption(){let n=this.parent.getSource(),{sourceLayer:r="defaultLayer",featureId:i="id"}=this.parent.getLayerConfig();return{data:{type:"FeatureCollection",features:this.getFeatures(r)},options:{parser:{type:"geojson",featureId:i},transforms:n.transforms}};}setLayerMinMaxZoom(n){"text"===n.getModelType()&&n.updateLayerConfig({maxZoom:this.z+1,minZoom:this.z-1});}getFeatures(n){return this.sourceTile.data.getTileData(n);}getFeatureById(n){let r=this.getMainLayer();return r?r.getSource().data.dataArray.filter(r=>r._id===n):[];}}function z(n){switch(n.type){case"PolygonLayer":case"LineLayer":case"PointLayer":return j;case"TileDebugLayer":return x;case"MaskLayer":return C;case"RasterLayer":let{dataType:r}=n.getSource().parser;switch(r){case o.RasterTileType.RGB:case o.RasterTileType.CUSTOMRGB:return I;case o.RasterTileType.ARRAYBUFFER:case o.RasterTileType.CUSTOMARRAYBUFFER:return B;case o.RasterTileType.TERRAINRGB:case o.RasterTileType.CUSTOMTERRAINRGB:return L;default:return S;}default:return j;}}},"23ec6b43":function(n,r,i){var a=i("ca53fc7e");n.exports=function(n,r){return a(n,r);};},"2483f485":function(n,r,i){var a=i("f5e08e2b"),o=i("72a58360"),s=Object.hasOwnProperty,l=Object.create(null);for(var u in a)s.call(a,u)&&(l[a[u]]=u);var c=n.exports={to:{},get:{}};function f(n,r,i){return Math.min(Math.max(r,n),i);}function d(n){var r=Math.round(n).toString(16).toUpperCase();return r.length<2?"0"+r:r;}c.get=function(n){var r,i;switch(n.substring(0,3).toLowerCase()){case"hsl":r=c.get.hsl(n),i="hsl";break;case"hwb":r=c.get.hwb(n),i="hwb";break;default:r=c.get.rgb(n),i="rgb";}return r?{model:i,value:r}:null;},c.get.rgb=function(n){if(!n)return null;var r,i,o,l=[0,0,0,1];if(r=n.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(i=0,o=r[2],r=r[1];i<3;i++){var u=2*i;l[i]=parseInt(r.slice(u,u+2),16);}o&&(l[3]=parseInt(o,16)/255);}else if(r=n.match(/^#([a-f0-9]{3,4})$/i)){for(i=0,o=(r=r[1])[3];i<3;i++)l[i]=parseInt(r[i]+r[i],16);o&&(l[3]=parseInt(o+o,16)/255);}else if(r=n.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(i=0;i<3;i++)l[i]=parseInt(r[i+1],0);r[4]&&(r[5]?l[3]=.01*parseFloat(r[4]):l[3]=parseFloat(r[4]));}else if(r=n.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(i=0;i<3;i++)l[i]=Math.round(2.55*parseFloat(r[i+1]));r[4]&&(r[5]?l[3]=.01*parseFloat(r[4]):l[3]=parseFloat(r[4]));}else if(!(r=n.match(/^(\w+)$/)))return null;else return"transparent"===r[1]?[0,0,0,0]:s.call(a,r[1])?((l=a[r[1]])[3]=1,l):null;for(i=0;i<3;i++)l[i]=f(l[i],0,255);return l[3]=f(l[3],0,1),l;},c.get.hsl=function(n){if(!n)return null;var r=n.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(r){var i=parseFloat(r[4]);return[(parseFloat(r[1])%360+360)%360,f(parseFloat(r[2]),0,100),f(parseFloat(r[3]),0,100),f(isNaN(i)?1:i,0,1)];}return null;},c.get.hwb=function(n){if(!n)return null;var r=n.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(r){var i=parseFloat(r[4]);return[(parseFloat(r[1])%360+360)%360,f(parseFloat(r[2]),0,100),f(parseFloat(r[3]),0,100),f(isNaN(i)?1:i,0,1)];}return null;},c.to.hex=function(){var n=o(arguments);return"#"+d(n[0])+d(n[1])+d(n[2])+(n[3]<1?d(Math.round(255*n[3])):"");},c.to.rgb=function(){var n=o(arguments);return n.length<4||1===n[3]?"rgb("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+")":"rgba("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+", "+n[3]+")";},c.to.rgb.percent=function(){var n=o(arguments),r=Math.round(n[0]/255*100),i=Math.round(n[1]/255*100),a=Math.round(n[2]/255*100);return n.length<4||1===n[3]?"rgb("+r+"%, "+i+"%, "+a+"%)":"rgba("+r+"%, "+i+"%, "+a+"%, "+n[3]+")";},c.to.hsl=function(){var n=o(arguments);return n.length<4||1===n[3]?"hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)":"hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, "+n[3]+")";},c.to.hwb=function(){var n=o(arguments),r="";return n.length>=4&&1!==n[3]&&(r=", "+n[3]),"hwb("+n[0]+", "+n[1]+"%, "+n[2]+"%"+r+")";},c.to.keyword=function(n){return l[n.slice(0,3)];};},"254c8ced":function(n,r,i){"use strict";var a;i.d(r,"__esModule",{value:!0}),i.d(r,"InteractionEvent",{enumerable:!0,get:function(){return o;}});let o=((a={}).Hover="hover",a.Click="click",a.Select="select",a.Active="active",a.Drag="drag",a);},"2569b57a":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{AsyncSeriesBailHook:function(){return en;},AsyncSeriesHook:function(){return et;},AsyncWaterfallHook:function(){return er;},SyncBailHook:function(){return ee;},SyncHook:function(){return $;}});let a=i("1054d627");function o(n,r,i,a){return new(i||(i=Promise))(function(o,s){function l(n){try{c(a.next(n));}catch(n){s(n);}}function u(n){try{c(a.throw(n));}catch(n){s(n);}}function c(n){var r;n.done?o(n.value):((r=n.value)instanceof i?r:new i(function(n){n(r);})).then(l,u);}c((a=a.apply(n,r||[])).next());});}function s(n,r){var i,a,o,s,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1];},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this;}),s;function u(s){return function(u){return function(s){if(i)throw TypeError("Generator is already executing.");for(;l;)try{if(i=1,a&&(o=2&s[0]?a.return:s[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,s[1])).done)return o;switch(a=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return l.label++,{value:s[1],done:!1};case 5:l.label++,a=s[1],s=[0];continue;case 7:s=l.ops.pop(),l.trys.pop();continue;default:if(!(o=(o=l.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){l=0;continue;}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){l.label=s[1];break;}if(6===s[0]&&l.label<o[1]){l.label=o[1],o=s;break;}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(s);break;}o[2]&&l.ops.pop(),l.trys.pop();continue;}s=r.call(n,l);}catch(n){s=[6,n],a=0;}finally{i=o=0;}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0};}([s,u]);};}}function l(n,r){var i="function"==typeof Symbol&&n[Symbol.iterator];if(!i)return n;var a,o,s=i.call(n),l=[];try{for(;(void 0===r||r-- >0)&&!(a=s.next()).done;)l.push(a.value);}catch(n){o={error:n};}finally{try{a&&!a.done&&(i=s.return)&&i.call(s);}finally{if(o)throw o.error;}}return l;}function u(n,r,i){if(i||2==arguments.length)for(var a,o=0,s=r.length;o<s;o++)!a&&o in r||(a||(a=Array.prototype.slice.call(r,0,o)),a[o]=r[o]);return n.concat(a||Array.prototype.slice.call(r));}function c(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;}var f,d,h,p,m,g,v,y,_,b,x,E,w={exports:{}},S={exports:{}},T={exports:{}};Object.defineProperty(h=T.exports,"__esModule",{value:!0}),h.default=function(n){return n&&"number"==typeof n.length&&n.length>=0&&n.length%1==0;},T.exports=h.default;var A={},C={exports:{}},O={exports:{}};Object.defineProperty(p=O.exports,"__esModule",{value:!0}),p.default=function(n){return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];var a=r.pop();return n.call(this,r,a);};},O.exports=p.default;var M={};Object.defineProperty(M,"__esModule",{value:!0}),M.fallback=I,M.wrap=L;var R=M.hasQueueMicrotask="function"==typeof queueMicrotask&&queueMicrotask,P=M.hasSetImmediate="function"==typeof setImmediate&&setImmediate,k=M.hasNextTick="object"==typeof a&&"function"==typeof a.nextTick;function I(n){setTimeout(n,0);}function L(n){return function(r){for(var i=[],a=arguments.length-1;a-- >0;)i[a]=arguments[a+1];return n(function(){return r.apply(void 0,i);});};}E=R?queueMicrotask:P?setImmediate:k?a.nextTick:I,M.default=L(E),function(n,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(n){return(0,A.isAsync)(n)?function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];var a=r.pop();return s(n.apply(this,r),a);}:(0,i.default)(function(r,i){var a;try{a=n.apply(this,r);}catch(n){return i(n);}if(a&&"function"==typeof a.then)return s(a,i);i(null,a);});};var i=o(O.exports),a=o(M);function o(n){return n&&n.__esModule?n:{default:n};}function s(n,r){return n.then(function(n){l(r,null,n);},function(n){l(r,n&&n.message?n:Error(n));});}function l(n,r,i){try{n(r,i);}catch(n){(0,a.default)(function(n){throw n;},n);}}n.exports=r.default;}(C,C.exports),Object.defineProperty(A,"__esModule",{value:!0}),A.isAsyncIterable=A.isAsyncGenerator=A.isAsync=void 0;var N=(f=C.exports)&&f.__esModule?f:{default:f};function D(n){return"AsyncFunction"===n[Symbol.toStringTag];}A.default=function(n){if("function"!=typeof n)throw Error("expected a function");return D(n)?(0,N.default)(n):n;},A.isAsync=D,A.isAsyncGenerator=function(n){return"AsyncGenerator"===n[Symbol.toStringTag];},A.isAsyncIterable=function(n){return"function"==typeof n[Symbol.asyncIterator];};var F={exports:{}};Object.defineProperty(m=F.exports,"__esModule",{value:!0}),m.default=function(n,r){if(void 0===r&&(r=n.length),!r)throw Error("arity is undefined");return function(){for(var i=this,a=[],o=arguments.length;o--;)a[o]=arguments[o];return"function"==typeof a[r-1]?n.apply(this,a):new Promise(function(o,s){a[r-1]=function(n){for(var r=[],i=arguments.length-1;i-- >0;)r[i]=arguments[i+1];if(n)return s(n);o(r.length>1?r:r[0]);},n.apply(i,a);});};},F.exports=m.default,function(n,r){Object.defineProperty(r,"__esModule",{value:!0});var i=s(T.exports),a=s(A),o=s(F.exports);function s(n){return n&&n.__esModule?n:{default:n};}r.default=(0,o.default)(function(n,r,o){var s=(0,i.default)(r)?[]:{};n(r,function(n,r,i){(0,a.default)(n)(function(n){for(var a=[],o=arguments.length-1;o-- >0;)a[o]=arguments[o+1];a.length<2&&(a=a[0]),s[r]=a,i(n);});},function(n){return o(n,s);});},3),n.exports=r.default;}(S,S.exports);var B={exports:{}},j={exports:{}},z={exports:{}},U={exports:{}};Object.defineProperty(g=U.exports,"__esModule",{value:!0}),g.default=function(n){function r(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];if(null!==n){var a=n;n=null,a.apply(this,r);}}return Object.assign(r,n),r;},U.exports=g.default;var V={exports:{}},G={exports:{}};Object.defineProperty(v=G.exports,"__esModule",{value:!0}),v.default=function(n){return n[Symbol.iterator]&&n[Symbol.iterator]();},G.exports=v.default,function(n,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(n){if((0,i.default)(n))return r=-1,o=n.length,function(){return++r<o?{value:n[r],key:r}:null;};var r,o,s,l,u,c,f=(0,a.default)(n);return f?(s=-1,function(){var n=f.next();return n.done?null:(s++,{value:n.value,key:s});}):(l=n?Object.keys(n):[],u=-1,c=l.length,function r(){var i=l[++u];return"__proto__"===i?r():u<c?{value:n[i],key:i}:null;});};var i=o(T.exports),a=o(G.exports);function o(n){return n&&n.__esModule?n:{default:n};}n.exports=r.default;}(V,V.exports);var H={exports:{}};Object.defineProperty(y=H.exports,"__esModule",{value:!0}),y.default=function(n){return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];if(null===n)throw Error("Callback was already called.");var a=n;n=null,a.apply(this,r);};},H.exports=y.default;var W={exports:{}},X={exports:{}};Object.defineProperty(_=X.exports,"__esModule",{value:!0}),_.default={},X.exports=_.default,Object.defineProperty(b=W.exports,"__esModule",{value:!0}),b.default=function(n,r,i,a){var o=!1,s=!1,l=!1,u=0,c=0;function f(){u>=r||l||o||(l=!0,n.next().then(function(n){var r=n.value,h=n.done;if(!s&&!o){if(l=!1,h){o=!0,u<=0&&a(null);return;}u++,i(r,c,d),c++,f();}}).catch(h));}function d(n,r){if(u-=1,!s){if(n)return h(n);if(!1===n){o=!0,s=!0;return;}if(r===x.default||o&&u<=0)return o=!0,a(null);f();}}function h(n){s||(l=!1,o=!0,a(n));}f();},x=(d=X.exports)&&d.__esModule?d:{default:d},W.exports=b.default,function(n,r){Object.defineProperty(r,"__esModule",{value:!0});var i=u(U.exports),a=u(V.exports),o=u(H.exports),s=u(W.exports),l=u(X.exports);function u(n){return n&&n.__esModule?n:{default:n};}r.default=function(n){return function(r,u,c){if(c=(0,i.default)(c),n<=0)throw RangeError("concurrency limit cannot be less than 1");if(!r)return c(null);if((0,A.isAsyncGenerator)(r))return(0,s.default)(r,n,u,c);if((0,A.isAsyncIterable)(r))return(0,s.default)(r[Symbol.asyncIterator](),n,u,c);var f=(0,a.default)(r),d=!1,h=!1,p=0,m=!1;function g(n,r){if(!h){if(p-=1,n)d=!0,c(n);else if(!1===n)d=!0,h=!0;else{if(r===l.default||d&&p<=0)return d=!0,c(null);m||v();}}}function v(){for(m=!0;p<n&&!d;){var r=f();if(null===r){d=!0,p<=0&&c(null);return;}p+=1,u(r.value,r.key,(0,o.default)(g));}m=!1;}v();};},n.exports=r.default;}(z,z.exports),function(n,r){Object.defineProperty(r,"__esModule",{value:!0});var i=s(z.exports),a=s(A),o=s(F.exports);function s(n){return n&&n.__esModule?n:{default:n};}r.default=(0,o.default)(function(n,r,o,s){return(0,i.default)(r)(n,(0,a.default)(o),s);},4),n.exports=r.default;}(j,j.exports),function(n,r){Object.defineProperty(r,"__esModule",{value:!0});var i=o(j.exports),a=o(F.exports);function o(n){return n&&n.__esModule?n:{default:n};}r.default=(0,a.default)(function(n,r,a){return(0,i.default)(n,1,r,a);},3),n.exports=r.default;}(B,B.exports),function(n,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(n,r){return(0,i.default)(a.default,n,r);};var i=o(S.exports),a=o(B.exports);function o(n){return n&&n.__esModule?n:{default:n};}n.exports=r.default;}(w,w.exports);var q=c(w.exports),$=function(){function n(){this.args=[],this.tasks=[];}return n.prototype.call=function(){for(var n=arguments,r=[],i=0;i<arguments.length;i++)r[i]=n[i];return this.args=r,q(this.tasks);},n.prototype.tap=function(n,r){var i=this;this.tasks.push(function(a){r.apply(void 0,u([],l(i.args),!1)),a(null,n);});},n;}(),Y={exports:{}},Z={exports:{}};!function(n,r){Object.defineProperty(r,"__esModule",{value:!0});var i=f(T.exports),a=f(X.exports),o=f(j.exports),s=f(U.exports),l=f(H.exports),u=f(A),c=f(F.exports);function f(n){return n&&n.__esModule?n:{default:n};}r.default=(0,c.default)(function(n,r,c){return((0,i.default)(n)?function(n,r,i){i=(0,s.default)(i);var o=0,u=0,c=n.length,f=!1;function d(n,r){!1===n&&(f=!0),!0!==f&&(n?i(n):(++u===c||r===a.default)&&i(null));}for(0===c&&i(null);o<c;o++)r(n[o],o,(0,l.default)(d));}:function(n,r,i){return(0,o.default)(n,1/0,r,i);})(n,(0,u.default)(r),c);},3),n.exports=r.default;}(Z,Z.exports),function(n,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(n,r){return(0,a.default)(i.default,n,r);};var i=o(Z.exports),a=o(S.exports);function o(n){return n&&n.__esModule?n:{default:n};}n.exports=r.default;}(Y,Y.exports);var K=c(Y.exports);!function(){function n(){this.tasks=[];}n.prototype.promise=function(){return K(this.tasks);},n.prototype.tapPromise=function(n,r){var i=this;this.tasks.push(function(a){return o(i,void 0,void 0,function(){return s(this,function(i){switch(i.label){case 0:return[4,r()];case 1:return i.sent(),a(null,n),[2];}});});});};}();var Q={exports:{}};!function(n,r){Object.defineProperty(r,"__esModule",{value:!0});var i=l(U.exports),a=l(H.exports),o=l(A),s=l(F.exports);function l(n){return n&&n.__esModule?n:{default:n};}r.default=(0,s.default)(function(n,r){if(r=(0,i.default)(r),!Array.isArray(n))return r(Error("First argument to waterfall must be an array of functions"));if(!n.length)return r();var s=0;function l(r){(0,o.default)(n[s++]).apply(void 0,r.concat([(0,a.default)(u)]));}function u(i){for(var a=[],o=arguments.length-1;o-- >0;)a[o]=arguments[o+1];if(!1!==i){if(i||s===n.length)return r.apply(void 0,[i].concat(a));l(a);}}l([]);}),n.exports=r.default;}(Q,Q.exports);var J=c(Q.exports);!function(){function n(){this.tasks=[];}n.prototype.call=function(){return J(this.tasks);},n.prototype.tap=function(n,r){0===this.tasks.length?this.tasks.push(function(n){var i=r();n(!!i&&null,i);}):this.tasks.push(function(i,a){a(!!r.apply(void 0,u([],l(i),!1))&&null,n);});};}();var ee=function(){function n(){this.tasks=[];}return n.prototype.call=function(){return q(this.tasks);},n.prototype.tap=function(n,r){this.tasks.push(function(i){i(r(),n);});},n;}(),et=function(){function n(){this.args=[],this.tasks=[];}return n.prototype.promise=function(){for(var n=arguments,r=[],i=0;i<arguments.length;i++)r[i]=n[i];return this.args=r,q(this.tasks);},n.prototype.tapPromise=function(n,r){var i=this;this.tasks.push(function(a){return o(i,void 0,void 0,function(){return s(this,function(i){switch(i.label){case 0:return[4,r.apply(void 0,u([],l(this.args),!1))];case 1:return i.sent(),a(null,n),[2];}});});});},n;}(),en=function(){function n(){this.args=[],this.tasks=[];}return n.prototype.promise=function(){for(var n=arguments,r=[],i=0;i<arguments.length;i++)r[i]=n[i];return this.args=r,q(this.tasks);},n.prototype.tapPromise=function(n,r){var i=this;this.tasks.push(function(a){return o(i,void 0,void 0,function(){return s(this,function(i){switch(i.label){case 0:return[4,r.apply(void 0,u([],l(this.args),!1))];case 1:return a(i.sent(),n),[2];}});});});},n;}(),er=function(){function n(){this.tasks=[];}return n.prototype.promise=function(){return J(this.tasks);},n.prototype.tapPromise=function(n,r){0===this.tasks.length?this.tasks.push(function(n){r().then(function(r){n(null,r);});}):this.tasks.push(function(n,i){r(n).then(function(n){i(null,n);});});},n;}();},25953381:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return u;},lineRadial:function(){return l;}});var a=i("777fffbe"),o=i("852bbaa9")._(i("c2731b3b")),s=a._(i("8f2f8753"));function l(n){var r=n.curve;return n.angle=n.x,delete n.x,n.radius=n.y,delete n.y,n.curve=function(n){return arguments.length?r((0,o.default)(n)):r()._curve;},n;}function u(){return l((0,s.default)().curve(o.curveRadialLinear));}},"25aa6dd5":function(n,r,i){function a(){return n.exports=a=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)({}).hasOwnProperty.call(i,a)&&(n[a]=i[a]);}return n;},n.exports.__esModule=!0,n.exports.default=n.exports,a.apply(null,arguments);}n.exports=a,n.exports.__esModule=!0,n.exports.default=n.exports;},"25caeceb":function(n,r,i){var a=i("cd32a75b"),o=0;n.exports=function(n){var r=++o;return a(n)+r;};},26429605:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{add:function(){return d;},clone:function(){return l;},copy:function(){return c;},create:function(){return s;},dot:function(){return v;},equals:function(){return x;},exactEquals:function(){return b;},forEach:function(){return E;},fromValues:function(){return u;},length:function(){return p;},lerp:function(){return y;},normalize:function(){return g;},scale:function(){return h;},set:function(){return f;},squaredLength:function(){return m;},transformMat4:function(){return _;}});var a,o=i("852bbaa9")._(i("1cf5f081"));function s(){var n=new o.ARRAY_TYPE(4);return o.ARRAY_TYPE!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0),n;}function l(n){var r=new o.ARRAY_TYPE(4);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r;}function u(n,r,i,a){var s=new o.ARRAY_TYPE(4);return s[0]=n,s[1]=r,s[2]=i,s[3]=a,s;}function c(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n;}function f(n,r,i,a,o){return n[0]=r,n[1]=i,n[2]=a,n[3]=o,n;}function d(n,r,i){return n[0]=r[0]+i[0],n[1]=r[1]+i[1],n[2]=r[2]+i[2],n[3]=r[3]+i[3],n;}function h(n,r,i){return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=r[3]*i,n;}function p(n){return Math.hypot(n[0],n[1],n[2],n[3]);}function m(n){var r=n[0],i=n[1],a=n[2],o=n[3];return r*r+i*i+a*a+o*o;}function g(n,r){var i=r[0],a=r[1],o=r[2],s=r[3],l=i*i+a*a+o*o+s*s;return l>0&&(l=1/Math.sqrt(l)),n[0]=i*l,n[1]=a*l,n[2]=o*l,n[3]=s*l,n;}function v(n,r){return n[0]*r[0]+n[1]*r[1]+n[2]*r[2]+n[3]*r[3];}function y(n,r,i,a){var o=r[0],s=r[1],l=r[2],u=r[3];return n[0]=o+a*(i[0]-o),n[1]=s+a*(i[1]-s),n[2]=l+a*(i[2]-l),n[3]=u+a*(i[3]-u),n;}function _(n,r,i){var a=r[0],o=r[1],s=r[2],l=r[3];return n[0]=i[0]*a+i[4]*o+i[8]*s+i[12]*l,n[1]=i[1]*a+i[5]*o+i[9]*s+i[13]*l,n[2]=i[2]*a+i[6]*o+i[10]*s+i[14]*l,n[3]=i[3]*a+i[7]*o+i[11]*s+i[15]*l,n;}function b(n,r){return n[0]===r[0]&&n[1]===r[1]&&n[2]===r[2]&&n[3]===r[3];}function x(n,r){var i=n[0],a=n[1],s=n[2],l=n[3],u=r[0],c=r[1],f=r[2],d=r[3];return Math.abs(i-u)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-c)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(s-f)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(l-d)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(d));}var E=(a=s(),function(n,r,i,o,s,l){var u,c;for(r||(r=4),i||(i=0),c=o?Math.min(o*r+i,n.length):n.length,u=i;u<c;u+=r)a[0]=n[u],a[1]=n[u+1],a[2]=n[u+2],a[3]=n[u+3],s(a,a,l),n[u]=a[0],n[u+1]=a[1],n[u+2]=a[2],n[u+3]=a[3];return n;});},27063286:function(n,r,i){var a=i("edf69913"),o=i("6733e123"),s=i("2e039b56"),l=i("426615a4"),u=i("2ae24c78"),c=i("176581f8"),f=a?a.prototype:void 0,d=f?f.valueOf:void 0;n.exports=function(n,r,i,a,f,h,p){switch(i){case"[object DataView]":if(n.byteLength!=r.byteLength||n.byteOffset!=r.byteOffset)break;n=n.buffer,r=r.buffer;case"[object ArrayBuffer]":if(n.byteLength!=r.byteLength||!h(new o(n),new o(r)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return s(+n,+r);case"[object Error]":return n.name==r.name&&n.message==r.message;case"[object RegExp]":case"[object String]":return n==r+"";case"[object Map]":var m=u;case"[object Set]":var g=1&a;if(m||(m=c),n.size!=r.size&&!g)break;var v=p.get(n);if(v)return v==r;a|=2,p.set(n,r);var y=l(m(n),m(r),a,f,h,p);return p.delete(n),y;case"[object Symbol]":if(d)return d.call(n)==d.call(r);}return!1;};},"2713d2ad":function(n,r,i){"use strict";function a(){}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},"277e4603":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return g;}});var a=i("777fffbe"),o=i("852bbaa9"),s=a._(i("6b07dc07")),l=a._(i("63a88d49")),u=i("34ab9b92"),c=a._(i("b5bf64b0")),f=a._(i("4017e4bc")),d=a._(i("09b9e239")),h=a._(i("02f16af6")),p=a._(i("31b9c66a")),m=o._(i("01b2eefa"));function g(n,r){var i,a=typeof r;return null==r||"boolean"===a?(0,p.default)(r):("number"===a?f.default:"string"===a?(i=(0,s.default)(r))?(r=i,l.default):h.default:r instanceof s.default?l.default:r instanceof Date?c.default:(0,m.isNumberArray)(r)?m.default:Array.isArray(r)?u.genericArray:"function"!=typeof r.valueOf&&"function"!=typeof r.toString||isNaN(r)?d.default:f.default)(n,r);}},"27ee04b2":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{abs:function(){return h;},acos:function(){return T;},asin:function(){return A;},atan:function(){return p;},atan2:function(){return m;},ceil:function(){return v;},cos:function(){return g;},degrees:function(){return f;},epsilon:function(){return a;},epsilon2:function(){return o;},exp:function(){return y;},halfPi:function(){return l;},log:function(){return _;},pi:function(){return s;},pow:function(){return b;},quarterPi:function(){return u;},radians:function(){return d;},sign:function(){return E;},sin:function(){return x;},sqrt:function(){return w;},tan:function(){return S;},tau:function(){return c;}});var a=1e-6,o=1e-12,s=Math.PI,l=s/2,u=s/4,c=2*s,f=180/s,d=s/180,h=Math.abs,p=Math.atan,m=Math.atan2,g=Math.cos,v=Math.ceil,y=Math.exp,_=Math.log,b=Math.pow,x=Math.sin,E=Math.sign||function(n){return n>0?1:n<0?-1:0;},w=Math.sqrt,S=Math.tan;function T(n){return n>1?0:n<-1?s:Math.acos(n);}function A(n){return n>1?l:n<-1?-l:Math.asin(n);}},"2843bd80":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"createElement",{enumerable:!0,get:function(){return o;}});var a=i("5e195043");function o(n){let r="function"==typeof n?n:n.render;return class extends a.CustomElement{connectedCallback(){this.draw();}attributeChangedCallback(){this.draw();}draw(){r(this);}};}},29196330:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return o;}});var a=i("852bbaa9")._(i("609f48be"));function o(n,r,i,o){return a.useMemo(function(){if(null!=i&&i.size){for(var a=[],s=0;s<(null==n?void 0:n.length);s+=1)!function n(r,i,a,o,s,l,u){var c=l(i,u);r.push({record:i,indent:a,index:u,rowKey:c});var f=null==s?void 0:s.has(c);if(i&&Array.isArray(i[o])&&f)for(var d=0;d<i[o].length;d+=1)n(r,i[o][d],a+1,o,s,l,d);}(a,n[s],0,r,i,o,s);return a;}return null==n?void 0:n.map(function(n,r){return{record:n,indent:0,index:r,rowKey:o(n,r)};});},[n,r,i,o]);}},"299b5c10":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return u;}});var a=i("777fffbe"),o=a._(i("ee64167d")),s=a._(i("5fc8b0d8")),l=a._(i("b4b08cd7"));function u(n){var r=n.width,i=n.height,a=n.bounds,u=n.minExtent,c=void 0===u?0:u,f=n.maxZoom,d=n.padding,h=void 0===d?0:d,p=n.offset,m=void 0===p?[0,0]:p,g=(0,o.default)(a,2),v=(0,o.default)(g[0],2),y=v[0],_=v[1],b=(0,o.default)(g[1],2),x=b[0],E=b[1];if(Number.isFinite(h)){var w=h;h={top:w,bottom:w,left:w,right:w};}else(0,l.default)(Number.isFinite(h.top)&&Number.isFinite(h.bottom)&&Number.isFinite(h.left)&&Number.isFinite(h.right));var S=new s.default({width:r,height:i,longitude:0,latitude:0,zoom:0}),T=S.project([y,E]),A=S.project([x,_]),C=[Math.max(Math.abs(A[0]-T[0]),c),Math.max(Math.abs(A[1]-T[1]),c)],O=[r-h.left-h.right-2*Math.abs(m[0]),i-h.top-h.bottom-2*Math.abs(m[1])];(0,l.default)(O[0]>0&&O[1]>0);var M=O[0]/C[0],R=O[1]/C[1],P=(h.right-h.left)/2/M,k=(h.bottom-h.top)/2/R,I=[(A[0]+T[0])/2+P,(A[1]+T[1])/2+k],L=S.unproject(I),N=S.zoom+Math.log2(Math.abs(Math.min(M,R)));return{longitude:L[0],latitude:L[1],zoom:Math.min(N,void 0===f?24:f)};}},"2a0a75c8":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"BlendTypes",{enumerable:!0,get:function(){return o;}});var a=i("553ee311");let o={[a.BlendType.additive]:{enable:!0,func:{srcRGB:a.gl.ONE,dstRGB:a.gl.ONE,srcAlpha:1,dstAlpha:1}},[a.BlendType.none]:{enable:!1},[a.BlendType.normal]:{enable:!0,func:{srcRGB:a.gl.SRC_ALPHA,dstRGB:a.gl.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}},[a.BlendType.subtractive]:{enable:!0,func:{srcRGB:a.gl.ONE,dstRGB:a.gl.ONE,srcAlpha:a.gl.ZERO,dstAlpha:a.gl.ONE_MINUS_SRC_COLOR},equation:{rgb:a.gl.FUNC_SUBTRACT,alpha:a.gl.FUNC_SUBTRACT}},[a.BlendType.max]:{enable:!0,func:{srcRGB:a.gl.ONE,dstRGB:a.gl.ONE},equation:{rgb:a.gl.MAX_EXT}},[a.BlendType.min]:{enable:!0,func:{srcRGB:a.gl.ONE,dstRGB:a.gl.ONE},equation:{rgb:a.gl.MIN_EXT}}};},"2abeadd7":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return p;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("7cfeda15"),l=a._(s),u=i("609f48be"),c=o._(u),f={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"},d=i("887aaf6c"),h=a._(d),p=c.forwardRef(function(n,r){return c.createElement(h.default,(0,l.default)({},n,{ref:r,icon:f}));});},"2ae24c78":function(n,r,i){n.exports=function(n){var r=-1,i=Array(n.size);return n.forEach(function(n,a){i[++r]=[a,n];}),i;};},"2c0045d4":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{CATEGORY_DEFAULT_OPTIONS:function(){return c;},CLASS_NAMES:function(){return h;},CONTINUOUS_DEFAULT_OPTIONS:function(){return f;},LEGEND_BASE_DEFAULT_OPTIONS:function(){return u;},STEP_RATIO:function(){return d;}});var a=i("fc81244b"),o=i("ca2da9d1"),s=i("a63b8d99"),l=i("572a6e2f"),u={showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12},c=(0,o.deepAssign)({},u,{}),f=(0,o.deepAssign)({},u,(0,s.superStyleProps)(l.DEFAULT_HANDLE_CFG,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"}),d=.01,h=(0,a.classNames)({title:"title",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend");},"2cb3cf04":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{ANNOTATION_LIST:function(){return v;},CHART_OPTIONS:function(){return l;},CONFIG_SHAPE:function(){return m;},SKIP_DEL_CUSTOM_SIGN:function(){return f;},SPECIAL_OPTIONS:function(){return g;},TRANSFORM_OPTION_KEY:function(){return h;},TRANSFORM_SIGN:function(){return c;},VIEW_OPTIONS:function(){return u;}});var a=i("d8554caa"),o=this&&this.__assign||function(){return(o=Object.assign||function(n){for(var r,i=1,a=arguments.length;i<a;i++)for(var o in r=arguments[i])Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n;}).apply(this,arguments);},s=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;},l=["renderer"],u=["width","height","autoFit","theme","inset","insetLeft","insetRight","insetTop","insetBottom","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft","depth","title","clip","children","type","data","direction"],c="__transform__",f="__skipDelCustomKeys__",d=function(n,r){return(0,a.isBoolean)(r)?{type:n,available:r}:o({type:n},r);},h={xField:"encode.x",yField:"encode.y",colorField:"encode.color",angleField:"encode.y",keyField:"encode.key",y1Field:"encode.y1",sizeField:"encode.size",setsField:"encode.sets",shapeField:"encode.shape",seriesField:"encode.series",positionField:"encode.position",textField:"encode.text",valueField:"encode.value",binField:"encode.x",srcField:"encode.src",linkColorField:"encode.linkColor",fontSizeField:"encode.fontSize",coordinateType:"coordinate.type",radius:"coordinate.outerRadius",innerRadius:"coordinate.innerRadius",startAngle:"coordinate.startAngle",endAngle:"coordinate.endAngle",focusX:"coordinate.focusX",focusY:"coordinate.focusY",distortionX:"coordinate.distortionX",distortionY:"coordinate.distortionY",visual:"coordinate.visual",stack:{target:"transform",value:function(n){return d("stackY",n);}},normalize:{target:"transform",value:function(n){return d("normalizeY",n);}},percent:{target:"transform",value:function(n){return d("normalizeY",n);}},group:{target:"transform",value:function(n){return d("dodgeX",n);}},sort:{target:"transform",value:function(n){return d("sortX",n);}},symmetry:{target:"transform",value:function(n){return d("symmetryY",n);}},diff:{target:"transform",value:function(n){return d("diffY",n);}},meta:{target:"scale",value:function(n){return n;}},label:{target:"labels",value:function(n){return n;}},shape:"style.shape",connectNulls:{target:"style",value:function(n){return(0,a.isBoolean)(n)?{connect:n}:n;}},transpose:{target:"transpose",value:function(n){return d("transpose",n);}}},p=["xField","yField","seriesField","colorField","shapeField","keyField","positionField","meta","tooltip","animate","stack","normalize","percent","group","sort","symmetry","diff"],m=[{key:"annotations",extendedProperties:[]},{key:"line",type:"line",extendedProperties:p},{key:"connector",type:"connector",extendedProperties:[]},{key:"point",type:"point",extendedProperties:p,defaultShapeConfig:{shapeField:"circle"}},{key:"area",type:"area",extendedProperties:p}],g=[{key:"transform",callback:function(n,r,i){n[r]=n[r]||[];var a,l=i.available,u=s(i,["available"]);if(void 0===l||l)n[r].push(o(((a={})[c]=!0,a),u));else{var f=n[r].indexOf(function(n){return n.type===i.type;});-1!==f&&n[r].splice(f,1);}}},{key:"labels",callback:function(n,r,i){var s;if(!i||(0,a.isArray)(i)){n[r]=i||[];return;}i.text||(i.text=n.yField),n[r]=n[r]||[],n[r].push(o(((s={})[c]=!0,s),i));}},{key:"transpose",callback:function(n,r,i){var a;i.available?n.coordinate={transform:[o(((a={})[c]=!0,a),i)]}:n.coordinate={};}}],v=[{key:"conversionTag",shape:"ConversionTag"},{key:"axisText",shape:"BidirectionalBarAxisText"}];},"2cc7f81c":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return s;}});var a=i("777fffbe")._(i("6a859b73")),o="object"==typeof self&&self&&self.Object===Object&&self,s=a.default||o||Function("return this")();},"2d19bd14":function(n,r,i){var a=i("bbc15be8"),o=i("07ba0bdb"),s=i("7700f5ce"),l=i("cd32a75b");n.exports=function(n,r){return a(n)?n:o(n,r)?[n]:s(l(n));};},"2de3468c":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{LegendContinuous:function(){return J;}});var a=i("777fffbe"),o=i("5e195043"),s=i("3862611d"),l=i("c2287686"),u=i("3715e357"),c=a._(u),f=i("6aaf503e"),d=a._(f),h=i("47a6bde3"),p=i("920dd2bf"),m=i("ca2da9d1"),g=i("f65342ee"),v=i("f1d8aa22"),y=i("a602d54e"),_=i("b0ea517f"),b=i("a63b8d99"),x=i("880f07e8"),E=i("750ce7b9"),w=i("a46fcb64"),S=i("fc81244b"),T=i("a125f0ec"),A=i("1915def0"),C=i("611ea1fe"),O={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(n){return n.toString();},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999},M=(0,S.classNames)({background:"background",labelGroup:"label-group",label:"label"},"indicator"),R=function(n){function r(r){var i=n.call(this,r,O)||this;return i.point=[0,0],i.group=i.appendChild(new o.Group({})),i.isMutationObserved=!0,i;}return(0,s.__extends)(r,n),r.prototype.renderBackground=function(){if(this.label){var n=this.attributes,r=n.position,i=n.padding,a=(0,s.__read)((0,A.parseSeriesAttr)(i),4),o=a[0],l=a[1],u=a[2],c=a[3],f=this.label.node().getLocalBounds(),d=f.min,h=f.max,m=new p.BBox(d[0]-c,d[1]-o,h[0]+l-d[0]+c,h[1]+u-d[1]+o),g=this.getPath(r,m),v=(0,b.subStyleProps)(this.attributes,"background");this.background=(0,_.select)(this.group).maybeAppendByClassName(M.background,"path").styles((0,s.__assign)((0,s.__assign)({},v),{d:g})),this.group.appendChild(this.label.node());}},r.prototype.renderLabel=function(){var n=this.attributes,r=n.formatter,i=n.labelText,a=(0,b.subStyleProps)(this.attributes,"label"),o=(0,s.__read)((0,b.splitStyle)(a),2),l=o[0],u=o[1],c=(l.text,(0,s.__rest)(l,["text"]));this.label=(0,_.select)(this.group).maybeAppendByClassName(M.labelGroup,"g").styles(u),i&&this.label.maybeAppendByClassName(M.label,function(){return(0,C.renderExtDo)(r(i));}).style("text",r(i).toString()).selectAll("text").styles(c);},r.prototype.adjustLayout=function(){var n=(0,s.__read)(this.point,2),r=n[0],i=n[1],a=this.attributes,o=a.x,l=a.y;this.group.attr("transform","translate(".concat(o-r,", ").concat(l-i,")"));},r.prototype.getPath=function(n,r){var i=this.attributes.radius,a=r.x,o=r.y,l=r.width,u=r.height,c=[["M",a+i,o],["L",a+l-i,o],["A",i,i,0,0,1,a+l,o+i],["L",a+l,o+u-i],["A",i,i,0,0,1,a+l-i,o+u],["L",a+i,o+u],["A",i,i,0,0,1,a,o+u-i],["L",a,o+i],["A",i,i,0,0,1,a+i,o],["Z"]],f={top:4,right:6,bottom:0,left:2}[n],d=this.createCorner([c[f].slice(-2),c[f+1].slice(-2)]);return c.splice.apply(c,(0,s.__spreadArray)([f+1,1],(0,s.__read)(d),!1)),c[0][0]="M",c;},r.prototype.createCorner=function(n,r){void 0===r&&(r=10);var i=T.isHorizontal.apply(void 0,(0,s.__spreadArray)([],(0,s.__read)(n),!1)),a=(0,s.__read)(n,2),o=(0,s.__read)(a[0],2),l=o[0],u=o[1],c=(0,s.__read)(a[1],2),f=c[0],d=c[1],h=(0,s.__read)(i?[f-l,[l,f]]:[d-u,[u,d]],2),p=h[0],m=(0,s.__read)(h[1],2),g=m[0],v=m[1],y=p/2,_=p/Math.abs(p)*r,b=_/2,x=_*Math.sqrt(3)/2*.8,E=(0,s.__read)([g,g+y-b,g+y,g+y+b,v],5),w=E[0],S=E[1],A=E[2],C=E[3],O=E[4];return i?(this.point=[A,u-x],[["L",w,u],["L",S,u],["L",A,u-x],["L",C,u],["L",O,u]]):(this.point=[l+x,A],[["L",l,w],["L",l,S],["L",l+x,A],["L",l,C],["L",l,O]]);},r.prototype.applyVisibility=function(){"hidden"===this.attributes.visibility?(0,v.hide)(this):(0,v.show)(this);},r.prototype.bindEvents=function(){this.label.on(o.ElementEvent.BOUNDS_CHANGED,this.renderBackground);},r.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility();},r;}(h.Component),P=i("16d095ff"),k=i("b7c9e889"),I=i("2c0045d4"),L=i("572a6e2f"),N=i("da5c7e2c"),D=a._(N),F=i("ceab2f6b");function B(n,r){var i=(0,s.__read)(function(n,r){for(var i=1;i<n.length;i+=1){var a=n[i-1],o=n[i];if(r>=a&&r<=o)return[a,o];}return[r,r];}(n,r),2),a=i[0],o=i[1];return{tick:r>(a+o)/2?o:a,range:[a,o]};}var j=(0,S.classNames)({trackGroup:"background-group",track:"background",selectionGroup:"ribbon-group",selection:"ribbon",clipPath:"clip-path"},"ribbon");function z(n){var r=n.orientation,i=n.size,a=n.length;return(0,F.ifHorizontal)(r,[a,i],[i,a]);}function U(n){var r=n.type,i=(0,s.__read)(z(n),2),a=i[0],o=i[1];return"size"===r?[["M",0,o],["L",0+a,0],["L",0+a,o],["Z"]]:[["M",0,o],["L",0,0],["L",0+a,0],["L",0+a,o],["Z"]];}var V=function(n){function r(r){return n.call(this,r,{type:"color",orientation:"horizontal",size:30,range:[0,1],length:200,block:!1,partition:[],color:["#fff","#000"],trackFill:"#e5e5e5"})||this;}return(0,s.__extends)(r,n),r.prototype.render=function(n,r){var i,a,l,u,c,f,d,h,p,m,g,v,y,x,E;(function(n,r){var i=(0,b.subStyleProps)(r,"track");n.maybeAppendByClassName(j.track,"path").styles((0,s.__assign)({d:U(r)},i));})((0,_.select)(r).maybeAppendByClassName(j.trackGroup,"g"),n),i=(0,_.select)(r).maybeAppendByClassName(j.selectionGroup,"g"),a=(0,b.subStyleProps)(n,"selection"),m=(f=n).orientation,g=f.color,v=f.block,y=f.partition,x=(p=(0,D.default)(g)?Array(20).fill(0).map(function(n,r,i){return g(r/(i.length-1));}):g).length,E=p.map(function(n){return(0,o.parseColor)(n).toString();}),l=x?1===x?E[0]:v?(d=Array.from(E),Array(h=y.length).fill(0).reduce(function(n,r,i){var a=d[i%d.length];return n+" ".concat(y[i],":").concat(a).concat(i<h-1?" ".concat(y[i+1],":").concat(a):"");},"l(".concat("horizontal"===m?"0":"270",")"))):E.reduce(function(n,r,i){return n+" ".concat(i/(x-1),":").concat(r);},"l(".concat((0,F.ifHorizontal)(m,"0","270"),")")):"",c=(u=i.maybeAppendByClassName(j.selection,"path").styles((0,s.__assign)({d:U(n),fill:l},a))).maybeAppendByClassName(j.clipPath,"path").styles({d:function(n){var r=n.orientation,i=n.range;if(!i)return[];var a=(0,s.__read)(z(n),2),o=a[0],l=a[1],u=(0,s.__read)(i,2),c=u[0],f=u[1],d=(0,F.ifHorizontal)(r,c*o,0),h=(0,F.ifHorizontal)(r,0,c*l),p=(0,F.ifHorizontal)(r,f*o,o),m=(0,F.ifHorizontal)(r,l,f*l);return[["M",d,h],["L",d,m],["L",p,m],["L",p,h],["Z"]];}(n)}).node(),u.style("clipPath",c);},r;}(h.Component),G=function(n){function r(r){var i=n.call(this,r,I.CONTINUOUS_DEFAULT_OPTIONS)||this;return i.eventToOffsetScale=new l.Linear({}),i.innerRibbonScale=new l.Linear({}),i.cacheLabelBBox=null,i.cacheHandleBBox=null,i.onHovering=function(n){var r=i.attributes,a=r.data,o=r.block;n.stopPropagation();var s=i.getValueByCanvasPoint(n);if(o){var l=B(a.map(function(n){return n.value;}),s).range,u=i.getRealSelection(l);i.showIndicator((l[0]+l[1])/2,"".concat(u[0],"-").concat(u[1])),i.dispatchIndicated(s,l);}else{var c=i.getTickValue(s);i.showIndicator(c,"".concat(i.getRealValue(c))),i.dispatchIndicated(c);}},i.onDragStart=function(n){return function(r){r.stopPropagation(),i.attributes.slidable&&(i.target=n,i.prevValue=i.getTickValue(i.getValueByCanvasPoint(r)),document.addEventListener("mousemove",i.onDragging),document.addEventListener("touchmove",i.onDragging),document.addEventListener("mouseleave",i.onDragEnd),document.addEventListener("mouseup",i.onDragEnd),document.addEventListener("mouseup",i.onDragEnd),document.addEventListener("touchend",i.onDragEnd));};},i.onDragging=function(n){var r=i.target;i.updateMouse();var a=(0,s.__read)(i.selection,2),o=a[0],l=a[1],u=i.getTickValue(i.getValueByCanvasPoint(n)),c=u-i.prevValue;"start"===r?o!==u&&i.updateSelection(u,l):"end"===r?l!==u&&i.updateSelection(o,u):"ribbon"===r&&0!==c&&(i.prevValue=u,i.updateSelection(c,c,!0));},i.onDragEnd=function(){i.style.cursor="pointer",document.removeEventListener("mousemove",i.onDragging),document.removeEventListener("touchmove",i.onDragging),document.removeEventListener("mouseup",i.onDragEnd),document.removeEventListener("touchend",i.onDragEnd);},i;}return(0,s.__extends)(r,n),Object.defineProperty(r.prototype,"handleOffsetRatio",{get:function(){return this.ifHorizontal(.5,.5);},enumerable:!1,configurable:!0}),r.prototype.getBBox=function(){var n=this.attributes,r=n.width,i=n.height;return new p.BBox(0,0,r,i);},r.prototype.render=function(n,r){var i=this,a=n.showLabel;this.renderTitle((0,_.select)(r));var o=this.availableSpace,s=o.x,l=o.y,u=(0,_.select)(r).maybeAppendByClassName(I.CLASS_NAMES.contentGroup,"g").styles({transform:"translate(".concat(s,", ").concat(l,")")}),c=u.maybeAppendByClassName(I.CLASS_NAMES.labelGroup,"g").styles({zIndex:1});(0,y.ifShow)(!!a,c,function(n){i.renderLabel(n);});var f=u.maybeAppendByClassName(I.CLASS_NAMES.ribbonGroup,"g").styles({zIndex:0});this.handlesGroup=u.maybeAppendByClassName(I.CLASS_NAMES.handlesGroup,"g").styles({zIndex:2}),this.renderHandles(),this.renderRibbon(f),this.renderIndicator(u),this.adjustLabel(),this.adjustHandles();},Object.defineProperty(r.prototype,"range",{get:function(){var n=this.attributes,r=n.data,i=n.domain;return i?{min:i[0],max:i[1]}:{min:Math.min.apply(Math,(0,s.__spreadArray)([],(0,s.__read)(r.map(function(n){return n.value;})),!1)),max:Math.max.apply(Math,(0,s.__spreadArray)([],(0,s.__read)(r.map(function(n){return n.value;})),!1))};},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ribbonScale",{get:function(){var n=this.range,r=n.min,i=n.max;return this.innerRibbonScale.update({domain:[r,i],range:[0,1]}),this.innerRibbonScale;},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ribbonRange",{get:function(){var n=(0,s.__read)(this.selection,2),r=n[0],i=n[1],a=this.ribbonScale;return[a.map(r),a.map(i)];},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"selection",{get:function(){var n=this.range,r=n.min,i=n.max,a=this.attributes.defaultValue,o=(0,s.__read)(void 0===a?[r,i]:a,2);return[o[0],o[1]];},enumerable:!1,configurable:!0}),r.prototype.ifHorizontal=function(n,r){return(0,F.ifHorizontal)(this.attributes.orientation,"function"==typeof n?n():n,"function"==typeof r?r():r);},r.prototype.renderTitle=function(n){var r=this.attributes,i=r.showTitle,a=r.titleText,o=r.width,l=r.height,u=(0,b.subStyleProps)(this.attributes,"title"),c=(0,s.__assign)((0,s.__assign)({},u),{width:o,height:l,text:a}),f=this;n.selectAll(I.CLASS_NAMES.title.class).data(i?[a]:[]).join(function(n){return n.append(function(){return new k.Title({style:c});}).attr("className",I.CLASS_NAMES.title.name).each(function(){f.title=this;});},function(n){return n.update(c);},function(n){return n.each(function(){f.title=void 0;}).remove();});},Object.defineProperty(r.prototype,"availableSpace",{get:function(){if(this.title)return this.title.getAvailableSpace();var n=this.attributes,r=n.width,i=n.height;return new p.BBox(0,0,r,i);},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"labelFixedSpacing",{get:function(){return this.attributes.showTick?5:0;},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"labelPosition",{get:function(){var n=this.attributes;return({vertical:{positive:"right",negative:"left"},horizontal:{positive:"bottom",negative:"top"}})[n.orientation][n.labelDirection];},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"labelBBox",{get:function(){if(!this.attributes.showLabel)return new p.BBox(0,0,0,0);if(this.cacheLabelBBox)return this.cacheLabelBBox;var n,r=(null===(n=this.label.querySelector(w.CLASS_NAMES.labelGroup.class))||void 0===n?void 0:n.children.slice(-1)[0]).getBBox(),i=r.width,a=r.height;return this.cacheLabelBBox=new p.BBox(0,0,i,a),this.cacheLabelBBox;},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"labelShape",{get:function(){var n=this.attributes,r=n.showLabel,i=n.labelSpacing;if(!r)return{width:0,height:0,size:0,length:0};var a=this.labelBBox,o=a.width,s=a.height,l=this.ifHorizontal(s,o)+(void 0===i?0:i)+this.labelFixedSpacing,u=this.ifHorizontal(o,s);return{width:o,height:s,size:l,length:u};},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ribbonBBox",{get:function(){var n=this.attributes,r=n.showHandle,i=n.ribbonSize,a=this.availableSpace,o=a.width,l=a.height,u=this.labelShape,c=u.size,f=u.length,d=(0,s.__read)(this.ifHorizontal([l,o],[o,l]),2),h=d[0],m=d[1],g=r?this.handleShape:{size:0,length:0},v=g.size,y=g.length,_=this.handleOffsetRatio,b=0,x=this.labelPosition;b=i||(["bottom","right"].includes(x)?Math.min(h-c,(h-v)/_):h*(1-_)>v?Math.max(h-c,0):Math.max((h-c-v)/_,0));var E=Math.max(y,f),w=m-E,S=(0,s.__read)(this.ifHorizontal([w,b],[b,w]),2),T=S[0],A=S[1],C=["top","left"].includes(x)?c:0,O=(0,s.__read)(this.ifHorizontal([E/2,C],[C,E/2]),2),M=O[0],R=O[1];return new p.BBox(M,R,T,A);},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ribbonShape",{get:function(){var n=this.ribbonBBox,r=n.width,i=n.height;return this.ifHorizontal({size:i,length:r},{size:r,length:i});},enumerable:!1,configurable:!0}),r.prototype.renderRibbon=function(n){var r=this.attributes,i=r.data,a=r.type,o=r.orientation,s=r.color,l=r.block,u=(0,b.subStyleProps)(this.attributes,"ribbon"),c=this.range,f=c.min,d=c.max,h=this.ribbonBBox,p=h.x,g=h.y,v=this.ribbonShape,y=v.length,_=v.size,x=(0,m.deepAssign)({transform:"translate(".concat(p,", ").concat(g,")"),length:y,size:_,type:a,orientation:o,color:s,block:l,partition:i.map(function(n){return(n.value-f)/(d-f);}),range:this.ribbonRange},u);this.ribbon=n.maybeAppendByClassName(I.CLASS_NAMES.ribbon,function(){return new V({style:x});}).update(x);},r.prototype.getHandleClassName=function(n){return"".concat(I.CLASS_NAMES.prefix("".concat(n,"-handle")));},r.prototype.renderHandles=function(){var n=this.attributes,r=n.showHandle,i=n.orientation,a=(0,b.subStyleProps)(this.attributes,"handle"),o=(0,s.__read)(this.selection,2),l=o[0],u=o[1],c=(0,s.__assign)((0,s.__assign)({},a),{orientation:i}),f=a.shape,d="basic"===(void 0===f?"slider":f)?L.Handle:P.Handle,h=this;this.handlesGroup.selectAll(I.CLASS_NAMES.handle.class).data(r?[{value:l,type:"start"},{value:u,type:"end"}]:[],function(n){return n.type;}).join(function(n){return n.append(function(){return new d({style:c});}).attr("className",function(n){var r=n.type;return"".concat(I.CLASS_NAMES.handle," ").concat(h.getHandleClassName(r));}).each(function(n){var r=n.type,i=n.value;this.update({labelText:i}),h["".concat(r,"Handle")]=this,this.addEventListener("pointerdown",h.onDragStart(r));});},function(n){return n.update(c).each(function(n){var r=n.value;this.update({labelText:r});});},function(n){return n.each(function(n){var r=n.type;h["".concat(r,"Handle")]=void 0;}).remove();});},r.prototype.adjustHandles=function(){var n=(0,s.__read)(this.selection,2),r=n[0],i=n[1];this.setHandlePosition("start",r),this.setHandlePosition("end",i);},Object.defineProperty(r.prototype,"handleBBox",{get:function(){if(this.cacheHandleBBox)return this.cacheHandleBBox;if(!this.attributes.showHandle)return new p.BBox(0,0,0,0);var n=this.startHandle.getBBox(),r=n.width,i=n.height,a=this.endHandle.getBBox(),o=a.width,l=a.height,u=(0,s.__read)([Math.max(r,o),Math.max(i,l)],2),c=u[0],f=u[1];return this.cacheHandleBBox=new p.BBox(0,0,c,f),this.cacheHandleBBox;},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"handleShape",{get:function(){var n=this.handleBBox,r=n.width,i=n.height,a=(0,s.__read)(this.ifHorizontal([i,r],[r,i]),2);return{width:r,height:i,size:a[0],length:a[1]};},enumerable:!1,configurable:!0}),r.prototype.setHandlePosition=function(n,r){var i=this.attributes.handleFormatter,a=this.ribbonBBox,o=a.x,l=a.y,u=this.ribbonShape.size,c=this.getOffset(r),f=(0,s.__read)(this.ifHorizontal([o+c,l+u*this.handleOffsetRatio],[o+u*this.handleOffsetRatio,l+c]),2),d=f[0],h=f[1],p=this.handlesGroup.select(".".concat(this.getHandleClassName(n))).node();null==p||p.update({transform:"translate(".concat(d,", ").concat(h,")"),formatter:i});},r.prototype.renderIndicator=function(n){var r=(0,b.subStyleProps)(this.attributes,"indicator");this.indicator=n.maybeAppendByClassName(I.CLASS_NAMES.indicator,function(){return new R({});}).update(r);},Object.defineProperty(r.prototype,"labelData",{get:function(){var n=this;return this.attributes.data.reduce(function(r,i,a,o){var l,u,c=null!==(l=null==i?void 0:i.id)&&void 0!==l?l:a.toString();if(r.push((0,s.__assign)((0,s.__assign)({},i),{id:c,index:a,type:"value",label:null!==(u=null==i?void 0:i.label)&&void 0!==u?u:i.value.toString(),value:n.ribbonScale.map(i.value)})),a<o.length-1){var f=o[a+1],d=(0,s.__read)([i.value,f.value],2),h=d[0],p=d[1],m=(h+p)/2;r.push((0,s.__assign)((0,s.__assign)({},i),{id:c,index:a,type:"range",range:[h,p],label:[h,p].join("~"),value:n.ribbonScale.map(m)}));}return r;},[]);},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"labelStyle",{get:function(){var n=(0,s.__read)(["center","middle"],2),r=n[0],i=n[1],a=this.labelPosition;return"top"===a?i="bottom":"bottom"===a?i="top":"left"===a?r="end":"right"===a&&(r="start"),{labelTextAlign:r,labelTextBaseline:i};},enumerable:!1,configurable:!0}),r.prototype.renderLabel=function(n){var r=this.attributes,i=r.showTick,a=r.labelFilter,o=r.labelFormatter,l=(0,b.subStyleProps)(this.attributes,"tick"),u=(0,b.subStyleProps)(this.attributes,"label"),c=u.align,f=(0,m.deepAssign)((0,s.__assign)({showLine:!1,showGrid:!1,showTick:void 0!==i&&i,type:"linear",startPos:[0,0],endPos:[0,0],tickDirection:"negative",labelTransform:"rotate(0)"},this.labelStyle),(0,b.superStyleProps)(l,"tick"),(0,b.superStyleProps)(u,"label"),{data:this.labelData}),d=(0,s.__assign)((0,s.__assign)((0,s.__assign)({},f),{tickFilter:function(n,r,i){return(null==n?void 0:n.type)==="value"&&(!a||a(n,n.index,i.filter(function(n){return"value"!==n.type;})));},labelFilter:function(n,r,i){return(null==n?void 0:n.type)===c&&(!a||a(n,n.index,i.filter(function(n){return n.type===c;})));},labelFormatter:o}),{labelOverlap:[{type:"hide"}]});this.label=n.maybeAppendByClassName(I.CLASS_NAMES.label,function(){return new E.Axis({style:d});}).node(),this.label.update(d,!1);},Object.defineProperty(r.prototype,"labelAxisStyle",{get:function(){var n=this.attributes,r=n.showTick,i=n.labelDirection,a=n.labelSpacing,o=n.tickLength,l=this.ribbonShape.size,u=this.labelPosition,c=this.labelFixedSpacing,f=(0,s.__read)([0,0,0],3),d=f[0],h=f[1],p=f[2],m=null!=o?o:l;return r?(p=m,h=c,"positive"===i?"right"===u?(d=m,p=m):"bottom"===u&&(d=p):"negative"===i&&("top"===u?d=l:"left"===u&&(d=l))):"positive"===i?"right"===u?h=m:"bottom"===u&&(d=l+c,h=a):"negative"===i&&("left"===u?h=a:"top"===u&&(h=a)),{offset:d,spacing:h,tickLength:p};},enumerable:!1,configurable:!0}),r.prototype.adjustLabel=function(){if(this.attributes.showLabel){var n=this.ribbonBBox,r=n.x,i=n.y,a=n.width,o=n.height,l=this.labelAxisStyle,u=l.offset,c=l.spacing,f=l.tickLength,d=(0,s.__read)(this.ifHorizontal([[r,i+u],[r+a,i+u]],[[r+u,i+o],[r+u,i]]),2),h=d[0],p=d[1];this.label.update({startPos:h,endPos:p,tickLength:f,labelSpacing:c},!1);}},r.prototype.bindEvents=function(){this.style.cursor="pointer",this.ribbon.on("pointerdown",this.onDragStart("ribbon")),this.ribbon.on("pointermove",this.onHovering),this.addEventListener("pointerout",this.hideIndicator);},r.prototype.showIndicator=function(n,r){if(void 0===r&&(r="".concat(n)),!this.attributes.showIndicator||"number"!=typeof n){this.hideIndicator();return;}var i=this.range,a=i.min,o=i.max,s=this.ribbonBBox,l=s.x,u=s.y,f=(0,c.default)(n,a,o),d=this.getOffset(f),h=this.ifHorizontal([d+l,u],[l,d+u]);this.indicator.update({x:h[0],y:h[1],position:this.ifHorizontal("top","left"),labelText:r}),(0,v.show)(this.indicator.node());},r.prototype.hideIndicator=function(){(0,v.hide)(this.indicator.node());},r.prototype.updateMouse=function(){this.attributes.slidable&&(this.style.cursor="grabbing");},r.prototype.setSelection=function(n,r){this.updateSelection(n,r);},r.prototype.updateSelection=function(n,r,i){void 0===i&&(i=!1);var a,o=(0,s.__read)(this.selection,2),l=o[0],u=o[1],c=(0,s.__read)([n,r],2),f=c[0],d=c[1];i&&(f+=l,d+=u);var h=this.range,p=h.min,m=h.max;f=(a=(0,s.__read)((0,F.getSafetySelections)([p,m],[f,d],this.selection),2))[0],d=a[1],this.update({defaultValue:[f,d]}),this.dispatchSelection();},Object.defineProperty(r.prototype,"step",{get:function(){var n=this.attributes.step,r=void 0===n?1:n,i=this.range,a=i.min,o=i.max;return(0,d.default)(r)?(0,x.toPrecision)((o-a)*I.STEP_RATIO,0):r;},enumerable:!1,configurable:!0}),r.prototype.getTickValue=function(n){var r=this.attributes,i=r.data,a=r.block,o=this.range.min;return a?B(i.map(function(n){return n.value;}),n).tick:(0,F.getStepValueByValue)(n,this.step,o);},r.prototype.getValueByCanvasPoint=function(n){var r=this.range,i=r.min,a=r.max,o=(0,s.__read)(this.ribbon.node().getPosition(),2),l=o[0],u=o[1],f=this.ifHorizontal(l,u),d=this.ifHorizontal.apply(this,(0,s.__spreadArray)([],(0,s.__read)((0,g.getEventPos)(n)),!1));return(0,c.default)(this.getOffset(d-f,!0),i,a);},r.prototype.getOffset=function(n,r){void 0===r&&(r=!1);var i=this.range,a=i.min,o=i.max,s=this.ribbonShape.length,l=this.eventToOffsetScale;return(l.update({domain:[a,o],range:[0,s]}),r)?l.invert(n):l.map(n);},r.prototype.getRealSelection=function(n){var r=this.range.max,i=(0,s.__read)(n,2),a=i[0],o=i[1];return this.ifHorizontal([a,o],[r-o,r-a]);},r.prototype.getRealValue=function(n){var r=this.range.max;return this.ifHorizontal(n,r-n);},r.prototype.dispatchSelection=function(){var n=this.getRealSelection(this.selection),r=new o.CustomEvent("valuechange",{detail:{value:n}});this.dispatchEvent(r);},r.prototype.dispatchIndicated=function(n,r){var i=this,a=this.range.max,s=this.ifHorizontal(function(){return{value:n,range:r};},function(){return{value:a-n,range:r?i.getRealSelection(r):void 0};}),l=new o.CustomEvent("indicate",{detail:s});this.dispatchEvent(l);},r;}(h.Component),H=i("c25722f9"),W=i("59672304"),X=i("cebf455b"),q=i("cbc6046a"),$=i("6c85d1a4"),Y=i("cfce14bf"),Z=i("da9a34de"),K=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};function Q(n){let{domain:r}=n.getOptions(),[i,a]=[r[0],(0,Y.lastOf)(r)];return[i,a];}let J=n=>{let{labelFormatter:r,layout:i,order:a,orientation:s,position:l,size:u,title:c,style:f,crossPadding:d,padding:h}=n,p=K(n,["labelFormatter","layout","order","orientation","position","size","title","style","crossPadding","padding"]);return({scales:a,value:s,theme:u,scale:d})=>{let{bbox:h}=s,{x:m,y:g,width:v,height:y}=h,_=(0,Z.inferComponentLayout)(l,i),{legendContinuous:b={}}=u,x=(0,Z.adaptor)(Object.assign({},b,Object.assign(Object.assign({titleText:(0,Z.titleContent)(c),labelAlign:"value",labelFormatter:"string"==typeof r?n=>(0,$.format)(r)(n.label):r},function(n,r,i,a,s,l){let u=(0,Z.scaleOf)(n,"color"),c=function(n,r,i){var a;let{size:o}=r,s=(0,Z.inferComponentShape)(n,r,i);return a=s.orientation,s.size=o,(0,Z.isHorizontal)(a)?s.height=o:s.width=o,s;}(i,a,s);if(u instanceof q.Threshold){let{range:n}=u.getOptions(),[r,i]=Q(u);return u instanceof X.Quantize||u instanceof W.Quantile?function(n,r,i,a,o){let s=r.thresholds;return Object.assign(Object.assign({},n),{color:o,data:[i,...s,a].map(n=>({value:n/a,label:String(n)}))});}(c,u,r,i,n):function(n,r,i){let a=[-1/0,...r.thresholds,1/0].map((n,r)=>({value:r,label:n}));return Object.assign(Object.assign({},n),{data:a,color:i,labelFilter:(n,r)=>r>0&&r<a.length-1});}(c,u,n);}return function(n,r,i,a,s,l){let{length:u}=n,c=i||a,f=s.color?l.legendContinuous.ribbonFill||"black":l.color,d=r||function(n,r){let i=n.getOptions(),a=n.clone();return a.update(Object.assign(Object.assign({},i),{range:[(0,o.parseColor)(r).toString()]})),a;}(c,f),[h,p]=Q(d),[m,g]=Q([r,i,a].filter(n=>void 0!==n).find(n=>!(n instanceof H.Constant)));return Object.assign(Object.assign({},n),{domain:[m,g],data:d.getTicks().map(n=>({value:n})),color:Array(Math.floor(u)).fill(0).map((n,r)=>{let i=(p-h)/(u-1)*r+h,o=d.map(i)||f,s=a?a.map(i):1;return o.replace(/rgb[a]*\(([\d]{1,3}) *, *([\d]{1,3}) *, *([\d]{1,3})[\S\s]*\)/,(n,r,i,a)=>`rgba(${r}, ${i}, ${a}, ${s})`);})});}(c,u,(0,Z.scaleOf)(n,"size"),(0,Z.scaleOf)(n,"opacity"),r,l);}(a,d,s,n,J,u)),f),p)),E=new Z.G2Layout({style:Object.assign(Object.assign({x:m,y:g,width:v,height:y},_),{subOptions:x})});return E.appendChild(new G({className:"legend-continuous",style:x})),E;};};J.props={defaultPosition:"top",defaultOrientation:"vertical",defaultOrder:1,defaultSize:60,defaultLength:200,defaultLegendSize:60,defaultPadding:[20,10],defaultCrossPadding:[12,12]};},"2e660475":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"ProForm",{enumerable:!0,get:function(){return h;}});var a=i("777fffbe"),o=a._(i("e4870cf0")),s=a._(i("f34e933b")),l=i("cd1e34ba"),u=i("a6284f72"),c=a._(i("da74b122")),f=a._(i("ef77f514")),d=i("dac8af92");function h(n){return(0,d.jsx)(l.BaseForm,(0,o.default)({layout:"vertical",contentRender:function(n,r){return(0,d.jsxs)(d.Fragment,{children:[n,r]});}},n));}h.Group=c.default,h.useForm=s.default.useForm,h.Item=f.default,h.useWatch=s.default.useWatch,h.ErrorList=s.default.ErrorList,h.Provider=s.default.Provider,h.useFormInstance=s.default.useFormInstance,h.EditOrReadOnlyContext=u.EditOrReadOnlyContext;},"2eaee10a":function(n,r,i){n.exports=function(n,r){if(null==n)return{};var i={};for(var a in n)if(({}).hasOwnProperty.call(n,a)){if(-1!==r.indexOf(a))continue;i[a]=n[a];}return i;},n.exports.__esModule=!0,n.exports.default=n.exports;},"2ef2ced3":function(n,r,i){function a(n){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n;}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n;})(n);}function o(n,r){void 0===r&&(r={});for(var i=function(n){for(var r=[],i=0;i<n.length;){var a=n[i];if("*"===a||"+"===a||"?"===a){r.push({type:"MODIFIER",index:i,value:n[i++]});continue;}if("\\"===a){r.push({type:"ESCAPED_CHAR",index:i++,value:n[i++]});continue;}if("{"===a){r.push({type:"OPEN",index:i,value:n[i++]});continue;}if("}"===a){r.push({type:"CLOSE",index:i,value:n[i++]});continue;}if(":"===a){for(var o="",s=i+1;s<n.length;){var l=n.charCodeAt(s);if(l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||95===l){o+=n[s++];continue;}break;}if(!o)throw TypeError("Missing parameter name at "+i);r.push({type:"NAME",index:i,value:o}),i=s;continue;}if("("===a){var u=1,c="",s=i+1;if("?"===n[s])throw TypeError('Pattern cannot start with "?" at '+s);for(;s<n.length;){if("\\"===n[s]){c+=n[s++]+n[s++];continue;}if(")"===n[s]){if(0==--u){s++;break;}}else if("("===n[s]&&(u++,"?"!==n[s+1]))throw TypeError("Capturing groups are not allowed at "+s);c+=n[s++];}if(u)throw TypeError("Unbalanced pattern at "+i);if(!c)throw TypeError("Missing pattern at "+i);r.push({type:"PATTERN",index:i,value:c}),i=s;continue;}r.push({type:"CHAR",index:i,value:n[i++]});}return r.push({type:"END",index:i,value:""}),r;}(n),a=r.prefixes,o=void 0===a?"./":a,s="[^"+u(r.delimiter||"/#?")+"]+?",l=[],c=0,f=0,d="",h=function(n){if(f<i.length&&i[f].type===n)return i[f++].value;},p=function(n){var r=h(n);if(void 0!==r)return r;var a=i[f];throw TypeError("Unexpected "+a.type+" at "+a.index+", expected "+n);},m=function(){for(var n,r="";n=h("CHAR")||h("ESCAPED_CHAR");)r+=n;return r;};f<i.length;){var g=h("CHAR"),v=h("NAME"),y=h("PATTERN");if(v||y){var _=g||"";-1===o.indexOf(_)&&(d+=_,_=""),d&&(l.push(d),d=""),l.push({name:v||c++,prefix:_,suffix:"",pattern:y||s,modifier:h("MODIFIER")||""});continue;}var b=g||h("ESCAPED_CHAR");if(b){d+=b;continue;}if(d&&(l.push(d),d=""),h("OPEN")){var _=m(),x=h("NAME")||"",E=h("PATTERN")||"",w=m();p("CLOSE"),l.push({name:x||(E?c++:""),pattern:x&&!E?s:E,prefix:_,suffix:w,modifier:h("MODIFIER")||""});continue;}p("END");}return l;}function s(n,r){void 0===r&&(r={});var i=c(r),o=r.encode,s=void 0===o?function(n){return n;}:o,l=r.validate,u=void 0===l||l,f=n.map(function(n){if("object"===a(n))return RegExp("^(?:"+n.pattern+")$",i);});return function(r){for(var i="",a=0;a<n.length;a++){var o=n[a];if("string"==typeof o){i+=o;continue;}var l=r?r[o.name]:void 0,c="?"===o.modifier||"*"===o.modifier,d="*"===o.modifier||"+"===o.modifier;if(Array.isArray(l)){if(!d)throw TypeError('Expected "'+o.name+'" to not repeat, but got an array');if(0===l.length){if(c)continue;throw TypeError('Expected "'+o.name+'" to not be empty');}for(var h=0;h<l.length;h++){var p=s(l[h],o);if(u&&!f[a].test(p))throw TypeError('Expected all "'+o.name+'" to match "'+o.pattern+'", but got "'+p+'"');i+=o.prefix+p+o.suffix;}continue;}if("string"==typeof l||"number"==typeof l){var p=s(String(l),o);if(u&&!f[a].test(p))throw TypeError('Expected "'+o.name+'" to match "'+o.pattern+'", but got "'+p+'"');i+=o.prefix+p+o.suffix;continue;}if(!c){var m=d?"an array":"a string";throw TypeError('Expected "'+o.name+'" to be '+m);}}return i;};}function l(n,r,i){void 0===i&&(i={});var a=i.decode,o=void 0===a?function(n){return n;}:a;return function(i){var a=n.exec(i);if(!a)return!1;for(var s=a[0],l=a.index,u=Object.create(null),c=1;c<a.length;c++)!function(n){if(void 0!==a[n]){var i=r[n-1];"*"===i.modifier||"+"===i.modifier?u[i.name]=a[n].split(i.prefix+i.suffix).map(function(n){return o(n,i);}):u[i.name]=o(a[n],i);}}(c);return{path:s,index:l,params:u};};}function u(n){return n.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1");}function c(n){return n&&n.sensitive?"":"i";}function f(n,r,i){void 0===i&&(i={});for(var a=i.strict,o=void 0!==a&&a,s=i.start,l=i.end,f=i.encode,d=void 0===f?function(n){return n;}:f,h="["+u(i.endsWith||"")+"]|$",p="["+u(i.delimiter||"/#?")+"]",m=void 0===s||s?"^":"",g=0;g<n.length;g++){var v=n[g];if("string"==typeof v)m+=u(d(v));else{var y=u(d(v.prefix)),_=u(d(v.suffix));if(v.pattern){if(r&&r.push(v),y||_){if("+"===v.modifier||"*"===v.modifier){var b="*"===v.modifier?"?":"";m+="(?:"+y+"((?:"+v.pattern+")(?:"+_+y+"(?:"+v.pattern+"))*)"+_+")"+b;}else m+="(?:"+y+"("+v.pattern+")"+_+")"+v.modifier;}else m+="("+v.pattern+")"+v.modifier;}else m+="(?:"+y+_+")"+v.modifier;}}if(void 0===l||l)o||(m+=p+"?"),m+=i.endsWith?"(?="+h+")":"$";else{var x=n[n.length-1],E="string"==typeof x?p.indexOf(x[x.length-1])>-1:void 0===x;o||(m+="(?:"+p+"(?="+h+"))?"),E||(m+="(?="+p+"|"+h+")");}return new RegExp(m,c(i));}function d(n,r,i){return n instanceof RegExp?function(n,r){if(!r)return n;var i=n.source.match(/\((?!\?)/g);if(i)for(var a=0;a<i.length;a++)r.push({name:a,prefix:"",suffix:"",modifier:"",pattern:""});return n;}(n,r):Array.isArray(n)?RegExp("(?:"+n.map(function(n){return d(n,r,i).source;}).join("|")+")",c(i)):f(o(n,i),r,i);}Object.defineProperty(r,"__esModule",{value:!0}),r.pathToRegexp=r.tokensToRegexp=r.regexpToFunction=r.match=r.tokensToFunction=r.compile=r.parse=void 0,r.parse=o,r.compile=function(n,r){return s(o(n,r),r);},r.tokensToFunction=s,r.match=function(n,r){var i=[];return l(d(n,i,r),i,r);},r.regexpToFunction=l,r.tokensToRegexp=f,r.pathToRegexp=d;},"2ef7fc5f":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{getStyle:function(){return s;},hide:function(){return u;},setStyle:function(){return l;},show:function(){return c;}});var a=i("df2e18b5");let o={visibility:"visible",opacity:1,fillOpacity:1,strokeOpacity:1};function s(n,r){let i;return(0,a.traverseElements)(n,n=>{var a;return"g"!==n.tagName&&(null===(a=n.style)||void 0===a?void 0:a[r])!==void 0&&(i=n.style[r],!0);}),null!=i?i:o[r];}function l(n,r,i,a){n.style[r]=i,a&&n.children.forEach(n=>l(n,r,i,a));}function u(n){l(n,"visibility","hidden",!0);}function c(n){l(n,"visibility","visible",!0);}},"2f051558":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{mark:function(){return u;}});var a=i("d8554caa"),o=i("2cb3cf04"),s=this&&this.__assign||function(){return(s=Object.assign||function(n){for(var r,i=1,a=arguments.length;i<a;i++)for(var o in r=arguments[i])Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n;}).apply(this,arguments);};function l(n){var r=n.options,i=r.stack,l=r.tooltip,u=r.xField;if(!i)return n;var c=o.CONFIG_SHAPE.map(function(n){return n.type;}).filter(function(n){return!!n;}),f=!1;return c.forEach(function(n){r[n]&&(f=!0,(0,a.set)(r,[n,"stack"],s({y1:"y"},"object"==typeof i?i:{})));}),!f||(0,a.isBoolean)(l)||l||(0,a.set)(r,"tooltip",{title:u,items:[{channel:"y"}]}),n;}function u(n){return(0,a.flow)(l)(n);}},"2f6833c8":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});var a=function(n){return"object"==typeof n&&null!==n;};},"2faf3d77":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{FieldContext:function(){return a;},default:function(){return o;}});var a=i("777fffbe")._(i("609f48be")).default.createContext({}),o=a;},"2fdb87bd":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return o;}});var a=n=>()=>n;function o(n,r){var i=r-n;return i?function(r){return n+r*i;}:a(isNaN(n)?r:n);}},"30e56a71":function(n,r,i){var a=i("12787c53"),o=i("459d5e7d"),s=i("21446f8a");n.exports=function(n){return a(n,s,o);};},"30f8b1e3":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return u;}});var a=i("777fffbe"),o=a._(i("5ca9cae9")),s=a._(i("1daaa764")),l=a._(i("e9b37d7e")),u=function(n,r,i){if(!(0,s.default)(n)&&!(0,l.default)(n))return n;var a=i;return(0,o.default)(n,function(n,i){a=r(a,n,i);}),a;};},"31280e27":function(n,r,i){"use strict";var a=i("0fbce506");function o(){var n={},r=0,i=0,a=0;return{add:function(o,s){s||(s=o,o=0),o>i?i=o:o<a&&(a=o),n[o]||(n[o]=[]),n[o].push(s),r++;},process:function(){for(var r=a;r<=i;r++)for(var o=n[r],s=0;s<o.length;s++)(0,o[s])();},size:function(){return r;}};}n.exports=function(n){var r,i=(n=n||{}).reporter,s=a.getOption(n,"async",!0),l=a.getOption(n,"auto",!0);l&&!s&&(i&&i.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),s=!0);var u=o(),c=!1;function f(){for(c=!0;u.size();){var n=u;u=o(),n.process();}c=!1;}function d(n){return setTimeout(n,0);}return{add:function(n,i){!c&&l&&s&&0===u.size()&&(r=d(f)),u.add(n,i);},force:function(n){c||(void 0===n&&(n=s),r&&(clearTimeout(r),r=null),n?r=d(f):f());}};};},"314b2508":function(n,r,i){n.exports=function(){};},"3185db87":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return l;}});var a=i("777fffbe"),o=a._(i("5ca9cae9")),s=a._(i("da5c7e2c")),l=Object.keys?function(n){return Object.keys(n);}:function(n){var r=[];return(0,o.default)(n,function(i,a){(0,s.default)(n)&&"prototype"===a||r.push(a);}),r;};},"31b9c66a":function(n,r,i){"use strict";function a(n){return function(){return n;};}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},"31e3f343":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return d;}});var a=i("777fffbe"),o=i("f5a71f8a"),s=a._(o),l=i("06753dad"),u=a._(l),c=i("f6fedc10"),f=a._(c);function d(n){var r=this.__data__=new s.default(n);this.size=r.size;}d.prototype.clear=function(){this.__data__=new s.default,this.size=0;},d.prototype.delete=function(n){var r=this.__data__,i=r.delete(n);return this.size=r.size,i;},d.prototype.get=function(n){return this.__data__.get(n);},d.prototype.has=function(n){return this.__data__.has(n);},d.prototype.set=function(n,r){var i=this.__data__;if(i instanceof s.default){var a=i.__data__;if(!u.default||a.length<199)return a.push([n,r]),this.size=++i.size,this;i=this.__data__=new f.default(a);}return i.set(n,r),this.size=i.size,this;};},"320db315":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return p;}});var a=i("777fffbe"),o=i("a854094b"),s=a._(o),l=i("553ee311"),u=i("9479dab9"),c=i("84311e53"),f=i("7d3f4529");let d={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},h={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"};class p{constructor(n){(0,s.default)(this,"version","DEFAUlTMAP"),(0,s.default)(this,"map",void 0),(0,s.default)(this,"simpleMapCoord",new f.SimpleMapCoord),(0,s.default)(this,"bgColor","rgba(0.0, 0.0, 0.0, 0.0)"),(0,s.default)(this,"config",void 0),(0,s.default)(this,"configService",void 0),(0,s.default)(this,"coordinateSystemService",void 0),(0,s.default)(this,"eventEmitter",void 0),(0,s.default)(this,"markerContainer",void 0),(0,s.default)(this,"cameraChangedCallback",void 0),(0,s.default)(this,"$mapContainer",void 0),(0,s.default)(this,"handleCameraChanged",n=>{let{lat:r,lng:i}=this.map.getCenter();this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:this.map.getBearing(),center:[i,r],viewportHeight:this.map.transform.height,pitch:this.map.getPitch(),viewportWidth:this.map.transform.width,zoom:this.map.getZoom(),cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport);}),this.config=n.mapConfig,this.configService=n.globalConfigService,this.coordinateSystemService=n.coordinateSystemService,this.eventEmitter=new c.EventEmitter;}setBgColor(n){this.bgColor=n;}addMarkerContainer(){let n=this.map.getCanvasContainer();this.markerContainer=u.DOM.create("div","l7-marker-container",n),this.markerContainer.setAttribute("tabindex","-1");}getMarkerContainer(){return this.markerContainer;}getOverlayContainer(){}getCanvasOverlays(){}on(n,r){-1!==l.MapServiceEvent.indexOf(n)?this.eventEmitter.on(n,r):this.map.on(h[n]||n,r);}off(n,r){this.map.off(h[n]||n,r),this.eventEmitter.off(n,r);}getContainer(){return this.map.getContainer();}getMapCanvasContainer(){return this.map.getCanvasContainer();}getSize(){if("SIMPLE"===this.version)return this.simpleMapCoord.getSize();let n=this.map.transform;return[n.width,n.height];}getType(){return"default";}getZoom(){return this.map.getZoom();}setZoom(n){return this.map.setZoom(n);}getCenter(){return this.map.getCenter();}setCenter(n){this.map.setCenter(n);}getPitch(){return this.map.getPitch();}getRotation(){return this.map.getBearing();}getBounds(){return this.map.getBounds().toArray();}getMinZoom(){return this.map.getMinZoom();}getMaxZoom(){return this.map.getMaxZoom();}setRotation(n){this.map.setBearing(n);}zoomIn(n,r){this.map.zoomIn(n,r);}zoomOut(n,r){this.map.zoomOut(n,r);}setPitch(n){return this.map.setPitch(n);}panTo(n){this.map.panTo(n);}panBy(n=0,r=0){this.map.panBy([n,r]);}fitBounds(n,r){this.map.fitBounds(n,r);}setMaxZoom(n){this.map.setMaxZoom(n);}setMinZoom(n){this.map.setMinZoom(n);}setMapStatus(n){!0===n.doubleClickZoom&&this.map.doubleClickZoom.enable(),!1===n.doubleClickZoom&&this.map.doubleClickZoom.disable(),!1===n.dragEnable&&this.map.dragPan.disable(),!0===n.dragEnable&&this.map.dragPan.enable(),!1===n.rotateEnable&&this.map.dragRotate.disable(),!0===n.dragEnable&&this.map.dragRotate.enable(),!1===n.keyboardEnable&&this.map.keyboard.disable(),!0===n.keyboardEnable&&this.map.keyboard.enable(),!1===n.zoomEnable&&this.map.scrollZoom.disable(),!0===n.zoomEnable&&this.map.scrollZoom.enable();}setZoomAndCenter(n,r){this.map.flyTo({zoom:n,center:r});}setMapStyle(n){var r;null===(r=this.map)||void 0===r||r.setStyle(this.getMapStyleValue(n));}meterToCoord(n,r){return 1;}pixelToLngLat(n){return this.map.unproject(n);}lngLatToPixel(n){return this.map.project(n);}containerToLngLat(n){return this.map.unproject(n);}lngLatToContainer(n){return this.map.project(n);}getMapStyle(){try{var n;let r=null!==(n=this.map.getStyle().sprite)&&void 0!==n?n:"";if(/^mapbox:\/\/sprites\/zcxduo\/\w+\/\w+$/.test(r))return null==r?void 0:r.replace(/\/\w+$/,"").replace(/sprites/,"styles");return r;}catch(n){return"";}}getMapStyleConfig(){return d;}getMapStyleValue(n){var r;return null!==(r=this.getMapStyleConfig()[n])&&void 0!==r?r:n;}destroy(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null);}emit(n,...r){this.eventEmitter.emit(n,...r);}once(n,...r){this.eventEmitter.once(n,...r);}getMapContainer(){return this.$mapContainer;}exportMap(n){var r;let i=null===(r=this.map)||void 0===r?void 0:r.getCanvas();return"jpg"===n?null==i?void 0:i.toDataURL("image/jpeg"):null==i?void 0:i.toDataURL("image/png");}onCameraChanged(n){this.cameraChangedCallback=n;}creatMapContainer(n){let r=n;return"string"==typeof n&&(r=document.getElementById(n)),r;}updateView(n){this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:n.bearing,center:n.center,viewportHeight:n.viewportHeight,pitch:n.pitch,viewportWidth:n.viewportWidth,zoom:n.zoom,cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport);}updateCoordinateSystemService(){let{offsetCoordinate:n=!0}=this.config;this.viewport.getZoom()>12&&n?this.coordinateSystemService.setCoordinateSystem(l.CoordinateSystem.LNGLAT_OFFSET):this.coordinateSystemService.setCoordinateSystem(l.CoordinateSystem.LNGLAT);}}},"32f028e7":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{Continuous:function(){return y;}});var a=i("777fffbe"),o=i("8704c632"),s=a._(o),l=i("75aabd79"),u=i("8c0d48bf"),c=i("792e6f22"),f=i("bbb27eba"),d=i("65a1f2fd"),h=i("73ee4a11"),p=i("d2953067");let m=(n,r,i)=>{let a,o;let[s,l]=n,[u,f]=r;return s<l?(a=(0,c.createNormalize)(s,l),o=i(u,f)):(a=(0,c.createNormalize)(l,s),o=i(f,u)),(0,d.compose)(o,a);},g=(n,r,i)=>{let a=Math.min(n.length,r.length)-1,o=Array(a),s=Array(a),l=n[0]>n[a],u=l?[...n].reverse():n,h=l?[...r].reverse():r;for(let n=0;n<a;n+=1)o[n]=(0,c.createNormalize)(u[n],u[n+1]),s[n]=i(h[n],h[n+1]);return r=>{let i=(0,f.bisect)(n,r,1,a)-1,l=o[i],u=s[i];return(0,d.compose)(u,l)(r);};},v=(n,r,i,a)=>(Math.min(n.length,r.length)>2?g:m)(n,r,a?u.createInterpolateRound:i);class y extends l.Base{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:u.createInterpolateNumber,tickCount:5};}map(n){return(0,p.isValid)(n)?this.output(n):this.options.unknown;}invert(n){return(0,p.isValid)(n)?this.input(n):this.options.unknown;}nice(){if(!this.options.nice)return;let[n,r,i,...a]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(n,r,i,...a);}getTicks(){let{tickMethod:n}=this.options,[r,i,a,...o]=this.getTickMethodOptions();return n(r,i,a,...o);}getTickMethodOptions(){let{domain:n,tickCount:r}=this.options;return[n[0],n[n.length-1],r];}chooseNice(){return h.d3LinearNice;}rescale(){this.nice();let[n,r]=this.chooseTransforms();this.composeOutput(n,this.chooseClamp(n)),this.composeInput(n,r,this.chooseClamp(r));}chooseClamp(n){let{clamp:r,range:i}=this.options,a=this.options.domain.map(n),o=Math.min(a.length,i.length);return r?function(n,r){let i=r<n?r:n,a=n>r?n:r;return n=>Math.min(Math.max(i,n),a);}(a[0],a[o-1]):s.default;}composeOutput(n,r){let{domain:i,range:a,round:o,interpolate:s}=this.options,l=v(i.map(n),a,s,o);this.output=(0,d.compose)(l,r,n);}composeInput(n,r,i){let{domain:a,range:o}=this.options,s=v(o,a.map(n),u.createInterpolateNumber);this.input=(0,d.compose)(r,i,s);}}},"3301e887":function(n,r,i){var a=i("d91aaf3b"),o=i("bbc15be8"),s=i("3cd6a52e");n.exports=function(n){return"string"==typeof n||!o(n)&&s(n)&&"[object String]"==a(n);};},"3316fbe3":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"packEncloseRandom",{enumerable:!0,get:function(){return o;}});var a=i("858d251b");function o(n,r){for(var i,o,d=0,h=(n=(0,a.shuffle)(Array.from(n),r)).length,p=[];d<h;)i=n[d],o&&l(o,i)?++d:(o=function(n){switch(n.length){case 1:var r;return{x:(r=n[0]).x,y:r.y,r:r.r};case 2:return c(n[0],n[1]);case 3:return f(n[0],n[1],n[2]);}}(p=function(n,r){var i,a;if(u(r,n))return[r];for(i=0;i<n.length;++i)if(s(r,n[i])&&u(c(n[i],r),n))return[n[i],r];for(i=0;i<n.length-1;++i)for(a=i+1;a<n.length;++a)if(s(c(n[i],n[a]),r)&&s(c(n[i],r),n[a])&&s(c(n[a],r),n[i])&&u(f(n[i],n[a],r),n))return[n[i],n[a],r];throw Error();}(p,i)),d=0);return o;}function s(n,r){var i=n.r-r.r,a=r.x-n.x,o=r.y-n.y;return i<0||i*i<a*a+o*o;}function l(n,r){var i=n.r-r.r+1e-9*Math.max(n.r,r.r,1),a=r.x-n.x,o=r.y-n.y;return i>0&&i*i>a*a+o*o;}function u(n,r){for(var i=0;i<r.length;++i)if(!l(n,r[i]))return!1;return!0;}function c(n,r){var i=n.x,a=n.y,o=n.r,s=r.x,l=r.y,u=r.r,c=s-i,f=l-a,d=u-o,h=Math.sqrt(c*c+f*f);return{x:(i+s+c/h*d)/2,y:(a+l+f/h*d)/2,r:(h+o+u)/2};}function f(n,r,i){var a=n.x,o=n.y,s=n.r,l=r.x,u=r.y,c=r.r,f=i.x,d=i.y,h=i.r,p=a-l,m=a-f,g=o-u,v=o-d,y=c-s,_=h-s,b=a*a+o*o-s*s,x=b-l*l-u*u+c*c,E=b-f*f-d*d+h*h,w=m*g-p*v,S=(g*E-v*x)/(2*w)-a,T=(v*y-g*_)/w,A=(m*x-p*E)/(2*w)-o,C=(p*_-m*y)/w,O=T*T+C*C-1,M=2*(s+S*T+A*C),R=S*S+A*A-s*s,P=-(Math.abs(O)>1e-6?(M+Math.sqrt(M*M-4*O*R))/(2*O):R/M);return{x:a+S+T*P,y:o+A+C*P,r:P};}},"33a06475":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),r.TokenData=void 0,r.parse=h,r.compile=function(n,r={}){let{encode:i=encodeURIComponent,delimiter:o="/"}=r,s=function n(r,i,o){let s=r.map(r=>(function(r,i,o){if("text"===r.type)return()=>[r.value];if("group"===r.type){let a=n(r.tokens,i,o);return n=>{let[r,...i]=a(n);return i.length?[""]:[r];};}let s=o||a;return"wildcard"===r.type&&!1!==o?n=>{let a=n[r.name];if(null==a)return["",r.name];if(!Array.isArray(a)||0===a.length)throw TypeError(`Expected "${r.name}" to be a non-empty array`);return[a.map((n,i)=>{if("string"!=typeof n)throw TypeError(`Expected "${r.name}/${i}" to be a string`);return s(n);}).join(i)];}:n=>{let i=n[r.name];if(null==i)return["",r.name];if("string"!=typeof i)throw TypeError(`Expected "${r.name}" to be a string`);return[s(i)];};})(r,i,o));return n=>{let r=[""];for(let i of s){let[a,...o]=i(n);r[0]+=a,r.push(...o);}return r;};}((n instanceof d?n:h(n,r)).tokens,o,i);return function(n={}){let[r,...i]=s(n);if(i.length)throw TypeError(`Missing parameters: ${i.join(", ")}`);return r;};},r.match=function(n,r={}){let{decode:i=decodeURIComponent,delimiter:o="/"}=r,{regexp:s,keys:l}=p(n,r),u=l.map(n=>!1===i?a:"param"===n.type?i:n=>n.split(o).map(i));return function(n){let r=s.exec(n);if(!r)return!1;let i=r[0],a=Object.create(null);for(let n=1;n<r.length;n++){if(void 0===r[n])continue;let i=l[n-1],o=u[n-1];a[i.name]=o(r[n]);}return{path:i,params:a};};},r.pathToRegexp=p,r.stringify=function(n){return n.tokens.map(function n(r,i,a){var l;if("text"===r.type)return r.value.replace(/[{}()\[\]+?!:*]/g,"\\$&");if("group"===r.type)return`{${r.tokens.map(n).join("")}}`;let u=function(n){let[r,...i]=n;return!!o.test(r)&&i.every(n=>s.test(n));}(r.name)&&((null==(l=a[i+1])?void 0:l.type)!=="text"||!s.test(l.value[0]))?r.name:JSON.stringify(r.name);if("param"===r.type)return`:${u}`;if("wildcard"===r.type)return`*${u}`;throw TypeError(`Unexpected token: ${r}`);}).join("");};let a=n=>n,o=/^[$_\p{ID_Start}]$/u,s=/^[$\u200c\u200d\p{ID_Continue}]$/u,l="https://git.new/pathToRegexpError",u={"{":"{","}":"}","(":"(",")":")","[":"[","]":"]","+":"+","?":"?","!":"!"};function c(n){return n.replace(/[.+*?^${}()[\]|/\\]/g,"\\$&");}class f{constructor(n){this.tokens=n;}peek(){if(!this._peek){let n=this.tokens.next();this._peek=n.value;}return this._peek;}tryConsume(n){let r=this.peek();if(r.type===n)return this._peek=void 0,r.value;}consume(n){let r=this.tryConsume(n);if(void 0!==r)return r;let{type:i,index:a}=this.peek();throw TypeError(`Unexpected ${i} at ${a}, expected ${n}: ${l}`);}text(){let n,r="";for(;n=this.tryConsume("CHAR")||this.tryConsume("ESCAPED");)r+=n;return r;}}class d{constructor(n){this.tokens=n;}}function h(n,r={}){let{encodePath:i=a}=r,c=new f(function*(n){let r=[...n],i=0;function a(){let n="";if(o.test(r[++i]))for(n+=r[i];s.test(r[++i]);)n+=r[i];else if('"'===r[i]){let a=i;for(;i<r.length;){if('"'===r[++i]){i++,a=0;break;}"\\"===r[i]?n+=r[++i]:n+=r[i];}if(a)throw TypeError(`Unterminated quote at ${a}: ${l}`);}if(!n)throw TypeError(`Missing parameter name at ${i}: ${l}`);return n;}for(;i<r.length;){let n=r[i],o=u[n];if(o)yield{type:o,index:i++,value:n};else if("\\"===n)yield{type:"ESCAPED",index:i++,value:r[i++]};else if(":"===n){let n=a();yield{type:"PARAM",index:i,value:n};}else if("*"===n){let n=a();yield{type:"WILDCARD",index:i,value:n};}else yield{type:"CHAR",index:i,value:r[i++]};}return{type:"END",index:i,value:""};}(n));return new d(function n(r){let a=[];for(;;){let o=c.text();o&&a.push({type:"text",value:i(o)});let s=c.tryConsume("PARAM");if(s){a.push({type:"param",name:s});continue;}let l=c.tryConsume("WILDCARD");if(l){a.push({type:"wildcard",name:l});continue;}if(c.tryConsume("{")){a.push({type:"group",tokens:n("}")});continue;}return c.consume(r),a;}}("END"));}function p(n,r={}){let{delimiter:i="/",end:a=!0,sensitive:o=!1,trailing:s=!0}=r,u=[],f=[];for(let{tokens:a}of(Array.isArray(n)?n:[n]).map(n=>n instanceof d?n:h(n,r)))for(let n of function* n(r,i,a){if(i===r.length)return yield a;let o=r[i];if("group"===o.type){let s=a.slice();for(let a of n(o.tokens,0,s))yield*n(r,i+1,a);}else a.push(o);yield*n(r,i+1,a);}(a,0,[])){let r=function(n,r,i){let a="",o="",s=!0;for(let f=0;f<n.length;f++){let d=n[f];if("text"===d.type){a+=c(d.value),o+=d.value,s||(s=d.value.includes(r));continue;}if("param"===d.type||"wildcard"===d.type){var u;if(!s&&!o)throw TypeError(`Missing text after "${d.name}": ${l}`);"param"===d.type?a+=`(${(u=s?"":o).length<2?r.length<2?`[^${c(r+u)}]`:`(?:(?!${c(r)})[^${c(u)}])`:r.length<2?`(?:(?!${c(u)})[^${c(r)}])`:`(?:(?!${c(u)}|${c(r)})[\\s\\S])`}+)`:a+="([\\s\\S]+)",i.push(d),o="",s=!1;continue;}}return a;}(n,i,u);f.push(r);}let m=`^(?:${f.join("|")})`;return s&&(m+=`(?:${c(i)}$)?`),{regexp:new RegExp(m+=a?"$":`(?=${c(i)}|$)`,o?"":"i"),keys:u};}r.TokenData=d;},"33d6cd11":function(n,r,i){"use strict";function a(n,r,i){void 0===i&&(i=!1);var a=n.getBBox(),o=r/Math.max(a.width,a.height);return i&&(n.style.transform="scale(".concat(o,")")),o;}i.d(r,"__esModule",{value:!0}),i.d(r,"scaleToPixel",{enumerable:!0,get:function(){return a;}});},"34ab9b92":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"genericArray",{enumerable:!0,get:function(){return o;}});var a=i("777fffbe")._(i("277e4603"));function o(n,r){var i,o=r?r.length:0,s=n?Math.min(o,n.length):0,l=Array(s),u=Array(o);for(i=0;i<s;++i)l[i]=(0,a.default)(n[i],r[i]);for(;i<o;++i)u[i]=r[i];return function(n){for(i=0;i<s;++i)u[i]=l[i](n);return u;};}},"34c0deef":function(n,r,i){n.exports=function(n){return function(r){return null==r?void 0:r[n];};};},"352bae92":function(n,r,i){"use strict";function a(n){this._context=n;}function o(n){return new a(n);}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return o;}}),a.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._point=0;},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line;},point:function(n,r){switch(n=+n,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 1:this._point=2;default:this._context.lineTo(n,r);}}};},"35f57854":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return eo;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("7cfeda15"),l=a._(s),u=i("e4870cf0"),c=a._(u),f=i("a854094b"),d=a._(f),h=i("ee64167d"),p=a._(h),m=i("99c0cd4c"),g=a._(m),v=i("613f75ca"),y=a._(v),_=i("064ecd09"),b=a._(_),x=i("73098d15"),E=i("ce03fd86"),w=a._(E),S=i("609f48be"),T=o._(S),A=i("4550b551"),C=a._(A),O=i("5e94a672"),M=a._(O),R=i("b57035fe"),P=a._(R),k=i("f815f81c"),I=a._(k),L=i("3cfe0503"),N=a._(L),D=T.createContext(null),F=function(n){var r=n.visible,i=n.maskTransitionName,a=n.getContainer,o=n.prefixCls,s=n.rootClassName,l=n.icons,u=n.countRender,f=n.showSwitch,h=n.showProgress,p=n.current,m=n.transform,g=n.count,v=n.scale,y=n.minScale,_=n.maxScale,x=n.closeIcon,E=n.onActive,w=n.onClose,S=n.onZoomIn,A=n.onZoomOut,C=n.onRotateRight,O=n.onRotateLeft,M=n.onFlipX,R=n.onFlipY,k=n.onReset,L=n.toolbarRender,F=n.zIndex,B=n.image,j=(0,T.useContext)(D),z=l.rotateLeft,U=l.rotateRight,V=l.zoomIn,G=l.zoomOut,H=l.close,W=l.left,X=l.right,q=l.flipX,$=l.flipY,Y="".concat(o,"-operations-operation");T.useEffect(function(){var n=function(n){n.keyCode===P.default.ESC&&w();};return r&&window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n);};},[r]);var Z=function(n,r){n.preventDefault(),n.stopPropagation(),E(r);},K=T.useCallback(function(n){var r=n.type,i=n.disabled,a=n.onClick,s=n.icon;return T.createElement("div",{key:r,className:(0,b.default)(Y,"".concat(o,"-operations-operation-").concat(r),(0,d.default)({},"".concat(o,"-operations-operation-disabled"),!!i)),onClick:a},s);},[Y,o]),Q=f?K({icon:W,onClick:function(n){return Z(n,-1);},type:"prev",disabled:0===p}):void 0,J=f?K({icon:X,onClick:function(n){return Z(n,1);},type:"next",disabled:p===g-1}):void 0,ee=K({icon:$,onClick:R,type:"flipY"}),et=K({icon:q,onClick:M,type:"flipX"}),en=K({icon:z,onClick:O,type:"rotateLeft"}),er=K({icon:U,onClick:C,type:"rotateRight"}),ei=K({icon:G,onClick:A,type:"zoomOut",disabled:v<=y}),ea=K({icon:V,onClick:S,type:"zoomIn",disabled:v===_}),eo=T.createElement("div",{className:"".concat(o,"-operations")},ee,et,en,er,ei,ea);return T.createElement(N.default,{visible:r,motionName:i},function(n){var r=n.className,i=n.style;return T.createElement(I.default,{open:!0,getContainer:null!=a?a:document.body},T.createElement("div",{className:(0,b.default)("".concat(o,"-operations-wrapper"),r,s),style:(0,c.default)((0,c.default)({},i),{},{zIndex:F})},null===x?null:T.createElement("button",{className:"".concat(o,"-close"),onClick:w},x||H),f&&T.createElement(T.Fragment,null,T.createElement("div",{className:(0,b.default)("".concat(o,"-switch-left"),(0,d.default)({},"".concat(o,"-switch-left-disabled"),0===p)),onClick:function(n){return Z(n,-1);}},W),T.createElement("div",{className:(0,b.default)("".concat(o,"-switch-right"),(0,d.default)({},"".concat(o,"-switch-right-disabled"),p===g-1)),onClick:function(n){return Z(n,1);}},X)),T.createElement("div",{className:"".concat(o,"-footer")},h&&T.createElement("div",{className:"".concat(o,"-progress")},u?u(p+1,g):T.createElement("bdi",null,"".concat(p+1," / ").concat(g))),L?L(eo,(0,c.default)((0,c.default)({icons:{prevIcon:Q,nextIcon:J,flipYIcon:ee,flipXIcon:et,rotateLeftIcon:en,rotateRightIcon:er,zoomOutIcon:ei,zoomInIcon:ea},actions:{onActive:E,onFlipY:R,onFlipX:M,onRotateLeft:O,onRotateRight:C,onZoomOut:A,onZoomIn:S,onReset:k,onClose:w},transform:m},j?{current:p,total:g}:{}),{},{image:B})):eo)));});},B=i("044bdec0"),j=a._(B),z=i("08800308"),U=a._(z),V={x:0,y:0,rotate:0,scale:1,flipX:!1,flipY:!1},G=i("a275200c");function H(n,r,i,a){var o=r+i,s=(i-a)/2;if(i>a){if(r>0)return(0,d.default)({},n,s);if(r<0&&o<a)return(0,d.default)({},n,-s);}else if(r<0||o>a)return(0,d.default)({},n,r<0?s:-s);return{};}function W(n,r,i,a){var o=(0,x.getClientSize)(),s=o.width,l=o.height,u=null;return n<=s&&r<=l?u={x:0,y:0}:(n>s||r>l)&&(u=(0,c.default)((0,c.default)({},H("x",i,n,s)),H("y",a,r,l))),u;}function X(n){var r=n.src,i=n.isCustomPlaceholder,a=n.fallback,o=(0,T.useState)(i?"loading":"normal"),s=(0,p.default)(o,2),l=s[0],u=s[1],c=(0,T.useRef)(!1),f="error"===l;(0,T.useEffect)(function(){var n=!0;return new Promise(function(n){if(!r){n(!1);return;}var i=document.createElement("img");i.onerror=function(){return n(!1);},i.onload=function(){return n(!0);},i.src=r;}).then(function(r){!r&&n&&u("error");}),function(){n=!1;};},[r]),(0,T.useEffect)(function(){i&&!c.current?u("loading"):f&&u("normal");},[r]);var d=function(){u("normal");};return[function(n){c.current=!1,"loading"===l&&null!=n&&n.complete&&(n.naturalWidth||n.naturalHeight)&&(c.current=!0,d());},f&&a?{src:a}:{onLoad:d,src:r},l];}function q(n,r){return Math.hypot(n.x-r.x,n.y-r.y);}var $=["fallback","src","imgRef"],Y=["prefixCls","src","alt","imageInfo","fallback","movable","onClose","visible","icons","rootClassName","closeIcon","getContainer","current","count","countRender","scaleStep","minScale","maxScale","transitionName","maskTransitionName","imageRender","imgCommonProps","toolbarRender","onTransform","onChange"],Z=function(n){var r=n.fallback,i=n.src,a=n.imgRef,o=(0,y.default)(n,$),s=X({src:i,fallback:r}),u=(0,p.default)(s,2),c=u[0],f=u[1];return T.default.createElement("img",(0,l.default)({ref:function(n){a.current=n,c(n);}},o,f));},K=function(n){var r,i,a,o,s,u,f,h,m,g,v,_,E,w,S,A,O,R,k,I,L,N,B,z,H,X,$,K,Q=n.prefixCls,J=n.src,ee=n.alt,et=n.imageInfo,en=n.fallback,er=n.movable,ei=void 0===er||er,ea=n.onClose,eo=n.visible,es=n.icons,el=n.rootClassName,eu=n.closeIcon,ec=n.getContainer,ef=n.current,ed=void 0===ef?0:ef,eh=n.count,ep=void 0===eh?1:eh,em=n.countRender,eg=n.scaleStep,ev=void 0===eg?.5:eg,ey=n.minScale,e_=void 0===ey?1:ey,eb=n.maxScale,ex=void 0===eb?50:eb,eE=n.transitionName,ew=n.maskTransitionName,eS=void 0===ew?"fade":ew,eT=n.imageRender,eA=n.imgCommonProps,eC=n.toolbarRender,eO=n.onTransform,eM=n.onChange,eR=(0,y.default)(n,Y),eP=(0,T.useRef)(),ek=(0,T.useContext)(D),eI=ek&&ep>1,eL=ek&&ep>=1,eN=(0,T.useState)(!0),eD=(0,p.default)(eN,2),eF=eD[0],eB=eD[1],ej=(r=(0,T.useRef)(null),i=(0,T.useRef)([]),a=(0,T.useState)(V),s=(o=(0,p.default)(a,2))[0],u=o[1],f=function(n,a){null===r.current&&(i.current=[],r.current=(0,U.default)(function(){u(function(n){var o=n;return i.current.forEach(function(n){o=(0,c.default)((0,c.default)({},o),n);}),r.current=null,null==eO||eO({transform:o,action:a}),o;});})),i.current.push((0,c.default)((0,c.default)({},s),n));},{transform:s,resetTransform:function(n){u(V),(0,j.default)(V,s)||null==eO||eO({transform:V,action:n});},updateTransform:f,dispatchZoomChange:function(n,r,i,a,o){var l=eP.current,u=l.width,c=l.height,d=l.offsetWidth,h=l.offsetHeight,p=l.offsetLeft,m=l.offsetTop,g=n,v=s.scale*n;v>ex?(v=ex,g=ex/s.scale):v<e_&&(g=(v=o?v:e_)/s.scale);var y=null!=a?a:innerHeight/2,_=g-1,b=_*((null!=i?i:innerWidth/2)-s.x-p),E=_*(y-s.y-m),w=s.x-(b-_*u*.5),S=s.y-(E-_*c*.5);if(n<1&&1===v){var T=d*v,A=h*v,C=(0,x.getClientSize)(),O=C.width,M=C.height;T<=O&&A<=M&&(w=0,S=0);}f({x:w,y:S,scale:v},r);}}),ez=ej.transform,eU=ej.resetTransform,eV=ej.updateTransform,eG=ej.dispatchZoomChange,eH=(h=ez.rotate,m=ez.scale,g=ez.x,v=ez.y,_=(0,T.useState)(!1),w=(E=(0,p.default)(_,2))[0],S=E[1],A=(0,T.useRef)({diffX:0,diffY:0,transformX:0,transformY:0}),O=function(n){eo&&w&&eV({x:n.pageX-A.current.diffX,y:n.pageY-A.current.diffY},"move");},R=function(){if(eo&&w){S(!1);var n=A.current,r=n.transformX,i=n.transformY;if(g!==r&&v!==i){var a=eP.current.offsetWidth*m,o=eP.current.offsetHeight*m,s=eP.current.getBoundingClientRect(),l=s.left,u=s.top,f=h%180!=0,d=W(f?o:a,f?a:o,l,u);d&&eV((0,c.default)({},d),"dragRebound");}}},(0,T.useEffect)(function(){var n,r,i,a;if(ei){i=(0,M.default)(window,"mouseup",R,!1),a=(0,M.default)(window,"mousemove",O,!1);try{window.top!==window.self&&(n=(0,M.default)(window.top,"mouseup",R,!1),r=(0,M.default)(window.top,"mousemove",O,!1));}catch(n){(0,G.warning)(!1,"[rc-image] ".concat(n));}}return function(){var o,s,l,u;null===(o=i)||void 0===o||o.remove(),null===(s=a)||void 0===s||s.remove(),null===(l=n)||void 0===l||l.remove(),null===(u=r)||void 0===u||u.remove();};},[eo,w,g,v,h,ei]),{isMoving:w,onMouseDown:function(n){ei&&0===n.button&&(n.preventDefault(),n.stopPropagation(),A.current={diffX:n.pageX-g,diffY:n.pageY-v,transformX:g,transformY:v},S(!0));},onMouseMove:O,onMouseUp:R,onWheel:function(n){if(eo&&0!=n.deltaY){var r=1+Math.min(Math.abs(n.deltaY/100),1)*ev;n.deltaY>0&&(r=1/r),eG(r,"wheel",n.clientX,n.clientY);}}}),eW=eH.isMoving,eX=eH.onMouseDown,eq=eH.onWheel,e$=(k=ez.rotate,I=ez.scale,L=ez.x,N=ez.y,B=(0,T.useState)(!1),H=(z=(0,p.default)(B,2))[0],X=z[1],$=(0,T.useRef)({point1:{x:0,y:0},point2:{x:0,y:0},eventType:"none"}),K=function(n){$.current=(0,c.default)((0,c.default)({},$.current),n);},(0,T.useEffect)(function(){var n;return eo&&ei&&(n=(0,M.default)(window,"touchmove",function(n){return n.preventDefault();},{passive:!1})),function(){var r;null===(r=n)||void 0===r||r.remove();};},[eo,ei]),{isTouching:H,onTouchStart:function(n){if(ei){n.stopPropagation(),X(!0);var r=n.touches,i=void 0===r?[]:r;i.length>1?K({point1:{x:i[0].clientX,y:i[0].clientY},point2:{x:i[1].clientX,y:i[1].clientY},eventType:"touchZoom"}):K({point1:{x:i[0].clientX-L,y:i[0].clientY-N},eventType:"move"});}},onTouchMove:function(n){var r=n.touches,i=void 0===r?[]:r,a=$.current,o=a.point1,s=a.point2,l=a.eventType;if(i.length>1&&"touchZoom"===l){var u={x:i[0].clientX,y:i[0].clientY},c={x:i[1].clientX,y:i[1].clientY},f=function(n,r,i,a){var o=q(n,i),s=q(r,a);if(0===o&&0===s)return[n.x,n.y];var l=o/(o+s);return[n.x+l*(r.x-n.x),n.y+l*(r.y-n.y)];}(o,s,u,c),d=(0,p.default)(f,2),h=d[0],m=d[1];eG(q(u,c)/q(o,s),"touchZoom",h,m,!0),K({point1:u,point2:c,eventType:"touchZoom"});}else"move"===l&&(eV({x:i[0].clientX-o.x,y:i[0].clientY-o.y},"move"),K({eventType:"move"}));},onTouchEnd:function(){if(eo){if(H&&X(!1),K({eventType:"none"}),e_>I)return eV({x:0,y:0,scale:e_},"touchZoom");var n=eP.current.offsetWidth*I,r=eP.current.offsetHeight*I,i=eP.current.getBoundingClientRect(),a=i.left,o=i.top,s=k%180!=0,l=W(s?r:n,s?n:r,a,o);l&&eV((0,c.default)({},l),"dragRebound");}}}),eY=e$.isTouching,eZ=e$.onTouchStart,eK=e$.onTouchMove,eQ=e$.onTouchEnd,eJ=ez.rotate,e0=ez.scale,e1=(0,b.default)((0,d.default)({},"".concat(Q,"-moving"),eW));(0,T.useEffect)(function(){eF||eB(!0);},[eF]);var e2=function(n){var r=ed+n;!Number.isInteger(r)||r<0||r>ep-1||(eB(!1),eU(n<0?"prev":"next"),null==eM||eM(r,ed));},e3=function(n){eo&&eI&&(n.keyCode===P.default.LEFT?e2(-1):n.keyCode===P.default.RIGHT&&e2(1));};(0,T.useEffect)(function(){var n=(0,M.default)(window,"keydown",e3,!1);return function(){n.remove();};},[eo,eI,ed]);var e4=T.default.createElement(Z,(0,l.default)({},eA,{width:n.width,height:n.height,imgRef:eP,className:"".concat(Q,"-img"),alt:ee,style:{transform:"translate3d(".concat(ez.x,"px, ").concat(ez.y,"px, 0) scale3d(").concat(ez.flipX?"-":"").concat(e0,", ").concat(ez.flipY?"-":"").concat(e0,", 1) rotate(").concat(eJ,"deg)"),transitionDuration:(!eF||eY)&&"0s"},fallback:en,src:J,onWheel:eq,onMouseDown:eX,onDoubleClick:function(n){eo&&(1!==e0?eV({x:0,y:0,scale:1},"doubleClick"):eG(1+ev,"doubleClick",n.clientX,n.clientY));},onTouchStart:eZ,onTouchMove:eK,onTouchEnd:eQ,onTouchCancel:eQ})),e5=(0,c.default)({url:J,alt:ee},et);return T.default.createElement(T.default.Fragment,null,T.default.createElement(C.default,(0,l.default)({transitionName:void 0===eE?"zoom":eE,maskTransitionName:eS,closable:!1,keyboard:!0,prefixCls:Q,onClose:ea,visible:eo,classNames:{wrapper:e1},rootClassName:el,getContainer:ec},eR,{afterClose:function(){eU("close");}}),T.default.createElement("div",{className:"".concat(Q,"-img-wrapper")},eT?eT(e4,(0,c.default)({transform:ez,image:e5},ek?{current:ed}:{})):e4)),T.default.createElement(F,{visible:eo,transform:ez,maskTransitionName:eS,closeIcon:eu,getContainer:ec,prefixCls:Q,rootClassName:el,icons:void 0===es?{}:es,countRender:em,showSwitch:eI,showProgress:eL,current:ed,count:ep,scale:e0,minScale:e_,maxScale:ex,toolbarRender:eC,onActive:e2,onZoomIn:function(){eG(1+ev,"zoomIn");},onZoomOut:function(){eG(1/(1+ev),"zoomOut");},onRotateRight:function(){eV({rotate:eJ+90},"rotateRight");},onRotateLeft:function(){eV({rotate:eJ-90},"rotateLeft");},onFlipX:function(){eV({flipX:!ez.flipX},"flipX");},onFlipY:function(){eV({flipY:!ez.flipY},"flipY");},onClose:ea,onReset:function(){eU("reset");},zIndex:void 0!==eR.zIndex?eR.zIndex+1:void 0,image:e5}));},Q=i("f1020fa4"),J=a._(Q),ee=["crossOrigin","decoding","draggable","loading","referrerPolicy","sizes","srcSet","useMap","alt"],et=["visible","onVisibleChange","getContainer","current","movable","minScale","maxScale","countRender","closeIcon","onChange","onTransform","toolbarRender","imageRender"],en=["src"],er=0,ei=["src","alt","onPreviewClose","prefixCls","previewPrefixCls","placeholder","fallback","width","height","style","preview","className","onClick","onError","wrapperClassName","wrapperStyle","rootClassName"],ea=["src","visible","onVisibleChange","getContainer","mask","maskClassName","movable","icons","scaleStep","minScale","maxScale","imageRender","toolbarRender"],eo=function(n){var r,i,a,o,s=n.src,u=n.alt,f=n.onPreviewClose,h=n.prefixCls,m=void 0===h?"rc-image":h,v=n.previewPrefixCls,_=void 0===v?"".concat(m,"-preview"):v,E=n.placeholder,S=n.fallback,A=n.width,C=n.height,O=n.style,M=n.preview,R=void 0===M||M,P=n.className,k=n.onClick,I=n.onError,L=n.wrapperClassName,N=n.wrapperStyle,F=n.rootClassName,B=(0,y.default)(n,ei),j="object"===(0,g.default)(R)?R:{},z=j.src,U=j.visible,V=void 0===U?void 0:U,G=j.onVisibleChange,H=j.getContainer,W=j.mask,q=j.maskClassName,$=j.movable,Y=j.icons,Z=j.scaleStep,Q=j.minScale,J=j.maxScale,et=j.imageRender,en=j.toolbarRender,eo=(0,y.default)(j,ea),es=null!=z?z:s,el=(0,w.default)(!!V,{value:V,onChange:void 0===G?f:G}),eu=(0,p.default)(el,2),ec=eu[0],ef=eu[1],ed=X({src:s,isCustomPlaceholder:E&&!0!==E,fallback:S}),eh=(0,p.default)(ed,3),ep=eh[0],em=eh[1],eg=eh[2],ev=(0,T.useState)(null),ey=(0,p.default)(ev,2),e_=ey[0],eb=ey[1],ex=(0,T.useContext)(D),eE=!!R,ew=(0,b.default)(m,L,F,(0,d.default)({},"".concat(m,"-error"),"error"===eg)),eS=(0,T.useMemo)(function(){var r={};return ee.forEach(function(i){void 0!==n[i]&&(r[i]=n[i]);}),r;},ee.map(function(r){return n[r];})),eT=(0,T.useMemo)(function(){return(0,c.default)((0,c.default)({},eS),{},{src:es});},[es,eS]),eA=(r=T.useState(function(){return String(er+=1);}),i=(0,p.default)(r,1)[0],a=T.useContext(D),o={data:eT,canPreview:eE},T.useEffect(function(){if(a)return a.register(i,o);},[]),T.useEffect(function(){a&&a.register(i,o);},[eE,eT]),i);return T.createElement(T.Fragment,null,T.createElement("div",(0,l.default)({},B,{className:ew,onClick:eE?function(n){var r=(0,x.getOffset)(n.target),i=r.left,a=r.top;ex?ex.onPreview(eA,es,i,a):(eb({x:i,y:a}),ef(!0)),null==k||k(n);}:k,style:(0,c.default)({width:A,height:C},N)}),T.createElement("img",(0,l.default)({},eS,{className:(0,b.default)("".concat(m,"-img"),(0,d.default)({},"".concat(m,"-img-placeholder"),!0===E),P),style:(0,c.default)({height:C},O),ref:ep},em,{width:A,height:C,onError:I})),"loading"===eg&&T.createElement("div",{"aria-hidden":"true",className:"".concat(m,"-placeholder")},E),W&&eE&&T.createElement("div",{className:(0,b.default)("".concat(m,"-mask"),q),style:{display:(null==O?void 0:O.display)==="none"?"none":void 0}},W)),!ex&&eE&&T.createElement(K,(0,l.default)({"aria-hidden":!ec,visible:ec,prefixCls:_,onClose:function(){ef(!1),eb(null);},mousePosition:e_,src:es,alt:u,imageInfo:{width:A,height:C},fallback:S,getContainer:void 0===H?void 0:H,icons:Y,movable:$,scaleStep:Z,minScale:Q,maxScale:J,rootClassName:F,imageRender:et,imgCommonProps:eS,toolbarRender:en},eo)));};eo.PreviewGroup=function(n){var r,i,a,o,s,u,f=n.previewPrefixCls,h=n.children,m=n.icons,v=n.items,_=n.preview,b=n.fallback,x="object"===(0,g.default)(_)?_:{},E=x.visible,S=x.onVisibleChange,A=x.getContainer,C=x.current,O=x.movable,M=x.minScale,R=x.maxScale,P=x.countRender,k=x.closeIcon,I=x.onChange,L=x.onTransform,N=x.toolbarRender,F=x.imageRender,B=(0,y.default)(x,et),j=(r=T.useState({}),a=(i=(0,p.default)(r,2))[0],o=i[1],s=T.useCallback(function(n,r){return o(function(i){return(0,c.default)((0,c.default)({},i),{},(0,d.default)({},n,r));}),function(){o(function(r){var i=(0,c.default)({},r);return delete i[n],i;});};},[]),[T.useMemo(function(){return v?v.map(function(n){if("string"==typeof n)return{data:{src:n}};var r={};return Object.keys(n).forEach(function(i){["src"].concat((0,J.default)(ee)).includes(i)&&(r[i]=n[i]);}),{data:r};}):Object.keys(a).reduce(function(n,r){var i=a[r],o=i.canPreview,s=i.data;return o&&n.push({data:s,id:r}),n;},[]);},[v,a]),s,!!v]),z=(0,p.default)(j,3),U=z[0],V=z[1],G=z[2],H=(0,w.default)(0,{value:C}),W=(0,p.default)(H,2),X=W[0],q=W[1],$=(0,T.useState)(!1),Y=(0,p.default)($,2),Z=Y[0],Q=Y[1],er=(null===(u=U[X])||void 0===u?void 0:u.data)||{},ei=er.src,ea=(0,y.default)(er,en),eo=(0,w.default)(!!E,{value:E,onChange:function(n,r){null==S||S(n,r,X);}}),es=(0,p.default)(eo,2),el=es[0],eu=es[1],ec=(0,T.useState)(null),ef=(0,p.default)(ec,2),ed=ef[0],eh=ef[1],ep=T.useCallback(function(n,r,i,a){var o=G?U.findIndex(function(n){return n.data.src===r;}):U.findIndex(function(r){return r.id===n;});q(o<0?0:o),eu(!0),eh({x:i,y:a}),Q(!0);},[U,G]);T.useEffect(function(){el?Z||q(0):Q(!1);},[el]);var em=T.useMemo(function(){return{register:V,onPreview:ep};},[V,ep]);return T.createElement(D.Provider,{value:em},h,T.createElement(K,(0,l.default)({"aria-hidden":!el,movable:O,visible:el,prefixCls:void 0===f?"rc-image-preview":f,closeIcon:k,onClose:function(){eu(!1),eh(null);},mousePosition:ed,imgCommonProps:ea,src:ei,fallback:b,icons:void 0===m?{}:m,minScale:M,maxScale:R,getContainer:A,current:X,count:U.length,countRender:P,onTransform:L,toolbarRender:N,imageRender:F,onChange:function(n,r){q(n),null==I||I(n,r);}},B)));};},"3656debc":function(n,r,i){"use strict";var a=i("4d6ab2e4"),o={"text/plain":"Text","text/html":"Url",default:"Text"};n.exports=function(n,r){var i,s,l,u,c,f,d,h,p=!1;r||(r={}),l=r.debug||!1;try{if(c=a(),f=document.createRange(),d=document.getSelection(),(h=document.createElement("span")).textContent=n,h.ariaHidden="true",h.style.all="unset",h.style.position="fixed",h.style.top=0,h.style.clip="rect(0, 0, 0, 0)",h.style.whiteSpace="pre",h.style.webkitUserSelect="text",h.style.MozUserSelect="text",h.style.msUserSelect="text",h.style.userSelect="text",h.addEventListener("copy",function(i){if(i.stopPropagation(),r.format){if(i.preventDefault(),void 0===i.clipboardData){l&&console.warn("unable to use e.clipboardData"),l&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var a=o[r.format]||o.default;window.clipboardData.setData(a,n);}else i.clipboardData.clearData(),i.clipboardData.setData(r.format,n);}r.onCopy&&(i.preventDefault(),r.onCopy(i.clipboardData));}),document.body.appendChild(h),f.selectNodeContents(h),d.addRange(f),!document.execCommand("copy"))throw Error("copy command was unsuccessful");p=!0;}catch(a){l&&console.error("unable to copy using execCommand: ",a),l&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(r.format||"text",n),r.onCopy&&r.onCopy(window.clipboardData),p=!0;}catch(a){l&&console.error("unable to copy using clipboardData: ",a),l&&console.error("falling back to prompt"),i="message"in r?r.message:"Copy to clipboard: #{key}, Enter",s=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C",u=i.replace(/#{\s*key\s*}/g,s),window.prompt(u,n);}}finally{d&&("function"==typeof d.removeRange?d.removeRange(f):d.removeAllRanges()),h&&document.body.removeChild(h),c();}return p;};},"3715e357":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});var a=function(n,r,i){return n<r?r:n>i?i:n;};},"3776434f":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{applyScale:function(){return x;},assignScale:function(){return T;},collectScales:function(){return w;},groupTransform:function(){return E;},inferScale:function(){return b;},isPosition:function(){return B;},isValidScale:function(){return j;},syncFacetsScales:function(){return C;},useRelation:function(){return S;},useRelationScale:function(){return A;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("c2287686"),l=i("8c0d48bf"),u=a._(i("19faa3be")),c=a._(i("63aba70a")),f=i("1f4e7f4b"),d=o._(i("ed031284")),h=a._(i("d7948920")),p=a._(i("f515d959")),m=a._(i("7cf6ebc4")),g=i("cfce14bf"),v=i("f5373dff"),y=i("148614a5"),_=i("c4368857");function b(n,r,i,a,o,u){let{guide:c={}}=i,f=function(n,r,i){let{type:a,domain:o,range:s,quantitative:l,ordinal:u}=i;return void 0!==a?a:F(r,v.isStrictObject)?"identity":"string"==typeof s?"linear":(o||s||[]).length>2?k(n,u):void 0!==o?N([o])?k(n,u):D(r)?"time":I(n,s,l):N(r)?k(n,u):D(r)?"time":I(n,s,l);}(n,r,i);if("string"!=typeof f)return i;let h=function(n,r,i,a){let{domain:o}=a;if(void 0!==o)return o;switch(n){case"linear":case"time":case"log":case"pow":case"sqrt":case"quantize":case"threshold":return L(function(n,r){let{zero:i=!1}=r,a=1/0,o=-1/0;for(let r of n)for(let n of r)(0,v.defined)(n)&&(a=Math.min(a,+n),o=Math.max(o,+n));return a===1/0?[]:i?[Math.min(0,a),o]:[a,o];}(i,a),a);case"band":case"ordinal":case"point":return Array.from(new Set(i.flat()));case"quantile":return i.flat().sort();case"sequential":return L(function(n){let r=1/0,i=-1/0;for(let a of n)for(let n of a)(0,v.defined)(n)&&(r=Math.min(r,+n),i=Math.max(i,+n));return r===1/0?[]:[r<0?-i:r,i];}(i),a);default:return[];}}(f,0,r,i),p=function(n,r,i){let{ratio:a}=i;return null==a?r:M({type:n})?function(n,r,i){let a=n.map(Number),o=new s.Linear({domain:a,range:[a[0],a[0]+(a[a.length-1]-a[0])*r]});return"time"===i?n.map(n=>new Date(o.map(n))):n.map(n=>o.map(n));}(r,a,n):R({type:n})?function(n,r){let i=Math.round(n.length*r);return n.slice(0,i);}(r,a):r;}(f,h,i);return Object.assign(Object.assign(Object.assign({},i),function(n,r,i,a,o){switch(n){case"linear":case"time":case"log":case"pow":case"sqrt":return function(n,r){let{interpolate:i=l.createInterpolateValue,nice:a=!1,tickCount:o=5}=r;return Object.assign(Object.assign({},r),{interpolate:i,nice:a,tickCount:o});}(0,a);case"band":case"point":return function(n,r,i,a){if(void 0!==a.padding||void 0!==a.paddingInner||void 0!==a.paddingOuter)return Object.assign(Object.assign({},a),{unknown:NaN});let o="enterDelay"===r||"enterDuration"===r||"size"===r?0:"band"===n?(0,y.isTheta)(i)?0:.1:"point"===n?.5:0,{paddingInner:s=o,paddingOuter:l=o}=a;return Object.assign(Object.assign({},a),{paddingInner:s,paddingOuter:l,padding:o,unknown:NaN});}(n,r,o,a);case"sequential":return function(n){let{palette:r="ylGnBu",offset:i}=n,a=(0,m.default)(r),o=d[`interpolate${a}`];if(!o)throw Error(`Unknown palette: ${a}`);return{interpolator:i?n=>o(i(n)):o};}(a);default:return a;}}(f,n,0,i,a)),{domain:p,range:function(n,r,i,a,o,s,l){let{range:u}=a;if("string"==typeof u)return u.split("-");if(void 0!==u)return u;let{rangeMin:c,rangeMax:f}=a;switch(n){case"linear":case"time":case"log":case"pow":case"sqrt":{var d;let[n,u]=(d=P(i,a,o,s,l),"enterDelay"===r?[0,1e3]:"enterDuration"==r?[300,1e3]:r.startsWith("y")||r.startsWith("position")?[1,0]:"color"===r?[(0,g.firstOf)(d),(0,g.lastOf)(d)]:"opacity"===r?[0,1]:"size"===r?[1,10]:[0,1]);return[null!=c?c:n,null!=f?f:u];}case"band":case"point":{let n="size"===r?5:0,i="size"===r?10:1;return[null!=c?c:n,null!=f?f:i];}case"ordinal":return P(i,a,o,s,l);case"sequential":return;case"constant":return[i[0][0]];default:return[];}}(f,n,r,i,p,o,u),expectedDomain:h,guide:c,name:n,type:f});}function x(n,r){let i={};for(let a of n){let{values:n,name:o}=a,s=r[o];for(let r of n){let{name:n,value:a}=r;i[n]=a.map(n=>s.map(n));}}return i;}function E(n,r){let i=Array.from(n.values()).flatMap(n=>n.channels);(0,f.rollups)(i,n=>n.map(n=>r.get(n.scale.uid)),n=>n.name).filter(([,n])=>n.some(n=>"function"==typeof n.getOptions().groupTransform)&&n.every(n=>n.getTicks)).map(n=>n[1]).forEach(n=>{(0,n.map(n=>n.getOptions().groupTransform)[0])(n);});}function w(n,r){var i;let{components:a=[]}=r,o=["scale","encode","axis","legend","data","transform"],s=Array.from(new Set(n.flatMap(n=>n.channels.map(n=>n.scale)))),l=new Map(s.map(n=>[n.name,n]));for(let n of a)for(let r of function(n){let{channels:r=[],type:i,scale:a={}}=n,o=["shape","color","opacity","size"];return 0!==r.length?r:"axisX"===i?["x"]:"axisY"===i?["y"]:"legends"===i?Object.keys(a).filter(n=>o.includes(n)):[];}(n)){let a=l.get(r),u=(null===(i=n.scale)||void 0===i?void 0:i[r])||{},{independent:c=!1}=u;if(a&&!c){let{guide:r}=a,i="boolean"==typeof r?{}:r;a.guide=(0,h.default)({},i,n),Object.assign(a,u);}else{let i=Object.assign(Object.assign({},u),{expectedDomain:u.domain,name:r,guide:(0,p.default)(n,o)});s.push(i);}}return s;}function S(n){let r,i;return n&&Array.isArray(n)?[a=>{var o;r=a.map.bind(a),i=null===(o=a.invert)||void 0===o?void 0:o.bind(a);let s=n.filter(([n])=>"function"==typeof n),l=n.filter(([n])=>"function"!=typeof n),u=new Map(l);if(a.map=n=>{for(let[r,i]of s)if(r(n))return i;return u.has(n)?u.get(n):r(n);},!i)return a;let c=new Map(l.map(([n,r])=>[r,n])),f=new Map(s.map(([n,r])=>[r,n]));return a.invert=n=>f.has(n)?n:c.has(n)?c.get(n):i(n),a;},n=>(null!==r&&(n.map=r),null!==i&&(n.invert=i),n)]:[v.identity,v.identity];}function T(n,r){let i=Object.keys(n);for(let a of Object.values(r)){let{name:r}=a.getOptions();if(r in n){let o=i.filter(n=>n.startsWith(r)).map(n=>+(n.replace(r,"")||0)),s=(0,c.default)(o)+1,l=`${r}${s}`;n[l]=a,a.getOptions().key=l;}else n[r]=a;}return n;}function A(n,r){let[i]=(0,_.useLibrary)("scale",r),{relations:a}=n,[o]=S(a);return o(i(n));}function C(n){let r=n.flatMap(n=>Array.from(n.values())).flatMap(n=>n.channels.map(n=>n.scale));O(r,"x"),O(r,"y");}function O(n,r){let i=n.filter(({name:n,facet:i=!0})=>i&&n===r),a=i.flatMap(n=>n.domain),o=i.every(M)?(0,u.default)(a):i.every(R)?Array.from(new Set(a)):null;if(null!==o)for(let n of i)n.domain=o;}function M(n){let{type:r}=n;return"string"==typeof r&&["linear","log","pow","time"].includes(r);}function R(n){let{type:r}=n;return"string"==typeof r&&["band","point","ordinal"].includes(r);}function P(n,r,i,a,o){let[s]=(0,_.useLibrary)("palette",o),{category10:l,category20:u}=a,c=(0,g.unique)(i).length<=l.length?l:u,{palette:f=c,offset:h}=r;if(Array.isArray(f))return f;try{return s({type:f});}catch(r){let n=function(n,r,i=n=>n){if(!n)return null;let a=(0,m.default)(n),o=d[`scheme${a}`],s=d[`interpolate${a}`];if(!o&&!s)return null;if(o){if(!o.some(Array.isArray))return o;let n=o[r.length];if(n)return n;}return r.map((n,a)=>s(i(a/r.length)));}(f,i,h);if(n)return n;throw Error(`Unknown Component: ${f} `);}}function k(n,r){return r||(n.startsWith("x")||n.startsWith("y")||n.startsWith("position")||n.startsWith("size")?"point":"ordinal");}function I(n,r,i){return i||("color"!==n?"linear":r?"linear":"sequential");}function L(n,r){if(0===n.length)return n;let{domainMin:i,domainMax:a}=r,[o,s]=n;return[null!=i?i:o,null!=a?a:s];}function N(n){return F(n,n=>{let r=typeof n;return"string"===r||"boolean"===r;});}function D(n){return F(n,n=>n instanceof Date);}function F(n,r){for(let i of n)if(i.some(r))return!0;return!1;}function B(n){return n.startsWith("x")||n.startsWith("y")||n.startsWith("position")||"enterDelay"===n||"enterDuration"===n||"updateDelay"===n||"updateDuration"===n||"exitDelay"===n||"exitDuration"===n;}function j(n){if(!n||!n.type)return!1;if("function"==typeof n.type)return!0;let{type:r,domain:i,range:a,interpolator:o}=n,s=i&&i.length>0,l=a&&a.length>0;return!!(["linear","sqrt","log","time","pow","threshold","quantize","quantile","ordinal","band","point"].includes(r)&&s&&l||["sequential"].includes(r)&&s&&(l||o)||["constant","identity"].includes(r)&&l);}},"377bcc16":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{add:function(){return h;},angle:function(){return O;},clone:function(){return l;},copy:function(){return f;},create:function(){return s;},cross:function(){return w;},dist:function(){return P;},distance:function(){return _;},dot:function(){return E;},equals:function(){return M;},forEach:function(){return I;},fromValues:function(){return c;},len:function(){return k;},length:function(){return u;},lerp:function(){return S;},max:function(){return v;},min:function(){return g;},multiply:function(){return m;},negate:function(){return b;},normalize:function(){return x;},scale:function(){return y;},set:function(){return d;},sub:function(){return R;},subtract:function(){return p;},transformMat3:function(){return A;},transformMat4:function(){return T;},transformQuat:function(){return C;}});var a,o=i("852bbaa9")._(i("1cf5f081"));function s(){var n=new o.ARRAY_TYPE(3);return o.ARRAY_TYPE!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n;}function l(n){var r=new o.ARRAY_TYPE(3);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r;}function u(n){return Math.hypot(n[0],n[1],n[2]);}function c(n,r,i){var a=new o.ARRAY_TYPE(3);return a[0]=n,a[1]=r,a[2]=i,a;}function f(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n;}function d(n,r,i,a){return n[0]=r,n[1]=i,n[2]=a,n;}function h(n,r,i){return n[0]=r[0]+i[0],n[1]=r[1]+i[1],n[2]=r[2]+i[2],n;}function p(n,r,i){return n[0]=r[0]-i[0],n[1]=r[1]-i[1],n[2]=r[2]-i[2],n;}function m(n,r,i){return n[0]=r[0]*i[0],n[1]=r[1]*i[1],n[2]=r[2]*i[2],n;}function g(n,r,i){return n[0]=Math.min(r[0],i[0]),n[1]=Math.min(r[1],i[1]),n[2]=Math.min(r[2],i[2]),n;}function v(n,r,i){return n[0]=Math.max(r[0],i[0]),n[1]=Math.max(r[1],i[1]),n[2]=Math.max(r[2],i[2]),n;}function y(n,r,i){return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n;}function _(n,r){return Math.hypot(r[0]-n[0],r[1]-n[1],r[2]-n[2]);}function b(n,r){return n[0]=-r[0],n[1]=-r[1],n[2]=-r[2],n;}function x(n,r){var i=r[0],a=r[1],o=r[2],s=i*i+a*a+o*o;return s>0&&(s=1/Math.sqrt(s)),n[0]=r[0]*s,n[1]=r[1]*s,n[2]=r[2]*s,n;}function E(n,r){return n[0]*r[0]+n[1]*r[1]+n[2]*r[2];}function w(n,r,i){var a=r[0],o=r[1],s=r[2],l=i[0],u=i[1],c=i[2];return n[0]=o*c-s*u,n[1]=s*l-a*c,n[2]=a*u-o*l,n;}function S(n,r,i,a){var o=r[0],s=r[1],l=r[2];return n[0]=o+a*(i[0]-o),n[1]=s+a*(i[1]-s),n[2]=l+a*(i[2]-l),n;}function T(n,r,i){var a=r[0],o=r[1],s=r[2],l=i[3]*a+i[7]*o+i[11]*s+i[15];return l=l||1,n[0]=(i[0]*a+i[4]*o+i[8]*s+i[12])/l,n[1]=(i[1]*a+i[5]*o+i[9]*s+i[13])/l,n[2]=(i[2]*a+i[6]*o+i[10]*s+i[14])/l,n;}function A(n,r,i){var a=r[0],o=r[1],s=r[2];return n[0]=a*i[0]+o*i[3]+s*i[6],n[1]=a*i[1]+o*i[4]+s*i[7],n[2]=a*i[2]+o*i[5]+s*i[8],n;}function C(n,r,i){var a=i[0],o=i[1],s=i[2],l=i[3],u=r[0],c=r[1],f=r[2],d=o*f-s*c,h=s*u-a*f,p=a*c-o*u,m=o*p-s*h,g=s*d-a*p,v=a*h-o*d,y=2*l;return d*=y,h*=y,p*=y,m*=2,g*=2,v*=2,n[0]=u+d+m,n[1]=c+h+g,n[2]=f+p+v,n;}function O(n,r){var i=n[0],a=n[1],o=n[2],s=r[0],l=r[1],u=r[2],c=Math.sqrt(i*i+a*a+o*o)*Math.sqrt(s*s+l*l+u*u);return Math.acos(Math.min(Math.max(c&&E(n,r)/c,-1),1));}function M(n,r){var i=n[0],a=n[1],s=n[2],l=r[0],u=r[1],c=r[2];return Math.abs(i-l)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-u)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(s-c)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(c));}var R=p,P=_,k=u,I=(a=s(),function(n,r,i,o,s,l){var u,c;for(r||(r=3),i||(i=0),c=o?Math.min(o*r+i,n.length):n.length,u=i;u<c;u+=r)a[0]=n[u],a[1]=n[u+1],a[2]=n[u+2],s(a,a,l),n[u]=a[0],n[u+1]=a[1],n[u+2]=a[2];return n;});},"37e12186":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return o;}});var a=i("777fffbe")._(i("62a7c4f2"));function o(n){if((0,a.default)(n))return n[n.length-1];}},"37e36e70":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"ProFormGroup",{enumerable:!0,get:function(){return a;}});var a=i("2e660475").ProForm.Group;},"3862611d":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{__assign:function(){return s;},__awaiter:function(){return u;},__classPrivateFieldGet:function(){return m;},__createBinding:function(){return f;},__extends:function(){return o;},__generator:function(){return c;},__read:function(){return h;},__rest:function(){return l;},__spreadArray:function(){return p;},__values:function(){return d;}});var a=function(n,r){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);};function o(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}a(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}var s=function(){return(s=Object.assign||function(n){for(var r,i=1,a=arguments.length;i<a;i++)for(var o in r=arguments[i])Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n;}).apply(this,arguments);};function l(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;}function u(n,r,i,a){return new(i||(i=Promise))(function(o,s){function l(n){try{c(a.next(n));}catch(n){s(n);}}function u(n){try{c(a.throw(n));}catch(n){s(n);}}function c(n){var r;n.done?o(n.value):((r=n.value)instanceof i?r:new i(function(n){n(r);})).then(l,u);}c((a=a.apply(n,r||[])).next());});}function c(n,r){var i,a,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1];},trys:[],ops:[]},l=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return l.next=u(0),l.throw=u(1),l.return=u(2),"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this;}),l;function u(u){return function(c){return function(u){if(i)throw TypeError("Generator is already executing.");for(;l&&(l=0,u[0]&&(s=0)),s;)try{if(i=1,a&&(o=2&u[0]?a.return:u[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,u[1])).done)return o;switch(a=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,a=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===u[0]||2===u[0])){s=0;continue;}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break;}if(6===u[0]&&s.label<o[1]){s.label=o[1],o=u;break;}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break;}o[2]&&s.ops.pop(),s.trys.pop();continue;}u=r.call(n,s);}catch(n){u=[6,n],a=0;}finally{i=o=0;}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0};}([u,c]);};}}var f=Object.create?function(n,r,i,a){void 0===a&&(a=i);var o=Object.getOwnPropertyDescriptor(r,i);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[i];}}),Object.defineProperty(n,a,o);}:function(n,r,i,a){void 0===a&&(a=i),n[a]=r[i];};function d(n){var r="function"==typeof Symbol&&Symbol.iterator,i=r&&n[r],a=0;if(i)return i.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n};}};throw TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.");}function h(n,r){var i="function"==typeof Symbol&&n[Symbol.iterator];if(!i)return n;var a,o,s=i.call(n),l=[];try{for(;(void 0===r||r-- >0)&&!(a=s.next()).done;)l.push(a.value);}catch(n){o={error:n};}finally{try{a&&!a.done&&(i=s.return)&&i.call(s);}finally{if(o)throw o.error;}}return l;}function p(n,r,i){if(i||2==arguments.length)for(var a,o=0,s=r.length;o<s;o++)!a&&o in r||(a||(a=Array.prototype.slice.call(r,0,o)),a[o]=r[o]);return n.concat(a||Array.prototype.slice.call(r));}function m(n,r,i,a){if("a"===i&&!a)throw TypeError("Private accessor was defined without a getter");if("function"==typeof r?n!==r||!a:!r.has(n))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?a:"a"===i?a.call(n):a?a.value:r.get(n);}"function"==typeof SuppressedError&&SuppressedError;},"39cdd665":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{ArcAxis:function(){return w;},LinearAxis:function(){return E;},rotateAxis:function(){return y;}});var a=i("777fffbe"),o=i("750ce7b9"),s=i("c2287686"),l=a._(i("d7948920")),u=a._(i("f515d959")),c=a._(i("7cf6ebc4")),f=a._(i("19faa3be")),d=i("6c85d1a4"),h=i("42fb15d0"),p=i("5120ac0c"),m=i("f5373dff"),g=i("da9a34de"),v=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};function y(n,r){let{eulerAngles:i,origin:a}=r;a&&n.setOrigin(a),i&&n.rotate(i[0],i[1],i[2]);}function _(n){let{innerWidth:r,innerHeight:i,depth:a}=n.getOptions();return[r,i,a];}function b(n,r,i,a,o,l,u,c){var d;(void 0!==i||void 0!==l)&&n.update(Object.assign(Object.assign({},i&&{tickCount:i}),l&&{tickMethod:l}));let m=function(n,r,i){if(n.getTicks)return n.getTicks();if(!i)return r;let[a,o]=(0,f.default)(r,n=>+n),{tickCount:s}=n.getOptions();return i(a,o,s);}(n,r,l),g=o?m.filter(o):m,v=n=>n instanceof Date?String(n):"object"==typeof n&&n?n:String(n),y=a||(null===(d=n.getFormatter)||void 0===d?void 0:d.call(n))||v,_=function(n,r){if((0,h.isPolar)(r))return n=>n;let{innerWidth:i,innerHeight:a,insetTop:o,insetBottom:l,insetLeft:u,insetRight:c}=r.getOptions(),[f,d,p]="left"===n||"right"===n?[o,l,a]:[u,c,i],m=new s.Linear({domain:[0,1],range:[f/p,1-d/p]});return n=>m.map(n);}(u,c),b=function(n,r){let{width:i,height:a}=r.getOptions();return o=>{if(!(0,h.isFisheye)(r))return o;let l=r.map("bottom"===n?[o,1]:[0,o]);if("bottom"===n){let n=l[0];return new s.Linear({domain:[0,i],range:[0,1]}).map(n);}if("left"===n){let n=l[1];return new s.Linear({domain:[0,a],range:[0,1]}).map(n);}return o;};}(u,c),x=n=>["top","bottom","center","outer"].includes(n),E=n=>["left","right"].includes(n);return(0,h.isPolar)(c)||(0,h.isTranspose)(c)?g.map((r,i,a)=>{var o,s;let l=(null===(o=n.getBandWidth)||void 0===o?void 0:o.call(n,r))/2||0,f=_(n.map(r)+l);return{value:(0,h.isRadial)(c)&&"center"===u||(0,h.isTranspose)(c)&&(null===(s=n.getTicks)||void 0===s?void 0:s.call(n))&&x(u)||(0,h.isTranspose)(c)&&E(u)?1-f:f,label:v(y((0,p.prettyNumber)(r),i,a)),id:String(i)};}):g.map((r,i,a)=>{var o;let s=(null===(o=n.getBandWidth)||void 0===o?void 0:o.call(n,r))/2||0,l=b(_(n.map(r)+s));return{value:E(u)?1-l:l,label:v(y((0,p.prettyNumber)(r),i,a)),id:String(i)};});}let x=n=>r=>{let{labelFormatter:i,labelFilter:a=()=>!0}=r;return o=>{var s;let{scales:[l]}=o,u=(null===(s=l.getTicks)||void 0===s?void 0:s.call(l))||l.getOptions().domain,c="string"==typeof i?(0,d.format)(i):i;return n(Object.assign(Object.assign({},r),{labelFormatter:c,labelFilter:(n,r,i)=>a(u[r],r,u),scale:l}))(o);};},E=x(n=>{let{direction:r="left",important:i={},labelFormatter:a,order:s,orientation:l,actualPosition:u,position:f,size:d,style:p={},title:y,tickCount:x,tickFilter:E,tickMethod:w,transform:S,indexBBox:T}=n,A=v(n,["direction","important","labelFormatter","order","orientation","actualPosition","position","size","style","title","tickCount","tickFilter","tickMethod","transform","indexBBox"]);return({scales:s,value:v,coordinate:C,theme:O})=>{var M;let{bbox:R}=v,[P]=s,{domain:k,xScale:I}=P.getOptions(),L=Object.assign(Object.assign(Object.assign({},function(n,r,i,a,o,s){let l=function(n,r,i,a,o,s){let l=i.axis,u=["top","right","bottom","left"].includes(o)?i[`axis${(0,m.capitalizeFirst)(o)}`]:i.axisLinear,f=n.getOptions().name;return Object.assign({},l,u,i[`axis${(0,c.default)(f)}`]||{});}(n,0,i,0,o,0);return"center"===o?Object.assign(Object.assign(Object.assign(Object.assign({},l),{labelDirection:"right"===a?"negative":"positive"}),"center"===a?{labelTransform:"translate(50%,0)"}:null),{tickDirection:"right"===a?"negative":"positive",labelSpacing:"center"===a?0:4,titleSpacing:(0,g.isVertical)(s)?10:0,tick:"center"!==a&&void 0}):l;}(P,0,O,r,f,l)),p),A),N=function(n,r,i="xy"){let[a,o,s]=_(r);return"xy"===i?n.includes("bottom")||n.includes("top")?o:a:"xz"===i?n.includes("bottom")||n.includes("top")?s:a:n.includes("bottom")||n.includes("top")?o:s;}(u||f,C,n.plane),D=function(n,r,i,a,o){let{x:s,y:l,width:u,height:c}=i;if("bottom"===n)return{startPos:[s,l],endPos:[s+u,l]};if("left"===n)return{startPos:[s+u,l+c],endPos:[s+u,l]};if("right"===n)return{startPos:[s,l+c],endPos:[s,l]};if("top"===n)return{startPos:[s,l+c],endPos:[s+u,l+c]};if("center"===n){if("vertical"===r)return{startPos:[s,l],endPos:[s,l+c]};if("horizontal"===r)return{startPos:[s,l],endPos:[s+u,l]};if("number"==typeof r){let[n,i]=a.getCenter(),[f,d]=(0,h.radiusOf)(a),[p,m]=(0,h.angleOf)(a),g=Math.min(u,c)/2,{insetLeft:v,insetTop:y}=a.getOptions(),_=f*g,b=d*g,[x,E]=[n+s-v,i+l-y],[w,S]=[Math.cos(r),Math.sin(r)],T=(0,h.isPolar)(a)&&o?(()=>{let{domain:n}=o.getOptions();return n.length;})():3;return{startPos:[x+b*w,E+b*S],endPos:[x+_*w,E+_*S],gridClosed:1e-6>Math.abs(m-p-360),gridCenter:[x,E],gridControlAngles:Array(T).fill(0).map((n,r,i)=>(m-p)/T*r)};}}return{};}(f,l,R,C,I),F=function(n){let{depth:r}=n.getOptions();return r?{tickIsBillboard:!0,lineIsBillboard:!0,labelIsBillboard:!0,titleIsBillboard:!0,gridIsBillboard:!0}:{};}(C),B=b(P,k,x,a,E,w,f,C),j=T?B.map((n,r)=>{let i=T.get(r);return i&&i[0]===n.label?Object.assign(Object.assign({},n),{bbox:i[1]}):n;}):B,z=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},L),{type:"linear",data:j,crossSize:d,titleText:(0,g.titleContent)(y),labelOverlap:function(n=[],r){if(n.length>0)return n;let{labelAutoRotate:i,labelAutoHide:a,labelAutoEllipsis:o,labelAutoWrap:s}=r,l=[],u=(n,r)=>{r&&l.push(Object.assign(Object.assign({},n),r));};return u({type:"rotate",optionalAngles:[0,15,30,45,60,90]},i),u({type:"ellipsis",minLength:20},o),u({type:"hide"},a),u({type:"wrap",wordWrapWidth:100,maxLines:3,recoveryWhenFail:!0},s),l;}(S,L),grid:(M=L.grid,!((0,h.isTheta)(C)||(0,h.isParallel)(C))&&(void 0===M?!!P.getTicks:M)),gridLength:N,line:!0,indexBBox:T}),L.line?null:{lineOpacity:0}),D),F),i);return z.labelOverlap.find(n=>"hide"===n.type)&&(z.crossSize=!1),new o.Axis({className:"axis",style:(0,g.adaptor)(z)});};}),w=x(n=>{let{order:r,size:i,position:a,orientation:s,labelFormatter:c,tickFilter:f,tickCount:d,tickMethod:p,important:m={},style:y={},indexBBox:x,title:E,grid:w=!1}=n,S=v(n,["order","size","position","orientation","labelFormatter","tickFilter","tickCount","tickMethod","important","style","indexBBox","title","grid"]);return({scales:[n],value:r,coordinate:i,theme:s})=>{let{bbox:v}=r,{domain:y}=n.getOptions(),T=b(n,y,d,c,f,p,a,i),A=x?T.map((n,r)=>{let i=x.get(r);return i&&i[0]===n.label?Object.assign(Object.assign({},n),{bbox:i[1]}):n;}):T,[C,O]=(0,h.radiusOf)(i),M=function(n,r,i,a,o){let{x:s,y:l,width:u,height:c}=r,f=[s+u/2,l+c/2],d=Math.min(u,c)/2,[p,m]=(0,h.angleOf)(o),[g,v]=_(o),y={center:f,radius:d,startAngle:p,endAngle:m,gridLength:Math.min(g,v)/2*(a-i)};if("inner"===n){let{insetLeft:n,insetTop:r}=o.getOptions();return Object.assign(Object.assign({},y),{center:[f[0]-n,f[1]-r],labelAlign:"perpendicular",labelDirection:"positive",tickDirection:"positive",gridDirection:"negative"});}return Object.assign(Object.assign({},y),{labelAlign:"parallel",labelDirection:"negative",tickDirection:"negative",gridDirection:"positive"});}(a,v,C,O,i),{axis:R,axisArc:P={}}=s,k=(0,g.adaptor)((0,l.default)({},R,P,M,Object.assign(Object.assign({type:"arc",data:A,titleText:(0,g.titleContent)(E),grid:w},S),m)));return new o.Axis({style:(0,u.default)(k,["transform"])});};});E.props={defaultPosition:"center",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]},w.props={defaultPosition:"outer",defaultOrientation:"vertical",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]};},"3bb506d6":function(n,r,i){n.exports=function(n,r,i){for(var a=i-1,o=n.length;++a<o;)if(n[a]===r)return a;return -1;};},"3bbc6f6c":function(n,r,i){var a=i("a4b1544e");function o(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable;})),i.push.apply(i,a);}return i;}n.exports=function(n){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?o(Object(i),!0).forEach(function(r){a(n,r,i[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(i,r));});}return n;},n.exports.__esModule=!0,n.exports.default=n.exports;},"3cf89988":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return d;}});var a=i("777fffbe"),o=i("852bbaa9"),s=a._(i("613f75ca")),l=a._(i("e4870cf0")),u=a._(i("99c0cd4c")),c=o._(i("609f48be")),f=["show"];function d(n,r){return c.useMemo(function(){var i={};r&&(i.show="object"===(0,u.default)(r)&&r.formatter?r.formatter:!!r);var a=i=(0,l.default)((0,l.default)({},i),n),o=a.show,c=(0,s.default)(a,f);return(0,l.default)((0,l.default)({},c),{},{show:!!o,showFormatter:"function"==typeof o?o:void 0,strategy:c.strategy||function(n){return n.length;}});},[n,r]);}},"3cfe57c6":function(n,r,i){"use strict";function a(n,r){if(null!==n)return{type:"column",value:n,field:r};}function o(n,r){return Object.assign(Object.assign({},a(n,r)),{inferred:!0});}function s(n,r){if(null!==n)return{type:"column",value:n,field:r,visual:!0};}function l(n,r){return Object.assign(Object.assign({},a(n,r)),{constant:!1});}function u(n,r){let i=[];for(let a of n)i[a]=r;return i;}function c(n,r){let i=n[r];if(!i)return[null,null];let{value:a,field:o=null}=i;return[a,o];}function f(n,...r){for(let i of r){if("string"!=typeof i)return[i,null];{let[r,a]=c(n,i);if(null!==r)return[r,a];}}return[null,null];}function d(n){return!(n instanceof Date)&&"object"==typeof n;}i.d(r,"__esModule",{value:!0}),i.e(r,{column:function(){return a;},columnOf:function(){return c;},constant:function(){return u;},inferredColumn:function(){return o;},isObject:function(){return d;},maybeColumnOf:function(){return f;},nonConstantColumn:function(){return l;},visualColumn:function(){return s;}});},"3e5046a0":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{filterExec:function(){return d;},getCallbackStyle:function(){return f;},getDirectionVector:function(){return m;},getLabelVector:function(){return g;},getLineAngle:function(){return h;},getLineTangentVector:function(){return p;}});var a=i("777fffbe"),o=i("3862611d"),s=a._(i("da5c7e2c")),l=i("5557e3b4"),u=i("4da6dd65"),c=i("6210cecb");function f(n,r){return Object.fromEntries(Object.entries(n).map(function(n){var i=(0,o.__read)(n,2),a=i[0],s=i[1];return[a,(0,u.getCallbackValue)(s,r)];}));}function d(n,r){return r&&(0,s.default)(r)?n.filter(r):n;}function h(n,r){var i=r.startAngle;return(r.endAngle-i)*n+i;}function p(n,r){if("linear"===r.type){var i=(0,o.__read)(r.startPos,2),a=i[0],s=i[1],u=(0,o.__read)(r.endPos,2),f=u[0],d=u[1],p=(0,o.__read)([f-a,d-s],2),m=p[0],g=p[1];return(0,c.normalize)([m,g]);}var v=(0,l.degToRad)(h(n,r));return[-Math.sin(v),Math.cos(v)];}function m(n,r,i){var a=p(n,i);return(0,c.vertical)(a,"positive"!==r);}function g(n,r){return m(n,r.labelDirection,r);}},"3eac21b1":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return d;}});var a=i("777fffbe"),o=a._(i("a854094b")),s=a._(i("e4870cf0")),l=i("a3273044"),u=function(n){return{backgroundColor:n.controlItemBgActive,borderColor:n.controlOutline};},c=function(n){var r=n.componentCls;return(0,o.default)((0,o.default)((0,o.default)({},r,(0,s.default)((0,s.default)({position:"relative",display:"flex",flexDirection:"column",boxSizing:"border-box",width:"100%",marginBlock:0,marginInline:0,paddingBlock:0,paddingInline:0,backgroundColor:n.colorBgContainer,borderRadius:n.borderRadius,transition:"all 0.3s"},null===l.resetComponent||void 0===l.resetComponent?void 0:(0,l.resetComponent)(n)),{},(0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)({"&-box-shadow":{boxShadow:"0 1px 2px -2px #00000029, 0 3px 6px #0000001f, 0 5px 12px 4px #00000017",borderColor:"transparent"},"&-col":{width:"100%"},"&-border":{border:"".concat(n.lineWidth,"px ").concat(n.lineType," ").concat(n.colorSplit)},"&-hoverable":(0,o.default)({cursor:"pointer",transition:"box-shadow 0.3s, border-color 0.3s","&:hover":{borderColor:"transparent",boxShadow:"0 1px 2px -2px #00000029, 0 3px 6px #0000001f, 0 5px 12px 4px #00000017"}},"&".concat(r,"-checked:hover"),{borderColor:n.controlOutline}),"&-checked":(0,s.default)((0,s.default)({},u(n)),{},{"&::after":{visibility:"visible",position:"absolute",insetBlockStart:2,insetInlineEnd:2,opacity:1,width:0,height:0,border:"6px solid ".concat(n.colorPrimary),borderBlockEnd:"6px solid transparent",borderInlineStart:"6px solid transparent",borderStartEndRadius:2,content:'""'}}),"&:focus":(0,s.default)({},u(n)),"&&-ghost":(0,o.default)({backgroundColor:"transparent"},"> ".concat(r),{"&-header":{paddingInlineEnd:0,paddingBlockEnd:n.padding,paddingInlineStart:0},"&-body":{paddingBlock:0,paddingInline:0,backgroundColor:"transparent"}}),"&&-split > &-body":{paddingBlock:0,paddingInline:0},"&&-contain-card > &-body":{display:"flex"}},"".concat(r,"-body-direction-column"),{flexDirection:"column"}),"".concat(r,"-body-wrap"),{flexWrap:"wrap"}),"&&-collapse",(0,o.default)({},"> ".concat(r),{"&-header":{paddingBlockEnd:n.padding,borderBlockEnd:0},"&-body":{display:"none"}})),"".concat(r,"-header"),{display:"flex",alignItems:"center",justifyContent:"space-between",paddingInline:n.paddingLG,paddingBlock:n.padding,paddingBlockEnd:0,"&-border":{"&":{paddingBlockEnd:n.padding},borderBlockEnd:"".concat(n.lineWidth,"px ").concat(n.lineType," ").concat(n.colorSplit)},"&-collapsible":{cursor:"pointer"}}),"".concat(r,"-title"),{color:n.colorText,fontWeight:500,fontSize:n.fontSizeLG,lineHeight:n.lineHeight}),"".concat(r,"-extra"),{color:n.colorText}),"".concat(r,"-type-inner"),(0,o.default)({},"".concat(r,"-header"),{backgroundColor:n.colorFillAlter})),"".concat(r,"-collapsible-icon"),{marginInlineEnd:n.marginXS,color:n.colorIconHover,":hover":{color:n.colorPrimaryHover},"& svg":{transition:"transform ".concat(n.motionDurationMid)}}),"".concat(r,"-body"),{display:"block",boxSizing:"border-box",height:"100%",paddingInline:n.paddingLG,paddingBlock:n.padding,"&-center":{display:"flex",alignItems:"center",justifyContent:"center"}}),"&&-size-small",(0,o.default)((0,o.default)({},r,{"&-header":{paddingInline:n.paddingSM,paddingBlock:n.paddingXS,paddingBlockEnd:0,"&-border":{paddingBlockEnd:n.paddingXS}},"&-title":{fontSize:n.fontSize},"&-body":{paddingInline:n.paddingSM,paddingBlock:n.paddingSM}}),"".concat(r,"-header").concat(r,"-header-collapsible"),{paddingBlock:n.paddingXS})))),"".concat(r,"-col"),(0,o.default)((0,o.default)({},"&".concat(r,"-split-vertical"),{borderInlineEnd:"".concat(n.lineWidth,"px ").concat(n.lineType," ").concat(n.colorSplit)}),"&".concat(r,"-split-horizontal"),{borderBlockEnd:"".concat(n.lineWidth,"px ").concat(n.lineType," ").concat(n.colorSplit)})),"".concat(r,"-tabs"),(0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)({},"".concat(n.antCls,"-tabs-top > ").concat(n.antCls,"-tabs-nav"),(0,o.default)({marginBlockEnd:0},"".concat(n.antCls,"-tabs-nav-list"),{marginBlockStart:n.marginXS,paddingInlineStart:n.padding})),"".concat(n.antCls,"-tabs-bottom > ").concat(n.antCls,"-tabs-nav"),(0,o.default)({marginBlockEnd:0},"".concat(n.antCls,"-tabs-nav-list"),{paddingInlineStart:n.padding})),"".concat(n.antCls,"-tabs-left"),(0,o.default)({},"".concat(n.antCls,"-tabs-content-holder"),(0,o.default)({},"".concat(n.antCls,"-tabs-content"),(0,o.default)({},"".concat(n.antCls,"-tabs-tabpane"),{paddingInlineStart:0})))),"".concat(n.antCls,"-tabs-left > ").concat(n.antCls,"-tabs-nav"),(0,o.default)({marginInlineEnd:0},"".concat(n.antCls,"-tabs-nav-list"),{paddingBlockStart:n.padding})),"".concat(n.antCls,"-tabs-right"),(0,o.default)({},"".concat(n.antCls,"-tabs-content-holder"),(0,o.default)({},"".concat(n.antCls,"-tabs-content"),(0,o.default)({},"".concat(n.antCls,"-tabs-tabpane"),{paddingInlineStart:0})))),"".concat(n.antCls,"-tabs-right > ").concat(n.antCls,"-tabs-nav"),(0,o.default)({},"".concat(n.antCls,"-tabs-nav-list"),{paddingBlockStart:n.padding})));},f=function(n,r){var i=r.componentCls;return 0===n?(0,o.default)({},"".concat(i,"-col-0"),{display:"none"}):(0,o.default)({},"".concat(i,"-col-").concat(n),{flexShrink:0,width:"".concat(n/24*100,"%")});};function d(n){return(0,l.useStyle)("ProCard",function(r){var i=(0,s.default)((0,s.default)({},r),{},{componentCls:".".concat(n)});return[c(i),Array(25).fill(1).map(function(n,r){return f(r,i);})];});}},"3efd64b7":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return c;},phi:function(){return l;},squarifyRatio:function(){return u;}});var a=i("777fffbe"),o=a._(i("a96a4c71")),s=a._(i("01c1137e")),l=(1+Math.sqrt(5))/2;function u(n,r,i,a,l,u){for(var c,f,d,h,p,m,g,v,y,_,b,x=[],E=r.children,w=0,S=0,T=E.length,A=r.value;w<T;){d=l-i,h=u-a;do p=E[S++].value;while(!p&&S<T)for(m=g=p,y=Math.max(g/(b=p*p*(_=Math.max(h/d,d/h)/(A*n))),b/m);S<T;++S){if(p+=f=E[S].value,f<m&&(m=f),f>g&&(g=f),(v=Math.max(g/(b=p*p*_),b/m))>y){p-=f;break;}y=v;}x.push(c={value:p,dice:d<h,children:E.slice(w,S)}),c.dice?(0,o.default)(c,i,a,l,A?a+=h*p/A:u):(0,s.default)(c,i,a,A?i+=d*p/A:l,u),A-=p,w=S;}return x;}var c=function n(r){function i(n,i,a,o,s){u(r,n,i,a,o,s);}return i.ratio=function(r){return n((r=+r)>1?r:1);},i;}(l);},"3f3add3b":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return l;}});var a=i("777fffbe"),o=a._(i("480dd2d5")),s=a._(i("b42f1d64")),l=function(n){if(!(0,s.default)(n))return!1;var r=(0,o.default)(n);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r;};},"3f775776":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});var a=i("777fffbe")._(i("2cc7f81c")).default.Symbol;},"3f92e064":function(n,r,i){"use strict";function a(n,r){return Math.sqrt((n[0]-r[0])*(n[0]-r[0])+(n[1]-r[1])*(n[1]-r[1]));}i.d(r,"__esModule",{value:!0}),i.d(r,"distanceSquareRoot",{enumerable:!0,get:function(){return a;}});},"4017e4bc":function(n,r,i){"use strict";function a(n,r){return n=+n,r=+r,function(i){return n*(1-i)+r*i;};}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},"40c8a0ce":function(n,r,i){var a=i("1c9de5a5"),o=i("426615a4"),s=i("27063286"),l=i("20367225"),u=i("469db534"),c=i("bbc15be8"),f=i("a76367d1"),d=i("a59b28c4"),h="[object Arguments]",p="[object Array]",m="[object Object]",g=Object.prototype.hasOwnProperty;n.exports=function(n,r,i,v,y,_){var b=c(n),x=c(r),E=b?p:u(n),w=x?p:u(r);E=E==h?m:E,w=w==h?m:w;var S=E==m,T=w==m,A=E==w;if(A&&f(n)){if(!f(r))return!1;b=!0,S=!1;}if(A&&!S)return _||(_=new a),b||d(n)?o(n,r,i,v,y,_):s(n,r,E,i,v,y,_);if(!(1&i)){var C=S&&g.call(n,"__wrapped__"),O=T&&g.call(r,"__wrapped__");if(C||O){var M=C?n.value():n,R=O?r.value():r;return _||(_=new a),y(M,R,i,v,_);}}return!!A&&(_||(_=new a),l(n,r,i,v,y,_));};},"410a4659":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"Vector",{enumerable:!0,get:function(){return u;}});var a=i("af0c43b0"),o=i("45669125"),s=i("7d4c6398"),l=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let u=(n,r)=>{let{arrow:i=!0,arrowSize:u="40%"}=n,c=l(n,["arrow","arrowSize"]),{document:f}=r;return(n,r,d)=>{let{defaultColor:h}=d,p=l(d,["defaultColor"]),{color:m=h,transform:g}=r,[v,y]=n,_=(0,a.path)();if(_.moveTo(...v),_.lineTo(...y),i){let[n,r]=(0,o.arrowPoints)(v,y,{arrowSize:u});_.moveTo(...n),_.lineTo(...y),_.lineTo(...r);}return(0,s.select)(f.createElement("path",{})).call(o.applyStyle,p).style("d",_.toString()).style("stroke",m).style("transform",g).call(o.applyStyle,c).node();};};u.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};},"41a7442f":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return _;}});var a=i("777fffbe"),o=i("78a22024"),s=a._(o),l=i("adf76174"),u=a._(l),c=i("609f48be");a._(c);var f=i("e4870cf0"),d=a._(f),h=i("a854094b"),p=a._(h),m=i("398ab4d8"),g=i("a3273044"),v=new m.Keyframes("card-loading",{"0%":{backgroundPosition:"0 50%"},"50%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0 50%"}}),y=i("dac8af92"),_=function(n){var r,i=n.style,a=n.prefix;return(0,(r=a||"ant-pro-card",(0,g.useStyle)("ProCardLoading",function(n){var i;return[(i=(0,d.default)((0,d.default)({},n),{},{componentCls:".".concat(r)}),(0,p.default)({},i.componentCls,(0,p.default)((0,p.default)({"&-loading":{overflow:"hidden"},"&-loading &-body":{userSelect:"none"}},"".concat(i.componentCls,"-loading-content"),{width:"100%",p:{marginBlock:0,marginInline:0}}),"".concat(i.componentCls,"-loading-block"),{height:"14px",marginBlock:"4px",background:"linear-gradient(90deg, rgba(54, 61, 64, 0.2), rgba(54, 61, 64, 0.4), rgba(54, 61, 64, 0.2))",backgroundSize:"600% 600%",borderRadius:i.borderRadius,animationName:v,animationDuration:"1.4s",animationTimingFunction:"ease",animationIterationCount:"infinite"})))];})).wrapSSR)((0,y.jsxs)("div",{className:"".concat(a,"-loading-content"),style:i,children:[(0,y.jsx)(u.default,{gutter:8,children:(0,y.jsx)(s.default,{span:22,children:(0,y.jsx)("div",{className:"".concat(a,"-loading-block")})})}),(0,y.jsxs)(u.default,{gutter:8,children:[(0,y.jsx)(s.default,{span:8,children:(0,y.jsx)("div",{className:"".concat(a,"-loading-block")})}),(0,y.jsx)(s.default,{span:15,children:(0,y.jsx)("div",{className:"".concat(a,"-loading-block")})})]}),(0,y.jsxs)(u.default,{gutter:8,children:[(0,y.jsx)(s.default,{span:6,children:(0,y.jsx)("div",{className:"".concat(a,"-loading-block")})}),(0,y.jsx)(s.default,{span:18,children:(0,y.jsx)("div",{className:"".concat(a,"-loading-block")})})]}),(0,y.jsxs)(u.default,{gutter:8,children:[(0,y.jsx)(s.default,{span:13,children:(0,y.jsx)("div",{className:"".concat(a,"-loading-block")})}),(0,y.jsx)(s.default,{span:9,children:(0,y.jsx)("div",{className:"".concat(a,"-loading-block")})})]}),(0,y.jsxs)(u.default,{gutter:8,children:[(0,y.jsx)(s.default,{span:4,children:(0,y.jsx)("div",{className:"".concat(a,"-loading-block")})}),(0,y.jsx)(s.default,{span:3,children:(0,y.jsx)("div",{className:"".concat(a,"-loading-block")})}),(0,y.jsx)(s.default,{span:16,children:(0,y.jsx)("div",{className:"".concat(a,"-loading-block")})})]})]}));};},"42520f5c":function(n,r,i){"use strict";function a(){}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},"426615a4":function(n,r,i){var a=i("6c4af3b3"),o=i("a3307b57"),s=i("831aa241");n.exports=function(n,r,i,l,u,c){var f=1&i,d=n.length,h=r.length;if(d!=h&&!(f&&h>d))return!1;var p=c.get(n),m=c.get(r);if(p&&m)return p==r&&m==n;var g=-1,v=!0,y=2&i?new a:void 0;for(c.set(n,r),c.set(r,n);++g<d;){var _=n[g],b=r[g];if(l)var x=f?l(b,_,g,r,n,c):l(_,b,g,n,r,c);if(void 0!==x){if(x)continue;v=!1;break;}if(y){if(!o(r,function(n,r){if(!s(y,r)&&(_===n||u(_,n,i,l,c)))return y.push(r);})){v=!1;break;}}else if(!(_===b||u(_,b,i,l,c))){v=!1;break;}}return c.delete(n),c.delete(r),v;};},"42870d23":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return o;}});var a=i("dac8af92"),o=function(n){var r=n.children;return(0,a.jsx)(a.Fragment,{children:r});};},"42885e34":function(n,r,i){var a=i("231450c4")(i("6040b637"),"Promise");n.exports=a;},"428badac":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});var a=function(n){var r=typeof n;return null!==n&&"object"===r||"function"===r;};},"42996afe":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return p;}});var a=i("777fffbe")._(i("110b1906")),o=i("0d102543"),s=i("d09fdf20");function l(n){return n.innerRadius;}function u(n){return n.outerRadius;}function c(n){return n.startAngle;}function f(n){return n.endAngle;}function d(n){return n&&n.padAngle;}function h(n,r,i,a,s,l,u){var c=n-i,f=r-a,d=(u?l:-l)/(0,o.sqrt)(c*c+f*f),h=d*f,p=-d*c,m=n+h,g=r+p,v=i+h,y=a+p,_=(m+v)/2,b=(g+y)/2,x=v-m,E=y-g,w=x*x+E*E,S=s-l,T=m*y-v*g,A=(E<0?-1:1)*(0,o.sqrt)((0,o.max)(0,S*S*w-T*T)),C=(T*E-x*A)/w,O=(-T*x-E*A)/w,M=(T*E+x*A)/w,R=(-T*x+E*A)/w,P=C-_,k=O-b,I=M-_,L=R-b;return P*P+k*k>I*I+L*L&&(C=M,O=R),{cx:C,cy:O,x01:-h,y01:-p,x11:C*(s/S-1),y11:O*(s/S-1)};}function p(){var n=l,r=u,i=(0,a.default)(0),p=null,m=c,g=f,v=d,y=null,_=(0,s.withPath)(b);function b(){var a,s,l=+n.apply(this,arguments),u=+r.apply(this,arguments),c=m.apply(this,arguments)-o.halfPi,f=g.apply(this,arguments)-o.halfPi,d=(0,o.abs)(f-c),b=f>c;if(y||(y=a=_()),u<l&&(s=u,u=l,l=s),u>o.epsilon){if(d>o.tau-o.epsilon)y.moveTo(u*(0,o.cos)(c),u*(0,o.sin)(c)),y.arc(0,0,u,c,f,!b),l>o.epsilon&&(y.moveTo(l*(0,o.cos)(f),l*(0,o.sin)(f)),y.arc(0,0,l,f,c,b));else{var x,E,w=c,S=f,T=c,A=f,C=d,O=d,M=v.apply(this,arguments)/2,R=M>o.epsilon&&(p?+p.apply(this,arguments):(0,o.sqrt)(l*l+u*u)),P=(0,o.min)((0,o.abs)(u-l)/2,+i.apply(this,arguments)),k=P,I=P;if(R>o.epsilon){var L=(0,o.asin)(R/l*(0,o.sin)(M)),N=(0,o.asin)(R/u*(0,o.sin)(M));(C-=2*L)>o.epsilon?(L*=b?1:-1,T+=L,A-=L):(C=0,T=A=(c+f)/2),(O-=2*N)>o.epsilon?(N*=b?1:-1,w+=N,S-=N):(O=0,w=S=(c+f)/2);}var D=u*(0,o.cos)(w),F=u*(0,o.sin)(w),B=l*(0,o.cos)(A),j=l*(0,o.sin)(A);if(P>o.epsilon){var z,U=u*(0,o.cos)(S),V=u*(0,o.sin)(S),G=l*(0,o.cos)(T),H=l*(0,o.sin)(T);if(d<o.pi){if(z=function(n,r,i,a,s,l,u,c){var f=i-n,d=a-r,h=u-s,p=c-l,m=p*f-h*d;if(!(m*m<o.epsilon))return m=(h*(r-l)-p*(n-s))/m,[n+m*f,r+m*d];}(D,F,G,H,U,V,B,j)){var W=D-z[0],X=F-z[1],q=U-z[0],$=V-z[1],Y=1/(0,o.sin)((0,o.acos)((W*q+X*$)/((0,o.sqrt)(W*W+X*X)*(0,o.sqrt)(q*q+$*$)))/2),Z=(0,o.sqrt)(z[0]*z[0]+z[1]*z[1]);k=(0,o.min)(P,(l-Z)/(Y-1)),I=(0,o.min)(P,(u-Z)/(Y+1));}else k=I=0;}}O>o.epsilon?I>o.epsilon?(x=h(G,H,D,F,u,I,b),E=h(U,V,B,j,u,I,b),y.moveTo(x.cx+x.x01,x.cy+x.y01),I<P?y.arc(x.cx,x.cy,I,(0,o.atan2)(x.y01,x.x01),(0,o.atan2)(E.y01,E.x01),!b):(y.arc(x.cx,x.cy,I,(0,o.atan2)(x.y01,x.x01),(0,o.atan2)(x.y11,x.x11),!b),y.arc(0,0,u,(0,o.atan2)(x.cy+x.y11,x.cx+x.x11),(0,o.atan2)(E.cy+E.y11,E.cx+E.x11),!b),y.arc(E.cx,E.cy,I,(0,o.atan2)(E.y11,E.x11),(0,o.atan2)(E.y01,E.x01),!b))):(y.moveTo(D,F),y.arc(0,0,u,w,S,!b)):y.moveTo(D,F),l>o.epsilon&&C>o.epsilon?k>o.epsilon?(x=h(B,j,U,V,l,-k,b),E=h(D,F,G,H,l,-k,b),y.lineTo(x.cx+x.x01,x.cy+x.y01),k<P?y.arc(x.cx,x.cy,k,(0,o.atan2)(x.y01,x.x01),(0,o.atan2)(E.y01,E.x01),!b):(y.arc(x.cx,x.cy,k,(0,o.atan2)(x.y01,x.x01),(0,o.atan2)(x.y11,x.x11),!b),y.arc(0,0,l,(0,o.atan2)(x.cy+x.y11,x.cx+x.x11),(0,o.atan2)(E.cy+E.y11,E.cx+E.x11),b),y.arc(E.cx,E.cy,k,(0,o.atan2)(E.y11,E.x11),(0,o.atan2)(E.y01,E.x01),!b))):y.arc(0,0,l,A,T,b):y.lineTo(B,j);}}else y.moveTo(0,0);if(y.closePath(),a)return y=null,a+""||null;}return b.centroid=function(){var i=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,a=(+m.apply(this,arguments)+ +g.apply(this,arguments))/2-o.pi/2;return[(0,o.cos)(a)*i,(0,o.sin)(a)*i];},b.innerRadius=function(r){return arguments.length?(n="function"==typeof r?r:(0,a.default)(+r),b):n;},b.outerRadius=function(n){return arguments.length?(r="function"==typeof n?n:(0,a.default)(+n),b):r;},b.cornerRadius=function(n){return arguments.length?(i="function"==typeof n?n:(0,a.default)(+n),b):i;},b.padRadius=function(n){return arguments.length?(p=null==n?null:"function"==typeof n?n:(0,a.default)(+n),b):p;},b.startAngle=function(n){return arguments.length?(m="function"==typeof n?n:(0,a.default)(+n),b):m;},b.endAngle=function(n){return arguments.length?(g="function"==typeof n?n:(0,a.default)(+n),b):g;},b.padAngle=function(n){return arguments.length?(v="function"==typeof n?n:(0,a.default)(+n),b):v;},b.context=function(n){return arguments.length?(y=null==n?null:n,b):y;},b;}},"42fb15d0":function(n,r,i){"use strict";function a(n){let{transformations:r}=n.getOptions();return r.map(([n])=>n).filter(n=>"transpose"===n).length%2!=0;}function o(n){let{transformations:r}=n.getOptions();return r.some(([n])=>"polar"===n);}function s(n){let{transformations:r}=n.getOptions();return r.some(([n])=>"reflect"===n)&&r.some(([n])=>n.startsWith("transpose"));}function l(n){let{transformations:r}=n.getOptions();return r.some(([n])=>"helix"===n);}function u(n){let{transformations:r}=n.getOptions();return r.some(([n])=>"parallel"===n);}function c(n){let{transformations:r}=n.getOptions();return r.some(([n])=>"fisheye"===n);}function f(n){return u(n)&&o(n);}function d(n){return l(n)||o(n);}function h(n){return o(n)&&a(n);}function p(n){if(d(n)){let[r,i]=n.getSize(),a=n.getOptions().transformations.find(n=>"polar"===n[0]);if(a)return Math.max(r,i)/2*a[4];}return 0;}function m(n){let{transformations:r}=n.getOptions(),[,,,i,a]=r.find(n=>"polar"===n[0]);return[+i,+a];}function g(n,r=!0){let{transformations:i}=n.getOptions(),[,a,o]=i.find(n=>"polar"===n[0]);return r?[180*+a/Math.PI,180*+o/Math.PI]:[a,o];}function v(n,r){let{transformations:i}=n.getOptions(),[,...a]=i.find(n=>n[0]===r);return a;}i.d(r,"__esModule",{value:!0}),i.e(r,{angleOf:function(){return g;},getRadius:function(){return p;},getTransformOptions:function(){return v;},isCircular:function(){return d;},isFisheye:function(){return c;},isHelix:function(){return l;},isParallel:function(){return u;},isPolar:function(){return o;},isRadar:function(){return f;},isRadial:function(){return s;},isTheta:function(){return h;},isTranspose:function(){return a;},radiusOf:function(){return m;}});},"42fc1f40":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return l;}});var a=i("777fffbe"),o=a._(i("a96a4c71")),s=a._(i("01c1137e"));function l(n,r,i,a,l){(1&n.depth?s.default:o.default)(n,r,i,a,l);}},"43f60061":function(n,r,i){var a=i("99045891");n.exports=function(n){return function(r){return a(r,n);};};},"449c5245":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),r.hover=void 0;var a,o=Object.assign||function(n){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a]);}return n;},s=(a=i("609f48be"))&&a.__esModule?a:{default:a};function l(n,r){if(!n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&("object"==typeof r||"function"==typeof r)?r:n;}var u=r.hover=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(i){function a(){!function(n,r){if(!(n instanceof r))throw TypeError("Cannot call a class as a function");}(this,a);for(var i,u,c,f=arguments.length,d=Array(f),h=0;h<f;h++)d[h]=arguments[h];return u=c=l(this,(i=a.__proto__||Object.getPrototypeOf(a)).call.apply(i,[this].concat(d))),c.state={hover:!1},c.handleMouseOver=function(){return c.setState({hover:!0});},c.handleMouseOut=function(){return c.setState({hover:!1});},c.render=function(){return s.default.createElement(r,{onMouseOver:c.handleMouseOver,onMouseOut:c.handleMouseOut},s.default.createElement(n,o({},c.props,c.state)));},l(c,u);}return!function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Super expression must either be null or a function, not "+typeof r);n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(n,r):n.__proto__=r);}(a,i),a;}(s.default.Component);};r.default=u;},45669125:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{appendArc:function(){return m;},appendPolygon:function(){return h;},applyStyle:function(){return d;},arrowPoints:function(){return p;},computeGradient:function(){return g;},getArcObject:function(){return y;},getOrigin:function(){return x;},getTransform:function(){return b;},reorder:function(){return v;},toOpacityKey:function(){return _;}});var a=i("777fffbe"),o=i("c2287686"),s=a._(i("1f338b89")),l=a._(i("19faa3be")),u=i("cfce14bf"),c=i("42fb15d0"),f=i("d70a5c58");function d(n,r){for(let[i,a]of Object.entries(r))n.style(i,a);}function h(n,r){return r.forEach((r,i)=>0===i?n.moveTo(r[0],r[1]):n.lineTo(r[0],r[1])),n.closePath(),n;}function p(n,r,i){let{arrowSize:a}=i,o="string"==typeof a?+parseFloat(a)/100*(0,f.dist)(n,r):a,s=Math.PI/6,l=Math.atan2(r[1]-n[1],r[0]-n[0]),u=Math.PI/2-l-s,c=[r[0]-o*Math.sin(u),r[1]-o*Math.cos(u)],d=l-s;return[c,[r[0]-o*Math.cos(d),r[1]-o*Math.sin(d)]];}function m(n,r,i,a,o){let s=(0,f.angle)((0,f.sub)(a,r))+Math.PI,l=(0,f.angle)((0,f.sub)(a,i))+Math.PI;return n.arc(a[0],a[1],o,s,l,l-s<0),n;}function g(n,r,i,a="y",c="between",f=!1){let d="y"===a||!0===a?i:r,h=(0,u.indexOf)(d),[p,m]=(0,l.default)(h,n=>d[n]),v=new o.Linear({domain:[p,m],range:[0,100]}),y=n=>(0,s.default)(d[n])&&!Number.isNaN(d[n])?v.map(d[n]):0,_={between:r=>`${n[r]} ${y(r)}%`,start:r=>0===r?`${n[r]} ${y(r)}%`:`${n[r-1]} ${y(r)}%, ${n[r]} ${y(r)}%`,end:r=>r===n.length-1?`${n[r]} ${y(r)}%`:`${n[r]} ${y(r)}%, ${n[r+1]} ${y(r)}%`},b=h.sort((n,r)=>y(n)-y(r)).map(_[c]||_.between).join(",");return`linear-gradient(${"y"===a||!0===a?f?180:90:f?90:0}deg, ${b})`;}function v(n){let[r,i,a,o]=n;return[o,r,i,a];}function y(n,r,i){let[a,o,,s]=(0,c.isTranspose)(n)?v(r):r,[l,u]=i,d=n.getCenter(),h=(0,f.angleWithQuadrant)((0,f.sub)(a,d)),p=(0,f.angleWithQuadrant)((0,f.sub)(o,d)),m=p===h&&l!==u?p+2*Math.PI:p;return{startAngle:h,endAngle:m-h>=0?m:2*Math.PI+m,innerRadius:(0,f.dist)(s,d),outerRadius:(0,f.dist)(a,d)};}function _(n){let{colorAttribute:r,opacityAttribute:i=r}=n;return`${i}Opacity`;}function b(n,r){if(!(0,c.isPolar)(n))return"";let i=n.getCenter(),{transform:a}=r;return`translate(${i[0]}, ${i[1]}) ${a||""}`;}function x(n){if(1===n.length)return n[0];let[[r,i,a=0],[o,s,l=0]]=n;return[(r+o)/2,(i+s)/2,(a+l)/2];}},"459d5e7d":function(n,r,i){var a=i("7505d865"),o=i("39c5fc9e"),s=i("78ccff10"),l=i("aef7be7a"),u=Object.getOwnPropertySymbols?function(n){for(var r=[];n;)a(r,s(n)),n=o(n);return r;}:l;n.exports=u;},"45d14b4e":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"Text",{enumerable:!0,get:function(){return l;}});var a=i("3862611d"),o=i("5e195043"),s=i("0cf4df74"),l=function(n){function r(r){void 0===r&&(r={});var i=r.style,o=(0,a.__rest)(r,["style"]);return n.call(this,(0,a.__assign)({style:(0,a.__assign)({text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle"},i)},o))||this;}return(0,a.__extends)(r,n),Object.defineProperty(r.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=(0,s.createOffscreenGroup)(this)),this._offscreen;},enumerable:!1,configurable:!0}),r.prototype.disconnectedCallback=function(){var n;null===(n=this._offscreen)||void 0===n||n.destroy();},r;}(o.Text);},"4600e9c8":function(n,r,i){var a=i("a4c5f883"),o=i("aea2ff65"),s=i("3bb506d6");n.exports=function(n,r,i){return r==r?s(n,r,i):a(n,o,i);};},"469db534":function(n,r,i){var a=i("90fd84e0"),o=i("1cb05aa4"),s=i("42885e34"),l=i("863198de"),u=i("b5f7c477"),c=i("d91aaf3b"),f=i("c6018141"),d="[object Map]",h="[object Promise]",p="[object Set]",m="[object WeakMap]",g="[object DataView]",v=f(a),y=f(o),_=f(s),b=f(l),x=f(u),E=c;(a&&E(new a(new ArrayBuffer(1)))!=g||o&&E(new o)!=d||s&&E(s.resolve())!=h||l&&E(new l)!=p||u&&E(new u)!=m)&&(E=function(n){var r=c(n),i="[object Object]"==r?n.constructor:void 0,a=i?f(i):"";if(a)switch(a){case v:return g;case y:return d;case _:return h;case b:return p;case x:return m;}return r;}),n.exports=E;},"46f5c5e9":function(n,r,i){"use strict";var a=Math.log(2),o=n.exports,s=i("c97a579d");function l(n){return 1-Math.abs(n);}n.exports.getUnifiedMinMax=function(n,r){return o.getUnifiedMinMaxMulti([n],r);},n.exports.getUnifiedMinMaxMulti=function(n,r){r=r||{};var i=!1,a=!1,o=s.isNumber(r.width)?r.width:2,l=s.isNumber(r.size)?r.size:50,u=s.isNumber(r.min)?r.min:(i=!0,s.findMinMulti(n)),c=s.isNumber(r.max)?r.max:(a=!0,s.findMaxMulti(n)),f=(c-u)/(l-1);return i&&(u-=2*o*f),a&&(c+=2*o*f),{min:u,max:c};},n.exports.create=function(n,r){if(r=r||{},!n||0===n.length)return[];var i=s.isNumber(r.size)?r.size:50,a=s.isNumber(r.width)?r.width:2,u=o.getUnifiedMinMax(n,{size:i,width:a,min:r.min,max:r.max}),c=u.min,f=u.max-c,d=f/(i-1);if(0===f)return[{x:c,y:1}];for(var h=[],p=0;p<i;p++)h.push({x:c+p*d,y:0});var m=function(n,r){for(var i={},a=0,o=-r;o<=r;o++)a+=n(o/r),i[o]=a;return i;}(l,a),g=m[a],v=m[a-1]-m[a-2],y=0;n.forEach(function(n){var r=Math.floor((n-c)/d);if(!(r+a<0)&&!(r-a>=h.length)){var i=Math.max(r-a,0),o=Math.min(r+a,h.length-1),l=i-(r-a),u=r+a-o,f=g/(g-(m[-a-1+l]||0)-(m[-a-1+u]||0));l>0&&(y+=f*(l-1)*v);var p=Math.max(0,r-a+1);s.inside(0,h.length-1,p)&&(h[p].y+=1*f*v),s.inside(0,h.length-1,r+1)&&(h[r+1].y-=2*f*v),s.inside(0,h.length-1,o+1)&&(h[o+1].y+=1*f*v);}});var _=y,b=0,x=0;return h.forEach(function(n){b+=n.y,_+=b,n.y=_,x+=_;}),x>0&&h.forEach(function(n){n.y/=x;}),h;},n.exports.getExpectedValueFromPdf=function(n){if(n&&0!==n.length){var r=0;return n.forEach(function(n){r+=n.x*n.y;}),r;}},n.exports.getXWithLeftTailArea=function(n,r){if(n&&0!==n.length){for(var i=0,a=0,o=0;o<n.length&&(a=o,!((i+=n[o].y)>=r));o++);return n[a].x;}},n.exports.getPerplexity=function(n){if(n&&0!==n.length){var r=0;return n.forEach(function(n){var i=Math.log(n.y);isFinite(i)&&(r+=n.y*i);}),Math.pow(2,r=-r/a);}};},"47334cff":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return o;}});var a=i("777fffbe")._(i("e93984e8")),o=function(n,r,i){"__proto__"==r&&a.default?(0,a.default)(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i;};},"4749c5b7":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{aProjectFlat:function(){return h;},amap2Project:function(){return p;},bBoxToBounds:function(){return v;},boundsContains:function(){return g;},calculateCentroid:function(){return _;},calculatePointsCenterAndRadius:function(){return b;},extent:function(){return f;},getBBoxFromPoints:function(){return x;},lngLatInExtent:function(){return c;},lngLatToMeters:function(){return d;},normalize:function(){return y;},padBounds:function(){return m;}});var a=i("ca69744f");function o(n){var r=[1/0,1/0,-1/0,-1/0];return(0,a.coordEach)(n,function(n){r[0]>n[0]&&(r[0]=n[0]),r[1]>n[1]&&(r[1]=n[1]),r[2]<n[0]&&(r[2]=n[0]),r[3]<n[1]&&(r[3]=n[1]);}),r;}o.default=o;var s=i("64787828"),l=i("d4ba3080"),u=2*Math.PI*6378137/2;function c(n,r){let[i,a,o,s]=r;return n.lng>i&&n.lng<=o&&n.lat>a&&n.lat<=s;}function f(n){let r=[1/0,1/0,-1/0,-1/0];return n.forEach(n=>{let{coordinates:i}=n;(function n(r,i){return Array.isArray(i[0])?i.forEach(i=>{n(r,i);}):(r[0]>i[0]&&(r[0]=i[0]),r[1]>i[1]&&(r[1]=i[1]),r[2]<i[0]&&(r[2]=i[0]),r[3]<i[1]&&(r[3]=i[1])),r;})(r,i);}),r;}function d(n,r=!0,i={enable:!0,decimal:1}){let a=(n=function(n,r){if(!1===r)return n;let i=function(n){if(null==n)throw Error("lng is required");return(n>180||n<-180)&&((n%=360)>180&&(n=-360+n),n<-180&&(n=360+n),0===n&&(n=0)),n;}(n[0]),a=function(n){if(null==n)throw Error("lat is required");return(n>90||n<-90)&&((n%=180)>90&&(n=-180+n),n<-90&&(n=180+n),0===n&&(n=0)),n;}(n[1]);return a>85&&(a=85),a<-85&&(a=-85),3===n.length?[i,a,n[2]]:[i,a];}(n,r))[0],o=n[1],s=a*u/180,l=Math.log(Math.tan((90+o)*Math.PI/360))/(Math.PI/180);return l=l*u/180,i.enable&&(s=Number(s.toFixed(i.decimal)),l=Number(l.toFixed(i.decimal))),3===n.length?[s,l,n[2]]:[s,l];}function h(n){let r=Math.max(Math.min(85.0511287798,n[1]),-85.0511287798),i=Math.PI/180,a=n[0]*i,o=r*i;o=Math.log(Math.tan(Math.PI/4+o/2));let s=-.5/Math.PI;return i=.5,[Math.floor(a=268435456*(.5/Math.PI*a+.5)),Math.floor(o=268435456*(s*o+i))];}function p(n,r){let i=Math.PI/180;return r=Math.max(Math.min(85.0511287798,r),-85.0511287798),n*=i,r*=i,[6378137*n,6378137*(r=Math.log(Math.tan(Math.PI/4+r/2)))];}function m(n,r){let i=Math.abs(n[1][1]-n[0][1])*r,a=Math.abs(n[1][0]-n[0][0])*r;return[[n[0][0]-a,n[0][1]-i],[n[1][0]+a,n[1][1]+i]];}function g(n,r){return n[0][0]<=r[0][0]&&n[0][1]<=r[0][1]&&n[1][0]>=r[1][0]&&n[1][1]>=r[1][1];}function v(n){return[[n[0],n[1]],[n[2],n[3]]];}function y(n){var r;let i=(r=[0,0],Math.sqrt(Math.pow(n[0]-r[0],2)+Math.pow(n[1]-r[1],2)));return[n[0]/i,n[1]/i];}function _(n){if((0,l.isNumber)(n[0]))return n;if((0,l.isNumber)(n[0][0]))throw Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if((0,l.isNumber)(n[0][0][0])){let r=0,i=0,a=0;return n.forEach(n=>{n.forEach(n=>{r+=n[0],i+=n[1],a++;});}),[r/a,i/a,0];}throw Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");}function b(n){let r=n[0],i=n[1],a=n[0],o=n[1],s=0,l=0,u=0;for(let c=0;c<n.length;c+=2){let f=n[c],d=n[c+1];f&&d&&(r=Math.max(f,r),i=Math.max(d,i),a=Math.min(f,a),o=Math.min(d,o),s+=f,l+=d,u++);}return{center:[s/u,l/u],radius:Math.sqrt(Math.pow(r-a,2)+Math.pow(i-o,2))/2};}function x(n){return o((0,s.featureCollection)([(0,s.lineString)(n)]));}},"4783ed5c":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"useStyle",{enumerable:!0,get:function(){return u;}});var a=i("777fffbe"),o=a._(i("e4870cf0")),s=a._(i("a854094b")),l=i("a3273044");function u(n){return(0,l.useStyle)("ProFormList",function(r){var i;return[(i=(0,o.default)((0,o.default)({},r),{},{componentCls:".".concat(n)}),(0,s.default)((0,s.default)({},"".concat(i.antCls,"-pro"),(0,s.default)({},"".concat(i.antCls,"-form:not(").concat(i.antCls,"-form-horizontal)"),(0,s.default)({},i.componentCls,(0,s.default)({},"&-item:not(".concat(i.componentCls,"-item-show-label)"),(0,s.default)({},"".concat(i.antCls,"-form-item-label"),{display:"none"}))))),i.componentCls,(0,s.default)((0,s.default)({maxWidth:"100%","&-item":{"&&-show-label":(0,s.default)({},"".concat(i.antCls,"-form-item-label"),{display:"inline-block"}),"&&-default:first-child":{"div:first-of-type":(0,s.default)({},"".concat(i.antCls,"-form-item"),(0,s.default)({},"".concat(i.antCls,"-form-item-label"),{display:"inline-block"}))},"&&-default:not(:first-child)":{"div:first-of-type":(0,s.default)({},"".concat(i.antCls,"-form-item"),(0,s.default)({},"".concat(i.antCls,"-form-item-label"),{display:"none"}))}},"&-action":{display:"flex",height:i.controlHeight,marginBlockEnd:i.marginLG,lineHeight:i.controlHeight+"px","&-small":{height:i.controlHeightSM,lineHeight:i.controlHeightSM}},"&-action-icon":{marginInlineStart:8,cursor:"pointer",transition:"color 0.3s ease-in-out","&:hover":{color:i.colorPrimaryTextHover}}},"".concat(i.proComponentsCls,"-card ").concat(i.proComponentsCls,"-card-extra"),(0,s.default)({},i.componentCls,{"&-action":{marginBlockEnd:0}})),"&-creator-button-top",{marginBlockEnd:24})))];});}},"47a6bde3":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"Component",{enumerable:!0,get:function(){return f;}});var a=i("3862611d"),o=i("5e195043"),s=i("0cf4df74"),l=i("ca2da9d1"),u=i("f1d8aa22");function c(){(0,u.visibility)(this,"hidden"!==this.attributes.visibility);}var f=function(n){function r(r,i){void 0===i&&(i={});var a=n.call(this,(0,l.deepAssign)({},{style:i},r))||this;return a.initialized=!1,a._defaultOptions=i,a;}return(0,a.__extends)(r,n),Object.defineProperty(r.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=(0,s.createOffscreenGroup)(this)),this._offscreen;},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"defaultOptions",{get:function(){return this._defaultOptions;},enumerable:!1,configurable:!0}),r.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0;},r.prototype.disconnectedCallback=function(){var n;null===(n=this._offscreen)||void 0===n||n.destroy();},r.prototype.attributeChangedCallback=function(n){"visibility"===n&&c.call(this);},r.prototype.update=function(n,r){var i;return this.attr((0,l.deepAssign)({},this.attributes,n||{})),null===(i=this.render)||void 0===i?void 0:i.call(this,this.attributes,this,r);},r.prototype.clear=function(){this.removeChildren();},r.prototype.bindEvents=function(n,r){},r.prototype.getSubShapeStyle=function(n){return n.x,n.y,n.transform,n.transformOrigin,n.class,n.className,n.zIndex,(0,a.__rest)(n,["x","y","transform","transformOrigin","class","className","zIndex"]);},r;}(o.CustomElement);},"47de8308":function(n,r,i){"use strict";function a(n,r,i){return void 0===i&&(i=1e-5),n===r||Math.abs(n-r)<i;}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},"480dd2d5":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return p;}});var a=i("777fffbe"),o=i("3f775776"),s=a._(o),l=Object.prototype,u=l.hasOwnProperty,c=l.toString,f=s.default?s.default.toStringTag:void 0,d=Object.prototype.toString,h=s.default?s.default.toStringTag:void 0;function p(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":h&&h in Object(n)?function(n){var r=u.call(n,f),i=n[f];try{n[f]=void 0;var a=!0;}catch(n){}var o=c.call(n);return a&&(r?n[f]=i:delete n[f]),o;}(n):d.call(n);}},"4858db45":function(n,r,i){var a=i("d91aaf3b"),o=i("3cd6a52e");n.exports=function(n){return"number"==typeof n||o(n)&&"[object Number]"==a(n);};},"48fdc2f5":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return f;}});var a=i("777fffbe"),o=i("852bbaa9"),s=a._(i("6224e17e")),l=a._(i("3efd64b7")),u=i("1d1b11bd"),c=o._(i("97f96ff9"));function f(){var n=l.default,r=!1,i=1,a=1,o=[0],f=c.constantZero,d=c.constantZero,h=c.constantZero,p=c.constantZero,m=c.constantZero;function g(n){return n.x0=n.y0=0,n.x1=i,n.y1=a,n.eachBefore(v),o=[0],r&&n.eachBefore(s.default),n;}function v(r){var i=o[r.depth],a=r.x0+i,s=r.y0+i,l=r.x1-i,u=r.y1-i;l<a&&(a=l=(a+l)/2),u<s&&(s=u=(s+u)/2),r.x0=a,r.y0=s,r.x1=l,r.y1=u,r.children&&(i=o[r.depth+1]=f(r)/2,a+=m(r)-i,s+=d(r)-i,l-=h(r)-i,u-=p(r)-i,l<a&&(a=l=(a+l)/2),u<s&&(s=u=(s+u)/2),n(r,a,s,l,u));}return g.round=function(n){return arguments.length?(r=!!n,g):r;},g.size=function(n){return arguments.length?(i=+n[0],a=+n[1],g):[i,a];},g.tile=function(r){return arguments.length?(n=(0,u.required)(r),g):n;},g.padding=function(n){return arguments.length?g.paddingInner(n).paddingOuter(n):g.paddingInner();},g.paddingInner=function(n){return arguments.length?(f="function"==typeof n?n:(0,c.default)(+n),g):f;},g.paddingOuter=function(n){return arguments.length?g.paddingTop(n).paddingRight(n).paddingBottom(n).paddingLeft(n):g.paddingTop();},g.paddingTop=function(n){return arguments.length?(d="function"==typeof n?n:(0,c.default)(+n),g):d;},g.paddingRight=function(n){return arguments.length?(h="function"==typeof n?n:(0,c.default)(+n),g):h;},g.paddingBottom=function(n){return arguments.length?(p="function"==typeof n?n:(0,c.default)(+n),g):p;},g.paddingLeft=function(n){return arguments.length?(m="function"==typeof n?n:(0,c.default)(+n),g):m;},g;}},"496cbcb8":function(n,r,i){"use strict";function a(n){return n;}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},"49f29bec":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"ChartEvent",{enumerable:!0,get:function(){return a;}});let a={BEFORE_RENDER:"beforerender",AFTER_RENDER:"afterrender",BEFORE_PAINT:"beforepaint",AFTER_PAINT:"afterpaint",BEFORE_CHANGE_DATA:"beforechangedata",AFTER_CHANGE_DATA:"afterchangedata",BEFORE_CLEAR:"beforeclear",AFTER_CLEAR:"afterclear",BEFORE_DESTROY:"beforedestroy",AFTER_DESTROY:"afterdestroy",BEFORE_CHANGE_SIZE:"beforechangesize",AFTER_CHANGE_SIZE:"afterchangesize",POINTER_TAP:"pointertap",POINTER_DOWN:"pointerdown",POINTER_UP:"pointerup",POINTER_OVER:"pointerover",POINTER_OUT:"pointerout",POINTER_MOVE:"pointermove",POINTER_ENTER:"pointerenter",POINTER_LEAVE:"pointerleave",POINTER_UPOUTSIDE:"pointerupoutside",DRAG_START:"dragstart",DRAG:"drag",DRAG_END:"dragend",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"DROP",CLICK:"click",DBLCLICK:"dblclick"};},"49f51d84":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return o;},slice:function(){return a;}});var a=Array.prototype.slice;function o(n){return"object"==typeof n&&"length"in n?n:Array.from(n);}},"4a936d43":function(n,r,i){var a=i("99045891");n.exports=function(n,r,i){var o=null==n?void 0:a(n,r);return void 0===o?i:o;};},"4ae84d66":function(n,r,i){"use strict";var a="_erd";n.exports={initState:function(n){return n[a]={},n[a];},getState:function(n){return n[a];},cleanState:function(n){delete n[a];}};},"4b38a8f2":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});var a=n=>n;},"4bb2c4c7":function(n,r,i){var a=i("eecc512b")(i("1552e56f"));n.exports=a;},"4c05700a":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return g;}});var a=i("777fffbe"),o=i("852bbaa9"),s=a._(i("e4870cf0")),l=a._(i("613f75ca")),u=i("2a7c9880"),c=o._(i("609f48be")),f=a._(i("2faf3d77")),d=a._(i("551ddf56")),h=i("dac8af92"),p=["fieldProps","proFieldProps"],m="dateRange",g=c.default.forwardRef(function(n,r){var i=n.fieldProps,a=n.proFieldProps,o=(0,l.default)(n,p),g=(0,c.useContext)(f.default);return(0,h.jsx)(d.default,(0,s.default)({ref:r,fieldProps:(0,s.default)({getPopupContainer:g.getPopupContainer},i),valueType:m,proFieldProps:a,filedConfig:{valueType:m,customLightMode:!0,lightFilterLabelFormatter:function(n){return(0,u.dateArrayFormatter)(n,(null==i?void 0:i.format)||"YYYY-MM-DD");}}},o));});},"4c1ff8e6":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return d;}});var a=i("1d1b11bd"),o=i("7b8bcee7"),s={depth:-1},l={},u={};function c(n){return n.id;}function f(n){return n.parentId;}function d(){var n,r=c,i=f;function d(a){var c,f,d,m,g,v,y,_,b=Array.from(a),x=r,E=i,w=new Map;if(null!=n){let r=b.map((r,i)=>{var o;let s;return o=n(r,i,a),s=(o=`${o}`).length,p(o,s-1)&&!p(o,s-2)&&(o=o.slice(0,-1)),"/"===o[0]?o:`/${o}`;}),i=r.map(h),o=new Set(r).add("");for(let n of i)o.has(n)||(o.add(n),r.push(n),i.push(h(n)),b.push(u));x=(n,i)=>r[i],E=(n,r)=>i[r];}for(d=0,c=b.length;d<c;++d)f=b[d],v=b[d]=new o.Node(f),null!=(y=x(f,d,a))&&(y+="")&&(_=v.id=y,w.set(_,w.has(_)?l:v)),null!=(y=E(f,d,a))&&(y+="")&&(v.parent=y);for(d=0;d<c;++d)if(y=(v=b[d]).parent){if(!(g=w.get(y)))throw Error("missing: "+y);if(g===l)throw Error("ambiguous: "+y);g.children?g.children.push(v):g.children=[v],v.parent=g;}else{if(m)throw Error("multiple roots");m=v;}if(!m)throw Error("no root");if(null!=n){for(;m.data===u&&1===m.children.length;)m=m.children[0],--c;for(let n=b.length-1;n>=0&&(v=b[n]).data===u;--n)v.data=null;}if(m.parent=s,m.eachBefore(function(n){n.depth=n.parent.depth+1,--c;}).eachBefore(o.computeHeight),m.parent=null,c>0)throw Error("cycle");return m;}return d.id=function(n){return arguments.length?(r=(0,a.optional)(n),d):r;},d.parentId=function(n){return arguments.length?(i=(0,a.optional)(n),d):i;},d.path=function(r){return arguments.length?(n=(0,a.optional)(r),d):n;},d;}function h(n){let r=n.length;if(r<2)return"";for(;--r>1&&!p(n,r););return n.slice(0,r);}function p(n,r){if("/"===n[r]){let i=0;for(;r>0&&"\\"===n[--r];)++i;if((1&i)==0)return!0;}return!1;}},"4c221234":function(n,r,i){var a=i("d03c096f").default,o=i("df50a282");n.exports=function(n){var r=o(n,"string");return"symbol"==a(r)?r:r+"";},n.exports.__esModule=!0,n.exports.default=n.exports;},"4d6ab2e4":function(n,r,i){n.exports=function(){var n=document.getSelection();if(!n.rangeCount)return function(){};for(var r=document.activeElement,i=[],a=0;a<n.rangeCount;a++)i.push(n.getRangeAt(a));switch(r.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":r.blur();break;default:r=null;}return n.removeAllRanges(),function(){"Caret"===n.type&&n.removeAllRanges(),n.rangeCount||i.forEach(function(r){n.addRange(r);}),r&&r.focus();};};},"4da6dd65":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"getCallbackValue",{enumerable:!0,get:function(){return l;}});var a=i("777fffbe"),o=i("3862611d"),s=a._(i("da5c7e2c"));function l(n,r){return(0,s.default)(n)?n.apply(void 0,(0,o.__spreadArray)([],(0,o.__read)(r),!1)):n;}},"4e82a4b0":function(n,r,i){var a=i("f7ce5fcc"),o=i("8c723d25");n.exports=function(n,r,i){return void 0===i&&(i=r,r=void 0),void 0!==i&&(i=(i=o(i))==i?i:0),void 0!==r&&(r=(r=o(r))==r?r:0),a(o(n),r,i);};},"4f0a089a":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return p;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("7cfeda15"),l=a._(s),u=i("609f48be"),c=o._(u),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},d=i("887aaf6c"),h=a._(d),p=c.forwardRef(function(n,r){return c.createElement(h.default,(0,l.default)({},n,{ref:r,icon:f}));});},"4f59a17d":function(n,r,i){"use strict";var a=i("7070677b");function o(n,r,i){if(3===n){var o=new a(i,i.readVarint()+i.pos);o.length&&(r[o.name]=o);}}n.exports=function(n,r){this.layers=n.readFields(o,{},r);};},"4f68f1f3":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{fillIndex:function(){return l;},getFromDate:function(){return f;},getRowFormat:function(){return c;},leftPad:function(){return o;},pickProps:function(){return u;},toArray:function(){return s;}});var a=i("777fffbe")._(i("f1020fa4"));function o(n,r){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",a=String(n);a.length<r;)a="".concat(i).concat(a);return a;}function s(n){return null==n?[]:Array.isArray(n)?n:[n];}function l(n,r,i){var o=(0,a.default)(n);return o[r]=i,o;}function u(n,r){var i={};return(r||Object.keys(n)).forEach(function(r){void 0!==n[r]&&(i[r]=n[r]);}),i;}function c(n,r,i){if(i)return i;switch(n){case"time":return r.fieldTimeFormat;case"datetime":return r.fieldDateTimeFormat;case"month":return r.fieldMonthFormat;case"year":return r.fieldYearFormat;case"quarter":return r.fieldQuarterFormat;case"week":return r.fieldWeekFormat;default:return r.fieldDateFormat;}}function f(n,r,i){var a=void 0!==i?i:r[r.length-1],o=r.find(function(r){return n[r];});return a!==o?n[o]:void 0;}},"4f81a096":function(n,r,i){"use strict";function a(n,r){return null==n||null==r?NaN:n<r?-1:n>r?1:n>=r?0:NaN;}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},"4fb4672f":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return o;}});var a=i("d4c76e17");function o(n){var r=n.length;return function(i){var o=Math.floor(((i%=1)<0?++i:i)*r),s=n[(o+r-1)%r],l=n[o%r],u=n[(o+1)%r],c=n[(o+2)%r];return(0,a.basis)((i-o/r)*r,s,l,u,c);};}},"5007e869":function(n,r,i){"use strict";function a(n){return null===n?NaN:+n;}function*o(n,r){if(void 0===r)for(let r of n)null!=r&&(r=+r)>=r&&(yield r);else{let i=-1;for(let a of n)null!=(a=r(a,++i,n))&&(a=+a)>=a&&(yield a);}}i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return a;},numbers:function(){return o;}});},"5120ac0c":function(n,r,i){"use strict";function a(n,r,i){return Math.max(r,Math.min(n,i));}function o(n,r=10){return"number"!=typeof n?n:1e-15>Math.abs(n)?n:parseFloat(n.toFixed(r));}i.d(r,"__esModule",{value:!0}),i.e(r,{clamp:function(){return a;},prettyNumber:function(){return o;}});},"515e037d":function(n,r,i){var a=/\w*$/;n.exports=function(n){var r=new n.constructor(n.source,a.exec(n));return r.lastIndex=n.lastIndex,r;};},"51882ede":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return p;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("7cfeda15"),l=a._(s),u=i("609f48be"),c=o._(u),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},d=i("887aaf6c"),h=a._(d),p=c.forwardRef(function(n,r){return c.createElement(h.default,(0,l.default)({},n,{ref:r,icon:f}));});},"53930c34":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});var a=function(){function n(){this._events={};}return n.prototype.on=function(n,r,i){return this._events[n]||(this._events[n]=[]),this._events[n].push({callback:r,once:!!i}),this;},n.prototype.once=function(n,r){return this.on(n,r,!0);},n.prototype.emit=function(n){for(var r=this,i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];var o=this._events[n]||[],s=this._events["*"]||[],l=function(a){for(var o=a.length,s=0;s<o;s++)if(a[s]){var l=a[s],u=l.callback;l.once&&(a.splice(s,1),0===a.length&&delete r._events[n],o--,s--),u.apply(r,i);}};l(o),l(s);},n.prototype.off=function(n,r){if(n){if(r){for(var i=this._events[n]||[],a=i.length,o=0;o<a;o++)i[o].callback===r&&(i.splice(o,1),a--,o--);0===i.length&&delete this._events[n];}else delete this._events[n];}else this._events={};return this;},n.prototype.getEvents=function(){return this._events;},n;}();},"53c765bf":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});var a=i("852bbaa9")._(i("609f48be")).createContext({});},"53def832":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"isPathArray",{enumerable:!0,get:function(){return o;}});var a=i("fdf2eb4c");function o(n){return Array.isArray(n)&&n.every(function(n){var r=n[0].toLowerCase();return a.paramsCount[r]===n.length-1&&"achlmqstvz".includes(r);});}},"551ddf56":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return y;}});var a=i("777fffbe"),o=i("852bbaa9"),s=a._(i("e4870cf0")),l=a._(i("613f75ca")),u=a._(i("933558cb")),c=i("1e1294ad"),f=i("58fbde6a"),d=i("865cc100"),h=o._(i("609f48be")),p=i("a6284f72"),m=i("7f173680"),g=i("dac8af92"),v=["fieldProps","children","labelCol","label","autoFocus","isDefaultDom","render","proFieldProps","renderFormItem","valueType","initialValue","onChange","valueEnum","params","name","dependenciesValues","cacheForSwr","valuePropName"],y=(0,m.createField)((0,h.memo)(function(n){var r=n.fieldProps,i=n.children,a=(n.labelCol,n.label,n.autoFocus),o=(n.isDefaultDom,n.render),c=n.proFieldProps,m=n.renderFormItem,y=n.valueType,_=(n.initialValue,n.onChange),b=n.valueEnum,x=n.params,E=(n.name,n.dependenciesValues),w=n.cacheForSwr,S=n.valuePropName,T=(0,l.default)(n,v),A=(0,h.useContext)(p.EditOrReadOnlyContext),C=(0,h.useMemo)(function(){return E&&T.request?(0,s.default)((0,s.default)({},x),E||{}):x;},[E,x,T.request]),O=(0,d.useRefFunction)(function(){if(null!=r&&r.onChange){for(var n,i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];null==r||null===(n=r.onChange)||void 0===n||n.call.apply(n,[r].concat(a));return;}}),M=(0,h.useMemo)(function(){return(0,s.default)((0,s.default)({autoFocus:a},r),{},{onChange:O});},[a,r,O]);return(0,h.useMemo)(function(){if(i)return h.default.isValidElement(i)?h.default.cloneElement(i,(0,s.default)((0,s.default)({},T),{},{onChange:function(){for(var n,i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];if(null!=r&&r.onChange){null==r||null===(n=r.onChange)||void 0===n||n.call.apply(n,[r].concat(a));return;}null==_||_.apply(void 0,a);}},(null==i?void 0:i.props)||{})):(0,g.jsx)(g.Fragment,{children:i});},[i,null==r?void 0:r.onChange,_,T])||(0,g.jsx)(u.default,(0,s.default)((0,s.default)((0,s.default)({text:null==r?void 0:r[void 0===S?"value":S],render:o,renderFormItem:m,valueType:y||"text",cacheForSwr:void 0!==w&&w,fieldProps:M,valueEnum:(0,f.runFunction)(b)},c),T),{},{mode:(null==c?void 0:c.mode)||A.mode||"edit",params:C}));},function(n,r){return(0,c.isDeepEqualReact)(r,n,["onChange","onBlur"]);}));},"553ee311":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{AttributeType:function(){return T;},CameraUniform:function(){return v;},IDebugLog:function(){return b;},MapServiceEvent:function(){return A;},RasterTileType:function(){return tt;},ScaleTypes:function(){return w;},SceneEventList:function(){return te;},StyleScaleType:function(){return S;},TextureUsage:function(){return ep;},createLayerContainer:function(){return e9;},createSceneContainer:function(){return e7;},globalConfigService:function(){return e6;},removeDuplicateUniforms:function(){return m.removeDuplicateUniforms;}});var a,o,s,l,u,c=i("777fffbe"),f=i("852bbaa9"),d=i("d1751d7c"),h=i("6e56ca49"),p=c._(h),m=i("743342e4"),g=i("9479dab9");let v={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"};var y=d._(i("ef4c46cd"),r),_=d._(i("f05d8806"),r),b={MapInitStart:"mapInitStart",LayerInitStart:"layerInitStart",LayerInitEnd:"layerInitEnd",SourceInitStart:"sourceInitStart",SourceInitEnd:"sourceInitEnd",ScaleInitStart:"scaleInitStart",ScaleInitEnd:"scaleInitEnd",MappingStart:"mappingStart",MappingEnd:"mappingEnd",BuildModelStart:"buildModelStart",BuildModelEnd:"buildModelEnd"},x=d._(i("254c8ced"),r),E=d._(i("df78806b"),r);let w=((a={}).LINEAR="linear",a.SEQUENTIAL="sequential",a.POWER="power",a.LOG="log",a.IDENTITY="identity",a.TIME="time",a.QUANTILE="quantile",a.QUANTIZE="quantize",a.THRESHOLD="threshold",a.CAT="cat",a.DIVERGING="diverging",a.CUSTOM="threshold",a),S=((o={}).CONSTANT="constant",o.VARIABLE="variable",o),T=((s={})[s.Attribute=0]="Attribute",s[s.InstancedAttribute=1]="InstancedAttribute",s[s.Uniform=2]="Uniform",s),A=["mapload","mapchange","mapAfterFrameChange"];var C=d._(i("f237cead"),r),O=i("e4870cf0"),M=c._(O),R=i("a854094b"),P=c._(R),k=i("bdddc911"),I=c._(k),L=i("9b99576f"),N=f._(L);function D(n,r,i){for(let a of r){let{icon:r,xOffset:o}=a;n[r.id]=(0,M.default)((0,M.default)({},r),{},{x:o,y:i,image:r.image,width:r.width,height:r.height});}}function F(n){return Math.pow(2,Math.ceil(Math.log2(n)));}let B=function(){let n=[];for(let r=32;r<128;r++)n.push(String.fromCharCode(r));return n;}();function j(n,r,i,a){n.font=`${a} ${i}px ${r}`,n.fillStyle="black",n.textBaseline="middle";}function z(n,r){for(let i=0;i<n.length;i++)r.data[4*i+3]=n[i];}class U extends N.EventEmitter{constructor(...n){super(...n),(0,P.default)(this,"fontAtlas",void 0),(0,P.default)(this,"iconFontMap",void 0),(0,P.default)(this,"iconFontGlyphs",{}),(0,P.default)(this,"fontOptions",void 0),(0,P.default)(this,"key",void 0),(0,P.default)(this,"cache",new g.LRUCache(3));}get scale(){return 1;}get canvas(){let n=this.cache.get(this.key);return n&&n.data;}get mapping(){let n=this.cache.get(this.key);return n&&n.mapping||{};}getCanvasByKey(n){let r=this.cache.get(n);return r&&r.data;}getMappingByKey(n){let r=this.cache.get(n);return r&&r.mapping||{};}init(){this.cache.clear(),this.fontOptions={fontFamily:"sans-serif",fontWeight:"normal",characterSet:B,fontSize:24,buffer:3,sdf:!0,cutoff:.25,radius:8,iconfont:!1},this.key="",this.iconFontMap=new Map;}addIconGlyphs(n){n.forEach(n=>{this.iconFontGlyphs[n.name]=n.unicode;});}addIconFont(n,r){this.iconFontMap.set(n,r);}getIconFontKey(n){return this.iconFontMap.get(n)||n;}getGlyph(n){return this.iconFontGlyphs[n]?String.fromCharCode(parseInt(this.iconFontGlyphs[n],16)):"";}setFontOptions(n){this.fontOptions=(0,M.default)((0,M.default)({},this.fontOptions),n),this.key=this.getKey();let r=this.getNewChars(this.key,this.fontOptions.characterSet),i=this.cache.get(this.key);if(i&&0===r.length)return;let a=this.generateFontAtlas(this.key,r,i);this.fontAtlas=a,this.cache.set(this.key,a);}addFontFace(n,r){let i=document.createElement("style");i.type="text/css",i.innerText=`
        @font-face{
            font-family: '${n}';
            src: url('${r}') format('woff2'),
            url('${r}') format('woff'),
            url('${r}') format('truetype');
        }`,i.onload=()=>{if(document.fonts)try{document.fonts.load(`24px ${n}`,"L7text"),document.fonts.ready.then(()=>{this.emit("fontloaded",{fontFamily:n});});}catch(n){console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 document.fonts !"),console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 iconfont !"),console.warn(n);}},document.getElementsByTagName("head")[0].appendChild(i);}destroy(){this.cache.clear(),this.iconFontMap.clear();}generateFontAtlas(n,r,i){let{fontFamily:a,fontWeight:o,fontSize:s,buffer:l,sdf:u,radius:c,cutoff:f,iconfont:d}=this.fontOptions,h=i&&i.data;h||((h=window.document.createElement("canvas")).width=1024);let p=h.getContext("2d",{willReadFrequently:!0});j(p,a,s,o);let{mapping:m,canvasHeight:g,xOffset:v,yOffset:y}=function({characterSet:n,getFontWidth:r,fontHeight:i,buffer:a,maxCanvasWidth:o,mapping:s={},xOffset:l=0,yOffset:u=0}){let c=0,f=l;Array.from(n).forEach((n,i)=>{if(!s[n]){let a=r(n,i);f+30>o&&(f=0,c++),s[n]={x:f,y:u+30*c,width:30,height:30,advance:a},f+=30;}});let d=i+2*a;return{mapping:s,xOffset:f,yOffset:u+c*d,canvasHeight:F(u+(c+1)*d)};}((0,M.default)({getFontWidth:n=>p.measureText(n).width,fontHeight:1*s,buffer:l,characterSet:r,maxCanvasWidth:1024},i&&{mapping:i.mapping,xOffset:i.xOffset,yOffset:i.yOffset})),_=p.getImageData(0,0,h.width,h.height);if(h.height=g,p.putImageData(_,0,0),j(p,a,s,o),u){let n=new I.default(s,l,c,f,a,o),i=p.getImageData(0,0,n.size,n.size);for(let a of r){if(d){let r=String.fromCharCode(parseInt(a.replace("&#x","").replace(";",""),16));z(n.draw(r),i);}else z(n.draw(a),i);p.putImageData(i,m[a].x,m[a].y);}}else for(let n of r)p.fillText(n,m[n].x,m[n].y+1*s);return{xOffset:v,yOffset:y,mapping:m,data:h,width:h.width,height:h.height};}getKey(){let{fontFamily:n,fontWeight:r}=this.fontOptions;return`${n}_${r}`;}getNewChars(n,r){let i=this.cache.get(n);if(!i)return r;let a=[],o=new Set(Object.keys(i.mapping));return new Set(r).forEach(n=>{o.has(n)||a.push(n);}),a;}}var V=i("9b84be4b"),G=c._(V);class H extends N.EventEmitter{constructor(...n){super(...n),(0,P.default)(this,"canvasHeight",128),(0,P.default)(this,"texture",void 0),(0,P.default)(this,"canvas",void 0),(0,P.default)(this,"iconData",void 0),(0,P.default)(this,"iconMap",void 0),(0,P.default)(this,"ctx",void 0),(0,P.default)(this,"loadingImageCount",0);}isLoading(){return 0===this.loadingImageCount;}init(){this.iconData=[],this.iconMap={},this.canvas=window.document.createElement("canvas"),this.canvas.width=128,this.canvas.height=128,this.ctx=this.canvas.getContext("2d");}addImage(n,r){var i=this;return(0,G.default)(function*(){let a=new Image;i.loadingImageCount++,i.hasImage(n)?console.warn("Image Id already exists"):i.iconData.push({id:n,size:64}),i.updateIconMap(),a=yield i.loadImage(r);let o=i.iconData.find(r=>r.id===n);o&&(o.image=a,o.width=a.width,o.height=a.height),i.update();})();}addImageMini(n,r,i){let a=i.getSceneConfig().canvas,o=a.createImage();if(this.loadingImageCount++,this.hasImage(n))throw Error("Image Id already exists");this.iconData.push({id:n,size:64}),this.updateIconMap(),this.loadImageMini(r,a).then(r=>{o=r;let i=this.iconData.find(r=>r.id===n);i&&(i.image=o,i.width=o.width,i.height=o.height),this.update();});}getTexture(){return this.texture;}getIconMap(){return this.iconMap;}getCanvas(){return this.canvas;}hasImage(n){return this.iconMap.hasOwnProperty(n);}removeImage(n){this.hasImage(n)&&(this.iconData=this.iconData.filter(r=>r.id!==n),delete this.iconMap[n],this.update());}destroy(){this.removeAllListeners("imageUpdate"),this.iconData=[],this.iconMap={};}loadImage(n){return new Promise((r,i)=>{if(n instanceof HTMLImageElement){r(n);return;}let a=new Image;a.crossOrigin="anonymous",a.onload=()=>{r(a);},a.onerror=()=>{i(Error("Could not load image at "+n));},a.src=n instanceof File?URL.createObjectURL(n):n;});}update(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,0===this.loadingImageCount&&this.emit("imageUpdate");}updateIconAtlas(){this.canvas.width=1024,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(n=>{let{x:r,y:i,image:a,width:o=64,height:s=64}=this.iconMap[n],l=Math.max(o,s)/64,u=s/l,c=o/l;a&&this.ctx.drawImage(a,r+(64-c)/2,i+(64-u)/2,c,u);});}updateIconMap(){let{mapping:n,canvasHeight:r}=function(n,r,i){let a=0,o=0,s=0,l=[],u={};for(let r of n)if(!u[r.id]){let{size:n}=r;a+n+3>1024&&(D(u,l,o),a=0,o=s+o+3,s=0,l=[]),l.push({icon:r,xOffset:a}),a=a+n+3,s=Math.max(s,n);}return l.length>0&&D(u,l,o),{mapping:u,canvasHeight:F(s+o+r)};}(this.iconData,3,0);this.iconMap=n,this.canvasHeight=r;}loadImageMini(n,r){return new Promise((i,a)=>{let o=r.createImage();o.crossOrigin="anonymous",o.onload=()=>{i(o);},o.onerror=()=>{a(Error("Could not load image at "+n));},o.src=n;});}}var W=i("da755037"),X=f._(W);class q{constructor(){(0,P.default)(this,"viewport",void 0),(0,P.default)(this,"overridedViewProjectionMatrix",void 0),(0,P.default)(this,"viewMatrixInverse",void 0),(0,P.default)(this,"cameraPosition",void 0);}init(){}update(n){this.viewport=n,this.viewMatrixInverse=X.create(),X.invert(this.viewMatrixInverse,n.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]];}getProjectionMatrix(){return this.viewport.getProjectionMatrix();}getModelMatrix(){return this.viewport.getModelMatrix();}getViewMatrix(){return this.viewport.getViewMatrix();}getViewMatrixUncentered(){return this.viewport.getViewMatrixUncentered();}getViewProjectionMatrixUncentered(){return this.viewport.getViewProjectionMatrixUncentered();}getViewProjectionMatrix(){return this.overridedViewProjectionMatrix||this.viewport.getViewProjectionMatrix();}getZoom(){return this.viewport.getZoom();}getZoomScale(){return this.viewport.getZoomScale();}getCenter(){let[n,r]=this.viewport.getCenter();return[n,r];}getFocalDistance(){return this.viewport.getFocalDistance();}getCameraPosition(){return this.cameraPosition;}projectFlat(n,r){return this.viewport.projectFlat(n,r);}setViewProjectionMatrix(n){this.overridedViewProjectionMatrix=n;}}let $={topleft:"column",topright:"column",bottomright:"column",bottomleft:"column",leftcenter:"column",rightcenter:"column",topcenter:"row",bottomcenter:"row",lefttop:"row",righttop:"row",leftbottom:"row",rightbottom:"row"};class Y{constructor(){(0,P.default)(this,"container",void 0),(0,P.default)(this,"controlCorners",void 0),(0,P.default)(this,"controlContainer",void 0),(0,P.default)(this,"scene",void 0),(0,P.default)(this,"mapsService",void 0),(0,P.default)(this,"controls",[]),(0,P.default)(this,"unAddControls",[]);}init(n,r){this.container=n.container,this.scene=r,this.mapsService=r.mapService,this.initControlPos();}addControl(n,r){r.mapService.map?(n.addTo(this.scene),this.controls.push(n)):this.unAddControls.push(n);}getControlByName(n){return this.controls.find(r=>r.controlOption.name===n);}removeControl(n){let r=this.controls.indexOf(n);return r>-1&&this.controls.splice(r,1),n.remove(),this;}addControls(){this.unAddControls.forEach(n=>{n.addTo(this.scene),this.controls.push(n);}),this.unAddControls=[];}destroy(){for(let n of this.controls)n.remove();this.controls=[],this.clearControlPos();}initControlPos(){let n=this.controlCorners={},r=this.controlContainer=g.DOM.create("div","l7-control-container",this.container);Object.values(y.PositionType).forEach(i=>{!function(i=[]){let a=i.map(n=>"l7-"+n).join(" ");n[i.filter(n=>!["row","column"].includes(n)).join("")]=g.DOM.create("div",a,r);}([...i.replace(/^(top|bottom|left|right|center)/,"$1-").split("-"),$[i]]);}),this.checkCornerOverlap();}clearControlPos(){for(let n in this.controlCorners)this.controlCorners[n]&&g.DOM.remove(this.controlCorners[n]);this.controlContainer&&g.DOM.remove(this.controlContainer);}checkCornerOverlap(){let n=window.MutationObserver;if(n)for(let r of Object.keys(this.controlCorners)){let i=r.match(/^(top|bottom)(left|right)$/);if(i){let[,r,a]=i,o=this.controlCorners[`${r}${a}`];new n(([{target:n}])=>{o&&(o.style[r]=n.clientHeight+"px");}).observe(this.controlCorners[`${a}${r}`],{childList:!0,attributes:!0});}}}}class Z{constructor(){(0,P.default)(this,"container",void 0),(0,P.default)(this,"scene",void 0),(0,P.default)(this,"mapsService",void 0),(0,P.default)(this,"markers",[]),(0,P.default)(this,"markerLayers",[]),(0,P.default)(this,"unAddMarkers",[]),(0,P.default)(this,"unAddMarkerLayers",[]);}addMarkerLayer(n){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(n),n.addTo(this.scene)):this.unAddMarkerLayers.push(n);}removeMarkerLayer(n){n.destroy(),this.markerLayers.indexOf(n);let r=this.markerLayers.indexOf(n);r>-1&&this.markerLayers.splice(r,1);}addMarker(n){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(n),n.addTo(this.scene)):this.unAddMarkers.push(n);}addMarkers(){this.unAddMarkers.forEach(n=>{n.addTo(this.scene),this.markers.push(n);}),this.unAddMarkers=[];}addMarkerLayers(){this.unAddMarkerLayers.forEach(n=>{this.markerLayers.push(n),n.addTo(this.scene);}),this.unAddMarkers=[];}removeMarker(n){n.remove(),this.markers.indexOf(n);let r=this.markers.indexOf(n);r>-1&&this.markers.splice(r,1);}removeAllMarkers(){this.destroy();}init(n){this.scene=n,this.mapsService=n.mapService;}destroy(){this.markers.forEach(n=>{n.remove();}),this.markers=[],this.markerLayers.forEach(n=>{n.destroy();}),this.markerLayers=[];}removeMakerLayerMarker(n){n.destroy();}}class K{constructor(){(0,P.default)(this,"scene",void 0),(0,P.default)(this,"mapsService",void 0),(0,P.default)(this,"popups",[]),(0,P.default)(this,"unAddPopups",[]);}get isMarkerReady(){return this.mapsService.map&&this.mapsService.getMarkerContainer();}removePopup(n){null!=n&&n.isOpen()&&n.remove();let r=this.popups.indexOf(n);r>-1&&this.popups.splice(r,1);let i=this.unAddPopups.indexOf(n);i>-1&&this.unAddPopups.splice(i,1);}destroy(){this.popups.forEach(n=>n.remove());}addPopup(n){n&&n.getOptions().autoClose&&[...this.popups,...this.unAddPopups].forEach(n=>{n.getOptions().autoClose&&this.removePopup(n);}),this.isMarkerReady?(n.addTo(this.scene),this.popups.push(n)):this.unAddPopups.push(n),n.on("close",()=>{this.removePopup(n);});}initPopup(){this.unAddPopups.length&&this.unAddPopups.forEach(n=>{this.addPopup(n),this.unAddPopups=[];});}init(n){this.scene=n,this.mapsService=n.mapService;}}let Q={MapToken:"\u60A8\u6B63\u5728\u4F7F\u7528 Demo \u6D4B\u8BD5 Token, \u751F\u4EA7\u73AF\u5883\u52A1\u5FC5\u81EA\u884C\u6CE8\u518C Token \u786E\u4FDD\u670D\u52A1\u7A33\u5B9A \u9AD8\u5FB7\u5730\u56FE\u7533\u8BF7\u5730\u5740 https://lbs.amap.com/api/javascript-api/guide/abc/prepare  Mapbox\u5730\u56FE\u7533\u8BF7\u5730\u5740 https://docs.mapbox.com/help/glossary/access-token/",SDK:"\u8BF7\u786E\u8BA4\u5F15\u5165\u4E86mapbox-gl api\u4E14\u5728L7\u4E4B\u524D\u5F15\u5165"},{merge:J}=g.lodashUtil,ee={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,stencil:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},et={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",maskLayers:[],enableMask:!0,maskOperation:E.MaskOperation.AND,pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",activeMix:0,selectColor:"blue",selectMix:0,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0};var en=i("26429605"),er=f._(en);let ei=Math.PI/180;function ea({latitude:n=0,zoom:r=0,scale:i,highPrecision:a=!1,flipY:o=!1}){let s={},l=512*(i=void 0!==i?i:Math.pow(2,r)),u=Math.cos(n*ei),c=l/360,f=c/u,d=l/4003e4/u;if(s.pixelsPerMeter=[d,-d,d],s.metersPerPixel=[1/d,-1/d,1/d],s.pixelsPerDegree=[c,-f,d],s.degreesPerPixel=[1/c,-1/f,1/d],a){let r=ei*Math.tan(n*ei)/u,i=c*r/2,a=l/4003e4*r,h=a/f*d;s.pixelsPerDegree2=[0,-i,a],s.pixelsPerMeter2=[h,0,h],o&&(s.pixelsPerDegree2[1]=-s.pixelsPerDegree2[1],s.pixelsPerMeter2[1]=-s.pixelsPerMeter2[1]);}return o&&(s.pixelsPerMeter[1]=-s.pixelsPerMeter[1],s.metersPerPixel[1]=-s.metersPerPixel[1],s.pixelsPerDegree[1]=-s.pixelsPerDegree[1],s.degreesPerPixel[1]=-s.degreesPerPixel[1]),s;}let eo=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];class es{constructor(n){(0,P.default)(this,"needRefresh",!0),(0,P.default)(this,"coordinateSystem",void 0),(0,P.default)(this,"viewportCenter",void 0),(0,P.default)(this,"viewportCenterProjection",void 0),(0,P.default)(this,"pixelsPerDegree",void 0),(0,P.default)(this,"pixelsPerDegree2",void 0),(0,P.default)(this,"pixelsPerMeter",void 0),this.cameraService=n;}refresh(n){let r=this.cameraService.getZoom(),i=n||this.cameraService.getCenter(),{pixelsPerMeter:a,pixelsPerDegree:o}=ea({latitude:i[1],zoom:r});this.viewportCenter=i,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=a,this.pixelsPerDegree=o,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===_.CoordinateSystem.LNGLAT?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===_.CoordinateSystem.LNGLAT_OFFSET&&this.calculateLnglatOffset(i,r),this.needRefresh=!1;}getCoordinateSystem(){return this.coordinateSystem;}setCoordinateSystem(n){this.coordinateSystem=n;}getViewportCenter(){return this.viewportCenter;}setViewportCenter(n){this.refresh(n);}getViewportCenterProjection(){return this.viewportCenterProjection;}getPixelsPerDegree(){return this.pixelsPerDegree;}getPixelsPerDegree2(){return this.pixelsPerDegree2;}getPixelsPerMeter(){return this.pixelsPerMeter;}calculateLnglatOffset(n,r,i,a){let{pixelsPerMeter:o,pixelsPerDegree:s,pixelsPerDegree2:l}=ea({latitude:n[1],zoom:r,scale:i,flipY:a,highPrecision:!0}),u=this.cameraService.getViewMatrix(),c=this.cameraService.getProjectionMatrix(),f=X.multiply([],c,u),d=this.cameraService.projectFlat([Math.fround(n[0]),Math.fround(n[1])],Math.pow(2,r));this.viewportCenterProjection=er.transformMat4([],[d[0],d[1],0,1],f),u=this.cameraService.getViewMatrixUncentered()||u,f=X.multiply([],c,u),f=X.multiply([],f,eo),this.cameraService.setViewProjectionMatrix(f),this.pixelsPerMeter=o,this.pixelsPerDegree=s,this.pixelsPerDegree2=l;}}class el extends N.EventEmitter{constructor(...n){super(...n),(0,P.default)(this,"renderMap",new Map),(0,P.default)(this,"enable",!1),(0,P.default)(this,"renderEnable",!1),(0,P.default)(this,"cacheLogs",{});}setEnable(n){this.enable=!!n;}log(n,r){if(!this.enable)return;let i=n.split("."),a=null;i.forEach((n,o)=>{null!==a?(a[n]||(a[n]={}),o!==i.length-1&&(a=a[n])):(this.cacheLogs[n]||(this.cacheLogs[n]={}),o!==i.length-1&&(a=this.cacheLogs[n])),o===i.length-1&&(a[n]=(0,M.default)((0,M.default)({time:Date.now()},a[n]),r));});}getLog(n){switch(typeof n){case"string":return this.cacheLogs[n];case"object":return n.map(n=>this.cacheLogs[n]).filter(n=>void 0!==n);case"undefined":return this.cacheLogs;}}removeLog(n){delete this.cacheLogs[n];}generateRenderUid(){return this.renderEnable?(0,g.guid)():"";}renderDebug(n){this.renderEnable=n;}renderStart(n){if(!this.renderEnable||!this.enable)return;let r=this.renderMap.get(n)||{};this.renderMap.set(n,(0,M.default)((0,M.default)({},r),{},{renderUid:n,renderStart:Date.now()}));}renderEnd(n){if(!this.renderEnable||!this.enable)return;let r=this.renderMap.get(n);if(r){let i=r.renderStart,a=Date.now();this.emit("renderEnd",(0,M.default)((0,M.default)({},r),{},{renderEnd:a,renderDuration:a-i})),this.renderMap.delete(n);}}destroy(){this.cacheLogs=null,this.renderMap.clear();}}var eu=i("09a8d13a"),ec=c._(eu);let ef={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"};class ed extends N.default{get mapService(){return this.container.mapService;}constructor(n){super(),(0,P.default)(this,"indragging",!1),(0,P.default)(this,"hammertime",void 0),(0,P.default)(this,"lastClickTime",0),(0,P.default)(this,"lastClickXY",[-1,-1]),(0,P.default)(this,"clickTimer",void 0),(0,P.default)(this,"$containter",void 0),(0,P.default)(this,"onDrag",n=>{let r=this.interactionEvent(n);r.type=ef[r.type],"dragging"===r.type?this.indragging=!0:this.indragging=!1,this.emit(x.InteractionEvent.Drag,r);}),(0,P.default)(this,"onHammer",n=>{n.srcEvent.stopPropagation();let r=this.interactionEvent(n);this.emit(x.InteractionEvent.Hover,r);}),(0,P.default)(this,"onTouch",n=>{let r=n.touches[0];this.onHover({clientX:r.clientX,clientY:r.clientY,type:"touchstart"});}),(0,P.default)(this,"onTouchEnd",n=>{if(n.changedTouches.length>0){let r=n.changedTouches[0];this.onHover({clientX:r.clientX,clientY:r.clientY,type:"touchend"});}}),(0,P.default)(this,"onTouchMove",n=>{let r=n.changedTouches[0];this.onHover({clientX:r.clientX,clientY:r.clientY,type:"touchmove"});}),(0,P.default)(this,"onHover",n=>{let{clientX:r,clientY:i}=n,a=r,o=i,s=n.type,l=this.mapService.getMapContainer();if(l){let{top:n,left:r}=l.getBoundingClientRect();a=a-r-l.clientLeft,o=o-n-l.clientTop;}let u=this.mapService.containerToLngLat([a,o]);if("click"===s||"touch"===s){this.isDoubleTap(a,o,u);return;}"click"!==s&&"dblclick"!==s&&this.emit(x.InteractionEvent.Hover,{x:a,y:o,lngLat:u,type:s,target:n});}),this.container=n;}init(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer();}destroy(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(x.InteractionEvent.Hover);}triggerHover({x:n,y:r}){this.emit(x.InteractionEvent.Hover,{x:n,y:r});}triggerSelect(n){this.emit(x.InteractionEvent.Select,{featureId:n});}triggerActive(n){this.emit(x.InteractionEvent.Active,{featureId:n});}addEventListenerOnMap(){let n=this.mapService.getMapContainer();if(n){let r=new ec.default.Manager(n);r.add(new ec.default.Tap({event:"dblclick",taps:2})),r.add(new ec.default.Tap({event:"click"})),r.add(new ec.default.Pan({threshold:0,pointers:0})),r.add(new ec.default.Press({})),r.on("dblclick click",this.onHammer),r.on("panstart panmove panend pancancel",this.onDrag),n.addEventListener("touchstart",this.onTouch),n.addEventListener("touchend",this.onTouchEnd),n.addEventListener("mousemove",this.onHover),n.addEventListener("touchmove",this.onTouchMove),n.addEventListener("mousedown",this.onHover,!0),n.addEventListener("mouseup",this.onHover),n.addEventListener("contextmenu",this.onHover),this.hammertime=r;}}removeEventListenerOnMap(){let n=this.mapService.getMapContainer();n&&(n.removeEventListener("mousemove",this.onHover),this.hammertime.off("dblclick click",this.onHammer),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),n.removeEventListener("touchstart",this.onTouch),n.removeEventListener("touchend",this.onTouchEnd),n.removeEventListener("mousedown",this.onHover),n.removeEventListener("mouseup",this.onHover),n.removeEventListener("contextmenu",this.onHover));}interactionEvent(n){let r,i;let{type:a,pointerType:o}=n;"touch"===o?(i=Math.floor(n.pointers[0].clientY),r=Math.floor(n.pointers[0].clientX)):(i=Math.floor(n.srcEvent.y),r=Math.floor(n.srcEvent.x));let s=this.mapService.getMapContainer();if(s){let{top:n,left:a}=s.getBoundingClientRect();r-=a,i-=n;}let l=this.mapService.containerToLngLat([r,i]);return{x:r,y:i,lngLat:l,type:a,target:n.srcEvent};}isDoubleTap(n,r,i){let a=new Date().getTime(),o="click";a-this.lastClickTime<400&&10>Math.abs(this.lastClickXY[0]-n)&&10>Math.abs(this.lastClickXY[1]-r)?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),o="dblclick",this.emit(x.InteractionEvent.Hover,{x:n,y:r,lngLat:i,type:o})):(this.lastClickTime=a,this.lastClickXY=[n,r],this.clickTimer=setTimeout(()=>{o="click",this.emit(x.InteractionEvent.Hover,{x:n,y:r,lngLat:i,type:o});},400));}}let eh=0,ep=((l={})[l.SAMPLED=0]="SAMPLED",l[l.RENDER_TARGET=1]="RENDER_TARGET",l);class em{constructor(n){var r,i=this;(0,P.default)(this,"pickedColors",void 0),(0,P.default)(this,"pickedTileLayers",[]),(0,P.default)(this,"pickingFBO",void 0),(0,P.default)(this,"width",0),(0,P.default)(this,"height",0),(0,P.default)(this,"alreadyInPicking",!1),(0,P.default)(this,"pickBufferScale",1),(0,P.default)(this,"pickFromPickingFBO",(r=(0,G.default)(function*(n,{x:r,y:a,lngLat:o,type:s,target:l}){let u;let c=!1,{readPixels:f,readPixelsAsync:d,getViewportSize:h,queryVerdorInfo:p}=i.rendererService,{width:m,height:v}=h(),{enableHighlight:y,enableSelect:_}=n.getLayerConfig(),b=r*g.DOM.DPR,x=a*g.DOM.DPR;if(b>m-1*g.DOM.DPR||b<0||x>v-1*g.DOM.DPR||x<0)return!1;if(u="WebGPU"===p()?yield d({x:Math.floor(b/i.pickBufferScale),y:Math.floor((v-(a+1)*g.DOM.DPR)/i.pickBufferScale),width:1,height:1,data:new Uint8Array(4),framebuffer:i.pickingFBO}):f({x:Math.floor(b/i.pickBufferScale),y:Math.floor((v-(a+1)*g.DOM.DPR)/i.pickBufferScale),width:1,height:1,data:new Uint8Array(4),framebuffer:i.pickingFBO}),i.pickedColors=u,0!==u[0]||0!==u[1]||0!==u[2]){let f=(0,g.decodePickingColor)(u),d=n.layerPickService.getFeatureById(f);f!==n.getCurrentPickId()&&"mousemove"===s&&(s="mouseenter");let h={x:r,y:a,type:s,lngLat:o,featureId:f,feature:d,target:l};d&&(c=!0,n.setCurrentPickId(f),i.triggerHoverOnLayer(n,h));}else{let u={x:r,y:a,lngLat:o,type:null!==n.getCurrentPickId()&&"mousemove"===s?"mouseout":"un"+s,featureId:null,target:l,feature:null};i.triggerHoverOnLayer(n,(0,M.default)((0,M.default)({},u),{},{type:"unpick"})),i.triggerHoverOnLayer(n,u),n.setCurrentPickId(null);}if(y&&n.layerPickService.highlightPickedFeature(u),_&&"click"===s&&(null==u?void 0:u.toString())!==[0,0,0,0].toString()){let r=(0,g.decodePickingColor)(u);null===n.getCurrentSelectedId()||r!==n.getCurrentSelectedId()?(n.layerPickService.selectFeature(u),n.setCurrentSelectedId(r)):(n.layerPickService.selectFeature(new Uint8Array([0,0,0,0])),n.setCurrentSelectedId(null));}return c;}),function(n,i){return r.apply(this,arguments);})),this.container=n;}get mapService(){return this.container.mapService;}get rendererService(){return this.container.rendererService;}get configService(){return this.container.globalConfigService;}get interactionService(){return this.container.interactionService;}get layerService(){return this.container.layerService;}init(n){let{createTexture2D:r,createFramebuffer:i,getViewportSize:a}=this.rendererService,{width:o,height:s}=a();this.pickBufferScale=this.configService.getSceneConfig(n).pickBufferScale||1;let l=r({width:o=Math.round(o/this.pickBufferScale),height:s=Math.round(s/this.pickBufferScale),usage:ep.RENDER_TARGET,label:"Picking Texture"});this.pickingFBO=i({color:l,depth:!0,width:o,height:s}),this.interactionService.on(x.InteractionEvent.Hover,this.pickingAllLayer.bind(this));}boxPickLayer(n,r,i){var a=this;return(0,G.default)(function*(){let{useFramebufferAsync:o,clear:s}=a.rendererService;a.resizePickingFBO(),n.hooks.beforePickingEncode.call(),yield o(a.pickingFBO,(0,G.default)(function*(){s({framebuffer:a.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),n.renderModels({ispick:!0});})),n.hooks.afterPickingEncode.call(),i((yield a.pickBox(n,r)));})();}pickBox(n,r){var i=this;return(0,G.default)(function*(){let[a,o,s,l]=r.map(n=>Math.floor((n<0?0:n)*g.DOM.DPR/i.pickBufferScale)),{readPixelsAsync:u,getViewportSize:c}=i.rendererService,{width:f,height:d}=c();if(a>(f-1)*g.DOM.DPR/i.pickBufferScale||s<0||o>(d-1)*g.DOM.DPR/i.pickBufferScale||l<0)return[];let h=Math.min(f/i.pickBufferScale,s)-a,p=Math.min(d/i.pickBufferScale,l)-o,m=yield u({x:a,y:Math.floor(d/i.pickBufferScale-(l+1)),width:h,height:p,data:new Uint8Array(h*p*4),framebuffer:i.pickingFBO}),v=[],y={};for(let r=0;r<m.length/4;r+=1){let i=m.slice(4*r,4*r+4),a=(0,g.decodePickingColor)(i);if(-1!==a&&!y[a]){let r=n.layerPickService.getFeatureById(a);v.push((0,M.default)((0,M.default)({},r),{},{pickedFeatureIdx:a})),y[a]=!0;}}return v;})();}handleCursor(n,r){let{cursor:i="",cursorEnabled:a}=n.getLayerConfig();if(a){let n="amap"===this.mapService.getType()?this.mapService.getMapContainer():this.mapService.getMarkerContainer(),a=null==n?void 0:n.style.getPropertyValue("cursor");"unmousemove"===r&&""!==a?null==n||n.style.setProperty("cursor",""):"mousemove"===r&&(null==n||n.style.setProperty("cursor",i));}}destroy(){this.pickingFBO.destroy(),this.pickingFBO=null;}pickingAllLayer(n){var r=this;return(0,G.default)(function*(){r.layerService.needPick(n.type)&&r.isPickingAllLayer()&&(r.alreadyInPicking=!0,yield r.pickingLayers(n),r.layerService.renderLayers(),r.alreadyInPicking=!1);})();}isPickingAllLayer(){return!this.alreadyInPicking&&!this.layerService.alreadyInRendering&&!this.interactionService.indragging&&!!this.layerService.getShaderPickStat();}resizePickingFBO(){let{getViewportSize:n}=this.rendererService,{width:r,height:i}=n();(this.width!==r||this.height!==i)&&(this.pickingFBO.resize({width:Math.round(r/this.pickBufferScale),height:Math.round(i/this.pickBufferScale)}),this.width=r,this.height=i);}pickingLayers(n){var r=this;return(0,G.default)(function*(){let{clear:i,useFramebufferAsync:a}=r.rendererService;for(let o of(r.resizePickingFBO(),r.layerService.getRenderList().filter(r=>r.needPick(n.type)).reverse())){yield a(r.pickingFBO,(0,G.default)(function*(){i({framebuffer:r.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),o.layerPickService.pickRender(n);}));let s=yield r.pickFromPickingFBO(o,n);if(r.layerService.pickedLayerId=s?+o.id:-1,s&&!o.getLayerConfig().enablePropagation)break;}})();}triggerHoverOnLayer(n,r){(function(n){var r,i,a;let o=!0;if((null==n||null===(r=n.target)||void 0===r?void 0:r.target)instanceof HTMLElement){let r=null==n||null===(i=n.target)||void 0===i?void 0:i.target;for(;r;){let n=Array.from(r.classList);if(n.includes("l7-marker")||n.includes("l7-popup")){o=!1;break;}r=null===(a=r)||void 0===a?void 0:a.parentElement;}}return o;})(r)&&(this.handleCursor(n,r.type),n.emit(r.type,r));}}class eg{constructor(n=!0){(0,P.default)(this,"autoStart",void 0),(0,P.default)(this,"startTime",0),(0,P.default)(this,"oldTime",0),(0,P.default)(this,"running",!1),(0,P.default)(this,"elapsedTime",0),this.autoStart=n;}start(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0;}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1;}getElapsedTime(){return this.getDelta(),this.elapsedTime;}getDelta(){let n=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let r=("undefined"==typeof performance?Date:performance).now();n=(r-this.oldTime)/1e3,this.oldTime=r,this.elapsedTime+=n;}return n;}}let{throttle:ev}=g.lodashUtil;class ey extends N.EventEmitter{get renderService(){return this.container.rendererService;}get mapService(){return this.container.mapService;}get debugService(){return this.container.debugService;}constructor(n){super(),(0,P.default)(this,"pickedLayerId",-1),(0,P.default)(this,"clock",new eg),(0,P.default)(this,"alreadyInRendering",!1),(0,P.default)(this,"layers",[]),(0,P.default)(this,"layerList",[]),(0,P.default)(this,"layerRenderID",void 0),(0,P.default)(this,"sceneInited",!1),(0,P.default)(this,"animateInstanceCount",0),(0,P.default)(this,"shaderPicking",!0),(0,P.default)(this,"enableRender",!0),(0,P.default)(this,"reRender",ev(()=>{this.renderLayers();},32)),(0,P.default)(this,"throttleRenderLayers",ev(()=>{this.renderLayers();},16)),this.container=n;}needPick(n){return this.updateLayerRenderList(),this.layerList.some(r=>r.needPick(n));}add(n){this.layers.push(n),this.sceneInited&&n.init().then(()=>{this.renderLayers();});}addMask(n){this.sceneInited&&n.init().then(()=>{this.renderLayers();});}initLayers(){var n=this;return(0,G.default)(function*(){var r;n.sceneInited=!0,n.layers.forEach((r=(0,G.default)(function*(r){r.startInit||(yield r.init(),n.updateLayerRenderList());}),function(n){return r.apply(this,arguments);}));})();}getSceneInited(){return this.sceneInited;}getRenderList(){return this.layerList;}getLayers(){return this.layers;}getLayer(n){return this.layers.find(r=>r.id===n);}getLayerByName(n){return this.layers.find(r=>r.name===n);}remove(n,r){var i=this;return(0,G.default)(function*(){if(r){r.layerChildren||(r.layerChildren=[]);let i=r.layerChildren.findIndex(r=>r.id===n.id);i>-1&&r.layerChildren.splice(i,1);}else{let r=i.layers.findIndex(r=>r.id===n.id);r>-1&&i.layers.splice(r,1);}n.destroy(),i.reRender(),i.emit("layerChange",i.layers);})();}removeAllLayers(){var n=this;return(0,G.default)(function*(){n.destroy(),n.reRender();})();}setEnableRender(n){this.enableRender=n;}renderLayers(){var n=this;return(0,G.default)(function*(){if(n.alreadyInRendering||!n.enableRender)return;n.updateLayerRenderList();let r=n.debugService.generateRenderUid();for(let i of(n.debugService.renderStart(r),n.alreadyInRendering=!0,n.clear(),n.layerList))i.prerender();for(let r of(n.renderService.beginFrame(),n.layerList)){let{enableMask:i}=r.getLayerConfig();r.masks.filter(n=>n.inited).length>0&&i&&n.renderMask(r.masks),r.getLayerConfig().enableMultiPassRenderer?yield r.renderMultiPass():r.render();}n.renderService.endFrame(),n.debugService.renderEnd(r),n.alreadyInRendering=!1;})();}renderMask(n){let r=0;this.renderService.clear({stencil:0,depth:1,framebuffer:null});let i=n.length>1?E.StencilType.MULTIPLE:E.StencilType.SINGLE;for(let a of n)a.render({isStencil:!0,stencilType:i,stencilIndex:r++});}beforeRenderData(n){var r=this;return(0,G.default)(function*(){(yield n.hooks.beforeRenderData.promise())&&r.renderLayers();})();}renderTileLayerMask(n){let r=0,{enableMask:i=!0}=n.getLayerConfig(),a=n.tileMask?1:0,o=n.masks.filter(n=>n.inited),s=(a+=i?o.length:1)>1?E.StencilType.MULTIPLE:E.StencilType.SINGLE;if((n.tileMask||o.length&&i)&&this.renderService.clear({stencil:0,depth:1,framebuffer:null}),o.length&&i)for(let n of o)n.render({isStencil:!0,stencilType:s,stencilIndex:r++});n.tileMask&&n.tileMask.render({isStencil:!0,stencilType:s,stencilIndex:r++,stencilOperation:E.MaskOperation.OR});}renderTileLayer(n){var r=this;return(0,G.default)(function*(){r.renderTileLayerMask(n),n.getLayerConfig().enableMultiPassRenderer?yield n.renderMultiPass():yield n.render();})();}updateLayerRenderList(){this.layerList=[],this.layers.filter(n=>n.inited).filter(n=>n.isVisible()).sort((n,r)=>n.zIndex-r.zIndex).forEach(n=>{this.layerList.push(n);});}destroy(){this.layers.forEach(n=>{n.destroy();}),this.layers=[],this.layerList=[],this.emit("layerChange",this.layers);}startAnimate(){0==this.animateInstanceCount++&&(this.clock.start(),this.runRender());}stopAnimate(){0==--this.animateInstanceCount&&(this.stopRender(),this.clock.stop());}getOESTextureFloat(){return this.renderService.extensionObject.OES_texture_float;}enableShaderPick(){this.shaderPicking=!0;}disableShaderPick(){this.shaderPicking=!1;}getShaderPickStat(){return this.shaderPicking;}clear(){let n=(0,g.rgb2arr)(this.mapService.bgColor);this.renderService.clear({color:n,depth:1,stencil:0,framebuffer:null});}runRender(){this.renderLayers(),this.layerRenderID=window.requestAnimationFrame(this.runRender.bind(this));}stopRender(){window.cancelAnimationFrame(this.layerRenderID);}}var e_=i("613f75ca"),eb=c._(e_);let{isNil:ex}=g.lodashUtil;class eE{constructor(n){(0,P.default)(this,"name",void 0),(0,P.default)(this,"type",void 0),(0,P.default)(this,"scale",void 0),(0,P.default)(this,"descriptor",void 0),(0,P.default)(this,"featureBufferLayout",[]),(0,P.default)(this,"needRescale",!1),(0,P.default)(this,"needRemapping",!1),(0,P.default)(this,"needRegenerateVertices",!1),(0,P.default)(this,"featureRange",{startIndex:0,endIndex:1/0}),(0,P.default)(this,"vertexAttribute",void 0),(0,P.default)(this,"defaultCallback",n=>{if(0===n.length){var r;return(null===(r=this.scale)||void 0===r?void 0:r.defaultValues)||[];}return n.map((n,r)=>{var i;return(null===(i=this.scale)||void 0===i?void 0:i.scalers[r].func)(n);});}),this.setProps(n);}setProps(n){Object.assign(this,n);}mapping(n){var r,i;if(null!==(r=this.scale)&&void 0!==r&&r.callback){let r=null===(i=this.scale)||void 0===i?void 0:i.callback(...n);if(!ex(r))return[r];}return this.defaultCallback(n);}resetDescriptor(){this.descriptor&&(this.descriptor.buffer.data=[]);}}let ew=["buffer","update","name"],eS=["buffer","update","name"],eT={[C.gl.FLOAT]:4,[C.gl.UNSIGNED_BYTE]:1,[C.gl.UNSIGNED_SHORT]:2};class eA{constructor(n){(0,P.default)(this,"attributesAndIndices",void 0),(0,P.default)(this,"attributes",[]),(0,P.default)(this,"triangulation",void 0),(0,P.default)(this,"featureLayout",{sizePerElement:0,elements:[]}),this.rendererService=n;}registerStyleAttribute(n){let r=this.getLayerStyleAttribute(n.name||"");return r?r.setProps(n):(r=new eE(n),this.attributes.push(r)),r;}unRegisterStyleAttribute(n){let r=this.attributes.findIndex(r=>r.name===n);r>-1&&this.attributes.splice(r,1);}updateScaleAttribute(n){this.attributes.forEach(r=>{var i;let a=r.name,o=null===(i=r.scale)||void 0===i?void 0:i.field;(n[a]||o&&n[o])&&(r.needRescale=!0,r.needRemapping=!0,r.needRegenerateVertices=!0);});}updateStyleAttribute(n,r,i){let a=this.getLayerStyleAttribute(n);a||(a=this.registerStyleAttribute((0,M.default)((0,M.default)({},r),{},{name:n})));let{scale:o}=r;o&&a&&(a.scale=o,a.needRescale=!0,a.needRemapping=!0,a.needRegenerateVertices=!0,i&&i.featureRange&&(a.featureRange=i.featureRange));}getLayerStyleAttributes(){return this.attributes;}getLayerStyleAttribute(n){return this.attributes.find(r=>r.name===n);}getLayerAttributeScale(n){var r;let i=this.getLayerStyleAttribute(n),a=null==i||null===(r=i.scale)||void 0===r?void 0:r.scalers;return a&&a[0]?a[0].func:null;}updateAttributeByFeatureRange(n,r,i=0,a,o){let s=this.attributes.find(r=>r.name===n);if(s&&s.descriptor){let{descriptor:l}=s,{update:u,buffer:c,size:f=0}=l,d=eT[c.type||C.gl.FLOAT];if(u){let{elements:l,sizePerElement:c}=this.featureLayout,h=l.slice(i,a);if(!h.length)return;let{offset:p}=h[0],m=h.map(({featureIdx:n,vertices:i,normals:a},o)=>{let s=i.length/c,l=[];for(let f=0;f<s;f++){let s=a?a.slice(3*f,3*f+3):[];l.push(...u(r[n],n,i.slice(f*c,f*c+c),o,s));}return l;}).flat();s.vertexAttribute.updateBuffer({data:m,offset:p*f*d}),null==o||o.emit(`legend:${n}`,o.getLegend(n));}}}createAttributesAndIndices(n,r,i,a){this.featureLayout={sizePerElement:0,elements:[]},r&&(this.triangulation=r);let o=this.attributes.map(n=>(n.resetDescriptor(),n.descriptor)),s=0,l=0,u=[],c=3;n.forEach((n,r)=>{let{indices:a,vertices:f,normals:d,size:h,indexes:p,count:m}=this.triangulation(n,i);"number"==typeof m&&(l+=m),a.forEach(n=>{u.push(n+s);}),c=h;let g=f.length/h;this.featureLayout.sizePerElement=c,this.featureLayout.elements.push({featureIdx:r,vertices:f,normals:d,offset:s}),s+=g;for(let i=0;i<g;i++){let a=(null==d?void 0:d.slice(3*i,3*i+3))||[],s=f.slice(i*h,i*h+h),l=0;p&&void 0!==p[i]&&(l=p[i]),o.forEach((o,u)=>{o&&o.update&&o.buffer.data.push(...o.update(n,r,s,i,a,l));});}});let{createAttribute:f,createBuffer:d,createElements:h}=this.rendererService,p={};o.forEach((n,r)=>{if(n){let{buffer:i,update:a,name:o}=n,s=(0,eb.default)(n,ew),l=f((0,M.default)({buffer:d(i)},s));p[n.name||""]=l,this.attributes[r].vertexAttribute=l;}});let m=h({data:u,type:C.gl.UNSIGNED_INT,count:u.length});return this.attributesAndIndices={attributes:p,elements:m,count:l},Object.values(this.attributes).filter(n=>n.scale).forEach(n=>{let r=n.name;null==a||a.emit(`legend:${r}`,a.getLegend(r));}),this.attributesAndIndices;}createAttributes(n,r){this.featureLayout={sizePerElement:0,elements:[]},r&&(this.triangulation=r);let i=this.attributes.map(n=>(n.resetDescriptor(),n.descriptor)),a=0,o=[],s=3;n.forEach((n,r)=>{let{indices:l,vertices:u,normals:c,size:f,indexes:d}=this.triangulation(n);l.forEach(n=>{o.push(n+a);}),s=f;let h=u.length/f;this.featureLayout.sizePerElement=s,this.featureLayout.elements.push({featureIdx:r,vertices:u,normals:c,offset:a}),a+=h;for(let a=0;a<h;a++){let o=(null==c?void 0:c.slice(3*a,3*a+3))||[],s=u.slice(a*f,a*f+f),l=0;d&&void 0!==d[a]&&(l=d[a]),i.forEach((i,u)=>{i&&i.update&&i.buffer.data.push(...i.update(n,r,s,a,o,l));});}});let{createAttribute:l,createBuffer:u}=this.rendererService,c={};return i.forEach((n,r)=>{if(n){let{buffer:i,update:a,name:o}=n,s=(0,eb.default)(n,eS),f=l((0,M.default)({buffer:u(i)},s));c[n.name||""]=f,this.attributes[r].vertexAttribute=f;}}),{attributes:c};}clearAllAttributes(){var n;this.attributes.forEach(n=>{n.vertexAttribute&&n.vertexAttribute.destroy();}),null===(n=this.attributesAndIndices)||void 0===n||n.elements.destroy(),this.attributes=[];}}var eC=i("2569b57a"),eO=i("c187f726"),eM=c._(eO);class eR extends N.EventEmitter{get iconService(){return this.container.iconService;}get fontService(){return this.container.fontService;}get controlService(){return this.container.controlService;}get configService(){return this.container.globalConfigService;}get map(){return this.container.mapService;}get coordinateSystemService(){return this.container.coordinateSystemService;}get rendererService(){return this.container.rendererService;}get layerService(){return this.container.layerService;}get debugService(){return this.container.debugService;}get cameraService(){return this.container.cameraService;}get interactionService(){return this.container.interactionService;}get pickingService(){return this.container.pickingService;}get shaderModuleService(){return this.container.shaderModuleService;}get markerService(){return this.container.markerService;}get popupService(){return this.container.popupService;}constructor(n){super(),(0,P.default)(this,"destroyed",!1),(0,P.default)(this,"loaded",!1),(0,P.default)(this,"id",void 0),(0,P.default)(this,"inited",!1),(0,P.default)(this,"rendering",!1),(0,P.default)(this,"$container",void 0),(0,P.default)(this,"canvas",void 0),(0,P.default)(this,"markerContainer",void 0),(0,P.default)(this,"resizeDetector",void 0),(0,P.default)(this,"hooks",void 0),(0,P.default)(this,"handleWindowResized",()=>{this.emit("resize"),this.$container&&(this.initContainer(),this.coordinateSystemService.needRefresh=!0,this.render());}),(0,P.default)(this,"handleMapCameraChanged",n=>{this.cameraService.update(n),this.render();}),this.container=n,this.hooks={init:new eC.AsyncSeriesHook},this.id=n.id;}init(n){var r=this;this.configService.setSceneConfig(this.id,n),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",()=>this.render()),this.fontService.init(),this.hooks.init.tapPromise("initMap",(0,G.default)(function*(){r.debugService.log("map.mapInitStart",{type:r.map.version}),yield new Promise(n=>{r.map.onCameraChanged(i=>{r.cameraService.init(),r.cameraService.update(i),n();}),r.map.init();}),r.map.onCameraChanged(r.handleMapCameraChanged),r.map.addMarkerContainer(),r.markerService.addMarkers(),r.markerService.addMarkerLayers(),r.popupService.initPopup(),r.interactionService.init(),r.interactionService.on(x.InteractionEvent.Drag,r.addSceneEvent.bind(r));})),this.hooks.init.tapPromise("initRenderer",(0,G.default)(function*(){var i,a;let o=(null===(i=r.map)||void 0===i?void 0:i.getOverlayContainer())||void 0;if(o?r.$container=o:r.$container=function(n){let r=n;if("string"==typeof n&&(r=document.getElementById(n)),r){let n=document.createElement("div");return n.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,n.id=`l7-scene-${eh++}`,n.classList.add("l7-scene"),r.appendChild(n),n;}return null;}(r.configService.getSceneConfig(r.id).id||""),r.$container){let{canvas:i}=n;r.canvas=i||g.DOM.create("canvas","",r.$container),r.setCanvas(),yield r.rendererService.init(r.canvas,r.configService.getSceneConfig(r.id),n.gl),r.registerContextLost(),r.initContainer(),r.resizeDetector=(0,eM.default)({strategy:"scroll"}),r.resizeDetector.listenTo(r.$container,r.handleWindowResized),window.matchMedia&&(null===(a=window.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"))||void 0===a||a.addListener(r.handleWindowResized.bind("screen")));}else console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");r.pickingService.init(r.id);})),this.render();}registerContextLost(){let n=this.rendererService.getCanvas();n&&n.addEventListener("webglcontextlost",()=>this.emit("webglcontextlost"));}addLayer(n){this.layerService.sceneService=this,this.layerService.add(n);}addMask(n){this.layerService.sceneService=this,this.layerService.addMask(n);}render(){var n=this;return(0,G.default)(function*(){n.rendering||n.destroyed||(n.rendering=!0,n.inited?(yield n.layerService.initLayers(),yield n.layerService.renderLayers()):(yield n.hooks.init.promise(),n.destroyed&&n.destroy(),yield n.layerService.initLayers(),n.layerService.renderLayers(),n.controlService.addControls(),n.loaded=!0,n.emit("loaded"),n.inited=!0),n.rendering=!1);})();}addFontFace(n,r){this.fontService.addFontFace(n,r);}getSceneContainer(){return this.$container;}exportPng(n){var r=this;return(0,G.default)(function*(){var i;let a=null===(i=r.$container)||void 0===i?void 0:i.getElementsByTagName("canvas")[0];return yield r.render(),"jpg"===n?null==a?void 0:a.toDataURL("image/jpeg"):null==a?void 0:a.toDataURL("image/png");})();}getSceneConfig(){return this.configService.getSceneConfig(this.id);}getPointSizeRange(){return this.rendererService.getPointSizeRange();}addMarkerContainer(){let n=this.$container.parentElement;null!==n&&(this.markerContainer=g.DOM.create("div","l7-marker-container",n));}getMarkerContainer(){return this.markerContainer;}destroy(){var n;if(!this.inited){this.destroyed=!0;return;}this.resizeDetector.removeListener(this.$container,this.handleWindowResized),this.pickingService.destroy(),this.layerService.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.fontService.destroy(),this.iconService.destroy(),this.removeAllListeners(),this.inited=!1,this.map.destroy(),setTimeout(()=>{var n;null===(n=this.$container)||void 0===n||n.removeChild(this.canvas),this.canvas=null,this.rendererService.destroy();}),null===(n=this.$container)||void 0===n||null===(n=n.parentNode)||void 0===n||n.removeChild(this.$container),this.emit("destroy");}initContainer(){var n,r;let i=g.DOM.DPR,a=(null===(n=this.$container)||void 0===n?void 0:n.clientWidth)||400,o=(null===(r=this.$container)||void 0===r?void 0:r.clientHeight)||300,s=this.canvas;s&&(s.width=a*i,s.height=o*i),this.rendererService.viewport({x:0,y:0,width:i*a,height:i*o});}setCanvas(){var n,r;let i=g.DOM.DPR,a=(null===(n=this.$container)||void 0===n?void 0:n.clientWidth)||400,o=(null===(r=this.$container)||void 0===r?void 0:r.clientHeight)||300,s=this.canvas;s.width=a*i,s.height=o*i,s.style.width="100%",s.style.height="100%";}addSceneEvent(n){this.emit(n.type,n);}}let{uniq:eP}=g.lodashUtil,ek="#define PI 3.14159265359",eI="layout(std140) uniform PickingUniforms {\n  vec4 u_HighlightColor;\n  vec4 u_SelectColor;\n  vec3 u_PickingColor;\n  float u_PickingStage;\n  vec3 u_CurrentSelectedId;\n  float u_PickingThreshold;\n  float u_PickingBuffer;\n  float u_shaderPick;\n  float u_activeMix;\n};",eL='#define TILE_SIZE (512.0)\n#define PI (3.1415926536)\n#define WORLD_SCALE (TILE_SIZE / (PI * 2.0))\n#define EARTH_CIRCUMFERENCE (40.03e6)\n\n#define COORDINATE_SYSTEM_LNGLAT (1.0) // mapbox\n#define COORDINATE_SYSTEM_LNGLAT_OFFSET (2.0) // mapbox offset\n#define COORDINATE_SYSTEM_VECTOR_TILE (3.0)\n#define COORDINATE_SYSTEM_IDENTITY (4.0)\n#define COORDINATE_SYSTEM_METER_OFFSET (5.0)\n\n#pragma include "scene_uniforms"\n\nconst vec2 ZERO_64_XY_LOW = vec2(0.0, 0.0);\n\n// web mercator coords -> world coords\nvec2 project_mercator(vec2 lnglat) {\n  float x = lnglat.x;\n  return vec2(radians(x) + PI, PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5)));\n}\n\nfloat project_scale(float meters) {\n  return meters * u_PixelsPerMeter.z;\n}\n\n// offset coords -> world coords\nvec4 project_offset(vec4 offset) {\n  float dy = offset.y;\n  dy = clamp(dy, -1.0, 1.0);\n  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;\n  return vec4(offset.xyz * pixels_per_unit, offset.w);\n}\n\nvec3 project_normal(vec3 normal) {\n  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);\n  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);\n}\n\nvec3 project_offset_normal(vec3 vector) {\n  if (\n    u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 &&\n      u_CoordinateSystem > COORDINATE_SYSTEM_LNGLAT - 0.01 ||\n    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET\n  ) {\n    // normals generated by the polygon tesselator are in lnglat offsets instead of meters\n    return normalize(vector * u_PixelsPerDegree);\n  }\n  return project_normal(vector);\n}\n\nvec4 project_position(vec4 position, vec2 position64xyLow) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    float X = position.x - u_ViewportCenter.x;\n    float Y = position.y - u_ViewportCenter.y;\n    return project_offset(\n      vec4(X + position64xyLow.x, Y + position64xyLow.y, position.z, position.w)\n    );\n  }\n  if (\n    u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 &&\n    u_CoordinateSystem > COORDINATE_SYSTEM_LNGLAT - 0.01\n  ) {\n    return vec4(\n      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,\n      project_scale(position.z),\n      position.w\n    );\n  }\n\n  return position;\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_XY_LOW);\n}\n\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;\n  return offset * u_FocalDistance;\n}\n\n// \u9002\u914D\u7EB9\u7406\u8D34\u56FE\u7684\u7B49\u50CF\u7D20\u5927\u5C0F\nfloat project_pixel_texture(float pixel) {\n  // mapbox zoom > 12\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    return pixel * pow(0.5, u_Zoom) * u_FocalDistance;\n  }\n\n  return pixel * 2.0 * u_FocalDistance;\n}\n\n// \u5728\u4E0D\u8BBA\u4EC0\u4E48\u5E95\u56FE\u4E0B\u9700\u8981\u7EDF\u4E00\u5904\u7406\u7684\u65F6\u5019\u4F7F\u7528\nfloat project_float_pixel(float pixel) {\n  if (\n    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET\n  ) {\n    // mapbox \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1\n    return pixel * pow(2.0, 19.0 - u_Zoom) * u_FocalDistance;\n  }\n\n  return pixel * u_FocalDistance;\n}\n\n// Project meter into the unit of pixel which used in the camera world space\nfloat project_float_meter(float meter) {\n  if (\n    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET\n  ) {\n    // Since the zoom level uniform is updated by mapservice and it\'s alread been subtracted by 1\n    // Not sure if we are supposed to do that again\n    return meter;\n  } else {\n    return project_float_pixel(meter);\n  }\n\n  // TODO: change the following code to make adaptations for amap\n  // return u_FocalDistance * TILE_SIZE * pow(2.0, u_Zoom) * meter / EARTH_CIRCUMFERENCE;\n\n}\n\nfloat project_pixel(float pixel) {\n  return pixel * u_FocalDistance;\n}\n\nvec2 project_pixel(vec2 pixel) {\n  return pixel * -1.0 * u_FocalDistance;\n}\n\nvec3 project_pixel(vec3 pixel) {\n  return pixel * -1.0 * u_FocalDistance;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  if (\n    u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||\n    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET\n  ) {\n    // Needs to be divided with project_uCommonUnitsPerMeter\n    position.w *= u_PixelsPerMeter.z;\n  }\n\n  return viewProjectionMatrix * position + center;\n}\n\n// Projects from common space coordinates to clip space\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(\n    position,\n    u_ViewProjectionMatrix,\n    u_ViewportCenterProjection\n  );\n}\n\nvec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {\n  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);\n\n  if (\n    u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||\n    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET\n  ) {\n    // Needs to be divided with project_uCommonUnitsPerMeter\n    pos.w = pos.w / u_PixelsPerMeter.z;\n  }\n  return pos;\n}\n\nbool isEqual(float a, float b) {\n  return a < b + 0.001 && a > b - 0.001;\n}\n\n',eN="layout(std140) uniform SceneUniforms {\n  mat4 u_ViewMatrix;\n  mat4 u_ProjectionMatrix;\n  mat4 u_ViewProjectionMatrix;\n  mat4 u_ModelMatrix;\n  vec4 u_ViewportCenterProjection;\n  vec3 u_PixelsPerDegree;\n  float u_Zoom;\n  vec3 u_PixelsPerDegree2;\n  float u_ZoomScale;\n  vec3 u_PixelsPerMeter;\n  float u_CoordinateSystem;\n  vec3 u_CameraPosition;\n  float u_DevicePixelRatio;\n  vec2 u_ViewportCenter;\n  vec2 u_ViewportSize;\n  float u_FocalDistance;\n};\n",eD=/precision\s+(high|low|medium)p\s+float/,eF="#ifdef GL_FRAGMENT_PRECISION_HIGH\n precision highp float;\n #else\n precision mediump float;\n#endif\n",eB=/#pragma include (["^+"]?["[a-zA-Z_0-9](.*)"]*?)/g,ej=/void\s+main\s*\([^)]*\)\s*\{\n?/;class ez{constructor(){(0,P.default)(this,"moduleCache",{}),(0,P.default)(this,"rawContentCache",{});}registerBuiltinModules(){this.destroy(),this.registerModule("common",{vs:ek,fs:ek}),this.registerModule("decode",{vs:"#define SHIFT_RIGHT17 1.0 / 131072.0\n#define SHIFT_RIGHT18 1.0 / 262144.0\n#define SHIFT_RIGHT19 1.0 / 524288.0\n#define SHIFT_RIGHT20 1.0 / 1048576.0\n#define SHIFT_RIGHT21 1.0 / 2097152.0\n#define SHIFT_RIGHT22 1.0 / 4194304.0\n#define SHIFT_RIGHT23 1.0 / 8388608.0\n#define SHIFT_RIGHT24 1.0 / 16777216.0\n\n#define SHIFT_LEFT17 131072.0\n#define SHIFT_LEFT18 262144.0\n#define SHIFT_LEFT19 524288.0\n#define SHIFT_LEFT20 1048576.0\n#define SHIFT_LEFT21 2097152.0\n#define SHIFT_LEFT22 4194304.0\n#define SHIFT_LEFT23 8388608.0\n#define SHIFT_LEFT24 16777216.0\n\nvec2 unpack_float(float packedValue) {\n  int packedIntValue = int(packedValue);\n  int v0 = packedIntValue / 256;\n  return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec4 decode_color(vec2 encodedColor) {\n  return vec4(\n    unpack_float(encodedColor[0]) / 255.0,\n    unpack_float(encodedColor[1]) / 255.0\n  );\n}\n",fs:""}),this.registerModule("scene_uniforms",{vs:eN,fs:eN}),this.registerModule("picking_uniforms",{vs:eI,fs:eI}),this.registerModule("projection",{vs:eL,fs:eL}),this.registerModule("project",{vs:"\n#define E 2.718281828459045\nvec2 ProjectFlat(vec2 lnglat){\n  float maxs=85.0511287798;\n  float lat=max(min(maxs,lnglat.y),-maxs);\n  float scale= 268435456.;\n  float d=PI/180.;\n  float x=lnglat.x*d;\n  float y=lat*d;\n  y=log(tan((PI/4.)+(y/2.)));\n\n  float a=.5/PI,\n  b=.5,\n  c=-.5/PI;\n  d=.5;\n  x=scale*(a*x+b);\n  y=scale*(c*y+d);\n  return vec2(x,y);\n}\n\nvec2 unProjectFlat(vec2 px){\n  float a=.5/PI;\n  float b=.5;\n  float c=-.5/PI;\n  float d=.5;\n  float scale = 268435456.;\n  float x=(px.x/scale-b)/a;\n  float y=(px.y/scale-d)/c;\n  y=(atan(pow(E,y))-(PI/4.))*2.;\n  d=PI/180.;\n  float lat=y/d;\n  float lng=x/d;\n  return vec2(lng,lat);\n}\n\nfloat pixelDistance(vec2 from, vec2 to) {\n vec2 a1 = ProjectFlat(from);\n vec2 b1 = ProjectFlat(to);\n return distance(a1, b1);\n}\n\n// gaode2.0\nvec2 customProject(vec2 lnglat) { // \u7ECF\u7EAC\u5EA6 => \u5E73\u9762\u5750\u6807\n  float t = lnglat.x;\n  float e = lnglat.y;\n  float Sm = 180.0 / PI;\n  float Tm = 6378137.0;\n  float Rm = PI / 180.0;\n  float r = 85.0511287798;\n  e = max(min(r, e), -r);\n  t *= Rm;\n  e *= Rm;\n  e = log(tan(PI / 4.0 + e / 2.0));\n  return vec2(t * Tm, e * Tm);\n}\n\nvec2 unProjCustomCoord(vec2 point) { // \u5E73\u9762\u5750\u6807 => \u7ECF\u7EAC\u5EA6\n  float Sm = 57.29577951308232; //180 / Math.PI\n  float Tm = 6378137.0;\n  float t = point.x;\n  float e = point.y;\n  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);\n}\n\n\nfloat customPixelDistance(vec2 from, vec2 to) {\n vec2 a1 = ProjectFlat(from);\n vec2 b1 = ProjectFlat(to);\n return distance(a1, b1);\n}",fs:""}),this.registerModule("sdf_2d",{vs:"",fs:"/**\n * 2D signed distance field functions\n * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n */\n\nfloat ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }\n\nfloat sdCircle(vec2 p, float r) {\n  return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(vec2 p) {\n  float k = sqrt(3.0);\n  p.x = abs(p.x) - 1.0;\n  p.y = p.y + 1.0/k;\n  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;\n  p.x -= clamp( p.x, -2.0, 0.0 );\n  return -length(p)*sign(p.y);\n}\n\nfloat sdBox(vec2 p, vec2 b) {\n  vec2 d = abs(p)-b;\n  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);\n}\n\nfloat sdPentagon(vec2 p, float r) {\n  vec3 k = vec3(0.809016994,0.587785252,0.726542528);\n  p.x = abs(p.x);\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\n  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdHexagon(vec2 p, float r) {\n  vec3 k = vec3(-0.866025404,0.5,0.577350269);\n  p = abs(p);\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdOctogon(vec2 p, float r) {\n  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );\n  p = abs(p);\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdHexagram(vec2 p, float r) {\n  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);\n  p = abs(p);\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;\n  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdRhombus(vec2 p, vec2 b) {\n  vec2 q = abs(p);\n  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);\n  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );\n  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );\n}\n\nfloat sdVesica(vec2 p, float r, float d) {\n  p = abs(p);\n  float b = sqrt(r*r-d*d); // can delay this sqrt\n  return ((p.y-b)*d>p.x*b)\n          ? length(p-vec2(0.0,b))\n          : length(p-vec2(-d,0.0))-r;\n}\n"}),this.registerModule("lighting",{vs:"// Blinn-Phong model\n// apply lighting in vertex shader instead of fragment shader\n// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting\nuniform float u_Ambient : 1.0;\nuniform float u_Diffuse : 1.0;\nuniform float u_Specular : 1.0;\nuniform int u_NumOfDirectionalLights : 1;\nuniform int u_NumOfSpotLights : 0;\n\n#define SHININESS 32.0\n#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3\n#define MAX_NUM_OF_SPOT_LIGHTS 3\n\nstruct DirectionalLight {\n  vec3 direction;\n  vec3 ambient;\n  vec3 diffuse;\n  vec3 specular;\n};\n\nstruct SpotLight {\n  vec3 position;\n  vec3 direction;\n  vec3 ambient;\n  vec3 diffuse;\n  vec3 specular;\n  float constant;\n  float linear;\n  float quadratic;\n  float angle;\n  float blur;\n  float exponent;\n};\n\nuniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];\nuniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];\n\nvec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {\n  vec3 lightDir = normalize(light.direction);\n  // diffuse shading\n  float diff = max(dot(normal, lightDir), 0.0);\n  // Blinn-Phong specular shading\n  vec3 halfwayDir = normalize(lightDir + viewDir);\n  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);\n\n  vec3 ambient = light.ambient * u_Ambient;\n  vec3 diffuse = light.diffuse * diff * u_Diffuse;\n  vec3 specular = light.specular * spec * u_Specular;\n\n  return ambient + diffuse + specular;\n}\n\n\nvec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {\n  vec3 weight = vec3(0.0);\n  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {\n    if (i >= u_NumOfDirectionalLights) {\n      break;\n    }\n    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);\n  }\n  return weight;\n}\n",fs:""}),this.registerModule("light",{vs:"#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\n\nfloat calc_lighting(vec4 pos) {\n\n    vec3 worldPos = vec3(pos * u_ModelMatrix);\n\n    vec3 worldNormal = a_Normal;\n      // //cal light weight\n    vec3 viewDir = normalize(u_CameraPosition - worldPos);\n\n    vec3 lightDir = normalize(vec3(1, -10.5, 12));\n\n    vec3 halfDir = normalize(viewDir+lightDir);\n      // //lambert\n    float lambert = dot(worldNormal, lightDir);\n        //specular\n    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);\n        //sum to light weight\n    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;\n\n    return lightWeight;\n}\n",fs:""}),this.registerModule("picking",{vs:'layout(location = ATTRIBUTE_LOCATION_PICKING_COLOR) in vec3 a_PickingColor;\nout vec4 v_PickingResult;\n\n#pragma include "picking_uniforms"\n\n#define PICKING_NONE 0.0\n#define PICKING_ENCODE 1.0\n#define PICKING_HIGHLIGHT 2.0\n#define COLOR_SCALE 1. / 255.\n\n#define NORMAL 0.0\n#define HIGHLIGHT 1.0\n#define SELECT 2.0\n\nbool isVertexPicked(vec3 vertexColor) {\n  return distance(vertexColor,u_PickingColor.rgb) < 0.01;\n}\n\n// \u5224\u65AD\u5F53\u524D\u70B9\u662F\u5426\u5DF2\u7ECF\u88AB select \u9009\u4E2D\nbool isVertexSelected(vec3 vertexColor) {\n  return distance(vertexColor,u_CurrentSelectedId.rgb) < 0.01;\n}\n\nvoid setPickingColor(vec3 pickingColor) {\n  if(u_shaderPick < 0.5) {\n    return;\n  }\n  // compares only in highlight stage\n\n  if(u_PickingStage == PICKING_HIGHLIGHT) {\n    if(isVertexPicked(pickingColor)) {\n       v_PickingResult = vec4(pickingColor.rgb * COLOR_SCALE,HIGHLIGHT);\n       return;\n    }\n    if(isVertexSelected(pickingColor)) {\n     v_PickingResult = vec4(u_CurrentSelectedId.rgb * COLOR_SCALE,SELECT);\n      return;\n    }\n\n  } else {\n      v_PickingResult= vec4(pickingColor.rgb * COLOR_SCALE,NORMAL);\n      return;\n  }\n\n  // // v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && (isVertexPicked(pickingColor) || isVertexPicked(u_CurrentSelectedId)));\n\n  // // Stores the picking color so that the fragment shader can render it during picking\n  // v_PickingResult.rgb = pickingColor * COLOR_SCALE;\n}\n\nfloat setPickingSize(float x) {\n   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;\n}\n\nfloat setPickingOrder(float z) {\n   bool selected = bool(v_PickingResult.a);\n   return selected ? z + 1. : 0.;\n}\n',fs:'\nin vec4 v_PickingResult;\n\n#pragma include "picking_uniforms"\n\n#define PICKING_NONE 0.0\n#define PICKING_ENCODE 1.0\n#define PICKING_HIGHLIGHT 2.0\n#define COLOR_SCALE 1. / 255.\n\n#define HIGHLIGHT 1.0\n#define SELECT 2.0\n\n/*\n * Returns highlight color if this item is selected.\n */\nvec4 filterHighlightColor(vec4 color, float weight) {\n  float activeType = v_PickingResult.a;\n  if(activeType > 0.0) {\n    vec4 highLightColor =  activeType > 1.5 ? u_SelectColor : u_HighlightColor;\n    highLightColor = highLightColor * COLOR_SCALE;\n    float highLightAlpha = highLightColor.a;\n    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));\n    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\n    return vec4(mix(resultRGB * weight, color.rgb, u_activeMix), color.a);\n  }\n  else {\n    return color;\n  }\n\n  \n}\n\n/*\n * Returns picking color if picking enabled else unmodified argument.\n */\nvec4 filterPickingColor(vec4 color) {\n  vec3 pickingColor = v_PickingResult.rgb;\n  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {\n    discard;\n  }\n  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;\n}\n\n/*\n * Returns picking color if picking is enabled if not\n * highlight color if this item is selected, otherwise unmodified argument.\n */\nvec4 filterColor(vec4 color) {\n  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97\n  // return color;\n  if(u_shaderPick < 0.5) {\n    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898\n  } else {\n    return filterPickingColor(filterHighlightColor(color, 1.0));\n  }\n  \n}\n\nvec4 filterColorAlpha(vec4 color, float alpha) {\n  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97\n  // return color;\n  if(u_shaderPick < 0.5) {\n    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898\n  } else {\n    return filterPickingColor(filterHighlightColor(color, alpha));\n  }\n}\n\n'}),this.registerModule("rotation_2d",{vs:"vec2 rotate_matrix(vec2 v, float a) {\n    float b = a / 180.0 * 3.1415926535897932384626433832795;\n    float s = sin(b);\n    float c = cos(b);\n    mat2 m = mat2(c, s, -s, c);\n    return m * v;\n}",fs:""});}registerModule(n,r){r.vs=r.vs.replace(/\r\n/g,"\n"),r.fs=r.fs.replace(/\r\n/g,"\n");let{vs:i,fs:a,uniforms:o,defines:s,inject:l}=r,{content:u,uniforms:c}=(0,m.extractUniforms)(i),{content:f,uniforms:d}=(0,m.extractUniforms)(a);this.rawContentCache[n]={fs:f,defines:s,inject:l,uniforms:(0,M.default)((0,M.default)((0,M.default)({},c),d),o),vs:u};}getModule(n){let r=this.rawContentCache[n].vs,i=this.rawContentCache[n].fs,{defines:a={},inject:o={}}=this.rawContentCache[n],s={};o["vs:#decl"]&&(r=o["vs:#decl"]+r,s=(0,m.extractUniforms)(o["vs:#decl"]).uniforms),o["vs:#main-start"]&&(r=r.replace(ej,n=>n+o["vs:#main-start"])),o["fs:#decl"]&&(i=o["fs:#decl"]+i),r=Object.keys(a).reduce((n,r)=>n+`#define ${r.toUpperCase()} ${a[r]}
`,"\n")+r;let{content:l,includeList:u}=this.processModule(r,[],"vs"),{content:c,includeList:f}=this.processModule(i,[],"fs"),d=eP(u.concat(f).concat(n)).reduce((n,r)=>(0,M.default)((0,M.default)({},n),this.rawContentCache[r].uniforms),(0,M.default)({},s)),h=(eD.test(c)?"":eF)+l,p=(eD.test(c)?"":eF)+c;return this.moduleCache[n]={vs:h.trim(),fs:p.trim(),uniforms:d},this.moduleCache[n];}destroy(){this.moduleCache={},this.rawContentCache={};}processModule(n,r,i){return{content:n.replace(eB,(n,a)=>{let o=a.split(" ")[0].replace(/"/g,"");if(r.indexOf(o)>-1)return"";let s=this.rawContentCache[o][i];r.push(o);let{content:l}=this.processModule(s,r,i);return l;}),includeList:r};}}var eU=d._(i("d41bee1f"),r);class eV{constructor(){(0,P.default)(this,"shaderModuleService",void 0),(0,P.default)(this,"rendererService",void 0),(0,P.default)(this,"cameraService",void 0),(0,P.default)(this,"mapService",void 0),(0,P.default)(this,"interactionService",void 0),(0,P.default)(this,"layerService",void 0),(0,P.default)(this,"config",void 0);}getName(){return"";}getType(){return eU.PassType.Normal;}init(n,r){this.config=r,this.rendererService=n.getContainer().rendererService,this.cameraService=n.getContainer().cameraService,this.mapService=n.getContainer().mapService,this.interactionService=n.getContainer().interactionService,this.layerService=n.getContainer().layerService,this.shaderModuleService=n.getContainer().shaderModuleService;}render(n){}}class eG extends eV{getName(){return"clear";}init(n,r){super.init(n,r);}render(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null});}}class eH{constructor(n){(0,P.default)(this,"passes",[]),(0,P.default)(this,"layer",void 0),(0,P.default)(this,"renderFlag",void 0),(0,P.default)(this,"width",0),(0,P.default)(this,"height",0),this.postProcessor=n;}setLayer(n){this.layer=n;}setRenderFlag(n){this.renderFlag=n;}getRenderFlag(){return this.renderFlag;}getPostProcessor(){return this.postProcessor;}render(){var n=this;return(0,G.default)(function*(){for(let r of n.passes)yield r.render(n.layer);yield n.postProcessor.render(n.layer);})();}resize(n,r){(this.width!==n||this.height!==r)&&(this.postProcessor.resize(n,r),this.width=n,this.height=r);}add(n,r){n.getType()===eU.PassType.PostProcessing?this.postProcessor.add(n,this.layer,r):(n.init(this.layer,r),this.passes.push(n));}insert(n,r,i){n.init(this.layer,r),this.passes.splice(i,0,n);}destroy(){this.passes.length=0;}}class eW extends eV{constructor(...n){var r;super(...n),r=this,(0,P.default)(this,"pickingFBO",void 0),(0,P.default)(this,"layer",void 0),(0,P.default)(this,"width",0),(0,P.default)(this,"height",0),(0,P.default)(this,"alreadyInRendering",!1),(0,P.default)(this,"pickFromPickingFBO",({x:n,y:i,lngLat:a,type:o})=>{let s;if(!this.layer.isVisible()||!this.layer.needPick(o))return;let{getViewportSize:l,readPixelsAsync:u,useFramebuffer:c}=this.rendererService,{width:f,height:d}=l(),{enableHighlight:h,enableSelect:p}=this.layer.getLayerConfig(),m=n*g.DOM.DPR,v=i*g.DOM.DPR;m>f||m<0||v>d||v<0||c(this.pickingFBO,(0,G.default)(function*(){if(0!==(s=yield u({x:Math.round(m),y:Math.round(d-(i+1)*g.DOM.DPR),width:1,height:1,data:new Uint8Array(4),framebuffer:r.pickingFBO}))[0]||0!==s[1]||0!==s[2]){let l=(0,g.decodePickingColor)(s),u=r.layer.getSource().getFeatureById(l);u&&(r.layer.setCurrentPickId(l),r.triggerHoverOnLayer({x:n,y:i,type:o,lngLat:a,featureId:l,feature:u}));}else{let s={x:n,y:i,lngLat:a,type:null===r.layer.getCurrentPickId()?"un"+o:"mouseout",featureId:null,feature:null};r.triggerHoverOnLayer((0,M.default)((0,M.default)({},s),{},{type:"unpick"})),r.triggerHoverOnLayer(s),r.layer.setCurrentPickId(null);}h&&r.highlightPickedFeature(s),p&&"click"===o&&(null==s?void 0:s.toString())!==[0,0,0,0].toString()&&r.selectFeature(s);}));});}getType(){return eU.PassType.Normal;}getName(){return"pixelPicking";}init(n,r){super.init(n,r),this.layer=n;let{createTexture2D:i,createFramebuffer:a,getViewportSize:o}=this.rendererService,{width:s,height:l}=o(),u=i({width:s,height:l,wrapS:C.gl.CLAMP_TO_EDGE,wrapT:C.gl.CLAMP_TO_EDGE,label:"Picking Texture"});this.pickingFBO=a({color:u}),this.interactionService.on(x.InteractionEvent.Hover,this.pickFromPickingFBO),this.interactionService.on(x.InteractionEvent.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(x.InteractionEvent.Active,this.highlightFeatureHandle.bind(this));}render(n){if(this.alreadyInRendering)return;let{getViewportSize:r,useFramebuffer:i,clear:a}=this.rendererService,{width:o,height:s}=r();this.alreadyInRendering=!0,(this.width!==o||this.height!==s)&&(this.pickingFBO.resize({width:o,height:s}),this.width=o,this.height=s),i(this.pickingFBO,()=>{a({framebuffer:this.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});let r=this.layer.multiPassRenderer.getRenderFlag();this.layer.multiPassRenderer.setRenderFlag(!1),n.hooks.beforePickingEncode.call(),n.render(),n.hooks.afterPickingEncode.call(),this.layer.multiPassRenderer.setRenderFlag(r),this.alreadyInRendering=!1;});}triggerHoverOnLayer(n){this.layer.emit(n.type,n);}highlightPickedFeature(n){let[r,i,a]=n;this.layer.hooks.beforeHighlight.call([r,i,a]),this.layerService.renderLayers();}selectFeature(n){let[r,i,a]=n;this.layer.hooks.beforeSelect.call([r,i,a]),this.layerService.renderLayers();}selectFeatureHandle({featureId:n}){let r=(0,g.encodePickingColor)(n);this.selectFeature(new Uint8Array(r));}highlightFeatureHandle({featureId:n}){let r=(0,g.encodePickingColor)(n);this.highlightPickedFeature(new Uint8Array(r));}}class eX{constructor(n){(0,P.default)(this,"passes",[]),(0,P.default)(this,"readFBO",void 0),(0,P.default)(this,"writeFBO",void 0),this.rendererService=n,this.init();}getReadFBO(){return this.readFBO;}getWriteFBO(){return this.writeFBO;}getCurrentFBOTex(){let{getViewportSize:n,createTexture2D:r}=this.rendererService,{width:i,height:a}=n();return r({x:0,y:0,width:i,height:a,copy:!0});}getReadFBOTex(){var n=this;let{useFramebuffer:r}=this.rendererService;return new Promise(i=>{r(this.readFBO,(0,G.default)(function*(){i(n.getCurrentFBOTex());}));});}renderBloomPass(n,r){var i=this;return(0,G.default)(function*(){let a=yield i.getReadFBOTex(),o=0;for(;o<4;)yield r.render(n,a),i.swap(),o++;})();}render(n){var r=this;return(0,G.default)(function*(){for(let i=0;i<r.passes.length;i++){let a=r.passes[i];a.setRenderToScreen(r.isLastEnabledPass(i)),"bloom"===a.getName()?yield r.renderBloomPass(n,a):(yield a.render(n),i!==r.passes.length-1&&r.swap());}})();}resize(n,r){this.readFBO.resize({width:n,height:r}),this.writeFBO.resize({width:n,height:r});}add(n,r,i){n.init(r,i),this.passes.push(n);}insert(n,r,i,a){n.init(i,a),this.passes.splice(r,0,n);}getPostProcessingPassByName(n){return this.passes.find(r=>r.getName()===n);}init(){let{createFramebuffer:n,createTexture2D:r}=this.rendererService;this.readFBO=n({color:r({width:1,height:1,wrapS:C.gl.CLAMP_TO_EDGE,wrapT:C.gl.CLAMP_TO_EDGE,usage:ep.RENDER_TARGET})}),this.writeFBO=n({color:r({width:1,height:1,wrapS:C.gl.CLAMP_TO_EDGE,wrapT:C.gl.CLAMP_TO_EDGE,usage:ep.RENDER_TARGET})});}isLastEnabledPass(n){for(let r=n+1;r<this.passes.length;r++)if(this.passes[r].isEnabled())return!1;return!0;}swap(){let n=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=n;}}class eq extends eV{getType(){return eU.PassType.Normal;}getName(){return"render";}init(n,r){super.init(n,r);}render(n){let{useFramebuffer:r,clear:i}=this.rendererService,a=n.multiPassRenderer.getPostProcessor().getReadFBO();r(a,()=>{i({color:[0,0,0,0],depth:1,stencil:0,framebuffer:a}),n.multiPassRenderer.setRenderFlag(!1),n.models.forEach(r=>{r.draw({uniforms:n.layerModel.getUninforms()});}),n.multiPassRenderer.setRenderFlag(!0);});}}let{isNil:e$}=g.lodashUtil;class eY extends p.default{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:"varying vec2 v_UV;\n\nuniform float u_BloomFinal: 0.0;\nuniform sampler2D u_Texture;\nuniform sampler2D u_Texture2;\n\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform float u_radius: 5.0;\nuniform float u_intensity: 0.3;\nuniform float u_baseRadio: 0.5;\n\n// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3846153846) * direction;\n  vec2 off2 = vec2(3.2307692308) * direction;\n  color += texture2D(image, uv) * 0.2270270270;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\n  return color;\n}\n\nfloat luminance(vec4 color) {\n  return  0.2125 * color.r + 0.7154 * color.g + 0.0721 * color.b;\n}\n\nvoid main() {\n  // vec4 baseColor = texture2D(u_Texture, v_UV);\n\n  float r = sqrt(u_radius);\n\n  vec4 c1 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(u_radius, 0.0));\n  // c1 *= luminance(c1);\n  vec4 c2 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(0.0, u_radius));\n  // c2 *= luminance(c2);\n  vec4 c3 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, r));\n  // c3 *= luminance(c3);\n  vec4 c4 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, -r));\n  // c4 *= luminance(c4);\n  vec4 inbloomColor = (c1 + c2 + c3 + c4) * 0.25;\n\n  // float lum = luminance(inbloomColor);\n  // inbloomColor.rgb *= lum;\n\n  if(u_BloomFinal > 0.0) {\n    vec4 baseColor = texture2D(u_Texture2, v_UV);\n    float baselum = luminance(baseColor);\n    gl_FragColor = mix(inbloomColor, baseColor, u_baseRadio);\n    if(baselum <= 0.2) {\n      gl_FragColor = inbloomColor * u_intensity;\n    }\n  } else {\n    gl_FragColor = inbloomColor;\n  }\n}"});let{vs:n,fs:r,uniforms:i}=this.shaderModuleService.getModule("blur-pass"),{width:a,height:o}=this.rendererService.getViewportSize();return{vs:n,fs:r,uniforms:(0,M.default)((0,M.default)({},i),{},{u_ViewportSize:[a,o]})};}convertOptionsToUniforms(n){let r={};return e$(n.bloomRadius)||(r.u_radius=n.bloomRadius),e$(n.bloomIntensity)||(r.u_intensity=n.bloomIntensity),e$(n.bloomBaseRadio)||(r.u_baseRadio=n.bloomBaseRadio),r;}}let{isNil:eZ}=g.lodashUtil;class eK extends p.default{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_BlurDir: [1.0, 0.0];\n\n// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3846153846) * direction;\n  vec2 off2 = vec2(3.2307692308) * direction;\n  color += texture2D(image, uv) * 0.2270270270;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);\n}"});let{vs:n,fs:r,uniforms:i}=this.shaderModuleService.getModule("blur-pass"),{width:a,height:o}=this.rendererService.getViewportSize();return{vs:n,fs:r,uniforms:(0,M.default)((0,M.default)({},i),{},{u_ViewportSize:[a,o]})};}convertOptionsToUniforms(n){let r={};return eZ(n.blurRadius)||(r.u_BlurDir=[n.blurRadius,0]),r;}}let{isNil:eQ}=g.lodashUtil;class eJ extends p.default{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_BlurDir: [1.0, 0.0];\n\n// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3846153846) * direction;\n  vec2 off2 = vec2(3.2307692308) * direction;\n  color += texture2D(image, uv) * 0.2270270270;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);\n}"});let{vs:n,fs:r,uniforms:i}=this.shaderModuleService.getModule("blur-pass"),{width:a,height:o}=this.rendererService.getViewportSize();return{vs:n,fs:r,uniforms:(0,M.default)((0,M.default)({},i),{},{u_ViewportSize:[a,o]})};}convertOptionsToUniforms(n){let r={};return eQ(n.blurRadius)||(r.u_BlurDir=[0,n.blurRadius]),r;}}class e0 extends p.default{setupShaders(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:'varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_Center : [0.5, 0.5];\nuniform float u_Angle : 0;\nuniform float u_Size : 8;\n\n#pragma include "common"\n\nfloat scale = PI / u_Size;\n\nfloat pattern(float u_Angle, vec2 texSize, vec2 texCoord) {\n  float s = sin(u_Angle), c = cos(u_Angle);\n  vec2 tex = texCoord * texSize - u_Center * texSize;\n  vec2 point = vec2(\n    c * tex.x - s * tex.y,\n    s * tex.x + c * tex.y\n  ) * scale;\n  return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js\nvec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  vec3 cmy = 1.0 - color.rgb;\n  float k = min(cmy.x, min(cmy.y, cmy.z));\n  cmy = (cmy - k) / (1.0 - k);\n  cmy = clamp(\n    cmy * 10.0 - 3.0 + vec3(\n      pattern(u_Angle + 0.26179, texSize, texCoord),\n      pattern(u_Angle + 1.30899, texSize, texCoord),\n      pattern(u_Angle, texSize, texCoord)\n    ),\n    0.0,\n    1.0\n  );\n  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);\n  return vec4(1.0 - cmy - k, color.a);\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);\n}'});let{vs:n,fs:r,uniforms:i}=this.shaderModuleService.getModule("colorhalftone-pass"),{width:a,height:o}=this.rendererService.getViewportSize();return{vs:n,fs:r,uniforms:(0,M.default)((0,M.default)({},i),{},{u_ViewportSize:[a,o]})};}}class e1 extends p.default{setupShaders(){return this.shaderModuleService.registerModule("copy-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n}"}),this.shaderModuleService.getModule("copy-pass");}}class e2 extends p.default{setupShaders(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_Center : [0.5, 0.5];\nuniform float u_Scale : 10;\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js\nvec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;\n  tex.y /= 0.866025404;\n  tex.x -= tex.y * 0.5;\n  vec2 a;\n  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {\n    a = vec2(floor(tex.x), floor(tex.y));\n  }\n  else a = vec2(ceil(tex.x), ceil(tex.y));\n  vec2 b = vec2(ceil(tex.x), floor(tex.y));\n  vec2 c = vec2(floor(tex.x), ceil(tex.y));\n  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);\n  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);\n  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);\n  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);\n  float alen = length(TEX - A);\n  float blen = length(TEX - B);\n  float clen = length(TEX - C);\n  vec2 choice;\n  if (alen < blen) {\n    if (alen < clen) choice = a;\n    else choice = c;\n  } else {\n    if (blen < clen) choice = b;\n    else choice = c;\n  }\n  choice.x += choice.y * 0.5;\n  choice.y *= 0.866025404;\n  choice *= u_Scale / texSize;\n  return texture2D(texture, choice + u_Center);\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);\n}"});let{vs:n,fs:r,uniforms:i}=this.shaderModuleService.getModule("hexagonalpixelate-pass"),{width:a,height:o}=this.rendererService.getViewportSize();return{vs:n,fs:r,uniforms:(0,M.default)((0,M.default)({},i),{},{u_ViewportSize:[a,o]})};}}class e3 extends p.default{setupShaders(){this.shaderModuleService.registerModule("ink-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform float u_Strength : 0.6;\n\nvec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 dx = vec2(1.0 / texSize.x, 0.0);\n  vec2 dy = vec2(0.0, 1.0 / texSize.y);\n  vec4 color = texture2D(texture, texCoord);\n  float bigTotal = 0.0;\n  float smallTotal = 0.0;\n  vec3 bigAverage = vec3(0.0);\n  vec3 smallAverage = vec3(0.0);\n  for (float x = -2.0; x <= 2.0; x += 1.0) {\n    for (float y = -2.0; y <= 2.0; y += 1.0) {\n      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;\n      bigAverage += sample;\n      bigTotal += 1.0;\n      if (abs(x) + abs(y) < 2.0) {\n        smallAverage += sample;\n        smallTotal += 1.0;\n      }\n    }\n  }\n  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);\n  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;\n  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);\n}"});let{vs:n,fs:r,uniforms:i}=this.shaderModuleService.getModule("ink-pass"),{width:a,height:o}=this.rendererService.getViewportSize();return{vs:n,fs:r,uniforms:(0,M.default)((0,M.default)({},i),{},{u_ViewportSize:[a,o]})};}}class e4 extends p.default{setupShaders(){return this.shaderModuleService.registerModule("noise-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform float u_Amount : 0.5;\n\nfloat rand(vec2 co) {\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js\nvec4 noise_filterColor(vec4 color, vec2 texCoord) {\n  float diff = (rand(texCoord) - 0.5) * u_Amount;\n  color.r += diff;\n  color.g += diff;\n  color.b += diff;\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);\n}"}),this.shaderModuleService.getModule("noise-pass");}}class e5 extends p.default{setupShaders(){return this.shaderModuleService.registerModule("sepia-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nuniform float u_Amount : 0.5;\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js\nvec4 sepia_filterColor(vec4 color) {\n  float r = color.r;\n  float g = color.g;\n  float b = color.b;\n  color.r =\n    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));\n  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));\n  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = sepia_filterColor(gl_FragColor);\n}"}),this.shaderModuleService.getModule("sepia-pass");}}let e6=new class{constructor(){(0,P.default)(this,"sceneConfigCache",{}),(0,P.default)(this,"layerConfigCache",{}),(0,P.default)(this,"layerAttributeConfigCache",{});}getSceneConfig(n){return this.sceneConfigCache[n];}getSceneWarninfo(n){return Q[n];}setSceneConfig(n,r){this.sceneConfigCache[n]=(0,M.default)((0,M.default)({},ee),r);}getLayerConfig(n){return this.layerConfigCache[n];}setLayerConfig(n,r,i){this.layerConfigCache[r]=(0,M.default)({},J({},this.sceneConfigCache[n],et,i));}getAttributeConfig(n){return this.layerAttributeConfigCache[n];}setAttributeConfig(n,r){this.layerAttributeConfigCache[n]=(0,M.default)((0,M.default)({},this.layerAttributeConfigCache[n]),r);}clean(){this.sceneConfigCache={},this.layerConfigCache={};}},e8=0;function e7(){let n=new ez,r=new el,i=new q,a=new es(i),o=new U,s=new H,l=new Z,u=new K,c=new Y,f={id:`${e8++}`,globalConfigService:e6,shaderModuleService:n,debugService:r,cameraService:i,coordinateSystemService:a,fontService:o,iconService:s,markerService:l,popupService:u,controlService:c,customRenderService:{}},d=new ey(f);f.layerService=d;let h=new eR(f);f.sceneService=h;let p=new ed(f);f.interactionService=p;let m=new em(f);f.pickingService=m;let g={clear:new eG,pixelPicking:new eW,render:new eq};f.normalPassFactory=n=>g[n];let v={copy:new e1,bloom:new eY,blurH:new eK,blurV:new eJ,noise:new e4,sepia:new e5,colorHalftone:new e0,hexagonalPixelate:new e2,ink:new e3};return f.postProcessingPass=v,f.postProcessingPassFactory=n=>v[n],f;}function e9(n){let r=(0,M.default)({},n);return r.postProcessor=new eX(r.rendererService),r.multiPassRenderer=new eH(r.postProcessor),r.styleAttributeService=new eA(r.rendererService),r;}let te=["loaded","fontloaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"],tt=((u={}).IMAGE="image",u.CUSTOMIMAGE="customImage",u.ARRAYBUFFER="arraybuffer",u.RGB="rgb",u.TERRAINRGB="terrainRGB",u.CUSTOMRGB="customRGB",u.CUSTOMARRAYBUFFER="customArrayBuffer",u.CUSTOMTERRAINRGB="customTerrainRGB",u);},"5557e3b4":function(n,r,i){"use strict";function a(n){return n*Math.PI/180;}function o(n){return Number((180*n/Math.PI).toPrecision(5));}i.d(r,"__esModule",{value:!0}),i.e(r,{degToRad:function(){return a;},radToDeg:function(){return o;}});},"5559be6a":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return o;}});var a=i("ed8f1d23");function o(n){return(n=(0,a.formatDecimalParts)(Math.abs(n)))?n[1]:NaN;}},"5576b0af":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return o;}});var a=i("777fffbe")._(i("2713d2ad"));function o(){var n,r=[];return{point:function(r,i,a){n.push([r,i,a]);},lineStart:function(){r.push(n=[]);},lineEnd:a.default,rejoin:function(){r.length>1&&r.push(r.pop().concat(r.shift()));},result:function(){var i=r;return r=[],n=null,i;}};}},"562f4065":function(n,r,i){},"56fecea2":function(n,r,i){var a=i("1c9de5a5"),o=i("ca53fc7e");n.exports=function(n,r,i,s){var l=i.length,u=l,c=!s;if(null==n)return!u;for(n=Object(n);l--;){var f=i[l];if(c&&f[2]?f[1]!==n[f[0]]:!(f[0]in n))return!1;}for(;++l<u;){var d=(f=i[l])[0],h=n[d],p=f[1];if(c&&f[2]){if(void 0===h&&!(d in n))return!1;}else{var m=new a;if(s)var g=s(h,p,d,n,r,m);if(!(void 0===g?o(p,h,3,s,m):g))return!1;}}return!0;};},"572a6e2f":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{DEFAULT_HANDLE_CFG:function(){return p;},Handle:function(){return m;}});var a=i("3862611d"),o=i("47a6bde3"),s=i("fc81244b"),l=i("a602d54e"),u=i("b0ea517f"),c=i("a63b8d99"),f=i("0381584d"),d=i("ceab2f6b"),h=(0,s.classNames)({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),p={showLabel:!0,formatter:function(n){return n.toString();},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0},m=function(n){function r(r){return n.call(this,r,p)||this;}return(0,a.__extends)(r,n),r.prototype.render=function(n,r){var i=(0,u.select)(r).maybeAppendByClassName(h.markerGroup,"g");this.renderMarker(i);var a=(0,u.select)(r).maybeAppendByClassName(h.labelGroup,"g");this.renderLabel(a);},r.prototype.renderMarker=function(n){var r=this,i=this.attributes,o=i.orientation,s=i.markerSymbol,u=void 0===s?(0,d.ifHorizontal)(o,"horizontalHandle","verticalHandle"):s;(0,l.ifShow)(!!u,n,function(n){var i=(0,c.subStyleProps)(r.attributes,"marker"),o=(0,a.__assign)({symbol:u},i);r.marker=n.maybeAppendByClassName(h.marker,function(){return new f.Marker({style:o});}).update(o);});},r.prototype.renderLabel=function(n){var r=this,i=this.attributes,o=i.showLabel,s=i.orientation,u=i.spacing,f=void 0===u?0:u,p=i.formatter;(0,l.ifShow)(o,n,function(n){var i,o=(0,c.subStyleProps)(r.attributes,"label"),l=o.text,u=(0,a.__rest)(o,["text"]),m=(null===(i=n.select(h.marker.class))||void 0===i?void 0:i.node().getBBox())||{},g=m.width,v=m.height,y=(0,a.__read)((0,d.ifHorizontal)(s,[0,(void 0===v?0:v)+f,"center","top"],[(void 0===g?0:g)+f,0,"start","middle"]),4),_=y[0],b=y[1],x=y[2],E=y[3];n.maybeAppendByClassName(h.label,"text").styles((0,a.__assign)((0,a.__assign)({},u),{x:_,y:b,text:p(l).toString(),textAlign:x,textBaseline:E}));});},r;}(o.Component);},"587eb646":function(n,r,i){var a=Object.prototype.hasOwnProperty;n.exports=function(n){var r=n.length,i=new n.constructor(r);return r&&"string"==typeof n[0]&&a.call(n,"index")&&(i.index=n.index,i.input=n.input),i;};},"589c3a02":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"paramsParser",{enumerable:!0,get:function(){return a;}});var a={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};},"58eaf31b":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{add:function(){return C;},clone:function(){return w;},copy:function(){return T;},create:function(){return g;},dot:function(){return R;},equals:function(){return D;},exactEquals:function(){return N;},fromEuler:function(){return E;},fromMat3:function(){return x;},fromValues:function(){return S;},invert:function(){return b;},length:function(){return k;},lerp:function(){return P;},mul:function(){return O;},multiply:function(){return y;},normalize:function(){return L;},rotationTo:function(){return F;},scale:function(){return M;},set:function(){return A;},setAxes:function(){return j;},setAxisAngle:function(){return v;},slerp:function(){return _;},sqlerp:function(){return B;},squaredLength:function(){return I;}});var a,o,s,l,u,c,f=i("852bbaa9"),d=f._(i("1cf5f081")),h=f._(i("7242d2f8")),p=f._(i("377bcc16")),m=f._(i("26429605"));function g(){var n=new d.ARRAY_TYPE(4);return d.ARRAY_TYPE!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n;}function v(n,r,i){var a=Math.sin(i*=.5);return n[0]=a*r[0],n[1]=a*r[1],n[2]=a*r[2],n[3]=Math.cos(i),n;}function y(n,r,i){var a=r[0],o=r[1],s=r[2],l=r[3],u=i[0],c=i[1],f=i[2],d=i[3];return n[0]=a*d+l*u+o*f-s*c,n[1]=o*d+l*c+s*u-a*f,n[2]=s*d+l*f+a*c-o*u,n[3]=l*d-a*u-o*c-s*f,n;}function _(n,r,i,a){var o,s,l,u,c,f=r[0],h=r[1],p=r[2],m=r[3],g=i[0],v=i[1],y=i[2],_=i[3];return(s=f*g+h*v+p*y+m*_)<0&&(s=-s,g=-g,v=-v,y=-y,_=-_),1-s>d.EPSILON?(l=Math.sin(o=Math.acos(s)),u=Math.sin((1-a)*o)/l,c=Math.sin(a*o)/l):(u=1-a,c=a),n[0]=u*f+c*g,n[1]=u*h+c*v,n[2]=u*p+c*y,n[3]=u*m+c*_,n;}function b(n,r){var i=r[0],a=r[1],o=r[2],s=r[3],l=i*i+a*a+o*o+s*s,u=l?1/l:0;return n[0]=-i*u,n[1]=-a*u,n[2]=-o*u,n[3]=s*u,n;}function x(n,r){var i,a=r[0]+r[4]+r[8];if(a>0)i=Math.sqrt(a+1),n[3]=.5*i,i=.5/i,n[0]=(r[5]-r[7])*i,n[1]=(r[6]-r[2])*i,n[2]=(r[1]-r[3])*i;else{var o=0;r[4]>r[0]&&(o=1),r[8]>r[3*o+o]&&(o=2);var s=(o+1)%3,l=(o+2)%3;i=Math.sqrt(r[3*o+o]-r[3*s+s]-r[3*l+l]+1),n[o]=.5*i,i=.5/i,n[3]=(r[3*s+l]-r[3*l+s])*i,n[s]=(r[3*s+o]+r[3*o+s])*i,n[l]=(r[3*l+o]+r[3*o+l])*i;}return n;}function E(n,r,i,a){var o=.5*Math.PI/180,s=Math.sin(r*=o),l=Math.cos(r),u=Math.sin(i*=o),c=Math.cos(i),f=Math.sin(a*=o),d=Math.cos(a);return n[0]=s*c*d-l*u*f,n[1]=l*u*d+s*c*f,n[2]=l*c*f-s*u*d,n[3]=l*c*d+s*u*f,n;}var w=m.clone,S=m.fromValues,T=m.copy,A=m.set,C=m.add,O=y,M=m.scale,R=m.dot,P=m.lerp,k=m.length,I=m.squaredLength,L=m.normalize,N=m.exactEquals,D=m.equals,F=(a=p.create(),o=p.fromValues(1,0,0),s=p.fromValues(0,1,0),function(n,r,i){var l=p.dot(r,i);return l<-.999999?(p.cross(a,o,r),1e-6>p.len(a)&&p.cross(a,s,r),p.normalize(a,a),v(n,a,Math.PI),n):l>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(p.cross(a,r,i),n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=1+l,L(n,n));}),B=(l=g(),u=g(),function(n,r,i,a,o,s){return _(l,r,o,s),_(u,i,a,s),_(n,l,u,2*s*(1-s)),n;}),j=(c=h.create(),function(n,r,i,a){return c[0]=i[0],c[3]=i[1],c[6]=i[2],c[1]=a[0],c[4]=a[1],c[7]=a[2],c[2]=-r[0],c[5]=-r[1],c[8]=-r[2],L(n,x(n,c));});},"590de783":function(n,r,i){n.exports=function(n,r,i,a){for(var o=i-1,s=n.length;++o<s;)if(a(n[o],r))return o;return -1;};},"5915d8e0":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{Color:function(){return o;},Rgb:function(){return C;},brighter:function(){return l;},darker:function(){return s;},default:function(){return E;},hsl:function(){return N;},hslConvert:function(){return L;},rgb:function(){return A;},rgbConvert:function(){return T;}});var a=i("852bbaa9")._(i("6e17e91f"));function o(){}var s=.7,l=1.4285714285714286,u="\\s*([+-]?\\d+)\\s*",c="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",f="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",d=/^#([0-9a-f]{3,8})$/,h=RegExp(`^rgb\\(${u},${u},${u}\\)$`),p=RegExp(`^rgb\\(${f},${f},${f}\\)$`),m=RegExp(`^rgba\\(${u},${u},${u},${c}\\)$`),g=RegExp(`^rgba\\(${f},${f},${f},${c}\\)$`),v=RegExp(`^hsl\\(${c},${f},${f}\\)$`),y=RegExp(`^hsla\\(${c},${f},${f},${c}\\)$`),_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function b(){return this.rgb().formatHex();}function x(){return this.rgb().formatRgb();}function E(n){var r,i;return n=(n+"").trim().toLowerCase(),(r=d.exec(n))?(i=r[1].length,r=parseInt(r[1],16),6===i?w(r):3===i?new C(r>>8&15|r>>4&240,r>>4&15|240&r,(15&r)<<4|15&r,1):8===i?S(r>>24&255,r>>16&255,r>>8&255,(255&r)/255):4===i?S(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|240&r,((15&r)<<4|15&r)/255):null):(r=h.exec(n))?new C(r[1],r[2],r[3],1):(r=p.exec(n))?new C(255*r[1]/100,255*r[2]/100,255*r[3]/100,1):(r=m.exec(n))?S(r[1],r[2],r[3],r[4]):(r=g.exec(n))?S(255*r[1]/100,255*r[2]/100,255*r[3]/100,r[4]):(r=v.exec(n))?I(r[1],r[2]/100,r[3]/100,1):(r=y.exec(n))?I(r[1],r[2]/100,r[3]/100,r[4]):_.hasOwnProperty(n)?w(_[n]):"transparent"===n?new C(NaN,NaN,NaN,0):null;}function w(n){return new C(n>>16&255,n>>8&255,255&n,1);}function S(n,r,i,a){return a<=0&&(n=r=i=NaN),new C(n,r,i,a);}function T(n){return(n instanceof o||(n=E(n)),n)?new C((n=n.rgb()).r,n.g,n.b,n.opacity):new C;}function A(n,r,i,a){return 1==arguments.length?T(n):new C(n,r,i,null==a?1:a);}function C(n,r,i,a){this.r=+n,this.g=+r,this.b=+i,this.opacity=+a;}function O(){return`#${k(this.r)}${k(this.g)}${k(this.b)}`;}function M(){let n=R(this.opacity);return`${1===n?"rgb(":"rgba("}${P(this.r)}, ${P(this.g)}, ${P(this.b)}${1===n?")":`, ${n})`}`;}function R(n){return isNaN(n)?1:Math.max(0,Math.min(1,n));}function P(n){return Math.max(0,Math.min(255,Math.round(n)||0));}function k(n){return((n=P(n))<16?"0":"")+n.toString(16);}function I(n,r,i,a){return a<=0?n=r=i=NaN:i<=0||i>=1?n=r=NaN:r<=0&&(n=NaN),new D(n,r,i,a);}function L(n){if(n instanceof D)return new D(n.h,n.s,n.l,n.opacity);if(n instanceof o||(n=E(n)),!n)return new D;if(n instanceof D)return n;var r=(n=n.rgb()).r/255,i=n.g/255,a=n.b/255,s=Math.min(r,i,a),l=Math.max(r,i,a),u=NaN,c=l-s,f=(l+s)/2;return c?(u=r===l?(i-a)/c+(i<a)*6:i===l?(a-r)/c+2:(r-i)/c+4,c/=f<.5?l+s:2-l-s,u*=60):c=f>0&&f<1?0:u,new D(u,c,f,n.opacity);}function N(n,r,i,a){return 1==arguments.length?L(n):new D(n,r,i,null==a?1:a);}function D(n,r,i,a){this.h=+n,this.s=+r,this.l=+i,this.opacity=+a;}function F(n){return(n=(n||0)%360)<0?n+360:n;}function B(n){return Math.max(0,Math.min(1,n||0));}function j(n,r,i){return(n<60?r+(i-r)*n/60:n<180?i:n<240?r+(i-r)*(240-n)/60:r)*255;}(0,a.default)(o,E,{copy(n){return Object.assign(new this.constructor,this,n);},displayable(){return this.rgb().displayable();},hex:b,formatHex:b,formatHex8:function(){return this.rgb().formatHex8();},formatHsl:function(){return L(this).formatHsl();},formatRgb:x,toString:x}),(0,a.default)(C,A,(0,a.extend)(o,{brighter(n){return n=null==n?l:Math.pow(l,n),new C(this.r*n,this.g*n,this.b*n,this.opacity);},darker(n){return n=null==n?s:Math.pow(s,n),new C(this.r*n,this.g*n,this.b*n,this.opacity);},rgb(){return this;},clamp(){return new C(P(this.r),P(this.g),P(this.b),R(this.opacity));},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1;},hex:O,formatHex:O,formatHex8:function(){return`#${k(this.r)}${k(this.g)}${k(this.b)}${k((isNaN(this.opacity)?1:this.opacity)*255)}`;},formatRgb:M,toString:M})),(0,a.default)(D,N,(0,a.extend)(o,{brighter(n){return n=null==n?l:Math.pow(l,n),new D(this.h,this.s,this.l*n,this.opacity);},darker(n){return n=null==n?s:Math.pow(s,n),new D(this.h,this.s,this.l*n,this.opacity);},rgb(){var n=this.h%360+(this.h<0)*360,r=isNaN(n)||isNaN(this.s)?0:this.s,i=this.l,a=i+(i<.5?i:1-i)*r,o=2*i-a;return new C(j(n>=240?n-240:n+120,o,a),j(n,o,a),j(n<120?n+240:n-120,o,a),this.opacity);},clamp(){return new D(F(this.h),B(this.s),B(this.l),R(this.opacity));},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1;},formatHsl(){let n=R(this.opacity);return`${1===n?"hsl(":"hsla("}${F(this.h)}, ${100*B(this.s)}%, ${100*B(this.l)}%${1===n?")":`, ${n})`}`;}}));},"5932a788":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{PanelContext:function(){return o;},PickerHackContext:function(){return u;},useInfo:function(){return l;},usePanelContext:function(){return s;}});var a=i("852bbaa9")._(i("609f48be")),o=a.createContext(null);function s(){return a.useContext(o);}function l(n,r){var i=n.prefixCls,a=n.generateConfig,o=n.locale,s=n.disabledDate,l=n.minDate,u=n.maxDate,c=n.cellRender,f=n.hoverValue,d=n.hoverRangeValue,h=n.onHover,p=n.values,m=n.pickerValue,g=n.onSelect,v=n.prevIcon,y=n.nextIcon,_=n.superPrevIcon,b=n.superNextIcon,x=a.getNow();return[{now:x,values:p,pickerValue:m,prefixCls:i,disabledDate:s,minDate:l,maxDate:u,cellRender:c,hoverValue:f,hoverRangeValue:d,onHover:h,locale:o,generateConfig:a,onSelect:g,panelType:r,prevIcon:v,nextIcon:y,superPrevIcon:_,superNextIcon:b},x];}var u=a.createContext({});},"594adbe7":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{LoadTileDataStatus:function(){return h;},TilesetManager:function(){return U;},UpdateTileStrategy:function(){return d;},getTileIndices:function(){return E;},getTileWarpXY:function(){return w;},getURLFromTemplate:function(){return H;},getWMTSURLFromTemplate:function(){return W;},osmLonLat2TileXY:function(){return _;},tileToBounds:function(){return x;}});var a,o,s,l=i("852bbaa9"),u=i("64787828"),c=i("1b4ebcab"),f=l._(c),d=((a=d||{}).Realtime="realtime",a.Overlap="overlap",a.Replace="replace",a),h=((o=h||{}).Loading="Loading",o.Loaded="Loaded",o.Failure="Failure",o.Cancelled="Cancelled",o);function p(n){for(;n;){if(n.isLoaded)return n.properties.state|=2,!0;n=n.parent;}return!1;}function m(n){n.children.forEach(n=>{n.isLoaded?n.properties.state|=2:m(n);});}var g=[-1/0,-1/0,1/0,1/0],v={[d.Realtime]:function(n){n.forEach(n=>{n.isCurrent&&(n.isVisible=n.isLoaded);});},[d.Overlap]:function(n){n.forEach(n=>{n.properties.state=0;}),n.forEach(n=>{n.isCurrent&&!p(n)&&m(n);}),n.forEach(n=>{n.isVisible=!!(2&n.properties.state);});},[d.Replace]:function(n){n.forEach(n=>{n.properties.state=0;}),n.forEach(n=>{n.isCurrent&&p(n);}),n.slice().sort((n,r)=>n.z-r.z).forEach(n=>{n.isVisible=!!(2&n.properties.state),n.children.length&&(n.isVisible||1&n.properties.state)?n.children.forEach(n=>{n.properties.state=1;}):n.isCurrent&&m(n);});}},y=()=>{};function _(n,r,i){return[Math.floor((n+180)/360*Math.pow(2,i)),Math.floor((1-Math.log(Math.tan(r*Math.PI/180)+1/Math.cos(r*Math.PI/180))/Math.PI)/2*Math.pow(2,i))];}function b(n,r,i){let a=n/Math.pow(2,i)*360-180,o=Math.PI-2*Math.PI*r/Math.pow(2,i);return[a,180/Math.PI*Math.atan(.5*(Math.exp(o)-Math.exp(-o)))];}var x=(n,r,i)=>{let[a,o]=b(n,r,i),[s,l]=b(n+1,r+1,i);return[a,l,s,o];};function E({zoom:n,latLonBounds:r,maxZoom:i=1/0,minZoom:a=0,zoomOffset:o=0,extent:s=g}){let l=Math.ceil(n)+o;if(Number.isFinite(a)&&l<a)return[];Number.isFinite(i)&&l>i&&(l=i);let[u,c,f,d]=r,h=[Math.max(u,s[0]),Math.max(c,s[1]),Math.min(f,s[2]),Math.min(d,s[3])],p=[],[m,v]=_(h[0],h[1],l),[y,b]=_(h[2],h[3],l);for(let n=m;n<=y;n++)for(let r=b;r<=v;r++)p.push({x:n,y:r,z:l});let x=(y+m)/2,E=(v+b)/2,w=(n,r)=>Math.abs(n-x)+Math.abs(r-E);return p.sort((n,r)=>w(n.x,n.y)-w(r.x,r.y)),p;}var w=(n,r,i,a=!0)=>{let o=Math.pow(2,i),s=n;return a&&(s<0?s+=o:s>o-1&&(s%=o)),{warpX:s,warpY:r};},S=(n,r,i)=>new Promise((a,o)=>{var s=n=>{try{u(i.next(n));}catch(n){o(n);}},l=n=>{try{u(i.throw(n));}catch(n){o(n);}},u=n=>n.done?a(n.value):Promise.resolve(n.value).then(s,l);u((i=i.apply(n,r)).next());}),T=class extends f.EventEmitter{constructor(n){super(),this.tileSize=256,this.isVisible=!1,this.isCurrent=!1,this.isVisibleChange=!1,this.loadedLayers=0,this.isLayerLoaded=!1,this.isLoad=!1,this.isChildLoad=!1,this.parent=null,this.children=[],this.data=null,this.properties={},this.loadDataId=0;let{x:r,y:i,z:a,tileSize:o,warp:s=!0}=n;this.x=r,this.y=i,this.z=a,this.warp=s||!0,this.tileSize=o;}get isLoading(){return this.loadStatus===h.Loading;}get isLoaded(){return this.loadStatus===h.Loaded;}get isFailure(){return this.loadStatus===h.Failure;}setTileLayerLoaded(){this.isLayerLoaded=!0;}get isCancelled(){return this.loadStatus===h.Cancelled;}get isDone(){return[h.Loaded,h.Cancelled,h.Failure].includes(this.loadStatus);}get bounds(){return x(this.x,this.y,this.z);}get bboxPolygon(){let[n,r,i,a]=this.bounds;return function(n,r){void 0===r&&(r={});var i=Number(n[0]),a=Number(n[1]),o=Number(n[2]),s=Number(n[3]);if(6===n.length)throw Error("@turf/bbox-polygon does not support BBox with 6 positions");var l=[i,a],c=[i,s],f=[o,s],d=[o,a];return(0,u.polygon)([[l,d,f,c,l]],r.properties,{bbox:n,id:r.id});}(this.bounds,{properties:{key:this.key,id:this.key,bbox:this.bounds,center:[(i-n)/2,(a-r)/2],meta:`
      ${this.key}
      `}});}get key(){return`${this.x}_${this.y}_${this.z}`;}layerLoad(){this.loadedLayers++,this.emit("layerLoaded");}loadData(n){return S(this,arguments,function*({getData:n,onLoad:r,onError:i}){let a;this.loadDataId++;let o=this.loadDataId;this.isLoading&&this.abortLoad(),this.abortController=new AbortController,this.loadStatus=h.Loading;let s=null;try{let{x:r,y:i,z:a,bounds:o,tileSize:l,warp:u}=this,{warpX:c,warpY:f}=w(r,i,a,u),{signal:d}=this.abortController;s=yield n({x:c,y:f,z:a,bounds:o,tileSize:l,signal:d,warp:u},this);}catch(n){a=n;}if(o===this.loadDataId&&(!this.isCancelled||s)){if(a||!s){this.loadStatus=h.Failure,i(a,this);return;}this.loadStatus=h.Loaded,this.data=s,r(this);}});}reloadData(n){this.isLoading&&this.abortLoad(),this.loadData(n);}abortLoad(){this.isLoaded||this.isCancelled||(this.loadStatus=h.Cancelled,this.abortController.abort(),this.xhrCancel&&this.xhrCancel());}},A=i("8f3cfa5a"),C=i("4749c5b7"),O=(n,r)=>{let i=(0,C.bBoxToBounds)(n),a=(0,C.padBounds)(i,r);return[Math.max(a[0][0],-900),Math.max(a[0][1],-85.0511287798065),Math.min(a[1][0],900),Math.min(a[1][1],85.0511287798065)];},M=(n,r)=>{let i=(0,C.bBoxToBounds)(n),a=(0,C.bBoxToBounds)(r);return(0,C.boundsContains)(i,a);},R=Object.defineProperty,P=Object.defineProperties,k=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,D=(n,r,i)=>r in n?R(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i,F=(n,r)=>{for(var i in r||(r={}))L.call(r,i)&&D(n,i,r[i]);if(I)for(var i of I(r))N.call(r,i)&&D(n,i,r[i]);return n;},B=(n,r)=>P(n,k(r)),{throttle:j}=A.lodashUtil,z=((s=z||{}).TilesLoadStart="tiles-load-start",s.TileLoaded="tile-loaded",s.TileError="tile-error",s.TileUnload="tile-unload",s.TileUpdate="tile-update",s.TilesLoadFinished="tiles-load-finished",s),U=class extends f.default{constructor(n){super(),this.currentTiles=[],this.cacheTiles=new Map,this.throttleUpdate=j((n,r)=>{this.update(n,r);},16),this.onTileLoad=n=>{this.emit("tile-loaded",n),this.updateTileVisible(),this.loadFinished();},this.onTileError=(n,r)=>{this.emit("tile-error",{error:n,tile:r}),this.updateTileVisible(),this.loadFinished();},this.onTileUnload=n=>{this.emit("tile-unload",n),this.loadFinished();},this.options={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,extent:g,getTileData:y,warp:!0,updateStrategy:d.Replace},this.updateOptions(n);}get isLoaded(){return this.currentTiles.every(n=>n.isDone);}get tiles(){return Array.from(this.cacheTiles.values()).sort((n,r)=>n.z-r.z);}updateOptions(n){let r=void 0===n.minZoom?this.options.minZoom:Math.ceil(n.minZoom),i=void 0===n.maxZoom?this.options.maxZoom:Math.floor(n.maxZoom);this.options=B(F(F({},this.options),n),{minZoom:r,maxZoom:i});}update(n,r){let i=Math.max(0,Math.ceil(n));if(this.lastViewStates&&this.lastViewStates.zoom===i&&M(this.lastViewStates.latLonBoundsBuffer,r))return;let a=O(r,.2);this.lastViewStates={zoom:i,latLonBounds:r,latLonBoundsBuffer:a},this.currentZoom=i;let o=!1,s=this.getTileIndices(i,a).filter(n=>this.options.warp||n.x>=0&&n.x<Math.pow(2,i));this.emit("tiles-load-start"),this.currentTiles=s.map(({x:n,y:r,z:i})=>{let a=this.getTile(n,r,i);return a?((null==a?void 0:a.isFailure)||(null==a?void 0:a.isCancelled))&&a.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}):(a=this.createTile(n,r,i),o=!0),a;}),o&&this.resizeCacheTiles(),this.updateTileVisible(),this.pruneRequests();}reloadAll(){for(let[n,r]of this.cacheTiles){if(!this.currentTiles.includes(r)){this.cacheTiles.delete(n),this.onTileUnload(r);return;}this.onTileUnload(r),r.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError});}}reloadTileById(n,r,i){let a=this.cacheTiles.get(`${r},${i},${n}`);a&&(this.onTileUnload(a),a.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}));}reloadTileByLnglat(n,r,i){let a=this.getTileByLngLat(n,r,i);a&&this.reloadTileById(a.z,a.x,a.y);}reloadTileByExtent(n,r){this.getTileIndices(r,n).forEach(n=>{this.reloadTileById(n.z,n.x,n.y);});}pruneRequests(){let n=[];for(let r of this.cacheTiles.values())!r.isLoading||r.isCurrent||r.isVisible||n.push(r);for(;n.length>0;)n.shift().abortLoad();}getTileByLngLat(n,r,i){let{zoomOffset:a}=this.options,o=Math.ceil(i)+a,s=_(n,r,o);return this.tiles.filter(n=>n.key===`${s[0]}_${s[1]}_${o}`)[0];}getTileExtent(n,r){return this.getTileIndices(r,n);}getTileByZXY(n,r,i){return this.tiles.filter(a=>a.key===`${r}_${i}_${n}`)[0];}clear(){for(let n of this.cacheTiles.values())n.isLoading?n.abortLoad():this.onTileUnload(n);this.lastViewStates=void 0,this.cacheTiles.clear(),this.currentTiles=[];}destroy(){this.clear(),this.removeAllListeners();}updateTileVisible(){let n=this.options.updateStrategy,r=new Map;for(let n of this.cacheTiles.values())r.set(n.key,n.isVisible),n.isCurrent=!1,n.isVisible=!1;for(let n of this.currentTiles)n.isCurrent=!0,n.isVisible=!0;let i=Array.from(this.cacheTiles.values());"function"==typeof n?n(i):v[n](i);let a=!1;Array.from(this.cacheTiles.values()).forEach(n=>{n.isVisible!==r.get(n.key)?(n.isVisibleChange=!0,a=!0):n.isVisibleChange=!1;}),a&&this.emit("tile-update");}getTileIndices(n,r){let{tileSize:i,extent:a,zoomOffset:o}=this.options;return E({maxZoom:Math.floor(this.options.maxZoom),minZoom:Math.ceil(this.options.minZoom),zoomOffset:o,tileSize:i,zoom:n,latLonBounds:r,extent:a});}getTileId(n,r,i){return`${n},${r},${i}`;}loadFinished(){let n=!this.currentTiles.some(n=>!n.isDone);return n&&this.emit("tiles-load-finished"),n;}getTile(n,r,i){let a=this.getTileId(n,r,i);return this.cacheTiles.get(a);}createTile(n,r,i){let a=this.getTileId(n,r,i),o=new T({x:n,y:r,z:i,tileSize:this.options.tileSize,warp:this.options.warp});return this.cacheTiles.set(a,o),o.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),o;}resizeCacheTiles(){let n=5*this.currentTiles.length;if(this.cacheTiles.size>n){for(let[r,i]of this.cacheTiles)if(i.isVisible||this.currentTiles.includes(i)||(this.cacheTiles.delete(r),this.onTileUnload(i)),this.cacheTiles.size<=n)break;}this.rebuildTileTree();}rebuildTileTree(){for(let n of this.cacheTiles.values())n.parent=null,n.children.length=0;for(let n of this.cacheTiles.values()){let r=this.getNearestAncestor(n.x,n.y,n.z);n.parent=r,(null==r?void 0:r.children)&&r.children.push(n);}}getNearestAncestor(n,r,i){for(;i>this.options.minZoom;){n=Math.floor(n/2),r=Math.floor(r/2),i-=1;let a=this.getTile(n,r,i);if(a)return a;}return null;}},V=i("ef12aaa0");function G(n){let r=[],i=/\{([a-z])-([a-z])\}/.exec(n);if(i){let a;let o=i[1].charCodeAt(0),s=i[2].charCodeAt(0);for(a=o;a<=s;++a)r.push(n.replace(i[0],String.fromCharCode(a)));return r;}if(i=/\{(\d+)-(\d+)\}/.exec(n)){let a=parseInt(i[2],10);for(let o=parseInt(i[1],10);o<=a;o++)r.push(n.replace(i[0],o.toString()));return r;}return r.push(n),r;}function H(n,r){if(!n||!n.length)throw Error("url is not allowed to be empty");let{x:i,y:a,z:o}=r,s=G(n),l=Math.abs(i+a)%s.length;return((0,V.getProtocolAction)(s[l])?`${s[l]}/{z}/{x}/{y}`:s[l]).replace(/\{x\}/g,i.toString()).replace(/\{y\}/g,a.toString()).replace(/\{z\}/g,o.toString()).replace(/\{bbox\}/g,x(i,a,o).join(",")).replace(/\{-y\}/g,(Math.pow(2,o)-a-1).toString());}function W(n,r){let{x:i,y:a,z:o,layer:s,version:l="1.0.0",style:u="default",format:c,service:f="WMTS",tileMatrixset:d}=r,h=G(n),p=Math.abs(i+a)%h.length;return`${h[p]}&SERVICE=${f}&REQUEST=GetTile&VERSION=${l}&LAYER=${s}&STYLE=${u}&TILEMATRIXSET=${d}&FORMAT=${c}&TILECOL=${i}&TILEROW=${a}&TILEMATRIX=${o}`;}},59672304:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{Quantile:function(){return s;}});var a=i("cbc6046a"),o=i("d740e8f4");class s extends a.Threshold{getDefaultOptions(){return{domain:[],range:[],tickCount:5,unknown:void 0,tickMethod:o.wilkinsonExtended};}constructor(n){super(n);}rescale(){let{domain:n,range:r}=this.options;this.n=r.length-1,this.thresholds=function(n,r,i=!1){i||n.sort((n,r)=>n-r);let a=[];for(let i=1;i<r;i+=1)a.push(function(n,r){let i=n.length;if(!i)return;if(i<2)return n[i-1];let a=(i-1)*r,o=Math.floor(a),s=n[o];return s+(n[o+1]-s)*(a-o);}(n,i/r));return a;}(n,this.n+1,!1);}invert(n){let[r,i]=super.invert(n),{domain:a}=this.options,o=a[0],s=a[a.length-1];return void 0===r&&void 0===i?[r,i]:[r||o,i||s];}getThresholds(){return this.thresholds;}clone(){return new s(this.options);}getTicks(){let{tickCount:n,domain:r,tickMethod:i}=this.options,a=r.length-1;return i(r[0],r[a],n);}}},"597fad75":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{Area:function(){return o;},Column:function(){return s;},Gauge:function(){return f;},Line:function(){return l;},Liquid:function(){return d;},Pie:function(){return u;},Radar:function(){return c;},WordCloud:function(){return h;}}),i("7d9c7484");var a=i("66cc087b"),o=(0,a.makeChartComp)("Area"),s=(0,a.makeChartComp)("Column"),l=(0,a.makeChartComp)("Line"),u=(0,a.makeChartComp)("Pie"),c=(0,a.makeChartComp)("Radar");i("b2910433");var f=(0,a.makeChartComp)("Gauge"),d=(0,a.makeChartComp)("Liquid"),h=(0,a.makeChartComp)("WordCloud");},"5ab94ba3":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return o;}});var a=/^(?:0|[1-9]\d*)$/,o=function(n,r){var i=typeof n;return!!(r=null==r?9007199254740991:r)&&("number"==i||"symbol"!=i&&a.test(n))&&n>-1&&n%1==0&&n<r;};},"5b10c23d":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return v;}});var a=i("777fffbe"),o=i("0e2cd74b"),s=a._(o),l=i("82bfc804"),u=a._(l),c=i("d0d233d5"),f=a._(c),d=i("5ab94ba3"),h=a._(d),p=i("8f2efba6"),m=a._(p),g=Object.prototype.hasOwnProperty;function v(n,r){var i=(0,u.default)(n),a=!i&&(0,s.default)(n),o=!i&&!a&&(0,f.default)(n),l=!i&&!a&&!o&&(0,m.default)(n),c=i||a||o||l,d=c?function(n,r){for(var i=-1,a=Array(n);++i<n;)a[i]=r(i);return a;}(n.length,String):[],p=d.length;for(var v in n)(r||g.call(n,v))&&!(c&&("length"==v||o&&("offset"==v||"parent"==v)||l&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||(0,h.default)(v,p)))&&d.push(v);return d;}},"5b7abe3d":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{AREA_CLASS_NAME:function(){return d;},COMPONENT_CLASS_NAME:function(){return c;},ELEMENT_CLASS_NAME:function(){return s;},LABEL_CLASS_NAME:function(){return f;},LABEL_LAYER_CLASS_NAME:function(){return o;},MAIN_LAYER_CLASS_NAME:function(){return a;},PLOT_CLASS_NAME:function(){return u;},VIEW_CLASS_NAME:function(){return l;}});let a="main-layer",o="label-layer",s="element",l="view",u="plot",c="component",f="label",d="area";},"5bd7e4ea":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{map:function(){return o;},slice:function(){return s;}});var a=Array.prototype,o=a.map,s=a.slice;},"5ca59c93":function(n,r,i){"use strict";var a=i("f5a08f97").default,o=i("89a0cb41").default;Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=o(i("25aa6dd5")),l=a(i("609f48be")),u=o(i("c3f5a38b")),c=o(i("74336ea5")),f=l.forwardRef(function(n,r){return l.createElement(c.default,(0,s.default)({},n,{ref:r,icon:u.default}));});r.default=f;},"5ca9cae9":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return l;}});var a=i("777fffbe"),o=a._(i("1daaa764")),s=a._(i("428badac")),l=function(n,r){if(n){if((0,o.default)(n))for(var i=0,a=n.length;i<a&&!1!==r(n[i],i);i++);else if((0,s.default)(n)){for(var l in n)if(n.hasOwnProperty(l)&&!1===r(n[l],l))break;}}};},"5cbc1fd1":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{DrawerForm:function(){return z;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("a854094b"),l=a._(s),u=i("23934e00"),c=a._(u),f=i("9b84be4b"),d=a._(f),h=i("e4870cf0"),p=a._(h),m=i("ee64167d"),g=a._(m),v=i("613f75ca"),y=a._(v),_=i("e2a12cbd"),b=i("87ed5a26"),x=i("4175825c"),E=i("865cc100"),w=i("a5a99096"),S=a._(w),T=i("04f9d9ff"),A=a._(T),C=i("064ecd09"),O=a._(C),M=i("ce03fd86"),R=a._(M),P=i("dd8ccb36"),k=i("a275200c"),I=i("609f48be"),L=o._(I),N=i("792e90bc"),D=i("cd1e34ba"),F=i("a3273044"),B=i("dac8af92"),j=["children","trigger","onVisibleChange","drawerProps","onFinish","submitTimeout","title","width","resize","onOpenChange","visible","open"];function z(n){var r,i,a,o,s=n.children,u=n.trigger,f=n.onVisibleChange,h=n.drawerProps,m=n.onFinish,v=n.submitTimeout,w=n.title,T=n.width,C=n.resize,M=n.onOpenChange,I=n.visible,z=n.open,U=(0,y.default)(n,j);(0,k.noteOnce)(!U.footer||!(null!=h&&h.footer),"DrawerForm \u662F\u4E00\u4E2A ProForm \u7684\u7279\u6B8A\u5E03\u5C40\uFF0C\u5982\u679C\u60F3\u81EA\u5B9A\u4E49\u6309\u94AE\uFF0C\u8BF7\u4F7F\u7528 submit.render \u81EA\u5B9A\u4E49\u3002");var V=L.default.useMemo(function(){var n,r,i,a={onResize:function(){},maxWidth:(0,_.isBrowser)()?.8*window.innerWidth:void 0,minWidth:300};return"boolean"==typeof C?C?a:{}:(0,b.omitUndefined)({onResize:null!==(n=null==C?void 0:C.onResize)&&void 0!==n?n:a.onResize,maxWidth:null!==(r=null==C?void 0:C.maxWidth)&&void 0!==r?r:a.maxWidth,minWidth:null!==(i=null==C?void 0:C.minWidth)&&void 0!==i?i:a.minWidth});},[C]),G=(0,L.useContext)(S.default.ConfigContext),H=G.getPrefixCls("pro-form-drawer"),W=(0,F.useStyle)("DrawerForm",function(n){var r;return[(r=(0,p.default)((0,p.default)({},n),{},{componentCls:".".concat(H)}),(0,l.default)({},r.componentCls,{"&-sidebar-dragger":{width:"5px",cursor:"ew-resize",padding:"4px 0 0",borderTop:"1px solid transparent",position:"absolute",top:0,left:0,bottom:0,zIndex:100,backgroundColor:"transparent","&-min-disabled":{cursor:"w-resize"},"&-max-disabled":{cursor:"e-resize"}}}))];}),X=W.wrapSSR,q=W.hashId,$=function(n){return"".concat(H,"-").concat(n," ").concat(q);},Y=(0,L.useState)([]),Z=(0,g.default)(Y,2)[1],K=(0,L.useState)(!1),Q=(0,g.default)(K,2),J=Q[0],ee=Q[1],et=(0,L.useState)(!1),en=(0,g.default)(et,2),er=en[0],ei=en[1],ea=(0,L.useState)(T||(C?null==V?void 0:V.minWidth:800)),eo=(0,g.default)(ea,2),es=eo[0],el=eo[1],eu=(0,R.default)(!!I,{value:z||I,onChange:M||f}),ec=(0,g.default)(eu,2),ef=ec[0],ed=ec[1],eh=(0,L.useRef)(null),ep=(0,L.useCallback)(function(n){null===eh.current&&n&&Z([]),eh.current=n;},[]),em=(0,L.useRef)(),eg=(0,L.useCallback)(function(){var n,r,i,a=null!==(n=null!==(r=null===(i=U.formRef)||void 0===i?void 0:i.current)&&void 0!==r?r:U.form)&&void 0!==n?n:em.current;a&&null!=h&&h.destroyOnClose&&a.resetFields();},[null==h?void 0:h.destroyOnClose,U.form,U.formRef]);(0,L.useEffect)(function(){ef&&(z||I)&&(null==M||M(!0),null==f||f(!0)),er&&el(null==V?void 0:V.minWidth);},[I,ef,er]),(0,L.useImperativeHandle)(U.formRef,function(){return em.current;},[em.current]);var ev=(0,L.useMemo)(function(){var n;return u?L.default.cloneElement(u,(0,p.default)((0,p.default)({key:"trigger"},u.props),{},{onClick:(n=(0,d.default)((0,c.default)().mark(function n(r){var i,a;return(0,c.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:ed(!ef),ei(!Object.keys(V)),null===(i=u.props)||void 0===i||null===(a=i.onClick)||void 0===a||a.call(i,r);case 3:case"end":return n.stop();}},n);})),function(r){return n.apply(this,arguments);})})):null;},[ed,u,ef,ei,er]),ey=(0,L.useMemo)(function(){var n,r,i,a,o;return!1!==U.submitter&&(0,P.merge)({searchConfig:{submitText:null!==(n=null===(r=G.locale)||void 0===r||null===(r=r.Modal)||void 0===r?void 0:r.okText)&&void 0!==n?n:"\u786E\u8BA4",resetText:null!==(i=null===(a=G.locale)||void 0===a||null===(a=a.Modal)||void 0===a?void 0:a.cancelText)&&void 0!==i?i:"\u53D6\u6D88"},resetButtonProps:{preventDefault:!0,disabled:v?J:void 0,onClick:function(n){var r;ed(!1),null==h||null===(r=h.onClose)||void 0===r||r.call(h,n);}}},null!==(o=U.submitter)&&void 0!==o?o:{});},[U.submitter,null===(a=G.locale)||void 0===a||null===(a=a.Modal)||void 0===a?void 0:a.okText,null===(o=G.locale)||void 0===o||null===(o=o.Modal)||void 0===o?void 0:o.cancelText,v,J,ed,h]),e_=(0,L.useCallback)(function(n,r){return(0,B.jsxs)(B.Fragment,{children:[n,eh.current&&r?(0,B.jsx)(L.default.Fragment,{children:(0,N.createPortal)(r,eh.current)},"submitter"):r]});},[]),eb=(0,E.useRefFunction)((r=(0,d.default)((0,c.default)().mark(function n(r){var i,a,o;return(0,c.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=null==m?void 0:m(r),v&&i instanceof Promise&&(ee(!0),a=setTimeout(function(){return ee(!1);},v),i.finally(function(){clearTimeout(a),ee(!1);})),n.next=4,i;case 4:return(o=n.sent)&&ed(!1),n.abrupt("return",o);case 7:case"end":return n.stop();}},n);})),function(n){return r.apply(this,arguments);})),ex=(0,x.openVisibleCompatible)(ef,f),eE=(0,L.useCallback)(function(n){var r,i,a=(document.body.offsetWidth||1e3)-(n.clientX-document.body.offsetLeft),o=null!==(r=null==V?void 0:V.minWidth)&&void 0!==r?r:T||800,s=null!==(i=null==V?void 0:V.maxWidth)&&void 0!==i?i:.8*window.innerWidth;if(a<o){el(o);return;}if(a>s){el(s);return;}el(a);},[null==V?void 0:V.maxWidth,null==V?void 0:V.minWidth,T]),ew=(0,L.useCallback)(function(){document.removeEventListener("mousemove",eE),document.removeEventListener("mouseup",ew);},[eE]);return X((0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)(A.default,(0,p.default)((0,p.default)((0,p.default)({title:w,width:es},h),ex),{},{afterOpenChange:function(n){var r;n||eg(),null==h||null===(r=h.afterOpenChange)||void 0===r||r.call(h,n);},onClose:function(n){var r;v&&J||(ed(!1),null==h||null===(r=h.onClose)||void 0===r||r.call(h,n));},footer:!1!==U.submitter&&(0,B.jsx)("div",{ref:ep,style:{display:"flex",justifyContent:"flex-end"}}),children:[C?(0,B.jsx)("div",{className:(0,O.default)($("sidebar-dragger"),q,(0,l.default)((0,l.default)({},$("sidebar-dragger-min-disabled"),es===(null==V?void 0:V.minWidth)),$("sidebar-dragger-max-disabled"),es===(null==V?void 0:V.maxWidth))),onMouseDown:function(n){var r;null==V||null===(r=V.onResize)||void 0===r||r.call(V),n.stopPropagation(),n.preventDefault(),document.addEventListener("mousemove",eE),document.addEventListener("mouseup",ew),ei(!0);}}):null,(0,B.jsx)(B.Fragment,{children:(0,B.jsx)(D.BaseForm,(0,p.default)((0,p.default)({formComponentType:"DrawerForm",layout:"vertical"},U),{},{formRef:em,onInit:function(n,r){var i;U.formRef&&(U.formRef.current=r),null==U||null===(i=U.onInit)||void 0===i||i.call(U,n,r),em.current=r;},submitter:ey,onFinish:(i=(0,d.default)((0,c.default)().mark(function n(r){var i;return(0,c.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,eb(r);case 2:return i=n.sent,n.abrupt("return",i);case 4:case"end":return n.stop();}},n);})),function(n){return i.apply(this,arguments);}),contentRender:e_,children:s}))})]})),ev]}));}},"5dd400a3":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{getDistanceScales:function(){return b;},getProjectionMatrix:function(){return w;},getProjectionParameters:function(){return E;},getViewMatrix:function(){return x;},lngLatToWorld:function(){return y;},pixelsToWorld:function(){return T;},worldToLngLat:function(){return _;},worldToPixels:function(){return S;},zoomToScale:function(){return v;}});var a=i("777fffbe"),o=i("852bbaa9"),s=a._(i("ee64167d")),l=i("78ba7479"),u=o._(i("da755037")),c=o._(i("d6f42022")),f=o._(i("377bcc16")),d=a._(i("b4b08cd7")),h=Math.PI,p=h/4,m=h/180,g=180/h;function v(n){return Math.pow(2,n);}function y(n,r){var i=(0,s.default)(n,2),a=i[0],o=i[1];return(0,d.default)(Number.isFinite(a)&&Number.isFinite(r)),(0,d.default)(Number.isFinite(o)&&o>=-90&&o<=90,"invalid latitude"),[(r*=512)*(a*m+h)/(2*h),r*(h-Math.log(Math.tan(p+o*m*.5)))/(2*h)];}function _(n,r){var i=(0,s.default)(n,2);return[(i[0]/(r*=512)*(2*h)-h)*g,2*(Math.atan(Math.exp(h-i[1]/r*(2*h)))-p)*g];}function b(n){var r=n.latitude,i=n.longitude,a=n.zoom,o=n.scale,s=n.highPrecision;o=void 0!==o?o:v(a),(0,d.default)(Number.isFinite(r)&&Number.isFinite(i)&&Number.isFinite(o));var l={},u=512*o,c=Math.cos(r*m),f=u/360,h=f/c,p=u/4003e4/c;if(l.pixelsPerMeter=[p,-p,p],l.metersPerPixel=[1/p,-1/p,1/p],l.pixelsPerDegree=[f,-h,p],l.degreesPerPixel=[1/f,-1/h,1/p],void 0!==s&&s){var g=m*Math.tan(r*m)/c,y=f*g/2,_=u/4003e4*g,b=_/h*p;l.pixelsPerDegree2=[0,-y,_],l.pixelsPerMeter2=[b,0,b];}return l;}function x(n){var r=n.height,i=n.pitch,a=n.bearing,o=n.altitude,s=n.center,c=void 0===s?null:s,d=n.flipY,h=(0,l.createMat4)();return u.translate(h,h,[0,0,-o]),u.scale(h,h,[1,1,1/r]),u.rotateX(h,h,-i*m),u.rotateZ(h,h,a*m),void 0!==d&&d&&u.scale(h,h,[1,-1,1]),c&&u.translate(h,h,f.negate([],c)),h;}function E(n){var r=n.width,i=n.height,a=n.altitude,o=void 0===a?1.5:a,s=n.pitch,l=n.nearZMultiplier,u=n.farZMultiplier,c=(void 0===s?0:s)*m,f=Math.atan(.5/o),d=Math.sin(f)*o/Math.sin(Math.PI/2-c-f),h=Math.cos(Math.PI/2-c)*d+o;return{fov:2*Math.atan(i/2/o),aspect:r/i,focalDistance:o,near:void 0===l?1:l,far:h*(void 0===u?1:u)};}function w(n){var r=n.width,i=n.height,a=n.pitch,o=E({width:r,height:i,altitude:n.altitude,pitch:a,nearZMultiplier:n.nearZMultiplier,farZMultiplier:n.farZMultiplier}),s=o.fov,l=o.aspect,c=o.near,f=o.far;return u.perspective([],s,l,c,f);}function S(n,r){var i=(0,s.default)(n,3),a=i[0],o=i[1],u=i[2],c=void 0===u?0:u;return(0,d.default)(Number.isFinite(a)&&Number.isFinite(o)&&Number.isFinite(c)),(0,l.transformVector)(r,[a,o,c,1]);}function T(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=(0,s.default)(n,3),o=a[0],u=a[1],f=a[2];if((0,d.default)(Number.isFinite(o)&&Number.isFinite(u),"invalid pixel coordinate"),Number.isFinite(f))return(0,l.transformVector)(r,[o,u,f,1]);var h=(0,l.transformVector)(r,[o,u,0,1]),p=(0,l.transformVector)(r,[o,u,1,1]),m=h[2],g=p[2];return c.lerp([],h,p,m===g?0:((i||0)-m)/(g-m));}},"5e195043":function(n,r,i){i.d(r,"__esModule",{value:!0});var a,o,s=i("777fffbe"),l=i("852bbaa9"),u=i("d1751d7c")._(i("d558e98a"),r),c=i("8bbe4f57"),f=s._(c),d=i("85158032"),h=s._(d),p=i("60824e0d"),m=s._(p),g=i("fbe36db6"),v=s._(g),y=i("d0572d97"),_=s._(y),b=i("1f338b89"),x=s._(b),E=i("58eaf31b"),w=l._(E),S=i("da755037"),T=l._(S),A=i("377bcc16"),C=l._(A),O=function(n){function r(){var n;(0,f.default)(this,r);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=(0,m.default)(this,r,[].concat(a))).landmarks=[],n;}return(0,v.default)(r,n),(0,h.default)(r,[{key:"rotate",value:function(n,r,i){if(this.relElevation=(0,u.getAngle)(r),this.relAzimuth=(0,u.getAngle)(n),this.relRoll=(0,u.getAngle)(i),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===u.CameraType.EXPLORING){var a=w.setAxisAngle(w.create(),[1,0,0],(0,u.deg2rad)((this.rotateWorld?1:-1)*this.relElevation)),o=w.setAxisAngle(w.create(),[0,1,0],(0,u.deg2rad)((this.rotateWorld?1:-1)*this.relAzimuth)),s=w.setAxisAngle(w.create(),[0,0,1],(0,u.deg2rad)(this.relRoll)),l=w.multiply(w.create(),o,a);l=w.multiply(w.create(),l,s);var c=T.fromQuat(T.create(),l);T.translate(this.matrix,this.matrix,[0,0,-this.distance]),T.multiply(this.matrix,this.matrix,c),T.translate(this.matrix,this.matrix,[0,0,this.distance]);}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix();}return this._getAxes(),this.type===u.CameraType.ORBITING||this.type===u.CameraType.EXPLORING?this._getPosition():this.type===u.CameraType.TRACKING&&this._getFocalPoint(),this._update(),this;}},{key:"pan",value:function(n,r){var i=(0,u.createVec3)(n,r,0),a=C.clone(this.position);return C.add(a,a,C.scale(C.create(),this.right,i[0])),C.add(a,a,C.scale(C.create(),this.up,i[1])),this._setPosition(a),this.triggerUpdate(),this;}},{key:"dolly",value:function(n){var r=this.forward,i=C.clone(this.position),a=n*this.dollyingStep;return a=Math.max(Math.min(this.distance+n*this.dollyingStep,this.maxDistance),this.minDistance)-this.distance,i[0]+=a*r[0],i[1]+=a*r[1],i[2]+=a*r[2],this._setPosition(i),this.type===u.CameraType.ORBITING||this.type===u.CameraType.EXPLORING?this._getDistance():this.type===u.CameraType.TRACKING&&C.add(this.focalPoint,i,this.distanceVector),this.triggerUpdate(),this;}},{key:"cancelLandmarkAnimation",value:function(){void 0!==this.landmarkAnimationID&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID);}},{key:"createLandmark",value:function(n){var r,i,a,o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=s.position,c=void 0===l?this.position:l,f=s.focalPoint,d=void 0===f?this.focalPoint:f,h=s.roll,p=s.zoom,m=new u.runtime.CameraContribution;m.setType(this.type,void 0),m.setPosition(c[0],null!==(r=c[1])&&void 0!==r?r:this.position[1],null!==(i=c[2])&&void 0!==i?i:this.position[2]),m.setFocalPoint(d[0],null!==(a=d[1])&&void 0!==a?a:this.focalPoint[1],null!==(o=d[2])&&void 0!==o?o:this.focalPoint[2]),m.setRoll(null!=h?h:this.roll),m.setZoom(null!=p?p:this.zoom);var g={name:n,matrix:T.clone(m.getWorldTransform()),right:C.clone(m.right),up:C.clone(m.up),forward:C.clone(m.forward),position:C.clone(m.getPosition()),focalPoint:C.clone(m.getFocalPoint()),distanceVector:C.clone(m.getDistanceVector()),distance:m.getDistance(),dollyingStep:m.getDollyingStep(),azimuth:m.getAzimuth(),elevation:m.getElevation(),roll:m.getRoll(),relAzimuth:m.relAzimuth,relElevation:m.relElevation,relRoll:m.relRoll,zoom:m.getZoom()};return this.landmarks.push(g),g;}},{key:"gotoLandmark",value:function(n){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(0,_.default)(n)?this.landmarks.find(function(r){return r.name===n;}):n;if(a){var o,s=(0,x.default)(i)?{duration:i}:i,l=s.easing,c=s.duration,f=void 0===c?100:c,d=s.easingFunction,h=s.onfinish,p=void 0===h?void 0:h,m=s.onframe,g=void 0===m?void 0:m;this.cancelLandmarkAnimation();var v=a.position,y=a.focalPoint,b=a.zoom,E=a.roll,w=(void 0===d?void 0:d)||u.runtime.EasingFunction(void 0===l?"linear":l),S=function(){r.setFocalPoint(y),r.setPosition(v),r.setRoll(E),r.setZoom(b),r.computeMatrix(),r.triggerUpdate(),null==p||p();};if(0===f)return S();var T=function(n){void 0===o&&(o=n);var i=n-o;if(i>=f){S();return;}var a=w(i/f),s=C.create(),l=C.create(),u=1,c=0;if(C.lerp(s,r.focalPoint,y,a),C.lerp(l,r.position,v,a),c=r.roll*(1-a)+E*a,u=r.zoom*(1-a)+b*a,r.setFocalPoint(s),r.setPosition(l),r.setRoll(c),r.setZoom(u),C.dist(s,y)+C.dist(l,v)<=.01&&void 0===b&&void 0===E)return S();r.computeMatrix(),r.triggerUpdate(),i<f&&(null==g||g(a),r.landmarkAnimationID=r.canvas.requestAnimationFrame(T));};this.canvas.requestAnimationFrame(T);}}}]);}(u.Camera);u.runtime.CameraContribution=O;var M=function(){function n(r,i){(0,f.default)(this,n),this.addedNodes=[],this.attributeName=null,this.attributeNamespace=null,this.nextSibling=null,this.oldValue=null,this.previousSibling=null,this.removedNodes=[],this.type=r,this.target=i;}return(0,h.default)(n,null,[{key:"copy",value:function(r){var i=new n(r.type,r.target);return i.addedNodes=r.addedNodes.slice(),i.removedNodes=r.removedNodes.slice(),i.previousSibling=r.previousSibling,i.nextSibling=r.nextSibling,i.attributeName=r.attributeName,i.attributeNamespace=r.attributeNamespace,i.oldValue=r.oldValue,i;}}]);}(),R=new WeakMap;function P(n,r){for(var i=n;i;i=i.parentNode){var a=R.get(i);if(a)for(var o=0;o<a.length;o++){var s=a[o],l=s.options;if(i===n||l.subtree){var u=r(l);u&&s.enqueue(u);}}}}(0,h.default)(function n(r,i,a){(0,f.default)(this,n),this.transientObservedNodes=[],this.observer=r,this.target=i,this.options=a;},[{key:"enqueue",value:function(n){var r,i=this.observer.records,s=i.length;if(i.length>0){var l,c=(l=i[s-1],l===n?l:o&&(l===o||l===a)?o:null);if(c){i[s-1]=c;return;}}else r=this.observer,I.push(r),k||(k=!0,void 0!==u.runtime.globalThis?u.runtime.globalThis.setTimeout(L):L());i[s]=n;}},{key:"addListeners",value:function(){this.addListeners_(this.target);}},{key:"addListeners_",value:function(n){var r=this.options;r.attributes&&n.addEventListener(u.ElementEvent.ATTR_MODIFIED,this,!0),r.childList&&n.addEventListener(u.ElementEvent.INSERTED,this,!0),(r.childList||r.subtree)&&n.addEventListener(u.ElementEvent.REMOVED,this,!0);}},{key:"removeListeners",value:function(){this.removeListeners_(this.target);}},{key:"removeListeners_",value:function(n){var r=this.options;r.attributes&&n.removeEventListener(u.ElementEvent.ATTR_MODIFIED,this,!0),r.childList&&n.removeEventListener(u.ElementEvent.INSERTED,this,!0),(r.childList||r.subtree)&&n.removeEventListener(u.ElementEvent.REMOVED,this,!0);}},{key:"removeTransientObservers",value:function(){var n=this.transientObservedNodes;this.transientObservedNodes=[],n.forEach(function(n){this.removeListeners_(n);for(var r=R.get(n),i=0;i<r.length;i++)if(r[i]===this){r.splice(i,1);break;}},this);}},{key:"handleEvent",value:function(n){switch(n.stopImmediatePropagation(),n.type){case u.ElementEvent.ATTR_MODIFIED:var r=n.attrName,i=n.relatedNode.namespaceURI;(l=a=new M("attributes",c=n.target)).attributeName=r,l.attributeNamespace=i;var s=n.attrChange===u.MutationEvent.ADDITION?null:n.prevValue;P(c,function(n){if(n.attributes&&(!n.attributeFilter||!n.attributeFilter.length||-1!==n.attributeFilter.indexOf(r)||-1!==n.attributeFilter.indexOf(i)))return n.attributeOldValue?(o||((o=M.copy(a)).oldValue=s),o):l;});break;case u.ElementEvent.REMOVED:case u.ElementEvent.INSERTED:c=n.relatedNode;var l,c,f,d,h=n.target;n.type===u.ElementEvent.INSERTED?(f=[h],d=[]):(f=[],d=[h]);var p=h.previousSibling,m=h.nextSibling;(l=a=new M("childList",c)).addedNodes=f,l.removedNodes=d,l.previousSibling=p,l.nextSibling=m,P(c,function(n){if(n.childList)return l;});}a=o=void 0;}}]);var k=!1,I=[];function L(){k=!1;var n=I;I=[],n.sort(function(n,r){return n.uid-r.uid;});var r=!1;n.forEach(function(n){var i=n.takeRecords();(function(n){n.nodes.forEach(function(r){var i=R.get(r);i&&i.forEach(function(r){r.observer===n&&r.removeTransientObservers();});});})(n),i.length&&(n.callback(i,n),r=!0);}),r&&L();}var N=i("f1020fa4"),D=s._(N),F=i("ee64167d"),B=s._(F),j=i("3715e357"),z=s._(j),U=i("83684c30"),V=s._(U),G=function(n){function r(n,i,a,o){var s;return(0,f.default)(this,r),(s=(0,m.default)(this,r,[n])).currentTime=a,s.timelineTime=o,s.target=i,s.type="finish",s.bubbles=!1,s.currentTarget=i,s.defaultPrevented=!1,s.eventPhase=s.AT_TARGET,s.timeStamp=Date.now(),s.currentTime=a,s.timelineTime=o,s;}return(0,v.default)(r,n),(0,h.default)(r);}(u.FederatedEvent),H=0,W=(0,h.default)(function n(r,i){var a;(0,f.default)(this,n),this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=r,r.animation=this,this.timeline=i,this.id="".concat(H++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number(null===(a=this.effect)||void 0===a?void 0:a.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises();},[{key:"pending",get:function(){return null===this._startTime&&!this._paused&&0!==this.playbackRate||this.currentTimePending;}},{key:"playState",get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running";}},{key:"ready",get:function(){var n=this;return this.readyPromise||(-1===this.timeline.animationsWithPromises.indexOf(this)&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise(function(r,i){n.resolveReadyPromise=function(){r(n);},n.rejectReadyPromise=function(){i(Error());};}),this.pending||this.resolveReadyPromise()),this.readyPromise;}},{key:"finished",get:function(){var n=this;return this.finishedPromise||(-1===this.timeline.animationsWithPromises.indexOf(this)&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise(function(r,i){n.resolveFinishedPromise=function(){r(n);},n.rejectFinishedPromise=function(){i(Error());};}),"finished"===this.playState&&this.resolveFinishedPromise()),this.finishedPromise;}},{key:"currentTime",get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime;},set:function(n){if(!isNaN(n=Number(n))){if(this.timeline.restart(),!this._paused&&null!==this._startTime){var r;this._startTime=Number(null===(r=this.timeline)||void 0===r?void 0:r.currentTime)-n/this.playbackRate;}this.currentTimePending=!1,this._currentTime!==n&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(n,!0),this.timeline.applyDirtiedAnimation(this));}}},{key:"startTime",get:function(){return this._startTime;},set:function(n){null!==n&&(this.updatePromises(),!isNaN(n=Number(n))&&(this._paused||this._idle||(this._startTime=n,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises())));}},{key:"playbackRate",get:function(){return this._playbackRate;},set:function(n){if(n!==this._playbackRate){this.updatePromises();var r=this.currentTime;this._playbackRate=n,this.startTime=null,"paused"!==this.playState&&"idle"!==this.playState&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),null!==r&&(this.currentTime=r),this.updatePromises();}}},{key:"_isFinished",get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&0>=Number(this._currentTime));}},{key:"totalDuration",get:function(){return this._totalDuration;}},{key:"_needsTick",get:function(){return this.pending||"running"===this.playState||!this._finishedFlag;}},{key:"updatePromises",value:function(){if(null!==(n=this.effect.target)&&void 0!==n&&n.destroyed)return this.readyPromise=void 0,this.finishedPromise=void 0,!1;var n,r=this.oldPlayState,i=this.pending?"pending":this.playState;return this.readyPromise&&i!==r&&("idle"===i?(this.rejectReadyPromise(),this.readyPromise=void 0):"pending"===r?this.resolveReadyPromise():"pending"===i&&(this.readyPromise=void 0)),this.finishedPromise&&i!==r&&("idle"===i?(this.rejectFinishedPromise(),this.finishedPromise=void 0):"finished"===i?this.resolveFinishedPromise():"finished"===r&&(this.finishedPromise=void 0)),this.oldPlayState=i,this.readyPromise||this.finishedPromise;}},{key:"play",value:function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),-1===this.timeline.animations.indexOf(this)&&this.timeline.animations.push(this),this.updatePromises();}},{key:"pause",value:function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),this._isFinished||this._paused||this._idle?this._idle&&(this.rewind(),this._idle=!1):this.currentTimePending=!0,this._startTime=null,this._paused=!0,this.updatePromises();}},{key:"finish",value:function(){this.updatePromises(),this._idle||(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises());}},{key:"cancel",value:function(){var n=this;if(this.updatePromises(),this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var r=new G(null,this,this.currentTime,null);setTimeout(function(){n.oncancel(r);});}}},{key:"reverse",value:function(){this.updatePromises();var n=this.currentTime;this.playbackRate*=-1,this.play(),null!==n&&(this.currentTime=n),this.updatePromises();}},{key:"updatePlaybackRate",value:function(n){this.playbackRate=n;}},{key:"targetAnimations",value:function(){var n;return(null===(n=this.effect)||void 0===n?void 0:n.target).getAnimations();}},{key:"markTarget",value:function(){var n=this.targetAnimations();-1===n.indexOf(this)&&n.push(this);}},{key:"unmarkTarget",value:function(){var n=this.targetAnimations(),r=n.indexOf(this);-1!==r&&n.splice(r,1);}},{key:"tick",value:function(n,r){this._idle||this._paused||(null===this._startTime?r&&(this.startTime=n-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((n-this._startTime)*this.playbackRate)),r&&(this.currentTimePending=!1,this.fireEvents(n));}},{key:"rewind",value:function(){if(this.playbackRate>=0)this.currentTime=0;else if(this._totalDuration<1/0)this.currentTime=this._totalDuration;else throw Error("Unable to rewind negative playback rate animation with infinite duration");}},{key:"persist",value:function(){throw Error(u.ERROR_MSG_METHOD_NOT_IMPLEMENTED);}},{key:"addEventListener",value:function(n,r,i){throw Error(u.ERROR_MSG_METHOD_NOT_IMPLEMENTED);}},{key:"removeEventListener",value:function(n,r,i){throw Error(u.ERROR_MSG_METHOD_NOT_IMPLEMENTED);}},{key:"dispatchEvent",value:function(n){throw Error(u.ERROR_MSG_METHOD_NOT_IMPLEMENTED);}},{key:"commitStyles",value:function(){throw Error(u.ERROR_MSG_METHOD_NOT_IMPLEMENTED);}},{key:"ensureAlive",value:function(){var n,r;this.playbackRate<0&&0===this.currentTime?this._inEffect=!!(null!==(n=this.effect)&&void 0!==n&&n.update(-1)):this._inEffect=!!(null!==(r=this.effect)&&void 0!==r&&r.update(this.currentTime)),this._inTimeline||!this._inEffect&&this._finishedFlag||(this._inTimeline=!0,this.timeline.animations.push(this));}},{key:"tickCurrentTime",value:function(n,r){n!==this._currentTime&&(this._currentTime=n,this._isFinished&&!r&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive());}},{key:"fireEvents",value:function(n){var r=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var i=new G(null,this,this.currentTime,n);setTimeout(function(){r.onfinish&&r.onfinish(i);});}this._finishedFlag=!0;}}else{if(this.onframe&&"running"===this.playState){var a=new G(null,this,this.currentTime,n);this.onframe(a);}this._finishedFlag=!1;}}}]),X="function"==typeof Float32Array,q=function(n,r){return 1-3*r+3*n;},$=function(n,r){return 3*r-6*n;},Y=function(n){return 3*n;},Z=function(n,r,i){return((q(r,i)*n+$(r,i))*n+Y(r))*n;},K=function(n,r,i){return 3*q(r,i)*n*n+2*$(r,i)*n+Y(r);},Q=function(n,r,i,a,o){var s,l,u=0;do(s=Z(l=r+(i-r)/2,a,o)-n)>0?i=l:r=l;while(Math.abs(s)>1e-7&&++u<10)return l;},J=function(n,r,i,a){for(var o=0;o<4;++o){var s=K(r,i,a);if(0===s)break;var l=Z(r,i,a)-n;r-=l/s;}return r;},ee=function(n,r,i,a){if(!(n>=0&&n<=1&&i>=0&&i<=1))throw Error("bezier x values must be in [0, 1] range");if(n===r&&i===a)return function(n){return n;};for(var o=X?new Float32Array(11):Array(11),s=0;s<11;++s)o[s]=Z(.1*s,n,i);var l=function(r){for(var a=0,s=1;10!==s&&o[s]<=r;++s)a+=.1;var l=a+(r-o[--s])/(o[s+1]-o[s])*.1,u=K(l,n,i);return u>=.001?J(r,l,n,i):0===u?l:Q(r,a,a+.1,n,i);};return function(n){return 0===n||1===n?n:Z(l(n),r,a);};},et=function(n){return Math.pow(n,2);},en=function(n){return Math.pow(n,3);},er=function(n){return Math.pow(n,4);},ei=function(n){return Math.pow(n,5);},ea=function(n){return Math.pow(n,6);},eo=function(n){return 1-Math.cos(n*Math.PI/2);},es=function(n){return 1-Math.sqrt(1-n*n);},el=function(n){return n*n*(3*n-2);},eu=function(n){for(var r,i=4;n<((r=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*r-2)/22-n,2);},ec=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=(0,B.default)(r,2),a=i[0],o=i[1],s=(0,z.default)(Number(void 0===a?1:a),1,10),l=(0,z.default)(Number(void 0===o?.5:o),.1,2);return 0===n||1===n?n:-s*Math.pow(2,10*(n-1))*Math.sin(2*Math.PI*(n-1-l/(2*Math.PI)*Math.asin(1/s))/l);},ef=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=(0,B.default)(r,4),o=a[0],s=void 0===o?1:o,l=a[1],u=void 0===l?100:l,c=a[2],f=void 0===c?10:c,d=a[3],h=void 0===d?0:d;s=(0,z.default)(s,.1,1e3),u=(0,z.default)(u,.1,1e3),f=(0,z.default)(f,.1,1e3),h=(0,z.default)(h,.1,1e3);var p=Math.sqrt(u/s),m=f/(2*Math.sqrt(u*s)),g=m<1?p*Math.sqrt(1-m*m):0,v=m<1?(m*p+-h)/g:-h+p,y=i?i*n/1e3:n;return(y=m<1?Math.exp(-y*m*p)*(1*Math.cos(g*y)+v*Math.sin(g*y)):(1+v*y)*Math.exp(-y*p),0===n||1===n)?n:1-y;},ed=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=(0,B.default)(r,2),a=i[0],o=void 0===a?10:a;return("start"===i[1]?Math.ceil:Math.floor)((0,z.default)(n,0,1)*o)/o;},eh=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=(0,B.default)(r,4);return ee(i[0],i[1],i[2],i[3])(n);},ep=ee(.42,0,1,1),em=function(n){return function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0;return 1-n(1-r,i,a);};},eg=function(n){return function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0;return r<.5?n(2*r,i,a)/2:1-n(-2*r+2,i,a)/2;};},ev=function(n){return function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0;return r<.5?(1-n(1-2*r,i,a))/2:(n(2*r-1,i,a)+1)/2;};},ey={steps:ed,"step-start":function(n){return ed(n,[1,"start"]);},"step-end":function(n){return ed(n,[1,"end"]);},linear:function(n){return n;},"cubic-bezier":eh,ease:function(n){return eh(n,[.25,.1,.25,1]);},in:ep,out:em(ep),"in-out":eg(ep),"out-in":ev(ep),"in-quad":et,"out-quad":em(et),"in-out-quad":eg(et),"out-in-quad":ev(et),"in-cubic":en,"out-cubic":em(en),"in-out-cubic":eg(en),"out-in-cubic":ev(en),"in-quart":er,"out-quart":em(er),"in-out-quart":eg(er),"out-in-quart":ev(er),"in-quint":ei,"out-quint":em(ei),"in-out-quint":eg(ei),"out-in-quint":ev(ei),"in-expo":ea,"out-expo":em(ea),"in-out-expo":eg(ea),"out-in-expo":ev(ea),"in-sine":eo,"out-sine":em(eo),"in-out-sine":eg(eo),"out-in-sine":ev(eo),"in-circ":es,"out-circ":em(es),"in-out-circ":eg(es),"out-in-circ":ev(es),"in-back":el,"out-back":em(el),"in-out-back":eg(el),"out-in-back":ev(el),"in-bounce":eu,"out-bounce":em(eu),"in-out-bounce":eg(eu),"out-in-bounce":ev(eu),"in-elastic":ec,"out-elastic":em(ec),"in-out-elastic":eg(ec),"out-in-elastic":ev(ec),spring:ef,"spring-in":ef,"spring-out":em(ef),"spring-in-out":eg(ef),"spring-out-in":ev(ef)},e_=function(n){var r;return("-"===(r=(r=n).replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase());})).charAt(0)?r.substring(1):r).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim();},eb=function(n){return n;};function ex(n,r){return function(i){if(i>=1)return 1;var a=1/n;return(i+=r*a)-i%a;};}var eE="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",ew=new RegExp("cubic-bezier\\(".concat(eE,",").concat(eE,",").concat(eE,",").concat(eE,"\\)")),eS=/steps\(\s*(\d+)\s*\)/,eT=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function eA(n){var r=ew.exec(n);if(r)return ee.apply(void 0,(0,D.default)(r.slice(1).map(Number)));var i=eS.exec(n);if(i)return ex(Number(i[1]),0);var a=eT.exec(n);return a?ex(Number(a[1]),{start:1,middle:.5,end:0}[a[2]]):ey[e_(n)]||ey.linear;}function eC(n){return"offset"!==n&&"easing"!==n&&"composite"!==n&&"computedOffset"!==n;}var eO=function(n,r,i){return function(a){var o=function n(r,i,a){if("number"==typeof r&&"number"==typeof i)return r*(1-a)+i*a;if("boolean"==typeof r&&"boolean"==typeof i||"string"==typeof r&&"string"==typeof i)return a<.5?r:i;if(Array.isArray(r)&&Array.isArray(i)){for(var o=r.length,s=i.length,l=Math.max(o,s),u=[],c=0;c<l;c++)u.push(n(r[c<o?c:o-1],i[c<s?c:s-1],a));return u;}throw Error("Mismatched interpolation arguments ".concat(r,":").concat(i));}(n,r,a);return(0,x.default)(o)?o:i(o);};},eM=(0,h.default)(function n(){(0,f.default)(this,n),this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=eb,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null;},[{key:"easing",get:function(){return this._easing;},set:function(n){this.easingFunction=eA(n),this._easing=n;}}]);function eR(n,r){if(null===n)return[];Array.isArray(n)||(n=function(n){var r=[];for(var i in n)if(!(i in["easing","offset","composite"])){var a=n[i];Array.isArray(a)||(a=[a]);for(var o=a.length,s=0;s<o;s++){if(!r[s]){var l={};"offset"in n&&(l.offset=Number(n.offset)),"easing"in n&&(l.easing=n.easing),"composite"in n&&(l.composite=n.composite),r[s]=l;}void 0!==a[s]&&null!==a[s]&&(r[s][i]=a[s]);}}return r.sort(function(n,r){return(n.computedOffset||0)-(r.computedOffset||0);}),r;}(n));for(var i=n.map(function(n){var i={};for(var a in null!=r&&r.composite&&(i.composite="auto"),n){var o=n[a];if("offset"===a){if(null!==o){if(!isFinite(o=Number(o)))throw Error("Keyframe offsets must be numbers.");if(o<0||o>1)throw Error("Keyframe offsets must be between 0 and 1.");i.computedOffset=o;}}else if("composite"===a&&-1===["replace","add","accumulate","auto"].indexOf(o))throw Error("".concat(o," compositing is not supported"));i[a]=o;}return void 0===i.offset&&(i.offset=null),void 0===i.easing&&(i.easing=(null==r?void 0:r.easing)||"linear"),void 0===i.composite&&(i.composite="auto"),i;}),a=!0,o=-1/0,s=0;s<i.length;s++){var l=i[s].offset;if((0,V.default)(l))a=!1;else{if(l<o)throw TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");o=l;}}return i=i.filter(function(n){return Number(n.offset)>=0&&1>=Number(n.offset);}),a||function(){var n,r,a=i.length;i[a-1].computedOffset=Number(null!==(n=i[a-1].offset)&&void 0!==n?n:1),a>1&&(i[0].computedOffset=Number(null!==(r=i[0].offset)&&void 0!==r?r:0));for(var o=0,s=Number(i[0].computedOffset),l=1;l<a;l++){var u=i[l].computedOffset;if(!(0,V.default)(u)&&!(0,V.default)(s)){for(var c=1;c<l-o;c++)i[o+c].computedOffset=s+(Number(u)-s)*c/(l-o);o=l,s=Number(u);}}}(),i;}var eP="backwards|forwards|both|none".split("|"),ek="reverse|alternate|alternate-reverse".split("|"),eI=(0,h.default)(function n(r,i,a){var o,s,l,c,d,h,p,m,g,v,y,_,b=this;(0,f.default)(this,n),this.composite="replace",this.iterationComposite="replace",this.target=r,this.timing=("number"==typeof(o=null!=(c=a)?c:{duration:"auto"})&&(o=isNaN(o)?{duration:"auto"}:{duration:o}),d=c=o,h=new eM,"number"!=typeof d||isNaN(d)?void 0!==d&&Object.keys(d).forEach(function(n){void 0===d[n]||null===d[n]||"auto"===d[n]||("number"==typeof h[n]||"duration"===n)&&("number"!=typeof d[n]||isNaN(d[n]))||"fill"===n&&-1===eP.indexOf(d[n])||"direction"===n&&-1===ek.indexOf(d[n])||(h[n]=d[n]);}):h.duration=d,h),this.timing.effect=this,this.timing.activeDuration=Math.abs((0===(s=p=this.timing).duration||0===s.iterations?0:("auto"===s.duration?0:Number(s.duration))*(null!==(l=s.iterations)&&void 0!==l?l:1))/(p.playbackRate||1)),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=eR(i,this.timing),this.interpolations=(m=this.normalizedKeyframes,g=this.timing,v=this.target,_=function(n,r){var i=[];for(var a in n)for(var o=n[a],s=0;s<o.length-1;s++){var l=s,c=s+1,f=o[l].computedOffset,d=o[c].computedOffset,h=f,p=d;0===s&&(h=-1/0,0===d&&(c=l)),s===o.length-2&&(p=1/0,1===f&&(l=c)),i.push({applyFrom:h,applyTo:p,startOffset:o[l].computedOffset,endOffset:o[c].computedOffset,easingFunction:o[l].easingFunction,property:a,interpolation:function(n,r,i,a){var o=u.propertyMetadataCache[n];if(o&&o.syntax&&o.int){var s=u.runtime.styleValueRegistry.getPropertySyntax(o.syntax);if(s){var l=s.parser,c=l?l(r,a):r,f=l?l(i,a):i,d=s.mixer(c,f,a);if(d){var h=eO.apply(void 0,(0,D.default)(d));return function(n){return 0===n?r:1===n?i:h(n);};}}}return eO(!1,!0,function(n){return n?i:r;});}(a,o[l].value,o[c].value,r)});}return i.sort(function(n,r){return n.startOffset-r.startOffset;}),i;}(y=function(n,r){for(var i={},a=0;a<n.length;a++)for(var o in n[a])if(eC(o)){var s={offset:n[a].offset,computedOffset:n[a].computedOffset,easing:n[a].easing,easingFunction:eA(n[a].easing)||r.easingFunction,value:n[a][o]};i[o]=i[o]||[],i[o].push(s);}return i;}(m,g),v),function(n,r){if(null!==r)_.filter(function(n){return r>=n.applyFrom&&r<n.applyTo;}).forEach(function(i){var a=r-i.startOffset,o=i.endOffset-i.startOffset;n.setAttribute(i.property,i.interpolation(0===o?0:a/o),!1,!1);});else for(var i in y)eC(i)&&n.setAttribute(i,null);});var x=u.runtime.globalThis.Proxy;this.computedTiming=x?new x(this.timing,{get:function(n,r){return"duration"===r?"auto"===n.duration?0:n.duration:"fill"===r?"auto"===n.fill?"none":n.fill:"localTime"===r?b.animation&&b.animation.currentTime||null:"currentIteration"===r?b.animation&&"running"===b.animation.playState?n.currentIteration||0:null:"progress"===r?b.animation&&"running"===b.animation.playState?n.progress||0:null:n[r];},set:function(){return!0;}}):this.timing;},[{key:"applyInterpolations",value:function(){this.interpolations(this.target,Number(this.timeFraction));}},{key:"update",value:function(n){return null!==n&&(this.timeFraction=function(n,r,i){var a,o,s,l,u,c,f,d=function(n,r,i){if(null===r)return 0;var a=i.endTime;return r<Math.min(i.delay,a)?1:r>=Math.min(i.delay+n+i.endDelay,a)?2:3;}(n,r,i),h=function(n,r,i,a,o){switch(a){case 1:if("backwards"===r||"both"===r)return 0;return null;case 3:return i-o;case 2:if("forwards"===r||"both"===r)return n;return null;case 0:return null;}}(n,i.fill,r,d,i.delay);if(null===h)return null;var p="auto"===i.duration?0:i.duration,m=(a=i.iterations,s=o=i.iterationStart,0===p?1!==d&&(s+=a):s+=h/p,s),g=(l=i.iterationStart,u=i.iterations,0==(c=m===1/0?l%1:m%1)&&2===d&&0!==u&&(0!==h||0===p)&&(c=1),c),v=(f=i.iterations,2===d&&f===1/0?1/0:1===g?Math.floor(m)-1:Math.floor(m)),y=function(n,r,i){var a=n;if("normal"!==n&&"reverse"!==n){var o=r;"alternate-reverse"===n&&(o+=1),a="normal",o!==1/0&&o%2!=0&&(a="reverse");}return"normal"===a?i:1-i;}(i.direction,v,g);return i.currentIteration=v,i.progress=y,i.easingFunction(y);}(this.timing.activeDuration,n,this.timing),null!==this.timeFraction);}},{key:"getKeyframes",value:function(){return this.normalizedKeyframes;}},{key:"setKeyframes",value:function(n){this.normalizedKeyframes=eR(n);}},{key:"getComputedTiming",value:function(){return this.computedTiming;}},{key:"getTiming",value:function(){return this.timing;}},{key:"updateTiming",value:function(n){var r=this;Object.keys(n||{}).forEach(function(i){r.timing[i]=n[i];});}}]);function eL(n,r){return Number(n.id)-Number(r.id);}var eN=(0,h.default)(function n(r){var i=this;(0,f.default)(this,n),this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(n){i.currentTime=n,i.discardAnimations(),0===i.animations.length?i.timelineTicking=!1:i.requestAnimationFrame(i.webAnimationsNextTick);},this.processRafCallbacks=function(n){var r=i.rafCallbacks;i.rafCallbacks=[],n<Number(i.currentTime)&&(n=Number(i.currentTime)),i.animations.sort(eL),i.animations=i.tick(n,!0,i.animations)[0],r.forEach(function(r){r[1](n);}),i.applyPendingEffects();},this.document=r;},[{key:"getAnimations",value:function(){return this.discardAnimations(),this.animations.slice();}},{key:"isTicking",value:function(){return this.inTick;}},{key:"play",value:function(n,r,i){var a=new W(new eI(n,r,i),this);return this.animations.push(a),this.restartWebAnimationsNextTick(),a.updatePromises(),a.play(),a.updatePromises(),a;}},{key:"applyDirtiedAnimation",value:function(n){var r=this;if(!this.inTick){n.markTarget();var i=n.targetAnimations();i.sort(eL),this.tick(Number(this.currentTime),!1,i.slice())[1].forEach(function(n){var i=r.animations.indexOf(n);-1!==i&&r.animations.splice(i,1);}),this.applyPendingEffects();}}},{key:"restart",value:function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame(function(){}),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame;}},{key:"destroy",value:function(){this.document.defaultView.cancelAnimationFrame(this.frameId);}},{key:"applyPendingEffects",value:function(){this.pendingEffects.forEach(function(n){null==n||n.applyInterpolations();}),this.pendingEffects=[];}},{key:"updateAnimationsPromises",value:function(){this.animationsWithPromises=this.animationsWithPromises.filter(function(n){return n.updatePromises();});}},{key:"discardAnimations",value:function(){this.updateAnimationsPromises(),this.animations=this.animations.filter(function(n){return"finished"!==n.playState&&"idle"!==n.playState;});}},{key:"restartWebAnimationsNextTick",value:function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick));}},{key:"rAF",value:function(n){var r=this.rafId++;return 0===this.rafCallbacks.length&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([r,n]),r;}},{key:"requestAnimationFrame",value:function(n){var r=this;return this.rAF(function(i){r.updateAnimationsPromises(),n(i),r.updateAnimationsPromises();});}},{key:"tick",value:function(n,r,i){var a,o,s=this;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=n,this.ticking=!1;var l=[],u=[],c=[],f=[];return i.forEach(function(i){i.tick(n,r),i._inEffect?(u.push(i.effect),i.markTarget()):(l.push(i.effect),i.unmarkTarget()),i._needsTick&&(s.ticking=!0);var a=i._inEffect||i._needsTick;i._inTimeline=a,a?c.push(i):f.push(i);}),(a=this.pendingEffects).push.apply(a,l),(o=this.pendingEffects).push.apply(o,u),this.ticking&&this.requestAnimationFrame(function(){}),this.inTick=!1,[c,f];}}]);u.runtime.EasingFunction=eA,u.runtime.AnimationTimeline=eN;},"5e9326de":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return p;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("7cfeda15"),l=a._(s),u=i("609f48be"),c=o._(u),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M573.7 252.5C422.5 197.4 201.3 96.7 201.3 96.7c-15.7-4.1-17.9 11.1-17.9 11.1-5 61.1 33.6 160.5 53.6 182.8 19.9 22.3 319.1 113.7 319.1 113.7S326 357.9 270.5 341.9c-55.6-16-37.9 17.8-37.9 17.8 11.4 61.7 64.9 131.8 107.2 138.4 42.2 6.6 220.1 4 220.1 4s-35.5 4.1-93.2 11.9c-42.7 5.8-97 12.5-111.1 17.8-33.1 12.5 24 62.6 24 62.6 84.7 76.8 129.7 50.5 129.7 50.5 33.3-10.7 61.4-18.5 85.2-24.2L565 743.1h84.6L603 928l205.3-271.9H700.8l22.3-38.7c.3.5.4.8.4.8S799.8 496.1 829 433.8l.6-1h-.1c5-10.8 8.6-19.7 10-25.8 17-71.3-114.5-99.4-265.8-154.5z"}}]},name:"dingding",theme:"outlined"},d=i("887aaf6c"),h=a._(d),p=c.forwardRef(function(n,r){return c.createElement(h.default,(0,l.default)({},n,{ref:r,icon:f}));});},"5e94a672":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return o;}});var a=i("777fffbe")._(i("792e90bc"));function o(n,r,i,o){var s=a.default.unstable_batchedUpdates?function(n){a.default.unstable_batchedUpdates(i,n);}:i;return null!=n&&n.addEventListener&&n.addEventListener(r,s,o),{remove:function(){null!=n&&n.removeEventListener&&n.removeEventListener(r,s,o);}};}},"5fc8b0d8":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return v;}});var a=i("777fffbe"),o=i("852bbaa9"),s=a._(i("8bbe4f57")),l=a._(i("85158032")),u=a._(i("6ce4a163")),c=a._(i("b5a3bb33")),f=a._(i("fbe36db6")),d=a._(i("a4f36f54")),h=a._(i("08dda30e")),p=i("5dd400a3"),m=a._(i("299b5c10")),g=o._(i("d6f42022")),v=function(n){function r(){var n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.width,o=i.height,l=i.latitude,f=void 0===l?0:l,h=i.longitude,m=void 0===h?0:h,g=i.zoom,v=void 0===g?0:g,y=i.pitch,_=void 0===y?0:y,b=i.bearing,x=void 0===b?0:b,E=i.altitude,w=void 0===E?1.5:E,S=i.nearZMultiplier,T=i.farZMultiplier;(0,s.default)(this,r),a=a||1,o=o||1;var A=(0,p.zoomToScale)(v);w=Math.max(.75,w);var C=(0,p.lngLatToWorld)([m,f],A);C[2]=0;var O=(0,p.getProjectionMatrix)({width:a,height:o,pitch:_,bearing:x,altitude:w,nearZMultiplier:S||1/o,farZMultiplier:T||1.01}),M=(0,p.getViewMatrix)({height:o,center:C,pitch:_,bearing:x,altitude:w,flipY:!0});return(n=(0,u.default)(this,(0,c.default)(r).call(this,{width:a,height:o,viewMatrix:M,projectionMatrix:O}))).latitude=f,n.longitude=m,n.zoom=v,n.pitch=_,n.bearing=x,n.altitude=w,n.scale=A,n.center=C,n.pixelsPerMeter=(0,p.getDistanceScales)((0,d.default)((0,d.default)(n))).pixelsPerMeter[2],Object.freeze((0,d.default)((0,d.default)(n))),n;}return(0,f.default)(r,n),(0,l.default)(r,[{key:"projectFlat",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return(0,p.lngLatToWorld)(n,r);}},{key:"unprojectFlat",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return(0,p.worldToLngLat)(n,r);}},{key:"getMapCenterByLngLatPosition",value:function(n){var r=n.lngLat,i=n.pos,a=(0,p.pixelsToWorld)(i,this.pixelUnprojectionMatrix),o=(0,p.lngLatToWorld)(r,this.scale),s=g.add([],o,g.negate([],a)),l=g.add([],this.center,s);return(0,p.worldToLngLat)(l,this.scale);}},{key:"getLocationAtPoint",value:function(n){var r=n.lngLat,i=n.pos;return this.getMapCenterByLngLatPosition({lngLat:r,pos:i});}},{key:"fitBounds",value:function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this.width,o=this.height,s=(0,m.default)(Object.assign({width:a,height:o,bounds:n},i));return new r({width:a,height:o,longitude:s.longitude,latitude:s.latitude,zoom:s.zoom});}}]),r;}(h.default);},"5ff15420":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return o;}});var a=i("27ee04b2");function o(n,r){return(0,a.abs)(n[0]-r[0])<a.epsilon&&(0,a.abs)(n[1]-r[1])<a.epsilon;}},"601eebff":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return o;}});var a=i("777fffbe")._(i("d6938bdb")),o=function(n){var r=(0,a.default)(n);return r.charAt(0).toLowerCase()+r.substring(1);};},"602e8759":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});var a=function(n,r,i){var a;return function(){var o=this,s=arguments,l=i&&!a;clearTimeout(a),a=setTimeout(function(){a=null,i||n.apply(o,s);},r),l&&n.apply(o,s);};};},"6048efd3":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{abstractOf:function(){return d;},domainOf:function(){return c;},invert:function(){return u;},isOrdinalScale:function(){return l;},pixelsOf:function(){return h;},selectionOf:function(){return f;}});var a=i("777fffbe"),o=i("69002c1a"),s=a._(i("944abdfb"));function l(n){return!!n.getBandWidth;}function u(n,r,i){var a;if(!l(n))return n.invert(r);let{adjustedRange:s}=n,{domain:u}=n.getOptions(),c=n.getStep(),f=i?s:s.map(n=>n+c),d=(a=(0,o.bisectLeft)(f,r)+(i?-1:0),Math.min(u.length-1,Math.max(0,a)));return u[d];}function c(n,r,i){if(!r)return n.getOptions().domain;if(!l(n)){let a=(0,s.default)(r);if(!i)return a;let[o]=a,{range:l}=n.getOptions(),[u,c]=l,f=n.invert(n.map(o)+(u>c?-1:1)*i);return[o,f];}let{domain:a}=n.getOptions(),o=r[0],u=a.indexOf(o);if(i){let n=u+Math.round(a.length*i);return a.slice(u,n);}let c=r[r.length-1],f=a.indexOf(c);return a.slice(u,f+1);}function f(n,r,i,a,o,s){let{x:l,y:f}=o,d=(n,r)=>{let[i,a]=s.invert(n);return[u(l,i,r),u(f,a,r)];},h=d([n,r],!0),p=d([i,a],!1);return[c(l,[h[0],p[0]]),c(f,[h[1],p[1]])];}function d(n,r){let[i,a]=n;return[r.map(i),r.map(a)+(r.getStep?r.getStep():0)];}function h(n,r,i){let{x:a,y:o}=r,[s,l]=n,u=d(s,a),c=d(l,o),f=[u[0],c[0]],h=[u[1],c[1]],[p,m]=i.map(f),[g,v]=i.map(h);return[p,m,g,v];}},"60c1e561":function(n,r,i){var a=i("6c4af3b3"),o=i("ca54935a"),s=i("0705d96b"),l=i("831aa241"),u=i("927a8564"),c=i("176581f8");n.exports=function(n,r,i){var f=-1,d=o,h=n.length,p=!0,m=[],g=m;if(i)p=!1,d=s;else if(h>=200){var v=r?null:u(n);if(v)return c(v);p=!1,d=l,g=new a;}else g=r?[]:m;e:for(;++f<h;){var y=n[f],_=r?r(y):y;if(y=i||0!==y?y:0,p&&_==_){for(var b=g.length;b--;)if(g[b]===_)continue e;r&&g.push(_),m.push(y);}else d(g,_,i)||(g!==m&&g.push(_),m.push(y));}return m;};},"611ea1fe":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"renderExtDo",{enumerable:!0,get:function(){return u;}});var a=i("777fffbe"),o=a._(i("1f338b89")),s=a._(i("d0572d97")),l=i("45d14b4e");function u(n){return"function"==typeof n?n():(0,s.default)(n)||(0,o.default)(n)?new l.Text({style:{text:String(n)}}):n;}},"614a8116":function(n,r,i){n.exports=function(n,r){(null==r||r>n.length)&&(r=n.length);for(var i=0,a=Array(r);i<r;i++)a[i]=n[i];return a;},n.exports.__esModule=!0,n.exports.default=n.exports;},"6172027d":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return x;}});var a=i("777fffbe"),o=a._(i("ee64167d")),s=a._(i("e4870cf0")),l=a._(i("613f75ca")),u=i("c5499b8c"),c=a._(i("f34e933b")),f=a._(i("4d2fad5e")),d=a._(i("ddaa0afd")),h=i("609f48be"),p=a._(i("551ddf56")),m=i("dac8af92"),g=["fieldProps","proFieldProps"],v=["fieldProps","proFieldProps"],y="text",_=function(n){var r=(0,u.useMountMergeState)(n.open||!1,{value:n.open,onChange:n.onOpenChange}),i=(0,o.default)(r,2),a=i[0],l=i[1];return(0,m.jsx)(c.default.Item,{shouldUpdate:!0,noStyle:!0,children:function(r){var i,o=r.getFieldValue(n.name||[]);return(0,m.jsx)(f.default,(0,s.default)((0,s.default)({getPopupContainer:function(n){return n&&n.parentNode?n.parentNode:n;},onOpenChange:function(n){return l(n);},content:(0,m.jsxs)("div",{style:{padding:"4px 0"},children:[null===(i=n.statusRender)||void 0===i?void 0:i.call(n,o),n.strengthText?(0,m.jsx)("div",{style:{marginTop:10},children:(0,m.jsx)("span",{children:n.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},n.popoverProps),{},{open:a,children:n.children}));}});},b=function(n){var r=n.fieldProps,i=n.proFieldProps,a=(0,l.default)(n,g);return(0,m.jsx)(p.default,(0,s.default)({valueType:y,fieldProps:r,filedConfig:{valueType:y},proFieldProps:i},a));};b.Password=function(n){var r=n.fieldProps,i=n.proFieldProps,a=(0,l.default)(n,v),u=(0,h.useState)(!1),c=(0,o.default)(u,2),f=c[0],g=c[1];return null!=r&&r.statusRender&&a.name?(0,m.jsx)(_,{name:a.name,statusRender:null==r?void 0:r.statusRender,popoverProps:null==r?void 0:r.popoverProps,strengthText:null==r?void 0:r.strengthText,open:f,onOpenChange:g,children:(0,m.jsx)("div",{children:(0,m.jsx)(p.default,(0,s.default)({valueType:"password",fieldProps:(0,s.default)((0,s.default)({},(0,d.default)(r,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(n){var i;null==r||null===(i=r.onBlur)||void 0===i||i.call(r,n),g(!1);},onClick:function(n){var i;null==r||null===(i=r.onClick)||void 0===i||i.call(r,n),g(!0);}}),proFieldProps:i,filedConfig:{valueType:y}},a))})}):(0,m.jsx)(p.default,(0,s.default)({valueType:"password",fieldProps:r,proFieldProps:i,filedConfig:{valueType:y}},a));},b.displayName="ProFormComponent";var x=b;},"6210cecb":function(n,r,i){"use strict";function a(n,r){return[n[0]*r,n[1]*r];}function o(n,r){return[n[0]+r[0],n[1]+r[1]];}function s(n,r){return[n[0]-r[0],n[1]-r[1]];}function l(n,r){return[Math.min(n[0],r[0]),Math.min(n[1],r[1])];}function u(n,r){return[Math.max(n[0],r[0]),Math.max(n[1],r[1])];}function c(n,r){return Math.sqrt(Math.pow(n[0]-r[0],2)+Math.pow(n[1]-r[1],2));}function f(n){if(0===n[0]&&0===n[1])return[0,0];var r=Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2));return[n[0]/r,n[1]/r];}function d(n,r){return r?[n[1],-n[0]]:[-n[1],n[0]];}i.d(r,"__esModule",{value:!0}),i.e(r,{add:function(){return o;},distance:function(){return c;},max:function(){return u;},min:function(){return l;},normalize:function(){return f;},scale:function(){return a;},sub:function(){return s;},vertical:function(){return d;}});},"6224e17e":function(n,r,i){"use strict";function a(n){n.x0=Math.round(n.x0),n.y0=Math.round(n.y0),n.x1=Math.round(n.x1),n.y1=Math.round(n.y1);}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},"62a7c4f2":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});var a=function(n){return null!==n&&"function"!=typeof n&&isFinite(n.length);};},"6366e4a1":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{Ordinal:function(){return c;},defaultUnknown:function(){return o;}});var a=i("75aabd79");let o=Symbol("defaultUnknown");function s(n,r,i){for(let a=0;a<r.length;a+=1)n.has(r[a])||n.set(i(r[a]),a);}function l(n){let{value:r,from:i,to:a,mapper:s,notFoundReturn:l}=n,u=s.get(r);if(void 0===u){if(l!==o)return l;u=i.push(r)-1,s.set(r,u);}return a[u%a.length];}function u(n){return n instanceof Date?n=>`${n}`:"object"==typeof n?n=>JSON.stringify(n):n=>n;}class c extends a.Base{getDefaultOptions(){return{domain:[],range:[],unknown:o};}constructor(n){super(n);}map(n){return 0===this.domainIndexMap.size&&s(this.domainIndexMap,this.getDomain(),this.domainKey),l({value:this.domainKey(n),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown});}invert(n){return 0===this.rangeIndexMap.size&&s(this.rangeIndexMap,this.getRange(),this.rangeKey),l({value:this.rangeKey(n),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown});}rescale(n){let[r]=this.options.domain,[i]=this.options.range;if(this.domainKey=u(r),this.rangeKey=u(i),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return;}(!n||n.range)&&this.rangeIndexMap.clear(),(!n||n.domain||n.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0);}clone(){return new c(this.options);}getRange(){return this.options.range;}getDomain(){if(this.sortedDomain)return this.sortedDomain;let{domain:n,compare:r}=this.options;return this.sortedDomain=r?[...n].sort(r):n,this.sortedDomain;}}},"63a88d49":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return p;},rgbBasis:function(){return g;},rgbBasisClosed:function(){return v;}});var a=i("777fffbe"),o=i("6b07dc07"),s=i("d4c76e17"),l=a._(s),u=i("4fb4672f"),c=a._(u),f=i("31b9c66a"),d=a._(f);function h(n,r){var i=r-n;return i?function(r){return n+r*i;}:(0,d.default)(isNaN(n)?r:n);}var p=function n(r){var i,a=1==(i=+(i=r))?h:function(n,r){var a,o,s;return r-n?(a=n,o=r,a=Math.pow(a,s=i),o=Math.pow(o,s)-a,s=1/s,function(n){return Math.pow(a+n*o,s);}):(0,d.default)(isNaN(n)?r:n);};function s(n,r){var i=a((n=(0,o.rgb)(n)).r,(r=(0,o.rgb)(r)).r),s=a(n.g,r.g),l=a(n.b,r.b),u=h(n.opacity,r.opacity);return function(r){return n.r=i(r),n.g=s(r),n.b=l(r),n.opacity=u(r),n+"";};}return s.gamma=n,s;}(1);function m(n){return function(r){var i,a,s=r.length,l=Array(s),u=Array(s),c=Array(s);for(i=0;i<s;++i)a=(0,o.rgb)(r[i]),l[i]=a.r||0,u[i]=a.g||0,c[i]=a.b||0;return l=n(l),u=n(u),c=n(c),a.opacity=1,function(n){return a.r=l(n),a.g=u(n),a.b=c(n),a+"";};};}var g=m(l.default),v=m(c.default);},"63aba70a":function(n,r,i){"use strict";function a(n,r){let i;if(void 0===r)for(let r of n)null!=r&&(i<r||void 0===i&&r>=r)&&(i=r);else{let a=-1;for(let o of n)null!=(o=r(o,++a,n))&&(i<o||void 0===i&&o>=o)&&(i=o);}return i;}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},"6416e5f7":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"packSiblingsRandom",{enumerable:!0,get:function(){return f;}});var a=i("777fffbe")._(i("858d251b")),o=i("3316fbe3");function s(n,r,i){var a,o,s,l,u=n.x-r.x,c=n.y-r.y,f=u*u+c*c;f?(o=r.r+i.r,o*=o,l=n.r+i.r,o>(l*=l)?(a=(f+l-o)/(2*f),s=Math.sqrt(Math.max(0,l/f-a*a)),i.x=n.x-a*u-s*c,i.y=n.y-a*c+s*u):(a=(f+o-l)/(2*f),s=Math.sqrt(Math.max(0,o/f-a*a)),i.x=r.x+a*u-s*c,i.y=r.y+a*c+s*u)):(i.x=r.x+i.r,i.y=r.y);}function l(n,r){var i=n.r+r.r-1e-6,a=r.x-n.x,o=r.y-n.y;return i>0&&i*i>a*a+o*o;}function u(n){var r=n._,i=n.next._,a=r.r+i.r,o=(r.x*i.r+i.x*r.r)/a,s=(r.y*i.r+i.y*r.r)/a;return o*o+s*s;}function c(n){this._=n,this.next=null,this.previous=null;}function f(n,r){var i,f,d,h,p,m,g,v,y,_,b;if(!(h=(n=(0,a.default)(n)).length))return 0;if((i=n[0]).x=0,i.y=0,!(h>1))return i.r;if(f=n[1],i.x=-f.r,f.x=i.r,f.y=0,!(h>2))return i.r+f.r;s(f,i,d=n[2]),i=new c(i),f=new c(f),d=new c(d),i.next=d.previous=f,f.next=i.previous=d,d.next=f.previous=i;t:for(g=3;g<h;++g){s(i._,f._,d=n[g]),d=new c(d),v=f.next,y=i.previous,_=f._.r,b=i._.r;do if(_<=b){if(l(v._,d._)){f=v,i.next=f,f.previous=i,--g;continue t;}_+=v._.r,v=v.next;}else{if(l(y._,d._)){(i=y).next=f,f.previous=i,--g;continue t;}b+=y._.r,y=y.previous;}while(v!==y.next)for(d.previous=i,d.next=f,i.next=f.previous=f=d,p=u(i);(d=d.next)!==f;)(m=u(d))<p&&(i=d,p=m);f=i.next;}for(i=[f._],d=f;(d=d.next)!==f;)i.push(d._);for(g=0,d=(0,o.packEncloseRandom)(i,r);g<h;++g)i=n[g],i.x-=d.x,i.y-=d.y;return d.r;}},64787828:function(n,r,i){"use strict";function a(n,r,i){void 0===i&&(i={});var a={type:"Feature"};return(0===i.id||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties=r||{},a.geometry=n,a;}function o(n,r,i){void 0===i&&(i={});for(var o=0;o<n.length;o++){var s=n[o];if(s.length<4)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var l=0;l<s[s.length-1].length;l++)if(s[s.length-1][l]!==s[0][l])throw Error("First and last Position are not equivalent.");}return a({type:"Polygon",coordinates:n},r,i);}function s(n,r,i){if(void 0===i&&(i={}),n.length<2)throw Error("coordinates must be an array of two or more positions");return a({type:"LineString",coordinates:n},r,i);}function l(n,r){void 0===r&&(r={});var i={type:"FeatureCollection"};return r.id&&(i.id=r.id),r.bbox&&(i.bbox=r.bbox),i.features=n,i;}function u(n,r,i){return void 0===i&&(i={}),a({type:"MultiPolygon",coordinates:n},r,i);}i.d(r,"__esModule",{value:!0}),i.e(r,{feature:function(){return a;},featureCollection:function(){return l;},lineString:function(){return s;},multiPolygon:function(){return u;},polygon:function(){return o;}});},"64cce978":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{TreeNode:function(){return Z.default;},UnstableContext:function(){return F.UnstableContext;},default:function(){return em;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("7cfeda15"),l=a._(s),u=i("99c0cd4c"),c=a._(u),f=i("e4870cf0"),d=a._(f),h=i("f1020fa4"),p=a._(h),m=i("8bbe4f57"),g=a._(m),v=i("85158032"),y=a._(v),_=i("a4f36f54"),b=a._(_),x=i("fbe36db6"),E=a._(x),w=i("1a2fb704"),S=a._(w),T=i("a854094b"),A=a._(T),C=i("064ecd09"),O=a._(C),M=i("b57035fe"),R=a._(M),P=i("ae8eb856"),k=a._(P),I=i("a275200c"),L=a._(I),N=i("609f48be"),D=o._(N),F=i("b7c8f320");function B(n){if(null==n)throw TypeError("Cannot destructure "+n);}var j=i("ee64167d"),z=a._(j),U=i("613f75ca"),V=a._(U),G=i("4b97d3c2"),H=a._(G),W=i("b0590fda"),X=a._(W),q=i("3cfe0503"),$=a._(q),Y=i("202d5e21"),Z=a._(Y),K=i("d105a374"),Q=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],J=D.forwardRef(function(n,r){var i,a,o,s,u,c=n.className,f=n.style,d=n.motion,h=n.motionNodes,p=n.motionType,m=n.onMotionStart,g=n.onMotionEnd,v=n.active,y=n.treeNodeRequiredProps,_=(0,V.default)(n,Q),b=D.useState(!0),x=(0,z.default)(b,2),E=x[0],w=x[1],S=D.useContext(F.TreeContext).prefixCls,T=h&&"hide"!==p;(0,H.default)(function(){h&&T!==E&&w(T);},[h]);var A=D.useRef(!1),C=function(){h&&!A.current&&(A.current=!0,g());};return(i=function(){h&&m();},a=D.useState(!1),s=(o=(0,z.default)(a,2))[0],u=o[1],(0,H.default)(function(){if(s)return i(),function(){C();};},[s]),(0,H.default)(function(){return u(!0),function(){u(!1);};},[]),h)?D.createElement($.default,(0,l.default)({ref:r,visible:E},d,{motionAppear:"show"===p,onVisibleChanged:function(n){T===n&&C();}}),function(n,r){var i=n.className,a=n.style;return D.createElement("div",{ref:r,className:(0,O.default)("".concat(S,"-treenode-motion"),i),style:a},h.map(function(n){var r=Object.assign({},(B(n.data),n.data)),i=n.title,a=n.key,o=n.isStart,s=n.isEnd;delete r.children;var u=(0,K.getTreeNodeProps)(a,y);return D.createElement(Z.default,(0,l.default)({},r,u,{title:i,active:v,data:n.data,key:a,isStart:o,isEnd:s}));}));}):D.createElement(Z.default,(0,l.default)({domRef:r,className:c,style:f},_,{active:v}));});function ee(n,r,i){var a=n.findIndex(function(n){return n.key===i;}),o=n[a+1],s=r.findIndex(function(n){return n.key===i;});if(o){var l=r.findIndex(function(n){return n.key===o.key;});return r.slice(s+1,l);}return r.slice(s+1);}var et=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","scrollWidth","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],en={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},er=function(){},ei="RC_TREE_MOTION_".concat(Math.random()),ea={key:ei},eo={key:ei,level:0,index:0,pos:"0",node:ea,nodes:[ea]},es={parent:null,children:[],pos:eo.pos,data:ea,title:null,key:ei,isStart:[],isEnd:[]};function el(n,r,i,a){return!1!==r&&i?n.slice(0,Math.ceil(i/a)+1):n;}function eu(n){var r=n.key,i=n.pos;return(0,K.getKey)(r,i);}var ec=D.forwardRef(function(n,r){var i=n.prefixCls,a=n.data,o=(n.selectable,n.checkable,n.expandedKeys),s=n.selectedKeys,u=n.checkedKeys,c=n.loadedKeys,f=n.loadingKeys,d=n.halfCheckedKeys,h=n.keyEntities,p=n.disabled,m=n.dragging,g=n.dragOverNodeKey,v=n.dropPosition,y=n.motion,_=n.height,b=n.itemHeight,x=n.virtual,E=n.scrollWidth,w=n.focusable,S=n.activeItem,T=n.focused,A=n.tabIndex,C=n.onKeyDown,O=n.onFocus,M=n.onBlur,R=n.onActiveChange,P=n.onListChangeStart,k=n.onListChangeEnd,I=(0,V.default)(n,et),L=D.useRef(null),N=D.useRef(null);D.useImperativeHandle(r,function(){return{scrollTo:function(n){L.current.scrollTo(n);},getIndentWidth:function(){return N.current.offsetWidth;}};});var F=D.useState(o),j=(0,z.default)(F,2),U=j[0],G=j[1],W=D.useState(a),q=(0,z.default)(W,2),$=q[0],Y=q[1],Z=D.useState(a),Q=(0,z.default)(Z,2),ea=Q[0],eo=Q[1],ec=D.useState([]),ef=(0,z.default)(ec,2),ed=ef[0],eh=ef[1],ep=D.useState(null),em=(0,z.default)(ep,2),eg=em[0],ev=em[1],ey=D.useRef(a);function e_(){var n=ey.current;Y(n),eo(n),eh([]),ev(null),k();}ey.current=a,(0,H.default)(function(){G(o);var n=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=n.length,a=r.length;if(1!==Math.abs(i-a))return{add:!1,key:null};function o(n,r){var i=new Map;n.forEach(function(n){i.set(n,!0);});var a=r.filter(function(n){return!i.has(n);});return 1===a.length?a[0]:null;}return i<a?{add:!0,key:o(n,r)}:{add:!1,key:o(r,n)};}(U,o);if(null!==n.key){if(n.add){var r=$.findIndex(function(r){return r.key===n.key;}),i=el(ee($,a,n.key),x,_,b),s=$.slice();s.splice(r+1,0,es),eo(s),eh(i),ev("show");}else{var l=a.findIndex(function(r){return r.key===n.key;}),u=el(ee(a,$,n.key),x,_,b),c=a.slice();c.splice(l+1,0,es),eo(c),eh(u),ev("hide");}}else $!==a&&(Y(a),eo(a));},[o,a]),D.useEffect(function(){m||e_();},[m]);var eb=y?ea:a,ex={expandedKeys:o,selectedKeys:s,loadedKeys:c,loadingKeys:f,checkedKeys:u,halfCheckedKeys:d,dragOverNodeKey:g,dropPosition:v,keyEntities:h};return D.createElement(D.Fragment,null,T&&S&&D.createElement("span",{style:en,"aria-live":"assertive"},function(n){for(var r=String(n.data.key),i=n;i.parent;)i=i.parent,r="".concat(i.data.key," > ").concat(r);return r;}(S)),D.createElement("div",null,D.createElement("input",{style:en,disabled:!1===w||p,tabIndex:!1!==w?A:null,onKeyDown:C,onFocus:O,onBlur:M,value:"",onChange:er,"aria-label":"for screen reader"})),D.createElement("div",{className:"".concat(i,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0}},D.createElement("div",{className:"".concat(i,"-indent")},D.createElement("div",{ref:N,className:"".concat(i,"-indent-unit")}))),D.createElement(X.default,(0,l.default)({},I,{data:eb,itemKey:eu,height:_,fullHeight:!1,virtual:x,itemHeight:b,scrollWidth:E,prefixCls:"".concat(i,"-list"),ref:L,role:"tree",onVisibleChange:function(n){n.every(function(n){return eu(n)!==ei;})&&e_();}}),function(n){var r=n.pos,i=Object.assign({},(B(n.data),n.data)),a=n.title,o=n.key,s=n.isStart,u=n.isEnd,c=(0,K.getKey)(o,r);delete i.key,delete i.children;var f=(0,K.getTreeNodeProps)(c,ex);return D.createElement(J,(0,l.default)({},i,f,{title:a,active:!!S&&o===S.key,pos:r,data:n.data,isStart:s,isEnd:u,motion:y,motionNodes:o===ei?ed:null,motionType:eg,onMotionStart:P,onMotionEnd:e_,treeNodeRequiredProps:ex,onMouseMove:function(){R(null);}}));}));}),ef=i("01f98d92"),ed=i("912a5e21"),eh=i("07aa9410"),ep=a._(eh),em=function(n){(0,E.default)(i,n);var r=(0,S.default)(i);function i(){var n;(0,g.default)(this,i);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r.call.apply(r,[this].concat(o)),(0,A.default)((0,b.default)(n),"destroyed",!1),(0,A.default)((0,b.default)(n),"delayedDragEnterLogic",void 0),(0,A.default)((0,b.default)(n),"loadingRetryTimes",{}),(0,A.default)((0,b.default)(n),"state",{keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:(0,K.fillFieldNames)()}),(0,A.default)((0,b.default)(n),"dragStartMousePosition",null),(0,A.default)((0,b.default)(n),"dragNodeProps",null),(0,A.default)((0,b.default)(n),"currentMouseOverDroppableNodeKey",null),(0,A.default)((0,b.default)(n),"listRef",D.createRef()),(0,A.default)((0,b.default)(n),"onNodeDragStart",function(r,i){var a=n.state,o=a.expandedKeys,s=a.keyEntities,l=n.props.onDragStart,u=i.eventKey;n.dragNodeProps=i,n.dragStartMousePosition={x:r.clientX,y:r.clientY};var c=(0,ef.arrDel)(o,u);n.setState({draggingNodeKey:u,dragChildrenKeys:(0,ef.getDragChildrenKeys)(u,s),indent:n.listRef.current.getIndentWidth()}),n.setExpandedKeys(c),window.addEventListener("dragend",n.onWindowDragEnd),null==l||l({event:r,node:(0,K.convertNodePropsToEventData)(i)});}),(0,A.default)((0,b.default)(n),"onNodeDragEnter",function(r,i){var a=n.state,o=a.expandedKeys,s=a.keyEntities,l=a.dragChildrenKeys,u=a.flattenNodes,c=a.indent,f=n.props,d=f.onDragEnter,h=f.onExpand,m=f.allowDrop,g=f.direction,v=i.pos,y=i.eventKey;if(n.currentMouseOverDroppableNodeKey!==y&&(n.currentMouseOverDroppableNodeKey=y),!n.dragNodeProps){n.resetDragState();return;}var _=(0,ef.calcDropPosition)(r,n.dragNodeProps,i,c,n.dragStartMousePosition,m,u,s,o,g),b=_.dropPosition,x=_.dropLevelOffset,E=_.dropTargetKey,w=_.dropContainerKey,S=_.dropTargetPos,T=_.dropAllowed,A=_.dragOverNodeKey;if(l.includes(E)||!T||(n.delayedDragEnterLogic||(n.delayedDragEnterLogic={}),Object.keys(n.delayedDragEnterLogic).forEach(function(r){clearTimeout(n.delayedDragEnterLogic[r]);}),n.dragNodeProps.eventKey!==i.eventKey&&(r.persist(),n.delayedDragEnterLogic[v]=window.setTimeout(function(){if(null!==n.state.draggingNodeKey){var a=(0,p.default)(o),l=(0,ep.default)(s,i.eventKey);l&&(l.children||[]).length&&(a=(0,ef.arrAdd)(o,i.eventKey)),n.props.hasOwnProperty("expandedKeys")||n.setExpandedKeys(a),null==h||h(a,{node:(0,K.convertNodePropsToEventData)(i),expanded:!0,nativeEvent:r.nativeEvent});}},800)),n.dragNodeProps.eventKey===E&&0===x)){n.resetDragState();return;}n.setState({dragOverNodeKey:A,dropPosition:b,dropLevelOffset:x,dropTargetKey:E,dropContainerKey:w,dropTargetPos:S,dropAllowed:T}),null==d||d({event:r,node:(0,K.convertNodePropsToEventData)(i),expandedKeys:o});}),(0,A.default)((0,b.default)(n),"onNodeDragOver",function(r,i){var a=n.state,o=a.dragChildrenKeys,s=a.flattenNodes,l=a.keyEntities,u=a.expandedKeys,c=a.indent,f=n.props,d=f.onDragOver,h=f.allowDrop,p=f.direction;if(n.dragNodeProps){var m=(0,ef.calcDropPosition)(r,n.dragNodeProps,i,c,n.dragStartMousePosition,h,s,l,u,p),g=m.dropPosition,v=m.dropLevelOffset,y=m.dropTargetKey,_=m.dropContainerKey,b=m.dropTargetPos,x=m.dropAllowed,E=m.dragOverNodeKey;!o.includes(y)&&x&&(n.dragNodeProps.eventKey===y&&0===v?null===n.state.dropPosition&&null===n.state.dropLevelOffset&&null===n.state.dropTargetKey&&null===n.state.dropContainerKey&&null===n.state.dropTargetPos&&!1===n.state.dropAllowed&&null===n.state.dragOverNodeKey||n.resetDragState():g===n.state.dropPosition&&v===n.state.dropLevelOffset&&y===n.state.dropTargetKey&&_===n.state.dropContainerKey&&b===n.state.dropTargetPos&&x===n.state.dropAllowed&&E===n.state.dragOverNodeKey||n.setState({dropPosition:g,dropLevelOffset:v,dropTargetKey:y,dropContainerKey:_,dropTargetPos:b,dropAllowed:x,dragOverNodeKey:E}),null==d||d({event:r,node:(0,K.convertNodePropsToEventData)(i)}));}}),(0,A.default)((0,b.default)(n),"onNodeDragLeave",function(r,i){n.currentMouseOverDroppableNodeKey!==i.eventKey||r.currentTarget.contains(r.relatedTarget)||(n.resetDragState(),n.currentMouseOverDroppableNodeKey=null);var a=n.props.onDragLeave;null==a||a({event:r,node:(0,K.convertNodePropsToEventData)(i)});}),(0,A.default)((0,b.default)(n),"onWindowDragEnd",function(r){n.onNodeDragEnd(r,null,!0),window.removeEventListener("dragend",n.onWindowDragEnd);}),(0,A.default)((0,b.default)(n),"onNodeDragEnd",function(r,i){var a=n.props.onDragEnd;n.setState({dragOverNodeKey:null}),n.cleanDragState(),null==a||a({event:r,node:(0,K.convertNodePropsToEventData)(i)}),n.dragNodeProps=null,window.removeEventListener("dragend",n.onWindowDragEnd);}),(0,A.default)((0,b.default)(n),"onNodeDrop",function(r,i){var a,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=n.state,l=s.dragChildrenKeys,u=s.dropPosition,c=s.dropTargetKey,f=s.dropTargetPos;if(s.dropAllowed){var h=n.props.onDrop;if(n.setState({dragOverNodeKey:null}),n.cleanDragState(),null!==c){var p=(0,d.default)((0,d.default)({},(0,K.getTreeNodeProps)(c,n.getTreeNodeRequiredProps())),{},{active:(null===(a=n.getActiveItem())||void 0===a?void 0:a.key)===c,data:(0,ep.default)(n.state.keyEntities,c).node}),m=l.includes(c);(0,L.default)(!m,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var g=(0,ef.posToArr)(f),v={event:r,node:(0,K.convertNodePropsToEventData)(p),dragNode:n.dragNodeProps?(0,K.convertNodePropsToEventData)(n.dragNodeProps):null,dragNodesKeys:[n.dragNodeProps.eventKey].concat(l),dropToGap:0!==u,dropPosition:u+Number(g[g.length-1])};o||null==h||h(v),n.dragNodeProps=null;}}}),(0,A.default)((0,b.default)(n),"cleanDragState",function(){null!==n.state.draggingNodeKey&&n.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),n.dragStartMousePosition=null,n.currentMouseOverDroppableNodeKey=null;}),(0,A.default)((0,b.default)(n),"triggerExpandActionExpand",function(r,i){var a=n.state,o=a.expandedKeys,s=a.flattenNodes,l=i.expanded,u=i.key;if(!i.isLeaf&&!r.shiftKey&&!r.metaKey&&!r.ctrlKey){var c=s.filter(function(n){return n.key===u;})[0],f=(0,K.convertNodePropsToEventData)((0,d.default)((0,d.default)({},(0,K.getTreeNodeProps)(u,n.getTreeNodeRequiredProps())),{},{data:c.data}));n.setExpandedKeys(l?(0,ef.arrDel)(o,u):(0,ef.arrAdd)(o,u)),n.onNodeExpand(r,f);}}),(0,A.default)((0,b.default)(n),"onNodeClick",function(r,i){var a=n.props,o=a.onClick;"click"===a.expandAction&&n.triggerExpandActionExpand(r,i),null==o||o(r,i);}),(0,A.default)((0,b.default)(n),"onNodeDoubleClick",function(r,i){var a=n.props,o=a.onDoubleClick;"doubleClick"===a.expandAction&&n.triggerExpandActionExpand(r,i),null==o||o(r,i);}),(0,A.default)((0,b.default)(n),"onNodeSelect",function(r,i){var a=n.state.selectedKeys,o=n.state,s=o.keyEntities,l=o.fieldNames,u=n.props,c=u.onSelect,f=u.multiple,d=i.selected,h=i[l.key],p=!d,m=(a=p?f?(0,ef.arrAdd)(a,h):[h]:(0,ef.arrDel)(a,h)).map(function(n){var r=(0,ep.default)(s,n);return r?r.node:null;}).filter(Boolean);n.setUncontrolledState({selectedKeys:a}),null==c||c(a,{event:"select",selected:p,node:i,selectedNodes:m,nativeEvent:r.nativeEvent});}),(0,A.default)((0,b.default)(n),"onNodeCheck",function(r,i,a){var o,s=n.state,l=s.keyEntities,u=s.checkedKeys,c=s.halfCheckedKeys,f=n.props,d=f.checkStrictly,h=f.onCheck,m=i.key,g={event:"check",node:i,checked:a,nativeEvent:r.nativeEvent};if(d){var v=a?(0,ef.arrAdd)(u,m):(0,ef.arrDel)(u,m);o={checked:v,halfChecked:(0,ef.arrDel)(c,m)},g.checkedNodes=v.map(function(n){return(0,ep.default)(l,n);}).filter(Boolean).map(function(n){return n.node;}),n.setUncontrolledState({checkedKeys:v});}else{var y=(0,ed.conductCheck)([].concat((0,p.default)(u),[m]),!0,l),_=y.checkedKeys,b=y.halfCheckedKeys;if(!a){var x=new Set(_);x.delete(m);var E=(0,ed.conductCheck)(Array.from(x),{checked:!1,halfCheckedKeys:b},l);_=E.checkedKeys,b=E.halfCheckedKeys;}o=_,g.checkedNodes=[],g.checkedNodesPositions=[],g.halfCheckedKeys=b,_.forEach(function(n){var r=(0,ep.default)(l,n);if(r){var i=r.node,a=r.pos;g.checkedNodes.push(i),g.checkedNodesPositions.push({node:i,pos:a});}}),n.setUncontrolledState({checkedKeys:_},!1,{halfCheckedKeys:b});}null==h||h(o,g);}),(0,A.default)((0,b.default)(n),"onNodeLoad",function(r){var i,a=r.key,o=n.state.keyEntities,s=(0,ep.default)(o,a);if(null==s||null===(i=s.children)||void 0===i||!i.length){var l=new Promise(function(i,o){n.setState(function(s){var l=s.loadedKeys,u=s.loadingKeys,c=void 0===u?[]:u,f=n.props,d=f.loadData,h=f.onLoad;return!d||(void 0===l?[]:l).includes(a)||c.includes(a)?null:(d(r).then(function(){var o=n.state.loadedKeys,s=(0,ef.arrAdd)(o,a);null==h||h(s,{event:"load",node:r}),n.setUncontrolledState({loadedKeys:s}),n.setState(function(n){return{loadingKeys:(0,ef.arrDel)(n.loadingKeys,a)};}),i();}).catch(function(r){if(n.setState(function(n){return{loadingKeys:(0,ef.arrDel)(n.loadingKeys,a)};}),n.loadingRetryTimes[a]=(n.loadingRetryTimes[a]||0)+1,n.loadingRetryTimes[a]>=10){var s=n.state.loadedKeys;(0,L.default)(!1,"Retry for `loadData` many times but still failed. No more retry."),n.setUncontrolledState({loadedKeys:(0,ef.arrAdd)(s,a)}),i();}o(r);}),{loadingKeys:(0,ef.arrAdd)(c,a)});});});return l.catch(function(){}),l;}}),(0,A.default)((0,b.default)(n),"onNodeMouseEnter",function(r,i){var a=n.props.onMouseEnter;null==a||a({event:r,node:i});}),(0,A.default)((0,b.default)(n),"onNodeMouseLeave",function(r,i){var a=n.props.onMouseLeave;null==a||a({event:r,node:i});}),(0,A.default)((0,b.default)(n),"onNodeContextMenu",function(r,i){var a=n.props.onRightClick;a&&(r.preventDefault(),a({event:r,node:i}));}),(0,A.default)((0,b.default)(n),"onFocus",function(){var r=n.props.onFocus;n.setState({focused:!0});for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];null==r||r.apply(void 0,a);}),(0,A.default)((0,b.default)(n),"onBlur",function(){var r=n.props.onBlur;n.setState({focused:!1}),n.onActiveChange(null);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];null==r||r.apply(void 0,a);}),(0,A.default)((0,b.default)(n),"getTreeNodeRequiredProps",function(){var r=n.state;return{expandedKeys:r.expandedKeys||[],selectedKeys:r.selectedKeys||[],loadedKeys:r.loadedKeys||[],loadingKeys:r.loadingKeys||[],checkedKeys:r.checkedKeys||[],halfCheckedKeys:r.halfCheckedKeys||[],dragOverNodeKey:r.dragOverNodeKey,dropPosition:r.dropPosition,keyEntities:r.keyEntities};}),(0,A.default)((0,b.default)(n),"setExpandedKeys",function(r){var i=n.state,a=i.treeData,o=i.fieldNames,s=(0,K.flattenTreeData)(a,r,o);n.setUncontrolledState({expandedKeys:r,flattenNodes:s},!0);}),(0,A.default)((0,b.default)(n),"onNodeExpand",function(r,i){var a=n.state.expandedKeys,o=n.state,s=o.listChanging,l=o.fieldNames,u=n.props,c=u.onExpand,f=u.loadData,d=i.expanded,h=i[l.key];if(!s){var p=a.includes(h),m=!d;if((0,L.default)(d&&p||!d&&!p,"Expand state not sync with index check"),a=m?(0,ef.arrAdd)(a,h):(0,ef.arrDel)(a,h),n.setExpandedKeys(a),null==c||c(a,{node:i,expanded:m,nativeEvent:r.nativeEvent}),m&&f){var g=n.onNodeLoad(i);g&&g.then(function(){var r=(0,K.flattenTreeData)(n.state.treeData,a,l);n.setUncontrolledState({flattenNodes:r});}).catch(function(){var r=n.state.expandedKeys,i=(0,ef.arrDel)(r,h);n.setExpandedKeys(i);});}}}),(0,A.default)((0,b.default)(n),"onListChangeStart",function(){n.setUncontrolledState({listChanging:!0});}),(0,A.default)((0,b.default)(n),"onListChangeEnd",function(){setTimeout(function(){n.setUncontrolledState({listChanging:!1});});}),(0,A.default)((0,b.default)(n),"onActiveChange",function(r){var i=n.state.activeKey,a=n.props,o=a.onActiveChange,s=a.itemScrollOffset;i!==r&&(n.setState({activeKey:r}),null!==r&&n.scrollTo({key:r,offset:void 0===s?0:s}),null==o||o(r));}),(0,A.default)((0,b.default)(n),"getActiveItem",function(){var r=n.state,i=r.activeKey,a=r.flattenNodes;return null===i?null:a.find(function(n){return n.key===i;})||null;}),(0,A.default)((0,b.default)(n),"offsetActiveKey",function(r){var i=n.state,a=i.flattenNodes,o=i.activeKey,s=a.findIndex(function(n){return n.key===o;});-1===s&&r<0&&(s=a.length),s=(s+r+a.length)%a.length;var l=a[s];if(l){var u=l.key;n.onActiveChange(u);}else n.onActiveChange(null);}),(0,A.default)((0,b.default)(n),"onKeyDown",function(r){var i=n.state,a=i.activeKey,o=i.expandedKeys,s=i.checkedKeys,l=i.fieldNames,u=n.props,c=u.onKeyDown,f=u.checkable,h=u.selectable;switch(r.which){case R.default.UP:n.offsetActiveKey(-1),r.preventDefault();break;case R.default.DOWN:n.offsetActiveKey(1),r.preventDefault();}var p=n.getActiveItem();if(p&&p.data){var m=n.getTreeNodeRequiredProps(),g=!1===p.data.isLeaf||!!(p.data[l.children]||[]).length,v=(0,K.convertNodePropsToEventData)((0,d.default)((0,d.default)({},(0,K.getTreeNodeProps)(a,m)),{},{data:p.data,active:!0}));switch(r.which){case R.default.LEFT:g&&o.includes(a)?n.onNodeExpand({},v):p.parent&&n.onActiveChange(p.parent.key),r.preventDefault();break;case R.default.RIGHT:g&&!o.includes(a)?n.onNodeExpand({},v):p.children&&p.children.length&&n.onActiveChange(p.children[0].key),r.preventDefault();break;case R.default.ENTER:case R.default.SPACE:!f||v.disabled||!1===v.checkable||v.disableCheckbox?f||!h||v.disabled||!1===v.selectable||n.onNodeSelect({},v):n.onNodeCheck({},v,!s.includes(a));}}null==c||c(r);}),(0,A.default)((0,b.default)(n),"setUncontrolledState",function(r){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!n.destroyed){var o=!1,s=!0,l={};Object.keys(r).forEach(function(i){if(n.props.hasOwnProperty(i)){s=!1;return;}o=!0,l[i]=r[i];}),o&&(!i||s)&&n.setState((0,d.default)((0,d.default)({},l),a));}}),(0,A.default)((0,b.default)(n),"scrollTo",function(r){n.listRef.current.scrollTo(r);}),n;}return(0,y.default)(i,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated();}},{key:"componentDidUpdate",value:function(){this.onUpdated();}},{key:"onUpdated",value:function(){var n=this.props,r=n.activeKey,i=n.itemScrollOffset;void 0!==r&&r!==this.state.activeKey&&(this.setState({activeKey:r}),null!==r&&this.scrollTo({key:r,offset:void 0===i?0:i}));}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0;}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1});}},{key:"render",value:function(){var n,r=this.state,i=r.focused,a=r.flattenNodes,o=r.keyEntities,s=r.draggingNodeKey,u=r.activeKey,f=r.dropLevelOffset,d=r.dropContainerKey,h=r.dropTargetKey,p=r.dropPosition,m=r.dragOverNodeKey,g=r.indent,v=this.props,y=v.prefixCls,_=v.className,b=v.style,x=v.showLine,E=v.focusable,w=v.tabIndex,S=v.selectable,T=v.showIcon,C=v.icon,M=v.switcherIcon,R=v.draggable,P=v.checkable,I=v.checkStrictly,L=v.disabled,N=v.motion,B=v.loadData,j=v.filterTreeNode,z=v.height,U=v.itemHeight,V=v.scrollWidth,G=v.virtual,H=v.titleRender,W=v.dropIndicatorRender,X=v.onContextMenu,q=v.onScroll,$=v.direction,Y=v.rootClassName,Z=v.rootStyle,K=(0,k.default)(this.props,{aria:!0,data:!0});R&&(n="object"===(0,c.default)(R)?R:"function"==typeof R?{nodeDraggable:R}:{});var Q={prefixCls:y,selectable:S,showIcon:T,icon:C,switcherIcon:M,draggable:n,draggingNodeKey:s,checkable:P,checkStrictly:I,disabled:L,keyEntities:o,dropLevelOffset:f,dropContainerKey:d,dropTargetKey:h,dropPosition:p,dragOverNodeKey:m,indent:g,direction:$,dropIndicatorRender:W,loadData:B,filterTreeNode:j,titleRender:H,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop};return D.createElement(F.TreeContext.Provider,{value:Q},D.createElement("div",{className:(0,O.default)(y,_,Y,(0,A.default)((0,A.default)((0,A.default)({},"".concat(y,"-show-line"),x),"".concat(y,"-focused"),i),"".concat(y,"-active-focused"),null!==u)),style:Z},D.createElement(ec,(0,l.default)({ref:this.listRef,prefixCls:y,style:b,data:a,disabled:L,selectable:S,checkable:!!P,motion:N,dragging:null!==s,height:z,itemHeight:U,virtual:G,focusable:E,focused:i,tabIndex:void 0===w?0:w,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:X,onScroll:q,scrollWidth:V},this.getTreeNodeRequiredProps(),K))));}}],[{key:"getDerivedStateFromProps",value:function(n,r){var i,a,o=r.prevProps,s={prevProps:n};function l(r){return!o&&n.hasOwnProperty(r)||o&&o[r]!==n[r];}var u=r.fieldNames;if(l("fieldNames")&&(u=(0,K.fillFieldNames)(n.fieldNames),s.fieldNames=u),l("treeData")?i=n.treeData:l("children")&&((0,L.default)(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),i=(0,K.convertTreeToData)(n.children)),i){s.treeData=i;var c=(0,K.convertDataToEntities)(i,{fieldNames:u});s.keyEntities=(0,d.default)((0,A.default)({},ei,eo),c.keyEntities);}var f=s.keyEntities||r.keyEntities;if(l("expandedKeys")||o&&l("autoExpandParent"))s.expandedKeys=n.autoExpandParent||!o&&n.defaultExpandParent?(0,ef.conductExpandParent)(n.expandedKeys,f):n.expandedKeys;else if(!o&&n.defaultExpandAll){var h=(0,d.default)({},f);delete h[ei];var p=[];Object.keys(h).forEach(function(n){var r=h[n];r.children&&r.children.length&&p.push(r.key);}),s.expandedKeys=p;}else!o&&n.defaultExpandedKeys&&(s.expandedKeys=n.autoExpandParent||n.defaultExpandParent?(0,ef.conductExpandParent)(n.defaultExpandedKeys,f):n.defaultExpandedKeys);if(s.expandedKeys||delete s.expandedKeys,i||s.expandedKeys){var m=(0,K.flattenTreeData)(i||r.treeData,s.expandedKeys||r.expandedKeys,u);s.flattenNodes=m;}if(n.selectable&&(l("selectedKeys")?s.selectedKeys=(0,ef.calcSelectedKeys)(n.selectedKeys,n):!o&&n.defaultSelectedKeys&&(s.selectedKeys=(0,ef.calcSelectedKeys)(n.defaultSelectedKeys,n))),n.checkable&&(l("checkedKeys")?a=(0,ef.parseCheckedKeys)(n.checkedKeys)||{}:!o&&n.defaultCheckedKeys?a=(0,ef.parseCheckedKeys)(n.defaultCheckedKeys)||{}:i&&(a=(0,ef.parseCheckedKeys)(n.checkedKeys)||{checkedKeys:r.checkedKeys,halfCheckedKeys:r.halfCheckedKeys}),a)){var g=a,v=g.checkedKeys,y=void 0===v?[]:v,_=g.halfCheckedKeys,b=void 0===_?[]:_;if(!n.checkStrictly){var x=(0,ed.conductCheck)(y,!0,f);y=x.checkedKeys,b=x.halfCheckedKeys;}s.checkedKeys=y,s.halfCheckedKeys=b;}return l("loadedKeys")&&(s.loadedKeys=n.loadedKeys),s;}}]),i;}(D.Component);(0,A.default)(em,"defaultProps",{prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:function(n){var r=n.dropPosition,i=n.dropLevelOffset,a=n.indent,o={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(r){case -1:o.top=0,o.left=-i*a;break;case 1:o.bottom=0,o.left=-i*a;break;case 0:o.bottom=0,o.left=a;}return D.default.createElement("div",{style:o});},allowDrop:function(){return!0;},expandAction:!1}),(0,A.default)(em,"TreeNode",Z.default);},"6584c86d":function(n,r,i){var a=i("1c9de5a5"),o=i("041c1263"),s=i("a06b9c03"),l=i("12a871f9"),u=i("1b34850d"),c=i("cf1c6f0f"),f=i("ca9928a9"),d=i("8c4eb2fb"),h=i("b182123d"),p=i("fc6080b6"),m=i("30e56a71"),g=i("469db534"),v=i("587eb646"),y=i("a9c8d857"),_=i("875cfa7d"),b=i("bbc15be8"),x=i("a76367d1"),E=i("d11b5d35"),w=i("13850e1a"),S=i("8a7ba941"),T=i("88ddf3cf"),A=i("21446f8a"),C="[object Arguments]",O="[object Function]",M="[object Object]",R={};R[C]=R["[object Array]"]=R["[object ArrayBuffer]"]=R["[object DataView]"]=R["[object Boolean]"]=R["[object Date]"]=R["[object Float32Array]"]=R["[object Float64Array]"]=R["[object Int8Array]"]=R["[object Int16Array]"]=R["[object Int32Array]"]=R["[object Map]"]=R["[object Number]"]=R[M]=R["[object RegExp]"]=R["[object Set]"]=R["[object String]"]=R["[object Symbol]"]=R["[object Uint8Array]"]=R["[object Uint8ClampedArray]"]=R["[object Uint16Array]"]=R["[object Uint32Array]"]=!0,R["[object Error]"]=R[O]=R["[object WeakMap]"]=!1,n.exports=function n(r,i,P,k,I,L){var N,D=1&i,F=2&i,B=4&i;if(P&&(N=I?P(r,k,I,L):P(r)),void 0!==N)return N;if(!w(r))return r;var j=b(r);if(j){if(N=v(r),!D)return f(r,N);}else{var z=g(r),U=z==O||"[object GeneratorFunction]"==z;if(x(r))return c(r,D);if(z==M||z==C||U&&!I){if(N=F||U?{}:_(r),!D)return F?h(r,u(N,r)):d(r,l(N,r));}else{if(!R[z])return I?r:{};N=y(r,z,D);}}L||(L=new a);var V=L.get(r);if(V)return V;L.set(r,N),S(r)?r.forEach(function(a){N.add(n(a,i,P,a,r,L));}):E(r)&&r.forEach(function(a,o){N.set(o,n(a,i,P,o,r,L));});var G=B?F?m:p:F?A:T,H=j?void 0:G(r);return o(H||r,function(a,o){H&&(a=r[o=a]),s(N,o,n(a,i,P,o,r,L));}),N;};},"65a1f2fd":function(n,r,i){"use strict";function a(n,...r){return r.reduce((n,r)=>i=>n(r(i)),n);}i.d(r,"__esModule",{value:!0}),i.d(r,"compose",{enumerable:!0,get:function(){return a;}});},"6625b603":function(n,r,i){"use strict";let{hasOwnProperty:a}=Object.prototype,o=m();o.configure=m,o.stringify=o,o.default=o,r.stringify=o,r.configure=m,n.exports=o;let s=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;function l(n){return n.length<5e3&&!s.test(n)?`"${n}"`:JSON.stringify(n);}function u(n,r){if(n.length>200||r)return n.sort(r);for(let r=1;r<n.length;r++){let i=n[r],a=r;for(;0!==a&&n[a-1]>i;)n[a]=n[a-1],a--;n[a]=i;}return n;}let c=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function f(n){return void 0!==c.call(n)&&0!==n.length;}function d(n,r,i){n.length<i&&(i=n.length);let a=","===r?"":" ",o=`"0":${a}${n[0]}`;for(let s=1;s<i;s++)o+=`${r}"${s}":${a}${n[s]}`;return o;}function h(n,r){let i;if(a.call(n,r)){if("number"!=typeof(i=n[r]))throw TypeError(`The "${r}" argument must be of type number`);if(!Number.isInteger(i))throw TypeError(`The "${r}" argument must be an integer`);if(i<1)throw RangeError(`The "${r}" argument must be >= 1`);}return void 0===i?1/0:i;}function p(n){return 1===n?"1 item":`${n} items`;}function m(n){let r=function(n){if(a.call(n,"strict")){let r=n.strict;if("boolean"!=typeof r)throw TypeError('The "strict" argument must be of type boolean');if(r)return n=>{let r=`Object can not safely be stringified. Received type ${typeof n}`;throw"function"!=typeof n&&(r+=` (${n.toString()})`),Error(r);};}}(n={...n});!r||(void 0===n.bigint&&(n.bigint=!1),"circularValue"in n||(n.circularValue=Error));let i=function(n){if(a.call(n,"circularValue")){let r=n.circularValue;if("string"==typeof r)return`"${r}"`;if(null==r)return r;if(r===Error||r===TypeError)return{toString(){throw TypeError("Converting circular structure to JSON");}};throw TypeError('The "circularValue" argument must be of type string or the value null or undefined');}return'"[Circular]"';}(n),o=function(n,r){let i;if(a.call(n,r)&&"boolean"!=typeof(i=n[r]))throw TypeError(`The "${r}" argument must be of type boolean`);return void 0===i||i;}(n,"bigint"),s=function(n){let r;if(a.call(n,"deterministic")&&"boolean"!=typeof(r=n.deterministic)&&"function"!=typeof r)throw TypeError('The "deterministic" argument must be of type boolean or comparator function');return void 0===r||r;}(n),c="function"==typeof s?s:void 0,m=h(n,"maximumDepth"),g=h(n,"maximumBreadth");return function(n,a,h){if(arguments.length>1){let v="";if("number"==typeof h?v=" ".repeat(Math.min(h,10)):"string"==typeof h&&(v=h.slice(0,10)),null!=a){if("function"==typeof a)return function n(a,d,h,v,y,_){let b=d[a];switch("object"==typeof b&&null!==b&&"function"==typeof b.toJSON&&(b=b.toJSON(a)),typeof(b=v.call(d,a,b))){case"string":return l(b);case"object":{if(null===b)return"null";if(-1!==h.indexOf(b))return i;let r="",a=",",o=_;if(Array.isArray(b)){if(0===b.length)return"[]";if(m<h.length+1)return'"[Array]"';h.push(b),""!==y&&(_+=y,r+=`
${_}`,a=`,
${_}`);let i=Math.min(b.length,g),s=0;for(;s<i-1;s++){let i=n(String(s),b,h,v,y,_);r+=(void 0!==i?i:"null")+a;}let l=n(String(s),b,h,v,y,_);if(r+=void 0!==l?l:"null",b.length-1>g){let n=b.length-g-1;r+=`${a}"... ${p(n)} not stringified"`;}return""!==y&&(r+=`
${o}`),h.pop(),`[${r}]`;}let d=Object.keys(b),x=d.length;if(0===x)return"{}";if(m<h.length+1)return'"[Object]"';let E="",w="";""!==y&&(_+=y,a=`,
${_}`,E=" ");let S=Math.min(x,g);s&&!f(b)&&(d=u(d,c)),h.push(b);for(let i=0;i<S;i++){let o=d[i],s=n(o,b,h,v,y,_);void 0!==s&&(r+=`${w}${l(o)}:${E}${s}`,w=a);}return x>g&&(r+=`${w}"...":${E}"${p(x-g)} not stringified"`,w=a),""!==y&&w.length>1&&(r=`
${_}${r}
${o}`),h.pop(),`{${r}}`;}case"number":return isFinite(b)?String(b):r?r(b):"null";case"boolean":return!0===b?"true":"false";case"undefined":return;case"bigint":if(o)return String(b);default:return r?r(b):void 0;}}("",{"":n},[],a,v,"");if(Array.isArray(a))return function n(a,s,u,c,f,d){switch("object"==typeof s&&null!==s&&"function"==typeof s.toJSON&&(s=s.toJSON(a)),typeof s){case"string":return l(s);case"object":{if(null===s)return"null";if(-1!==u.indexOf(s))return i;let r=d,a="",o=",";if(Array.isArray(s)){if(0===s.length)return"[]";if(m<u.length+1)return'"[Array]"';u.push(s),""!==f&&(d+=f,a+=`
${d}`,o=`,
${d}`);let i=Math.min(s.length,g),l=0;for(;l<i-1;l++){let r=n(String(l),s[l],u,c,f,d);a+=(void 0!==r?r:"null")+o;}let h=n(String(l),s[l],u,c,f,d);if(a+=void 0!==h?h:"null",s.length-1>g){let n=s.length-g-1;a+=`${o}"... ${p(n)} not stringified"`;}return""!==f&&(a+=`
${r}`),u.pop(),`[${a}]`;}u.push(s);let h="";""!==f&&(d+=f,o=`,
${d}`,h=" ");let v="";for(let r of c){let i=n(r,s[r],u,c,f,d);void 0!==i&&(a+=`${v}${l(r)}:${h}${i}`,v=o);}return""!==f&&v.length>1&&(a=`
${d}${a}
${r}`),u.pop(),`{${a}}`;}case"number":return isFinite(s)?String(s):r?r(s):"null";case"boolean":return!0===s?"true":"false";case"undefined":return;case"bigint":if(o)return String(s);default:return r?r(s):void 0;}}("",n,[],function(n){let r=new Set;for(let i of n)("string"==typeof i||"number"==typeof i)&&r.add(String(i));return r;}(a),v,"");}if(0!==v.length)return function n(a,h,v,y,_){switch(typeof h){case"string":return l(h);case"object":{if(null===h)return"null";if("function"==typeof h.toJSON){if("object"!=typeof(h=h.toJSON(a)))return n(a,h,v,y,_);if(null===h)return"null";}if(-1!==v.indexOf(h))return i;let r=_;if(Array.isArray(h)){if(0===h.length)return"[]";if(m<v.length+1)return'"[Array]"';v.push(h),_+=y;let i=`
${_}`,a=`,
${_}`,o=Math.min(h.length,g),s=0;for(;s<o-1;s++){let r=n(String(s),h[s],v,y,_);i+=(void 0!==r?r:"null")+a;}let l=n(String(s),h[s],v,y,_);if(i+=void 0!==l?l:"null",h.length-1>g){let n=h.length-g-1;i+=`${a}"... ${p(n)} not stringified"`;}return i+=`
${r}`,v.pop(),`[${i}]`;}let o=Object.keys(h),b=o.length;if(0===b)return"{}";if(m<v.length+1)return'"[Object]"';_+=y;let x=`,
${_}`,E="",w="",S=Math.min(b,g);f(h)&&(E+=d(h,x,g),o=o.slice(h.length),S-=h.length,w=x),s&&(o=u(o,c)),v.push(h);for(let r=0;r<S;r++){let i=o[r],a=n(i,h[i],v,y,_);void 0!==a&&(E+=`${w}${l(i)}: ${a}`,w=x);}return b>g&&(E+=`${w}"...": "${p(b-g)} not stringified"`,w=x),""!==w&&(E=`
${_}${E}
${r}`),v.pop(),`{${E}}`;}case"number":return isFinite(h)?String(h):r?r(h):"null";case"boolean":return!0===h?"true":"false";case"undefined":return;case"bigint":if(o)return String(h);default:return r?r(h):void 0;}}("",n,[],v,"");}return function n(a,h,v){switch(typeof h){case"string":return l(h);case"object":{if(null===h)return"null";if("function"==typeof h.toJSON){if("object"!=typeof(h=h.toJSON(a)))return n(a,h,v);if(null===h)return"null";}if(-1!==v.indexOf(h))return i;let r="",o=void 0!==h.length;if(o&&Array.isArray(h)){if(0===h.length)return"[]";if(m<v.length+1)return'"[Array]"';v.push(h);let i=Math.min(h.length,g),a=0;for(;a<i-1;a++){let i=n(String(a),h[a],v);r+=(void 0!==i?i:"null")+",";}let o=n(String(a),h[a],v);if(r+=void 0!==o?o:"null",h.length-1>g){let n=h.length-g-1;r+=`,"... ${p(n)} not stringified"`;}return v.pop(),`[${r}]`;}let y=Object.keys(h),_=y.length;if(0===_)return"{}";if(m<v.length+1)return'"[Object]"';let b="",x=Math.min(_,g);o&&f(h)&&(r+=d(h,",",g),y=y.slice(h.length),x-=h.length,b=","),s&&(y=u(y,c)),v.push(h);for(let i=0;i<x;i++){let a=y[i],o=n(a,h[a],v);void 0!==o&&(r+=`${b}${l(a)}:${o}`,b=",");}return _>g&&(r+=`${b}"...":"${p(_-g)} not stringified"`),v.pop(),`{${r}}`;}case"number":return isFinite(h)?String(h):r?r(h):"null";case"boolean":return!0===h?"true":"false";case"undefined":return;case"bigint":if(o)return String(h);default:return r?r(h):void 0;}}("",n,[]);};}},"6654a076":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return x;}});var a=i("777fffbe"),o=i("9b84be4b"),s=a._(o),l=i("e4870cf0"),u=a._(l),c=i("a854094b"),f=a._(c),d=i("553ee311"),h=i("9479dab9"),p=i("2a0a75c8");function m(n){return n.maskOperation===d.MaskOperation.OR?{enable:!0,mask:255,func:{cmp:d.gl.ALWAYS,ref:1,mask:255},opFront:{fail:d.gl.KEEP,zfail:d.gl.REPLACE,zpass:d.gl.REPLACE}}:{enable:!0,mask:255,func:{cmp:n.stencilType===d.StencilType.SINGLE?d.gl.ALWAYS:0===n.stencilIndex?d.gl.ALWAYS:d.gl.LESS,ref:n.stencilType===d.StencilType.SINGLE?1:0===n.stencilIndex?2:1,mask:255},opFront:{fail:d.gl.KEEP,zfail:d.gl.REPLACE,zpass:d.gl.REPLACE}};}var g=i("b278ecbe");let v={opacity:1,stroke:[1,0,0,1],offsets:[0,0],rotation:0,extrusionBase:0,strokeOpacity:1,thetaOffset:.314},y={opacity:"float",stroke:"vec4",offsets:"vec2",textOffset:"vec2",rotation:"float",extrusionBase:"float",strokeOpacity:"float",thetaOffset:"float"};var _=i("cbd0341d");let b="ATTRIBUTE_LOCATION_";class x{get attributeLocation(){return(0,u.default)({},g.COMMON_ATTRIBUTE_LOCATION);}constructor(n){(0,f.default)(this,"triangulation",void 0),(0,f.default)(this,"uniformBuffers",[]),(0,f.default)(this,"textures",[]),(0,f.default)(this,"createTexture2D",void 0),(0,f.default)(this,"preStyleAttribute",{}),(0,f.default)(this,"encodeStyleAttribute",{}),(0,f.default)(this,"layer",void 0),(0,f.default)(this,"dataTexture",void 0),(0,f.default)(this,"DATA_TEXTURE_WIDTH",void 0),(0,f.default)(this,"dataTextureTest",void 0),(0,f.default)(this,"configService",void 0),(0,f.default)(this,"shaderModuleService",void 0),(0,f.default)(this,"rendererService",void 0),(0,f.default)(this,"iconService",void 0),(0,f.default)(this,"fontService",void 0),(0,f.default)(this,"styleAttributeService",void 0),(0,f.default)(this,"mapService",void 0),(0,f.default)(this,"cameraService",void 0),(0,f.default)(this,"layerService",void 0),(0,f.default)(this,"pickingService",void 0),(0,f.default)(this,"attributeUnifoms",void 0),(0,f.default)(this,"commonUnifoms",void 0),this.layer=n,this.configService=n.getContainer().globalConfigService,this.rendererService=n.getContainer().rendererService,this.pickingService=n.getContainer().pickingService,this.shaderModuleService=n.getContainer().shaderModuleService,this.styleAttributeService=n.getContainer().styleAttributeService,this.mapService=n.getContainer().mapService,this.iconService=n.getContainer().iconService,this.fontService=n.getContainer().fontService,this.cameraService=n.getContainer().cameraService,this.layerService=n.getContainer().layerService,this.registerStyleAttribute(),this.registerBuiltinAttributes(),this.startModelAnimate();let{createTexture2D:r}=this.rendererService;this.createTexture2D=r;}getBlend(){let{blend:n="normal"}=this.layer.getLayerConfig();return p.BlendTypes[d.BlendType[n]];}getStencil(n){let{mask:r=!1,maskInside:i=!0,enableMask:a,maskOperation:o=d.MaskOperation.AND}=this.layer.getLayerConfig();return"MaskLayer"===this.layer.type?m({isStencil:!0,stencilType:d.StencilType.SINGLE}):n.isStencil?m((0,u.default)((0,u.default)({},n),{},{maskOperation:o})):{enable:r||a&&0!==this.layer.masks.length||void 0!==this.layer.tileMask,mask:255,func:{cmp:d.gl.EQUAL,ref:i?1:0,mask:1}};}getDefaultStyle(){return{};}getUninforms(){let n=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());this.updateStyleUnifoms();let i=(0,u.default)((0,u.default)({},r.uniformsOption),n.uniformsOption);return Object.keys(i).forEach(n=>{"boolean"==typeof i[n]&&(i[n]=i[n]?1:0);}),!this.rendererService.hasOwnProperty("device")&&this.textures&&1===this.textures.length&&(i.u_texture=this.textures[0]),i;}getAnimateUniforms(){return{};}needUpdate(){return(0,s.default)(function*(){return!1;})();}buildModels(){return(0,s.default)(function*(){throw Error("Method not implemented.");})();}initModels(){return(0,s.default)(function*(){throw Error("Method not implemented.");})();}clearModels(n=!0){}getAttribute(){throw Error("Method not implemented.");}prerender(){}render(n){throw Error("Method not implemented.");}registerBuiltinAttributes(){throw Error("Method not implemented.");}animateOption2Array(n){return[n.enable?0:1,n.duration||4,n.interval||.2,n.trailLength||.1];}startModelAnimate(){let{animateOption:n}=this.layer.getLayerConfig();n.enable&&this.layer.setAnimateStartTime();}getInject(){return function(n,r){let i=[],a="";n.forEach(n=>{let o=n.replace(/([a-z])([A-Z])/g,"$1_$2").toUpperCase();r[n]?a+=`#define USE_ATTRIBUTE_${o} 0.0 
`:i.push(`  ${y[n]} u_${n};`),a+=`
#ifdef USE_ATTRIBUTE_${o}
layout(location = ${b+o}) in ${y[n]} a_${n.charAt(0).toUpperCase()+n.slice(1)};
#endif 
`;});let o=i.length?`
layout(std140) uniform AttributeUniforms {
  ${i.join("\n")}
};
`:"";a+=o;let s="";return n.forEach(n=>{let r=n.replace(/([a-z])([A-Z])/g,"$1_$2").toUpperCase();s+=`
  #ifdef USE_ATTRIBUTE_${r}
    ${y[n]} ${n} = a_${n.charAt(0).toUpperCase()+n.slice(1)};
  #else
    ${y[n]} ${n} = u_${n};
  #endif
  `;}),{"vs:#decl":a,"fs:#decl":o,"vs:#main-start":s};}(this.layer.enableShaderEncodeStyles,this.layer.encodeStyleAttribute);}getDefines(){let n=Object.keys(this.attributeLocation).reduce((n,r)=>(n[b+r]=this.attributeLocation[r],n),{});return(0,u.default)({},n);}getStyleAttribute(){let n={};return this.layer.enableShaderEncodeStyles.forEach(r=>{if(!this.layer.encodeStyleAttribute[r]){let i=this.layer.getLayerConfig()[r],a=void 0===i?v[r]:i;"stroke"===r&&(a=(0,h.rgb2arr)(a)),n["u_"+r]=a;}}),n;}registerStyleAttribute(){Object.keys(this.layer.encodeStyleAttribute).forEach(n=>{let r=(0,g.getCommonStyleAttributeOptions)(n);r&&this.styleAttributeService.registerStyleAttribute(r);});}registerPosition64LowAttribute(n=!0){this.styleAttributeService.registerStyleAttribute({name:"position64Low",type:d.AttributeType.Attribute,descriptor:{name:"a_Position64Low",shaderLocation:this.attributeLocation.POSITION_64LOW,buffer:{data:[],type:d.gl.FLOAT},size:2,update:(r,i,a)=>n?[(0,h.fp64LowPart)(a[0]),(0,h.fp64LowPart)(a[1])]:[0,0]}});}updateEncodeAttribute(n,r){this.encodeStyleAttribute[n]=r;}initUniformsBuffer(){let n=this.getUniformsBufferInfo(this.getStyleAttribute()),r=this.getCommonUniformsInfo();0!==n.uniformsLength&&(this.attributeUnifoms=this.rendererService.createBuffer({data:new Float32Array((0,_.MultipleOfFourNumber)(n.uniformsLength)).fill(0),isUBO:!0,label:"layerModelAttributeUnifoms"}),this.uniformBuffers.push(this.attributeUnifoms)),0!==r.uniformsLength&&(this.commonUnifoms=this.rendererService.createBuffer({data:new Float32Array((0,_.MultipleOfFourNumber)(r.uniformsLength)).fill(0),isUBO:!0,label:"layerModelCommonUnifoms"}),this.uniformBuffers.push(this.commonUnifoms));}getUniformsBufferInfo(n){let r=0,i=[];return Object.values(n).forEach(n=>{Array.isArray(n)?(i.push(...n),r+=n.length):"number"==typeof n?(i.push(n),r+=1):"boolean"==typeof n&&(i.push(Number(n)),r+=1);}),{uniformsOption:n,uniformsLength:r,uniformsArray:i};}getCommonUniformsInfo(){return{uniformsLength:0,uniformsArray:[],uniformsOption:{}};}updateStyleUnifoms(){var n,r;let{uniformsArray:i}=this.getUniformsBufferInfo(this.getStyleAttribute()),{uniformsArray:a}=this.getCommonUniformsInfo();null===(n=this.attributeUnifoms)||void 0===n||n.subData({offset:0,data:new Uint8Array(new Float32Array(i).buffer)}),null===(r=this.commonUnifoms)||void 0===r||r.subData({offset:0,data:new Uint8Array(new Float32Array(a).buffer)});}}},"66659c9e":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{Symbols:function(){return L;},registerSymbol:function(){return D;},useMarker:function(){return N;}});var a=i("5e195043"),o=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let s=(n,r,i)=>[["M",n-i,r],["A",i,i,0,1,0,n+i,r],["A",i,i,0,1,0,n-i,r],["Z"]];s.style=["fill"];let l=s.bind(void 0);l.style=["stroke","lineWidth"];let u=(n,r,i)=>[["M",n-i,r-i],["L",n+i,r-i],["L",n+i,r+i],["L",n-i,r+i],["Z"]];u.style=["fill"];let c=u.bind(void 0);c.style=["fill"];let f=u.bind(void 0);f.style=["stroke","lineWidth"];let d=(n,r,i)=>{let a=.618*i;return[["M",n-a,r],["L",n,r-i],["L",n+a,r],["L",n,r+i],["Z"]];};d.style=["fill"];let h=d.bind(void 0);h.style=["stroke","lineWidth"];let p=(n,r,i)=>{let a=i*Math.sin(1/3*Math.PI);return[["M",n-i,r+a],["L",n,r-a],["L",n+i,r+a],["Z"]];};p.style=["fill"];let m=p.bind(void 0);m.style=["stroke","lineWidth"];let g=(n,r,i)=>{let a=i*Math.sin(1/3*Math.PI);return[["M",n-i,r-a],["L",n+i,r-a],["L",n,r+a],["Z"]];};g.style=["fill"];let v=g.bind(void 0);v.style=["stroke","lineWidth"];let y=(n,r,i)=>{let a=i/2*Math.sqrt(3);return[["M",n,r-i],["L",n+a,r-i/2],["L",n+a,r+i/2],["L",n,r+i],["L",n-a,r+i/2],["L",n-a,r-i/2],["Z"]];};y.style=["fill"];let _=y.bind(void 0);_.style=["stroke","lineWidth"];let b=(n,r,i)=>{let a=i-1.5;return[["M",n-i,r-a],["L",n+i,r+a],["L",n+i,r-a],["L",n-i,r+a],["Z"]];};b.style=["fill"];let x=b.bind(void 0);x.style=["stroke","lineWidth"];let E=(n,r,i)=>[["M",n,r+i],["L",n,r-i]];E.style=["stroke","lineWidth"];let w=(n,r,i)=>[["M",n-i,r-i],["L",n+i,r+i],["M",n+i,r-i],["L",n-i,r+i]];w.style=["stroke","lineWidth"];let S=(n,r,i)=>[["M",n-i/2,r-i],["L",n+i/2,r-i],["M",n,r-i],["L",n,r+i],["M",n-i/2,r+i],["L",n+i/2,r+i]];S.style=["stroke","lineWidth"];let T=(n,r,i)=>[["M",n-i,r],["L",n+i,r],["M",n,r-i],["L",n,r+i]];T.style=["stroke","lineWidth"];let A=(n,r,i)=>[["M",n-i,r],["L",n+i,r]];A.style=["stroke","lineWidth"];let C=(n,r,i)=>[["M",n-i,r],["L",n+i,r]];C.style=["stroke","lineWidth"];let O=C.bind(void 0);O.style=["stroke","lineWidth"];let M=(n,r,i)=>[["M",n-i,r],["A",i/2,i/2,0,1,1,n,r],["A",i/2,i/2,0,1,0,n+i,r]];M.style=["stroke","lineWidth"];let R=(n,r,i)=>[["M",n-i-1,r-2.5],["L",n,r-2.5],["L",n,r+2.5],["L",n+i+1,r+2.5]];R.style=["stroke","lineWidth"];let P=(n,r,i)=>[["M",n-i-1,r+2.5],["L",n,r+2.5],["L",n,r-2.5],["L",n+i+1,r-2.5]];P.style=["stroke","lineWidth"];let k=(n,r,i)=>[["M",n-(i+1),r+2.5],["L",n-i/2,r+2.5],["L",n-i/2,r-2.5],["L",n+i/2,r-2.5],["L",n+i/2,r+2.5],["L",n+i+1,r+2.5]];k.style=["stroke","lineWidth"];let I=(n,r,i)=>[["M",n-5,r+2.5],["L",n-5,r],["L",n,r],["L",n,r-3],["L",n,r+3],["L",n+6.5,r+3]];I.style=["stroke","lineWidth"];let L=new Map([["bowtie",b],["cross",w],["dash",O],["diamond",d],["dot",C],["hexagon",y],["hollowBowtie",x],["hollowDiamond",h],["hollowHexagon",_],["hollowPoint",l],["hollowSquare",f],["hollowTriangle",m],["hollowTriangleDown",v],["hv",R],["hvh",k],["hyphen",A],["line",E],["plus",T],["point",s],["rect",c],["smooth",M],["square",u],["tick",S],["triangleDown",g],["triangle",p],["vh",P],["vhv",I]]);function N(n,r){var{d:i,fill:s,lineWidth:l,path:u,stroke:c,color:f}=r,d=o(r,["d","fill","lineWidth","path","stroke","color"]);let h=L.get(n)||L.get("point");return(...n)=>new a.Path({style:Object.assign(Object.assign({},d),{d:h(...n),stroke:h.style.includes("stroke")?f||c:"",fill:h.style.includes("fill")?f||s:"",lineWidth:h.style.includes("lineWidth")?l||l||2:0})});}function D(n,r){L.set(n,r);}},"66a0ba1a":function(n,r,i){var a=i("2eaee10a");n.exports=function(n,r){if(null==n)return{};var i,o,s=a(n,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(o=0;o<l.length;o++)i=l[o],-1===r.indexOf(i)&&({}).propertyIsEnumerable.call(n,i)&&(s[i]=n[i]);}return s;},n.exports.__esModule=!0,n.exports.default=n.exports;},"66cc087b":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{makeChartComp:function(){return f;}});var a=i("852bbaa9"),o=i("609f48be"),s=a._(o),l=i("7d9c7484"),u=(0,s.createContext)({}),c=this&&this.__assign||function(){return(c=Object.assign||function(n){for(var r,i=1,a=arguments.length;i<a;i++)for(var o in r=arguments[i])Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n;}).apply(this,arguments);};function f(n){var r=n.charAt(0).toLowerCase()+n.slice(1);return(0,s.forwardRef)(function(i,a){var o=(0,s.useContext)(u);return s.default.createElement(l.BaseChart,c({},o.common,o[r],i,{chartType:n,ref:a}));});}},"670b2160":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});var a=function(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991;};},"6810f89b":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return d;}});var a=i("777fffbe"),o=a._(i("e4870cf0")),s=a._(i("613f75ca")),l=a._(i("609f48be")),u=a._(i("551ddf56")),c=i("dac8af92"),f=["fieldProps","proFieldProps"],d=l.default.forwardRef(function(n,r){var i=n.fieldProps,a=n.proFieldProps,l=(0,s.default)(n,f);return(0,c.jsx)(u.default,(0,o.default)({ref:r,valueType:"textarea",fieldProps:i,proFieldProps:a},l));});},"6881d6a9":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return h;}});var a=i("777fffbe"),o=i("e4870cf0"),s=a._(o),l=i("a854094b"),u=a._(l),c=i("5fc8b0d8"),f=a._(c),d=i("299b5c10");a._(d),i("5dd400a3");class h{constructor(){(0,u.default)(this,"viewport",new f.default);}syncWithMapCamera(n){let{center:r,zoom:i,pitch:a,bearing:o,viewportHeight:l,viewportWidth:u}=n,c={width:this.viewport.width,height:this.viewport.height,longitude:this.viewport.center[0],latitude:this.viewport.center[1],zoom:this.viewport.zoom,pitch:this.viewport.pitch,bearing:this.viewport.bearing};this.viewport=new f.default((0,s.default)((0,s.default)({},c),{},{width:u,height:l,longitude:r&&r[0],latitude:r&&r[1],zoom:i,pitch:a,bearing:o}));}getZoom(){return this.viewport.zoom;}getZoomScale(){return Math.pow(2,this.getZoom());}getCenter(){return[this.viewport.longitude,this.viewport.latitude];}getProjectionMatrix(){return this.viewport.projectionMatrix;}getModelMatrix(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];}getViewMatrix(){return this.viewport.viewMatrix;}getViewMatrixUncentered(){return this.viewport.viewMatrixUncentered;}getViewProjectionMatrix(){return this.viewport.viewProjectionMatrix;}getViewProjectionMatrixUncentered(){return this.viewport.viewProjectionMatrix;}getFocalDistance(){return 1;}projectFlat(n,r){return this.viewport.projectFlat(n,r);}}},"68f802c0":function(n,r,i){"use strict";function a(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.reduce(function(n,r){return n*("positive"===r?-1:1);},1);}i.d(r,"__esModule",{value:!0}),i.d(r,"getFactor",{enumerable:!0,get:function(){return a;}});},"69002c1a":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{bisectCenter:function(){return d;},bisectLeft:function(){return f;},bisectRight:function(){return c;},default:function(){return h;}});var a=i("777fffbe"),o=a._(i("4f81a096")),s=a._(i("9841474e")),l=a._(i("5007e869"));let u=(0,s.default)(o.default),c=u.right,f=u.left,d=(0,s.default)(l.default).center;var h=c;},"6909693a":function(n,r,i){var a=i("041c1263"),o=i("7af457f4"),s=i("191f48a8"),l=i("bbc15be8");n.exports=function(n,r){return(l(n)?a:o)(n,s(r));};},"696c14ad":function(n,r,i){var a=i("7af457f4"),o=i("137e7cc0");n.exports=function(n,r){var i=-1,s=o(n)?Array(n.length):[];return a(n,function(n,a,o){s[++i]=r(n,a,o);}),s;};},"6a859b73":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return o;}});let a=i("f5124c7f");var o="object"==typeof a&&a&&a.Object===Object&&a;},"6aaf503e":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});var a=function(n){return void 0===n;};},"6b07dc07":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{Color:function(){return s;},Rgb:function(){return O;},brighter:function(){return u;},darker:function(){return l;},default:function(){return w;},hsl:function(){return L;},hslConvert:function(){return I;},rgb:function(){return C;},rgbConvert:function(){return A;}});var a=function(n,r,i){n.prototype=r.prototype=i,i.constructor=n;};function o(n,r){var i=Object.create(n.prototype);for(var a in r)i[a]=r[a];return i;}function s(){}var l=.7,u=1.4285714285714286,c="\\s*([+-]?\\d+)\\s*",f="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",d="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",h=/^#([0-9a-f]{3,8})$/,p=RegExp("^rgb\\("+[c,c,c]+"\\)$"),m=RegExp("^rgb\\("+[d,d,d]+"\\)$"),g=RegExp("^rgba\\("+[c,c,c,f]+"\\)$"),v=RegExp("^rgba\\("+[d,d,d,f]+"\\)$"),y=RegExp("^hsl\\("+[f,d,d]+"\\)$"),_=RegExp("^hsla\\("+[f,d,d,f]+"\\)$"),b={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function x(){return this.rgb().formatHex();}function E(){return this.rgb().formatRgb();}function w(n){var r,i;return n=(n+"").trim().toLowerCase(),(r=h.exec(n))?(i=r[1].length,r=parseInt(r[1],16),6===i?S(r):3===i?new O(r>>8&15|r>>4&240,r>>4&15|240&r,(15&r)<<4|15&r,1):8===i?T(r>>24&255,r>>16&255,r>>8&255,(255&r)/255):4===i?T(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|240&r,((15&r)<<4|15&r)/255):null):(r=p.exec(n))?new O(r[1],r[2],r[3],1):(r=m.exec(n))?new O(255*r[1]/100,255*r[2]/100,255*r[3]/100,1):(r=g.exec(n))?T(r[1],r[2],r[3],r[4]):(r=v.exec(n))?T(255*r[1]/100,255*r[2]/100,255*r[3]/100,r[4]):(r=y.exec(n))?k(r[1],r[2]/100,r[3]/100,1):(r=_.exec(n))?k(r[1],r[2]/100,r[3]/100,r[4]):b.hasOwnProperty(n)?S(b[n]):"transparent"===n?new O(NaN,NaN,NaN,0):null;}function S(n){return new O(n>>16&255,n>>8&255,255&n,1);}function T(n,r,i,a){return a<=0&&(n=r=i=NaN),new O(n,r,i,a);}function A(n){return(n instanceof s||(n=w(n)),n)?new O((n=n.rgb()).r,n.g,n.b,n.opacity):new O;}function C(n,r,i,a){return 1==arguments.length?A(n):new O(n,r,i,null==a?1:a);}function O(n,r,i,a){this.r=+n,this.g=+r,this.b=+i,this.opacity=+a;}function M(){return"#"+P(this.r)+P(this.g)+P(this.b);}function R(){var n=this.opacity;return(1===(n=isNaN(n)?1:Math.max(0,Math.min(1,n)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===n?")":", "+n+")");}function P(n){return((n=Math.max(0,Math.min(255,Math.round(n)||0)))<16?"0":"")+n.toString(16);}function k(n,r,i,a){return a<=0?n=r=i=NaN:i<=0||i>=1?n=r=NaN:r<=0&&(n=NaN),new N(n,r,i,a);}function I(n){if(n instanceof N)return new N(n.h,n.s,n.l,n.opacity);if(n instanceof s||(n=w(n)),!n)return new N;if(n instanceof N)return n;var r=(n=n.rgb()).r/255,i=n.g/255,a=n.b/255,o=Math.min(r,i,a),l=Math.max(r,i,a),u=NaN,c=l-o,f=(l+o)/2;return c?(u=r===l?(i-a)/c+(i<a)*6:i===l?(a-r)/c+2:(r-i)/c+4,c/=f<.5?l+o:2-l-o,u*=60):c=f>0&&f<1?0:u,new N(u,c,f,n.opacity);}function L(n,r,i,a){return 1==arguments.length?I(n):new N(n,r,i,null==a?1:a);}function N(n,r,i,a){this.h=+n,this.s=+r,this.l=+i,this.opacity=+a;}function D(n,r,i){return(n<60?r+(i-r)*n/60:n<180?i:n<240?r+(i-r)*(240-n)/60:r)*255;}a(s,w,{copy:function(n){return Object.assign(new this.constructor,this,n);},displayable:function(){return this.rgb().displayable();},hex:x,formatHex:x,formatHsl:function(){return I(this).formatHsl();},formatRgb:E,toString:E}),a(O,C,o(s,{brighter:function(n){return n=null==n?u:Math.pow(u,n),new O(this.r*n,this.g*n,this.b*n,this.opacity);},darker:function(n){return n=null==n?l:Math.pow(l,n),new O(this.r*n,this.g*n,this.b*n,this.opacity);},rgb:function(){return this;},displayable:function(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1;},hex:M,formatHex:M,formatRgb:R,toString:R})),a(N,L,o(s,{brighter:function(n){return n=null==n?u:Math.pow(u,n),new N(this.h,this.s,this.l*n,this.opacity);},darker:function(n){return n=null==n?l:Math.pow(l,n),new N(this.h,this.s,this.l*n,this.opacity);},rgb:function(){var n=this.h%360+(this.h<0)*360,r=isNaN(n)||isNaN(this.s)?0:this.s,i=this.l,a=i+(i<.5?i:1-i)*r,o=2*i-a;return new O(D(n>=240?n-240:n+120,o,a),D(n,o,a),D(n<120?n+240:n-120,o,a),this.opacity);},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1;},formatHsl:function(){var n=this.opacity;return(1===(n=isNaN(n)?1:Math.max(0,Math.min(1,n)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===n?")":", "+n+")");}}));},"6bb3a01b":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{INTERNAL_COL_DEFINE:function(){return u;},getExpandableProps:function(){return c;}});var a=i("777fffbe"),o=a._(i("e4870cf0")),s=a._(i("613f75ca"));i("a275200c");var l=["expandable"],u="RC_TABLE_INTERNAL_COL_DEFINE";function c(n){var r,i=n.expandable,a=(0,s.default)(n,l);return!1===(r="expandable"in n?(0,o.default)((0,o.default)({},a),i):a).showExpandColumn&&(r.expandIconColumnIndex=-1),r;}},"6bc9e075":function(n,r,i){var a=i("6040b637");n.exports=function(){return a.Date.now();};},"6c4af3b3":function(n,r,i){var a=i("92a1e96c"),o=i("0272f1d7"),s=i("c62e4689");function l(n){var r=-1,i=null==n?0:n.length;for(this.__data__=new a;++r<i;)this.add(n[r]);}l.prototype.add=l.prototype.push=o,l.prototype.has=s,n.exports=l;},"6c581265":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return en;},proFieldParsingValueEnumToArray:function(){return ee;},useFieldFetchData:function(){return et;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("e4870cf0"),l=a._(s),u=i("613f75ca"),c=a._(u),f=i("ee64167d"),d=a._(f),h=i("99c0cd4c"),p=a._(h),m=i("f1020fa4"),g=a._(m),v=i("a854094b"),y=a._(v),_=i("64681837"),b=i("0a30d8df"),x=i("4e8d0e83");i("0c043dda"),i("c2914231"),i("c5019dac"),i("c5499b8c"),i("865cc100");var E=i("a3273044"),w=i("e7d0cdde"),S=i("a5a99096"),T=a._(S),A=i("e68da947"),C=a._(A),O=i("609f48be"),M=o._(O),R=i("9d6414cf"),P=a._(R),k=i("664b170c"),I=a._(k),L=i("13e8e493"),N=i("be902df5"),D=a._(N),F=i("cef31543"),B=a._(F),j=i("064ecd09"),z=a._(j),U=i("f3efd1e9"),V=a._(U),G=i("dac8af92"),H=["label","prefixCls","onChange","value","mode","children","defaultValue","size","showSearch","disabled","style","className","bordered","options","onSearch","allowClear","labelInValue","fieldNames","lightLabel","labelTrigger","optionFilterProp","optionLabelProp","valueMaxLength","fetchDataOnSearch","fetchData"],W=function(n,r){return"object"!==(0,p.default)(r)?n[r]||r:n[null==r?void 0:r.value]||r.label;},X=M.default.forwardRef(function(n,r){var i=n.label,a=n.prefixCls,o=n.onChange,s=n.value,u=n.mode,f=(n.children,n.defaultValue,n.size),h=n.showSearch,p=n.disabled,m=n.style,g=n.className,v=n.bordered,_=n.options,x=n.onSearch,w=n.allowClear,S=n.labelInValue,A=n.fieldNames,C=n.lightLabel,O=n.labelTrigger,R=n.optionFilterProp,P=n.optionLabelProp,k=void 0===P?"":P,N=n.valueMaxLength,F=n.fetchDataOnSearch,j=void 0!==F&&F,U=n.fetchData,X=(0,c.default)(n,H),q=n.placeholder,$=void 0===q?i:q,Y=A||{},Z=Y.label,K=void 0===Z?"label":Z,Q=Y.value,J=void 0===Q?"value":Q,ee=(0,(0,M.useContext)(T.default.ConfigContext).getPrefixCls)("pro-field-select-light-select"),et=(0,M.useState)(!1),en=(0,d.default)(et,2),er=en[0],ei=en[1],ea=(0,M.useState)(""),eo=(0,d.default)(ea,2),es=eo[0],el=eo[1],eu=(0,E.useStyle)("LightSelect",function(n){return(0,y.default)({},".".concat(ee),(0,y.default)((0,y.default)({},"".concat(n.antCls,"-select"),{position:"absolute",width:"153px",height:"28px",visibility:"hidden","&-selector":{height:28}}),"&.".concat(ee,"-searchable"),(0,y.default)({},"".concat(n.antCls,"-select"),{width:"200px","&-selector":{height:28}})));}),ec=eu.wrapSSR,ef=eu.hashId,ed=(0,M.useMemo)(function(){var n={};return null==_||_.forEach(function(r){var i=r[k]||r[K],a=r[J];n[a]=i||a;}),n;},[K,_,J,k]),eh=(0,M.useMemo)(function(){return Reflect.has(X,"open")?null==X?void 0:X.open:er;},[er,X]),ep=Array.isArray(s)?s.map(function(n){return W(ed,n);}):W(ed,s);return ec((0,G.jsxs)("div",{className:(0,z.default)(ee,ef,(0,y.default)({},"".concat(ee,"-searchable"),h),"".concat(ee,"-container-").concat(X.placement||"bottomLeft"),g),style:m,onClick:function(n){if(!p){var r;(null==C||null===(r=C.current)||void 0===r||null===(r=r.labelRef)||void 0===r||null===(r=r.current)||void 0===r?void 0:r.contains(n.target))&&ei(!er);}},children:[(0,G.jsx)(B.default,(0,l.default)((0,l.default)((0,l.default)({},X),{},{allowClear:w,value:s,mode:u,labelInValue:S,size:f,disabled:p,onChange:function(n,r){null==o||o(n,r),"multiple"!==u&&ei(!1);}},(0,b.compatibleBorder)(v)),{},{showSearch:h,onSearch:h?function(n){j&&U&&U(n),null==x||x(n);}:void 0,style:m,dropdownRender:function(n){return(0,G.jsxs)("div",{ref:r,children:[h&&(0,G.jsx)("div",{style:{margin:"4px 8px"},children:(0,G.jsx)(D.default,{value:es,allowClear:!!w,onChange:function(n){el(n.target.value),j&&U&&U(n.target.value),null==x||x(n.target.value);},onKeyDown:function(n){if("Backspace"===n.key){n.stopPropagation();return;}("ArrowUp"===n.key||"ArrowDown"===n.key)&&n.preventDefault();},style:{width:"100%"},prefix:(0,G.jsx)(I.default,{})})}),n]});},open:eh,onDropdownVisibleChange:function(n){var r;n||el(""),O||ei(n),null==X||null===(r=X.onDropdownVisibleChange)||void 0===r||r.call(X,n);},prefixCls:a,options:x||!es?_:null==_?void 0:_.filter(function(n){var r,i;return R?(0,V.default)(n[R]).join("").toLowerCase().includes(es):(null===(r=String(n[K]))||void 0===r||null===(r=r.toLowerCase())||void 0===r?void 0:r.includes(null==es?void 0:es.toLowerCase()))||(null===(i=n[J])||void 0===i||null===(i=i.toString())||void 0===i||null===(i=i.toLowerCase())||void 0===i?void 0:i.includes(null==es?void 0:es.toLowerCase()));})})),(0,G.jsx)(L.FieldLabel,{ellipsis:!0,label:i,placeholder:$,disabled:p,bordered:v,allowClear:!!w,value:ep||(null==s?void 0:s.label)||s,onClear:function(){null==o||o(void 0,void 0);},ref:C,valueMaxLength:void 0===N?41:N})]}));}),q=["optionItemRender","mode","onSearch","onFocus","onChange","autoClearSearchValue","searchOnFocus","resetAfterSelect","fetchDataOnSearch","optionFilterProp","optionLabelProp","className","disabled","options","fetchData","resetData","prefixCls","onClear","searchValue","showSearch","fieldNames","defaultSearchValue","preserveOriginalLabel"],$=["className","optionType"],Y=M.default.forwardRef(function(n,r){var i=n.optionItemRender,a=n.mode,o=n.onSearch,s=n.onFocus,u=n.onChange,f=n.autoClearSearchValue,h=void 0===f||f,p=n.searchOnFocus,m=void 0!==p&&p,g=n.resetAfterSelect,v=void 0!==g&&g,_=n.fetchDataOnSearch,b=void 0===_||_,E=n.optionFilterProp,w=n.optionLabelProp,S=n.className,A=n.disabled,C=n.options,O=n.fetchData,R=n.resetData,P=n.prefixCls,k=n.onClear,I=n.searchValue,L=n.showSearch,N=n.fieldNames,D=n.defaultSearchValue,F=n.preserveOriginalLabel,j=void 0!==F&&F,U=(0,c.default)(n,q),V=N||{},H=V.label,W=void 0===H?"label":H,X=V.value,Y=void 0===X?"value":X,Z=V.options,K=void 0===Z?"options":Z,Q=(0,M.useState)(null!=I?I:D),J=(0,d.default)(Q,2),ee=J[0],et=J[1],en=(0,M.useRef)();(0,M.useImperativeHandle)(r,function(){return en.current;}),(0,M.useEffect)(function(){if(U.autoFocus){var n;null==en||null===(n=en.current)||void 0===n||n.focus();}},[U.autoFocus]),(0,M.useEffect)(function(){et(I);},[I]);var er=(0,(0,M.useContext)(T.default.ConfigContext).getPrefixCls)("pro-filed-search-select",P),ei=(0,z.default)(er,S,(0,y.default)({},"".concat(er,"-disabled"),A));return(0,G.jsx)(B.default,(0,l.default)((0,l.default)({ref:en,className:ei,allowClear:!0,autoClearSearchValue:h,disabled:A,mode:a,showSearch:L,searchValue:ee,optionFilterProp:void 0===E?"label":E,optionLabelProp:void 0===w?"label":w,onClear:function(){null==k||k(),O(void 0),L&&et(void 0);}},U),{},{filterOption:!1!=U.filterOption&&function(n,r){var i,a,o;return U.filterOption&&"function"==typeof U.filterOption?U.filterOption(n,(0,l.default)((0,l.default)({},r),{},{label:null==r?void 0:r.data_title})):!!(null!=r&&null!==(i=r.data_title)&&void 0!==i&&i.toString().toLowerCase().includes(n.toLowerCase())||null!=r&&null!==(a=r.label)&&void 0!==a&&a.toString().toLowerCase().includes(n.toLowerCase())||null!=r&&null!==(o=r.value)&&void 0!==o&&o.toString().toLowerCase().includes(n.toLowerCase()));},onSearch:L?function(n){b&&O(n),null==o||o(n),et(n);}:void 0,onChange:function(r,i){L&&h&&(O(void 0),null==o||o(""),et(void 0));for(var s=arguments.length,c=Array(s>2?s-2:0),f=2;f<s;f++)c[f-2]=arguments[f];if(!n.labelInValue){null==u||u.apply(void 0,[r,i].concat(c));return;}if("multiple"!==a&&!Array.isArray(i)){var d=i&&i["data-item"];if(r&&d)null==u||u.apply(void 0,[(0,l.default)((0,l.default)((0,l.default)({},r),d),{},{label:j?d.label:r.label}),i].concat(c));else{var p=r?(0,l.default)((0,l.default)({},r),{},{label:j&&(null==d?void 0:d.label)||r.label}):r;null==u||u.apply(void 0,[p,i].concat(c));}return;}var m=Array.isArray(r)&&Array.isArray(i)&&r.length>0?r.map(function(n,r){var a=null==i?void 0:i[r],o=(null==a?void 0:a["data-item"])||{};return(0,l.default)((0,l.default)((0,l.default)({},o),n),{},{label:j?o.label:n.label});}):[];null==u||u.apply(void 0,[m,i].concat(c)),v&&R();},onFocus:function(n){m&&O(ee),null==s||s(n);},options:function n(r){return r.map(function(r,a){var o,s=r.className,u=r.optionType,f=(0,c.default)(r,$),d=r[W],h=r[Y],p=null!==(o=r[K])&&void 0!==o?o:[];return"optGroup"===u||r.options?(0,l.default)((0,l.default)({label:d},f),{},{data_title:d,title:d,key:null!=h?h:"".concat(null==d?void 0:d.toString(),"-").concat(a,"-").concat((0,x.nanoid)()),children:n(p)}):(0,l.default)((0,l.default)({title:d},f),{},{data_title:d,value:null!=h?h:a,key:null!=h?h:"".concat(null==d?void 0:d.toString(),"-").concat(a,"-").concat((0,x.nanoid)()),"data-item":r,className:"".concat(er,"-option ").concat(s||"").trim(),label:(null==i?void 0:i(r))||d});});}(C||[])}));});i("66663968");var Z=["value","text"],K=["mode","valueEnum","render","renderFormItem","request","fieldProps","plain","children","light","proFieldKey","params","label","bordered","id","lightLabel","labelTrigger"],Q=function(n){for(var r=n.label,i=n.words,a=(0,M.useContext)(T.default.ConfigContext).getPrefixCls,o=a("pro-select-item-option-content-light"),s=a("pro-select-item-option-content"),l=(0,w.useStyle)("Highlight",function(n){return(0,y.default)((0,y.default)({},".".concat(o),{color:n.colorPrimary}),".".concat(s),{flex:"auto",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"});}).wrapSSR,u=RegExp(i.map(function(n){return n.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&");}).join("|"),"gi"),c=r,f=[];c.length;){var d=u.exec(c);if(!d){f.push(c);break;}var h=d.index,p=d[0].length+h;f.push(c.slice(0,h),M.default.createElement("span",{className:o},c.slice(h,p))),c=c.slice(p);}return l(M.default.createElement.apply(M.default,["div",{title:r,className:s}].concat(f)));};function J(n,r){var i,a;return!!(!r||null!=n&&null!==(i=n.label)&&void 0!==i&&i.toString().toLowerCase().includes(r.toLowerCase())||null!=n&&null!==(a=n.value)&&void 0!==a&&a.toString().toLowerCase().includes(r.toLowerCase())||(n.children||n.options)&&[].concat((0,g.default)(n.children||[]),[n.options||[]]).find(function(n){return J(n,r);}));}var ee=function(n){var r=[],i=(0,w.objectToMap)(n);return i.forEach(function(n,a){var o=i.get(a)||i.get("".concat(a));if(o){if("object"===(0,p.default)(o)&&null!=o&&o.text){r.push({text:null==o?void 0:o.text,value:a,label:null==o?void 0:o.text,disabled:o.disabled});return;}r.push({text:o,value:a});}}),r;},et=function(n){var r,i,a,o,s=n.cacheForSwr,u=n.fieldProps,f=(0,M.useState)(n.defaultKeyWords),h=(0,d.default)(f,2),p=h[0],m=h[1],v=(0,M.useState)(function(){return n.proFieldKey?n.proFieldKey.toString():n.request?(0,w.nanoid)():"no-fetch";}),y=(0,d.default)(v,1)[0],_=(0,M.useRef)(y),b=(0,w.useRefFunction)(function(n){return ee((0,w.objectToMap)(n)).map(function(n){var r=n.value,i=n.text,a=(0,c.default)(n,Z);return(0,l.default)({label:i,value:r,key:r},a);});}),x=(0,w.useDeepCompareMemo)(function(){if(u){var n=(null==u?void 0:u.options)||(null==u?void 0:u.treeData);if(n){var r=u.fieldNames||{},i=r.children,a=r.label,o=r.value,s=function n(r,s){if(null!=r&&r.length)for(var l=r.length,u=0;u<l;){var c=r[u++];(c[i]||c[a]||c[o])&&(c[s]=c["children"===s?i:"label"===s?a:o],n(c[i],s));}};return i&&s(n,"children"),a&&s(n,"label"),o&&s(n,"value"),n;}}},[u]),E=(0,w.useMountMergeState)(function(){return n.valueEnum?b(n.valueEnum):[];},{value:x}),S=(0,d.default)(E,2),T=S[0],A=S[1];(0,w.useDeepCompareEffect)(function(){var r,i;!n.valueEnum||null!==(r=n.fieldProps)&&void 0!==r&&r.options||null!==(i=n.fieldProps)&&void 0!==i&&i.treeData||A(b(n.valueEnum));},[n.valueEnum]);var C=(0,w.useDebounceValue)([_.current,n.params,p],null!==(r=null!==(i=n.debounceTime)&&void 0!==i?i:null==n||null===(a=n.fieldProps)||void 0===a?void 0:a.debounceTime)&&void 0!==r?r:0,[n.params,p]),O=(0,P.default)(function(){return n.request?C:null;},function(r){var i=(0,d.default)(r,3),a=i[1],o=i[2];return n.request((0,l.default)((0,l.default)({},a),{},{keyWords:o}),n);},{revalidateIfStale:!s,revalidateOnReconnect:s,shouldRetryOnError:!1,revalidateOnFocus:!1}),R=O.data,k=O.mutate,I=O.isValidating,L=(0,M.useMemo)(function(){var r,i,a=null==T?void 0:T.map(function(n){if("string"==typeof n)return{label:n,value:n};if(n.children||n.options){var r=[].concat((0,g.default)(n.children||[]),(0,g.default)(n.options||[])).filter(function(n){return J(n,p);});return(0,l.default)((0,l.default)({},n),{},{children:r,options:r});}return n;});return(null===(r=n.fieldProps)||void 0===r?void 0:r.filterOption)===!0||(null===(i=n.fieldProps)||void 0===i?void 0:i.filterOption)===void 0?null==a?void 0:a.filter(function(n){return!!n&&(!p||J(n,p));}):a;},[T,p,null===(o=n.fieldProps)||void 0===o?void 0:o.filterOption]);return[I,n.request?R:L,function(n){m(n);},function(){m(void 0),k([],!1);}];},en=M.default.forwardRef(function(n,r){var i=n.mode,a=n.valueEnum,o=n.render,s=n.renderFormItem,u=(n.request,n.fieldProps),f=(n.plain,n.children,n.light),h=(n.proFieldKey,n.params,n.label),p=n.bordered,m=n.id,g=n.lightLabel,v=n.labelTrigger,y=(0,c.default)(n,K),b=(0,M.useRef)(),x=(0,_.useIntl)(),E=(0,M.useRef)(""),S=u.fieldNames;(0,M.useEffect)(function(){E.current=null==u?void 0:u.searchValue;},[null==u?void 0:u.searchValue]);var A=et(n),O=(0,d.default)(A,4),R=O[0],P=O[1],k=O[2],I=O[3],L=((null===T.default||void 0===T.default||null===(D=T.default.useConfig)||void 0===D?void 0:D.call(T.default))||{componentSize:"middle"}).componentSize;(0,M.useImperativeHandle)(r,function(){return(0,l.default)((0,l.default)({},b.current||{}),{},{fetchData:function(n){return k(n);}});},[k]);var N=(0,M.useMemo)(function(){if("read"===i){var n=S||{},r=n.label,a=void 0===r?"label":r,o=n.value,s=void 0===o?"value":o,l=n.options,u=void 0===l?"options":l,c=new Map;return function n(r){if(!(null!=r&&r.length))return c;for(var i=r.length,o=0;o<i;){var l=r[o++];c.set(l[s],l[a]),n(l[u]);}return c;}(P);}},[S,i,P]);if("read"===i){var D,F,B=(0,G.jsx)(G.Fragment,{children:(0,w.proFieldParsingText)(y.text,(0,w.objectToMap)(a||N))});return o?null!==(F=o(B,(0,l.default)((0,l.default)({mode:i},u),{},{options:P}),B))&&void 0!==F?F:null:B;}if("edit"===i||"update"===i){var j,z=f?(0,G.jsx)(X,(0,l.default)((0,l.default)({},(0,w.compatibleBorder)(p)),{},{id:m,loading:R,ref:b,allowClear:!0,size:L,options:P,label:h,placeholder:x.getMessage("tableForm.selectPlaceholder","\u8BF7\u9009\u62E9"),lightLabel:g,labelTrigger:v,fetchData:k},u)):(0,G.jsx)(Y,(0,l.default)((0,l.default)((0,l.default)({className:y.className,style:(0,l.default)({minWidth:100},y.style)},(0,w.compatibleBorder)(p)),{},{id:m,loading:R,ref:b,allowClear:!0,defaultSearchValue:n.defaultKeyWords,notFoundContent:R?(0,G.jsx)(C.default,{size:"small"}):null==u?void 0:u.notFoundContent,fetchData:function(n){E.current=null!=n?n:"",k(n);},resetData:I,preserveOriginalLabel:!0,optionItemRender:function(n){return"string"==typeof n.label&&E.current?(0,G.jsx)(Q,{label:n.label,words:[E.current]}):n.label;},placeholder:x.getMessage("tableForm.selectPlaceholder","\u8BF7\u9009\u62E9"),label:h},u),{},{options:P}),"SearchSelect");return s?null!==(j=s(y.text,(0,l.default)((0,l.default)({mode:i},u),{},{options:P,loading:R}),z))&&void 0!==j?j:null:z;}return null;});},"6c85d1a4":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return E;},format:function(){return s;},formatPrefix:function(){return l;}});var a,o,s,l,u=i("852bbaa9"),c=i("fa737a40"),f=u._(c),d=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function h(n){var r;if(!(r=d.exec(n)))throw Error("invalid format: "+n);return new p({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]});}function p(n){this.fill=void 0===n.fill?" ":n.fill+"",this.align=void 0===n.align?">":n.align+"",this.sign=void 0===n.sign?"-":n.sign+"",this.symbol=void 0===n.symbol?"":n.symbol+"",this.zero=!!n.zero,this.width=void 0===n.width?void 0:+n.width,this.comma=!!n.comma,this.precision=void 0===n.precision?void 0:+n.precision,this.trim=!!n.trim,this.type=void 0===n.type?"":n.type+"";}h.prototype=p.prototype,p.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type;};var m=function(n){n:for(var r,i=n.length,a=1,o=-1;a<i;++a)switch(n[a]){case".":o=r=a;break;case"0":0===o&&(o=a),r=a;break;default:if(!+n[a])break n;o>0&&(o=0);}return o>0?n.slice(0,o)+n.slice(r+1):n;},g=function(n,r){var i=(0,f.formatDecimalParts)(n,r);if(!i)return n+"";var a=i[0],o=i[1];return o<0?"0."+Array(-o).join("0")+a:a.length>o+1?a.slice(0,o+1)+"."+a.slice(o+1):a+Array(o-a.length+2).join("0");},v={"%":(n,r)=>(100*n).toFixed(r),b:n=>Math.round(n).toString(2),c:n=>n+"",d:f.default,e:(n,r)=>n.toExponential(r),f:(n,r)=>n.toFixed(r),g:(n,r)=>n.toPrecision(r),o:n=>Math.round(n).toString(8),p:(n,r)=>g(100*n,r),r:g,s:function(n,r){var i=(0,f.formatDecimalParts)(n,r);if(!i)return n+"";var o=i[0],s=i[1],l=s-(a=3*Math.max(-8,Math.min(8,Math.floor(s/3))))+1,u=o.length;return l===u?o:l>u?o+Array(l-u+1).join("0"):l>0?o.slice(0,l)+"."+o.slice(l):"0."+Array(1-l).join("0")+(0,f.formatDecimalParts)(n,Math.max(0,r+l-1))[0];},X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)},y=function(n){return n;},_=Array.prototype.map,b=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"],x=function(n){var r,i,o,s=void 0===n.grouping||void 0===n.thousands?y:(r=_.call(n.grouping,Number),i=n.thousands+"",function(n,a){for(var o=n.length,s=[],l=0,u=r[0],c=0;o>0&&u>0&&(c+u+1>a&&(u=Math.max(1,a-c)),s.push(n.substring(o-=u,o+u)),!((c+=u+1)>a));)u=r[l=(l+1)%r.length];return s.reverse().join(i);}),l=void 0===n.currency?"":n.currency[0]+"",u=void 0===n.currency?"":n.currency[1]+"",c=void 0===n.decimal?".":n.decimal+"",d=void 0===n.numerals?y:(o=_.call(n.numerals,String),function(n){return n.replace(/[0-9]/g,function(n){return o[+n];});}),p=void 0===n.percent?"%":n.percent+"",g=void 0===n.minus?"\u2212":n.minus+"",x=void 0===n.nan?"NaN":n.nan+"";function E(n){var r=(n=h(n)).fill,i=n.align,o=n.sign,f=n.symbol,y=n.zero,_=n.width,E=n.comma,w=n.precision,S=n.trim,T=n.type;"n"===T?(E=!0,T="g"):v[T]||(void 0===w&&(w=12),S=!0,T="g"),(y||"0"===r&&"="===i)&&(y=!0,r="0",i="=");var A="$"===f?l:"#"===f&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",C="$"===f?u:/[%p]/.test(T)?p:"",O=v[T],M=/[defgprs%]/.test(T);function R(n){var l,u,f,h=A,p=C;if("c"===T)p=O(n)+p,n="";else{var v=(n=+n)<0||1/n<0;if(n=isNaN(n)?x:O(Math.abs(n),w),S&&(n=m(n)),v&&0==+n&&"+"!==o&&(v=!1),h=(v?"("===o?o:g:"-"===o||"("===o?"":o)+h,p=("s"===T?b[8+a/3]:"")+p+(v&&"("===o?")":""),M){for(l=-1,u=n.length;++l<u;)if(48>(f=n.charCodeAt(l))||f>57){p=(46===f?c+n.slice(l+1):n.slice(l))+p,n=n.slice(0,l);break;}}}E&&!y&&(n=s(n,1/0));var R=h.length+n.length+p.length,P=R<_?Array(_-R+1).join(r):"";switch(E&&y&&(n=s(P+n,P.length?_-p.length:1/0),P=""),i){case"<":n=h+n+p+P;break;case"=":n=h+P+n+p;break;case"^":n=P.slice(0,R=P.length>>1)+h+n+p+P.slice(R);break;default:n=P+h+n+p;}return d(n);}return w=void 0===w?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w)),R.toString=function(){return n+"";},R;}return{format:E,formatPrefix:function(n,r){var i,a=E(((n=h(n)).type="f",n)),o=3*Math.max(-8,Math.min(8,Math.floor((i=r,((i=(0,f.formatDecimalParts)(Math.abs(i)))?i[1]:NaN)/3)))),s=Math.pow(10,-o),l=b[8+o/3];return function(n){return a(s*n)+l;};}};};function E(n){return s=(o=x(n)).format,l=o.formatPrefix,o;}E({thousands:",",grouping:[3],currency:["$",""]});},"6cf76861":function(n,r,i){var a=i("469db534"),o=i("3cd6a52e");n.exports=function(n){return o(n)&&"[object Map]"==a(n);};},"6df780c1":function(n,r,i){var a=i("1ce71649"),o=i("55867156")(function(n,r,i,o){a(n,r,i,o);});n.exports=o;},"6e17e91f":function(n,r,i){"use strict";function a(n,r,i){n.prototype=r.prototype=i,i.constructor=n;}function o(n,r){var i=Object.create(n.prototype);for(var a in r)i[a]=r[a];return i;}i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return a;},extend:function(){return o;}});},"6e56ca49":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return p;}});var a=i("777fffbe"),o=a._(i("e4870cf0")),s=a._(i("a854094b")),l=i("9479dab9"),u=i("d41bee1f"),c=i("f237cead");let{camelCase:f,isNil:d,upperFirst:h}=l.lodashUtil;class p{constructor(){(0,s.default)(this,"shaderModuleService",void 0),(0,s.default)(this,"rendererService",void 0),(0,s.default)(this,"config",void 0),(0,s.default)(this,"quad","attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}"),(0,s.default)(this,"enabled",!0),(0,s.default)(this,"renderToScreen",!1),(0,s.default)(this,"model",void 0),(0,s.default)(this,"name",void 0),(0,s.default)(this,"optionsToUpdate",{});}getName(){return this.name;}setName(n){this.name=n;}getType(){return u.PassType.PostProcessing;}init(n,r){this.config=r,this.rendererService=n.getContainer().rendererService,this.shaderModuleService=n.getContainer().shaderModuleService;let{createAttribute:i,createBuffer:a,createModel:s}=this.rendererService,{vs:l,fs:u,uniforms:f}=this.setupShaders();this.model=s({vs:l,fs:u,attributes:{a_Position:i({buffer:a({data:[-4,-4,4,-4,0,4],type:c.gl.FLOAT}),size:2})},uniforms:(0,o.default)((0,o.default)({u_Texture:null},f),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:"copy"===this.getName()}});}render(n,r){let i=n.multiPassRenderer.getPostProcessor(),{useFramebuffer:a,getViewportSize:s,clear:l}=this.rendererService,{width:u,height:c}=s();a(this.renderToScreen?null:i.getWriteFBO(),()=>{l({framebuffer:i.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0});let n=(0,o.default)({u_BloomFinal:0,u_Texture:i.getReadFBO(),u_ViewportSize:[u,c]},this.convertOptionsToUniforms(this.optionsToUpdate));r&&(n.u_BloomFinal=1,n.u_Texture2=r),this.model.draw({uniforms:n});});}isEnabled(){return this.enabled;}setEnabled(n){this.enabled=n;}setRenderToScreen(n){this.renderToScreen=n;}updateOptions(n){this.optionsToUpdate=(0,o.default)((0,o.default)({},this.optionsToUpdate),n);}setupShaders(){throw Error("Method not implemented.");}convertOptionsToUniforms(n){let r={};return Object.keys(n).forEach(i=>{d(n[i])||(r[`u_${h(f(i))}`]=n[i]);}),r;}}},"6f0d7bd0":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});var a=function(n){return null!=n&&"object"==typeof n;};},"6f3d386c":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return j;}});var a=i("777fffbe"),o=i("e4870cf0"),s=a._(o),l=i("9b84be4b"),u=a._(l),c=i("a854094b"),f=a._(c),d=i("e333157c"),h=a._(d),p=i("553ee311"),m=i("9479dab9"),g=i("6654a076"),v=a._(g),y=i("8970bd89");let _={solid:0,dash:1};class b extends v.default{constructor(...n){super(...n),(0,f.default)(this,"texture",void 0),(0,f.default)(this,"updateTexture",()=>{let{createTexture2D:n}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return;}this.texture=n({data:this.iconService.getCanvas(),mag:p.gl.NEAREST,min:p.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture];});}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,UV:12,THETA_OFFSET:13});}getCommonUniformsInfo(){let{sourceColor:n,targetColor:r,textureBlend:i="normal",lineType:a="solid",dashArray:o=[10,5],forward:s=!0,lineTexture:l=!1,iconStep:u=100,segmentNumber:c=30}=this.layer.getLayerConfig(),{animateOption:f}=this.layer.getLayerConfig(),d=o;"dash"!==a&&(d=[0,0]),2===d.length&&d.push(0,0);let h=0,p=[0,0,0,0],g=[0,0,0,0];if(n&&r&&(p=(0,m.rgb2arr)(n),g=(0,m.rgb2arr)(r),h=1),this.rendererService.getDirty()){var v;null===(v=this.texture)||void 0===v||v.bind();}let y={u_animate:this.animateOption2Array(f),u_dash_array:d,u_sourceColor:p,u_targetColor:g,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:c,u_lineDir:s?1:-1,u_icon_step:u,u_line_texture:l?1:0,u_textureBlend:"normal"===i?0:1,u_blur:.9,u_line_type:_[a||"solid"],u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:h};return this.getUniformsBufferInfo(y);}initModels(){var n=this;return(0,u.default)(function*(){return n.updateTexture(),n.iconService.on("imageUpdate",n.updateTexture),n.buildModels();})();}clearModels(){var n;null===(n=this.texture)||void 0===n||n.destroy(),this.iconService.off("imageUpdate",this.updateTexture);}getShaders(){return{frag:'\n#define Animate 0.0\n#define LineTexture 1.0\nuniform sampler2D u_texture;\nlayout(std140) uniform commonUniorm {\n  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n  vec4 u_dash_array;\n  vec4 u_sourceColor;\n  vec4 u_targetColor;\n  vec2 u_textSize;\n  float segmentNumber;\n  float u_lineDir: 1.0;\n  float u_icon_step: 100;\n  float u_line_texture: 0.0;\n  float u_textureBlend;\n  float u_blur : 0.9;\n  float u_line_type: 0.0;\n  float u_time;\n  float u_linearColor: 0.0;\n};\n\nin vec4 v_color;\nin vec2 v_iconMapUV;\nin vec4 v_lineData;\n//dash\nin vec4 v_dash_array;\nin float v_distance_ratio;\n\nout vec4 outputColor;\n#pragma include "picking"\n\nvoid main() {\n  if(u_dash_array!=vec4(0.0)){\n    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);\n    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {\n      discard;\n    };\n  }\n  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6\n  outputColor = v_color;\n  if(u_animate.x == Animate && u_line_texture != LineTexture) {\n      animateSpeed = u_time / u_animate.y;\n      float alpha =1.0 - fract( mod(1.0- v_lineData.b, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);\n      alpha = (alpha + u_animate.w -1.0) / u_animate.w;\n      // alpha = smoothstep(0., 1., alpha);\n      alpha = clamp(alpha, 0.0, 1.0);\n      outputColor.a *= alpha;\n  }\n\n  // \u5F53\u5B58\u5728\u8D34\u56FE\u65F6\u5728\u5E95\u8272\u4E0A\u8D34\u4E0A\u8D34\u56FE\n  if(u_line_texture == LineTexture) { // while load texture\n    float arcRadio = smoothstep( 0.0, 1.0, (v_lineData.r / segmentNumber));\n    // float arcRadio = smoothstep( 0.0, 1.0, d_distance_ratio);\n\n    float count = v_lineData.g; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF\n\n    float time = 0.0;\n    if(u_animate.x == Animate) {\n      time = u_time / u_animate.y;\n    }\n    float redioCount = arcRadio * count;\n\n    float u = fract(redioCount - time);\n    float v = v_lineData.a; // \u6A2A\u5411 v\n    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;\n\n    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);\n\n    if(u_animate.x == Animate) {\n      float currentPlane = floor(redioCount - time);\n      float textureStep = floor(count * u_animate.z);\n      float a = mod(currentPlane, textureStep);\n      if(a < textureStep - 1.0) {\n        pattern = vec4(0.0);\n      }\n    }\n\n    if(u_textureBlend == 0.0) { // normal\n      pattern.a = 0.0;\n      outputColor = filterColor(outputColor + pattern);\n    } else { // replace\n        pattern.a *= v_color.a;\n        if(outputColor.a <= 0.0) {\n          pattern.a = 0.0;\n        }\n        outputColor = filterColor(pattern);\n    }\n    \n  } else {\n     outputColor = filterColor(outputColor);\n  }\n}',vert:'#define Animate (0.0)\n#define LineTexture (1.0)\n\nlayout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;\nlayout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;\nlayout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;\nlayout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;\nlayout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;\n\nlayout(std140) uniform commonUniorm {\n  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n  vec4 u_dash_array;\n  vec4 u_sourceColor;\n  vec4 u_targetColor;\n  vec2 u_textSize;\n  float segmentNumber;\n  float u_lineDir: 1.0;\n  float u_icon_step: 100;\n  float u_line_texture: 0.0;\n  float u_textureBlend;\n  float u_blur : 0.9;\n  float u_line_type: 0.0;\n  float u_time;\n  float u_linearColor: 0.0;\n};\n\nout vec4 v_color;\nout vec2 v_iconMapUV;\nout vec4 v_lineData;\n//dash\nout vec4 v_dash_array;\nout float v_distance_ratio;\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat bezier3(vec3 arr, float t) {\n  float ut = 1.0 - t;\n  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;\n}\nvec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {\n  vec2 center = target - source;\n  float r = length(center);\n  float theta = atan(center.y, center.x);\n  float thetaOffset = arcThetaOffset;\n  float r2 = r / 2.0 / cos(thetaOffset);\n  float theta2 = theta + thetaOffset;\n  vec2 mid = vec2(r2 * cos(theta2) + source.x, r2 * sin(theta2) + source.y);\n  if (u_lineDir == 1.0) {\n    // \u6B63\u5411\n    return mid;\n  } else {\n    // \u9006\u5411\n    // (mid + vmin)/2 = (s + t)/2\n    vec2 vmid = source + target - mid;\n    return vmid;\n  }\n  // return mid;\n}\nfloat getSegmentRatio(float index) {\n  // dash: index / (segmentNumber - 1.);\n  // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));\n  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));\n  //  return index / (segmentNumber - 1.);\n}\nvec2 interpolate(vec2 source, vec2 target, float t, float arcThetaOffset) {\n  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation\n  vec2 mid = midPoint(source, target, arcThetaOffset);\n  vec3 x = vec3(source.x, mid.x, target.x);\n  vec3 y = vec3(source.y, mid.y, target.y);\n  return vec2(bezier3(x, t), bezier3(y, t));\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n   return dir_screenspace.xy * sign(offset_direction);\n}\n\nvoid main() {\n  //vs\u4E2D\u8BA1\u7B97\u6E10\u53D8\u8272\n  if (u_linearColor == 1.0) {\n    float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E\n    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex / segmentNumber);\n  } else {\n    v_color = a_Color;\n  }\n  v_color.a = v_color.a * opacity;\n\n  vec2 source_world = a_Instance.rg; // \u8D77\u59CB\u70B9\n  vec2 target_world = a_Instance.ba; // \u7EC8\u70B9\n\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n\n  // \u8BA1\u7B97 dashArray \u548C distanceRatio \u8F93\u51FA\u5230\u7247\u5143\n  float total_Distance = pixelDistance(source_world, target_world) / 2.0 * PI;\n  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;\n  v_distance_ratio = segmentIndex / segmentNumber;\n\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  float d_distance_ratio;\n\n  if(u_animate.x == Animate) {\n      d_distance_ratio = segmentIndex / segmentNumber;\n      if(u_lineDir != 1.0) {\n        d_distance_ratio = 1.0 - d_distance_ratio;\n      }\n  }\n\n  v_lineData.b = d_distance_ratio;\n\n  vec4 source = project_position(vec4(source_world, 0, 1.), a_Instance64Low.xy);\n  vec4 target = project_position(vec4(target_world, 0, 1.), a_Instance64Low.zw);\n\n  vec2 currPos = interpolate(source.xy, target.xy, segmentRatio, thetaOffset);\n  vec2 nextPos = interpolate(source.xy, target.xy, nextSegmentRatio, thetaOffset);\n\n  vec2 offset = project_pixel(\n    getExtrusionOffset((nextPos.xy - currPos.xy) * indexDir, a_Position.y)\n  );\n\n  float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E\n  v_lineData.r = d_segmentIndex;\n\n  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F\n    float arcDistrance = length(source - target); // \u8D77\u59CB\u70B9\u548C\u7EC8\u70B9\u7684\u8DDD\u79BB\n    arcDistrance = project_pixel(arcDistrance);\n\n    v_iconMapUV = a_iconMapUV;\n\n    float pixelLen = project_pixel_texture(u_icon_step); // \u8D34\u56FE\u6CBF\u5F27\u7EBF\u65B9\u5411\u7684\u957F\u5EA6 - \u968F\u5730\u56FE\u7F29\u653E\u6539\u53D8\n    float texCount = floor(arcDistrance / pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF\n    v_lineData.g = texCount;\n\n    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\n    float linePixelSize = project_pixel(a_Size); // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\n    v_lineData.a = lineOffsetWidth / linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C\n  }\n\n  gl_Position = project_common_position_to_clipspace(vec4(currPos.xy + offset, 0, 1.0));\n\n  setPickingColor(a_PickingColor);\n}\n',type:""};}buildModels(){var n=this;return(0,u.default)(function*(){n.initUniformsBuffer();let{segmentNumber:r=30}=n.layer.getLayerConfig(),{frag:i,vert:a,type:o}=n.getShaders();return[(yield n.layer.buildLayerModel({moduleName:"lineArc2d"+o,vertexShader:a,fragmentShader:i,defines:n.getDefines(),inject:n.getInject(),triangulation:y.LineArcTriangulation,depth:{enable:!1},styleOption:{segmentNumber:r}}))];})();}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:p.AttributeType.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:1,update:n=>{let{size:r=1}=n;return Array.isArray(r)?[r[0]]:[r];}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:p.AttributeType.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:p.gl.STATIC_DRAW,data:[],type:p.gl.FLOAT},size:4,update:(n,r,i)=>[i[3],i[4],i[5],i[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:p.AttributeType.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:p.gl.STATIC_DRAW,data:[],type:p.gl.FLOAT},size:4,update:(n,r,i)=>[(0,m.fp64LowPart)(i[3]),(0,m.fp64LowPart)(i[4]),(0,m.fp64LowPart)(i[5]),(0,m.fp64LowPart)(i[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:p.AttributeType.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:2,update:n=>{let r=this.iconService.getIconMap(),{texture:i}=n,{x:a,y:o}=r[i]||{x:0,y:0};return[a,o];}}}),this.styleAttributeService.registerStyleAttribute({name:"thetaOffset",type:p.AttributeType.Attribute,descriptor:{name:"a_ThetaOffset",shaderLocation:this.attributeLocation.THETA_OFFSET,buffer:{usage:p.gl.STATIC_DRAW,data:[],type:p.gl.FLOAT},size:1,update:n=>{let{thetaOffset:r=1}=n;return[r];}}});}}var x=i("9400daad");let E={solid:0,dash:1};class w extends v.default{constructor(...n){super(...n),(0,f.default)(this,"texture",void 0),(0,f.default)(this,"updateTexture",()=>{let{createTexture2D:n}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return;}this.texture=n({data:this.iconService.getCanvas(),mag:p.gl.NEAREST,min:p.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture];});}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,UV:12,THETA_OFFSET:13});}getCommonUniformsInfo(){let{sourceColor:n,targetColor:r,textureBlend:i="normal",lineType:a="solid",dashArray:o=[10,5],lineTexture:s=!1,iconStep:l=100,segmentNumber:u=30,globalArcHeight:c=10}=this.layer.getLayerConfig(),{animateOption:f}=this.layer.getLayerConfig();2===o.length&&o.push(0,0);let d=0,h=[0,0,0,0],p=[0,0,0,0];if(n&&r&&(h=(0,m.rgb2arr)(n),p=(0,m.rgb2arr)(r),d=1),this.rendererService.getDirty()){var g;null===(g=this.texture)||void 0===g||g.bind();}let v={u_animate:this.animateOption2Array(f),u_dash_array:o,u_sourceColor:h,u_targetColor:p,u_textSize:[1024,this.iconService.canvasHeight||128],u_globel:"GLOBEL"===this.mapService.version?1:0,u_globel_radius:x.EARTH_RADIUS,u_global_height:c,segmentNumber:u,u_line_type:E[a]||0,u_icon_step:l,u_line_texture:s?1:0,u_textureBlend:"normal"===i?0:1,u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:d};return this.getUniformsBufferInfo(v);}initModels(){var n=this;return(0,u.default)(function*(){return n.initUniformsBuffer(),n.updateTexture(),n.iconService.on("imageUpdate",n.updateTexture),n.buildModels();})();}clearModels(){var n;null===(n=this.texture)||void 0===n||n.destroy(),this.iconService.off("imageUpdate",this.updateTexture);}getShaders(){return{frag:'#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\n\nuniform sampler2D u_texture;\n\nlayout(std140) uniform commonUniorm {\n  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n  vec4 u_dash_array: [10.0, 5., 0, 0];\n  vec4 u_sourceColor;\n  vec4 u_targetColor;\n  vec2 u_textSize;\n  float u_globel;\n  float u_globel_radius;\n  float u_global_height: 10;\n  float segmentNumber;\n  float u_line_type: 0.0;\n  float u_icon_step: 100;\n  float u_line_texture: 0.0;\n  float u_textureBlend;\n  float u_time;\n  float u_linearColor: 0.0;\n};\n\nin vec4 v_color;\nin vec4 v_dash_array;\nin float v_segmentIndex;\nin vec2 v_iconMapUV;\nin vec4 v_line_data;\n\nout vec4 outputColor;\n\n#pragma include "picking"\n\nvoid main() {\n  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6\n  float d_distance_ratio = v_line_data.g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B\n  outputColor = v_color;\n\n  if(u_line_type == LineTypeDash) {\n    float flag = 0.;\n    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);\n    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {\n      flag = 1.;\n    }\n    outputColor.a *=flag;\n  }\n\n  if(u_animate.x == Animate && u_line_texture != LineTexture) {\n      animateSpeed = u_time / u_animate.y;\n      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);\n\n      alpha = (alpha + u_animate.w -1.0) / u_animate.w;\n      // alpha = smoothstep(0., 1., alpha);\n      alpha = clamp(alpha, 0.0, 1.0);\n      outputColor.a *= alpha;\n\n      // u_animate\n      // x enable\n      // y duration\n      // z interval\n      // w trailLength\n  }\n\n  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture\n    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));\n    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);\n    float count = v_line_data.b; // // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF\n\n    float time = 0.0;\n    if(u_animate.x == Animate) {\n      time = u_time / u_animate.y;\n    }\n    float redioCount = arcRadio * count;\n\n    float u = fract(redioCount - time);\n\n    float v = v_line_data.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C\n    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;\n    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);\n\n    if(u_animate.x == Animate) {\n      float currentPlane = floor(redioCount - time);\n      float textureStep = floor(count * u_animate.z);\n      float a = mod(currentPlane, textureStep);\n      if(a < textureStep - 1.0) {\n        pattern = vec4(0.0);\n      }\n    }\n\n    if(u_textureBlend == 0.0) { // normal\n      pattern.a = 0.0;\n      outputColor = filterColor(outputColor + pattern);\n    } else { // replace\n        pattern.a *= v_color.a;\n        if(outputColor.a <= 0.0) {\n          pattern.a = 0.0;\n          discard;\n        } else {\n          outputColor = filterColor(pattern);\n        }\n    }\n\n  } else {\n    outputColor = filterColor(outputColor);\n  }\n}\n',vert:'#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\n\nlayout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;\nlayout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;\nlayout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;\nlayout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;\nlayout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;\n\n\nlayout(std140) uniform commonUniorm {\n  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n  vec4 u_dash_array: [10.0, 5., 0, 0];\n  vec4 u_sourceColor;\n  vec4 u_targetColor;\n  vec2 u_textSize;\n  float u_globel;\n  float u_globel_radius;\n  float u_global_height: 10;\n  float segmentNumber;\n  float u_line_type: 0.0;\n  float u_icon_step: 100;\n  float u_line_texture: 0.0;\n  float u_textureBlend;\n  float u_time;\n  float u_linearColor: 0.0;\n};\nout vec4 v_color;\nout vec4 v_dash_array;\nout float v_segmentIndex;\nout vec2 v_iconMapUV;\nout vec4 v_line_data;\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat maps (float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));\n}\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n  vec2 x = mix(source, target, ratio);\n  vec2 center = mix(source, target, 0.5);\n  float dSourceCenter = distance(source, center);\n  float dXCenter = distance(x, center);\n  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n  float vertex_height = paraboloid(source, target, segmentRatio);\n\n  return vec3(\n    mix(source, target, segmentRatio),\n    sqrt(max(0.0, vertex_height))\n  );\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;\n\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  return dir_screenspace.xy * sign(offset_direction);\n}\n\nfloat torad(float deg) {\n  return (deg / 180.0) * acos(-1.0);\n}\n\nvec3 lglt2xyz(vec2 lnglat) {\n  float pi = 3.1415926;\n  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807\n  float lng = torad(lnglat.x) + pi / 2.0;\n  float lat = torad(lnglat.y);\n\n  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81\n  float radius = u_globel_radius;\n\n  float z = radius * cos(lat) * cos(lng);\n  float x = radius * cos(lat) * sin(lng);\n  float y = radius * sin(lat);\n  return vec3(x, y, z);\n}\n\nvoid main() {\n  //vs\u4E2D\u8BA1\u7B97\u6E10\u53D8\u8272\n  if(u_linearColor==1.0){\n    float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E\n    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);\n  }\n  else{\n    v_color = a_Color;\n  }\n  v_color.a = v_color.a * opacity;\n  vec2 source = project_position(vec4(a_Instance.rg, 0, 0), a_Instance64Low.xy).xy;\n  vec2 target = project_position(vec4(a_Instance.ba, 0, 0), a_Instance64Low.zw).xy;\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n\n  float d_distance_ratio;\n   if(u_line_type == LineTypeDash) {\n    d_distance_ratio = segmentIndex / segmentNumber;\n    float total_Distance = pixelDistance(source, target) / 2.0 * PI;\n    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);\n  }\n    if(u_animate.x == Animate) {\n      d_distance_ratio = segmentIndex / segmentNumber;\n  }\n  v_line_data.g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B\n\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  vec3 curr = getPos(source, target, segmentRatio);\n  vec3 next = getPos(source, target, nextSegmentRatio);\n  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);\n  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n\n\n  v_segmentIndex = a_Position.x;\n  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F\n\n    float arcDistrance = length(source - target);\n    float pixelLen =  project_pixel_texture(u_icon_step);\n    v_line_data.b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF\n\n    vec2 projectOffset = project_pixel(offset);\n    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\n    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB\n    v_line_data.a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C\n\n    v_iconMapUV = a_iconMapUV;\n  }\n\n\n  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z * thetaOffset, 1.0));\n\n  // \u5730\u7403\u6A21\u5F0F\n  if(u_globel > 0.0) {\n    vec3 startLngLat = lglt2xyz(a_Instance.rg);\n    vec3 endLngLat = lglt2xyz(a_Instance.ba);\n    float globalRadius = length(startLngLat);\n\n    vec3 lineDir = normalize(endLngLat - startLngLat);\n    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);\n\n    // \u7EBF\u7684\u504F\u79FB\n    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;\n    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB\n    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;\n    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6\n    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;\n    // \u5730\u7403\u70B9\u4F4D\n    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;\n\n    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);\n  }\n\n\n  setPickingColor(a_PickingColor);\n}\n',type:""};}buildModels(){var n=this;return(0,u.default)(function*(){let{segmentNumber:r=30}=n.layer.getLayerConfig(),{frag:i,vert:a,type:o}=n.getShaders();return[(yield n.layer.buildLayerModel({moduleName:"lineArc3d"+o,vertexShader:a,fragmentShader:i,defines:n.getDefines(),inject:n.getInject(),triangulation:y.LineArcTriangulation,styleOption:{segmentNumber:r}}))];})();}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:p.AttributeType.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:1,update:n=>{let{size:r=1}=n;return Array.isArray(r)?[r[0]]:[r];}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:p.AttributeType.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:p.gl.STATIC_DRAW,data:[],type:p.gl.FLOAT},size:4,update:(n,r,i)=>[i[3],i[4],i[5],i[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:p.AttributeType.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:p.gl.STATIC_DRAW,data:[],type:p.gl.FLOAT},size:4,update:(n,r,i)=>[(0,m.fp64LowPart)(i[3]),(0,m.fp64LowPart)(i[4]),(0,m.fp64LowPart)(i[5]),(0,m.fp64LowPart)(i[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:p.AttributeType.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:2,update:n=>{let r=this.iconService.getIconMap(),{texture:i}=n,{x:a,y:o}=r[i]||{x:0,y:0};return[a,o];}}}),this.styleAttributeService.registerStyleAttribute({name:"thetaOffset",type:p.AttributeType.Attribute,descriptor:{name:"a_ThetaOffset",shaderLocation:this.attributeLocation.THETA_OFFSET,buffer:{usage:p.gl.STATIC_DRAW,data:[],type:p.gl.FLOAT},size:1,update:n=>{let{thetaOffset:r=1}=n;return[r];}}});}}var S=i("c165292c"),T=a._(S),A=i("d2a6da1b");let C={circle:2,triangle:2,diamond:4,rect:2,classic:3,halfTriangle:2,none:0};function O(n,r){let i="object"==typeof n?n.type:n,a="source"===r?1:-1,o="object"==typeof n?n:{};switch(i){case"circle":return function(n,r){let{width:i=2,height:a=2}=r,o=(0,A.circle)(),s=T.default.flatten([o]),l=(0,T.default)(s.vertices,s.holes,s.dimensions),u=o.map(r=>[r[0]*i*n,r[1]*a]).flat();return{vertices:[...u,...u],dimensions:2,indices:l.map(n=>n+o.length),outLineIndices:l,normals:[...o.map(r=>[r[1]*a,r[0]*i*n,1]).flat(),...Array(3*o.length).fill(0)]};}(a,o);case"triangle":return function(n,r){let{width:i=2,height:a=3}=r;return{vertices:[0,0,1*n*i,1*a,1*n*i,-1*a,0,0,1*n*i,1*a,1*n*i,-1*a],outLineIndices:[0,1,2],indices:[3,4,5],normals:[0,-1.5*n,1,2,1*n,1,-2,1*n,1,0,0,0,0,0,0,0,0,0],dimensions:2};}(a,o);case"diamond":return function(n,r){let{width:i=2,height:a=3}=r;return{vertices:[0,0,1*i*n,.5*a,2*i*n,0,1*i*n,-.5*a,0,0,1*i*n,.5*a,2*i*n,0,1*i*n,-.5*a],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-n,1,1,0,1,0,-n,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]};}(a,o);case"rect":return function(n,r){let{width:i=2,height:a=2}=r;return{vertices:[0,a/2,n*i*1,a/2,n*i*1,-a/2,0,-a/2,0,a/2,n*i*1,a/2,n*i*1,-a/2,0,-a/2],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-n,1,1,0,1,0,-n,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]};}(a,o);case"classic":return function(n,r){let{width:i=2,height:a=3}=r;return{vertices:[0,0,2*n*i,1*a,1.5*n*i,0,2*n*i,-1*a,0,0,2*n*i,1*a,1.5*n*i,0,2*n*i,-1*a],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-n,1,1,0,1,0,-n,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]};}(a,o);case"halfTriangle":return function(n,r){let{width:i=2,height:a=1}=r;return{vertices:[0,.5*n,1*n*i,-(a+.5)*n,1*n*i,(a-.5)*n,0,.5*n,1*n*i,-(a+.5)*n,1*n*i,(a-.5)*n],indices:[3,4,5],outLineIndices:[0,1,2],normals:[1*n,-2*n,1,-2*n,1.5*n,1,1*n,1.5*n,1,0,0,0,0,0,0,0,0,0],dimensions:2};}(a,o);default:return{vertices:[],indices:[],normals:[],dimensions:2,outLineIndices:[],outLineNormals:[]};}}function M(n,r){return r?function(n,r){let i=n.coordinates.flat(),{target:a="classic",source:o="circle"}=r,s=R(O(o,"source"),i,0,0),l=function(n,r=0,i){let a="object"==typeof i.source?i.source.type:i.source,o="object"==typeof i.target?i.target.type:i.target,{width:s=a?C[a]:0}="object"==typeof i.source?i.source:{},{width:l=o?C[o]:0}="object"==typeof i.target?i.target:{};return{vertices:[0,.5,1*s,...n,1,.5,-1*l,...n,1,-.5,-1*l,...n,0,-.5,1*s,...n,0,.5,1*s,...n,1,.5,-1*l,...n,1,-.5,-1*l,...n,0,-.5,1*s,...n],outLineIndices:[0,1,2,0,2,3].map(n=>n+r),indices:[4,5,6,4,6,7].map(n=>n+r),normals:[1,-1,1,1,1,1,-1,0,1,-1,0,1,0,0,0,0,0,0,0,0,0,0,0,0],dimensions:2};}(i,s.vertices.length/7,r),u=R(O(a,"target"),i,1,s.vertices.length/7+l.vertices.length/7);return{vertices:[...s.vertices,...l.vertices,...u.vertices],indices:[...s.outLineIndices,...l.outLineIndices,...u.outLineIndices,...s.indices,...l.indices,...u.indices],normals:[...s.normals,...l.normals,...u.normals],size:7};}(n,r):function(n){let r=n.coordinates.flat();return{vertices:[1,0,0,...r,1,2,-3,...r,1,1,-3,...r,0,1,0,...r,0,0,0,...r,1,0,0,...r,1,2,-3,...r,1,1,-3,...r,0,1,0,...r,0,0,0,...r],normals:[-1,2,1,2,-1,1,1,-1,1,1,-1,1,-1,-1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7};}(n);}function R(n,r,i=1,a=0){let o=[],{vertices:l,indices:u,dimensions:c,outLineIndices:f}=n;for(let n=0;n<l.length;n+=c)o.push(i,l[n+1],l[n],...r);return(0,s.default)((0,s.default)({},n),{},{vertices:o,indices:u.map(n=>n+a),outLineIndices:f.map(n=>n+a)});}class P extends v.default{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,NORMAL:12});}getCommonUniformsInfo(){let{gapWidth:n=2,strokeWidth:r=1,strokeOpacity:i=1}=this.layer.getLayerConfig();return this.getUniformsBufferInfo({u_gap_width:n,u_stroke_width:r,u_stroke_opacity:i});}initModels(){var n=this;return(0,u.default)(function*(){return n.initUniformsBuffer(),n.buildModels();})();}buildModels(){var n=this;return(0,u.default)(function*(){return[(yield n.layer.buildLayerModel({moduleName:"flow_line",vertexShader:'layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;\nlayout(location = ATTRIBUTE_LOCATION_SIZE) in vec2 a_Size;\nlayout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;\nlayout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;\nlayout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;\n\nlayout(std140) uniform commonUniorm {\n  float u_gap_width: 1.0;\n  float u_stroke_width: 1.0;\n  float u_stroke_opacity: 1.0;\n};\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nout vec4 v_color;\n\nvec2 project_pixel_offset(vec2 offsets) {\n  vec2 data = project_pixel(offsets);\n\n  return vec2(data.x, -data.y);\n}\n\nvec2 line_dir(vec2 target, vec2 source) {\n  return normalize(ProjectFlat(target) - ProjectFlat(source));\n}\n\n\nvoid main() {\n  // \u900F\u660E\u5EA6\u8BA1\u7B97\n  vec2 source_world = a_Instance.rg; // \u8D77\u70B9\n  vec2 target_world = a_Instance.ba; // \u7EC8\u70B9\n  vec2 flowlineDir = line_dir(target_world, source_world);\n  vec2 perpendicularDir = vec2(-flowlineDir.y, flowlineDir.x);\n\n  vec2 position = mix(source_world, target_world, a_Position.x);\n  vec2 position64Low = mix(a_Instance64Low.rg, a_Instance64Low.ba, a_Position.x);\n\n  float lengthCommon = length(\n    project_position(vec4(target_world, 0, 1)) - project_position(vec4(source_world, 0, 1))\n  );\n  vec2 offsetDistances = a_Size.x * project_pixel_offset(vec2(a_Position.y, a_Position.z)); // Mapbox || \u9AD8\u5FB7\n  vec2 limitedOffsetDistances = clamp(\n    offsetDistances,\n    project_pixel(-lengthCommon * 0.2),\n    project_pixel(lengthCommon * 0.2)\n  );\n\n  float startOffsetCommon = project_pixel(offsets[0]);\n  float endOffsetCommon = project_pixel(offsets[1]);\n  float endpointOffset = mix(\n    clamp(startOffsetCommon, 0.0, lengthCommon * 0.2),\n    -clamp(endOffsetCommon, 0.0, lengthCommon * 0.2),\n    a_Position.x\n  );\n\n  vec2 normalsCommon = u_stroke_width * project_pixel_offset(vec2(a_Normal.x, a_Normal.y));\n\n  float gapCommon = -1. * project_pixel(u_gap_width);\n  vec3 offsetCommon = vec3(\n    flowlineDir * (limitedOffsetDistances[1] + normalsCommon.y + endpointOffset * 1.05) -\n      perpendicularDir * (limitedOffsetDistances[0] + gapCommon + normalsCommon.x),\n    0.0\n  );\n\n  vec4 project_pos = project_position(vec4(position.xy, 0, 1.0), position64Low);\n\n  vec4 fillColor = vec4(a_Color.rgb, a_Color.a * opacity);\n  v_color = mix(fillColor, vec4(u_stroke.xyz, u_stroke.w * fillColor.w * u_stroke_opacity), a_Normal.z);\n\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy +  offsetCommon.xy, 0., 1.0));\n\n  setPickingColor(a_PickingColor);\n}\n',fragmentShader:'// #extension GL_OES_standard_derivatives : enable\n\nin vec4 v_color;\nout vec4 outputColor;\n\n\n// line texture\n\n#pragma include "picking"\n\nvoid main() {\n  outputColor = v_color;\n  outputColor = filterColor(outputColor);\n}\n',defines:n.getDefines(),inject:n.getInject(),triangulation:M,styleOption:n.layer.getLayerConfig().symbol,primitive:p.gl.TRIANGLES,depth:{enable:!1},pick:!1}))];})();}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:p.AttributeType.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:2,update:n=>{let{size:r=1}=n;return Array.isArray(r)?[r[0],r[1]]:[r,0];}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:p.AttributeType.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:p.gl.STATIC_DRAW,data:[],type:p.gl.FLOAT},size:4,update:(n,r,i)=>[i[3],i[4],i[5],i[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:p.AttributeType.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:p.gl.STATIC_DRAW,data:[],type:p.gl.FLOAT},size:4,update:(n,r,i)=>[(0,m.fp64LowPart)(i[3]),(0,m.fp64LowPart)(i[4]),(0,m.fp64LowPart)(i[5]),(0,m.fp64LowPart)(i[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:p.AttributeType.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:p.gl.STATIC_DRAW,data:[],type:p.gl.FLOAT},size:3,update:(n,r,i,a,o)=>o}});}}let k={solid:0,dash:1};class I extends v.default{constructor(...n){super(...n),(0,f.default)(this,"texture",void 0),(0,f.default)(this,"updateTexture",()=>{let{createTexture2D:n}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return;}this.texture=n({data:this.iconService.getCanvas(),mag:p.gl.NEAREST,min:p.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture];});}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,UV:12});}getCommonUniformsInfo(){let{sourceColor:n,targetColor:r,textureBlend:i="normal",lineType:a="solid",dashArray:o=[10,5],lineTexture:s=!1,iconStep:l=100,segmentNumber:u=30}=this.layer.getLayerConfig(),{animateOption:c}=this.layer.getLayerConfig();if(2===o.length&&o.push(0,0),this.rendererService.getDirty()){var f;null===(f=this.texture)||void 0===f||f.bind();}let d=0,h=[0,0,0,0],p=[0,0,0,0];n&&r&&(h=(0,m.rgb2arr)(n),p=(0,m.rgb2arr)(r),d=1);let g=this.layer.getLayerAnimateTime();isNaN(g)&&(g=0);let v={u_animate:this.animateOption2Array(c),u_dash_array:o,u_sourceColor:h,u_targetColor:p,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:u,u_line_type:k[a]||0,u_icon_step:l,u_line_texture:s?1:0,u_textureBlend:"normal"===i?0:1,u_time:g,u_linearColor:d};return this.getUniformsBufferInfo(v);}initModels(){var n=this;return(0,u.default)(function*(){return n.initUniformsBuffer(),n.updateTexture(),n.iconService.on("imageUpdate",n.updateTexture),n.buildModels();})();}clearModels(){var n;null===(n=this.texture)||void 0===n||n.destroy(),this.iconService.off("imageUpdate",this.updateTexture);}buildModels(){var n=this;return(0,u.default)(function*(){let{segmentNumber:r=30}=n.layer.getLayerConfig();return[(yield n.layer.buildLayerModel({moduleName:"lineGreatCircle",vertexShader:'#define LineTypeSolid (0.0)\n#define LineTypeDash (1.0)\n#define Animate (0.0)\n#define LineTexture (1.0)\n\nlayout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;\nlayout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;\nlayout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;\nlayout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;\nlayout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;\n\nlayout(std140) uniform commonUniorm {\n  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n  vec4 u_dash_array: [10.0, 5., 0, 0];\n  vec4 u_sourceColor;\n  vec4 u_targetColor;\n  vec2 u_textSize;\n  float segmentNumber;\n  float u_line_type: 0.0;\n  float u_icon_step: 100;\n  float u_line_texture: 0.0;\n  float u_textureBlend;\n  float u_time;\n  float u_linearColor: 0;\n};\n\nout vec4 v_dash_array;\nout vec4 v_color;\nout vec2 v_iconMapUV;\nout vec4 v_line_data;\nout float v_distance_ratio;\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat maps(float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat getSegmentRatio(float index) {\n  return index / (segmentNumber - 1.0);\n}\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n  vec2 x = mix(source, target, ratio);\n  vec2 center = mix(source, target, 0.5);\n  float dSourceCenter = distance(source, center);\n  float dXCenter = distance(x, center);\n  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n  float vertex_height = paraboloid(source, target, segmentRatio);\n\n  return vec3(mix(source, target, segmentRatio), sqrt(max(0.0, vertex_height)));\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  return dir_screenspace.xy * sign(offset_direction);\n}\nfloat getAngularDist(vec2 source, vec2 target) {\n  vec2 delta = source - target;\n  vec2 sin_half_delta = sin(delta / 2.0);\n  float a =\n    sin_half_delta.y * sin_half_delta.y +\n    cos(source.y) * cos(target.y) * sin_half_delta.x * sin_half_delta.x;\n  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));\n}\n\nvec2 midPoint(vec2 source, vec2 target) {\n  vec2 center = target - source;\n  float r = length(center);\n  float theta = atan(center.y, center.x);\n  float thetaOffset = 0.314;\n  float r2 = r / 2.0 / cos(thetaOffset);\n  float theta2 = theta + thetaOffset;\n  vec2 mid = vec2(r2 * cos(theta2) + source.x, r2 * sin(theta2) + source.y);\n  return mid;\n}\nfloat bezier3(vec3 arr, float t) {\n  float ut = 1.0 - t;\n  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;\n}\n\nvec2 interpolate(vec2 source, vec2 target, float angularDist, float t) {\n  if (abs(angularDist - PI) < 0.001) {\n    return (1.0 - t) * source + t * target;\n  }\n  float a = sin((1.0 - t) * angularDist) / sin(angularDist);\n  float b = sin(t * angularDist) / sin(angularDist);\n  vec2 sin_source = sin(source);\n  vec2 cos_source = cos(source);\n  vec2 sin_target = sin(target);\n  vec2 cos_target = cos(target);\n  float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;\n  float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;\n  float z = a * sin_source.y + b * sin_target.y;\n  return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));\n\n}\n\nvoid main() {\n  v_color = a_Color;\n  v_color.a = v_color.a * opacity;\n  vec2 source = radians(a_Instance.rg);\n  vec2 target = radians(a_Instance.ba);\n  float angularDist = getAngularDist(source, target);\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n\n  if (u_line_type == LineTypeDash) {\n    v_distance_ratio = segmentIndex / segmentNumber;\n    float total_Distance = pixelDistance(source, target) / 2.0 * PI;\n    total_Distance = total_Distance * 16.0; // total_Distance*16.0 \u8C03\u6574\u9ED8\u8BA4\u7684\u6548\u679C\n    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;\n  }\n\n  if (u_animate.x == Animate) {\n    v_distance_ratio = segmentIndex / segmentNumber;\n  }\n\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  v_distance_ratio = segmentIndex / segmentNumber;\n\n  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0), a_Instance64Low.xy);\n  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0), a_Instance64Low.zw);\n\n  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));\n  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));\n  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));\n\n  v_line_data.g = a_Position.x; // \u8BE5\u9876\u70B9\u5728\u5F27\u7EBF\u4E0A\u7684\u5206\u6BB5\u6392\u5E8F\n  if (LineTexture == u_line_texture) {\n    float d_arcDistrance = length(source - target);\n    d_arcDistrance = project_pixel(d_arcDistrance);\n\n    float d_pixelLen = project_pixel(u_icon_step) / 8.0;\n    v_line_data.b = floor(d_arcDistrance / d_pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF\n\n    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\n    float linePixelSize = project_pixel(a_Size); // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB\n    v_line_data.a = lineOffsetWidth / linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C\n\n    v_iconMapUV = a_iconMapUV;\n  }\n\n  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));\n  setPickingColor(a_PickingColor);\n}\n\n',fragmentShader:'#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\n\nuniform sampler2D u_texture;\nlayout(std140) uniform commonUniorm {\n  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n  vec4 u_dash_array: [10.0, 5., 0, 0];\n  vec4 u_sourceColor;\n  vec4 u_targetColor;\n  vec2 u_textSize;\n  float segmentNumber;\n  float u_line_type: 0.0;\n  float u_icon_step: 100;\n  float u_line_texture: 0.0;\n  float u_textureBlend;\n  float u_time;\n  float u_linearColor: 0;\n};\n\nin vec4 v_dash_array;\nin vec4 v_color;\nin vec2 v_iconMapUV;\nin vec4 v_line_data;\nin float v_distance_ratio;\n\nout vec4 outputColor;\n#pragma include "picking"\n#pragma include "project"\n#pragma include "projection"\n\nvoid main() {\n\n  float animateSpeed = 0.0;\n  float d_segmentIndex = v_line_data.g;\n\n  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u5E95\u8272\n  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272\n    outputColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);\n    outputColor.a *= v_color.a;\n  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272\n    outputColor = v_color;\n  }\n\n  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));\n  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));\n  if(u_line_type == LineTypeDash) {\n    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);\n    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {\n      // \u5B9E\u7EBF\u90E8\u5206\n    } else {\n      // \u865A\u7EBF\u90E8\u5206\n      discard;\n    };\n  }\n\n  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u52A8\u753B\u6A21\u5F0F\n  if(u_animate.x == Animate) {\n      animateSpeed = u_time / u_animate.y;\n      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);\n      alpha = (alpha + u_animate.w -1.0) / u_animate.w;\n      alpha = smoothstep(0., 1., alpha);\n      outputColor.a *= alpha;\n  }\n\n  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u8D34\u56FE\n  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) {\n    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / (segmentNumber - 1.0)));\n    // float arcRadio = d_segmentIndex / (segmentNumber - 1.0);\n    float count = v_line_data.b; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF\n    float u = fract(arcRadio * count - animateSpeed * count);\n    // float u = fract(arcRadio * count - animateSpeed);\n    if(u_animate.x == Animate) {\n      u = outputColor.a/v_color.a;\n    }\n\n    float v = v_line_data.a; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C\n\n    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;\n    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);\n\n    // \u8BBE\u7F6E\u8D34\u56FE\u548C\u5E95\u8272\u7684\u53E0\u52A0\u6A21\u5F0F\n    if(u_textureBlend == 0.0) { // normal\n      pattern.a = 0.0;\n      outputColor = filterColor(outputColor + pattern);\n    } else { // replace\n        pattern.a *= v_color.a;\n        if(outputColor.a <= 0.0) {\n          pattern.a = 0.0;\n        }\n        outputColor = filterColor(pattern);\n    }\n  } else {\n    outputColor = filterColor(outputColor);\n  }\n\n  // gl_FragColor = filterColor(gl_FragColor);\n}\n',triangulation:y.LineArcTriangulation,styleOption:{segmentNumber:r},defines:n.getDefines(),inject:n.getInject(),depth:{enable:!1}}))];})();}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:p.AttributeType.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:1,update:n=>{let{size:r=1}=n;return Array.isArray(r)?[r[0]]:[r];}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:p.AttributeType.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:p.gl.STATIC_DRAW,data:[],type:p.gl.FLOAT},size:4,update:(n,r,i)=>[i[3],i[4],i[5],i[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:p.AttributeType.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:p.gl.STATIC_DRAW,data:[],type:p.gl.FLOAT},size:4,update:(n,r,i)=>[(0,m.fp64LowPart)(i[3]),(0,m.fp64LowPart)(i[4]),(0,m.fp64LowPart)(i[5]),(0,m.fp64LowPart)(i[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:p.AttributeType.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:2,update:n=>{let r=this.iconService.getIconMap(),{texture:i}=n,{x:a,y:o}=r[i]||{x:0,y:0};return[a,o];}}});}}var L=i("824b66b4"),N=a._(L);class D extends v.default{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9});}getCommonUniformsInfo(){let{sourceColor:n,targetColor:r,lineType:i="solid",dashArray:a=[10,5,0,0],vertexHeightScale:o=20}=this.layer.getLayerConfig(),s=a;"dash"!==i&&(s=[0,0,0,0]),2===s.length&&s.push(0,0);let l=0,u=[0,0,0,0],c=[0,0,0,0];n&&r&&(u=(0,m.rgb2arr)(n),c=(0,m.rgb2arr)(r),l=1);let f={u_sourceColor:u,u_targetColor:c,u_dash_array:s,u_vertexScale:o,u_linearColor:l};return this.getUniformsBufferInfo(f);}initModels(){var n=this;return(0,u.default)(function*(){return n.buildModels();})();}getShaders(){return{frag:"\nlayout(std140) uniform commonUniorm {\n  vec4 u_sourceColor;\n  vec4 u_targetColor;\n  vec4 u_dash_array;\n  float u_vertexScale: 1.0;\n  float u_linearColor: 0;\n};\nin float v_distanceScale;\nin vec4 v_color;\n//dash\nin vec4 v_dash_array;\n\nout vec4 outputColor;\nvoid main() {\n  if(u_dash_array!=vec4(0.0)){\n    float dashLength = mod(v_distanceScale, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);\n    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {\n      // \u865A\u7EBF\u90E8\u5206\n      discard;\n    };\n  }\n  if(u_linearColor==1.0){\n    outputColor = mix(u_sourceColor, u_targetColor, v_distanceScale);\n    outputColor.a *= v_color.a; // \u5168\u5C40\u900F\u660E\u5EA6\n  }\n  else{\n    outputColor = v_color;\n  }\n}\n",vert:'layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;\nlayout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;\nlayout(location = ATTRIBUTE_LOCATION_SIZE) in vec4 a_SizeDistanceAndTotalDistance;\n\nlayout(std140) uniform commonUniorm {\n  vec4 u_sourceColor;\n  vec4 u_targetColor;\n  vec4 u_dash_array;\n  float u_vertexScale: 1.0;\n  float u_linearColor: 0;\n};\n\n#pragma include "projection"\n#pragma include "picking"\n\nout vec4 v_color;\nout float v_distanceScale;\nout vec4 v_dash_array;\n\nvoid main() {\n  //dash\u8F93\u51FA\n  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_SizeDistanceAndTotalDistance.a;\n\n  v_color = a_Color;\n  v_distanceScale = a_SizeDistanceAndTotalDistance.b / a_SizeDistanceAndTotalDistance.a;\n  v_color.a = v_color.a * opacity;\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0), a_Position64Low);\n\n  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5\n\n  float lineHeight = a_SizeDistanceAndTotalDistance.y;\n  // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4\n  if (\n    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET\n  ) {\n    // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8\n    h *= 2.0 / pow(2.0, 20.0 - u_Zoom);\n  }\n\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, lineHeight + h, 1.0));\n  gl_PointSize = 10.0;\n\n}\n',type:"lineSimpleNormal"};}buildModels(){var n=this;return(0,u.default)(function*(){n.initUniformsBuffer();let{frag:r,vert:i,type:a}=n.getShaders();return[(yield n.layer.buildLayerModel({moduleName:a,vertexShader:i,fragmentShader:r,triangulation:y.SimpleLineTriangulation,defines:n.getDefines(),inject:n.getInject(),primitive:p.gl.LINES,depth:{enable:!1},pick:!1}))];})();}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"sizeDistanceAndTotalDistance",type:p.AttributeType.Attribute,descriptor:{name:"a_SizeDistanceAndTotalDistance",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:p.gl.STATIC_DRAW,data:[],type:p.gl.FLOAT},size:4,update:(n,r,i)=>{let{size:a=1}=n,o=Array.isArray(a)?[a[0],a[1]]:[a,0];return[o[0],o[1],i[3],i[5]];}}});}}class F extends v.default{constructor(...n){super(...n),(0,f.default)(this,"texture",void 0),(0,f.default)(this,"updateTexture",()=>{let{createTexture2D:n}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return;}this.texture=n({data:this.iconService.getCanvas(),mag:p.gl.NEAREST,min:p.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture];});}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,NORMAL:12,UV:13,DISTANCE_MITER_TOTAL:15});}getCommonUniformsInfo(){let{sourceColor:n,targetColor:r,textureBlend:i="normal",heightfixed:a=!1,lineTexture:o=!1,iconStep:s=100,iconStepCount:l=1}=this.layer.getLayerConfig(),{animateOption:u}=this.layer.getLayerConfig();if(this.rendererService.getDirty()){var c;null===(c=this.texture)||void 0===c||c.bind();}let f=0,d=[0,0,0,0],h=[0,0,0,0];n&&r&&(d=(0,m.rgb2arr)(n),h=(0,m.rgb2arr)(r),f=1);let p={u_animate:this.animateOption2Array(u),u_sourceColor:d,u_targetColor:h,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:s,u_heightfixed:Number(a),u_linearColor:f,u_line_texture:o?1:0,u_textureBlend:"normal"===i?0:1,u_iconStepCount:l,u_time:this.layer.getLayerAnimateTime()||0};return this.getUniformsBufferInfo(p);}initModels(){var n=this;return(0,u.default)(function*(){return n.initUniformsBuffer(),n.updateTexture(),n.iconService.on("imageUpdate",n.updateTexture),n.buildModels();})();}clearModels(){var n;null===(n=this.texture)||void 0===n||n.destroy(),this.iconService.off("imageUpdate",this.updateTexture);}buildModels(){var n=this;return(0,u.default)(function*(){return[(yield n.layer.buildLayerModel({moduleName:"lineWall",vertexShader:'#define Animate 0.0\nlayout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;\nlayout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;\nlayout(location = ATTRIBUTE_LOCATION_SIZE) in vec2 a_Size;\nlayout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;\nlayout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;\nlayout(location = ATTRIBUTE_LOCATION_DISTANCE_MITER_TOTAL) in vec3 a_Distance_Total_Miter;\n\nlayout(std140) uniform commonUniorm {\n  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n  vec4 u_sourceColor;\n  vec4 u_targetColor;\n  vec2 u_textSize;\n  float u_icon_step: 100;\n  float u_heightfixed;\n  float u_linearColor: 0;\n  float u_line_texture;\n  float u_textureBlend;\n  float u_iconStepCount;\n  float u_time;\n};\n\n// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09\nout vec2 v_iconMapUV;\nout vec4 v_color;\nout float v_blur;\nout vec4 v_dataset;\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nvoid main() {\n  float a_Distance = a_Distance_Total_Miter.x;\n  float a_Miter = a_Distance_Total_Miter.y;\n  float a_Total_Distance = a_Distance_Total_Miter.z;\n\n  float d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B\n  float d_texPixelLen; // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E\n\n  v_iconMapUV = a_iconMapUV;\n  if (u_heightfixed < 1.0) {\n    // \u9AD8\u5EA6\u968F zoom \u8C03\u6574\n    d_texPixelLen = project_pixel(u_icon_step);\n  } else {\n    d_texPixelLen = u_icon_step;\n  }\n\n  if (u_animate.x == Animate || u_linearColor == 1.0) {\n    d_distance_ratio = a_Distance / a_Total_Distance;\n  }\n\n  float miter = (a_Miter + 1.0) / 2.0;\n  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570\n  v_dataset[0] = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B\n  v_dataset[1] = a_Distance; // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB\n  v_dataset[2] = d_texPixelLen; // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E\n  v_dataset[3] = miter; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C 0 - 1\n\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0), a_Position64Low);\n\n  float originSize = a_Size.x; // \u56FA\u5B9A\u9AD8\u5EA6\n  if (u_heightfixed < 1.0) {\n    originSize = project_float_meter(a_Size.x); // \u9AD8\u5EA6\u968F zoom \u8C03\u6574\n  }\n\n  float wallHeight = originSize * miter;\n  float lightWeight = calc_lighting(vec4(project_pos.xy, wallHeight, 1.0));\n\n  v_blur = min(project_float_pixel(2.0) / originSize, 0.05);\n  v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);\n\n  // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4\n  if (\n    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET\n  ) {\n    // mapbox\n    // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8\n    float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);\n    if (u_heightfixed > 0.0) {\n      wallHeight *= mapboxZoomScale;\n    }\n  }\n\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, wallHeight, 1.0));\n\n  setPickingColor(a_PickingColor);\n}\n',fragmentShader:'#define Animate 0.0\n#define LineTexture 1.0\n\n// line texture\n\nuniform sampler2D u_texture;\nlayout(std140) uniform commonUniorm {\n  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n  vec4 u_sourceColor;\n  vec4 u_targetColor;\n  vec2 u_textSize;\n  float u_icon_step: 100;\n  float u_heightfixed;\n  float u_linearColor: 0;\n  float u_line_texture;\n  float u_textureBlend;\n  float u_iconStepCount;\n  float u_time;\n};\n\n\nin vec2 v_iconMapUV;\nin vec4 v_color;\nin float v_blur;\nin vec4 v_dataset;\n\nout vec4 outputColor;\n\n#pragma include "picking"\n\nvoid main() {\n  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6\n  float d_distance_ratio = v_dataset.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B\n  float v = v_dataset.a;\n\n  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272\n    outputColor = mix(u_sourceColor, u_targetColor, v);\n  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272\n     outputColor = v_color;\n  }\n\n  outputColor.a *= v_color.a; // \u5168\u5C40\u900F\u660E\u5EA6\n  if(u_animate.x == Animate) {\n      animateSpeed = u_time / u_animate.y;\n       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);\n      alpha = (alpha + u_animate.w -1.0) / u_animate.w;\n      alpha = smoothstep(0., 1., alpha);\n      outputColor.a *= alpha;\n  }\n\n  if(u_line_texture == LineTexture) { // while load texture\n    float aDistance = v_dataset.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB\n    float d_texPixelLen = v_dataset.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E\n    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);\n    float v = v_dataset.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C\n\n    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 start\n    float flag = 0.0;\n    if(u > 1.0/u_iconStepCount) {\n      flag = 1.0;\n    }\n    u = fract(u*u_iconStepCount);\n    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 end\n\n    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;\n    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);\n\n    // Tip: \u5224\u65AD\u7EB9\u7406\u95F4\u9694\n    if(flag > 0.0) {\n      pattern = vec4(0.0);\n    }\n\n    if(u_textureBlend == 0.0) { // normal\n      pattern.a = 0.0;\n      outputColor = filterColor(outputColor + pattern);\n    } else { // replace\n        pattern.a *= v_color.a;\n        if(outputColor.a <= 0.0) {\n          pattern.a = 0.0;\n        }\n        outputColor = filterColor(pattern);\n    }\n  }\n\n\n  // blur - AA\n  if(v < v_blur) {\n    outputColor.a = mix(0.0, outputColor.a, v/v_blur);\n  } else if(v > 1.0 - v_blur) {\n    outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - v_blur))/v_blur);\n  }\n\n  outputColor = filterColor(outputColor);\n}\n',triangulation:y.LineTriangulation,defines:n.getDefines(),inject:n.getInject(),depth:{enable:!1},blend:n.getBlend()}))];})();}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:p.AttributeType.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:2,update:n=>{let{size:r=1}=n;return Array.isArray(r)?[r[0],r[1]]:[r,0];}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:p.AttributeType.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:p.gl.STATIC_DRAW,data:[],type:p.gl.FLOAT},size:3,update:(n,r,i,a,o)=>o}}),this.styleAttributeService.registerStyleAttribute({name:"distanceAndTotalAndMiter",type:p.AttributeType.Attribute,descriptor:{name:"a_Distance_Total_Miter",shaderLocation:this.attributeLocation.DISTANCE_MITER_TOTAL,buffer:{usage:p.gl.STATIC_DRAW,data:[],type:p.gl.FLOAT},size:3,update:(n,r,i)=>[i[3],i[4],i[5]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:p.AttributeType.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:2,update:n=>{let r=this.iconService.getIconMap(),{texture:i}=n,{x:a,y:o}=r[i]||{x:0,y:0};return[a,o];}}});}}let B={arc:b,arc3d:w,greatcircle:I,wall:F,line:N.default,simple:D,flowline:P,earthArc3d:w};class j extends h.default{constructor(...n){super(...n),(0,f.default)(this,"type","LineLayer"),(0,f.default)(this,"enableShaderEncodeStyles",["stroke","offsets","opacity","thetaOffset"]),(0,f.default)(this,"arrowInsertCount",0),(0,f.default)(this,"defaultSourceConfig",{data:[{lng1:100,lat1:30,lng2:130,lat2:30}],options:{parser:{type:"json",x:"lng1",y:"lat1",x1:"lng2",y1:"lat2"}}});}buildModels(){var n=this;return(0,u.default)(function*(){let r=n.getModelType();n.layerModel=new B[r](n),yield n.initLayerModels();})();}getDefaultConfig(){return({line:{},linearline:{},simple:{},wall:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"},tileLine:{},earthArc3d:{},flowline:{},arrow:{}})[this.getModelType()];}getModelType(){var n;if(this.layerType)return this.layerType;let r=this.styleAttributeService.getLayerStyleAttribute("shape");return(null==r||null===(n=r.scale)||void 0===n?void 0:n.field)||"line";}processData(n){if("simple"!==this.getModelType())return n;let r=[];return n.map(n=>{if(Array.isArray(n.coordinates)&&Array.isArray(n.coordinates[0])&&Array.isArray(n.coordinates[0][0])){let i=(0,s.default)({},n);n.coordinates.map(n=>{r.push((0,s.default)((0,s.default)({},i),{},{coordinates:n}));});}else r.push(n);}),r;}}},"6fc5b35e":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{QueryFilter:function(){return K;}});var a,o=i("777fffbe"),s=i("852bbaa9"),l=i("613f75ca"),u=o._(l),c=i("ee64167d"),f=o._(c),d=i("e4870cf0"),h=o._(d),p=i("64681837"),m=i("e2a12cbd"),g=i("c5499b8c"),v=i("78a22024"),y=o._(v),_=i("a5a99096"),b=o._(_),x=i("f34e933b"),E=o._(x),w=i("adf76174"),S=o._(w),T=i("064ecd09"),A=o._(T),C=i("ec71d407"),O=o._(C),M=i("ce03fd86"),R=o._(M),P=i("609f48be"),k=s._(P),I=i("cd1e34ba"),L=i("0300f56f"),N=o._(L),D=i("17740a74"),F=i("8f0ec5f3"),B=o._(F),j=i("dac8af92"),z=function(n,r,i,a){return n?(0,j.jsxs)(j.Fragment,{children:[i.getMessage("tableForm.collapsed","\u5C55\u5F00"),a&&"(".concat(a,")"),(0,j.jsx)(N.default,{style:{marginInlineStart:"0.5em",transition:"0.3s all",transform:"rotate(".concat(n?0:.5,"turn)")}})]}):(0,j.jsxs)(j.Fragment,{children:[i.getMessage("tableForm.expand","\u6536\u8D77"),(0,j.jsx)(N.default,{style:{marginInlineStart:"0.5em",transition:"0.3s all",transform:"rotate(".concat(n?0:.5,"turn)")}})]});},U=function(n){var r=n.setCollapsed,i=n.collapsed,a=void 0!==i&&i,o=n.submitter,s=n.style,l=n.hiddenNum,u=(0,k.useContext)(b.default.ConfigContext).getPrefixCls,c=(0,p.useIntl)(),f=(0,k.useContext)(p.ProProvider).hashId,d=(0,D.omitBoolean)(n.collapseRender)||z;return(0,j.jsxs)(B.default,{style:s,size:16,children:[o,!1!==n.collapseRender&&(0,j.jsx)("a",{className:"".concat(u("pro-query-filter-collapse-button")," ").concat(f).trim(),onClick:function(){return r(!a);},children:null==d?void 0:d(a,n,c,l)})]});},V=i("a854094b"),G=o._(V),H=i("a3273044"),W=["collapsed","layout","defaultCollapsed","defaultColsNumber","defaultFormItemsNumber","span","searchGutter","searchText","resetText","optionRender","collapseRender","onReset","onCollapse","labelWidth","style","split","preserve","ignoreRules","showHiddenNum","submitterColSpanProps"],X={xs:513,sm:513,md:785,lg:992,xl:1057,xxl:1/0},q={vertical:[[513,1,"vertical"],[785,2,"vertical"],[1057,3,"vertical"],[1/0,4,"vertical"]],default:[[513,1,"vertical"],[701,2,"vertical"],[1062,3,"horizontal"],[1352,3,"horizontal"],[1/0,4,"horizontal"]]},$=function(n,r,i){if(i&&"number"==typeof i)return{span:i,layout:n};var a=((i?["xs","sm","md","lg","xl","xxl"].map(function(n){return[X[n],24/i[n],"horizontal"];}):q[n||"default"])||q.default).find(function(n){return r<n[0]+16;});return a?{span:24/a[1],layout:null==a?void 0:a[2]}:{span:8,layout:"horizontal"};},Y=function(n){var r,i,a,o,s,l=(0,p.useIntl)(),u=(0,k.useContext)(p.ProProvider).hashId,c=n.resetText||l.getMessage("tableForm.reset","\u91CD\u7F6E"),d=n.searchText||l.getMessage("tableForm.search","\u641C\u7D22"),m=(0,R.default)(function(){return n.defaultCollapsed&&!!n.submitter;},{value:n.collapsed,onChange:n.onCollapse}),g=(0,f.default)(m,2),v=g[0],_=g[1],x=n.optionRender,w=n.collapseRender,T=n.split,C=n.items,O=n.spanSize,M=n.showLength,P=n.searchGutter,I=n.showHiddenNum,L=(0,k.useMemo)(function(){return n.submitter&&!1!==x?k.default.cloneElement(n.submitter,(0,h.default)({searchConfig:{resetText:c,submitText:d},render:x?function(r,i){return x((0,h.default)((0,h.default)({},n),{},{resetText:c,searchText:d}),n,i);}:x},n.submitter.props)):null;},[n,c,d,x]),N=0,D=0,F=!1,B=0,z=0,V=(r=n.ignoreRules,null==C?void 0:C.flatMap(function(n){var i,a,o;return(null==n||null===(i=n.type)||void 0===i?void 0:i.displayName)!=="ProForm-Group"||null!==(a=n.props)&&void 0!==a&&a.title?r&&k.default.isValidElement(n)?k.default.cloneElement(n,(0,h.default)((0,h.default)({},n.props),{},{formItemProps:(0,h.default)((0,h.default)({},null===(o=n.props)||void 0===o?void 0:o.formItemProps),{},{rules:[]})})):n:n.props.children;})).map(function(r,i){var a,o,s,l,u,c=k.default.isValidElement(r)&&null!==(a=null==r||null===(o=r.props)||void 0===o?void 0:o.colSize)&&void 0!==a?a:1,f=Math.min(O.span*(c||1),24);N+=f,B+=c,0===i&&(F=24===f&&!(null!=r&&null!==(u=r.props)&&void 0!==u&&u.hidden));var d=(null==r||null===(s=r.props)||void 0===s?void 0:s.hidden)||v&&(F||B>M)&&!!i;D+=1;var h=k.default.isValidElement(r)&&(r.key||"".concat(null===(l=r.props)||void 0===l?void 0:l.name))||i;return k.default.isValidElement(r)&&d?n.preserve?{itemDom:k.default.cloneElement(r,{hidden:!0,key:h||i}),hidden:!0,colSpan:f}:{itemDom:null,colSpan:0,hidden:!0}:{itemDom:r,colSpan:f,hidden:!1};}),G=V.map(function(r,i){var a,o,s=r.itemDom,l=r.colSpan;if(null==s||null===(a=s.props)||void 0===a?void 0:a.hidden)return s;var c=k.default.isValidElement(s)&&(s.key||"".concat(null===(o=s.props)||void 0===o?void 0:o.name))||i;return(24-z%24<l&&(N+=24-z%24,z+=24-z%24),z+=l,T&&z%24==0&&i<D-1)?(0,j.jsx)(y.default,{span:l,className:"".concat(n.baseClassName,"-row-split-line ").concat(n.baseClassName,"-row-split ").concat(u).trim(),children:s},c):(0,j.jsx)(y.default,{className:"".concat(n.baseClassName,"-row-split ").concat(u).trim(),span:l,children:s},c);}),H=I&&V.filter(function(n){return n.hidden;}).length,W=(0,k.useMemo)(function(){return!(N<24)&&!(B<=M);},[B,M,N]),X=(0,k.useMemo)(function(){var r,i,a,o,s=z%24+(null!==(r=null===(i=n.submitterColSpanProps)||void 0===i?void 0:i.span)&&void 0!==r?r:O.span);return s>24?24-(null!==(a=null===(o=n.submitterColSpanProps)||void 0===o?void 0:o.span)&&void 0!==a?a:O.span):24-s;},[z,z%24+(null!==(i=null===(a=n.submitterColSpanProps)||void 0===a?void 0:a.span)&&void 0!==i?i:O.span),null===(o=n.submitterColSpanProps)||void 0===o?void 0:o.span]),q=(0,k.useContext)(b.default.ConfigContext).getPrefixCls("pro-query-filter");return(0,j.jsxs)(S.default,{gutter:P,justify:"start",className:(0,A.default)("".concat(q,"-row"),u),children:[G,L&&(0,j.jsx)(y.default,(0,h.default)((0,h.default)({span:O.span,offset:X,className:(0,A.default)(null===(s=n.submitterColSpanProps)||void 0===s?void 0:s.className)},n.submitterColSpanProps),{},{style:{textAlign:"end"},children:(0,j.jsx)(E.default.Item,{label:" ",colon:!1,shouldUpdate:!1,className:"".concat(q,"-actions ").concat(u).trim(),children:(0,j.jsx)(U,{hiddenNum:H,collapsed:v,collapseRender:!!W&&w,submitter:L,setCollapsed:_},"pro-form-query-filter-actions")})}),"submitter")]},"resize-observer-row");},Z=(0,m.isBrowser)()?null===(a=document)||void 0===a||null===(a=a.body)||void 0===a?void 0:a.clientWidth:1024;function K(n){var r=n.collapsed,i=n.layout,a=n.defaultCollapsed,o=void 0===a||a,s=n.defaultColsNumber,l=n.defaultFormItemsNumber,c=n.span,d=n.searchGutter,p=void 0===d?24:d,m=(n.searchText,n.resetText,n.optionRender),v=n.collapseRender,y=n.onReset,_=n.onCollapse,x=n.labelWidth,E=void 0===x?"80":x,w=n.style,S=n.split,T=n.preserve,C=void 0===T||T,M=n.ignoreRules,R=n.showHiddenNum,P=void 0!==R&&R,L=n.submitterColSpanProps,N=(0,u.default)(n,W),D=(0,k.useContext)(b.default.ConfigContext).getPrefixCls("pro-query-filter"),F=(0,H.useStyle)("QueryFilter",function(n){var r;return[(r=(0,h.default)((0,h.default)({},n),{},{componentCls:".".concat(D)}),(0,G.default)({},r.componentCls,(0,G.default)((0,G.default)((0,G.default)((0,G.default)({"&&":{padding:24}},"".concat(r.antCls,"-form-item"),{marginBlock:0}),"".concat(r.proComponentsCls,"-form-group-title"),{marginBlock:0}),"&-row",{rowGap:24,"&-split":(0,G.default)((0,G.default)({},"".concat(r.proComponentsCls,"-form-group"),{display:"flex",alignItems:"center",gap:r.marginXS}),"&:last-child",{marginBlockEnd:12}),"&-split-line":{"&:after":{position:"absolute",width:"100%",content:'""',height:1,insetBlockEnd:-12,borderBlockEnd:"1px dashed ".concat(r.colorSplit)}}}),"&-collapse-button",{display:"flex",alignItems:"center",color:r.colorPrimary})))];}),B=F.wrapSSR,z=F.hashId,U=(0,g.useMountMergeState)(function(){return"number"==typeof(null==w?void 0:w.width)?null==w?void 0:w.width:Z;}),V=(0,f.default)(U,2),X=V[0],q=V[1],K=(0,k.useMemo)(function(){return $(i,X+16,c);},[i,X,c]),Q=(0,k.useMemo)(function(){if(void 0!==l)return l;if(void 0!==s){var n=24/K.span-1;return s>n?n:s;}return Math.max(1,24/K.span-1);},[s,l,K.span]),J=(0,k.useMemo)(function(){if(E&&"vertical"!==K.layout&&"auto"!==E)return{labelCol:{flex:"0 0 ".concat(E,"px")},wrapperCol:{style:{maxWidth:"calc(100% - ".concat(E,"px)")}},style:{flexWrap:"nowrap"}};},[K.layout,E]);return B((0,j.jsx)(O.default,{onResize:function(n){X!==n.width&&n.width>17&&q(n.width);},children:(0,j.jsx)("div",{className:"".concat(D,"-container ").concat(z),children:(0,j.jsx)(I.BaseForm,(0,h.default)((0,h.default)({isKeyPressSubmit:!0,preserve:C},N),{},{className:(0,A.default)(D,z,N.className),onReset:y,style:w,layout:K.layout,fieldProps:{style:{width:"100%"}},formItemProps:J,groupProps:{titleStyle:{display:"inline-block",marginInlineEnd:16}},contentRender:function(i,a,s){return(0,j.jsx)(Y,{spanSize:K,collapsed:r,form:s,submitterColSpanProps:L,collapseRender:v,defaultCollapsed:o,onCollapse:_,optionRender:m,submitter:a,items:i,split:S,baseClassName:D,resetText:n.resetText,searchText:n.searchText,searchGutter:p,preserve:C,ignoreRules:M,showLength:Q,showHiddenNum:P});}}))})},"resize-observer"));}},"7070677b":function(n,r,i){"use strict";var a=i("bc5006d6");function o(n,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields(s,this,r),this.length=this._features.length;}function s(n,r,i){15===n?r.version=i.readVarint():1===n?r.name=i.readString():5===n?r.extent=i.readVarint():2===n?r._features.push(i.pos):3===n?r._keys.push(i.readString()):4===n&&r._values.push(function(n){for(var r=null,i=n.readVarint()+n.pos;n.pos<i;){var a=n.readVarint()>>3;r=1===a?n.readString():2===a?n.readFloat():3===a?n.readDouble():4===a?n.readVarint64():5===a?n.readVarint():6===a?n.readSVarint():7===a?n.readBoolean():null;}return r;}(i));}n.exports=o,o.prototype.feature=function(n){if(n<0||n>=this._features.length)throw Error("feature index out of bounds");this._pbf.pos=this._features[n];var r=this._pbf.readVarint()+this._pbf.pos;return new a(this._pbf,r,this.extent,this._keys,this._values);};},"70db0e1d":function(n,r,i){"use strict";function a(n){return+n;}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},"70f716d9":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return f;}});var a=i("777fffbe"),o=i("42520f5c"),s=a._(o);function l(n,r){this._context=n,this._k=(1-r)/6;}l.prototype={areaStart:s.default,areaEnd:s.default,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0;},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);}},point:function(n,r){switch(n=+n,r=+r,this._point){case 0:this._point=1,this._x3=n,this._y3=r;break;case 1:this._point=2,this._context.moveTo(this._x4=n,this._y4=r);break;case 2:this._point=3,this._x5=n,this._y5=r;break;default:!function(n,r,i){n._context.bezierCurveTo(n._x1+n._k*(n._x2-n._x0),n._y1+n._k*(n._y2-n._y0),n._x2+n._k*(n._x1-r),n._y2+n._k*(n._y1-i),n._x2,n._y2);}(this,n,r);}this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=r;}};var u=i("0d102543");function c(n,r){this._context=n,this._alpha=r;}c.prototype={areaStart:s.default,areaEnd:s.default,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0;},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);}},point:function(n,r){if(n=+n,r=+r,this._point){var i=this._x2-n,a=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+a*a,this._alpha));}switch(this._point){case 0:this._point=1,this._x3=n,this._y3=r;break;case 1:this._point=2,this._context.moveTo(this._x4=n,this._y4=r);break;case 2:this._point=3,this._x5=n,this._y5=r;break;default:!function(n,r,i){var a=n._x1,o=n._y1,s=n._x2,l=n._y2;if(n._l01_a>u.epsilon){var c=2*n._l01_2a+3*n._l01_a*n._l12_a+n._l12_2a,f=3*n._l01_a*(n._l01_a+n._l12_a);a=(a*c-n._x0*n._l12_2a+n._x2*n._l01_2a)/f,o=(o*c-n._y0*n._l12_2a+n._y2*n._l01_2a)/f;}if(n._l23_a>u.epsilon){var d=2*n._l23_2a+3*n._l23_a*n._l12_a+n._l12_2a,h=3*n._l23_a*(n._l23_a+n._l12_a);s=(s*d+n._x1*n._l23_2a-r*n._l12_2a)/h,l=(l*d+n._y1*n._l23_2a-i*n._l12_2a)/h;}n._context.bezierCurveTo(a,o,s,l,n._x2,n._y2);}(this,n,r);}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=r;}};var f=function n(r){function i(n){return r?new c(n,r):new l(n,0);}return i.alpha=function(r){return n(+r);},i;}(.5);},"715ff153":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{isObject:function(){return u;},mergeData:function(){return c;},useDefaultAdaptor:function(){return s;},useOverrideAdaptor:function(){return l;}});var a=i("777fffbe")._(i("d7948920")),o=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};function s(n){return(r,...i)=>(0,a.default)({},n(r,...i),r);}function l(n){return(r,...i)=>(0,a.default)({},r,n(r,...i));}function u(n){return!(n instanceof Date)&&"object"==typeof n;}function c(n,r){if(!n)return r;if(Array.isArray(n))return n;if(u(n)){let{value:i=r}=n;return Object.assign(Object.assign({},o(n,["value"])),{value:i});}return n;}},"717030db":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return l;}});var a=i("777fffbe")._(i("5ff15420")),o=i("27ee04b2");function s(n,r,i,a){this.x=n,this.z=r,this.o=i,this.e=a,this.v=!1,this.n=this.p=null;}function l(n,r,i,l,c){var f,d,h=[],p=[];if(n.forEach(function(n){if(!((r=n.length-1)<=0)){var r,i,l=n[0],u=n[r];if((0,a.default)(l,u)){if(!l[2]&&!u[2]){for(c.lineStart(),f=0;f<r;++f)c.point((l=n[f])[0],l[1]);c.lineEnd();return;}u[0]+=2*o.epsilon;}h.push(i=new s(l,n,null,!0)),p.push(i.o=new s(l,null,i,!1)),h.push(i=new s(u,n,null,!1)),p.push(i.o=new s(u,null,i,!0));}}),h.length){for(p.sort(r),u(h),u(p),f=0,d=p.length;f<d;++f)p[f].e=i=!i;for(var m,g,v=h[0];;){for(var y=v,_=!0;y.v;)if((y=y.n)===v)return;m=y.z,c.lineStart();do{if(y.v=y.o.v=!0,y.e){if(_)for(f=0,d=m.length;f<d;++f)c.point((g=m[f])[0],g[1]);else l(y.x,y.n.x,1,c);y=y.n;}else{if(_)for(f=(m=y.p.z).length-1;f>=0;--f)c.point((g=m[f])[0],g[1]);else l(y.x,y.p.x,-1,c);y=y.p;}m=(y=y.o).z,_=!_;}while(!y.v)c.lineEnd();}}}function u(n){if(r=n.length){for(var r,i,a=0,o=n[0];++a<r;)o.n=i=n[a],i.p=o,o=i;o.n=i=n[0],i.p=o;}}},"7242d2f8":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{create:function(){return o;},fromMat4:function(){return s;},fromValues:function(){return l;}});var a=i("852bbaa9")._(i("1cf5f081"));function o(){var n=new a.ARRAY_TYPE(9);return a.ARRAY_TYPE!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1,n;}function s(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[4],n[4]=r[5],n[5]=r[6],n[6]=r[8],n[7]=r[9],n[8]=r[10],n;}function l(n,r,i,o,s,l,u,c,f){var d=new a.ARRAY_TYPE(9);return d[0]=n,d[1]=r,d[2]=i,d[3]=o,d[4]=s,d[5]=l,d[6]=u,d[7]=c,d[8]=f,d;}},"72a58360":function(n,r,i){"use strict";var a=i("b53528ac"),o=Array.prototype.concat,s=Array.prototype.slice,l=n.exports=function(n){for(var r=[],i=0,l=n.length;i<l;i++){var u=n[i];a(u)?r=o.call(r,s.call(u)):r.push(u);}return r;};l.wrap=function(n){return function(){return n(l(arguments));};};},"72baedf4":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"Advance",{enumerable:!0,get:function(){return p;}});var a=i("777fffbe"),o=a._(i("1f338b89")),s=i("0381584d"),l=a._(i("8f2f8753")),u=i("2843bd80"),c=i("45669125"),f=i("f5373dff"),d=i("7d4c6398"),h=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let p=(0,u.createElement)(n=>{let r;let i=n.attributes,{className:a,class:u,transform:p,rotate:m,labelTransform:g,labelTransformOrigin:v,x:y,y:_,x0:b=y,y0:x=_,text:E,background:w,connector:S,startMarker:T,endMarker:A,coordCenter:C,innerHTML:O}=i,M=h(i,["className","class","transform","rotate","labelTransform","labelTransformOrigin","x","y","x0","y0","text","background","connector","startMarker","endMarker","coordCenter","innerHTML"]);if(n.style.transform=`translate(${y}, ${_})`,[y,_,b,x].some(n=>!(0,o.default)(n))){n.children.forEach(n=>n.remove());return;}let R=(0,f.subObject)(M,"background"),{padding:P}=R,k=h(R,["padding"]),I=(0,f.subObject)(M,"connector"),{points:L=[]}=I,N=h(I,["points"]);r=O?(0,d.select)(n).maybeAppend("html","html",a).style("zIndex",0).style("innerHTML",O).call(c.applyStyle,Object.assign({transform:g,transformOrigin:v},M)).node():(0,d.select)(n).maybeAppend("text","text").style("zIndex",0).style("text",E).call(c.applyStyle,Object.assign({textBaseline:"middle",transform:g,transformOrigin:v},M)).node();let D=(0,d.select)(n).maybeAppend("background","rect").style("zIndex",-1).call(c.applyStyle,function(n,r=[]){let[i=0,a=0,o=i,s=a]=r,l=n.parentNode,u=l.getEulerAngles();l.setEulerAngles(0);let{min:c,halfExtents:f}=n.getLocalBounds(),[d,h]=c,[p,m]=f;return l.setEulerAngles(u),{x:d-s,y:h-i,width:2*p+s+a,height:2*m+i+o};}(r,P)).call(c.applyStyle,w?k:{}).node(),F=+b<C[0],B=+x<C[1],j=function(n,r,i,a,o=!0,s=!0){let u=n=>(0,l.default)()(n);if(!r[0]&&!r[1])return u([function(n){let{min:[r,i],max:[a,o]}=n.getLocalBounds(),s=0,l=0;return r>0&&(s=r),a<0&&(s=a),i>0&&(l=i),o<0&&(l=o),[s,l];}(n),r]);if(!i.length)return u([[0,0],r]);let[c,f]=i,d=[...f],h=[...c];if(f[0]!==c[0]){let n=o?-4:4;d[1]=f[1],s&&!o&&(d[0]=Math.max(c[0],f[0]-n),f[1]<c[1]?h[1]=d[1]:(h[1]=c[1],h[0]=Math.max(h[0],d[0]-n))),s||o||(d[0]=Math.max(c[0],f[0]-n),f[1]>c[1]?h[1]=d[1]:(h[1]=c[1],h[0]=Math.max(h[0],d[0]-n))),!s&&o&&(d[0]=Math.min(c[0],f[0]-n),f[1]>c[1]?h[1]=d[1]:(h[1]=c[1],h[0]=Math.min(h[0],d[0]-n))),s&&o&&(d[0]=Math.min(c[0],f[0]-n),f[1]<c[1]?h[1]=d[1]:(h[1]=c[1],h[0]=Math.min(h[0],d[0]-n)));}return u([f,d,h,c,r]);}(D,[+b-+y,+x-+_],L,0,F,B),z=T&&new s.Marker({id:"startMarker",style:Object.assign({x:0,y:0},(0,f.subObject)(M,"startMarker"))}),U=A&&new s.Marker({id:"endMarker",style:Object.assign({x:0,y:0},(0,f.subObject)(M,"endMarker"))});(0,d.select)(n).maybeAppend("connector","path").style("zIndex",0).style("d",j).style("markerStart",z).style("markerEnd",U).call(c.applyStyle,S?N:{});});},"73098d15":function(n,r,i){"use strict";function a(){return{width:document.documentElement.clientWidth,height:window.innerHeight||document.documentElement.clientHeight};}function o(n){var r=n.getBoundingClientRect(),i=document.documentElement;return{left:r.left+(window.pageXOffset||i.scrollLeft)-(i.clientLeft||document.body.clientLeft||0),top:r.top+(window.pageYOffset||i.scrollTop)-(i.clientTop||document.body.clientTop||0)};}i.d(r,"__esModule",{value:!0}),i.e(r,{getClientSize:function(){return a;},getOffset:function(){return o;}});},73688796:function(n,r,i){var a=i("79ce4417"),o=i("ac5270b7"),s=i("c35e4cf6"),l=i("dcb862b4");n.exports=function(n,r){return a(n)||o(n,r)||s(n,r)||l();},n.exports.__esModule=!0,n.exports.default=n.exports;},"73ee4a11":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"d3LinearNice",{enumerable:!0,get:function(){return o;}});var a=i("9a4b906d");let o=(n,r,i=5)=>{let o;let s=[n,r],l=0,u=s.length-1,c=s[l],f=s[u];return f<c&&([c,f]=[f,c],[l,u]=[u,l]),(o=(0,a.tickIncrement)(c,f,i))>0?(c=Math.floor(c/o)*o,f=Math.ceil(f/o)*o,o=(0,a.tickIncrement)(c,f,i)):o<0&&(c=Math.ceil(c*o)/o,f=Math.floor(f*o)/o,o=(0,a.tickIncrement)(c,f,i)),o>0?(s[l]=Math.floor(c/o)*o,s[u]=Math.ceil(f/o)*o):o<0&&(s[l]=Math.ceil(c*o)/o,s[u]=Math.floor(f*o)/o),s;};},"743342e4":function(n,r,i){"use strict";function a(n){let r=0;switch(n){case"vec2":case"ivec2":r=2;break;case"vec3":case"ivec3":r=3;break;case"vec4":case"ivec4":case"mat2":r=4;break;case"mat3":r=9;break;case"mat4":r=16;}return r;}i.d(r,"__esModule",{value:!0}),i.e(r,{extractUniforms:function(){return l;},getUniformLengthByType:function(){return a;},removeDuplicateUniforms:function(){return u;}});let o=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function s(n,r=!1){let i={};return{content:n=n.replace(o,(n,o,s)=>{let l=s.split(":"),u=l[0].trim(),c="";switch(l.length>1&&(c=l[1].trim()),o){case"bool":c="true"===c;break;case"float":case"int":c=Number(c);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":c=c?c.replace("[","").replace("]","").split(",").reduce((n,r)=>(n.push(Number(r.trim())),n),[]):Array(a(o)).fill(0);}return i[u]=c,`${r?"uniform ":""}${o} ${u};
`;}),uniforms:i};}function l(n){let{content:r,uniforms:i}=s(n,!0);return{content:r=r.replace(/(\s*uniform\s*.*\s*){((?:\s*.*\s*)*?)};/g,(n,r,a)=>{let{content:o,uniforms:l}=s(a=a.trim().replace(/^.*$/gm,n=>`uniform ${n}`));return Object.assign(i,l),`${r}{
${o}
};`;}),uniforms:i};}function u(n){let r={};return n.replace(o,(n,i,a)=>{let o=a.trim();return r[o]?"":(r[o]=!0,`uniform ${i} ${o};
`);});}},"74336ea5":function(n,r,i){"use strict";var a=i("89a0cb41").default,o=i("f5a08f97").default;Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=a(i("25aa6dd5")),l=a(i("73688796")),u=a(i("a4b1544e")),c=a(i("66a0ba1a")),f=o(i("609f48be")),d=a(i("064ecd09")),h=i("0d7b2f56"),p=a(i("7c9399ac")),m=a(i("df272f3d")),g=i("c0dbcf45"),v=i("2247dc85"),y=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];(0,g.setTwoToneColor)(h.blue.primary);var _=f.forwardRef(function(n,r){var i=n.className,a=n.icon,o=n.spin,h=n.rotate,g=n.tabIndex,_=n.onClick,b=n.twoToneColor,x=(0,c.default)(n,y),E=f.useContext(p.default),w=E.prefixCls,S=void 0===w?"anticon":w,T=E.rootClassName,A=(0,d.default)(T,S,(0,u.default)((0,u.default)({},"".concat(S,"-").concat(a.name),!!a.name),"".concat(S,"-spin"),!!o||"loading"===a.name),i),C=g;void 0===C&&_&&(C=-1);var O=(0,v.normalizeTwoToneColors)(b),M=(0,l.default)(O,2),R=M[0],P=M[1];return f.createElement("span",(0,s.default)({role:"img","aria-label":a.name},x,{ref:r,tabIndex:C,onClick:_,className:A}),f.createElement(m.default,{icon:a,primaryColor:R,secondaryColor:P,style:h?{msTransform:"rotate(".concat(h,"deg)"),transform:"rotate(".concat(h,"deg)")}:void 0}));});_.displayName="AntdIcon",_.getTwoToneColor=g.getTwoToneColor,_.setTwoToneColor=g.setTwoToneColor,r.default=_;},"743ea378":function(n,r,i){var a=i("7bcda897"),o=1/0;n.exports=function(n){if("string"==typeof n||a(n))return n;var r=n+"";return"0"==r&&1/n==-o?"-0":r;};},"748c64cc":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return u;}});var a=i("777fffbe"),o=a._(i("5ca9cae9")),s=a._(i("e9b37d7e")),l=Object.prototype.hasOwnProperty,u=function(n,r){if(null===n||!(0,s.default)(n))return{};var i={};return(0,o.default)(r,function(r){l.call(n,r)&&(i[r]=n[r]);}),i;};},"74fc3704":function(n,r,i){var a=i("ce7446c0"),o=i("4600e9c8"),s=i("590de783"),l=i("29762c9a"),u=i("ca9928a9"),c=Array.prototype.splice;n.exports=function(n,r,i,f){var d=f?s:o,h=-1,p=r.length,m=n;for(n===r&&(r=u(r)),i&&(m=a(n,l(i)));++h<p;)for(var g=0,v=r[h],y=i?i(v):v;(g=d(m,y,g,f))>-1;)m!==n&&c.call(m,g,1),c.call(n,g,1);return n;};},"7505d865":function(n,r,i){n.exports=function(n,r){for(var i=-1,a=r.length,o=n.length;++i<a;)n[o+i]=r[i];return n;};},"750ce7b9":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{Axis:function(){return ei;}});var a=i("777fffbe"),o=i("3862611d"),s=i("7e9288b9"),l=i("47a6bde3"),u=i("a602d54e"),c=i("b0ea517f"),f=i("a46fcb64"),d=i("da5c7e2c"),h=a._(d),p=i("5557e3b4"),m=i("4da6dd65"),g=i("6210cecb"),v=i("a63b8d99"),y=function(n,r){return n.style.opacity||(n.style.opacity=1),(0,s.transition)(n,{opacity:0},r);},_=i("fc81244b"),b=["$el","cx","cy","d","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function x(n){var r={};for(var i in n)b.includes(i)&&(r[i]=n[i]);return r;}var E=(0,_.classNames)({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function w(n){return n.reduce(function(n,r,i){return n.push((0,o.__spreadArray)([0===i?"M":"L"],(0,o.__read)(r),!1)),n;},[]);}function S(n,r,i){return"surround"===r.type?function(n,r,i){var a=r.connect,s=r.center;if("line"===(void 0===a?"line":a))return w(n);if(!s)return[];var l=(0,g.distance)(n[0],s),u=i?0:1;return n.reduce(function(n,r,i){return 0===i?n.push((0,o.__spreadArray)(["M"],(0,o.__read)(r),!1)):n.push((0,o.__spreadArray)(["A",l,l,0,0,u],(0,o.__read)(r),!1)),n;},[]);}(n,r,i):w(n);}var T=function(n){function r(){return null!==n&&n.apply(this,arguments)||this;}return(0,o.__extends)(r,n),r.prototype.render=function(n,r){n.type,n.center,n.areaFill,n.closed;var i,a,l,u,f,d=(0,o.__rest)(n,["type","center","areaFill","closed"]),h=(a=void 0===(i=n.data)?[]:i,n.closed?a.map(function(n){var r=n.points,i=(0,o.__read)(r,1)[0];return(0,o.__assign)((0,o.__assign)({},n),{points:(0,o.__spreadArray)((0,o.__spreadArray)([],(0,o.__read)(r),!1),[i],!1)});}):a),p=(0,c.select)(r).maybeAppendByClassName(E.lineGroup,"g"),v=(0,c.select)(r).maybeAppendByClassName(E.regionGroup,"g"),_=(l=n.animate,u=n.isBillboard,f=h.map(function(r,i){return{id:r.id||"grid-line-".concat(i),d:S(r.points,n)};}),p.selectAll(E.line.class).data(f,function(n){return n.id;}).join(function(n){return n.append("path").each(function(n,r){var i=(0,m.getCallbackValue)(x((0,o.__assign)({d:n.d},d)),[n,r,f]);this.attr((0,o.__assign)({class:E.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:u},i));});},function(n){return n.transition(function(n,r){var i=(0,m.getCallbackValue)(x((0,o.__assign)({d:n.d},d)),[n,r,f]);return(0,s.transition)(this,i,l.update);});},function(n){return n.transition(function(){var n=this,r=y(this,l.exit);return(0,s.onAnimateFinished)(r,function(){return n.remove();}),r;});}).transitions()),b=function(n,r,i){var a=i.animate,l=i.connect,u=i.areaFill;if(r.length<2||!u||!l)return[];for(var c=Array.isArray(u)?u:[u,"transparent"],f=[],d=0;d<r.length-1;d++){var h=(0,o.__read)([r[d].points,r[d+1].points],2),p=function(n,r,i){var a=i.type,s=i.connect,l=i.center,u=i.closed?[["Z"]]:[],c=(0,o.__read)([S(n,i),S(r.slice().reverse(),i,!0)],2),f=c[0],d=c[1],h=(0,o.__read)([n[0],r.slice(-1)[0]],2),p=h[0],m=h[1],v=function(n,r){return[f,n,d,r,u].flat();};if("line"===s||"surround"===a)return v([(0,o.__spreadArray)(["L"],(0,o.__read)(m),!1)],[(0,o.__spreadArray)(["L"],(0,o.__read)(p),!1)]);if(!l)throw Error("Arc grid need to specified center");var y=(0,o.__read)([(0,g.distance)(m,l),(0,g.distance)(p,l)],2),_=y[0],b=y[1];return v([(0,o.__spreadArray)(["A",_,_,0,0,1],(0,o.__read)(m),!1),(0,o.__spreadArray)(["L"],(0,o.__read)(m),!1)],[(0,o.__spreadArray)(["A",b,b,0,0,0],(0,o.__read)(p),!1),(0,o.__spreadArray)(["L"],(0,o.__read)(p),!1)]);}(h[0],h[1],i);f.push({d:p,fill:c[d%c.length]});}return n.selectAll(E.region.class).data(f,function(n,r){return r;}).join(function(n){return n.append("path").each(function(n,r){var i=(0,m.getCallbackValue)(n,[n,r,f]);this.attr(i);}).attr("className",E.region.name);},function(n){return n.transition(function(n,r){var i=(0,m.getCallbackValue)(n,[n,r,f]);return(0,s.transition)(this,i,a.update);});},function(n){return n.transition(function(){var n=this,r=y(this,a.exit);return(0,s.onAnimateFinished)(r,function(){return n.remove();}),r;});}).transitions();}(v,h,n);return(0,o.__spreadArray)((0,o.__spreadArray)([],(0,o.__read)(_),!1),(0,o.__read)(b),!1);},r;}(l.Component),A=i("f3a8ca34"),C=i("3e5046a0");function O(n){var r=n.type,i=n.gridCenter;return"linear"===r?i:i||n.center;}var M=i("bcebdfcc"),R=i("f1d8aa22");function P(n,r,i,a,o){return void 0===a&&(a=!0),void 0===o&&(o=!1),!!a&&n===r||!!o&&n===i||n>r&&n<i;}function k(n,r){if(r)try{var i=r.replace(/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,function(r,i,a){var s,l,u,c;return"translate(".concat((l=(s=n.getBBox()).width,u=s.height,[(c=(0,o.__read)([i,a].map(function(n,r){var i;return n.includes("%")?parseFloat((null===(i=n.match(/[+-]?([0-9]*[.])?[0-9]+/))||void 0===i?void 0:i[0])||"0")/100*(0===r?l:u):n;}),2))[0],c[1]]),")");});n.attr("transform",i);}catch(n){}}var I=i("611ea1fe"),L=i("e7513aab"),N=i("0cf4df74"),D=i("83684c30"),F=a._(D),B=i("a0845193");function j(n,r){return(void 0===r&&(r={}),(0,F.default)(n))?0:"number"==typeof n?n:Math.floor((0,L.measureTextWidth)(n,r));}var z=function(n){return void 0!==n&&null!=n&&!Number.isNaN(n);},U=i("a125f0ec"),V={parity:function(n,r){var i=r.seq,a=void 0===i?2:i;return n.filter(function(n,r){return!(r%a)||((0,R.hide)(n),!1);});}},G=new Map([["hide",function(n,r,i,a){var s,l,u=n.length,c=r.keepHeader,f=r.keepTail;if(!(u<=1)&&(2!==u||!c||!f)){var d=V.parity,h=function(n){return n.forEach(a.show),n;},p=2,m=n.slice(),g=n.slice(),v=Math.min.apply(Math,(0,o.__spreadArray)([1],(0,o.__read)(n.map(function(n){return n.getBBox().width;})),!1));if("linear"===i.type&&((0,A.isAxisHorizontal)(i)||(0,A.isAxisVertical)(i))){var y=(0,U.getLocalBBox)(n[0]).left,_=Math.abs((0,U.getLocalBBox)(n[u-1]).right-y)||1;p=Math.max(Math.floor(u*v/_),p);}for(c&&(s=m.splice(0,1)[0]),f&&(l=m.splice(-1,1)[0],m.reverse()),h(m);p<n.length&&(0,B.boundTest)((l?(0,o.__spreadArray)((0,o.__spreadArray)([l],(0,o.__read)(g),!1),[s],!1):(0,o.__spreadArray)([s],(0,o.__read)(g),!1)).filter(z),i,null==r?void 0:r.margin).length;){if(l&&!s&&p%2==0){var b=m.splice(0,1);b.forEach(a.hide);}else if(l&&s){var b=m.splice(0,1);b.forEach(a.hide);}g=d(h(m),{seq:p}),p++;}}}],["rotate",function(n,r,i,a){var s,l,u=r.optionalAngles,c=r.margin,f=r.recoverWhenFailed,d=n.map(function(n){return n.getLocalEulerAngles();}),h=function(r){return n.forEach(function(n,i){var o=Array.isArray(r)?r[i]:r;a.rotate(n,+o);});};try{for(var p=(0,o.__values)(void 0===u?[0,45,90]:u),m=p.next();!m.done;m=p.next()){var g=m.value;if(h(g),(0,B.boundTest)(n,i,c).length<1)return;}}catch(n){s={error:n};}finally{try{m&&!m.done&&(l=p.return)&&l.call(p);}finally{if(s)throw s.error;}}(void 0===f||f)&&h(d);}],["ellipsis",function(n,r,i,a){if(!(n.length<=0)){var s=r.suffix,l=void 0===s?"...":s,u=r.minLength,c=r.maxLength,f=void 0===c?1/0:c,d=r.step,h=r.margin,p=void 0===h?[0,0,0,0]:h,m=(0,L.getFont)(a.getTextShape(n[0])),g=j(void 0===d?" ":d,m),v=u?j(u,m):g,y=j(f,m);((0,F.default)(y)||y===1/0)&&(y=Math.max.apply(null,n.map(function(n){return n.getBBox().width;})));var _=n.slice(),b=(0,o.__read)(p,4);b[0],b[1],b[2],b[3];for(var x=function(r){if(_.forEach(function(n){a.ellipsis(a.getTextShape(n),r,l);}),(_=(0,B.boundTest)(n,i,p)).length<1)return{value:void 0};},E=y;E>v+g;E-=g){var w=x(E);if("object"==typeof w)return w.value;}}}],["wrap",function(n,r,i,a,s){var l,u,c,f=r.maxLines,d=void 0===f?3:f,h=r.recoverWhenFailed,p=r.margin,g=void 0===p?[0,0,0,0]:p,v=(0,m.getCallbackValue)(null!==(c=r.wordWrapWidth)&&void 0!==c?c:50,[s]),y=n.map(function(n){return n.attr("maxLines")||1;}),_=Math.min.apply(Math,(0,o.__spreadArray)([],(0,o.__read)(y),!1)),b=function(){return(0,B.boundTest)(n,i,g).length<1;},x=(l=i.type,u=i.labelDirection,"linear"===l&&(0,A.isAxisHorizontal)(i)?"negative"===u?"bottom":"top":"middle"),E=function(r){return n.forEach(function(n,i){var o=Array.isArray(r)?r[i]:r;a.wrap(n,v,o,x);});};if(!(_>d)){if("linear"===i.type&&(0,A.isAxisHorizontal)(i)){if(E(d),b())return;}else for(var w=_;w<=d;w++)if(E(w),b())return;(void 0===h||h)&&E(y);}}]]),H=i("68f802c0");function W(n){for(var r=n;r<0;)r+=360;return Math.round(r%360);}function X(n,r){var i=(0,o.__read)(n,2),a=i[0],s=i[1],l=(0,o.__read)(r,2),u=l[0],c=l[1],f=(0,o.__read)([a*u+s*c,a*c-s*u],2),d=f[0];return Math.atan2(f[1],d);}function q(n,r,i){var a=i.type,o=i.labelAlign,s=(0,C.getLabelVector)(n,i),l=W(r),u=W((0,p.radToDeg)(X([1,0],s))),c="center",f="middle";return"linear"===a?[90,270].includes(u)&&0===l?(c="center",f=1===s[1]?"top":"bottom"):!(u%180)&&[90,270].includes(l)?c="center":0===u?P(l,0,90,!1,!0)?c="start":(P(l,0,90)||P(l,270,360))&&(c="start"):90===u?P(l,0,90,!1,!0)?c="start":(P(l,90,180)||P(l,270,360))&&(c="end"):270===u?P(l,0,90,!1,!0)?c="end":(P(l,90,180)||P(l,270,360))&&(c="start"):180===u&&(90===l?c="start":(P(l,0,90)||P(l,270,360))&&(c="end")):"parallel"===o?f=P(u,0,180,!0)?"top":"bottom":"horizontal"===o?P(u,90,270,!1)?c="end":(P(u,270,360,!1)||P(u,0,90))&&(c="start"):"perpendicular"===o&&(c=P(u,90,270)?"end":"start"),{textAlign:c,textBaseline:f};}function $(n,r,i){var a=i.showTick,s=i.tickLength,l=i.tickDirection,u=i.labelDirection,c=i.labelSpacing,f=r.indexOf(n),d=(0,m.getCallbackValue)(c,[n,f,r]),h=(0,o.__read)([(0,C.getLabelVector)(n.value,i),(0,H.getFactor)(u,l)],2),p=h[0],v=1===h[1]?(0,m.getCallbackValue)(a?s:0,[n,f,r]):0,y=(0,o.__read)((0,g.add)((0,g.scale)(p,d+v),(0,A.getValuePos)(n.value,i)),2);return{x:y[0],y:y[1]};}function Y(n,r){"text"===n.nodeName&&n.attr(r);}function Z(n,r){var i,a,o,s;i=this.node().childNodes,a={hide:R.hide,show:R.show,rotate:function(r,i){!function(n,r,i){r.setLocalEulerAngles(n);var a=q(r.__data__.value,n,i),o=r.querySelector(f.CLASS_NAMES.labelItem.class);o&&Y(o,a);}(+i,r,n);},ellipsis:function(n,r,i){n&&(0,M.ellipsisIt)(n,r||1/0,i);},wrap:function(n,r,i){var a,o;n&&(void 0===(a=i)&&(a=2),void 0===o&&(o="top"),(0,L.applyToText)(n,{wordWrap:!0,wordWrapWidth:r,maxLines:a,textBaseline:o}));},getTextShape:function(n){return n.querySelector("text");}},(s=void 0===(o=n.labelOverlap)?[]:o).length&&s.forEach(function(o){var s=o.type,l=G.get(s);n.labelOverlap.length<1||("hide"===s?(0,N.isInOffscreenGroup)(i[0]):"rotate"===s?i.some(function(n){var r;return!!(null===(r=n.attr("transform"))||void 0===r?void 0:r.includes("rotate"));}):("ellipsis"===s||"wrap"===s)&&!(i.filter(function(n){return n.querySelector("text");}).length>=1))||null==l||l(i,o,n,a,r);});}function K(n,r,i,a,s){var l,u=i.indexOf(r),d=(0,c.select)(n).append((l=s.labelFormatter,(0,h.default)(l)?function(){return(0,I.renderExtDo)((0,m.getCallbackValue)(l,[r,u,i,(0,C.getLabelVector)(r.value,s)]));}:function(){return(0,I.renderExtDo)(r.label||"");})).attr("className",f.CLASS_NAMES.labelItem.name).node(),g=(0,o.__read)((0,v.splitStyle)((0,C.getCallbackStyle)(a,[r,u,i])),2),y=g[0],_=g[1],b=_.transform,x=(0,o.__rest)(_,["transform"]);k(d,b);var E=function(n,r,i){var a,o,s=i.labelAlign;if(null===(o=r.style.transform)||void 0===o?void 0:o.includes("rotate"))return r.getLocalEulerAngles();var l=0,u=(0,C.getLabelVector)(n.value,i),c=(0,C.getLineTangentVector)(n.value,i);return"horizontal"===s?0:(l="perpendicular"===s?X([1,0],u):X([c[0]<0?-1:1,0],c),P(a=((0,p.radToDeg)(l)+360)%180,-90,90)||(a+=180),a);}(r,d,s);return d.getLocalEulerAngles()||d.setLocalEulerAngles(E),Y(d,(0,o.__assign)((0,o.__assign)({},q(r.value,E,s)),y)),n.attr(x),d;}function Q(n,r){return(0,C.getDirectionVector)(n,r.tickDirection,r);}function J(n,r,i,a,l,u){var d,p,g,y,_,b,x,E,w,S,T,O,M,R,P,k,I,L,N,D,F,B=(d=(0,c.select)(this),p=a.tickFormatter,g=Q(n.value,a),y="line",(0,h.default)(p)&&(y=function(){return(0,m.getCallbackValue)(p,[n,r,i,g]);}),d.append(y).attr("className",f.CLASS_NAMES.tickItem.name));_=Q(n.value,a),P=(b=a.tickLength,w=(0,o.__read)((x=(0,m.getCallbackValue)(b,[n,r,i]),[[0,0],[(E=(0,o.__read)(_,2))[0]*x,E[1]*x]]),2),T=(S=(0,o.__read)(w[0],2))[0],O=S[1],R={x1:T,x2:(M=(0,o.__read)(w[1],2))[0],y1:O,y2:M[1]}).x1,k=R.x2,I=R.y1,L=R.y2,D=(N=(0,o.__read)((0,v.splitStyle)((0,C.getCallbackStyle)(l,[n,r,i,_])),2))[0],F=N[1],"line"===B.node().nodeName&&B.styles((0,o.__assign)({x1:P,x2:k,y1:I,y2:L},D)),this.attr(F),B.styles(D);var j=(0,o.__read)((0,A.getValuePos)(n.value,a),2),z=j[0],U=j[1];return(0,s.transition)(this,{transform:"translate(".concat(z,", ").concat(U,")")},u);}var ee=i("1915def0"),et=i("b7c9e889");function en(n,r,i,a,l){var u=(0,v.subStyleProps)(a,"title"),d=(0,o.__read)((0,v.splitStyle)(u),2),h=d[0],p=d[1],m=p.transform,y=p.transformOrigin,_=(0,o.__rest)(p,["transform","transformOrigin"]);r.styles(_);var b=m||function(n,r,i){var a=2*n.getGeometryBounds().halfExtents[1];if("vertical"===r){if("left"===i)return"rotate(-90) translate(0, ".concat(a/2,")");if("right"===i)return"rotate(-90) translate(0, -".concat(a/2,")");}return"";}(n.node(),h.direction,h.position);n.styles((0,o.__assign)((0,o.__assign)({},h),{transformOrigin:y})),k(n.node(),b);var x=function(n,r,i){var a=i.titlePosition,s=void 0===a?"lb":a,l=i.titleSpacing,u=(0,et.parsePosition)(s),c=n.node().getLocalBounds(),f=(0,o.__read)(c.min,2),d=f[0],h=f[1],p=(0,o.__read)(c.halfExtents,2),m=p[0],v=p[1],y=(0,o.__read)(r.node().getLocalBounds().halfExtents,2),_=y[0],b=y[1],x=(0,o.__read)([d+m,h+v],2),E=x[0],w=x[1],S=(0,o.__read)((0,ee.parseSeriesAttr)(l),4),T=S[0],A=S[1],C=S[2],O=S[3];if(["start","end"].includes(s)&&"linear"===i.type){var M=i.startPos,R=i.endPos,P=(0,o.__read)("start"===s?[M,R]:[R,M],2),k=P[0],I=P[1],L=(0,g.normalize)([-I[0]+k[0],-I[1]+k[1]]),N=(0,o.__read)((0,g.scale)(L,T),2),D=N[0],F=N[1];return{x:k[0]+D,y:k[1]+F};}return u.includes("t")&&(w-=v+b+T),u.includes("r")&&(E+=m+_+A),u.includes("l")&&(E-=m+_+O),u.includes("b")&&(w+=v+b+C),{x:E,y:w};}((0,c.select)(i._offscreen||i.querySelector(f.CLASS_NAMES.mainGroup.class)),r,a),E=x.x,w=x.y;return(0,s.transition)(r.node(),{transform:"translate(".concat(E,", ").concat(w,")")},l);}function er(n,r,i,a){var l=n.showLine,d=n.showTick,h=n.showLabel,p=r.maybeAppendByClassName(f.CLASS_NAMES.lineGroup,"g"),m=(0,u.ifShow)(l,p,function(r){return(0,A.renderAxisLine)(r,n,a);})||[],g=r.maybeAppendByClassName(f.CLASS_NAMES.tickGroup,"g"),_=(0,u.ifShow)(d,g,function(r){var o,l;return o=(0,C.filterExec)(i,n.tickFilter),l=(0,v.subStyleProps)(n,"tick"),r.selectAll(f.CLASS_NAMES.tick.class).data(o,function(n){return n.id||n.label;}).join(function(r){return r.append("g").attr("className",f.CLASS_NAMES.tick.name).transition(function(r,i){return J.call(this,r,i,o,n,l,!1);});},function(r){return r.transition(function(r,i){return this.removeChildren(),J.call(this,r,i,o,n,l,a.update);});},function(n){return n.transition(function(){var n=this,r=y(this.childNodes[0],a.exit);return(0,s.onAnimateFinished)(r,function(){return n.remove();}),r;});}).transitions();})||[],b=r.maybeAppendByClassName(f.CLASS_NAMES.labelGroup,"g"),x=(0,u.ifShow)(h,b,function(l){var u,d,h,p,m;return u=r.node(),h=(0,C.filterExec)(i,n.labelFilter),p=(0,v.subStyleProps)(n,"label"),m=l.selectAll(f.CLASS_NAMES.label.class).data(h,function(n,r){return r;}).join(function(r){return r.append("g").attr("className",f.CLASS_NAMES.label.name).transition(function(r){K(this,r,i,p,n);var a=$(r,i,n),o=a.x,s=a.y;return this.style.transform="translate(".concat(o,", ").concat(s,")"),null;});},function(r){return r.transition(function(r){var l=this.querySelector(f.CLASS_NAMES.labelItem.class),u=K(this,r,i,p,n),c=(0,s.transitionShape)(l,u,a.update),d=$(r,i,n),h=d.x,m=d.y,g=(0,s.transition)(this,{transform:"translate(".concat(h,", ").concat(m,")")},a.update);return(0,o.__spreadArray)((0,o.__spreadArray)([],(0,o.__read)(c),!1),[g],!1);});},function(n){return d=n,n.transition(function(){var n=this,r=y(this.childNodes[0],a.exit);return(0,s.onAnimateFinished)(r,function(){return(0,c.select)(n).remove();}),r;}),d;}).transitions(),(0,s.onAnimatesFinished)(m,function(){Z.call(l,n,u);}),m;})||[];return(0,o.__spreadArray)((0,o.__spreadArray)((0,o.__spreadArray)([],(0,o.__read)(m),!1),(0,o.__read)(_),!1),(0,o.__read)(x),!1).filter(function(n){return!!n;});}var ei=function(n){function r(r){return n.call(this,r,f.AXIS_BASE_DEFAULT_ATTR)||this;}return(0,o.__extends)(r,n),r.prototype.render=function(n,r,i){var a=this,l=n.titleText,d=n.data,y=n.animate,_=n.showTitle,b=n.showGrid,x=n.dataThreshold,E=n.truncRange,w=(function(n,r){if(n.length<=r)return n;for(var i=Math.floor(n.length/r),a=[],o=0;o<n.length;o+=i)a.push(n[o]);return a;})(d,x).filter(function(n){var r=n.value;return!E||!(r>E[0])||!(r<E[1]);}),S=(0,s.parseAnimationOption)(void 0===i?y:i),M=(0,c.select)(r).maybeAppendByClassName(f.CLASS_NAMES.gridGroup,"g"),R=(0,u.ifShow)(b,M,function(r){var i,a,s,l,u,c,d,y;return a=(i=(0,v.subStyleProps)(n,"grid")).type,s=i.areaFill,l=O(n),u=(0,C.filterExec)(w,n.gridFilter),d="segment"===a?(c=n.gridLength,u.map(function(r,i){var a=r.value,s=(0,o.__read)((0,A.getValuePos)(a,n),2),l=s[0],u=s[1],f=(0,o.__read)((0,g.scale)((0,C.getDirectionVector)(a,n.gridDirection,n),c),2);return{id:i,points:[[l,u],[l+f[0],u+f[1]]]};})):function(n,r){var i=r.gridControlAngles,a=O(r);if(!a)throw Error("grid center is not provide");if(n.length<2)throw Error("Invalid grid data");if(!i||0===i.length)throw Error("Invalid gridControlAngles");var s=(0,o.__read)(a,2),l=s[0],u=s[1];return n.map(function(n,a){var s=n.value,c=(0,o.__read)((0,A.getValuePos)(s,r),2),f=c[0],d=c[1],h=(0,o.__read)([f-l,d-u],2),m=h[0],g=h[1],v=[];return i.forEach(function(n){var r=(0,p.degToRad)(n),i=(0,o.__read)([Math.cos(r),Math.sin(r)],2),a=i[0],s=i[1];v.push([m*a-g*s+l,m*s+g*a+u]);}),{points:v,id:a};});}(u,n),y=(0,o.__assign)((0,o.__assign)({},i),{center:l,areaFill:(0,h.default)(s)?u.map(function(n,r){return(0,m.getCallbackValue)(s,[n,r,u]);}):s,animate:S,data:d}),r.selectAll(f.CLASS_NAMES.grid.class).data([1]).join(function(n){return n.append(function(){return new T({style:y});}).attr("className",f.CLASS_NAMES.grid.name);},function(n){return n.transition(function(){return this.update(y);});},function(n){return n.remove();}).transitions();})||[],P=(0,c.select)(r).maybeAppendByClassName(f.CLASS_NAMES.mainGroup,"g");l&&(!this.initialized&&S.enter||this.initialized&&S.update)&&er(n,(0,c.select)(this.offscreenGroup),w,(0,s.parseAnimationOption)(!1));var k=er(n,(0,c.select)(P.node()),w,S),L=(0,c.select)(r).maybeAppendByClassName(f.CLASS_NAMES.titleGroup,"g"),N=(0,u.ifShow)(_,L,function(r){var i;return i=n.titleText,r.selectAll(f.CLASS_NAMES.title.class).data([{title:i}].filter(function(n){return!!n.title;}),function(n,r){return n.title;}).join(function(o){return o.append(function(){return(0,I.renderExtDo)(i);}).attr("className",f.CLASS_NAMES.title.name).transition(function(){return en((0,c.select)(this),r,a,n,S.enter);});},function(i){return i.transition(function(){return en((0,c.select)(this),r,a,n,S.update);});},function(n){return n.remove();}).transitions();})||[];return(0,o.__spreadArray)((0,o.__spreadArray)((0,o.__spreadArray)([],(0,o.__read)(R),!1),(0,o.__read)(k),!1),(0,o.__read)(N),!1).flat().filter(function(n){return!!n;});},r;}(l.Component);},"75aabd79":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"Base",{enumerable:!0,get:function(){return o;}});var a=i("777fffbe")._(i("d7948920"));class o{constructor(n){this.options=(0,a.default)({},this.getDefaultOptions()),this.update(n);}getOptions(){return this.options;}update(n={}){this.options=(0,a.default)({},this.options,n),this.rescale(n);}rescale(n){}}},"7700f5ce":function(n,r,i){var a=i("ccdb6272"),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,l=a(function(n){var r=[];return 46===n.charCodeAt(0)&&r.push(""),n.replace(o,function(n,i,a,o){r.push(a?o.replace(s,"$1"):i||n);}),r;});n.exports=l;},"7733d15c":function(n,r,i){var a=i("98ae9698"),o=i("88ddf3cf");n.exports=function(n,r){return n&&a(n,r,o);};},"777963a0":function(n,r,i){"use strict";function a(n){return Array.from(function*(n){for(let r of n)yield*r;}(n));}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},"777d655f":function(n,r,i){var a=i("137e7cc0");n.exports=function(n,r){return function(i,o){if(null==i)return i;if(!a(i))return n(i,o);for(var s=i.length,l=r?s:-1,u=Object(i);(r?l--:++l<s)&&!1!==o(u[l],l,u););return i;};};},"78b08bd4":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{WEEK_DAY_COUNT:function(){return a;},fillTime:function(){return x;},formatValue:function(){return b;},getQuarter:function(){return u;},getWeekStartDate:function(){return _;},isInRange:function(){return v;},isSame:function(){return g;},isSameDate:function(){return d;},isSameDecade:function(){return s;},isSameMonth:function(){return f;},isSameOrAfter:function(){return y;},isSameQuarter:function(){return c;},isSameTime:function(){return h;},isSameTimestamp:function(){return p;},isSameWeek:function(){return m;},isSameYear:function(){return l;}});var a=7;function o(n,r,i){return!n&&!r||n===r||!!n&&!!r&&i();}function s(n,r,i){return o(r,i,function(){return Math.floor(n.getYear(r)/10)===Math.floor(n.getYear(i)/10);});}function l(n,r,i){return o(r,i,function(){return n.getYear(r)===n.getYear(i);});}function u(n,r){return Math.floor(n.getMonth(r)/3)+1;}function c(n,r,i){return o(r,i,function(){return l(n,r,i)&&u(n,r)===u(n,i);});}function f(n,r,i){return o(r,i,function(){return l(n,r,i)&&n.getMonth(r)===n.getMonth(i);});}function d(n,r,i){return o(r,i,function(){return l(n,r,i)&&f(n,r,i)&&n.getDate(r)===n.getDate(i);});}function h(n,r,i){return o(r,i,function(){return n.getHour(r)===n.getHour(i)&&n.getMinute(r)===n.getMinute(i)&&n.getSecond(r)===n.getSecond(i);});}function p(n,r,i){return o(r,i,function(){return d(n,r,i)&&h(n,r,i)&&n.getMillisecond(r)===n.getMillisecond(i);});}function m(n,r,i,a){return o(i,a,function(){var o=n.locale.getWeekFirstDate(r,i),s=n.locale.getWeekFirstDate(r,a);return l(n,o,s)&&n.locale.getWeek(r,i)===n.locale.getWeek(r,a);});}function g(n,r,i,a,o){switch(o){case"date":return d(n,i,a);case"week":return m(n,r.locale,i,a);case"month":return f(n,i,a);case"quarter":return c(n,i,a);case"year":return l(n,i,a);case"decade":return s(n,i,a);case"time":return h(n,i,a);default:return p(n,i,a);}}function v(n,r,i,a){return!!r&&!!i&&!!a&&n.isAfter(a,r)&&n.isAfter(i,a);}function y(n,r,i,a,o){return!!g(n,r,i,a,o)||n.isAfter(i,a);}function _(n,r,i){var a=r.locale.getWeekFirstDay(n),o=r.setDate(i,1),s=r.getWeekDay(o),l=r.addDate(o,a-s);return r.getMonth(l)===r.getMonth(i)&&r.getDate(l)>1&&(l=r.addDate(l,-7)),l;}function b(n,r){var i=r.generateConfig,a=r.locale,o=r.format;return n?"function"==typeof o?o(n):i.locale.format(a.locale,n,o):"";}function x(n,r,i){var a=r,o=["getHour","getMinute","getSecond","getMillisecond"];return["setHour","setMinute","setSecond","setMillisecond"].forEach(function(r,s){a=i?n[r](a,n[o[s]](i)):n[r](a,0);}),a;}},"78ba7479":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{createMat4:function(){return o;},transformVector:function(){return s;}});var a=i("852bbaa9")._(i("26429605"));function o(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];}function s(n,r){var i=a.transformMat4([],r,n);return a.scale(i,i,1/i[3]),i;}},"78ccff10":function(n,r,i){var a=i("1d3bdddd"),o=i("aef7be7a"),s=Object.prototype.propertyIsEnumerable,l=Object.getOwnPropertySymbols,u=l?function(n){return null==n?[]:a(l(n=Object(n)),function(r){return s.call(n,r);});}:o;n.exports=u;},"792e6f22":function(n,r,i){"use strict";function a(n,r){return r-n?i=>(i-n)/(r-n):n=>.5;}i.d(r,"__esModule",{value:!0}),i.d(r,"createNormalize",{enumerable:!0,get:function(){return a;}});},"79ce4417":function(n,r,i){n.exports=function(n){if(Array.isArray(n))return n;},n.exports.__esModule=!0,n.exports.default=n.exports;},"7a349a12":function(n,r,i){"use strict";function a(n,r,i){return(n-r)/(i-r);}function o(n,r,i,a){var o=(r-i)/(a-i),s={};switch(n){case"rtl":s.right="".concat(100*o,"%"),s.transform="translateX(50%)";break;case"btt":s.bottom="".concat(100*o,"%"),s.transform="translateY(50%)";break;case"ttb":s.top="".concat(100*o,"%"),s.transform="translateY(-50%)";break;default:s.left="".concat(100*o,"%"),s.transform="translateX(-50%)";}return s;}function s(n,r){return Array.isArray(n)?n[r]:n;}i.d(r,"__esModule",{value:!0}),i.e(r,{getDirectionStyle:function(){return o;},getIndex:function(){return s;},getOffset:function(){return a;}});},"7a650845":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{EditableProTable:function(){return nG;},ProTable:function(){return nR;}});var a=i("777fffbe"),o=i("852bbaa9");i("933558cb"),i("5476660b");var s=i("64681837"),l=i("23934e00"),u=a._(l),c=i("9b84be4b"),f=a._(c),d=i("99c0cd4c"),h=a._(d),p=i("ee64167d"),m=a._(p),g=i("a854094b"),v=a._(g),y=i("f1020fa4"),_=a._(y),b=i("e4870cf0"),x=a._(b),E=i("613f75ca"),w=a._(E);i("f56fb1a9"),i("32de19ae");var S=i("a19e1e02"),T=a._(S),A=i("a5a99096"),C=a._(A),O=i("064ecd09"),M=a._(O),R=i("609f48be"),P=o._(R),k=i("a3273044"),I=function(n){var r=n.componentCls;return(0,v.default)({},r,{"&-divider":{flex:"none",width:n.lineWidth,marginInline:n.marginXS,marginBlock:n.marginLG,backgroundColor:n.colorSplit,"&-horizontal":{width:"initial",height:n.lineWidth,marginInline:n.marginLG,marginBlock:n.marginXS}},"&&-size-small &-divider":{marginBlock:n.marginLG,marginInline:n.marginXS,"&-horizontal":{marginBlock:n.marginXS,marginInline:n.marginLG}}});},L=i("dac8af92"),N=i("8ba174bc"),D=a._(N),F=T.default;F.isProCard=!0,F.Divider=function(n){var r=(0,(0,P.useContext)(C.default.ConfigContext).getPrefixCls)("pro-card"),i="".concat(r,"-divider"),a=(0,k.useStyle)("ProCardDivider",function(n){return[I((0,x.default)((0,x.default)({},n),{},{componentCls:".".concat(r)}))];}),o=a.wrapSSR,s=a.hashId,l=n.className,u=n.style,c=n.type,f=(0,M.default)(i,l,s,(0,v.default)({},"".concat(i,"-").concat(c),c));return o((0,L.jsx)("div",{className:f,style:void 0===u?{}:u}));},F.TabPane=D.default,F.Group=function(n){return(0,L.jsx)(T.default,(0,x.default)({bodyStyle:{padding:0}},n));},i("23105dea"),i("02a23b09");var B=i("1b9893fb"),j=o._(B);i("4e19c03f"),i("e6745695");var z=i("87ed5a26"),U=i("c5019dac"),V=i("c5499b8c"),G=i("e7d0cdde"),H=i("953c7673"),W=a._(H),X=i("a26da295"),q=a._(X),$=i("c20ab062"),Y=a._($),Z=i("0e2cd74b"),K=a._(Z),Q=i("82bfc804"),J=a._(Q),ee=i("e63fc6cd"),et=a._(ee),en=i("d0d233d5"),er=a._(en),ei=i("1f547793"),ea=a._(ei),eo=i("8f2efba6"),es=a._(eo),el=Object.prototype.hasOwnProperty,eu=i("31e3f343"),ec=a._(eu),ef=i("f6fedc10"),ed=a._(ef);function eh(n){var r=-1,i=null==n?0:n.length;for(this.__data__=new ed.default;++r<i;)this.add(n[r]);}function ep(n,r,i,a,o,s){var l=1&i,u=n.length,c=r.length;if(u!=c&&!(l&&c>u))return!1;var f=s.get(n),d=s.get(r);if(f&&d)return f==r&&d==n;var h=-1,p=!0,m=2&i?new eh:void 0;for(s.set(n,r),s.set(r,n);++h<u;){var g=n[h],v=r[h];if(a)var y=l?a(v,g,h,r,n,s):a(g,v,h,n,r,s);if(void 0!==y){if(y)continue;p=!1;break;}if(m){if(!function(n,r){for(var i=-1,a=null==n?0:n.length;++i<a;)if(r(n[i],i,n))return!0;return!1;}(r,function(n,r){if(!m.has(r)&&(g===n||o(g,n,i,a,s)))return m.push(r);})){p=!1;break;}}else if(!(g===v||o(g,v,i,a,s))){p=!1;break;}}return s.delete(n),s.delete(r),p;}eh.prototype.add=eh.prototype.push=function(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this;},eh.prototype.has=function(n){return this.__data__.has(n);};var em=i("3f775776"),eg=a._(em),ev=i("ac0c5eff"),ey=a._(ev),e_=i("c03e7baa"),eb=a._(e_);function ex(n){var r=-1,i=Array(n.size);return n.forEach(function(n,a){i[++r]=[a,n];}),i;}function eE(n){var r=-1,i=Array(n.size);return n.forEach(function(n){i[++r]=n;}),i;}var ew=eg.default?eg.default.prototype:void 0,eS=ew?ew.valueOf:void 0,eT=Object.prototype.propertyIsEnumerable,eA=Object.getOwnPropertySymbols,eC=eA?function(n){return null==n?[]:function(n,r){for(var i=-1,a=null==n?0:n.length,o=0,s=[];++i<a;){var l=n[i];r(l,i,n)&&(s[o++]=l);}return s;}(eA(n=Object(n)),function(r){return eT.call(n,r);});}:function(){return[];},eO=i("5b10c23d"),eM=a._(eO);function eR(n){var r,i;return i=n,r=(0,et.default)(i)?(0,eM.default)(i):(0,q.default)(i),(0,J.default)(n)?r:function(n,r){for(var i=-1,a=r.length,o=n.length;++i<a;)n[o+i]=r[i];return n;}(r,eC(n));}var eP=Object.prototype.hasOwnProperty,ek="[object Arguments]",eI="[object Array]",eL="[object Object]",eN=Object.prototype.hasOwnProperty,eD=i("6f0d7bd0"),eF=a._(eD),eB=i("93e76dce"),ej=i("8f0ec5f3"),ez=a._(ej),eU=function(n){var r=n.intl,i=n.onCleanSelected;return[(0,L.jsx)("a",{onClick:i,children:r.getMessage("alert.clear","\u6E05\u7A7A")},"0")];};function eV(n){var r=n.selectedRowKeys,i=void 0===r?[]:r,a=n.onCleanSelected,o=n.alwaysShowAlert,l=n.selectedRows,u=n.alertInfoRender,c=void 0===u?function(n){var r=n.intl;return(0,L.jsxs)(ez.default,{children:[r.getMessage("alert.selected","\u5DF2\u9009\u62E9"),i.length,r.getMessage("alert.item","\u9879"),"\xa0\xa0"]});}:u,f=n.alertOptionRender,d=void 0===f?eU:f,h=(0,s.useIntl)(),p=d&&d({onCleanSelected:a,selectedRowKeys:i,selectedRows:l,intl:h}),m=(0,(0,P.useContext)(C.default.ConfigContext).getPrefixCls)("pro-table-alert"),g=(0,k.useStyle)("ProTableAlert",function(n){var r;return[(r=(0,x.default)((0,x.default)({},n),{},{componentCls:".".concat(m)}),(0,v.default)({},r.componentCls,{marginBlockEnd:16,backgroundColor:(0,k.setAlpha)(r.colorTextBase,.02),borderRadius:r.borderRadius,border:"none","&-container":{paddingBlock:r.paddingSM,paddingInline:r.paddingLG},"&-info":{display:"flex",alignItems:"center",transition:"all 0.3s",color:r.colorTextTertiary,"&-content":{flex:1},"&-option":{minWidth:48,paddingInlineStart:16}}}))];}),y=g.wrapSSR,_=g.hashId;if(!1===c)return null;var b=c({intl:h,selectedRowKeys:i,selectedRows:l,onCleanSelected:a});return!1===b||i.length<1&&!o?null:y((0,L.jsx)("div",{className:"".concat(m," ").concat(_).trim(),children:(0,L.jsx)("div",{className:"".concat(m,"-container ").concat(_).trim(),children:(0,L.jsxs)("div",{className:"".concat(m,"-info ").concat(_).trim(),children:[(0,L.jsx)("div",{className:"".concat(m,"-info-content ").concat(_).trim(),children:b}),p?(0,L.jsx)("div",{className:"".concat(m,"-info-option ").concat(_).trim(),children:p}):null]})})}));}var eG=i("85158032"),eH=a._(eG),eW=i("8bbe4f57"),eX=a._(eW),eq=i("a4f36f54"),e$=a._(eq),eY=i("fbe36db6"),eZ=a._(eY),eK=i("1a2fb704"),eQ=a._(eK),eJ=i("1e1294ad"),e0=i("ddaa0afd"),e1=a._(e0),e2=i("01746c28"),e3=i("b0cb32eb"),e4=a._(e3),e5=function(n){var r,i,a,o=n.onSubmit,l=n.formRef,c=n.dateFormatter,d=n.type,p=n.columns,m=n.action,g=n.ghost,y=n.manualRequest,_=n.onReset,b=n.submitButtonLoading,E=n.search,w=n.form,S=n.bordered,T=(0,P.useContext)(s.ProProvider).hashId,A="form"===d,O=(r=(0,f.default)((0,u.default)().mark(function n(r,i){return(0,u.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:o&&o(r,i);case 1:case"end":return n.stop();}},n);})),function(n,i){return r.apply(this,arguments);}),R=(0,P.useContext)(C.default.ConfigContext).getPrefixCls,k=(0,P.useMemo)(function(){return p.filter(function(n){return n!==W.default.EXPAND_COLUMN&&n!==W.default.SELECTION_COLUMN&&(!n.hideInSearch&&!1!==n.search||"form"===d)&&("form"!==d||!n.hideInForm);}).map(function(n){var r,i=!n.valueType||["textarea","jsonCode","code"].includes(null==n?void 0:n.valueType)&&"table"===d?"text":null==n?void 0:n.valueType,a=(null==n?void 0:n.key)||(null==n||null===(r=n.dataIndex)||void 0===r?void 0:r.toString());return(0,x.default)((0,x.default)((0,x.default)({},n),{},{width:void 0},n.search&&"object"===(0,h.default)(n.search)?n.search:{}),{},{valueType:i,proFieldProps:(0,x.default)((0,x.default)({},n.proFieldProps),{},{proFieldKey:a?"table-field-".concat(a):void 0})});});},[p,d]),I=R("pro-table-search"),N=R("pro-table-form"),D=(0,P.useMemo)(function(){return A||!1===E?"Form":(null==E?void 0:E.filterType)==="light"?"LightFilter":"QueryFilter";},[E,A]),F=(0,P.useMemo)(function(){return{submitter:{submitButtonProps:{loading:b}}};},[b]);return(0,L.jsx)("div",{className:(0,M.default)(T,(0,v.default)((0,v.default)((0,v.default)((0,v.default)((0,v.default)((0,v.default)((0,v.default)((0,v.default)((0,v.default)({},R("pro-card"),!0),"".concat(R("pro-card"),"-border"),!!S),"".concat(R("pro-card"),"-bordered"),!!S),"".concat(R("pro-card"),"-ghost"),!!g),I,!0),N,A),R("pro-table-search-".concat(((i=D.replace(/[A-Z]/g,function(n){return"-".concat(n.toLowerCase());})).startsWith("-")&&(i=i.slice(1)),i))),!0),"".concat(I,"-ghost"),g),null==E?void 0:E.className,!1!==E&&(null==E?void 0:E.className))),children:(0,L.jsx)(e4.default,(0,x.default)((0,x.default)((0,x.default)((0,x.default)({layoutType:D,columns:k,type:d},F),A||"LightFilter"!==D?A?{}:(0,e1.default)((0,x.default)({labelWidth:E?null==E?void 0:E.labelWidth:void 0,defaultCollapsed:!0},E),["filterType"]):(0,e1.default)((0,x.default)({},E),["labelWidth","defaultCollapsed","filterType"])),(a=w||{},A?(0,e1.default)(a,["ignoreRules"]):(0,x.default)({ignoreRules:!0},a))),{},{formRef:l,action:m,dateFormatter:void 0===c?"string":c,onInit:function(n,r){if(l.current=r,"form"!==d){var i,a,o,s=null===(i=m.current)||void 0===i?void 0:i.pageInfo,u=n.current,c=void 0===u?null==s?void 0:s.current:u,f=n.pageSize,h=void 0===f?null==s?void 0:s.pageSize:f;null===(a=m.current)||void 0===a||null===(o=a.setPageInfo)||void 0===o||o.call(a,(0,x.default)((0,x.default)({},s),{},{current:parseInt(c,10),pageSize:parseInt(h,10)})),y||O(n,!0);}},onReset:function(n){null==_||_(n);},onFinish:function(n){O(n,!1);},initialValues:null==w?void 0:w.initialValues}))});},e6=function(n){(0,eZ.default)(i,n);var r=(0,eQ.default)(i);function i(){var n;(0,eX.default)(this,i);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r.call.apply(r,[this].concat(o)),(0,v.default)((0,e$.default)(n),"onSubmit",function(r,i){var a,o,s=n.props,l=s.pagination,u=s.beforeSearchSubmit,c=s.action,f=s.onSubmit,d=s.onFormSearchSubmit,h=l?(0,z.omitUndefined)({current:l.current,pageSize:l.pageSize}):{},p=(0,x.default)((0,x.default)({},r),{},{_timestamp:Date.now()},h);d((0,e1.default)((void 0===u?function(n){return n;}:u)(p),Object.keys(h))),i||null===(a=c.current)||void 0===a||null===(o=a.setPageInfo)||void 0===o||o.call(a,{current:1}),f&&!i&&(null==f||f(r));}),(0,v.default)((0,e$.default)(n),"onReset",function(r){var i,a,o=n.props,s=o.pagination,l=o.beforeSearchSubmit,u=o.action,c=o.onFormSearchSubmit,f=o.onReset,d=s?(0,z.omitUndefined)({current:s.current,pageSize:s.pageSize}):{};c((0,e1.default)((void 0===l?function(n){return n;}:l)((0,x.default)((0,x.default)({},r),d)),Object.keys(d))),null===(i=u.current)||void 0===i||null===(a=i.setPageInfo)||void 0===a||a.call(i,{current:1}),null==f||f();}),(0,v.default)((0,e$.default)(n),"isEqual",function(r){var i=n.props,a=i.columns,o=i.loading,s=i.formRef,l=i.type,u=i.cardBordered,c=i.dateFormatter,f=i.form,d=i.search,h=i.manualRequest;return!(0,eJ.isDeepEqualReact)({columns:a,loading:o,formRef:s,type:l,cardBordered:u,dateFormatter:c,form:f,search:d,manualRequest:h},{columns:r.columns,formRef:r.formRef,loading:r.loading,type:r.type,cardBordered:r.cardBordered,dateFormatter:r.dateFormatter,form:r.form,search:r.search,manualRequest:r.manualRequest});}),(0,v.default)((0,e$.default)(n),"shouldComponentUpdate",function(r){return n.isEqual(r);}),(0,v.default)((0,e$.default)(n),"render",function(){var r=n.props,i=r.columns,a=r.loading,o=r.formRef,s=r.type,l=r.action,u=r.cardBordered,c=r.dateFormatter,f=r.form,d=r.search,h=r.pagination,p=r.ghost,m=r.manualRequest,g=h?(0,z.omitUndefined)({current:h.current,pageSize:h.pageSize}):{};return(0,L.jsx)(e5,{submitButtonLoading:a,columns:i,type:s,ghost:p,formRef:o,onSubmit:n.onSubmit,manualRequest:m,onReset:n.onReset,dateFormatter:c,search:d,form:(0,x.default)((0,x.default)({autoFocusFirstInput:!1},f),{},{extraUrlParams:(0,x.default)((0,x.default)({},g),null==f?void 0:f.extraUrlParams)}),action:l,bordered:(0,e2.isBordered)("search",u)});}),n;}return(0,eH.default)(i);}(P.default.Component),e8=i("7cfeda15"),e7=a._(e8),e9={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},te=i("887aaf6c"),tt=a._(te),tn=P.forwardRef(function(n,r){return P.createElement(tt.default,(0,e7.default)({},n,{ref:r,icon:e9}));}),tr=i("7376d2b3"),ti=a._(tr),ta=i("996fc5d8"),to=a._(ta),ts={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M859.9 780H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM505.7 669a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V176c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8z"}}]},name:"vertical-align-bottom",theme:"outlined"},tl=P.forwardRef(function(n,r){return P.createElement(tt.default,(0,e7.default)({},n,{ref:r,icon:ts}));}),tu={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M859.9 474H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zm-353.6-74.7c2.9 3.7 8.5 3.7 11.3 0l100.8-127.5c3.7-4.7.4-11.7-5.7-11.7H550V104c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v156h-62.8c-6 0-9.4 7-5.7 11.7l100.8 127.6zm11.4 225.4a7.14 7.14 0 00-11.3 0L405.6 752.3a7.23 7.23 0 005.7 11.7H474v156c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V764h62.8c6 0 9.4-7 5.7-11.7L517.7 624.7z"}}]},name:"vertical-align-middle",theme:"outlined"},tc=P.forwardRef(function(n,r){return P.createElement(tt.default,(0,e7.default)({},n,{ref:r,icon:tu}));}),tf={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M859.9 168H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM518.3 355a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V848c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V509.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 355z"}}]},name:"vertical-align-top",theme:"outlined"},td=P.forwardRef(function(n,r){return P.createElement(tt.default,(0,e7.default)({},n,{ref:r,icon:tf}));}),th=i("58fbde6a"),tp=i("865cc100"),tm=i("accd0a80"),tg=a._(tm),tv=i("4d2fad5e"),ty=a._(tv),t_=i("5e8483d1"),tb=a._(t_),tx=i("80b6ac25"),tE=a._(tx),tw=["key","dataIndex","children"],tS=["disabled"],tT=function(n){var r=n.title,i=n.show,a=n.children,o=n.columnKey,s=n.fixed,l=(0,P.useContext)(eB.TableContext),u=l.columnsMap,c=l.setColumnsMap;return i?(0,L.jsx)(ti.default,{title:r,children:(0,L.jsx)("span",{onClick:function(n){n.stopPropagation(),n.preventDefault();var r=u[o]||{};c((0,x.default)((0,x.default)({},u),{},(0,v.default)({},o,(0,x.default)((0,x.default)({},r),{},{fixed:s}))));},children:a})}):null;},tA=function(n){var r=n.columnKey,i=n.isLeaf,a=n.title,o=n.className,l=n.fixed,u=n.showListItemOption,c=(0,s.useIntl)(),f=(0,P.useContext)(s.ProProvider).hashId,d=(0,L.jsxs)("span",{className:"".concat(o,"-list-item-option ").concat(f).trim(),children:[(0,L.jsx)(tT,{columnKey:r,fixed:"left",title:c.getMessage("tableToolBar.leftPin","\u56FA\u5B9A\u5728\u5217\u9996"),show:"left"!==l,children:(0,L.jsx)(td,{})}),(0,L.jsx)(tT,{columnKey:r,fixed:void 0,title:c.getMessage("tableToolBar.noPin","\u4E0D\u56FA\u5B9A"),show:!!l,children:(0,L.jsx)(tc,{})}),(0,L.jsx)(tT,{columnKey:r,fixed:"right",title:c.getMessage("tableToolBar.rightPin","\u56FA\u5B9A\u5728\u5217\u5C3E"),show:"right"!==l,children:(0,L.jsx)(tl,{})})]});return(0,L.jsxs)("span",{className:"".concat(o,"-list-item ").concat(f).trim(),children:[(0,L.jsx)("div",{className:"".concat(o,"-list-item-title ").concat(f).trim(),children:a}),u&&!i?d:null]},r);},tC=function(n){var r,i,a,o=n.list,l=n.draggable,u=n.checkable,c=n.showListItemOption,f=n.className,d=n.showTitle,h=n.title,p=n.listHeight,m=(0,P.useContext)(s.ProProvider).hashId,g=(0,P.useContext)(eB.TableContext),v=g.columnsMap,y=g.setColumnsMap,b=g.sortKeyColumns,E=g.setSortKeyColumns,S=o&&o.length>0,T=(0,P.useMemo)(function(){if(!S)return{};var n=[],r=new Map;return{list:function i(a,o){return a.map(function(a){var s,l,u=a.key,c=(a.dataIndex,a.children),f=(0,w.default)(a,tw),d=(0,e2.genColumnKey)(u,[null==o?void 0:o.columnKey,f.index].filter(Boolean).join("-")),h=v[d||"null"]||{show:!0};!1===h.show||c||n.push(d);var p=(0,x.default)((0,x.default)({key:d},(0,e1.default)(f,["className"])),{},{selectable:!1,disabled:!0===h.disable,disableCheckbox:"boolean"==typeof h.disable?h.disable:null===(s=h.disable)||void 0===s?void 0:s.checkbox,isLeaf:!!o||void 0});return c&&(p.children=i(c,(0,x.default)((0,x.default)({},h),{},{columnKey:d})),null!==(l=p.children)&&void 0!==l&&l.every(function(r){return null==n?void 0:n.includes(r.key);})&&n.push(d)),r.set(u,p),p;});}(o),keys:n,map:r};},[v,o,S]),A=(0,tp.useRefFunction)(function(n,r,i){var a=(0,x.default)({},v),o=(0,_.default)(b),s=o.findIndex(function(r){return r===n;}),l=o.findIndex(function(n){return n===r;}),u=i>=s;if(!(s<0)){var c=o[s];o.splice(s,1),0===i?o.unshift(c):o.splice(u?l:l+1,0,c),o.forEach(function(n,r){a[n]=(0,x.default)((0,x.default)({},a[n]||{}),{},{order:r});}),y(a),E(o);}}),C=(0,tp.useRefFunction)(function(n){var r=(0,x.default)({},v);!function i(a){var o,s,l=(0,x.default)({},r[a]);l.show=n.checked,null!==(o=T.map)&&void 0!==o&&null!==(o=o.get(a))&&void 0!==o&&o.children&&(null===(s=T.map.get(a))||void 0===s||null===(s=s.children)||void 0===s||s.forEach(function(n){return i(n.key);})),r[a]=l;}(n.node.key),y((0,x.default)({},r));});if(!S)return null;var O=(0,L.jsx)(tb.default,{itemHeight:24,draggable:l&&!!(null!==(r=T.list)&&void 0!==r&&r.length)&&(null===(i=T.list)||void 0===i?void 0:i.length)>1,checkable:u,onDrop:function(n){var r=n.node.key,i=n.dragNode.key,a=n.dropPosition,o=n.dropToGap;A(i,r,-1!==a&&o?a:a+1);},blockNode:!0,onCheck:function(n,r){return C(r);},checkedKeys:T.keys,showLine:!1,titleRender:function(n){var r=(0,x.default)((0,x.default)({},n),{},{children:void 0});if(!r.title)return null;var i=(0,th.runFunction)(r.title,r),a=(0,L.jsx)(tE.default.Text,{style:{width:80},ellipsis:{tooltip:i},children:i});return(0,L.jsx)(tA,(0,x.default)((0,x.default)({className:f},(0,e1.default)(r,["key"])),{},{showListItemOption:c,title:a,columnKey:r.key}));},height:void 0===p?280:p,treeData:null===(a=T.list)||void 0===a?void 0:a.map(function(n){return n.disabled,(0,w.default)(n,tS);})});return(0,L.jsxs)(L.Fragment,{children:[(void 0===d||d)&&(0,L.jsx)("span",{className:"".concat(f,"-list-title ").concat(m).trim(),children:h}),O]});},tO=function(n){var r=n.localColumns,i=n.className,a=n.draggable,o=n.checkable,l=n.showListItemOption,u=n.listsHeight,c=(0,P.useContext)(s.ProProvider).hashId,f=[],d=[],h=[],p=(0,s.useIntl)();r.forEach(function(n){if(!n.hideInSetting){var r=n.fixed;if("left"===r){d.push(n);return;}if("right"===r){f.push(n);return;}h.push(n);}});var m=f&&f.length>0,g=d&&d.length>0;return(0,L.jsxs)("div",{className:(0,M.default)("".concat(i,"-list"),c,(0,v.default)({},"".concat(i,"-list-group"),m||g)),children:[(0,L.jsx)(tC,{title:p.getMessage("tableToolBar.leftFixedTitle","\u56FA\u5B9A\u5728\u5DE6\u4FA7"),list:d,draggable:a,checkable:o,showListItemOption:l,className:i,listHeight:u}),(0,L.jsx)(tC,{list:h,draggable:a,checkable:o,showListItemOption:l,title:p.getMessage("tableToolBar.noFixedTitle","\u4E0D\u56FA\u5B9A"),showTitle:g||m,className:i,listHeight:u}),(0,L.jsx)(tC,{title:p.getMessage("tableToolBar.rightFixedTitle","\u56FA\u5B9A\u5728\u53F3\u4FA7"),list:f,draggable:a,checkable:o,showListItemOption:l,className:i,listHeight:u})]});};function tM(n){var r,i,a,o,l=(0,P.useRef)(null),u=(0,P.useContext)(eB.TableContext),c=n.columns,f=n.checkedReset,d=u.columnsMap,h=u.setColumnsMap,p=u.clearPersistenceStorage;(0,P.useEffect)(function(){var n,r;null!==(n=u.propsRef.current)&&void 0!==n&&null!==(n=n.columnsState)&&void 0!==n&&n.value&&(l.current=JSON.parse(JSON.stringify((null===(r=u.propsRef.current)||void 0===r||null===(r=r.columnsState)||void 0===r?void 0:r.value)||{})));},[]);var m=(0,tp.useRefFunction)(function(){var n=!(arguments.length>0)||void 0===arguments[0]||arguments[0],r={};!function i(a){a.forEach(function(a){var o,s,l=a.key,u=a.fixed,c=a.index,f=a.children,h=a.disable,p=(0,e2.genColumnKey)(l,c);p&&(r[p]={show:h?null===(o=d[p])||void 0===o?void 0:o.show:n,fixed:u,disable:h,order:null===(s=d[p])||void 0===s?void 0:s.order}),f&&i(f);});}(c),h(r);}),g=(0,tp.useRefFunction)(function(n){n.target.checked?m():m(!1);}),y=(0,tp.useRefFunction)(function(){var n;null==p||p(),h((null===(n=u.propsRef.current)||void 0===n||null===(n=n.columnsState)||void 0===n?void 0:n.defaultValue)||l.current||u.defaultColumnKeyMap);}),_=Object.values(d).filter(function(n){return!n||!1===n.show;}),b=_.length>0&&_.length!==c.length,E=(0,s.useIntl)(),w=(0,(0,P.useContext)(C.default.ConfigContext).getPrefixCls)("pro-table-column-setting"),S=(0,k.useStyle)("ColumnSetting",function(n){var r;return[(r=(0,x.default)((0,x.default)({},n),{},{componentCls:".".concat(w)}),(0,v.default)((0,v.default)((0,v.default)({},r.componentCls,{width:"auto","&-title":{display:"flex",alignItems:"center",justifyContent:"space-between",height:"32px"},"&-overlay":(0,v.default)((0,v.default)((0,v.default)((0,v.default)({},"".concat(r.antCls,"-popover-inner-content"),{width:"200px",paddingBlock:0,paddingInline:0,paddingBlockEnd:8}),"".concat(r.antCls,"-tree-node-content-wrapper:hover"),{backgroundColor:"transparent"}),"".concat(r.antCls,"-tree-draggable-icon"),{cursor:"grab"}),"".concat(r.antCls,"-tree-treenode"),(0,v.default)((0,v.default)({alignItems:"center","&:hover":(0,v.default)({},"".concat(r.componentCls,"-list-item-option"),{display:"block"})},"".concat(r.antCls,"-tree-checkbox"),{marginInlineEnd:"4px"}),"".concat(r.antCls,"-tree-title"),{width:"100%"}))}),"".concat(r.componentCls,"-action-rest-button"),{color:r.colorPrimary}),"".concat(r.componentCls,"-list"),(0,v.default)((0,v.default)((0,v.default)({display:"flex",flexDirection:"column",width:"100%",paddingBlockStart:8},"&".concat(r.componentCls,"-list-group"),{paddingBlockStart:0}),"&-title",{marginBlockStart:"6px",marginBlockEnd:"6px",paddingInlineStart:"24px",color:r.colorTextSecondary,fontSize:"12px"}),"&-item",{display:"flex",alignItems:"center",maxHeight:24,justifyContent:"space-between","&-title":{flex:1,maxWidth:80,textOverflow:"ellipsis",overflow:"hidden",wordBreak:"break-all",whiteSpace:"nowrap"},"&-option":{display:"none",float:"right",cursor:"pointer","> span":{"> span.anticon":{color:r.colorPrimary}},"> span + span":{marginInlineStart:4}}})))];}),T=S.wrapSSR,A=S.hashId;return T((0,L.jsx)(ty.default,{arrow:!1,title:(0,L.jsxs)("div",{className:"".concat(w,"-title ").concat(A).trim(),children:[!1===n.checkable?(0,L.jsx)("div",{}):(0,L.jsx)(tg.default,{indeterminate:b,checked:0===_.length&&_.length!==c.length,onChange:function(n){g(n);},children:E.getMessage("tableToolBar.columnDisplay","\u5217\u5C55\u793A")}),void 0===f||f?(0,L.jsx)("a",{onClick:y,className:"".concat(w,"-action-rest-button ").concat(A).trim(),children:E.getMessage("tableToolBar.reset","\u91CD\u7F6E")}):null,null!=n&&n.extra?(0,L.jsx)(ez.default,{size:12,align:"center",children:n.extra}):null]}),overlayClassName:"".concat(w,"-overlay ").concat(A).trim(),trigger:"click",placement:"bottomRight",content:(0,L.jsx)(tO,{checkable:null===(r=n.checkable)||void 0===r||r,draggable:null===(i=n.draggable)||void 0===i||i,showListItemOption:null===(a=n.showListItemOption)||void 0===a||a,className:w,localColumns:c,listsHeight:n.listsHeight}),children:n.children||(0,L.jsx)(ti.default,{title:E.getMessage("tableToolBar.columnSetting","\u5217\u8BBE\u7F6E"),children:null!==(o=n.settingIcon)&&void 0!==o?o:(0,L.jsx)(to.default,{})})}));}var tR=i("9bab38e5"),tP=i("ca3807c9"),tk=i("be902df5"),tI=a._(tk),tL=i("91c0242a"),tN=a._(tL),tD=i("384da8f0"),tF=a._(tD),tB=i("ec71d407"),tj=a._(tB),tz=i("0300f56f"),tU=a._(tz),tV=i("cec3f65d"),tG=i("61d82ba1"),tH=a._(tG),tW=i("ce03fd86"),tX=a._(tW),tq=function(n){var r=(0,P.useContext)(s.ProProvider).hashId,i=n.items,a=void 0===i?[]:i,o=n.type,l=void 0===o?"inline":o,u=n.prefixCls,c=n.activeKey,f=n.defaultActiveKey,d=(0,tX.default)(c||f,{value:c,onChange:n.onChange}),h=(0,m.default)(d,2),p=h[0],g=h[1];if(a.length<1)return null;var v=a.find(function(n){return n.key===p;})||a[0];if("inline"===l)return(0,L.jsx)("div",{className:(0,M.default)("".concat(u,"-menu"),"".concat(u,"-inline-menu"),r),children:a.map(function(n,i){return(0,L.jsx)("div",{onClick:function(){g(n.key);},className:(0,M.default)("".concat(u,"-inline-menu-item"),v.key===n.key?"".concat(u,"-inline-menu-item-active"):void 0,r),children:n.label},n.key||i);})});if("tab"===l)return(0,L.jsx)(tN.default,{items:a.map(function(n){var r;return(0,x.default)((0,x.default)({},n),{},{key:null===(r=n.key)||void 0===r?void 0:r.toString()});}),activeKey:v.key,onTabClick:function(n){return g(n);},children:0>(0,tP.compareVersions)(tF.default,"4.23.0")?null==a?void 0:a.map(function(n,r){return(0,P.createElement)(tN.default.TabPane,(0,x.default)((0,x.default)({},n),{},{key:n.key||r,tab:n.label}));}):null});var y=(0,tV.menuOverlayCompatible)({selectedKeys:[v.key],onClick:function(n){g(n.key);},items:a.map(function(n,r){return{key:n.key||r,disabled:n.disabled,label:n.label};})});return(0,L.jsx)("div",{className:(0,M.default)("".concat(u,"-menu"),"".concat(u,"-dropdownmenu")),children:(0,L.jsx)(tH.default,(0,x.default)((0,x.default)({trigger:["click"]},y),{},{children:(0,L.jsxs)(ez.default,{className:"".concat(u,"-dropdownmenu-label"),children:[v.label,(0,L.jsx)(tU.default,{})]})}))});},t$=function(n){var r,i=n.prefixCls,a=n.tabs,o=n.multipleLine,s=n.filtersNode;return o?(0,L.jsx)("div",{className:"".concat(i,"-extra-line"),children:null!=a&&a.items&&null!=a&&a.items.length?(0,L.jsx)(tN.default,{style:{width:"100%"},defaultActiveKey:a.defaultActiveKey,activeKey:a.activeKey,items:a.items.map(function(n,r){var i;return(0,x.default)((0,x.default)({label:n.tab},n),{},{key:(null===(i=n.key)||void 0===i?void 0:i.toString())||(null==r?void 0:r.toString())});}),onChange:a.onChange,tabBarExtraContent:s,children:null===(r=a.items)||void 0===r?void 0:r.map(function(n,r){return 0>(0,tP.compareVersions)(tF.default,"4.23.0")?(0,P.createElement)(tN.default.TabPane,(0,x.default)((0,x.default)({},n),{},{key:n.key||r,tab:n.tab})):null;})}):s}):null;},tY=function(n){var r=n.prefixCls,i=n.title,a=n.subTitle,o=n.tooltip,l=n.className,c=n.style,d=n.search,h=n.onSearch,p=n.multipleLine,g=void 0!==p&&p,y=n.filter,_=n.actions,b=void 0===_?[]:_,E=n.settings,w=void 0===E?[]:E,S=n.tabs,T=n.menu,A=(0,P.useContext)(C.default.ConfigContext).getPrefixCls,O=s.proTheme.useToken().token,R=A("pro-table-list-toolbar",r),I=(0,k.useStyle)("ProTableListToolBar",function(n){var r;return[(r=(0,x.default)((0,x.default)({},n),{},{componentCls:".".concat(R)}),(0,v.default)({},r.componentCls,(0,v.default)((0,v.default)((0,v.default)({lineHeight:"1","&-container":{display:"flex",justifyContent:"space-between",paddingBlock:r.padding,paddingInline:0,"&-mobile":{flexDirection:"column"}},"&-title":{display:"flex",alignItems:"center",justifyContent:"flex-start",color:r.colorTextHeading,fontWeight:"500",fontSize:r.fontSizeLG},"&-search:not(:last-child)":{display:"flex",alignItems:"center",justifyContent:"flex-start"},"&-setting-item":{marginBlock:0,marginInline:4,color:r.colorIconHover,fontSize:r.fontSizeLG,cursor:"pointer","> span":{display:"block",width:"100%",height:"100%"},"&:hover":{color:r.colorPrimary}},"&-left":(0,v.default)((0,v.default)({display:"flex",flexWrap:"wrap",alignItems:"center",gap:r.marginXS,justifyContent:"flex-start",maxWidth:"calc(100% - 200px)"},"".concat(r.antCls,"-tabs"),{width:"100%"}),"&-has-tabs",{overflow:"hidden"}),"&-right":{flex:1,display:"flex",flexWrap:"wrap",justifyContent:"flex-end",gap:r.marginXS},"&-extra-line":{marginBlockEnd:r.margin},"&-setting-items":{display:"flex",gap:r.marginXS,lineHeight:"32px",alignItems:"center"},"&-filter":(0,v.default)({"&:not(:last-child)":{marginInlineEnd:r.margin},display:"flex",alignItems:"center"},"div$".concat(r.antCls,"-pro-table-search"),{marginBlock:0,marginInline:0,paddingBlock:0,paddingInline:0}),"&-inline-menu-item":{display:"inline-block",marginInlineEnd:r.marginLG,cursor:"pointer",opacity:"0.75","&-active":{fontWeight:"bold",opacity:"1"}}},"".concat(r.antCls,"-tabs-top > ").concat(r.antCls,"-tabs-nav"),(0,v.default)({marginBlockEnd:0,"&::before":{borderBlockEnd:0}},"".concat(r.antCls,"-tabs-nav-list"),{marginBlockStart:0,"${token.antCls}-tabs-tab":{paddingBlockStart:0}})),"&-dropdownmenu-label",{fontWeight:"bold",fontSize:r.fontSizeIcon,textAlign:"center",cursor:"pointer"}),"@media (max-width: 768px)",(0,v.default)({},r.componentCls,{"&-container":{display:"flex",flexWrap:"wrap",flexDirection:"column"},"&-left":{marginBlockEnd:"16px",maxWidth:"100%"}}))))];}),N=I.wrapSSR,D=I.hashId,F=(0,s.useIntl)(),B=(0,P.useState)(!1),j=(0,m.default)(B,2),z=j[0],U=j[1],V=F.getMessage("tableForm.inputPlaceholder","\u8BF7\u8F93\u5165"),G=(0,P.useMemo)(function(){return d?P.default.isValidElement(d)?d:(0,L.jsx)(tI.default.Search,(0,x.default)((0,x.default)({style:{width:200},placeholder:V},d),{},{onSearch:(0,f.default)((0,u.default)().mark(function n(){var r,i,a,o,s,l=arguments;return(0,u.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:for(o=Array(a=l.length),s=0;s<a;s++)o[s]=l[s];return n.next=3,null===(r=(i=d).onSearch)||void 0===r?void 0:r.call.apply(r,[i].concat(o));case 3:!1!==n.sent&&(null==h||h(null==o?void 0:o[0]));case 5:case"end":return n.stop();}},n);}))})):null;},[V,h,d]),H=(0,P.useMemo)(function(){return y?(0,L.jsx)("div",{className:"".concat(R,"-filter ").concat(D).trim(),children:y}):null;},[y,D,R]),W=(0,P.useMemo)(function(){return T||i||a||o;},[T,a,i,o]),X=(0,P.useMemo)(function(){return Array.isArray(b)?b.length<1?null:(0,L.jsx)("div",{style:{display:"flex",alignItems:"center",gap:O.marginXS},children:b.map(function(n,r){return P.default.isValidElement(n)?P.default.cloneElement(n,(0,x.default)({key:r},null==n?void 0:n.props)):(0,L.jsx)(P.default.Fragment,{children:n},r);})}):b;},[b]),q=(0,P.useMemo)(function(){return!!(W&&G||!g&&H||X||null!=w&&w.length);},[X,H,W,g,G,null==w?void 0:w.length]),$=(0,P.useMemo)(function(){return o||i||a||T||!W&&G;},[W,T,G,a,i,o]),Y=(0,P.useMemo)(function(){return!$&&q?(0,L.jsx)("div",{className:"".concat(R,"-left ").concat(D).trim()}):T||!W&&G?(0,L.jsxs)("div",{className:(0,M.default)("".concat(R,"-left"),D,(0,v.default)((0,v.default)((0,v.default)({},"".concat(R,"-left-has-tabs"),(null==T?void 0:T.type)==="tab"),"".concat(R,"-left-has-dropdown"),(null==T?void 0:T.type)==="dropdown"),"".concat(R,"-left-has-inline-menu"),(null==T?void 0:T.type)==="inline")),children:[W&&!T&&(0,L.jsx)("div",{className:"".concat(R,"-title ").concat(D).trim(),children:(0,L.jsx)(tR.LabelIconTip,{tooltip:o,label:i,subTitle:a})}),T&&(0,L.jsx)(tq,(0,x.default)((0,x.default)({},T),{},{prefixCls:R})),!W&&G?(0,L.jsx)("div",{className:"".concat(R,"-search ").concat(D).trim(),children:G}):null]}):(0,L.jsx)("div",{className:"".concat(R,"-left ").concat(D).trim(),children:(0,L.jsx)("div",{className:"".concat(R,"-title ").concat(D).trim(),children:(0,L.jsx)(tR.LabelIconTip,{tooltip:o,label:i,subTitle:a})})});},[$,q,W,D,T,R,G,a,i,o]),Z=(0,P.useMemo)(function(){return q?(0,L.jsxs)("div",{className:"".concat(R,"-right ").concat(D).trim(),style:z?{}:{alignItems:"center"},children:[g?null:H,W&&G?(0,L.jsx)("div",{className:"".concat(R,"-search ").concat(D).trim(),children:G}):null,X,null!=w&&w.length?(0,L.jsx)("div",{className:"".concat(R,"-setting-items ").concat(D).trim(),children:w.map(function(n,r){var i=function(n){if(P.default.isValidElement(n))return n;if(n){var r=n.icon,i=n.tooltip,a=n.onClick,o=n.key;return r&&i?(0,L.jsx)(ti.default,{title:i,children:(0,L.jsx)("span",{onClick:function(){a&&a(o);},children:r},o)}):(0,L.jsx)("span",{onClick:function(){a&&a(o);},children:r},o);}return null;}(n);return(0,L.jsx)("div",{className:"".concat(R,"-setting-item ").concat(D).trim(),children:i},r);})}):null]}):null;},[q,R,D,z,W,G,g,H,X,w]),K=(0,P.useMemo)(function(){if(!q&&!$)return null;var n=(0,M.default)("".concat(R,"-container"),D,(0,v.default)({},"".concat(R,"-container-mobile"),z));return(0,L.jsxs)("div",{className:n,children:[Y,Z]});},[$,q,D,z,Y,R,Z]);return N((0,L.jsx)(tj.default,{onResize:function(n){n.width<375!==z&&U(n.width<375);},children:(0,L.jsxs)("div",{style:c,className:(0,M.default)(R,D,l),children:[K,(0,L.jsx)(t$,{filtersNode:H,prefixCls:R,tabs:S,multipleLine:g})]})}));},tZ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M840 836H184c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h656c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm0-724H184c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h656c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM610.8 378c6 0 9.4-7 5.7-11.7L515.7 238.7a7.14 7.14 0 00-11.3 0L403.6 366.3a7.23 7.23 0 005.7 11.7H476v268h-62.8c-6 0-9.4 7-5.7 11.7l100.8 127.5c2.9 3.7 8.5 3.7 11.3 0l100.8-127.5c3.7-4.7.4-11.7-5.7-11.7H548V378h62.8z"}}]},name:"column-height",theme:"outlined"},tK=P.forwardRef(function(n,r){return P.createElement(tt.default,(0,e7.default)({},n,{ref:r,icon:tZ}));}),tQ=P.default.memo(function(n){var r=n.icon,i=void 0===r?(0,L.jsx)(tK,{}):r,a=(0,P.useContext)(eB.TableContext),o=(0,s.useIntl)(),l=(0,tV.menuOverlayCompatible)({selectedKeys:[a.tableSize],onClick:function(n){var r,i=n.key;null===(r=a.setTableSize)||void 0===r||r.call(a,i);},style:{width:80},items:[{key:"large",label:o.getMessage("tableToolBar.densityLarger","\u5BBD\u677E")},{key:"middle",label:o.getMessage("tableToolBar.densityMiddle","\u4E2D\u7B49")},{key:"small",label:o.getMessage("tableToolBar.densitySmall","\u7D27\u51D1")}]});return(0,L.jsx)(tH.default,(0,x.default)((0,x.default)({},l),{},{trigger:["click"],children:(0,L.jsx)(ti.default,{title:o.getMessage("tableToolBar.density","\u8868\u683C\u5BC6\u5EA6"),children:i})}));}),tJ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M391 240.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L200 146.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L280 333.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L401 410c5.1.6 9.5-3.7 8.9-8.9L391 240.9zm10.1 373.2L240.8 633c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L146.3 824a8.03 8.03 0 000 11.3l42.4 42.3c3.1 3.1 8.2 3.1 11.3 0L333.7 744l43.7 43.7A8.01 8.01 0 00391 783l18.9-160.1c.6-5.1-3.7-9.4-8.8-8.8zm221.8-204.2L783.2 391c6.6-.8 9.4-8.9 4.7-13.6L744 333.6 877.7 200c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.3a8.03 8.03 0 00-11.3 0L690.3 279.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L614.1 401c-.6 5.2 3.7 9.5 8.8 8.9zM744 690.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L623 614c-5.1-.6-9.5 3.7-8.9 8.9L633 783.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L824 877.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L744 690.4z"}}]},name:"fullscreen-exit",theme:"outlined"},t0=P.forwardRef(function(n,r){return P.createElement(tt.default,(0,e7.default)({},n,{ref:r,icon:tJ}));}),t1={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M290 236.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L169 160c-5.1-.6-9.5 3.7-8.9 8.9L179 329.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L370 423.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L290 236.4zm352.7 187.3c3.1 3.1 8.2 3.1 11.3 0l133.7-133.6 43.7 43.7a8.01 8.01 0 0013.6-4.7L863.9 169c.6-5.1-3.7-9.5-8.9-8.9L694.8 179c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L600.3 370a8.03 8.03 0 000 11.3l42.4 42.4zM845 694.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L654 600.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L734 787.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L855 864c5.1.6 9.5-3.7 8.9-8.9L845 694.9zm-463.7-94.6a8.03 8.03 0 00-11.3 0L236.3 733.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L160.1 855c-.6 5.1 3.7 9.5 8.9 8.9L329.2 845c6.6-.8 9.4-8.9 4.7-13.6L290 787.6 423.7 654c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.4z"}}]},name:"fullscreen",theme:"outlined"},t2=P.forwardRef(function(n,r){return P.createElement(tt.default,(0,e7.default)({},n,{ref:r,icon:t1}));}),t3=i("e2a12cbd"),t4=P.default.memo(function(){var n=(0,s.useIntl)(),r=(0,P.useState)(!1),i=(0,m.default)(r,2),a=i[0],o=i[1];return(0,P.useEffect)(function(){(0,t3.isBrowser)()&&(document.onfullscreenchange=function(){o(!!document.fullscreenElement);});},[]),a?(0,L.jsx)(ti.default,{title:n.getMessage("tableToolBar.exitFullScreen","\u5168\u5C4F"),children:(0,L.jsx)(t0,{})}):(0,L.jsx)(ti.default,{title:n.getMessage("tableToolBar.fullScreen","\u5168\u5C4F"),children:(0,L.jsx)(t2,{})});}),t5=["headerTitle","tooltip","toolBarRender","action","options","selectedRowKeys","selectedRows","toolbar","onSearch","columns","optionsRender"];function t6(n){var r=n.headerTitle,i=n.tooltip,a=n.toolBarRender,o=n.action,l=n.options,u=n.selectedRowKeys,c=n.selectedRows,f=n.toolbar,d=n.onSearch,h=n.columns,p=n.optionsRender,m=(0,w.default)(n,t5),g=(0,P.useContext)(eB.TableContext),v=(0,s.useIntl)(),y=(0,P.useMemo)(function(){var n,s,g={reload:function(){var n;return null==o||null===(n=o.current)||void 0===n?void 0:n.reload();},density:!0,setting:!0,search:!1,fullScreen:function(){var n,r;return null==o||null===(n=o.current)||void 0===n||null===(r=n.fullScreen)||void 0===r?void 0:r.call(n);}};if(!1===l)return[];var y=(n=(0,x.default)((0,x.default)({},g),{},{fullScreen:!1},l),s=(0,x.default)((0,x.default)({},g),{},{intl:v}),Object.keys(n).filter(function(n){return n;}).map(function(r){var i,a,l=n[r];if(!l)return null;var u=!0===l?s[r]:function(n){null==l||l(n,o.current);};if("function"!=typeof u&&(u=function(){}),"setting"===r)return(0,P.createElement)(tM,(0,x.default)((0,x.default)({},n[r]),{},{columns:h,key:r}));if("fullScreen"===r)return(0,L.jsx)("span",{onClick:u,children:(0,L.jsx)(t4,{})},r);var c={reload:{text:(a=s.intl).getMessage("tableToolBar.reload","\u5237\u65B0"),icon:null!==(i=n.reloadIcon)&&void 0!==i?i:(0,L.jsx)(tn,{})},density:{text:a.getMessage("tableToolBar.density","\u8868\u683C\u5BC6\u5EA6"),icon:(0,L.jsx)(tQ,{icon:n.densityIcon})},fullScreen:{text:a.getMessage("tableToolBar.fullScreen","\u5168\u5C4F"),icon:(0,L.jsx)(t4,{})}}[r];return c?(0,L.jsx)("span",{onClick:u,children:(0,L.jsx)(ti.default,{title:c.text,children:c.icon})},r):null;}).filter(function(n){return n;}));return p?p((0,x.default)({headerTitle:r,tooltip:i,toolBarRender:a,action:o,options:l,selectedRowKeys:u,selectedRows:c,toolbar:f,onSearch:d,columns:h,optionsRender:p},m),y):y;},[o,h,r,v,d,p,l,m,u,c,a,f,i]),_=a?a(null==o?void 0:o.current,{selectedRowKeys:u,selectedRows:c}):[],b=(0,P.useMemo)(function(){if(!l||!l.search)return!1;var n={value:g.keyWords,onChange:function(n){return g.setKeyWords(n.target.value);}};return!0===l.search?n:(0,x.default)((0,x.default)({},n),l.search);},[g,l]);return(0,P.useEffect)(function(){void 0===g.keyWords&&(null==d||d(""));},[g.keyWords,d]),(0,L.jsx)(tY,(0,x.default)({title:r,tooltip:i||m.tip,search:b,onSearch:d,actions:_,settings:y},f));}var t8=function(n){(0,eZ.default)(i,n);var r=(0,eQ.default)(i);function i(){var n;(0,eX.default)(this,i);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r.call.apply(r,[this].concat(o)),(0,v.default)((0,e$.default)(n),"onSearch",function(r){var i,a,o,s,l=n.props,u=l.options,c=l.onFormSearchSubmit,f=l.actionRef;if(u&&u.search){var d=(!0===u.search?{}:u.search).name;!1!==(null===(i=u.search)||void 0===i||null===(a=i.onSearch)||void 0===a?void 0:a.call(i,r))&&(null==f||null===(o=f.current)||void 0===o||null===(s=o.setPageInfo)||void 0===s||s.call(o,{current:1}),c((0,z.omitUndefined)((0,v.default)({_timestamp:Date.now()},void 0===d?"keyword":d,r))));}}),(0,v.default)((0,e$.default)(n),"isEquals",function(r){var i=n.props,a=i.hideToolbar,o=i.tableColumn,s=i.options,l=i.tooltip,u=i.toolbar,c=i.selectedRows,f=i.selectedRowKeys,d=i.headerTitle,h=i.actionRef,p=i.toolBarRender;return(0,eJ.isDeepEqualReact)({hideToolbar:a,tableColumn:o,options:s,tooltip:l,toolbar:u,selectedRows:c,selectedRowKeys:f,headerTitle:d,actionRef:h,toolBarRender:p},{hideToolbar:r.hideToolbar,tableColumn:r.tableColumn,options:r.options,tooltip:r.tooltip,toolbar:r.toolbar,selectedRows:r.selectedRows,selectedRowKeys:r.selectedRowKeys,headerTitle:r.headerTitle,actionRef:r.actionRef,toolBarRender:r.toolBarRender},["render","renderFormItem"]);}),(0,v.default)((0,e$.default)(n),"shouldComponentUpdate",function(r){return!!r.searchNode||!n.isEquals(r);}),(0,v.default)((0,e$.default)(n),"render",function(){var r=n.props,i=r.hideToolbar,a=r.tableColumn,o=r.options,s=r.searchNode,l=r.tooltip,u=r.toolbar,c=r.selectedRows,f=r.selectedRowKeys,d=r.headerTitle,h=r.actionRef,p=r.toolBarRender,m=r.optionsRender;return i?null:(0,L.jsx)(t6,{tooltip:l,columns:a,options:o,headerTitle:d,action:h,onSearch:n.onSearch,selectedRows:c,selectedRowKeys:f,toolBarRender:p,toolbar:(0,x.default)({filter:s},u),optionsRender:m});}),n;}return(0,eH.default)(i);}(P.default.Component),t7=new(i("398ab4d8")).Keyframes("turn",{"0%":{transform:"rotate(0deg)"},"25%":{transform:"rotate(90deg)"},"50%":{transform:"rotate(180deg)"},"75%":{transform:"rotate(270deg)"},"100%":{transform:"rotate(360deg)"}}),t9=i("1e3f45fa"),ne=i("a816be8d"),nt=i("792e90bc"),nn=["data","success","total"],nr=function(n){var r=n.pageInfo;if(r){var i=r.current,a=r.defaultCurrent,o=r.pageSize,s=r.defaultPageSize;return{current:i||a||1,total:0,pageSize:o||s||20};}return{current:1,total:0,pageSize:20};},ni=function(n,r,i){var a,o,s,l,c,d,p=(0,P.useRef)(!1),g=(0,P.useRef)(null),v=i||{},y=v.onLoad,b=v.manual,E=v.polling,S=v.onRequestError,T=v.debounceTime,A=v.effects,C=(0,P.useRef)(b),O=(0,P.useRef)(),M=(0,V.useMountMergeState)(r,{value:null==i?void 0:i.dataSource,onChange:null==i?void 0:i.onDataSourceChange}),R=(0,m.default)(M,2),k=R[0],I=R[1],L=(0,V.useMountMergeState)(!1,{value:"object"===(0,h.default)(null==i?void 0:i.loading)?null==i||null===(d=i.loading)||void 0===d?void 0:d.spinning:null==i?void 0:i.loading,onChange:null==i?void 0:i.onLoadingChange}),N=(0,m.default)(L,2),D=N[0],F=N[1],B=(0,V.useMountMergeState)(function(){return nr(i);},{onChange:null==i?void 0:i.onPageInfoChange}),j=(0,m.default)(B,2),z=j[0],G=j[1],H=(0,tp.useRefFunction)(function(n){(n.current!==z.current||n.pageSize!==z.pageSize||n.total!==z.total)&&G(n);}),W=(0,V.useMountMergeState)(!1),X=(0,m.default)(W,2),q=X[0],$=X[1],Y=function(n,r){(0,nt.unstable_batchedUpdates)(function(){I(n),(null==z?void 0:z.total)!==r&&H((0,x.default)((0,x.default)({},z),{},{total:r||n.length}));});},Z=(0,ne.usePrevious)(null==z?void 0:z.current),K=(0,ne.usePrevious)(null==z?void 0:z.pageSize),Q=(0,ne.usePrevious)(E),J=(0,tp.useRefFunction)(function(){(0,nt.unstable_batchedUpdates)(function(){F(!1),$(!1);});}),ee=(a=(0,f.default)((0,u.default)().mark(function r(a){var o,s,l,c,f,d,h,p,m,g,v,_;return(0,u.default)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!C.current){r.next=3;break;}return C.current=!1,r.abrupt("return");case 3:return a?$(!0):F(!0),s=(o=z||{}).pageSize,l=o.current,r.prev=5,c=(null==i?void 0:i.pageInfo)!==!1?{current:l,pageSize:s}:void 0,r.next=9,null==n?void 0:n(c);case 9:if(r.t0=r.sent,r.t0){r.next=12;break;}r.t0={};case 12:if(h=void 0===(d=(f=r.t0).data)?[]:d,p=f.success,g=void 0===(m=f.total)?0:m,v=(0,w.default)(f,nn),!1!==p){r.next=21;break;}return r.abrupt("return",[]);case 21:return Y(_=(0,e2.postDataPipeline)(h,[i.postData].filter(function(n){return n;})),g),null==y||y(_,v),r.abrupt("return",_);case 27:if(r.prev=27,r.t1=r.catch(5),void 0!==S){r.next=31;break;}throw Error(r.t1);case 31:void 0===k&&I([]),S(r.t1);case 33:return r.prev=33,J(),r.finish(33);case 36:return r.abrupt("return",[]);case 37:case"end":return r.stop();}},r,null,[[5,27,33,36]]);})),function(n){return a.apply(this,arguments);}),et=(0,t9.useDebounceFn)((o=(0,f.default)((0,u.default)().mark(function r(i){var a,o,s;return(0,u.default)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(O.current&&clearTimeout(O.current),n){r.next=3;break;}return r.abrupt("return");case 3:return a=new AbortController,g.current=a,r.prev=5,r.next=8,Promise.race([ee(i),new Promise(function(n,r){var i,a;null===(i=g.current)||void 0===i||null===(i=i.signal)||void 0===i||null===(a=i.addEventListener)||void 0===a||a.call(i,"abort",function(){r("aborted"),et.cancel(),J();});})]);case 8:if(o=r.sent,!a.signal.aborted){r.next=11;break;}return r.abrupt("return");case 11:return(s=(0,th.runFunction)(E,o))&&!p.current&&(O.current=setTimeout(function(){et.run(s);},Math.max(s,2e3))),r.abrupt("return",o);case 16:if(r.prev=16,r.t0=r.catch(5),"aborted"!==r.t0){r.next=20;break;}return r.abrupt("return");case 20:throw r.t0;case 21:case"end":return r.stop();}},r,null,[[5,16]]);})),function(n){return o.apply(this,arguments);}),(void 0===T?20:T)||30),en=function(){var n;null===(n=g.current)||void 0===n||n.abort(),et.cancel(),J();};return(0,P.useEffect)(function(){return E||clearTimeout(O.current),!Q&&E&&et.run(!0),function(){clearTimeout(O.current);};},[E]),(0,P.useEffect)(function(){return p.current=!1,function(){p.current=!0;};},[]),(0,P.useEffect)(function(){var n=z||{},r=n.current,a=n.pageSize;(Z&&Z!==r||K&&K!==a)&&(i.pageInfo&&k&&(null==k?void 0:k.length)>a||void 0===r||!k||!(k.length<=a)||(en(),et.run(!1)));},[null==z?void 0:z.current]),(0,P.useEffect)(function(){K&&(en(),et.run(!1));},[null==z?void 0:z.pageSize]),(0,U.useDeepCompareEffect)(function(){return en(),et.run(!1),b||(C.current=!1),function(){en();};},[].concat((0,_.default)(void 0===A?[]:A),[b])),{dataSource:k,setDataSource:I,loading:"object"===(0,h.default)(null==i?void 0:i.loading)?(0,x.default)((0,x.default)({},null==i?void 0:i.loading),{},{spinning:D}):D,reload:(s=(0,f.default)((0,u.default)().mark(function n(){return(0,u.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return en(),n.abrupt("return",et.run(!1));case 2:case"end":return n.stop();}},n);})),function(){return s.apply(this,arguments);}),pageInfo:z,pollingLoading:q,reset:(l=(0,f.default)((0,u.default)().mark(function n(){var r,a,o;return(0,u.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:H({current:void 0===(a=(r=(i||{}).pageInfo||{}).defaultCurrent)?1:a,total:0,pageSize:void 0===(o=r.defaultPageSize)?20:o});case 4:case"end":return n.stop();}},n);})),function(){return l.apply(this,arguments);}),setPageInfo:(c=(0,f.default)((0,u.default)().mark(function n(r){return(0,u.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:H((0,x.default)((0,x.default)({},z),r));case 1:case"end":return n.stop();}},n);})),function(n){return c.apply(this,arguments);})};},na=i("6c581265"),no=i("17740a74"),ns=i("23c8ca84"),nl=i("70468372"),nu=i("5916bc87"),nc=i("dfe6c97a"),nf=a._(nc),nd=i("2faf3d77"),nh=i("2e660475"),np=i("551ddf56"),nm=a._(np),ng=i("759eca2a"),nv=i("be59eeaa"),ny=i("f34e933b"),n_=a._(ny),nb=["children"],nx=["",null,void 0],nE=function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return r.filter(function(n){return void 0!==n;}).map(function(n){return"number"==typeof n?n.toString():n;}).flat(1);},nw=function(n){var r=(0,P.useContext)(nd.FieldContext),i=n.columnProps,a=n.prefixName,o=n.text,s=n.counter,l=n.rowData,u=n.index,c=n.recordKey,f=n.subName,d=n.proFieldProps,h=n.editableUtils,p=nh.ProForm.useFormInstance(),g=c||u,v=(0,P.useMemo)(function(){var n,r;return null!==(n=null==h||null===(r=h.getRealIndex)||void 0===r?void 0:r.call(h,l))&&void 0!==n?n:u;},[h,u,l]),y=(0,P.useState)(function(){var n,r;return nE(a,a?f:[],a?v:g,null!==(n=null!==(r=null==i?void 0:i.key)&&void 0!==r?r:null==i?void 0:i.dataIndex)&&void 0!==n?n:u);}),b=(0,m.default)(y,2),E=b[0],S=b[1],T=(0,P.useMemo)(function(){return E.slice(0,-1);},[E]);(0,P.useEffect)(function(){var n,r,o=nE(a,a?f:[],a?v:g,null!==(n=null!==(r=null==i?void 0:i.key)&&void 0!==r?r:null==i?void 0:i.dataIndex)&&void 0!==n?n:u);o.join("-")!==E.join("-")&&S(o);},[null==i?void 0:i.dataIndex,null==i?void 0:i.key,u,c,a,g,f,E,v]);var A=(0,P.useMemo)(function(){return[p,(0,x.default)((0,x.default)({},i),{},{rowKey:T,rowIndex:u,isEditable:!0})];},[i,p,u,T]),C=(0,P.useCallback)(function(n){var i=n.children,a=(0,w.default)(n,nb);return(0,L.jsx)(ng.InlineErrorFormItem,(0,x.default)((0,x.default)({popoverProps:{getPopupContainer:r.getPopupContainer||function(){return s.rootDomRef.current||document.body;}},errorType:"popover",name:E},a),{},{children:i}),g);},[g,E]),O=(0,P.useCallback)(function(){var r,s,f=(0,x.default)({},nv.getFieldPropsOrFormItemProps.apply(void 0,[null==i?void 0:i.formItemProps].concat((0,_.default)(A))));f.messageVariables=(0,x.default)({label:(null==i?void 0:i.title)||"\u6B64\u9879",type:(null==i?void 0:i.valueType)||"\u6587\u672C"},null==f?void 0:f.messageVariables),f.initialValue=null!==(r=null!==(s=a?null:o)&&void 0!==s?s:null==f?void 0:f.initialValue)&&void 0!==r?r:null==i?void 0:i.initialValue;var h=(0,L.jsx)(nm.default,(0,x.default)({cacheForSwr:!0,name:E,proFormFieldKey:g,ignoreFormItem:!0,fieldProps:nv.getFieldPropsOrFormItemProps.apply(void 0,[null==i?void 0:i.fieldProps].concat((0,_.default)(A)))},d),E.join("-"));return null!=i&&i.renderFormItem&&(h=i.renderFormItem((0,x.default)((0,x.default)({},i),{},{index:u,isEditable:!0,type:"table"}),{defaultRender:function(){return(0,L.jsx)(L.Fragment,{children:h});},type:"form",recordKey:c,record:(0,x.default)((0,x.default)({},l),null==p?void 0:p.getFieldValue([g])),isEditable:!0},p,n.editableUtils),i.ignoreFormItem)?(0,L.jsx)(L.Fragment,{children:h}):(0,L.jsx)(C,(0,x.default)((0,x.default)({},f),{},{children:h}),E.join("-"));},[i,A,a,o,g,E,d,C,u,c,l,p,n.editableUtils]);return 0===E.length?null:"function"==typeof(null==i?void 0:i.renderFormItem)||"function"==typeof(null==i?void 0:i.fieldProps)||"function"==typeof(null==i?void 0:i.formItemProps)?(0,L.jsx)(n_.default.Item,{noStyle:!0,shouldUpdate:function(n,r){if(n===r)return!1;var i=[T].flat(1);try{return JSON.stringify((0,nf.default)(n,i))!==JSON.stringify((0,nf.default)(r,i));}catch(n){return!0;}},children:function(){return O();}}):O();},nS=function(n){var r,i=n.title,a="boolean"==typeof(null==n?void 0:n.ellipsis)?null==n?void 0:n.ellipsis:null==n||null===(r=n.ellipsis)||void 0===r?void 0:r.showTitle;return i&&"function"==typeof i?i(n,"table",(0,L.jsx)(tR.LabelIconTip,{label:null,tooltip:n.tooltip||n.tip})):(0,L.jsx)(tR.LabelIconTip,{label:i,tooltip:n.tooltip||n.tip,ellipsis:a});},nT=["rowKey","tableClassName","defaultClassName","action","tableColumn","type","pagination","rowSelection","size","defaultSize","tableStyle","toolbarDom","hideToolbar","searchNode","style","cardProps","alertDom","name","onSortChange","onFilterChange","options","isLightFilter","className","cardBordered","editableUtils","getRowKey"],nA=["cardBordered","request","className","params","defaultData","headerTitle","postData","ghost","pagination","actionRef","columns","toolBarRender","optionsRender","onLoad","onRequestError","style","cardProps","tableStyle","tableClassName","columnsStateMap","onColumnsStateChange","options","search","name","onLoadingChange","rowSelection","beforeSearchSubmit","tableAlertRender","defaultClassName","formRef","type","columnEmptyText","toolbar","rowKey","manualRequest","polling","tooltip","revalidateOnFocus","searchFormRender"];function nC(n){var r=n.rowKey,i=n.tableClassName,a=n.defaultClassName,o=n.action,s=n.tableColumn,l=n.type,u=n.pagination,c=n.rowSelection,f=n.size,d=(n.defaultSize,n.tableStyle),h=n.toolbarDom,p=n.hideToolbar,m=n.searchNode,g=n.style,y=n.cardProps,b=n.alertDom,E=(n.name,n.onSortChange),S=n.onFilterChange,T=n.options,A=n.isLightFilter,O=n.className,R=n.cardBordered,k=n.editableUtils,I=n.getRowKey,N=(0,w.default)(n,nT),D=(0,P.useContext)(eB.TableContext),B=(0,P.useMemo)(function(){return function n(r){return r.map(function(r){var i=(0,e2.genColumnKey)(r.key,r.index),a=D.columnsMap[i];return(!a||!1!==a.show)&&(r.children?(0,x.default)((0,x.default)({},r),{},{children:n(r.children)}):r);}).filter(Boolean);}(s);},[D.columnsMap,s]),z=function(r){var i=k.newLineRecord||{},a=i.options,s=i.defaultValue,l=(null==a?void 0:a.position)==="top";if(null!=a&&a.parentKey){var c,f,d={data:r,getRowKey:I,row:(0,x.default)((0,x.default)({},s),{},{map_row_parentKey:null===(c=(0,G.recordKeyToString)(a.parentKey))||void 0===c?void 0:c.toString()}),key:null==a?void 0:a.recordKey,childrenColumnName:(null===(f=n.expandable)||void 0===f?void 0:f.childrenColumnName)||"children"};return(0,G.editableRowByKey)(d,l?"top":"update");}if(l)return[s].concat((0,_.default)(o.dataSource));if(u&&null!=u&&u.current&&null!=u&&u.pageSize){var h=(0,_.default)(o.dataSource);return(null==u?void 0:u.pageSize)>h.length?h.push(s):h.splice((null==u?void 0:u.current)*(null==u?void 0:u.pageSize)-1,0,s),h;}return[].concat((0,_.default)(o.dataSource),[s]);},U=function(){return(0,x.default)((0,x.default)({},N),{},{size:f,rowSelection:!1===c?void 0:c,className:i,style:d,columns:B,loading:o.loading,dataSource:k.newLineRecord?z(o.dataSource):o.dataSource,pagination:u,onChange:function(n,r,i,a){var o;if(null===(o=N.onChange)||void 0===o||o.call(N,n,r,i,a),S((0,G.omitUndefined)(r)),Array.isArray(i)){var s,l=i.reduce(function(n,r){return(0,x.default)((0,x.default)({},n),{},(0,v.default)({},"".concat(r.field),r.order));},{});E(null!==(s=(0,G.omitUndefined)(l))&&void 0!==s?s:{});}else{var u,c,f=null===(u=i.column)||void 0===u?void 0:u.sorter,d=(null==f?void 0:f.toString())===f;E(null!==(c=(0,G.omitUndefined)((0,v.default)({},"".concat(d?f:i.field),i.order)))&&void 0!==c?c:{});}}});},V=(0,P.useMemo)(function(){return!1===n.search&&!n.headerTitle&&!1===n.toolBarRender;},[]),H=(0,L.jsx)(j.GridContext.Provider,{value:{grid:!1,colProps:void 0,rowProps:void 0},children:(0,L.jsx)(W.default,(0,x.default)((0,x.default)({},U()),{},{rowKey:r}))}),X=n.tableViewRender?n.tableViewRender((0,x.default)((0,x.default)({},U()),{},{rowSelection:!1!==c?c:void 0}),H):H,q=(0,P.useMemo)(function(){if(n.editable&&!n.name){var r,i,a;return(0,L.jsxs)(L.Fragment,{children:[h,b,(0,P.createElement)(j.default,(0,x.default)((0,x.default)({},null===(r=n.editable)||void 0===r?void 0:r.formProps),{},{formRef:null===(i=n.editable)||void 0===i||null===(i=i.formProps)||void 0===i?void 0:i.formRef,component:!1,form:null===(a=n.editable)||void 0===a?void 0:a.form,onValuesChange:k.onValuesChange,key:"table",submitter:!1,omitNil:!1,dateFormatter:n.dateFormatter}),X)]});}return(0,L.jsxs)(L.Fragment,{children:[h,b,X]});},[b,n.loading,!!n.editable,X,h]),$=(0,P.useMemo)(function(){return!1===y||!0===V||n.name?{}:p?{padding:0}:h||h&&!1===u?{paddingBlockStart:0}:{padding:0};},[V,u,n.name,y,h,p]),Y=!1===y||!0===V||n.name?q:(0,L.jsx)(F,(0,x.default)((0,x.default)({ghost:n.ghost,bordered:(0,e2.isBordered)("table",R),bodyStyle:$},y),{},{children:q})),Z=(0,L.jsxs)("div",{className:(0,M.default)(O,(0,v.default)({},"".concat(a,"-polling"),o.pollingLoading)),style:g,ref:D.rootDomRef,children:[A?null:m,"form"!==l&&n.tableExtraRender&&(0,L.jsx)("div",{className:(0,M.default)(O,"".concat(a,"-extra")),children:n.tableExtraRender(n,o.dataSource||[])}),"form"!==l&&(n.tableRender?n.tableRender(n,Y,{toolbar:h||void 0,alert:b||void 0,table:X||void 0}):Y)]});return T&&null!=T&&T.fullScreen?(0,L.jsx)(C.default,{getPopupContainer:function(){return D.rootDomRef.current||document.body;},children:Z}):Z;}var nO={},nM=function(n){n.cardBordered;var r,i,a=n.request,o=n.className,l=n.params,c=void 0===l?nO:l,d=n.defaultData,p=n.headerTitle,g=n.postData,y=n.ghost,_=n.pagination,b=n.actionRef,E=n.columns,S=void 0===E?[]:E,T=n.toolBarRender,A=n.optionsRender,C=n.onLoad,O=n.onRequestError,R=(n.style,n.cardProps,n.tableStyle,n.tableClassName,n.columnsStateMap,n.onColumnsStateChange,n.options),I=n.search,N=n.name,D=n.onLoadingChange,F=n.rowSelection,B=void 0!==F&&F,j=n.beforeSearchSubmit,z=n.tableAlertRender,U=n.defaultClassName,V=n.formRef,H=n.type,X=void 0===H?"table":H,$=n.columnEmptyText,Z=void 0===$?"-":$,Q=n.toolbar,ee=n.rowKey,en=n.manualRequest,ei=n.polling,eo=n.tooltip,eu=n.revalidateOnFocus,ef=void 0!==eu&&eu,ed=n.searchFormRender,eh=(0,w.default)(n,nA),em=(r=n.defaultClassName,(0,k.useStyle)("ProTable",function(n){var i;return[(i=(0,x.default)((0,x.default)({},n),{},{componentCls:".".concat(r)}),(0,v.default)((0,v.default)((0,v.default)({},i.componentCls,(0,v.default)((0,v.default)((0,v.default)((0,v.default)((0,v.default)((0,v.default)((0,v.default)((0,v.default)((0,v.default)({zIndex:1},"".concat(i.antCls,"-table-wrapper ").concat(i.antCls,"-table-pagination").concat(i.antCls,"-pagination"),{marginBlockEnd:0}),"&:not(:root):fullscreen",{minHeight:"100vh",overflow:"auto",background:i.colorBgContainer}),"&-extra",{marginBlockEnd:16}),"&-polling",(0,v.default)({},"".concat(i.componentCls,"-list-toolbar-setting-item"),{".anticon.anticon-reload":{transform:"rotate(0deg)",animationName:t7,animationDuration:"1s",animationTimingFunction:"linear",animationIterationCount:"infinite"}})),"td".concat(i.antCls,"-table-cell"),{">a":{fontSize:i.fontSize}}),"".concat(i.antCls,"-table").concat(i.antCls,"-table-tbody").concat(i.antCls,"-table-wrapper:only-child").concat(i.antCls,"-table"),{marginBlock:0,marginInline:0}),"".concat(i.antCls,"-table").concat(i.antCls,"-table-middle ").concat(i.componentCls),(0,v.default)({marginBlock:0,marginInline:-8},"".concat(i.proComponentsCls,"-card"),{backgroundColor:"initial"})),"& &-search",(0,v.default)((0,v.default)((0,v.default)((0,v.default)({marginBlockEnd:"16px",background:i.colorBgContainer,"&-ghost":{background:"transparent"}},"&".concat(i.componentCls,"-form"),{marginBlock:0,marginInline:0,paddingBlock:0,paddingInline:16,overflow:"unset"}),"&-light-filter",{marginBlockEnd:0,paddingBlock:0,paddingInline:0}),"&-form-option",(0,v.default)((0,v.default)((0,v.default)({},"".concat(i.antCls,"-form-item"),{}),"".concat(i.antCls,"-form-item-label"),{}),"".concat(i.antCls,"-form-item-control-input"),{})),"@media (max-width: 575px)",(0,v.default)({},i.componentCls,(0,v.default)({height:"auto !important",paddingBlockEnd:"24px"},"".concat(i.antCls,"-form-item-label"),{minWidth:"80px",textAlign:"start"})))),"&-toolbar",{display:"flex",alignItems:"center",justifyContent:"space-between",height:"64px",paddingInline:24,paddingBlock:0,"&-option":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"&-title":{flex:"1",color:i.colorTextLabel,fontWeight:"500",fontSize:"16px",lineHeight:"24px",opacity:"0.85"}})),"@media (max-width: ".concat(i.screenXS,")px"),(0,v.default)({},i.componentCls,(0,v.default)({},"".concat(i.antCls,"-table"),{width:"100%",overflowX:"auto","&-thead > tr,&-tbody > tr":{"> th,> td":{whiteSpace:"pre",">span":{display:"block"}}}}))),"@media (max-width: 575px)",(0,v.default)({},"".concat(i.componentCls,"-toolbar"),{flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",height:"auto",marginBlockEnd:"16px",marginInlineStart:"16px",paddingBlock:8,paddingInline:8,paddingBlockStart:"16px",lineHeight:"normal","&-title":{marginBlockEnd:16},"&-option":{display:"flex",justifyContent:"space-between",width:"100%"},"&-default-option":{display:"flex",flex:"1",alignItems:"center",justifyContent:"flex-end"}})))];})),eg=em.wrapSSR,ev=em.hashId,e_=(0,M.default)(U,o,ev),ew=(0,P.useRef)(),eT=(0,P.useRef)(),eA=V||eT;(0,P.useImperativeHandle)(b,function(){return ew.current;});var eC=(0,G.useMountMergeState)(B?(null==B?void 0:B.defaultSelectedRowKeys)||[]:void 0,{value:B?B.selectedRowKeys:void 0}),eO=(0,m.default)(eC,2),eM=eO[0],eD=eO[1],ej=(0,G.useMountMergeState)(function(){if(!en&&!1===I)return{};}),ez=(0,m.default)(ej,2),eU=ez[0],eG=ez[1],eH=(0,G.useMountMergeState)({}),eW=(0,m.default)(eH,2),eX=eW[0],eq=eW[1],e$=(0,G.useMountMergeState)({}),eY=(0,m.default)(e$,2),eZ=eY[0],eK=eY[1],eQ=(0,P.useCallback)(function(n){for(var r=[],i=0;i<n.length;i++){var a=n[i];a.children?eQ(a.children):r.push(a);}return r;},[]),eJ=(0,P.useMemo)(function(){var n=eQ(S);return null==n?void 0:n.every(function(n){return!!n.filters&&!!n.onFilter||void 0===n.filters&&void 0===n.onFilter;});},[eQ,S]),e0=(0,P.useMemo)(function(){var n=eQ(S);return null==n?void 0:n.every(function(n){return!0!==n.sorter;});},[eQ,S]);(0,P.useEffect)(function(){var n=(0,e2.parseDefaultColumnConfig)(S),r=n.sort,i=n.filter;eJ||eq(i),e0||eK(r);},[]);var e1=(0,s.useIntl)(),e3="object"===(0,h.default)(_)?_:{defaultCurrent:1,defaultPageSize:20,pageSize:20,current:1},e4=(0,P.useContext)(eB.TableContext),e5=(0,P.useMemo)(function(){if(a){var n;return n=(0,f.default)((0,u.default)().mark(function n(r){var i,o;return(0,u.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=(0,x.default)((0,x.default)((0,x.default)({},r||{}),eU),c),delete i._timestamp,n.next=4,a(i,eZ,eX);case 4:return o=n.sent,n.abrupt("return",o);case 6:case"end":return n.stop();}},n);})),function(r){return n.apply(this,arguments);};}},[eU,c,eX,eZ,a]),e8=ni(e5,d,{pageInfo:!1!==_&&e3,loading:n.loading,dataSource:n.dataSource,onDataSourceChange:n.onDataSourceChange,onLoad:C,onLoadingChange:D,onRequestError:O,postData:g,revalidateOnFocus:ef,manual:void 0===eU,polling:ei,effects:[(0,G.stringify)(c),(0,G.stringify)(eU),(0,G.stringify)(eX),(0,G.stringify)(eZ)],debounceTime:n.debounceTime,onPageInfoChange:function(n){var r,i;_&&e5&&(null==_||null===(r=_.onChange)||void 0===r||r.call(_,n.current,n.pageSize),null==_||null===(i=_.onShowSizeChange)||void 0===i||i.call(_,n.current,n.pageSize));}});(0,P.useEffect)(function(){if(!n.manualRequest&&n.request&&ef&&(null===(r=n.form)||void 0===r||!r.ignoreRules)){var r,i=function(){"visible"===document.visibilityState&&e8.reload();};return document.addEventListener("visibilitychange",i),function(){return document.removeEventListener("visibilitychange",i);};}},[]);var e7=P.default.useRef(new Map),e9=P.default.useMemo(function(){return"function"==typeof ee?ee:function(r,i){var a;return -1===i?null==r?void 0:r[ee]:n.name?null==i?void 0:i.toString():null!==(a=null==r?void 0:r[ee])&&void 0!==a?a:null==i?void 0:i.toString();};},[n.name,ee]);(0,P.useMemo)(function(){var n;return null!==(n=e8.dataSource)&&void 0!==n&&n.length?e8.dataSource.map(function(n){var r=e9(n,-1);return e7.current.set(r,n),r;}):[];},[e8.dataSource,e9]);var te=(0,P.useMemo)(function(){var n=!1!==_&&(0,x.default)({},_),r=(0,x.default)((0,x.default)({},e8.pageInfo),{},{setPageInfo:function(n){var r=n.pageSize,i=n.current,o=e8.pageInfo;if(r===o.pageSize||1===o.current){e8.setPageInfo({pageSize:r,current:i});return;}a&&e8.setDataSource([]),e8.setPageInfo({pageSize:r,current:"list"===X?i:1});}});return a&&n&&(delete n.onChange,delete n.onShowSizeChange),(0,e2.mergePagination)(n,r,e1);},[_,e8,e1]);(0,G.useDeepCompareEffect)(function(){var r;n.request&&!function(n){if(null==n)return!0;if((0,et.default)(n)&&((0,J.default)(n)||"string"==typeof n||"function"==typeof n.splice||(0,er.default)(n)||(0,es.default)(n)||(0,K.default)(n)))return!n.length;var r=(0,Y.default)(n);if("[object Map]"==r||"[object Set]"==r)return!n.size;if((0,ea.default)(n))return!(0,q.default)(n).length;for(var i in n)if(el.call(n,i))return!1;return!0;}(c)&&e8.dataSource&&!function n(r,i,a,o,s){return r===i||(null!=r&&null!=i&&((0,eF.default)(r)||(0,eF.default)(i))?function(n,r,i,a,o,s){var l=(0,J.default)(n),u=(0,J.default)(r),c=l?eI:(0,Y.default)(n),f=u?eI:(0,Y.default)(r);c=c==ek?eL:c,f=f==ek?eL:f;var d=c==eL,h=f==eL,p=c==f;if(p&&(0,er.default)(n)){if(!(0,er.default)(r))return!1;l=!0,d=!1;}if(p&&!d)return s||(s=new ec.default),l||(0,es.default)(n)?ep(n,r,i,a,o,s):function(n,r,i,a,o,s,l){switch(i){case"[object DataView]":if(n.byteLength!=r.byteLength||n.byteOffset!=r.byteOffset)break;n=n.buffer,r=r.buffer;case"[object ArrayBuffer]":if(n.byteLength!=r.byteLength||!s(new ey.default(n),new ey.default(r)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,eb.default)(+n,+r);case"[object Error]":return n.name==r.name&&n.message==r.message;case"[object RegExp]":case"[object String]":return n==r+"";case"[object Map]":var u=ex;case"[object Set]":var c=1&a;if(u||(u=eE),n.size!=r.size&&!c)break;var f=l.get(n);if(f)return f==r;a|=2,l.set(n,r);var d=ep(u(n),u(r),a,o,s,l);return l.delete(n),d;case"[object Symbol]":if(eS)return eS.call(n)==eS.call(r);}return!1;}(n,r,c,i,a,o,s);if(!(1&i)){var m=d&&eN.call(n,"__wrapped__"),g=h&&eN.call(r,"__wrapped__");if(m||g){var v=m?n.value():n,y=g?r.value():r;return s||(s=new ec.default),o(v,y,i,a,s);}}return!!p&&(s||(s=new ec.default),function(n,r,i,a,o,s){var l=1&i,u=eR(n),c=u.length;if(c!=eR(r).length&&!l)return!1;for(var f=c;f--;){var d=u[f];if(!(l?d in r:eP.call(r,d)))return!1;}var h=s.get(n),p=s.get(r);if(h&&p)return h==r&&p==n;var m=!0;s.set(n,r),s.set(r,n);for(var g=l;++f<c;){var v=n[d=u[f]],y=r[d];if(a)var _=l?a(y,v,d,r,n,s):a(v,y,d,n,r,s);if(!(void 0===_?v===y||o(v,y,i,a,s):_)){m=!1;break;}g||(g="constructor"==d);}if(m&&!g){var b=n.constructor,x=r.constructor;b!=x&&"constructor"in n&&"constructor"in r&&!("function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x)&&(m=!1);}return s.delete(n),s.delete(r),m;}(n,r,i,a,o,s));}(r,i,a,o,n,s):r!=r&&i!=i);}(e8.dataSource,d)&&(null==e8||null===(r=e8.pageInfo)||void 0===r?void 0:r.current)!==1&&e8.setPageInfo({current:1});},[c]),e4.setPrefixName(n.name);var tt=(0,P.useCallback)(function(){B&&B.onChange&&B.onChange([],[],{type:"none"}),eD([]);},[B,eD]);e4.propsRef.current=n;var tn=(0,G.useEditableArray)((0,x.default)((0,x.default)({},n.editable),{},{tableName:n.name,getRowKey:e9,childrenColumnName:(null===(i=n.expandable)||void 0===i?void 0:i.childrenColumnName)||"children",dataSource:e8.dataSource||[],setDataSource:function(r){var i,a;null===(i=n.editable)||void 0===i||null===(a=i.onValuesChange)||void 0===a||a.call(i,void 0,r),e8.setDataSource(r);}})),tr=(null===s.proTheme||void 0===s.proTheme?void 0:s.proTheme.useToken()).token;(0,e2.useActionType)(ew,e8,{fullScreen:function(){var n,r;null!==(n=e4.rootDomRef)&&void 0!==n&&n.current&&document.fullscreenEnabled&&(document.fullscreenElement?document.exitFullscreen():null===(r=e4.rootDomRef)||void 0===r||r.current.requestFullscreen());},onCleanSelected:function(){tt();},resetAll:function(){tt();var n,r=(0,e2.parseDefaultColumnConfig)(S),i=r.sort;eq(r.filter),eK(i),e4.setKeyWords(void 0),e8.setPageInfo({current:1}),null==eA||null===(n=eA.current)||void 0===n||n.resetFields(),eG({});},editableUtils:tn}),e4.setAction(ew.current);var ti=(0,P.useMemo)(function(){var r,i;return(function n(r,i){var a,o=r.columns,s=r.counter,l=r.columnEmptyText,u=r.type,c=r.editableUtils,f=r.marginSM,d=r.rowKey,p=void 0===d?"id":d,m=r.childrenColumnName,g=void 0===m?"children":m,v=r.proFilter,y=void 0===v?{}:v,_=r.proSort,b=new Map;return null==o||null===(a=o.map(function(a,o){if(a===W.default.EXPAND_COLUMN||a===W.default.SELECTION_COLUMN)return a;var d=a.key,m=a.dataIndex,v=a.valueEnum,E=a.valueType,w=a.children,S=a.onFilter,T=a.filters,A=void 0===T?[]:T,C=a.sorter,O=(0,e2.genColumnKey)(d||(null==m?void 0:m.toString()),[null==i?void 0:i.key,o].filter(Boolean).join("-"));if(!v&&!(void 0===E?"text":E)&&!w)return(0,x.default)({index:o},a);var M=s.columnsMap[O]||{fixed:a.fixed},R=function(){return!0===S?function(n,r){return String(String(Array.isArray(m)?(0,nf.default)(r,m):r[m]))===String(n);}:(0,no.omitBoolean)(S);},k=O&&(null==y?void 0:y[O])!==void 0?null==y?void 0:y[O]:null,I=O&&void 0!==_[O]?_[O]:null,N=p,D=(0,x.default)((0,x.default)({index:o,key:O},a),{},{title:nS(a),valueEnum:v,filters:!0===A?(0,na.proFieldParsingValueEnumToArray)((0,th.runFunction)(v,void 0)).filter(function(n){return n&&"all"!==n.value;}):A,onFilter:R(),filteredValue:A&&null==R()?k:void 0,sortOrder:!0===C?I:void 0,fixed:M.fixed,width:a.width||(a.fixed?200:void 0),children:a.children?n((0,x.default)((0,x.default)({},r),{},{columns:(null==a?void 0:a.children)||[]}),(0,x.default)((0,x.default)({},a),{},{key:O})):void 0,render:function(n,r,i){if("function"==typeof p&&(N=p(r,i)),"object"===(0,h.default)(r)&&null!==r&&Reflect.has(r,N)){o=r[N];var o,d,m=b.get(o)||[];null===(d=r[g])||void 0===d||d.forEach(function(n){var r=n[N];b.has(r)||b.set(r,m.concat([i,g]));});}return function(n){var r,i=n.columnProps,a=n.text,o=n.rowData,s=n.index,l=n.columnEmptyText,u=n.counter,c=n.type,f=n.subName,d=n.marginSM,p=n.editableUtils,m=u.action,g=u.prefixName,v=p.isEditable((0,x.default)((0,x.default)({},o),{},{index:s})),y=v.isEditable,_=v.recordKey,b=i.renderText,E=(void 0===b?function(n){return n;}:b)(a,o,s,m),w=y&&("boolean"==typeof(r=null==i?void 0:i.editable)?!1!==r:(null==r?void 0:r(a,o,s))!==!1)?"edit":"read",S=function n(r){var i,a,o=r.text,s=r.valueType,l=r.rowData,u=r.columnProps,c=r.index;if((!s||["textarea","text"].includes(s.toString()))&&!(null!=u&&u.valueEnum)&&"read"===r.mode)return nx.includes(o)?r.columnEmptyText:o;if("function"==typeof s&&l)return n((0,x.default)((0,x.default)({},r),{},{valueType:s(l,r.type)||"text"}));var f=(null==u?void 0:u.key)||(null==u||null===(i=u.dataIndex)||void 0===i?void 0:i.toString()),d=null!=u&&u.dependencies?[r.prefixName,r.prefixName?null==c?void 0:c.toString():null===(a=r.recordKey)||void 0===a?void 0:a.toString(),null==u?void 0:u.dependencies].filter(Boolean).flat(1):[],h={valueEnum:(0,th.runFunction)(null==u?void 0:u.valueEnum,l),request:null==u?void 0:u.request,dependencies:null!=u&&u.dependencies?[d]:void 0,originDependencies:null!=u&&u.dependencies?[null==u?void 0:u.dependencies]:void 0,params:(0,th.runFunction)(null==u?void 0:u.params,l,u),readonly:null==u?void 0:u.readonly,text:"index"===s||"indexBorder"===s?r.index:o,mode:r.mode,renderFormItem:void 0,valueType:s,record:l,proFieldProps:{emptyText:r.columnEmptyText,proFieldKey:f?"table-field-".concat(f):void 0}};return"edit"!==r.mode?(0,L.jsx)(nm.default,(0,x.default)({mode:"read",ignoreFormItem:!0,fieldProps:(0,nv.getFieldPropsOrFormItemProps)(null==u?void 0:u.fieldProps,null,u)},h)):(0,L.jsx)(nw,(0,x.default)((0,x.default)({},r),{},{proFieldProps:h}),r.recordKey);}({text:E,valueType:i.valueType||"text",index:s,rowData:o,subName:f,columnProps:(0,x.default)((0,x.default)({},i),{},{entry:o,entity:o}),counter:u,columnEmptyText:l,type:c,recordKey:_,mode:w,prefixName:g,editableUtils:p}),T="edit"===w?S:(0,nl.genCopyable)(S,i,E);if("edit"===w)return"option"===i.valueType?(0,L.jsx)("div",{style:{display:"flex",alignItems:"center",gap:d,justifyContent:"center"===i.align?"center":"flex-start"},children:p.actionRender((0,x.default)((0,x.default)({},o),{},{index:i.index||s}))}):T;if(!i.render){var A=P.default.isValidElement(T)||["string","number"].includes((0,h.default)(T));return!(0,nu.isNil)(T)&&A?T:null;}var C=i.render(T,o,s,(0,x.default)((0,x.default)({},m),p),(0,x.default)((0,x.default)({},i),{},{isEditable:y,type:"table"}));return(0,e2.isMergeCell)(C)?C:C&&"option"===i.valueType&&Array.isArray(C)?(0,L.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:8},children:C}):C;}({columnProps:a,text:n,rowData:r,index:i,columnEmptyText:l,counter:s,type:u,marginSM:f,subName:b.get(o),editableUtils:c});}});return(0,ns.omitUndefinedAndEmptyArr)(D);}))||void 0===a?void 0:a.filter(function(n){return!n.hideInTable;});})({columns:S,counter:e4,columnEmptyText:Z,type:X,marginSM:tr.marginSM,editableUtils:tn,rowKey:ee,childrenColumnName:null===(r=n.expandable)||void 0===r?void 0:r.childrenColumnName,proFilter:eX,proSort:eZ}).sort((i=e4.columnsMap,function(n,r){var a,o,s,l,u=n.fixed,c=n.index,f=r.fixed,d=r.index;if("left"===u&&"left"!==f||"right"===f&&"right"!==u)return -2;if("left"===f&&"left"!==u||"right"===u&&"right"!==f)return 2;var h=n.key||"".concat(c),p=r.key||"".concat(d);return null!==(a=i[h])&&void 0!==a&&a.order||null!==(o=i[p])&&void 0!==o&&o.order?((null===(s=i[h])||void 0===s?void 0:s.order)||0)-((null===(l=i[p])||void 0===l?void 0:l.order)||0):(n.index||0)-(r.index||0);}));},[S,null==e4?void 0:e4.sortKeyColumns,null==e4?void 0:e4.columnsMap,Z,X,tn.editableKeys&&tn.editableKeys.join(","),eX,eZ]);(0,G.useDeepCompareEffectDebounce)(function(){if(ti&&ti.length>0){var n=ti.map(function(n){return(0,e2.genColumnKey)(n.key,n.index);});e4.setSortKeyColumns(n);}},[ti],["render","renderFormItem"],100),(0,G.useDeepCompareEffect)(function(){var n=e8.pageInfo,r=_||{},i=r.current,a=void 0===i?null==n?void 0:n.current:i,o=r.pageSize,s=void 0===o?null==n?void 0:n.pageSize:o;_&&(a||s)&&(s!==(null==n?void 0:n.pageSize)||a!==(null==n?void 0:n.current))&&e8.setPageInfo({pageSize:s||n.pageSize,current:a||n.current});},[_&&_.pageSize,_&&_.current]);var ta=(0,x.default)((0,x.default)({selectedRowKeys:eM},B),{},{onChange:function(n,r,i){B&&B.onChange&&B.onChange(n,r,i),eD(n);}}),to=!1!==I&&(null==I?void 0:I.filterType)==="light",ts=(0,P.useCallback)(function(n){if(R&&R.search){var r,i,a=(!0===R.search?{}:R.search).name;if(!1!==(null===(r=R.search)||void 0===r||null===(i=r.onSearch)||void 0===i?void 0:i.call(r,e4.keyWords))){eG((0,x.default)((0,x.default)({},n),{},(0,v.default)({},void 0===a?"keyword":a,e4.keyWords)));return;}}eG(n);},[e4.keyWords,R,eG]),tl=(0,P.useMemo)(function(){if("object"===(0,h.default)(e8.loading)){var n;return(null===(n=e8.loading)||void 0===n?void 0:n.spinning)||!1;}return e8.loading;},[e8.loading]),tu=(0,P.useMemo)(function(){var r=!1===I&&"form"!==X?null:(0,L.jsx)(e6,{pagination:te,beforeSearchSubmit:j,action:ew,columns:S,onFormSearchSubmit:function(n){ts(n);},ghost:y,onReset:n.onReset,onSubmit:n.onSubmit,loading:!!tl,manualRequest:en,search:I,form:n.form,formRef:eA,type:n.type||"table",cardBordered:n.cardBordered,dateFormatter:n.dateFormatter});return ed&&r?(0,L.jsx)(L.Fragment,{children:ed(n,r)}):r;},[j,eA,y,tl,en,ts,te,n,S,I,ed,X]),tc=(0,P.useMemo)(function(){return null==eM?void 0:eM.map(function(n){var r;return null===(r=e7.current)||void 0===r?void 0:r.get(n);});},[e8.dataSource,eM]),tf=(0,P.useMemo)(function(){return!1===R&&!p&&!T&&!Q&&!to;},[R,p,T,Q,to]),td=!1===T?null:(0,L.jsx)(t8,{headerTitle:p,hideToolbar:tf,selectedRows:tc,selectedRowKeys:eM,tableColumn:ti,tooltip:eo,toolbar:Q,onFormSearchSubmit:function(n){eG((0,x.default)((0,x.default)({},eU),n));},searchNode:to?tu:null,options:R,optionsRender:A,actionRef:ew,toolBarRender:T}),tp=!1!==B?(0,L.jsx)(eV,{selectedRowKeys:eM,selectedRows:tc,onCleanSelected:tt,alertOptionRender:eh.tableAlertOptionRender,alertInfoRender:z,alwaysShowAlert:null==B?void 0:B.alwaysShowAlert}):null;return eg((0,L.jsx)(nC,(0,x.default)((0,x.default)({},n),{},{name:N,defaultClassName:U,size:e4.tableSize,onSizeChange:e4.setTableSize,pagination:te,searchNode:tu,rowSelection:!1!==B?ta:void 0,className:e_,tableColumn:ti,isLightFilter:to,action:e8,alertDom:tp,toolbarDom:td,hideToolbar:tf,onSortChange:function(n){e0||n===eZ||eK(n);},onFilterChange:function(n){eJ||n===eX||eq(n);},editableUtils:tn,getRowKey:e9})));},nR=function(n){var r=(0,P.useContext)(C.default.ConfigContext).getPrefixCls,i=!1===n.ErrorBoundary?P.default.Fragment:n.ErrorBoundary||G.ErrorBoundary;return(0,L.jsx)(eB.Container,{initValue:n,children:(0,L.jsx)(s.ProConfigProvider,{needDeps:!0,children:(0,L.jsx)(i,{children:(0,L.jsx)(nM,(0,x.default)({defaultClassName:"".concat(r("pro-table"))},n))})})});};nR.Summary=W.default.Summary;var nP=i("06ecdd39"),nk=a._(nP),nI=i("dfb73c9a");a._(nI);var nL=i("38ab0c18"),nN=a._(nL),nD=i("dd8ccb36"),nF=a._(nD),nB=["onTableChange","maxLength","formItemProps","recordCreatorProps","rowKey","controlled","defaultValue","onChange","editableFormRef"],nj=["record","position","creatorButtonText","newRecordType","parentKey","style"],nz=P.default.createContext(void 0);function nU(n){var r,i=n.children,a=n.record,o=n.position,s=n.newRecordType,l=n.parentKey,c=(0,P.useContext)(nz);return P.default.cloneElement(i,(0,x.default)((0,x.default)({},i.props),{},{onClick:(r=(0,f.default)((0,u.default)().mark(function n(r){var f,d,h;return(0,u.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===(f=(d=i.props).onClick)||void 0===f?void 0:f.call(d,r);case 2:if(!1!==n.sent){n.next=5;break;}return n.abrupt("return");case 5:null==c||null===(h=c.current)||void 0===h||h.addEditRecord(a,{position:o,newRecordType:s,parentKey:l});case 6:case"end":return n.stop();}},n);})),function(n){return r.apply(this,arguments);})}));}function nV(n){var r,i,a=(0,s.useIntl)(),o=n.onTableChange,l=n.maxLength,u=(n.formItemProps,n.recordCreatorProps),c=n.rowKey,f=(n.controlled,n.defaultValue),d=(n.onChange,n.editableFormRef),h=(0,w.default)(n,nB),p=(0,P.useRef)(void 0),g=(0,P.useRef)(),y=(0,P.useRef)();(0,P.useImperativeHandle)(h.actionRef,function(){return g.current;},[g.current]);var _=(0,tX.default)(function(){return n.value||f||[];},{value:n.value,onChange:n.onChange}),b=(0,m.default)(_,2),E=b[0],S=b[1],T=P.default.useMemo(function(){return"function"==typeof c?c:function(n,r){return n[c]||r;};},[c]),A=(0,G.useRefFunction)(function(r){if("number"==typeof r&&!n.name){if(r>=E.length)return r;var i=E&&E[r];return null==T?void 0:T(i,r);}if(("string"==typeof r||r>=E.length)&&n.name){var a=E.findIndex(function(n,i){var a;return(null==T||null===(a=T(n,i))||void 0===a?void 0:a.toString())===(null==r?void 0:r.toString());});if(-1!==a)return a;}return r;});(0,P.useImperativeHandle)(d,function(){var r=function(r){if(void 0==r)throw Error("rowIndex is required");var i,a,o=A(r),s=[n.name,null!==(i=null==o?void 0:o.toString())&&void 0!==i?i:""].flat(1).filter(Boolean);return null===(a=y.current)||void 0===a?void 0:a.getFieldValue(s);};return(0,x.default)((0,x.default)({},y.current),{},{getRowData:r,getRowsData:function(){var r=[n.name].flat(1).filter(Boolean);if(Array.isArray(r)&&0===r.length){var i,a,o=null===(a=y.current)||void 0===a?void 0:a.getFieldsValue();return Array.isArray(o)?o:Object.keys(o).map(function(n){return o[n];});}return null===(i=y.current)||void 0===i?void 0:i.getFieldValue(r);},setRowData:function(i,a){if(void 0==i)throw Error("rowIndex is required");var o,s,l=A(i),u=[n.name,null!==(o=null==l?void 0:l.toString())&&void 0!==o?o:""].flat(1).filter(Boolean),c=Object.assign({},(0,x.default)((0,x.default)({},r(i)),a||{})),f=(0,nF.default)({},u,c);return null===(s=y.current)||void 0===s||s.setFieldsValue(f),!0;}});},[A,n.name,y.current]),(0,P.useEffect)(function(){n.controlled&&(E||[]).forEach(function(n,r){var i;null===(i=y.current)||void 0===i||i.setFieldsValue((0,v.default)({},"".concat(T(n,r)),n));},{});},[(0,G.stringify)(E),n.controlled]),(0,P.useEffect)(function(){if(n.name){var r;y.current=null==n||null===(r=n.editable)||void 0===r?void 0:r.form;}},[null===(r=n.editable)||void 0===r?void 0:r.form,n.name]);var C=u||{},O=C.record,M=C.position,R=C.creatorButtonText,k=C.newRecordType,I=C.parentKey,N=C.style,D=(0,w.default)(C,nj),F="top"===M,B=(0,P.useMemo)(function(){return("number"!=typeof l||!(l<=(null==E?void 0:E.length)))&&!1!==u&&(0,L.jsx)(nU,{record:(0,G.runFunction)(O,null==E?void 0:E.length,E)||{},position:M,parentKey:(0,G.runFunction)(I,null==E?void 0:E.length,E),newRecordType:k,children:(0,L.jsx)(nN.default,(0,x.default)((0,x.default)({type:"dashed",style:(0,x.default)({display:"block",margin:"10px 0",width:"100%"},N),icon:(0,L.jsx)(nk.default,{})},D),{},{children:R||a.getMessage("editableTable.action.add","\u6DFB\u52A0\u4E00\u884C\u6570\u636E")}))});},[u,l,null==E?void 0:E.length]),z=(0,P.useMemo)(function(){return B?F?{components:{header:{wrapper:function(n){var r,i=n.className,a=n.children;return(0,L.jsxs)("thead",{className:i,children:[a,(0,L.jsxs)("tr",{style:{position:"relative"},children:[(0,L.jsx)("td",{colSpan:0,style:{visibility:"hidden"},children:B}),(0,L.jsx)("td",{style:{position:"absolute",left:0,width:"100%"},colSpan:null===(r=h.columns)||void 0===r?void 0:r.length,children:B})]})]});}}}}:{tableViewRender:function(r,i){var a,o;return(0,L.jsxs)(L.Fragment,{children:[null!==(a=null===(o=n.tableViewRender)||void 0===o?void 0:o.call(n,r,i))&&void 0!==a?a:i,B]});}}:{};},[F,B]),U=(0,x.default)({},n.editable),V=(0,G.useRefFunction)(function(r,i){var a,o,s,l;null===(a=n.editable)||void 0===a||null===(o=a.onValuesChange)||void 0===o||o.call(a,r,i),null===(s=n.onValuesChange)||void 0===s||s.call(n,i,r),n.controlled&&(null==n||null===(l=n.onChange)||void 0===l||l.call(n,i));});return(null!=n&&n.onValuesChange||null!==(i=n.editable)&&void 0!==i&&i.onValuesChange||n.controlled&&null!=n&&n.onChange)&&(U.onValuesChange=V),(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(nz.Provider,{value:g,children:(0,L.jsx)(nR,(0,x.default)((0,x.default)((0,x.default)({search:!1,options:!1,pagination:!1,rowKey:c,revalidateOnFocus:!1},h),z),{},{tableLayout:"fixed",actionRef:g,onChange:o,editable:(0,x.default)((0,x.default)({},U),{},{formProps:(0,x.default)({formRef:y},U.formProps)}),dataSource:E,onDataSourceChange:function(r){if(S(r),n.name&&"top"===M){var i,a=(0,nF.default)({},[n.name].flat(1).filter(Boolean),r);null===(i=y.current)||void 0===i||i.setFieldsValue(a);}}}))}),n.name?(0,L.jsx)(j.ProFormDependency,{name:[n.name],children:function(r){if(!p.current)return p.current=E,null;var i,a,o=(0,nf.default)(r,[n.name].flat(1)),s=null==o?void 0:o.find(function(n,r){var i;return!(0,G.isDeepEqualReact)(n,null===(i=p.current)||void 0===i?void 0:i[r]);});return p.current=E,s&&(null==n||null===(i=n.editable)||void 0===i||null===(a=i.onValuesChange)||void 0===a||a.call(i,s,o)),null;}}):null]});}function nG(n){var r=j.default.useFormInstance();return n.name?(0,L.jsx)(n_.default.Item,(0,x.default)((0,x.default)({style:{maxWidth:"100%"},shouldUpdate:function(r,i){var a=[n.name].flat(1);try{return JSON.stringify((0,nf.default)(r,a))!==JSON.stringify((0,nf.default)(i,a));}catch(n){return!0;}}},null==n?void 0:n.formItemProps),{},{name:n.name,children:(0,L.jsx)(nV,(0,x.default)((0,x.default)({tableLayout:"fixed",scroll:{x:"max-content"}},n),{},{editable:(0,x.default)((0,x.default)({},n.editable),{},{form:r})}))})):(0,L.jsx)(nV,(0,x.default)({tableLayout:"fixed",scroll:{x:"max-content"}},n));}nG.RecordCreator=nU;},"7a6e60e7":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return o;},medianIndex:function(){return s;}});var a=i("852bbaa9")._(i("20e31a38"));function o(n,r){return(0,a.default)(n,.5,r);}function s(n,r){return(0,a.quantileIndex)(n,.5,r);}},"7af457f4":function(n,r,i){var a=i("7733d15c"),o=i("777d655f")(a);n.exports=o;},"7b424aab":function(n,r,i){"use strict";function a(n,r){let i;let a=-1,o=-1;if(void 0===r)for(let r of n)++o,null!=r&&(i>r||void 0===i&&r>=r)&&(i=r,a=o);else for(let s of n)null!=(s=r(s,++o,n))&&(i>s||void 0===i&&s>=s)&&(i=s,a=o);return a;}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},"7b65a7d6":function(n,r,i){var a=i("56fecea2"),o=i("9e135458"),s=i("e4cbb1a3");n.exports=function(n){var r=o(n);return 1==r.length&&r[0][2]?s(r[0][0],r[0][1]):function(i){return i===n||a(i,n,r);};};},"7b8bcee7":function(n,r,i){function a(n){var r=0,i=n.children,a=i&&i.length;if(a)for(;--a>=0;)r+=i[a].value;else r=1;n.value=r;}i.d(r,"__esModule",{value:!0}),i.e(r,{Node:function(){return d;},computeHeight:function(){return f;},default:function(){return s;}});var o=function*(){var n,r,i,a,o=this,s=[o];do for(n=s.reverse(),s=[];o=n.pop();)if(yield o,r=o.children)for(i=0,a=r.length;i<a;++i)s.push(r[i]);while(s.length)};function s(n,r){n instanceof Map?(n=[void 0,n],void 0===r&&(r=u)):void 0===r&&(r=l);for(var i,a,o,s,c,h=new d(n),p=[h];i=p.pop();)if((o=r(i.data))&&(c=(o=Array.from(o)).length))for(i.children=o,s=c-1;s>=0;--s)p.push(a=o[s]=new d(o[s])),a.parent=i,a.depth=i.depth+1;return h.eachBefore(f);}function l(n){return n.children;}function u(n){return Array.isArray(n)?n[1]:null;}function c(n){void 0!==n.data.value&&(n.value=n.data.value),n.data=n.data.data;}function f(n){var r=0;do n.height=r;while((n=n.parent)&&n.height<++r)}function d(n){this.data=n,this.depth=this.height=0,this.parent=null;}d.prototype=s.prototype={constructor:d,count:function(){return this.eachAfter(a);},each:function(n,r){let i=-1;for(let a of this)n.call(r,a,++i,this);return this;},eachAfter:function(n,r){for(var i,a,o,s=this,l=[s],u=[],c=-1;s=l.pop();)if(u.push(s),i=s.children)for(a=0,o=i.length;a<o;++a)l.push(i[a]);for(;s=u.pop();)n.call(r,s,++c,this);return this;},eachBefore:function(n,r){for(var i,a,o=this,s=[o],l=-1;o=s.pop();)if(n.call(r,o,++l,this),i=o.children)for(a=i.length-1;a>=0;--a)s.push(i[a]);return this;},find:function(n,r){let i=-1;for(let a of this)if(n.call(r,a,++i,this))return a;},sum:function(n){return this.eachAfter(function(r){for(var i=+n(r.data)||0,a=r.children,o=a&&a.length;--o>=0;)i+=a[o].value;r.value=i;});},sort:function(n){return this.eachBefore(function(r){r.children&&r.children.sort(n);});},path:function(n){for(var r=this,i=function(n,r){if(n===r)return n;var i=n.ancestors(),a=r.ancestors(),o=null;for(n=i.pop(),r=a.pop();n===r;)o=n,n=i.pop(),r=a.pop();return o;}(r,n),a=[r];r!==i;)a.push(r=r.parent);for(var o=a.length;n!==i;)a.splice(o,0,n),n=n.parent;return a;},ancestors:function(){for(var n=this,r=[n];n=n.parent;)r.push(n);return r;},descendants:function(){return Array.from(this);},leaves:function(){var n=[];return this.eachBefore(function(r){r.children||n.push(r);}),n;},links:function(){var n=this,r=[];return n.each(function(i){i!==n&&r.push({source:i.parent,target:i});}),r;},copy:function(){return s(this).eachBefore(c);},[Symbol.iterator]:o};},"7c302f45":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return b;}});var a=i("777fffbe"),o=i("852bbaa9"),s=a._(i("e4870cf0")),l=a._(i("23934e00")),u=a._(i("9b84be4b")),c=a._(i("613f75ca")),f=a._(i("ee64167d")),d=a._(i("38ab0c18")),h=a._(i("f34e933b")),p=a._(i("be902df5")),m=o._(i("609f48be")),g=i("7f173680"),v=i("dac8af92"),y=["rules","name","phoneName","fieldProps","onTiming","captchaTextRender","captchaProps"],_=m.default.forwardRef(function(n,r){var i,a=h.default.useFormInstance(),o=(0,m.useState)(n.countDown||60),g=(0,f.default)(o,2),_=g[0],b=g[1],x=(0,m.useState)(!1),E=(0,f.default)(x,2),w=E[0],S=E[1],T=(0,m.useState)(),A=(0,f.default)(T,2),C=A[0],O=A[1];n.rules,n.name;var M=n.phoneName,R=n.fieldProps,P=n.onTiming,k=n.captchaTextRender,I=n.captchaProps,L=(0,c.default)(n,y),N=(i=(0,u.default)((0,l.default)().mark(function n(r){return(0,l.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,O(!0),n.next=4,L.onGetCaptcha(r);case 4:O(!1),S(!0),n.next=13;break;case 8:n.prev=8,n.t0=n.catch(0),S(!1),O(!1),console.log(n.t0);case 13:case"end":return n.stop();}},n,null,[[0,8]]);})),function(n){return i.apply(this,arguments);});return(0,m.useImperativeHandle)(r,function(){return{startTiming:function(){return S(!0);},endTiming:function(){return S(!1);}};}),(0,m.useEffect)(function(){var r=0,i=n.countDown;return w&&(r=window.setInterval(function(){b(function(n){return n<=1?(S(!1),clearInterval(r),i||60):n-1;});},1e3)),function(){return clearInterval(r);};},[w]),(0,m.useEffect)(function(){P&&P(_);},[_,P]),(0,v.jsxs)("div",{style:(0,s.default)((0,s.default)({},null==R?void 0:R.style),{},{display:"flex",alignItems:"center"}),ref:r,children:[(0,v.jsx)(p.default,(0,s.default)((0,s.default)({},R),{},{style:(0,s.default)({flex:1,transition:"width .3s",marginRight:8},null==R?void 0:R.style)})),(0,v.jsx)(d.default,(0,s.default)((0,s.default)({style:{display:"block"},disabled:w,loading:C},I),{},{onClick:(0,u.default)((0,l.default)().mark(function n(){var r;return(0,l.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!M){n.next=9;break;}return n.next=4,a.validateFields([M].flat(1));case 4:return r=a.getFieldValue([M].flat(1)),n.next=7,N(r);case 7:n.next=11;break;case 9:return n.next=11,N("");case 11:n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),console.log(n.t0);case 16:case"end":return n.stop();}},n,null,[[0,13]]);})),children:(void 0===k?function(n,r){return n?"".concat(r," \u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801";}:k)(w,_)}))]});}),b=(0,g.createField)(_);},"7c9399ac":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),r.default=void 0;var a=(0,i("609f48be").createContext)({});r.default=a;},"7cf6ebc4":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return o;}});var a=i("777fffbe")._(i("d6938bdb")),o=function(n){var r=(0,a.default)(n);return r.charAt(0).toUpperCase()+r.substring(1);};},"7d31d91a":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return b;}});var a=i("777fffbe"),o=i("9b84be4b"),s=a._(o),l=i("a854094b"),u=a._(l),c=i("e333157c"),f=a._(c),d=i("e4870cf0"),h=a._(d),p=i("9479dab9"),m=i("6654a076"),g=a._(m),v=i("8970bd89");class y extends g.default{getUninforms(){let n=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,h.default)((0,h.default)({},n.uniformsOption),r.uniformsOption);}getCommonUniformsInfo(){let{opacity:n=1,color:r="#000"}=this.layer.getLayerConfig(),i={u_color:(0,p.rgb2arr)(r),u_opacity:n||1};return this.getUniformsBufferInfo(i);}initModels(){var n=this;return(0,s.default)(function*(){return n.buildModels();})();}buildModels(){var n=this;return(0,s.default)(function*(){return n.initUniformsBuffer(),[(yield n.layer.buildLayerModel({moduleName:"mask",vertexShader:'layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\n\nlayout(std140) uniform commonUniorm {\n  vec4 u_color;\n  float u_opacity;\n};\n\n#pragma include "projection"\n\nvoid main() {\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n}\n\n',fragmentShader:"layout(std140) uniform commonUniorm {\n  vec4 u_color;\n  float u_opacity;\n};\n\nout vec4 outputColor;\n\nvoid main() {\n  outputColor = u_color;\n  outputColor.a *= u_opacity;\n}\n",defines:n.getDefines(),triangulation:v.polygonTriangulation,depth:{enable:!1},pick:!1}))];})();}clearModels(n=!0){n&&this.layerService.clear();}registerBuiltinAttributes(){return"";}}let _={fill:y};class b extends f.default{constructor(...n){super(...n),(0,u.default)(this,"type","MaskLayer");}buildModels(){var n=this;return(0,s.default)(function*(){let r=n.getModelType();n.layerModel=new _[r](n),yield n.initLayerModels();})();}getModelType(){return"fill";}}},"7d370577":function(n,r,i){var a=i("7733d15c"),o=i("191f48a8");n.exports=function(n,r){return n&&a(n,o(r));};},"7d3f4529":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"SimpleMapCoord",{enumerable:!0,get:function(){return o;}});var a=i("777fffbe")._(i("a854094b"));class o{constructor(n){(0,a.default)(this,"size",1e4),this.size=n||1e4;}setSize(n){this.size=n;}getSize(){return[this.size,this.size];}mercatorXfromLng(n){return(180+n)/360*this.size;}mercatorYfromLat(n){return(1-(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360)*this.size;}lngFromMercatorX(n){return n/this.size*360-180;}latFromMercatorY(n){return 360/Math.PI*Math.atan(Math.exp((180-(1-n/this.size)*360)*Math.PI/180))-90;}project(n){return[this.mercatorXfromLng(n[0]),this.mercatorYfromLat(n[1])];}unproject(n){return[this.lngFromMercatorX(n[0]),this.latFromMercatorY(n[1])];}}},"7d4c6398":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{Selection:function(){return c;},select:function(){return u;}});var a=i("777fffbe"),o=i("5e195043"),s=a._(i("1f4e7f4b")),l=i("f5373dff");function u(n){return new c([n],null,n,n.ownerDocument);}class c{constructor(n=null,r=null,i=null,a=null,o=[null,null,null,null,null],s=[],l=[]){this._elements=Array.from(n),this._data=r,this._parent=i,this._document=a,this._enter=o[0],this._update=o[1],this._exit=o[2],this._merge=o[3],this._split=o[4],this._transitions=s,this._facetElements=l;}selectAll(n){return new c("string"==typeof n?this._parent.querySelectorAll(n):n,null,this._elements[0],this._document);}selectFacetAll(n){let r="string"==typeof n?this._parent.querySelectorAll(n):n;return new c(this._elements,null,this._parent,this._document,void 0,void 0,r);}select(n){let r="string"==typeof n?this._parent.querySelectorAll(n)[0]||null:n;return new c([r],null,r,this._document);}append(n){let r="function"==typeof n?n:()=>this.createElement(n),i=[];if(null!==this._data){for(let n=0;n<this._data.length;n++){let a=this._data[n],[o,s]=Array.isArray(a)?a:[a,null],l=r(o,n);l.__data__=o,null!==s&&(l.__fromElements__=s),this._parent.appendChild(l),i.push(l);}return new c(i,null,this._parent,this._document);}for(let n=0;n<this._elements.length;n++){let a=this._elements[n],o=r(a.__data__,n);a.appendChild(o),i.push(o);}return new c(i,null,i[0],this._document);}maybeAppend(n,r,i){let a=this._elements[0],o=a.getElementById(n);if(o)return new c([o],null,this._parent,this._document);let s="string"==typeof r?this.createElement(r):r();return s.id=n,i&&(s.className=i),a.appendChild(s),new c([s],null,this._parent,this._document);}data(n,r=n=>n,i=()=>null){let a=[],o=[],l=new Set(this._elements),u=[],f=new Set,d=new Map(this._elements.map((n,i)=>[r(n.__data__,i),n])),h=new Map(this._facetElements.map((n,i)=>[r(n.__data__,i),n])),p=(0,s.default)(this._elements,n=>i(n.__data__));for(let s=0;s<n.length;s++){let c=n[s],m=r(c,s),g=i(c,s);if(d.has(m)){let n=d.get(m);n.__data__=c,n.__facet__=!1,o.push(n),l.delete(n),d.delete(m);}else if(h.has(m)){let n=h.get(m);n.__data__=c,n.__facet__=!0,o.push(n),h.delete(m);}else if(p.has(m)){let n=p.get(m);for(let r of(u.push([c,n]),n))l.delete(r);p.delete(m);}else if(d.has(g)){let n=d.get(g);n.__toData__?n.__toData__.push(c):n.__toData__=[c],f.add(n),l.delete(n);}else a.push(c);}let m=[new c([],a,this._parent,this._document),new c(o,null,this._parent,this._document),new c(l,null,this._parent,this._document),new c([],u,this._parent,this._document),new c(f,null,this._parent,this._document)];return new c(this._elements,null,this._parent,this._document,m);}merge(n){let r=[...this._elements,...n._elements],i=[...this._transitions,...n._transitions];return new c(r,null,this._parent,this._document,void 0,i);}createElement(n){if(this._document)return this._document.createElement(n,{});let r=c.registry[n];return r?new r:(0,l.error)(`Unknown node type: ${n}`);}join(n=n=>n,r=n=>n,i=n=>n.remove(),a=n=>n,o=n=>n.remove()){let s=n(this._enter),l=r(this._update),u=i(this._exit),c=a(this._merge),f=o(this._split);return l.merge(s).merge(u).merge(c).merge(f);}remove(){for(let n=0;n<this._elements.length;n++){let r=this._transitions[n];r?Promise.all((Array.isArray(r)?r:[r]).map(n=>n.finished)).then(()=>{this._elements[n].remove();}):this._elements[n].remove();}return new c([],null,this._parent,this._document,void 0,this._transitions);}each(n){for(let r=0;r<this._elements.length;r++){let i=this._elements[r];n(i.__data__,r,i);}return this;}attr(n,r){let i="function"!=typeof r?()=>r:r;return this.each(function(a,o,s){void 0!==r&&(s[n]=i(a,o,s));});}style(n,r){let i="function"!=typeof r?()=>r:r;return this.each(function(a,o,s){void 0!==r&&(s.style[n]=i(a,o,s));});}transition(n){let r="function"!=typeof n?()=>n:n,{_transitions:i}=this;return this.each(function(n,a,o){i[a]=r(n,a,o);});}on(n,r){return this.each(function(i,a,o){o.addEventListener(n,r);}),this;}call(n,...r){return n(this,...r),this;}node(){return this._elements[0];}nodes(){return this._elements;}transitions(){return this._transitions;}parent(){return this._parent;}}c.registry={g:o.Group,rect:o.Rect,circle:o.Circle,path:o.Path,text:o.Text,ellipse:o.Ellipse,image:o.Image,line:o.Line,polygon:o.Polygon,polyline:o.Polyline,html:o.HTML};},"7d5002fc":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{CALLBACK_ITEM_SYMBOL:function(){return v;},addGuideToScale:function(){return C;},applyDataTransform:function(){return _;},applyDefaults:function(){return y;},extractColumns:function(){return w;},extractTooltip:function(){return T;},flatEncode:function(){return b;},inferChannelsType:function(){return x;},maybeArrayField:function(){return A;},maybeNonAnimate:function(){return O;},maybeVisualChannel:function(){return E;},normalizeTooltip:function(){return S;}});var a=i("777fffbe"),o=a._(i("d7948920")),s=a._(i("1f338b89")),l=i("6c85d1a4"),u=i("cfce14bf"),c=i("f5373dff"),f=i("a48bf6c0"),d=i("c4368857"),h=i("1e27b829"),p=i("3776434f"),m=this&&this.__awaiter||function(n,r,i,a){return new(i||(i=Promise))(function(o,s){function l(n){try{c(a.next(n));}catch(n){s(n);}}function u(n){try{c(a.throw(n));}catch(n){s(n);}}function c(n){var r;n.done?o(n.value):((r=n.value)instanceof i?r:new i(function(n){n(r);})).then(l,u);}c((a=a.apply(n,r||[])).next());});},g=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let v=Symbol("CALLBACK_ITEM");function y(n,r,i){let{encode:a={},scale:o={},transform:s=[]}=r;return[n,Object.assign(Object.assign({},g(r,["encode","scale","transform"])),{encode:a,scale:o,transform:s})];}function _(n,r,i){return m(this,void 0,void 0,function*(){let{library:n}=i,{data:a}=r,[o]=(0,d.useLibrary)("data",n),l=function(n){if((0,s.default)(n))return{type:"inline",value:n};if(!n)return{type:"inline",value:null};if(Array.isArray(n))return{type:"inline",value:n};let{type:r="inline"}=n;return Object.assign(Object.assign({},g(n,["type"])),{type:r});}(a),{transform:f=[]}=l,h=[g(l,["transform"]),...f].map(n=>o(n,i)),p=yield(0,c.composeAsync)(h)(a),m=!a||Array.isArray(a)||Array.isArray(p)?p:{value:p};return[Array.isArray(p)?(0,u.indexOf)(p):[],Object.assign(Object.assign({},r),{data:m})];});}function b(n,r,i){let{encode:a}=r;if(!a)return[n,r];let o={};for(let[n,r]of Object.entries(a))if(Array.isArray(r))for(let i=0;i<r.length;i++)o[`${n}${0===i?"":i}`]=r[i];else o[n]=r;return[n,Object.assign(Object.assign({},r),{encode:o})];}function x(n,r,i){let{encode:a,data:o}=r;if(!a)return[n,r];let s=(0,u.mapObject)(a,n=>!function(n){if("object"!=typeof n||n instanceof Date||null===n)return!1;let{type:r}=n;return(0,c.defined)(r);}(n)?{type:"function"==typeof n?"transform":"string"==typeof n&&Array.isArray(o)&&o.some(r=>void 0!==r[n])?"field":"constant",value:n}:n);return[n,Object.assign(Object.assign({},r),{encode:s})];}function E(n,r,i){let{encode:a}=r;if(!a)return[n,r];let o=(0,u.mapObject)(a,(n,r)=>{let{type:i}=n;return"constant"!==i||(0,p.isPosition)(r)?n:Object.assign(Object.assign({},n),{constant:!0});});return[n,Object.assign(Object.assign({},r),{encode:o})];}function w(n,r,i){let{encode:a,data:o}=r;if(!a)return[n,r];let{library:s}=i,l=(0,h.createColumnOf)(s),c=(0,u.mapObject)(a,n=>l(o,n));return[n,Object.assign(Object.assign({},r),{encode:c})];}function S(n,r,i){let{tooltip:a={}}=r;return(0,c.isUnset)(a)?[n,r]:Array.isArray(a)?[n,Object.assign(Object.assign({},r),{tooltip:{items:a}})]:(0,c.isStrictObject)(a)&&(0,f.isFullTooltip)(a)?[n,Object.assign(Object.assign({},r),{tooltip:a})]:[n,Object.assign(Object.assign({},r),{tooltip:{items:[a]}})];}function T(n,r,i){let{data:a,encode:o,tooltip:s={}}=r;if((0,c.isUnset)(s))return[n,r];let u=r=>{if(!r)return r;if("string"==typeof r)return n.map(n=>({name:r,value:a[n][r]}));if((0,c.isStrictObject)(r)){let{field:i,channel:s,color:u,name:c=i,valueFormatter:f=n=>n}=r,d="string"==typeof f?(0,l.format)(f):f,h=s&&o[s],p=h&&o[s].field,m=c||p||s,g=[];for(let r of n){let n=i?a[r][i]:h?o[s].value[r]:null;g[r]={name:m,color:u,value:d(n)};}return g;}if("function"==typeof r){let i=[];for(let s of n){let n=r(a[s],s,a,o);(0,c.isStrictObject)(n)?i[s]=Object.assign(Object.assign({},n),{[v]:!0}):i[s]={value:n};}return i;}return r;},{title:f,items:d=[]}=s,h=g(s,["title","items"]),p=Object.assign({title:u(f),items:Array.isArray(d)?d.map(u):[]},h);return[n,Object.assign(Object.assign({},r),{tooltip:p})];}function A(n,r,i){let{encode:a}=r,o=g(r,["encode"]);if(!a)return[n,r];let s=Object.entries(a),l=s.filter(([,n])=>{let{value:r}=n;return Array.isArray(r[0]);}).flatMap(([r,i])=>{let a=[[r,Array(n.length).fill(void 0)]],{value:o}=i,s=g(i,["value"]);for(let i=0;i<o.length;i++){let s=o[i];if(Array.isArray(s))for(let o=0;o<s.length;o++){let l=a[o]||[`${r}${o}`,Array(n).fill(void 0)];l[1][i]=s[o],a[o]=l;}}return a.map(([n,r])=>[n,Object.assign({type:"column",value:r},s)]);}),u=Object.fromEntries([...s,...l]);return[n,Object.assign(Object.assign({},o),{encode:u})];}function C(n,r,i){let{axis:a={},legend:s={},slider:l={},scrollbar:u={}}=r,c=(n,r)=>{if("boolean"==typeof n)return n?{}:null;let i=n[r];return void 0===i||i?i:null;},f="object"==typeof a?Array.from(new Set(["x","y","z",...Object.keys(a)])):["x","y","z"];return(0,o.default)(r,{scale:Object.assign(Object.assign({},Object.fromEntries(f.map(n=>{let r=c(u,n);return[n,Object.assign({guide:c(a,n),slider:c(l,n),scrollbar:r},r&&{ratio:void 0===r.ratio?.5:r.ratio})];}))),{color:{guide:c(s,"color")},size:{guide:c(s,"size")},shape:{guide:c(s,"shape")},opacity:{guide:c(s,"opacity")}})}),[n,r];}function O(n,r,i){let{animate:a}=r;return a||void 0===a||(0,o.default)(r,{animate:{enter:{type:null},exit:{type:null},update:{type:null}}}),[n,r];}},"7d573d25":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"useStyle",{enumerable:!0,get:function(){return u;}});var a=i("777fffbe"),o=a._(i("e4870cf0")),s=a._(i("a854094b")),l=i("a3273044");function u(n){return(0,l.useStyle)("StepsForm",function(r){var i;return[(i=(0,o.default)((0,o.default)({},r),{},{componentCls:".".concat(n)}),(0,s.default)({},i.componentCls,{"&-container":{width:"max-content",minWidth:"420px",maxWidth:"100%",margin:"auto"},"&-steps-container":(0,s.default)({maxWidth:"1160px",margin:"auto"},"".concat(i.antCls,"-steps-vertical"),{height:"100%"}),"&-step":{display:"none",marginBlockStart:"32px","&-active":{display:"block"},"> form":{maxWidth:"100%"}}}))];});}},"7d9c7484":function(n,r,i){let a,o,s,l;i.d(r,"__esModule",{value:!0}),i.e(r,{BaseChart:function(){return b7;}});var u,c,f,d,h,p,m,g,v,y,_,b,x,E,w,S,T,A,C,O,M,R,P,k,I,L,N,D,F,B,j,z,U,V,G,H,W,X,q,$,Y,Z,K,Q,J,ee,et,en,er,ei,ea,eo,es,el,eu,ec,ef,ed,eh,ep,em,eg,ev,ey,e_,eb,ex,eE,ew=i("777fffbe"),eS=i("852bbaa9"),eT=i("609f48be"),eA=eS._(eT),eC=i("c357370b"),eO=i("d8554caa"),eM=this&&this.__assign||function(){return(eM=Object.assign||function(n){for(var r,i=1,a=arguments.length;i<a;i++)for(var o in r=arguments[i])Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n;}).apply(this,arguments);},eR=i("53930c34"),eP=ew._(eR),ek=i("49f29bec"),eI=i("e10a1671"),eL=i("5e195043"),eN=i("85158032"),eD=ew._(eN),eF=i("8bbe4f57"),eB=ew._(eF),ej=i("60824e0d"),ez=ew._(ej),eU=i("fbe36db6"),eV=ew._(eU),eG=i("d558e98a"),eH=i("a854094b"),eW=ew._(eH),eX=i("ee64167d"),eq=ew._(eX),e$=i("3715e357"),eY=ew._(e$);function eZ(n,r){var i=r.cx,a=r.cy,o=r.r;n.arc(void 0===i?0:i,void 0===a?0:a,o,0,2*Math.PI,!1);}function eK(n,r){var i=r.cx,a=void 0===i?0:i,o=r.cy,s=void 0===o?0:o,l=r.rx,u=r.ry;n.ellipse?n.ellipse(a,s,l,u,0,0,2*Math.PI,!1):(n.save(),n.scale(l>u?1:l/u,l>u?u/l:1),n.arc(a,s,l>u?l:u,0,2*Math.PI));}function eQ(n,r){var i,a=r.x1,o=r.y1,s=r.x2,l=r.y2,u=r.markerStart,c=r.markerEnd,f=r.markerStartOffset,d=r.markerEndOffset,h=0,p=0,m=0,g=0,v=0;u&&(0,eG.isDisplayObject)(u)&&f&&(h=Math.cos(v=Math.atan2(l-o,s-a))*(f||0),p=Math.sin(v)*(f||0)),c&&(0,eG.isDisplayObject)(c)&&d&&(m=Math.cos(v=Math.atan2(o-l,a-s))*(d||0),g=Math.sin(v)*(d||0)),n.moveTo(a+h,o+p),n.lineTo(s+m,l+g);}function eJ(n,r){var i,a=r.markerStart,o=r.markerEnd,s=r.markerStartOffset,l=r.markerEndOffset,u=r.d,c=u.absolutePath,f=u.segments,d=0,h=0,p=0,m=0,g=0;if(a&&(0,eG.isDisplayObject)(a)&&s){var v=a.parentNode.getStartTangent(),y=(0,eq.default)(v,2),_=y[0],b=y[1];i=_[0]-b[0],d=Math.cos(g=Math.atan2(_[1]-b[1],i))*(s||0),h=Math.sin(g)*(s||0);}if(o&&(0,eG.isDisplayObject)(o)&&l){var x=o.parentNode.getEndTangent(),E=(0,eq.default)(x,2),w=E[0],S=E[1];i=w[0]-S[0],p=Math.cos(g=Math.atan2(w[1]-S[1],i))*(l||0),m=Math.sin(g)*(l||0);}for(var T=0;T<c.length;T++){var A=c[T],C=A[0],O=c[T+1],M=0===T&&(0!==d||0!==h),R=(T===c.length-1||O&&("M"===O[0]||"Z"===O[0]))&&0!==p&&0!==m,P=M?[d,h]:[0,0],k=(0,eq.default)(P,2),I=k[0],L=k[1],N=R?[p,m]:[0,0],D=(0,eq.default)(N,2),F=D[0],B=D[1];switch(C){case"M":n.moveTo(A[1]+I,A[2]+L);break;case"L":n.lineTo(A[1]+F,A[2]+B);break;case"Q":n.quadraticCurveTo(A[1],A[2],A[3]+F,A[4]+B);break;case"C":n.bezierCurveTo(A[1],A[2],A[3],A[4],A[5]+F,A[6]+B);break;case"A":var j=f[T].arcParams,z=j.cx,U=j.cy,V=j.rx,G=j.ry,H=j.startAngle,W=j.endAngle,X=j.xRotation,q=j.sweepFlag;if(n.ellipse)n.ellipse(z,U,V,G,X,H,W,!!(1-q));else{var $=V>G?V:G,Y=V>G?1:V/G,Z=V>G?G/V:1;n.translate(z,U),n.rotate(X),n.scale(Y,Z),n.arc(0,0,$,H,W,!!(1-q)),n.scale(1/Y,1/Z),n.rotate(-X),n.translate(-z,-U);}R&&n.lineTo(A[6]+p,A[7]+m);break;case"Z":n.closePath();}}}function e0(n,r){var i,a=r.markerStart,o=r.markerEnd,s=r.markerStartOffset,l=r.markerEndOffset,u=r.points.points,c=u.length,f=u[0][0],d=u[0][1],h=u[c-1][0],p=u[c-1][1],m=0,g=0,v=0,y=0,_=0;a&&(0,eG.isDisplayObject)(a)&&s&&(i=u[1][0]-u[0][0],m=Math.cos(_=Math.atan2(u[1][1]-u[0][1],i))*(s||0),g=Math.sin(_)*(s||0)),o&&(0,eG.isDisplayObject)(o)&&l&&(i=u[c-1][0]-u[0][0],v=Math.cos(_=Math.atan2(u[c-1][1]-u[0][1],i))*(l||0),y=Math.sin(_)*(l||0)),n.moveTo(f+(m||v),d+(g||y));for(var b=1;b<c-1;b++){var x=u[b];n.lineTo(x[0],x[1]);}n.lineTo(h,p);}function e1(n,r){var i,a=r.markerStart,o=r.markerEnd,s=r.markerStartOffset,l=r.markerEndOffset,u=r.points.points,c=u.length,f=u[0][0],d=u[0][1],h=u[c-1][0],p=u[c-1][1],m=0,g=0,v=0,y=0,_=0;a&&(0,eG.isDisplayObject)(a)&&s&&(i=u[1][0]-u[0][0],m=Math.cos(_=Math.atan2(u[1][1]-u[0][1],i))*(s||0),g=Math.sin(_)*(s||0)),o&&(0,eG.isDisplayObject)(o)&&l&&(i=u[c-2][0]-u[c-1][0],v=Math.cos(_=Math.atan2(u[c-2][1]-u[c-1][1],i))*(l||0),y=Math.sin(_)*(l||0)),n.moveTo(f+m,d+g);for(var b=1;b<c-1;b++){var x=u[b];n.lineTo(x[0],x[1]);}n.lineTo(h+v,p+y);}function e2(n,r){var i=r.x,a=void 0===i?0:i,o=r.y,s=void 0===o?0:o,l=r.radius,u=r.width,c=r.height;if(l&&l.some(function(n){return 0!==n;})){var f=u>0?1:-1,d=c>0?1:-1,h=f+d===0,p=l.map(function(n){return(0,eY.default)(n,0,Math.min(Math.abs(u)/2,Math.abs(c)/2));}),m=(0,eq.default)(p,4),g=m[0],v=m[1],y=m[2],_=m[3];n.moveTo(f*g+a,s),n.lineTo(u-f*v+a,s),0!==v&&n.arc(u-f*v+a,d*v+s,v,-d*Math.PI/2,f>0?0:Math.PI,h),n.lineTo(u+a,c-d*y+s),0!==y&&n.arc(u-f*y+a,c-d*y+s,y,f>0?0:Math.PI,d>0?Math.PI/2:1.5*Math.PI,h),n.lineTo(f*_+a,c+s),0!==_&&n.arc(f*_+a,c-d*_+s,_,d>0?Math.PI/2:-Math.PI/2,f>0?Math.PI:0,h),n.lineTo(a,d*g+s),0!==g&&n.arc(f*g+a,d*g+s,g,f>0?Math.PI:0,d>0?1.5*Math.PI:Math.PI/2,h);}else n.rect(a,s,u,c);}var e3=function(n){function r(){var n;(0,eB.default)(this,r);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=(0,ez.default)(this,r,[].concat(a))).name="canvas-path-generator",n;}return(0,eV.default)(r,n),(0,eD.default)(r,[{key:"init",value:function(){var n,r=(n={},(0,eW.default)((0,eW.default)((0,eW.default)((0,eW.default)((0,eW.default)((0,eW.default)((0,eW.default)((0,eW.default)((0,eW.default)((0,eW.default)(n,eG.Shape.CIRCLE,eZ),eG.Shape.ELLIPSE,eK),eG.Shape.RECT,e2),eG.Shape.LINE,eQ),eG.Shape.POLYLINE,e1),eG.Shape.POLYGON,e0),eG.Shape.PATH,eJ),eG.Shape.TEXT,void 0),eG.Shape.GROUP,void 0),eG.Shape.IMAGE,void 0),(0,eW.default)((0,eW.default)((0,eW.default)(n,eG.Shape.HTML,void 0),eG.Shape.MESH,void 0),eG.Shape.FRAGMENT,void 0));this.context.pathGeneratorFactory=r;}},{key:"destroy",value:function(){delete this.context.pathGeneratorFactory;}}]);}(eG.AbstractRendererPlugin),e4={};i.e(e4,{Plugin:function(){return e3;}});var e5=i("8a2c7d78"),e6=ew._(e5),e8=i("23934e00"),e7=ew._(e8),e9=i("9b84be4b"),te=ew._(e9),tt=i("377bcc16"),tn=eS._(tt),tr=i("da755037"),ti=eS._(tr),ta=i("ac23d12b"),to=i("a09cbefa"),ts=i("e4870cf0"),tl=ew._(ts),tu=tn.create(),tc=tn.create(),tf=tn.create(),td=ti.create(),th=function(){function n(){var r=this;(0,eB.default)(this,n),this.isHit=function(n,i,a,o){var s=r.context.pointInPathPickerFactory[n.nodeName];if(s){var l=ti.invert(td,a),u=tn.transformMat4(tc,tn.set(tf,i[0],i[1],0),l);if(s(n,new eG.Point(u[0],u[1]),o,r.isPointInPath,r.context,r.runtime))return!0;}return!1;},this.isPointInPath=function(n,i){var a=r.runtime.offscreenCanvasCreator.getOrCreateContext(r.context.config.offscreenCanvas),o=r.context.pathGeneratorFactory[n.nodeName];return o&&(a.beginPath(),o(a,n.parsedStyle),a.closePath()),a.isPointInPath(i.x,i.y);};}return(0,eD.default)(n,[{key:"apply",value:function(r,i){var a,o,s=this,l=r.renderingService,u=r.renderingContext;this.context=r,this.runtime=i;var c=null===(o=u.root)||void 0===o?void 0:o.ownerDocument;l.hooks.pick.tapPromise(n.tag,(a=(0,te.default)((0,e7.default)().mark(function n(r){return(0,e7.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",s.pick(c,r));case 1:case"end":return n.stop();}},n);})),function(n){return a.apply(this,arguments);})),l.hooks.pickSync.tap(n.tag,function(n){return s.pick(c,n);});}},{key:"pick",value:function(n,r){var i,a=r.topmost,o=r.position,s=o.x,l=o.y,u=tn.set(tu,s,l,0),c=n.elementsFromBBox(u[0],u[1],u[0],u[1]),f=[],d=(0,e6.default)(c);try{for(d.s();!(i=d.n()).done;){var h=i.value,p=h.getWorldTransform();if(this.isHit(h,u,p,!1)){var m=(0,eG.findClosestClipPathTarget)(h);if(m){var g=m.parsedStyle.clipPath;if(this.isHit(g,u,g.getWorldTransform(),!0)){if(a)return r.picked=[h],r;f.push(h);}}else{if(a)return r.picked=[h],r;f.push(h);}}}}catch(n){d.e(n);}finally{d.f();}return r.picked=f,r;}}]);}();function tp(n,r,i){var a=n.parsedStyle,o=a.cx,s=a.cy,l=a.r,u=a.fill,c=a.stroke,f=a.lineWidth,d=a.increasedLineWidthForHitTesting,h=a.pointerEvents,p=((void 0===f?1:f)+(void 0===d?0:d))/2,m=(0,ta.distance)(void 0===o?0:o,void 0===s?0:s,r.x,r.y),g=(0,eG.isFillOrStrokeAffected)(void 0===h?"auto":h,u,c),v=(0,eq.default)(g,2),y=v[0],_=v[1];return y&&_||i?m<=l+p:y?m<=l:!!_&&m>=l-p&&m<=l+p;}function tm(n,r,i){var a,o,s,l,u,c,f=n.parsedStyle,d=f.cx,h=void 0===d?0:d,p=f.cy,m=void 0===p?0:p,g=f.rx,v=f.ry,y=f.fill,_=f.stroke,b=f.lineWidth,x=f.increasedLineWidthForHitTesting,E=f.pointerEvents,w=r.x,S=r.y,T=(0,eG.isFillOrStrokeAffected)(void 0===E?"auto":E,y,_),A=(0,eq.default)(T,2),C=A[0],O=A[1],M=((void 0===b?1:b)+(void 0===x?0:x))/2,R=(w-h)*(w-h),P=(S-m)*(S-m);return C&&O||i?1>=R/((a=g+M)*a)+P/((o=v+M)*o):C?1>=R/(g*g)+P/(v*v):!!O&&R/((s=g-M)*s)+P/((l=v-M)*l)>=1&&1>=R/((u=g+M)*u)+P/((c=v+M)*c);}function tg(n,r,i,a,o,s){return o>=n&&o<=n+i&&s>=r&&s<=r+a;}function tv(n,r,i,a,o,s,l,u){var c=(Math.atan2(u-r,l-n)+2*Math.PI)%(2*Math.PI),f={x:n+i*Math.cos(c),y:r+i*Math.sin(c)};return(0,ta.distance)(f.x,f.y,l,u)<=s/2;}function ty(n,r,i,a,o,s,l){var u=Math.min(n,i),c=Math.max(n,i),f=Math.min(r,a),d=Math.max(r,a),h=o/2;return s>=u-h&&s<=c+h&&l>=f-h&&l<=d+h&&(0,ta.linePointToLine)(n,r,i,a,s,l)<=o/2;}function t_(n,r,i,a,o){var s=n.length;if(s<2)return!1;for(var l=0;l<s-1;l++)if(ty(n[l][0],n[l][1],n[l+1][0],n[l+1][1],r,i,a))return!0;if(o){var u=n[0],c=n[s-1];if(ty(u[0],u[1],c[0],c[1],r,i,a))return!0;}return!1;}function tb(n){return 1e-6>Math.abs(n)?0:n<0?-1:1;}function tx(n,r,i){var a=!1,o=n.length;if(o<=2)return!1;for(var s=0;s<o;s++){var l,u=n[s],c=n[(s+1)%o];if(((l=[r,i])[0]-u[0])*(c[1]-u[1])==(c[0]-u[0])*(l[1]-u[1])&&Math.min(u[0],c[0])<=l[0]&&l[0]<=Math.max(u[0],c[0])&&Math.min(u[1],c[1])<=l[1]&&l[1]<=Math.max(u[1],c[1]))return!0;tb(u[1]-i)>0!=tb(c[1]-i)>0&&0>tb(r-(i-u[1])*(u[0]-c[0])/(u[1]-c[1])-u[0])&&(a=!a);}return a;}function tE(n,r,i){for(var a=!1,o=0;o<n.length&&!(a=tx(n[o],r,i));o++);return a;}function tw(n,r,i){var a=n.parsedStyle,o=a.x1,s=a.y1,l=a.x2,u=a.y2,c=a.lineWidth,f=void 0===c?1:c,d=a.increasedLineWidthForHitTesting,h=a.pointerEvents,p=a.fill,m=a.stroke,g=(0,eG.isFillOrStrokeAffected)(void 0===h?"auto":h,p,m);return(!!(0,eq.default)(g,2)[1]||!!i)&&!!f&&ty(o,s,l,u,f+(void 0===d?0:d),r.x,r.y);}function tS(n,r,i,a,o,s){var l=n.parsedStyle,u=l.lineWidth,c=l.increasedLineWidthForHitTesting,f=l.stroke,d=l.fill,h=l.d,p=l.pointerEvents,m=h.segments,g=h.hasArc,v=h.polylines,y=h.polygons,_=(0,eG.isFillOrStrokeAffected)(void 0===p?"auto":p,(null==y?void 0:y.length)&&d,f),b=(0,eq.default)(_,2),x=b[0],E=b[1],w=(0,eG.getOrCalculatePathTotalLength)(n),S=!1;return x||i?S=g?a(n,r):tE(y,r.x,r.y)||tE(v,r.x,r.y):((E||i)&&(S=function(n,r,i,a,o){for(var s=!1,l=r/2,u=0;u<n.length;u++){var c=n[u],f=c.currentPoint,d=c.params,h=c.prePoint,p=c.box;if(!p||tg(p.x-l,p.y-l,p.width+r,p.height+r,i,a))switch(c.command){case"L":case"Z":if(s=ty(h[0],h[1],f[0],f[1],r,i,a))return!0;break;case"Q":if(s=(0,ta.quadPointDistance)(h[0],h[1],d[1],d[2],d[3],d[4],i,a)<=r/2)return!0;break;case"C":if(s=(0,ta.cubicPointDistance)(h[0],h[1],d[1],d[2],d[3],d[4],d[5],d[6],i,a,o)<=r/2)return!0;break;case"A":c.cubicParams||(c.cubicParams=(0,to.arcToCubic)(h[0],h[1],d[1],d[2],d[3],d[4],d[5],d[6],d[7],void 0));for(var m=c.cubicParams,g=h,v=0;v<m.length;v+=6){var y=(0,ta.cubicPointDistance)(g[0],g[1],m[v],m[v+1],m[v+2],m[v+3],m[v+4],m[v+5],i,a,o);if(g=[m[v+4],m[v+5]],s=y<=r/2)return!0;}}}return s;}(m,(void 0===u?1:u)+(void 0===c?0:c),r.x,r.y,w)),S);}function tT(n,r,i){var a=n.parsedStyle,o=a.stroke,s=a.fill,l=a.lineWidth,u=a.increasedLineWidthForHitTesting,c=a.points,f=a.pointerEvents,d=(0,eG.isFillOrStrokeAffected)(void 0===f?"auto":f,s,o),h=(0,eq.default)(d,2),p=h[0],m=h[1],g=!1;return(m||i)&&(g=t_(c.points,(void 0===l?1:l)+(void 0===u?0:u),r.x,r.y,!0)),!g&&(p||i)&&(g=tx(c.points,r.x,r.y)),g;}function tA(n,r,i){var a=n.parsedStyle,o=a.lineWidth,s=void 0===o?1:o,l=a.increasedLineWidthForHitTesting,u=a.points,c=a.pointerEvents,f=a.fill,d=a.stroke,h=(0,eG.isFillOrStrokeAffected)(void 0===c?"auto":c,f,d);return(!!(0,eq.default)(h,2)[1]||!!i)&&!!s&&t_(u.points,s+(void 0===l?0:l),r.x,r.y,!1);}function tC(n,r,i,a,o){var s,l,u,c=n.parsedStyle,f=c.radius,d=c.fill,h=c.stroke,p=c.lineWidth,m=c.increasedLineWidthForHitTesting,g=c.x,v=void 0===g?0:g,y=c.y,_=void 0===y?0:y,b=c.width,x=c.height,E=c.pointerEvents,w=(0,eG.isFillOrStrokeAffected)(void 0===E?"auto":E,d,h),S=(0,eq.default)(w,2),T=S[0],A=S[1],C=f&&f.some(function(n){return 0!==n;}),O=(void 0===p?1:p)+(void 0===m?0:m);if(C){var M,R,P,k,I,L,N,D,F=!1;return(A||i)&&(M=f.map(function(n){return(0,eY.default)(n,0,Math.min(Math.abs(b)/2,Math.abs(x)/2));}),R=r.x,P=r.y,I=(k=(0,eq.default)(M,4))[0],L=k[1],N=k[2],D=k[3],F=ty(v+I,_,v+b-L,_,O,R,P)||ty(v+b,_+L,v+b,_+x-N,O,R,P)||ty(v+b-N,_+x,v+D,_+x,O,R,P)||ty(v,_+x-D,v,_+I,O,R,P)||tv(v+b-L,_+L,L,1.5*Math.PI,2*Math.PI,O,R,P)||tv(v+b-N,_+x-N,N,0,.5*Math.PI,O,R,P)||tv(v+D,_+x-D,D,.5*Math.PI,Math.PI,O,R,P)||tv(v+I,_+I,I,Math.PI,1.5*Math.PI,O,R,P)),!F&&(T||i)&&(F=a(n,r)),F;}var B=O/2;return T&&A||i?tg(v-B,_-B,b+B,x+B,r.x,r.y):T?tg(v,_,b,x,r.x,r.y):!!A&&(s=r.x,l=r.y,tg(v-(u=O/2),_-u,b,O,s,l)||tg(v+b-u,_-u,O,x,s,l)||tg(v+u,_+x-u,b,O,s,l)||tg(v-u,_+u,O,x,s,l));}function tO(n,r,i,a,o,s){var l=n.parsedStyle,u=l.pointerEvents,c=l.x,f=l.y,d=l.width,h=l.height;if("non-transparent-pixel"===(void 0===u?"auto":u)){var p=o.config.offscreenCanvas,m=s.offscreenCanvasCreator.getOrCreateCanvas(p),g=s.offscreenCanvasCreator.getOrCreateContext(p,{willReadFrequently:!0});return m.width=d,m.height=h,o.defaultStyleRendererFactory[eG.Shape.IMAGE].render(g,(0,tl.default)((0,tl.default)({},n.parsedStyle),{},{x:0,y:0}),n,void 0,void 0,void 0),g.getImageData(r.x-(void 0===c?0:c),r.y-(void 0===f?0:f),1,1).data.every(function(n){return 0!==n;});}return!0;}function tM(n,r,i,a){var o=n.getGeometryBounds();return r.x>=o.min[0]&&r.y>=o.min[1]&&r.x<=o.max[0]&&r.y<=o.max[1];}th.tag="CanvasPicker";var tR=function(n){function r(){var n;(0,eB.default)(this,r);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=(0,ez.default)(this,r,[].concat(a))).name="canvas-picker",n;}return(0,eV.default)(r,n),(0,eD.default)(r,[{key:"init",value:function(){var n,r=(n={},(0,eW.default)((0,eW.default)((0,eW.default)((0,eW.default)((0,eW.default)((0,eW.default)((0,eW.default)((0,eW.default)((0,eW.default)((0,eW.default)(n,eG.Shape.CIRCLE,tp),eG.Shape.ELLIPSE,tm),eG.Shape.RECT,tC),eG.Shape.LINE,tw),eG.Shape.POLYLINE,tA),eG.Shape.POLYGON,tT),eG.Shape.PATH,tS),eG.Shape.TEXT,tM),eG.Shape.GROUP,null),eG.Shape.IMAGE,tO),(0,eW.default)((0,eW.default)(n,eG.Shape.HTML,null),eG.Shape.MESH,null));this.context.pointInPathPickerFactory=r,this.addRenderingPlugin(new th);}},{key:"destroy",value:function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins();}}]);}(eG.AbstractRendererPlugin),tP={};i.e(tP,{Plugin:function(){return tR;}});var tk=i("f1020fa4"),tI=ew._(tk);function tL(n,r){if(!({}).hasOwnProperty.call(n,r))throw TypeError("attempted to use private field on non-instance");return n;}var tN=0,tD=i("83684c30"),tF=ew._(tD),tB=i("d0572d97"),tj=ew._(tB),tz=(0,eD.default)(function n(){(0,eB.default)(this,n),this.cacheStore=new Map;},[{key:"onRefAdded",value:function(n){}},{key:"has",value:function(n){return this.cacheStore.has(n);}},{key:"put",value:function(n,r,i){return!this.cacheStore.has(n)&&(this.cacheStore.set(n,{value:r,counter:new Set([i.entity])}),this.onRefAdded(i),!0);}},{key:"get",value:function(n,r){var i=this.cacheStore.get(n);return i?(i.counter.has(r.entity)||(i.counter.add(r.entity),this.onRefAdded(r)),i.value):null;}},{key:"update",value:function(n,r,i){var a=this.cacheStore.get(n);return!!a&&(a.value=(0,tl.default)((0,tl.default)({},a.value),r),a.counter.has(i.entity)||(a.counter.add(i.entity),this.onRefAdded(i)),!0);}},{key:"release",value:function(n,r){var i=this.cacheStore.get(n);return!!i&&(i.counter.delete(r.entity),i.counter.size<=0&&this.cacheStore.delete(n),!0);}},{key:"releaseRef",value:function(n){var r=this;Array.from(this.cacheStore.keys()).forEach(function(i){r.release(i,n);});}},{key:"getSize",value:function(){return this.cacheStore.size;}},{key:"clear",value:function(){this.cacheStore.clear();}}]),tU=[],tV=[],tG=function(){function n(){(0,eB.default)(this,n);}return(0,eD.default)(n,null,[{key:"stop",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.api;n.rafId&&(r.cancelAnimationFrame(n.rafId),n.rafId=null);}},{key:"executeTask",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.api;tU.length<=0&&tV.length<=0||(tV.forEach(function(n){return n();}),tV=tU.splice(0,n.TASK_NUM_PER_FRAME),n.rafId=r.requestAnimationFrame(function(){n.executeTask(r);}));}},{key:"sliceImage",value:function(r,i,a,o){for(var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:n.api,u=r.naturalWidth||r.width,c=r.naturalHeight||r.height,f=i-s,d=a-s,h=Math.ceil(u/f),p=Math.ceil(c/d),m={tileSize:[i,a],gridSize:[p,h],tiles:Array(p).fill(null).map(function(){return Array(h).fill(null);})},g=function(n){for(var s=function(s){tU.push(function(){var h=s*f,p=n*d,g=[Math.min(i,u-h),Math.min(a,c-p)],v=g[0],y=g[1],_=l.createCanvas();_.width=i,_.height=a,_.getContext("2d").drawImage(r,h,p,v,y,0,0,v,y),m.tiles[n][s]={x:h,y:p,tileX:s,tileY:n,data:_},o();});},p=0;p<h;p++)s(p);},v=0;v<p;v++)g(v);return n.stop(),n.executeTask(),m;}}]);}();tG.TASK_NUM_PER_FRAME=10;var tH=new tz;tH.onRefAdded=function(n){var r=this;n.addEventListener(eG.ElementEvent.DESTROY,function(){r.releaseRef(n);},{once:!0});};var tW=(0,eD.default)(function n(r,i){(0,eB.default)(this,n),this.gradientCache={},this.patternCache={},this.context=r,this.runtime=i;},[{key:"getImageSync",value:function(n,r,i){var a=(0,tj.default)(n)?n:n.src;if(tH.has(a)){var o=tH.get(a,r);if(o.img.complete)return null==i||i(o),o;}return this.getOrCreateImage(n,r).then(function(n){null==i||i(n);}).catch(function(n){console.error(n);}),null;}},{key:"getOrCreateImage",value:function(n,r){var i=this,a=(0,tj.default)(n)?n:n.src;if(!(0,tj.default)(n)&&!tH.has(a)){var o={img:n,size:[n.naturalWidth||n.width,n.naturalHeight||n.height],tileSize:tX(n)};tH.put(a,o,r);}if(tH.has(a)){var s=tH.get(a,r);return s.img.complete?Promise.resolve(s):new Promise(function(n,r){s.img.addEventListener("load",function(){s.size=[s.img.naturalWidth||s.img.width,s.img.naturalHeight||s.img.height],s.tileSize=tX(s.img),n(s);}),s.img.addEventListener("error",function(n){r(n);});});}return new Promise(function(n,o){var s=i.context.config.createImage();if(s){var l={img:s,size:[0,0],tileSize:tX(s)};tH.put(a,l,r),s.onload=function(){l.size=[s.naturalWidth||s.width,s.naturalHeight||s.height],l.tileSize=tX(l.img),n(l);},s.onerror=function(n){o(n);},s.crossOrigin="Anonymous",s.src=a;}});}},{key:"createDownSampledImage",value:(u=(0,te.default)((0,e7.default)().mark(function n(r,i){var a,o,s,l,u,c,f,d,h,p,m,g,v,y;return(0,e7.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getOrCreateImage(r,i);case 2:if(!(void 0!==(a=n.sent).downSamplingRate)){n.next=5;break;}return n.abrupt("return",a);case 5:if(u=void 0===(l=(s="boolean"==typeof(o=this.context.config.enableLargeImageOptimization)?{}:o).maxDownSampledImageSize)?2048:l,f=void 0===(c=s.downSamplingRateThreshold)?.5:c,d=this.runtime.globalThis.createImageBitmap,p=(h=(0,eq.default)(a.size,2))[0],m=h[1],g=a.img,v=Math.min((u+u)/(p+m),Math.max(.01,Math.min(f,.5))),y=(0,tl.default)((0,tl.default)({},a),{},{downSamplingRate:v}),tH.update(a.img.src,y,i),!d){n.next=25;break;}return n.prev=14,n.next=17,d(a.img,{resizeWidth:p*v,resizeHeight:m*v});case 17:g=n.sent,n.next=23;break;case 20:n.prev=20,n.t0=n.catch(14),v=1;case 23:n.next=26;break;case 25:v=1;case 26:return y=(0,tl.default)((0,tl.default)({},this.getImageSync(r,i)),{},{downSampled:g,downSamplingRate:v}),tH.update(a.img.src,y,i),n.abrupt("return",y);case 29:case"end":return n.stop();}},n,this,[[14,20]]);})),function(n,r){return u.apply(this,arguments);})},{key:"createImageTiles",value:(c=(0,te.default)((0,e7.default)().mark(function n(r,i,a,o){var s,l,u,c,f;return(0,e7.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getOrCreateImage(r,o);case 2:return s=n.sent,u=(l=o.ownerDocument.defaultView).requestAnimationFrame,c=l.cancelAnimationFrame,tG.api={requestAnimationFrame:u,cancelAnimationFrame:c,createCanvas:function(){return eG.OffscreenCanvasCreator.createCanvas();}},f=(0,tl.default)((0,tl.default)({},s),tG.sliceImage(s.img,s.tileSize[0],s.tileSize[0],a)),tH.update(s.img.src,f,o),n.abrupt("return",f);case 8:case"end":return n.stop();}},n,this);})),function(n,r,i,a){return c.apply(this,arguments);})},{key:"releaseImage",value:function(n,r){tH.release((0,tj.default)(n)?n:n.src,r);}},{key:"releaseImageRef",value:function(n){tH.releaseRef(n);}},{key:"getOrCreatePatternSync",value:function(n,r,i,a,o,s,l){var u,c,f=this.generatePatternKey(r);if(f&&this.patternCache[f])return this.patternCache[f];var d=r.image,h=r.repetition,p=r.transform,m=!1;if((0,tj.default)(d)){var g=this.getImageSync(d,n,l);u=null==g?void 0:g.img;}else a?(u=a,m=!0):u=d;var v=u&&i.createPattern(u,h);return v&&(c=p?(0,eG.parsedTransformToMat4)((0,eG.parseTransform)(p),new eG.DisplayObject({})):ti.identity(ti.create()),m&&ti.scale(c,c,[1/o,1/o,1]),v.setTransform({a:c[0],b:c[1],c:c[4],d:c[5],e:c[12]+s[0],f:c[13]+s[1]})),f&&v&&(this.patternCache[f]=v),v;}},{key:"getOrCreateGradient",value:function(n,r){var i=this.generateGradientKey(n),a=n.type,o=n.steps,s=n.min,l=n.width,u=n.height,c=n.angle,f=n.cx,d=n.cy,h=n.size;if(this.gradientCache[i])return this.gradientCache[i];var p=null;if(a===eG.GradientType.LinearGradient){var m=(0,eG.computeLinearGradient)(s,l,u,c),g=m.x1,v=m.y1,y=m.x2,_=m.y2;p=r.createLinearGradient(g,v,y,_);}else if(a===eG.GradientType.RadialGradient){var b=(0,eG.computeRadialGradient)(s,l,u,f,d,h),x=b.x,E=b.y,w=b.r;p=r.createRadialGradient(x,E,0,x,E,w);}return p&&(o.forEach(function(n){var r,i=n.offset,a=n.color;i.unit===eG.UnitType.kPercentage&&(null===(r=p)||void 0===r||r.addColorStop(i.value/100,a.toString()));}),this.gradientCache[i]=p),this.gradientCache[i];}},{key:"generateGradientKey",value:function(n){var r=n.type,i=n.min,a=n.width,o=n.height,s=n.steps,l=n.angle,u=n.cx,c=n.cy,f=n.size;return"gradient-".concat(r,"-").concat((null==l?void 0:l.toString())||0,"-").concat((null==u?void 0:u.toString())||0,"-").concat((null==c?void 0:c.toString())||0,"-").concat((null==f?void 0:f.toString())||0,"-").concat(i[0],"-").concat(i[1],"-").concat(a,"-").concat(o,"-").concat(s.map(function(n){var r=n.offset,i=n.color;return"".concat(r).concat(i);}).join("-"));}},{key:"generatePatternKey",value:function(n){var r=n.image,i=n.repetition;return(0,tj.default)(r)?"pattern-".concat(r,"-").concat(i):"rect"===r.nodeName?"pattern-".concat(r.entity,"-").concat(i):void 0;}}]);function tX(n){if(!n.complete)return[0,0];var r=n.naturalWidth||n.width,i=n.naturalHeight||n.height,a=256;return[256,512].forEach(function(n){Math.ceil(i/n)*Math.ceil(r/n)<1e3&&(a=n);}),[a,a];}tW.isSupportTile=!!eG.OffscreenCanvasCreator.createCanvas();var tq=function(){function n(){(0,eB.default)(this,n);}return(0,eD.default)(n,[{key:"apply",value:function(r){var i=r.renderingService,a=r.renderingContext,o=r.imagePool,s=a.root.ownerDocument.defaultView,l=function(n,r,i){var a=n.parsedStyle,o=a.width,s=a.height;o&&!s?n.setAttribute("height",i/r*o):!o&&s&&n.setAttribute("width",r/i*s);},u=function(n){var r=n.target,a=r.nodeName,s=r.attributes;if(a===eG.Shape.IMAGE){var u=s.src,c=s.keepAspectRatio;o.getImageSync(u,r,function(n){var a=n.img,o=a.width,s=a.height;c&&l(r,o,s),r.renderable.dirty=!0,i.dirtify();});}},c=function(n){var r=n.target,a=n.attrName,s=n.prevValue,u=n.newValue;r.nodeName===eG.Shape.IMAGE&&"src"===a&&(s!==u&&o.releaseImage(s,r),(0,tj.default)(u)&&o.getOrCreateImage(u,r).then(function(n){var a=n.img,o=a.width,s=a.height;r.attributes.keepAspectRatio&&l(r,o,s),r.renderable.dirty=!0,i.dirtify();}).catch(function(){}));};i.hooks.init.tap(n.tag,function(){s.addEventListener(eG.ElementEvent.MOUNTED,u),s.addEventListener(eG.ElementEvent.ATTR_MODIFIED,c);}),i.hooks.destroy.tap(n.tag,function(){s.removeEventListener(eG.ElementEvent.MOUNTED,u),s.removeEventListener(eG.ElementEvent.ATTR_MODIFIED,c);});}}]);}();tq.tag="LoadImage";var t$=function(n){function r(){var n;(0,eB.default)(this,r);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=(0,ez.default)(this,r,[].concat(a))).name="image-loader",n;}return(0,eV.default)(r,n),(0,eD.default)(r,[{key:"init",value:function(n){this.context.imagePool=new tW(this.context,n),this.addRenderingPlugin(new tq);}},{key:"destroy",value:function(){this.removeAllRenderingPlugins();}}]);}(eG.AbstractRendererPlugin),tY={};i.e(tY,{ImagePool:function(){return tW;},Plugin:function(){return t$;}});var tZ="__private_"+tN+++"_renderState",tK=function(){function n(r){(0,eB.default)(this,n),this.removedRBushNodeAABBs=[],this.renderQueue=[],Object.defineProperty(this,tZ,{writable:!0,value:{restoreStack:[],prevObject:null,currentContext:new Map}}),this.clearFullScreenLastFrame=!1,this.clearFullScreen=!1,this.vpMatrix=ti.create(),this.dprMatrix=ti.create(),this.tmpMat4=ti.create(),this.vec3a=tn.create(),this.vec3b=tn.create(),this.vec3c=tn.create(),this.vec3d=tn.create(),this.canvasRendererPluginOptions=r;}return(0,eD.default)(n,[{key:"apply",value:function(r,i){var a=this;this.context=r;var o=this.context,s=o.config,l=o.camera,u=o.renderingService,c=o.renderingContext,f=o.rBushRoot,d=o.pathGeneratorFactory,h=s.renderer.getConfig().enableRenderingOptimization;s.renderer.getConfig().enableDirtyCheck=!1,s.renderer.getConfig().enableDirtyRectangleRendering=!1,this.rBush=f,this.pathGeneratorFactory=d;var p=r.contextService,m=c.root.ownerDocument.defaultView,g=function(n){var r=n.target.rBushNode;r.aabb&&a.removedRBushNodeAABBs.push(r.aabb);},v=function(n){var r=n.target.rBushNode;r.aabb&&a.removedRBushNodeAABBs.push(r.aabb);};u.hooks.init.tap(n.tag,function(){m.addEventListener(eG.ElementEvent.UNMOUNTED,g),m.addEventListener(eG.ElementEvent.CULLED,v);var n=p.getDPR(),r=s.width,i=s.height,o=p.getContext();a.clearRect(o,0,0,r*n,i*n,s.background);}),u.hooks.destroy.tap(n.tag,function(){m.removeEventListener(eG.ElementEvent.UNMOUNTED,g),m.removeEventListener(eG.ElementEvent.CULLED,v),a.renderQueue=[],a.removedRBushNodeAABBs=[],tL(a,tZ)[tZ]={restoreStack:[],prevObject:null,currentContext:null};}),u.hooks.beginFrame.tap(n.tag,function(){var n,r=p.getContext(),i=p.getDPR(),o=s.width,l=s.height,c=a.canvasRendererPluginOptions,f=c.dirtyObjectNumThreshold,d=c.dirtyObjectRatioThreshold,h=u.getStats(),g=h.total,v=h.rendered;a.clearFullScreen=a.clearFullScreenLastFrame||!(null!==(n=m.context.renderingPlugins[1])&&void 0!==n&&n.isFirstTimeRenderingFinished)||u.disableDirtyRectangleRendering()||v>f&&v/g>d,r&&("function"==typeof r.resetTransform?r.resetTransform():r.setTransform(1,0,0,1,0,0),a.clearFullScreen&&a.clearRect(r,0,0,o*i,l*i,s.background));});var y=function(n,r){for(var o=[n];o.length>0;){var s,l=o.pop();l.isVisible()&&!l.isCulled()&&(h?a.renderDisplayObjectOptimized(l,r,a.context,tL(a,tZ)[tZ],i):a.renderDisplayObject(l,r,a.context,tL(a,tZ)[tZ],i));for(var u=(null===(s=l.sortable)||void 0===s||null===(s=s.sorted)||void 0===s?void 0:s.length)>0?l.sortable.sorted:l.childNodes,c=u.length-1;c>=0;c--)o.push(u[c]);}};u.hooks.endFrame.tap(n.tag,function(){if(0===c.root.childNodes.length){a.clearFullScreenLastFrame=!0;return;}h=s.renderer.getConfig().enableRenderingOptimization,tL(a,tZ)[tZ]={restoreStack:[],prevObject:null,currentContext:tL(a,tZ)[tZ].currentContext},tL(a,tZ)[tZ].currentContext.clear(),a.clearFullScreenLastFrame=!1;var n=p.getContext(),r=p.getDPR();if(ti.fromScaling(a.dprMatrix,[r,r,1]),ti.multiply(a.vpMatrix,a.dprMatrix,l.getOrthoMatrix()),a.clearFullScreen)h?(n.save(),y(c.root,n),n.restore()):y(c.root,n),a.removedRBushNodeAABBs=[];else{var o=a.safeMergeAABB.apply(a,[a.mergeDirtyAABBs(a.renderQueue)].concat((0,tI.default)(a.removedRBushNodeAABBs.map(function(n){var r=n.minX,i=n.minY,a=n.maxX,o=n.maxY,s=new eG.AABB;return s.setMinMax([r,i,0],[a,o,0]),s;}))));if(a.removedRBushNodeAABBs=[],eG.AABB.isEmpty(o)){a.renderQueue=[];return;}var u=a.convertAABB2Rect(o),f=u.x,d=u.y,g=u.width,v=u.height,_=tn.transformMat4(a.vec3a,[f,d,0],a.vpMatrix),b=tn.transformMat4(a.vec3b,[f+g,d,0],a.vpMatrix),x=tn.transformMat4(a.vec3c,[f,d+v,0],a.vpMatrix),E=tn.transformMat4(a.vec3d,[f+g,d+v,0],a.vpMatrix),w=Math.min(_[0],b[0],E[0],x[0]),S=Math.min(_[1],b[1],E[1],x[1]),T=Math.max(_[0],b[0],E[0],x[0]),A=Math.max(_[1],b[1],E[1],x[1]),C=Math.floor(w),O=Math.floor(S),M=Math.ceil(T-w),R=Math.ceil(A-S);n.save(),a.clearRect(n,C,O,M,R,s.background),n.beginPath(),n.rect(C,O,M,R),n.clip(),n.setTransform(a.vpMatrix[0],a.vpMatrix[1],a.vpMatrix[4],a.vpMatrix[5],a.vpMatrix[12],a.vpMatrix[13]),s.renderer.getConfig().enableDirtyRectangleRenderingDebug&&m.dispatchEvent(new eG.CustomEvent(eG.CanvasEvent.DIRTY_RECTANGLE,{dirtyRect:{x:C,y:O,width:M,height:R}})),a.searchDirtyObjects(o).sort(function(n,r){return n.sortable.renderOrder-r.sortable.renderOrder;}).forEach(function(r){r&&r.isVisible()&&!r.isCulled()&&a.renderDisplayObject(r,n,a.context,tL(a,tZ)[tZ],i);}),n.restore(),a.renderQueue.forEach(function(n){a.saveDirtyAABB(n);}),a.renderQueue=[];}tL(a,tZ)[tZ].restoreStack.forEach(function(){n.restore();}),tL(a,tZ)[tZ].restoreStack=[];}),u.hooks.render.tap(n.tag,function(n){a.clearFullScreen||a.renderQueue.push(n);});}},{key:"clearRect",value:function(n,r,i,a,o,s){n.clearRect(r,i,a,o),s&&(n.fillStyle=s,n.fillRect(r,i,a,o));}},{key:"renderDisplayObjectOptimized",value:function(n,r,i,a,o){var s=n.nodeName,l=!1,u=this.context.styleRendererFactory[s],c=this.pathGeneratorFactory[s],f=n.parsedStyle.clipPath;if(f){a.prevObject&&ti.exactEquals(f.getWorldTransform(),a.prevObject.getWorldTransform())||(this.applyWorldTransform(r,f),a.prevObject=null);var d=this.pathGeneratorFactory[f.nodeName];d&&(r.save(),l=!0,r.beginPath(),d(r,f.parsedStyle),r.closePath(),r.clip());}if(u){a.prevObject&&ti.exactEquals(n.getWorldTransform(),a.prevObject.getWorldTransform())||this.applyWorldTransform(r,n);var h=!a.prevObject;if(!h){var p=a.prevObject.nodeName;h=s===eG.Shape.TEXT?p!==eG.Shape.TEXT:s===eG.Shape.IMAGE?p!==eG.Shape.IMAGE:p===eG.Shape.TEXT||p===eG.Shape.IMAGE;}u.applyStyleToContext(r,n,h,a),a.prevObject=n;}c&&(r.beginPath(),c(r,n.parsedStyle),s!==eG.Shape.LINE&&s!==eG.Shape.PATH&&s!==eG.Shape.POLYLINE&&r.closePath()),u&&u.drawToContext(r,n,tL(this,tZ)[tZ],this,o),l&&r.restore(),n.renderable.dirty=!1;}},{key:"renderDisplayObject",value:function(n,r,i,a,o){var s=n.nodeName,l=a.restoreStack[a.restoreStack.length-1];l&&!(n.compareDocumentPosition(l)&eG.Node.DOCUMENT_POSITION_CONTAINS)&&(r.restore(),a.restoreStack.pop());var u=this.context.styleRendererFactory[s],c=this.pathGeneratorFactory[s],f=n.parsedStyle.clipPath;if(f){this.applyWorldTransform(r,f);var d=this.pathGeneratorFactory[f.nodeName];d&&(r.save(),a.restoreStack.push(n),r.beginPath(),d(r,f.parsedStyle),r.closePath(),r.clip());}u&&(this.applyWorldTransform(r,n),r.save(),this.applyAttributesToContext(r,n)),c&&(r.beginPath(),c(r,n.parsedStyle),s!==eG.Shape.LINE&&s!==eG.Shape.PATH&&s!==eG.Shape.POLYLINE&&r.closePath()),u&&(u.render(r,n.parsedStyle,n,i,this,o),r.restore()),n.renderable.dirty=!1;}},{key:"applyAttributesToContext",value:function(n,r){var i=r.parsedStyle,a=i.stroke,o=i.fill,s=i.opacity,l=i.lineDash,u=i.lineDashOffset;l&&n.setLineDash(l),(0,tF.default)(u)||(n.lineDashOffset=u),(0,tF.default)(s)||(n.globalAlpha*=s),(0,tF.default)(a)||Array.isArray(a)||a.isNone||(n.strokeStyle=r.attributes.stroke),(0,tF.default)(o)||Array.isArray(o)||o.isNone||(n.fillStyle=r.attributes.fill);}},{key:"convertAABB2Rect",value:function(n){var r=n.getMin(),i=n.getMax(),a=Math.floor(r[0]),o=Math.floor(r[1]);return{x:a,y:o,width:Math.ceil(i[0])-a,height:Math.ceil(i[1])-o};}},{key:"mergeDirtyAABBs",value:function(n){var r=new eG.AABB;return n.forEach(function(n){var i=n.getRenderBounds();r.add(i);var a=n.renderable.dirtyRenderBounds;a&&r.add(a);}),r;}},{key:"searchDirtyObjects",value:function(n){var r=n.getMin(),i=(0,eq.default)(r,2),a=i[0],o=i[1],s=n.getMax(),l=(0,eq.default)(s,2),u=l[0],c=l[1];return this.rBush.search({minX:a,minY:o,maxX:u,maxY:c}).map(function(n){return n.displayObject;});}},{key:"saveDirtyAABB",value:function(n){var r=n.renderable;r.dirtyRenderBounds||(r.dirtyRenderBounds=new eG.AABB);var i=n.getRenderBounds();i&&r.dirtyRenderBounds.update(i.center,i.halfExtents);}},{key:"applyWorldTransform",value:function(n,r,i){i?(ti.copy(this.tmpMat4,r.getLocalTransform()),ti.multiply(this.tmpMat4,i,this.tmpMat4)):ti.copy(this.tmpMat4,r.getWorldTransform()),ti.multiply(this.tmpMat4,this.vpMatrix,this.tmpMat4),n.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13]);}},{key:"safeMergeAABB",value:function(){for(var n=new eG.AABB,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return i.forEach(function(r){n.add(r);}),n;}}]);}();function tQ(n,r,i,a,o,s,l){if("rect"===n.image.nodeName){var u,c,f=n.image.parsedStyle,d=f.width,h=f.height;c=a.contextService.getDPR();var p=a.config.offscreenCanvas;(u=s.offscreenCanvasCreator.getOrCreateCanvas(p)).width=d*c,u.height=h*c;var m=s.offscreenCanvasCreator.getOrCreateContext(p),g={restoreStack:[],prevObject:null,currentContext:new Map};n.image.forEach(function(n){o.renderDisplayObject(n,m,a,g,s);}),g.restoreStack.forEach(function(){m.restore();});}return l.getOrCreatePatternSync(r,n,i,u,c,r.getGeometryBounds().min,function(){r.renderable.dirty=!0,a.renderingService.dirtify();});}function tJ(n,r,i,a){var o;if(n.type===eG.GradientType.LinearGradient||n.type===eG.GradientType.RadialGradient){var s=r.getGeometryBounds(),l=s&&2*s.halfExtents[0]||1,u=s&&2*s.halfExtents[1]||1,c=s&&s.min||[0,0];o=a.getOrCreateGradient((0,tl.default)((0,tl.default)({type:n.type},n.value),{},{min:c,width:l,height:u}),i);}return o;}tK.tag="CanvasRenderer";var t0=["shadowBlur","shadowOffsetX","shadowOffsetY"],t1=["lineCap","lineJoin","miterLimit"],t2={globalAlpha:1,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",filter:"none",globalCompositeOperation:"source-over",strokeStyle:"#000",strokeOpacity:1,lineWidth:1,lineDash:[],lineDashOffset:0,lineCap:"butt",lineJoin:"miter",miterLimit:10,fillStyle:"#000",fillOpacity:1},t3={};function t4(n,r,i,a){var o=a.has(r)?a.get(r):t2[r];return o!==i&&("lineDash"===r?n.setLineDash(i):n[r]=i,a.set(r,i)),o;}var t5=function(n){function r(){return(0,eB.default)(this,r),(0,ez.default)(this,r,arguments);}return(0,eV.default)(r,n),(0,eD.default)(r,[{key:"render",value:function(n,r,i,a,o,s){var l=r.fill,u=r.fillRule,c=r.opacity,f=void 0===c?1:c,d=r.fillOpacity,h=r.stroke,p=r.strokeOpacity,m=r.lineWidth,g=void 0===m?1:m,v=r.lineCap,y=r.lineJoin,_=r.shadowType,b=r.shadowColor,x=r.shadowBlur,E=r.filter,w=r.miterLimit,S=l&&!l.isNone,T=h&&!h.isNone&&g>0,A=(null==l?void 0:l.alpha)===0,C=!!(E&&E.length),O=!(0,tF.default)(b)&&x>0,M=i.nodeName,R="inner"===_,P=T&&O&&(M===eG.Shape.PATH||M===eG.Shape.LINE||M===eG.Shape.POLYLINE||A||R);S&&(n.globalAlpha=f*(void 0===d?1:d),P||t6(i,n,O),t8(n,i,l,u,a,o,s,this.imagePool),P||this.clearShadowAndFilter(n,C,O)),T&&(n.globalAlpha=f*(void 0===p?1:p),n.lineWidth=g,(0,tF.default)(w)||(n.miterLimit=w),(0,tF.default)(v)||(n.lineCap=v),(0,tF.default)(y)||(n.lineJoin=y),P&&(R&&(n.globalCompositeOperation="source-atop"),t6(i,n,!0),R&&(t7(n,i,h,a,o,s,this.imagePool),n.globalCompositeOperation=t2.globalCompositeOperation,this.clearShadowAndFilter(n,C,!0))),t7(n,i,h,a,o,s,this.imagePool));}},{key:"clearShadowAndFilter",value:function(n,r,i){if(i&&(n.shadowColor="transparent",n.shadowBlur=0),r){var a=n.filter;!(0,tF.default)(a)&&a.indexOf("drop-shadow")>-1&&(n.filter=a.replace(/drop-shadow\([^)]*\)/,"").trim()||"none");}}}]);}((0,eD.default)(function n(r){(0,eB.default)(this,n),this.imagePool=r;},[{key:"applyAttributesToContext",value:function(n,r){}},{key:"render",value:function(n,r,i,a,o,s){}},{key:"applyCommonStyleToContext",value:function(n,r,i,a){var o=i?t3:a.prevObject.parsedStyle,s=r.parsedStyle;(i||s.opacity!==o.opacity)&&t4(n,"globalAlpha",(0,tF.default)(s.opacity)?t2.globalAlpha:s.opacity,a.currentContext),(i||s.blend!==o.blend)&&t4(n,"globalCompositeOperation",(0,tF.default)(s.blend)?t2.globalCompositeOperation:s.blend,a.currentContext);}},{key:"applyStrokeFillStyleToContext",value:function(n,r,i,a){var o=i?t3:a.prevObject.parsedStyle,s=r.parsedStyle,l=s.lineWidth,u=void 0===l?t2.lineWidth:l,c=s.fill&&!s.fill.isNone;if(s.stroke&&!s.stroke.isNone&&u>0){(i||r.attributes.stroke!==a.prevObject.attributes.stroke)&&t4(n,"strokeStyle",(0,tF.default)(s.stroke)||Array.isArray(s.stroke)||s.stroke.isNone?t2.strokeStyle:r.attributes.stroke,a.currentContext),(i||s.lineWidth!==o.lineWidth)&&t4(n,"lineWidth",(0,tF.default)(s.lineWidth)?t2.lineWidth:s.lineWidth,a.currentContext),(i||s.lineDash!==o.lineDash)&&t4(n,"lineDash",s.lineDash||t2.lineDash,a.currentContext),(i||s.lineDashOffset!==o.lineDashOffset)&&t4(n,"lineDashOffset",(0,tF.default)(s.lineDashOffset)?t2.lineDashOffset:s.lineDashOffset,a.currentContext);for(var f=0;f<t1.length;f++){var d=t1[f];(i||s[d]!==o[d])&&t4(n,d,(0,tF.default)(s[d])?t2[d]:s[d],a.currentContext);}}c&&(i||r.attributes.fill!==a.prevObject.attributes.fill)&&t4(n,"fillStyle",(0,tF.default)(s.fill)||Array.isArray(s.fill)||s.fill.isNone?t2.fillStyle:r.attributes.fill,a.currentContext);}},{key:"applyStyleToContext",value:function(n,r,i,a){var o=r.nodeName;this.applyCommonStyleToContext(n,r,i,a),o===eG.Shape.IMAGE||this.applyStrokeFillStyleToContext(n,r,i,a);}},{key:"applyShadowAndFilterStyleToContext",value:function(n,r,i,a){var o=r.parsedStyle;if(i){t4(n,"shadowColor",o.shadowColor.toString(),a.currentContext);for(var s=0;s<t0.length;s++){var l=t0[s];t4(n,l,o[l]||t2[l],a.currentContext);}}o.filter&&o.filter.length&&t4(n,"filter",r.attributes.filter,a.currentContext);}},{key:"clearShadowAndFilterStyleForContext",value:function(n,r,i,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(r){t4(n,"shadowColor",t2.shadowColor,a.currentContext);for(var s=0;s<t0.length;s++){var l=t0[s];t4(n,l,t2[l],a.currentContext);}}if(i){if(r&&o){var u=n.filter;!(0,tF.default)(u)&&u.indexOf("drop-shadow")>-1&&t4(n,"filter",u.replace(/drop-shadow\([^)]*\)/,"").trim()||t2.filter,a.currentContext);}else t4(n,"filter",t2.filter,a.currentContext);}}},{key:"fillToContext",value:function(n,r,i,a,o){var s=this,l=r.parsedStyle,u=l.fill,c=l.fillRule,f=null;if(Array.isArray(u)&&u.length>0)u.forEach(function(a){var o=t4(n,"fillStyle",tJ(a,r,n,s.imagePool),i.currentContext);f=null!=f?f:o,c?n.fill(c):n.fill();});else{if((0,eG.isPattern)(u)){var d=tQ(u,r,n,r.ownerDocument.defaultView.context,a,o,this.imagePool);d&&(n.fillStyle=d,f=!0);}c?n.fill(c):n.fill();}null!==f&&t4(n,"fillStyle",f,i.currentContext);}},{key:"strokeToContext",value:function(n,r,i,a,o){var s=this,l=r.parsedStyle.stroke,u=null;if(Array.isArray(l)&&l.length>0)l.forEach(function(a){var o=t4(n,"strokeStyle",tJ(a,r,n,s.imagePool),i.currentContext);u=null!=u?u:o,n.stroke();});else{if((0,eG.isPattern)(l)){var c=tQ(l,r,n,r.ownerDocument.defaultView.context,a,o,this.imagePool);if(c){var f=t4(n,"strokeStyle",c,i.currentContext);u=null!=u?u:f;}}n.stroke();}null!==u&&t4(n,"strokeStyle",u,i.currentContext);}},{key:"drawToContext",value:function(n,r,i,a,o){var s,l=r.nodeName,u=r.parsedStyle,c=u.opacity,f=void 0===c?t2.globalAlpha:c,d=u.fillOpacity,h=void 0===d?t2.fillOpacity:d,p=u.strokeOpacity,m=void 0===p?t2.strokeOpacity:p,g=u.lineWidth,v=void 0===g?t2.lineWidth:g,y=u.fill&&!u.fill.isNone,_=u.stroke&&!u.stroke.isNone&&v>0;if(y||_){var b=!(0,tF.default)(u.shadowColor)&&u.shadowBlur>0,x="inner"===u.shadowType,E=(null===(s=u.fill)||void 0===s?void 0:s.alpha)===0,w=!!(u.filter&&u.filter.length),S=b&&_&&(l===eG.Shape.PATH||l===eG.Shape.LINE||l===eG.Shape.POLYLINE||E||x),T=null;if(y&&(S||this.applyShadowAndFilterStyleToContext(n,r,b,i),T=t4(n,"globalAlpha",f*h,i.currentContext),this.fillToContext(n,r,i,a,o),S||this.clearShadowAndFilterStyleForContext(n,b,w,i)),_){var A=!1,C=t4(n,"globalAlpha",f*m,i.currentContext);if(T=y?T:C,S&&(this.applyShadowAndFilterStyleToContext(n,r,b,i),A=!0,x)){var O=n.globalCompositeOperation;n.globalCompositeOperation="source-atop",this.strokeToContext(n,r,i,a,o),n.globalCompositeOperation=O,this.clearShadowAndFilterStyleForContext(n,b,w,i,!0);}this.strokeToContext(n,r,i,a,o),A&&this.clearShadowAndFilterStyleForContext(n,b,w,i);}null!==T&&t4(n,"globalAlpha",T,i.currentContext);}}}]));function t6(n,r,i){var a=n.parsedStyle,o=a.filter,s=a.shadowColor,l=a.shadowBlur,u=a.shadowOffsetX,c=a.shadowOffsetY;o&&o.length&&(r.filter=n.style.filter),i&&(r.shadowColor=s.toString(),r.shadowBlur=l||0,r.shadowOffsetX=u||0,r.shadowOffsetY=c||0);}function t8(n,r,i,a,o,s,l,u){var c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];Array.isArray(i)?i.forEach(function(i){n.fillStyle=tJ(i,r,n,u),c||(a?n.fill(a):n.fill());}):((0,eG.isPattern)(i)&&(n.fillStyle=tQ(i,r,n,o,s,l,u)),c||(a?n.fill(a):n.fill()));}function t7(n,r,i,a,o,s,l){var u=arguments.length>7&&void 0!==arguments[7]&&arguments[7];Array.isArray(i)?i.forEach(function(i){n.strokeStyle=tJ(i,r,n,l),u||n.stroke();}):((0,eG.isPattern)(i)&&(n.strokeStyle=tQ(i,r,n,a,o,s,l)),u||n.stroke());}var t9=function(n){function r(){return(0,eB.default)(this,r),(0,ez.default)(this,r,arguments);}return(0,eV.default)(r,n),(0,eD.default)(r,[{key:"renderDownSampled",value:function(n,r,i,a){var o=a.src,s=a.imageCache;if(!s.downSampled){this.imagePool.createDownSampledImage(o,i).then(function(){i.ownerDocument&&(i.renderable.dirty=!0,i.ownerDocument.defaultView.context.renderingService.dirtify());}).catch(function(n){console.error(n);});return;}n.drawImage(s.downSampled,Math.floor(a.drawRect[0]),Math.floor(a.drawRect[1]),Math.ceil(a.drawRect[2]),Math.ceil(a.drawRect[3]));}},{key:"renderTile",value:function(n,r,i,a){var o=a.src,s=a.imageCache,l=a.imageRect,u=a.drawRect,c=s.size,f=n.getTransform(),d=f.a,h=f.b,p=f.c,m=f.d,g=f.e,v=f.f;if(n.resetTransform(),!(null!=s&&s.gridSize)){this.imagePool.createImageTiles(o,[],function(){i.ownerDocument&&(i.renderable.dirty=!0,i.ownerDocument.defaultView.context.renderingService.dirtify());},i).catch(function(n){console.error(n);});return;}for(var y=[c[0]/l[2],c[1]/l[3]],_=[s.tileSize[0]/y[0],s.tileSize[1]/y[1]],b=[Math.floor((u[0]-l[0])/_[0]),Math.ceil((u[0]+u[2]-l[0])/_[0])],x=b[0],E=b[1],w=[Math.floor((u[1]-l[1])/_[1]),Math.ceil((u[1]+u[3]-l[1])/_[1])],S=w[0],T=w[1],A=S;A<=T;A++)for(var C=x;C<=E;C++){var O=s.tiles[A][C];if(O){var M=[Math.floor(l[0]+O.tileX*_[0]),Math.floor(l[1]+O.tileY*_[1]),Math.ceil(_[0]),Math.ceil(_[1])];n.drawImage(O.data,M[0],M[1],M[2],M[3]);}}n.setTransform(d,h,p,m,g,v);}},{key:"render",value:function(n,i,a){var o=i.x,s=void 0===o?0:o,l=i.y,u=void 0===l?0:l,c=i.width,f=i.height,d=i.src,h=i.shadowColor,p=i.shadowBlur,m=this.imagePool.getImageSync(d,a),g=null==m?void 0:m.img,v=c,y=f;if(g){v||(v=g.width),y||(y=g.height),t6(a,n,!(0,tF.default)(h)&&p>0);try{var _,b,x,E,w,S,T,A,C,O,M,R,P,k,I,L,N,D,F,B,j=a.ownerDocument.defaultView.getContextService().getDomElement(),z=j.width,U=j.height,V=n.getTransform(),G=V.a,H=V.b,W=V.c,X=V.d,q=V.e,$=V.f,Y=ti.fromValues(G,W,0,0,H,X,0,0,0,0,1,0,q,$,0,1),Z=(_=[s,u,v,y],b=tn.transformMat4(tn.create(),[_[0],_[1],0],Y),x=tn.transformMat4(tn.create(),[_[0]+_[2],_[1],0],Y),E=tn.transformMat4(tn.create(),[_[0],_[1]+_[3],0],Y),w=tn.transformMat4(tn.create(),[_[0]+_[2],_[1]+_[3],0],Y),[Math.min(b[0],x[0],E[0],w[0]),Math.min(b[1],x[1],E[1],w[1]),Math.max(b[0],x[0],E[0],w[0])-Math.min(b[0],x[0],E[0],w[0]),Math.max(b[1],x[1],E[1],w[1])-Math.min(b[1],x[1],E[1],w[1])]),K=(S=[0,0,z,U],A=(T=(0,eq.default)(S,4))[0],C=T[1],O=T[2],M=T[3],P=(R=(0,eq.default)(Z,4))[0],k=R[1],I=R[2],L=R[3],N=Math.max(A,P),D=Math.max(C,k),F=Math.min(A+O,P+I),B=Math.min(C+M,k+L),F<=N||B<=D?null:[N,D,F-N,B-D]);if(!K)return;if(!a.ownerDocument.defaultView.getConfig().enableLargeImageOptimization){r.renderFull(n,i,a,{image:g,drawRect:[s,u,v,y]});return;}if(Z[2]/m.size[0]<(m.downSamplingRate||.5)){this.renderDownSampled(n,i,a,{src:d,imageCache:m,drawRect:[s,u,v,y]});return;}if(!tW.isSupportTile){r.renderFull(n,i,a,{image:g,drawRect:[s,u,v,y]});return;}this.renderTile(n,i,a,{src:d,imageCache:m,imageRect:Z,drawRect:K});}catch(n){}}}},{key:"drawToContext",value:function(n,r,i,a,o){this.render(n,r.parsedStyle,r);}}],[{key:"renderFull",value:function(n,r,i,a){n.drawImage(a.image,Math.floor(a.drawRect[0]),Math.floor(a.drawRect[1]),Math.ceil(a.drawRect[2]),Math.ceil(a.drawRect[3]));}}]);}(t5),ne=function(n){function r(){return(0,eB.default)(this,r),(0,ez.default)(this,r,arguments);}return(0,eV.default)(r,n),(0,eD.default)(r,[{key:"render",value:function(n,r,i,a,o,s){i.getBounds();var l=r.lineWidth,u=void 0===l?1:l,c=r.textAlign,f=void 0===c?"start":c,d=r.textBaseline,h=void 0===d?"alphabetic":d,p=r.lineJoin,m=r.miterLimit,g=void 0===m?10:m,v=r.letterSpacing,y=void 0===v?0:v,_=r.stroke,b=r.fill,x=r.fillRule,E=r.fillOpacity,w=void 0===E?1:E,S=r.strokeOpacity,T=void 0===S?1:S,A=r.opacity,C=void 0===A?1:A,O=r.metrics,M=r.x,R=r.y,P=r.dx,k=r.dy,I=r.shadowColor,L=r.shadowBlur,N=O.font,D=O.lines,F=O.height,B=O.lineHeight,j=O.lineMetrics;n.font=N,n.lineWidth=u,n.textAlign="middle"===f?"center":f;var z=h;"alphabetic"===z&&(z="bottom"),n.lineJoin=void 0===p?"miter":p,(0,tF.default)(g)||(n.miterLimit=g);var U=void 0===R?0:R;"middle"===h?U+=-F/2-B/2:"bottom"===h||"alphabetic"===h||"ideographic"===h?U+=-F:("top"===h||"hanging"===h)&&(U+=-B);var V=(void 0===M?0:M)+(P||0);U+=k||0,1===D.length&&("bottom"===z?(z="middle",U-=.5*F):"top"===z&&(z="middle",U+=.5*F)),n.textBaseline=z,t6(i,n,!(0,tF.default)(I)&&L>0);for(var G=0;G<D.length;G++){var H=u/2+V;U+=B,(0,tF.default)(_)||_.isNone||!u||this.drawLetterSpacing(n,i,D[G],j[G],f,H,U,y,b,x,w,_,T,C,!0,a,o,s),(0,tF.default)(b)||this.drawLetterSpacing(n,i,D[G],j[G],f,H,U,y,b,x,w,_,T,C,!1,a,o,s);}}},{key:"drawLetterSpacing",value:function(n,r,i,a,o,s,l,u,c,f,d,h,p,m,g,v,y,_){if(0===u){g?this.strokeText(n,r,i,s,l,h,p,v,y,_):this.fillText(n,r,i,s,l,c,f,d,m,v,y,_);return;}var b=n.textAlign;n.textAlign="left";var x=s;"center"===o||"middle"===o?x=s-a.width/2:("right"===o||"end"===o)&&(x=s-a.width);for(var E=Array.from(i),w=n.measureText(i).width,S=0,T=0;T<E.length;++T){var A=E[T];g?this.strokeText(n,r,A,x,l,h,p,v,y,_):this.fillText(n,r,A,x,l,c,f,d,m,v,y,_),x+=w-(S=n.measureText(i.substring(T+1)).width)+u,w=S;}n.textAlign=b;}},{key:"fillText",value:function(n,r,i,a,o,s,l,u,c,f,d,h){t8(n,r,s,l,f,d,h,this.imagePool,!0);var p,m=!(0,tF.default)(u)&&1!==u;m&&(p=n.globalAlpha,n.globalAlpha=u*c),n.fillText(i,a,o),m&&(n.globalAlpha=p);}},{key:"strokeText",value:function(n,r,i,a,o,s,l,u,c,f){t7(n,r,s,u,c,f,this.imagePool,!0);var d,h=!(0,tF.default)(l)&&1!==l;h&&(d=n.globalAlpha,n.globalAlpha=l),n.strokeText(i,a,o),h&&(n.globalAlpha=d);}},{key:"drawToContext",value:function(n,r,i,a,o){this.render(n,r.parsedStyle,r,r.ownerDocument.defaultView.context,a,o);}}]);}(t5),nt=function(n){function r(){var n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,eB.default)(this,r),(n=(0,ez.default)(this,r)).name="canvas-renderer",n.options=i,n;}return(0,eV.default)(r,n),(0,eD.default)(r,[{key:"init",value:function(){var n,r=(0,tl.default)({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),i=this.context.imagePool,a=new t5(i),o=(n={},(0,eW.default)((0,eW.default)((0,eW.default)((0,eW.default)((0,eW.default)((0,eW.default)((0,eW.default)((0,eW.default)((0,eW.default)((0,eW.default)(n,eG.Shape.CIRCLE,a),eG.Shape.ELLIPSE,a),eG.Shape.RECT,a),eG.Shape.IMAGE,new t9(i)),eG.Shape.TEXT,new ne(i)),eG.Shape.LINE,a),eG.Shape.POLYLINE,a),eG.Shape.POLYGON,a),eG.Shape.PATH,a),eG.Shape.GROUP,void 0),(0,eW.default)((0,eW.default)((0,eW.default)(n,eG.Shape.HTML,void 0),eG.Shape.MESH,void 0),eG.Shape.FRAGMENT,void 0));this.context.defaultStyleRendererFactory=o,this.context.styleRendererFactory=o,this.addRenderingPlugin(new tK(r));}},{key:"destroy",value:function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory;}}]);}(eG.AbstractRendererPlugin),nn={};i.e(nn,{Plugin:function(){return nt;}});var nr=function(){function n(){(0,eB.default)(this,n);}return(0,eD.default)(n,[{key:"apply",value:function(r,i){var a=this,o=r.renderingService,s=r.renderingContext,l=r.config;this.context=r;var u=s.root.ownerDocument.defaultView,c=function(n){o.hooks.pointerMove.call(n);},f=function(n){o.hooks.pointerUp.call(n);},d=function(n){o.hooks.pointerDown.call(n);},h=function(n){o.hooks.pointerOver.call(n);},p=function(n){o.hooks.pointerOut.call(n);},m=function(n){o.hooks.pointerCancel.call(n);},g=function(n){o.hooks.pointerWheel.call(n);},v=function(n){o.hooks.click.call(n);},y=function(n){i.globalThis.document.addEventListener("pointermove",c,!0),n.addEventListener("pointerdown",d,!0),n.addEventListener("pointerleave",p,!0),n.addEventListener("pointerover",h,!0),i.globalThis.addEventListener("pointerup",f,!0),i.globalThis.addEventListener("pointercancel",m,!0);},_=function(n){n.addEventListener("touchstart",d,!0),n.addEventListener("touchend",f,!0),n.addEventListener("touchmove",c,!0),n.addEventListener("touchcancel",m,!0);},b=function(n){i.globalThis.document.addEventListener("mousemove",c,!0),n.addEventListener("mousedown",d,!0),n.addEventListener("mouseout",p,!0),n.addEventListener("mouseover",h,!0),i.globalThis.addEventListener("mouseup",f,!0);},x=function(n){i.globalThis.document.removeEventListener("pointermove",c,!0),n.removeEventListener("pointerdown",d,!0),n.removeEventListener("pointerleave",p,!0),n.removeEventListener("pointerover",h,!0),i.globalThis.removeEventListener("pointerup",f,!0),i.globalThis.removeEventListener("pointercancel",m,!0);},E=function(n){n.removeEventListener("touchstart",d,!0),n.removeEventListener("touchend",f,!0),n.removeEventListener("touchmove",c,!0),n.removeEventListener("touchcancel",m,!0);},w=function(n){i.globalThis.document.removeEventListener("mousemove",c,!0),n.removeEventListener("mousedown",d,!0),n.removeEventListener("mouseout",p,!0),n.removeEventListener("mouseover",h,!0),i.globalThis.removeEventListener("mouseup",f,!0);};o.hooks.init.tap(n.tag,function(){var n=a.context.contextService.getDomElement();i.globalThis.navigator.msPointerEnabled?(n.style.msContentZooming="none",n.style.msTouchAction="none"):u.supportsPointerEvents&&(n.style.touchAction="none"),u.supportsPointerEvents?y(n):b(n),u.supportsTouchEvents&&_(n),l.useNativeClickEvent&&n.addEventListener("click",v,!0),n.addEventListener("wheel",g,{passive:!0,capture:!0});}),o.hooks.destroy.tap(n.tag,function(){var n=a.context.contextService.getDomElement();i.globalThis.navigator.msPointerEnabled?(n.style.msContentZooming="",n.style.msTouchAction=""):u.supportsPointerEvents&&(n.style.touchAction=""),u.supportsPointerEvents?x(n):w(n),u.supportsTouchEvents&&E(n),l.useNativeClickEvent&&n.removeEventListener("click",v,!0),n.removeEventListener("wheel",g,!0);});}}]);}();nr.tag="DOMInteraction";var ni=function(n){function r(){var n;(0,eB.default)(this,r);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=(0,ez.default)(this,r,[].concat(a))).name="dom-interaction",n;}return(0,eV.default)(r,n),(0,eD.default)(r,[{key:"init",value:function(){this.addRenderingPlugin(new nr);}},{key:"destroy",value:function(){this.removeAllRenderingPlugins();}}]);}(eG.AbstractRendererPlugin),na={};i.e(na,{Plugin:function(){return ni;}});var no=i("1f338b89"),ns=ew._(no),nl=function(){function n(){(0,eB.default)(this,n),this.displayObjectHTMLElementMap=new WeakMap;}return(0,eD.default)(n,[{key:"joinTransformMatrix",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return"matrix(".concat([n[0],n[1],n[4],n[5],n[12]+r[0],n[13]+r[1]].join(","),")");}},{key:"apply",value:function(r,i){var a=this,o=r.camera,s=r.renderingContext,l=r.renderingService;this.context=r;var u=s.root.ownerDocument.defaultView,c=u.context.eventService.nativeHTMLMap,f=function(n,r){r.style.transform=a.joinTransformMatrix(n.getWorldTransform(),n.getOrigin());},d=function(n){var r=n.target;if(r.nodeName===eG.Shape.HTML){a.$camera||(a.$camera=a.createCamera(o));var i=a.getOrCreateEl(r);a.$camera.appendChild(i),Object.keys(r.attributes).forEach(function(n){a.updateAttribute(n,r);}),f(r,i),c.set(i,r);}},h=function(n){var r=n.target;if(r.nodeName===eG.Shape.HTML&&a.$camera){var i=a.getOrCreateEl(r);i&&(i.remove(),c.delete(i));}},p=function(n){var r=n.target;if(r.nodeName===eG.Shape.HTML){var i=n.attrName;a.updateAttribute(i,r);}},m=function(n){var r=n.target;(r.nodeName===eG.Shape.FRAGMENT?r.childNodes:[r]).forEach(function(n){if(n.nodeName===eG.Shape.HTML){var r=a.getOrCreateEl(n);f(n,r);}});},g=function(){if(a.$camera){var n=a.context.config,r=n.width,i=n.height;a.$camera.parentElement.style.width="".concat(r||0,"px"),a.$camera.parentElement.style.height="".concat(i||0,"px");}};l.hooks.init.tap(n.tag,function(){u.addEventListener(eG.CanvasEvent.RESIZE,g),u.addEventListener(eG.ElementEvent.MOUNTED,d),u.addEventListener(eG.ElementEvent.UNMOUNTED,h),u.addEventListener(eG.ElementEvent.ATTR_MODIFIED,p),u.addEventListener(eG.ElementEvent.BOUNDS_CHANGED,m);}),l.hooks.endFrame.tap(n.tag,function(){a.$camera&&s.renderReasons.has(eG.RenderReason.CAMERA_CHANGED)&&(a.$camera.style.transform=a.joinTransformMatrix(o.getOrthoMatrix()));}),l.hooks.destroy.tap(n.tag,function(){a.$camera&&a.$camera.remove(),u.removeEventListener(eG.CanvasEvent.RESIZE,g),u.removeEventListener(eG.ElementEvent.MOUNTED,d),u.removeEventListener(eG.ElementEvent.UNMOUNTED,h),u.removeEventListener(eG.ElementEvent.ATTR_MODIFIED,p),u.removeEventListener(eG.ElementEvent.BOUNDS_CHANGED,m);});}},{key:"createCamera",value:function(n){var r=this.context.config,i=r.document,a=r.width,o=r.height,s=this.context.contextService.getDomElement(),l=s.parentNode;if(l){var u="g-canvas-camera",c=l.querySelector("#".concat(u));if(!c){var f=(i||document).createElement("div");f.style.overflow="hidden",f.style.pointerEvents="none",f.style.position="absolute",f.style.left="0px",f.style.top="0px",f.style.width="".concat(a||0,"px"),f.style.height="".concat(o||0,"px");var d=(i||document).createElement("div");c=d,d.id=u,d.style.position="absolute",d.style.left="".concat(s.offsetLeft||0,"px"),d.style.top="".concat(s.offsetTop||0,"px"),d.style.transformOrigin="left top",d.style.transform=this.joinTransformMatrix(n.getOrthoMatrix()),d.style.pointerEvents="none",d.style.width="100%",d.style.height="100%",f.appendChild(d),l.appendChild(f);}return c;}return null;}},{key:"getOrCreateEl",value:function(n){var r=this.context.config.document,i=this.displayObjectHTMLElementMap.get(n);return i||(i=(r||document).createElement("div"),n.parsedStyle.$el=i,this.displayObjectHTMLElementMap.set(n,i),n.id&&(i.id=n.id),n.name&&i.setAttribute("name",n.name),n.className&&(i.className=n.className),i.style.position="absolute",i.style["will-change"]="transform",i.style.transform=this.joinTransformMatrix(n.getWorldTransform(),n.getOrigin())),i;}},{key:"updateAttribute",value:function(n,r){var i=this.getOrCreateEl(r);switch(n){case"innerHTML":var a=r.parsedStyle.innerHTML;(0,tj.default)(a)?i.innerHTML=a:(i.innerHTML="",i.appendChild(a));break;case"x":i.style.left="".concat(r.parsedStyle.x,"px");break;case"y":i.style.top="".concat(r.parsedStyle.y,"px");break;case"transformOrigin":var o=r.parsedStyle.transformOrigin;i.style["transform-origin"]="".concat(o[0].buildCSSText(null,null,"")," ").concat(o[1].buildCSSText(null,null,""));break;case"width":var s=r.parsedStyle.width;i.style.width=(0,ns.default)(s)?"".concat(s,"px"):s.toString();break;case"height":var l=r.parsedStyle.height;i.style.height=(0,ns.default)(l)?"".concat(l,"px"):l.toString();break;case"zIndex":var u=r.parsedStyle.zIndex;i.style["z-index"]="".concat(u);break;case"visibility":var c=r.parsedStyle.visibility;i.style.visibility=c;break;case"pointerEvents":var f=r.parsedStyle.pointerEvents;i.style.pointerEvents=void 0===f?"auto":f;break;case"opacity":var d=r.parsedStyle.opacity;i.style.opacity="".concat(d);break;case"fill":var h=r.parsedStyle.fill,p="";(0,eG.isCSSRGB)(h)?p=h.isNone?"transparent":r.getAttribute("fill"):Array.isArray(h)?p=r.getAttribute("fill"):(0,eG.isPattern)(h),i.style.background=p;break;case"stroke":var m=r.parsedStyle.stroke,g="";(0,eG.isCSSRGB)(m)?g=m.isNone?"transparent":r.getAttribute("stroke"):Array.isArray(m)?g=r.getAttribute("stroke"):(0,eG.isPattern)(m),i.style["border-color"]=g,i.style["border-style"]="solid";break;case"lineWidth":var v=r.parsedStyle.lineWidth;i.style["border-width"]="".concat(v||0,"px");break;case"lineDash":i.style["border-style"]="dashed";break;case"filter":var y=r.style.filter;i.style.filter=y;break;default:(0,tF.default)(r.style[n])||""===r.style[n]||(i.style[n]=r.style[n]);}}}]);}();nl.tag="HTMLRendering";var nu=function(n){function r(){var n;(0,eB.default)(this,r);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=(0,ez.default)(this,r,[].concat(a))).name="html-renderer",n;}return(0,eV.default)(r,n),(0,eD.default)(r,[{key:"init",value:function(){this.addRenderingPlugin(new nl);}},{key:"destroy",value:function(){this.removeAllRenderingPlugins();}}]);}(eG.AbstractRendererPlugin),nc={};i.e(nc,{Plugin:function(){return nu;}});var nf=(0,eD.default)(function n(r){(0,eB.default)(this,n),this.renderingContext=r.renderingContext,this.canvasConfig=r.config;},[{key:"init",value:function(){var n=this.canvasConfig,r=n.container,i=n.canvas;if(i)this.$canvas=i,r&&i.parentElement!==r&&r.appendChild(i),this.$container=i.parentElement,this.canvasConfig.container=this.$container;else if(r&&(this.$container=(0,tj.default)(r)?document.getElementById(r):r,this.$container)){var a=document.createElement("canvas");this.$container.appendChild(a),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=a;}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height);}},{key:"getContext",value:function(){return this.context;}},{key:"getDomElement",value:function(){return this.$canvas;}},{key:"getDPR",value:function(){return this.dpr;}},{key:"getBoundingClientRect",value:function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect();}},{key:"destroy",value:function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas);}},{key:"resize",value:function(n,r){var i=this.canvasConfig.devicePixelRatio;this.dpr=i,this.$canvas&&(this.$canvas.width=this.dpr*n,this.$canvas.height=this.dpr*r,(0,eG.setDOMSize)(this.$canvas,n,r)),this.renderingContext.renderReasons.add(eG.RenderReason.CAMERA_CHANGED);}},{key:"applyCursorStyle",value:function(n){this.$container&&this.$container.style&&(this.$container.style.cursor=n);}},{key:"toDataURL",value:(f=(0,te.default)((0,e7.default)().mark(function n(){var r,i,a,o=arguments;return(0,e7.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=(r=o.length>0&&void 0!==o[0]?o[0]:{}).type,a=r.encoderOptions,n.abrupt("return",this.context.canvas.toDataURL(i,a));case 3:case"end":return n.stop();}},n,this);})),function(){return f.apply(this,arguments);})}]),nd=function(n){function r(){var n;(0,eB.default)(this,r);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=(0,ez.default)(this,r,[].concat(a))).name="canvas-context-register",n;}return(0,eV.default)(r,n),(0,eD.default)(r,[{key:"init",value:function(){this.context.ContextService=nf;}},{key:"destroy",value:function(){delete this.context.ContextService;}}]);}(eG.AbstractRendererPlugin),nh=function(n){function r(n){var i;return(0,eB.default)(this,r),(i=(0,ez.default)(this,r,[n])).registerPlugin(new nd),i.registerPlugin(new tY.Plugin),i.registerPlugin(new e4.Plugin),i.registerPlugin(new nn.Plugin),i.registerPlugin(new na.Plugin),i.registerPlugin(new tP.Plugin),i.registerPlugin(new nc.Plugin),i;}return(0,eV.default)(r,n),(0,eD.default)(r);}(eG.AbstractRenderer),np=i("3f92e064"),nm=function(){function n(r){(0,eB.default)(this,n),this.dragndropPluginOptions=r;}return(0,eD.default)(n,[{key:"apply",value:function(r){var i=this,a=r.renderingService,o=r.renderingContext.root.ownerDocument,s=o.defaultView,l=function(n){var r=n.target,a=r===o,l=a&&i.dragndropPluginOptions.isDocumentDraggable?o:r.closest&&r.closest("[draggable=true]");if(l){var u,c=!1,f=n.timeStamp,d=[n.clientX,n.clientY],h=null,p=[n.clientX,n.clientY],m=(u=(0,te.default)((0,e7.default)().mark(function n(s){var u,m,g,v,y,_;return(0,e7.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(c){n.next=8;break;}if(u=s.timeStamp-f,m=(0,np.distanceSquareRoot)([s.clientX,s.clientY],d),!(u<=i.dragndropPluginOptions.dragstartTimeThreshold||m<=i.dragndropPluginOptions.dragstartDistanceThreshold)){n.next=5;break;}return n.abrupt("return");case 5:s.type="dragstart",l.dispatchEvent(s),c=!0;case 8:if(s.type="drag",s.dx=s.clientX-p[0],s.dy=s.clientY-p[1],l.dispatchEvent(s),p=[s.clientX,s.clientY],a){n.next=21;break;}return g="pointer"===i.dragndropPluginOptions.overlap?[s.canvasX,s.canvasY]:r.getBounds().center,n.next=17,o.elementsFromPoint(g[0],g[1]);case 17:_=(null==(y=(v=n.sent)[v.indexOf(r)+1])?void 0:y.closest("[droppable=true]"))||(i.dragndropPluginOptions.isDocumentDroppable?o:null),h!==_&&(h&&(s.type="dragleave",s.target=h,h.dispatchEvent(s)),_&&(s.type="dragenter",s.target=_,_.dispatchEvent(s)),(h=_)&&(s.type="dragover",s.target=h,h.dispatchEvent(s)));case 21:case"end":return n.stop();}},n);})),function(n){return u.apply(this,arguments);});s.addEventListener("pointermove",m);var g=function(n){if(c){n.detail={preventClick:!0};var r=n.clone();h&&(r.type="drop",r.target=h,h.dispatchEvent(r)),r.type="dragend",l.dispatchEvent(r),c=!1;}s.removeEventListener("pointermove",m);};r.addEventListener("pointerup",g,{once:!0}),r.addEventListener("pointerupoutside",g,{once:!0});}};a.hooks.init.tap(n.tag,function(){s.addEventListener("pointerdown",l);}),a.hooks.destroy.tap(n.tag,function(){s.removeEventListener("pointerdown",l);});}}]);}();nm.tag="Dragndrop";var ng=function(n){function r(){var n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,eB.default)(this,r),(n=(0,ez.default)(this,r)).name="dragndrop",n.options=i,n;}return(0,eV.default)(r,n),(0,eD.default)(r,[{key:"init",value:function(){this.addRenderingPlugin(new nm((0,tl.default)({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)));}},{key:"destroy",value:function(){this.removeAllRenderingPlugins();}},{key:"setOptions",value:function(n){Object.assign(this.plugins[0].dragndropPluginOptions,n);}}]);}(eG.AbstractRendererPlugin),nv=i("602e8759"),ny=ew._(nv),n_=i("da8e1cea"),nb=ew._(n_),nx=i("1f4e7f4b"),nE=eS._(nx),nw=i("d7948920"),nS=ew._(nw),nT=i("7d4c6398"),nA=i("f5373dff");let nC={abs:Math.abs,ceil:Math.ceil,floor:Math.floor,max:Math.max,min:Math.min,round:Math.round,sqrt:Math.sqrt,pow:Math.pow};class nO extends Error{constructor(n,r,i){super(n),this.position=r,this.token=i,this.name="ExpressionError";}}(d=ei||(ei={}))[d.STRING=0]="STRING",d[d.NUMBER=1]="NUMBER",d[d.BOOLEAN=2]="BOOLEAN",d[d.NULL=3]="NULL",d[d.IDENTIFIER=4]="IDENTIFIER",d[d.OPERATOR=5]="OPERATOR",d[d.FUNCTION=6]="FUNCTION",d[d.DOT=7]="DOT",d[d.BRACKET_LEFT=8]="BRACKET_LEFT",d[d.BRACKET_RIGHT=9]="BRACKET_RIGHT",d[d.PAREN_LEFT=10]="PAREN_LEFT",d[d.PAREN_RIGHT=11]="PAREN_RIGHT",d[d.COMMA=12]="COMMA",d[d.QUESTION=13]="QUESTION",d[d.COLON=14]="COLON",d[d.DOLLAR=15]="DOLLAR";let nM=new Set([32,9,10,13]),nR=new Set([43,45,42,47,37,33,38,124,61,60,62]),nP=new Map([["true",ei.BOOLEAN],["false",ei.BOOLEAN],["null",ei.NULL]]),nk=new Map([["===",!0],["!==",!0],["<=",!0],[">=",!0],["&&",!0],["||",!0],["+",!0],["-",!0],["*",!0],["/",!0],["%",!0],["!",!0],["<",!0],[">",!0]]),nI=new Map([[46,ei.DOT],[91,ei.BRACKET_LEFT],[93,ei.BRACKET_RIGHT],[40,ei.PAREN_LEFT],[41,ei.PAREN_RIGHT],[44,ei.COMMA],[63,ei.QUESTION],[58,ei.COLON],[36,ei.DOLLAR]]),nL=new Map;for(let[n,r]of nI.entries())nL.set(n,{type:r,value:String.fromCharCode(n)});function nN(n){return n>=48&&n<=57;}function nD(n){return n>=97&&n<=122||n>=65&&n<=90||95===n;}(h=ea||(ea={}))[h.Program=0]="Program",h[h.Literal=1]="Literal",h[h.Identifier=2]="Identifier",h[h.MemberExpression=3]="MemberExpression",h[h.CallExpression=4]="CallExpression",h[h.BinaryExpression=5]="BinaryExpression",h[h.UnaryExpression=6]="UnaryExpression",h[h.ConditionalExpression=7]="ConditionalExpression";let nF=new Map([["||",2],["&&",3],["===",4],["!==",4],[">",5],[">=",5],["<",5],["<=",5],["+",6],["-",6],["*",7],["/",7],["%",7],["!",8]]),nB={type:ea.Literal,value:null},nj={type:ea.Literal,value:!0},nz={type:ea.Literal,value:!1},nU=n=>{let r=0,i=n.length,a=()=>r>=i?null:n[r],o=()=>n[r++],s=n=>{let r=a();return null!==r&&r.type===n;},l=n=>n.type===ei.OPERATOR?nF.get(n.value)||-1:n.type===ei.DOT||n.type===ei.BRACKET_LEFT?9:n.type===ei.QUESTION?1:-1,u=n=>{let i,l;if(o().type===ei.DOT){if(!s(ei.IDENTIFIER)){let n=a();throw new nO("Expected property name",r,n?n.value:"<end of input>");}let n=o();i={type:ea.Identifier,name:n.value},l=!1;}else{if(i=f(0),!s(ei.BRACKET_RIGHT)){let n=a();throw new nO("Expected closing bracket",r,n?n.value:"<end of input>");}o(),l=!0;}return{type:ea.MemberExpression,object:n,property:i,computed:l};},c=()=>{let n=a();if(!n)throw new nO("Unexpected end of input",r,"<end of input>");if(n.type===ei.OPERATOR&&("!"===n.value||"-"===n.value)){o();let r=c();return{type:ea.UnaryExpression,operator:n.value,argument:r,prefix:!0};}switch(n.type){case ei.NUMBER:return o(),{type:ea.Literal,value:Number(n.value)};case ei.STRING:return o(),{type:ea.Literal,value:n.value};case ei.BOOLEAN:return o(),"true"===n.value?nj:nz;case ei.NULL:return o(),nB;case ei.IDENTIFIER:return o(),{type:ea.Identifier,name:n.value};case ei.FUNCTION:return(()=>{let n=o(),i=[];if(!s(ei.PAREN_LEFT)){let n=a();throw new nO("Expected opening parenthesis after function name",r,n?n.value:"<end of input>");}for(o();;){if(s(ei.PAREN_RIGHT)){o();break;}if(!a()){let n=a();throw new nO("Expected closing parenthesis",r,n?n.value:"<end of input>");}if(i.length>0){if(!s(ei.COMMA)){let n=a();throw new nO("Expected comma between function arguments",r,n?n.value:"<end of input>");}o();}let n=f(0);i.push(n);}return{type:ea.CallExpression,callee:{type:ea.Identifier,name:n.value},arguments:i};})();case ei.PAREN_LEFT:{o();let n=f(0);if(!s(ei.PAREN_RIGHT)){let n=a();throw new nO("Expected closing parenthesis",r,n?n.value:"<end of input>");}return o(),n;}default:throw new nO(`Unexpected token: ${n.type}`,r,n.value);}},f=(d=0)=>{let h=c();for(;r<i;){let i=n[r],c=l(i);if(c<=d)break;if(i.type!==ei.QUESTION){if(i.type!==ei.OPERATOR){if(i.type!==ei.DOT&&i.type!==ei.BRACKET_LEFT)break;h=u(h);}else{o();let n=f(c);h={type:ea.BinaryExpression,operator:i.value,left:h,right:n};}}else{o();let n=f(0);if(!s(ei.COLON)){let n=a();throw new nO("Expected : in conditional expression",r,n?n.value:"<end of input>");}o();let i=f(0);h={type:ea.ConditionalExpression,test:h,consequent:n,alternate:i};}}return h;},d=f();return{type:ea.Program,body:d};},nV=(n,r,i)=>{let a=r;i&&(a={...r,context:{...r.context,...i}});let o=n=>{switch(n.type){case ea.Literal:return n.value;case ea.Identifier:return(n=>{if(!(n.name in a.context))throw new nO(`Undefined variable: ${n.name}`);return a.context[n.name];})(n);case ea.MemberExpression:return(n=>{let r=o(n.object);if(null==r)throw new nO("Cannot access property of null or undefined");return r[n.computed?o(n.property):n.property.name];})(n);case ea.CallExpression:return(n=>{let r=a.functions[n.callee.name];if(!r)throw new nO(`Undefined function: ${n.callee.name}`);return r(...n.arguments.map(n=>o(n)));})(n);case ea.BinaryExpression:return(n=>{if("&&"===n.operator){let r=o(n.left);return r?o(n.right):r;}if("||"===n.operator)return o(n.left)||o(n.right);let r=o(n.left),i=o(n.right);switch(n.operator){case"+":return r+i;case"-":return r-i;case"*":return r*i;case"/":return r/i;case"%":return r%i;case"===":return r===i;case"!==":return r!==i;case">":return r>i;case">=":return r>=i;case"<":return r<i;case"<=":return r<=i;default:throw new nO(`Unknown operator: ${n.operator}`);}})(n);case ea.UnaryExpression:return(n=>{let r=o(n.argument);if(n.prefix)switch(n.operator){case"!":return!r;case"-":if("number"!=typeof r)throw new nO(`Cannot apply unary - to non-number: ${r}`);return-r;default:throw new nO(`Unknown operator: ${n.operator}`);}throw new nO(`Postfix operators are not supported: ${n.operator}`);})(n);case ea.ConditionalExpression:return(n=>{let r=o(n.test);return o(r?n.consequent:n.alternate);})(n);default:throw new nO(`Evaluation error: Unsupported node type: ${n.type}`);}};return o(n.body);};var nG=i("428badac"),nH=ew._(nG),nW=function(n){return n;},nX=function(n,r){void 0===r&&(r=nW);var i={};return(0,nH.default)(n)&&!(0,tF.default)(n)&&Object.keys(n).forEach(function(a){i[a]=r(n[a],a);}),i;},nq=i("bd74704c");let n$=["style","encode","labels","children"],nY=(0,nq.lru)(n=>{let r=function(n){let r=nU((n=>{let r=n.length,i=Array(Math.ceil(r/3)),a=0,o=0;for(;o<r;){let s=n.charCodeAt(o);if(nM.has(s)){o++;continue;}let l=nL.get(s);if(l)i[a++]=l,o++;else if(34!==s&&39!==s){if(nN(s)||45===s&&o+1<r&&nN(n.charCodeAt(o+1)))i[a++]=function(){let i=o;for(45===n.charCodeAt(o)&&o++;o<r&&nN(n.charCodeAt(o));)o++;if(o<r&&46===n.charCodeAt(o))for(o++;o<r&&nN(n.charCodeAt(o));)o++;let a=n.slice(i,o);return{type:ei.NUMBER,value:a};}();else if(64!==s){if(nD(s))i[a++]=function(){var i;let a=o++;for(;o<r&&(nD(i=n.charCodeAt(o))||nN(i));)o++;let s=n.slice(a,o),l=nP.get(s);return l?{type:l,value:s}:{type:ei.IDENTIFIER,value:s};}();else{if(!nR.has(s))throw new nO(`Unexpected character: ${n[o]}`,o,n.substring(Math.max(0,o-10),o));i[a++]=function(){if(o+2<r){let r=n.substring(o,o+3);if(nk.has(r))return o+=3,{type:ei.OPERATOR,value:r};}if(o+1<r){let r=n.substring(o,o+2);if(nk.has(r))return o+=2,{type:ei.OPERATOR,value:r};}let i=n[o];if(nk.has(i))return o++,{type:ei.OPERATOR,value:i};throw new nO(`Unknown operator at position ${o}: ${n.substring(o,o+1)}`,o,n.substring(Math.max(0,o-10),o));}();}}else i[a++]=function(){let i=++o;if(o<r&&nD(n.charCodeAt(o))){var a;for(o++;o<r&&(nD(a=n.charCodeAt(o))||nN(a));)o++;}let s=n.slice(i,o);return{type:ei.FUNCTION,value:s};}();}else i[a++]=function(i){let a=o+1;o++;let s="",l=!1;for(;o<r;){let r=n.charCodeAt(o);if(r===i)return l||(s=n.substring(a,o)),o++,{type:ei.STRING,value:s};92===r?(l||(s=n.substring(a,o),l=!0),s+=n[++o]):l&&(s+=n[o]),o++;}throw new nO(`Unterminated string starting with ${String.fromCharCode(i)}`,o,n.substring(Math.max(0,o-10),o));}(s);}return a===i.length?i:i.slice(0,a);})(n)),i=((n={},r={})=>({context:n,functions:r}))({},nC);return (n={})=>nV(r,i,n);}(n);return(...n)=>{let i=Array.from({length:n.length},(n,r)=>String.fromCharCode(97+r)),a=Object.fromEntries(n.map((n,r)=>[i[r],n]));return r(Object.assign(Object.assign({},a),{global:Object.assign({},a)}));};},n=>n,128);var nZ=i("7cf6ebc4"),nK=ew._(nZ),nQ=i("1daaa764"),nJ=ew._(nQ),n0=i("6c85d1a4"),n1=i("cfce14bf"),n2=i("e93228d6"),n3=ew._(n2),n4=i("63aba70a"),n5=ew._(n4),n6=i("e98d52c0"),n8=ew._(n6),n7=i("036338e2"),n9=i("9db76b3f"),re=i("5120ac0c");let rt=[["legendCategory",[[["color","discrete"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","discrete"]],[["color","discrete"],["opacity","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"]],[["color","discrete"],["opacity","constant"],["size","constant"]],[["color","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"]],[["color","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["shape","discrete"]],[["color","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"]],[["color","discrete"],["opacity","constant"]],[["color","discrete"],["shape","constant"]],[["color","constant"],["shape","discrete"]],[["color","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"]],[["color","discrete"]]]],["legendContinuousSize",[[["color","continuous"],["opacity","continuous"],["size","continuous"]],[["color","constant"],["opacity","continuous"],["size","continuous"]],[["color","continuous"],["size","continuous"]],[["color","constant"],["size","continuous"]],[["size","continuous"],["opacity","continuous"]],[["size","continuous"]]]],["legendContinuousBlockSize",[[["color","distribution"],["opacity","distribution"],["size","distribution"]],[["color","distribution"],["size","distribution"]]]],["legendContinuousBlock",[[["color","distribution"],["opacity","continuous"]],[["color","distribution"]]]],["legendContinuous",[[["color","continuous"],["opacity","continuous"]],[["color","continuous"]],[["opacity","continuous"]]]]];var rn=i("148614a5"),rr=i("c4368857"),ri=i("3776434f");let ra={linear:"linear",identity:"identity",log:"log",pow:"pow",sqrt:"sqrt",sequential:"sequential"},ro={threshold:"threshold",quantize:"quantize",quantile:"quantile"},rs={ordinal:"ordinal",band:"band",point:"point"},rl={constant:"constant"};var ru=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};function rc(n,r,i,a,o){let[s]=(0,rr.useLibrary)("component",a),{scaleInstances:l,scale:u,bbox:c}=n;return s(ru(n,["scaleInstances","scale","bbox"]))({coordinate:r,library:a,markState:o,scales:l,theme:i,value:{bbox:c,library:a},scale:u});}function rf(n,r){let i=["left","right","bottom","top"];return(0,nE.groups)(n,({type:n,position:r,group:a})=>i.includes(r)?void 0===a?n.startsWith("legend")?`legend-${r}`:Symbol("independent"):"independent"===a?Symbol("independent"):a:Symbol("independent")).flatMap(([,n])=>{if(1===n.length)return n[0];if(void 0!==r){let i=n.filter(n=>void 0!==n.length).map(n=>n.length),a=(0,n8.default)(i);if(a>r)return n.forEach(n=>n.group=Symbol("independent")),n;let o=(r-a)/(n.length-i.length);n.forEach(n=>{void 0===n.length&&(n.length=o);});}let i=(0,n5.default)(n,n=>n.size),a=(0,n5.default)(n,n=>n.order),o=(0,n5.default)(n,n=>n.crossPadding);return{type:"group",size:i,order:a,position:n[0].position,children:n,crossPadding:o};});}function rd(n){let r=(0,rn.coordOf)(n,"polar");if(r.length){let n=r[r.length-1],{startAngle:i,endAngle:a}=(0,n7.getPolarOptions)(n);return[i,a];}let i=(0,rn.coordOf)(n,"radial");if(i.length){let n=i[i.length-1],{startAngle:r,endAngle:a}=(0,n9.getRadialOptions)(n);return[r,a];}return[-Math.PI/2,Math.PI/2*3];}function rh(n,r){let[i]=(0,rr.useLibrary)("scale",r),{scales:a,tickCount:o,tickMethod:s}=n,l=a.find(n=>"constant"!==n.type&&"identity"!==n.type);return void 0!==o&&(l.tickCount=o),void 0!==s&&(l.tickMethod=s),i(l);}function rp(n,r,i="label"){let{labelFormatter:a,tickFilter:o,label:s=!0}=n,l=ru(n,["labelFormatter","tickFilter","label"]);if(!s)return null;let u=function(n,r,i){let a=rv(n,i).map(n=>"number"==typeof n?(0,re.prettyNumber)(n):n),o=r?"string"==typeof r?(0,n0.format)(r):r:n.getFormatter?n.getFormatter():n=>`${n}`;return a.map(o);}(r,a,o),c=(0,nA.subObject)(l,i),f=u.map((n,r)=>Object.fromEntries(Object.entries(c).map(([i,a])=>[i,"function"==typeof a?a(n,r):a]))),d=u.map((n,r)=>ry(n,f[r]));if(!f.some(n=>n.transform)){let r=u.map((n,r)=>r);n.indexBBox=new Map(r.map(n=>[n,[u[n],d[n]]]));}return d;}function rm(n){let{title:r}=n,i=ru(n,["title"]);if(!1===r||null==r)return null;let a=(0,nA.subObject)(i,"title"),{direction:o,transform:s}=a,l=Array.isArray(r)?r.join(","):r;return"string"!=typeof l?null:ry(l,Object.assign(Object.assign({},a),{transform:s||("vertical"===o?"rotate(-90)":"")}));}function rg(n,r,i){let{title:a}=n,[o,s]=Array.isArray(a)?[a,void 0]:[void 0,a],{axis:l,[`axis${(0,nA.capitalizeFirst)(r)}`]:u}=i;return(0,nS.default)({title:o},l,u,Object.assign(Object.assign({},n),{title:s}));}function rv(n,r){let i=n.getTicks?n.getTicks():n.getOptions().domain;return r?i.filter(r):i;}function ry(n,r){let i=n instanceof eL.DisplayObject?n:new eL.Text({style:{text:`${n}`}}),{filter:a}=r,o=ru(r,["filter"]);return i.attr(Object.assign(Object.assign({},o),{visibility:"none"})),i.getBBox();}var r_=i("5b7abe3d"),rb=i("4f81a096"),rx=ew._(rb),rE=i("d8cea4a1"),rw=ew._(rE),rS=i("42fb15d0"),rT=i("abbe7005");function rA(n,r,i,a,o,s,l){let u=(0,nE.default)(n,n=>n.position),{padding:c=s.padding,paddingLeft:f=c,paddingRight:d=c,paddingBottom:h=c,paddingTop:p=c}=o,m={paddingBottom:h,paddingLeft:f,paddingTop:p,paddingRight:d};for(let n of a){let a=`padding${(0,nA.capitalizeFirst)((0,rT.camelCase)(n))}`,o=u.get(n)||[],c=m[a],f=n=>{void 0===n.size&&(n.size=n.defaultSize);},d=n=>{"group"===n.type?(n.children.forEach(f),n.size=(0,n5.default)(n.children,n=>n.size)):n.size=n.defaultSize;},h=a=>{a.size||("auto"!==c?d(a):(function n(r,i,a,o,s,l){let{type:u}=r;if(["left","right","bottom","top"].includes(o)&&"string"==typeof u)return(u.startsWith("axis")?function(n,r,i,a,o,s){var l;n.transform=n.transform||[{type:"hide"}];let u="left"===a||"right"===a,c=rg(n,a,o),{tickLength:f=0,labelSpacing:d=0,titleSpacing:h=0,labelAutoRotate:p}=c,m=ru(c,["tickLength","labelSpacing","titleSpacing","labelAutoRotate"]),g=rh(n,s),v=rp(m,g),y=f+d;if(v&&v.length){let a=(0,n5.default)(v,n=>n.width),o=(0,n5.default)(v,n=>n.height);if(u)n.size=a+y;else{let{tickFilter:s,labelTransform:u}=n;(function(n,r,i,a,o){if((0,n8.default)(r,n=>n.width)>i)return!0;let s=n.clone();s.update({range:[0,i]});let l=rv(n,o),u=l.map(n=>s.map(n)+(s.getBandWidth?s.getBandWidth(n)/2:0)),c=l.map((n,r)=>r),f=-a[0],d=i+a[1],h=(n,r)=>{let{width:i}=r;return[n-i/2,n+i/2];};for(let n=0;n<c.length;n++){let[i,a]=h(u[n],r[n]);if(i<f||a>d)return!0;let o=u[n+1];if(o){let[i]=h(o,r[n+1]);if(a>i)return!0;}}return!1;})(g,v,r,i,s)&&!u&&!1!==p&&null!==p?(n.labelTransform="rotate(90)",n.size=a+y):(n.labelTransform=null!==(l=n.labelTransform)&&void 0!==l?l:"rotate(0)",n.size=o+y);}}else n.size=f;let _=rm(m);_&&(u?n.size+=h+_.width:n.size+=h+_.height);}:u.startsWith("group")?function(r,i,a,o,s,l){let{children:u}=r,c=(0,n5.default)(u,n=>n.crossPadding);u.forEach(n=>n.crossPadding=c),u.forEach(r=>n(r,i,a,o,s,l));let f=(0,n5.default)(u,n=>n.size);r.size=f,u.forEach(n=>n.size=f);}:u.startsWith("legendContinuous")?function(n,r,i,a,o,s){let l=(()=>{let{legendContinuous:r}=o;return(0,nS.default)({},r,n);})(),{labelSpacing:u=0,titleSpacing:c=0}=l,f=ru(l,["labelSpacing","titleSpacing"]),d="left"===a||"right"===a,{size:h}=(0,nA.subObject)(f,"ribbon"),{size:p}=(0,nA.subObject)(f,"handleIcon"),m=Math.max(h,2.4*p);n.size=m;let g=rp(f,rh(n,s));if(g){let r=d?"width":"height",i=(0,n5.default)(g,n=>n[r]);n.size+=i+u;}let v=rm(f);v&&(d?n.size=Math.max(n.size,v.width):n.size+=c+v.height);}:"legendCategory"===u?function(n,r,i,a,o,s){let l=(()=>{let{legendCategory:r}=o,{title:i}=n,[a,s]=Array.isArray(i)?[i,void 0]:[void 0,i];return(0,nS.default)({title:a},r,Object.assign(Object.assign({},n),{title:s}));})(),{itemSpacing:u,itemMarkerSize:c,titleSpacing:f,rowPadding:d,colPadding:h,maxCols:p=1/0,maxRows:m=1/0}=l,g=ru(l,["itemSpacing","itemMarkerSize","titleSpacing","rowPadding","colPadding","maxCols","maxRows"]),{cols:v,length:y}=n,_=n=>Math.min(n,m),b=n=>Math.min(n,p),x="left"===a||"right"===a,E=void 0===y?r+(x?0:i[0]+i[1]):y,w=rm(g),S=rp(g,rh(n,s),"itemLabel"),T=Math.max(S[0].height,c)+d,A=(n,r=0)=>c+n+u[0]+r;x?(()=>{let r=-1/0,i=0,a=1,o=0,s=-1/0,l=-1/0,u=w?w.height:0,c=E-u;for(let{width:n}of S)r=Math.max(r,A(n,h)),i+T>c?(a++,s=Math.max(s,o),l=Math.max(l,i),o=1,i=T):(i+=T,o++);a<=1&&(s=o,l=i),n.size=r*b(a),n.length=l+u,(0,nS.default)(n,{cols:b(a),gridRow:s});})():"number"==typeof v?(()=>{let r=Math.ceil(S.length/v),i=(0,n5.default)(S,n=>A(n.width))*v;n.size=T*_(r)-d,n.length=Math.min(i,E);})():(()=>{let r=1,i=0,a=-1/0;for(let{width:n}of S){let o=A(n,h);i+o>E?(a=Math.max(a,i),i=o,r++):i+=o;}1===r&&(a=i),n.size=T*_(r)-d,n.length=a;})(),w&&(x?n.size=Math.max(n.size,w.width):n.size+=f+w.height);}:u.startsWith("slider")?function(n,r,i,a,o,s){let{trackSize:l,handleIconSize:u}=(()=>{let{slider:r}=o;return(0,nS.default)({},r,n);})(),c=Math.max(l,2.4*u);n.size=c;}:"title"===u?function(n,r,i,a,o,s){let l=(0,nS.default)({},o.title,n),{title:u,subtitle:c,spacing:f=0}=l,d=ru(l,["title","subtitle","spacing"]);if(u){let r=ry(u,(0,nA.subObject)(d,"title"));n.size=r.height;}if(c){let r=ry(c,(0,nA.subObject)(d,"subtitle"));n.size+=f+r.height;}}:u.startsWith("scrollbar")?function(n,r,i,a,o,s){let{trackSize:l=6}=(0,nS.default)({},o.scrollbar,n);n.size=l;}:()=>{})(r,i,a,o,s,l);}(a,r,i,n,s,l),f(a)));},p=n=>{n.type.startsWith("axis")&&void 0===n.labelAutoHide&&(n.labelAutoHide=!0);},g="bottom"===n||"top"===n,v=(0,rw.default)(o,n=>n.order),y=o.filter(n=>n.type.startsWith("axis")&&n.order==v);if(y.length&&(y[0].crossPadding=0),"number"==typeof c)o.forEach(f),o.forEach(p);else if(0===o.length)m[a]=0;else{let n=rf(o,g?r+i[0]+i[1]:r);n.forEach(h);let s=n.reduce((n,{size:r,crossPadding:i=12})=>n+r+i,0);m[a]=s;}}return m;}function rC({width:n,height:r,paddingLeft:i,paddingRight:a,paddingTop:o,paddingBottom:s,marginLeft:l,marginTop:u,marginBottom:c,marginRight:f,innerHeight:d,innerWidth:h,insetBottom:p,insetLeft:m,insetRight:g,insetTop:v}){let y=i+l,_=o+u,b=a+f,x=s+c,E=n-l-f,w=[y+m,_+v,h-m-g,d-v-p,"center",null,null];return{top:[y,0,h,_,"vertical",!0,rx.default,l,E],right:[n-b,_,b,d,"horizontal",!1,rx.default],bottom:[y,r-x,h,x,"vertical",!1,rx.default,l,E],left:[0,_,y,d,"horizontal",!0,rx.default],"top-left":[y,0,h,_,"vertical",!0,rx.default],"top-right":[y,0,h,_,"vertical",!0,rx.default],"bottom-left":[y,r-x,h,x,"vertical",!1,rx.default],"bottom-right":[y,r-x,h,x,"vertical",!1,rx.default],center:w,inner:w,outer:w};}var rO=i("1e27b829"),rM=i("7d5002fc"),rR=this&&this.__awaiter||function(n,r,i,a){return new(i||(i=Promise))(function(o,s){function l(n){try{c(a.next(n));}catch(n){s(n);}}function u(n){try{c(a.throw(n));}catch(n){s(n);}}function c(n){var r;n.done?o(n.value):((r=n.value)instanceof i?r:new i(function(n){n(r);})).then(l,u);}c((a=a.apply(n,r||[])).next());});},rP=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};function rk(n){n.style("transform",n=>`translate(${n.layout.x}, ${n.layout.y})`);}function rI(n,r){return rR(this,void 0,void 0,function*(){let{library:i}=r,a=function(n){let{coordinate:r={},interaction:i={},style:a={},marks:o}=n,s=rP(n,["coordinate","interaction","style","marks"]),l=o.map(n=>n.coordinate||{}),u=o.map(n=>n.interaction||{}),c=o.map(n=>n.viewStyle||{}),f=[...l,r].reduceRight((n,r)=>(0,nS.default)(n,r),{}),d=[i,...u].reduce((n,r)=>(0,nS.default)(n,r),{}),h=[...c,a].reduce((n,r)=>(0,nS.default)(n,r),{});return Object.assign(Object.assign({},s),{marks:o,coordinate:f,interaction:d,style:h});}((yield function(n,r){return rR(this,void 0,void 0,function*(){let{library:i}=r,[a,o]=(0,rr.useLibrary)("mark",i),s=new Set(Object.keys(i).map(n=>{var r;return null===(r=/component\.(.*)/.exec(n))||void 0===r?void 0:r[1];}).filter(nA.defined)),{marks:l}=n,u=[],c=[],f=[...l],{width:d,height:h}=function(n){let{height:r,width:i,padding:a=0,paddingLeft:o=a,paddingRight:s=a,paddingTop:l=a,paddingBottom:u=a,margin:c=16,marginLeft:f=c,marginRight:d=c,marginTop:h=c,marginBottom:p=c,inset:m=0,insetLeft:g=m,insetRight:v=m,insetTop:y=m,insetBottom:_=m}=n,b=n=>"auto"===n?20:n;return{width:i-b(o)-b(s)-f-d-g-v,height:r-b(l)-b(u)-h-p-y-_};}(n),p={options:n,width:d,height:h};for(;f.length;){let[n]=f.splice(0,1),i=yield rH(n,r),{type:l=(0,nA.error)("G2Mark type is required."),key:d}=i;if(s.has(l))c.push(i);else{let{props:n={}}=o(l),{composite:r=!0}=n;if(r){let{data:n}=i,r=Object.assign(Object.assign({},i),{data:n?Array.isArray(n)?n:n.value:n}),o=yield a(r,p),s=Array.isArray(o)?o:[o];f.unshift(...s.map((n,r)=>Object.assign(Object.assign({},n),{key:`${d}-${r}`})));}else u.push(i);}}return Object.assign(Object.assign({},n),{marks:u,components:c});});}(n,r)));n.interaction=a.interaction,n.coordinate=a.coordinate,n.marks=[...a.marks,...a.components];let o=(0,rn.coordinate2Transform)(a,i);return rD((yield rL(o,r)),o,i);});}function rL(n,r){return rR(this,void 0,void 0,function*(){let{library:i}=r,[a]=(0,rr.useLibrary)("theme",i),[,o]=(0,rr.useLibrary)("mark",i),{theme:s,marks:l,coordinates:u=[]}=n,c=a(rV(s)),f=new Map;for(let n of l){let{type:i}=n,{props:a={}}=o(i),s=yield(0,rO.initializeMark)(n,a,r);if(s){let[n,r]=s;f.set(n,r);}}for(let n of(0,nE.default)(Array.from(f.values()).flatMap(n=>n.channels),({scaleKey:n})=>n).values()){let r=n.reduce((n,{scale:r})=>(0,nS.default)(n,r),{}),{scaleKey:a}=n[0],{values:o}=n[0],s=Array.from(new Set(o.map(n=>n.field).filter(nA.defined))),l=(0,nS.default)({guide:{title:0===s.length?void 0:s},field:s[0]},r),{name:f}=n[0],d=n.flatMap(({values:n})=>n.map(n=>n.value)),h=Object.assign(Object.assign({},(0,ri.inferScale)(f,d,l,u,c,i)),{uid:Symbol("scale"),key:a});n.forEach(n=>n.scale=h);}return f;});}function rN(n,r,i,a){let o=n.theme,s="string"==typeof r&&o[r]||{};return a((0,nS.default)(s,Object.assign({type:r},i)));}function rD(n,r,i){var a;let[o]=(0,rr.useLibrary)("mark",i),[s]=(0,rr.useLibrary)("theme",i),[l]=(0,rr.useLibrary)("labelTransform",i),{key:u,frame:c=!1,theme:f,clip:d,style:h={},labelTransform:p=[]}=r,m=s(rV(f)),g=Array.from(n.values()),v=(function(n,r,i){let{coordinates:a=[],title:o}=r,[,s]=(0,rr.useLibrary)("component",i),l=n.filter(({guide:n})=>null!==n),u=[],c=function(n,r,i){let[,a]=(0,rr.useLibrary)("component",i),{coordinates:o}=n;function s(n,r,i,s){let l=function(n,r,i=[]){return"x"===n?(0,rn.isTranspose)(i)?`${r}Y`:`${r}X`:"y"===n?(0,rn.isTranspose)(i)?`${r}X`:`${r}Y`:null;}(r,n,o);if(!s||!l)return;let{props:u}=a(l),{defaultPosition:c,defaultSize:f,defaultOrder:d,defaultCrossPadding:[h]}=u;return Object.assign(Object.assign({position:c,defaultSize:f,order:d,type:l,crossPadding:h},s),{scales:[i]});}return r.filter(n=>n.slider||n.scrollbar).flatMap(n=>{let{slider:r,scrollbar:i,name:a}=n;return[s("slider",a,n,r),s("scrollbar",a,n,i)];}).filter(n=>!!n);}(r,n,i);if(u.push(...c),o){let{props:n}=s("title"),{defaultPosition:r,defaultOrientation:i,defaultOrder:a,defaultSize:l,defaultCrossPadding:c}=n;u.push(Object.assign({type:"title",position:r,orientation:i,order:a,crossPadding:c[0],defaultSize:l},"string"==typeof o?{title:o}:o));}return(function(n,r){let i=n.filter(n=>(0,ri.isValidScale)(n));return[...function(n,r){let i=["shape","size","color","opacity"],a=(n,r)=>"constant"===n&&"size"===r,o=n.filter(({type:n,name:r})=>"string"==typeof n&&i.includes(r)&&!a(n,r)),s=o.filter(({type:n})=>"constant"===n),l=o.filter(({type:n})=>"constant"!==n),u=new Map((0,nE.groups)(l,n=>n.field?n.field:Symbol("independent")).map(([n,r])=>[n,[...r,...s]]).filter(([,n])=>n.some(n=>"constant"!==n.type)));if(0===u.size)return[];let c=n=>n.sort(([n],[r])=>n.localeCompare(r));return Array.from(u).map(([,n])=>{let r=(0,n1.combine)(n).sort((n,r)=>r.length-n.length).map(n=>({combination:n,option:n.map(n=>[n.name,function(n){let{type:r}=n;return"string"!=typeof r?null:r in ra?"continuous":r in rs?"discrete":r in ro?"distribution":r in rl?"constant":null;}(n)])}));for(let{option:n,combination:i}of r)if(!n.every(n=>"constant"===n[1])&&n.every(n=>"discrete"===n[1]||"constant"===n[1]))return["legendCategory",i];for(let[n,i]of rt)for(let{option:a,combination:o}of r)if(i.some(n=>(0,n3.default)(c(n),c(a))))return[n,o];return null;}).filter(nA.defined);}(i,0),...i.map(n=>{let{name:i}=n;if((0,rn.isHelix)(r)||(0,rn.isTheta)(r)||(0,rn.isTranspose)(r)&&((0,rn.isPolar)(r)||(0,rn.isRadial)(r)))return null;if(i.startsWith("x"))return(0,rn.isPolar)(r)?["axisArc",[n]]:(0,rn.isRadial)(r)?["axisLinear",[n]]:[(0,rn.isTranspose)(r)?"axisY":"axisX",[n]];if(i.startsWith("y"))return(0,rn.isPolar)(r)?["axisLinear",[n]]:(0,rn.isRadial)(r)?["axisArc",[n]]:[(0,rn.isTranspose)(r)?"axisX":"axisY",[n]];if(i.startsWith("z"))return["axisZ",[n]];if(i.startsWith("position")){if((0,rn.isRadar)(r))return["axisRadar",[n]];if(!(0,rn.isPolar)(r))return["axisY",[n]];}return null;}).filter(nA.defined)];})(l,a).forEach(([n,r])=>{let{props:i}=s(n),{defaultPosition:o,defaultPlane:c="xy",defaultOrientation:f,defaultSize:d,defaultOrder:h,defaultLength:p,defaultPadding:m=[0,0],defaultCrossPadding:g=[0,0]}=i,{guide:v,field:y}=(0,nS.default)({},...r);for(let i of Array.isArray(v)?v:[v]){let[s,v]=function(n,r,i,a,o,s,l){let[u]=rd(l),c=[a.position||r,null!=u?u:i];return"string"==typeof n&&n.startsWith("axis")?function(n,r,i,a,o){let{name:s}=i[0];if("axisRadar"===n){let n=a.filter(n=>n.name.startsWith("position")),r=function(n){let r=/position(\d*)/g.exec(n);return r?+r[1]:null;}(s);if(null===r)return[null,null];let[i,l]=rd(o);return["center",(l-i)/((0,rn.isRadar)(o)?n.length:n.length-1)*r+i];}if("axisY"===n&&(0,rn.isParallel)(o))return(0,rn.isTranspose)(o)?["center","horizontal"]:["center","vertical"];if("axisLinear"===n){let[n]=rd(o);return["center",n];}return"axisArc"===n?"inner"===r[0]?["inner",null]:["outer",null]:(0,rn.isPolar)(o)||(0,rn.isRadial)(o)?["center",null]:"axisX"===n&&(0,rn.isReflect)(o)||"axisX"===n&&(0,rn.isReflectY)(o)?["top",null]:r;}(n,c,o,s,l):"string"==typeof n&&n.startsWith("legend")&&(0,rn.isPolar)(l)&&"center"===a.position?["center","vertical"]:c;}(n,o,f,i,r,l,a);if(!s&&!v)continue;let _="left"===s||"right"===s,b=_?m[1]:m[0],x=_?g[1]:g[0],{size:E,order:w=h,length:S=p,padding:T=b,crossPadding:A=x}=i;u.push(Object.assign(Object.assign({title:y},i),{defaultSize:d,length:S,position:s,plane:c,orientation:v,padding:T,order:w,crossPadding:A,size:E,type:n,scales:r}));}}),u;})(function(n,r,i){var a;for(let[r]of i.entries())if("cell"===r.type)return n.filter(n=>"shape"!==n.name);if(1!==r.length||n.some(n=>"shape"===n.name))return n;let{defaultShape:o}=r[0];if(!["point","line","rect","hollow"].includes(o))return n;let s=(null===(a=n.find(n=>"color"===n.name))||void 0===a?void 0:a.field)||null;return[...n,{field:s,name:"shape",type:"constant",domain:[],range:[{point:"point",line:"hyphen",rect:"square",hollow:"hollow"}[o]]}];}(Array.from((0,ri.collectScales)(g,r)),g,n),r,i).map(n=>{let r=(0,nS.default)(n,n.style);return delete r.style,r;}),y=function(n,r,i,a){var o,s;let{width:l,height:u,depth:c,x:f=0,y:d=0,z:h=0,inset:p=null!==(o=i.inset)&&void 0!==o?o:0,insetLeft:m=p,insetTop:g=p,insetBottom:v=p,insetRight:y=p,margin:_=null!==(s=i.margin)&&void 0!==s?s:0,marginLeft:b=_,marginBottom:x=_,marginTop:E=_,marginRight:w=_,padding:S=i.padding,paddingBottom:T=S,paddingLeft:A=S,paddingRight:C=S,paddingTop:O=S}=function(n,r,i,a){let{coordinates:o}=r;if(!(0,rn.isPolar)(o)&&!(0,rn.isRadial)(o))return r;let s=n.filter(n=>"string"==typeof n.type&&n.type.startsWith("axis"));if(0===s.length)return r;let l=s.map(n=>{let r="axisArc"===n.type?"arc":"linear";return rg(n,r,i);}),u=(0,n5.default)(l,n=>{var r;return null!==(r=n.labelSpacing)&&void 0!==r?r:0;}),c=s.flatMap((n,r)=>rp(l[r],rh(n,a))).filter(nA.defined),f=(0,n5.default)(c,n=>n.height)+u,d=s.flatMap((n,r)=>rm(l[r])).filter(n=>null!==n),h=0===d.length?0:(0,n5.default)(d,n=>n.height),{inset:p=f,insetLeft:m=p,insetBottom:g=p,insetTop:v=p+h,insetRight:y=p}=r;return Object.assign(Object.assign({},r),{insetLeft:m,insetBottom:g,insetTop:v,insetRight:y});}(n,r,i,a),M=1/4,R=(n,i,a,o,s)=>{let{marks:l}=r;if(0===l.length||n-o-s-n*M>0)return[o,s];let u=n*(1-M);return["auto"===i?u*o/(o+s):o,"auto"===a?u*s/(o+s):s];},P=n=>"auto"===n?20:null!=n?n:20,k=P(O),I=P(T),{paddingLeft:L,paddingRight:N}=rA(n,u-k-I,[k+E,I+x],["left","right"],r,i,a),D=l-b-w,[F,B]=R(D,A,C,L,N),j=D-F-B,{paddingTop:z,paddingBottom:U}=rA(n,j,[F+b,B+w],["bottom","top"],r,i,a),V=u-x-E,[G,H]=R(V,T,O,U,z);return{width:l,height:u,depth:c,insetLeft:m,insetTop:g,insetBottom:v,insetRight:y,innerWidth:j,innerHeight:V-G-H,paddingLeft:F,paddingRight:B,paddingTop:H,paddingBottom:G,marginLeft:b,marginBottom:x,marginTop:E,marginRight:w,x:f,y:d,z:h};}(v,r,m,i),_=(0,rn.createCoordinate)(y,r,i),b=c?(0,nS.default)({mainLineWidth:1,mainStroke:"#000"},h):h;!function(n,r,i){let a=(0,nE.default)(n,n=>`${n.plane||"xy"}-${n.position}`),{paddingLeft:o,paddingRight:s,paddingTop:l,paddingBottom:u,marginLeft:c,marginTop:f,marginBottom:d,marginRight:h,innerHeight:p,innerWidth:m,insetBottom:g,insetLeft:v,insetRight:y,insetTop:_,height:b,width:x,depth:E}=i,w={xy:rC({width:x,height:b,paddingLeft:o,paddingRight:s,paddingTop:l,paddingBottom:u,marginLeft:c,marginTop:f,marginBottom:d,marginRight:h,innerHeight:p,innerWidth:m,insetBottom:g,insetLeft:v,insetRight:y,insetTop:_}),yz:rC({width:E,height:b,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:E,innerHeight:b,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0}),xz:rC({width:x,height:E,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:x,innerHeight:E,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0})};for(let[n,i]of a.entries()){let[a,o]=n.split("-"),s=w[a][o],[l,u]=(0,n1.divide)(i,n=>"string"==typeof n.type&&!!("center"===o||n.type.startsWith("axis")&&["inner","outer"].includes(o)));l.length&&function(n,r,i,a){let[o,s]=(0,n1.divide)(n,n=>!!("string"==typeof n.type&&n.type.startsWith("axis")));(function(n,r,i,a){var o;"center"===a?(0,rS.isRadar)(r)?function(n,r,i,a){let[o,s,l,u]=i;for(let r of n)r.bbox={x:o,y:s,width:l,height:u},r.radar={index:n.indexOf(r),count:n.length};}(n,0,i,0):(0,rS.isPolar)(r)?function(n,r,i){let[a,o,s,l]=i;for(let r of n)r.bbox={x:a,y:o,width:s,height:l};}(n,0,i):(0,rS.isParallel)(r)&&("horizontal"===(o=n[0].orientation)?function(n,r,i){let[a,o,s]=i,l=Array(n.length).fill(0),u=r.map(l).filter((n,r)=>r%2==1).map(n=>n+o);for(let r=0;r<n.length;r++){let i=n[r],o=u[r],l=u[r+1]-o;i.bbox={x:a,y:o,width:s,height:l};}}(n,r,i):"vertical"===o&&function(n,r,i){let[a,o,,s]=i,l=Array(n.length).fill(0),u=r.map(l).filter((n,r)=>r%2==0).map(n=>n+a);for(let r=0;r<n.length;r++){let i=n[r],a=u[r],l=u[r+1]-a;i.bbox={x:a,y:o,width:l,height:s};}}(n,r,i)):"inner"===a?function(n,r,i){let[a,o,,s]=i,[l,u]=r.getCenter(),[c]=(0,rS.radiusOf)(r),f=s/2*c,d=l-f,h=u-f;for(let r=0;r<n.length;r++)n[r].bbox={x:a+d,y:o+h,width:2*f,height:2*f};}(n,r,i):"outer"===a&&function(n,r,i){let[a,o,s,l]=i;for(let r of n)r.bbox={x:a,y:o,width:s,height:l};}(n,0,i);})(o,r,i,a),function(n,r,i){if(0===n.length)return;let[a,o,s,l]=i,[u]=(0,rS.radiusOf)(r),c=l/2*u/Math.sqrt(2),f=a+s/2,d=o+l/2;for(let r=0;r<n.length;r++)n[r].bbox={x:f-c,y:d-c,width:2*c,height:2*c};}(s,r,i);}(l,r,s,o),u.length&&function(n,r,i){let[a,o,s,l,u,c,f,d,h]=i,[p,m,g,v,y,_,b,x]="vertical"===u?["y",o,"x",a,"height",l,"width",s]:["x",a,"y",o,"width",s,"height",l];n.sort((n,r)=>null==f?void 0:f(n.order,r.order));let E=n=>"title"===n||"group"===n||n.startsWith("legend"),w=(n,r,i)=>void 0===i?r:E(n)?i:r,S=(n,r,i)=>void 0===i?r:E(n)?i:r;for(let r=0,i=c?m+_:m;r<n.length;r++){let a=n[r],{crossPadding:o=0,type:s}=a,{size:l}=a;a.bbox={[p]:c?i-l-o:i+o,[g]:S(s,v,d),[y]:l,[b]:w(s,x,h)},i+=(l+o)*(c?-1:1);}for(let r of n.filter(n=>"group"===n.type)){let{bbox:n,children:i}=r,a=n[b],o=a/i.length,s=i.reduce((n,r)=>{var i;return(null===(i=r.layout)||void 0===i?void 0:i.justifyContent)||n;},"flex-start"),l=i.map((n,r)=>{let{length:a=o,padding:s=0}=n;return a+(r===i.length-1?0:s);}),u=a-(0,n8.default)(l),c="flex-start"===s?0:"center"===s?u/2:u;for(let r=0,a=n[g]+c;r<i.length;r++){let o=i[r],{padding:u=0}=o,c=r===i.length-1?0:u;o.bbox={[y]:n[y],[p]:n[p],[g]:a,[b]:l[r]-c},(0,nS.default)(o,{layout:{justifyContent:s}}),a+=l[r];}}}(i,0,s);}}(rf(v),_,y),function(n){let r=n.find(({type:n})=>"axisX"===n),i=n.find(({type:n})=>"axisY"===n),a=n.find(({type:n})=>"axisZ"===n);r&&i&&a&&(r.plane="xy",i.plane="xy",a.plane="yz",a.origin=[r.bbox.x,r.bbox.y,0],a.eulerAngles=[0,-90,0],a.bbox.x=r.bbox.x,a.bbox.y=r.bbox.y,n.push(Object.assign(Object.assign({},r),{plane:"xz",showLabel:!1,showTitle:!1,origin:[r.bbox.x,r.bbox.y,0],eulerAngles:[-90,0,0]})),n.push(Object.assign(Object.assign({},i),{plane:"yz",showLabel:!1,showTitle:!1,origin:[i.bbox.x+i.bbox.width,i.bbox.y,0],eulerAngles:[0,-90,0]})),n.push(Object.assign(Object.assign({},a),{plane:"xz",actualPosition:"left",showLabel:!1,showTitle:!1,eulerAngles:[90,-90,0]})));}(v);let x=new Map(Array.from(n.values()).flatMap(n=>{let{channels:r}=n;return r.map(({scale:n})=>[n.uid,(0,ri.useRelationScale)(n,i)]);}));(0,ri.groupTransform)(n,x);let E={};for(let n of v){let{scales:r=[]}=n,o=[];for(let n of r){let{name:r,uid:s}=n,l=null!==(a=x.get(s))&&void 0!==a?a:(0,ri.useRelationScale)(n,i);o.push(l),"y"===r&&l.update(Object.assign(Object.assign({},l.getOptions()),{xScale:E.x})),(0,ri.assignScale)(E,{[r]:l});}n.scaleInstances=o;}let w=[],S=new Map;for(let[r,i]of n.entries()){let{children:n,dataDomain:a,modifier:s,key:l,data:c}=r;S.set(l,c);let{index:f,channels:d,tooltip:h}=i,p=Object.fromEntries(d.map(({name:n,scale:r})=>[n,r])),m=(0,n1.mapObject)(p,({uid:n})=>x.get(n));(0,ri.assignScale)(E,m);let g=(0,ri.applyScale)(d,m),[v,b,T]=function([n,r,i]){if(i)return[n,r,i];let a=[],o=[];for(let i=0;i<n.length;i++){let s=n[i],l=r[i];l.every(([n,r])=>(0,nA.defined)(n)&&(0,nA.defined)(r))&&(a.push(s),o.push(l));}return[a,o];}(o(r)(f,m,g,_)),A=a||v.length,C=s?s(b,A,y):[],O=n=>{var r,i;return null===(i=null===(r=h.title)||void 0===r?void 0:r[n])||void 0===i?void 0:i.value;},M=n=>h.items.map(r=>r[n]),R=v.map((n,r)=>{let i=Object.assign({points:b[r],transform:C[r],index:n,markKey:l,viewKey:u,data:c[n]},h&&{title:O(n),items:M(n)});for(let[a,o]of Object.entries(g))i[a]=o[n],T&&(i[`series${(0,nK.default)(a)}`]=T[r].map(n=>o[n]));return T&&(i.seriesIndex=T[r]),T&&h&&(i.seriesItems=T[r].map(n=>M(n)),i.seriesTitle=T[r].map(n=>O(n))),i;});i.data=R,i.index=v;let P=null==n?void 0:n(R,m,y);w.push(...P||[]);}return[{layout:y,theme:m,coordinate:_,markState:n,key:u,clip:d,scale:E,style:b,components:v,data:S,labelTransform:(0,nA.compose)(p.map(l))},w];}function rF(n,r,i,a){return rR(this,void 0,void 0,function*(){let{library:o}=a,{components:s,theme:l,layout:u,markState:c,coordinate:f,key:d,style:h,clip:p,scale:m}=n,{x:g,y:v,width:y,height:_}=u,b=rP(u,["x","y","width","height"]),x=["view","plot","main","content"],E=x.map((n,r)=>r),w=x.map(n=>(0,nA.maybeSubObject)(Object.assign({},l.view,h),n)),S=["a","margin","padding","inset"].map(n=>(0,nA.subObject)(b,n)),T=n=>n.style("x",n=>R[n].x).style("y",n=>R[n].y).style("width",n=>R[n].width).style("height",n=>R[n].height).each(function(n,r,i){!function(n,r){for(let[i,a]of Object.entries(r))n.style(i,a);}((0,nT.select)(i),w[n]);}),A=0,C=0,O=y,M=_,R=E.map(n=>{let{left:r=0,top:i=0,bottom:a=0,right:o=0}=S[n];return A+=r,C+=i,O-=r+o,M-=i+a,{x:A,y:C,width:O,height:M};});r.selectAll(r$(r_.AREA_CLASS_NAME)).data(E.filter(n=>(0,nA.defined)(w[n])),n=>x[n]).join(n=>n.append("rect").attr("className",r_.AREA_CLASS_NAME).style("zIndex",-2).call(T),n=>n.call(T),n=>n.remove());let P=function(n){let r=-1/0,i=1/0;for(let[a,o]of n){let{animate:n={}}=a,{data:s}=o,{enter:l={},update:u={},exit:c={}}=n,{type:f,duration:d=300,delay:h=0}=u,{type:p,duration:m=300,delay:g=0}=l,{type:v,duration:y=300,delay:_=0}=c;for(let n of s){let{updateType:a=f,updateDuration:o=d,updateDelay:s=h,enterType:l=p,enterDuration:u=m,enterDelay:c=g,exitDuration:b=y,exitDelay:x=_,exitType:E=v}=n;(void 0===a||a)&&(r=Math.max(r,o+s),i=Math.min(i,s)),(void 0===E||E)&&(r=Math.max(r,b+x),i=Math.min(i,x)),(void 0===l||l)&&(r=Math.max(r,u+c),i=Math.min(i,c));}}return r===-1/0?null:[i,r-i];}(c),k=!!P&&{duration:P[1]};for(let[,n]of(0,nE.groups)(s,n=>`${n.type}-${n.position}`))n.forEach((n,r)=>n.index=r);let I=r.selectAll(r$(r_.COMPONENT_CLASS_NAME)).data(s,n=>`${n.type}-${n.position}-${n.index}`).join(n=>n.append("g").style("zIndex",({zIndex:n})=>n||-1).attr("className",r_.COMPONENT_CLASS_NAME).append(n=>rc((0,nS.default)({animate:k,scale:m},n),f,l,o,c)),n=>n.transition(function(n,r,i){let{preserve:a=!1}=n;if(a)return;let{attributes:s}=rc((0,nS.default)({animate:k,scale:m},n),f,l,o,c),[u]=i.childNodes;return u.update(s,!1);})).transitions();i.push(...I.flat().filter(nA.defined));let L=r.selectAll(r$(r_.PLOT_CLASS_NAME)).data([u],()=>d).join(n=>n.append("rect").style("zIndex",0).style("fill","transparent").attr("className",r_.PLOT_CLASS_NAME).call(rW).call(rq,Array.from(c.keys())).call(rY,p),n=>n.call(rq,Array.from(c.keys())).call(n=>P?function(n,r){let[i,a]=r;n.transition(function(n,r,o){let{transform:s,width:l,height:u}=o.style,{paddingLeft:c,paddingTop:f,innerWidth:d,innerHeight:h,marginLeft:p,marginTop:m}=n,g=[{transform:s,width:l,height:u},{transform:`translate(${c+p}, ${f+m})`,width:d,height:h}];return o.animate(g,{delay:i,duration:a,fill:"both"});});}(n,P):rW(n)).call(rY,p)).transitions();for(let[s,l]of(i.push(...L.flat()),c.entries())){let{data:u}=l,{key:c,class:f,type:d}=s,h=r.select(`#${c}`),p=function(n,r,i,a){let{library:o}=a,[s]=(0,rr.useLibrary)("shape",o),{data:l,encode:u}=n,{defaultShape:c,data:f,shape:d}=r,h=(0,n1.mapObject)(u,n=>n.value),p=f.map(n=>n.points),{theme:m,coordinate:g}=i,{type:v,style:y={}}=n,_=Object.assign(Object.assign({},a),{document:(0,rr.documentOf)(a),coordinate:g,theme:m});return r=>{let{shape:i=c}=y,{shape:a=i,points:o,seriesIndex:u,index:f}=r,g=Object.assign(Object.assign({},rP(r,["shape","points","seriesIndex","index"])),{index:f}),b=u?u.map(n=>l[n]):l[f],x=u||f,E=(0,n1.mapObject)(y,n=>rB(n,b,x,l,{channel:h}));return(d[a]?d[a](E,_):s(Object.assign(Object.assign({},E),{type:rX(n,a)}),_))(o,g,rj(m,v,a,c),p);};}(s,l,n,a),m=rz("enter",s,l,n,o),g=rz("update",s,l,n,o),v=rz("exit",s,l,n,o),y=function(n,r,i,a){let o=n.node().parentElement;return o&&"function"==typeof o.findAll?o.findAll(n=>void 0!==n.style.facet&&n.style.facet===i&&n!==r.node()).flatMap(n=>n.getElementsByClassName(a)):[];}(r,h,f,"element"),_=h.selectAll(r$(r_.ELEMENT_CLASS_NAME)).selectFacetAll(y).data(u,n=>n.key,n=>n.groupKey).join(n=>n.append(p).attr("className",r_.ELEMENT_CLASS_NAME).attr("markType",d).transition(function(n,r,i){return m(n,[i]);}),n=>n.call(n=>{let r=n.parent(),i=(0,nA.useMemo)(n=>{let[r,i]=n.getBounds().min;return[r,i];});n.transition(function(n,a,o){!function(n,r,i){if(!n.__facet__)return;let a=n.parentNode.parentNode,o=r.parentNode,[s,l]=i(a),[u,c]=i(o),f=`translate(${s-u}, ${l-c})`;(0,nA.appendTransform)(n,f),r.append(n);}(o,r,i);let s=p(n,a),l=g(n,[o],[s]);return(null==l?void 0:l.length)||(o.nodeName===s.nodeName&&"g"!==s.nodeName?(0,nA.copyAttributes)(o,s):(o.parentNode.replaceChild(s,o),s.className=r_.ELEMENT_CLASS_NAME,s.markType=d,s.__data__=o.__data__)),l;}).attr("markType",d).attr("className",r_.ELEMENT_CLASS_NAME);}),n=>n.each(function(n,r,i){i.__removed__=!0;}).transition(function(n,r,i){return v(n,[i]);}).remove(),n=>n.append(p).attr("className",r_.ELEMENT_CLASS_NAME).attr("markType",d).transition(function(n,r,i){let{__fromElements__:a}=i,o=g(n,a,[i]);return new nT.Selection(a,null,i.parentNode).transition(o).remove(),o;}),n=>n.transition(function(n,r,i){let a=new nT.Selection([],i.__toData__,i.parentNode).append(p).attr("className",r_.ELEMENT_CLASS_NAME).attr("markType",d).nodes();return g(n,[i],a);}).remove()).transitions();i.push(..._.flat());}!function(n,r,i,a,o){let[s]=(0,rr.useLibrary)("labelTransform",a),{markState:l,labelTransform:u}=n,c=r.select(r$(r_.LABEL_LAYER_CLASS_NAME)).node(),f=new Map,d=new Map,h=Array.from(l.entries()).flatMap(([i,s])=>{let{labels:l=[],key:u}=i,c=function(n,r,i,a,o){let[s]=(0,rr.useLibrary)("shape",a),{data:l,encode:u}=n,{data:c,defaultLabelShape:f}=r,d=c.map(n=>n.points),h=(0,n1.mapObject)(u,n=>n.value),{theme:p,coordinate:m}=i,g=Object.assign(Object.assign({},o),{document:(0,rr.documentOf)(o),theme:p,coordinate:m});return n=>{let{index:r,points:i}=n,a=l[r],{formatter:o=n=>`${n}`,transform:u,style:c,render:m,selector:v,element:y}=n,_=rP(n,["formatter","transform","style","render","selector","element"]),b=(0,n1.mapObject)(Object.assign(Object.assign({},_),c),n=>rB(n,a,r,l,{channel:h,element:y})),{shape:x=f,text:E}=b,w=rP(b,["shape","text"]),S="string"==typeof o?(0,n0.format)(o):o,T=Object.assign(Object.assign({},w),{text:S(E,a,r,l),datum:a});return s(Object.assign({type:`label.${x}`,render:m},w),g)(i,T,rj(p,"label",x,"label"),d);};}(i,s,n,a,o),h=r.select(`#${u}`).selectAll(r$(r_.ELEMENT_CLASS_NAME)).nodes().filter(n=>!n.__removed__);return l.flatMap((n,r)=>{let{transform:i=[]}=n,a=rP(n,["transform"]);return h.flatMap(i=>{let o=function(n,r,i){let{seriesIndex:a,seriesKey:o,points:s,key:l,index:u}=i.__data__,c=function(n){let r=n.cloneNode(!0),i=n.getAnimations();r.style.visibility="hidden",i.forEach(n=>{let i=n.effect.getKeyframes();r.attr(i[i.length-1]);}),n.parentNode.appendChild(r);let a=r.getLocalBounds();r.destroy();let{min:o,max:s}=a;return[o,s];}(i);if(!a)return[Object.assign(Object.assign({},n),{key:`${l}-${r}`,bounds:c,index:u,points:s,dependentElement:i})];let f=function(n){let{selector:r}=n;if(!r)return null;if("function"==typeof r)return r;if("first"===r)return n=>[n[0]];if("last"===r)return n=>[n[n.length-1]];throw Error(`Unknown selector: ${r}`);}(n),d=a.map((a,l)=>Object.assign(Object.assign({},n),{key:`${o[l]}-${r}`,bounds:[s[l]],index:a,points:s,dependentElement:i}));return f?f(d):d;}(a,r,i);return o.forEach(r=>{f.set(r,n=>c(Object.assign(Object.assign({},n),{element:i}))),d.set(r,n);}),o;});});}),p=(0,nT.select)(c).selectAll(r$(r_.LABEL_CLASS_NAME)).data(h,n=>n.key).join(n=>n.append(n=>f.get(n)(n)).attr("className",r_.LABEL_CLASS_NAME),n=>n.each(function(n,r,i){let a=f.get(n)(n);(0,nA.copyAttributes)(i,a);}),n=>n.remove()).nodes(),m=(0,nE.default)(p,n=>d.get(n.__data__)),{coordinate:g,layout:v}=n,y={canvas:o.canvas,coordinate:g,layout:v};for(let[n,r]of m){let{transform:i=[]}=n;(0,nA.compose)(i.map(s))(r,y);}u&&u(p,y);}(n,r,0,o,a);});}function rB(n,r,i,a,o){return"function"==typeof n?n(r,i,a,o):"string"!=typeof n?n:(0,nA.isStrictObject)(r)&&void 0!==r[n]?r[n]:n;}function rj(n,r,i,a){if("string"!=typeof r)return;let{color:o}=n,s=n[r]||{};return Object.assign({color:o},s[i]||s[a]);}function rz(n,r,i,a,o){var s,l;let[,u]=(0,rr.useLibrary)("shape",o),[c]=(0,rr.useLibrary)("animation",o),{defaultShape:f,shape:d}=i,{theme:h,coordinate:p}=a,m=(0,nK.default)(n),g=`default${m}Animation`,{[g]:v}=(null===(s=d[f])||void 0===s?void 0:s.props)||u(rX(r,f)).props,{[n]:y={}}=h,_=(null===(l=r.animate)||void 0===l?void 0:l[n])||{},b={coordinate:p};return(r,i,a)=>{let{[`${n}Type`]:o,[`${n}Delay`]:s,[`${n}Duration`]:l,[`${n}Easing`]:u}=r,f=Object.assign({type:o||v},_);if(!f.type)return null;let d=c(f,b)(i,a,(0,nS.default)(y,{delay:s,duration:l,easing:u}));return(Array.isArray(d)?d:[d]).filter(Boolean);};}function rU(n){return n.finished.then(()=>{n.cancel();}),n;}function rV(n={}){if("string"==typeof n)return{type:n};let{type:r="light"}=n;return Object.assign(Object.assign({},rP(n,["type"])),{type:r});}function rG(n){let{interaction:r={}}=n;return Object.entries((0,nS.default)({event:!0,tooltip:!0,sliderFilter:!0,legendFilter:!0,scrollbarFilter:!0},r)).reverse();}function rH(n,r){return rR(this,void 0,void 0,function*(){let{data:i}=n,a=rP(n,["data"]);if(void 0==i)return n;let[,{data:o}]=yield(0,rM.applyDataTransform)([],{data:i},r);return Object.assign({data:o},a);});}function rW(n){n.style("transform",n=>`translate(${n.paddingLeft+n.marginLeft}, ${n.paddingTop+n.marginTop})`).style("width",n=>n.innerWidth).style("height",n=>n.innerHeight);}function rX(n,r){let{type:i}=n;return"string"==typeof r?`${i}.${r}`:r;}function rq(n,r){let i=n=>void 0!==n.class?`${n.class}`:"";0!==n.nodes().length&&(n.selectAll(r$(r_.MAIN_LAYER_CLASS_NAME)).data(r,n=>n.key).join(n=>n.append("g").attr("className",r_.MAIN_LAYER_CLASS_NAME).attr("id",n=>n.key).style("facet",i).style("fill","transparent").style("zIndex",n=>{var r;return null!==(r=n.zIndex)&&void 0!==r?r:0;}),n=>n.style("facet",i).style("fill","transparent").style("zIndex",n=>{var r;return null!==(r=n.zIndex)&&void 0!==r?r:0;}),n=>n.remove()),n.select(r$(r_.LABEL_LAYER_CLASS_NAME)).node()||n.append("g").attr("className",r_.LABEL_LAYER_CLASS_NAME).style("zIndex",0));}function r$(...n){return n.map(n=>`.${n}`).join("");}function rY(n,r){n.node()&&n.style("clipPath",n=>{if(!r)return null;let{paddingTop:i,paddingLeft:a,marginLeft:o,marginTop:s,innerWidth:l,innerHeight:u}=n;return new eL.Rect({style:{x:a+o,y:i+s,width:l,height:u}});});}function rZ(n){let{style:r,scale:i,type:a}=n,o={},s=(0,nb.default)(r,"columnWidthRatio");return s&&"interval"===a&&(o.x=Object.assign(Object.assign({},null==i?void 0:i.x),{padding:1-s})),Object.assign(Object.assign({},n),{scale:Object.assign(Object.assign({},i),o)});}function rK(n,r={},i=!1,a=!0){let{canvas:o,emitter:s}=r;o&&(function(n){let r=n.getRoot().querySelectorAll(`.${r_.VIEW_CLASS_NAME}`);null==r||r.forEach(n=>{let{nameInteraction:r=new Map}=n;(null==r?void 0:r.size)>0&&Array.from(null==r?void 0:r.values()).forEach(n=>{null==n||n.destroy();});});}(o),i?o.destroy():o.destroyChildren()),a&&s.off();}var rQ=i("b591bdf1"),rJ=i("87c560a4");let r0=n=>n?parseInt(n):0;function r1(n,r){let i=[n];for(;i.length;){let n=i.shift();for(let a of(r&&r(n),n.children||[]))i.push(a);}}class r2{constructor(n={},r){this.parentNode=null,this.children=[],this.index=0,this.type=r,this.value=n;}map(n=n=>n){let r=n(this.value);return this.value=r,this;}attr(n,r){return 1==arguments.length?this.value[n]:this.map(i=>(i[n]=r,i));}append(n){let r=new n({});return r.children=[],this.push(r),r;}push(n){return n.parentNode=this,n.index=this.children.length,this.children.push(n),this;}remove(){let n=this.parentNode;if(n){let{children:r}=n,i=r.findIndex(n=>n===this);r.splice(i,1);}return this;}getNodeByKey(n){let r=null;return r1(this,i=>{n===i.attr("key")&&(r=i);}),r;}getNodesByType(n){let r=[];return r1(this,i=>{n===i.type&&r.push(i);}),r;}getNodeByType(n){let r=null;return r1(this,i=>{r||n!==i.type||(r=i);}),r;}call(n,...r){return n(this.map(),...r),this;}getRoot(){let n=this;for(;n&&n.parentNode;)n=n.parentNode;return n;}}var r3=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let r4=["width","height","depth","padding","paddingLeft","paddingRight","paddingBottom","paddingTop","inset","insetLeft","insetRight","insetTop","insetBottom","margin","marginLeft","marginRight","marginTop","marginBottom","autoFit","theme","title","interaction"],r5="__remove__",r6="__callback__";function r8(n){return Object.assign(Object.assign({},n.value),{type:n.type});}function r7(n,r){let{width:i,height:a,autoFit:o,depth:s=0}=n,l=640,u=480;if(o){let{width:n,height:i}=function(n){let r=getComputedStyle(n),i=n.clientWidth||r0(r.width),a=n.clientHeight||r0(r.height);return{width:i-(r0(r.paddingLeft)+r0(r.paddingRight)),height:a-(r0(r.paddingTop)+r0(r.paddingBottom))};}(r);l=n||l,u=i||u;}return l=i||l,u=a||u,{width:Math.max((0,ns.default)(l)?l:1,1),height:Math.max((0,ns.default)(u)?u:1,1),depth:s};}var r9=i("2ef7fc5f");function ie(n){return r=>{for(let[i,a]of Object.entries(n)){let{type:n}=a;"value"===n?function(n,r,{key:i=r}){n.prototype[r]=function(n){return 0==arguments.length?this.attr(i):this.attr(i,n);};}(r,i,a):"array"===n?function(n,r,{key:i=r}){n.prototype[r]=function(n){if(0==arguments.length)return this.attr(i);if(Array.isArray(n))return this.attr(i,n);let r=[...this.attr(i)||[],n];return this.attr(i,r);};}(r,i,a):"object"===n?function(n,r,{key:i=r}){n.prototype[r]=function(n,r){if(0==arguments.length)return this.attr(i);if(1==arguments.length&&"string"!=typeof n)return this.attr(i,n);let a=this.attr(i)||{};return a[n]=1==arguments.length||r,this.attr(i,a);};}(r,i,a):"node"===n?function(n,r,{ctor:i}){n.prototype[r]=function(n){let a=this.append(i);return"mark"===r&&(a.type=n),a;};}(r,i,a):"container"===n?function(n,r,{ctor:i}){n.prototype[r]=function(){return this.type=null,this.append(i);};}(r,i,a):"mix"===n&&function(n,r,i){n.prototype[r]=function(n){if(0==arguments.length)return this.attr(r);if(Array.isArray(n))return this.attr(r,{items:n});if((0,nA.isStrictObject)(n)&&(void 0!==n.title||void 0!==n.items)||null===n||!1===n)return this.attr(r,n);let i=this.attr(r)||{},{items:a=[]}=i;return a.push(n),i.items=a,this.attr(r,i);};}(r,i,0);}return r;};}function it(n){return Object.fromEntries(Object.entries(n).map(([n,r])=>[n,{type:"node",ctor:r}]));}let ir={encode:{type:"object"},scale:{type:"object"},data:{type:"value"},transform:{type:"array"},style:{type:"object"},animate:{type:"object"},coordinate:{type:"object"},interaction:{type:"object"},label:{type:"array",key:"labels"},axis:{type:"object"},legend:{type:"object"},slider:{type:"object"},scrollbar:{type:"object"},state:{type:"object"},layout:{type:"object"},theme:{type:"object"},title:{type:"value"}},ii=Object.assign(Object.assign({},ir),{tooltip:{type:"mix"},viewStyle:{type:"object"}}),ia=Object.assign(Object.assign({},ir),{labelTransform:{type:"array"}});var io=this&&this.__decorate||function(n,r,i,a){var o,s=arguments.length,l=s<3?r:null===a?a=Object.getOwnPropertyDescriptor(r,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(n,r,i,a);else for(var u=n.length-1;u>=0;u--)(o=n[u])&&(l=(s<3?o(l):s>3?o(r,i,l):o(r,i))||l);return s>3&&l&&Object.defineProperty(r,i,l),l;};let is=class extends r2{changeData(n){var r;let i=this.getRoot();if(i)return this.attr("data",n),(null===(r=this.children)||void 0===r?void 0:r.length)&&this.children.forEach(r=>{r.attr("data",n);}),null==i?void 0:i.render();}getView(){let{views:n}=this.getRoot().getContext();if(null==n?void 0:n.length)return n.find(n=>n.key===this._key);}getScale(){var n;return null===(n=this.getView())||void 0===n?void 0:n.scale;}getScaleByChannel(n){let r=this.getScale();if(r)return r[n];}getCoordinate(){var n;return null===(n=this.getView())||void 0===n?void 0:n.coordinate;}getTheme(){var n;return null===(n=this.getView())||void 0===n?void 0:n.theme;}getGroup(){let n=this._key;if(n)return this.getRoot().getContext().canvas.getRoot().getElementById(n);}show(){let n=this.getGroup();n&&(n.isVisible()||(0,r9.show)(n));}hide(){let n=this.getGroup();n&&n.isVisible()&&(0,r9.hide)(n);}};is=io([ie(ia)],is);var il=this&&this.__decorate||function(n,r,i,a){var o,s=arguments.length,l=s<3?r:null===a?a=Object.getOwnPropertyDescriptor(r,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(n,r,i,a);else for(var u=n.length-1;u>=0;u--)(o=n[u])&&(l=(s<3?o(l):s>3?o(r,i,l):o(r,i))||l);return s>3&&l&&Object.defineProperty(r,i,l),l;};let iu=class extends r2{changeData(n){let r=this.getRoot();if(r)return this.attr("data",n),null==r?void 0:r.render();}getMark(){var n;let r=null===(n=this.getRoot())||void 0===n?void 0:n.getView();if(!r)return;let{markState:i}=r,a=Array.from(i.keys()).find(n=>n.key===this.attr("key"));return i.get(a);}getScale(){var n;let r=null===(n=this.getRoot())||void 0===n?void 0:n.getView();if(r)return null==r?void 0:r.scale;}getScaleByChannel(n){var r,i;let a=null===(r=this.getRoot())||void 0===r?void 0:r.getView();if(a)return null===(i=null==a?void 0:a.scale)||void 0===i?void 0:i[n];}getGroup(){let n=this.attr("key");if(n)return this.getRoot().getContext().canvas.getRoot().getElementById(n);}};iu=il([ie(ii)],iu);var ic=i("d0075e4a"),id=this&&this.__decorate||function(n,r,i,a){var o,s=arguments.length,l=s<3?r:null===a?a=Object.getOwnPropertyDescriptor(r,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(n,r,i,a);else for(var u=n.length-1;u>=0;u--)(o=n[u])&&(l=(s<3?o(l):s>3?o(r,i,l):o(r,i))||l);return s>3&&l&&Object.defineProperty(r,i,l),l;},ih=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let ip=()=>[["cartesian"]];ip.props={};let im=()=>[["transpose"],["translate",.5,.5],["reflect.x"],["translate",-.5,-.5]];im.props={transform:!0};let ig=(n={})=>Object.assign(Object.assign({},{startAngle:-Math.PI/2,endAngle:3*Math.PI/2,innerRadius:0,outerRadius:1}),n),iv=n=>{let{startAngle:r,endAngle:i,innerRadius:a,outerRadius:o}=ig(n);return[...im(),...(0,n7.Polar)({startAngle:r,endAngle:i,innerRadius:a,outerRadius:o})];};iv.props={};let iy=()=>[["parallel",0,1,0,1]];iy.props={};let i_=({focusX:n=0,focusY:r=0,distortionX:i=2,distortionY:a=2,visual:o=!1})=>[["fisheye",n,r,i,a,o]];i_.props={transform:!0};let ib=n=>{let{startAngle:r=-Math.PI/2,endAngle:i=3*Math.PI/2,innerRadius:a=0,outerRadius:o=1}=n;return[...iy(),...(0,n7.Polar)({startAngle:r,endAngle:i,innerRadius:a,outerRadius:o})];};ib.props={};let ix=({startAngle:n=0,endAngle:r=6*Math.PI,innerRadius:i=0,outerRadius:a=1})=>[["translate",.5,.5],["reflect.y"],["translate",-.5,-.5],["helix",n,r,i,a]];ix.props={};let iE=({value:n})=>r=>r.map(()=>n);iE.props={};let iw=({value:n})=>r=>r.map(r=>r[n]);iw.props={};let iS=({value:n})=>r=>r.map(n);iS.props={};let iT=({value:n})=>()=>n;iT.props={};var iA=i("f7112881");let iC=(n,r)=>(0,iA.Color)(Object.assign({colorAttribute:"fill"},n),r);iC.props=Object.assign(Object.assign({},iA.Color.props),{defaultMarker:"square"});let iO=(n,r)=>(0,iA.Color)(Object.assign({colorAttribute:"stroke"},n),r);iO.props=Object.assign(Object.assign({},iA.Color.props),{defaultMarker:"hollowSquare"});var iM=i("3cfe57c6");let iR=()=>(n,r)=>{let{encode:i}=r,{x:a}=i;return void 0!==a?[n,r]:[n,(0,nS.default)({},r,{encode:{x:(0,iM.inferredColumn)((0,iM.constant)(n,0))},scale:{x:{guide:null}}})];};iR.props={};let iP=()=>(n,r)=>{let{encode:i}=r,{y:a}=i;return void 0!==a?[n,r]:[n,(0,nS.default)({},r,{encode:{y:(0,iM.inferredColumn)((0,iM.constant)(n,0))},scale:{y:{guide:null}}})];};iP.props={};let ik=()=>(n,r)=>[n,(0,nS.default)({scale:{x:{padding:0},y:{padding:0}}},r)];ik.props={};var iI=i("cbed5754");let iL={cell:iC,hollow:iO},iN=()=>(n,r,i,a)=>{let{x:o,y:s}=i,l=r.x,u=r.y,c=Array.from(n,n=>{let r=l.getBandWidth(l.invert(+o[n])),i=u.getBandWidth(u.invert(+s[n])),c=+o[n],f=+s[n];return[[c,f],[c+r,f],[c+r,f+i],[c,f+i]].map(n=>a.map(n));});return[n,c];};iN.props={defaultShape:"cell",defaultLabelShape:"label",shape:iL,composite:!1,channels:[...(0,iI.baseGeometryChannels)({shapes:Object.keys(iL)}),{name:"x",required:!0,scale:"band"},{name:"y",required:!0,scale:"band"}],preInference:[...(0,iI.basePreInference)(),{type:iR},{type:iP},{type:ik}],postInference:[...(0,iI.basePostInference)(),...(0,iI.tooltip2d)()]};let iD=()=>(n,r)=>{let{encode:i}=r,{y1:a}=i;return void 0!==a?[n,r]:[n,(0,nS.default)({},r,{encode:{y1:(0,iM.inferredColumn)((0,iM.constant)(n,0))}})];};iD.props={};var iF=i("8f2f8753"),iB=ew._(iF),ij=i("05378a0d"),iz=ew._(ij),iU=i("45669125"),iV=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};function iG(n,r,i){let[a,o,s,l]=n;return(0,rS.isTranspose)(i)?[a,[r?r[0][0]:o[0],o[1]],[r?r[3][0]:s[0],s[1]],l]:[a,[o[0],r?r[0][1]:o[1]],[s[0],r?r[3][1]:s[1]],l];}let iH=(n,r)=>{let{adjustPoints:i=iG}=n,a=iV(n,["adjustPoints"]),{coordinate:o,document:s}=r;return(n,r,l,u)=>{let{index:c}=r,{color:f}=l,d=iV(l,["color"]),h=i(n,u[c+1],o),[p,m,g,v]=(0,rS.isTranspose)(o)?(0,iU.reorder)(h):h,{color:y=f,opacity:_}=r,b=(0,iB.default)().curve(iz.default)([p,m,g,v]);return(0,nT.select)(s.createElement("path",{})).call(iU.applyStyle,d).style("d",b).style("fill",y).style("fillOpacity",_).call(iU.applyStyle,a).node();};};function iW(n,r,i){let[a,o,s,l]=n;return(0,rS.isTranspose)(i)?[a,[r?r[0][0]:(o[0]+s[0])/2,o[1]],[r?r[3][0]:(o[0]+s[0])/2,s[1]],l]:[a,[o[0],r?r[0][1]:(o[1]+s[1])/2],[s[0],r?r[3][1]:(o[1]+s[1])/2],l];}iH.props={defaultMarker:"square"};let iX=(n,r)=>iH(Object.assign({adjustPoints:iW},n),r);function iq(n,r){return n.getBandWidth(n.invert(r));}iX.props={defaultMarker:"square"};let i$={rect:iC,hollow:iO,funnel:iH,pyramid:iX},iY=()=>(n,r,i,a)=>{let{x:o,y:s,y1:l,series:u,size:c}=i,f=r.x,d=r.series,[h]=a.getSize(),p=c?c.map(n=>+n/h):null,m=c?(n,r,i)=>{let a=n+r/2,o=p[i];return[a-o/2,a+o/2];}:(n,r,i)=>[n,n+r],g=Array.from(n,n=>{let r=iq(f,o[n]),i=d?iq(d,null==u?void 0:u[n]):1,c=(+(null==u?void 0:u[n])||0)*r,[h,p]=m(+o[n]+c,r*i,n),g=+s[n],v=+l[n];return[[h,g],[p,g],[p,v],[h,v]].map(n=>a.map(n));});return[n,g];};iY.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:i$,channels:[...(0,iI.baseGeometryChannels)({shapes:Object.keys(i$)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size"}],preInference:[...(0,iI.basePreInference)(),{type:iD},{type:iR}],postInference:[...(0,iI.basePostInference)(),...(0,iI.tooltip1d)()],interaction:{shareTooltip:!0}};let iZ={rect:iC,hollow:iO},iK=()=>(n,r,i,a)=>{let{x:o,x1:s,y:l,y1:u}=i,c=Array.from(n,n=>{let r=[+o[n],+l[n]];return[r,[+s[n],+l[n]],[+s[n],+u[n]],[+o[n],+u[n]]].map(n=>a.map(n));});return[n,c];};iK.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:iZ,channels:[...(0,iI.baseGeometryChannels)({shapes:Object.keys(iZ)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...(0,iI.basePreInference)(),{type:iD}],postInference:[...(0,iI.basePostInference)(),...(0,iI.tooltip1d)()],interaction:{shareTooltip:!0}};var iQ=i("352bae92"),iJ=ew._(iQ),i0=i("25953381"),i1=eS._(i0),i2=i("2843bd80"),i3=i("d70a5c58"),i4=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let i5=(0,i2.createElement)(n=>{let{d1:r,d2:i,style1:a,style2:o}=n.attributes,s=n.ownerDocument;(0,nT.select)(n).maybeAppend("line",()=>s.createElement("path",{})).style("d",r).call(iU.applyStyle,a),(0,nT.select)(n).maybeAppend("line1",()=>s.createElement("path",{})).style("d",i).call(iU.applyStyle,o);}),i6=(n,r)=>{let{curve:i,gradient:a=!1,gradientColor:o="between",defined:s=n=>!Number.isNaN(n)&&null!=n,connect:l=!1}=n,u=i4(n,["curve","gradient","gradientColor","defined","connect"]),{coordinate:c,document:f}=r;return(n,r,d)=>{let h;let{color:p,lineWidth:m}=d,g=i4(d,["color","lineWidth"]),{color:v=p,size:y=m,seriesColor:_,seriesX:b,seriesY:x}=r,E=(0,iU.getTransform)(c,r),w=(0,rS.isTranspose)(c),S=a&&_?(0,iU.computeGradient)(_,b,x,a,o,w):v,T=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},g),S&&{stroke:S}),y&&{lineWidth:y}),E&&{transform:E}),u);if((0,rS.isPolar)(c)){let n=c.getCenter();h=r=>(0,i1.default)().angle((i,a)=>(0,i3.angleWithQuadrant)((0,i3.sub)(r[a],n))).radius((i,a)=>(0,i3.dist)(r[a],n)).defined(([n,r])=>s(n)&&s(r)).curve(i)(r);}else h=(0,iB.default)().x(n=>n[0]).y(n=>n[1]).defined(([n,r])=>s(n)&&s(r)).curve(i);let[A,C]=function(n,r){let i=[],a=[],o=!1,s=null;for(let l of n)r(l[0])&&r(l[1])?(i.push(l),o&&(o=!1,a.push([s,l])),s=l):o=!0;return[i,a];}(n,s),O=(0,nA.subObject)(T,"connect"),M=!!C.length;return M&&(!l||Object.keys(O).length)?M&&!l?(0,nT.select)(f.createElement("path",{})).style("d",h(n)).call(iU.applyStyle,T).node():(0,nT.select)(new i5).style("style1",Object.assign(Object.assign({},T),O)).style("style2",T).style("d1",C.map(h).join(",")).style("d2",h(n)).node():(0,nT.select)(f.createElement("path",{})).style("d",h(A)||[]).call(iU.applyStyle,T).node();};};i6.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};let i8=(n,r)=>{let{coordinate:i}=r;return(...a)=>i6(Object.assign({curve:(0,rS.isPolar)(i)?iz.default:iJ.default},n),r)(...a);};i8.props=Object.assign(Object.assign({},i6.props),{defaultMarker:"line"});var i7=i("863d40cc"),i9=eS._(i7);let ae=(n,r)=>i6(Object.assign({curve:i9.stepAfter},n),r);ae.props=Object.assign(Object.assign({},i6.props),{defaultMarker:"hv"});let at=(n,r)=>i6(Object.assign({curve:i9.stepBefore},n),r);at.props=Object.assign(Object.assign({},i6.props),{defaultMarker:"vh"});let an=(n,r)=>i6(Object.assign({curve:i9.default},n),r);an.props=Object.assign(Object.assign({},i6.props),{defaultMarker:"hvh"});var ar=i("af0c43b0"),ai=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let aa=(n,r)=>{let{document:i}=r;return(r,a,o)=>{let{seriesSize:s,color:l}=a,{color:u}=o,c=ai(o,["color"]),f=(0,ar.path)();for(let n=0;n<r.length-1;n++){let i=r[n],a=r[n+1],o=s[n],l=s[n+1];[...i,...a].every(nA.defined)&&function(n,r,i,a,o){let s=(0,i3.sub)(i,r),l=(0,i3.angle)(s),u=l+Math.PI/2,c=[a/2*Math.cos(u),a/2*Math.sin(u)],f=[o/2*Math.cos(u),o/2*Math.sin(u)],d=[o/2*Math.cos(l),o/2*Math.sin(l)],h=[a/2*Math.cos(l),a/2*Math.sin(l)],p=(0,i3.add)(r,c),m=(0,i3.add)(i,f),g=(0,i3.add)(m,d),v=(0,i3.add)(i,d),y=(0,i3.sub)(v,f),_=(0,i3.sub)(i,f),b=(0,i3.sub)(r,c),x=(0,i3.sub)(b,h),E=(0,i3.sub)(r,h),w=(0,i3.sub)(p,h);n.moveTo(...p),n.lineTo(...m),n.arcTo(...g,...v,o/2),n.arcTo(...y,..._,o/2),n.lineTo(...b),n.arcTo(...x,...E,a/2),n.arcTo(...w,...p,a/2),n.closePath();}(f,i,a,o,l);}return(0,nT.select)(i.createElement("path",{})).call(iU.applyStyle,c).style("fill",l||u).style("d",f.toString()).call(iU.applyStyle,n).node();};};aa.props=Object.assign(Object.assign({},i6.props),{defaultMarker:"line"});var ao=i("97845be7"),as=i("70f716d9"),al=ew._(as),au=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let ac=(n,r)=>{let i=au(n,[]),{coordinate:a}=r;return(...n)=>i6(Object.assign({curve:(0,rS.isPolar)(a)?al.default:(0,rS.isTranspose)(a)?ao.monotoneY:ao.monotoneX},i),r)(...n);};ac.props=Object.assign(Object.assign({},i6.props),{defaultMarker:"smooth"});let af=()=>(n,r)=>{let{encode:i}=r,{series:a,color:o}=i;if(void 0!==a||void 0===o)return[n,r];let[s,l]=(0,iM.columnOf)(i,"color");return[n,(0,nS.default)({},r,{encode:{series:(0,iM.column)(s,l)}})];};af.props={};let ad=()=>(n,r)=>{let{style:i={},encode:a}=r,{series:o}=a,{gradient:s}=i;return!s||o?[n,r]:[n,(0,nS.default)({},r,{encode:{series:(0,iM.visualColumn)((0,iM.constant)(n,void 0))}})];};ad.props={};let ah={line:i8,smooth:ac,hv:ae,vh:at,hvh:an,trail:aa},ap=(n,r,i,a)=>{var o,s;let{series:l,x:u,y:c}=i,{x:f,y:d}=r;if(void 0===u||void 0===c)throw Error("Missing encode for x or y channel.");let h=l?Array.from((0,nE.default)(n,n=>l[n]).values()):[n],p=h.map(n=>n[0]).filter(n=>void 0!==n),m=((null===(o=null==f?void 0:f.getBandWidth)||void 0===o?void 0:o.call(f))||0)/2,g=((null===(s=null==d?void 0:d.getBandWidth)||void 0===s?void 0:s.call(d))||0)/2;return[p,Array.from(h,n=>n.map(n=>a.map([+u[n]+m,+c[n]+g]))),h];},am=(n,r,i,a)=>{let o=Object.entries(i).filter(([n])=>n.startsWith("position")).map(([,n])=>n);if(0===o.length)throw Error("Missing encode for position channel.");(0,rS.isPolar)(a)&&o.push(o[0]);let s=Array.from(n,n=>{let r=o.map(r=>+r[n]),i=a.map(r),s=[];for(let n=0;n<i.length;n+=2)s.push([i[n],i[n+1]]);return s;});return[n,s];},ag=()=>(n,r,i,a)=>((0,rS.isParallel)(a)?am:ap)(n,r,i,a);ag.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:ah,channels:[...(0,iI.baseGeometryChannels)({shapes:Object.keys(ah)}),{name:"x"},{name:"y"},{name:"position",independent:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...(0,iI.basePreInference)(),{type:ad},{type:af}],postInference:[...(0,iI.basePostInference)(),...(0,iI.tooltip1d)(),...(0,iI.tooltipXd)()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};var av=i("66659c9e"),ay=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};function a_(n,r,i,a){if(1===r.length)return;let{size:o}=i;if("fixed"===n)return o;if("normal"===n||(0,rS.isFisheye)(a)){let[[n,i],[a,o]]=r;return Math.max(0,(Math.abs((a-n)/2)+Math.abs((o-i)/2))/2);}return o;}let ab=(n,r)=>{let{colorAttribute:i,symbol:a,mode:o="auto"}=n,s=ay(n,["colorAttribute","symbol","mode"]),l=av.Symbols.get((0,rT.camelCase)(a))||av.Symbols.get("point"),{coordinate:u,document:c}=r;return(r,a,f)=>{let{lineWidth:d,color:h}=f,p=s.stroke?d||1:d,{color:m=h,transform:g,opacity:v}=a,[y,_]=(0,iU.getOrigin)(r),b=a_(o,r,a,u)||s.r||f.r;return(0,nT.select)(c.createElement("path",{})).call(iU.applyStyle,f).style("fill","transparent").style("d",l(y,_,b)).style("lineWidth",p).style("transform",g).style("transformOrigin",`${y-b} ${_-b}`).style("stroke",m).style((0,iU.toOpacityKey)(n),v).style(i,m).call(iU.applyStyle,s).node();};};ab.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};let ax=(n,r)=>ab(Object.assign({colorAttribute:"fill",symbol:"bowtie"},n),r);ax.props=Object.assign({defaultMarker:"bowtie"},ab.props);let aE=(n,r)=>ab(Object.assign({colorAttribute:"stroke",symbol:"cross"},n),r);aE.props=Object.assign({defaultMarker:"cross"},ab.props);let aw=(n,r)=>ab(Object.assign({colorAttribute:"fill",symbol:"diamond"},n),r);aw.props=Object.assign({defaultMarker:"diamond"},ab.props);let aS=(n,r)=>ab(Object.assign({colorAttribute:"fill",symbol:"hexagon"},n),r);aS.props=Object.assign({defaultMarker:"hexagon"},ab.props);let aT=(n,r)=>ab(Object.assign({colorAttribute:"stroke",symbol:"bowtie"},n),r);aT.props=Object.assign({defaultMarker:"hollowBowtie"},ab.props);let aA=(n,r)=>ab(Object.assign({colorAttribute:"stroke",symbol:"diamond"},n),r);aA.props=Object.assign({defaultMarker:"hollowDiamond"},ab.props);let aC=(n,r)=>ab(Object.assign({colorAttribute:"stroke",symbol:"hexagon"},n),r);aC.props=Object.assign({defaultMarker:"hollowHexagon"},ab.props);let aO=(n,r)=>ab(Object.assign({colorAttribute:"stroke",symbol:"point"},n),r);aO.props=Object.assign({defaultMarker:"hollowPoint"},ab.props);let aM=(n,r)=>ab(Object.assign({colorAttribute:"stroke",symbol:"square"},n),r);aM.props=Object.assign({defaultMarker:"hollowSquare"},ab.props);let aR=(n,r)=>ab(Object.assign({colorAttribute:"stroke",symbol:"triangle"},n),r);aR.props=Object.assign({defaultMarker:"hollowTriangle"},ab.props);let aP=(n,r)=>ab(Object.assign({colorAttribute:"stroke",symbol:"triangle-down"},n),r);aP.props=Object.assign({defaultMarker:"hollowTriangleDown"},ab.props);let ak=(n,r)=>ab(Object.assign({colorAttribute:"stroke",symbol:"hyphen"},n),r);ak.props=Object.assign({defaultMarker:"hyphen"},ab.props);let aI=(n,r)=>ab(Object.assign({colorAttribute:"stroke",symbol:"line"},n),r);aI.props=Object.assign({defaultMarker:"line"},ab.props);let aL=(n,r)=>ab(Object.assign({colorAttribute:"fill",symbol:"triangle-down"},n),r);aL.props=Object.assign({defaultMarker:"triangleDown"},ab.props);let aN=(n,r)=>ab(Object.assign({colorAttribute:"stroke",symbol:"plus"},n),r);aN.props=Object.assign({defaultMarker:"plus"},ab.props);let aD=(n,r)=>ab(Object.assign({colorAttribute:"fill",symbol:"square"},n),r);aD.props=Object.assign({defaultMarker:"square"},ab.props);let aF=(n,r)=>ab(Object.assign({colorAttribute:"fill",symbol:"point"},n),r);aF.props=Object.assign({defaultMarker:"point"},ab.props);let aB=(n,r)=>ab(Object.assign({colorAttribute:"stroke",symbol:"tick"},n),r);aB.props=Object.assign({defaultMarker:"tick"},ab.props);let aj=(n,r)=>ab(Object.assign({colorAttribute:"fill",symbol:"triangle"},n),r);aj.props=Object.assign({defaultMarker:"triangle"},ab.props);var az=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let aU=(n,r)=>{let{colorAttribute:i,mode:a="auto"}=n,o=az(n,["colorAttribute","mode"]),{coordinate:s,document:l}=r;return(r,u,c)=>{let{lineWidth:f,color:d}=c,h=o.stroke?f||1:f,{color:p=d,transform:m,opacity:g}=u,[v,y]=(0,iU.getOrigin)(r),_=a_(a,r,u,s)||o.r||c.r;return(0,nT.select)(l.createElement("circle",{})).call(iU.applyStyle,c).style("fill","transparent").style("cx",v).style("cy",y).style("r",_).style("lineWidth",h).style("transform",m).style("transformOrigin",`${v} ${y}`).style("stroke",p).style((0,iU.toOpacityKey)(n),g).style(i,p).call(iU.applyStyle,o).node();};},aV=(n,r)=>aU(Object.assign({colorAttribute:"fill"},n),r);aV.props={defaultMarker:"circle",defaultEnterAnimation:"fadeIn",defaultExitAnimation:"fadeOut"};let aG=(n,r)=>aU(Object.assign({colorAttribute:"stroke"},n),r);aG.props=Object.assign({defaultMarker:"hollowPoint"},aV.props);let aH=()=>(n,r)=>{let{encode:i}=r,{size:a}=i;return void 0!==a?[n,r]:[n,(0,nS.default)({},r,{encode:{size:(0,iM.visualColumn)((0,iM.constant)(n,3))}})];};aH.props={};let aW={hollow:aO,hollowDiamond:aA,hollowHexagon:aC,hollowSquare:aM,hollowTriangleDown:aP,hollowTriangle:aR,hollowBowtie:aT,hollowCircle:aG,point:aF,plus:aN,diamond:aw,square:aD,triangle:aj,hexagon:aS,cross:aE,bowtie:ax,hyphen:ak,line:aI,tick:aB,triangleDown:aL,circle:aV},aX=n=>(r,i,a,o)=>{let{x:s,y:l,x1:u,y1:c,size:f,dx:d,dy:h}=a,[p,m]=o.getSize(),g=(0,iI.createBandOffset)(i,a,n),v=n=>{let r=+((null==d?void 0:d[n])||0),i=+((null==h?void 0:h[n])||0);return[(u?(+s[n]+ +u[n])/2:+s[n])+r,(c?(+l[n]+ +c[n])/2:+l[n])+i];},y=f?Array.from(r,n=>{let[r,i]=v(n),a=+f[n],s=a/p,l=a/m;return[o.map(g([r-s,i-l],n)),o.map(g([r+s,i+l],n))];}):Array.from(r,n=>[o.map(g(v(n),n))]);return[r,y];};aX.props={defaultShape:"hollow",defaultLabelShape:"label",composite:!1,shape:aW,channels:[...(0,iI.baseGeometryChannels)({shapes:Object.keys(aW)}),{name:"x",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size",quantitative:"sqrt"},{name:"dx",scale:"identity"},{name:"dy",scale:"identity"}],preInference:[...(0,iI.basePreInference)(),{type:iR},{type:iP}],postInference:[...(0,iI.basePostInference)(),{type:aH},...(0,iI.tooltip2d)()]};var aq=i("72baedf4");let a$=(n,r)=>{let{coordinate:i}=r;return(r,a,o)=>{let{color:s,text:l="",fontSize:u,rotate:c=0,transform:f=""}=a,d={text:String(l),stroke:s,fill:s,fontSize:u},[[h,p]]=r;return(0,nT.select)(new aq.Advance).style("x",h).style("y",p).call(iU.applyStyle,o).style("transform",`${f}rotate(${+c})`).style("coordCenter",i.getCenter()).call(iU.applyStyle,d).call(iU.applyStyle,n).node();};};a$.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var aY=i("0381584d"),aZ=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let aK=(0,i2.createElement)(n=>{let r=n.attributes,{class:i,x:a,y:o,transform:s}=r,l=aZ(r,["class","x","y","transform"]),u=(0,nA.subObject)(l,"marker"),{size:c=24}=u,f=()=>(function(n){let r=n/Math.sqrt(2),i=n*Math.sqrt(2),[a,o]=[-r,r-i],[s,l]=[0,0],[u,c]=[r,r-i];return[["M",a,o],["A",n,n,0,1,1,u,c],["L",s,l],["Z"]];})(c/2),[d,h]=function(n){let{min:r,max:i}=n.getLocalBounds();return[(r[0]+i[0])*.5,(r[1]+i[1])*.5];}((0,nT.select)(n).maybeAppend("marker",()=>new aY.Marker({})).call(n=>n.node().update(Object.assign({symbol:f},u))).node());(0,nT.select)(n).maybeAppend("text","text").style("x",d).style("y",h).call(iU.applyStyle,l);}),aQ=(n,r)=>{let i=aZ(n,[]);return(n,r,a)=>{let{color:o}=a,s=aZ(a,["color"]),{color:l=o,text:u=""}=r,c={text:String(u),stroke:l,fill:l},[[f,d]]=n;return(0,nT.select)(new aK).call(iU.applyStyle,s).style("transform",`translate(${f},${d})`).call(iU.applyStyle,c).call(iU.applyStyle,i).node();};};aQ.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};let aJ=(n,r)=>{let{coordinate:i}=r;return(r,a,o)=>{let{color:s,text:l="",fontSize:u,rotate:c=0,transform:f=""}=a,d={text:String(l),stroke:s,fill:s,fontSize:u,textAlign:"center",textBaseline:"middle"},[[h,p]]=r;return(0,nT.select)(new eL.Text).style("x",h).style("y",p).call(iU.applyStyle,o).style("transformOrigin","center center").style("transform",`${f}rotate(${c}deg)`).style("coordCenter",i.getCenter()).call(iU.applyStyle,d).call(iU.applyStyle,n).node();};};aJ.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};let a0=()=>(n,r)=>{let{data:i}=r;if(!Array.isArray(i)||i.some(iM.isObject))return[n,r];let a=Array.isArray(i[0])?i:[i],o=a.map(n=>n[0]),s=a.map(n=>n[1]);return[n,(0,nS.default)({},r,{encode:{x:(0,iM.column)(o),y:(0,iM.column)(s)}})];};a0.props={};var a1=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let a2=()=>(n,r)=>{let{data:i,style:a={}}=r,o=a1(r,["data","style"]),{x:s,y:l}=a,u=a1(a,["x","y"]);return void 0==s||void 0==l?[n,r]:[[0],(0,nS.default)({},o,{data:[0],cartesian:!0,encode:{x:(0,iM.column)([s||0]),y:(0,iM.column)([l||0])},scale:{x:{type:"identity",independent:!0,guide:null},y:{type:"identity",independent:!0,guide:null}},style:u})];};a2.props={};let a3={text:a$,badge:aQ,tag:aJ},a4=n=>{let{cartesian:r=!1}=n;return r?iI.visualMark:(r,i,a,o)=>{let{x:s,y:l}=a,u=(0,iI.createBandOffset)(i,a,n),c=Array.from(r,n=>{let r=[+s[n],+l[n]];return[o.map(u(r,n))];});return[r,c];};};a4.props={defaultShape:"text",defaultLabelShape:"label",composite:!1,shape:a3,channels:[...(0,iI.baseGeometryChannels)({shapes:Object.keys(a3)}),{name:"x",required:!0},{name:"y",required:!0},{name:"text",scale:"identity"},{name:"fontSize",scale:"identity"},{name:"rotate",scale:"identity"}],preInference:[...(0,iI.basePreInference)(),{type:a0},{type:a2}],postInference:[...(0,iI.basePostInference)(),...(0,iI.tooltip2d)()]};var a5=i("49f51d84"),a6=ew._(a5),a8=i("110b1906"),a7=ew._(a8),a9=i("d09fdf20"),oe=i("91c1eb9d"),ot=function(n,r,i){var a=null,o=(0,a7.default)(!0),s=null,l=iJ.default,u=null,c=(0,a9.withPath)(f);function f(f){var d,h,p,m,g,v=(f=(0,a6.default)(f)).length,y=!1,_=Array(v),b=Array(v);for(null==s&&(u=l(g=c())),d=0;d<=v;++d){if(!(d<v&&o(m=f[d],d,f))===y){if(y=!y)h=d,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),p=d-1;p>=h;--p)u.point(_[p],b[p]);u.lineEnd(),u.areaEnd();}}y&&(_[d]=+n(m,d,f),b[d]=+r(m,d,f),u.point(a?+a(m,d,f):_[d],i?+i(m,d,f):b[d]));}if(g)return u=null,g+""||null;}function d(){return(0,iB.default)().defined(o).curve(l).context(s);}return n="function"==typeof n?n:void 0===n?oe.x:(0,a7.default)(+n),r="function"==typeof r?r:void 0===r?(0,a7.default)(0):(0,a7.default)(+r),i="function"==typeof i?i:void 0===i?oe.y:(0,a7.default)(+i),f.x=function(r){return arguments.length?(n="function"==typeof r?r:(0,a7.default)(+r),a=null,f):n;},f.x0=function(r){return arguments.length?(n="function"==typeof r?r:(0,a7.default)(+r),f):n;},f.x1=function(n){return arguments.length?(a=null==n?null:"function"==typeof n?n:(0,a7.default)(+n),f):a;},f.y=function(n){return arguments.length?(r="function"==typeof n?n:(0,a7.default)(+n),i=null,f):r;},f.y0=function(n){return arguments.length?(r="function"==typeof n?n:(0,a7.default)(+n),f):r;},f.y1=function(n){return arguments.length?(i=null==n?null:"function"==typeof n?n:(0,a7.default)(+n),f):i;},f.lineX0=f.lineY0=function(){return d().x(n).y(r);},f.lineY1=function(){return d().x(n).y(i);},f.lineX1=function(){return d().x(a).y(r);},f.defined=function(n){return arguments.length?(o="function"==typeof n?n:(0,a7.default)(!!n),f):o;},f.curve=function(n){return arguments.length?(l=n,null!=s&&(u=l(s)),f):l;},f.context=function(n){return arguments.length?(null==n?s=u=null:u=l(s=n),f):s;},f;},on=i("c2731b3b"),or=eS._(on),oi=function(){var n=ot().curve(or.curveRadialLinear),r=n.curve,i=n.lineX0,a=n.lineX1,o=n.lineY0,s=n.lineY1;return n.angle=n.x,delete n.x,n.startAngle=n.x0,delete n.x0,n.endAngle=n.x1,delete n.x1,n.radius=n.y,delete n.y,n.innerRadius=n.y0,delete n.y0,n.outerRadius=n.y1,delete n.y1,n.lineStartAngle=function(){return(0,i1.lineRadial)(i());},delete n.lineX0,n.lineEndAngle=function(){return(0,i1.lineRadial)(a());},delete n.lineX1,n.lineInnerRadius=function(){return(0,i1.lineRadial)(o());},delete n.lineY0,n.lineOuterRadius=function(){return(0,i1.lineRadial)(s());},delete n.lineY1,n.curve=function(n){return arguments.length?r((0,or.default)(n)):r()._curve;},n;},oa=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let oo=(0,i2.createElement)(n=>{let{areaPath:r,connectPath:i,areaStyle:a,connectStyle:o}=n.attributes,s=n.ownerDocument;(0,nT.select)(n).maybeAppend("connect-path",()=>s.createElement("path",{})).style("d",i).call(iU.applyStyle,o),(0,nT.select)(n).maybeAppend("area-path",()=>s.createElement("path",{})).style("d",r).call(iU.applyStyle,a);}),os=(n,r)=>{let{curve:i,gradient:a=!1,defined:o=n=>!Number.isNaN(n)&&null!=n,connect:s=!1}=n,l=oa(n,["curve","gradient","defined","connect"]),{coordinate:u,document:c}=r;return(n,r,f)=>{let{color:d}=f,{color:h=d,seriesColor:p,seriesX:m,seriesY:g}=r,v=(0,rS.isTranspose)(u),y=(0,iU.getTransform)(u,r),_=a&&p?(0,iU.computeGradient)(p,m,g,a,void 0,v):h,b=Object.assign(Object.assign(Object.assign(Object.assign({},f),{stroke:_,fill:_}),y&&{transform:y}),l),[x,E]=function(n,r){let i=[],a=[],o=[],s=!1,l=null,u=n.length/2;for(let c=0;c<u;c++){let f=n[c],d=n[c+u];if([...f,...d].some(n=>!r(n)))s=!0;else{if(i.push(f),a.push(d),s&&l){s=!1;let[n,r]=l;o.push([n,f,r,d]);}l=[f,d];}}return[i.concat(a),o];}(n,o),w=(0,nA.subObject)(b,"connect"),S=!!E.length,T=n=>(0,nT.select)(c.createElement("path",{})).style("d",n||"").call(iU.applyStyle,b).node();if((0,rS.isPolar)(u)){let r=n=>{let r=u.getCenter(),a=n.slice(0,n.length/2),s=n.slice(n.length/2);return oi().angle((n,i)=>(0,i3.angleWithQuadrant)((0,i3.sub)(a[i],r))).outerRadius((n,i)=>(0,i3.dist)(a[i],r)).innerRadius((n,i)=>(0,i3.dist)(s[i],r)).defined((n,r)=>[...a[r],...s[r]].every(o)).curve(i)(s);};return S&&(!s||Object.keys(w).length)?S&&!s?T(r(n)):(0,nT.select)(new oo).style("areaStyle",b).style("connectStyle",Object.assign(Object.assign({},w),l)).style("areaPath",r(n)).style("connectPath",E.map(r).join("")).node():T(r(x));}{let r=n=>{let r=n.slice(0,n.length/2),a=n.slice(n.length/2);return v?ot().y((n,i)=>r[i][1]).x1((n,i)=>r[i][0]).x0((n,r)=>a[r][0]).defined((n,i)=>[...r[i],...a[i]].every(o)).curve(i)(r):ot().x((n,i)=>r[i][0]).y1((n,i)=>r[i][1]).y0((n,r)=>a[r][1]).defined((n,i)=>[...r[i],...a[i]].every(o)).curve(i)(r);};return S&&(!s||Object.keys(w).length)?S&&!s?T(r(n)):(0,nT.select)(new oo).style("areaStyle",b).style("connectStyle",Object.assign(Object.assign({},w),l)).style("areaPath",r(n)).style("connectPath",E.map(r).join("")).node():T(r(x));}};};os.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};let ol=(n,r)=>{let{coordinate:i}=r;return(...a)=>os(Object.assign({curve:(0,rS.isPolar)(i)?iz.default:iJ.default},n),r)(...a);};ol.props=Object.assign(Object.assign({},os.props),{defaultMarker:"square"});let ou=(n,r)=>(...i)=>os(Object.assign({curve:i9.stepAfter},n),r)(...i);ou.props=Object.assign(Object.assign({},os.props),{defaultMarker:"hv"});let oc=(n,r)=>(...i)=>os(Object.assign({curve:i9.default},n),r)(...i);oc.props=Object.assign(Object.assign({},os.props),{defaultMarker:"hvh"});var of=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let od=(n,r)=>{let i=of(n,[]),{coordinate:a}=r;return(...n)=>os(Object.assign({curve:(0,rS.isPolar)(a)?al.default:(0,rS.isTranspose)(a)?ao.monotoneY:ao.monotoneX},i),r)(...n);};od.props=Object.assign(Object.assign({},os.props),{defaultMarker:"smooth"});let oh=(n,r)=>(...i)=>os(Object.assign({curve:i9.stepBefore},n),r)(...i);oh.props=Object.assign(Object.assign({},os.props),{defaultMarker:"vh"});let op={area:ol,smooth:od,hvh:oc,vh:oh,hv:ou},om=()=>(n,r,i,a)=>{var o,s;let{x:l,y:u,y1:c,series:f}=i,{x:d,y:h}=r,p=f?Array.from((0,nE.default)(n,n=>f[n]).values()):[n],m=p.map(n=>n[0]).filter(n=>void 0!==n),g=((null===(o=null==d?void 0:d.getBandWidth)||void 0===o?void 0:o.call(d))||0)/2,v=((null===(s=null==h?void 0:h.getBandWidth)||void 0===s?void 0:s.call(h))||0)/2;return[m,Array.from(p,n=>{let r=n.length,i=Array(2*r);for(let o=0;o<n.length;o++){let s=n[o];i[o]=a.map([+l[s]+g,+u[s]+v]),i[r+o]=a.map([+l[s]+g,+c[s]+v]);}return i;}),p];};om.props={defaultShape:"area",defaultLabelShape:"label",composite:!1,shape:op,channels:[...(0,iI.baseGeometryChannels)({shapes:Object.keys(op)}),{name:"x",required:!0},{name:"y",required:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...(0,iI.basePreInference)(),{type:af},{type:iD},{type:ik}],postInference:[...(0,iI.basePostInference)(),...(0,iI.tooltip1d)()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};var og=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let ov=(n,r)=>{let{coordinate:i,document:a}=r;return(r,o,s)=>{let{color:l}=s,u=og(s,["color"]),{color:c=l,src:f="",size:d=32,transform:h=""}=o,{width:p=d,height:m=d}=n,[[g,v]]=r,[y,_]=i.getSize();p="string"==typeof p?(0,iI.p)(p)*y:p,m="string"==typeof m?(0,iI.p)(m)*_:m;let b=g-Number(p)/2,x=v-Number(m)/2;return(0,nT.select)(a.createElement("image",{})).call(iU.applyStyle,u).style("x",b).style("y",x).style("src",f).style("stroke",c).style("transform",h).call(iU.applyStyle,n).style("width",p).style("height",m).node();};};ov.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};let oy={image:ov},o_=n=>{let{cartesian:r}=n;return r?iI.visualMark:(r,i,a,o)=>{let{x:s,y:l}=a,u=(0,iI.createBandOffset)(i,a,n),c=Array.from(r,n=>{let r=[+s[n],+l[n]];return[o.map(u(r,n))];});return[r,c];};};o_.props={defaultShape:"image",defaultLabelShape:"label",composite:!1,shape:oy,channels:[...(0,iI.baseGeometryChannels)({shapes:Object.keys(oy)}),{name:"x",required:!0},{name:"y",required:!0},{name:"src",scale:"identity"},{name:"size"}],preInference:[...(0,iI.basePreInference)(),{type:a0},{type:a2}],postInference:[...(0,iI.basePostInference)(),...(0,iI.tooltip2d)()]};var ob=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let ox=(n,r)=>{let{coordinate:i,document:a}=r;return(r,o,s)=>{let{color:l}=s,u=ob(s,["color"]),{color:c=l,transform:f}=o,d=function(n,r){let i=(0,ar.path)();if((0,rS.isPolar)(r)){let a=r.getCenter(),o=[...n,n[0]],s=o.map(n=>(0,i3.dist)(n,a));return o.forEach((r,o)=>{if(0===o){i.moveTo(r[0],r[1]);return;}let l=s[o],u=n[o-1],c=s[o-1];void 0!==c&&1e-10>Math.abs(l-c)?(0,iU.appendArc)(i,u,r,a,l):i.lineTo(r[0],r[1]);}),i.closePath(),i;}return(0,iU.appendPolygon)(i,n);}(r,i);return(0,nT.select)(a.createElement("path",{})).call(iU.applyStyle,u).style("d",d.toString()).style("stroke",c).style("fill",c).style("transform",f).call(iU.applyStyle,n).node();};};ox.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var oE=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let ow=(n,r)=>{let i=oE(n,[]),{coordinate:a,document:o}=r;return(n,r,s)=>{let{color:l}=s,u=oE(s,["color"]),{color:c=l,transform:f}=r,d=function(n,r){let[i,a,o,s]=n,l=(0,ar.path)();if((0,rS.isPolar)(r)){let n=r.getCenter(),u=(0,i3.dist)(n,i);return l.moveTo(i[0],i[1]),l.quadraticCurveTo(n[0],n[1],o[0],o[1]),(0,iU.appendArc)(l,o,s,n,u),l.quadraticCurveTo(n[0],n[1],a[0],a[1]),(0,iU.appendArc)(l,a,i,n,u),l.closePath(),l;}return l.moveTo(i[0],i[1]),l.bezierCurveTo(i[0]/2+o[0]/2,i[1],i[0]/2+o[0]/2,o[1],o[0],o[1]),l.lineTo(s[0],s[1]),l.bezierCurveTo(s[0]/2+a[0]/2,s[1],s[0]/2+a[0]/2,a[1],a[0],a[1]),l.lineTo(i[0],i[1]),l.closePath(),l;}(n,a);return(0,nT.select)(o.createElement("path",{})).call(iU.applyStyle,u).style("d",d.toString()).style("fill",c||l).style("stroke",c||l).style("transform",f).call(iU.applyStyle,i).node();};};ow.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};let oS={polygon:ox,ribbon:ow},oT=()=>(n,r,i,a)=>{let o=Object.entries(i).filter(([n])=>n.startsWith("x")).map(([,n])=>n),s=Object.entries(i).filter(([n])=>n.startsWith("y")).map(([,n])=>n),l=n.map(n=>{let r=[];for(let i=0;i<o.length;i++){let l=o[i][n];if(void 0===l)break;let u=s[i][n];r.push(a.map([+l,+u]));}return r;});return[n,l];};oT.props={defaultShape:"polygon",defaultLabelShape:"label",composite:!1,shape:oS,channels:[...(0,iI.baseGeometryChannels)({shapes:Object.keys(oS)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...(0,iI.basePreInference)()],postInference:[...(0,iI.basePostInference)(),...(0,iI.tooltip2d)()]};var oA=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let oC=(n,r)=>{let{coordinate:i,document:a}=r;return(r,o,s)=>{let{color:l,transform:u}=o,{color:c,fill:f=c,stroke:d=c}=s,h=oA(s,["color","fill","stroke"]),p=function(n,r){let i=(0,ar.path)();if((0,rS.isPolar)(r)){let a=r.getCenter(),[o,s]=a,l=(0,i3.angle)((0,i3.sub)(n[0],a)),u=(0,i3.angle)((0,i3.sub)(n[1],a)),c=(0,i3.dist)(a,n[2]),f=(0,i3.dist)(a,n[3]),d=(0,i3.dist)(a,n[8]),h=(0,i3.dist)(a,n[10]),p=(0,i3.dist)(a,n[11]);i.moveTo(...n[0]),i.arc(o,s,c,l,u),i.arc(o,s,c,u,l,!0),i.moveTo(...n[2]),i.lineTo(...n[3]),i.moveTo(...n[4]),i.arc(o,s,f,l,u),i.lineTo(...n[6]),i.arc(o,s,h,u,l,!0),i.closePath(),i.moveTo(...n[8]),i.arc(o,s,d,l,u),i.arc(o,s,d,u,l,!0),i.moveTo(...n[10]),i.lineTo(...n[11]),i.moveTo(...n[12]),i.arc(o,s,p,l,u),i.arc(o,s,p,u,l,!0);}else i.moveTo(...n[0]),i.lineTo(...n[1]),i.moveTo(...n[2]),i.lineTo(...n[3]),i.moveTo(...n[4]),i.lineTo(...n[5]),i.lineTo(...n[6]),i.lineTo(...n[7]),i.closePath(),i.moveTo(...n[8]),i.lineTo(...n[9]),i.moveTo(...n[10]),i.lineTo(...n[11]),i.moveTo(...n[12]),i.lineTo(...n[13]);return i;}(r,i);return(0,nT.select)(a.createElement("path",{})).call(iU.applyStyle,h).style("d",p.toString()).style("stroke",d).style("fill",l||f).style("transform",u).call(iU.applyStyle,n).node();};};oC.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var oO=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let oM=(n,r)=>{let{coordinate:i,document:a}=r;return(r,o,s)=>{let{color:l,transform:u}=o,{color:c,fill:f=c,stroke:d=c}=s,h=oO(s,["color","fill","stroke"]),p=function(n,r,i=4){let a=(0,ar.path)();if(!(0,rS.isPolar)(r))return a.moveTo(...n[2]),a.lineTo(...n[3]),a.lineTo(n[3][0]-i,n[3][1]),a.lineTo(n[10][0]-i,n[10][1]),a.lineTo(n[10][0]+i,n[10][1]),a.lineTo(n[3][0]+i,n[3][1]),a.lineTo(...n[3]),a.closePath(),a.moveTo(...n[10]),a.lineTo(...n[11]),a.moveTo(n[3][0]+i/2,n[8][1]),a.arc(n[3][0],n[8][1],i/2,0,2*Math.PI),a.closePath(),a;let o=r.getCenter(),[s,l]=o,u=(0,i3.dist)(o,n[3]),c=(0,i3.dist)(o,n[8]),f=(0,i3.dist)(o,n[10]),d=(0,i3.angle)((0,i3.sub)(n[2],o)),h=Math.asin(i/c),p=d-h,m=d+h;a.moveTo(...n[2]),a.lineTo(...n[3]),a.moveTo(Math.cos(p)*u+s,Math.sin(p)*u+l),a.arc(s,l,u,p,m),a.lineTo(Math.cos(m)*f+s,Math.sin(m)*f+l),a.arc(s,l,f,m,p,!0),a.lineTo(Math.cos(p)*u+s,Math.sin(p)*u+l),a.closePath(),a.moveTo(...n[10]),a.lineTo(...n[11]);let g=(p+m)/2;return a.moveTo(Math.cos(g)*(c+i/2)+s,Math.sin(g)*(c+i/2)+l),a.arc(Math.cos(g)*c+s,Math.sin(g)*c+l,i/2,g,2*Math.PI+g),a.closePath(),a;}(r,i,4);return(0,nT.select)(a.createElement("path",{})).call(iU.applyStyle,h).style("d",p.toString()).style("stroke",d).style("fill",l||f).style("transform",u).call(iU.applyStyle,n).node();};};oM.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};let oR={box:oC,violin:oM},oP=()=>(n,r,i,a)=>{let{x:o,y:s,y1:l,y2:u,y3:c,y4:f,series:d}=i,h=r.x,p=r.series,m=Array.from(n,n=>{let r=h.getBandWidth(h.invert(+o[n])),i=r*(p?p.getBandWidth(p.invert(+(null==d?void 0:d[n]))):1),m=(+(null==d?void 0:d[n])||0)*r,g=+o[n]+m+i/2,[v,y,_,b,x]=[+s[n],+l[n],+u[n],+c[n],+f[n]];return[[g-i/2,x],[g+i/2,x],[g,x],[g,b],[g-i/2,b],[g+i/2,b],[g+i/2,y],[g-i/2,y],[g-i/2,_],[g+i/2,_],[g,y],[g,v],[g-i/2,v],[g+i/2,v]].map(n=>a.map(n));});return[n,m];};oP.props={defaultShape:"box",defaultLabelShape:"label",composite:!1,shape:oR,channels:[...(0,iI.baseGeometryChannels)({shapes:Object.keys(oR)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"}],preInference:[...(0,iI.basePreInference)(),{type:iR}],postInference:[...(0,iI.basePostInference)(),...(0,iI.tooltip1d)()],interaction:{shareTooltip:!0}};var ok=i("410a4659");let oI={vector:ok.Vector},oL=()=>(n,r,i,a)=>{let{x:o,y:s,size:l,rotate:u}=i,[c,f]=a.getSize(),d=n.map(n=>{let r=+u[n]/180*Math.PI,i=+l[n],d=i/c*Math.cos(r),h=-(i/f)*Math.sin(r);return[a.map([+o[n]-d/2,+s[n]-h/2]),a.map([+o[n]+d/2,+s[n]+h/2])];});return[n,d];};oL.props={defaultShape:"vector",defaultLabelShape:"label",composite:!1,shape:oI,channels:[...(0,iI.baseGeometryChannels)({shapes:Object.keys(oI)}),{name:"x",required:!0},{name:"y",required:!0},{name:"rotate",required:!0,scale:"identity"},{name:"size",required:!0}],preInference:[...(0,iI.basePreInference)()],postInference:[...(0,iI.basePostInference)(),...(0,iI.tooltip2d)()]};let oN=()=>(n,r)=>{let{encode:i}=r,{x1:a}=i;if(a)return[n,r];let[o]=(0,iM.columnOf)(i,"x");return[n,(0,nS.default)({},r,{encode:{x1:(0,iM.column)([...o])}})];};oN.props={};let oD=()=>(n,r)=>{let{encode:i}=r,{y1:a}=i;if(a)return[n,r];let[o]=(0,iM.columnOf)(i,"y");return[n,(0,nS.default)({},r,{encode:{y1:(0,iM.column)([...o])}})];};oD.props={};var oF=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let oB=(n,r)=>{let i=oF(n,[]),{coordinate:a,document:o}=r;return(n,r,s)=>{let{color:l}=s,u=oF(s,["color"]),{color:c=l,transform:f}=r,[d,h]=n,p=(0,ar.path)();if(p.moveTo(d[0],d[1]),(0,rS.isPolar)(a)){let n=a.getCenter();p.quadraticCurveTo(n[0],n[1],h[0],h[1]);}else{let n=(0,i3.mid)(d,h),r=(0,i3.dist)(d,h)/2;(0,iU.appendArc)(p,d,h,n,r);}return(0,nT.select)(o.createElement("path",{})).call(iU.applyStyle,u).style("d",p.toString()).style("stroke",c).style("transform",f).call(iU.applyStyle,i).node();};};oB.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};let oj=(n,r)=>{let{arrow:i=!1}=n;return(...a)=>(0,ok.Vector)(Object.assign(Object.assign({},n),{arrow:i}),r)(...a);};oj.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var oz=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let oU=(n,r)=>{let i=oz(n,[]),{document:a}=r;return(n,r,o)=>{let{color:s}=o,l=oz(o,["color"]),{color:u=s,transform:c}=r,[f,d]=n,h=(0,ar.path)();return h.moveTo(f[0],f[1]),h.bezierCurveTo(f[0]/2+d[0]/2,f[1],f[0]/2+d[0]/2,d[1],d[0],d[1]),(0,nT.select)(a.createElement("path",{})).call(iU.applyStyle,l).style("d",h.toString()).style("stroke",u).style("transform",c).call(iU.applyStyle,i).node();};};oU.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var oV=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let oG=(n,r)=>{let{cornerRatio:i=1/3}=n,a=oV(n,["cornerRatio"]),{coordinate:o,document:s}=r;return(n,r,l)=>{let{defaultColor:u}=l,c=oV(l,["defaultColor"]),{color:f=u,transform:d}=r,[h,p]=n,m=function(n,r,i,a){let o=(0,ar.path)();if((0,rS.isPolar)(i)){let s=i.getCenter(),l=(0,i3.dist)(n,s),u=(0,i3.dist)(r,s);return o.moveTo(n[0],n[1]),(0,iU.appendArc)(o,n,r,s,(u-l)*a+l),o.lineTo(r[0],r[1]),o;}return(0,rS.isTranspose)(i)?(o.moveTo(n[0],n[1]),o.lineTo(n[0]+(r[0]-n[0])*a,n[1]),o.lineTo(n[0]+(r[0]-n[0])*a,r[1])):(o.moveTo(n[0],n[1]),o.lineTo(n[0],n[1]+(r[1]-n[1])*a),o.lineTo(r[0],n[1]+(r[1]-n[1])*a)),o.lineTo(r[0],r[1]),o;}(h,p,o,i);return(0,nT.select)(s.createElement("path",{})).call(iU.applyStyle,c).style("d",m.toString()).style("stroke",f).style("transform",d).call(iU.applyStyle,a).node();};};oG.props={defaultMarker:"vhv",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};let oH={link:oj,arc:oB,smooth:oU,vhv:oG},oW=n=>(r,i,a,o)=>{let{x:s,y:l,x1:u=s,y1:c=l}=a,f=(0,iI.createBandOffset)(i,a,n),d=r.map(n=>[o.map(f([+s[n],+l[n]],n)),o.map(f([+u[n],+c[n]],n))]);return[r,d];};oW.props={defaultShape:"link",defaultLabelShape:"label",composite:!1,shape:oH,channels:[...(0,iI.baseGeometryChannels)({shapes:Object.keys(oH)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...(0,iI.basePreInference)(),{type:oD},{type:oN}],postInference:[...(0,iI.basePostInference)(),...(0,iI.tooltip2d)()]};var oX=i("42996afe"),oq=ew._(oX),o$=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let oY=(n,r)=>{let{arrow:i,arrowSize:a=4}=n,o=o$(n,["arrow","arrowSize"]),{coordinate:s,document:l}=r;return(n,r,u)=>{var c;let{color:f,lineWidth:d}=u,h=o$(u,["color","lineWidth"]),{color:p=f,size:m=d}=r,g=i?(c=Object.assign({fill:o.stroke||p,stroke:o.stroke||p},(0,nA.subObject)(o,"arrow")),l.createElement("path",{style:Object.assign({d:`M ${a},${a} L -${a},0 L ${a},-${a} L 0,0 Z`,transformOrigin:"center"},c)})):null,v=function(n,r){if(!(0,rS.isPolar)(r))return(0,iB.default)().x(n=>n[0]).y(n=>n[1])(n);let i=r.getCenter();return(0,oq.default)()({startAngle:0,endAngle:2*Math.PI,outerRadius:(0,i3.dist)(n[0],i),innerRadius:(0,i3.dist)(n[1],i)});}(n,s),y=function(n,r){if(!(0,rS.isPolar)(n))return r;let[i,a]=n.getCenter();return`translate(${i}, ${a}) ${r||""}`;}(s,r.transform);return(0,nT.select)(l.createElement("path",{})).call(iU.applyStyle,h).style("d",v).style("stroke",p).style("lineWidth",m).style("transform",y).style("markerEnd",g).call(iU.applyStyle,o).node();};};oY.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};let oZ=()=>(n,r)=>{let{data:i}=r;return!Array.isArray(i)||i.some(iM.isObject)?[n,r]:[n,(0,nS.default)({},r,{encode:{x:(0,iM.column)(i)}})];};oZ.props={};let oK={line:oY},oQ=n=>(r,i,a,o)=>{let{x:s}=a,l=(0,iI.createBandOffset)(i,a,(0,nS.default)({style:{bandOffset:0}},n)),u=Array.from(r,n=>[[s[n],1],[s[n],0]].map(r=>o.map(l(r,n))));return[r,u];};oQ.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:oK,channels:[...(0,iI.baseAnnotationChannels)({shapes:Object.keys(oK)}),{name:"x",required:!0}],preInference:[...(0,iI.basePreInference)(),{type:oZ}],postInference:[...(0,iI.basePostInference)()]};let oJ=()=>(n,r)=>{let{data:i}=r;return!Array.isArray(i)||i.some(iM.isObject)?[n,r]:[n,(0,nS.default)({},r,{encode:{y:(0,iM.column)(i)}})];};oJ.props={};let o0={line:oY},o1=n=>(r,i,a,o)=>{let{y:s}=a,l=(0,iI.createBandOffset)(i,a,(0,nS.default)({style:{bandOffset:0}},n)),u=Array.from(r,n=>[[0,s[n]],[1,s[n]]].map(r=>o.map(l(r,n))));return[r,u];};o1.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:o0,channels:[...(0,iI.baseAnnotationChannels)({shapes:Object.keys(o0)}),{name:"y",required:!0}],preInference:[...(0,iI.basePreInference)(),{type:oJ}],postInference:[...(0,iI.basePostInference)()]};var o2=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};function o3(n,r,i){return[["M",n,r],["L",n+2*i,r-i],["L",n+2*i,r+i],["Z"]];}let o4=(n,r)=>{let{offsetX:i=0,sourceOffsetX:a=i,targetOffsetX:o=i,offsetY:s=0,sourceOffsetY:l=s,targetOffsetY:u=s,connectLength1:c,endMarker:f=!0}=n,d=o2(n,["offsetX","sourceOffsetX","targetOffsetX","offsetY","sourceOffsetY","targetOffsetY","connectLength1","endMarker"]),{coordinate:h}=r;return(n,r,i)=>{let{color:s,connectLength1:p}=i,m=o2(i,["color","connectLength1"]),{color:g,transform:v}=r,y=function(n,r,i,a,o,s,l=0){let[[u,c],[f,d]]=r;if((0,rS.isTranspose)(n)){let n=u+i,r=n+l,h=c+o,p=d+s;return[[n,h],[r,h],[r,p],[f+a,p]];}let h=c-i,p=h-l,m=u-o,g=f-s;return[[m,h],[m,p],[g,p],[g,d-a]];}(h,n,l,u,a,o,null!=c?c:p),_=(0,nA.subObject)(Object.assign(Object.assign({},d),i),"endMarker");return(0,nT.select)(new eL.Path).call(iU.applyStyle,m).style("d",(0,iB.default)().x(n=>n[0]).y(n=>n[1])(y)).style("stroke",g||s).style("transform",v).style("markerEnd",f?new aY.Marker({className:"marker",style:Object.assign(Object.assign({},_),{symbol:o3})}):null).call(iU.applyStyle,d).node();};};o4.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};let o5={connector:o4},o6=(...n)=>oW(...n);function o8(n,r,i,a){if(r)return()=>[0,1];let{[n]:o,[`${n}1`]:s}=i;return n=>{var r;let i=(null===(r=a.getBandWidth)||void 0===r?void 0:r.call(a,a.invert(+s[n])))||0;return[o[n],s[n]+i];};}function o7(n={}){let{extendX:r=!1,extendY:i=!1}=n;return(n,a,o,s)=>{let l=o8("x",r,o,a.x),u=o8("y",i,o,a.y),c=Array.from(n,n=>{let[r,i]=l(n),[a,o]=u(n);return[[r,a],[i,a],[i,o],[r,o]].map(n=>s.map(n));});return[n,c];};}o6.props={defaultShape:"connector",defaultLabelShape:"label",composite:!1,shape:o5,channels:[...(0,iI.baseAnnotationChannels)({shapes:Object.keys(o5)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...(0,iI.basePreInference)()],postInference:[...(0,iI.basePostInference)()]};let o9={range:iC},se=()=>o7();se.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:o9,channels:[...(0,iI.baseAnnotationChannels)({shapes:Object.keys(o9)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...(0,iI.basePreInference)()],postInference:[...(0,iI.basePostInference)()]};let st=()=>(n,r)=>{let{data:i}=r;if(Array.isArray(i)&&(i.every(Array.isArray)||!i.some(iM.isObject))){let a=(n,r)=>Array.isArray(n[0])?n.map(n=>n[r]):[n[r]];return[n,(0,nS.default)({},r,{encode:{x:(0,iM.column)(a(i,0)),x1:(0,iM.column)(a(i,1))}})];}return[n,r];};st.props={};let sn={range:iC},sr=()=>o7({extendY:!0});sr.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:sn,channels:[...(0,iI.baseAnnotationChannels)({shapes:Object.keys(sn)}),{name:"x",required:!0}],preInference:[...(0,iI.basePreInference)(),{type:st}],postInference:[...(0,iI.basePostInference)()]};let si=()=>(n,r)=>{let{data:i}=r;if(Array.isArray(i)&&(i.every(Array.isArray)||!i.some(iM.isObject))){let a=(n,r)=>Array.isArray(n[0])?n.map(n=>n[r]):[n[r]];return[n,(0,nS.default)({},r,{encode:{y:(0,iM.column)(a(i,0)),y1:(0,iM.column)(a(i,1))}})];}return[n,r];};si.props={};let sa={range:iC},so=()=>o7({extendX:!0});so.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:sa,channels:[...(0,iI.baseAnnotationChannels)({shapes:Object.keys(sa)}),{name:"y",required:!0}],preInference:[...(0,iI.basePreInference)(),{type:si}],postInference:[...(0,iI.basePostInference)()]};var ss=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let sl=(n,r)=>{let{arrow:i,colorAttribute:a}=n,o=ss(n,["arrow","colorAttribute"]),{coordinate:s,document:l}=r;return(n,r,i)=>{let{color:u,stroke:c}=i,f=ss(i,["color","stroke"]),{d,color:h=u}=r,[p,m]=s.getSize();return(0,nT.select)(l.createElement("path",{})).call(iU.applyStyle,f).style("d","function"==typeof d?d({width:p,height:m}):d).style(a,h).call(iU.applyStyle,o).node();};};sl.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};let su=(n,r)=>sl(Object.assign({colorAttribute:"fill"},n),r);su.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};let sc=(n,r)=>sl(Object.assign({fill:"none",colorAttribute:"stroke"},n),r);sc.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};let sf={path:su,hollow:sc},sd=n=>(n,r,i,a)=>[n,n.map(()=>[[0,0]])];sd.props={defaultShape:"path",defaultLabelShape:"label",shape:sf,composite:!1,channels:[...(0,iI.baseGeometryChannels)({shapes:Object.keys(sf)}),{name:"d",scale:"identity"}],preInference:[...(0,iI.basePreInference)()],postInference:[...(0,iI.basePostInference)()]};var sh=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let sp=(n,r)=>{let{render:i}=n,a=sh(n,["render"]);return n=>{let[[o,s]]=n;return i(Object.assign(Object.assign({},a),{x:o,y:s}),r);};};sp.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};let sm=()=>(n,r)=>{let{style:i={}}=r;return[n,(0,nS.default)({},r,{style:Object.assign(Object.assign({},i),Object.fromEntries(Object.entries(i).filter(([,n])=>"function"==typeof n).map(([n,r])=>[n,()=>r])))})];};sm.props={};let sg=n=>{let{cartesian:r}=n;return r?iI.visualMark:(r,i,a,o)=>{let{x:s,y:l}=a,u=(0,iI.createBandOffset)(i,a,n),c=Array.from(r,n=>{let r=[+s[n],+l[n]];return[o.map(u(r,n))];});return[r,c];};};sg.props={defaultShape:"shape",defaultLabelShape:"label",composite:!1,shape:{shape:sp},channels:[{name:"x",required:!0},{name:"y",required:!0}],preInference:[...(0,iI.basePreInference)(),{type:a0},{type:a2},{type:sm}]};var sv=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let sy=(n,r)=>{let{document:i}=r;return(r,a,o)=>{let{transform:s}=a,{color:l}=o,u=sv(o,["color"]),{color:c=l}=a,[f,...d]=r,h=(0,ar.path)();return h.moveTo(...f),d.forEach(([n,r])=>{h.lineTo(n,r);}),h.closePath(),(0,nT.select)(i.createElement("path",{})).call(iU.applyStyle,u).style("d",h.toString()).style("stroke",c||l).style("fill",c||l).style("fillOpacity",.4).style("transform",s).call(iU.applyStyle,n).node();};};sy.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};let s_={density:sy},sb=()=>(n,r,i,a)=>{let{x:o,series:s}=i,l=Object.entries(i).filter(([n])=>n.startsWith("y")).map(([,n])=>n),u=Object.entries(i).filter(([n])=>n.startsWith("size")).map(([,n])=>n);if(void 0===o||void 0===l||void 0===u)throw Error("Missing encode for x or y or size channel.");let c=r.x,f=r.series,d=Array.from(n,r=>{let i=c.getBandWidth(c.invert(+o[r])),d=f?f.getBandWidth(f.invert(+(null==s?void 0:s[r]))):1,h=(+(null==s?void 0:s[r])||0)*i,p=+o[r]+h+i*d/2;return[...l.map((i,a)=>[p+ +u[a][r]/n.length,+l[a][r]]),...l.map((i,a)=>[p-+u[a][r]/n.length,+l[a][r]]).reverse()].map(n=>a.map(n));});return[n,d];};function sx(n,r,i){let a=n?n():document.createElement("canvas");return a.width=r,a.height=i,a;}sb.props={defaultShape:"density",defaultLabelShape:"label",composite:!1,shape:s_,channels:[...(0,iI.baseGeometryChannels)({shapes:Object.keys(s_)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"size",required:!0},{name:"series",scale:"band"},{name:"size",required:!0,scale:"identity"}],preInference:[...(0,iI.basePreInference)(),{type:iD},{type:iR}],postInference:[...(0,iI.basePostInference)(),...(0,iI.tooltip1d)()],interaction:{shareTooltip:!0}};let sE=(0,nq.lru)((n,r,i)=>{let a=sx(i,2*n,2*n),o=a.getContext("2d");if(1===r)o.beginPath(),o.arc(n,n,n,0,2*Math.PI,!1),o.fillStyle="rgba(0,0,0,1)",o.fill();else{let i=o.createRadialGradient(n,n,n*r,n,n,n);i.addColorStop(0,"rgba(0,0,0,1)"),i.addColorStop(1,"rgba(0,0,0,0)"),o.fillStyle=i,o.fillRect(0,0,2*n,2*n);}return a;},n=>`${n}`);var sw=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let sS=(n,r)=>{let{gradient:i,opacity:a,maxOpacity:o,minOpacity:s,blur:l,useGradientOpacity:u}=n,c=sw(n,["gradient","opacity","maxOpacity","minOpacity","blur","useGradientOpacity"]),{coordinate:f,createCanvas:d,document:h}=r;return(n,r,p)=>{var m,g;let{transform:v}=r,[y,_]=f.getSize(),b=n.map(n=>({x:n[0],y:n[1],value:n[2],radius:n[3]})),x=(0,rw.default)(n,n=>n[2]),E=(0,n5.default)(n,n=>n[2]),w=y&&_?function(n,r,i,a,o,s,l){let u=Object.assign({blur:.85,minOpacity:0,opacity:.6,maxOpacity:1,gradient:[[.25,"rgb(0,0,255)"],[.55,"rgb(0,255,0)"],[.85,"yellow"],[1,"rgb(255,0,0)"]]},s);u.minOpacity*=255,u.opacity*=255,u.maxOpacity*=255;let c=sx(l,n,r).getContext("2d"),f=function(n,r){let i=sx(r,256,1).getContext("2d"),a=i.createLinearGradient(0,0,256,1);return("string"==typeof n?n.split(" ").map(n=>{let[r,i]=n.split(":");return[+r,i];}):n).forEach(([n,r])=>{a.addColorStop(n,r);}),i.fillStyle=a,i.fillRect(0,0,256,1),i.getImageData(0,0,256,1).data;}(u.gradient,l);c.clearRect(0,0,n,r),function(n,r,i,a,o,s){let{blur:l}=o,u=a.length;for(;u--;){let{x:o,y:c,value:f,radius:d}=a[u],h=Math.min(f,i),p=o-d,m=c-d,g=sE(d,1-l,s),v=(h-r)/(i-r);n.globalAlpha=Math.max(v,.001),n.drawImage(g,p,m);}}(c,i,a,o,u,l);let d=function(n,r,i,a,o){let{minOpacity:s,opacity:l,maxOpacity:u,useGradientOpacity:c}=o,f=n.getImageData(0,0,r,i),d=f.data,h=d.length;for(let n=3;n<h;n+=4){let r=d[n],i=4*r;if(!i)continue;let o=l||Math.max(0,Math.min(u,Math.max(s,r)));d[n-3]=a[i],d[n-2]=a[i+1],d[n-1]=a[i+2],d[n]=c?a[i+3]:o;}return f;}(c,n,r,f,u),h=sx(l,n,r).getContext("2d");return h.putImageData(d,0,0),h;}(y,_,x,E,b,(m={gradient:i,opacity:a,minOpacity:s,maxOpacity:o,blur:l,useGradientOpacity:u},g=n=>void 0===n,Object.keys(m).reduce((n,r)=>{let i=m[r];return g(i,r)||(n[r]=i),n;},{})),d):{canvas:null};return(0,nT.select)(h.createElement("image",{})).call(iU.applyStyle,p).style("x",0).style("y",0).style("width",y).style("height",_).style("src",w.canvas.toDataURL()).style("transform",v).call(iU.applyStyle,c).node();};};sS.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};let sT={heatmap:sS},sA=n=>(n,r,i,a)=>{let{x:o,y:s,size:l,color:u}=i;return[[0],[Array.from(n,n=>{let r=l?+l[n]:40;return[...a.map([+o[n],+s[n]]),u[n],r];})]];};sA.props={defaultShape:"heatmap",defaultLabelShape:"label",composite:!1,shape:sT,channels:[...(0,iI.baseGeometryChannels)({shapes:Object.keys(sT)}),{name:"x",required:!0},{name:"y",required:!0},{name:"color",scale:"identity",required:!0},{name:"size"}],preInference:[...(0,iI.basePreInference)(),{type:iR},{type:iP}],postInference:[...(0,iI.basePostInference)(),...(0,iI.tooltip2d)()]};var sC=this&&this.__awaiter||function(n,r,i,a){return new(i||(i=Promise))(function(o,s){function l(n){try{c(a.next(n));}catch(n){s(n);}}function u(n){try{c(a.throw(n));}catch(n){s(n);}}function c(n){var r;n.done?o(n.value):((r=n.value)instanceof i?r:new i(function(n){n(r);})).then(l,u);}c((a=a.apply(n,r||[])).next());});},sO=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let sM=()=>({axis:!1,type:"text",encode:{x:"x",y:"y",text:"text",rotate:"rotate",fontSize:"size",shape:"tag"},scale:{x:{range:[0,1]},y:{range:[0,1]}},style:{fontFamily:n=>n.fontFamily},tooltip:{items:[n=>({name:n.text,value:n.value})]}}),sR=(n,r)=>sC(void 0,void 0,void 0,function*(){let{width:i,height:a}=r,{data:o,encode:s={},scale:l,style:u={},layout:c={}}=n,f=sO(n,["data","encode","scale","style","layout"]),d=function(n,r){let{text:i="text",value:a="value"}=r;return n.map(n=>Object.assign(Object.assign({},n),{text:n[i],value:n[a]}));}(o,s);return(0,nS.default)({},sM(),Object.assign(Object.assign({data:{value:d,transform:[Object.assign({type:"wordCloud",size:[i,a]},c)]},encode:s,scale:l,style:u},f),{axis:!1}));});sR.props={};let sP=()=>["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"];sP.props={};let sk=()=>["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"];sk.props={};var sI=i("c2287686");let sL=n=>new sI.Linear(n);sL.props={};var sN=i("6366e4a1");let sD=n=>new sN.Ordinal(n);sD.props={};var sF=i("7da32405");let sB=n=>new sF.Band(n);sB.props={};var sj=i("75aabd79"),sz=i("d740e8f4"),sU=i("d2953067");class sV extends sj.Base{getDefaultOptions(){return{domain:[0,1],range:[0,1],tickCount:5,unknown:void 0,tickMethod:sz.wilkinsonExtended};}map(n){return(0,sU.isValid)(n)?n:this.options.unknown;}invert(n){return this.map(n);}clone(){return new sV(this.options);}getTicks(){let{domain:n,tickCount:r,tickMethod:i}=this.options,[a,o]=n;return(0,ns.default)(a)&&(0,ns.default)(o)?i(a,o,r):[];}}let sG=n=>new sV(n);sG.props={};class sH extends sF.Band{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:sN.defaultUnknown,paddingInner:1,paddingOuter:0};}constructor(n){super(n);}getPaddingInner(){return 1;}clone(){return new sH(this.options);}update(n){super.update(n);}getPaddingOuter(){return this.options.padding;}}let sW=n=>new sH(n);sW.props={};var sX=i("8704c632"),sq=ew._(sX),s$=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,sY=/\[([^]*?)\]/gm;function sZ(n,r){for(var i=[],a=0,o=n.length;a<o;a++)i.push(n[a].substr(0,r));return i;}var sK=function(n){return function(r,i){var a=i[n].map(function(n){return n.toLowerCase();}).indexOf(r.toLowerCase());return a>-1?a:null;};};function sQ(n){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];for(var a=0;a<r.length;a++){var o=r[a];for(var s in o)n[s]=o[s];}return n;}var sJ=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s0=["January","February","March","April","May","June","July","August","September","October","November","December"],s1=sZ(s0,3),s2=sQ({},{dayNamesShort:sZ(sJ,3),dayNames:sJ,monthNamesShort:s1,monthNames:s0,amPm:["am","pm"],DoFn:function(n){return n+["th","st","nd","rd"][n%10>3?0:(n-n%10!=10?1:0)*n%10];}}),s3=function(n,r){for(void 0===r&&(r=2),n=String(n);n.length<r;)n="0"+n;return n;},s4={D:function(n){return String(n.getDate());},DD:function(n){return s3(n.getDate());},Do:function(n,r){return r.DoFn(n.getDate());},d:function(n){return String(n.getDay());},dd:function(n){return s3(n.getDay());},ddd:function(n,r){return r.dayNamesShort[n.getDay()];},dddd:function(n,r){return r.dayNames[n.getDay()];},M:function(n){return String(n.getMonth()+1);},MM:function(n){return s3(n.getMonth()+1);},MMM:function(n,r){return r.monthNamesShort[n.getMonth()];},MMMM:function(n,r){return r.monthNames[n.getMonth()];},YY:function(n){return s3(String(n.getFullYear()),4).substr(2);},YYYY:function(n){return s3(n.getFullYear(),4);},h:function(n){return String(n.getHours()%12||12);},hh:function(n){return s3(n.getHours()%12||12);},H:function(n){return String(n.getHours());},HH:function(n){return s3(n.getHours());},m:function(n){return String(n.getMinutes());},mm:function(n){return s3(n.getMinutes());},s:function(n){return String(n.getSeconds());},ss:function(n){return s3(n.getSeconds());},S:function(n){return String(Math.round(n.getMilliseconds()/100));},SS:function(n){return s3(Math.round(n.getMilliseconds()/10),2);},SSS:function(n){return s3(n.getMilliseconds(),3);},a:function(n,r){return 12>n.getHours()?r.amPm[0]:r.amPm[1];},A:function(n,r){return 12>n.getHours()?r.amPm[0].toUpperCase():r.amPm[1].toUpperCase();},ZZ:function(n){var r=n.getTimezoneOffset();return(r>0?"-":"+")+s3(100*Math.floor(Math.abs(r)/60)+Math.abs(r)%60,4);},Z:function(n){var r=n.getTimezoneOffset();return(r>0?"-":"+")+s3(Math.floor(Math.abs(r)/60),2)+":"+s3(Math.abs(r)%60,2);}};sK("monthNamesShort"),sK("monthNames");var s5={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},s6=function(n,r,i){if(void 0===r&&(r=s5.default),void 0===i&&(i={}),"number"==typeof n&&(n=new Date(n)),"[object Date]"!==Object.prototype.toString.call(n)||isNaN(n.getTime()))throw Error("Invalid Date pass to format");r=s5[r]||r;var a=[];r=r.replace(sY,function(n,r){return a.push(r),"@@@";});var o=sQ(sQ({},s2),i);return(r=r.replace(s$,function(r){return s4[r](n,o);})).replace(/@@@/g,function(){return a.shift();});},s8=i("32f028e7");function s7(n,r,i,a){let o=(n,r)=>{let o=n=>a(n)%r==0,s=r;for(;s&&!o(n);)i(n,-1),s-=1;return n;},s=(n,i)=>{i&&o(n,i),r(n);},l=(n,r)=>{let a=new Date(+n-1);return s(a,r),i(a,r),s(a),a;};return{ceil:l,floor:(n,r)=>{let i=new Date(+n);return s(i,r),i;},range:(n,r,a,o)=>{let u=[],c=Math.floor(a),f=o?l(n,a):l(n);for(;f<r;i(f,c),s(f))u.push(new Date(+f));return u;},duration:n};}let s9=s7(1,n=>n,(n,r=1)=>{n.setTime(+n+r);},n=>n.getTime()),le=s7(1e3,n=>{n.setMilliseconds(0);},(n,r=1)=>{n.setTime(+n+1e3*r);},n=>n.getSeconds()),lt=s7(6e4,n=>{n.setSeconds(0,0);},(n,r=1)=>{n.setTime(+n+6e4*r);},n=>n.getMinutes()),ln=s7(36e5,n=>{n.setMinutes(0,0,0);},(n,r=1)=>{n.setTime(+n+36e5*r);},n=>n.getHours()),lr=s7(864e5,n=>{n.setHours(0,0,0,0);},(n,r=1)=>{n.setTime(+n+864e5*r);},n=>n.getDate()-1),li=s7(2592e6,n=>{n.setDate(1),n.setHours(0,0,0,0);},(n,r=1)=>{let i=n.getMonth();n.setMonth(i+r);},n=>n.getMonth()),la={millisecond:s9,second:le,minute:lt,hour:ln,day:lr,week:s7(6048e5,n=>{n.setDate(n.getDate()-n.getDay()%7),n.setHours(0,0,0,0);},(n,r=1)=>{n.setDate(n.getDate()+7*r);},n=>{let r=li.floor(n);return Math.floor((+new Date(+n)-+r)/6048e5);}),month:li,year:s7(31536e6,n=>{n.setMonth(0,1),n.setHours(0,0,0,0);},(n,r=1)=>{let i=n.getFullYear();n.setFullYear(i+r);},n=>n.getFullYear())},lo=s7(1,n=>n,(n,r=1)=>{n.setTime(+n+r);},n=>n.getTime()),ls=s7(1e3,n=>{n.setUTCMilliseconds(0);},(n,r=1)=>{n.setTime(+n+1e3*r);},n=>n.getUTCSeconds()),ll=s7(6e4,n=>{n.setUTCSeconds(0,0);},(n,r=1)=>{n.setTime(+n+6e4*r);},n=>n.getUTCMinutes()),lu=s7(36e5,n=>{n.setUTCMinutes(0,0,0);},(n,r=1)=>{n.setTime(+n+36e5*r);},n=>n.getUTCHours()),lc=s7(864e5,n=>{n.setUTCHours(0,0,0,0);},(n,r=1)=>{n.setTime(+n+864e5*r);},n=>n.getUTCDate()-1),lf=s7(2592e6,n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0);},(n,r=1)=>{let i=n.getUTCMonth();n.setUTCMonth(i+r);},n=>n.getUTCMonth()),ld={millisecond:lo,second:ls,minute:ll,hour:lu,day:lc,week:s7(6048e5,n=>{n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7)%7),n.setUTCHours(0,0,0,0);},(n,r=1)=>{n.setTime(+n+6048e5*r);},n=>{let r=lf.floor(n);return Math.floor((+new Date(+n)-+r)/6048e5);}),month:lf,year:s7(31536e6,n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0);},(n,r=1)=>{let i=n.getUTCFullYear();n.setUTCFullYear(i+r);},n=>n.getUTCFullYear())};var lh=i("bbb27eba"),lp=i("9a4b906d");function lm(n,r,i,a,o){let s;let l=+n,u=+r,{tickIntervals:c,year:f,millisecond:d}=function(n){let{year:r,month:i,week:a,day:o,hour:s,minute:l,second:u,millisecond:c}=n?ld:la;return{tickIntervals:[[u,1],[u,5],[u,15],[u,30],[l,1],[l,5],[l,15],[l,30],[s,1],[s,3],[s,6],[s,12],[o,1],[o,2],[a,1],[i,1],[i,3],[r,1]],year:r,millisecond:c};}(o),h=([n,r])=>n.duration*r,p=a?(u-l)/a:i||5,m=a||(u-l)/p,g=c.length,v=(0,lh.bisect)(c,m,0,g,h);if(v===g){let n=(0,lp.tickStep)(l/f.duration,u/f.duration,p);s=[f,n];}else if(v){let[n,r]=m/h(c[v-1])<h(c[v])/m?c[v-1]:c[v],i=a?Math.ceil(a/n.duration):r;s=[n,i];}else s=[d,Math.max((0,lp.tickStep)(l,u,p),1)];return s;}let lg=(n,r,i,a,o)=>{let s=n>r,l=s?r:n,u=s?n:r,[c,f]=lm(l,u,i,a,o),d=c.range(l,new Date(+u+1),f,!0);return s?d.reverse():d;},lv=(n,r,i,a,o)=>{let s=n>r,l=s?r:n,u=s?n:r,[c,f]=lm(l,u,i,a,o),d=[c.floor(l,f),c.ceil(u,f)];return s?d.reverse():d;};var ly=i("8c0d48bf");function l_(n){let r=n.getTimezoneOffset(),i=new Date(n);return i.setMinutes(i.getMinutes()+r,i.getSeconds(),i.getMilliseconds()),i;}class lb extends s8.Continuous{getDefaultOptions(){return{domain:[new Date(2e3,0,1),new Date(2e3,0,2)],range:[0,1],nice:!1,tickCount:5,tickInterval:void 0,unknown:void 0,clamp:!1,tickMethod:lg,interpolate:ly.createInterpolateNumber,mask:void 0,utc:!1};}chooseTransforms(){return[n=>+n,n=>new Date(n)];}chooseNice(){return lv;}getTickMethodOptions(){let{domain:n,tickCount:r,tickInterval:i,utc:a}=this.options;return[n[0],n[n.length-1],r,i,a];}getFormatter(){let{mask:n,utc:r}=this.options,i=r?ld:la,a=r?l_:sq.default;return r=>s6(a(r),n||function(n,r){let{second:i,minute:a,hour:o,day:s,week:l,month:u,year:c}=r;return i.floor(n)<n?".SSS":a.floor(n)<n?":ss":o.floor(n)<n?"hh:mm":s.floor(n)<n?"hh A":u.floor(n)<n?l.floor(n)<n?"MMM DD":"ddd DD":c.floor(n)<n?"MMMM":"YYYY";}(r,i));}clone(){return new lb(this.options);}}let lx=n=>new lb(n);lx.props={};let lE=n=>r=>-n(-r),lw=(n,r)=>{let i=Math.log(n),a=n===Math.E?Math.log:10===n?Math.log10:2===n?Math.log2:n=>Math.log(n)/i;return r?lE(a):a;},lS=(n,r)=>{let i=n===Math.E?Math.exp:r=>n**r;return r?lE(i):i;};var lT=i("92d64018");let lA=(n,r,i,a=10)=>{let o=n<0,s=lS(a,o),l=lw(a,o),u=r<n,c=u?r:n,f=u?n:r,d=l(c),h=l(f),p=[];if(!(a%1)&&h-d<i){if(d=Math.floor(d),h=Math.ceil(h),o)for(;d<=h;d+=1){let n=s(d);for(let r=a-1;r>=1;r-=1){let i=n*r;if(i>f)break;i>=c&&p.push(i);}}else for(;d<=h;d+=1){let n=s(d);for(let r=1;r<a;r+=1){let i=n*r;if(i>f)break;i>=c&&p.push(i);}}2*p.length<i&&(p=(0,lT.d3Ticks)(c,f,i));}else{let n=-1===i?h-d:Math.min(h-d,i);p=(0,lT.d3Ticks)(d,h,n).map(s);}return u?p.reverse():p;},lC=(n,r,i,a)=>{let o=n<0,s=lw(a,o),l=lS(a,o),u=n>r,c=[l(Math.floor(s(u?r:n))),l(Math.ceil(s(u?n:r)))];return u?c.reverse():c;};class lO extends s8.Continuous{getDefaultOptions(){return{domain:[1,10],range:[0,1],base:10,interpolate:ly.createInterpolateValue,tickMethod:lA,tickCount:5};}chooseNice(){return lC;}getTickMethodOptions(){let{domain:n,tickCount:r,base:i}=this.options;return[n[0],n[n.length-1],r,i];}chooseTransforms(){let{base:n,domain:r}=this.options,i=r[0]<0;return[lw(n,i),lS(n,i)];}clone(){return new lO(this.options);}}let lM=n=>new lO(n);lM.props={};var lR=i("ac1f3315");let lP=n=>new lR.Pow(n);lP.props={};var lk=i("cbc6046a");let lI=n=>new lk.Threshold(n);lI.props={};var lL=i("59672304");let lN=n=>new lL.Quantile(n);lN.props={};var lD=i("cebf455b");let lF=n=>new lD.Quantize(n);lF.props={};class lB extends lR.Pow{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:ly.createInterpolateValue,tickMethod:lT.d3Ticks,tickCount:5,exponent:.5};}constructor(n){super(n);}update(n){super.update(n);}clone(){return new lB(this.options);}}let lj=n=>new lB(n);lj.props={};var lz=i("65a1f2fd"),lU=i("792e6f22");let lV=n=>r=>{let i=n(r);return(0,ns.default)(i)?Math.round(i):i;};var lG=this&&this.__decorate||function(n,r,i,a){var o,s=arguments.length,l=s<3?r:null===a?a=Object.getOwnPropertyDescriptor(r,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(n,r,i,a);else for(var u=n.length-1;u>=0;u--)(o=n[u])&&(l=(s<3?o(l):s>3?o(r,i,l):o(r,i))||l);return s>3&&l&&Object.defineProperty(r,i,l),l;};let lH=eo=class extends sI.Linear{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:sq.default,tickMethod:lT.d3Ticks,tickCount:5};}constructor(n){super(n);}clone(){return new eo(this.options);}};lH=eo=lG([(p=function(n){return[n(0),n(1)];},m=n=>{let[r,i]=n;return(0,lz.compose)((0,ly.createInterpolateNumber)(0,1),(0,lU.createNormalize)(r,i));},n=>{n.prototype.rescale=function(){this.initRange(),this.nice();let[n]=this.chooseTransforms();this.composeOutput(n,this.chooseClamp(n));},n.prototype.initRange=function(){let{interpolator:n}=this.options;this.options.range=p(n);},n.prototype.composeOutput=function(n,r){let{domain:i,interpolator:a,round:o}=this.getOptions(),s=m(i.map(n)),l=o?lV(a):a;this.output=(0,lz.compose)(l,s,r,n);},n.prototype.invert=void 0;})],lH);let lW=n=>new lH(n);lW.props={};var lX=i("c25722f9");let lq=n=>new lX.Constant(n);function l$({colorDefault:n,colorBlack:r,colorWhite:i,colorStroke:a,colorBackground:o,padding1:s,padding2:l,padding3:u,alpha90:c,alpha65:f,alpha45:d,alpha25:h,alpha10:p,category10:m,category20:g,sizeDefault:v=1,padding:y="auto",margin:_=16}){return{padding:y,margin:_,size:v,color:n,category10:m,category20:g,enter:{duration:300,fill:"both",delay:0},update:{duration:300,fill:"both",delay:0},exit:{duration:300,fill:"both",delay:0},view:{viewFill:o,plotFill:"transparent",mainFill:"transparent",contentFill:"transparent"},line:{line:{fill:"",strokeOpacity:1,lineWidth:1,lineCap:"round"}},point:{point:{r:3,fillOpacity:.95,lineWidth:0},hollow:{r:3,strokeOpacity:.95,lineWidth:1},plus:{r:3,strokeOpacity:.95,lineWidth:3},diamond:{r:3,strokeOpacity:.95,lineWidth:1}},interval:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},area:{area:{fillOpacity:.85,lineWidth:0}},polygon:{polygon:{fillOpacity:.95}},cell:{cell:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},rect:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},link:{link:{fill:"",strokeOpacity:1}},vector:{vector:{fillOpacity:1}},box:{box:{fillOpacity:.95,stroke:r,lineWidth:1}},text:{text:{fill:"#1D2129",fontSize:12,lineWidth:0,connectorStroke:a,connectorStrokeOpacity:.45,connectorLineWidth:1,backgroundFill:a,backgroundFillOpacity:.15,backgroundPadding:[2,4],startMarkerSymbol:"circle",startMarkerSize:4,endMarkerSymbol:"circle",endMarkerSize:4},badge:{fill:"#1D2129",fillOpacity:.65,lineWidth:0,fontSize:10,textAlign:"center",textBaseline:"middle",markerFill:a,markerFillOpacity:.25,markerStrokeOpacity:0}},lineX:{line:{stroke:a,strokeOpacity:.45,lineWidth:1}},lineY:{line:{stroke:a,strokeOpacity:.45,lineWidth:1}},rangeX:{range:{fill:a,fillOpacity:.15,lineWidth:0}},rangeY:{range:{fill:a,fillOpacity:.15,lineWidth:0}},connector:{connector:{stroke:a,strokeOpacity:.45,lineWidth:1,connectLength1:12,endMarker:!0,endMarkerSize:6,endMarkerFill:a,endMarkerFillOpacity:.95}},axis:{arrow:!1,gridLineDash:[3,4],gridLineWidth:.5,gridStroke:r,gridStrokeOpacity:p,labelAlign:"horizontal",labelFill:r,labelOpacity:d,labelFontSize:12,labelFontWeight:"normal",labelSpacing:s,line:!1,lineLineWidth:.5,lineStroke:r,lineStrokeOpacity:d,tickLength:4,tickLineWidth:1,tickStroke:r,tickOpacity:d,titleFill:r,titleOpacity:c,titleFontSize:12,titleFontWeight:"normal",titleSpacing:12,titleTransformOrigin:"center",lineArrowOffset:6,lineArrowSize:6},axisTop:{gridDirection:"positive",labelDirection:"negative",tickDirection:"negative",titlePosition:"top",titleSpacing:12,labelSpacing:4,titleTextBaseline:"middle"},axisBottom:{gridDirection:"negative",labelDirection:"positive",tickDirection:"positive",titlePosition:"bottom",titleSpacing:12,labelSpacing:4,titleTextBaseline:"bottom",titleTransform:"translate(0, 8)"},axisLeft:{gridDirection:"positive",labelDirection:"negative",labelSpacing:4,tickDirection:"negative",titlePosition:"left",titleSpacing:12,titleTextBaseline:"middle",titleDirection:"vertical",titleTransform:"rotate(-90) translate(0, -8)",titleTransformOrigin:"center"},axisRight:{gridDirection:"negative",labelDirection:"positive",labelSpacing:4,tickDirection:"positive",titlePosition:"right",titleSpacing:12,titleTextBaseline:"top",titleDirection:"vertical",titleTransformOrigin:"center"},axisLinear:{girdClosed:!0,gridConnect:"arc",gridDirection:"negative",gridType:"surround",titlePosition:"top",titleSpacing:0},axisArc:{title:!1,titlePosition:"inner",line:!1,tick:!0,labelSpacing:4},axisRadar:{girdClosed:!0,gridStrokeOpacity:.3,gridType:"surround",tick:!1,titlePosition:"start"},legendCategory:{backgroundFill:"transparent",itemBackgroundFill:"transparent",itemLabelFill:r,itemLabelFillOpacity:c,itemLabelFontSize:12,itemLabelFontWeight:"normal",itemMarkerFillOpacity:1,itemMarkerSize:8,itemSpacing:[s,s],itemValueFill:r,itemValueFillOpacity:.65,itemValueFontSize:12,itemValueFontWeight:"normal",navButtonFill:r,navButtonFillOpacity:.65,navPageNumFill:r,navPageNumFillOpacity:.45,navPageNumFontSize:12,padding:8,title:!1,titleFill:r,titleFillOpacity:.65,titleFontSize:12,titleFontWeight:"normal",titleSpacing:4,tickStroke:r,tickStrokeOpacity:.25,rowPadding:s,colPadding:l,maxRows:3,maxCols:3},legendContinuous:{handleHeight:12,handleLabelFill:r,handleLabelFillOpacity:d,handleLabelFontSize:12,handleLabelFontWeight:"normal",handleMarkerFill:r,handleMarkerFillOpacity:.6,handleMarkerLineWidth:1,handleMarkerStroke:r,handleMarkerStrokeOpacity:.25,handleWidth:10,labelFill:r,labelFillOpacity:d,labelFontSize:12,labelFontWeight:"normal",labelSpacing:3,tick:!0,tickLength:12,ribbonSize:12,ribbonFill:"#aaa",handle:!0,handleLabel:!1,handleShape:"slider",handleIconSize:12/1.8,indicator:!1,titleFontSize:12,titleSpacing:4,titleFontWeight:"normal",titleFillOpacity:c,tickStroke:r,tickStrokeOpacity:d},label:{fill:r,fillOpacity:.65,fontSize:12,fontWeight:"normal",stroke:void 0,offset:12,connectorStroke:r,connectorStrokeOpacity:.45,connectorLineWidth:1,connectorLength:12,connectorLength2:8,connectorDistance:4},innerLabel:{fill:i,fontSize:12,fillOpacity:.85,fontWeight:"normal",stroke:void 0,offset:0},htmlLabel:{fontSize:12,opacity:.65,color:r,fontWeight:"normal"},slider:{trackSize:16,trackFill:a,trackFillOpacity:1,selectionFill:n,selectionFillOpacity:.15,handleIconSize:10,handleIconFill:"#f7f7f7",handleIconFillOpacity:1,handleIconStroke:r,handleIconStrokeOpacity:.25,handleIconLineWidth:1,handleIconRadius:2,handleLabelFill:r,handleLabelFillOpacity:.45,handleLabelFontSize:12,handleLabelFontWeight:"normal"},scrollbar:{padding:[0,0,0,0],trackSize:6,isRound:!0,slidable:!0,scrollable:!0,trackFill:"#e5e5e5",trackFillOpacity:0,thumbFill:"#000",thumbFillOpacity:.15,thumbHighlightedFillOpacity:.2},title:{spacing:8,titleFill:r,titleFillOpacity:c,titleFontSize:16,titleFontWeight:"bold",titleTextBaseline:"top",subtitleFill:r,subtitleFillOpacity:f,subtitleFontSize:12,subtitleFontWeight:"normal",subtitleTextBaseline:"top"},tooltip:{css:{".g2-tooltip":{"font-family":"sans-serif"}}}};}lq.props={};let lY=l$({colorBlack:"#1D2129",colorWhite:"#ffffff",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1}),lZ=n=>(0,nS.default)({},lY,n);lZ.props={};let lK=n=>(0,nS.default)({},lZ(),{category10:"category10",category20:"category20"},n);lK.props={};let lQ=l$({colorBlack:"#fff",colorWhite:"#000",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.25}),lJ=n=>(0,nS.default)({},lQ,{tooltip:{crosshairsStroke:"#fff",crosshairsLineWidth:1,crosshairsStrokeOpacity:.25,css:{".g2-tooltip":{background:"#1f1f1f",opacity:.95},".g2-tooltip-title":{color:"#A6A6A6"},".g2-tooltip-list-item-name-label":{color:"#A6A6A6"},".g2-tooltip-list-item-value":{color:"#A6A6A6"}}}},n),l0=n=>Object.assign({},lJ(),{category10:"category10",category20:"category20"},n);l0.props={};let l1=l$({colorBlack:"#000",colorWhite:"#fff",colorStroke:"#888",colorDefault:"#4e79a7",colorBackground:"transparent",category10:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],category20:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1}),l2=n=>(0,nS.default)({},l1,{text:{text:{fontSize:10}},axis:{gridLineDash:[0,0],gridLineWidth:1,gridStroke:"#ddd",gridStrokeOpacity:1,labelOpacity:1,labelStrokeOpacity:1,labelFontSize:10,line:!0,lineLineWidth:1,lineStroke:"#888",lineStrokeOpacity:1,tickLength:5,tickStrokeOpacity:1,titleOpacity:1,titleStrokeOpacity:1,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},axisLeft:{gridFilter:(n,r)=>0!==r},axisRight:{gridFilter:(n,r)=>0!==r},legendCategory:{itemLabelFillOpacity:1,itemLabelFontSize:10,itemValueFillOpacity:1,itemValueFontSize:10,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},legendContinuous:{handleLabelFontSize:10,labelFillOpacity:.45,labelFontSize:10},label:{fontSize:10},innerLabel:{fontSize:10},htmlLabel:{fontSize:10},slider:{handleLabelFontSize:10,trackFillOpacity:.05}},n);l2.props={};var l3=i("39cdd665");let l4=n=>(...r)=>{let i=(0,l3.LinearAxis)(Object.assign({},{crossPadding:50},n))(...r);return(0,l3.rotateAxis)(i,n),i;};l4.props=Object.assign(Object.assign({},l3.LinearAxis.props),{defaultPosition:"bottom"});let l5=n=>(...r)=>{let i=(0,l3.LinearAxis)(Object.assign({},{crossPadding:10},n))(...r);return(0,l3.rotateAxis)(i,n),i;};l5.props=Object.assign(Object.assign({},l3.LinearAxis.props),{defaultPosition:"left"});var l6=i("3862611d"),l8=i("47a6bde3"),l7=i("920dd2bf"),l9=i("b0ea517f"),ue=i("a63b8d99"),ut=i("b7c9e889"),un=function(){},ur=function(n,r,i){var a=n,o=(0,tj.default)(r)?r.split("."):r;return o.forEach(function(n,r){r<o.length-1?((0,nH.default)(a[n])||(a[n]=(0,ns.default)(o[r+1])?[]:{}),a=a[n]):a[n]=i;}),n;},ui=i("fc81244b"),ua=i("ca2da9d1"),uo=i("4da6dd65"),us=i("7e9288b9"),ul=i("f1d8aa22"),uu=i("33d6cd11"),uc=i("14887fae"),uf=(0,ui.classNames)({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),ud=function(n){function r(r){var i=n.call(this,r,{x:0,y:0,animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonD:(0,uc.button)(0,0,6),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(n,r){return"".concat(n,"/").concat(r);},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return i.playState="idle",i.contentGroup=i.appendChild(new eL.Group({class:uf.contentGroup.name})),i.playWindow=i.contentGroup.appendChild(new eL.Group({class:uf.playWindow.name})),i.innerCurrPage=i.defaultPage,i;}return(0,l6.__extends)(r,n),Object.defineProperty(r.prototype,"defaultPage",{get:function(){var n=this.attributes.defaultPage;return(0,eY.default)(n,0,Math.max(this.pageViews.length-1,0));},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pageViews",{get:function(){return this.playWindow.children;},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0};},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pageShape",{get:function(){var n,r,i=this.pageViews,a=(0,l6.__read)(((null===(r=(n=i.map(function(n){var r=n.getBBox();return[r.width,r.height];}))[0])||void 0===r?void 0:r.map(function(r,i){return n.map(function(n){return n[i];});}))||[]).map(function(n){return Math.max.apply(Math,(0,l6.__spreadArray)([],(0,l6.__read)(n),!1));}),2),o=a[0],s=a[1],l=this.attributes,u=l.pageWidth,c=l.pageHeight;return{pageWidth:void 0===u?o:u,pageHeight:void 0===c?s:c};},enumerable:!1,configurable:!0}),r.prototype.getContainer=function(){return this.playWindow;},Object.defineProperty(r.prototype,"totalPages",{get:function(){return this.pageViews.length;},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"currPage",{get:function(){return this.innerCurrPage;},enumerable:!1,configurable:!0}),r.prototype.getBBox=function(){var r=n.prototype.getBBox.call(this),i=r.x,a=r.y,o=this.controllerShape,s=this.pageShape,l=s.pageWidth,u=s.pageHeight;return new l7.BBox(i,a,l+o.width,u);},r.prototype.goTo=function(n){var r=this,i=this.attributes.animate,a=this.currPage,o=this.playState,s=this.playWindow,l=this.pageViews;if("idle"!==o||n<0||l.length<=0||n>=l.length)return null;l[a].setLocalPosition(0,0),this.prepareFollowingPage(n);var u=(0,l6.__read)(this.getFollowingPageDiff(n),2),c=u[0],f=u[1];this.playState="running";var d=(0,us.animate)(s,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-c,", ").concat(-f,")")}],i);return(0,us.onAnimateFinished)(d,function(){r.innerCurrPage=n,r.playState="idle",r.setVisiblePages([n]),r.updatePageInfo();}),d;},r.prototype.prev=function(){var n=this.attributes.loop,r=this.pageViews.length,i=this.currPage;if(!n&&i<=0)return null;var a=n?(i-1+r)%r:(0,eY.default)(i-1,0,r);return this.goTo(a);},r.prototype.next=function(){var n=this.attributes.loop,r=this.pageViews.length,i=this.currPage;if(!n&&i>=r-1)return null;var a=n?(i+1)%r:(0,eY.default)(i+1,0,r);return this.goTo(a);},r.prototype.renderClipPath=function(n){var r=this.pageShape,i=r.pageWidth,a=r.pageHeight;if(!i||!a){this.contentGroup.style.clipPath=void 0;return;}this.clipPath=n.maybeAppendByClassName(uf.clipPath,"rect").styles({width:i,height:a}),this.contentGroup.attr("clipPath",this.clipPath.node());},r.prototype.setVisiblePages=function(n){this.playWindow.children.forEach(function(r,i){n.includes(i)?(0,ul.show)(r):(0,ul.hide)(r);});},r.prototype.adjustControllerLayout=function(){var n=this.prevBtnGroup,r=this.nextBtnGroup,i=this.pageInfoGroup,a=this.attributes,o=a.orientation,s=a.controllerPadding,l=i.getBBox(),u=l.width;l.height;var c=(0,l6.__read)("horizontal"===o?[-180,0]:[-90,90],2),f=c[0],d=c[1];n.setLocalEulerAngles(f),r.setLocalEulerAngles(d);var h=n.getBBox(),p=h.width,m=h.height,g=r.getBBox(),v=g.width,y=g.height,_=Math.max(p,u,v),b="horizontal"===o?{offset:[[0,0],[p/2+s,0],[p+u+2*s,0]],textAlign:"start"}:{offset:[[_/2,-m-s],[_/2,0],[_/2,y+s]],textAlign:"center"},x=(0,l6.__read)(b.offset,3),E=(0,l6.__read)(x[0],2),w=E[0],S=E[1],T=(0,l6.__read)(x[1],2),A=T[0],C=T[1],O=(0,l6.__read)(x[2],2),M=O[0],R=O[1],P=b.textAlign,k=i.querySelector("text");k&&(k.style.textAlign=P),n.setLocalPosition(w,S),i.setLocalPosition(A,C),r.setLocalPosition(M,R);},r.prototype.updatePageInfo=function(){var n,r=this.currPage,i=this.pageViews,a=this.attributes.formatter;i.length<2||(null===(n=this.pageInfoGroup.querySelector(uf.pageInfo.class))||void 0===n||n.attr("text",a(r+1,i.length)),this.adjustControllerLayout());},r.prototype.getFollowingPageDiff=function(n){var r=this.currPage;if(r===n)return[0,0];var i=this.attributes.orientation,a=this.pageShape,o=a.pageWidth,s=a.pageHeight,l=n<r?-1:1;return"horizontal"===i?[l*o,0]:[0,l*s];},r.prototype.prepareFollowingPage=function(n){var r=this.currPage,i=this.pageViews;if(this.setVisiblePages([n,r]),n!==r){var a=(0,l6.__read)(this.getFollowingPageDiff(n),2),o=a[0],s=a[1];i[n].setLocalPosition(o,s);}},r.prototype.renderController=function(n){var r=this,i=this.attributes.controllerSpacing,a=this.pageShape,o=a.pageWidth,s=a.pageHeight,l=this.pageViews.length>=2,u=n.maybeAppendByClassName(uf.controller,"g");if((0,ul.visibility)(u.node(),l),l){var c=(0,ue.subStyleProps)(this.attributes,"button"),f=(0,ue.subStyleProps)(this.attributes,"pageNum"),d=(0,l6.__read)((0,ue.splitStyle)(c),2),h=d[0],p=d[1],m=h.size,g=(0,l6.__rest)(h,["size"]),v=!u.select(uf.prevBtnGroup.class).node(),y=u.maybeAppendByClassName(uf.prevBtnGroup,"g").styles(p);this.prevBtnGroup=y.node();var _=y.maybeAppendByClassName(uf.prevBtn,"path"),b=u.maybeAppendByClassName(uf.nextBtnGroup,"g").styles(p);this.nextBtnGroup=b.node(),[_,b.maybeAppendByClassName(uf.nextBtn,"path")].forEach(function(n){n.styles((0,l6.__assign)((0,l6.__assign)({},g),{transformOrigin:"center"})),(0,uu.scaleToPixel)(n.node(),m,!0);});var x=u.maybeAppendByClassName(uf.pageInfoGroup,"g");this.pageInfoGroup=x.node(),x.maybeAppendByClassName(uf.pageInfo,"text").styles(f),this.updatePageInfo(),u.node().setLocalPosition(o+i,s/2),v&&(this.prevBtnGroup.addEventListener("click",function(){r.prev();}),this.nextBtnGroup.addEventListener("click",function(){r.next();}));}},r.prototype.render=function(n,r){var i=n.x,a=n.y;this.attr("transform","translate(".concat(void 0===i?0:i,", ").concat(void 0===a?0:a,")"));var o=(0,l9.select)(r);this.renderClipPath(o),this.renderController(o),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage);},r.prototype.bindEvents=function(){var n=this,r=(0,ny.default)(function(){return n.render(n.attributes,n);},50);this.playWindow.addEventListener(eL.ElementEvent.INSERTED,r),this.playWindow.addEventListener(eL.ElementEvent.REMOVED,r);},r;}(l8.Component),uh=i("ceab2f6b"),up=i("a125f0ec"),um=i("bcebdfcc"),ug=i("a602d54e"),uv=i("1915def0"),uy=i("611ea1fe"),u_=(0,ui.classNames)({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item"),ub=function(n){function r(r){return n.call(this,r,{span:[1,1],marker:function(){return new eL.Circle({style:{r:6}});},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this;}return(0,l6.__extends)(r,n),Object.defineProperty(r.prototype,"showValue",{get:function(){var n=this.attributes.valueText;return!!n&&("string"==typeof n||"number"==typeof n?""!==n:"function"==typeof n||""!==n.attr("text"));},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"actualSpace",{get:function(){var n=this.labelGroup,r=this.valueGroup,i=this.attributes.markerSize,a=n.node().getBBox(),o=a.width,s=a.height,l=r.node().getBBox();return{markerWidth:i,labelWidth:o,valueWidth:l.width,height:Math.max(i,s,l.height)};},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"span",{get:function(){var n=this.attributes.span;if(!n)return[1,1];var r=(0,l6.__read)((0,uv.parseSeriesAttr)(n),2),i=r[0],a=r[1],o=this.showValue?a:0,s=i+o;return[i/s,o/s];},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"shape",{get:function(){var n,r=this.attributes,i=r.markerSize,a=r.width,o=this.actualSpace,s=o.markerWidth,l=o.height,u=this.actualSpace,c=u.labelWidth,f=u.valueWidth,d=(0,l6.__read)(this.spacing,2),h=d[0],p=d[1];if(a){var m=a-i-h-p,g=(0,l6.__read)(this.span,2),v=g[0],y=g[1];c=(n=(0,l6.__read)([v*m,y*m],2))[0],f=n[1];}return{width:s+c+f+h+p,height:l,markerWidth:s,labelWidth:c,valueWidth:f};},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"spacing",{get:function(){var n=this.attributes.spacing;if(!n)return[0,0];var r=(0,l6.__read)((0,uv.parseSeriesAttr)(n),2),i=r[0],a=r[1];return this.showValue?[i,a]:[i,0];},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"layout",{get:function(){var n=this.shape,r=n.markerWidth,i=n.labelWidth,a=n.valueWidth,o=n.width,s=n.height,l=(0,l6.__read)(this.spacing,2),u=l[0];return{height:s,width:o,markerWidth:r,labelWidth:i,valueWidth:a,position:[r/2,r+u,r+i+u+l[1]]};},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"scaleSize",{get:function(){var n,r=(n=this.markerGroup.node().querySelector(u_.marker.class))?n.style:{},i=this.attributes,a=i.markerSize,o=i.markerStrokeWidth,s=void 0===o?r.strokeWidth:o,l=i.markerLineWidth,u=void 0===l?r.lineWidth:l,c=i.markerStroke,f=void 0===c?r.stroke:c,d=+(s||u||(f?1:0))*Math.sqrt(2),h=this.markerGroup.node().getBBox();return(1-d/Math.max(h.width,h.height))*a;},enumerable:!1,configurable:!0}),r.prototype.renderMarker=function(n){var r=this,i=this.attributes.marker,a=(0,ue.subStyleProps)(this.attributes,"marker");this.markerGroup=n.maybeAppendByClassName(u_.markerGroup,"g").style("zIndex",0),(0,ug.ifShow)(!!i,this.markerGroup,function(){var n,o=r.markerGroup.node(),s=null===(n=o.childNodes)||void 0===n?void 0:n[0],l="string"==typeof i?new aY.Marker({style:{symbol:i},className:u_.marker.name}):i();s?l.nodeName===s.nodeName?s instanceof aY.Marker?s.update((0,l6.__assign)((0,l6.__assign)({},a),{symbol:i})):((0,up.copyAttributes)(s,l),(0,l9.select)(s).styles(a)):(s.remove(),(0,l9.select)(l).attr("className",u_.marker.name).styles(a),o.appendChild(l)):(l instanceof aY.Marker||(0,l9.select)(l).attr("className",u_.marker.name).styles(a),o.appendChild(l)),r.markerGroup.node().scale(1/r.markerGroup.node().getScale()[0]);var u=(0,uu.scaleToPixel)(r.markerGroup.node(),r.scaleSize,!0);r.markerGroup.node().style._transform="scale(".concat(u,")");});},r.prototype.renderLabel=function(n){var r=(0,ue.subStyleProps)(this.attributes,"label"),i=r.text,a=(0,l6.__rest)(r,["text"]);this.labelGroup=n.maybeAppendByClassName(u_.labelGroup,"g").style("zIndex",0),this.labelGroup.maybeAppendByClassName(u_.label,function(){return(0,uy.renderExtDo)(i);}).styles(a);},r.prototype.renderValue=function(n){var r=this,i=(0,ue.subStyleProps)(this.attributes,"value"),a=i.text,o=(0,l6.__rest)(i,["text"]);this.valueGroup=n.maybeAppendByClassName(u_.valueGroup,"g").style("zIndex",0),(0,ug.ifShow)(this.showValue,this.valueGroup,function(){r.valueGroup.maybeAppendByClassName(u_.value,function(){return(0,uy.renderExtDo)(a);}).styles(o);});},r.prototype.renderBackground=function(n){var r=this.shape,i=r.width,a=r.height,o=(0,ue.subStyleProps)(this.attributes,"background");this.background=n.maybeAppendByClassName(u_.backgroundGroup,"g").style("zIndex",-1),this.background.maybeAppendByClassName(u_.background,"rect").styles((0,l6.__assign)({width:i,height:a},o));},r.prototype.adjustLayout=function(){var n=this.layout,r=n.labelWidth,i=n.valueWidth,a=n.height,o=(0,l6.__read)(n.position,3),s=o[0],l=o[1],u=o[2],c=a/2;this.markerGroup.styles({transform:"translate(".concat(s,", ").concat(c,")").concat(this.markerGroup.node().style._transform)}),this.labelGroup.styles({transform:"translate(".concat(l,", ").concat(c,")")}),(0,um.ellipsisIt)(this.labelGroup.select(u_.label.class).node(),Math.ceil(r)),this.showValue&&(this.valueGroup.styles({transform:"translate(".concat(u,", ").concat(c,")")}),(0,um.ellipsisIt)(this.valueGroup.select(u_.value.class).node(),Math.ceil(i)));},r.prototype.render=function(n,r){var i=(0,l9.select)(r),a=n.x,o=n.y;i.styles({transform:"translate(".concat(void 0===a?0:a,", ").concat(void 0===o?0:o,")")}),this.renderMarker(i),this.renderLabel(i),this.renderValue(i),this.renderBackground(i),this.adjustLayout();},r;}(l8.Component),ux=(0,ui.classNames)({page:"item-page",navigator:"navigator",item:"item"},"items"),uE=function(n,r,i){return(void 0===i&&(i=!0),n)?r(n):i;},uw=function(n){function r(r){var i=n.call(this,r,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:un,mouseenter:un,mouseleave:un})||this;return i.navigatorShape=[0,0],i;}return(0,l6.__extends)(r,n),Object.defineProperty(r.prototype,"pageViews",{get:function(){return this.navigator.getContainer();},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"grid",{get:function(){var n=this.attributes,r=n.gridRow,i=n.gridCol,a=n.data;if(!r&&!i)throw Error("gridRow and gridCol can not be set null at the same time");return r&&i?[r,i]:r?[r,a.length]:[a.length,i];},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"renderData",{get:function(){var n=this.attributes,r=n.data,i=n.layout,a=(0,ue.subStyleProps)(this.attributes,"item");return r.map(function(n,o){var s=n.id,l=void 0===s?o:s,u=n.label,c=n.value;return{id:"".concat(l),index:o,style:(0,l6.__assign)({layout:i,labelText:u,valueText:c},Object.fromEntries(Object.entries(a).map(function(i){var a=(0,l6.__read)(i,2),s=a[0],l=a[1];return[s,(0,uo.getCallbackValue)(l,[n,o,r])];})))};});},enumerable:!1,configurable:!0}),r.prototype.getGridLayout=function(){var n=this,r=this.attributes,i=r.orientation,a=r.width,o=r.rowPadding,s=r.colPadding,l=(0,l6.__read)(this.navigatorShape,1)[0],u=(0,l6.__read)(this.grid,2),c=u[0],f=u[1],d=f*c,h=0;return this.pageViews.children.map(function(r,u){var p,m,g=Math.floor(u/d),v=u%d,y=n.ifHorizontal(f,c),_=[Math.floor(v/y),v%y];"vertical"===i&&_.reverse();var b=(0,l6.__read)(_,2),x=b[0],E=b[1],w=(a-l-(f-1)*s)/f,S=r.getBBox().height,T=(0,l6.__read)([0,0],2),A=T[0],C=T[1];return"horizontal"===i?(A=(p=(0,l6.__read)([h,x*(S+o)],2))[0],C=p[1],h=E===f-1?0:h+w+s):(A=(m=(0,l6.__read)([E*(w+s),h],2))[0],C=m[1],h=x===c-1?0:h+S+o),{page:g,index:u,row:x,col:E,pageIndex:v,width:w,height:S,x:A,y:C};});},r.prototype.getFlexLayout=function(){var n=this.attributes,r=n.width,i=n.height,a=n.rowPadding,o=n.colPadding,s=(0,l6.__read)(this.navigatorShape,1)[0],l=(0,l6.__read)(this.grid,2),u=l[0],c=l[1],f=(0,l6.__read)([r-s,i],2),d=f[0],h=f[1],p=(0,l6.__read)([0,0,0,0,0,0,0,0],8),m=p[0],g=p[1],v=p[2],y=p[3],_=p[4],b=p[5],x=p[6],E=p[7];return this.pageViews.children.map(function(n,r){var i,s,l,f,p=n.getBBox(),w=p.width,S=p.height,T=0===x?0:o,A=x+T+w;return A<=d&&uE(_,function(n){return n<c;})?(m=(i=(0,l6.__read)([x+T,E,A],3))[0],g=i[1],x=i[2]):(b=(s=(0,l6.__read)([b+1,0,0,E+S+a],4))[0],_=s[1],x=s[2],(E=s[3])+S<=h&&uE(b,function(n){return n<u;}))?(m=(l=(0,l6.__read)([x,E,w],3))[0],g=l[1],x=l[2]):(m=(f=(0,l6.__read)([0,0,w,0,v+1,0,0,0],8))[0],g=f[1],x=f[2],E=f[3],v=f[4],y=f[5],b=f[6],_=f[7]),{width:w,height:S,x:m,y:g,page:v,index:r,pageIndex:y++,row:b,col:_++};});},Object.defineProperty(r.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var n="grid"===this.attributes.layout?this.getGridLayout:this.getFlexLayout,r=n.call(this);return r.slice(-1)[0].page>0?(this.navigatorShape=[55,0],n.call(this)):r;},enumerable:!1,configurable:!0}),r.prototype.ifHorizontal=function(n,r){var i=this.attributes.orientation;return(0,uh.ifHorizontal)(i,n,r);},r.prototype.flattenPage=function(n){n.querySelectorAll(ux.item.class).forEach(function(r){n.appendChild(r);}),n.querySelectorAll(ux.page.class).forEach(function(r){n.removeChild(r).destroy();});},r.prototype.renderItems=function(n){var r=this.attributes,i=r.click,a=r.mouseenter,o=r.mouseleave;this.flattenPage(n);var s=this.dispatchCustomEvent.bind(this);(0,l9.select)(n).selectAll(ux.item.class).data(this.renderData,function(n){return n.id;}).join(function(n){return n.append(function(n){return new ub({style:n.style});}).attr("className",ux.item.name).on("click",function(){null==i||i(this),s("itemClick",{item:this});}).on("pointerenter",function(){null==a||a(this),s("itemMouseenter",{item:this});}).on("pointerleave",function(){null==o||o(this),s("itemMouseleave",{item:this});});},function(n){return n.each(function(n){var r=n.style;this.update(r);});},function(n){return n.remove();});},r.prototype.relayoutNavigator=function(){var n,r=this.attributes,i=r.layout,a=r.width,o=(null===(n=this.pageViews.children[0])||void 0===n?void 0:n.getBBox().height)||0,s=(0,l6.__read)(this.navigatorShape,2),l=s[0],u=s[1];this.navigator.update("grid"===i?{pageWidth:a-l,pageHeight:o-u}:{});},r.prototype.adjustLayout=function(){var n,r,i=this,a=Object.entries((n=this.itemsLayout,r="page",n.reduce(function(n,i){return(n[i[r]]=n[i[r]]||[]).push(i),n;},{}))).map(function(n){var r=(0,l6.__read)(n,2);return{page:r[0],layouts:r[1]};}),o=(0,l6.__spreadArray)([],(0,l6.__read)(this.navigator.getContainer().children),!1);a.forEach(function(n){var r=n.layouts,a=i.pageViews.appendChild(new eL.Group({className:ux.page.name}));r.forEach(function(n){var r=n.x,i=n.y,s=n.index,l=n.width,u=n.height,c=o[s];a.appendChild(c),ur(c,"__layout__",n),c.update({x:r,y:i,width:l,height:u});});}),this.relayoutNavigator();},r.prototype.renderNavigator=function(n){var r=this.attributes.orientation,i=(0,ue.subStyleProps)(this.attributes,"nav"),a=(0,ua.deepAssign)({orientation:r},i),o=this;return n.selectAll(ux.navigator.class).data(["nav"]).join(function(n){return n.append(function(){return new ud({style:a});}).attr("className",ux.navigator.name).each(function(){o.navigator=this;});},function(n){return n.each(function(){this.update(a);});},function(n){return n.remove();}),this.navigator;},r.prototype.getBBox=function(){return this.navigator.getBBox();},r.prototype.render=function(n,r){var i=this.attributes.data;if(i&&0!==i.length){var a=this.renderNavigator((0,l9.select)(r));this.renderItems(a.getContainer()),this.adjustLayout();}},r.prototype.dispatchCustomEvent=function(n,r){var i=new eL.CustomEvent(n,{detail:r});this.dispatchEvent(i);},r;}(l8.Component),uS=i("2c0045d4"),uT=function(n){function r(r){return n.call(this,r,uS.CATEGORY_DEFAULT_OPTIONS)||this;}return(0,l6.__extends)(r,n),r.prototype.renderTitle=function(n,r,i){var a=this.attributes,o=a.showTitle,s=a.titleText,l=(0,ue.subStyleProps)(this.attributes,"title"),u=(0,l6.__read)((0,ue.splitStyle)(l),2),c=u[0],f=u[1];this.titleGroup=n.maybeAppendByClassName(uS.CLASS_NAMES.titleGroup,"g").styles(f);var d=(0,l6.__assign)((0,l6.__assign)({width:r,height:i},c),{text:o?s:""});this.title=this.titleGroup.maybeAppendByClassName(uS.CLASS_NAMES.title,function(){return new ut.Title({style:d});}).update(d);},r.prototype.renderItems=function(n,r){var i=r.x,a=r.y,o=r.width,s=r.height,l=(0,ue.subStyleProps)(this.attributes,"title",!0),u=(0,l6.__read)((0,ue.splitStyle)(l),2),c=u[0],f=u[1],d=(0,l6.__assign)((0,l6.__assign)({},c),{width:o,height:s,x:0,y:0});this.itemsGroup=n.maybeAppendByClassName(uS.CLASS_NAMES.itemsGroup,"g").styles((0,l6.__assign)((0,l6.__assign)({},f),{transform:"translate(".concat(i,", ").concat(a,")")}));var h=this;this.itemsGroup.selectAll(uS.CLASS_NAMES.items.class).data(["items"]).join(function(n){return n.append(function(){return new uw({style:d});}).attr("className",uS.CLASS_NAMES.items.name).each(function(){h.items=(0,l9.select)(this);});},function(n){return n.update(d);},function(n){return n.remove();});},r.prototype.adjustLayout=function(){if(this.attributes.showTitle){var n=this.title.node().getAvailableSpace(),r=n.x,i=n.y;this.itemsGroup.node().style.transform="translate(".concat(r,", ").concat(i,")");}},Object.defineProperty(r.prototype,"availableSpace",{get:function(){var n=this.attributes,r=n.showTitle,i=n.width,a=n.height;return r?this.title.node().getAvailableSpace():new l7.BBox(0,0,i,a);},enumerable:!1,configurable:!0}),r.prototype.getBBox=function(){var r,i,a=null===(r=this.title)||void 0===r?void 0:r.node(),o=null===(i=this.items)||void 0===i?void 0:i.node();return a&&o?(0,ut.getBBox)(a,o):n.prototype.getBBox.call(this);},r.prototype.render=function(n,r){var i=this.attributes,a=i.width,o=i.height,s=i.x,l=i.y,u=(0,l9.select)(r);r.style.transform="translate(".concat(void 0===s?0:s,", ").concat(void 0===l?0:l,")"),this.renderTitle(u,a,o),this.renderItems(u,this.availableSpace),this.adjustLayout();},r;}(l8.Component),uA=i("37e12186"),uC=ew._(uA),uO=i("da9a34de"),uM=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};function uR(n,r){let i=(0,uO.scaleOf)(n,"shape"),a=(0,uO.scaleOf)(n,"color"),o=i?i.clone():null,s=[];for(let[n,i]of r){let r=n.type,l=((null==a?void 0:a.getOptions().domain.length)>0?null==a?void 0:a.getOptions().domain:i.data).map((r,a)=>{var s;return o?o.map(r||"point"):(null===(s=null==n?void 0:n.style)||void 0===s?void 0:s.shape)||i.defaultShape||"point";});"string"==typeof r&&s.push([r,l]);}if(0===s.length)return["point",["point"]];if(1===s.length||!i)return s[0];let{range:l}=i.getOptions();return s.map(([n,r])=>{let i=0;for(let n=0;n<s.length;n++){let a=l[n%l.length];r[n]===a&&i++;}return[i/r.length,[n,r]];}).sort((n,r)=>r[0]-n[0])[0][1];}let uP=n=>{let{labelFormatter:r,layout:i,order:a,orientation:o,position:s,size:l,title:u,cols:c,itemMarker:f}=n,d=uM(n,["labelFormatter","layout","order","orientation","position","size","title","cols","itemMarker"]),{gridRow:h}=d;return r=>{let{value:a,theme:o}=r,{bbox:l}=a,{width:f,height:p}=function(n,r,i){let{position:a}=r;if("center"===a){let{bbox:r}=n,{width:i,height:a}=r;return{width:i,height:a};}let{width:o,height:s}=(0,uO.inferComponentShape)(n,r,i);return{width:o,height:s};}(a,n,uP),m=(0,uO.inferComponentLayout)(s,i),g=Object.assign(Object.assign(Object.assign(Object.assign({orientation:["right","left","center"].includes(s)?"vertical":"horizontal",width:f,height:p,layout:void 0!==c?"grid":"flex"},void 0!==c&&{gridCol:c}),void 0!==h&&{gridRow:h}),{titleText:(0,uO.titleContent)(u)}),function(n,r){let{labelFormatter:i=n=>`${n}`}=n,{scales:a,theme:o}=r,s=function(n,r){let i=(0,uO.scaleOf)(n,"size");return i instanceof sV?2*i.map(NaN):r;}(a,o.legendCategory.itemMarkerSize),l={itemMarker:function(n,r){let{scales:i,library:a,markState:o}=r,[s,l]=uR(i,o),{itemMarker:u,itemMarkerSize:c}=n,f=(n,r)=>{var i,o,l;let u=(null===(l=null===(o=null===(i=a[`mark.${s}`])||void 0===i?void 0:i.props)||void 0===o?void 0:o.shape[n])||void 0===l?void 0:l.props.defaultMarker)||(0,uC.default)(n.split(".")),f="function"==typeof c?c(r):c;return()=>(0,av.useMarker)(u,{color:r.color})(0,0,f);},d=n=>`${l[n]}`;return(0,uO.scaleOf)(i,"shape")&&!u?(n,r)=>f(d(r),n):"function"==typeof u?(n,r)=>{let i=u(n.id,r);return"string"==typeof i?f(i,n):i;}:(n,r)=>f(u||d(r),n);}(Object.assign(Object.assign({},n),{itemMarkerSize:s}),r),itemMarkerSize:s,itemMarkerOpacity:function(n){let r=(0,uO.scaleOf)(n,"opacity");if(r){let{range:n}=r.getOptions();return(r,i)=>n[i];}}(a),itemMarkerLineWidth:function(n,r){let{scales:i,markState:a}=r,[o,s]=uR(i,a),{itemMarker:l,itemMarkerLineWidth:u}=n;if(void 0!==u)return u;let c=["line","hyphen","dash","smooth","hv","hvh","vh","vhv"];return"string"==typeof l&&c.includes(l)?4:"function"==typeof l?(n,r)=>{let i=l(n.id,r);if("string"==typeof i&&c.includes(i))return 4;}:(Array.isArray(s)?s:[s]).some(n=>c.includes(n))?4:void 0;}(n,r)},u="string"==typeof i?(0,n0.format)(i):i,c=(0,uO.scaleOf)(a,"color"),f=(0,uO.domainOf)(a),d=c?n=>c.map(n):()=>r.theme.color;return Object.assign(Object.assign({},l),{data:f.map(n=>({id:n,label:u(n),color:d(n)}))});}(n,r)),{legendCategory:v={}}=o,y=(0,uO.adaptor)(Object.assign({},v,Object.assign(Object.assign({},g),{data:(null==g?void 0:g.data.filter(n=>""!==n.id))||[]}),d)),_=new uO.LegendCategoryLayout({style:Object.assign(Object.assign({x:l.x,y:l.y,width:l.width,height:l.height},m),{subOptions:y})});return _.appendChild(new uT({className:"legend-category",style:y})),_;};};uP.props={defaultPosition:"top",defaultOrder:1,defaultSize:40,defaultCrossPadding:[12,12],defaultPadding:[12,12]};var uk=i("2de3468c"),uI=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};function uL(n,r,i,a){switch(a){case"center":return{x:n+i/2,y:r,textAlign:"middle"};case"right":return{x:n+i,y:r,textAlign:"right"};default:return{x:n,y:r,textAlign:"left"};}}let uN=(0,uO.createComponent)({render(n,r){let{width:i,title:a,subtitle:o,spacing:s=2,align:l="left",x:u,y:c}=n,f=uI(n,["width","title","subtitle","spacing","align","x","y"]);r.style.transform=`translate(${u}, ${c})`;let d=(0,nA.subObject)(f,"title"),h=(0,nA.subObject)(f,"subtitle"),p=(0,uO.maybeAppend)(r,".title","text").attr("className","title").call(iU.applyStyle,Object.assign(Object.assign(Object.assign({},uL(0,0,i,l)),{fontSize:14,textBaseline:"top",text:a}),d)).node().getLocalBounds();(0,uO.maybeAppend)(r,".sub-title","text").attr("className","sub-title").call(n=>{if(!o)return n.node().remove();n.node().attr(Object.assign(Object.assign(Object.assign({},uL(0,p.max[1]+s,i,l)),{fontSize:12,textBaseline:"top",text:o}),h));});}}),uD=n=>({value:r,theme:i})=>{let{x:a,y:o,width:s,height:l}=r.bbox;return new uN({style:(0,nS.default)({},i.title,Object.assign({x:a,y:o,width:s,height:l},n))});};uD.props={defaultPosition:"top",defaultOrder:2,defaultSize:36,defaultCrossPadding:[20,20],defaultPadding:[12,12]};var uF=i("bbbf6464"),uB=i("6048efd3"),uj=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let uz=n=>{let{orientation:r,labelFormatter:i,size:a,style:o={},position:s}=n,l=uj(n,["orientation","labelFormatter","size","style","position"]);return a=>{var u;let{scales:[c],value:f,theme:d,coordinate:h}=a,{bbox:p}=f,{width:m,height:g}=p,{slider:v={}}=d,y=(null===(u=c.getFormatter)||void 0===u?void 0:u.call(c))||(n=>n+""),_="string"==typeof i?(0,n0.format)(i):i,b="horizontal"===r,x=(0,rS.isTranspose)(h)&&b,{trackSize:E=v.trackSize}=o,[w,S]=function(n,r,i){let{x:a,y:o,width:s,height:l}=n;return"left"===r?[a+s-i,o]:"right"===r||"bottom"===r?[a,o]:"top"===r?[a,o+l-i]:void 0;}(p,s,E);return new uF.Slider({className:"slider",style:Object.assign({},v,Object.assign(Object.assign({x:w,y:S,trackLength:b?m:g,orientation:r,formatter:n=>(_||y)((0,uB.invert)(c,x?1-n:n,!0)),sparklineData:function(n,r){let{markState:i}=r;return(0,nJ.default)(n.sparklineData)?n.sparklineData:function(n,r){let[i]=Array.from(n.entries()).filter(([n])=>"line"===n.type||"area"===n.type).filter(([n])=>n.slider).map(([n])=>{let{encode:i,slider:a}=n;if(null==a?void 0:a.x)return Object.fromEntries(r.map(n=>{let r=i[n];return[n,r?r.value:void 0];}));});return(null==i?void 0:i.series)?Object.values(i.series.reduce((n,r,a)=>(n[r]=n[r]||[],n[r].push(i.y[a]),n),{})):null==i?void 0:i.y;}(i,["y","series"]);}(n,a)},o),l))});};};uz.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};let uU=n=>uz(Object.assign(Object.assign({},n),{orientation:"horizontal"}));uU.props=Object.assign(Object.assign({},uz.props),{defaultPosition:"bottom"});let uV=n=>uz(Object.assign(Object.assign({},n),{orientation:"vertical"}));uV.props=Object.assign(Object.assign({},uz.props),{defaultPosition:"left"});var uG=i("f65342ee"),uH=function(n){function r(r){var i=n.call(this,r,{x:0,y:0,isRound:!0,orientation:"vertical",padding:[2,2,2,2],scrollable:!0,slidable:!0,thumbCursor:"default",trackSize:10,value:0})||this;return i.range=[0,1],i.onValueChange=function(n){var r=i.attributes.value;if(n!==r){var a={detail:{oldValue:n,value:r}};i.dispatchEvent(new eL.CustomEvent("scroll",a)),i.dispatchEvent(new eL.CustomEvent("valuechange",a));}},i.onTrackClick=function(n){if(i.attributes.slidable){var r=(0,l6.__read)(i.getLocalPosition(),2),a=r[0],o=r[1],s=(0,l6.__read)(i.padding,4),l=s[0],u=s[3],c=i.getOrientVal([a+u,o+l]),f=(i.getOrientVal((0,uG.getEventPos)(n))-c)/i.trackLength;i.setValue(f,!0);}},i.onThumbMouseenter=function(n){i.dispatchEvent(new eL.CustomEvent("thumbMouseenter",{detail:n.detail}));},i.onTrackMouseenter=function(n){i.dispatchEvent(new eL.CustomEvent("trackMouseenter",{detail:n.detail}));},i.onThumbMouseleave=function(n){i.dispatchEvent(new eL.CustomEvent("thumbMouseleave",{detail:n.detail}));},i.onTrackMouseleave=function(n){i.dispatchEvent(new eL.CustomEvent("trackMouseleave",{detail:n.detail}));},i;}return(0,l6.__extends)(r,n),Object.defineProperty(r.prototype,"padding",{get:function(){var n=this.attributes.padding;return(0,uv.parseSeriesAttr)(n);},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"value",{get:function(){var n=this.attributes.value,r=(0,l6.__read)(this.range,2),i=r[0],a=r[1];return(0,eY.default)(n,i,a);},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"trackLength",{get:function(){var n=this.attributes,r=n.viewportLength,i=n.trackLength;return void 0===i?r:i;},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"availableSpace",{get:function(){var n=this.attributes.trackSize,r=this.trackLength,i=(0,l6.__read)(this.padding,4),a=i[0],o=i[1],s=i[2],l=i[3],u=(0,l6.__read)(this.getOrientVal([[r,n],[n,r]]),2);return{x:l,y:a,width:+u[0]-(l+o),height:+u[1]-(a+s)};},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"trackRadius",{get:function(){var n=this.attributes,r=n.isRound,i=n.trackSize;return r?i/2:0;},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"thumbRadius",{get:function(){var n=this.attributes,r=n.isRound,i=n.thumbRadius;if(!r)return 0;var a=this.availableSpace,o=a.width,s=a.height;return i||this.getOrientVal([s,o])/2;},enumerable:!1,configurable:!0}),r.prototype.getValues=function(n){void 0===n&&(n=this.value);var r=this.attributes,i=r.viewportLength/r.contentLength,a=(0,l6.__read)(this.range,2),o=a[0],s=n*(a[1]-o-i);return[s,s+i];},r.prototype.getValue=function(){return this.value;},r.prototype.renderSlider=function(n){var r=this.attributes,i=r.x,a=r.y,o=r.orientation,s=r.trackSize,l=r.padding,u=r.slidable,c=(0,ue.subStyleProps)(this.attributes,"track"),f=(0,ue.subStyleProps)(this.attributes,"thumb"),d=(0,l6.__assign)((0,l6.__assign)({x:i,y:a,brushable:!1,orientation:o,padding:l,selectionRadius:this.thumbRadius,showHandle:!1,slidable:u,trackLength:this.trackLength,trackRadius:this.trackRadius,trackSize:s,values:this.getValues()},(0,ue.superStyleProps)(c,"track")),(0,ue.superStyleProps)(f,"selection"));this.slider=(0,l9.select)(n).maybeAppendByClassName("scrollbar",function(){return new uF.Slider({style:d});}).update(d).node();},r.prototype.render=function(n,r){this.renderSlider(r);},r.prototype.setValue=function(n,r){void 0===r&&(r=!1);var i=this.attributes.value,a=(0,l6.__read)(this.range,2),o=a[0],s=a[1];this.slider.setValues(this.getValues((0,eY.default)(n,o,s)),r),this.onValueChange(i);},r.prototype.bindEvents=function(){var n=this;this.slider.addEventListener("trackClick",function(r){r.stopPropagation(),n.onTrackClick(r.detail);}),this.onHover();},r.prototype.getOrientVal=function(n){return"horizontal"===this.attributes.orientation?n[0]:n[1];},r.prototype.onHover=function(){this.slider.addEventListener("selectionMouseenter",this.onThumbMouseenter),this.slider.addEventListener("trackMouseenter",this.onTrackMouseenter),this.slider.addEventListener("selectionMouseleave",this.onThumbMouseleave),this.slider.addEventListener("trackMouseleave",this.onTrackMouseleave);},r.tag="scrollbar",r;}(l8.Component),uW=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let uX=n=>{let{orientation:r,labelFormatter:i,style:a}=n,o=uW(n,["orientation","labelFormatter","style"]);return({scales:[n],value:i,theme:s})=>{let{bbox:l}=i,{x:u,y:c,width:f,height:d}=l,{scrollbar:h={}}=s,{ratio:p,range:m}=n.getOptions(),g="horizontal"===r?f:d,v=g/p,[y,_]=m;return new uH({className:"g2-scrollbar",style:Object.assign({},h,Object.assign(Object.assign(Object.assign(Object.assign({},a),{x:u,y:c,trackLength:g,value:_>y?0:1}),o),{orientation:r,contentLength:v,viewportLength:g}))});};};uX.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};let uq=n=>uX(Object.assign(Object.assign({},n),{orientation:"horizontal"}));uq.props=Object.assign(Object.assign({},uX.props),{defaultPosition:"bottom"});let u$=n=>uX(Object.assign(Object.assign({},n),{orientation:"vertical"}));u$.props=Object.assign(Object.assign({},uX.props),{defaultPosition:"left"});let uY=n=>()=>new eL.Group;uY.props={};let uZ=(n,r)=>{let{coordinate:i}=r;return(r,a,o)=>{let[s]=r,{transform:l="",fillOpacity:u=1,strokeOpacity:c=1,opacity:f=1}=s.style,[d,h]=(0,rS.isTranspose)(i)?["left bottom","scale(1, 0.0001)"]:["left top","scale(0.0001, 1)"],p=[{transform:`${l} ${h}`.trimStart(),transformOrigin:d,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${l} ${h}`.trimStart(),transformOrigin:d,fillOpacity:u,strokeOpacity:c,opacity:f,offset:.01},{transform:`${l} scale(1, 1)`.trimStart(),transformOrigin:d,fillOpacity:u,strokeOpacity:c,opacity:f}];return s.animate(p,Object.assign(Object.assign({},o),n));};},uK=(n,r)=>{let{coordinate:i}=r;return eL.CSS.registerProperty({name:"scaleInYRadius",inherits:!1,initialValue:"",interpolable:!0,syntax:eL.PropertySyntax.NUMBER}),(r,a,o)=>{let[s]=r;return(0,rS.isPolar)(i)?(r=>{let{__data__:a,style:s}=r,{fillOpacity:l=1,strokeOpacity:u=1,opacity:c=1}=s,{points:f,y:d,y1:h}=a,{innerRadius:p,outerRadius:m}=(0,iU.getArcObject)(i,f,[d,h]);return r.animate([{scaleInYRadius:p+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{scaleInYRadius:p+1e-4,fillOpacity:l,strokeOpacity:u,opacity:c,offset:.01},{scaleInYRadius:m,fillOpacity:l,strokeOpacity:u,opacity:c}],Object.assign(Object.assign({},o),n));})(s):(r=>{let{style:a}=r,{transform:s="",fillOpacity:l=1,strokeOpacity:u=1,opacity:c=1}=a,[f,d]=(0,rS.isTranspose)(i)?["left top","scale(0.0001, 1)"]:["left bottom","scale(1, 0.0001)"],h=[{transform:`${s} ${d}`.trimStart(),transformOrigin:f,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${s} ${d}`.trimStart(),transformOrigin:f,fillOpacity:l,strokeOpacity:u,opacity:c,offset:.01},{transform:`${s} scale(1, 1)`.trimStart(),transformOrigin:f,fillOpacity:l,strokeOpacity:u,opacity:c}];return r.animate(h,Object.assign(Object.assign({},o),n));})(s);};},uQ=(n,r)=>{eL.CSS.registerProperty({name:"waveInArcAngle",inherits:!1,initialValue:"",interpolable:!0,syntax:eL.PropertySyntax.NUMBER});let{coordinate:i}=r;return(a,o,s)=>{let[l]=a;if(!(0,rS.isPolar)(i))return uZ(n,r)(a,o,s);let{__data__:u,style:c}=l,{radius:f=0,inset:d=0,fillOpacity:h=1,strokeOpacity:p=1,opacity:m=1}=c,{points:g,y:v,y1:y}=u,_=(0,oq.default)().cornerRadius(f).padAngle(d*Math.PI/180),b=(0,iU.getArcObject)(i,g,[v,y]),{startAngle:x,endAngle:E}=b,w=l.animate([{waveInArcAngle:x+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{waveInArcAngle:x+1e-4,fillOpacity:h,strokeOpacity:p,opacity:m,offset:.01},{waveInArcAngle:E,fillOpacity:h,strokeOpacity:p,opacity:m}],Object.assign(Object.assign({},s),n));return w.onframe=function(){l.style.d=_(Object.assign(Object.assign({},b),{endAngle:Number(l.style.waveInArcAngle)}));},w.onfinish=function(){l.style.d=_(Object.assign(Object.assign({},b),{endAngle:E}));},w;};};uQ.props={};let uJ=n=>(r,i,a)=>{let[o]=r,{fillOpacity:s=1,strokeOpacity:l=1,opacity:u=1}=o.style;return o.animate([{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:s,strokeOpacity:l,opacity:u}],Object.assign(Object.assign({},a),n));};uJ.props={};let u0=n=>(r,i,a)=>{let[o]=r,{fillOpacity:s=1,strokeOpacity:l=1,opacity:u=1}=o.style;return o.animate([{fillOpacity:s,strokeOpacity:l,opacity:u},{fillOpacity:0,strokeOpacity:0,opacity:0}],Object.assign(Object.assign({},a),n));};u0.props={};let u1={opacity:1,strokeOpacity:1,fillOpacity:1,lineWidth:0,x:0,y:0,cx:0,cy:0,r:0,rx:0,ry:0,width:0,height:0},u2={[eL.Shape.CIRCLE]:["cx","cy","r"],[eL.Shape.ELLIPSE]:["cx","cy","rx","ry"],[eL.Shape.RECT]:["x","y","width","height"],[eL.Shape.IMAGE]:["x","y","width","height"],[eL.Shape.LINE]:["x1","y1","x2","y2"],[eL.Shape.POLYLINE]:["points"],[eL.Shape.POLYGON]:["points"]};function u3(n,r,i=!1){let a={};for(let o of r){let r=n.style[o];r?a[o]=r:i&&(a[o]=u1[o]);}return a;}let u4=["fill","stroke","fillOpacity","strokeOpacity","opacity","lineWidth"];function u5(n){let{min:r,max:i}=n.getLocalBounds(),[a,o]=r,[s,l]=i;return[a,o,s-a,l-o];}function u6(n,r){let[i,a,o,s]=u5(n),l=Math.ceil(Math.sqrt(r/(s/o))),u=[],c=s/Math.ceil(r/l),f=0,d=r;for(;d>0;){let n=Math.min(d,l),r=o/n;for(let o=0;o<n;o++){let n=i+o*r,s=a+f*c;u.push(function(n){let[r,i,a,o]=n;return`
    M ${r} ${i}
    L ${r+a} ${i}
    L ${r+a} ${i+o}
    L ${r} ${i+o}
    Z
  `;}([n,s,r,c]));}d-=n,f+=1;}return u;}function u8(n,r){n.__data__=r.__data__,n.className=r.className,n.markType=r.markType,r.parentNode.replaceChild(n,r);}function u7(n,r){return n.indexOf(r)===n.lastIndexOf(r);}function u9(n){let r=(0,eL.convertToPath)(n);if(r&&!(!u7(r,"m")||!u7(r,"M")))return r;}function ce(n){let{nodeName:r}=n;if("path"===r){let r=(0,nb.default)(n,"attributes");return r.markerEnd||r.markerStart;}return!1;}function ct(n,r,i,a){let{nodeName:o}=r,{nodeName:s}=i,l=u9(r),u=u9(i),c=void 0===l||void 0===u,f=ce(r)||ce(i);if(o===s&&"path"!==o||c||f)return function(n,r,i){let{transform:a}=n.style,{transform:o}=r.style;u8(r,n);let s=u4;if(n.nodeName===eL.Shape.GROUP){let[i,o,s,l]=u5(n),[u,c,f,d]=u5(r);a=`translate(${i-u}, ${o-c}) scale(${s/f}, ${l/d})`;}else s=s.concat(u2[n.nodeName]||[]);let l=[Object.assign({transform:null!=a?a:"none"},u3(n,s,!0)),Object.assign({transform:null!=o?o:"none"},u3(r,s,!0))];return r.animate(l,i);}(r,i,a);let d=function(n,r){let{nodeName:i}=n;if("path"===i)return n;let a=new eL.Path({style:Object.assign(Object.assign({},u3(n,u4)),{d:r})});return u8(a,n),a;}(n,l),h=[Object.assign({},u3(r,u4)),Object.assign({},u3(i,u4))];if(l!==u){h[0].d=l,h[1].d=u;let n=d.animate(h,a);return n.onfinish=()=>{(0,nA.copyAttributes)(d,i),d.style.d=u,d.style.transform="none";},d.style.transform="none",n;}return null;}let cn=n=>(r,i,a)=>{let o=function(n="pack"){return"function"==typeof n?n:u6;}(n.split),s=Object.assign(Object.assign({},a),n),{length:l}=r,{length:u}=i;if(1===l&&1===u||l>1&&u>1){let[n]=r,[a]=i;return ct(n,n,a,s);}if(1===l&&u>1){let[n]=r;return function(n,r,i,a){n.style.visibility="hidden";let o=a(n,r.length);return r.map((r,a)=>ct(r,new eL.Path({style:Object.assign({d:o[a]},u3(n,u4))}),r,i));}(n,i,s,o);}if(l>1&&1===u){let[n]=i;return function(n,r,i,a){let o=a(r,n.length),{fillOpacity:s=1,strokeOpacity:l=1,opacity:u=1}=r.style,c=r.animate([{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:0,strokeOpacity:0,opacity:0,offset:.99},{fillOpacity:s,strokeOpacity:l,opacity:u}],i);return[...n.map((n,a)=>ct(n,n,new eL.Path({style:{d:o[a],fill:r.style.fill}}),i)),c];}(r,n,s,o);}return null;};cn.props={};let cr=n=>(r,i,a)=>{var o;let[s]=r,l=(null===(o=s.getTotalLength)||void 0===o?void 0:o.call(s))||0;return s.animate([{lineDash:[0,l]},{lineDash:[l,0]}],Object.assign(Object.assign({},a),n));};cr.props={};let ci=(n,r)=>(i,a,o)=>{let[s]=i,{min:[l,u],halfExtents:c}=s.getLocalBounds(),f=2*c[0],d=2*c[1],h=new eL.Path({style:{d:`M${l},${u}L${l+f},${u}L${l+f},${u+d}L${l},${u+d}Z`}});return s.appendChild(h),s.style.clipPath=h,uZ(n,r)([h],a,o);};ci.props={};let ca=(n,r)=>(i,a,o)=>{let[s]=i,{min:[l,u],halfExtents:c}=s.getLocalBounds(),f=2*c[0],d=2*c[1],h=new eL.Path({style:{d:`M${l},${u}L${l+f},${u}L${l+f},${u+d}L${l},${u+d}Z`}});return s.appendChild(h),s.style.clipPath=h,uK(n,r)([h],a,o);};ca.props={};var co=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};function cs(n){var{delay:r,createGroup:i,createRegionGroup:a,background:o=!1,link:s=!1}=n,l=co(n,["delay","createGroup","createRegionGroup","background","link"]);return(n,u,c)=>{let{container:f,view:d,options:h}=n,{scale:p,coordinate:m}=d;return function(n,{elements:r,datum:i,groupKey:a=n=>n,regionGroupKey:o=n=>n,link:s=!1,background:l=!1,delay:u=60,scale:c,coordinate:f,emitter:d,state:h={},region:p=!1,regionEleFilter:m=n=>rJ.VALID_FIND_BY_X_MARKS.includes(n.markType)}){var g,v;let y;let _=null!==(g=r(n))&&void 0!==g?g:[],b=p?_.filter(m):_,x=new Set(b),E=p?o:a,w=(0,nE.default)(b,E),S=(0,rJ.createFindElementByEvent)({elementsof:r,root:n,coordinate:f,scale:c}),T=(0,rJ.createValueof)(b,i),[A,C]=(0,rJ.renderLink)(Object.assign({elements:b,valueof:T,link:s,coordinate:f},(0,nA.subObject)(h.active,"link"))),[O,M,R]=(0,rJ.renderBackground)(Object.assign({document:n.ownerDocument,scale:c,coordinate:f,background:l,valueof:T},(0,nA.subObject)(h.active,"background"))),P=(0,nS.default)(h,{active:Object.assign({},(null===(v=h.active)||void 0===v?void 0:v.offset)&&{transform:(...n)=>{let r=h.active.offset(...n),[,i]=n;return(0,rJ.offsetTransform)(b[i],r,f);}})}),{updateState:k,removeState:I,hasState:L}=(0,rJ.createUseState)(P,b)(T),N=n=>{let{nativeEvent:r=!0}=n,a=n.target;if(p&&(a=S(n)),!x.has(a))return;y&&clearTimeout(y);let o=E(a),s=w.get(o),l=new Set(s);for(let n of b)l.has(n)?L(n,"active")||k(n,"active"):(k(n,"inactive"),C(n)),n!==a&&M(n);O(a),A(s),r&&d.emit("element:highlight",{nativeEvent:r,data:{data:i(a),group:s.map(i)}});},D=()=>{y&&clearTimeout(y),y=setTimeout(()=>{F(),y=null;},u);},F=(n=!0)=>{for(let n of b)I(n,"active","inactive"),M(n),C(n);n&&d.emit("element:unhighlight",{nativeEvent:n});},B=n=>{let r=n.target;if(p&&(r=S(n)),!r){u>0?D():F();return;}(!l||R(r))&&(l||x.has(r))&&(u>0?D():F());},j=()=>{F();};n.addEventListener("pointerover",N),n.addEventListener("pointermove",N),n.addEventListener("pointerout",B),n.addEventListener("pointerleave",j);let z=n=>{let{nativeEvent:r}=n;r||F(!1);},U=n=>{let{nativeEvent:r}=n;if(r)return;let{data:a}=n.data,o=(0,rJ.selectElementByData)(b,a,i);o&&N({target:o,nativeEvent:!1});};return d.on("element:highlight",U),d.on("element:unhighlight",z),()=>{for(let r of(n.removeEventListener("pointerover",N),n.removeEventListener("pointermove",N),n.removeEventListener("pointerout",B),n.removeEventListener("pointerleave",j),d.off("element:highlight",U),d.off("element:unhighlight",z),b))M(r),C(r);};}((0,rJ.selectPlotArea)(f),Object.assign({elements:rJ.selectG2Elements,datum:(0,rJ.createDatumof)(d),groupKey:i?i(d):void 0,regionGroupKey:a?a(d):(0,rJ.createXKey)(d),coordinate:m,scale:p,state:(0,rJ.mergeState)(h,[["active",o?{}:{lineWidth:"1",stroke:"#000"}],"inactive"]),background:o,link:s,delay:r,emitter:c},l));};}function cl(n){return cs(Object.assign(Object.assign({},n),{createGroup:rJ.createXKey}));}function cu(n){return cs(Object.assign(Object.assign({},n),{createGroup:rJ.createColorKey}));}cs.props={reapplyWhenUpdate:!0},cl.props={reapplyWhenUpdate:!0},cu.props={reapplyWhenUpdate:!0};var cc=i("df2e18b5"),cf=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};function cd(n){var{createGroup:r,createRegionGroup:i,background:a=!1,link:o=!1}=n,s=cf(n,["createGroup","createRegionGroup","background","link"]);return(n,l,u)=>{let{container:c,view:f,options:d}=n,{coordinate:h,scale:p}=f;return function(n,{elements:r,datum:i,groupKey:a=n=>n,regionGroupKey:o=n=>n,link:s=!1,single:l=!1,multipleSelectHotkey:u,coordinate:c,background:f=!1,scale:d,emitter:h,state:p={},region:m=!1,regionEleFilter:g=n=>rJ.VALID_FIND_BY_X_MARKS.includes(n.markType)}){var v;let y=r(n),_=new Set(y),b=(0,rJ.createFindElementByEvent)({elementsof:r,root:n,coordinate:c,scale:d}),x=(0,nE.default)(y,a),E=(0,nE.default)(y,o),w=(0,rJ.createValueof)(y,i),[S,T]=(0,rJ.renderLink)(Object.assign({link:s,elements:y,valueof:w,coordinate:c},(0,nA.subObject)(p.selected,"link"))),[A,C]=(0,rJ.renderBackground)(Object.assign({document:n.ownerDocument,background:f,coordinate:c,scale:d,valueof:w},(0,nA.subObject)(p.selected,"background"))),O=(0,nS.default)(p,{selected:Object.assign({},(null===(v=p.selected)||void 0===v?void 0:v.offset)&&{transform:(...n)=>{let r=p.selected.offset(...n),[,i]=n;return(0,rJ.offsetTransform)(y[i],r,c);}})}),{updateState:M,removeState:R,hasState:P}=(0,rJ.createUseState)(O,y)(w),k=!l,I=null,L=(n=!0)=>{for(let n of y)R(n,"selected","unselected"),T(n),C(n);n&&h.emit("element:unselect",{nativeEvent:!0});},N=({event:n,element:r,nativeEvent:o=!0,filter:s=n=>!0,groupBy:l=a,groupMap:u=x})=>{let c=y.filter(s);if(P(r,"selected"))L();else{let a=l(r),s=u.get(a),f=new Set(s);for(let n of c)f.has(n)?M(n,"selected"):(M(n,"unselected"),T(n)),n!==r&&C(n);if(S(s),A(r),!o)return;h.emit("element:select",Object.assign(Object.assign({},n),{nativeEvent:o,data:{data:[i(r),...s.map(i)]}}));}},D=({event:n,element:r,nativeEvent:o=!0,filter:l=n=>!0,groupBy:u=a,groupMap:c=x})=>{let f=u(r),d=c.get(f),p=new Set(d),m=y.filter(l);if(P(r,"selected")){if(!y.some(n=>!p.has(n)&&P(n,"selected")))return L();for(let n of d)M(n,"unselected"),T(n),C(n);}else{let n=d.some(n=>P(n,"selected"));for(let n of m)p.has(n)?M(n,"selected"):P(n,"selected")||M(n,"unselected");!n&&s&&S(d),A(r);}o&&h.emit("element:select",Object.assign(Object.assign({},n),{nativeEvent:o,data:{data:y.filter(n=>P(n,"selected")).map(i)}}));},F=n=>{if(_.has(n))return!0;for(let r of _)if((0,cc.traverseElements)(r,r=>r===n))return!0;return!1;},B=n=>{if(_.has(n))return n;for(let r of _){let i=null;if((0,cc.traverseElements)(r,a=>{a===n&&(i=r);}),i)return i;}return n;},j=n=>{let{target:r,nativeEvent:i=!0}=n,s=k?D:N,l=r,u=F(r);return!m||u?u?s({event:n,element:B(l),nativeEvent:i,groupBy:a}):L():(l=b(n),_.has(l))?s({event:n,element:l,nativeEvent:i,filter:g,groupBy:o,groupMap:E}):L();},z=Array.isArray(u)?u:[u],U=n=>{z.includes(n.code)&&!I&&(I=n.code,k=!0);},V=n=>{n.code===I&&(I=null,k=!1);};n.addEventListener("click",j),u&&(k=!1,document.addEventListener("keydown",U),document.addEventListener("keyup",V));let G=n=>{let{nativeEvent:r,data:a}=n;if(!r)for(let n of k?a.data:a.data.slice(0,1))j({target:(0,rJ.selectElementByData)(y,n,i),nativeEvent:!1});},H=()=>{L(!1);};return h.on("element:select",G),h.on("element:unselect",H),()=>{for(let n of y)T(n);n.removeEventListener("click",j),u&&(document.removeEventListener("keydown",U),document.removeEventListener("keyup",V)),h.off("element:select",G),h.off("element:unselect",H);};}((0,rJ.selectPlotArea)(c),Object.assign({elements:rJ.selectG2Elements,datum:(0,rJ.createDatumof)(f),groupKey:r?r(f):void 0,regionGroupKey:i?i(f):(0,rJ.createXKey)(f),coordinate:h,scale:p,state:(0,rJ.mergeState)(d,[["selected",a?{}:{lineWidth:"1",stroke:"#000"}],"unselected"]),background:a,link:o,emitter:u},s));};}function ch(n){return cd(Object.assign(Object.assign({},n),{createGroup:rJ.createXKey}));}function cp(n){return cd(Object.assign(Object.assign({},n),{createGroup:rJ.createColorKey}));}cd.props={reapplyWhenUpdate:!0},ch.props={reapplyWhenUpdate:!0},cp.props={reapplyWhenUpdate:!0};var cm=i("d62e1c54"),cg=ew._(cm),cv=i("944abdfb"),cy=ew._(cv),c_=i("69002c1a"),cb=eS._(c_),cx=i("9841474e"),cE=ew._(cx),cw=this&&this.__awaiter||function(n,r,i,a){return new(i||(i=Promise))(function(o,s){function l(n){try{c(a.next(n));}catch(n){s(n);}}function u(n){try{c(a.throw(n));}catch(n){s(n);}}function c(n){var r;n.done?o(n.value):((r=n.value)instanceof i?r:new i(function(n){n(r);})).then(l,u);}c((a=a.apply(n,r||[])).next());});},cS=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};function cT(n){var{wait:r=20,leading:i,trailing:a=!1,labelFormatter:o=n=>`${n}`}=n,s=cS(n,["wait","leading","trailing","labelFormatter"]);return n=>{let l,u;let{view:c,container:f,update:d,setState:h}=n,{markState:p,scale:m,coordinate:g}=c,v=function(n,r,i){let[a]=Array.from(n.entries()).filter(([n])=>n.type===r).map(([n])=>{let{encode:r}=n;return Object.fromEntries(i.map(n=>{let i=r[n];return[n,i?i.value:void 0];}));});return a;}(p,"line",["x","y","series"]);if(!v)return;let{y:y,x:_,series:b=[]}=v,x=y.map((n,r)=>r),E=(0,cy.default)(x.map(n=>_[n])),w=(0,rJ.selectPlotArea)(f),S=f.getElementsByClassName(r_.ELEMENT_CLASS_NAME),T=f.getElementsByClassName(r_.LABEL_CLASS_NAME),A=(0,nE.default)(T,n=>n.__data__.key.split("-")[0]),C=new eL.Line({style:Object.assign({x1:0,y1:0,x2:0,y2:w.getAttribute("height"),stroke:"black",lineWidth:1},(0,nA.subObject)(s,"rule"))}),O=new eL.Text({style:Object.assign({x:0,y:w.getAttribute("height"),text:"",fontSize:10},(0,nA.subObject)(s,"label"))});C.append(O),w.appendChild(C);let M=(n,r,i)=>{let[a]=n.invert(i),o=r.invert(a);return E[(0,cb.bisectCenter)(E,o)];},R=(n,r)=>{C.setAttribute("x1",n[0]),C.setAttribute("x2",n[0]),O.setAttribute("text",o(r));},P=n=>{let{scale:r,coordinate:i}=l,{x:a,y:o}=r,s=M(i,a,n);for(let r of(R(n,s),S)){let{seriesIndex:n,key:a}=r.__data__,l=n[(0,cE.default)(n=>_[+n]).center(n,s)],u=[0,o.map(1)],c=[0,o.map(y[l]/y[n[0]])],[,f]=i.map(u),[,d]=i.map(c),h=f-d;for(let n of(r.setAttribute("transform",`translate(0, ${h})`),A.get(a)||[]))n.setAttribute("dy",h);}},k=(0,cg.default)(n=>{let r=(0,rJ.mousePosition)(w,n);r&&P(r);},r,{leading:i,trailing:a});return u=[0,0],cw(this,void 0,void 0,function*(){let{x:n}=m,r=M(g,n,u);R(u,r),h("chartIndex",n=>{let i=(0,nS.default)({},n),a=i.marks.find(n=>"line"===n.type),o=(0,n5.default)((0,nE.rollup)(x,n=>(0,n5.default)(n,n=>+y[n])/(0,rw.default)(n,n=>+y[n]),n=>b[n]).values());(0,nS.default)(a,{scale:{y:{domain:[1/o,o]}}});let s=function(n){let{transform:r=[]}=n,i=r.find(n=>"normalizeY"===n.type);if(i)return i;let a={type:"normalizeY"};return r.push(a),n.transform=r,a;}(a);for(let n of(s.groupBy="color",s.basis=(n,i)=>i[n[(0,cE.default)(n=>_[+n]).center(n,r)]],i.marks))n.animate=!1;return i;}),l=(yield d("chartIndex")).view;}),w.addEventListener("pointerenter",k),w.addEventListener("pointermove",k),w.addEventListener("pointerleave",k),()=>{C.remove(),w.removeEventListener("pointerenter",k),w.removeEventListener("pointermove",k),w.removeEventListener("pointerleave",k);};};}cT.props={reapplyWhenUpdate:!0};var cA=this&&this.__awaiter||function(n,r,i,a){return new(i||(i=Promise))(function(o,s){function l(n){try{c(a.next(n));}catch(n){s(n);}}function u(n){try{c(a.throw(n));}catch(n){s(n);}}function c(n){var r;n.done?o(n.value):((r=n.value)instanceof i?r:new i(function(n){n(r);})).then(l,u);}c((a=a.apply(n,r||[])).next());});};let cC="legend-category";function cO(n){return n.getElementsByClassName("legend-category-item-marker")[0];}function cM(n){return n.getElementsByClassName("legend-category-item-label")[0];}function cR(n){return n.getElementsByClassName("items-item");}function cP(n){return n.getElementsByClassName(cC);}function ck(n){return n.getElementsByClassName("legend-continuous");}function cI(n){let r=n.parentNode;for(;r&&!r.__data__;)r=r.parentNode;return r.__data__;}function cL(n,{legend:r,channel:i,value:a,ordinal:o,channels:s,allChannels:l,facet:u=!1}){return cA(this,void 0,void 0,function*(){let{view:c,update:f,setState:d}=n;d(r,n=>{let{marks:r}=n,f=r.map(n=>{if("legends"===n.type)return n;let{transform:r=[],data:f=[]}=n,d=r.findIndex(({type:n})=>n.startsWith("group")||n.startsWith("bin")),h=[...r];f.length&&h.splice(d+1,0,{type:"filter",[i]:{value:a,ordinal:o}});let p=Object.fromEntries(s.map(n=>[n,{domain:c.scale[n].getOptions().domain}]));return(0,nS.default)({},n,Object.assign(Object.assign({transform:h,scale:p},!o&&{animate:!1}),{legend:!u&&Object.fromEntries(l.map(n=>[n,{preserve:!0}]))}));});return Object.assign(Object.assign({},n),{marks:f});}),yield f();});}function cN(n,r){for(let i of n)cL(i,Object.assign(Object.assign({},r),{facet:!0}));}var cD=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};function cF(n,r){for(let[i,a]of Object.entries(r))n.style(i,a);}let cB=(0,i2.createElement)(n=>{let r=n.attributes,{x:i,y:a,width:o,height:s,class:l,renders:u={},handleSize:c=10,document:f}=r,d=cD(r,["x","y","width","height","class","renders","handleSize","document"]);if(!f||void 0===o||void 0===s||void 0===i||void 0===a)return;let h=c/2,p=(n,r,i)=>{n.handle||(n.handle=i.createElement("rect"),n.append(n.handle));let{handle:a}=n;return a.attr(r),a;},m=(0,nA.subObject)((0,nA.omitPrefixObject)(d,"handleNW","handleNE"),"handleN"),{render:g=p}=m,v=cD(m,["render"]),y=(0,nA.subObject)(d,"handleE"),{render:_=p}=y,b=cD(y,["render"]),x=(0,nA.subObject)((0,nA.omitPrefixObject)(d,"handleSE","handleSW"),"handleS"),{render:E=p}=x,w=cD(x,["render"]),S=(0,nA.subObject)(d,"handleW"),{render:T=p}=S,A=cD(S,["render"]),C=(0,nA.subObject)(d,"handleNW"),{render:O=p}=C,M=cD(C,["render"]),R=(0,nA.subObject)(d,"handleNE"),{render:P=p}=R,k=cD(R,["render"]),I=(0,nA.subObject)(d,"handleSE"),{render:L=p}=I,N=cD(I,["render"]),D=(0,nA.subObject)(d,"handleSW"),{render:F=p}=D,B=cD(D,["render"]),j=(n,r)=>{let{id:i}=n,a=r(n,n.attributes,f);a.id=i,a.style.draggable=!0;},z=n=>()=>new((0,i2.createElement)(r=>j(r,n)))({}),U=(0,nT.select)(n).attr("className",l).style("transform",`translate(${i}, ${a})`).style("draggable",!0);U.maybeAppend("selection","rect").style("draggable",!0).style("fill","transparent").call(cF,Object.assign(Object.assign({width:o,height:s},(0,nA.omitPrefixObject)(d,"handle")),{transform:void 0})),U.maybeAppend("handle-n",z(g)).style("x",h).style("y",-h).style("width",o-c).style("height",c).style("fill","transparent").call(cF,v),U.maybeAppend("handle-e",z(_)).style("x",o-h).style("y",h).style("width",c).style("height",s-c).style("fill","transparent").call(cF,b),U.maybeAppend("handle-s",z(E)).style("x",h).style("y",s-h).style("width",o-c).style("height",c).style("fill","transparent").call(cF,w),U.maybeAppend("handle-w",z(T)).style("x",-h).style("y",h).style("width",c).style("height",s-c).style("fill","transparent").call(cF,A),U.maybeAppend("handle-nw",z(O)).style("x",-h).style("y",-h).style("width",c).style("height",c).style("fill","transparent").call(cF,M),U.maybeAppend("handle-ne",z(P)).style("x",o-h).style("y",-h).style("width",c).style("height",c).style("fill","transparent").call(cF,k),U.maybeAppend("handle-se",z(L)).style("x",o-h).style("y",s-h).style("width",c).style("height",c).style("fill","transparent").call(cF,N),U.maybeAppend("handle-sw",z(F)).style("x",-h).style("y",s-h).style("width",c).style("height",c).style("fill","transparent").call(cF,B);});function cj(n,r){var{brushed:i=()=>{},brushended:a=()=>{},brushcreated:o=()=>{},brushstarted:s=()=>{},brushupdated:l=()=>{},extent:u=function(n){let{width:r,height:i}=n.getBBox();return[0,0,r,i];}(n),brushRegion:c=(n,r,i,a,o)=>[n,r,i,a],reverse:f=!1,fill:d="#777",fillOpacity:h="0.3",stroke:p="#fff",selectedHandles:m=["handle-n","handle-e","handle-s","handle-w","handle-nw","handle-ne","handle-se","handle-sw"]}=r,g=cD(r,["brushed","brushended","brushcreated","brushstarted","brushupdated","extent","brushRegion","reverse","fill","fillOpacity","stroke","selectedHandles"]);let v=null,y=null,_=null,b=null,x=null,E=!1,[w,S,T,A]=u;(0,rJ.setCursor)(n,"crosshair"),n.style.draggable=!0;let C=(n,r,i)=>{if(s(i),b&&b.remove(),x&&x.remove(),v=[n,r],f)return O();M();},O=()=>{x=new eL.Path({style:Object.assign(Object.assign({},g),{fill:d,fillOpacity:h,stroke:p,pointerEvents:"none"})}),b=new cB({style:{x:0,y:0,width:0,height:0,draggable:!0,document:n.ownerDocument},className:"mask"}),n.appendChild(x),n.appendChild(b);},M=()=>{b=new cB({style:Object.assign(Object.assign({document:n.ownerDocument,x:0,y:0},g),{fill:d,fillOpacity:h,stroke:p,draggable:!0}),className:"mask"}),n.appendChild(b);},R=(n=!0)=>{b&&b.remove(),x&&x.remove(),v=null,y=null,_=null,E=!1,b=null,x=null,a(n);},P=(n,r,a=!0)=>{let[o,s,l,d]=function(n,r,i,a,o){let[s,l,u,c]=o;return[Math.max(s,Math.min(n,i)),Math.max(l,Math.min(r,a)),Math.min(u,Math.max(n,i)),Math.min(c,Math.max(r,a))];}(n[0],n[1],r[0],r[1],u),[h,p,m,g]=c(o,s,l,d,u);return f?I(h,p,m,g):k(h,p,m,g),i(h,p,m,g,a),[h,p,m,g];},k=(n,r,i,a)=>{b.style.x=n,b.style.y=r,b.style.width=i-n,b.style.height=a-r;},I=(n,r,i,a)=>{x.style.d=`
      M${w},${S}L${T},${S}L${T},${A}L${w},${A}Z
      M${n},${r}L${n},${a}L${i},${a}L${i},${r}Z
    `,b.style.x=n,b.style.y=r,b.style.width=i-n,b.style.height=a-r;},L=n=>{let r=(n,r,i,a,o)=>n+r<a?a-r:n+i>o?o-i:n,i=n[0]-_[0],a=n[1]-_[1],o=r(i,v[0],y[0],w,T),s=r(a,v[1],y[1],S,A);P([v[0]+o,v[1]+s],[y[0]+o,y[1]+s]);},N={"handle-n":{vector:[0,1,0,0],cursor:"ns-resize"},"handle-e":{vector:[0,0,1,0],cursor:"ew-resize"},"handle-s":{vector:[0,0,0,1],cursor:"ns-resize"},"handle-w":{vector:[1,0,0,0],cursor:"ew-resize"},"handle-nw":{vector:[1,1,0,0],cursor:"nwse-resize"},"handle-ne":{vector:[0,1,1,0],cursor:"nesw-resize"},"handle-se":{vector:[0,0,1,1],cursor:"nwse-resize"},"handle-sw":{vector:[1,0,0,1],cursor:"nesw-resize"}},D=n=>B(n)||F(n),F=n=>{let{id:r}=n;return -1!==m.indexOf(r)&&new Set(Object.keys(N)).has(r);},B=n=>n===b.getElementById("selection"),j=r=>{let{target:i}=r,[a,o]=(0,rJ.brushMousePosition)(n,r);if(!b||!D(i)){C(a,o,r),E=!0;return;}D(i)&&(_=[a,o]);},z=r=>{let{target:i}=r,a=(0,rJ.brushMousePosition)(n,r);if(!v)return;if(!_)return P(v,a);if(B(i))return L(a);let[o,s]=[a[0]-_[0],a[1]-_[1]],{id:l}=i;if(N[l]){let[n,r,i,a]=N[l].vector;return P([v[0]+o*n,v[1]+s*r],[y[0]+o*i,y[1]+s*a]);}},U=r=>{if(_){_=null;let{x:n,y:i,width:a,height:o}=b.style;v=[n,i],y=[n+a,i+o],l(n,i,n+a,i+o,r);return;}y=(0,rJ.brushMousePosition)(n,r);let[i,a,s,u]=P(v,y);E=!1,o(i,a,s,u,r);},V=n=>{let{target:r}=n;b&&!D(r)&&R();},G=r=>{let{target:i}=r;b&&D(i)&&!E?B(i)?(0,rJ.setCursor)(n,"move"):F(i)&&(0,rJ.setCursor)(n,N[i.id].cursor):(0,rJ.setCursor)(n,"crosshair");},H=()=>{(0,rJ.setCursor)(n,"default");};return n.addEventListener("dragstart",j),n.addEventListener("drag",z),n.addEventListener("dragend",U),n.addEventListener("click",V),n.addEventListener("pointermove",G),n.addEventListener("pointerleave",H),{mask:b,move(n,r,i,a,o=!0){b||C(n,r,{}),v=[n,r],y=[i,a],P([n,r],[i,a],o);},remove(n=!0){b&&R(n);},destroy(){b&&R(!1),(0,rJ.setCursor)(n,"default"),n.removeEventListener("dragstart",j),n.removeEventListener("drag",z),n.removeEventListener("dragend",U),n.removeEventListener("click",V),n.removeEventListener("pointermove",G),n.removeEventListener("pointerleave",H);}};}function cz(n,r,i){return r.filter(r=>{if(r===n)return!1;let{interaction:a={}}=r.options;return Object.values(a).find(n=>n.brushKey===i);});}function cU(n,r){var{elements:i,selectedHandles:a,siblings:o=n=>[],datum:s,brushRegion:l,extent:u,reverse:c,scale:f,coordinate:d,series:h=!1,key:p=n=>n,bboxOf:m=n=>{let{x:r,y:i,width:a,height:o}=n.style;return{x:r,y:i,width:a,height:o};},state:g={},emitter:v}=r,y=cD(r,["elements","selectedHandles","siblings","datum","brushRegion","extent","reverse","scale","coordinate","series","key","bboxOf","state","emitter"]);let _=i(n),b=o(n),x=b.flatMap(i),E=(0,rJ.createValueof)(_,s),w=(0,nA.subObject)(y,"mask"),{setState:S,removeState:T}=(0,rJ.useState)(g,E),A=new Map,{width:C,height:O,x:M=0,y:R=0}=m(n),P=()=>{for(let n of[..._,...x])T(n,"active","inactive");},k=(n,r,i,a)=>{var o;for(let n of b)null===(o=n.brush)||void 0===o||o.remove();let s=new Set;for(let o of _){let{min:l,max:u}=o.getLocalBounds(),[c,f]=l,[d,h]=u;!function(n,r){let[i,a,o,s]=n,[l,u,c,f]=r;return!(l>o||c<i||u>s||f<a);}([c,f,d,h],[n,r,i,a])?S(o,"inactive"):(S(o,"active"),s.add(p(o)));}for(let n of x)s.has(p(n))?S(n,"active"):S(n,"inactive");},I=()=>{for(let n of _)T(n,"inactive");for(let n of A.values())n.remove();A.clear();},L=(r,i,a,o)=>{let s=n=>{let r=n.cloneNode();return r.__data__=n.__data__,n.parentNode.appendChild(r),A.set(n,r),r;},l=new eL.Rect({style:{x:r+M,y:i+R,width:a-r,height:o-i}});for(let r of(n.appendChild(l),_)){let n=A.get(r)||s(r);n.style.clipPath=l,S(r,"inactive"),S(n,"active");}},N=cj(n,Object.assign(Object.assign({},w),{extent:u||[0,0,C,O],brushRegion:l,reverse:c,selectedHandles:a,brushended:n=>{let r=h?I:P;n&&v.emit("brush:remove",{nativeEvent:!0}),r();},brushed:(n,r,i,a,o)=>{let s=(0,uB.selectionOf)(n,r,i,a,f,d);o&&v.emit("brush:highlight",{nativeEvent:!0,data:{selection:s}}),(h?L:k)(n,r,i,a);},brushcreated:(n,r,i,a,o)=>{let s=(0,uB.selectionOf)(n,r,i,a,f,d);v.emit("brush:end",Object.assign(Object.assign({},o),{nativeEvent:!0,data:{selection:s}}));},brushupdated:(n,r,i,a,o)=>{let s=(0,uB.selectionOf)(n,r,i,a,f,d);v.emit("brush:end",Object.assign(Object.assign({},o),{nativeEvent:!0,data:{selection:s}}));},brushstarted:n=>{v.emit("brush:start",n);}})),D=({nativeEvent:n,data:r})=>{if(n)return;let{selection:i}=r,[a,o,s,l]=(0,uB.pixelsOf)(i,f,d);N.move(a,o,s,l,!1);};v.on("brush:highlight",D);let F=({nativeEvent:n}={})=>{n||N.remove(!1);};v.on("brush:remove",F);let B=N.destroy.bind(N);return N.destroy=()=>{v.off("brush:highlight",D),v.off("brush:remove",F),B();},N;}function cV(n){var{facet:r,brushKey:i}=n,a=cD(n,["facet","brushKey"]);return(n,o,s)=>{let{container:l,view:u,options:c}=n,f=(0,rJ.selectPlotArea)(l),d={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",reverse:!1},h=["active",["inactive",{opacity:.5}]],{scale:p,coordinate:m}=u;if(r){let r=f.getBounds(),i=r.min[0],l=r.min[1],u=r.max[0],c=r.max[1];return cU(f.parentNode.parentNode,Object.assign(Object.assign({elements:()=>(0,rJ.selectFacetG2Elements)(n,o),datum:(0,rJ.createDatumof)((0,rJ.selectFacetViews)(n,o).map(n=>n.view)),brushRegion:(n,r,i,a)=>[n,r,i,a],extent:[i,l,u,c],state:(0,rJ.mergeState)((0,rJ.selectFacetViews)(n,o).map(n=>n.options),h),emitter:s,scale:p,coordinate:m,selectedHandles:void 0},d),a));}let g=cU(f,Object.assign(Object.assign({elements:rJ.selectG2Elements,key:n=>n.__data__.key,siblings:()=>cz(n,o,i).map(n=>(0,rJ.selectPlotArea)(n.container)),datum:(0,rJ.createDatumof)([u,...cz(n,o,i).map(n=>n.view)]),brushRegion:(n,r,i,a)=>[n,r,i,a],extent:void 0,state:(0,rJ.mergeState)([c,...cz(n,o,i).map(n=>n.options)],h),emitter:s,scale:p,coordinate:m,selectedHandles:void 0},d),a));return f.brush=g,()=>g.destroy();};}function cG(n,r,i,a,o){let[,s,,l]=o;return[n,s,i,l];}function cH(n,r,i,a,o){let[s,,l]=o;return[s,r,l,a];}var cW=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let cX="axis-hot-area";function cq(n){return n.getElementsByClassName("axis");}function c$(n){return n.getElementsByClassName("axis-line")[0];}function cY(n){return n.getElementsByClassName("axis-main-group")[0].getLocalBounds();}var cZ=this&&this.__awaiter||function(n,r,i,a){return new(i||(i=Promise))(function(o,s){function l(n){try{c(a.next(n));}catch(n){s(n);}}function u(n){try{c(a.throw(n));}catch(n){s(n);}}function c(n){var r;n.done?o(n.value):((r=n.value)instanceof i?r:new i(function(n){n(r);})).then(l,u);}c((a=a.apply(n,r||[])).next());});},cK=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};function cQ(n){var{hideX:r=!0,hideY:i=!0}=n,a=cK(n,["hideX","hideY"]);return(n,o,s)=>{let{container:l,view:u,options:c,update:f,setState:d}=n,h=(0,rJ.selectPlotArea)(l),p=!1,m=!1,g=u,{scale:v,coordinate:y}=u;return function(n,r){var{filter:i,reset:a,brushRegion:o,extent:s,reverse:l,emitter:u,scale:c,coordinate:f,selection:d,series:h=!1}=r,p=cK(r,["filter","reset","brushRegion","extent","reverse","emitter","scale","coordinate","selection","series"]);let m=(0,nA.subObject)(p,"mask"),{width:g,height:v}=n.getBBox(),y=function(n=300){let r=null;return i=>{let{timeStamp:a}=i;return null!==r&&a-r<n?(r=a,!0):(r=a,!1);};}(),_=cj(n,Object.assign(Object.assign({},m),{extent:s||[0,0,g,v],brushRegion:o,reverse:l,brushcreated:function(n,r,a,o,s){(n!==a||r!==o)&&(s.nativeEvent=!0,i(d(n,r,a,o),s),_.remove());}}));function b(n){y(n)&&(n.nativeEvent=!0,a(n));}n.addEventListener("click",b);let x=({nativeEvent:n,data:r})=>{if(n)return;let{selection:a}=r;i(a,{nativeEvent:!1});};return u.on("brush:filter",x),()=>{_.destroy(),u.off("brush:filter",x),n.removeEventListener("click",b);};}(h,Object.assign(Object.assign({brushRegion:(n,r,i,a)=>[n,r,i,a],selection:(n,r,i,a)=>{let{scale:o,coordinate:s}=g;return(0,uB.selectionOf)(n,r,i,a,o,s);},filter:(n,a)=>cZ(this,void 0,void 0,function*(){if(m)return;m=!0;let[o,l]=n;d("brushFilter",n=>{let{marks:a}=n,s=a.map(n=>(0,nS.default)({axis:Object.assign(Object.assign({},r&&{x:{transform:[{type:"hide"}]}}),i&&{y:{transform:[{type:"hide"}]}})},n,{scale:{x:{domain:o,nice:!1},y:{domain:l,nice:!1}}}));return Object.assign(Object.assign({},c),{marks:s,clip:!0});}),s.emit("brush:filter",Object.assign(Object.assign({},a),{data:{selection:[o,l]}})),g=(yield f()).view,m=!1,p=!0;}),reset:n=>{if(m||!p)return;let{scale:r}=u,{x:i,y:a}=r,o=i.getOptions().domain,l=a.getOptions().domain;s.emit("brush:filter",Object.assign(Object.assign({},n),{data:{selection:[o,l]}})),p=!1,g=u,d("brushFilter"),f();},extent:void 0,emitter:s,scale:v,coordinate:y},{maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",unhighlightedOpacity:.5,reverse:!1}),a));};}var cJ=this&&this.__awaiter||function(n,r,i,a){return new(i||(i=Promise))(function(o,s){function l(n){try{c(a.next(n));}catch(n){s(n);}}function u(n){try{c(a.throw(n));}catch(n){s(n);}}function c(n){var r;n.done?o(n.value):((r=n.value)instanceof i?r:new i(function(n){n(r);})).then(l,u);}c((a=a.apply(n,r||[])).next());});};function c0(n){return[n[0],n[n.length-1]];}function c1({initDomain:n={},className:r="slider",prefix:i="slider",setValue:a=(n,r)=>n.setValues(r),hasState:o=!1,wait:s=50,leading:l=!0,trailing:u=!1,getInitValues:c=n=>{var r;let i=null===(r=null==n?void 0:n.attributes)||void 0===r?void 0:r.values;if(0!==i[0]||1!==i[1])return i;}}){return(f,d,h)=>{let{container:p,view:m,update:g,setState:v}=f,y=p.getElementsByClassName(r);if(!y.length)return()=>{};let _=!1,{scale:b,coordinate:x,layout:E}=m,{paddingLeft:w,paddingTop:S,paddingBottom:T,paddingRight:A}=E,{x:C,y:O}=b,M=(0,rS.isTranspose)(x),R=n=>{let r="vertical"===n?"y":"x",i="vertical"===n?"x":"y";return M?[i,r]:[r,i];},P=new Map,k=new Set,I={x:n.x||C.getOptions().domain,y:n.y||O.getOptions().domain};for(let n of y){let{orientation:r}=n.attributes,[f,d]=R(r),p=`${i}${(0,nK.default)(f)}:filter`,m="x"===f,{ratio:y}=C.getOptions(),{ratio:x}=O.getOptions(),E=n=>{if(n.data){let{selection:r}=n.data,[i=c0(I.x),a=c0(I.y)]=r;return m?[(0,uB.domainOf)(C,i,y),(0,uB.domainOf)(O,a,x)]:[(0,uB.domainOf)(O,a,x),(0,uB.domainOf)(C,i,y)];}let{value:i}=n.detail;return[function(n,r,i){let[a,o]=n,s=i?n=>1-n:n=>n,l=(0,uB.invert)(r,s(a),!0),u=(0,uB.invert)(r,s(o),!1);return(0,uB.domainOf)(r,[l,u]);}(i,b[f],M&&"horizontal"===r),I[d]];},L=(0,cg.default)(r=>cJ(this,void 0,void 0,function*(){let{initValue:a=!1}=r;if(_&&!a)return;_=!0;let{nativeEvent:s=!0}=r,[l,u]=E(r);if(I[f]=l,I[d]=u,s){let n=m?l:u,i=m?u:l;h.emit(p,Object.assign(Object.assign({},r),{nativeEvent:s,data:{selection:[c0(n),c0(i)]}}));}v(n,n=>Object.assign(Object.assign({},function(n,r,i,a=!1,o="x",s="y"){let{marks:l}=n,u=l.map(n=>{var l,u;return(0,nS.default)({axis:{x:{transform:[{type:"hide"}]},y:{transform:[{type:"hide"}]}}},n,{scale:r,[i]:Object.assign(Object.assign({},(null===(l=n[i])||void 0===l?void 0:l[o])&&{[o]:Object.assign({preserve:!0},a&&{ratio:null})}),(null===(u=n[i])||void 0===u?void 0:u[s])&&{[s]:{preserve:!0}}),animate:!1});});return Object.assign(Object.assign({},n),{marks:u,clip:!0,animate:!1});}(n,{[f]:{domain:l,nice:!1}},i,o,f,d)),{paddingLeft:w,paddingTop:S,paddingBottom:T,paddingRight:A})),yield g(),_=!1;}),s,{leading:l,trailing:u}),N=r=>{let{nativeEvent:i}=r;if(i)return;let{data:o}=r,{selection:s}=o,[l,u]=s;n.dispatchEvent(new eL.CustomEvent("valuechange",{data:o,nativeEvent:!1})),a(n,m?(0,uB.abstractOf)(l,C):(0,uB.abstractOf)(u,O));};h.on(p,N),n.addEventListener("valuechange",L),P.set(n,L),k.add([p,N]);let D=c(n);D&&n.dispatchEvent(new eL.CustomEvent("valuechange",{detail:{value:D},nativeEvent:!1,initValue:!0}));}return()=>{for(let[n,r]of P)n.removeEventListener("valuechange",r);for(let[n,r]of k)h.off(n,r);};};}var c2=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let c3={backgroundColor:"rgba(0,0,0,0.75)",color:"#fff",width:"max-content",padding:"1px 4px",fontSize:"12px",borderRadius:"2.5px",boxShadow:"0 3px 6px -4px rgba(0,0,0,0.12), 0 6px 16px 0 rgba(0,0,0,0.08), 0 9px 28px 8px rgba(0,0,0,0.05)"};function c4(n){return"text"===n.nodeName&&!!n.isOverflowing();}function c5(n){var{offsetX:r=8,offsetY:i=8}=n,a=c2(n,["offsetX","offsetY"]);return n=>{let{container:o}=n,[s,l]=o.getBounds().min,u=(0,nA.subObject)(a,"tip"),c=new Set,f=n=>{var a;let{target:f}=n;if(!c4(f)){n.stopPropagation();return;}let{offsetX:d,offsetY:h}=n,p=d+r-s,m=h+i-l;if(f.tip){f.tip.style.x=p,f.tip.style.y=m;return;}let{text:g}=f.style,v=new eL.HTML({className:"poptip",style:{innerHTML:(a=Object.assign(Object.assign({},c3),u),`<div style="${Object.entries(a).map(([n,r])=>`${(0,rT.kebabCase)(n)}:${r}`).join(";")}">${g}</div>`),x:p,y:m}});o.appendChild(v),f.tip=v,c.add(v);},d=n=>{let{target:r}=n;if(!c4(r)){n.stopPropagation();return;}r.tip&&(r.tip.remove(),r.tip=null,c.delete(r.tip));};return o.addEventListener("pointerover",f),o.addEventListener("pointerout",d),()=>{o.removeEventListener("pointerover",f),o.removeEventListener("pointerout",d),c.forEach(n=>n.remove());};};}c5.props={reapplyWhenUpdate:!0};let c6="g2-scrollbar";var c8=i("748c64cc"),c7=ew._(c8),c9=i("3185db87"),fe=ew._(c9),ft=i("da5c7e2c"),fn=ew._(ft),fr=i("e9b37d7e"),fi=ew._(fr);function fa(n,r){if(!(0,nJ.default)(n))return null;if((0,fn.default)(r)&&(i=r),(0,fi.default)(r)&&(i=function(n){return function(n,r){var i=(0,fe.default)(r),a=i.length;if((0,tF.default)(n))return!a;for(var o=0;o<a;o+=1){var s=i[o];if(r[s]!==n[s]||!(s in n))return!1;}return!0;}(n,r);}),i){for(var i,a=0;a<n.length;a+=1)if(i(n[a]))return n[a];}return null;}var fo=i("1f9d5621"),fs=ew._(fo),fl=i("1c5a6150"),fu=this&&this.__awaiter||function(n,r,i,a){return new(i||(i=Promise))(function(o,s){function l(n){try{c(a.next(n));}catch(n){s(n);}}function u(n){try{c(a.throw(n));}catch(n){s(n);}}function c(n){var r;n.done?o(n.value):((r=n.value)instanceof i?r:new i(function(n){n(r);})).then(l,u);}c((a=a.apply(n,r||[])).next());});},fc=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let ff={breadCrumbFill:"rgba(0, 0, 0, 0.85)",breadCrumbFontSize:12,breadCrumbY:12,activeFill:"rgba(0, 0, 0, 0.5)"};var fd=i("6aaf503e"),fh=ew._(fd),fp=this&&this.__awaiter||function(n,r,i,a){return new(i||(i=Promise))(function(o,s){function l(n){try{c(a.next(n));}catch(n){s(n);}}function u(n){try{c(a.throw(n));}catch(n){s(n);}}function c(n){var r;n.done?o(n.value):((r=n.value)instanceof i?r:new i(function(n){n(r);})).then(l,u);}c((a=a.apply(n,r||[])).next());});},fm=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let fg={pointR:6,pointStrokeWidth:1,pointStroke:"#888",pointActiveStroke:"#f5f5f5",pathStroke:"#888",pathLineDash:[3,4],labelFontSize:12,labelFill:"#888",labelStroke:"#fff",labelLineWidth:1,labelY:-6,labelX:2},fv="movePoint",fy=n=>{let r=n.target,{markType:i}=r;"line"===i&&(r.attr("_lineWidth",r.attr("lineWidth")||1),r.attr("lineWidth",r.attr("_lineWidth")+3)),"interval"===i&&(r.attr("_opacity",r.attr("opacity")||1),r.attr("opacity",.7*r.attr("_opacity")));},f_=n=>{let r=n.target,{markType:i}=r;"line"===i&&r.attr("lineWidth",r.attr("_lineWidth")),"interval"===i&&r.attr("opacity",r.attr("_opacity"));},fb=(n,r,i)=>r.map(r=>["x","color"].reduce((a,o)=>{let s=i[o];return s?r[s]===n[s]&&a:a;},!0)?Object.assign(Object.assign({},r),n):r),fx=n=>{let r=(0,nb.default)(n,["__data__","y"]),i=(0,nb.default)(n,["__data__","y1"])-r,{__data__:{data:a,encode:o,transform:s},childNodes:l}=n.parentNode,u=fa(s,({type:n})=>"normalizeY"===n),c=(0,nb.default)(o,["y","field"]),f=a[l.indexOf(n)][c];return(n,r=!1)=>u||r?n/(1-n)/(i/(1-i))*f:n;},fE=(n,r)=>{let i=(0,nb.default)(n,["__data__","seriesItems",r,"0","value"]),a=(0,nb.default)(n,["__data__","seriesIndex",r]),{__data__:{data:o,encode:s,transform:l}}=n.parentNode,u=fa(l,({type:n})=>"normalizeY"===n),c=(0,nb.default)(s,["y","field"]),f=o[a][c];return n=>u?1===i?n:n/(1-n)/(i/(1-i))*f:n;},fw=(n,r,i)=>{n.forEach((n,a)=>{n.attr("stroke",r[1]===a?i.activeStroke:i.stroke);});},fS=(n,r,i,a)=>{let o=new eL.Path({style:i}),s=new eL.Text({style:a});return r.appendChild(s),n.appendChild(o),[o,s];},fT=(n,r)=>{if(!(0,nb.default)(n,["options","range","indexOf"]))return;let i=n.options.range.indexOf(r);return n.sortedDomain[i];},fA=(n,r,i)=>{let a=(0,rJ.getPointsR)(n,r),o=(0,rJ.getPointsR)(n,i)/a;return[n[0]+(r[0]-n[0])*o,n[1]+(r[1]-n[1])*o];};var fC=i("715ff153"),fO=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let fM=()=>n=>{let{children:r}=n;if(!Array.isArray(r))return[];let{x:i=0,y:a=0,width:o,height:s,data:l}=n;return r.map(n=>{var{data:r,x:u,y:c,width:f,height:d}=n;return Object.assign(Object.assign({},fO(n,["data","x","y","width","height"])),{data:(0,fC.mergeData)(r,l),x:null!=u?u:i,y:null!=c?c:a,width:null!=f?f:o,height:null!=d?d:s});});};fM.props={};var fR=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let fP=()=>n=>{let{children:r}=n;if(!Array.isArray(r))return[];let{direction:i="row",ratio:a=r.map(()=>1),padding:o=0,data:s}=n,[l,u,c,f]="col"===i?["y","height","width","x"]:["x","width","height","y"],d=a.reduce((n,r)=>n+r),h=n[u]-o*(r.length-1),p=a.map(n=>n/d*h),m=[],g=n[l]||0;for(let i=0;i<p.length;i+=1){let a=r[i],{data:d}=a,h=fR(a,["data"]),v=(0,fC.mergeData)(d,s);m.push(Object.assign({[l]:g,[u]:p[i],[f]:n[f]||0,[c]:n[c],data:v},h)),g+=p[i]+o;}return m;};fP.props={};var fk=i("19faa3be"),fI=ew._(fk);class fL{constructor(n){this.$value=n;}static of(n){return new fL(n);}call(n,...r){return this.$value=n(this.$value,...r),this;}value(){return this.$value;}}var fN=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let fD=(0,fC.useDefaultAdaptor)(n=>{let{encode:r,data:i,scale:a,shareSize:o=!1}=n,{x:s,y:l}=r,u=(n,r)=>{var s;if(void 0===n||!o)return{};let l=(0,nE.default)(i,r=>r[n]),u=(null===(s=null==a?void 0:a[r])||void 0===s?void 0:s.domain)||Array.from(l.keys()),c=u.map(n=>l.has(n)?l.get(n).length:1);return{domain:u,flex:c};};return{scale:{x:Object.assign(Object.assign({paddingOuter:0,paddingInner:.1,guide:void 0===s?null:{position:"top"}},void 0===s&&{paddingInner:0}),u(s,"x")),y:Object.assign(Object.assign({range:[0,1],paddingOuter:0,paddingInner:.1,guide:void 0===l?null:{position:"right"}},void 0===l&&{paddingInner:0}),u(l,"y"))}};}),fF=(0,fC.useOverrideAdaptor)(n=>{let r,i,a;let{data:o,scale:s,legend:l}=n,u=[n];for(;u.length;){let{children:n,encode:o={},scale:s={},legend:l={}}=u.shift(),{color:c}=o,{color:f}=s,{color:d}=l;void 0!==c&&(r=c),void 0!==f&&(i=f),void 0!==d&&(a=d),Array.isArray(n)&&u.push(...n);}let c="string"==typeof r?r:"",[f,d]=(()=>{var n;let i=null===(n=null==s?void 0:s.color)||void 0===n?void 0:n.domain;if(void 0!==i)return[i];if(void 0===r)return[void 0];let a="function"==typeof r?r:n=>n[r],l=o.map(a);return l.some(n=>"number"==typeof n)?[(0,fI.default)(l)]:[Array.from(new Set(l)),"ordinal"];})();return Object.assign({encode:{color:{type:"column",value:null!=f?f:[]}},scale:{color:(0,nS.default)({},i,{domain:f,type:d})}},void 0===l&&{legend:{color:(0,nS.default)({title:c},a)}});}),fB=(0,fC.useDefaultAdaptor)(()=>({animate:{enterType:"fadeIn"}})),fj=(0,fC.useOverrideAdaptor)(()=>({frame:!1,encode:{shape:"hollow"},style:{lineWidth:0}})),fz=(0,fC.useOverrideAdaptor)(()=>({type:"cell"})),fU=(0,fC.useOverrideAdaptor)(n=>{let{data:r}=n;return{data:{type:"inline",value:r,transform:[{type:"custom",callback:()=>{let{data:r,encode:i}=n,{x:a,y:o}=i,s=a?Array.from(new Set(r.map(n=>n[a]))):[],l=o?Array.from(new Set(r.map(n=>n[o]))):[];return(()=>{if(s.length&&l.length){let n=[];for(let r of s)for(let i of l)n.push({[a]:r,[o]:i});return n;}return s.length?s.map(n=>({[a]:n})):l.length?l.map(n=>({[o]:n})):void 0;})();}}]}};}),fV=(0,fC.useOverrideAdaptor)((n,r=fG,i=fW,a=fX,o={})=>{let{data:s,encode:l,children:u,scale:c,x:f=0,y:d=0,shareData:h=!1,key:p}=n,{value:m}=s,{x:g,y:v}=l,{color:y}=c,{domain:_}=y;return{children:(n,s,l)=>{let{x:c,y:y}=s,{paddingLeft:b,paddingTop:x,marginLeft:E,marginTop:w}=l,{domain:S}=c.getOptions(),{domain:T}=y.getOptions(),A=(0,n1.indexOf)(n),C=n.map(r),O=n.map(({x:n,y:r})=>[c.invert(n),y.invert(r)]),M=O.map(([n,r])=>i=>{let{[g]:a,[v]:o}=i;return(void 0===g||a===n)&&(void 0===v||o===r);}).map(n=>m.filter(n)),R=h?(0,n5.default)(M,n=>n.length):void 0,P=O.map(([n,r])=>({columnField:g,columnIndex:S.indexOf(n),columnValue:n,columnValuesLength:S.length,rowField:v,rowIndex:T.indexOf(r),rowValue:r,rowValuesLength:T.length})),k=P.map(n=>Array.isArray(u)?u:[u(n)].flat(1));return A.flatMap(n=>{let[r,s,l,u]=C[n],c=P[n],h=M[n];return k[n].map(y=>{var S,T,{scale:A,key:C,facet:O=!0,axis:M={},legend:P={}}=y,k=fN(y,["scale","key","facet","axis","legend"]);let I=(null===(S=null==A?void 0:A.y)||void 0===S?void 0:S.guide)||M.y,L=(null===(T=null==A?void 0:A.x)||void 0===T?void 0:T.guide)||M.x,N=O?h:0===h.length?[]:m,D={x:fq(L,i)(c,N),y:fq(I,a)(c,N)};return Object.assign(Object.assign({key:`${C}-${n}`,data:N,margin:0,x:r+b+f+E,y:s+x+d+w,parentKey:p,width:l,height:u,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!!N.length,dataDomain:R,scale:(0,nS.default)({x:{tickCount:g?5:void 0},y:{tickCount:v?5:void 0}},A,{color:{domain:_}}),axis:(0,nS.default)({},M,D),legend:!1},k),o);});});}};});function fG(n){let{points:r}=n;return(0,i3.calcBBox)(r);}function fH(n,r){return r.length?(0,nS.default)({title:!1,tick:null,label:null},n):(0,nS.default)({title:!1,tick:null,label:null,grid:null},n);}function fW(n){return(r,i)=>{let{rowIndex:a,rowValuesLength:o,columnIndex:s,columnValuesLength:l}=r;if(a!==o-1)return fH(n,i);let u=i.length?void 0:null;return(0,nS.default)({title:s===l-1&&void 0,grid:u},n);};}function fX(n){return(r,i)=>{let{rowIndex:a,columnIndex:o}=r;if(0!==o)return fH(n,i);let s=i.length?void 0:null;return(0,nS.default)({title:0===a&&void 0,grid:s},n);};}function fq(n,r){return"function"==typeof n?n:null===n||!1===n?()=>null:r(n);}let f$=()=>n=>[fL.of(n).call(fz).call(fF).call(fB).call(fD).call(fj).call(fU).call(fV).value()];f$.props={};var fY=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let fZ=(0,fC.useDefaultAdaptor)(n=>({scale:{x:{guide:{type:"axisArc"},paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),fK=(0,fC.useDefaultAdaptor)(n=>({coordinate:{type:"polar"}})),fQ=n=>{let{encode:r}=n,i=fY(n,["encode"]),{position:a}=r;return Object.assign(Object.assign({},i),{encode:{x:a}});};function fJ(n){return n=>null;}function f0(n){let{points:r}=n,[i,a,o,s]=r,l=(0,i3.dist)(i,s),u=(0,i3.sub)(i,s),c=(0,i3.sub)(a,o),f=(0,i3.angleBetween)(u,c),d=1/Math.sin(f/2),h=l/(1+d),p=h*Math.sqrt(2),[m,g]=o,v=(0,i3.angleWithQuadrant)(u)+f/2,y=h*d;return[m+y*Math.sin(v)-p/2,g-y*Math.cos(v)-p/2,p,p];}var f1=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let f2=(0,fC.useDefaultAdaptor)(n=>({scale:{x:{guide:null,paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),f3=(0,fC.useOverrideAdaptor)(n=>{let{data:r,children:i,x:a=0,y:o=0,key:s}=n;return{children:(n,l,u)=>{let{x:c,y:f}=l,{paddingLeft:d,paddingTop:h,marginLeft:p,marginTop:m}=u,{domain:g}=c.getOptions(),{domain:v}=f.getOptions(),y=(0,n1.indexOf)(n),_=n.map(({points:n})=>(0,i3.calcBBox)(n)),b=n.map(({x:n,y:r})=>[c.invert(n),f.invert(r)]),x=b.map(([n,r])=>({columnField:n,columnIndex:g.indexOf(n),columnValue:n,columnValuesLength:g.length,rowField:r,rowIndex:v.indexOf(r),rowValue:r,rowValuesLength:v.length})),E=x.map(n=>Array.isArray(i)?i:[i(n)].flat(1));return y.flatMap(n=>{let[i,l,u,c]=_[n],[f,g]=b[n],v=x[n];return E[n].map(y=>{var _,b,x;let{scale:E,key:w,encode:S,axis:T,interaction:A}=y,C=f1(y,["scale","key","encode","axis","interaction"]),O=null===(_=null==E?void 0:E.y)||void 0===_?void 0:_.guide,M={x:("function"==typeof(x=null===(b=null==E?void 0:E.x)||void 0===b?void 0:b.guide)?x:null===x?()=>null:(n,r)=>{let{rowIndex:i,rowValuesLength:a}=n;if(i!==a-1)return fH(x,r);})(v,r),y:("function"==typeof O?O:null===O?()=>null:(n,r)=>{let{columnIndex:i}=n;if(0!==i)return fH(O,r);})(v,r)};return Object.assign({data:r,parentKey:s,key:`${w}-${n}`,x:i+d+a+p,y:l+h+o+m,width:u,height:c,margin:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!0,scale:(0,nS.default)({x:{facet:!1},y:{facet:!1}},E),axis:(0,nS.default)({x:{tickCount:5},y:{tickCount:5}},T,M),legend:!1,encode:(0,nS.default)({},S,{x:f,y:g}),interaction:(0,nS.default)({},A,{legendFilter:!1})},C);});});}};}),f4=(0,fC.useOverrideAdaptor)(n=>{let{encode:r}=n,i=f1(n,["encode"]),{position:a=[],x:o=a,y:s=[...a].reverse()}=r,l=f1(r,["position","x","y"]),u=[];for(let n of[o].flat(1))for(let r of[s].flat(1))u.push({$x:n,$y:r});return Object.assign(Object.assign({},i),{data:u,encode:Object.assign(Object.assign({},l),{x:"$x",y:"$y"}),scale:Object.assign(Object.assign({},1===[o].flat(1).length&&{x:{paddingInner:0}}),1===[s].flat(1).length&&{y:{paddingInner:0}})});}),f5=()=>n=>{let{children:r=[],duration:i=1e3,iterationCount:a=1,direction:o="normal",easing:s="ease-in-out-sine"}=n,l=r.length;if(!Array.isArray(r)||0===l)return[];let{key:u}=r[0],c=r.map(n=>Object.assign(Object.assign({},n),{key:u})).map(n=>(function(n,r,i){let a=[n];for(;a.length;){let n=a.pop();n.animate=(0,nS.default)({enter:{duration:r},update:{duration:r,easing:i,type:"morphing",fill:"both"},exit:{type:"fadeOut",duration:r}},n.animate||{});let{children:o}=n;Array.isArray(o)&&a.push(...o);}return n;})(n,i,s));return function*(){let n,r=0;for(;"infinite"===a||r<a;){let[i,a]=function(n,r,i){let a=[0,i],o=[-i+1,1];return"normal"===n?a:"reverse"===n?o:"alternate"===n?r%2==0?a:o:"reverse-alternate"===n?r%2==0?o:a:void 0;}(o,r,l);for(let r=i;r<a;r+=1){let i=Math.abs(r);n!==i&&(yield c[i]),n=i;}r++;}};};f5.props={};var f6=i("cf1ac170"),f8=ew._(f6);function f7(n,r,i){let{encode:a}=i;if(null===n)return[r];let o=(Array.isArray(n)?n:[n]).map(n=>{var r;return[n,null===(r=(0,iM.columnOf)(a,n))||void 0===r?void 0:r[0]];}).filter(([,n])=>(0,nA.defined)(n));return Array.from((0,nE.default)(r,n=>o.map(([,r])=>r[n]).join("-")).values());}function f9(n){return Array.isArray(n)?(r,i,a)=>(i,a)=>n.reduce((n,o)=>0!==n?n:(0,rx.default)(r[i][o],r[a][o]),0):"function"==typeof n?(r,i,a)=>ds(i=>n(r[i])):"series"===n?dn:"value"===n?dr:"sum"===n?di:"maxIndex"===n?da:null;}function de(n,r){for(let i of n)i.sort(r);}function dt(n,r){return(null==r?void 0:r.domain)||Array.from(new Set(n));}function dn(n,r,i){return ds(n=>i[n]);}function dr(n,r,i){return ds(n=>r[n]);}function di(n,r,i){let a=(0,n1.indexOf)(n),o=new Map(Array.from((0,nE.default)(a,n=>i[+n]).entries()).map(([n,i])=>[n,i.reduce((n,i)=>n+ +r[i])]));return ds(n=>o.get(i[n]));}function da(n,r,i){let a=(0,n1.indexOf)(n),o=new Map(Array.from((0,nE.default)(a,n=>i[+n]).entries()).map(([n,i])=>[n,(0,f8.default)(i,n=>r[n])]));return ds(n=>o.get(i[n]));}function ds(n){return(r,i)=>(0,rx.default)(n(r),n(i));}let dl=(n={})=>{let{groupBy:r="x",orderBy:i=null,reverse:a=!1,y:o="y",y1:s="y1",series:l=!0}=n;return(n,u)=>{var c;let f;let{data:d,encode:h,style:p={}}=u,[m,g]=(0,iM.columnOf)(h,"y"),[v,y]=(0,iM.columnOf)(h,"y1"),[_]=l?(0,iM.maybeColumnOf)(h,"series","color"):(0,iM.columnOf)(h,"color"),b=f7(r,n,u),x=(null!==(c=f9(i))&&void 0!==c?c:()=>null)(d,m,_);x&&de(b,x);let E=Array(n.length),w=Array(n.length),S=Array(n.length),T=[],A=[];for(let n of b){a&&n.reverse();let r=v?+v[n[0]]:0,i=[],o=[];for(let a of n){let n=S[a]=+m[a]-r;n<0?o.push(a):n>=0&&i.push(a);}let s=i.length>0?i:o,l=o.length>0?o:i,u=i.length-1,c=0;for(;u>0&&0===m[s[u]];)u--;for(;c<l.length-1&&0===m[l[c]];)c++;T.push(s[u]),A.push(l[c]);let f=r;for(let n of o.reverse()){let r=S[n];f=E[n]=(w[n]=f)+r;}let d=r;for(let n of i){let r=S[n];r>0?d=E[n]=(w[n]=d)+r:E[n]=w[n]=d;}}let C=new Set(T),O=new Set(A),M="y"===o?E:w,R="y"===s?E:w;return f="point"===u.type?{y0:(0,iM.inferredColumn)(m,g),y:(0,iM.column)(M,g)}:{y0:(0,iM.inferredColumn)(m,g),y:(0,iM.column)(M,g),y1:(0,iM.column)(R,y)},[n,(0,nS.default)({},u,{encode:Object.assign({},f),style:Object.assign({first:(n,r)=>C.has(r),last:(n,r)=>O.has(r)},p)})];};};dl.props={};var du=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let dc=(n={})=>{let{groupBy:r="x",reverse:i=!1,orderBy:a,padding:o}=n;return du(n,["groupBy","reverse","orderBy","padding"]),(n,s)=>{let{data:l,encode:u,scale:c}=s,{series:f}=c,[d]=(0,iM.columnOf)(u,"y"),[h]=(0,iM.maybeColumnOf)(u,"series","color"),p=dt(h,f),m=(0,nS.default)({},s,{scale:{series:{domain:p,paddingInner:o}}}),g=f7(r,n,s),v=f9(a);if(!v)return[n,(0,nS.default)(m,{encode:{series:(0,iM.column)(h)}})];let y=v(l,d,h);y&&de(g,y);let _=Array(n.length);for(let n of g){i&&n.reverse();for(let r=0;r<n.length;r++)_[n[r]]=p[r];}return[n,(0,nS.default)(m,{encode:{series:(0,iM.column)(a?_:h)}})];};};dc.props={};let df=n=>{let{groupBy:r=["x"],reducer:i=(n,r)=>r[n[0]],orderBy:a=null,reverse:o=!1,duration:s}=n;return(n,l)=>{let{encode:u}=l,c=(Array.isArray(r)?r:[r]).map(n=>[n,(0,iM.columnOf)(u,n)[0]]);if(0===c.length)return[n,l];let f=[n];for(let[,n]of c){let r=[];for(let i of f){let a=Array.from((0,nE.default)(i,r=>n[r]).values());r.push(...a);}f=r;}if(a){let[n]=(0,iM.columnOf)(u,a);n&&f.sort((r,a)=>i(r,n)-i(a,n)),o&&f.reverse();}let d=(s||3e3)/f.length,[h]=s?[(0,iM.constant)(n,d)]:(0,iM.maybeColumnOf)(u,"enterDuration",(0,iM.constant)(n,d)),[p]=(0,iM.maybeColumnOf)(u,"enterDelay",(0,iM.constant)(n,0)),m=Array(n.length);for(let n=0,r=0;n<f.length;n++){let i=f[n],a=(0,n5.default)(i,n=>+h[n]);for(let n of i)m[n]=+p[n]+r;r+=a;}return[n,(0,nS.default)({},l,{encode:{enterDuration:(0,iM.visualColumn)(h),enterDelay:(0,iM.visualColumn)(m)}})];};};df.props={};var dd=i("867408b8"),dh=ew._(dd),dp=i("cbdb7ce4"),dm=ew._(dp),dg=i("7a6e60e7"),dv=eS._(dg),dy=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let d_=(n={})=>{let{groupBy:r="x",basis:i="max"}=n;return(n,a)=>{let{encode:o,tooltip:s}=a,{x:l}=o,u=Object.entries(dy(o,["x"])).filter(([n])=>n.startsWith("y")).map(([n])=>[n,(0,iM.columnOf)(o,n)[0]]),[,c]=u.find(([n])=>"y"===n),f=u.map(([r])=>[r,Array(n.length)]),d=f7(r,n,a),h="function"==typeof i?i:({min:(n,r)=>(0,rw.default)(n,n=>r[+n]),max:(n,r)=>(0,n5.default)(n,n=>r[+n]),first:(n,r)=>r[n[0]],last:(n,r)=>r[n[n.length-1]],mean:(n,r)=>(0,dh.default)(n,n=>r[+n]),median:(n,r)=>(0,dv.default)(n,n=>r[+n]),sum:(n,r)=>(0,n8.default)(n,n=>r[+n]),deviation:(n,r)=>(0,dm.default)(n,n=>r[+n])})[i]||n5.default;for(let n of d){let r=h(n,c);for(let i of n)for(let n=0;n<u.length;n++){let[,a]=u[n],[,o]=f[n];o[i]=+a[i]/r;}}let p=(0,nA.isUnset)(s)||(null==s?void 0:s.items)&&(null==s?void 0:s.items.length)!==0;return[n,(0,nS.default)({},a,Object.assign({encode:Object.fromEntries(f.map(([n,r])=>[n,(0,iM.column)(r,(0,iM.columnOf)(o,n)[1])]))},!p&&o.y0&&{tooltip:{items:[{channel:"y0"}]}}))];};};function db(n,r,i){if(null===n)return[-.5,.5];let a=dt(n,r),o=new sF.Band({domain:a,range:[0,1],padding:i}).getBandWidth();return[-o/2,o/2];}d_.props={};let dx=(n={})=>{let{padding:r=0,paddingX:i=r,paddingY:a=r,random:o=Math.random}=n;return(n,r)=>{let{encode:s,scale:l}=r,{x:u,y:c}=l,[f]=(0,iM.columnOf)(s,"x"),[d]=(0,iM.columnOf)(s,"y"),h=db(f,u,i),p=db(d,c,a),m=n.map(()=>(function(n,r,i){return r*(1-n)+i*n;})(o(),...p)),g=n.map(()=>(function(n,r,i){return r*(1-n)+i*n;})(o(),...h));return[n,(0,nS.default)({scale:{x:{padding:.5},y:{padding:.5}}},r,{encode:{dy:(0,iM.column)(m),dx:(0,iM.column)(g)}})];};};dx.props={};let dE=(n={})=>{let{padding:r=0,random:i=Math.random}=n;return(n,a)=>{let{encode:o,scale:s}=a,{x:l}=s,[u]=(0,iM.columnOf)(o,"x"),c=db(u,l,r),f=n.map(()=>(function(n,r,i){return r*(1-n)+i*n;})(i(),...c));return[n,(0,nS.default)({scale:{x:{padding:.5}}},a,{encode:{dx:(0,iM.column)(f)}})];};};dE.props={};let dw=(n={})=>{let{padding:r=0,random:i=Math.random}=n;return(n,a)=>{let{encode:o,scale:s}=a,{y:l}=s,[u]=(0,iM.columnOf)(o,"y"),c=db(u,l,r),f=n.map(()=>(function(n,r,i){return r*(1-n)+i*n;})(i(),...c));return[n,(0,nS.default)({scale:{y:{padding:.5}}},a,{encode:{dy:(0,iM.column)(f)}})];};};dw.props={};var dS=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let dT=(n={})=>{let{groupBy:r="x"}=n;return(n,i)=>{let{encode:a}=i,{x:o}=a,s=Object.entries(dS(a,["x"])).filter(([n])=>n.startsWith("y")).map(([n])=>[n,(0,iM.columnOf)(a,n)[0]]),l=s.map(([r])=>[r,Array(n.length)]),u=f7(r,n,i),c=Array(u.length);for(let n=0;n<u.length;n++){let r=u[n].flatMap(n=>s.map(([,r])=>+r[n])),[i,a]=(0,fI.default)(r);c[n]=(i+a)/2;}let f=Math.max(...c);for(let n=0;n<u.length;n++){let r=f-c[n];for(let i of u[n])for(let n=0;n<s.length;n++){let[,a]=s[n],[,o]=l[n];o[i]=+a[i]+r;}}return[n,(0,nS.default)({},i,{encode:Object.fromEntries(l.map(([n,r])=>[n,(0,iM.column)(r,(0,iM.columnOf)(a,n)[1])]))})];};};dT.props={};let dA=(n={})=>{let{groupBy:r="x"}=n;return(n,i)=>{let{encode:a}=i,[o]=(0,iM.columnOf)(a,"y"),[s,l]=(0,iM.columnOf)(a,"y1"),u=f7(r,n,i),c=Array(n.length);for(let n of u){let r=n.map(n=>+o[n]);for(let i=0;i<n.length;i++){let a=n[i],s=Math.max(...r.filter((n,r)=>r!==i));c[a]=+o[a]>s?s:o[a];}}return[n,(0,nS.default)({},i,{encode:{y1:(0,iM.column)(c,l)}})];};};dA.props={};var dC=i("7b424aab"),dO=ew._(dC);function dM(n,r){return[n[0]];}function dR(n,r){let i=n.length-1;return[n[i]];}function dP(n,r){let i=(0,f8.default)(n,n=>r[n]);return[n[i]];}function dk(n,r){let i=(0,dO.default)(n,n=>r[n]);return[n[i]];}let dI=(n={})=>{let{groupBy:r="series",channel:i,selector:a}=n;return(n,o)=>{let{encode:s}=o,l=f7(r,n,o),[u]=(0,iM.columnOf)(s,i),c="function"==typeof a?a:({first:dM,last:dR,max:dP,min:dk})[a]||dM;return[l.flatMap(n=>c(n,u)),o];};};dI.props={};var dL=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let dN=(n={})=>{let{selector:r}=n;return dI(Object.assign({channel:"x",selector:r},dL(n,["selector"])));};dN.props={};var dD=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let dF=(n={})=>{let{selector:r}=n;return dI(Object.assign({channel:"y",selector:r},dD(n,["selector"])));};dF.props={};var dB=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};function dj(n){return r=>null===r?n:`${n} of ${r}`;}function dz(){return[(n,r)=>(0,dh.default)(n,n=>+r[n]),dj("mean")];}function dU(){return[(n,r)=>(0,dv.default)(n,n=>+r[n]),dj("median")];}function dV(){return[(n,r)=>(0,n5.default)(n,n=>+r[n]),dj("max")];}function dG(){return[(n,r)=>(0,rw.default)(n,n=>+r[n]),dj("min")];}function dH(){return[(n,r)=>n.length,dj("count")];}function dW(){return[(n,r)=>(0,n8.default)(n,n=>+r[n]),dj("sum")];}function dX(){return[(n,r)=>r[n[0]],dj("first")];}function dq(){return[(n,r)=>r[n[n.length-1]],dj("last")];}let d$=(n={})=>{let{groupBy:r}=n,i=dB(n,["groupBy"]);return(n,a)=>{let{data:o,encode:s}=a,l=r(n,a);if(!l)return[n,a];let u=(n,r)=>{if(n)return n;let{from:i}=r;if(!i)return n;let[,a]=(0,iM.columnOf)(s,i);return a;},c=Object.entries(i).map(([n,r])=>{let[i,a]=function(n){if("function"==typeof n)return[n,null];let r={mean:dz,max:dV,count:dH,first:dX,last:dq,sum:dW,min:dG,median:dU}[n];if(!r)throw Error(`Unknown reducer: ${n}.`);return r();}(r),[c,f]=(0,iM.columnOf)(s,n),d=u(f,r),h=l.map(n=>i(n,null!=c?c:o));return[n,Object.assign(Object.assign({},(0,iM.nonConstantColumn)(h,(null==a?void 0:a(d))||d)),{aggregate:!0})];}),f=Object.keys(s).map(n=>{let[r,i]=(0,iM.columnOf)(s,n),a=l.map(n=>r[n[0]]);return[n,(0,iM.column)(a,i)];}),d=l.map(n=>o[n[0]]);return[(0,n1.indexOf)(l),(0,nS.default)({},a,{data:d,encode:Object.fromEntries([...f,...c])})];};};d$.props={};var dY=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let dZ=(n={})=>{let{channels:r=["x","y"]}=n;return d$(Object.assign(Object.assign({},dY(n,["channels"])),{groupBy:(n,i)=>f7(r,n,i)}));};dZ.props={};let dK=(n={})=>dZ(Object.assign(Object.assign({},n),{channels:["x","color","series"]}));dK.props={};let dQ=(n={})=>(r,i)=>{var a,o;let{reverse:s,slice:l,channel:u,by:c,ordinal:f=!0,reducer:d}=n,{encode:h,scale:p={}}=i,m=p[u].domain,[g]=(0,iM.columnOf)(h,null!=c?c:u),[v]=(0,iM.columnOf)(h,u),y=function(n,r,i){let{by:a=n,reducer:o="max"}=r,[s]=(0,iM.columnOf)(i,a);if("function"==typeof o)return n=>o(n,s);if("max"===o)return n=>(0,n5.default)(n,n=>+s[n]);if("min"===o)return n=>(0,rw.default)(n,n=>+s[n]);if("sum"===o)return n=>(0,n8.default)(n,n=>+s[n]);if("median"===o)return n=>(0,dv.default)(n,n=>+s[n]);if("mean"===o)return n=>(0,dh.default)(n,n=>+s[n]);if("first"===o)return n=>s[n[0]];if("last"===o)return n=>s[n[n.length-1]];throw Error(`Unknown reducer: ${o}`);}(u,{by:c,reducer:d},h),_=(a=function(n,r,i){if(!Array.isArray(i))return n;let a=new Set(i);return n.filter(n=>a.has(r[n]));}(r,v,m),o=n=>v[n],(2!==y.length?(0,cy.default)((0,nE.rollup)(a,y,o),([n,r],[i,a])=>(0,rx.default)(r,a)||(0,rx.default)(n,i)):(0,cy.default)((0,nE.default)(a,o),([n,r],[i,a])=>y(r,a)||(0,rx.default)(n,i))).map(([n])=>n)),b=f?r:(0,cy.default)(r,n=>g[n]);s&&(f||b.reverse(),_.reverse());let x=l?_.slice(..."number"==typeof l?[0,l]:l):_;return[b,(0,nS.default)(i,{scale:{[u]:{domain:x}}})];};dQ.props={};let dJ=(n={})=>dQ(Object.assign(Object.assign({},n),{channel:"x"}));dJ.props={};let d0=(n={})=>{let{field:r,channel:i="y",reducer:a="sum"}=n;return(n,o)=>{let{data:s,encode:l}=o,[u]=(0,iM.columnOf)(l,"x"),c=function(n,r){if("function"==typeof n)return i=>n(i,r);if("sum"===n)return n=>(0,n8.default)(n,n=>+r[n]);throw Error(`Unknown reducer: ${n}`);}(a,r?"string"==typeof r?s.map(n=>n[r]):s.map(r):(0,iM.columnOf)(l,i)[0]),f=(0,nE.rollups)(n,c,n=>u[n]).map(n=>n[1]);return[n,(0,nS.default)({},o,{scale:{x:{flex:f}}})];};};d0.props={};let d1=(n={})=>dQ(Object.assign(Object.assign({},n),{channel:"y"}));d1.props={};let d2=(n={})=>dZ(Object.assign(Object.assign({},n),{channels:["y","color","series"]}));d2.props={};let d3=(n={})=>dZ(Object.assign(Object.assign({},n),{channels:["color"]}));d3.props={};let d4=(n={})=>dQ(Object.assign(Object.assign({},n),{channel:"color"}));d4.props={};let d5=n=>(r,i)=>[r,(0,nS.default)({},i,{modifier:function(n){let{padding:r=0,direction:i="col"}=n;return(n,a,o)=>{let s=n.length;if(0===s)return[];let{innerWidth:l,innerHeight:u}=o,c=Math.ceil(Math.sqrt(a/(u/l))),f=l/c,d=Math.ceil(a/c),h=d*f;for(;h>u;)c+=1,f=l/c,h=(d=Math.ceil(a/c))*f;let p=u-d*f,m=d<=1?0:p/(d-1),[g,v]=d<=1?[(l-s*f)/(s-1),(u-f)/2]:[0,0];return n.map((n,a)=>{let[o,s,l,u]=(0,i3.calcBBox)(n),h="col"===i?a%c:Math.floor(a/d),y="col"===i?Math.floor(a/c):a%d,_=h*f,b=(d-y-1)*f+p,x=(f-r)/l,E=(f-r)/u;return`translate(${_-o+g*h+.5*r}, ${b-s-m*y-v+.5*r}) scale(${x}, ${E})`;});};}(n),axis:!1})];d5.props={};var d6=Array.prototype,d8=d6.slice;d6.map;var d7=i("496cbcb8"),d9=ew._(d7);let he=Math.sqrt(50),ht=Math.sqrt(10),hn=Math.sqrt(2);function hr(n,r,i){let a,o,s;let l=(r-n)/Math.max(0,i),u=Math.floor(Math.log10(l)),c=l/Math.pow(10,u),f=c>=he?10:c>=ht?5:c>=hn?2:1;return(u<0?(a=Math.round(n*(s=Math.pow(10,-u)/f)),o=Math.round(r*s),a/s<n&&++a,o/s>r&&--o,s=-s):(a=Math.round(n/(s=Math.pow(10,u)*f)),o=Math.round(r/s),a*s<n&&++a,o*s>r&&--o),o<a&&.5<=i&&i<2)?hr(n,r,2*i):[a,o,s];}function hi(n,r,i){return hr(n=+n,r=+r,i=+i)[2];}function ha(n,r){let i=0;if(void 0===r)for(let r of n)null!=r&&(r=+r)>=r&&++i;else{let a=-1;for(let o of n)null!=(o=r(o,++a,n))&&(o=+o)>=o&&++i;}return i;}function ho(n){return Math.max(1,Math.ceil(Math.log(ha(n))/Math.LN2)+1);}var hs=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let hl="thresholds",hu=(n={})=>{let{groupChannels:r=["color"],binChannels:i=["x","y"]}=n,a=hs(n,["groupChannels","binChannels"]),o={};return d$(Object.assign(Object.assign(Object.assign({},Object.fromEntries(Object.entries(a).filter(([n])=>!n.startsWith(hl)))),Object.fromEntries(i.flatMap(n=>{let r=([r])=>+o[n].get(r).split(",")[1];return r.from=n,[[n,([r])=>+o[n].get(r).split(",")[0]],[`${n}1`,r]];}))),{groupBy:(n,s)=>{let{encode:l}=s,u=i.map(n=>{let[r]=(0,iM.columnOf)(l,n);return r;}),c=(0,nA.subObject)(a,hl),f=n.filter(n=>u.every(r=>(0,nA.defined)(r[n]))),d=[...r.map(n=>{let[r]=(0,iM.columnOf)(l,n);return r;}).filter(nA.defined).map(n=>r=>n[r]),...i.map((n,r)=>{let i=u[r],a=c[n]||function(n){let[r,i]=(0,fI.default)(n);return Math.min(200,function(n,r,i){let a=ha(n),o=(0,dm.default)(n);return a&&o?Math.ceil((i-r)*Math.cbrt(a)/(3.49*o)):1;}(n,r,i));}(i),s=new Map((function(){var n=d9.default,r=fI.default,i=ho;function a(a){Array.isArray(a)||(a=Array.from(a));var o,s,l,u=a.length,c=Array(u);for(o=0;o<u;++o)c[o]=n(a[o],o,a);var f=r(c),d=f[0],h=f[1],p=i(c,d,h);if(!Array.isArray(p)){let n=h,i=+p;if(r===fI.default&&([d,h]=function(n,r,i){let a;for(;;){let o=hi(n,r,i);if(o===a||0===o||!isFinite(o))return[n,r];o>0?(n=Math.floor(n/o)*o,r=Math.ceil(r/o)*o):o<0&&(n=Math.ceil(n*o)/o,r=Math.floor(r*o)/o),a=o;}}(d,h,i)),(p=function(n,r,i){if(r=+r,n=+n,!((i=+i)>0))return[];if(n===r)return[n];let a=r<n,[o,s,l]=a?hr(r,n,i):hr(n,r,i);if(!(s>=o))return[];let u=s-o+1,c=Array(u);if(a){if(l<0)for(let n=0;n<u;++n)c[n]=-((s-n)/l);else for(let n=0;n<u;++n)c[n]=(s-n)*l;}else if(l<0)for(let n=0;n<u;++n)c[n]=-((o+n)/l);else for(let n=0;n<u;++n)c[n]=(o+n)*l;return c;}(d,h,i))[0]<=d&&(l=hi(d,h,i)),p[p.length-1]>=h){if(n>=h&&r===fI.default){let n=hi(d,h,i);isFinite(n)&&(n>0?h=(Math.floor(h/n)+1)*n:n<0&&(h=-((Math.ceil(-(h*n))+1)/n)));}else p.pop();}}for(var m=p.length,g=0,v=m;p[g]<=d;)++g;for(;p[v-1]>h;)--v;(g||v<m)&&(p=p.slice(g,v),m=v-g);var y,_=Array(m+1);for(o=0;o<=m;++o)(y=_[o]=[]).x0=o>0?p[o-1]:d,y.x1=o<m?p[o]:h;if(isFinite(l)){if(l>0)for(o=0;o<u;++o)null!=(s=c[o])&&d<=s&&s<=h&&_[Math.min(m,Math.floor((s-d)/l))].push(a[o]);else if(l<0){for(o=0;o<u;++o)if(null!=(s=c[o])&&d<=s&&s<=h){let n=Math.floor((d-s)*l);_[Math.min(m,n+(p[n]<=s))].push(a[o]);}}}else for(o=0;o<u;++o)null!=(s=c[o])&&d<=s&&s<=h&&_[(0,cb.default)(p,s,0,m)].push(a[o]);return _;}return a.value=function(r){return arguments.length?(n="function"==typeof r?r:()=>r,a):n;},a.domain=function(n){var i;return arguments.length?(r="function"==typeof n?n:(i=[n[0],n[1]],()=>i),a):r;},a.thresholds=function(n){var r;return arguments.length?(i="function"==typeof n?n:(r=Array.isArray(n)?d8.call(n):n,()=>r),a):i;},a;})().thresholds(a).value(n=>+i[n])(f).flatMap(n=>{let{x0:r,x1:i}=n,a=`${r},${i}`;return n.map(n=>[n,a]);}));return o[n]=s,n=>s.get(n);})];return Array.from((0,nE.default)(f,n=>d.map(r=>r(n)).join("-")).values());}}));};hu.props={};let hc=(n={})=>{let{thresholds:r}=n;return hu(Object.assign(Object.assign({},n),{thresholdsX:r,groupChannels:["color"],binChannels:["x"]}));};function hf(n,r,i,a){let o,s,l;let u=n.length;if(a>=u||0===a)return n;let c=i=>1*r[n[i]],f=r=>1*i[n[r]],d=[],h=(u-2)/(a-2),p=0;d.push(p);for(let n=0;n<a-2;n++){let r=0,i=0,a=Math.floor((n+1)*h)+1,m=Math.floor((n+2)*h)+1,g=(m=Math.min(m,u))-a;for(;a<m;a++)r+=c(a),i+=f(a);r/=g,i/=g;let v=Math.floor((n+0)*h)+1,y=Math.floor((n+1)*h)+1,_=[c(p),f(p)];for(o=s=-1;v<y;v++)(s=.5*Math.abs((_[0]-r)*(c(v)-_[1])-(_[0]-f(v))*(i-_[0])))>o&&(o=s,l=v);d.push(l),p=l;}return d.push(u-1),d.map(r=>n[r]);}hc.props={};let hd=(n={})=>{let{strategy:r="median",thresholds:i=2e3,groupBy:a=["series","color"]}=n,o=function(n){if("function"==typeof n)return n;if("lttb"===n)return hf;let r={first:n=>[n[0]],last:n=>[n[n.length-1]],min:(n,r,i)=>[n[(0,dO.default)(n,n=>i[n])]],max:(n,r,i)=>[n[(0,f8.default)(n,n=>i[n])]],median:(n,r,i)=>[n[(0,dv.medianIndex)(n,n=>i[n])]]},i=r[n]||r.median;return(n,r,a,o)=>{let s=Math.max(1,Math.floor(n.length/o));return(function(n,r){let i=n.length,a=[],o=0;for(;o<i;)a.push(n.slice(o,o+=r));return a;})(n,s).flatMap(n=>i(n,r,a));};}(r);return(n,r)=>{let{encode:s}=r,l=f7(a,n,r),[u]=(0,iM.columnOf)(s,"x"),[c]=(0,iM.columnOf)(s,"y");return[l.flatMap(n=>o(n,u,c,i)),r];};};hd.props={};let hh=(n={})=>(r,i)=>{let{encode:a,data:o}=i,s=Object.entries(n).map(([n,r])=>{let[i]=(0,iM.columnOf)(a,n);if(!i)return null;let[o,s=!0]="object"==typeof r?[r.value,r.ordinal]:[r,!0];if("function"==typeof o)return n=>o(i[n]);if(s){let n=Array.isArray(o)?o:[o];return 0===n.length?null:r=>n.includes(i[r]);}{let[n,r]=o;return a=>i[a]>=n&&i[a]<=r;}}).filter(nA.defined),l=r.filter(n=>s.every(r=>r(n))),u=l.map((n,r)=>r);if(0===s.length)return[r,function(n){var r;let i;let{encode:a}=n,o=Object.assign(Object.assign({},n),{encode:Object.assign(Object.assign({},n.encode),{y:Object.assign(Object.assign({},n.encode.y),{value:[]})})}),s=null===(r=null==a?void 0:a.color)||void 0===r?void 0:r.field;if(!a||!s)return o;for(let[n,r]of Object.entries(a))("x"===n||"y"===n)&&r.field===s&&(i=Object.assign(Object.assign({},i),{[n]:Object.assign(Object.assign({},r),{value:[]})}));return i?Object.assign(Object.assign({},n),{encode:Object.assign(Object.assign({},n.encode),i)}):o;}(i)];let c=Object.entries(a).map(([n,r])=>[n,Object.assign(Object.assign({},r),{value:u.map(n=>r.value[l[n]]).filter(n=>void 0!==n)})]);return[u,(0,nS.default)({},i,{encode:Object.fromEntries(c),data:l.map(n=>o[n])})];};function hp(n){for(var r in n){var i,a,o=n[r].trim();if(o){if("true"===o)o=!0;else if("false"===o)o=!1;else if("NaN"===o)o=NaN;else if(isNaN(i=+o)){if(!(a=o.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;hm&&a[4]&&!a[7]&&(o=o.replace(/-/g,"/").replace(/T/," ")),o=new Date(o);}else o=i;}else o=null;n[r]=o;}return n;}hh.props={};let hm=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();var hg={},hv={};function hy(n){return Function("d","return {"+n.map(function(n,r){return JSON.stringify(n)+": d["+r+'] || ""';}).join(",")+"}");}function h_(n){var r=Object.create(null),i=[];return n.forEach(function(n){for(var a in n)a in r||i.push(r[a]=a);}),i;}function hb(n,r){var i=n+"",a=i.length;return a<r?Array(r-a+1).join(0)+i:i;}var hx=function(n){var r=RegExp('["'+n+"\n\r]"),i=n.charCodeAt(0);function a(n,r){var a,o=[],s=n.length,l=0,u=0,c=s<=0,f=!1;function d(){if(c)return hv;if(f)return f=!1,hg;var r,a,o=l;if(34===n.charCodeAt(o)){for(;l++<s&&34!==n.charCodeAt(l)||34===n.charCodeAt(++l););return(r=l)>=s?c=!0:10===(a=n.charCodeAt(l++))?f=!0:13===a&&(f=!0,10===n.charCodeAt(l)&&++l),n.slice(o+1,r-1).replace(/""/g,'"');}for(;l<s;){if(10===(a=n.charCodeAt(r=l++)))f=!0;else if(13===a)f=!0,10===n.charCodeAt(l)&&++l;else if(a!==i)continue;return n.slice(o,r);}return c=!0,n.slice(o,s);}for(10===n.charCodeAt(s-1)&&--s,13===n.charCodeAt(s-1)&&--s;(a=d())!==hv;){for(var h=[];a!==hg&&a!==hv;)h.push(a),a=d();r&&null==(h=r(h,u++))||o.push(h);}return o;}function o(r,i){return r.map(function(r){return i.map(function(n){return l(r[n]);}).join(n);});}function s(r){return r.map(l).join(n);}function l(n){var i,a,o,s,l,u;return null==n?"":n instanceof Date?(a=(i=n).getUTCHours(),o=i.getUTCMinutes(),s=i.getUTCSeconds(),l=i.getUTCMilliseconds(),isNaN(i)?"Invalid Date":((u=i.getUTCFullYear())<0?"-"+hb(-u,6):u>9999?"+"+hb(u,6):hb(u,4))+"-"+hb(i.getUTCMonth()+1,2)+"-"+hb(i.getUTCDate(),2)+(l?"T"+hb(a,2)+":"+hb(o,2)+":"+hb(s,2)+"."+hb(l,3)+"Z":s?"T"+hb(a,2)+":"+hb(o,2)+":"+hb(s,2)+"Z":o||a?"T"+hb(a,2)+":"+hb(o,2)+"Z":"")):r.test(n+="")?'"'+n.replace(/"/g,'""')+'"':n;}return{parse:function(n,r){var i,o,s=a(n,function(n,a){var s;if(i)return i(n,a-1);o=n,i=r?(s=hy(n),function(i,a){return r(s(i),a,n);}):hy(n);});return s.columns=o||[],s;},parseRows:a,format:function(r,i){return null==i&&(i=h_(r)),[i.map(l).join(n)].concat(o(r,i)).join("\n");},formatBody:function(n,r){return null==r&&(r=h_(n)),o(n,r).join("\n");},formatRows:function(n){return n.map(s).join("\n");},formatRow:s,formatValue:l};},hE=this&&this.__awaiter||function(n,r,i,a){return new(i||(i=Promise))(function(o,s){function l(n){try{c(a.next(n));}catch(n){s(n);}}function u(n){try{c(a.throw(n));}catch(n){s(n);}}function c(n){var r;n.done?o(n.value):((r=n.value)instanceof i?r:new i(function(n){n(r);})).then(l,u);}c((a=a.apply(n,r||[])).next());});};let hw=n=>{let{value:r,format:i=r.split(".").pop(),delimiter:a=",",autoType:o=!0}=n;return()=>hE(void 0,void 0,void 0,function*(){let n=yield fetch(r);if("csv"===i){let r=yield n.text();return hx(a).parse(r,o?hp:nA.identity);}if("json"===i)return yield n.json();throw Error(`Unknown format: ${i}.`);});};hw.props={};let hS=n=>{let{fields:r=[]}=n,i=r.map(n=>{if(Array.isArray(n)){let[r,i=!0]=n;return[r,i];}return[n,!0];});return n=>[...n].sort((n,r)=>i.reduce((i,[a,o=!0])=>0!==i?i:o?n[a]<r[a]?-1:+(n[a]!==r[a]):n[a]>r[a]?-1:+(n[a]!==r[a]),0));};function hT(n){return null!=n&&!Number.isNaN(n);}hS.props={};let hA=n=>{let{callback:r=hT}=n;return n=>n.filter(r);};hA.props={};let hC=n=>{let{callback:r=nA.identity}=n;return n=>Array.isArray(n)?n.map(r):n;};hC.props={};let hO=n=>{let{fields:r}=n;return n=>n.map(n=>(function(n,r=[]){return r.reduce((r,i)=>(i in n&&(r[i]=n[i]),r),{});})(n,r));};hO.props={};let hM=n=>r=>n&&0!==Object.keys(n).length?r.map(r=>Object.entries(r).reduce((r,[i,a])=>(r[n[i]||i]=a,r),{})):r;hM.props={};let hR=n=>{let{fields:r,key:i="key",value:a="value"}=n;return n=>r&&0!==Object.keys(r).length?n.flatMap(n=>r.map(r=>Object.assign(Object.assign({},n),{[i]:r,[a]:n[r]}))):n;};hR.props={};let hP=n=>{let{start:r,end:i}=n;return n=>n.slice(r,i);};hP.props={};let hk=n=>{let{value:r}=n;return()=>r;};hk.props={};let hI=n=>{let{callback:r=nA.identity}=n;return n=>r(n);};function hL(n){return"string"==typeof n?r=>r[n]:n;}hI.props={};let hN=n=>{let{join:r,on:i,select:a=[],as:o=a,unknown:s=NaN}=n,[l,u]=i,c=hL(u),f=hL(l),d=(0,nE.rollup)(r,([n])=>n,n=>c(n));return n=>n.map(n=>{let r=d.get(f(n));return Object.assign(Object.assign({},n),a.reduce((n,i,a)=>(n[o[a]]=r?r[i]:s,n),{}));});};hN.props={};let hD=n=>{let{callback:r}=n;return n=>Array.isArray(n)?[...n].sort(r):n;};hD.props={};var hF=i("46f5c5e9"),hB=ew._(hF);let hj=n=>{let{field:r,groupBy:i,as:a=["y","size"],min:o,max:s,size:l=10,width:u}=n,[c,f]=a;return n=>Array.from((0,nE.default)(n,n=>i.map(r=>n[r]).join("-")).values()).map(n=>{let i=hB.default.create(n.map(n=>n[r]),{min:o,max:s,size:l,width:u}),a=i.map(n=>n.x),d=i.map(n=>n.y);return Object.assign(Object.assign({},n[0]),{[c]:a,[f]:d});});};hj.props={};let hz=()=>n=>(console.log("G2 data section:",n),n);hz.props={};let hU=n=>{let{field:r="y",alpha:i=.6,as:a=r}=n;return n=>{let o=function(n,r){if(r<0||r>1)throw Error("alpha must be between 0 and 1.");if(0===n.length)return[];let i=n[0],a=[];for(let o of n){if(null==o){a.push(o),console.warn("EMA\uFF1AThe value is null or undefined",n);continue;}null==i&&(i=o);let s=i*r+(1-r)*o;a.push(s),i=s;}return a;}(n.map(n=>n[r]),i);return n.map((n,r)=>Object.assign(Object.assign({},n),{[a]:o[r]}));};};hU.props={};var hV=this&&this.__awaiter||function(n,r,i,a){return new(i||(i=Promise))(function(o,s){function l(n){try{c(a.next(n));}catch(n){s(n);}}function u(n){try{c(a.throw(n));}catch(n){s(n);}}function c(n){var r;n.done?o(n.value):((r=n.value)instanceof i?r:new i(function(n){n(r);})).then(l,u);}c((a=a.apply(n,r||[])).next());});};let hG=Math.PI/180;function hH(n){return n.text;}function hW(){return"serif";}function hX(){return"normal";}function hq(n){return n.value;}function h$(){return 90*~~(2*Math.random());}function hY(){return 1;}function hZ(){}function hK(n){let r=n[0]/n[1];return function(n){return[r*(n*=.1)*Math.cos(n),n*Math.sin(n)];};}function hQ(n){let r=[],i=-1;for(;++i<n;)r[i]=0;return r;}function hJ(){return document.createElement("canvas");}function h0(n){return"function"==typeof n?n:function(){return n;};}let h1={archimedean:hK,rectangular:function(n){let r=4*n[0]/n[1],i=0,a=0;return function(n){let o=n<0?-1:1;switch(Math.sqrt(1+4*o*n)-o&3){case 0:i+=r;break;case 1:a+=4;break;case 2:i-=r;break;default:a-=4;}return[i,a];};}};var h2=this&&this.__awaiter||function(n,r,i,a){return new(i||(i=Promise))(function(o,s){function l(n){try{c(a.next(n));}catch(n){s(n);}}function u(n){try{c(a.throw(n));}catch(n){s(n);}}function c(n){var r;n.done?o(n.value):((r=n.value)instanceof i?r:new i(function(n){n(r);})).then(l,u);}c((a=a.apply(n,r||[])).next());});},h3=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let h4={fontSize:[20,60],font:"Impact",padding:2,rotate:function(){return(~~(6*Math.random())-3)*30;}};function h5(n){return new Promise((r,i)=>{if(n instanceof HTMLImageElement){r(n);return;}if("string"==typeof n){let a=new Image;a.crossOrigin="anonymous",a.src=n,a.onload=()=>r(a),a.onerror=()=>{console.error(`'image ${n} load failed !!!'`),i();};return;}i();});}let h6=(n,r)=>i=>h2(void 0,void 0,void 0,function*(){let a=Object.assign({},h4,n,{canvas:r.createCanvas}),o=function(){let n=[256,256],r=hH,i=hW,a=hq,o=hX,s=h$,l=hY,u=hK,c=Math.random,f=hZ,d=[],h=null,p=1/0,m=hJ,g={};return g.start=function(){let[v,y]=n,_=function(n){n.width=n.height=1;let r=Math.sqrt(n.getContext("2d").getImageData(0,0,1,1).data.length>>2);n.width=2048/r,n.height=2048/r;let i=n.getContext("2d");return i.fillStyle=i.strokeStyle="red",i.textAlign="center",i.textBaseline="middle",{context:i,ratio:r};}(m()),b=g.board?g.board:hQ((n[0]>>5)*n[1]),x=d.length,E=[],w=d.map(function(n,u,c){return n.text=r.call(this,n,u,c),n.font=i.call(this,n,u,c),n.style=hX.call(this,n,u,c),n.weight=o.call(this,n,u,c),n.rotate=s.call(this,n,u,c),n.size=~~a.call(this,n,u,c),n.padding=l.call(this,n,u,c),n;}).sort(function(n,r){return r.size-n.size;}),S=-1,T=g.board?[{x:0,y:0},{x:v,y:y}]:void 0;function A(){let r=Date.now();for(;Date.now()-r<p&&++S<x;){let r=w[S];r.x=v*(c()+.5)>>1,r.y=y*(c()+.5)>>1,function(n,r,i,a){if(r.sprite)return;let o=n.context,s=n.ratio;o.clearRect(0,0,2048/s,2048/s);let l=0,u=0,c=0,f=i.length;for(--a;++a<f;){r=i[a],o.save(),o.font=r.style+" "+r.weight+" "+~~((r.size+1)/s)+"px "+r.font;let n=o.measureText(r.text+"m").width*s,f=r.size<<1;if(r.rotate){let i=Math.sin(r.rotate*hG),a=Math.cos(r.rotate*hG),o=n*a,s=n*i,l=f*a,u=f*i;n=Math.max(Math.abs(o+u),Math.abs(o-u))+31>>5<<5,f=~~Math.max(Math.abs(s+l),Math.abs(s-l));}else n=n+31>>5<<5;if(f>c&&(c=f),l+n>=2048&&(l=0,u+=c,c=0),u+f>=2048)break;o.translate((l+(n>>1))/s,(u+(f>>1))/s),r.rotate&&o.rotate(r.rotate*hG),o.fillText(r.text,0,0),r.padding&&(o.lineWidth=2*r.padding,o.strokeText(r.text,0,0)),o.restore(),r.width=n,r.height=f,r.xoff=l,r.yoff=u,r.x1=n>>1,r.y1=f>>1,r.x0=-r.x1,r.y0=-r.y1,r.hasText=!0,l+=n;}let d=o.getImageData(0,0,2048/s,2048/s).data,h=[];for(;--a>=0;){if(!(r=i[a]).hasText)continue;let n=r.width,o=n>>5,s=r.y1-r.y0;for(let n=0;n<s*o;n++)h[n]=0;if(null==(l=r.xoff))return;u=r.yoff;let c=0,f=-1;for(let i=0;i<s;i++){for(let r=0;r<n;r++){let n=o*i+(r>>5),a=d[(u+i)*2048+(l+r)<<2]?1<<31-r%32:0;h[n]|=a,c|=a;}c?f=i:(r.y0++,s--,i--,u++);}r.y1=r.y0+f,r.sprite=h.slice(0,(r.y1-r.y0)*o);}}(_,r,w,S),r.hasText&&function(r,i,a){let o=i.x,s=i.y,l=Math.sqrt(n[0]*n[0]+n[1]*n[1]),f=u(n),d=.5>c()?1:-1,h,p=-d,m,g;for(;(h=f(p+=d))&&!(Math.min(Math.abs(m=~~h[0]),Math.abs(g=~~h[1]))>=l);)if(i.x=o+m,i.y=s+g,!(i.x+i.x0<0)&&!(i.y+i.y0<0)&&!(i.x+i.x1>n[0])&&!(i.y+i.y1>n[1])&&(!a||!function(n,r,i){i>>=5;let a=n.sprite,o=n.width>>5,s=n.x-(o<<4),l=127&s,u=32-l,c=n.y1-n.y0,f=(n.y+n.y0)*i+(s>>5),d;for(let n=0;n<c;n++){d=0;for(let i=0;i<=o;i++)if((d<<u|(i<o?(d=a[n*o+i])>>>l:0))&r[f+i])return!0;f+=i;}return!1;}(i,r,n[0]))&&(!a||i.x+i.x1>a[0].x&&i.x+i.x0<a[1].x&&i.y+i.y1>a[0].y&&i.y+i.y0<a[1].y)){let a=i.sprite,o=i.width>>5,s=n[0]>>5,l=i.x-(o<<4),u=127&l,c=32-u,f=i.y1-i.y0,d,h=(i.y+i.y0)*s+(l>>5);for(let n=0;n<f;n++){d=0;for(let i=0;i<=o;i++)r[h+i]|=d<<c|(i<o?(d=a[n*o+i])>>>u:0);h+=s;}return delete i.sprite,!0;}return!1;}(b,r,T)&&(f.call(null,"word",{cloud:g,word:r}),E.push(r),T?g.hasImage||function(n,r){let i=n[0],a=n[1];r.x+r.x0<i.x&&(i.x=r.x+r.x0),r.y+r.y0<i.y&&(i.y=r.y+r.y0),r.x+r.x1>a.x&&(a.x=r.x+r.x1),r.y+r.y1>a.y&&(a.y=r.y+r.y1);}(T,r):T=[{x:r.x+r.x0,y:r.y+r.y0},{x:r.x+r.x1,y:r.y+r.y1}],r.x-=n[0]>>1,r.y-=n[1]>>1);}g._tags=E,g._bounds=T,S>=x&&(g.stop(),f.call(null,"end",{cloud:g,words:E,bounds:T}));}return h&&clearInterval(h),h=setInterval(A,0),A(),g;},g.stop=function(){return h&&(clearInterval(h),h=null),g;},g.createMask=r=>{let i=document.createElement("canvas"),[a,o]=n;if(!a||!o)return;let s=a>>5,l=hQ((a>>5)*o);i.width=a,i.height=o;let u=i.getContext("2d");u.drawImage(r,0,0,r.width,r.height,0,0,a,o);let c=u.getImageData(0,0,a,o).data;for(let n=0;n<o;n++)for(let r=0;r<a;r++){let i=s*n+(r>>5),o=n*a+r<<2,u=c[o]>=250&&c[o+1]>=250&&c[o+2]>=250?1<<31-r%32:0;l[i]|=u;}g.board=l,g.hasImage=!0;},g.timeInterval=function(n){p=null==n?1/0:n;},g.words=function(n){d=n;},g.size=function(r=[]){n=[+r[0],+r[1]];},g.text=function(n){r=h0(n);},g.font=function(n){i=h0(n);},g.fontWeight=function(n){o=h0(n);},g.rotate=function(n){s=h0(n);},g.canvas=function(n){m=h0(n);},g.spiral=function(n){u=h1[n]||n;},g.fontSize=function(n){a=h0(n);},g.padding=function(n){l=h0(n);},g.random=function(n){c=h0(n);},g.on=function(n){f=h0(n);},g;}();yield({set(n,r,i){if(void 0===a[n])return this;let s=r?r.call(null,a[n]):a[n];return i?i.call(null,s):"function"==typeof o[n]?o[n](s):o[n]=s,this;},setAsync(n,r,i){return hV(this,void 0,void 0,function*(){if(void 0===a[n])return this;let s=r?yield r.call(null,a[n]):a[n];return i?i.call(null,s):"function"==typeof o[n]?o[n](s):o[n]=s,this;});}}).set("fontSize",n=>{let r=i.map(n=>n.value);return function(n,r){if("function"==typeof n)return n;if(Array.isArray(n)){let[i,a]=n;if(!r)return()=>(a+i)/2;let[o,s]=r;return s===o?()=>(a+i)/2:({value:n})=>(a-i)/(s-o)*(n-o)+i;}return()=>n;}(n,[(0,rw.default)(r),(0,n5.default)(r)]);}).set("font").set("fontStyle").set("fontWeight").set("padding").set("rotate").set("size").set("spiral").set("timeInterval").set("random").set("text").set("on").set("canvas").setAsync("imageMask",h5,o.createMask),o.words([...i]);let s=o.start(),[l,u]=a.size,c=[{x:0,y:0},{x:l,y:u}],{_bounds:f=c,_tags:d,hasImage:h}=s,p=d.map(n=>{var{x:r,y:i,font:a}=n;return Object.assign(Object.assign({},h3(n,["x","y","font"])),{x:r+l/2,y:i+u/2,fontFamily:a});}),[{x:m,y:g},{x:v,y:y}]=f,_={text:"",value:0,opacity:0,fontSize:0};return p.push(Object.assign(Object.assign({},_),{x:h?0:m,y:h?0:g}),Object.assign(Object.assign({},_),{x:h?l:v,y:h?u:y})),p;});function h8(){let n=new Map;return[r=>n.get(r),(r,i)=>n.set(r,i)];}function h7(n){let{min:r,max:i}=n;return[[r[0],r[1]],[i[0],i[1]]];}function h9(n,r,i=.01){let[a,o]=n,[s,l]=r;return a>=s[0]-i&&a<=l[0]+i&&o>=s[1]-i&&o<=l[1]+i;}function pe(n,r,i=.01){let[a,o]=n;return!(h9(a,r,i)&&h9(o,r,i));}function pt(n){return"object"==typeof n?n:(0,eL.parseColor)(n);}function pn(n){let r=n/255;return r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4);}function pr(n,r,i){return .2126*pn(n)+.7152*pn(r)+.0722*pn(i);}function pi(n,r){if(!n||!r||n===r)return 1;let{r:i,g:a,b:o}=n,{r:s,g:l,b:u}=r,c=pr(i,a,o),f=pr(s,l,u);return(Math.max(c,f)+.05)/(Math.min(c,f)+.05);}function pa(n,r){let i=(0,f8.default)(r,r=>pi(n,pt(r)));return r[i];}h6.props={};let po=(n,r)=>{let[[i,a],[o,s]]=r,[[l,u],[c,f]]=n,d=0,h=0;return l<i?d=i-l:c>o&&(d=o-c),u<a?h=a-u:f>s&&(h=s-f),[d,h];};function ps(n){var r;let i=n.getAnimations();if(!i||0===i.length)return(0,rJ.bboxOf)(n);let a=n.cloneNode(!0);a.style.visibility="hidden",i.forEach(n=>{let r=n.effect.getKeyframes();r&&r.length>0&&a.attr(r[r.length-1]);}),null===(r=n.parentNode)||void 0===r||r.appendChild(a);let o=(0,rJ.bboxOf)(a);return a.destroy(),o;}var pl=i("4b38a8f2"),pu=ew._(pl),pc=i("f4e6e17e"),pf=eS._(pc),pd=i("90e71d1b"),ph=i("27ee04b2"),pp=i("2713d2ad"),pm=ew._(pp),pg=new pd.Adder,pv=new pd.Adder,py={point:pm.default,lineStart:pm.default,lineEnd:pm.default,polygonStart:function(){py.lineStart=p_,py.lineEnd=pE;},polygonEnd:function(){py.lineStart=py.lineEnd=py.point=pm.default,pg.add((0,ph.abs)(pv)),pv=new pd.Adder;},result:function(){var n=pg/2;return pg=new pd.Adder,n;}};function p_(){py.point=pb;}function pb(n,r){py.point=px,es=eu=n,el=ec=r;}function px(n,r){pv.add(ec*n-eu*r),eu=n,ec=r;}function pE(){px(es,el);}var pw=i("f3a5fe38"),pS=ew._(pw),pT=0,pA=0,pC=0,pO=0,pM=0,pR=0,pP=0,pk=0,pI=0,pL={point:pN,lineStart:pD,lineEnd:pj,polygonStart:function(){pL.lineStart=pz,pL.lineEnd=pU;},polygonEnd:function(){pL.point=pN,pL.lineStart=pD,pL.lineEnd=pj;},result:function(){var n=pI?[pP/pI,pk/pI]:pR?[pO/pR,pM/pR]:pC?[pT/pC,pA/pC]:[NaN,NaN];return pT=pA=pC=pO=pM=pR=pP=pk=pI=0,n;}};function pN(n,r){pT+=n,pA+=r,++pC;}function pD(){pL.point=pF;}function pF(n,r){pL.point=pB,pN(eh=n,ep=r);}function pB(n,r){var i=n-eh,a=r-ep,o=(0,ph.sqrt)(i*i+a*a);pO+=o*(eh+n)/2,pM+=o*(ep+r)/2,pR+=o,pN(eh=n,ep=r);}function pj(){pL.point=pN;}function pz(){pL.point=pV;}function pU(){pG(ef,ed);}function pV(n,r){pL.point=pG,pN(ef=eh=n,ed=ep=r);}function pG(n,r){var i=n-eh,a=r-ep,o=(0,ph.sqrt)(i*i+a*a);pO+=o*(eh+n)/2,pM+=o*(ep+r)/2,pR+=o,pP+=(o=ep*n-eh*r)*(eh+n),pk+=o*(ep+r),pI+=3*o,pN(eh=n,ep=r);}function pH(n){this._context=n;}pH.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this;},polygonStart:function(){this._line=0;},polygonEnd:function(){this._line=NaN;},lineStart:function(){this._point=0;},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN;},point:function(n,r){switch(this._point){case 0:this._context.moveTo(n,r),this._point=1;break;case 1:this._context.lineTo(n,r);break;default:this._context.moveTo(n+this._radius,r),this._context.arc(n,r,this._radius,0,ph.tau);}},result:pm.default};var pW=new pd.Adder,pX={point:pm.default,lineStart:function(){pX.point=pq;},lineEnd:function(){em&&p$(eg,ev),pX.point=pm.default;},polygonStart:function(){em=!0;},polygonEnd:function(){em=null;},result:function(){var n=+pW;return pW=new pd.Adder,n;}};function pq(n,r){pX.point=p$,eg=ey=n,ev=e_=r;}function p$(n,r){ey-=n,e_-=r,pW.add((0,ph.sqrt)(ey*ey+e_*e_)),ey=n,e_=r;}class pY{constructor(n){this._append=null==n?pZ:function(n){let r=Math.floor(n);if(!(r>=0))throw RangeError(`invalid digits: ${n}`);if(r>15)return pZ;if(r!==a){let n=10**r;a=r,o=function(r){let i=1;this._+=r[0];for(let a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i];};}return o;}(n),this._radius=4.5,this._="";}pointRadius(n){return this._radius=+n,this;}polygonStart(){this._line=0;}polygonEnd(){this._line=NaN;}lineStart(){this._point=0;}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN;}point(n,r){switch(this._point){case 0:this._append`M${n},${r}`,this._point=1;break;case 1:this._append`L${n},${r}`;break;default:if(this._append`M${n},${r}`,this._radius!==s||this._append!==o){let n=this._radius,r=this._;this._="",this._append`m0,${n}a${n},${n} 0 1,1 0,${-2*n}a${n},${n} 0 1,1 0,${2*n}z`,s=n,o=this._append,l=this._,this._=r;}this._+=l;}}result(){let n=this._;return this._="",n.length?n:null;}}function pZ(n){let r=1;this._+=n[0];for(let i=n.length;r<i;++r)this._+=arguments[r]+n[r];}var pK=function(n,r){let i=3,a=4.5,o,s;function l(n){return n&&("function"==typeof a&&s.pointRadius(+a.apply(this,arguments)),(0,pf.default)(n,o(s))),s.result();}return l.area=function(n){return(0,pf.default)(n,o(py)),py.result();},l.measure=function(n){return(0,pf.default)(n,o(pX)),pX.result();},l.bounds=function(n){return(0,pf.default)(n,o(pS.default)),pS.default.result();},l.centroid=function(n){return(0,pf.default)(n,o(pL)),pL.result();},l.projection=function(r){return arguments.length?(o=null==r?(n=null,pu.default):(n=r).stream,l):n;},l.context=function(n){return arguments.length?(s=null==n?(r=null,new pY(i)):new pH(r=n),"function"!=typeof a&&s.pointRadius(a),l):r;},l.pointRadius=function(n){return arguments.length?(a="function"==typeof n?n:(s.pointRadius(+n),+n),l):a;},l.digits=function(n){if(!arguments.length)return i;if(null==n)i=null;else{let r=Math.floor(n);if(!(r>=0))throw RangeError(`invalid digits: ${n}`);i=r;}return null===r&&(s=new pY(i)),l;},l.projection(n).digits(i).context(r);};function pQ(n,r,i){n=+n,r=+r,i=(o=arguments.length)<2?(r=n,n=0,1):o<3?1:+i;for(var a=-1,o=0|Math.max(0,Math.ceil((r-n)/i)),s=Array(o);++a<o;)s[a]=n+a*i;return s;}function pJ(n,r,i){var a=pQ(n,r-ph.epsilon,i).concat(r);return function(n){return a.map(function(r){return[n,r];});};}function p0(n,r,i){var a=pQ(n,r-ph.epsilon,i).concat(r);return function(n){return a.map(function(r){return[r,n];});};}var p1=i("a48bf6c0"),p2=i("5576b0af"),p3=ew._(p2),p4=i("717030db"),p5=ew._(p4),p6=i("d32b8c24");function p8(n){return(0,ph.abs)(n[0])<=ph.pi?n[0]:(0,ph.sign)(n[0])*(((0,ph.abs)(n[0])+ph.pi)%ph.tau-ph.pi);}var p7=function(n,r){var i=p8(r),a=r[1],o=(0,ph.sin)(a),s=[(0,ph.sin)(i),-(0,ph.cos)(i),0],l=0,u=0,c=new pd.Adder;1===o?a=ph.halfPi+ph.epsilon:-1===o&&(a=-ph.halfPi-ph.epsilon);for(var f=0,d=n.length;f<d;++f)if(p=(h=n[f]).length)for(var h,p,m=h[p-1],g=p8(m),v=m[1]/2+ph.quarterPi,y=(0,ph.sin)(v),_=(0,ph.cos)(v),b=0;b<p;++b,g=E,y=S,_=T,m=x){var x=h[b],E=p8(x),w=x[1]/2+ph.quarterPi,S=(0,ph.sin)(w),T=(0,ph.cos)(w),A=E-g,C=A>=0?1:-1,O=C*A,M=O>ph.pi,R=y*S;if(c.add((0,ph.atan2)(R*C*(0,ph.sin)(O),_*T+R*(0,ph.cos)(O))),l+=M?A+C*ph.tau:A,M^g>=i^E>=i){var P=(0,p6.cartesianCross)((0,p6.cartesian)(m),(0,p6.cartesian)(x));(0,p6.cartesianNormalizeInPlace)(P);var k=(0,p6.cartesianCross)(s,P);(0,p6.cartesianNormalizeInPlace)(k);var I=(M^A>=0?-1:1)*(0,ph.asin)(k[2]);(a>I||a===I&&(P[0]||P[1]))&&(u+=M^A>=0?1:-1);}}return(l<-ph.epsilon||l<ph.epsilon&&c<-ph.epsilon2)^1&u;},p9=i("777963a0"),me=ew._(p9),mt=function(n,r,i,a){return function(o){var s,l,u,c=r(o),f=(0,p3.default)(),d=r(f),h=!1,p={point:m,lineStart:v,lineEnd:y,polygonStart:function(){p.point=_,p.lineStart=b,p.lineEnd=x,l=[],s=[];},polygonEnd:function(){p.point=m,p.lineStart=v,p.lineEnd=y,l=(0,me.default)(l);var n=p7(s,a);l.length?(h||(o.polygonStart(),h=!0),(0,p5.default)(l,mr,n,i,o)):n&&(h||(o.polygonStart(),h=!0),o.lineStart(),i(null,null,1,o),o.lineEnd()),h&&(o.polygonEnd(),h=!1),l=s=null;},sphere:function(){o.polygonStart(),o.lineStart(),i(null,null,1,o),o.lineEnd(),o.polygonEnd();}};function m(r,i){n(r,i)&&o.point(r,i);}function g(n,r){c.point(n,r);}function v(){p.point=g,c.lineStart();}function y(){p.point=m,c.lineEnd();}function _(n,r){u.push([n,r]),d.point(n,r);}function b(){d.lineStart(),u=[];}function x(){_(u[0][0],u[0][1]),d.lineEnd();var n,r,i,a,c=d.clean(),p=f.result(),m=p.length;if(u.pop(),s.push(u),u=null,m){if(1&c){if((r=(i=p[0]).length-1)>0){for(h||(o.polygonStart(),h=!0),o.lineStart(),n=0;n<r;++n)o.point((a=i[n])[0],a[1]);o.lineEnd();}return;}m>1&&2&c&&p.push(p.pop().concat(p.shift())),l.push(p.filter(mn));}}return p;};};function mn(n){return n.length>1;}function mr(n,r){return((n=n.x)[0]<0?n[1]-ph.halfPi-ph.epsilon:ph.halfPi-n[1])-((r=r.x)[0]<0?r[1]-ph.halfPi-ph.epsilon:ph.halfPi-r[1]);}var mi=mt(function(){return!0;},function(n){var r,i=NaN,a=NaN,o=NaN;return{lineStart:function(){n.lineStart(),r=1;},point:function(s,l){var u,c,f,d,h,p,m=s>0?ph.pi:-ph.pi,g=(0,ph.abs)(s-i);(0,ph.abs)(g-ph.pi)<ph.epsilon?(n.point(i,a=(a+l)/2>0?ph.halfPi:-ph.halfPi),n.point(o,a),n.lineEnd(),n.lineStart(),n.point(m,a),n.point(s,a),r=0):o!==m&&g>=ph.pi&&((0,ph.abs)(i-o)<ph.epsilon&&(i-=o*ph.epsilon),(0,ph.abs)(s-m)<ph.epsilon&&(s-=m*ph.epsilon),u=i,c=a,f=s,p=(0,ph.sin)(u-f),a=(0,ph.abs)(p)>ph.epsilon?(0,ph.atan)(((0,ph.sin)(c)*(h=(0,ph.cos)(l))*(0,ph.sin)(f)-(0,ph.sin)(l)*(d=(0,ph.cos)(c))*(0,ph.sin)(u))/(d*h*p)):(c+l)/2,n.point(o,a),n.lineEnd(),n.lineStart(),n.point(m,a),r=0),n.point(i=s,a=l),o=m;},lineEnd:function(){n.lineEnd(),i=a=NaN;},clean:function(){return 2-r;}};},function(n,r,i,a){var o;if(null==n)o=i*ph.halfPi,a.point(-ph.pi,o),a.point(0,o),a.point(ph.pi,o),a.point(ph.pi,0),a.point(ph.pi,-o),a.point(0,-o),a.point(-ph.pi,-o),a.point(-ph.pi,0),a.point(-ph.pi,o);else if((0,ph.abs)(n[0]-r[0])>ph.epsilon){var s=n[0]<r[0]?ph.pi:-ph.pi;o=i*s/2,a.point(-s,o),a.point(0,o),a.point(s,o);}else a.point(r[0],r[1]);},[-ph.pi,-ph.halfPi]),ma=function(n,r){function i(i,a){return r((i=n(i,a))[0],i[1]);}return n.invert&&r.invert&&(i.invert=function(i,a){return(i=r.invert(i,a))&&n.invert(i[0],i[1]);}),i;};function mo(n,r){return(0,ph.abs)(n)>ph.pi&&(n-=Math.round(n/ph.tau)*ph.tau),[n,r];}function ms(n,r,i){return(n%=ph.tau)?r||i?ma(mu(n),mc(r,i)):mu(n):r||i?mc(r,i):mo;}function ml(n){return function(r,i){return r+=n,(0,ph.abs)(r)>ph.pi&&(r-=Math.round(r/ph.tau)*ph.tau),[r,i];};}function mu(n){var r=ml(n);return r.invert=ml(-n),r;}function mc(n,r){var i=(0,ph.cos)(n),a=(0,ph.sin)(n),o=(0,ph.cos)(r),s=(0,ph.sin)(r);function l(n,r){var l=(0,ph.cos)(r),u=(0,ph.cos)(n)*l,c=(0,ph.sin)(n)*l,f=(0,ph.sin)(r),d=f*i+u*a;return[(0,ph.atan2)(c*o-d*s,u*i-f*a),(0,ph.asin)(d*o+c*s)];}return l.invert=function(n,r){var l=(0,ph.cos)(r),u=(0,ph.cos)(n)*l,c=(0,ph.sin)(n)*l,f=(0,ph.sin)(r),d=f*o-c*s;return[(0,ph.atan2)(c*o+f*s,u*i+d*a),(0,ph.asin)(d*i-u*a)];},l;}mo.invert=mo;var mf=function(n){function r(r){return r=n(r[0]*ph.radians,r[1]*ph.radians),r[0]*=ph.degrees,r[1]*=ph.degrees,r;}return n=ms(n[0]*ph.radians,n[1]*ph.radians,n.length>2?n[2]*ph.radians:0),r.invert=function(r){return r=n.invert(r[0]*ph.radians,r[1]*ph.radians),r[0]*=ph.degrees,r[1]*=ph.degrees,r;},r;};function md(n,r){r=(0,p6.cartesian)(r),r[0]-=n,(0,p6.cartesianNormalizeInPlace)(r);var i=(0,ph.acos)(-r[1]);return((0>-r[2]?-i:i)+ph.tau-ph.epsilon)%ph.tau;}var mh=i("5ff15420"),mp=ew._(mh),mm=function(n){var r=(0,ph.cos)(n),i=2*ph.radians,a=r>0,o=(0,ph.abs)(r)>ph.epsilon;function s(n,i){return(0,ph.cos)(n)*(0,ph.cos)(i)>r;}function l(n,i,a){var o=(0,p6.cartesian)(n),s=(0,p6.cartesian)(i),l=[1,0,0],u=(0,p6.cartesianCross)(o,s),c=(0,p6.cartesianDot)(u,u),f=u[0],d=c-f*f;if(!d)return!a&&n;var h=(0,p6.cartesianCross)(l,u),p=(0,p6.cartesianScale)(l,r*c/d),m=(0,p6.cartesianScale)(u,-r*f/d);(0,p6.cartesianAddInPlace)(p,m);var g=(0,p6.cartesianDot)(p,h),v=(0,p6.cartesianDot)(h,h),y=g*g-v*((0,p6.cartesianDot)(p,p)-1);if(!(y<0)){var _=(0,ph.sqrt)(y),b=(0,p6.cartesianScale)(h,(-g-_)/v);if((0,p6.cartesianAddInPlace)(b,p),b=(0,p6.spherical)(b),!a)return b;var x,E=n[0],w=i[0],S=n[1],T=i[1];w<E&&(x=E,E=w,w=x);var A=w-E,C=(0,ph.abs)(A-ph.pi)<ph.epsilon,O=C||A<ph.epsilon;if(!C&&T<S&&(x=S,S=T,T=x),O?C?S+T>0^b[1]<((0,ph.abs)(b[0]-E)<ph.epsilon?S:T):S<=b[1]&&b[1]<=T:A>ph.pi^(E<=b[0]&&b[0]<=w)){var M=(0,p6.cartesianScale)(h,(-g+_)/v);return(0,p6.cartesianAddInPlace)(M,p),[b,(0,p6.spherical)(M)];}}}function u(r,i){var o=a?n:ph.pi-n,s=0;return r<-o?s|=1:r>o&&(s|=2),i<-o?s|=4:i>o&&(s|=8),s;}return mt(s,function(n){var r,i,c,f,d;return{lineStart:function(){f=c=!1,d=1;},point:function(h,p){var m,g,v=[h,p],y=s(h,p),_=a?y?0:u(h,p):y?u(h+(h<0?ph.pi:-ph.pi),p):0;!r&&(f=c=y)&&n.lineStart(),y!==c&&(!(g=l(r,v))||(0,mp.default)(r,g)||(0,mp.default)(v,g))&&(v[2]=1),y!==c?(d=0,y?(n.lineStart(),g=l(v,r),n.point(g[0],g[1])):(g=l(r,v),n.point(g[0],g[1],2),n.lineEnd()),r=g):o&&r&&a^y&&!(_&i)&&(m=l(v,r,!0))&&(d=0,a?(n.lineStart(),n.point(m[0][0],m[0][1]),n.point(m[1][0],m[1][1]),n.lineEnd()):(n.point(m[1][0],m[1][1]),n.lineEnd(),n.lineStart(),n.point(m[0][0],m[0][1],3))),!y||r&&(0,mp.default)(r,v)||n.point(v[0],v[1]),r=v,c=y,i=_;},lineEnd:function(){c&&n.lineEnd(),r=null;},clean:function(){return d|(f&&c)<<1;}};},function(r,a,o,s){!function(n,r,i,a,o,s){if(i){var l=(0,ph.cos)(r),u=(0,ph.sin)(r),c=a*i;null==o?(o=r+a*ph.tau,s=r-c/2):(o=md(l,o),s=md(l,s),(a>0?o<s:o>s)&&(o+=a*ph.tau));for(var f,d=o;a>0?d>s:d<s;d-=c)f=(0,p6.spherical)([l,-u*(0,ph.cos)(d),-u*(0,ph.sin)(d)]),n.point(f[0],f[1]);}}(s,n,i,o,r,a);},a?[0,-n]:[-ph.pi,n-ph.pi]);},mg=function(n,r,i,a,o,s){var l,u=n[0],c=n[1],f=r[0],d=r[1],h=0,p=1,m=f-u,g=d-c;if(l=i-u,m||!(l>0)){if(l/=m,m<0){if(l<h)return;l<p&&(p=l);}else if(m>0){if(l>p)return;l>h&&(h=l);}if(l=o-u,m||!(l<0)){if(l/=m,m<0){if(l>p)return;l>h&&(h=l);}else if(m>0){if(l<h)return;l<p&&(p=l);}if(l=a-c,g||!(l>0)){if(l/=g,g<0){if(l<h)return;l<p&&(p=l);}else if(g>0){if(l>p)return;l>h&&(h=l);}if(l=s-c,g||!(l<0)){if(l/=g,g<0){if(l>p)return;l>h&&(h=l);}else if(g>0){if(l<h)return;l<p&&(p=l);}return h>0&&(n[0]=u+h*m,n[1]=c+h*g),p<1&&(r[0]=u+p*m,r[1]=c+p*g),!0;}}}}};function mv(n,r,i,a){function o(o,s){return n<=o&&o<=i&&r<=s&&s<=a;}function s(o,s,u,f){var d=0,h=0;if(null==o||(d=l(o,u))!==(h=l(s,u))||0>c(o,s)^u>0)do f.point(0===d||3===d?n:i,d>1?a:r);while((d=(d+u+4)%4)!==h)else f.point(s[0],s[1]);}function l(a,o){return(0,ph.abs)(a[0]-n)<ph.epsilon?o>0?0:3:(0,ph.abs)(a[0]-i)<ph.epsilon?o>0?2:1:(0,ph.abs)(a[1]-r)<ph.epsilon?o>0?1:0:o>0?3:2;}function u(n,r){return c(n.x,r.x);}function c(n,r){var i=l(n,1),a=l(r,1);return i!==a?i-a:0===i?r[1]-n[1]:1===i?n[0]-r[0]:2===i?n[1]-r[1]:r[0]-n[0];}return function(l){var c,f,d,h,p,m,g,v,y,_,b,x=l,E=(0,p3.default)(),w={point:S,lineStart:function(){w.point=T,f&&f.push(d=[]),_=!0,y=!1,g=v=NaN;},lineEnd:function(){c&&(T(h,p),m&&y&&E.rejoin(),c.push(E.result())),w.point=S,y&&x.lineEnd();},polygonStart:function(){x=E,c=[],f=[],b=!0;},polygonEnd:function(){var r=function(){for(var r=0,i=0,o=f.length;i<o;++i)for(var s,l,u=f[i],c=1,d=u.length,h=u[0],p=h[0],m=h[1];c<d;++c)s=p,l=m,p=(h=u[c])[0],m=h[1],l<=a?m>a&&(p-s)*(a-l)>(m-l)*(n-s)&&++r:m<=a&&(p-s)*(a-l)<(m-l)*(n-s)&&--r;return r;}(),i=b&&r,o=(c=(0,me.default)(c)).length;(i||o)&&(l.polygonStart(),i&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),o&&(0,p5.default)(c,u,r,s,l),l.polygonEnd()),x=l,c=f=d=null;}};function S(n,r){o(n,r)&&x.point(n,r);}function T(s,l){var u=o(s,l);if(f&&d.push([s,l]),_)h=s,p=l,m=u,_=!1,u&&(x.lineStart(),x.point(s,l));else if(u&&y)x.point(s,l);else{var c=[g=Math.max(-1e9,Math.min(1e9,g)),v=Math.max(-1e9,Math.min(1e9,v))],E=[s=Math.max(-1e9,Math.min(1e9,s)),l=Math.max(-1e9,Math.min(1e9,l))];mg(c,E,n,r,i,a)?(y||(x.lineStart(),x.point(c[0],c[1])),x.point(E[0],E[1]),u||x.lineEnd(),b=!1):u&&(x.lineStart(),x.point(s,l),b=!1);}g=s,v=l,y=u;}return w;};}var m_=i("19503730");function mb(n,r,i){var a=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),null!=a&&n.clipExtent(null),(0,pf.default)(i,n.stream(pS.default)),r(pS.default.result()),null!=a&&n.clipExtent(a),n;}function mx(n,r,i){return mb(n,function(i){var a=r[1][0]-r[0][0],o=r[1][1]-r[0][1],s=Math.min(a/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),l=+r[0][0]+(a-s*(i[1][0]+i[0][0]))/2,u=+r[0][1]+(o-s*(i[1][1]+i[0][1]))/2;n.scale(150*s).translate([l,u]);},i);}function mE(n,r,i){return mx(n,[[0,0],r],i);}function mw(n,r,i){return mb(n,function(i){var a=+r,o=a/(i[1][0]-i[0][0]),s=(a-o*(i[1][0]+i[0][0]))/2,l=-o*i[0][1];n.scale(150*o).translate([s,l]);},i);}function mS(n,r,i){return mb(n,function(i){var a=+r,o=a/(i[1][1]-i[0][1]),s=-o*i[0][0],l=(a-o*(i[1][1]+i[0][1]))/2;n.scale(150*o).translate([s,l]);},i);}var mT=(0,ph.cos)(30*ph.radians),mA=function(n,r){return+r?function(n,r){function i(a,o,s,l,u,c,f,d,h,p,m,g,v,y){var _=f-a,b=d-o,x=_*_+b*b;if(x>4*r&&v--){var E=l+p,w=u+m,S=c+g,T=(0,ph.sqrt)(E*E+w*w+S*S),A=(0,ph.asin)(S/=T),C=(0,ph.abs)((0,ph.abs)(S)-1)<ph.epsilon||(0,ph.abs)(s-h)<ph.epsilon?(s+h)/2:(0,ph.atan2)(w,E),O=n(C,A),M=O[0],R=O[1],P=M-a,k=R-o,I=b*P-_*k;(I*I/x>r||(0,ph.abs)((_*P+b*k)/x-.5)>.3||l*p+u*m+c*g<mT)&&(i(a,o,s,l,u,c,M,R,C,E/=T,w/=T,S,v,y),y.point(M,R),i(M,R,C,E,w,S,f,d,h,p,m,g,v,y));}}return function(r){var a,o,s,l,u,c,f,d,h,p,m,g,v={point:y,lineStart:_,lineEnd:x,polygonStart:function(){r.polygonStart(),v.lineStart=E;},polygonEnd:function(){r.polygonEnd(),v.lineStart=_;}};function y(i,a){i=n(i,a),r.point(i[0],i[1]);}function _(){d=NaN,v.point=b,r.lineStart();}function b(a,o){var s=(0,p6.cartesian)([a,o]),l=n(a,o);i(d,h,f,p,m,g,d=l[0],h=l[1],f=a,p=s[0],m=s[1],g=s[2],16,r),r.point(d,h);}function x(){v.point=y,r.lineEnd();}function E(){_(),v.point=w,v.lineEnd=S;}function w(n,r){b(a=n,r),o=d,s=h,l=p,u=m,c=g,v.point=b;}function S(){i(d,h,f,p,m,g,o,s,a,l,u,c,16,r),v.lineEnd=x,x();}return v;};}(n,r):(0,m_.transformer)({point:function(r,i){r=n(r,i),this.stream.point(r[0],r[1]);}});},mC=(0,m_.transformer)({point:function(n,r){this.stream.point(n*ph.radians,r*ph.radians);}});function mO(n,r,i,a,o,s){if(!s)return function(n,r,i,a,o){function s(s,l){return[r+n*(s*=a),i-n*(l*=o)];}return s.invert=function(s,l){return[(s-r)/n*a,(i-l)/n*o];},s;}(n,r,i,a,o);var l=(0,ph.cos)(s),u=(0,ph.sin)(s),c=l*n,f=u*n,d=l/n,h=u/n,p=(u*i-l*r)/n,m=(u*r+l*i)/n;function g(n,s){return[c*(n*=a)-f*(s*=o)+r,i-f*n-c*s];}return g.invert=function(n,r){return[a*(d*n-h*r+p),o*(m-h*n-d*r)];},g;}function mM(n){return mR(function(){return n;})();}function mR(n){var r,i,a,o,s,l,u,c,f,d,h=150,p=480,m=250,g=0,v=0,y=0,_=0,b=0,x=0,E=1,w=1,S=null,T=mi,A=null,C=pu.default,O=.5;function M(n){return c(n[0]*ph.radians,n[1]*ph.radians);}function R(n){return(n=c.invert(n[0],n[1]))&&[n[0]*ph.degrees,n[1]*ph.degrees];}function P(){var n=mO(h,0,0,E,w,x).apply(null,r(g,v)),a=mO(h,p-n[0],m-n[1],E,w,x);return i=ms(y,_,b),u=ma(r,a),c=ma(i,u),l=mA(u,O),k();}function k(){return f=d=null,M;}return M.stream=function(n){var r;return f&&d===n?f:f=mC((r=i,(0,m_.transformer)({point:function(n,i){var a=r(n,i);return this.stream.point(a[0],a[1]);}}))(T(l(C(d=n)))));},M.preclip=function(n){return arguments.length?(T=n,S=void 0,k()):T;},M.postclip=function(n){return arguments.length?(C=n,A=a=o=s=null,k()):C;},M.clipAngle=function(n){return arguments.length?(T=+n?mm(S=n*ph.radians):(S=null,mi),k()):S*ph.degrees;},M.clipExtent=function(n){return arguments.length?(C=null==n?(A=a=o=s=null,pu.default):mv(A=+n[0][0],a=+n[0][1],o=+n[1][0],s=+n[1][1]),k()):null==A?null:[[A,a],[o,s]];},M.scale=function(n){return arguments.length?(h=+n,P()):h;},M.translate=function(n){return arguments.length?(p=+n[0],m=+n[1],P()):[p,m];},M.center=function(n){return arguments.length?(g=n[0]%360*ph.radians,v=n[1]%360*ph.radians,P()):[g*ph.degrees,v*ph.degrees];},M.rotate=function(n){return arguments.length?(y=n[0]%360*ph.radians,_=n[1]%360*ph.radians,b=n.length>2?n[2]%360*ph.radians:0,P()):[y*ph.degrees,_*ph.degrees,b*ph.degrees];},M.angle=function(n){return arguments.length?(x=n%360*ph.radians,P()):x*ph.degrees;},M.reflectX=function(n){return arguments.length?(E=n?-1:1,P()):E<0;},M.reflectY=function(n){return arguments.length?(w=n?-1:1,P()):w<0;},M.precision=function(n){return arguments.length?(l=mA(u,O=n*n),k()):(0,ph.sqrt)(O);},M.fitExtent=function(n,r){return mx(M,n,r);},M.fitSize=function(n,r){return mE(M,n,r);},M.fitWidth=function(n,r){return mw(M,n,r);},M.fitHeight=function(n,r){return mS(M,n,r);},function(){return r=n.apply(this,arguments),M.invert=r.invert&&R,P();};}function mP(n){var r=0,i=ph.pi/3,a=mR(n),o=a(r,i);return o.parallels=function(n){return arguments.length?a(r=n[0]*ph.radians,i=n[1]*ph.radians):[r*ph.degrees,i*ph.degrees];},o;}function mk(n,r){var i=(0,ph.sin)(n),a=(i+(0,ph.sin)(r))/2;if((0,ph.abs)(a)<ph.epsilon)return function(n){var r=(0,ph.cos)(n);function i(n,i){return[n*r,(0,ph.sin)(i)/r];}return i.invert=function(n,i){return[n/r,(0,ph.asin)(i*r)];},i;}(n);var o=1+i*(2*a-i),s=(0,ph.sqrt)(o)/a;function l(n,r){var i=(0,ph.sqrt)(o-2*a*(0,ph.sin)(r))/a;return[i*(0,ph.sin)(n*=a),s-i*(0,ph.cos)(n)];}return l.invert=function(n,r){var i=s-r,l=(0,ph.atan2)(n,(0,ph.abs)(i))*(0,ph.sign)(i);return i*a<0&&(l-=ph.pi*(0,ph.sign)(n)*(0,ph.sign)(i)),[l/a,(0,ph.asin)((o-(n*n+i*i)*a*a)/(2*a))];},l;}var mI=function(){return mP(mk).scale(155.424).center([0,33.6442]);},mL=function(){return mI().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7]);},mN=function(){var n,r,i,a,o,s,l=mL(),u=mI().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=mI().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f={point:function(n,r){s=[n,r];}};function d(n){var r=n[0],l=n[1];return s=null,i.point(r,l),s||(a.point(r,l),s)||(o.point(r,l),s);}function h(){return n=r=null,d;}return d.invert=function(n){var r=l.scale(),i=l.translate(),a=(n[0]-i[0])/r,o=(n[1]-i[1])/r;return(o>=.12&&o<.234&&a>=-.425&&a<-.214?u:o>=.166&&o<.234&&a>=-.214&&a<-.115?c:l).invert(n);},d.stream=function(i){var a,o;return n&&r===i?n:(o=(a=[l.stream(r=i),u.stream(i),c.stream(i)]).length,n={point:function(n,r){for(var i=-1;++i<o;)a[i].point(n,r);},sphere:function(){for(var n=-1;++n<o;)a[n].sphere();},lineStart:function(){for(var n=-1;++n<o;)a[n].lineStart();},lineEnd:function(){for(var n=-1;++n<o;)a[n].lineEnd();},polygonStart:function(){for(var n=-1;++n<o;)a[n].polygonStart();},polygonEnd:function(){for(var n=-1;++n<o;)a[n].polygonEnd();}});},d.precision=function(n){return arguments.length?(l.precision(n),u.precision(n),c.precision(n),h()):l.precision();},d.scale=function(n){return arguments.length?(l.scale(n),u.scale(.35*n),c.scale(n),d.translate(l.translate())):l.scale();},d.translate=function(n){if(!arguments.length)return l.translate();var r=l.scale(),s=+n[0],d=+n[1];return i=l.translate(n).clipExtent([[s-.455*r,d-.238*r],[s+.455*r,d+.238*r]]).stream(f),a=u.translate([s-.307*r,d+.201*r]).clipExtent([[s-.425*r+ph.epsilon,d+.12*r+ph.epsilon],[s-.214*r-ph.epsilon,d+.234*r-ph.epsilon]]).stream(f),o=c.translate([s-.205*r,d+.212*r]).clipExtent([[s-.214*r+ph.epsilon,d+.166*r+ph.epsilon],[s-.115*r-ph.epsilon,d+.234*r-ph.epsilon]]).stream(f),h();},d.fitExtent=function(n,r){return mx(d,n,r);},d.fitSize=function(n,r){return mE(d,n,r);},d.fitWidth=function(n,r){return mw(d,n,r);},d.fitHeight=function(n,r){return mS(d,n,r);},d.scale(1070);};function mD(n){return function(r,i){var a=(0,ph.cos)(r),o=(0,ph.cos)(i),s=n(a*o);return s===1/0?[2,0]:[s*o*(0,ph.sin)(r),s*(0,ph.sin)(i)];};}function mF(n){return function(r,i){var a=(0,ph.sqrt)(r*r+i*i),o=n(a),s=(0,ph.sin)(o),l=(0,ph.cos)(o);return[(0,ph.atan2)(r*s,a*l),(0,ph.asin)(a&&i*s/a)];};}var mB=mD(function(n){return(0,ph.sqrt)(2/(1+n));});mB.invert=mF(function(n){return 2*(0,ph.asin)(n/2);});var mj=function(){return mM(mB).scale(124.75).clipAngle(179.999);},mz=mD(function(n){return(n=(0,ph.acos)(n))&&n/(0,ph.sin)(n);});mz.invert=mF(function(n){return n;});var mU=function(){return mM(mz).scale(79.4188).clipAngle(179.999);};function mV(n,r){return[n,(0,ph.log)((0,ph.tan)((ph.halfPi+r)/2))];}mV.invert=function(n,r){return[n,2*(0,ph.atan)((0,ph.exp)(r))-ph.halfPi];};var mG=function(){return mH(mV).scale(961/ph.tau);};function mH(n){var r,i,a,o=mM(n),s=o.center,l=o.scale,u=o.translate,c=o.clipExtent,f=null;function d(){var s=ph.pi*l(),u=o(mf(o.rotate()).invert([0,0]));return c(null==f?[[u[0]-s,u[1]-s],[u[0]+s,u[1]+s]]:n===mV?[[Math.max(u[0]-s,f),r],[Math.min(u[0]+s,i),a]]:[[f,Math.max(u[1]-s,r)],[i,Math.min(u[1]+s,a)]]);}return o.scale=function(n){return arguments.length?(l(n),d()):l();},o.translate=function(n){return arguments.length?(u(n),d()):u();},o.center=function(n){return arguments.length?(s(n),d()):s();},o.clipExtent=function(n){return arguments.length?(null==n?f=r=i=a=null:(f=+n[0][0],r=+n[0][1],i=+n[1][0],a=+n[1][1]),d()):null==f?null:[[f,r],[i,a]];},d();}function mW(n){return(0,ph.tan)((ph.halfPi+n)/2);}function mX(n,r){var i=(0,ph.cos)(n),a=n===r?(0,ph.sin)(n):(0,ph.log)(i/(0,ph.cos)(r))/(0,ph.log)(mW(r)/mW(n)),o=i*(0,ph.pow)(mW(n),a)/a;if(!a)return mV;function s(n,r){o>0?r<-ph.halfPi+ph.epsilon&&(r=-ph.halfPi+ph.epsilon):r>ph.halfPi-ph.epsilon&&(r=ph.halfPi-ph.epsilon);var i=o/(0,ph.pow)(mW(r),a);return[i*(0,ph.sin)(a*n),o-i*(0,ph.cos)(a*n)];}return s.invert=function(n,r){var i=o-r,s=(0,ph.sign)(a)*(0,ph.sqrt)(n*n+i*i),l=(0,ph.atan2)(n,(0,ph.abs)(i))*(0,ph.sign)(i);return i*a<0&&(l-=ph.pi*(0,ph.sign)(n)*(0,ph.sign)(i)),[l/a,2*(0,ph.atan)((0,ph.pow)(o/s,1/a))-ph.halfPi];},s;}var mq=function(){return mP(mX).scale(109.5).parallels([30,30]);};function m$(n,r){return[n,r];}m$.invert=m$;var mY=function(){return mM(m$).scale(152.63);};function mZ(n,r){var i=(0,ph.cos)(n),a=n===r?(0,ph.sin)(n):(i-(0,ph.cos)(r))/(r-n),o=i/a+n;if((0,ph.abs)(a)<ph.epsilon)return m$;function s(n,r){var i=o-r,s=a*n;return[i*(0,ph.sin)(s),o-i*(0,ph.cos)(s)];}return s.invert=function(n,r){var i=o-r,s=(0,ph.atan2)(n,(0,ph.abs)(i))*(0,ph.sign)(i);return i*a<0&&(s-=ph.pi*(0,ph.sign)(n)*(0,ph.sign)(i)),[s/a,o-(0,ph.sign)(a)*(0,ph.sqrt)(n*n+i*i)];},s;}var mK=function(){return mP(mZ).scale(131.154).center([0,13.9389]);},mQ=(0,ph.sqrt)(3)/2;function mJ(n,r){var i=(0,ph.asin)(mQ*(0,ph.sin)(r)),a=i*i,o=a*a*a;return[n*(0,ph.cos)(i)/(mQ*(1.340264+-.24331799999999998*a+o*(.0062510000000000005+.034164*a))),i*(1.340264+-.081106*a+o*(893e-6+.003796*a))];}mJ.invert=function(n,r){for(var i,a,o=r,s=o*o,l=s*s*s,u=0;u<12&&(a=o*(1.340264+-.081106*s+l*(893e-6+.003796*s))-r,o-=i=a/(1.340264+-.24331799999999998*s+l*(.0062510000000000005+.034164*s)),l=(s=o*o)*s*s,!((0,ph.abs)(i)<ph.epsilon2));++u);return[mQ*n*(1.340264+-.24331799999999998*s+l*(.0062510000000000005+.034164*s))/(0,ph.cos)(o),(0,ph.asin)((0,ph.sin)(o)/mQ)];};var m0=function(){return mM(mJ).scale(177.158);};function m1(n,r){var i=(0,ph.cos)(r),a=(0,ph.cos)(n)*i;return[i*(0,ph.sin)(n)/a,(0,ph.sin)(r)/a];}m1.invert=mF(ph.atan);var m2=function(){return mM(m1).scale(144.049).clipAngle(60);},m3=function(){var n,r,i,a,o,s,l,u=1,c=0,f=0,d=1,h=1,p=0,m=null,g=1,v=1,y=(0,m_.transformer)({point:function(n,r){var i=x([n,r]);this.stream.point(i[0],i[1]);}}),_=pu.default;function b(){return g=u*d,v=u*h,s=l=null,x;}function x(i){var a=i[0]*g,o=i[1]*v;if(p){var s=o*n-a*r;a=a*n+o*r,o=s;}return[a+c,o+f];}return x.invert=function(i){var a=i[0]-c,o=i[1]-f;if(p){var s=o*n+a*r;a=a*n-o*r,o=s;}return[a/g,o/v];},x.stream=function(n){return s&&l===n?s:s=y(_(l=n));},x.postclip=function(n){return arguments.length?(_=n,m=i=a=o=null,b()):_;},x.clipExtent=function(n){return arguments.length?(_=null==n?(m=i=a=o=null,pu.default):mv(m=+n[0][0],i=+n[0][1],a=+n[1][0],o=+n[1][1]),b()):null==m?null:[[m,i],[a,o]];},x.scale=function(n){return arguments.length?(u=+n,b()):u;},x.translate=function(n){return arguments.length?(c=+n[0],f=+n[1],b()):[c,f];},x.angle=function(i){return arguments.length?(p=i%360*ph.radians,r=(0,ph.sin)(p),n=(0,ph.cos)(p),b()):p*ph.degrees;},x.reflectX=function(n){return arguments.length?(d=n?-1:1,b()):d<0;},x.reflectY=function(n){return arguments.length?(h=n?-1:1,b()):h<0;},x.fitExtent=function(n,r){return mx(x,n,r);},x.fitSize=function(n,r){return mE(x,n,r);},x.fitWidth=function(n,r){return mw(x,n,r);},x.fitHeight=function(n,r){return mS(x,n,r);},x;};function m4(n,r){var i=r*r,a=i*i;return[n*(.8707-.131979*i+a*(-.013791+a*(.003971*i-.001529*a))),r*(1.007226+i*(.015085+a*(-.044475+.028874*i-.005916*a)))];}m4.invert=function(n,r){var i,a=r,o=25;do{var s=a*a,l=s*s;a-=i=(a*(1.007226+s*(.015085+l*(-.044475+.028874*s-.005916*l)))-r)/(1.007226+s*(.045255+l*(-.311325+.259866*s-.005916*11*l)));}while((0,ph.abs)(i)>ph.epsilon&&--o>0)return[n/(.8707+(s=a*a)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),a];};var m5=function(){return mM(m4).scale(175.295);};function m6(n,r){return[(0,ph.cos)(r)*(0,ph.sin)(n),(0,ph.sin)(r)];}m6.invert=mF(ph.asin);var m8=function(){return mM(m6).scale(249.5).clipAngle(90+ph.epsilon);};function m7(n,r){var i=(0,ph.cos)(r),a=1+(0,ph.cos)(n)*i;return[i*(0,ph.sin)(n)/a,(0,ph.sin)(r)/a];}m7.invert=mF(function(n){return 2*(0,ph.atan)(n);});var m9=function(){return mM(m7).scale(250).clipAngle(142);};function ge(n,r){return[(0,ph.log)((0,ph.tan)((ph.halfPi+r)/2)),-n];}ge.invert=function(n,r){return[-r,2*(0,ph.atan)((0,ph.exp)(n))-ph.halfPi];};var gt=function(){var n=mH(ge),r=n.center,i=n.rotate;return n.center=function(n){return arguments.length?r([-n[1],n[0]]):[(n=r())[1],-n[0]];},n.rotate=function(n){return arguments.length?i([n[0],n[1],n.length>2?n[2]+90:90]):[(n=i())[0],n[1],n[2]-90];},i([0,0,90]).scale(159.155);},gn={};i.e(gn,{geoAlbers:function(){return mL;},geoAlbersUsa:function(){return mN;},geoAzimuthalEqualArea:function(){return mj;},geoAzimuthalEqualAreaRaw:function(){return mB;},geoAzimuthalEquidistant:function(){return mU;},geoAzimuthalEquidistantRaw:function(){return mz;},geoConicConformal:function(){return mq;},geoConicConformalRaw:function(){return mX;},geoConicEqualArea:function(){return mI;},geoConicEqualAreaRaw:function(){return mk;},geoConicEquidistant:function(){return mK;},geoConicEquidistantRaw:function(){return mZ;},geoEqualEarth:function(){return m0;},geoEqualEarthRaw:function(){return mJ;},geoEquirectangular:function(){return mY;},geoEquirectangularRaw:function(){return m$;},geoGnomonic:function(){return m2;},geoGnomonicRaw:function(){return m1;},geoIdentity:function(){return m3;},geoMercator:function(){return mG;},geoMercatorRaw:function(){return mV;},geoNaturalEarth1:function(){return m5;},geoNaturalEarth1Raw:function(){return m4;},geoOrthographic:function(){return m8;},geoOrthographicRaw:function(){return m6;},geoProjection:function(){return mM;},geoProjectionMutator:function(){return mR;},geoStereographic:function(){return m9;},geoStereographicRaw:function(){return m7;},geoTransverseMercator:function(){return gt;},geoTransverseMercatorRaw:function(){return ge;}});var gr=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};function gi(n){let{data:r}=n;if(Array.isArray(r))return Object.assign(Object.assign({},n),{data:{value:r}});let{type:i}=r;return"graticule10"===i?Object.assign(Object.assign({},n),{data:{value:[(function(){var n,r,i,a,o,s,l,u,c,f,d,h,p=10,m=10,g=90,v=360,y=2.5;function _(){return{type:"MultiLineString",coordinates:b()};}function b(){return pQ((0,ph.ceil)(a/g)*g,i,g).map(d).concat(pQ((0,ph.ceil)(u/v)*v,l,v).map(h)).concat(pQ((0,ph.ceil)(r/p)*p,n,p).filter(function(n){return(0,ph.abs)(n%g)>ph.epsilon;}).map(c)).concat(pQ((0,ph.ceil)(s/m)*m,o,m).filter(function(n){return(0,ph.abs)(n%v)>ph.epsilon;}).map(f));}return _.lines=function(){return b().map(function(n){return{type:"LineString",coordinates:n};});},_.outline=function(){return{type:"Polygon",coordinates:[d(a).concat(h(l).slice(1),d(i).reverse().slice(1),h(u).reverse().slice(1))]};},_.extent=function(n){return arguments.length?_.extentMajor(n).extentMinor(n):_.extentMinor();},_.extentMajor=function(n){return arguments.length?(a=+n[0][0],i=+n[1][0],u=+n[0][1],l=+n[1][1],a>i&&(n=a,a=i,i=n),u>l&&(n=u,u=l,l=n),_.precision(y)):[[a,u],[i,l]];},_.extentMinor=function(i){return arguments.length?(r=+i[0][0],n=+i[1][0],s=+i[0][1],o=+i[1][1],r>n&&(i=r,r=n,n=i),s>o&&(i=s,s=o,o=i),_.precision(y)):[[r,s],[n,o]];},_.step=function(n){return arguments.length?_.stepMajor(n).stepMinor(n):_.stepMinor();},_.stepMajor=function(n){return arguments.length?(g=+n[0],v=+n[1],_):[g,v];},_.stepMinor=function(n){return arguments.length?(p=+n[0],m=+n[1],_):[p,m];},_.precision=function(p){return arguments.length?(y=+p,c=pJ(s,o,90),f=p0(r,n,y),d=pJ(u,l,90),h=p0(a,i,y),_):y;},_.extentMajor([[-180,-90+ph.epsilon],[180,90-ph.epsilon]]).extentMinor([[-180,-80-ph.epsilon],[180,80+ph.epsilon]]);})()()]}}):"sphere"===i?Object.assign(Object.assign({},n),{sphere:!0,data:{value:[{type:"Sphere"}]}}):n;}function ga(n){return"geoPath"===n.type;}let go=()=>n=>{let r;let{children:i,coordinate:a={}}=n;if(!Array.isArray(i))return[];let{type:o="equalEarth"}=a,s=gr(a,["type"]),l=function(n){if("function"==typeof n)return n;let r=gn[`geo${(0,nK.default)(n)}`];if(!r)throw Error(`Unknown coordinate: ${n}`);return r;}(o),u=i.map(gi);return[Object.assign(Object.assign({},n),{type:"view",scale:{x:{type:"identity"},y:{type:"identity"}},axis:!1,coordinate:{type:function(){return[["custom",(n,i,a,o)=>{let c=l();!function(n,r,i,a){let{outline:o=(()=>{let n=r.filter(ga);return n.find(n=>n.sphere)?{type:"Sphere"}:{type:"FeatureCollection",features:n.filter(n=>!n.sphere).flatMap(n=>n.data.value).flatMap(n=>(function(n){if(!n||!n.type)return null;let r={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featureCollection"}[n.type];return r?"geometry"===r?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:n}]}:"feature"===r?{type:"FeatureCollection",features:[n]}:"featureCollection"===r?n:void 0:null;})(n).features)};})()}=a,{size:s="fitExtent"}=a;"fitExtent"===s?function(n,r,i){let{x:a,y:o,width:s,height:l}=i;n.fitExtent([[a,o],[s,l]],r);}(n,o,i):"fitWidth"===s&&function(n,r,i){let{width:a,height:o}=i,[[s,l],[u,c]]=pK(n.fitWidth(a,r)).bounds(r),f=Math.ceil(c-l),d=Math.min(Math.ceil(u-s),f),h=n.scale()*(d-1)/d,[p,m]=n.translate();n.scale(h).translate([p,m+(o-f)/2]).precision(.2);}(n,o,i);}(c,u,{x:n,y:i,width:a,height:o},s),function(n,r){var i;for(let[a,o]of Object.entries(r))null===(i=n[a])||void 0===i||i.call(n,o);}(c,s),r=pK(c);let f=new sI.Linear({domain:[n,n+a]}),d=new sI.Linear({domain:[i,i+o]}),h=n=>{let r=c(n);if(!r)return[null,null];let[i,a]=r;return[f.map(i),d.map(a)];},p=n=>{if(!n)return null;let[r,i]=n,a=[f.invert(r),d.invert(i)];return c.invert(a);};return{transform:n=>h(n),untransform:n=>p(n)};}]];}},children:u.flatMap(n=>ga(n)?function(n){let{style:i,tooltip:a={}}=n;return Object.assign(Object.assign({},n),{type:"path",tooltip:(0,p1.maybeTooltip)(a,{title:"id",items:[{channel:"color"}]}),style:Object.assign(Object.assign({},i),{d:n=>r(n)||[]})});}(n):n)})];};go.props={};var gs=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let gl=()=>n=>{let{type:r,data:i,scale:a,encode:o,style:s,animate:l,key:u,state:c,tooltip:f}=n;return[Object.assign(Object.assign({type:"geoView"},gs(n,["type","data","scale","encode","style","animate","key","state","tooltip"])),{children:[{type:"geoPath",key:`${u}-0`,data:{value:i},scale:a,encode:o,style:s,animate:l,state:c,tooltip:f}]})];};function gu(n){return n.target.depth;}function gc(n,r){return n.sourceLinks.length?n.depth:r-1;}function gf(n){return function(){return n;};}function gd(n,r){return gp(n.source,r.source)||n.index-r.index;}function gh(n,r){return gp(n.target,r.target)||n.index-r.index;}function gp(n,r){return n.y0-r.y0;}function gm(n){return n.value;}function gg(n){return n.index;}function gv(n){return n.nodes;}function gy(n){return n.links;}function g_(n,r){let i=n.get(r);if(!i)throw Error("missing: "+r);return i;}function gb({nodes:n}){for(let r of n){let n=r.y0,i=n;for(let i of r.sourceLinks)i.y0=n+i.width/2,n+=i.width;for(let n of r.targetLinks)n.y1=i+n.width/2,i+=n.width;}}gl.props={};let gx={nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodes:n=>n.nodes,links:n=>n.links,nodeSort:void 0,linkSort:void 0,iterations:6},gE={left:function(n){return n.depth;},right:function(n,r){return r-1-n.height;},center:function(n){return n.targetLinks.length?n.depth:n.sourceLinks.length?(0,rw.default)(n.sourceLinks,gu)-1:0;},justify:gc},gw=n=>r=>{let{nodeId:i,nodeSort:a,nodeAlign:o,nodeWidth:s,nodePadding:l,nodeDepth:u,nodes:c,links:f,linkSort:d,iterations:h}=Object.assign({},gx,n),p=(function(){let n,r,i,a=0,o=0,s=1,l=1,u=24,c=8,f,d=gg,h=gc,p=gv,m=gy,g=6;function v(v){let _={nodes:p(v),links:m(v)};return function({nodes:n,links:r}){n.forEach((n,r)=>{n.index=r,n.sourceLinks=[],n.targetLinks=[];});let a=new Map(n.map(n=>[d(n),n]));if(r.forEach((n,r)=>{n.index=r;let{source:i,target:o}=n;"object"!=typeof i&&(i=n.source=g_(a,i)),"object"!=typeof o&&(o=n.target=g_(a,o)),i.sourceLinks.push(n),o.targetLinks.push(n);}),null!=i)for(let{sourceLinks:r,targetLinks:a}of n)r.sort(i),a.sort(i);}(_),function({nodes:n}){for(let r of n)r.value=void 0===r.fixedValue?Math.max((0,n8.default)(r.sourceLinks,gm),(0,n8.default)(r.targetLinks,gm)):r.fixedValue;}(_),function({nodes:r}){let i=r.length,a=new Set(r),o=new Set,s=0;for(;a.size;){if(a.forEach(n=>{for(let{target:r}of(n.depth=s,n.sourceLinks))o.add(r);}),++s>i)throw Error("circular link");a=o,o=new Set;}if(n){let i;let a=Math.max((0,n5.default)(r,n=>n.depth)+1,0);for(let o=0;o<r.length;o++)(i=r[o]).depth=n.call(null,i,a);}}(_),function({nodes:n}){let r=n.length,i=new Set(n),a=new Set,o=0;for(;i.size;){if(i.forEach(n=>{for(let{source:r}of(n.height=o,n.targetLinks))a.add(r);}),++o>r)throw Error("circular link");i=a,a=new Set;}}(_),function(n){let d=function({nodes:n}){let i=Math.max((0,n5.default)(n,n=>n.depth)+1,0),o=(s-a-u)/(i-1),l=Array(i).fill(0).map(()=>[]);for(let r of n){let n=Math.max(0,Math.min(i-1,Math.floor(h.call(null,r,i))));r.layer=n,r.x0=a+n*o,r.x1=r.x0+u,l[n]?l[n].push(r):l[n]=[r];}if(r)for(let n of l)n.sort(r);return l;}(n);f=Math.min(c,(l-o)/((0,n5.default)(d,n=>n.length)-1)),function(n){let r=(0,rw.default)(n,n=>(l-o-(n.length-1)*f)/(0,n8.default)(n,gm));for(let a of n){let n=o;for(let i of a)for(let a of(i.y0=n,i.y1=n+i.value*r,n=i.y1+f,i.sourceLinks))a.width=a.value*r;n=(l-n+f)/(a.length+1);for(let r=0;r<a.length;++r){let i=a[r];i.y0+=n*(r+1),i.y1+=n*(r+1);}(function(n){if(void 0===i)for(let{sourceLinks:r,targetLinks:i}of n)r.sort(gh),i.sort(gd);})(a);}}(d);for(let n=0;n<g;++n){let i=Math.pow(.99,n),a=Math.max(1-i,(n+1)/g);(function(n,i,a){for(let o=n.length,s=o-2;s>=0;--s){let o=n[s];for(let n of o){let r=0,a=0;for(let{target:i,value:o}of n.sourceLinks){let s=o*(i.layer-n.layer);r+=function(n,r){let i=r.y0-(r.targetLinks.length-1)*f/2;for(let{source:a,width:o}of r.targetLinks){if(a===n)break;i+=o+f;}for(let{target:a,width:o}of n.sourceLinks){if(a===r)break;i-=o;}return i;}(n,i)*s,a+=s;}if(!(a>0))continue;let o=(r/a-n.y0)*i;n.y0+=o,n.y1+=o,x(n);}void 0===r&&o.sort(gp),o.length&&y(o,a);}})(d,i,a),function(n,i,a){for(let o=1,s=n.length;o<s;++o){let s=n[o];for(let n of s){let r=0,a=0;for(let{source:i,value:o}of n.targetLinks){let s=o*(n.layer-i.layer);r+=function(n,r){let i=n.y0-(n.sourceLinks.length-1)*f/2;for(let{target:a,width:o}of n.sourceLinks){if(a===r)break;i+=o+f;}for(let{source:a,width:o}of r.targetLinks){if(a===n)break;i-=o;}return i;}(i,n)*s,a+=s;}if(!(a>0))continue;let o=(r/a-n.y0)*i;n.y0+=o,n.y1+=o,x(n);}void 0===r&&s.sort(gp),s.length&&y(s,a);}}(d,i,a);}}(_),gb(_),_;}function y(n,r){let i=n.length>>1,a=n[i];b(n,a.y0-f,i-1,r),_(n,a.y1+f,i+1,r),b(n,l,n.length-1,r),_(n,o,0,r);}function _(n,r,i,a){for(;i<n.length;++i){let o=n[i],s=(r-o.y0)*a;s>1e-6&&(o.y0+=s,o.y1+=s),r=o.y1+f;}}function b(n,r,i,a){for(;i>=0;--i){let o=n[i],s=(o.y1-r)*a;s>1e-6&&(o.y0-=s,o.y1-=s),r=o.y0-f;}}function x({sourceLinks:n,targetLinks:r}){if(void 0===i){for(let{source:{sourceLinks:n}}of r)n.sort(gh);for(let{target:{targetLinks:r}}of n)r.sort(gd);}}return v.update=function(n){return gb(n),n;},v.nodeId=function(n){return arguments.length?(d="function"==typeof n?n:gf(n),v):d;},v.nodeAlign=function(n){return arguments.length?(h="function"==typeof n?n:gf(n),v):h;},v.nodeDepth=function(r){return arguments.length?(n=r,v):n;},v.nodeSort=function(n){return arguments.length?(r=n,v):r;},v.nodeWidth=function(n){return arguments.length?(u=+n,v):u;},v.nodePadding=function(n){return arguments.length?(c=f=+n,v):c;},v.nodes=function(n){return arguments.length?(p="function"==typeof n?n:gf(n),v):p;},v.links=function(n){return arguments.length?(m="function"==typeof n?n:gf(n),v):m;},v.linkSort=function(n){return arguments.length?(i=n,v):i;},v.size=function(n){return arguments.length?(a=o=0,s=+n[0],l=+n[1],v):[s-a,l-o];},v.extent=function(n){return arguments.length?(a=+n[0][0],s=+n[1][0],o=+n[0][1],l=+n[1][1],v):[[a,o],[s,l]];},v.iterations=function(n){return arguments.length?(g=+n,v):g;},v;})().nodeSort(a).linkSort(d).links(f).nodes(c).nodeWidth(s).nodePadding(l).nodeDepth(u).nodeAlign(function(n){let r=typeof n;return"string"===r?gE[n]||gc:"function"===r?n:gc;}(o)).iterations(h).extent([[0,0],[1,1]]);"function"==typeof i&&p.nodeId(i);let{nodes:m,links:g}=p(r);return{nodes:m.map(n=>{let{x0:r,x1:i,y0:a,y1:o}=n;return Object.assign(Object.assign({},n),{x:[r,i,i,r],y:[a,a,o,o]});}),links:g.map(n=>{let{source:r,target:i}=n,a=r.x1,o=i.x0,s=n.width/2;return Object.assign(Object.assign({},n),{x:[a,a,o,o],y:[n.y0+s,n.y0-s,n.y1+s,n.y1-s]});})};};gw.props={};var gS=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let gT={nodeId:n=>n.key,nodeWidth:.02,nodePadding:.02},gA={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{stroke:"#000"}},gC={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{fillOpacity:.5,stroke:void 0}},gO={textAlign:n=>n.x[0]<.5?"start":"end",position:n=>n.x[0]<.5?"right":"left",fontSize:10},gM=n=>{let{data:r,encode:i={},scale:a,style:o={},layout:s={},nodeLabels:l=[],linkLabels:u=[],animate:c={},tooltip:f={},interaction:d,state:h={}}=n,{links:p,nodes:m}=(0,iI.initializeData)(r,i),g=(0,nA.subObject)(i,"node"),v=(0,nA.subObject)(i,"link"),{key:y=n=>n.key,color:_=y}=g,{links:b,nodes:x}=gw(Object.assign(Object.assign(Object.assign({},gT),{nodeId:(0,iI.field)(y)}),s))({links:p,nodes:m}),E=(0,nA.subObject)(o,"label"),{text:w=y,spacing:S=5}=E,T=gS(E,["text","spacing"]),A=(0,iI.field)(y),C=(0,p1.subTooltip)(f,"node",{title:A,items:[{field:"value"}]},!0),O=(0,p1.subTooltip)(f,"link",{title:"",items:[n=>({name:"source",value:A(n.source)}),n=>({name:"target",value:A(n.target)})]}),[M,R]=Object.entries(h).reduce((n,[r,i])=>{let a=(0,nA.omitPrefixObject)(i,"node","link"),o=(0,nA.subObject)(i,"node");n[0][r]=Object.assign(Object.assign({},a),o);let s=(0,nA.subObject)(i,"link");return n[1][r]=Object.assign(Object.assign({},a),s),n;},[{},{}]);return[(0,nS.default)({},gA,{data:x,encode:Object.assign(Object.assign({},g),{color:_}),scale:a,style:(0,nA.subObject)(o,"node"),labels:[Object.assign(Object.assign(Object.assign({},gO),{text:w,dx:n=>n.x[0]<.5?S:-S}),T),...l],tooltip:C,animate:(0,p1.maybeAnimation)(c,"node"),axis:!1,interaction:d,state:M}),(0,nS.default)({},gC,{data:b,encode:v,labels:u,style:Object.assign({fill:v.color?void 0:"#aaa",lineWidth:0},(0,nA.subObject)(o,"link")),tooltip:O,animate:(0,p1.maybeAnimation)(c,"link"),interaction:d,state:R})];};gM.props={};var gR=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let gP=(n,r)=>({tile:"treemapSquarify",ratio:.5*(1+Math.sqrt(5)),size:[n,r],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,sort:(n,r)=>r.value-n.value,layer:0}),gk=(n,r)=>({type:"rect",axis:!1,encode:{x:"x",y:"y",key:"id",color:n=>n.path[1]},scale:{x:{domain:[0,n],range:[0,1]},y:{domain:[0,r],range:[0,1]}},style:{stroke:"#fff"},state:{active:{opacity:.6},inactive:{opacity:1}}}),gI={fontSize:10,text:n=>(0,uC.default)(n.path),position:"inside",fill:"#000",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:n=>n.x1-n.x0,isTreemapLabel:!0},gL={title:n=>{var r,i;return null===(i=null===(r=n.path)||void 0===r?void 0:r.join)||void 0===i?void 0:i.call(r,".");},items:[{field:"value"}]},gN={title:n=>(0,uC.default)(n.path),items:[{field:"value"}]},gD=(n,r)=>{let{width:i,height:a,options:o}=r,{data:s,encode:l={},scale:u,style:c={},layout:f={},labels:d=[],tooltip:h={}}=n,p=gR(n,["data","encode","scale","style","layout","labels","tooltip"]),m=(0,nb.default)(o,["interaction","treemapDrillDown"])||(0,nb.default)(o,["marks",0,"interaction","treemapDrillDown"]),g=(0,nS.default)({},gP(i,a),f,{layer:m?n=>1===n.depth:f.layer}),[v,y]=(0,fl.treeDataTransform)(s,g,l),_=(0,nA.subObject)(c,"label");return(0,nS.default)({},gk(i,a),Object.assign(Object.assign({data:v,scale:u,style:c,labels:[Object.assign(Object.assign(Object.assign({},gI),_),m&&{cursor:"pointer"}),...d]},p),{encode:l,tooltip:(0,p1.maybeTooltip)(h,gL),axis:!1}),m?{interaction:Object.assign(Object.assign({},p.interaction),{treemapDrillDown:m?Object.assign(Object.assign({},m),{originData:y,layout:g}):void 0}),encode:Object.assign({color:n=>(0,uC.default)(n.path)},l),tooltip:(0,p1.maybeTooltip)(h,gN)}:{});};gD.props={};var gF=i("4c1ff8e6"),gB=ew._(gF),gj=i("7b8bcee7"),gz=ew._(gj),gU=i("99b35fdd"),gV=ew._(gU),gG=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let gH=(n,r)=>({size:[n,r],padding:0,sort:(n,r)=>r.value-n.value}),gW=(n,r,i)=>({type:"point",axis:!1,legend:!1,scale:{x:{domain:[0,n]},y:{domain:[0,r]},size:{type:"identity"}},encode:{x:"x",y:"y",size:"r",shape:"point"},style:{fill:i.color?void 0:n=>0===n.height?"#ddd":"#fff",stroke:i.color?void 0:n=>0===n.height?"":"#000"}}),gX={text:"",position:"inside",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:n=>2*n.r},gq={title:n=>n.data.name,items:[{field:"value"}]},g$=(n,r,i)=>{let{value:a}=i,o=(0,nJ.default)(n)?(0,gB.default)().path(r.path)(n):(0,gz.default)(n);return a?o.sum(n=>(0,iI.field)(a)(n)).sort(r.sort):o.count(),(0,gV.default)().size(r.size).padding(r.padding)(o),o.descendants();},gY=(n,r)=>{let{width:i,height:a}=r,{data:o,encode:s={},scale:l={},style:u={},layout:c={},labels:f=[],tooltip:d={}}=n,h=gG(n,["data","encode","scale","style","layout","labels","tooltip"]),p=gW(i,a,s),m=g$(o,(0,nS.default)({},gH(i,a),c),(0,nS.default)({},p.encode,s)),g=(0,nA.subObject)(u,"label");return(0,nS.default)({},p,Object.assign(Object.assign({data:m,encode:s,scale:l,style:u,labels:[Object.assign(Object.assign({},gX),g),...f]},h),{tooltip:(0,p1.maybeTooltip)(d,gq),axis:!1}));};gY.props={};var gZ={value:()=>{}};function gK(){for(var n,r=0,i=arguments.length,a={};r<i;++r){if(!(n=arguments[r]+"")||n in a||/[\s.]/.test(n))throw Error("illegal type: "+n);a[n]=[];}return new gQ(a);}function gQ(n){this._=n;}function gJ(n,r,i){for(var a=0,o=n.length;a<o;++a)if(n[a].name===r){n[a]=gZ,n=n.slice(0,a).concat(n.slice(a+1));break;}return null!=i&&n.push({name:r,value:i}),n;}gQ.prototype=gK.prototype={constructor:gQ,on:function(n,r){var i,a=this._,o=(n+"").trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!a.hasOwnProperty(n))throw Error("unknown type: "+n);return{type:n,name:r};}),s=-1,l=o.length;if(arguments.length<2){for(;++s<l;)if((i=(n=o[s]).type)&&(i=function(n,r){for(var i,a=0,o=n.length;a<o;++a)if((i=n[a]).name===r)return i.value;}(a[i],n.name)))return i;return;}if(null!=r&&"function"!=typeof r)throw Error("invalid callback: "+r);for(;++s<l;)if(i=(n=o[s]).type)a[i]=gJ(a[i],n.name,r);else if(null==r)for(i in a)a[i]=gJ(a[i],n.name,null);return this;},copy:function(){var n={},r=this._;for(var i in r)n[i]=r[i].slice();return new gQ(n);},call:function(n,r){if((i=arguments.length-2)>0)for(var i,a,o=Array(i),s=0;s<i;++s)o[s]=arguments[s+2];if(!this._.hasOwnProperty(n))throw Error("unknown type: "+n);for(a=this._[n],s=0,i=a.length;s<i;++s)a[s].value.apply(r,o);},apply:function(n,r,i){if(!this._.hasOwnProperty(n))throw Error("unknown type: "+n);for(var a=this._[n],o=0,s=a.length;o<s;++o)a[o].value.apply(r,i);}};var g0=0,g1=0,g2=0,g3=0,g4=0,g5=0,g6="object"==typeof performance&&performance.now?performance:Date,g8="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17);};function g7(){return g4||(g8(g9),g4=g6.now()+g5);}function g9(){g4=0;}function ve(){this._call=this._time=this._next=null;}function vt(n,r,i){var a=new ve;return a.restart(n,r,i),a;}function vn(){g4=(g3=g6.now())+g5,g0=g1=0;try{!function(){g7(),++g0;for(var n,r=eb;r;)(n=g4-r._time)>=0&&r._call.call(void 0,n),r=r._next;--g0;}();}finally{g0=0,function(){for(var n,r,i=eb,a=1/0;i;)i._call?(a>i._time&&(a=i._time),n=i,i=i._next):(r=i._next,i._next=null,i=n?n._next=r:eb=r);ex=n,vi(a);}(),g4=0;}}function vr(){var n=g6.now(),r=n-g3;r>1e3&&(g5-=r,g3=n);}function vi(n){!g0&&(g1&&(g1=clearTimeout(g1)),n-g4>24?(n<1/0&&(g1=setTimeout(vn,n-g6.now()-g5)),g2&&(g2=clearInterval(g2))):(g2||(g3=g6.now(),g2=setInterval(vr,1e3)),g0=1,g8(vn)));}ve.prototype=vt.prototype={constructor:ve,restart:function(n,r,i){if("function"!=typeof n)throw TypeError("callback is not a function");i=(null==i?g7():+i)+(null==r?0:+r),this._next||ex===this||(ex?ex._next=this:eb=this,ex=this),this._call=n,this._time=i,vi();},stop:function(){this._call&&(this._call=null,this._time=1/0,vi());}};var va=function(){let n=1;return()=>(n=(1664525*n+1013904223)%4294967296)/4294967296;};function vo(n){return n.x;}function vs(n){return n.y;}var vl=Math.PI*(3-Math.sqrt(5)),vu=function(n){var r,i=1,a=.001,o=1-Math.pow(.001,1/300),s=0,l=.6,u=new Map,c=vt(h),f=gK("tick","end"),d=va();function h(){p(),f.call("tick",r),i<a&&(c.stop(),f.call("end",r));}function p(a){var c,f,d=n.length;void 0===a&&(a=1);for(var h=0;h<a;++h)for(i+=(s-i)*o,u.forEach(function(n){n(i);}),c=0;c<d;++c)null==(f=n[c]).fx?f.x+=f.vx*=l:(f.x=f.fx,f.vx=0),null==f.fy?f.y+=f.vy*=l:(f.y=f.fy,f.vy=0);return r;}function m(){for(var r,i=0,a=n.length;i<a;++i){if((r=n[i]).index=i,null!=r.fx&&(r.x=r.fx),null!=r.fy&&(r.y=r.fy),isNaN(r.x)||isNaN(r.y)){var o=10*Math.sqrt(.5+i),s=i*vl;r.x=o*Math.cos(s),r.y=o*Math.sin(s);}(isNaN(r.vx)||isNaN(r.vy))&&(r.vx=r.vy=0);}}function g(r){return r.initialize&&r.initialize(n,d),r;}return null==n&&(n=[]),m(),r={tick:p,restart:function(){return c.restart(h),r;},stop:function(){return c.stop(),r;},nodes:function(i){return arguments.length?(n=i,m(),u.forEach(g),r):n;},alpha:function(n){return arguments.length?(i=+n,r):i;},alphaMin:function(n){return arguments.length?(a=+n,r):a;},alphaDecay:function(n){return arguments.length?(o=+n,r):+o;},alphaTarget:function(n){return arguments.length?(s=+n,r):s;},velocityDecay:function(n){return arguments.length?(l=1-n,r):1-l;},randomSource:function(n){return arguments.length?(d=n,u.forEach(g),r):d;},force:function(n,i){return arguments.length>1?(null==i?u.delete(n):u.set(n,g(i)),r):u.get(n);},find:function(r,i,a){var o,s,l,u,c,f=0,d=n.length;for(null==a?a=1/0:a*=a,f=0;f<d;++f)(l=(o=r-(u=n[f]).x)*o+(s=i-u.y)*s)<a&&(c=u,a=l);return c;},on:function(n,i){return arguments.length>1?(f.on(n,i),r):f.on(n);}};};function vc(n,r,i,a){if(isNaN(r)||isNaN(i))return n;var o,s,l,u,c,f,d,h,p,m=n._root,g={data:a},v=n._x0,y=n._y0,_=n._x1,b=n._y1;if(!m)return n._root=g,n;for(;m.length;)if((f=r>=(s=(v+_)/2))?v=s:_=s,(d=i>=(l=(y+b)/2))?y=l:b=l,o=m,!(m=m[h=d<<1|f]))return o[h]=g,n;if(u=+n._x.call(null,m.data),c=+n._y.call(null,m.data),r===u&&i===c)return g.next=m,o?o[h]=g:n._root=g,n;do o=o?o[h]=[,,,,]:n._root=[,,,,],(f=r>=(s=(v+_)/2))?v=s:_=s,(d=i>=(l=(y+b)/2))?y=l:b=l;while((h=d<<1|f)==(p=(c>=l)<<1|u>=s))return o[p]=m,o[h]=g,n;}var vf=function(n,r,i,a,o){this.node=n,this.x0=r,this.y0=i,this.x1=a,this.y1=o;};function vd(n){return n[0];}function vh(n){return n[1];}function vp(n,r,i){var a=new vm(null==r?vd:r,null==i?vh:i,NaN,NaN,NaN,NaN);return null==n?a:a.addAll(n);}function vm(n,r,i,a,o,s){this._x=n,this._y=r,this._x0=i,this._y0=a,this._x1=o,this._y1=s,this._root=void 0;}function vg(n){for(var r={data:n.data},i=r;n=n.next;)i=i.next={data:n.data};return r;}var vv=vp.prototype=vm.prototype;vv.copy=function(){var n,r,i=new vm(this._x,this._y,this._x0,this._y0,this._x1,this._y1),a=this._root;if(!a)return i;if(!a.length)return i._root=vg(a),i;for(n=[{source:a,target:i._root=[,,,,]}];a=n.pop();)for(var o=0;o<4;++o)(r=a.source[o])&&(r.length?n.push({source:r,target:a.target[o]=[,,,,]}):a.target[o]=vg(r));return i;},vv.add=function(n){let r=+this._x.call(null,n),i=+this._y.call(null,n);return vc(this.cover(r,i),r,i,n);},vv.addAll=function(n){var r,i,a,o,s=n.length,l=Array(s),u=Array(s),c=1/0,f=1/0,d=-1/0,h=-1/0;for(i=0;i<s;++i)!(isNaN(a=+this._x.call(null,r=n[i]))||isNaN(o=+this._y.call(null,r)))&&(l[i]=a,u[i]=o,a<c&&(c=a),a>d&&(d=a),o<f&&(f=o),o>h&&(h=o));if(c>d||f>h)return this;for(this.cover(c,f).cover(d,h),i=0;i<s;++i)vc(this,l[i],u[i],n[i]);return this;},vv.cover=function(n,r){if(isNaN(n=+n)||isNaN(r=+r))return this;var i=this._x0,a=this._y0,o=this._x1,s=this._y1;if(isNaN(i))o=(i=Math.floor(n))+1,s=(a=Math.floor(r))+1;else{for(var l,u,c=o-i||1,f=this._root;i>n||n>=o||a>r||r>=s;)switch(u=(r<a)<<1|n<i,(l=[,,,,])[u]=f,f=l,c*=2,u){case 0:o=i+c,s=a+c;break;case 1:i=o-c,s=a+c;break;case 2:o=i+c,a=s-c;break;case 3:i=o-c,a=s-c;}this._root&&this._root.length&&(this._root=f);}return this._x0=i,this._y0=a,this._x1=o,this._y1=s,this;},vv.data=function(){var n=[];return this.visit(function(r){if(!r.length)do n.push(r.data);while(r=r.next)}),n;},vv.extent=function(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]];},vv.find=function(n,r,i){var a,o,s,l,u,c,f,d=this._x0,h=this._y0,p=this._x1,m=this._y1,g=[],v=this._root;for(v&&g.push(new vf(v,d,h,p,m)),null==i?i=1/0:(d=n-i,h=r-i,p=n+i,m=r+i,i*=i);c=g.pop();)if((v=c.node)&&!((o=c.x0)>p)&&!((s=c.y0)>m)&&!((l=c.x1)<d)&&!((u=c.y1)<h)){if(v.length){var y=(o+l)/2,_=(s+u)/2;g.push(new vf(v[3],y,_,l,u),new vf(v[2],o,_,y,u),new vf(v[1],y,s,l,_),new vf(v[0],o,s,y,_)),(f=(r>=_)<<1|n>=y)&&(c=g[g.length-1],g[g.length-1]=g[g.length-1-f],g[g.length-1-f]=c);}else{var b=n-+this._x.call(null,v.data),x=r-+this._y.call(null,v.data),E=b*b+x*x;if(E<i){var w=Math.sqrt(i=E);d=n-w,h=r-w,p=n+w,m=r+w,a=v.data;}}}return a;},vv.remove=function(n){if(isNaN(s=+this._x.call(null,n))||isNaN(l=+this._y.call(null,n)))return this;var r,i,a,o,s,l,u,c,f,d,h,p,m=this._root,g=this._x0,v=this._y0,y=this._x1,_=this._y1;if(!m)return this;if(m.length)for(;;){if((f=s>=(u=(g+y)/2))?g=u:y=u,(d=l>=(c=(v+_)/2))?v=c:_=c,r=m,!(m=m[h=d<<1|f]))return this;if(!m.length)break;(r[h+1&3]||r[h+2&3]||r[h+3&3])&&(i=r,p=h);}for(;m.data!==n;)if(a=m,!(m=m.next))return this;return((o=m.next)&&delete m.next,a)?o?a.next=o:delete a.next:r?(o?r[h]=o:delete r[h],(m=r[0]||r[1]||r[2]||r[3])&&m===(r[3]||r[2]||r[1]||r[0])&&!m.length&&(i?i[p]=m:this._root=m)):this._root=o,this;},vv.removeAll=function(n){for(var r=0,i=n.length;r<i;++r)this.remove(n[r]);return this;},vv.root=function(){return this._root;},vv.size=function(){var n=0;return this.visit(function(r){if(!r.length)do++n;while(r=r.next)}),n;},vv.visit=function(n){var r,i,a,o,s,l,u=[],c=this._root;for(c&&u.push(new vf(c,this._x0,this._y0,this._x1,this._y1));r=u.pop();)if(!n(c=r.node,a=r.x0,o=r.y0,s=r.x1,l=r.y1)&&c.length){var f=(a+s)/2,d=(o+l)/2;(i=c[3])&&u.push(new vf(i,f,d,s,l)),(i=c[2])&&u.push(new vf(i,a,d,f,l)),(i=c[1])&&u.push(new vf(i,f,o,s,d)),(i=c[0])&&u.push(new vf(i,a,o,f,d));}return this;},vv.visitAfter=function(n){var r,i=[],a=[];for(this._root&&i.push(new vf(this._root,this._x0,this._y0,this._x1,this._y1));r=i.pop();){var o=r.node;if(o.length){var s,l=r.x0,u=r.y0,c=r.x1,f=r.y1,d=(l+c)/2,h=(u+f)/2;(s=o[0])&&i.push(new vf(s,l,u,d,h)),(s=o[1])&&i.push(new vf(s,d,u,c,h)),(s=o[2])&&i.push(new vf(s,l,h,d,f)),(s=o[3])&&i.push(new vf(s,d,h,c,f));}a.push(r);}for(;r=a.pop();)n(r.node,r.x0,r.y0,r.x1,r.y1);return this;},vv.x=function(n){return arguments.length?(this._x=n,this):this._x;},vv.y=function(n){return arguments.length?(this._y=n,this):this._y;};var vy=function(n){return function(){return n;};},v_=function(n){return(n()-.5)*1e-6;},vb=function(){var n,r,i,a,o,s=vy(-30),l=1,u=1/0,c=.81;function f(i){var o,s=n.length,l=vp(n,vo,vs).visitAfter(h);for(a=i,o=0;o<s;++o)r=n[o],l.visit(p);}function d(){if(n){var r,i,a=n.length;for(r=0,o=Array(a);r<a;++r)o[(i=n[r]).index]=+s(i,r,n);}}function h(n){var r,i,a,s,l,u=0,c=0;if(n.length){for(a=s=l=0;l<4;++l)(r=n[l])&&(i=Math.abs(r.value))&&(u+=r.value,c+=i,a+=i*r.x,s+=i*r.y);n.x=a/c,n.y=s/c;}else{(r=n).x=r.data.x,r.y=r.data.y;do u+=o[r.data.index];while(r=r.next)}n.value=u;}function p(n,s,f,d){if(!n.value)return!0;var h=n.x-r.x,p=n.y-r.y,m=d-s,g=h*h+p*p;if(m*m/c<g)return g<u&&(0===h&&(g+=(h=v_(i))*h),0===p&&(g+=(p=v_(i))*p),g<l&&(g=Math.sqrt(l*g)),r.vx+=h*n.value*a/g,r.vy+=p*n.value*a/g),!0;if(!n.length&&!(g>=u)){(n.data!==r||n.next)&&(0===h&&(g+=(h=v_(i))*h),0===p&&(g+=(p=v_(i))*p),g<l&&(g=Math.sqrt(l*g)));do n.data!==r&&(m=o[n.data.index]*a/g,r.vx+=h*m,r.vy+=p*m);while(n=n.next)}}return f.initialize=function(r,a){n=r,i=a,d();},f.strength=function(n){return arguments.length?(s="function"==typeof n?n:vy(+n),d(),f):s;},f.distanceMin=function(n){return arguments.length?(l=n*n,f):Math.sqrt(l);},f.distanceMax=function(n){return arguments.length?(u=n*n,f):Math.sqrt(u);},f.theta=function(n){return arguments.length?(c=n*n,f):Math.sqrt(c);},f;};function vx(n){return n.index;}function vE(n,r){var i=n.get(r);if(!i)throw Error("node not found: "+r);return i;}var vw=function(n){var r,i,a,o,s,l,u=vx,c=function(n){return 1/Math.min(o[n.source.index],o[n.target.index]);},f=vy(30),d=1;function h(a){for(var o=0,u=n.length;o<d;++o)for(var c,f,h,p,m,g,v,y=0;y<u;++y)f=(c=n[y]).source,g=((g=Math.sqrt((p=(h=c.target).x+h.vx-f.x-f.vx||v_(l))*p+(m=h.y+h.vy-f.y-f.vy||v_(l))*m))-i[y])/g*a*r[y],p*=g,m*=g,h.vx-=p*(v=s[y]),h.vy-=m*v,f.vx+=p*(v=1-v),f.vy+=m*v;}function p(){if(a){var l,c,f=a.length,d=n.length,h=new Map(a.map((n,r)=>[u(n,r,a),n]));for(l=0,o=Array(f);l<d;++l)(c=n[l]).index=l,"object"!=typeof c.source&&(c.source=vE(h,c.source)),"object"!=typeof c.target&&(c.target=vE(h,c.target)),o[c.source.index]=(o[c.source.index]||0)+1,o[c.target.index]=(o[c.target.index]||0)+1;for(l=0,s=Array(d);l<d;++l)c=n[l],s[l]=o[c.source.index]/(o[c.source.index]+o[c.target.index]);r=Array(d),m(),i=Array(d),g();}}function m(){if(a)for(var i=0,o=n.length;i<o;++i)r[i]=+c(n[i],i,n);}function g(){if(a)for(var r=0,o=n.length;r<o;++r)i[r]=+f(n[r],r,n);}return null==n&&(n=[]),h.initialize=function(n,r){a=n,l=r,p();},h.links=function(r){return arguments.length?(n=r,p(),h):n;},h.id=function(n){return arguments.length?(u=n,h):u;},h.iterations=function(n){return arguments.length?(d=+n,h):d;},h.strength=function(n){return arguments.length?(c="function"==typeof n?n:vy(+n),m(),h):c;},h.distance=function(n){return arguments.length?(f="function"==typeof n?n:vy(+n),g(),h):f;},h;},vS=function(n){var r,i,a,o=vy(.1);function s(n){for(var o,s=0,l=r.length;s<l;++s)o=r[s],o.vx+=(a[s]-o.x)*i[s]*n;}function l(){if(r){var s,l=r.length;for(s=0,i=Array(l),a=Array(l);s<l;++s)i[s]=isNaN(a[s]=+n(r[s],s,r))?0:+o(r[s],s,r);}}return"function"!=typeof n&&(n=vy(null==n?0:+n)),s.initialize=function(n){r=n,l();},s.strength=function(n){return arguments.length?(o="function"==typeof n?n:vy(+n),l(),s):o;},s.x=function(r){return arguments.length?(n="function"==typeof r?r:vy(+r),l(),s):n;},s;},vT=function(n){var r,i,a,o=vy(.1);function s(n){for(var o,s=0,l=r.length;s<l;++s)o=r[s],o.vy+=(a[s]-o.y)*i[s]*n;}function l(){if(r){var s,l=r.length;for(s=0,i=Array(l),a=Array(l);s<l;++s)i[s]=isNaN(a[s]=+n(r[s],s,r))?0:+o(r[s],s,r);}}return"function"!=typeof n&&(n=vy(null==n?0:+n)),s.initialize=function(n){r=n,l();},s.strength=function(n){return arguments.length?(o="function"==typeof n?n:vy(+n),l(),s):o;},s.y=function(r){return arguments.length?(n="function"==typeof r?r:vy(+r),l(),s):n;},s;},vA=function(n,r){var i,a=1;function o(){var o,s,l=i.length,u=0,c=0;for(o=0;o<l;++o)u+=(s=i[o]).x,c+=s.y;for(u=(u/l-n)*a,c=(c/l-r)*a,o=0;o<l;++o)s=i[o],s.x-=u,s.y-=c;}return null==n&&(n=0),null==r&&(r=0),o.initialize=function(n){i=n;},o.x=function(r){return arguments.length?(n=+r,o):n;},o.y=function(n){return arguments.length?(r=+n,o):r;},o.strength=function(n){return arguments.length?(a=+n,o):a;},o;},vC=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let vO={joint:!0},vM={type:"link",axis:!1,legend:!1,encode:{x:[n=>n.source.x,n=>n.target.x],y:[n=>n.source.y,n=>n.target.y]},style:{stroke:"#999",strokeOpacity:.6}},vR={type:"point",axis:!1,legend:!1,encode:{x:"x",y:"y",size:5,color:"group",shape:"point"},style:{stroke:"#fff"}},vP={text:""},vk=n=>{let{data:r,encode:i={},scale:a,style:o={},layout:s={},nodeLabels:l=[],linkLabels:u=[],animate:c={},tooltip:f={}}=n,{nodeKey:d=n=>n.id,linkKey:h=n=>n.id}=i,p=Object.assign({nodeKey:d,linkKey:h},vC(i,["nodeKey","linkKey"])),m=(0,nA.subObject)(p,"node"),g=(0,nA.subObject)(p,"link"),{links:v,nodes:y}=(0,iI.initializeData)(r,p),{nodesData:_,linksData:b}=function(n,r,i){let{nodes:a,links:o}=n,{joint:s,nodeStrength:l,linkStrength:u}=r,{nodeKey:c=n=>n.id,linkKey:f=n=>n.id}=i,d=vb(),h=vw(o).id((0,iI.field)(f));"function"==typeof l&&d.strength(l),"function"==typeof u&&h.strength(u);let p=vu(a).force("link",h).force("charge",d);s?p.force("center",vA()):p.force("x",vS()).force("y",vT()),p.stop();let m=Math.ceil(Math.log(p.alphaMin())/Math.log(1-p.alphaDecay()));for(let n=0;n<m;n++)p.tick();return{nodesData:a,linksData:o};}({links:v,nodes:y},(0,nS.default)({},vO,s),p),x=(0,p1.subTooltip)(f,"link",{items:[n=>({name:"source",value:(0,iI.field)(h)(n.source)}),n=>({name:"target",value:(0,iI.field)(h)(n.target)})]}),E=(0,p1.subTooltip)(f,"node",{items:[n=>({name:"key",value:(0,iI.field)(d)(n)})]},!0);return[(0,nS.default)({},vM,{data:b,encode:g,labels:u,style:(0,nA.subObject)(o,"link"),tooltip:x,animate:(0,p1.maybeAnimation)(c,"link")}),(0,nS.default)({},vR,{data:_,encode:Object.assign({},m),scale:a,style:(0,nA.subObject)(o,"node"),tooltip:E,labels:[Object.assign(Object.assign({},vP),(0,nA.subObject)(o,"label")),...l],animate:(0,p1.maybeAnimation)(c,"link")})];};vk.props={};var vI=i("8e1e429e"),vL=ew._(vI),vN=i("a5a44481"),vD=ew._(vN);let vF=n=>r=>i=>{let{field:a="value",nodeSize:o,separation:s,sortBy:l,as:u=["x","y"]}=r,[c,f]=u,d=(0,gz.default)(i,n=>n.children).sum(n=>n[a]).sort(l),h=n();h.size([1,1]),o&&h.nodeSize(o),s&&h.separation(s),h(d);let p=[];d.each(n=>{n[c]=n.x,n[f]=n.y,n.name=n.data.name,p.push(n);});let m=d.links();return m.forEach(n=>{n[c]=[n.source[c],n.target[c]],n[f]=[n.source[f],n.target[f]];}),{nodes:p,edges:m};},vB=n=>vF(vD.default)(n);vB.props={};let vj=n=>vF(vL.default)(n);vj.props={};let vz={sortBy:(n,r)=>r.value-n.value},vU={axis:!1,legend:!1,type:"point",encode:{x:"x",y:"y",size:2,shape:"point"}},vV={type:"link",encode:{x:"x",y:"y",shape:"smooth"}},vG={text:"",fontSize:10},vH=n=>{let{data:r,encode:i={},scale:a={},style:o={},layout:s={},nodeLabels:l=[],linkLabels:u=[],animate:c={},tooltip:f={}}=n,d=null==i?void 0:i.value,{nodes:h,edges:p}=vj(Object.assign(Object.assign(Object.assign({},vz),s),{field:d}))(r),m=(0,p1.subTooltip)(f,"node",{title:"name",items:["value"]},!0),g=(0,p1.subTooltip)(f,"link",{title:"",items:[n=>({name:"source",value:n.source.name}),n=>({name:"target",value:n.target.name})]});return[(0,nS.default)({},vV,{data:p,encode:(0,nA.subObject)(i,"link"),scale:(0,nA.subObject)(a,"link"),labels:u,style:Object.assign({stroke:"#999"},(0,nA.subObject)(o,"link")),tooltip:g,animate:(0,p1.maybeAnimation)(c,"link")}),(0,nS.default)({},vU,{data:h,scale:(0,nA.subObject)(a,"node"),encode:(0,nA.subObject)(i,"node"),labels:[Object.assign(Object.assign({},vG),(0,nA.subObject)(o,"label")),...l],style:Object.assign({},(0,nA.subObject)(o,"node")),tooltip:m,animate:(0,p1.maybeAnimation)(c,"node")})];};function vW(n,r){return r.value-n.value;}function vX(n,r){return r.frequency-n.frequency;}function vq(n,r){return`${n.id}`.localeCompare(`${r.id}`);}function v$(n,r){return`${n.name}`.localeCompare(`${r.name}`);}vH.props={};var vY={};i.e(vY,{frequency:function(){return vX;},id:function(){return vq;},name:function(){return v$;},weight:function(){return vW;}});let vZ={y:0,thickness:.05,weight:!1,marginRatio:.1,id:n=>n.id,source:n=>n.source,target:n=>n.target,sourceWeight:n=>n.value||1,targetWeight:n=>n.value||1,sortBy:null},vK=n=>r=>(function(n){let{y:r,thickness:i,weight:a,marginRatio:o,id:s,source:l,target:u,sourceWeight:c,targetWeight:f,sortBy:d}=Object.assign(Object.assign({},vZ),n);return function(n){let h=n.nodes.map(n=>Object.assign({},n)),p=n.edges.map(n=>Object.assign({},n));return function(n,r){r.forEach(n=>{n.source=l(n),n.target=u(n),n.sourceWeight=c(n),n.targetWeight=f(n);});let i=(0,nE.default)(r,n=>n.source),a=(0,nE.default)(r,n=>n.target);n.forEach(n=>{n.id=s(n);let r=i.has(n.id)?i.get(n.id):[],o=a.has(n.id)?a.get(n.id):[];n.frequency=r.length+o.length,n.value=(0,n8.default)(r,n=>n.sourceWeight)+(0,n8.default)(o,n=>n.targetWeight);});}(h,p),function(n,r){let i="function"==typeof d?d:vY[d];i&&n.sort(i);}(h,0),function(n,s){let l=n.length;if(!l)throw(0,nA.error)("Invalid nodes: it's empty!");if(!a){let i=1/l;return n.forEach((n,a)=>{n.x=(a+.5)*i,n.y=r;});}let u=o/(2*l),c=n.reduce((n,r)=>n+=r.value,0);n.reduce((n,a)=>{a.weight=a.value/c,a.width=a.weight*(1-o),a.height=i;let s=u+n,l=s+a.width,f=r-i/2,d=f+i;return a.x=[s,l,l,s],a.y=[f,f,d,d],n+a.width+2*u;},0);}(h,0),function(n,i){let o=new Map(n.map(n=>[n.id,n]));if(!a)return i.forEach(n=>{let r=l(n),i=u(n),a=o.get(r),s=o.get(i);a&&s&&(n.x=[a.x,s.x],n.y=[a.y,s.y]);});i.forEach(n=>{n.x=[0,0,0,0],n.y=[r,r,r,r];});let s=(0,nE.default)(i,n=>n.source),c=(0,nE.default)(i,n=>n.target);n.forEach(n=>{let{edges:r,width:i,x:a,y:o,value:l,id:u}=n,f=s.get(u)||[],d=c.get(u)||[],h=0;f.map(n=>{let r=n.sourceWeight/l*i;n.x[0]=a[0]+h,n.x[1]=a[0]+h+r,h+=r;}),d.forEach(n=>{let r=n.targetWeight/l*i;n.x[3]=a[0]+h,n.x[2]=a[0]+h+r,h+=r;});});}(h,p),{nodes:h,edges:p};};})(n)(r);vK.props={};var vQ=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let vJ={y:0,thickness:.05,marginRatio:.1,id:n=>n.key,source:n=>n.source,target:n=>n.target,sourceWeight:n=>n.value||1,targetWeight:n=>n.value||1,sortBy:null},v0={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{opacity:1,fillOpacity:1,lineWidth:1}},v1={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{opacity:.5,lineWidth:1}},v2={position:"outside",fontSize:10},v3=(n,r)=>{let{data:i,encode:a={},scale:o,style:s={},layout:l={},nodeLabels:u=[],linkLabels:c=[],animate:f={},tooltip:d={}}=n,{nodes:h,links:p}=(0,iI.initializeData)(i,a),m=(0,nA.subObject)(a,"node"),g=(0,nA.subObject)(a,"link"),{key:v=n=>n.key,color:y=v}=m,{linkEncodeColor:_=n=>n.source}=g,{nodeWidthRatio:b=vJ.thickness,nodePaddingRatio:x=vJ.marginRatio}=l,E=vQ(l,["nodeWidthRatio","nodePaddingRatio"]),{nodes:w,edges:S}=vK(Object.assign(Object.assign(Object.assign(Object.assign({},vJ),{id:(0,iI.field)(v),thickness:b,marginRatio:x}),E),{weight:!0}))({nodes:h,edges:p}),T=(0,nA.subObject)(s,"label"),{text:A=v}=T,C=vQ(T,["text"]),O=(0,p1.subTooltip)(d,"node",{title:"",items:[n=>({name:n.key,value:n.value})]},!0),M=(0,p1.subTooltip)(d,"link",{title:"",items:[n=>({name:`${n.source} -> ${n.target}`,value:n.value})]}),{height:R,width:P}=r,k=Math.min(R,P);return[(0,nS.default)({},v1,{data:S,encode:Object.assign(Object.assign({},g),{color:_}),labels:c,style:Object.assign({fill:_?void 0:"#aaa"},(0,nA.subObject)(s,"link")),tooltip:M,animate:(0,p1.maybeAnimation)(f,"link")}),(0,nS.default)({},v0,{data:w,encode:Object.assign(Object.assign({},m),{color:y}),scale:o,style:(0,nA.subObject)(s,"node"),coordinate:{type:"polar",outerRadius:(k-20)/k,startAngle:-(2*Math.PI),endAngle:0},labels:[Object.assign(Object.assign(Object.assign({},v2),{text:A}),C),...u],tooltip:O,animate:(0,p1.maybeAnimation)(f,"node"),axis:!1})];};v3.props={};var v4=i("20e31a38"),v5=ew._(v4),v6=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};function v8(n,r){return(0,rw.default)(n,n=>r[n]);}function v7(n,r){return(0,n5.default)(n,n=>r[n]);}function v9(n,r){let i=2.5*ye(n,r)-1.5*yn(n,r);return(0,rw.default)(n,n=>r[n]>=i?r[n]:NaN);}function ye(n,r){return(0,v5.default)(n,.25,n=>r[n]);}function yt(n,r){return(0,v5.default)(n,.5,n=>r[n]);}function yn(n,r){return(0,v5.default)(n,.75,n=>r[n]);}function yr(n,r){let i=2.5*yn(n,r)-1.5*ye(n,r);return(0,n5.default)(n,n=>r[n]<=i?r[n]:NaN);}function yi(){return(n,r)=>{let{encode:i}=r,{y:a,x:o}=i,{value:s}=a,{value:l}=o;return[Array.from((0,nE.default)(n,n=>l[+n]).values()).flatMap(n=>{let r=v9(n,s),i=yr(n,s);return n.filter(n=>s[n]<r||s[n]>i);}),r];};}let ya=n=>{let{data:r,encode:i,style:a={},tooltip:o={},transform:s,animate:l}=n,u=v6(n,["data","encode","style","tooltip","transform","animate"]),{point:c=!0}=a,f=v6(a,["point"]),{y:d}=i,h={y:d,y1:d,y2:d,y3:d,y4:d},p={y1:ye,y2:yt,y3:yn},m=(0,p1.subTooltip)(o,"box",{items:[{channel:"y",name:"min"},{channel:"y1",name:"q1"},{channel:"y2",name:"q2"},{channel:"y3",name:"q3"},{channel:"y4",name:"max"}]},!0),g=(0,p1.subTooltip)(o,"point",{title:{channel:"x"},items:[{name:"outlier",channel:"y"}]});if(!c)return Object.assign({type:"box",data:r,transform:[Object.assign(Object.assign({type:"groupX",y:v8},p),{y4:v7})],encode:Object.assign(Object.assign({},i),h),style:f,tooltip:m},u);let v=(0,nA.subObject)(f,"box"),y=(0,nA.subObject)(f,"point");return[Object.assign({type:"box",data:r,transform:[Object.assign(Object.assign({type:"groupX",y:v9},p),{y4:yr})],encode:Object.assign(Object.assign({},i),h),style:v,tooltip:m,animate:(0,p1.maybeAnimation)(l,"box")},u),{type:"point",data:r,transform:[{type:yi}],encode:i,style:Object.assign({},y),tooltip:g,animate:(0,p1.maybeAnimation)(l,"point")}];};ya.props={};var yo=i("f515d959"),ys=ew._(yo);let yl=(n,r)=>Math.sqrt(Math.pow(n[0]-r[0],2)+Math.pow(n[1]-r[1],2))/2,yu=(n,r,i)=>{let a=Math.atan2(n[1]-i[1],n[0]-i[0]),o=Math.atan2(r[1]-i[1],r[0]-i[0])-a;return o<0&&(o+=2*Math.PI),o;},yc=(n,r)=>{if(!r)return;let{coordinate:i}=r;if(!(null==i?void 0:i.getCenter))return;let a=i.getCenter();return(i,o,s)=>{let{document:l}=r.canvas,{color:u,index:c}=o,f=l.createElement("g",{}),d=yl(i[0],i[1]),h=2*yl(i[0],a),p=yu(i[3],i[0],a)>Math.PI,m=l.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:[["M",...i[0]],["A",d,d,0,1,0,...i[1]],["A",h+2*d,h+2*d,0,p?1:0,0,...i[2]],["A",d,d,0,1,0===c?0:1,...i[3]],["A",h,h,0,p?1:0,1,...i[0]],["Z"]]},s),(0,ys.default)(n,["shape","last","first"])),{fill:u||s.color})});return f.appendChild(m),f;};};var yf=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let yd={coordinate:{type:"radial",innerRadius:.9,outerRadius:1,startAngle:-1.1*Math.PI,endAngle:.1*Math.PI},axis:{x:!1},legend:!1,tooltip:!1,encode:{x:"x",y:"y",color:"color"},scale:{color:{range:["#30BF78","#D0D0D0"]}}},yh={style:{shape:(n,r)=>{let{shape:i,radius:a}=n,o=yf(n,["shape","radius"]),s=(0,nA.subObject)(o,"pointer"),l=(0,nA.subObject)(o,"pin"),{shape:u}=s,c=yf(s,["shape"]),{shape:f}=l,d=yf(l,["shape"]),{coordinate:h,theme:p}=r;return(n,r)=>{let i=n.map(n=>h.invert(n)),[s,l,m]=(0,rS.getTransformOptions)(h,"polar"),g=h.clone(),{color:v}=r,y=(0,n9.Radial)({startAngle:s,endAngle:l,innerRadius:m,outerRadius:a});y.push(["cartesian"]),g.update({transformations:y});let _=i.map(n=>g.map(n)),[b,x]=(0,iU.getOrigin)(_),[E,w]=h.getCenter(),S=Object.assign(Object.assign({x1:b,y1:x,x2:E,y2:w,stroke:v},c),o),T=Object.assign(Object.assign({cx:E,cy:w,stroke:v},d),o),A=(0,nT.select)(new eL.Group);return(0,nA.isUnset)(u)||("function"==typeof u?A.append(()=>u(_,r,g,p)):A.append("line").call(iU.applyStyle,S).node()),(0,nA.isUnset)(f)||("function"==typeof f?A.append(()=>f(_,r,g,p)):A.append("circle").call(iU.applyStyle,T).node()),A.node();};},lineWidth:4,pointerLineCap:"round",pinR:10,pinFill:"#fff",radius:.6}},yp={type:"text",style:{x:"50%",y:"60%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"},tooltip:!1},ym=n=>{let{data:r={},scale:i={},style:a={},animate:o={},transform:s=[]}=n,l=yf(n,["data","scale","style","animate","transform"]),{targetData:u,totalData:c,target:f,total:d,scale:h}=function(n,r){let{name:i="score",target:a,total:o,percent:s,thresholds:l=[]}=function(n){if((0,ns.default)(n)){let r=Math.max(0,Math.min(n,1));return{percent:r,target:r,total:1};}return n;}(n),u=s||a,c=s?1:o,f=Object.assign({y:{domain:[0,c]}},r);return l.length?{targetData:[{x:i,y:u,color:"target"}],totalData:l.map((n,r)=>({x:i,y:r>=1?n-l[r-1]:n,color:r})),target:u,total:c,scale:f}:{targetData:[{x:i,y:u,color:"target"}],totalData:[{x:i,y:u,color:"target"},{x:i,y:c-u,color:"total"}],target:u,total:c,scale:f};}(r,i),p=(0,nA.subObject)(a,"text"),{tooltip:m}=p,g=yf(p,["tooltip"]),v=(0,nA.filterPrefixObject)(a,["pointer","pin"]),y=(0,nA.subObject)(a,"arc"),_=y.shape;return[(0,nS.default)({},yd,Object.assign({type:"interval",transform:[{type:"stackY"}],data:c,scale:h,style:"round"===_?Object.assign(Object.assign({},y),{shape:yc}):y,animate:"object"==typeof o?(0,nA.subObject)(o,"arc"):o},l)),(0,nS.default)({},yd,yh,Object.assign({type:"point",data:u,scale:h,style:v,animate:"object"==typeof o?(0,nA.subObject)(o,"indicator"):o},l)),(0,nS.default)({},yp,{style:Object.assign({text:function(n,{target:r,total:i}){let{content:a}=n;return a?a(r,i):r.toString();}(g,{target:f,total:d})},g),tooltip:m,animate:"object"==typeof o?(0,nA.subObject)(o,"text"):o})];};ym.props={};let yg={pin:function(n,r,i){let a=4*i/3,o=Math.max(a,2*i),s=a/2,l=s+r-o/2,u=Math.asin(s/((o-s)*.85)),c=Math.sin(u)*s,f=Math.cos(u)*s,d=n-f,h=l+c,p=l+s/Math.sin(u);return`
      M ${d} ${h}
      A ${s} ${s} 0 1 1 ${d+2*f} ${h}
      Q ${n} ${p} ${n} ${r+o/2}
      Q ${n} ${p} ${d} ${h}
      Z 
    `;},rect:function(n,r,i){let a=.618*i;return`
      M ${n-a} ${r-i}
      L ${n+a} ${r-i}
      L ${n+a} ${r+i}
      L ${n-a} ${r+i}
      Z
    `;},circle:function(n,r,i){return`
      M ${n} ${r-i} 
      a ${i} ${i} 0 1 0 0 ${2*i}
      a ${i} ${i} 0 1 0 0 ${-(2*i)}
      Z
    `;},diamond:function(n,r,i){return`
      M ${n} ${r-i}
      L ${n+i} ${r}
      L ${n} ${r+i}
      L ${n-i} ${r}
      Z
    `;},triangle:function(n,r,i){return`
      M ${n} ${r-i}
      L ${n+i} ${r+i}
      L ${n-i} ${r+i}
      Z
    `;}};var yv=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let yy=(n="circle")=>yg[n]||yg.circle,y_=(n,r)=>{if(!r)return;let{coordinate:i}=r,{liquidOptions:a,styleOptions:o}=n,{liquidShape:s,percent:l}=a,{background:u,outline:c={},wave:f={}}=o,d=yv(o,["background","outline","wave"]),{border:h=2,distance:p=0}=c,m=yv(c,["border","distance"]),{length:g=192,count:v=3}=f;return(n,a,o)=>{let{document:c}=r.canvas,{color:f,fillOpacity:y}=o,_=Object.assign(Object.assign({fill:f},o),d),b=c.createElement("g",{}),[x,E]=i.getCenter(),w=i.getSize(),S=Math.min(...w)/2,T=((0,fn.default)(s)?s:yy(s))(x,E,S,...w);if(Object.keys(u).length){let n=c.createElement("path",{style:Object.assign({d:T,fill:"#fff"},u)});b.appendChild(n);}if(l>0){let n=c.createElement("path",{style:{d:T}});b.appendChild(n),b.style.clipPath=n,function(n,r,i,a,o,s,l,u,c,f,d){let{fill:h,fillOpacity:p,opacity:m}=o;for(let o=0;o<a;o++){let g=a<=1?1:o/(a-1),v=function(n,r,i,a,o,s,l){let u=4*Math.ceil(2*n/i*4),c=[],f=0;for(;f<-(2*Math.PI);)f+=2*Math.PI;for(;f>0;)f-=2*Math.PI;let d=s-n+(f=f/Math.PI/2*i)-2*n;c.push(["M",d,r]);let h=0;for(let n=0;n<u;++n){var p;let a=n%4,s=(p=n*i/4,0===a?[[p+.5*i/Math.PI/2,o/2],[p+.5*i/Math.PI,o],[p+i/4,o]]:1===a?[[p+.5*i/Math.PI/2*(Math.PI-2),o],[p+.5*i/Math.PI/2*(Math.PI-1),o/2],[p+i/4,0]]:2===a?[[p+.5*i/Math.PI/2,-o/2],[p+.5*i/Math.PI,-o],[p+i/4,-o]]:[[p+.5*i/Math.PI/2*(Math.PI-2),-o],[p+.5*i/Math.PI/2*(Math.PI-1),-o/2],[p+i/4,0]]);c.push(["C",s[0][0]+d,-s[0][1]+r,s[1][0]+d,-s[1][1]+r,s[2][0]+d,-s[2][1]+r]),n===u-1&&(h=s[2][0]);}return c.push(["L",h+d,l+n]),c.push(["L",d,l+n]),c.push(["Z"]),c;}(u,l+u*i,c,0,u/40,n,r),y=d.createElement("path",{style:{d:v,fill:h,opacity:(.2+.7*g)*Number(m||p)}});s.appendChild(y);try{if(!1===f)return;let n=[{transform:"translate(0, 0)"},{transform:`translate(${2*c}, 0)`}];y.animate(n,{duration:2*(2500+2500*g),iterations:1/0});}catch(n){console.warn("off-screen group animate error!");}}}(x,E,1-l,v,_,b,n.getBBox().y,2*S,g,!0,c);}let A=c.createElement("path",{style:{d:T,fill:"transparent",lineWidth:h+2*p,stroke:"#fff"}}),C=c.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:T,stroke:f,strokeOpacity:y,lineWidth:h},_),m),{fill:"transparent"})});return b.appendChild(A),b.appendChild(C),b;};};y_.props={};var yb=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let yx={axis:{x:!1,y:!1},legend:!1,tooltip:!1,encode:{x:"type",y:"percent"},scale:{y:{domain:[0,1]}},style:{shape:y_},animate:{enter:{type:"fadeIn"}}},yE={type:"text",style:{x:"50%",y:"50%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"},animate:{enter:{type:"fadeIn"}}},yw=n=>{let{data:r={},style:i={},animate:a}=n,o=yb(n,["data","style","animate"]),s=Math.max(0,(0,ns.default)(r)?r:null==r?void 0:r.percent),l=[{percent:s,type:"liquid"}],u=Object.assign(Object.assign({},(0,nA.subObject)(i,"text")),(0,nA.subObject)(i,"content")),c=(0,nA.subObject)(i,"outline"),f=(0,nA.subObject)(i,"wave"),d=(0,nA.subObject)(i,"background");return[(0,nS.default)({},yx,Object.assign({type:"interval",data:l,style:{liquidOptions:{percent:s,liquidShape:null==i?void 0:i.shape},styleOptions:Object.assign(Object.assign({},i),{outline:c,wave:f,background:d})},animate:a},o)),(0,nS.default)({},yE,{style:Object.assign({text:`${(0,re.prettyNumber)(100*s)} %`},u),animate:a})];};function yS(n,r){let i=function(n){let r=[];for(let i=0;i<n.length;++i)for(let a=i+1;a<n.length;++a){let o=yO(n[i],n[a]);for(let n=0;n<o.length;++n){let s=o[n];s.parentIndex=[i,a],r.push(s);}}return r;}(n),a=i.filter(function(r){return function(n,r){for(let i=0;i<r.length;++i)if(yA(n,r[i])>r[i].radius+1e-10)return!1;return!0;}(r,n);}),o=0,s=0,l,u=[];if(a.length>1){let r=function(n){let r={x:0,y:0};for(let i=0;i<n.length;++i)r.x+=n[i].x,r.y+=n[i].y;return r.x/=n.length,r.y/=n.length,r;}(a);for(l=0;l<a.length;++l){let n=a[l];n.angle=Math.atan2(n.x-r.x,n.y-r.y);}a.sort(function(n,r){return r.angle-n.angle;});let i=a[a.length-1];for(l=0;l<a.length;++l){let r=a[l];s+=(i.x+r.x)*(r.y-i.y);let c={x:(r.x+i.x)/2,y:(r.y+i.y)/2},f=null;for(let a=0;a<r.parentIndex.length;++a)if(i.parentIndex.indexOf(r.parentIndex[a])>-1){let o=n[r.parentIndex[a]],s=Math.atan2(r.x-o.x,r.y-o.y),l=Math.atan2(i.x-o.x,i.y-o.y),u=l-s;u<0&&(u+=2*Math.PI);let d=l-u/2,h=yA(c,{x:o.x+o.radius*Math.sin(d),y:o.y+o.radius*Math.cos(d)});h>2*o.radius&&(h=2*o.radius),(null===f||f.width>h)&&(f={circle:o,width:h,p1:r,p2:i});}null!==f&&(u.push(f),o+=yT(f.circle.radius,f.width),i=r);}}else{let r=n[0];for(l=1;l<n.length;++l)n[l].radius<r.radius&&(r=n[l]);let i=!1;for(l=0;l<n.length;++l)if(yA(n[l],r)>Math.abs(r.radius-n[l].radius)){i=!0;break;}i?o=s=0:(o=r.radius*r.radius*Math.PI,u.push({circle:r,p1:{x:r.x,y:r.y+r.radius},p2:{x:r.x-1e-10,y:r.y+r.radius},width:2*r.radius}));}return s/=2,r&&(r.area=o+s,r.arcArea=o,r.polygonArea=s,r.arcs=u,r.innerPoints=a,r.intersectionPoints=i),o+s;}function yT(n,r){return n*n*Math.acos(1-r/n)-(n-r)*Math.sqrt(r*(2*n-r));}function yA(n,r){return Math.sqrt((n.x-r.x)*(n.x-r.x)+(n.y-r.y)*(n.y-r.y));}function yC(n,r,i){return i>=n+r?0:i<=Math.abs(n-r)?Math.PI*Math.min(n,r)*Math.min(n,r):yT(n,n-(i*i-r*r+n*n)/(2*i))+yT(r,r-(i*i-n*n+r*r)/(2*i));}function yO(n,r){let i=yA(n,r),a=n.radius,o=r.radius;if(i>=a+o||i<=Math.abs(a-o))return[];let s=(a*a-o*o+i*i)/(2*i),l=Math.sqrt(a*a-s*s),u=n.x+s*(r.x-n.x)/i,c=n.y+s*(r.y-n.y)/i,f=-(r.y-n.y)*(l/i),d=-(r.x-n.x)*(l/i);return[{x:u+f,y:c-d},{x:u-f,y:c+d}];}function yM(n){let r=Array(n);for(let i=0;i<n;++i)r[i]=0;return r;}function yR(n,r){return yM(n).map(()=>yM(r));}function yP(n,r){let i=0;for(let a=0;a<n.length;++a)i+=n[a]*r[a];return i;}function yk(n){return Math.sqrt(yP(n,n));}function yI(n,r,i){for(let a=0;a<r.length;++a)n[a]=r[a]*i;}function yL(n,r,i,a,o){for(let s=0;s<n.length;++s)n[s]=r*i[s]+a*o[s];}function yN(n,r,i){return Math.min(n,r)*Math.min(n,r)*Math.PI<=i+1e-10?Math.abs(n-r):function(n,r,i,a){let o=(a=a||{}).maxIterations||100,s=a.tolerance||1e-10,l=n(r),u=n(i),c=i-r;if(l*u>0)throw"Initial bisect points must have opposite signs";if(0===l)return r;if(0===u)return i;for(let i=0;i<o;++i){let i=r+(c/=2),a=n(i);if(a*l>=0&&(r=i),Math.abs(c)<s||0===a)return i;}return r+c;}(function(a){return yC(n,r,a)-i;},0,n+r);}function yD(n,r){let i=function(n,r){let i;let a=r&&r.lossFunction?r.lossFunction:yF,o={},s={};for(let r=0;r<n.length;++r){let a=n[r];1==a.sets.length&&(o[i=a.sets[0]]={x:1e10,y:1e10,rowid:Object.keys(o).length,size:a.size,radius:Math.sqrt(a.size/Math.PI)},s[i]=[]);}n=n.filter(function(n){return 2==n.sets.length;});for(let r=0;r<n.length;++r){let i=n[r],a=i.hasOwnProperty("weight")?i.weight:1,l=i.sets[0],u=i.sets[1];i.size+1e-10>=Math.min(o[l].size,o[u].size)&&(a=0),s[l].push({set:u,size:i.size,weight:a}),s[u].push({set:l,size:i.size,weight:a});}let l=[];for(i in s)if(s.hasOwnProperty(i)){let n=0;for(let r=0;r<s[i].length;++r)n+=s[i][r].size*s[i][r].weight;l.push({set:i,size:n});}function u(n,r){return r.size-n.size;}l.sort(u);let c={};function f(n){return n.set in c;}function d(n,r){o[r].x=n.x,o[r].y=n.y,c[r]=!0;}d({x:0,y:0},l[0].set);for(let r=1;r<l.length;++r){let c=l[r].set,h=s[c].filter(f);if(i=o[c],h.sort(u),0===h.length)throw"ERROR: missing pairwise overlap information";let p=[];for(let n=0;n<h.length;++n){let r=o[h[n].set],a=yN(i.radius,r.radius,h[n].size);p.push({x:r.x+a,y:r.y}),p.push({x:r.x-a,y:r.y}),p.push({y:r.y+a,x:r.x}),p.push({y:r.y-a,x:r.x});for(let s=n+1;s<h.length;++s){let n=o[h[s].set],l=yN(i.radius,n.radius,h[s].size),u=yO({x:r.x,y:r.y,radius:a},{x:n.x,y:n.y,radius:l});for(let n=0;n<u.length;++n)p.push(u[n]);}}let m=1e50,g=p[0];for(let r=0;r<p.length;++r){o[c].x=p[r].x,o[c].y=p[r].y;let i=a(o,n);i<m&&(m=i,g=p[r]);}d(g,c);}return o;}(n,r),a=r.lossFunction||yF;if(n.length>=8){let o=function(n,r){let i,a,o;let s=(r=r||{}).restarts||10,l=[],u={};for(i=0;i<n.length;++i){let r=n[i];1==r.sets.length&&(u[r.sets[0]]=l.length,l.push(r));}let c=function(n,r,i){let a=yR(r.length,r.length),o=yR(r.length,r.length);return n.filter(function(n){return 2==n.sets.length;}).map(function(n){let s=i[n.sets[0]],l=i[n.sets[1]],u=yN(Math.sqrt(r[s].size/Math.PI),Math.sqrt(r[l].size/Math.PI),n.size);a[s][l]=a[l][s]=u;let c=0;n.size+1e-10>=Math.min(r[s].size,r[l].size)?c=1:n.size<=1e-10&&(c=-1),o[s][l]=o[l][s]=c;}),{distances:a,constraints:o};}(n,l,u),f=c.distances,d=c.constraints,h=yk(f.map(yk))/f.length;f=f.map(function(n){return n.map(function(n){return n/h;});});let p=function(n,r){return function(n,r,i,a){let o=0,s;for(s=0;s<r.length;++s)r[s]=0;for(s=0;s<i.length;++s){let l=n[2*s],u=n[2*s+1];for(let c=s+1;c<i.length;++c){let f=n[2*c],d=n[2*c+1],h=i[s][c],p=a[s][c],m=(f-l)*(f-l)+(d-u)*(d-u),g=Math.sqrt(m),v=m-h*h;p>0&&g<=h||p<0&&g>=h||(o+=2*v*v,r[2*s]+=4*v*(l-f),r[2*s+1]+=4*v*(u-d),r[2*c]+=4*v*(f-l),r[2*c+1]+=4*v*(d-u));}}return o;}(n,r,f,d);};for(i=0;i<s;++i)o=function(n,r,i){let a,o={x:r.slice(),fx:0,fxprime:r.slice()},s={x:r.slice(),fx:0,fxprime:r.slice()},l=r.slice(),u=1,c=(i=i||{}).maxIterations||20*r.length;o.fx=n(o.x,o.fxprime);let f=o.fxprime.slice();yI(f,o.fxprime,-1);for(let r=0;r<c;++r){if(u=function(n,r,i,a,o,s,l){let u=i.fx,c=yP(i.fxprime,r),f=u,d=u,h=c,p=0;function m(d,p,m){for(let g=0;g<16;++g)if(o=(d+p)/2,yL(a.x,1,i.x,o,r),f=a.fx=n(a.x,a.fxprime),h=yP(a.fxprime,r),f>u+s*o*c||f>=m)p=o;else{if(Math.abs(h)<=-l*c)return o;h*(p-d)>=0&&(p=d),d=o,m=f;}return 0;}o=o||1,s=s||1e-6,l=l||.1;for(let g=0;g<10;++g){if(yL(a.x,1,i.x,o,r),f=a.fx=n(a.x,a.fxprime),h=yP(a.fxprime,r),f>u+s*o*c||g&&f>=d)return m(p,o,d);if(Math.abs(h)<=-l*c)break;if(h>=0)return m(o,p,f);d=f,p=o,o*=2;}return o;}(n,f,o,s,u),i.history&&i.history.push({x:o.x.slice(),fx:o.fx,fxprime:o.fxprime.slice(),alpha:u}),u){yL(l,1,s.fxprime,-1,o.fxprime);let n=yP(o.fxprime,o.fxprime);yL(f,Math.max(0,yP(l,s.fxprime)/n),f,-1,s.fxprime),a=o,o=s,s=a;}else yI(f,o.fxprime,-1);if(1e-5>=yk(o.fxprime))break;}return i.history&&i.history.push({x:o.x.slice(),fx:o.fx,fxprime:o.fxprime.slice(),alpha:u}),o;}(p,yM(2*f.length).map(Math.random),r),(!a||o.fx<a.fx)&&(a=o);let m=a.x,g={};for(i=0;i<l.length;++i){let n=l[i];g[n.sets[0]]={x:m[2*i]*h,y:m[2*i+1]*h,radius:Math.sqrt(n.size/Math.PI)};}if(r.history)for(i=0;i<r.history.length;++i)yI(r.history[i].x,h);return g;}(n,r);a(o,n)+1e-8<a(i,n)&&(i=o);}return i;}function yF(n,r){let i=0;for(let a=0;a<r.length;++a){let o;let s=r[a];if(1!=s.sets.length){if(2==s.sets.length){let r=n[s.sets[0]],i=n[s.sets[1]];o=yC(r.radius,i.radius,yA(r,i));}else o=yS(s.sets.map(function(r){return n[r];}));i+=(s.hasOwnProperty("weight")?s.weight:1)*(o-s.size)*(o-s.size);}}return i;}yw.props={};let yB=n=>{let{sets:r="sets",size:i="size",as:a=["key","path"],padding:o=0}=n,[s,l]=a;return n=>{let a;let u=n.map(n=>Object.assign(Object.assign({},n),{sets:n[r],size:n[i],[s]:n.sets.join("&")}));u.sort((n,r)=>n.sets.length-r.sets.length);let c=function(n,r){let i;(r=r||{}).maxIterations=r.maxIterations||500;let a=r.initialLayout||yD,o=r.lossFunction||yF,s=a(n=function(n){let r,i,a,o;n=n.slice();let s=[],l={};for(r=0;r<n.length;++r){let i=n[r];1==i.sets.length?s.push(i.sets[0]):2==i.sets.length&&(l[[a=i.sets[0],o=i.sets[1]]]=!0,l[[o,a]]=!0);}for(s.sort((n,r)=>n>r?1:-1),r=0;r<s.length;++r)for(a=s[r],i=r+1;i<s.length;++i)[a,o=s[i]]in l||n.push({sets:[a,o],size:0});return n;}(n),r),l=[],u=[];for(i in s)s.hasOwnProperty(i)&&(l.push(s[i].x),l.push(s[i].y),u.push(i));let c=function(n,r,i){let a;let o=(i=i||{}).maxIterations||200*r.length,s=i.nonZeroDelta||1.05,l=i.zeroDelta||.001,u=i.minErrorDelta||1e-6,c=i.minErrorDelta||1e-5,f=void 0!==i.rho?i.rho:1,d=void 0!==i.chi?i.chi:2,h=void 0!==i.psi?i.psi:-.5,p=void 0!==i.sigma?i.sigma:.5,m=r.length,g=Array(m+1);g[0]=r,g[0].fx=n(r),g[0].id=0;for(let i=0;i<m;++i){let a=r.slice();a[i]=a[i]?a[i]*s:l,g[i+1]=a,g[i+1].fx=n(a),g[i+1].id=i+1;}function v(n){for(let r=0;r<n.length;r++)g[m][r]=n[r];g[m].fx=n.fx;}let y=(n,r)=>n.fx-r.fx,_=r.slice(),b=r.slice(),x=r.slice(),E=r.slice();for(let r=0;r<o;++r){if(g.sort(y),i.history){let n=g.map(n=>{let r=n.slice();return r.fx=n.fx,r.id=n.id,r;});n.sort((n,r)=>n.id-r.id),i.history.push({x:g[0].slice(),fx:g[0].fx,simplex:n});}a=0;for(let n=0;n<m;++n)a=Math.max(a,Math.abs(g[0][n]-g[1][n]));if(Math.abs(g[0].fx-g[m].fx)<u&&a<c)break;for(let n=0;n<m;++n){_[n]=0;for(let r=0;r<m;++r)_[n]+=g[r][n];_[n]/=m;}let r=g[m];if(yL(b,1+f,_,-f,r),b.fx=n(b),b.fx<g[0].fx)yL(E,1+d,_,-d,r),E.fx=n(E),v(E.fx<b.fx?E:b);else if(b.fx>=g[m-1].fx){let i=!1;if(b.fx>r.fx?(yL(x,1+h,_,-h,r),x.fx=n(x),x.fx<r.fx?v(x):i=!0):(yL(x,1-h*f,_,h*f,r),x.fx=n(x),x.fx<b.fx?v(x):i=!0),i){if(p>=1)break;for(let r=1;r<g.length;++r)yL(g[r],1-p,g[0],p,g[r]),g[r].fx=n(g[r]);}}else v(b);}return g.sort(y),{fx:g[0].fx,x:g[0]};}(function(r){let i={};for(let n=0;n<u.length;++n){let a=u[n];i[a]={x:r[2*n],y:r[2*n+1],radius:s[a].radius};}return o(i,n);},l,r).x;for(let n=0;n<u.length;++n)s[i=u[n]].x=c[2*n],s[i].y=c[2*n+1];return s;}(u);return u.map(n=>{let i=n[r];return Object.assign(Object.assign({},n),{[l]:({width:n,height:r})=>{a=a||function(n,r,i,a){let o=[],s=[];for(let r in n)n.hasOwnProperty(r)&&(s.push(r),o.push(n[r]));r-=2*a,i-=2*a;let l=function(n){let r=function(r){return{max:Math.max.apply(null,n.map(function(n){return n[r]+n.radius;})),min:Math.min.apply(null,n.map(function(n){return n[r]-n.radius;}))};};return{xRange:r("x"),yRange:r("y")};}(o),u=l.xRange,c=l.yRange;if(u.max==u.min||c.max==c.min)return console.log("not scaling solution: zero size detected"),n;let f=r/(u.max-u.min),d=Math.min(i/(c.max-c.min),f),h=(r-(u.max-u.min)*d)/2,p=(i-(c.max-c.min)*d)/2,m={};for(let n=0;n<o.length;++n){let r=o[n];m[s[n]]={radius:d*r.radius,x:a+h+(r.x-u.min)*d,y:a+p+(r.y-c.min)*d};}return m;}(c,n,r,o);let s=function(n){let r={};yS(n,r);let i=r.arcs;if(0===i.length)return"M 0 0";if(1==i.length){let n=i[0].circle;return function(n,r,i){let a=[],o=n-i;return a.push("M",o,r),a.push("A",i,i,0,1,0,o+2*i,r),a.push("A",i,i,0,1,0,o,r),a.join(" ");}(n.x,n.y,n.radius);}{let n=["\nM",i[0].p2.x,i[0].p2.y];for(let r=0;r<i.length;++r){let a=i[r],o=a.circle.radius,s=a.width>o;n.push("\nA",o,o,0,s?1:0,1,a.p1.x,a.p1.y);}return n.join(" ");}}(i.map(n=>a[n]));return/[zZ]$/.test(s)||(s+=" Z"),s;}});});};};yB.props={};var yj=this&&this.__assign||function(){return(yj=Object.assign||function(n){for(var r,i=1,a=arguments.length;i<a;i++)for(var o in r=arguments[i])Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n;}).apply(this,arguments);},yz=(g=class extends is{constructor(n){let{container:r,canvas:i,renderer:a,plugins:o,lib:s,createCanvas:l}=n;super(ih(n,["container","canvas","renderer","plugins","lib","createCanvas"]),"view"),this._hasBindAutoFit=!1,this._rendering=!1,this._trailingClear=null,this._trailing=!1,this._trailingResolve=null,this._trailingReject=null,this._previousDefinedType=null,this._onResize=(0,ny.default)(()=>{this.forceFit();},300),this._renderer=a||new nh,this._plugins=o||[],this._container=function(n){if(void 0===n){let n=document.createElement("div");return n[r5]=!0,n;}return"string"==typeof n?document.getElementById(n):n;}(r),this._emitter=new eP.default,this._context={library:Object.assign(Object.assign({},s),ic.library),emitter:this._emitter,canvas:i,createCanvas:l},this._create();}render(){let n,r;if(this._rendering)return this._addToTrailing();this._context.canvas||this._createCanvas(),this._bindAutoFit(),this._rendering=!0;let i=new Promise((n,r)=>(function(n,r={},i=()=>{},a=n=>{throw n;}){var o;let s=function n(r,i=!0){if(Array.isArray(r))return r.map((a,o)=>n(r[o],i));if("object"==typeof r&&r)return nX(r,(r,a)=>i&&n$.includes(a)?n(r,"children"===a):i?r:n(r,!1));if("string"==typeof r){let n=r.trim();if(n.startsWith("{")&&n.endsWith("}"))return nY(n.slice(1,-1));}return r;}(n),{width:l=640,height:u=480,depth:c=0}=s,f=function(n){let r=(0,nS.default)({},n),i=new Map([[r,null]]),a=new Map([[null,-1]]),o=[r];for(;o.length;){let n=o.shift();if(void 0===n.key){let r=i.get(n),o=a.get(n),s=null===r?"0":`${r.key}-${o}`;n.key=s;}let{children:r=[]}=n;if(Array.isArray(r))for(let s=0;s<r.length;s++){let l=(0,nS.default)({},r[s]);r[s]=l,i.set(l,n),a.set(l,s),o.push(l);}}return r;}(function n(r){let i=(function(...n){return r=>n.reduce((n,r)=>r(n),r);})(rZ)(r);return i.children&&Array.isArray(i.children)&&(i.children=i.children.map(r=>n(r))),i;}(s)),{canvas:d=function(n,r){let i=new nh;return i.registerPlugin(new ng),new eL.Canvas({width:n,height:r,container:document.createElement("div"),renderer:i});}(l,u),emitter:h=new eP.default,library:p}=r;r.canvas=d,r.emitter=h;let{width:m,height:g}=d.getConfig();(m!==l||g!==u)&&d.resize(l,u),h.emit(ek.ChartEvent.BEFORE_RENDER);let v=(0,nT.select)(d.document.documentElement);return d.ready.then(()=>(function n(r,i,a){var o;return rR(this,void 0,void 0,function*(){let{library:s}=a,[l]=(0,rr.useLibrary)("composition",s),[u]=(0,rr.useLibrary)("interaction",s),c=new Set(Object.keys(s).map(n=>{var r;return null===(r=/mark\.(.*)/.exec(n))||void 0===r?void 0:r[1];}).filter(nA.defined)),f=new Set(Object.keys(s).map(n=>{var r;return null===(r=/component\.(.*)/.exec(n))||void 0===r?void 0:r[1];}).filter(nA.defined)),d=n=>{let{type:r}=n;if("function"==typeof r){let{props:n={}}=r,{composite:i=!0}=n;if(i)return"mark";}return"string"!=typeof r?r:c.has(r)||f.has(r)?"mark":r;},h=n=>"mark"===d(n),p=n=>"standardView"===d(n),m=n=>{let{type:r}=n;return"string"==typeof r&&!!f.has(r);},g=n=>p(n)?[n]:l({type:d(n),static:m(n)})(n),v=[],y=new Map,_=new Map,b=[r],x=[];for(;b.length;){let n=b.shift();if(p(n)){let r=_.get(n),[i,o]=r?rD(r,n,s):yield rI(n,a);y.set(i,n),v.push(i);let l=o.flatMap(g).map(n=>(0,rn.coordinate2Transform)(n,s));if(b.push(...l),l.every(p)){let n=yield Promise.all(l.map(n=>rL(n,a)));(0,ri.syncFacetsScales)(n);for(let r=0;r<l.length;r++){let i=l[r],a=n[r];_.set(i,a);}}}else{let r=g(h(n)?n:yield rH(n,a));Array.isArray(r)?b.push(...r):"function"==typeof r&&x.push(r());}}a.emitter.emit(ek.ChartEvent.BEFORE_PAINT);let E=new Map,w=new Map,S=[];i.selectAll(r$(r_.VIEW_CLASS_NAME)).data(v,n=>n.key).join(n=>n.append("g").attr("className",r_.VIEW_CLASS_NAME).attr("id",n=>n.key).call(rk).each(function(n,r,i){rF(n,(0,nT.select)(i),S,a),E.set(n,i);}),n=>n.call(rk).each(function(n,r,i){rF(n,(0,nT.select)(i),S,a),w.set(n,i);}),n=>n.each(function(n,r,i){for(let n of i.nameInteraction.values())n.destroy();}).remove());let T=(r,i,o)=>Array.from(r.entries()).map(([s,l])=>{let u=o||new Map,c=y.get(s),f=function(r,i,a){let{library:o}=a,s=function(n){let[,r]=(0,rr.useLibrary)("interaction",n);return n=>{let[i,a]=n;try{return[i,r(i)];}catch(n){return[i,a.type];}};}(o),l=rG(i).map(s).filter(n=>n[1]&&n[1].props&&n[1].props.reapplyWhenUpdate).map(n=>n[0]);return(i,o,s)=>rR(this,void 0,void 0,function*(){let[u,c]=yield rI(i,a);for(let n of(rF(u,r,[],a),l.filter(n=>n!==o)))!function(n,r,i,a,o){var s;let{library:l}=o,[u]=(0,rr.useLibrary)("interaction",l),c=r.node().nameInteraction,f=rG(i).find(([r])=>r===n),d=c.get(n);if(!d||(null===(s=d.destroy)||void 0===s||s.call(d),!f[1]))return;let h=rN(a,n,f[1],u)({options:i,view:a,container:r.node(),update:n=>Promise.resolve(n)},[],o.emitter);c.set(n,{destroy:h});}(n,r,i,u,a);for(let i of c)n(i,r,a);return s(),{options:i,view:u};});}((0,nT.select)(l),c,a);return{view:s,container:l,options:c,setState:(n,r=n=>n)=>u.set(n,r),update:(n,a)=>rR(this,void 0,void 0,function*(){let o=(0,nA.compose)(Array.from(u.values()))(c);return yield f(o,n,()=>{(0,nJ.default)(a)&&i(r,a,u);});})};}),A=(n=w,r,i)=>{var o;let s=T(n,A,i);for(let n of s){let{options:i,container:l}=n,c=l.nameInteraction,f=rG(i);for(let i of(r&&(f=f.filter(n=>r.includes(n[0]))),f)){let[r,l]=i,f=c.get(r);if(f&&(null===(o=f.destroy)||void 0===o||o.call(f)),l){let i=rN(n.view,r,l,u)(n,s,a.emitter);c.set(r,{destroy:i});}}}},C=T(E,A);for(let n of C){let{options:r}=n,i=new Map;for(let o of(n.container.nameInteraction=i,rG(r))){let[r,s]=o;if(s){let o=rN(n.view,r,s,u)(n,C,a.emitter);i.set(r,{destroy:o});}}}A();let{width:O,height:M}=r,R=[];for(let r of x){let o=new Promise(o=>rR(this,void 0,void 0,function*(){for(let o of r){let r=Object.assign({width:O,height:M},o);yield n(r,i,a);}o();}));R.push(o);}return a.views=v,null===(o=a.animations)||void 0===o||o.forEach(n=>null==n?void 0:n.cancel()),a.animations=S,a.emitter.emit(ek.ChartEvent.AFTER_PAINT),Promise.all([...S.filter(nA.defined).map(rU).map(n=>n.finished),...R]);});})(Object.assign(Object.assign({},f),{width:l,height:u,depth:c}),v,r)).then(()=>{if(c){let[n,r]=d.document.documentElement.getPosition();d.document.documentElement.setPosition(n,r,-c/2);}d.requestAnimationFrame(()=>{d.requestAnimationFrame(()=>{h.emit(ek.ChartEvent.AFTER_RENDER),null==i||i();});});}).catch(n=>{null==a||a(n);}),"string"==typeof(o=d.getConfig().container)?document.getElementById(o):o;})(this._computedOptions(),this._context,this._createResolve(n),this._createReject(r))),[a,o,s]=[new Promise((i,a)=>{r=i,n=a;}),r,n];return i.then(o).then(()=>{if(this._trailingClear){let n=this.options();this._trailingClear(),this._trailing&&this.options(n);}}).catch(s).then(()=>{this._trailingClear=null,this._renderTrailing();}),a;}options(n){if(0==arguments.length)return function(n){let r=function(n){if(null!==n.type)return n;let r=n.children[n.children.length-1];for(let i of r4)r.attr(i,n.attr(i));return r;}(n),i=[r],a=new Map;for(a.set(r,r8(r));i.length;){let n=i.pop(),r=a.get(n),{children:o=[]}=n;for(let n of o)if(n.type===r6)r.children=n.value;else{let o=r8(n),{children:s=[]}=r;s.push(o),i.push(n),a.set(n,o),r.children=s;}}return a.get(r);}(this);let{type:r}=n;return r&&(this._previousDefinedType=r),function(n,r,i,a,o){let s=function(n,r,i,a,o){let{type:s}=n,{type:l=i||s}=r;if("function"!=typeof l&&new Set(Object.keys(o)).has(l)){for(let i of r4)void 0!==n.attr(i)&&void 0===r[i]&&(r[i]=n.attr(i));return r;}if("function"==typeof l||new Set(Object.keys(a)).has(l)){let n={type:"view"},i=Object.assign({},r);for(let r of r4)void 0!==i[r]&&(n[r]=i[r],delete i[r]);return Object.assign(Object.assign({},n),{children:[i]});}return r;}(n,r,i,a,o),l=[[null,n,s]];for(;l.length;){let[n,r,i]=l.shift();if(r){if(i){!function(n,r){let{type:i,children:a}=r,o=r3(r,["type","children"]);n.type===i||void 0===i?(0,nA.deepAssign)(n.value,o):"string"==typeof i&&(n.type=i,n.value=o);}(r,i);let{children:n}=i,{children:a}=r;if(Array.isArray(n)&&Array.isArray(a)){let i=Math.max(n.length,a.length);for(let o=0;o<i;o++){let i=n[o],s=a[o];l.push([r,s,i]);}}else"function"==typeof n&&l.push([r,null,n]);}else r.remove();}else!function(n,r,i,a){if(!n)return;let o=[[n,r]];for(;o.length;){let[n,r]=o.shift(),s=function(n,r,i){if("function"==typeof n){let r=new r2;return r.value=n,r.type=r6,r;}let{type:a,children:o}=n,s=r3(n,["type","children"]),l=new(function(n,r,i){if("function"==typeof n)return r.mark;let a=Object.assign(Object.assign({},r),i)[n];if(!a)throw Error(`Unknown mark: ${n}.`);return a;}(a,r,i));return l.value=s,l.type=a,l;}(r,i,a);Array.isArray(n.children)&&n.push(s);let{children:l}=r;if(Array.isArray(l))for(let n of l)o.push([s,n]);else"function"==typeof l&&o.push([s,l]);}}(n,i,a,o);}}(this,n,this._previousDefinedType,this._marks,this._compositions),this;}getContainer(){return this._container;}getContext(){return this._context;}on(n,r,i){return this._emitter.on(n,r,i),this;}once(n,r){return this._emitter.once(n,r),this;}emit(n,...r){return this._emitter.emit(n,...r),this;}off(n,r){return this._emitter.off(n,r),this;}clear(n=!0){if(this._rendering){this._trailingClear=()=>{this.clear(n);},this._reset();return;}let r=this.options();this.emit(ek.ChartEvent.BEFORE_CLEAR),this._reset(),rK(r,this._context,!1,n),this.emit(ek.ChartEvent.AFTER_CLEAR);}destroy(){let n=this.options();this.emit(ek.ChartEvent.BEFORE_DESTROY),this._unbindAutoFit(),this._reset(),rK(n,this._context,!0),this._container[r5]&&function(n){let r=n.parentNode;r&&r.removeChild(n);}(this._container),this.emit(ek.ChartEvent.AFTER_DESTROY);}forceFit(){this.options.autoFit=!0;let{width:n,height:r}=r7(this.options(),this._container);if(n===this._width&&r===this._height)return Promise.resolve(this);this.emit(ek.ChartEvent.BEFORE_CHANGE_SIZE);let i=this.render();return i.then(()=>{this.emit(ek.ChartEvent.AFTER_CHANGE_SIZE);}),i;}changeSize(n,r){if(n===this._width&&r===this._height)return Promise.resolve(this);this.emit(ek.ChartEvent.BEFORE_CHANGE_SIZE),this.attr("width",n),this.attr("height",r);let i=this.render();return i.then(()=>{this.emit(ek.ChartEvent.AFTER_CHANGE_SIZE);}),i;}getDataByXY(n,r={}){let{shared:i=!1,series:a,facet:o=!1,startX:s=0,startY:l=0}=r,{canvas:u,views:c}=this._context,{document:f}=u,{x:d,y:h}=n,{coordinate:p,scale:m,markState:g,data:v,key:y}=c[0],_=f.getElementsByClassName(r_.ELEMENT_CLASS_NAME),b=i?n=>n.__data__.x:n=>n,x=(0,nE.default)(_,b),E=f.getElementsByClassName(r_.VIEW_CLASS_NAME)[0],w=(0,rJ.selectPlotArea)(E),S=n=>Array.from(n.values()).some(n=>{var r,i;return(null===(r=n.interaction)||void 0===r?void 0:r.seriesTooltip)||(null===(i=n.channels)||void 0===i?void 0:i.some(n=>"series"===n.name&&void 0!==n.values));}),T=(0,rQ.maybeValue)(a,S(g)),A=n=>(0,nb.default)(n,"__data__.data",null);try{if(T&&S(g)&&!o){let{selectedData:n}=(0,rQ.findSeriesElement)({root:w,event:{offsetX:d,offsetY:h},elements:_,coordinate:p,scale:m,startX:s,startY:l}),r=v.get(`${y}-0`);return n.map(({index:n})=>r[n]);}let n=(0,rQ.findSingleElement)({root:w,event:{offsetX:d,offsetY:h},elements:_,coordinate:p,scale:m,shared:i}),r=b(n),a=x.get(r);return a?a.map(A):[];}catch(r){let n=u.document.elementFromPointSync(d,h);return n?A(n):[];}}_create(){let{library:n}=this._context,r=["mark.mark",...Object.keys(n).filter(n=>n.startsWith("mark.")||"component.axisX"===n||"component.axisY"===n||"component.legends"===n)];for(let n of(this._marks={},r)){let r=n.split(".").pop();class i extends iu{constructor(){super({},r);}}this._marks[r]=i,this[r]=function(n){let a=this.append(i);return"mark"===r&&(a.type=n),a;};}let i=["composition.view",...Object.keys(n).filter(n=>n.startsWith("composition.")&&"composition.mark"!==n)];for(let n of(this._compositions=Object.fromEntries(i.map(n=>{let r=n.split(".").pop(),i=class extends is{constructor(){super({},r);}};return[r,i=id([ie(it(this._marks))],i)];})),Object.values(this._compositions)))ie(it(this._compositions))(n);for(let n of i){let r=n.split(".").pop();this[r]=function(){let n=this._compositions[r];return this.type=null,this.append(n);};}}_reset(){let n=["theme","type","width","height","autoFit"];this.type="view",this.value=Object.fromEntries(Object.entries(this.value).filter(([r])=>r.startsWith("margin")||r.startsWith("padding")||r.startsWith("inset")||n.includes(r))),this.children=[];}_renderTrailing(){this._trailing&&(this._trailing=!1,this.render().then(()=>{let n=this._trailingResolve.bind(this);this._trailingResolve=null,n(this);}).catch(n=>{let r=this._trailingReject.bind(this);this._trailingReject=null,r(n);}));}_createResolve(n){return()=>{this._rendering=!1,n(this);};}_createReject(n){return r=>{this._rendering=!1,n(r);};}_computedOptions(){let n=this.options(),{key:r="G2_CHART_KEY"}=n,{width:i,height:a,depth:o}=r7(n,this._container);return this._width=i,this._height=a,this._key=r,Object.assign(Object.assign({key:this._key},n),{width:i,height:a,depth:o});}_createCanvas(){let{width:n,height:r}=r7(this.options(),this._container);this._plugins.push(new ng),this._plugins.forEach(n=>this._renderer.registerPlugin(n)),this._context.canvas=new eL.Canvas({container:this._container,width:n,height:r,renderer:this._renderer});}_addToTrailing(){var n;return null===(n=this._trailingResolve)||void 0===n||n.call(this,this),this._trailing=!0,new Promise((n,r)=>{this._trailingResolve=n,this._trailingReject=r;});}_bindAutoFit(){let{autoFit:n}=this.options();if(this._hasBindAutoFit){n||this._unbindAutoFit();return;}n&&(this._hasBindAutoFit=!0,window.addEventListener("resize",this._onResize));}_unbindAutoFit(){this._hasBindAutoFit&&(this._hasBindAutoFit=!1,window.removeEventListener("resize",this._onResize));}},v=yj(yj({},Object.assign(Object.assign(Object.assign(Object.assign({},{"composition.geoView":go,"composition.geoPath":gl}),{"data.arc":vK,"data.cluster":vB,"mark.forceGraph":vk,"mark.tree":vH,"mark.pack":gY,"mark.sankey":gM,"mark.chord":v3,"mark.treemap":gD}),{"data.venn":yB,"mark.boxplot":ya,"mark.gauge":ym,"mark.wordCloud":sR,"mark.liquid":yw}),{"data.fetch":hw,"data.inline":hk,"data.sortBy":hS,"data.sort":hD,"data.filter":hA,"data.pick":hO,"data.rename":hM,"data.fold":hR,"data.slice":hP,"data.custom":hI,"data.map":hC,"data.join":hN,"data.kde":hj,"data.log":hz,"data.wordCloud":h6,"data.ema":hU,"transform.stackY":dl,"transform.binX":hc,"transform.bin":hu,"transform.dodgeX":dc,"transform.jitter":dx,"transform.jitterX":dE,"transform.jitterY":dw,"transform.symmetryY":dT,"transform.diffY":dA,"transform.stackEnter":df,"transform.normalizeY":d_,"transform.select":dI,"transform.selectX":dN,"transform.selectY":dF,"transform.groupX":dK,"transform.groupY":d2,"transform.groupColor":d3,"transform.group":dZ,"transform.sortX":dJ,"transform.sortY":d1,"transform.sortColor":d4,"transform.flexX":d0,"transform.pack":d5,"transform.sample":hd,"transform.filter":hh,"coordinate.cartesian":ip,"coordinate.polar":n7.Polar,"coordinate.transpose":im,"coordinate.theta":iv,"coordinate.parallel":iy,"coordinate.fisheye":i_,"coordinate.radial":n9.Radial,"coordinate.radar":ib,"coordinate.helix":ix,"encode.constant":iE,"encode.field":iw,"encode.transform":iS,"encode.column":iT,"mark.interval":iY,"mark.rect":iK,"mark.line":ag,"mark.point":aX,"mark.text":a4,"mark.cell":iN,"mark.area":om,"mark.link":oW,"mark.image":o_,"mark.polygon":oT,"mark.box":oP,"mark.vector":oL,"mark.lineX":oQ,"mark.lineY":o1,"mark.connector":o6,"mark.range":se,"mark.rangeX":sr,"mark.rangeY":so,"mark.path":sd,"mark.shape":sg,"mark.density":sb,"mark.heatmap":sA,"mark.wordCloud":sR,"palette.category10":sP,"palette.category20":sk,"scale.linear":sL,"scale.ordinal":sD,"scale.band":sB,"scale.identity":sG,"scale.point":sW,"scale.time":lx,"scale.log":lM,"scale.pow":lP,"scale.sqrt":lj,"scale.threshold":lI,"scale.quantile":lN,"scale.quantize":lF,"scale.sequential":lW,"scale.constant":lq,"theme.classic":lK,"theme.classicDark":l0,"theme.academy":l2,"theme.light":lZ,"theme.dark":lJ,"component.axisX":l4,"component.axisY":l5,"component.legendCategory":uP,"component.legendContinuous":uk.LegendContinuous,"component.legends":uY,"component.title":uD,"component.sliderX":uU,"component.sliderY":uV,"component.scrollbarX":uq,"component.scrollbarY":u$,"animation.scaleInX":uZ,"animation.scaleOutX":(n,r)=>{let{coordinate:i}=r;return(r,a,o)=>{let[s]=r,{transform:l="",fillOpacity:u=1,strokeOpacity:c=1,opacity:f=1}=s.style,[d,h]=(0,rS.isTranspose)(i)?["left bottom","scale(1, 0.0001)"]:["left top","scale(0.0001, 1)"],p=[{transform:`${l} scale(1, 1)`.trimStart(),transformOrigin:d},{transform:`${l} ${h}`.trimStart(),transformOrigin:d,fillOpacity:u,strokeOpacity:c,opacity:f,offset:.99},{transform:`${l} ${h}`.trimStart(),transformOrigin:d,fillOpacity:0,strokeOpacity:0,opacity:0}];return s.animate(p,Object.assign(Object.assign({},o),n));};},"animation.scaleInY":uK,"animation.scaleOutY":(n,r)=>{let{coordinate:i}=r;return(r,a,o)=>{let[s]=r,{transform:l="",fillOpacity:u=1,strokeOpacity:c=1,opacity:f=1}=s.style,[d,h]=(0,rS.isTranspose)(i)?["left top","scale(0.0001, 1)"]:["left bottom","scale(1, 0.0001)"],p=[{transform:`${l} scale(1, 1)`.trimStart(),transformOrigin:d},{transform:`${l} ${h}`.trimStart(),transformOrigin:d,fillOpacity:u,strokeOpacity:c,opacity:f,offset:.99},{transform:`${l} ${h}`.trimStart(),transformOrigin:d,fillOpacity:0,strokeOpacity:0,opacity:0}];return s.animate(p,Object.assign(Object.assign({},o),n));};},"animation.waveIn":uQ,"animation.fadeIn":uJ,"animation.fadeOut":u0,"animation.zoomIn":n=>(r,i,a)=>{let[o]=r,{transform:s="",fillOpacity:l=1,strokeOpacity:u=1,opacity:c=1}=o.style,f="center center",d=[{transform:`${s} scale(0.0001)`.trimStart(),transformOrigin:f,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${s} scale(0.0001)`.trimStart(),transformOrigin:f,fillOpacity:l,strokeOpacity:u,opacity:c,offset:.01},{transform:`${s} scale(1)`.trimStart(),transformOrigin:f,fillOpacity:l,strokeOpacity:u,opacity:c}];return o.animate(d,Object.assign(Object.assign({},a),n));},"animation.zoomOut":n=>(r,i,a)=>{let[o]=r,{transform:s="",fillOpacity:l=1,strokeOpacity:u=1,opacity:c=1}=o.style,f="center center",d=[{transform:`${s} scale(1)`.trimStart(),transformOrigin:f},{transform:`${s} scale(0.0001)`.trimStart(),transformOrigin:f,fillOpacity:l,strokeOpacity:u,opacity:c,offset:.99},{transform:`${s} scale(0.0001)`.trimStart(),transformOrigin:f,fillOpacity:0,strokeOpacity:0,opacity:0}];return o.animate(d,Object.assign(Object.assign({},a),n));},"animation.pathIn":cr,"animation.morphing":cn,"animation.growInX":ci,"animation.growInY":ca,"interaction.elementHighlight":cs,"interaction.elementHighlightByX":cl,"interaction.elementHighlightByColor":cu,"interaction.elementSelect":cd,"interaction.elementSelectByX":ch,"interaction.elementSelectByColor":cp,"interaction.fisheye":function({wait:n=30,leading:r,trailing:i=!1}){return a=>{let{options:o,update:s,setState:l,container:u}=a,c=(0,rJ.selectPlotArea)(u),f=(0,cg.default)(n=>{let r=(0,rJ.mousePosition)(c,n);if(!r){l("fisheye"),s();return;}l("fisheye",n=>{let i=(0,nS.default)({},n,{interaction:{tooltip:{preserve:!0}}});for(let n of i.marks)n.animate=!1;let[a,o]=r,s=function(n){let{coordinate:r={}}=n,{transform:i=[]}=r,a=i.find(n=>"fisheye"===n.type);if(a)return a;let o={type:"fisheye"};return i.push(o),r.transform=i,n.coordinate=r,o;}(i);return s.focusX=a,s.focusY=o,s.visual=!0,i;}),s();},n,{leading:r,trailing:i});return c.addEventListener("pointerenter",f),c.addEventListener("pointermove",f),c.addEventListener("pointerleave",f),()=>{c.removeEventListener("pointerenter",f),c.removeEventListener("pointermove",f),c.removeEventListener("pointerleave",f);};};},"interaction.chartIndex":cT,"interaction.tooltip":rQ.Tooltip,"interaction.legendFilter":function(){return(n,r,i)=>{let{container:a}=n,o=r.filter(r=>r!==n),s=o.length>0,l=n=>cI(n).scales.map(n=>n.name),u=[...cP(a),...ck(a)],c=u.flatMap(l),f=s?(0,cg.default)(cN,50,{trailing:!0}):(0,cg.default)(cL,50,{trailing:!0}),d=u.map(r=>{let{name:u,domain:d}=cI(r).scales[0],h=l(r),p={legend:r,channel:u,channels:h,allChannels:c};return r.className===cC?function(n,{legends:r,marker:i,label:a,datum:o,filter:s,emitter:l,channel:u,state:c={}}){let f=new Map,d=new Map,h=new Map,{unselected:p={markerStroke:"#aaa",markerFill:"#aaa",labelFill:"#aaa"}}=c,m={unselected:(0,nA.subObject)(p,"marker")},g={unselected:(0,nA.subObject)(p,"label")},{setState:v,removeState:y}=(0,rJ.useState)(m,void 0),{setState:_,removeState:b}=(0,rJ.useState)(g,void 0),x=Array.from(r(n)),E=x.map(o),w=()=>{for(let n of x){let r=o(n),s=i(n),l=a(n);E.includes(r)?(y(s,"unselected"),b(l,"unselected")):(v(s,"unselected"),_(l,"unselected"));}};for(let r of x){let i=()=>{(0,rJ.setCursor)(n,"pointer");},a=()=>{(0,rJ.restoreCursor)(n);},c=n=>cA(this,void 0,void 0,function*(){let i=o(r),a=E.indexOf(i);-1===a?E.push(i):E.splice(a,1),yield s(E),w();let{nativeEvent:c=!0}=n;c&&(E.length===x.length?l.emit("legend:reset",{nativeEvent:c}):l.emit("legend:filter",Object.assign(Object.assign({},n),{nativeEvent:c,data:{channel:u,values:E}})));});r.addEventListener("click",c),r.addEventListener("pointerenter",i),r.addEventListener("pointerout",a),f.set(r,c),d.set(r,i),h.set(r,a);}let S=n=>cA(this,void 0,void 0,function*(){let{nativeEvent:r}=n;if(r)return;let{data:i}=n,{channel:a,values:o}=i;a===u&&(E=o,yield s(E),w());}),T=n=>cA(this,void 0,void 0,function*(){let{nativeEvent:r}=n;r||(E=x.map(o),yield s(E),w());});return l.on("legend:filter",S),l.on("legend:reset",T),()=>{for(let n of x)n.removeEventListener("click",f.get(n)),n.removeEventListener("pointerenter",d.get(n)),n.removeEventListener("pointerout",h.get(n)),l.off("legend:filter",S),l.off("legend:reset",T);};}(a,{legends:cR,marker:cO,label:cM,datum:n=>{let{__data__:r}=n,{index:i}=r;return d[i];},filter:r=>{let i=Object.assign(Object.assign({},p),{value:r,ordinal:!0});s?f(o,i):f(n,i);},state:r.attributes.state,channel:u,emitter:i}):function(n,{legend:r,filter:i,emitter:a,channel:o}){let s=({detail:{value:n}})=>{i(n),a.emit({nativeEvent:!0,data:{channel:o,values:n}});};return r.addEventListener("valuechange",s),()=>{r.removeEventListener("valuechange",s);};}(0,{legend:r,filter:r=>{let i=Object.assign(Object.assign({},p),{value:r,ordinal:!1});s?f(o,i):f(n,i);},emitter:i,channel:u});});return()=>{d.forEach(n=>n());};};},"interaction.legendHighlight":function(){return(n,r,i)=>{let{container:a,view:o,options:s}=n,l=cP(a),u=(0,rJ.selectG2Elements)(a),c=n=>cI(n).scales[0].name,f=n=>{let{scale:{[n]:r}}=o;return r;},d=(0,rJ.mergeState)(s,["active","inactive"]),h=(0,rJ.createValueof)(u,(0,rJ.createDatumof)(o)),p=[];for(let n of l){let r=r=>{let{data:i}=n.attributes,{__data__:a}=r,{index:o}=a;return i[o].label;},a=c(n),o=cR(n),s=f(a),l=(0,nE.default)(u,n=>s.invert(n.__data__[a])),{state:m={}}=n.attributes,{inactive:g={}}=m,{setState:v,removeState:y}=(0,rJ.useState)(d,h),_={inactive:(0,nA.subObject)(g,"marker")},b={inactive:(0,nA.subObject)(g,"label")},{setState:x,removeState:E}=(0,rJ.useState)(_),{setState:w,removeState:S}=(0,rJ.useState)(b),T=n=>{for(let r of o){let i=cO(r),a=cM(r);r===n||null===n?(E(i,"inactive"),S(a,"inactive")):(x(i,"inactive"),w(a,"inactive"));}},A=(n,o)=>{let s=r(o),c=new Set(l.get(s));for(let n of u)c.has(n)?v(n,"active"):v(n,"inactive");T(o);let{nativeEvent:f=!0}=n;f&&i.emit("legend:highlight",Object.assign(Object.assign({},n),{nativeEvent:f,data:{channel:a,value:s}}));},C=new Map;for(let n of o){let r=r=>{A(r,n);};n.addEventListener("pointerover",r),C.set(n,r);}let O=n=>{for(let n of u)y(n,"inactive","active");T(null);let{nativeEvent:r=!0}=n;r&&i.emit("legend:unhighlight",{nativeEvent:r});},M=n=>{let{nativeEvent:i,data:s}=n;if(i)return;let{channel:l,value:u}=s;if(l!==a)return;let c=o.find(n=>r(n)===u);c&&A({nativeEvent:!1},c);},R=n=>{let{nativeEvent:r}=n;r||O({nativeEvent:!1});};n.addEventListener("pointerleave",O),i.on("legend:highlight",M),i.on("legend:unhighlight",R);let P=()=>{for(let[r,a]of(n.removeEventListener(O),i.off("legend:highlight",M),i.off("legend:unhighlight",R),C))r.removeEventListener(a);};p.push(P);}return()=>p.forEach(n=>n());};},"interaction.brushHighlight":cV,"interaction.brushXHighlight":function(n){return cV(Object.assign(Object.assign({},n),{brushRegion:cG,selectedHandles:["handle-e","handle-w"]}));},"interaction.brushYHighlight":function(n){return cV(Object.assign(Object.assign({},n),{brushRegion:cH,selectedHandles:["handle-n","handle-s"]}));},"interaction.brushAxisHighlight":function(n){return(r,i,a)=>{let{container:o,view:s,options:l}=r,{x:u,y:c}=(0,rJ.selectPlotArea)(o).getBBox(),{coordinate:f}=s;return function(n,r){var{axes:i,elements:a,points:o,horizontal:s,datum:l,offsetY:u,offsetX:c,reverse:f=!1,state:d={},emitter:h,coordinate:p}=r,m=cW(r,["axes","elements","points","horizontal","datum","offsetY","offsetX","reverse","state","emitter","coordinate"]);let g=a(n),v=i(n),y=(0,rJ.createValueof)(g,l),{setState:_,removeState:b}=(0,rJ.useState)(d,y),x=new Map,E=(0,nA.subObject)(m,"mask"),w=n=>Array.from(x.values()).every(([r,i,a,o])=>n.some(([n,s])=>n>=r&&n<=a&&s>=i&&s<=o)),S=v.map(n=>n.attributes.scale),T=n=>n.length>2?[n[0],n[n.length-1]]:n,A=new Map,C=()=>{A.clear();for(let n=0;n<v.length;n++){let{domain:r}=S[n].getOptions();A.set(n,T(r));}};C();let O=(n,r)=>{let i=[];for(let n of g)w(o(n))?(_(n,"active"),i.push(n)):_(n,"inactive");A.set(n,R(i,n)),r&&h.emit("brushAxis:highlight",{nativeEvent:!0,data:{selection:(()=>{if(!P)return Array.from(A.values());let n=[];for(let[r,i]of A){let{name:a}=S[r].getOptions();"x"===a?n[0]=i:n[1]=i;}return n;})()}});},M=n=>{for(let n of g)b(n,"active","inactive");C(),n&&h.emit("brushAxis:remove",{nativeEvent:!0});},R=(n,r)=>{let i=S[r],{name:a}=i.getOptions(),o=n.map(n=>{let r=n.__data__;return i.invert(r[a]);});return T((0,uB.domainOf)(i,o));},P=v.some(s)&&v.some(n=>!s(n)),k=[];for(let n=0;n<v.length;n++){let r=v[n],{hotZone:i,brushRegion:a,extent:o}=(s(r)?function(n,r){var{offsetY:i,offsetX:a,cross:o=!1}=r,s=cW(r,["offsetY","offsetX","cross"]);let l=cY(n),[,u]=c$(n).getLocalBounds().min,[c,f]=l.min,[d,h]=l.max,p=h-f;return{brushRegion:cG,hotZone:new eL.Rect({className:cX,style:Object.assign({width:d-c,height:o?p:2*p,transform:`translate(${c}, ${o?f:u-p})`},s)}),extent:o?(n,r,i,a)=>[n,-1/0,i,1/0]:(n,r,a,o)=>[n,Math.floor(f-i),a,Math.ceil(h-i)]};}:function(n,r){var{cross:i,offsetX:a,offsetY:o}=r,s=cW(r,["cross","offsetX","offsetY"]);let l=cY(n),[u]=c$(n).getLocalBounds().min,[c,f]=l.min,[d,h]=l.max,p=(d-c)*2;return{brushRegion:cH,hotZone:new eL.Rect({className:cX,style:Object.assign({width:i?p/2:p,transform:`translate(${(i?c:u-p/2).toFixed(2)}, ${f})`,height:h-f},s)}),extent:i?(n,r,i,a)=>[-1/0,r,1/0,a]:(n,r,i,o)=>[Math.floor(c-a),r,Math.ceil(d-a),o]};})(r,{offsetY:u,offsetX:c,cross:P,zIndex:999,fill:"transparent"});r.parentNode.appendChild(i);let l=cj(i,Object.assign(Object.assign({},E),{reverse:f,brushRegion:a,brushended(i){x.delete(r),0===Array.from(x.entries()).length?M(i):O(n,i);},brushed(i,a,s,l,u){x.set(r,o(i,a,s,l)),O(n,u);}}));k.push(l);}let I=(n={})=>{let{nativeEvent:r}=n;r||k.forEach(n=>n.remove(!1));},L=(n,r,i)=>{let[a,o]=n,l=N(a,r,i),u=N(o,r,i)+(r.getStep?r.getStep():0);return s(i)?[l,-1/0,u,1/0]:[-1/0,l,1/0,u];},N=(n,r,i)=>{let{height:a,width:o}=p.getOptions(),l=r.clone();return s(i)?l.update({range:[0,o]}):l.update({range:[a,0]}),l.map(n);},D=n=>{let{nativeEvent:r}=n;if(r)return;let{selection:i}=n.data;for(let n=0;n<k.length;n++){let r=i[n],a=k[n],o=v[n];if(r){let i=S[n];a.move(...L(r,i,o),!1);}else a.remove(!1);}};return h.on("brushAxis:remove",I),h.on("brushAxis:highlight",D),()=>{k.forEach(n=>n.destroy()),h.off("brushAxis:remove",I),h.off("brushAxis:highlight",D);};}(o,Object.assign({elements:rJ.selectG2Elements,axes:cq,offsetY:c,offsetX:u,points:n=>n.__data__.points,horizontal:n=>{let{startPos:[r,i],endPos:[a,o]}=n.attributes;return r!==a&&i===o;},datum:(0,rJ.createDatumof)(s),state:(0,rJ.mergeState)(l,["active",["inactive",{opacity:.5}]]),coordinate:f,emitter:a},n));};},"interaction.brushFilter":cQ,"interaction.brushXFilter":function(n){return cQ(Object.assign(Object.assign({hideX:!0},n),{brushRegion:cG}));},"interaction.brushYFilter":function(n){return cQ(Object.assign(Object.assign({hideY:!0},n),{brushRegion:cH}));},"interaction.sliderFilter":c1,"interaction.scrollbarFilter":function(n={}){return(r,i,a)=>{let{view:o,container:s}=r;if(!s.getElementsByClassName(c6).length)return()=>{};let{scale:l}=o,{x:u,y:c}=l,f={x:[...u.getOptions().domain],y:[...c.getOptions().domain]};return u.update({domain:u.getOptions().expectedDomain}),c.update({domain:c.getOptions().expectedDomain}),c1(Object.assign(Object.assign({},n),{initDomain:f,className:c6,prefix:"scrollbar",hasState:!0,setValue:(n,r)=>n.setValue(r[0]),getInitValues:n=>{let r=n.slider.attributes.values;if(0!==r[0])return r;}}))(r,i,a);};},"interaction.poptip":c5,"interaction.treemapDrillDown":function(n={}){let{originData:r=[],layout:i}=n,a=fc(n,["originData","layout"]),o=(0,nS.default)({},ff,a),s=(0,nA.subObject)(o,"breadCrumb"),l=(0,nA.subObject)(o,"active");return n=>{let{update:a,setState:o,container:u,options:c}=n,f=(0,nT.select)(u).select(`.${r_.PLOT_CLASS_NAME}`).node(),{state:d}=c.marks[0],h=new eL.Group;f.appendChild(h);let p=(n,c)=>fu(this,void 0,void 0,function*(){if(h.removeChildren(),c){let r="",i=s.y,a=0,o=[],u=f.getBBox().width,c=n.map((l,c)=>{r=`${r}${l}/`,o.push(l);let f=new eL.Text({name:r.replace(/\/$/,""),style:Object.assign(Object.assign({text:l,x:a,path:[...o],depth:c},s),{y:i})});h.appendChild(f),a+=f.getBBox().width;let d=new eL.Text({style:Object.assign(Object.assign({x:a,text:" / "},s),{y:i})});return h.appendChild(d),(a+=d.getBBox().width)>u&&(i=h.getBBox().height+s.y,a=0,f.attr({x:a,y:i}),a+=f.getBBox().width,d.attr({x:a,y:i}),a+=d.getBBox().width),c===(0,fs.default)(n)-1&&d.remove(),f;});c.forEach((n,r)=>{if(r===(0,fs.default)(c)-1)return;let i=Object.assign({},n.attributes);n.attr("cursor","pointer"),n.addEventListener("mouseenter",()=>{n.attr(l);}),n.addEventListener("mouseleave",()=>{n.attr(i);}),n.addEventListener("click",()=>{p((0,nb.default)(n,["style","path"]),(0,nb.default)(n,["style","depth"]));});});}(function(n,r){[...cP(n),...ck(n)].forEach(n=>{r(n,n=>n);});})(u,o),o("treemapDrillDown",a=>{let{marks:o}=a,s=n.join("/"),l=o.map(n=>{if("rect"!==n.type)return n;let a=r;if(c){let n=r.filter(n=>{let r=(0,nb.default)(n,["id"]);return r&&(r.match(`${s}/`)||s.match(r));}).map(n=>({value:0===n.height?(0,nb.default)(n,["value"]):void 0,name:(0,nb.default)(n,["id"])})),{paddingLeft:o,paddingBottom:l,paddingRight:u}=i,f=Object.assign(Object.assign({},i),{paddingTop:(i.paddingTop||h.getBBox().height+10)/(c+1),paddingLeft:o/(c+1),paddingBottom:l/(c+1),paddingRight:u/(c+1),path:n=>n.name,layer:n=>n.depth===c+1});a=(0,fl.treeDataTransform)(n,f,{value:"value"})[0];}else a=r.filter(n=>1===n.depth);let o=[];return a.forEach(({path:n})=>{o.push((0,uC.default)(n));}),(0,nS.default)({},n,{data:a,scale:{color:{domain:o}}});});return Object.assign(Object.assign({},a),{marks:l});}),yield a(void 0,["legendFilter"]);}),m=n=>n.attributes.key.split("-")[0],g=n=>(0,nb.default)(n,["__data__","key"]),v=n=>{let i=n.target,{markType:a,nodeName:o,attributes:s}=i||{};if("rect"!==a&&o!==eL.Shape.TEXT)return;let l=o===eL.Shape.TEXT&&!0===(0,nb.default)(s,"isTreemapLabel")?m(i):g(i),u=fa(r,n=>n.id===l);(0,nb.default)(u,"height")&&p((0,nb.default)(u,"path"),(0,nb.default)(u,"depth"));};f.addEventListener("click",v);let y=(0,fe.default)(Object.assign(Object.assign({},d.active),d.inactive)),_=()=>{(0,rJ.getElements)(f).forEach(n=>{let i=(0,nb.default)(n,["style","cursor"]),a=fa(r,r=>r.id===(0,nb.default)(n,["__data__","key"]));if("pointer"!==i&&(null==a?void 0:a.height)){n.style.cursor="pointer";let r=(0,c7.default)(n.attributes,y);n.addEventListener("mouseenter",()=>{n.attr(d.active);}),n.addEventListener("mouseleave",()=>{n.attr((0,nS.default)(r,d.inactive));});}});};return _(),f.addEventListener("mousemove",_),()=>{h.remove(),f.removeEventListener("click",v),f.removeEventListener("mousemove",_);};};},"interaction.elementPointMove":function(n={}){let{selection:r=[],precision:i=2}=n,a=fm(n,["selection","precision"]),o=Object.assign(Object.assign({},fg),a||{}),s=(0,nA.subObject)(o,"path"),l=(0,nA.subObject)(o,"label"),u=(0,nA.subObject)(o,"point");return(n,a,o)=>{let c;let{update:f,setState:d,container:h,view:p,options:{marks:m,coordinate:g}}=n,v=(0,rJ.selectPlotArea)(h),y=(0,rJ.getElements)(v),_=r,{transform:b=[],type:x}=g,E=!!fa(b,({type:n})=>"transpose"===n),w="polar"===x,S="theta"===x,T=!!fa(y,({markType:n})=>"area"===n);T&&(y=y.filter(({markType:n})=>"area"===n));let A=new eL.Group({style:{zIndex:2}});v.appendChild(A);let C=()=>{o.emit("element-point:select",{nativeEvent:!0,data:{selection:_}});},O=(n,r)=>{o.emit("element-point:moved",{nativeEvent:!0,data:{changeData:n,data:r}});},M=n=>{let r=n.target;_=[r.parentNode.childNodes.indexOf(r)],C(),P(r);},R=n=>{let{data:{selection:r},nativeEvent:i}=n;if(i)return;_=r;let a=(0,nb.default)(y,[null==_?void 0:_[0]]);a&&P(a);},P=n=>{let r;let{attributes:a,markType:o,__data__:g}=n,{stroke:v}=a,{points:y,seriesTitle:b,color:x,title:M,seriesX:R,y1:k}=g;if(E&&"interval"!==o)return;let{scale:I,coordinate:L}=(null==c?void 0:c.view)||p,{color:N,y:D,x:F}=I,B=L.getCenter();A.removeChildren();let j=(n,r,i,a)=>fp(this,void 0,void 0,function*(){return d("elementPointMove",o=>{var s;let l=((null===(s=null==c?void 0:c.options)||void 0===s?void 0:s.marks)||m).map(o=>{if(!a.includes(o.type))return o;let{data:s,encode:l}=o,u=Object.keys(l).reduce((a,o)=>{let s=l[o];return"x"===o&&(a[s]=n),"y"===o&&(a[s]=r),"color"===o&&(a[s]=i),a;},{}),c=fb(u,s,l);return O(u,c),(0,nS.default)({},o,{data:c,animate:!1});});return Object.assign(Object.assign({},o),{marks:l});}),yield f("elementPointMove");});if(["line","area"].includes(o))y.forEach((a,o)=>{let f=F.invert(R[o]);if(!f)return;let d=new eL.Circle({name:fv,style:Object.assign({cx:a[0],cy:a[1],fill:v},u)}),p=fE(n,o);d.addEventListener("mousedown",m=>{let g=L.output([R[o],0]),v=null==b?void 0:b.length;h.attr("cursor","move"),_[1]!==o&&(_[1]=o,C()),fw(A.childNodes,_,u);let[E,S]=fS(A,d,s,l),O=n=>{let s=a[1]+n.clientY-r[1];if(T){if(w){let[l,u]=fA(B,g,[a[0]+n.clientX-r[0],s]),[,c]=L.output([1,D.output(0)]),[,f]=L.invert([l,c-(y[o+v][1]-u)]),h=(o+1)%v,m=(o-1+v)%v,_=(0,rJ.getPointsPath)([y[m],[l,u],b[h]&&y[h]]);S.attr("text",p(D.invert(f)).toFixed(i)),E.attr("d",_),d.attr("cx",l),d.attr("cy",u);}else{let[,n]=L.output([1,D.output(0)]),[,r]=L.invert([a[0],n-(y[o+v][1]-s)]),l=(0,rJ.getPointsPath)([y[o-1],[a[0],s],b[o+1]&&y[o+1]]);S.attr("text",p(D.invert(r)).toFixed(i)),E.attr("d",l),d.attr("cy",s);}}else{let[,n]=L.invert([a[0],s]),r=(0,rJ.getPointsPath)([y[o-1],[a[0],s],y[o+1]]);S.attr("text",D.invert(n).toFixed(i)),E.attr("d",r),d.attr("cy",s);}};r=[m.clientX,m.clientY],window.addEventListener("mousemove",O);let M=()=>fp(this,void 0,void 0,function*(){if(h.attr("cursor","default"),window.removeEventListener("mousemove",O),h.removeEventListener("mouseup",M),(0,fh.default)(S.attr("text")))return;let r=Number(S.attr("text")),i=fT(N,x);c=yield j(f,r,i,["line","area"]),S.remove(),E.remove(),P(n);});h.addEventListener("mouseup",M);}),A.appendChild(d);}),fw(A.childNodes,_,u);else if("interval"===o){let a=[(y[0][0]+y[1][0])/2,y[0][1]];E?a=[y[0][0],(y[0][1]+y[1][1])/2]:S&&(a=y[0]);let f=fx(n),d=new eL.Circle({name:fv,style:Object.assign(Object.assign({cx:a[0],cy:a[1],fill:v},u),{stroke:u.activeStroke})});d.addEventListener("mousedown",u=>{h.attr("cursor","move");let p=fT(N,x),[m,g]=fS(A,d,s,l),v=n=>{if(E){let o=a[0]+n.clientX-r[0],[s]=L.output([D.output(0),D.output(0)]),[,l]=L.invert([s+(o-y[2][0]),a[1]]),u=(0,rJ.getPointsPath)([[o,y[0][1]],[o,y[1][1]],y[2],y[3]],!0);g.attr("text",f(D.invert(l)).toFixed(i)),m.attr("d",u),d.attr("cx",o);}else if(S){let o=a[1]+n.clientY-r[1],s=a[0]+n.clientX-r[0],[l,u]=fA(B,[s,o],a),[c,h]=fA(B,[s,o],y[1]),p=k-L.invert([l,u])[1];if(p<0)return;let v=(0,rJ.getThetaPath)(B,[[l,u],[c,h],y[2],y[3]],p>.5?1:0);g.attr("text",f(p,!0).toFixed(i)),m.attr("d",v),d.attr("cx",l),d.attr("cy",u);}else{let o=a[1]+n.clientY-r[1],[,s]=L.output([1,D.output(0)]),[,l]=L.invert([a[0],s-(y[2][1]-o)]),u=(0,rJ.getPointsPath)([[y[0][0],o],[y[1][0],o],y[2],y[3]],!0);g.attr("text",f(D.invert(l)).toFixed(i)),m.attr("d",u),d.attr("cy",o);}};r=[u.clientX,u.clientY],window.addEventListener("mousemove",v);let _=()=>fp(this,void 0,void 0,function*(){if(h.attr("cursor","default"),h.removeEventListener("mouseup",_),window.removeEventListener("mousemove",v),(0,fh.default)(g.attr("text")))return;let r=Number(g.attr("text"));c=yield j(M,r,p,[o]),g.remove(),m.remove(),P(n);});h.addEventListener("mouseup",_);}),A.appendChild(d);}};y.forEach((n,r)=>{_[0]===r&&P(n),n.addEventListener("click",M),n.addEventListener("mouseenter",fy),n.addEventListener("mouseleave",f_);});let k=n=>{let r=null==n?void 0:n.target;r&&(r.name===fv||y.includes(r))||(_=[],C(),A.removeChildren());};return o.on("element-point:select",R),o.on("element-point:unselect",k),h.addEventListener("mousedown",k),()=>{A.remove(),o.off("element-point:select",R),o.off("element-point:unselect",k),h.removeEventListener("mousedown",k),y.forEach(n=>{n.removeEventListener("click",M),n.removeEventListener("mouseenter",fy),n.removeEventListener("mouseleave",f_);});};};},"composition.spaceLayer":fM,"composition.spaceFlex":fP,"composition.facetRect":f$,"composition.repeatMatrix":()=>n=>[fL.of(n).call(fz).call(fF).call(f3).call(f4).call(fB).call(fj).call(f2).value()],"composition.facetCircle":()=>n=>[fL.of(n).call(fz).call(fQ).call(fF).call(fK).call(fU).call(fV,f0,fJ,fJ,{frame:!1}).call(fB).call(fj).call(fZ).value()],"composition.timingKeyframe":f5,"labelTransform.overlapHide":n=>{let{priority:r}=n;return n=>{let i=[];return r&&n.sort(r),n.forEach(n=>{(0,r9.show)(n);let r=n.getLocalBounds();i.some(n=>(function(n,r){let[i,a]=n,[o,s]=r;return i[0]<s[0]&&a[0]>o[0]&&i[1]<s[1]&&a[1]>o[1];})(h7(r),h7(n.getLocalBounds())))?(0,r9.hide)(n):i.push(n);}),n;};},"labelTransform.overlapDodgeY":n=>{let{maxIterations:r=10,maxError:i=.1,padding:a=1}=n;return n=>{let o=n.length;if(o<=1)return n;let[s,l]=h8(),[u,c]=h8(),[f,d]=h8(),[h,p]=h8();for(let r of n){let{min:n,max:i}=function(n){let r=n.cloneNode(!0),i=r.getElementById("connector");i&&r.removeChild(i);let{min:a,max:o}=r.getRenderBounds();return r.destroy(),{min:a,max:o};}(r),[a,o]=n,[s,u]=i;l(r,o),c(r,o),d(r,u-o),p(r,[a,s]);}for(let s=0;s<r;s++){n.sort((n,r)=>(0,rx.default)(u(n),u(r)));let r=0;for(let i=0;i<o-1;i++){let o;let s=n[i],l=i+1;for(;(o=n[l])&&!function([n,r],[i,a]){return a>n&&r>i;}(h(s),h(o));)l+=1;if(o){let n=u(s),i=f(s),l=u(o),d=l-(n+i);if(d<a){let i=(a-d)/2;r=Math.max(r,i),c(s,n-i),c(o,l+i);}}}if(r<i)break;}for(let r of n)r.style.y+=u(r)-s(r);return n;};},"labelTransform.overflowHide":()=>n=>(n.forEach(n=>{(0,r9.show)(n);let r=n.attr("bounds");pe(h7(n.getLocalBounds()),r)&&(0,r9.hide)(n);}),n),"labelTransform.contrastReverse":n=>{let{threshold:r=4.5,palette:i=["#000","#fff"]}=n;return n=>(n.forEach(n=>{let a=n.attr("dependentElement").parsedStyle.fill;pi(n.parsedStyle.fill,a)<r&&n.attr("fill",pa(a,i));}),n);},"labelTransform.overflowStroke":n=>{let{palette:r=["#000","#fff"],threshold:i=2}=n;return n=>(n.forEach(n=>{var a,o;let s=n.attr("dependentElement"),l=null!==(o=null!==(a=n.attributes.fill)&&void 0!==a?a:n.parsedStyle.fill)&&void 0!==o?o:"#fff";if(pe(h7(ps(n)),h7(ps(s)),i)){let i=pa(pt(l),r);n.attr("stroke",i);}else n.removeAttribute("stroke");}),n);},"labelTransform.exceedAdjust":(n={})=>(r,{canvas:i,layout:a})=>{let{bounds:o="view",offsetX:s=0,offsetY:l=0}=n,u=(()=>{if("main"===o){let{x:n=0,y:r=0,width:i=0,height:o=0,marginLeft:u=0,marginRight:c=0,marginTop:f=0,marginBottom:d=0,paddingLeft:h=0,paddingRight:p=0,paddingTop:m=0,paddingBottom:g=0}=a;return[[n+u+h+s,r+f+m+l],[n+i-c-p-s,r+o-d-g-l]];}{let{x:n=0,y:r=0,width:i=0,height:o=0}=a;return[[n+s,r+l],[n+i-s,r+o-l]];}})();return r.forEach(n=>{(0,r9.show)(n);let{max:r,min:i}=n.getRenderBounds(),[a,o]=r,[s,l]=i,c=po([[s,l],[a,o]],u);n.style.connector&&n.style.connectorPoints&&(n.style.connectorPoints[0][0]-=c[0],n.style.connectorPoints[0][1]-=c[1]),n.style.x+=c[0],n.style.y+=c[1];}),r;}})),(0,eI.plotlib)()),class extends g{constructor(n){super(Object.assign(Object.assign({},n),{lib:v}));}}),yU=i("2cb3cf04"),yV=this&&this.__extends||(y=function(n,r){return(y=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}y(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),yG=this&&this.__assign||function(){return(yG=Object.assign||function(n){for(var r,i=1,a=arguments.length;i<a;i++)for(var o in r=arguments[i])Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n;}).apply(this,arguments);},yH=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;},yW=function(n){function r(r){void 0===r&&(r={});var i=r.style,a=yH(r,["style"]);return n.call(this,yG({style:yG({text:"",fontSize:12,textBaseline:"middle",textAlign:"center",fill:"#000",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1},i)},a))||this;}return yV(r,n),r;}(eL.Text),yX=this&&this.__extends||(_=function(n,r){return(_=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}_(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),yq=this&&this.__assign||function(){return(yq=Object.assign||function(n){for(var r,i=1,a=arguments.length;i<a;i++)for(var o in r=arguments[i])Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n;}).apply(this,arguments);},y$=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;},yY=function(n){function r(r){void 0===r&&(r={});var i=r.style,a=y$(r,["style"]);return n.call(this,yq({style:yq({fill:"#eee"},i)},a))||this;}return yX(r,n),r;}(eL.Polygon),yZ=i("ae17acd2"),yK=this&&this.__extends||(b=function(n,r){return(b=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}b(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),yQ=function(n){function r(r,i,a){var o=n.call(this,{style:(0,yZ.mergeWithArrayCoverage)(a,i)})||this;return o.chart=r,o;}return yK(r,n),r.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this);},r.prototype.disconnectedCallback=function(){},r.prototype.attributeChangedCallback=function(n){},r.prototype.update=function(n,r){var i;return this.attr((0,yZ.mergeWithArrayCoverage)({},this.attributes,n||{})),null===(i=this.render)||void 0===i?void 0:i.call(this,this.attributes,this,r);},r.prototype.clear=function(){this.removeChildren();},r.prototype.getElementsLayout=function(){var n=this.chart.getContext().canvas.document.getElementsByClassName("element"),r=[];return n.forEach(function(n){var i=n.getBBox(),a=i.x,o=i.y,s=i.width,l=i.height,u=n.__data__;r.push({bbox:i,x:a,y:o,width:s,height:l,key:u.key,data:u});}),r;},r.prototype.bindEvents=function(n,r){},r;}(eL.CustomElement),yJ=this&&this.__extends||(x=function(n,r){return(x=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}x(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),y0=this&&this.__assign||function(){return(y0=Object.assign||function(n){for(var r,i=1,a=arguments.length;i<a;i++)for(var o in r=arguments[i])Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n;}).apply(this,arguments);},y1=function(n){function r(i,a){return n.call(this,i,a,{type:r.tag})||this;}return yJ(r,n),r.prototype.getConversionTagLayout=function(){var n="vertical"===this.direction,r=this.getElementsLayout(),i=r[0],a=i.x,o=i.y,s=i.height,l=i.width,u=i.data,c=["items",0,"value"],f=(0,eO.get)(u,c),d=n?r[1].y-o-s:r[1].x-a-l,h=[],p=this.attributes,m=p.size,g=void 0===m?40:m,v=p.arrowSize,y=void 0===v?20:v,_=p.spacing,b=void 0===_?4:_;return r.forEach(function(r,i){if(i>0){var a=r.x,o=r.y,s=r.height,l=r.width,u=r.data,p=r.key,m=(0,eO.get)(u,c),v=g/2;if(n){var _=a+l/2,x=o;h.push({points:[[_+v,x-d+b],[_+v,x-y-b],[_,x-b],[_-v,x-y-b],[_-v,x-d+b]],center:[_,x-d/2-b],width:d,value:[f,m],key:p});}else{var _=a,x=o+s/2;h.push({points:[[a-d+b,x-v],[a-y-b,x-v],[_-b,x],[a-y-b,x+v],[a-d+b,x+v]],center:[_-d/2-b,x],width:d,value:[f,m],key:p});}f=m;}}),h;},r.prototype.render=function(){this.setDirection(),this.drawConversionTag();},r.prototype.setDirection=function(){var n=this.chart.getCoordinate(),r=(0,eO.get)(n,"options.transformations"),i="horizontal";r.forEach(function(n){n.includes("transpose")&&(i="vertical");}),this.direction=i;},r.prototype.drawConversionTag=function(){var n=this,r=this.getConversionTagLayout(),i=this.attributes,a=i.style,o=i.text,s=o.style,l=o.formatter;r.forEach(function(r){var i=r.points,o=r.center,u=r.value,c=r.key,f=u[0],d=u[1],h=o[0],p=o[1],m=new yY({style:y0({points:i,fill:"#eee"},a),id:"polygon-".concat(c)}),g=new yW({style:y0({x:h,y:p,text:(0,eO.isFunction)(l)?l(f,d):(d/f*100).toFixed(2)+"%"},s),id:"text-".concat(c)});n.appendChild(m),n.appendChild(g);});},r.prototype.update=function(){var n=this;this.getConversionTagLayout().forEach(function(r){var i=r.points,a=r.center,o=r.key,s=a[0],l=a[1],u=n.getElementById("polygon-".concat(o)),c=n.getElementById("text-".concat(o));u.setAttribute("points",i),c.setAttribute("x",s),c.setAttribute("y",l);});},r.tag="ConversionTag",r;}(yQ),y2=i("fe2a53a5"),y3=this&&this.__extends||(E=function(n,r){return(E=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}E(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),y4=this&&this.__assign||function(){return(y4=Object.assign||function(n){for(var r,i=1,a=arguments.length;i<a;i++)for(var o in r=arguments[i])Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n;}).apply(this,arguments);},y5=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;},y6={ConversionTag:y1,BidirectionalBarAxisText:function(n){function r(i,a){return n.call(this,i,a,{type:r.tag})||this;}return y3(r,n),r.prototype.render=function(){this.drawText();},r.prototype.getBidirectionalBarAxisTextLayout=function(){var n="vertical"===this.attributes.layout,r=this.getElementsLayout(),i=n?(0,eO.uniqBy)(r,"x"):(0,eO.uniqBy)(r,"y"),a=["title"],o=[],s=this.chart.getContext().views,l=(0,eO.get)(s,[0,"layout"]),u=l.width,c=l.height;return i.forEach(function(r){var i=r.x,s=r.y,l=r.height,f=r.width,d=r.data,h=r.key,p=(0,eO.get)(d,a);n?o.push({x:i+f/2,y:c,text:p,key:h}):o.push({x:u,y:s+l/2,text:p,key:h});}),(0,eO.uniqBy)(o,"text").length!==o.length&&(o=Object.values((0,eO.groupBy)(o,"text")).map(function(r){var i,a=r.reduce(function(r,i){return r+(n?i.x:i.y);},0);return y4(y4({},r[0]),((i={})[n?"x":"y"]=a/r.length,i));})),o;},r.prototype.transformLabelStyle=function(n){var r={},i=/^label[A-Z]/;return Object.keys(n).forEach(function(a){i.test(a)&&(r[a.replace("label","").replace(/^[A-Z]/,function(n){return n.toLowerCase();})]=n[a]);}),r;},r.prototype.drawText=function(){var n=this,r=this.getBidirectionalBarAxisTextLayout(),i=this.attributes,a=i.layout,o=i.labelFormatter,s=y5(i,["layout","labelFormatter"]);r.forEach(function(r){var i=r.x,l=r.y,u=r.text,c=r.key,f=new yW({style:y4({x:i,y:l,text:(0,eO.isFunction)(o)?o(u):u,wordWrap:!0,wordWrapWidth:"horizontal"===a?2*y2.VERTICAL_MARGIN:120,maxLines:2,textOverflow:"ellipsis"},n.transformLabelStyle(s)),id:"text-".concat(c)});n.appendChild(f);});},r.prototype.destroy=function(){this.clear();},r.prototype.update=function(){this.destroy(),this.drawText();},r.tag="BidirectionalBarAxisText",r;}(yQ)},y8=function(){function n(n,r){this.container=new Map,this.chart=n,this.config=r,this.init();}return n.prototype.init=function(){var n=this;yU.ANNOTATION_LIST.forEach(function(r){var i,a=r.key,o=r.shape,s=n.config[a];if(s){var l=new y6[o](n.chart,s);n.chart.getContext().canvas.appendChild(l),n.container.set(a,l);}else null===(i=n.container.get(a))||void 0===i||i.clear();});},n.prototype.update=function(){var n=this;this.container.size&&yU.ANNOTATION_LIST.forEach(function(r){var i=r.key,a=n.container.get(i);null==a||a.update();});},n;}(),y7=this&&this.__extends||(w=function(n,r){return(w=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}w(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),y9=this&&this.__assign||function(){return(y9=Object.assign||function(n){for(var r,i=1,a=arguments.length;i<a;i++)for(var o in r=arguments[i])Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n;}).apply(this,arguments);},_e="data-chart-source-type",_t=function(n){function r(r,i){var a=n.call(this)||this;return a.container="string"==typeof r?document.getElementById(r):r,a.options=a.mergeOption(i),a.createG2(),a.bindEvents(),a;}return y7(r,n),r.prototype.getChartOptions=function(){return y9(y9({},(0,eO.pick)(this.options,yU.CHART_OPTIONS)),{container:this.container});},r.prototype.getSpecOptions=function(){return"base"===this.type||this[yU.SKIP_DEL_CUSTOM_SIGN]?y9(y9({},this.options),this.getChartOptions()):this.options;},r.prototype.createG2=function(){if(!this.container)throw Error("The container is not initialized!");this.chart=new yz(this.getChartOptions()),this.container.setAttribute(_e,"Ant Design Charts");},r.prototype.bindEvents=function(){var n=this;this.chart&&this.chart.on("*",function(r){(null==r?void 0:r.type)&&n.emit(r.type,r);});},r.prototype.getBaseOptions=function(){return{type:"view",autoFit:!0};},r.prototype.getDefaultOptions=function(){},r.prototype.render=function(){var n=this;"base"!==this.type&&this.execAdaptor(),this.chart.options(this.getSpecOptions()),this.chart.render().then(function(){n.annotation=new y8(n.chart,n.options);}),this.bindSizeSensor();},r.prototype.update=function(n){this.options=this.mergeOption(n);},r.prototype.mergeOption=function(n){return(0,yZ.mergeWithArrayCoverage)({},this.getBaseOptions(),this.getDefaultOptions(),n);},r.prototype.changeData=function(n){this.chart.changeData(n);},r.prototype.changeSize=function(n,r){this.chart.changeSize(n,r);},r.prototype.destroy=function(){this.chart.destroy(),this.off(),this.container.removeAttribute(_e);},r.prototype.execAdaptor=function(){this.getSchemaAdaptor()({chart:this.chart,options:this.options});},r.prototype.triggerResize=function(){this.chart.forceFit();},r.prototype.bindSizeSensor=function(){var n=this,r=this.options.autoFit;(void 0===r||r)&&this.chart.on(ek.ChartEvent.AFTER_CHANGE_SIZE,function(){n.annotation.update();});},r;}(eP.default),_n=this&&this.__extends||(S=function(n,r){return(S=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}S(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),_r=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="base",r;}return _n(r,n),r.getDefaultOptions=function(){return{type:"view",children:[{type:"line"}]};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return function(n){return n;};},r;}(_t),_i=i("dd1e4719"),_a=i("2f051558");function _o(n){return(0,eO.flow)(_a.mark,_i.transformOptions)(n);}var _s=this&&this.__extends||(T=function(n,r){return(T=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}T(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),_l=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="area",r;}return _s(r,n),r.getDefaultOptions=function(){return{type:"view",children:[{type:"area"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0}}};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return _o;},r;}(_t),_u=this&&this.__assign||function(){return(_u=Object.assign||function(n){for(var r,i=1,a=arguments.length;i<a;i++)for(var o in r=arguments[i])Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n;}).apply(this,arguments);};function _c(n){return(0,eO.flow)(function(n){var r=n.options;(0,eO.get)(r,"children.length")>1&&(0,eO.set)(r,"children",[{type:"interval"}]);var i=r.scale,a=r.markBackground,o=r.data,s=r.children,l=r.yField,u=(0,eO.get)(i,"y.domain",[]);if(a&&u.length&&(0,eO.isArray)(o)){var c="domainMax",f=o.map(function(n){var r;return _u(_u({originData:_u({},n)},(0,eO.omit)(n,l)),((r={})[c]=u[u.length-1],r));});s.unshift(_u({type:"interval",data:f,yField:c,tooltip:!1,style:{fill:"#eee"},label:!1},a));}return n;},_a.mark,_i.transformOptions)(n);}var _f=this&&this.__extends||(A=function(n,r){return(A=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}A(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);});(0,ic.register)("shape.interval.bar25D",function(n,r){return function(i){var a=n.fill,o=void 0===a?"#2888FF":a,s=n.stroke,l=n.fillOpacity,u=void 0===l?1:l,c=n.strokeOpacity,f=void 0===c?.2:c,d=n.pitch,h=void 0===d?8:d,p=i[0],m=i[1],g=i[2],v=i[3],y=(m[1]-p[1])/2,_=r.document,b=_.createElement("g",{}),x=_.createElement("polygon",{style:{points:[p,[p[0]-h,p[1]+y],[g[0]-h,p[1]+y],v],fill:o,fillOpacity:u,stroke:s,strokeOpacity:f,inset:30}}),E=_.createElement("polygon",{style:{points:[[p[0]-h,p[1]+y],m,g,[g[0]-h,p[1]+y]],fill:o,fillOpacity:u,stroke:s,strokeOpacity:f}}),w=_.createElement("polygon",{style:{points:[p,[p[0]-h,p[1]+y],m,[p[0]+h,p[1]+y]],fill:o,fillOpacity:u-.2}});return b.appendChild(x),b.appendChild(E),b.appendChild(w),b;};});var _d=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="Bar",r;}return _f(r,n),r.getDefaultOptions=function(){return{type:"view",coordinate:{transform:[{type:"transpose"}]},children:[{type:"interval"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0},elementHighlight:{background:!0}}};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return _c;},r;}(_t),_h=this&&this.__extends||(C=function(n,r){return(C=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}C(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);});(0,ic.register)("shape.interval.column25D",function(n,r){return function(i){var a=n.fill,o=void 0===a?"#2888FF":a,s=n.stroke,l=n.fillOpacity,u=void 0===l?1:l,c=n.strokeOpacity,f=void 0===c?.2:c,d=n.pitch,h=void 0===d?8:d,p=(i[1][0]-i[0][0])/2+i[0][0],m=r.document,g=m.createElement("g",{}),v=m.createElement("polygon",{style:{points:[[i[0][0],i[0][1]],[p,i[1][1]+h],[p,i[3][1]+h],[i[3][0],i[3][1]]],fill:o,fillOpacity:u,stroke:s,strokeOpacity:f,inset:30}}),y=m.createElement("polygon",{style:{points:[[p,i[1][1]+h],[i[1][0],i[1][1]],[i[2][0],i[2][1]],[p,i[2][1]+h]],fill:o,fillOpacity:u,stroke:s,strokeOpacity:f}}),_=m.createElement("polygon",{style:{points:[[i[0][0],i[0][1]],[p,i[1][1]-h],[i[1][0],i[1][1]],[p,i[1][1]+h]],fill:o,fillOpacity:u-.2}});return g.appendChild(y),g.appendChild(v),g.appendChild(_),g;};});var _p=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="column",r;}return _h(r,n),r.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0},elementHighlight:{background:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval"}]};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return _c;},r;}(_t);function _m(n){return(0,eO.flow)(function(n){var r=n.options,i=r.children;return r.legend&&(void 0===i?[]:i).forEach(function(n){if(!(0,eO.get)(n,"colorField")){var r=(0,eO.get)(n,"yField");(0,eO.set)(n,"colorField",function(){return r;});}}),n;},function(n){var r=n.options,i=r.annotations,a=void 0===i?[]:i,o=r.children,s=r.scale,l=!1;return(0,eO.get)(s,"y.key")||(void 0===o?[]:o).forEach(function(n,r){if(!(0,eO.get)(n,"scale.y.key")){var i="child".concat(r,"Scale");(0,eO.set)(n,"scale.y.key",i);var o=n.annotations,s=void 0===o?[]:o;s.length>0&&((0,eO.set)(n,"scale.y.independent",!1),s.forEach(function(n){(0,eO.set)(n,"scale.y.key",i);})),!l&&a.length>0&&void 0===(0,eO.get)(n,"scale.y.independent")&&(l=!0,(0,eO.set)(n,"scale.y.independent",!1),a.forEach(function(n){(0,eO.set)(n,"scale.y.key",i);}));}}),n;},_a.mark,_i.transformOptions)(n);}var _g=this&&this.__extends||(O=function(n,r){return(O=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}O(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),_v=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="DualAxes",r;}return _g(r,n),r.getDefaultOptions=function(){return{type:"view",axis:{y:{title:!1,tick:!1},x:{title:!1}},scale:{y:{independent:!0,nice:!0}}};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return _m;},r;}(_t);function _y(n){return(0,eO.flow)(function(n){var r=n.options,i=r.xField;return r.colorField||(0,eO.set)(r,"colorField",i),n;},function(n){var r=n.options,i=r.compareField,a=r.transform,o=r.isTransposed,s=r.coordinate;return a||(i?(0,eO.set)(r,"transform",[]):(0,eO.set)(r,"transform",[{type:"symmetryY"}])),!s&&(void 0===o||o)&&(0,eO.set)(r,"coordinate",{transform:[{type:"transpose"}]}),n;},function(n){var r=n.options,i=r.compareField,a=r.seriesField,o=r.data,s=r.children,l=r.yField,u=r.isTransposed;if(i||a){var c=Object.values((0,eO.groupBy)(o,function(n){return n[i||a];}));s[0].data=c[0],s.push({type:"interval",data:c[1],yField:function(n){return-n[l];}}),delete r.compareField,delete r.data;}return a&&((0,eO.set)(r,"type","spaceFlex"),(0,eO.set)(r,"ratio",[1,1]),(0,eO.set)(r,"direction",void 0===u||u?"row":"col"),delete r.seriesField),n;},function(n){var r=n.options,i=r.tooltip,a=r.xField,o=r.yField;return i||(0,eO.set)(r,"tooltip",{title:!1,items:[function(n){return{name:n[a],value:n[o]};}]}),n;},_a.mark,_i.transformOptions)(n);}var __=this&&this.__extends||(M=function(n,r){return(M=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}M(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),_b=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="column",r;}return __(r,n),r.getDefaultOptions=function(){return{type:"view",scale:{x:{padding:0}},animate:{enter:{type:"fadeIn"}},axis:!1,shapeField:"funnel",label:{position:"inside",transform:[{type:"contrastReverse"}]},children:[{type:"interval"}]};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return _y;},r;}(_t);function _x(n){return(0,eO.flow)(_a.mark,_i.transformOptions)(n);}var _E=this&&this.__extends||(R=function(n,r){return(R=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}R(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),_w=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="line",r;}return _E(r,n),r.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"line"}]};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return _x;},r;}(_t),_S=i("bede8832"),_T=this&&this.__assign||function(){return(_T=Object.assign||function(n){for(var r,i=1,a=arguments.length;i<a;i++)for(var o in r=arguments[i])Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n;}).apply(this,arguments);};function _A(n){return(0,eO.flow)(function(n){var r=n.options,i=r.angleField,a=r.data,o=r.label,s=r.tooltip,l=r.colorField,u=(0,_S.fieldAdapter)(l);if((0,eO.isArray)(a)&&a.length>0&&0===a.reduce(function(n,r){return n+r[i];},0)){var c=a.map(function(n){var r;return _T(_T({},n),((r={})[i]=1,r));});if((0,eO.set)(r,"data",c),o){var f=l===(0,eO.get)(o,"text");(0,eO.set)(r,"label",_T(_T({},o),f?{}:{formatter:function(){return 0;}}));}!1!==s&&((0,eO.isFunction)(s)?(0,eO.set)(r,"tooltip",function(n,r,a){var o;return s(_T(_T({},n),((o={})[i]=0,o)),r,a.map(function(n){var r;return _T(_T({},n),((r={})[i]=0,r));}));}):(0,eO.set)(r,"tooltip",_T(_T({},s),{items:[function(n,r,i){return{name:u(n,r,i),value:0};}]})));}return n;},_i.transformOptions)(n);}var _C=this&&this.__extends||(P=function(n,r){return(P=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}P(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),_O=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="pie",r;}return _C(r,n),r.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"theta"},transform:[{type:"stackY",reverse:!0}],animate:{enter:{type:"waveIn"}}};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return _A;},r;}(_t);function _M(n){return(0,eO.flow)(_a.mark,_i.transformOptions)(n);}var _R=this&&this.__extends||(k=function(n,r){return(k=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}k(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),_P=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="scatter",r;}return _R(r,n),r.getDefaultOptions=function(){return{axis:{y:{title:!1},x:{title:!1}},legend:{size:!1},children:[{type:"point"}]};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return _M;},r;}(_t);function _k(n){return(0,eO.flow)(function(n){return(0,eO.set)(n,"options.coordinate",{type:(0,eO.get)(n,"options.coordinateType","polar")}),n;},_i.transformOptions)(n);}var _I=this&&this.__extends||(I=function(n,r){return(I=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}I(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),_L=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="radar",r;}return _I(r,n),r.getDefaultOptions=function(){return{axis:{x:{grid:!0,line:!0},y:{zIndex:1,title:!1,line:!0,nice:!0}},meta:{x:{padding:.5,align:0}},interaction:{tooltip:{style:{crosshairsLineDash:[4,4]}}},children:[{type:"line"}],coordinateType:"polar"};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return _k;},r;}(_t);function _N(n){return(0,eO.flow)(function(n){var r=n.options,i=r.yField,a=r.children,o=r.style,s=r.lineStyle,l=i[0],u=i[1],c=i[2],f=i[3];return(0,eO.set)(a,[0,"yField"],[c,f]),(0,eO.set)(a,[0,"style"],void 0===s?{}:s),(0,eO.set)(a,[1,"yField"],[l,u]),(0,eO.set)(a,[1,"style"],void 0===o?{}:o),delete r.yField,delete r.lineStyle,delete r.style,n;},_i.transformOptions)(n);}var _D=this&&this.__extends||(L=function(n,r){return(L=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}L(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),_F=["#26a69a","#999999","#ef5350"],_B=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="stock",r;}return _D(r,n),r.getDefaultOptions=function(){return{type:"view",scale:{color:{domain:[-1,0,1],range:_F},y:{nice:!0}},children:[{type:"link"},{type:"interval"}],axis:{x:{title:!1,grid:!1},y:{title:!1,grid:!0,gridLineDash:null}},animate:{enter:{type:"scaleInY"}},interaction:{tooltip:{shared:!0,marker:!1,groupName:!1,crosshairs:!0}}};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return _N;},r;}(_t);function _j(n){return(0,eO.flow)(_a.mark,_i.transformOptions)(n);}var _z=this&&this.__extends||(N=function(n,r){return(N=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}N(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),_U=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="TinyLine",r;}return _z(r,n),r.getDefaultOptions=function(){return{type:"view",children:[{type:"line",axis:!1}],animate:{enter:{type:"growInX",duration:500}},padding:0,margin:0,tooltip:!1};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return _j;},r;}(_t);function _V(n){return(0,eO.flow)(_a.mark,_i.transformOptions)(n);}var _G=this&&this.__extends||(D=function(n,r){return(D=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}D(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),_H=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="TinyArea",r;}return _G(r,n),r.getDefaultOptions=function(){return{type:"view",animate:{enter:{type:"growInX",duration:500}},children:[{type:"area",axis:!1}],padding:0,margin:0,tooltip:!1};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return _V;},r;}(_t);function _W(n){return(0,eO.flow)(_a.mark,_i.transformOptions)(n);}var _X=this&&this.__extends||(F=function(n,r){return(F=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}F(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),_q=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="TinyColumn",r;}return _X(r,n),r.getDefaultOptions=function(){return{type:"view",children:[{type:"interval",axis:!1}],padding:0,margin:0,tooltip:!1};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return _W;},r;}(_t),_$=this&&this.__assign||function(){return(_$=Object.assign||function(n){for(var r,i=1,a=arguments.length;i<a;i++)for(var o in r=arguments[i])Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n;}).apply(this,arguments);};function _Y(n){return(0,eO.flow)(function(n){var r=n.options,i=r.percent,a=r.color,o=void 0===a?[]:a;if(!i)return n;var s={scale:{color:{range:o.length?o:[]}},data:[1,i]};return Object.assign(r,_$({},s)),n;},_a.mark,_i.transformOptions)(n);}var _Z=this&&this.__extends||(B=function(n,r){return(B=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}B(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),_K=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="TinyProgress",r;}return _Z(r,n),r.getDefaultOptions=function(){return{type:"view",data:[],margin:0,padding:0,tooltip:!1,children:[{interaction:{tooltip:!1},coordinate:{transform:[{type:"transpose"}]},type:"interval",axis:!1,legend:!1,encode:{y:function(n){return n;},color:function(n,r){return r;}}}]};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return _Y;},r;}(_t),_Q=this&&this.__assign||function(){return(_Q=Object.assign||function(n){for(var r,i=1,a=arguments.length;i<a;i++)for(var o in r=arguments[i])Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n;}).apply(this,arguments);};function _J(n){return(0,eO.flow)(function(n){var r=n.options.radius;return(0,eO.set)(n,"options.coordinate.innerRadius",void 0===r?.8:r),n;},function(n){var r=n.options,i=r.percent,a=r.color,o=void 0===a?[]:a;if(!i)return n;var s={scale:{color:{range:o.length?o:[]}},data:[1,i]};return Object.assign(r,_Q({},s)),n;},_a.mark,_i.transformOptions)(n);}var _0=this&&this.__extends||(j=function(n,r){return(j=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}j(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),_1=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="TinyRing",r;}return _0(r,n),r.getDefaultOptions=function(){return{type:"view",data:[],margin:0,padding:0,coordinate:{type:"theta"},animate:{enter:{type:"waveIn"}},interaction:{tooltip:!1},tooltip:!1,children:[{type:"interval",axis:!1,legend:!1,encode:{y:function(n){return n;},color:function(n,r){return r;}}}]};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return _J;},r;}(_t);function _2(n){return(0,eO.flow)(_i.transformOptions)(n);}var _3=this&&this.__extends||(z=function(n,r){return(z=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}z(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),_4=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="rose",r;}return _3(r,n),r.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"polar"},animate:{enter:{type:"waveIn"}}};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return _2;},r;}(_t),_5="__start__",_6="__end__",_8="__waterfall_value__",_7=this&&this.__assign||function(){return(_7=Object.assign||function(n){for(var r,i=1,a=arguments.length;i<a;i++)for(var o in r=arguments[i])Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n;}).apply(this,arguments);},_9=this&&this.__spreadArray||function(n,r,i){if(i||2==arguments.length)for(var a,o=0,s=r.length;o<s;o++)!a&&o in r||(a||(a=Array.prototype.slice.call(r,0,o)),a[o]=r[o]);return n.concat(a||Array.prototype.slice.call(r));};function be(n){return(0,eO.flow)(function(n){var r=n.options,i=r.data,a=void 0===i?[]:i,o=r.yField;return a.length&&(a.reduce(function(n,r,i){var s,l=(0,_S.fieldAdapter)(o),u=l(r,i,a);if(0===i||r.isTotal)r[_5]=0,r[_6]=u,r[_8]=u;else{var c=null!==(s=n[_6])&&void 0!==s?s:l(n,i,a);r[_5]=c,r[_6]=c+u,r[_8]=n[_6];}return r;},[]),Object.assign(r,{yField:[_5,_6]})),n;},function(n){var r=n.options,i=r.data,a=r.xField,o=r.children,s=r.linkStyle,l=_9([],void 0===i?[]:i,!0);return l.reduce(function(n,r,i){return i>0&&(r.x1=n[a],r.x2=r[a],r.y1=n[_6]),r;},[]),l.shift(),o.push({type:"link",xField:["x1","x2"],yField:"y1",zIndex:-1,data:l,style:_7({stroke:"#697474"},s),label:!1,tooltip:!1}),n;},_a.mark,function(n){var r=n.options,i=r.data,a=void 0===i?[]:i,o=r.connector;return o&&(0,eO.set)(r,"connector",_7({xField:o.reverse?["x2","x1"]:["x1","x2"],yField:o.reverse?["y2","y1"]:["y1","y2"],data:[{x1:a[0].x,y1:a[0][_6],x2:a[a.length-1].x,y2:a[a.length-1][_6]}]},(0,eO.isObject)(o)?o:{})),n;},_i.transformOptions)(n);}var bt=this&&this.__extends||(U=function(n,r){return(U=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}U(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),bn=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="waterfall",r;}return bt(r,n),r.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{field:_8,valueFormatter:"~s",name:"value"},axis:{y:{title:null,labelFormatter:"~s"},x:{title:null}},children:[{type:"interval",interaction:{elementHighlight:{background:!0}}}]};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return be;},r;}(_t);function br(n){return(0,eO.flow)(function(n){var r=n.options,i=r.data,a=r.binNumber,o=r.binWidth,s=r.children,l=r.channel,u=void 0===l?"count":l,c=(0,eO.get)(s,"[0].transform[0]",{});return(0,eO.isNumber)(o)?(0,eO.assign)(c,{thresholds:(0,eO.ceil)((0,eO.divide)(i.length,o)),y:u}):(0,eO.isNumber)(a)&&(0,eO.assign)(c,{thresholds:a,y:u}),n;},_a.mark,_i.transformOptions)(n);}var bi=this&&this.__extends||(V=function(n,r){return(V=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}V(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),ba=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="Histogram",r;}return bi(r,n),r.getDefaultOptions=function(){return{type:"view",autoFit:!0,axis:{y:{title:!1},x:{title:!1}},children:[{type:"rect",transform:[{type:"binX",y:"count"}],interaction:{elementHighlight:{background:!0}}}]};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return br;},r;}(_t);function bo(n){return(0,eO.flow)(function(n){var r=n.options,i=r.tooltip,a=void 0===i?{}:i,o=r.colorField,s=r.sizeField;return a&&!a.field&&(a.field=o||s),n;},function(n){var r=n.options,i=r.mark,a=r.children;return i&&(a[0].type=i),n;},_a.mark,_i.transformOptions)(n);}var bs=this&&this.__extends||(G=function(n,r){return(G=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}G(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),bl=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="heatmap",r;}return bs(r,n),r.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{valueFormatter:"~s"},axis:{y:{title:null,grid:!0},x:{title:null,grid:!0}},children:[{type:"point"}]};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return bo;},r;}(_t);function bu(n){return(0,eO.flow)(function(n){var r=n.options.boxType;return n.options.children[0].type=void 0===r?"box":r,n;},_a.mark,_i.transformOptions)(n);}var bc=this&&this.__extends||(H=function(n,r){return(H=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}H(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),bf=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="box",r;}return bc(r,n),r.getDefaultOptions=function(){return{type:"view",children:[{type:"box"}],axis:{y:{title:!1},x:{title:!1}},tooltip:{items:[{name:"min",channel:"y"},{name:"q1",channel:"y1"},{name:"q2",channel:"y2"},{name:"q3",channel:"y3"},{name:"max",channel:"y4"}]}};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return bu;},r;}(_t),bd=i("840563a5"),bh=function(n){var r=n.options,i=r.data,a=[{type:"custom",callback:function(n){return{links:n};}}];if((0,eO.isArray)(i))i.length>0?(0,eO.set)(r,"data",{value:i,transform:a}):delete r.children;else if("fetch"===(0,eO.get)(i,"type")&&(0,eO.get)(i,"value")){var o=(0,eO.get)(i,"transform");(0,eO.isArray)(o)||(0,eO.set)(i,"transform",a);}return n;};function bp(n){return(0,eO.flow)(bd.dataTransform,bh,_a.mark,_i.transformOptions)(n);}var bm=this&&this.__extends||(W=function(n,r){return(W=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}W(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),bg=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="sankey",r;}return bm(r,n),r.getDefaultOptions=function(){return{type:"view",children:[{type:"sankey"}]};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return bp;},r;}(_t);function bv(n){r=n.options.layout,n.options.coordinate.transform="horizontal"!==(void 0===r?"horizontal":r)?void 0:[{type:"transpose"}];var r,i=n.options.layout,a=void 0===i?"horizontal":i;return n.options.children.forEach(function(n){var r;(null===(r=null==n?void 0:n.coordinate)||void 0===r?void 0:r.transform)&&(n.coordinate.transform="horizontal"!==a?void 0:[{type:"transpose"}]);}),n;}var by=this&&this.__assign||function(){return(by=Object.assign||function(n){for(var r,i=1,a=arguments.length;i<a;i++)for(var o in r=arguments[i])Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n;}).apply(this,arguments);},b_=["#f0efff","#5B8FF9","#3D76DD"];function bb(n,r,i,a){void 0===a&&(a=!0);var o=0,s=!1,l=(0,eO.map)(n,function(n){var l,u,c=(0,eO.get)(n,[r]);if((0,eO.isNil)(c))return[];if((0,eO.isString)(c)){var f=Number(c);return isNaN(f)?[]:((l={})[i]=n[i],l[r]=f,l);}return(0,eO.isArray)(c)?(s=!0,o=Math.max(o,c.length),(0,eO.map)(a?c.sort(function(n,r){return r-n;}):c,function(a,o){var s;return(s={})[i]=n[i],s[r]=a,s.index=o,s;})):(o=Math.max(1,o),(u={})[i]=n[i],u[r]=c,u);}).flat();return s?[l.map(function(n){return by({index:0},n);}),o]:[l,o];}function bx(n,r){return Array(n).fill("").map(function(n,i){return(0,eO.isArray)(r)?r[i%r.length]:r;});}function bE(n){return(0,eO.flow)(function(n){var r=n.options,i=r.color,a=r.rangeField,o=void 0===a?"ranges":a,s=r.measureField,l=void 0===s?"measures":s,u=r.targetField,c=void 0===u?"targets":u,f=r.xField,d=void 0===f?"title":f,h=r.mapField,p=r.data,m=bb(p,o,d),g=m[0],v=m[1],y=bb(p,l,d,!1),_=y[0],b=y[1],x=bb(p,c,d,!1),E=x[0],w=x[1],S=(0,eO.get)(i,[o],b_[0]),T=(0,eO.get)(i,[l],b_[1]),A=(0,eO.get)(i,[c],b_[2]),C=[bx(v,S),bx(b,T),bx(w,A)].flat();return r.children=(0,eO.map)(r.children,function(n,r){var i=[g,_,E][r],a=[o,l,c][r];return by(by({},n),{data:i,encode:by(by({},n.encode||{}),{x:d,y:a,color:function(n){var r=n.index,i=(0,eO.isNumber)(r)?"".concat(a,"_").concat(r):a;return h?(0,eO.get)(h,[a,r],i):i;}})});}),(0,eO.set)(r,"scale.color.range",C),r.legend.color.itemMarker=function(n){return h&&(0,eO.includes)(null==h?void 0:h[c],n)?"line":(null==n?void 0:n.replace(/\_\d$/,""))===c?"line":"square";},n;},function(n){var r=n.options.transpose;return void 0===r||r||(0,eO.set)(n,"options.children[2].shapeField","hyphen"),n;},function(n){var r=n.options,i=r.range,a=r.measure,o=r.target,s=r.children;return r.children=[void 0===i?{}:i,void 0===a?{}:a,void 0===o?{}:o].map(function(n,r){return(0,yZ.mergeWithArrayCoverage)(s[r],n);}),n;},bv,_i.transformOptions)(n);}var bw=this&&this.__extends||(X=function(n,r){return(X=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}X(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),bS=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="bullet",r;}return bw(r,n),r.getDefaultOptions=function(){return{type:"view",scale:{color:{range:b_}},legend:{color:{itemMarker:function(n){return"targets"===n?"line":"square";}}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval",style:{maxWidth:30,zIndex:-2},axis:{y:{grid:!0,gridLineWidth:2}}},{type:"interval",style:{maxWidth:20,zIndex:-1},transform:[{type:"stackY"}]},{type:"point",encode:{size:8,shape:"line"}}],interaction:{tooltip:{shared:!0}},coordinate:{transform:[{type:"transpose"}]}};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return bE;},r;}(_t);function bT(n){return(0,eO.flow)(function(n){var r=n.options.data;return n.options.data={value:r},n;},_a.mark,_i.transformOptions)(n);}var bA=this&&this.__extends||(q=function(n,r){return(q=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}q(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),bC=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="Gauge",r;}return bA(r,n),r.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"gauge"}]};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return bT;},r;}(_t);function bO(n){return(0,eO.flow)(function(n){var r=n.options.percent;return(0,eO.isNumber)(r)&&((0,eO.set)(n,"options.data",r),delete n.options.percent),n;},_a.mark,_i.transformOptions)(n);}var bM=this&&this.__extends||($=function(n,r){return($=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}$(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),bR=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="Liquid",r;}return bM(r,n),r.getDefaultOptions=function(){return{type:"view",children:[{type:"liquid"}]};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return bO;},r;}(_t);function bP(n){return(0,eO.flow)(_a.mark,_i.transformOptions)(n);}var bk=this&&this.__extends||(Y=function(n,r){return(Y=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}Y(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),bI=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="WordCloud",r;}return bk(r,n),r.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"wordCloud"}]};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return bP;},r;}(_t);function bL(n){return(0,eO.flow)(bd.dataTransform,_a.mark,_i.transformOptions)(n);}var bN=this&&this.__extends||(Z=function(n,r){return(Z=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}Z(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),bD=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="treemap",r;}return bN(r,n),r.getDefaultOptions=function(){return{type:"view",children:[{type:"treemap"}]};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return bL;},r;}(_t),bF=this&&this.__assign||function(){return(bF=Object.assign||function(n){for(var r,i=1,a=arguments.length;i<a;i++)for(var o in r=arguments[i])Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n;}).apply(this,arguments);},bB=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};function bj(n){return(0,eO.flow)(function(n){var r=n.options,i=r.startAngle,a=r.maxAngle,o=r.coordinate,s=(0,eO.isNumber)(i)?i/(2*Math.PI)*360:-90,l=(0,eO.isNumber)(a)?(Number(a)+s)/180*Math.PI:Math.PI;return(0,eO.set)(n,["options","coordinate"],bF(bF({},o),{endAngle:l,startAngle:null!=i?i:-Math.PI/2})),n;},function(n){var r=n.options,i=r.tooltip,a=r.xField,o=r.yField,s=(0,_S.fieldAdapter)(a),l=(0,_S.fieldAdapter)(o);return i||(0,eO.set)(r,"tooltip",{title:!1,items:[function(n,r,i){return{name:s(n,r,i),value:l(n,r,i)};}]}),n;},function(n){var r=n.options,i=r.markBackground,a=r.children,o=r.scale,s=r.coordinate,l=r.xField,u=(0,eO.get)(o,"y.domain",[]);if(i){var c=i.style,f=bB(i,["style"]);a.unshift(bF({type:"interval",xField:l,yField:u[u.length-1],style:bF({fillOpacity:.4,fill:"#e0e4ee"},c),coordinate:bF(bF({},s),{startAngle:-Math.PI/2,endAngle:1.5*Math.PI}),animate:!1},f));}return n;},_a.mark,_i.transformOptions)(n);}var bz=this&&this.__extends||(K=function(n,r){return(K=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}K(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),bU=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="radial",r;}return bz(r,n),r.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"radial",innerRadius:.1,outerRadius:1,endAngle:Math.PI},animate:{enter:{type:"waveIn",duration:800}},axis:{y:{nice:!0,labelAutoHide:!0,labelAutoRotate:!1},x:{title:!1,nice:!0,labelAutoRotate:!1,labelAutoHide:{type:"equidistance",cfg:{minGap:6}}}}};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return bj;},r;}(_t);function bV(n){return(0,eO.flow)(bd.dataTransform,_i.transformOptions)(n);}var bG=this&&this.__extends||(Q=function(n,r){return(Q=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}Q(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),bH=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="CirclePacking",r;}return bG(r,n),r.getDefaultOptions=function(){return{legend:!1,type:"view",children:[{type:"pack",encode:{color:"depth"}}]};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return bV;},r;}(_t),bW=this&&this.__assign||function(){return(bW=Object.assign||function(n){for(var r,i=1,a=arguments.length;i<a;i++)for(var o in r=arguments[i])Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n;}).apply(this,arguments);};function bX(n){return(0,eO.flow)(function(n){var r=n.options,i=r.xField,a=r.yField,o=r.colorField,s=r.seriesField,l=r.children,u=null==l?void 0:l.map(function(n){return bW(bW({},n),{xField:i,yField:a,seriesField:s||o,colorField:o||s,data:"density"===n.type?{transform:[{type:"kde",field:a,groupBy:[i,s||o]}]}:n.data});}).filter(function(n){return r.box||"density"===n.type;});return(0,eO.set)(r,"children",u),delete r.box,n;},_a.mark,_i.transformOptions)(n);}var bq=this&&this.__extends||(J=function(n,r){return(J=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}J(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),b$=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="violin",r;}return bq(r,n),r.getDefaultOptions=function(){return{type:"view",children:[{type:"density",sizeField:"size",tooltip:!1},{type:"boxplot",shapeField:"violin",style:{opacity:.5,point:!1}}],animate:{enter:{type:"fadeIn"}}};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return bX;},r;}(_t),bY=this&&this.__assign||function(){return(bY=Object.assign||function(n){for(var r,i=1,a=arguments.length;i<a;i++)for(var o in r=arguments[i])Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n;}).apply(this,arguments);},bZ=this&&this.__spreadArray||function(n,r,i){if(i||2==arguments.length)for(var a,o=0,s=r.length;o<s;o++)!a&&o in r||(a||(a=Array.prototype.slice.call(r,0,o)),a[o]=r[o]);return n.concat(a||Array.prototype.slice.call(r));};function bK(n){return(0,eO.flow)(function(n){var r=n.options,i=r.yField;return r.children.forEach(function(n,r){(0,eO.set)(n,"yField",i[r]);}),n;},function(n){var r=n.options,i=r.yField,a=r.children,o=r.data;if((0,eO.isPlainObject)(o))return n;var s=(0,eO.isArray)((0,eO.get)(o,[0]))?o:[o,o];return a.forEach(function(n,r){(0,eO.set)(n,"data",bZ([],s[r].map(function(n){return bY({groupKey:i[r]},n);}),!0));}),n;},function(n){var r=n.options,i=r.yField,a=i[0],o=i[1];return r.tooltip||(0,eO.set)(r,"tooltip",{items:[{field:a,value:a},{field:o,value:o}]}),n;},function(n){var r=n.options,i=r.children,a=r.layout,o=r.coordinate.transform,s=r.paddingBottom,l=void 0===s?y2.AXIS_LABEL_PADDING:s,u=r.paddingLeft,c=void 0===u?y2.AXIS_LABEL_PADDING:u,f=r.axis;(0,eO.set)(r,"axisText",bY(bY({},(null==f?void 0:f.x)||{}),{layout:a}));var d=i[0],h=i[1];if("vertical"===a)(0,eO.set)(r,"direction","col"),(0,eO.set)(r,"paddingLeft",c),(0,eO.set)(r,"coordinate.transform",o.filter(function(n){return"transpose"!==n.type;})),(0,eO.set)(d,"paddingBottom",y2.HORIZONTAL_MARGIN),(0,eO.set)(h,"paddingTop",y2.HORIZONTAL_MARGIN),(0,eO.set)(h,"axis.x.position","top"),(0,eO.set)(h,"scale.y.range",[0,1]);else{(0,eO.set)(r,"paddingBottom",l),(0,eO.set)(d,"scale.y.range",[0,1]);var p=d.paddingRight,m=void 0===p?y2.VERTICAL_MARGIN:p,g=h.paddingLeft,v=void 0===g?y2.VERTICAL_MARGIN:g;(0,eO.set)(d,"paddingRight",m),(0,eO.set)(d,"axis.x.position","right"),(0,eO.set)(h,"paddingLeft",v);}return n;},_a.mark,_i.transformOptions)(n);}var bQ=this&&this.__extends||(ee=function(n,r){return(ee=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}ee(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),bJ=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="BidirectionalBar",r;}return bQ(r,n),r.getDefaultOptions=function(){return{type:"spaceFlex",coordinate:{transform:[{type:"transpose"}]},scale:{y:{nice:!0}},direction:"row",layout:"horizontal",legend:!1,axis:{y:{title:!1},x:{title:!1,label:!1}},children:[{type:"interval"},{type:"interval"}]};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return bK;},r;}(_t);function b0(n){return(0,eO.flow)(function(n){var r=n.options,i=r.data,a=r.setsField,o=r.sizeField;return(0,eO.isArray)(i)&&((0,eO.set)(r,"data",{type:"inline",value:i,transform:[{type:"venn",sets:a,size:o,as:[eE.color,eE.d]}]}),(0,eO.set)(r,"colorField",eE.color),(0,eO.set)(r,["children","0","encode","d"],eE.d)),n;},_i.transformOptions)(n);}(et=eE||(eE={})).color="key",et.d="path";var b1=this&&this.__extends||(en=function(n,r){return(en=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}en(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),b2=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="venn",r;}return b1(r,n),r.getDefaultOptions=function(){return{type:"view",children:[{type:"path"}],legend:{color:{itemMarker:"circle"}},encode:{color:eE.color,d:eE.d}};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return b0;},r;}(_t);function b3(n){return(0,eO.flow)(bd.dataTransform,_i.transformOptions)(n);}var b4=this&&this.__extends||(er=function(n,r){return(er=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}er(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),b5={Base:_r,Line:_w,Column:_p,Pie:_O,Area:_l,Bar:_d,DualAxes:_v,Funnel:_b,Scatter:_P,Radar:_L,Rose:_4,Stock:_B,TinyLine:_U,TinyArea:_H,TinyColumn:_q,TinyProgress:_K,TinyRing:_1,Waterfall:bn,Histogram:ba,Heatmap:bl,Box:bf,Sankey:bg,Bullet:bS,Gauge:bC,Liquid:bR,WordCloud:bI,Treemap:bD,RadialBar:bU,CirclePacking:bH,Violin:b$,BidirectionalBar:bJ,Venn:b2,Mix:_v,Sunburst:function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type="Sunburst",r;}return b4(r,n),r.getDefaultOptions=function(){return{type:"view",children:[{type:"sunburst"}]};},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions();},r.prototype.getSchemaAdaptor=function(){return b3;},r;}(_t)},b6=this&&this.__assign||function(){return(b6=Object.assign||function(n){for(var r,i=1,a=arguments.length;i<a;i++)for(var o in r=arguments[i])Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n;}).apply(this,arguments);},b8=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;},b7=(0,eA.forwardRef)(function(n,r){var i,a,o,s,l,u,c,f,d,h,p=n.chartType,m=b8(n,["chartType"]),g=m.containerStyle,v=m.containerAttributes,y=m.className,_=m.loading,b=m.loadingTemplate,x=m.errorTemplate,E=m.onReady,w=b8(m,["containerStyle","containerAttributes","className","loading","loadingTemplate","errorTemplate","onReady"]),S=(i=b5[void 0===p?"Base":p],a=b6(b6({},w),{onReady:function(n){r&&("function"==typeof r?r(n):r.current=n),null==E||E(n);}}),o=(0,eA.useRef)(null),s=(0,eA.useRef)(null),l=(0,eA.useRef)(null),u=a.onReady,c=a.onEvent,f=function(n,r){void 0===n&&(n="image/png");var i,a=null===(i=l.current)||void 0===i?void 0:i.getElementsByTagName("canvas")[0];return null==a?void 0:a.toDataURL(n,r);},d=function(n,r,i){void 0===n&&(n="download"),void 0===r&&(r="image/png");var a=n;-1===n.indexOf(".")&&(a="".concat(n,".").concat(r.split("/")[1]));var o=f(r,i),s=document.createElement("a");return s.href=o,s.download=a,document.body.appendChild(s),s.click(),document.body.removeChild(s),s=null,a;},h=function(n,r){void 0===r&&(r=!1);var i=Object.keys(n),a=r;i.forEach(function(i){var o,s=n[i];("tooltip"===i&&(a=!0),(0,eO.isFunction)(s)&&(o="".concat(s),/react|\.jsx|children:\[\(|return\s+[A-Za-z0-9].createElement\((?!['"][g|circle|ellipse|image|rect|line|polyline|polygon|text|path|html|mesh]['"])([^\)])*,/i.test(o)))?n[i]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return(0,eC.createNode)(s.apply(void 0,n),a);}:(0,eO.isArray)(s)?s.forEach(function(n){h(n,a);}):(0,eO.isObject)(s)?h(s,a):a=r;});},(0,eA.useEffect)(function(){o.current&&!(0,eO.isEqual)(s.current,a)&&(s.current=(0,eO.cloneDeep)(a),h(a),o.current.update(a),o.current.render());},[a]),(0,eA.useEffect)(function(){if(!l.current)return function(){return null;};s.current||(s.current=(0,eO.cloneDeep)(a)),h(a);var n=new i(l.current,eM({},a));n.toDataURL=f,n.downloadImage=d,n.render(),o.current=n,u&&u(n);var r=function(r){c&&c(n,r);};return n.on("*",r),function(){o.current&&(o.current.destroy(),o.current.off("*",r),o.current=void 0);};},[]),{chart:o,container:l}),T=(S.chart,S.container);return eA.default.createElement(eC.ErrorBoundary,{errorTemplate:x},_&&eA.default.createElement(eC.ChartLoading,{loadingTemplate:b,theme:m.theme,loading:_}),eA.default.createElement("div",b6({className:y,style:void 0===g?{height:"inherit",flex:1}:g,ref:T},void 0===v?{}:v)));});},"7da32405":function(n,r,i){function a({map:n,initKey:r},i){let a=r(i);return n.has(a)?n.get(a):i;}function o(n){return"object"==typeof n?n.valueOf():n;}i.d(r,"__esModule",{value:!0}),i.e(r,{Band:function(){return u;}});class s extends Map{constructor(n){if(super(),this.map=new Map,this.initKey=o,null!==n)for(let[r,i]of n)this.set(r,i);}get(n){return super.get(a({map:this.map,initKey:this.initKey},n));}has(n){return super.has(a({map:this.map,initKey:this.initKey},n));}set(n,r){return super.set(function({map:n,initKey:r},i){let a=r(i);return n.has(a)?n.get(a):(n.set(a,i),i);}({map:this.map,initKey:this.initKey},n),r);}delete(n){return super.delete(function({map:n,initKey:r},i){let a=r(i);return n.has(a)&&(i=n.get(a),n.delete(a)),i;}({map:this.map,initKey:this.initKey},n));}}var l=i("6366e4a1");class u extends l.Ordinal{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:l.defaultUnknown,flex:[]};}constructor(n){super(n);}clone(){return new u(this.options);}getStep(n){return void 0===this.valueStep?1:"number"==typeof this.valueStep?this.valueStep:void 0===n?Array.from(this.valueStep.values())[0]:this.valueStep.get(n);}getBandWidth(n){return void 0===this.valueBandWidth?1:"number"==typeof this.valueBandWidth?this.valueBandWidth:void 0===n?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(n);}getRange(){return this.adjustedRange;}getPaddingInner(){let{padding:n,paddingInner:r}=this.options;return n>0?n:r;}getPaddingOuter(){let{padding:n,paddingOuter:r}=this.options;return n>0?n:r;}rescale(){super.rescale();let{align:n,domain:r,range:i,round:a,flex:o}=this.options,{adjustedRange:l,valueBandWidth:u,valueStep:c}=function(n){var r;let i,a;let{domain:o}=n,l=o.length;if(0===l)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(null===(r=n.flex)||void 0===r?void 0:r.length)return function(n){let{domain:r,range:i,paddingOuter:a,paddingInner:o,flex:l,round:u,align:c}=n,f=r.length,d=function(n,r){let i=r-n.length;return i>0?[...n,...Array(i).fill(1)]:i<0?n.slice(0,r):n;}(l,f),[h,p]=i,m=p-h,g=m/(2/f*a+1-1/f*o),v=g*o/f,y=g-f*v,_=function(n){let r=Math.min(...n);return n.map(n=>n/r);}(d),b=y/_.reduce((n,r)=>n+r),x=new s(r.map((n,r)=>{let i=_[r]*b;return[n,u?Math.floor(i):i];})),E=new s(r.map((n,r)=>{let i=_[r]*b+v;return[n,u?Math.floor(i):i];})),w=Array.from(E.values()).reduce((n,r)=>n+r),S=h+(m-(w-w/f*o))*c,T=u?Math.round(S):S,A=Array(f);for(let n=0;n<f;n+=1){A[n]=Math.round(1e12*T)/1e12;let i=r[n];T+=E.get(i);}return{valueBandWidth:x,valueStep:E,adjustedRange:A};}(n);let{range:u,paddingOuter:c,paddingInner:f,round:d,align:h}=n,p=u[0],m=u[1]-p;i=m/Math.max(1,2*c+(l-f)),d&&(i=Math.floor(i)),p+=(m-i*(l-f))*h,a=i*(1-f),d&&(p=Math.round(p),a=Math.round(a));let g=Array(l).fill(0).map((n,r)=>p+r*i);return{valueStep:i,valueBandWidth:a,adjustedRange:g};}({align:n,range:i,round:a,flex:o,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:r});this.valueStep=c,this.valueBandWidth=u,this.adjustedRange=l;}}},"7da4c3df":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});var a=(0,i("609f48be").createContext)(null);},"7dd83cf2":function(n,r,i){var a=i("13850e1a");n.exports=function(n){return n==n&&!a(n);};},"7e3844f3":function(n,r,i){var a,o;a=this,o=function(){return function(n,r,i){n=n||{};var a=r.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function s(n,r,i,o){return a.fromToBase(n,r,i,o);}i.en.relativeTime=o,a.fromToBase=function(r,a,s,l,u){for(var c,f,d,h=s.$locale().relativeTime||o,p=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],m=p.length,g=0;g<m;g+=1){var v=p[g];v.d&&(c=l?i(r).diff(s,v.d,!0):s.diff(r,v.d,!0));var y=(n.rounding||Math.round)(Math.abs(c));if(d=c>0,y<=v.r||!v.r){y<=1&&g>0&&(v=p[g-1]);var _=h[v.l];u&&(y=u(""+y)),f="string"==typeof _?_.replace("%d",y):_(y,a,v.l,d);break;}}if(a)return f;var b=d?h.future:h.past;return"function"==typeof b?b(f):b.replace("%s",f);},a.to=function(n,r){return s(n,r,this,!0);},a.from=function(n,r){return s(n,r,this);};var l=function(n){return n.$u?i.utc():i();};a.toNow=function(n){return this.to(l(this),n);},a.fromNow=function(n){return this.from(l(this),n);};};},"object"==typeof r&&void 0!==n?n.exports=o():"function"==typeof define&&define.amd?define(o):(a="undefined"!=typeof globalThis?globalThis:a||self).dayjs_plugin_relativeTime=o();},"7e9288b9":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{animate:function(){return h;},onAnimateFinished:function(){return c;},onAnimatesFinished:function(){return f;},parseAnimationOption:function(){return u;},transition:function(){return m;},transitionShape:function(){return p;}});var a=i("777fffbe"),o=i("3862611d"),s=a._(i("83684c30")),l=i("f1d8aa22");function u(n){if(!n)return{enter:!1,update:!1,exit:!1};var r=["enter","update","exit"],i=Object.fromEntries(Object.entries(n).filter(function(n){var i=(0,o.__read)(n,1)[0];return!r.includes(i);}));return Object.fromEntries(r.map(function(r){return"boolean"!=typeof n&&"enter"in n&&"update"in n&&"exit"in n?!1===n[r]?[r,!1]:[r,(0,o.__assign)((0,o.__assign)({},n[r]),i)]:[r,i];}));}function c(n,r){n?n.finished.then(r):r();}function f(n,r){0===n.length?r():Promise.all(n.map(function(n){return null==n?void 0:n.finished;})).then(r);}function d(n,r){"update"in n?n.update(r):n.attr(r);}function h(n,r,i){return 0===r.length?null:i?n.animate(r,i):(d(n,{style:r.slice(-1)[0]}),null);}function p(n,r,i,a){if(void 0===a&&(a="destroy"),"text"===n.nodeName&&"text"===r.nodeName&&n.attributes.text===r.attributes.text)return n.remove(),[null];var s=function(){"destroy"===a?n.destroy():"hide"===a&&(0,l.hide)(n),r.isVisible()&&(0,l.show)(r);};if(!i)return s(),[null];var u=i.duration,f=void 0===u?0:u,d=i.delay,h=void 0===d?0:d,p=Math.ceil(+f/2),m=+f/4,g=(0,o.__read)(n.getGeometryBounds().center,2),v=g[0],y=g[1],_=(0,o.__read)(r.getGeometryBounds().center,2),b=_[0],x=_[1],E=(0,o.__read)([(v+b)/2-v,(y+x)/2-y],2),w=E[0],S=E[1],T=n.style.opacity,A=r.style.opacity,C=n.style.transform||"",O=r.style.transform||"",M=n.animate([{opacity:void 0===T?1:T,transform:"translate(0, 0) ".concat(C)},{opacity:0,transform:"translate(".concat(w,", ").concat(S,") ").concat(C)}],(0,o.__assign)((0,o.__assign)({fill:"both"},i),{duration:h+p+m})),R=r.animate([{opacity:0,transform:"translate(".concat(-w,", ").concat(-S,") ").concat(O),offset:.01},{opacity:void 0===A?1:A,transform:"translate(0, 0) ".concat(O)}],(0,o.__assign)((0,o.__assign)({fill:"both"},i),{duration:p+m,delay:h+p-m}));return c(R,s),[M,R];}function m(n,r,i){var a={},l={};return(Object.entries(r).forEach(function(r){var i=(0,o.__read)(r,2),u=i[0],c=i[1];if(!(0,s.default)(c)){var f=n.style[u]||n.parsedStyle[u]||0;f!==c&&(a[u]=f,l[u]=c);}}),i)?h(n,[a,l],(0,o.__assign)({fill:"both"},i)):(d(n,l),null);}},"7f096b0c":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return v;}});var a=i("777fffbe"),o=i("db1de58d"),s=a._(i("05da3880")),l=Object.defineProperty,u=Object.defineProperties,c=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,p=(n,r,i)=>r in n?l(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i,m=(n,r)=>{for(var i in r||(r={}))d.call(r,i)&&p(n,i,r[i]);if(f)for(var i of f(r))h.call(r,i)&&p(n,i,r[i]);return n;},g=(n,r)=>u(n,c(r)),v=class{constructor(n,r,i,a){this.vectorLayerCache={},this.x=r,this.y=i,this.z=a,this.vectorTile=new o.VectorTile(new s.default(n));}getTileData(n){if(!n||!this.vectorTile.layers[n])return[];if(this.vectorLayerCache[n])return this.vectorLayerCache[n];let r=this.vectorTile.layers[n];if(Array.isArray(r.features))return this.vectorLayerCache[n]=r.features,r.features;let i=[];for(let n=0;n<r.length;n++){let a=r.feature(n).toGeoJSON(this.x,this.y,this.z);i.push(g(m({},a),{properties:m({id:a.id},a.properties)}));}return this.vectorLayerCache[n]=i,i;}getFeatureById(){throw Error("Method not implemented.");}};},"7f173680":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{TYPE:function(){return w;},createField:function(){return A;}});var a=i("777fffbe"),o=i("852bbaa9"),s=a._(i("a854094b")),l=a._(i("ee64167d")),u=a._(i("e4870cf0")),c=a._(i("613f75ca"));i("87ed5a26"),i("60dbaca3"),i("865cc100");var f=i("e7d0cdde"),d=a._(i("064ecd09")),h=i("a3f18692"),p=i("a275200c"),m=o._(i("609f48be")),g=a._(i("2faf3d77")),v=a._(i("dfb73c9a")),y=a._(i("ef77f514")),_=i("02a23b09"),b=i("dac8af92"),x=["valueType","customLightMode","lightFilterLabelFormatter","valuePropName","ignoreWidth","defaultProps"],E=["label","tooltip","placeholder","width","bordered","messageVariables","ignoreFormItem","transform","convertValue","readonly","allowClear","colSize","getFormItemProps","getFieldProps","filedConfig","cacheForSwr","proFieldProps"],w=Symbol("ProFormComponent"),S={xs:104,s:216,sm:216,m:328,md:328,l:440,lg:440,xl:552},T=["switch","radioButton","radio","rate"];function A(n,r){n.displayName="ProFormComponent";var i=function(i){var a=(0,u.default)((0,u.default)({},null==i?void 0:i.filedConfig),r),o=a.valueType,v=a.customLightMode,w=a.lightFilterLabelFormatter,A=a.valuePropName,C=void 0===A?"value":A,O=a.ignoreWidth,M=a.defaultProps,R=(0,c.default)(a,x),P=(0,u.default)((0,u.default)({},M),i),k=P.label,I=P.tooltip,L=P.placeholder,N=P.width,D=P.bordered,F=P.messageVariables,B=P.ignoreFormItem,j=P.transform,z=P.convertValue,U=P.readonly,V=P.allowClear,G=(P.colSize,P.getFormItemProps),H=P.getFieldProps,W=(P.filedConfig,P.cacheForSwr),X=P.proFieldProps,q=(0,c.default)(P,E),$=o||q.valueType,Y=(0,m.useMemo)(function(){return O||T.includes($);},[O,$]),Z=(0,m.useState)(),K=(0,l.default)(Z,2)[1],Q=(0,m.useState)(),J=(0,l.default)(Q,2),ee=J[0],et=J[1],en=m.default.useContext(g.default),er=(0,f.useDeepCompareMemo)(function(){return{formItemProps:null==G?void 0:G(),fieldProps:null==H?void 0:H()};},[H,G,q.dependenciesValues,ee]),ei=(0,f.useDeepCompareMemo)(function(){var n=(0,u.default)((0,u.default)((0,u.default)((0,u.default)({},B?(0,f.omitUndefined)({value:q.value}):{}),{},{placeholder:L,disabled:i.disabled},en.fieldProps),er.fieldProps),q.fieldProps);return n.style=(0,f.omitUndefined)(null==n?void 0:n.style),n;},[B,q.value,q.fieldProps,L,i.disabled,en.fieldProps,er.fieldProps]),ea=(0,f.pickProFormItemProps)(q),eo=(0,f.useDeepCompareMemo)(function(){return(0,u.default)((0,u.default)((0,u.default)((0,u.default)({},en.formItemProps),ea),er.formItemProps),q.formItemProps);},[er.formItemProps,en.formItemProps,q.formItemProps,ea]),es=(0,f.useDeepCompareMemo)(function(){return(0,u.default)((0,u.default)({messageVariables:F},R),eo);},[R,eo,F]);(0,p.noteOnce)(!q.defaultValue,"\u8BF7\u4E0D\u8981\u5728 Form \u4E2D\u4F7F\u7528 defaultXXX\u3002\u5982\u679C\u9700\u8981\u9ED8\u8BA4\u503C\u8BF7\u4F7F\u7528 initialValues \u548C initialValue\u3002");var el=(0,m.useContext)(h.FieldContext).prefixName,eu=(0,f.useDeepCompareMemo)(function(){var n,r=null==es?void 0:es.name;return Array.isArray(r)&&(r=r.join("_")),Array.isArray(el)&&r&&(r="".concat(el.join("."),".").concat(r)),r&&"form-".concat(null!==(n=en.formKey)&&void 0!==n?n:"","-field-").concat(r);},[(0,f.stringify)(null==es?void 0:es.name),el,en.formKey]),ec=(0,f.useRefFunction)(function(){var n;G||H?et([]):q.renderFormItem&&K([]);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];null==ei||null===(n=ei.onChange)||void 0===n||n.call.apply(n,[ei].concat(i));}),ef=(0,f.useDeepCompareMemo)(function(){var n=(0,u.default)({width:N&&!S[N]?N:en.grid?"100%":void 0},null==ei?void 0:ei.style);return Y&&Reflect.deleteProperty(n,"width"),(0,f.omitUndefined)(n);},[(0,f.stringify)(null==ei?void 0:ei.style),en.grid,Y,N]),ed=(0,f.useDeepCompareMemo)(function(){var n=N&&S[N];return(0,d.default)(null==ei?void 0:ei.className,(0,s.default)({"pro-field":n},"pro-field-".concat(N),n&&!Y))||void 0;},[N,null==ei?void 0:ei.className,Y]),eh=(0,f.useDeepCompareMemo)(function(){return(0,f.omitUndefined)((0,u.default)((0,u.default)({},en.proFieldProps),{},{mode:null==q?void 0:q.mode,readonly:U,params:q.params,proFieldKey:eu,cacheForSwr:W},X));},[en.proFieldProps,null==q?void 0:q.mode,q.params,U,eu,W,X]),ep=(0,f.useDeepCompareMemo)(function(){return(0,u.default)((0,u.default)({onChange:ec,allowClear:V},ei),{},{style:ef,className:ed});},[V,ed,ec,ei,ef]),em=(0,f.useDeepCompareMemo)(function(){return(0,b.jsx)(n,(0,u.default)((0,u.default)({},q),{},{fieldProps:ep,proFieldProps:eh,ref:null==i?void 0:i.fieldRef}),i.proFormFieldKey||i.name);},[eh,ep,q]),eg=(0,f.useDeepCompareMemo)(function(){var n,r,a,o;return(0,b.jsx)(y.default,(0,u.default)((0,u.default)({label:k&&(null==X?void 0:X.light)!==!0?k:void 0,tooltip:(null==X?void 0:X.light)!==!0&&I,valuePropName:C},es),{},{ignoreFormItem:B,transform:j,dataFormat:null==ei?void 0:ei.format,valueType:$,messageVariables:(0,u.default)({label:k||""},null==es?void 0:es.messageVariables),convertValue:z,lightProps:(0,f.omitUndefined)((0,u.default)((0,u.default)((0,u.default)({},ei),{},{valueType:$,bordered:D,allowClear:null!==(r=null==em||null===(a=em.props)||void 0===a?void 0:a.allowClear)&&void 0!==r?r:V,light:null==X?void 0:X.light,label:k,customLightMode:v,labelFormatter:w,valuePropName:C,footerRender:null==em||null===(o=em.props)||void 0===o?void 0:o.footerRender},q.lightProps),es.lightProps)),children:em}),i.proFormFieldKey||(null===(n=es.name)||void 0===n?void 0:n.toString()));},[k,null==X?void 0:X.light,I,C,i.proFormFieldKey,es,B,j,ei,$,z,D,em,V,v,w,q.lightProps]),ev=(0,_.useGridHelpers)(q).ColWrapper;return(0,b.jsx)(ev,{children:eg});};return function(n){var r=n.dependencies;return r?(0,b.jsx)(v.default,{name:r,originDependencies:null==n?void 0:n.originDependencies,children:function(a){return(0,b.jsx)(i,(0,u.default)({dependenciesValues:a,dependencies:r},n));}}):(0,b.jsx)(i,(0,u.default)({dependencies:r},n));};}},"7f3dc882":function(n,r,i){"use strict";function a(n){if(Array.isArray(n))return n;if("Feature"===n.type){if(null!==n.geometry)return n.geometry.coordinates;}else if(n.coordinates)return n.coordinates;throw Error("coords must be GeoJSON Feature, Geometry Object or an Array");}function o(n){return"Feature"===n.type?n.geometry:n;}i.d(r,"__esModule",{value:!0}),i.e(r,{getCoords:function(){return a;},getGeom:function(){return o;}});},"801e414d":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return F;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("7cfeda15"),l=a._(s),u=i("99c0cd4c"),c=a._(u),f=i("e4870cf0"),d=a._(f),h=i("a854094b"),p=a._(h),m=i("ee64167d"),g=a._(m),v=i("000ce906"),y=i("064ecd09"),_=a._(y),b=i("609f48be"),x=o._(b),E=i("c98516ca"),w=o._(E),S=i("8e17111c");a._(S);var T=i("1cf256f2"),A=a._(T),C=i("044bdec0"),O=a._(C),M=i("dfe6c97a"),R=a._(M),P=i("a275200c");a._(P);var k=i("0c4be061"),I=a._(k),L=i("d7f32850"),N=i("e313b0e4"),D=function(n){var r,i=n.ellipsis,a=n.rowType,o=n.children,s=!0===i?{showTitle:!0}:i;return s&&(s.showTitle||"header"===a)&&("string"==typeof o||"number"==typeof o?r=o.toString():x.isValidElement(o)&&"string"==typeof o.props.children&&(r=o.props.children)),r;},F=x.memo(function(n){var r,i,a,o,s,u,f,h,m,y,b=n.component,E=n.children,S=n.ellipsis,T=n.scope,C=n.prefixCls,M=n.className,P=n.align,k=n.record,F=n.render,B=n.dataIndex,j=n.renderIndex,z=n.shouldCellUpdate,U=n.index,V=n.rowType,G=n.colSpan,H=n.rowSpan,W=n.fixLeft,X=n.fixRight,q=n.firstFixLeft,$=n.lastFixLeft,Y=n.firstFixRight,Z=n.lastFixRight,K=n.appendNode,Q=n.additionalProps,J=void 0===Q?{}:Q,ee=n.isSticky,et="".concat(C,"-cell"),en=(0,v.useContext)(w.default,["supportSticky","allColumnsFixedLeft","rowHoverable"]),er=en.supportSticky,ei=en.allColumnsFixedLeft,ea=en.rowHoverable,eo=(r=x.useContext(I.default),i=(0,w.useImmutableMark)(),(0,A.default)(function(){if((0,L.validateValue)(E))return[E];var n=null==B||""===B?[]:Array.isArray(B)?B:[B],i=(0,R.default)(k,n),a=i,o=void 0;if(F){var s=F(i,k,j);!s||"object"!==(0,c.default)(s)||Array.isArray(s)||x.isValidElement(s)?a=s:(a=s.children,o=s.props,r.renderWithProps=!0);}return[a,o];},[i,k,E,B,F,j],function(n,i){if(z){var a=(0,g.default)(n,2)[1];return z((0,g.default)(i,2)[1],a);}return!!r.renderWithProps||!(0,O.default)(n,i,!0);})),es=(0,g.default)(eo,2),el=es[0],eu=es[1],ec={},ef="number"==typeof W&&er,ed="number"==typeof X&&er;ef&&(ec.position="sticky",ec.left=W),ed&&(ec.position="sticky",ec.right=X);var eh=null!==(a=null!==(o=null!==(s=null==eu?void 0:eu.colSpan)&&void 0!==s?s:J.colSpan)&&void 0!==o?o:G)&&void 0!==a?a:1,ep=null!==(u=null!==(f=null!==(h=null==eu?void 0:eu.rowSpan)&&void 0!==h?h:J.rowSpan)&&void 0!==f?f:H)&&void 0!==u?u:1,em=(0,v.useContext)(w.default,function(n){var r,i;return[(r=ep||1,i=n.hoverStartRow,U<=n.hoverEndRow&&U+r-1>=i),n.onHover];}),eg=(0,g.default)(em,2),ev=eg[0],ey=eg[1],e_=(0,N.useEvent)(function(n){var r;k&&ey(U,U+ep-1),null==J||null===(r=J.onMouseEnter)||void 0===r||r.call(J,n);}),eb=(0,N.useEvent)(function(n){var r;k&&ey(-1,-1),null==J||null===(r=J.onMouseLeave)||void 0===r||r.call(J,n);});if(0===eh||0===ep)return null;var ex=null!==(m=J.title)&&void 0!==m?m:D({rowType:V,ellipsis:S,children:el}),eE=(0,_.default)(et,M,(y={},(0,p.default)((0,p.default)((0,p.default)((0,p.default)((0,p.default)((0,p.default)((0,p.default)((0,p.default)((0,p.default)((0,p.default)(y,"".concat(et,"-fix-left"),ef&&er),"".concat(et,"-fix-left-first"),q&&er),"".concat(et,"-fix-left-last"),$&&er),"".concat(et,"-fix-left-all"),$&&ei&&er),"".concat(et,"-fix-right"),ed&&er),"".concat(et,"-fix-right-first"),Y&&er),"".concat(et,"-fix-right-last"),Z&&er),"".concat(et,"-ellipsis"),S),"".concat(et,"-with-append"),K),"".concat(et,"-fix-sticky"),(ef||ed)&&ee&&er),(0,p.default)(y,"".concat(et,"-row-hover"),!eu&&ev)),J.className,null==eu?void 0:eu.className),ew={};P&&(ew.textAlign=P);var eS=(0,d.default)((0,d.default)((0,d.default)((0,d.default)({},null==eu?void 0:eu.style),ec),ew),J.style),eT=el;return"object"!==(0,c.default)(eT)||Array.isArray(eT)||x.isValidElement(eT)||(eT=null),S&&($||Y)&&(eT=x.createElement("span",{className:"".concat(et,"-content")},eT)),x.createElement(b,(0,l.default)({},eu,J,{className:eE,style:eS,title:ex,scope:T,onMouseEnter:ea?e_:void 0,onMouseLeave:ea?eb:void 0,colSpan:1!==eh?eh:null,rowSpan:1!==ep?ep:null}),K,eT);});},"805ebd2d":function(n,r,i){"use strict";n.exports=function(){var n=1;return{generate:function(){return n++;}};};},"80a41602":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),r.call=f,r.default=void 0,r.note=u,r.noteOnce=h,r.preMessage=void 0,r.resetWarned=c,r.warning=l,r.warningOnce=d;var a={},o=[],s=r.preMessage=function(n){o.push(n);};function l(n,r){}function u(n,r){}function c(){a={};}function f(n,r,i){r||a[i]||(n(!1,i),a[i]=!0);}function d(n,r){f(l,n,r);}function h(n,r){f(u,n,r);}d.preMessage=s,d.resetWarned=c,d.noteOnce=h,r.default=d;},"80e01657":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return _;}});var a=i("777fffbe"),o=i("852bbaa9"),s=a._(i("e4870cf0")),l=a._(i("613f75ca")),u=i("2a7c9880"),c=o._(i("609f48be")),f=a._(i("2faf3d77")),d=a._(i("551ddf56")),h=i("dac8af92"),p=["fieldProps","proFieldProps"],m=["fieldProps","proFieldProps"],g="time",v=c.default.forwardRef(function(n,r){var i=n.fieldProps,a=n.proFieldProps,o=(0,l.default)(n,p),m=(0,c.useContext)(f.default);return(0,h.jsx)(d.default,(0,s.default)({ref:r,fieldProps:(0,s.default)({getPopupContainer:m.getPopupContainer},i),valueType:"timeRange",proFieldProps:a,filedConfig:{valueType:"timeRange",customLightMode:!0,lightFilterLabelFormatter:function(n){return(0,u.dateArrayFormatter)(n,"HH:mm:ss");}}},o));}),y=function(n){var r=n.fieldProps,i=n.proFieldProps,a=(0,l.default)(n,m),o=(0,c.useContext)(f.default);return(0,h.jsx)(d.default,(0,s.default)({fieldProps:(0,s.default)({getPopupContainer:o.getPopupContainer},r),valueType:g,proFieldProps:i,filedConfig:{customLightMode:!0,valueType:g}},a));};y.RangePicker=v;var _=y;},"8204d5bc":function(n,r,i){"use strict";var a=n.exports={};a.isIE=function(n){var r;return(-1!==(r=navigator.userAgent.toLowerCase()).indexOf("msie")||-1!==r.indexOf("trident")||-1!==r.indexOf(" edge/"))&&(!n||n===function(){var n,r=3,i=document.createElement("div"),a=i.getElementsByTagName("i");do i.innerHTML="<!--[if gt IE "+ ++r+"]><i></i><![endif]-->";while(a[0])return r>4?r:n;}());},a.isLegacyOpera=function(){return!!window.opera;};},"824b66b4":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return h;}});var a=i("777fffbe"),o=a._(i("9b84be4b")),s=a._(i("a854094b")),l=i("553ee311"),u=i("9479dab9"),c=a._(i("6654a076")),f=i("07cf43fc"),d=i("8970bd89");class h extends c.default{constructor(...n){super(...n),(0,s.default)(this,"textureEventFlag",!1),(0,s.default)(this,"texture",this.createTexture2D({data:new Uint8Array([0,0,0,0]),width:1,height:1})),(0,s.default)(this,"updateTexture",()=>{let{createTexture2D:n}=this.rendererService;if(0===this.textures.length&&(this.textures=[this.texture]),this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return;}this.texture=n({data:this.iconService.getCanvas(),mag:l.gl.NEAREST,min:l.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128});});}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,DISTANCE_INDEX:10,NORMAL:11,UV:12});}getCommonUniformsInfo(){let{sourceColor:n,targetColor:r,textureBlend:i="normal",lineType:a="solid",dashArray:o=[10,5,0,0],lineTexture:s=!1,iconStep:l=100,vertexHeightScale:c=20,strokeWidth:d=0,raisingHeight:h=0,heightfixed:p=!1,linearDir:m=f.LinearDir.VERTICAL,blur:g=[1,1,1,0]}=this.layer.getLayerConfig(),v=o;if("dash"!==a&&(v=[0,0,0,0]),2===v.length&&v.push(0,0),this.rendererService.getDirty()&&this.texture){var y;null===(y=this.texture)||void 0===y||y.bind();}let{animateOption:_}=this.layer.getLayerConfig(),b=0,x=[0,0,0,0],E=[0,0,0,0];n&&r&&(x=(0,u.rgb2arr)(n),E=(0,u.rgb2arr)(r),b=1);let w={u_animate:this.animateOption2Array(_),u_dash_array:v,u_blur:g,u_sourceColor:x,u_targetColor:E,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:l,u_heightfixed:Number(p),u_vertexScale:c,u_raisingHeight:Number(h),u_strokeWidth:d,u_textureBlend:i===f.TextureBlend.NORMAL?0:1,u_line_texture:s?1:0,u_linearDir:m===f.LinearDir.VERTICAL?1:0,u_linearColor:b,u_time:this.layer.getLayerAnimateTime()||0};return this.getUniformsBufferInfo(w);}initModels(){var n=this;return(0,o.default)(function*(){return n.initUniformsBuffer(),n.textureEventFlag||(n.textureEventFlag=!0,n.updateTexture(),n.iconService.on("imageUpdate",n.updateTexture)),n.buildModels();})();}clearModels(){var n;null===(n=this.texture)||void 0===n||n.destroy(),this.iconService.off("imageUpdate",this.updateTexture);}buildModels(){var n=this;return(0,o.default)(function*(){let{depth:r=!1}=n.layer.getLayerConfig(),{frag:i,vert:a,type:o}=n.getShaders();return n.layer.triangulation=d.LineTriangulation,[(yield n.layer.buildLayerModel({moduleName:"line"+o,vertexShader:a,fragmentShader:i,triangulation:d.LineTriangulation,defines:n.getDefines(),inject:n.getInject(),depth:{enable:r}}))];})();}getShaders(){return{frag:'// #extension GL_OES_standard_derivatives : enable\n#define Animate 0.0\n#define LineTexture 1.0\n\nuniform sampler2D u_texture;\nlayout(std140) uniform commonUniorm {\n  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n  vec4 u_dash_array;\n  vec4 u_blur;\n  vec4 u_sourceColor;\n  vec4 u_targetColor;\n  vec2 u_textSize;\n  float u_icon_step: 100;\n  float u_heightfixed: 0.0;\n  float u_vertexScale: 1.0;\n  float u_raisingHeight: 0.0;\n  float u_strokeWidth: 0.0;\n  float u_textureBlend;\n  float u_line_texture;\n  float u_linearDir: 1.0;\n  float u_linearColor: 0;\n  float u_time;\n};\n\nin vec4 v_color;\nin vec4 v_stroke;\n// dash\nin vec4 v_dash_array;\nin float v_d_distance_ratio;\nin vec2 v_iconMapUV;\nin vec4 v_texture_data;\n\nout vec4 outputColor;\n#pragma include "picking"\n\n// [animate, duration, interval, trailLength],\nvoid main() {\n  if(u_dash_array!=vec4(0.0)){\n    float dashLength = mod(v_d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);\n    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {\n      // \u865A\u7EBF\u90E8\u5206\n      discard;\n    };\n  }\n  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6\n  float d_distance_ratio = v_texture_data.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B\n  if(u_linearDir < 1.0) {\n    d_distance_ratio = v_texture_data.a;\n  }\n  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272\n    outputColor = mix(u_sourceColor, u_targetColor, d_distance_ratio);\n    outputColor.a *= v_color.a;\n  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272\n     outputColor = v_color;\n  }\n  // anti-alias\n  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));\n  if(u_animate.x == Animate) {\n      animateSpeed = u_time / u_animate.y;\n       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);\n      alpha = (alpha + u_animate.w -1.0) / u_animate.w;\n      alpha = smoothstep(0., 1., alpha);\n      outputColor.a *= alpha;\n  }\n\n  if(u_line_texture == LineTexture) { // while load texture\n    float aDistance = v_texture_data.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB\n    float d_texPixelLen = v_texture_data.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E\n    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);\n    float v = v_texture_data.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C\n\n    // v = max(smoothstep(0.95, 1.0, v), v);\n    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;\n     vec4 pattern = texture(SAMPLER_2D(u_texture), uv);\n\n    if(u_textureBlend == 0.0) { // normal\n      pattern.a = 0.0;\n      outputColor += pattern;\n    } else { // replace\n        pattern.a *= v_color.a;\n        if(outputColor.a <= 0.0) {\n          pattern.a = 0.0;\n        }\n        outputColor = pattern;\n    }\n  } \n\n  float v = v_texture_data.a;\n  float strokeWidth = min(0.5, u_strokeWidth);\n  // \u7ED8\u5236 border\n  if(strokeWidth > 0.01) {\n    float borderOuterWidth = strokeWidth / 2.0;\n\n\n    if(v >= 1.0 - strokeWidth || v <= strokeWidth) {\n      if(v > strokeWidth) { // \u5916\u4FA7\n        float linear = smoothstep(0.0, 1.0, (v - (1.0 - strokeWidth))/strokeWidth);\n        //  float linear = step(0.0, (v - (1.0 - borderWidth))/borderWidth);\n        outputColor.rgb = mix(outputColor.rgb, v_stroke.rgb, linear);\n      } else if(v <= strokeWidth) {\n        float linear = smoothstep(0.0, 1.0, v/strokeWidth);\n        outputColor.rgb = mix(v_stroke.rgb, outputColor.rgb, linear);\n      }\n    }\n\n    if(v < borderOuterWidth) {\n      outputColor.a = mix(0.0, outputColor.a, v/borderOuterWidth);\n    } else if(v > 1.0 - borderOuterWidth) {\n      outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - borderOuterWidth))/borderOuterWidth);\n    }\n  }\n\n  // blur\n  float blurV = v_texture_data.a;\n  if(blurV < 0.5) {\n    outputColor.a *= mix(u_blur.r, u_blur.g, blurV/0.5);\n  } else {\n    outputColor.a *= mix(u_blur.g, u_blur.b, (blurV - 0.5)/0.5);\n  }\n  \n  outputColor = filterColor(outputColor);\n}\n',vert:'#define Animate (0.0)\n\nlayout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;\nlayout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;\nlayout(location = ATTRIBUTE_LOCATION_SIZE) in vec2 a_Size;\nlayout(location = ATTRIBUTE_LOCATION_DISTANCE_INDEX) in vec3 a_DistanceAndIndexAndMiter;\nlayout(location = ATTRIBUTE_LOCATION_NORMAL) in vec4 a_Normal_Total_Distance;\nlayout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;\n\nlayout(std140) uniform commonUniorm {\n  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n  vec4 u_dash_array;\n  vec4 u_blur;\n  vec4 u_sourceColor;\n  vec4 u_targetColor;\n  vec2 u_textSize;\n  float u_icon_step: 100;\n  float u_heightfixed: 0.0;\n  float u_vertexScale: 1.0;\n  float u_raisingHeight: 0.0;\n  float u_strokeWidth: 0.0;\n  float u_textureBlend;\n  float u_line_texture;\n  float u_linearDir: 1.0;\n  float u_linearColor: 0;\n  float u_time;\n};\n\nout vec4 v_color;\nout vec4 v_stroke;\n//dash\nout vec4 v_dash_array;\nout float v_d_distance_ratio;\n// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09\nout vec2 v_iconMapUV;\nout vec4 v_texture_data;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  vec2 a_DistanceAndIndex = a_DistanceAndIndexAndMiter.xy;\n  float a_Miter = a_DistanceAndIndexAndMiter.z;\n  vec3 a_Normal = a_Normal_Total_Distance.xyz;\n  float a_Total_Distance = a_Normal_Total_Distance.w;\n  //dash\u8F93\u51FA\n  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;\n  v_d_distance_ratio = a_DistanceAndIndex.x / a_Total_Distance;\n\n  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97\n  float d_texPixelLen; // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E\n  v_iconMapUV = a_iconMapUV;\n  d_texPixelLen = project_float_pixel(u_icon_step);\n\n  v_color = a_Color;\n  v_color.a *= opacity;\n  v_stroke = stroke;\n\n  vec3 size = a_Miter * setPickingSize(a_Size.x) * a_Normal;\n\n  vec2 offset = project_pixel(size.xy);\n\n  float lineDistance = a_DistanceAndIndex.x;\n  float currentLinePointRatio = lineDistance / a_Total_Distance;\n\n  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\uFF08\u5411\u4E24\u4FA7\u504F\u79FB\u7684\u548C\uFF09\n  float linePixelSize = project_pixel(a_Size.x) * 2.0; // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB \u5355\u4FA7 * 2\n  float texV = lineOffsetWidth / linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C\n\n  v_texture_data = vec4(currentLinePointRatio, lineDistance, d_texPixelLen, texV);\n  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570\n\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0), a_Position64Low);\n\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));\n\n  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5 vertex height\n  float lineHeight = a_Size.y; // size \u7B2C\u4E8C\u4E2A\u53C2\u6570\u4EE3\u8868\u7684\u9AD8\u5EA6 [linewidth, lineheight]\n\n  // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4\n  if (\n    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET\n  ) {\n    // mapbox\n    // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8\n    float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);\n    h *= mapboxZoomScale;\n    h += u_raisingHeight * mapboxZoomScale;\n    if (u_heightfixed > 0.0) {\n      lineHeight *= mapboxZoomScale;\n    }\n  }\n\n  gl_Position = project_common_position_to_clipspace(\n    vec4(project_pos.xy + offset, lineHeight + h, 1.0)\n  );\n\n  setPickingColor(a_PickingColor);\n}\n',type:""};}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:l.AttributeType.Attribute,descriptor:{name:"a_DistanceAndIndexAndMiter",shaderLocation:this.attributeLocation.DISTANCE_INDEX,buffer:{usage:l.gl.STATIC_DRAW,data:[],type:l.gl.FLOAT},size:3,update:(n,r,i,a,o,s)=>void 0===s?[i[3],10,i[4]]:[i[3],s,i[4]]}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:l.AttributeType.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:l.gl.DYNAMIC_DRAW,data:[],type:l.gl.FLOAT},size:2,update:n=>{let{size:r=1}=n;return Array.isArray(r)?[r[0],r[1]]:[r,0];}}}),this.styleAttributeService.registerStyleAttribute({name:"normal_total_distance",type:l.AttributeType.Attribute,descriptor:{name:"a_Normal_Total_Distance",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:l.gl.STATIC_DRAW,data:[],type:l.gl.FLOAT},size:4,update:(n,r,i,a,o)=>[...o,i[5]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:l.AttributeType.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:l.gl.DYNAMIC_DRAW,data:[],type:l.gl.FLOAT},size:2,update:n=>{let r=this.iconService.getIconMap(),{texture:i}=n,{x:a,y:o}=r[i]||{x:0,y:0};return[a,o];}}});}}},"82bfc804":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});var a=Array.isArray;},"831aa241":function(n,r,i){n.exports=function(n,r){return n.has(r);};},"83684c30":function(n,r,i){"use strict";function a(n){return null==n;}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},"83d97c4d":function(n,r,i){var a=i("b60abbbd"),o=i("13850e1a");n.exports=function(n,r,i){var s=!0,l=!0;if("function"!=typeof n)throw TypeError("Expected a function");return o(i)&&(s="leading"in i?!!i.leading:s,l="trailing"in i?!!i.trailing:l),a(n,r,{leading:s,maxWait:r,trailing:l});};},"840563a5":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"dataTransform",{enumerable:!0,get:function(){return o;}});var a=i("d8554caa"),o=function(n){var r=n.options,i=r.data;return(0,a.get)(i,"value")||"fetch"!==(0,a.get)(i,"type")&&(0,a.isPlainObject)(i)&&(0,a.set)(r,"data.value",i),n;};},"84311e53":function(n,r,i){"use strict";var a=Object.prototype.hasOwnProperty,o="~";function s(){}function l(n,r,i){this.fn=n,this.context=r,this.once=i||!1;}function u(n,r,i,a,s){if("function"!=typeof i)throw TypeError("The listener must be a function");var u=new l(i,a||n,s),c=o?o+r:r;return n._events[c]?n._events[c].fn?n._events[c]=[n._events[c],u]:n._events[c].push(u):(n._events[c]=u,n._eventsCount++),n;}function c(n,r){0==--n._eventsCount?n._events=new s:delete n._events[r];}function f(){this._events=new s,this._eventsCount=0;}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(o=!1)),f.prototype.eventNames=function(){var n,r,i=[];if(0===this._eventsCount)return i;for(r in n=this._events)a.call(n,r)&&i.push(o?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(n)):i;},f.prototype.listeners=function(n){var r=o?o+n:n,i=this._events[r];if(!i)return[];if(i.fn)return[i.fn];for(var a=0,s=i.length,l=Array(s);a<s;a++)l[a]=i[a].fn;return l;},f.prototype.listenerCount=function(n){var r=o?o+n:n,i=this._events[r];return i?i.fn?1:i.length:0;},f.prototype.emit=function(n,r,i,a,s,l){var u=o?o+n:n;if(!this._events[u])return!1;var c,f,d=this._events[u],h=arguments.length;if(d.fn){switch(d.once&&this.removeListener(n,d.fn,void 0,!0),h){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,r),!0;case 3:return d.fn.call(d.context,r,i),!0;case 4:return d.fn.call(d.context,r,i,a),!0;case 5:return d.fn.call(d.context,r,i,a,s),!0;case 6:return d.fn.call(d.context,r,i,a,s,l),!0;}for(f=1,c=Array(h-1);f<h;f++)c[f-1]=arguments[f];d.fn.apply(d.context,c);}else{var p,m=d.length;for(f=0;f<m;f++)switch(d[f].once&&this.removeListener(n,d[f].fn,void 0,!0),h){case 1:d[f].fn.call(d[f].context);break;case 2:d[f].fn.call(d[f].context,r);break;case 3:d[f].fn.call(d[f].context,r,i);break;case 4:d[f].fn.call(d[f].context,r,i,a);break;default:if(!c)for(p=1,c=Array(h-1);p<h;p++)c[p-1]=arguments[p];d[f].fn.apply(d[f].context,c);}}return!0;},f.prototype.on=function(n,r,i){return u(this,n,r,i,!1);},f.prototype.once=function(n,r,i){return u(this,n,r,i,!0);},f.prototype.removeListener=function(n,r,i,a){var s=o?o+n:n;if(!this._events[s])return this;if(!r)return c(this,s),this;var l=this._events[s];if(l.fn)l.fn!==r||a&&!l.once||i&&l.context!==i||c(this,s);else{for(var u=0,f=[],d=l.length;u<d;u++)(l[u].fn!==r||a&&!l[u].once||i&&l[u].context!==i)&&f.push(l[u]);f.length?this._events[s]=1===f.length?f[0]:f:c(this,s);}return this;},f.prototype.removeAllListeners=function(n){var r;return n?(r=o?o+n:n,this._events[r]&&c(this,r)):(this._events=new s,this._eventsCount=0),this;},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=o,f.EventEmitter=f,void 0!==n&&(n.exports=f);},84334417:function(n,r,i){var a;a=function(){"use strict";var n=function(n){return n instanceof Uint8Array||n instanceof Uint16Array||n instanceof Uint32Array||n instanceof Int8Array||n instanceof Int16Array||n instanceof Int32Array||n instanceof Float32Array||n instanceof Float64Array||n instanceof Uint8ClampedArray;},r=function(n,r){for(var i=Object.keys(r),a=0;a<i.length;++a)n[i[a]]=r[i[a]];return n;};function i(n){var r=Error("(regl) "+n);throw console.error(r),r;}function a(n,r){n||i(r);}function o(n){return n?": "+n:"";}function s(n,r){switch(r){case"number":return"number"==typeof n;case"object":return"object"==typeof n;case"string":return"string"==typeof n;case"boolean":return"boolean"==typeof n;case"function":return"function"==typeof n;case"undefined":return void 0===n;case"symbol":return"symbol"==typeof n;}}function l(n,r,a){0>r.indexOf(n)&&i("invalid value"+o(a)+". must be one of: "+r);}var u=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function c(n,r){for(n+="";n.length<r;)n=" "+n;return n;}function f(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1;}function d(n,r){this.number=n,this.line=r,this.errors=[];}function h(n,r,i){this.file=n,this.line=r,this.message=i;}function p(){var n=Error(),r=(n.stack||n).toString(),i=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(r);if(i)return i[1];var a=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(r);return a?a[1]:"unknown";}function m(){var n=Error(),r=(n.stack||n).toString(),i=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(r);if(i)return i[1];var a=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(r);return a?a[1]:"unknown";}function g(n,r){var i=n.split("\n"),a=1,o=0,s={unknown:new f,0:new f};s.unknown.name=s[0].name=r||p(),s.unknown.lines.push(new d(0,""));for(var l=0;l<i.length;++l){var u=i[l],c=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(u);if(c)switch(c[1]){case"line":var h=/(\d+)(\s+\d+)?/.exec(c[2]);!h||(a=0|h[1],!h[2]||(o=0|h[2])in s||(s[o]=new f));break;case"define":var m,g=/SHADER_NAME(_B64)?\s+(.*)$/.exec(c[2]);g&&(s[o].name=g[1]?(m=g[2],"undefined"!=typeof atob?atob(m):"base64:"+m):g[2]);}s[o].lines.push(new d(a++,u));}return Object.keys(s).forEach(function(n){var r=s[n];r.lines.forEach(function(n){r.index[n.number]=n;});}),s;}function v(n){n._commandRef=p();}function y(n,r){var a=m();i(n+" in command "+(r||p())+("unknown"===a?"":" called from "+a));}function _(n,r,i,a){s(n,r)||y("invalid parameter type"+o(i)+". expected "+r+", got "+typeof n,a||p());}var b={};function x(n,r){return 32820===n||32819===n||33635===n?2:34042===n?4:b[n]*r;}function E(n){return!(n&n-1)&&!!n;}b[5120]=b[5121]=1,b[5122]=b[5123]=b[36193]=b[33635]=b[32819]=b[32820]=2,b[5124]=b[5125]=b[5126]=b[34042]=4;var w=r(a,{optional:function(n){n();},raise:i,commandRaise:y,command:function(n,r,i){n||y(r,i||p());},parameter:function(n,r,a){n in r||i("unknown parameter ("+n+")"+o(a)+". possible values: "+Object.keys(r).join());},commandParameter:function(n,r,i,a){n in r||y("unknown parameter ("+n+")"+o(i)+". possible values: "+Object.keys(r).join(),a||p());},constructor:function(n){Object.keys(n).forEach(function(n){0>u.indexOf(n)&&i('invalid regl constructor argument "'+n+'". must be one of '+u);});},type:function(n,r,a){s(n,r)||i("invalid parameter type"+o(a)+". expected "+r+", got "+typeof n);},commandType:_,isTypedArray:function(r,a){n(r)||i("invalid parameter type"+o(a)+". must be a typed array");},nni:function(n,r){n>=0&&(0|n)===n||i("invalid parameter type, ("+n+")"+o(r)+". must be a nonnegative integer");},oneOf:l,shaderError:function(n,r,i,o,s){if(!n.getShaderParameter(r,n.COMPILE_STATUS)){var l,u=n.getShaderInfoLog(r),f=o===n.FRAGMENT_SHADER?"fragment":"vertex";_(i,"string",f+" shader source must be a string",s);var d=g(i,s);(function(n,r){r.forEach(function(r){var i=n[r.file];if(i){var a=i.index[r.line];if(a){a.errors.push(r),i.hasErrors=!0;return;}}n.unknown.hasErrors=!0,n.unknown.lines[0].errors.push(r);});})(d,(l=[],u.split("\n").forEach(function(n){if(!(n.length<5)){var r=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(n);r?l.push(new h(0|r[1],0|r[2],r[3].trim())):n.length>0&&l.push(new h("unknown",0,n));}}),l)),Object.keys(d).forEach(function(n){var r=d[n];if(r.hasErrors){var i=[""],a=[""];o("file number "+n+": "+r.name+"\n","color:red;text-decoration:underline;font-weight:bold"),r.lines.forEach(function(n){if(n.errors.length>0){o(c(n.number,4)+"|  ","background-color:yellow; font-weight:bold"),o(n.line+"\n","color:red; background-color:yellow; font-weight:bold");var r=0;n.errors.forEach(function(i){var a=i.message,s=/^\s*'(.*)'\s*:\s*(.*)$/.exec(a);if(s){var l=s[1];a=s[2],"assign"===l&&(l="="),r=Math.max(n.line.indexOf(l,r),0);}else r=0;o(c("| ",6)),o(c("^^^",r+3)+"\n","font-weight:bold"),o(c("| ",6)),o(a+"\n","font-weight:bold");}),o(c("| ",6)+"\n");}else o(c(n.number,4)+"|  "),o(n.line+"\n","color:red");}),"undefined"==typeof document||window.chrome?console.log(i.join("")):(a[0]=i.join("%c"),console.log.apply(console,a));}function o(n,r){i.push(n),a.push(r||"");}}),a.raise("Error compiling "+f+" shader, "+d[0].name);}},linkError:function(n,r,i,o,s){if(!n.getProgramParameter(r,n.LINK_STATUS)){var l=n.getProgramInfoLog(r),u=g(i,s),c='Error linking program with vertex shader, "'+g(o,s)[0].name+'", and fragment shader "'+u[0].name+'"';"undefined"!=typeof document?console.log("%c"+c+"\n%c"+l,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(c+"\n"+l),a.raise(c);}},callSite:m,saveCommandRef:v,saveDrawInfo:function(n,r,i,a){function o(n,r){Object.keys(r).forEach(function(r){n[a.id(r)]=!0;});}v(n),n._fragId=(s=n.static.frag)?a.id(s):0,n._vertId=(l=n.static.vert)?a.id(l):0;var s,l,u=n._uniformSet={};o(u,r.static),o(u,r.dynamic);var c=n._attributeSet={};o(c,i.static),o(c,i.dynamic),n._hasCount="count"in n.static||"count"in n.dynamic||"elements"in n.static||"elements"in n.dynamic;},framebufferFormat:function(n,r,i){n.texture?l(n.texture._texture.internalformat,r,"unsupported texture format for attachment"):l(n.renderbuffer._renderbuffer.format,i,"unsupported renderbuffer format for attachment");},guessCommand:p,texture2D:function(n,r,i){var o,s=r.width,l=r.height,u=r.channels;a(s>0&&s<=i.maxTextureSize&&l>0&&l<=i.maxTextureSize,"invalid texture shape"),(33071!==n.wrapS||33071!==n.wrapT)&&a(E(s)&&E(l),"incompatible wrap mode for texture, both width and height must be power of 2"),1===r.mipmask?1!==s&&1!==l&&a(9984!==n.minFilter&&9986!==n.minFilter&&9985!==n.minFilter&&9987!==n.minFilter,"min filter requires mipmap"):(a(E(s)&&E(l),"texture must be a square power of 2 to support mipmapping"),a(r.mipmask===(s<<1)-1,"missing or incomplete mipmap data")),5126===r.type&&(0>i.extensions.indexOf("oes_texture_float_linear")&&a(9728===n.minFilter&&9728===n.magFilter,"filter not supported, must enable oes_texture_float_linear"),a(!n.genMipmaps,"mipmap generation not supported with float textures"));var c=r.images;for(o=0;o<16;++o)if(c[o]){var f=s>>o,d=l>>o;a(r.mipmask&1<<o,"missing mipmap data");var h=c[o];if(a(h.width===f&&h.height===d,"invalid shape for mip images"),a(h.format===r.format&&h.internalformat===r.internalformat&&h.type===r.type,"incompatible type for mip image"),h.compressed);else if(h.data){var p=Math.ceil(x(h.type,u)*f/h.unpackAlignment)*h.unpackAlignment;a(h.data.byteLength===p*d,"invalid data for image, buffer size is inconsistent with image format");}else h.element||h.copy;}else n.genMipmaps||a((r.mipmask&1<<o)==0,"extra mipmap data");r.compressed&&a(!n.genMipmaps,"mipmap generation for compressed images not supported");},textureCube:function(n,r,i,o){var s=n.width,l=n.height,u=n.channels;a(s>0&&s<=o.maxTextureSize&&l>0&&l<=o.maxTextureSize,"invalid texture shape"),a(s===l,"cube map must be square"),a(33071===r.wrapS&&33071===r.wrapT,"wrap mode not supported by cube map");for(var c=0;c<i.length;++c){var f=i[c];a(f.width===s&&f.height===l,"inconsistent cube map face shape"),r.genMipmaps&&(a(!f.compressed,"can not generate mipmap for compressed textures"),a(1===f.mipmask,"can not specify mipmaps and generate mipmaps"));for(var d=f.images,h=0;h<16;++h){var p=d[h];if(p){var m=s>>h,g=l>>h;a(f.mipmask&1<<h,"missing mipmap data"),a(p.width===m&&p.height===g,"invalid shape for mip images"),a(p.format===n.format&&p.internalformat===n.internalformat&&p.type===n.type,"incompatible type for mip image"),p.compressed||(p.data?a(p.data.byteLength===m*g*Math.max(x(p.type,u),p.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):p.element||p.copy);}}}}}),S=0;function T(n,r){this.id=S++,this.type=n,this.data=r;}function A(n){return n.replace(/\\/g,"\\\\").replace(/"/g,'\\"');}var C={DynamicVariable:T,define:function(n,r){return new T(n,"["+(function n(r){if(0===r.length)return[];var i=r.charAt(0),a=r.charAt(r.length-1);if(r.length>1&&i===a&&('"'===i||"'"===i))return['"'+A(r.substr(1,r.length-2))+'"'];var o=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(r);if(o)return n(r.substr(0,o.index)).concat(n(o[1])).concat(n(r.substr(o.index+o[0].length)));var s=r.split(".");if(1===s.length)return['"'+A(r)+'"'];for(var l=[],u=0;u<s.length;++u)l=l.concat(n(s[u]));return l;})(r+"").join("][")+"]");},isDynamic:function(n){return"function"==typeof n&&!n._reglType||n instanceof T;},unbox:function(n,r){return"function"==typeof n?new T(0,n):n;}},O={next:"function"==typeof requestAnimationFrame?function(n){return requestAnimationFrame(n);}:function(n){return setTimeout(n,16);},cancel:"function"==typeof cancelAnimationFrame?function(n){return cancelAnimationFrame(n);}:clearTimeout},M="undefined"!=typeof performance&&performance.now?function(){return performance.now();}:function(){return+new Date;};function R(n){return"string"==typeof n?n.split():(w(Array.isArray(n),"invalid extension array"),n);}function P(n){return"string"==typeof n?(w("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(n)):n;}function k(n,r){for(var i=Array(n),a=0;a<n;++a)i[a]=r(a);return i;}function I(n){var r,i;return r=(n>65535)<<4,n>>>=r,i=(n>255)<<3,n>>>=i,r|=i,i=(n>15)<<2,n>>>=i,r|=i,i=(n>3)<<1,n>>>=i,(r|=i)|n>>1;}function L(){var n=k(8,function(){return[];});function r(r){var i=function(n){for(var r=16;r<=268435456;r*=16)if(n<=r)return r;return 0;}(r),a=n[I(i)>>2];return a.length>0?a.pop():new ArrayBuffer(i);}function i(r){n[I(r.byteLength)>>2].push(r);}return{alloc:r,free:i,allocType:function(n,i){var a=null;switch(n){case 5120:a=new Int8Array(r(i),0,i);break;case 5121:a=new Uint8Array(r(i),0,i);break;case 5122:a=new Int16Array(r(2*i),0,i);break;case 5123:a=new Uint16Array(r(2*i),0,i);break;case 5124:a=new Int32Array(r(4*i),0,i);break;case 5125:a=new Uint32Array(r(4*i),0,i);break;case 5126:a=new Float32Array(r(4*i),0,i);break;default:return null;}return a.length!==i?a.subarray(0,i):a;},freeType:function(n){i(n.buffer);}};}var N=L();N.zero=L();var D=function(n,r){var i=1;r.ext_texture_filter_anisotropic&&(i=n.getParameter(34047));var a=1,o=1;r.webgl_draw_buffers&&(a=n.getParameter(34852),o=n.getParameter(36063));var s=!!r.oes_texture_float;if(s){var l=n.createTexture();n.bindTexture(3553,l),n.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var u=n.createFramebuffer();if(n.bindFramebuffer(36160,u),n.framebufferTexture2D(36160,36064,3553,l,0),n.bindTexture(3553,null),36053!==n.checkFramebufferStatus(36160))s=!1;else{n.viewport(0,0,1,1),n.clearColor(1,0,0,1),n.clear(16384);var c=N.allocType(5126,4);n.readPixels(0,0,1,1,6408,5126,c),n.getError()?s=!1:(n.deleteFramebuffer(u),n.deleteTexture(l),s=1===c[0]),N.freeType(c);}}var f="undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),d=!0;if(!f){var h=n.createTexture(),p=N.allocType(5121,36);n.activeTexture(33984),n.bindTexture(34067,h),n.texImage2D(34069,0,6408,3,3,0,6408,5121,p),N.freeType(p),n.bindTexture(34067,null),n.deleteTexture(h),d=!n.getError();}return{colorBits:[n.getParameter(3410),n.getParameter(3411),n.getParameter(3412),n.getParameter(3413)],depthBits:n.getParameter(3414),stencilBits:n.getParameter(3415),subpixelBits:n.getParameter(3408),extensions:Object.keys(r).filter(function(n){return!!r[n];}),maxAnisotropic:i,maxDrawbuffers:a,maxColorAttachments:o,pointSizeDims:n.getParameter(33901),lineWidthDims:n.getParameter(33902),maxViewportDims:n.getParameter(3386),maxCombinedTextureUnits:n.getParameter(35661),maxCubeMapSize:n.getParameter(34076),maxRenderbufferSize:n.getParameter(34024),maxTextureUnits:n.getParameter(34930),maxTextureSize:n.getParameter(3379),maxAttributes:n.getParameter(34921),maxVertexUniforms:n.getParameter(36347),maxVertexTextureUnits:n.getParameter(35660),maxVaryingVectors:n.getParameter(36348),maxFragmentUniforms:n.getParameter(36349),glsl:n.getParameter(35724),renderer:n.getParameter(7937),vendor:n.getParameter(7936),version:n.getParameter(7938),readFloat:s,npotTextureCube:d};};function F(r){return!!r&&"object"==typeof r&&Array.isArray(r.shape)&&Array.isArray(r.stride)&&"number"==typeof r.offset&&r.shape.length===r.stride.length&&(Array.isArray(r.data)||n(r.data));}var B=function(n){return Object.keys(n).map(function(r){return n[r];});},j={shape:function(n){for(var r=[],i=n;i.length;i=i[0])r.push(i.length);return r;},flatten:function(n,r,i,a){var o=1;if(r.length)for(var s=0;s<r.length;++s)o*=r[s];else o=0;var l=a||N.allocType(i,o);switch(r.length){case 0:break;case 1:!function(n,r,i){for(var a=0;a<r;++a)i[a]=n[a];}(n,r[0],l);break;case 2:!function(n,r,i,a){for(var o=0,s=0;s<r;++s)for(var l=n[s],u=0;u<i;++u)a[o++]=l[u];}(n,r[0],r[1],l);break;case 3:z(n,r[0],r[1],r[2],l,0);break;default:!function n(r,i,a,o,s){for(var l=1,u=a+1;u<i.length;++u)l*=i[u];var c=i[a];if(i.length-a==4){var f=i[a+1],d=i[a+2],h=i[a+3];for(u=0;u<c;++u)z(r[u],f,d,h,o,s),s+=l;}else for(u=0;u<c;++u)n(r[u],i,a+1,o,s),s+=l;}(n,r,0,l,0);}return l;}};function z(n,r,i,a,o,s){for(var l=s,u=0;u<r;++u)for(var c=n[u],f=0;f<i;++f)for(var d=c[f],h=0;h<a;++h)o[l++]=d[h];}var U={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},V={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},G={dynamic:35048,stream:35040,static:35044},H=j.flatten,W=j.shape,X=[];function q(n){return 0|U[Object.prototype.toString.call(n)];}function $(n,r){for(var i=0;i<r.length;++i)n[i]=r[i];}function Y(n,r,i,a,o,s,l){for(var u=0,c=0;c<i;++c)for(var f=0;f<a;++f)n[u++]=r[o*c+s*f+l];}X[5120]=1,X[5122]=2,X[5124]=4,X[5121]=1,X[5123]=2,X[5125]=4,X[5126]=4;var Z={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},K=new Float32Array(1),Q=new Uint32Array(K.buffer);function J(n){for(var r=N.allocType(5123,n.length),i=0;i<n.length;++i)if(isNaN(n[i]))r[i]=65535;else if(n[i]===1/0)r[i]=31744;else if(n[i]===-1/0)r[i]=64512;else{K[0]=n[i];var a=Q[0],o=a>>>31<<15,s=(a<<1>>>24)-127,l=a>>13&1023;if(s<-24)r[i]=o;else if(s<-14){var u=-14-s;r[i]=o+(l+1024>>u);}else s>15?r[i]=o+31744:r[i]=o+(s+15<<10)+l;}return r;}function ee(r){return Array.isArray(r)||n(r);}var et=function(n){return!(n&n-1)&&!!n;},en=[9984,9986,9985,9987],er=[0,6409,6410,6407,6408],ei={};function ea(n){return"[object "+n+"]";}ei[6409]=ei[6406]=ei[6402]=1,ei[34041]=ei[6410]=2,ei[6407]=ei[35904]=3,ei[6408]=ei[35906]=4;var eo=ea("HTMLCanvasElement"),es=ea("OffscreenCanvas"),el=ea("CanvasRenderingContext2D"),eu=ea("ImageBitmap"),ec=ea("HTMLImageElement"),ef=ea("HTMLVideoElement"),ed=Object.keys(U).concat([eo,es,el,eu,ec,ef]),eh=[];eh[5121]=1,eh[5126]=4,eh[36193]=2,eh[5123]=2,eh[5125]=4;var ep=[];function em(n){return Array.isArray(n)&&(0===n.length||"number"==typeof n[0]);}function eg(n){return!!(Array.isArray(n)&&0!==n.length&&ee(n[0]));}function ev(n){return Object.prototype.toString.call(n);}function ey(n){if(!n)return!1;var r=ev(n);return ed.indexOf(r)>=0||em(n)||eg(n)||F(n);}function e_(n){return 0|U[Object.prototype.toString.call(n)];}function eb(n,r){return N.allocType(36193===n.type?5126:n.type,r);}function ex(n,r){36193===n.type?(n.data=J(r),N.freeType(r)):n.data=r;}function eE(n,r,i,a,o,s){if(l=void 0!==ep[n]?ep[n]:ei[n]*eh[r],s&&(l*=6),!o)return l*i*a;for(var l,u=0,c=i;c>=1;)u+=l*c*c,c/=2;return u;}ep[32854]=2,ep[32855]=2,ep[36194]=2,ep[34041]=4,ep[33776]=.5,ep[33777]=.5,ep[33778]=1,ep[33779]=1,ep[35986]=.5,ep[35987]=1,ep[34798]=1,ep[35840]=.5,ep[35841]=.25,ep[35842]=.5,ep[35843]=.25,ep[36196]=.5;var ew=[];ew[32854]=2,ew[32855]=2,ew[36194]=2,ew[33189]=2,ew[36168]=1,ew[34041]=4,ew[35907]=4,ew[34836]=16,ew[34842]=8,ew[34843]=6;var eS=function(n,r,i,a,o){var s={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};r.ext_srgb&&(s.srgba=35907),r.ext_color_buffer_half_float&&(s.rgba16f=34842,s.rgb16f=34843),r.webgl_color_buffer_float&&(s.rgba32f=34836);var l=[];Object.keys(s).forEach(function(n){l[s[n]]=n;});var u=0,c={};function f(n){this.id=u++,this.refCount=1,this.renderbuffer=n,this.format=32854,this.width=0,this.height=0,o.profile&&(this.stats={size:0});}function d(r){var i=r.renderbuffer;w(i,"must not double destroy renderbuffer"),n.bindRenderbuffer(36161,null),n.deleteRenderbuffer(i),r.renderbuffer=null,r.refCount=0,delete c[r.id],a.renderbufferCount--;}return f.prototype.decRef=function(){--this.refCount<=0&&d(this);},o.profile&&(a.getTotalRenderbufferSize=function(){var n=0;return Object.keys(c).forEach(function(r){n+=c[r].stats.size;}),n;}),{create:function(r,u){var d=new f(n.createRenderbuffer());function h(r,a){var u,c,f,p=0,m=0,g=32854;if("object"==typeof r&&r){if("shape"in r){var v=r.shape;w(Array.isArray(v)&&v.length>=2,"invalid renderbuffer shape"),p=0|v[0],m=0|v[1];}else"radius"in r&&(p=m=0|r.radius),"width"in r&&(p=0|r.width),"height"in r&&(m=0|r.height);"format"in r&&(w.parameter(r.format,s,"invalid renderbuffer format"),g=s[r.format]);}else"number"==typeof r?(p=0|r,m="number"==typeof a?0|a:p):r?w.raise("invalid arguments to renderbuffer constructor"):p=m=1;if(w(p>0&&m>0&&p<=i.maxRenderbufferSize&&m<=i.maxRenderbufferSize,"invalid renderbuffer size"),p!==d.width||m!==d.height||g!==d.format)return h.width=d.width=p,h.height=d.height=m,d.format=g,n.bindRenderbuffer(36161,d.renderbuffer),n.renderbufferStorage(36161,g,p,m),w(0===n.getError(),"invalid render buffer format"),o.profile&&(d.stats.size=(u=d.format,c=d.width,f=d.height,ew[u]*c*f)),h.format=l[d.format],h;}return c[d.id]=d,a.renderbufferCount++,h(r,u),h.resize=function(r,a){var s,l,u,c=0|r,f=0|a||c;return c===d.width&&f===d.height||(w(c>0&&f>0&&c<=i.maxRenderbufferSize&&f<=i.maxRenderbufferSize,"invalid renderbuffer size"),h.width=d.width=c,h.height=d.height=f,n.bindRenderbuffer(36161,d.renderbuffer),n.renderbufferStorage(36161,d.format,c,f),w(0===n.getError(),"invalid render buffer format"),o.profile&&(d.stats.size=(s=d.format,l=d.width,u=d.height,ew[s]*l*u))),h;},h._reglType="renderbuffer",h._renderbuffer=d,o.profile&&(h.stats=d.stats),h.destroy=function(){d.decRef();},h;},clear:function(){B(c).forEach(d);},restore:function(){B(c).forEach(function(r){r.renderbuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,r.renderbuffer),n.renderbufferStorage(36161,r.format,r.width,r.height);}),n.bindRenderbuffer(36161,null);}};},eT=[6407,6408],eA=[];eA[6408]=4,eA[6407]=3;var eC=[];eC[5121]=1,eC[5126]=4,eC[36193]=2;var eO=[32854,32855,36194,35907,34842,34843,34836],eM={};function eR(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.offset=0,this.stride=0,this.divisor=0;}function eP(n){return Array.prototype.slice.call(n);}function ek(n){return eP(n).join("");}eM[36053]="complete",eM[36054]="incomplete attachment",eM[36057]="incomplete dimensions",eM[36055]="incomplete, missing attachment",eM[36061]="unsupported";var eI="xyzw".split(""),eL="dither",eN="blend.enable",eD="blend.color",eF="blend.equation",eB="blend.func",ej="depth.enable",ez="depth.func",eU="depth.range",eV="depth.mask",eG="colorMask",eH="cull.enable",eW="cull.face",eX="frontFace",eq="lineWidth",e$="polygonOffset.enable",eY="polygonOffset.offset",eZ="sample.alpha",eK="sample.enable",eQ="sample.coverage",eJ="stencil.enable",e0="stencil.mask",e1="stencil.func",e2="stencil.opFront",e3="stencil.opBack",e4="scissor.enable",e5="scissor.box",e6="viewport",e8="profile",e7="framebuffer",e9="vert",te="frag",tt="elements",tn="primitive",tr="count",ti="offset",ta="instances",to="Width",ts="Height",tl=e7+to,tu=e7+ts,tc=e6+to,tf=e6+ts,td="drawingBuffer",th=td+to,tp=td+ts,tm=[eB,eF,e1,e2,e3,eQ,e6,e5,eY],tg={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},tv=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],ty={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},t_={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},tb={frag:35632,vert:35633},tx={cw:2304,ccw:2305};function tE(r){return Array.isArray(r)||n(r)||F(r);}function tw(n){return n.sort(function(n,r){return n===e6?-1:r===e6?1:n<r?-1:1;});}function tS(n,r,i,a){this.thisDep=n,this.contextDep=r,this.propDep=i,this.append=a;}function tT(n){return n&&!(n.thisDep||n.contextDep||n.propDep);}function tA(n){return new tS(!1,!1,!1,n);}function tC(n,r){var i=n.type;if(0===i){var a=n.data.length;return new tS(!0,a>=1,a>=2,r);}if(4!==i)return new tS(3===i,2===i,1===i,r);var o=n.data;return new tS(o.thisDep,o.contextDep,o.propDep,r);}var tO=new tS(!1,!1,!1,function(){}),tM=function(n,r){if(!r.ext_disjoint_timer_query)return null;var i=[],a=[];function o(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null;}var s=[],l=[];function u(n,r,i){var a=s.pop()||new o;a.startQueryIndex=n,a.endQueryIndex=r,a.sum=0,a.stats=i,l.push(a);}var c=[],f=[];return{beginQuery:function(n){var o=i.pop()||r.ext_disjoint_timer_query.createQueryEXT();r.ext_disjoint_timer_query.beginQueryEXT(35007,o),a.push(o),u(a.length-1,a.length,n);},endQuery:function(){r.ext_disjoint_timer_query.endQueryEXT(35007);},pushScopeStats:u,update:function(){var n,o,u=a.length;if(0!==u){f.length=Math.max(f.length,u+1),c.length=Math.max(c.length,u+1),c[0]=0,f[0]=0;var d=0;for(o=0,n=0;o<a.length;++o){var h=a[o];r.ext_disjoint_timer_query.getQueryObjectEXT(h,34919)?(d+=r.ext_disjoint_timer_query.getQueryObjectEXT(h,34918),i.push(h)):a[n++]=h,c[o+1]=d,f[o+1]=n;}for(o=0,a.length=n,n=0;o<l.length;++o){var p=l[o],m=p.startQueryIndex,g=p.endQueryIndex;p.sum+=c[g]-c[m];var v=f[m],y=f[g];y===v?(p.stats.gpuTime+=p.sum/1e6,s.push(p)):(p.startQueryIndex=v,p.endQueryIndex=y,l[n++]=p);}l.length=n;}},getNumPendingQueries:function(){return a.length;},clear:function(){i.push.apply(i,a);for(var n=0;n<i.length;n++)r.ext_disjoint_timer_query.deleteQueryEXT(i[n]);a.length=0,i.length=0;},restore:function(){a.length=0,i.length=0;}};},tR="webglcontextlost",tP="webglcontextrestored";function tk(n,r){for(var i=0;i<n.length;++i)if(n[i]===r)return i;return -1;}return function(i){var a,o,s=function(n){var i,a,o,s,l=n||{},u={},c=[],f=[],d="undefined"==typeof window?1:window.devicePixelRatio,h=!1,p=function(n){n&&w.raise(n);},m=function(){};if("string"==typeof l?(w("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),w(i=document.querySelector(l),"invalid query string for element")):"object"==typeof l?"string"==typeof l.nodeName&&"function"==typeof l.appendChild&&"function"==typeof l.getBoundingClientRect?i=l:"function"==typeof l.drawArrays||"function"==typeof l.drawElements?o=(s=l).canvas:(w.constructor(l),"gl"in l?s=l.gl:"canvas"in l?o=P(l.canvas):"container"in l&&(a=P(l.container)),"attributes"in l&&(u=l.attributes,w.type(u,"object","invalid context attributes")),"extensions"in l&&(c=R(l.extensions)),"optionalExtensions"in l&&(f=R(l.optionalExtensions)),"onDone"in l&&(w.type(l.onDone,"function","invalid or missing onDone callback"),p=l.onDone),"profile"in l&&(h=!!l.profile),"pixelRatio"in l&&w((d=+l.pixelRatio)>0,"invalid pixel ratio")):w.raise("invalid arguments to regl"),i&&("canvas"===i.nodeName.toLowerCase()?o=i:a=i),!s){if(!o){w("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var g=function(n,i,a){var o,s=document.createElement("canvas");function l(){var i=window.innerWidth,o=window.innerHeight;if(n!==document.body){var l=n.getBoundingClientRect();i=l.right-l.left,o=l.bottom-l.top;}s.width=a*i,s.height=a*o,r(s.style,{width:i+"px",height:o+"px"});}return r(s.style,{border:0,margin:0,padding:0,top:0,left:0}),n.appendChild(s),n===document.body&&(s.style.position="absolute",r(n.style,{margin:0,padding:0})),n!==document.body&&"function"==typeof ResizeObserver?(o=new ResizeObserver(function(){setTimeout(l);})).observe(n):window.addEventListener("resize",l,!1),l(),{canvas:s,onDestroy:function(){o?o.disconnect():window.removeEventListener("resize",l),n.removeChild(s);}};}(a||document.body,0,d);if(!g)return null;o=g.canvas,m=g.onDestroy;}void 0===u.premultipliedAlpha&&(u.premultipliedAlpha=!0),s=function(n,r){function i(i){try{return n.getContext(i,r);}catch(n){return null;}}return i("webgl")||i("experimental-webgl")||i("webgl-experimental");}(o,u);}return s?{gl:s,canvas:o,container:a,extensions:c,optionalExtensions:f,pixelRatio:d,profile:h,onDone:p,onDestroy:m}:(m(),p("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null);}(i);if(!s)return null;var l=s.gl,u=l.getContextAttributes(),c=l.isContextLost(),f=function(n,r){var i={};function a(r){w.type(r,"string","extension name must be string");var a,o=r.toLowerCase();try{a=i[o]=n.getExtension(o);}catch(n){}return!!a;}for(var o=0;o<r.extensions.length;++o){var s=r.extensions[o];if(!a(s))return r.onDestroy(),r.onDone('"'+s+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null;}return r.optionalExtensions.forEach(a),{extensions:i,restore:function(){Object.keys(i).forEach(function(n){if(i[n]&&!a(n))throw Error("(regl): error restoring extension "+n);});}};}(l,s);if(!f)return null;var d=(a={"":0},o=[""],{id:function(n){var r=a[n];return r||(r=a[n]=o.length,o.push(n)),r;},str:function(n){return o[n];}}),h={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},p=f.extensions,m=tM(l,p),g=M(),v=l.drawingBufferWidth,y=l.drawingBufferHeight,_={tick:0,time:0,viewportWidth:v,viewportHeight:y,framebufferWidth:v,framebufferHeight:y,drawingBufferWidth:v,drawingBufferHeight:y,pixelRatio:s.pixelRatio},b=D(l,p),x=function(r,i,a,o){var s=0,l={};function u(n){this.id=s++,this.buffer=r.createBuffer(),this.type=n,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,a.profile&&(this.stats={size:0});}u.prototype.bind=function(){r.bindBuffer(this.type,this.buffer);},u.prototype.destroy=function(){h(this);};var c=[];function f(n,i,a){n.byteLength=i.byteLength,r.bufferData(n.type,i,a);}function d(r,i,a,o,s,l){if(r.usage=a,Array.isArray(i)){if(r.dtype=o||5126,i.length>0){if(Array.isArray(i[0])){u=W(i);for(var u,c,d=1,h=1;h<u.length;++h)d*=u[h];r.dimension=d,c=H(i,u,r.dtype),f(r,c,a),l?r.persistentData=c:N.freeType(c);}else if("number"==typeof i[0]){r.dimension=s;var p=N.allocType(r.dtype,i.length);$(p,i),f(r,p,a),l?r.persistentData=p:N.freeType(p);}else n(i[0])?(r.dimension=i[0].length,r.dtype=o||q(i[0])||5126,c=H(i,[i.length,i[0].length],r.dtype),f(r,c,a),l?r.persistentData=c:N.freeType(c)):w.raise("invalid buffer data");}}else if(n(i))r.dtype=o||q(i),r.dimension=s,f(r,i,a),l&&(r.persistentData=new Uint8Array(new Uint8Array(i.buffer)));else if(F(i)){u=i.shape;var m=i.stride,g=i.offset,v=0,y=0,_=0,b=0;1===u.length?(v=u[0],y=1,_=m[0],b=0):2===u.length?(v=u[0],y=u[1],_=m[0],b=m[1]):w.raise("invalid shape"),r.dtype=o||q(i.data)||5126,r.dimension=y;var x=N.allocType(r.dtype,v*y);Y(x,i.data,v,y,_,b,g),f(r,x,a),l?r.persistentData=x:N.freeType(x);}else i instanceof ArrayBuffer?(r.dtype=5121,r.dimension=s,f(r,i,a),l&&(r.persistentData=new Uint8Array(new Uint8Array(i)))):w.raise("invalid buffer data");}function h(n){i.bufferCount--,o(n);var a=n.buffer;w(a,"buffer must not be deleted already"),r.deleteBuffer(a),n.buffer=null,delete l[n.id];}return a.profile&&(i.getTotalBufferSize=function(){var n=0;return Object.keys(l).forEach(function(r){n+=l[r].stats.size;}),n;}),{create:function(o,s,c,f){i.bufferCount++;var p=new u(s);function m(i){var o=35044,s=null,l=0,u=0,c=1;return Array.isArray(i)||n(i)||F(i)||i instanceof ArrayBuffer?s=i:"number"==typeof i?l=0|i:i&&(w.type(i,"object","buffer arguments must be an object, a number or an array"),"data"in i&&(w(null===s||Array.isArray(s)||n(s)||F(s),"invalid data for buffer"),s=i.data),"usage"in i&&(w.parameter(i.usage,G,"invalid buffer usage"),o=G[i.usage]),"type"in i&&(w.parameter(i.type,V,"invalid buffer type"),u=V[i.type]),"dimension"in i&&(w.type(i.dimension,"number","invalid dimension"),c=0|i.dimension),"length"in i&&(w.nni(l,"buffer length must be a nonnegative integer"),l=0|i.length)),p.bind(),s?d(p,s,o,u,c,f):(l&&r.bufferData(p.type,l,o),p.dtype=u||5121,p.usage=o,p.dimension=c,p.byteLength=l),a.profile&&(p.stats.size=p.byteLength*X[p.dtype]),m;}function g(n,i){w(i+n.byteLength<=p.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+n.byteLength+" starting from offset "+i+" to a buffer of size "+p.byteLength),r.bufferSubData(p.type,i,n);}return l[p.id]=p,c||m(o),m._reglType="buffer",m._buffer=p,m.subdata=function(r,i){var a,o=0|(i||0);if(p.bind(),n(r)||r instanceof ArrayBuffer)g(r,o);else if(Array.isArray(r)){if(r.length>0){if("number"==typeof r[0]){var s=N.allocType(p.dtype,r.length);$(s,r),g(s,o),N.freeType(s);}else if(Array.isArray(r[0])||n(r[0])){a=W(r);var l=H(r,a,p.dtype);g(l,o),N.freeType(l);}else w.raise("invalid buffer data");}}else if(F(r)){a=r.shape;var u=r.stride,c=0,f=0,d=0,h=0;1===a.length?(c=a[0],f=1,d=u[0],h=0):2===a.length?(c=a[0],f=a[1],d=u[0],h=u[1]):w.raise("invalid shape");var v=Array.isArray(r.data)?p.dtype:q(r.data),y=N.allocType(v,c*f);Y(y,r.data,c,f,d,h,r.offset),g(y,o),N.freeType(y);}else w.raise("invalid data for buffer subdata");return m;},a.profile&&(m.stats=p.stats),m.destroy=function(){h(p);},m;},createStream:function(n,r){var i=c.pop();return i||(i=new u(n)),i.bind(),d(i,r,35040,0,1,!1),i;},destroyStream:function(n){c.push(n);},clear:function(){B(l).forEach(h),c.forEach(h);},getBuffer:function(n){return n&&n._buffer instanceof u?n._buffer:null;},restore:function(){B(l).forEach(function(n){n.buffer=r.createBuffer(),r.bindBuffer(n.type,n.buffer),r.bufferData(n.type,n.persistentData||n.byteLength,n.usage);});},_initBuffer:d};}(l,h,s,function(n){return E.destroyBuffer(n);}),E=function(r,i,a,o,s){for(var l=a.maxAttributes,u=Array(l),c=0;c<l;++c)u[c]=new eR;var f=0,d={},h={Record:eR,scope:{},state:u,currentVAO:null,targetVAO:null,restore:p()?function(){p()&&B(d).forEach(function(n){n.refresh();});}:function(){},createVAO:function(r){var a=new g;function u(r){w(Array.isArray(r),"arguments to vertex array constructor must be an array"),w(r.length<l,"too many attributes"),w(r.length>0,"must specify at least one attribute");for(var o=0;o<a.buffers.length;++o)a.buffers[o].destroy();a.buffers.length=0;var c=a.attributes;c.length=r.length;for(var f=0;f<r.length;++f){var d=r[f],h=c[f]=new eR;if(Array.isArray(d)||n(d)||F(d)){var p=s.create(d,34962,!1,!0);h.buffer=s.getBuffer(p),h.size=0|h.buffer.dimension,h.normalized=!1,h.type=h.buffer.dtype,h.offset=0,h.stride=0,h.divisor=0,h.state=1,a.buffers.push(p);}else s.getBuffer(d)?(h.buffer=s.getBuffer(d),h.size=0|h.buffer.dimension,h.normalized=!1,h.type=h.buffer.dtype,h.offset=0,h.stride=0,h.divisor=0,h.state=1):s.getBuffer(d.buffer)?(h.buffer=s.getBuffer(d.buffer),h.size=0|(+d.size||h.buffer.dimension),h.normalized=!!d.normalized,"type"in d?(w.parameter(d.type,V,"invalid buffer type"),h.type=V[d.type]):h.type=h.buffer.dtype,h.offset=0|(d.offset||0),h.stride=0|(d.stride||0),h.divisor=0|(d.divisor||0),h.state=1,w(h.size>=1&&h.size<=4,"size must be between 1 and 4"),w(h.offset>=0,"invalid offset"),w(h.stride>=0&&h.stride<=255,"stride must be between 0 and 255"),w(h.divisor>=0,"divisor must be positive"),w(!h.divisor||!!i.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in d?(w(f>0,"first attribute must not be a constant"),h.x=+d.x||0,h.y=+d.y||0,h.z=+d.z||0,h.w=+d.w||0,h.state=2):w(!1,"invalid attribute spec for location "+f);}return a.refresh(),u;}return o.vaoCount+=1,u.destroy=function(){a.destroy();},u._vao=a,u._reglType="vao",u(r);},getVAO:function(n){return"function"==typeof n&&n._vao?n._vao:null;},destroyBuffer:function(n){for(var i=0;i<u.length;++i){var a=u[i];a.buffer===n&&(r.disableVertexAttribArray(i),a.buffer=null);}},setVAO:p()?function(n){if(n!==h.currentVAO){var r=p();n?r.bindVertexArrayOES(n.vao):r.bindVertexArrayOES(null),h.currentVAO=n;}}:function(n){if(n!==h.currentVAO){if(n)n.bindAttrs();else for(var i=m(),a=0;a<u.length;++a){var o=u[a];o.buffer?(r.enableVertexAttribArray(a),r.vertexAttribPointer(a,o.size,o.type,o.normalized,o.stride,o.offfset),i&&i.vertexAttribDivisorANGLE(a,o.divisor)):(r.disableVertexAttribArray(a),r.vertexAttrib4f(a,o.x,o.y,o.z,o.w));}h.currentVAO=n;}},clear:p()?function(){B(d).forEach(function(n){n.destroy();});}:function(){}};function p(){return i.oes_vertex_array_object;}function m(){return i.angle_instanced_arrays;}function g(){this.id=++f,this.attributes=[];var n=p();n?this.vao=n.createVertexArrayOES():this.vao=null,d[this.id]=this,this.buffers=[];}return g.prototype.bindAttrs=function(){for(var n=m(),i=this.attributes,a=0;a<i.length;++a){var o=i[a];o.buffer?(r.enableVertexAttribArray(a),r.bindBuffer(34962,o.buffer.buffer),r.vertexAttribPointer(a,o.size,o.type,o.normalized,o.stride,o.offset),n&&n.vertexAttribDivisorANGLE(a,o.divisor)):(r.disableVertexAttribArray(a),r.vertexAttrib4f(a,o.x,o.y,o.z,o.w));}for(var s=i.length;s<l;++s)r.disableVertexAttribArray(s);},g.prototype.refresh=function(){var n=p();n&&(n.bindVertexArrayOES(this.vao),this.bindAttrs(),h.currentVAO=this);},g.prototype.destroy=function(){if(this.vao){var n=p();this===h.currentVAO&&(h.currentVAO=null,n.bindVertexArrayOES(null)),n.deleteVertexArrayOES(this.vao),this.vao=null;}d[this.id]&&(delete d[this.id],o.vaoCount-=1);},h;}(l,p,b,h,x),S=function(r,i,a,o){var s={},l=0,u={uint8:5121,uint16:5123};function c(n){this.id=l++,s[this.id]=this,this.buffer=n,this.primType=4,this.vertCount=0,this.type=0;}i.oes_element_index_uint&&(u.uint32=5125),c.prototype.bind=function(){this.buffer.bind();};var f=[];function d(o,s,l,u,c,f,d){if(o.buffer.bind(),s){var h,p=d;!d&&(!n(s)||F(s)&&!n(s.data))&&(p=i.oes_element_index_uint?5125:5123),a._initBuffer(o.buffer,s,l,p,3);}else r.bufferData(34963,f,l),o.buffer.dtype=h||5121,o.buffer.usage=l,o.buffer.dimension=3,o.buffer.byteLength=f;if(h=d,!d){switch(o.buffer.dtype){case 5121:case 5120:h=5121;break;case 5123:case 5122:h=5123;break;case 5125:case 5124:h=5125;break;default:w.raise("unsupported type for element array");}o.buffer.dtype=h;}o.type=h,w(5125!==h||!!i.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var m=c;m<0&&(m=o.buffer.byteLength,5123===h?m>>=1:5125===h&&(m>>=2)),o.vertCount=m;var g=u;if(u<0){g=4;var v=o.buffer.dimension;1===v&&(g=0),2===v&&(g=1),3===v&&(g=4);}o.primType=g;}function h(n){o.elementsCount--,w(null!==n.buffer,"must not double destroy elements"),delete s[n.id],n.buffer.destroy(),n.buffer=null;}return{create:function(r,i){var s=a.create(null,34963,!0),l=new c(s._buffer);function f(r){if(r){if("number"==typeof r)s(r),l.primType=4,l.vertCount=0|r,l.type=5121;else{var i=null,a=35044,o=-1,c=-1,h=0,p=0;Array.isArray(r)||n(r)||F(r)?i=r:(w.type(r,"object","invalid arguments for elements"),"data"in r&&w(Array.isArray(i=r.data)||n(i)||F(i),"invalid data for element buffer"),"usage"in r&&(w.parameter(r.usage,G,"invalid element buffer usage"),a=G[r.usage]),"primitive"in r&&(w.parameter(r.primitive,Z,"invalid element buffer primitive"),o=Z[r.primitive]),"count"in r&&(w("number"==typeof r.count&&r.count>=0,"invalid vertex count for elements"),c=0|r.count),"type"in r&&(w.parameter(r.type,u,"invalid buffer type"),p=u[r.type]),"length"in r?h=0|r.length:(h=c,5123===p||5122===p?h*=2:(5125===p||5124===p)&&(h*=4))),d(l,i,a,o,c,h,p);}}else s(),l.primType=4,l.vertCount=0,l.type=5121;return f;}return o.elementsCount++,f(r),f._reglType="elements",f._elements=l,f.subdata=function(n,r){return s.subdata(n,r),f;},f.destroy=function(){h(l);},f;},createStream:function(n){var r=f.pop();return r||(r=new c(a.create(null,34963,!0,!1)._buffer)),d(r,n,35040,-1,-1,0,0),r;},destroyStream:function(n){f.push(n);},getElements:function(n){return"function"==typeof n&&n._elements instanceof c?n._elements:null;},clear:function(){B(s).forEach(h);}};}(l,p,x,h),T=function(n,r,i,a){var o={},s={};function l(n,r,i,a){this.name=n,this.id=r,this.location=i,this.info=a;}function u(n,r){for(var i=0;i<n.length;++i)if(n[i].id===r.id){n[i].location=r.location;return;}n.push(r);}function c(i,a,l){var u=35632===i?o:s,c=u[a];if(!c){var f=r.str(a);c=n.createShader(i),n.shaderSource(c,f),n.compileShader(c),w.shaderError(n,c,f,i,l),u[a]=c;}return c;}var f={},d=[],h=0;function p(n,r){this.id=h++,this.fragId=n,this.vertId=r,this.program=null,this.uniforms=[],this.attributes=[],a.profile&&(this.stats={uniformsCount:0,attributesCount:0});}function m(i,o,s){var f,d,h=c(35632,i.fragId),p=c(35633,i.vertId),m=i.program=n.createProgram();if(n.attachShader(m,h),n.attachShader(m,p),s)for(f=0;f<s.length;++f){var g=s[f];n.bindAttribLocation(m,g[0],g[1]);}n.linkProgram(m),w.linkError(n,m,r.str(i.fragId),r.str(i.vertId),o);var v=n.getProgramParameter(m,35718);a.profile&&(i.stats.uniformsCount=v);var y=i.uniforms;for(f=0;f<v;++f)if(d=n.getActiveUniform(m,f)){if(d.size>1)for(var _=0;_<d.size;++_){var b=d.name.replace("[0]","["+_+"]");u(y,new l(b,r.id(b),n.getUniformLocation(m,b),d));}else u(y,new l(d.name,r.id(d.name),n.getUniformLocation(m,d.name),d));}var x=n.getProgramParameter(m,35721);a.profile&&(i.stats.attributesCount=x);var E=i.attributes;for(f=0;f<x;++f)(d=n.getActiveAttrib(m,f))&&u(E,new l(d.name,r.id(d.name),n.getAttribLocation(m,d.name),d));}return a.profile&&(i.getMaxUniformsCount=function(){var n=0;return d.forEach(function(r){r.stats.uniformsCount>n&&(n=r.stats.uniformsCount);}),n;},i.getMaxAttributesCount=function(){var n=0;return d.forEach(function(r){r.stats.attributesCount>n&&(n=r.stats.attributesCount);}),n;}),{clear:function(){var r=n.deleteShader.bind(n);B(o).forEach(r),o={},B(s).forEach(r),s={},d.forEach(function(r){n.deleteProgram(r.program);}),d.length=0,f={},i.shaderCount=0;},program:function(n,r,a,o){w.command(n>=0,"missing vertex shader",a),w.command(r>=0,"missing fragment shader",a);var s=f[r];s||(s=f[r]={});var l=s[n];if(l&&!o)return l;var u=new p(r,n);return i.shaderCount++,m(u,a,o),l||(s[n]=u),d.push(u),u;},restore:function(){o={},s={};for(var n=0;n<d.length;++n)m(d[n],null,d[n].attributes.map(function(n){return[n.location,n.name];}));},shader:c,frag:-1,vert:-1};}(l,d,h,s),A=function(i,a,o,s,l,u,c){var f={"don't care":4352,"dont care":4352,nice:4354,fast:4353},d={repeat:10497,clamp:33071,mirror:33648},h={nearest:9728,linear:9729},p=r({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},h),m={none:0,browser:37444},g={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},v={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},y={};a.ext_srgb&&(v.srgb=35904,v.srgba=35906),a.oes_texture_float&&(g.float32=g.float=5126),a.oes_texture_half_float&&(g.float16=g["half float"]=36193),a.webgl_depth_texture&&(r(v,{depth:6402,"depth stencil":34041}),r(g,{uint16:5123,uint32:5125,"depth stencil":34042})),a.webgl_compressed_texture_s3tc&&r(y,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),a.webgl_compressed_texture_atc&&r(y,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),a.webgl_compressed_texture_pvrtc&&r(y,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),a.webgl_compressed_texture_etc1&&(y["rgb etc1"]=36196);var _=Array.prototype.slice.call(i.getParameter(34467));Object.keys(y).forEach(function(n){var r=y[n];_.indexOf(r)>=0&&(v[n]=r);});var b=Object.keys(v);o.textureFormats=b;var x=[];Object.keys(v).forEach(function(n){x[v[n]]=n;});var E=[];Object.keys(g).forEach(function(n){E[g[n]]=n;});var S=[];Object.keys(h).forEach(function(n){S[h[n]]=n;});var T=[];Object.keys(p).forEach(function(n){T[p[n]]=n;});var A=[];Object.keys(d).forEach(function(n){A[d[n]]=n;});var C=b.reduce(function(n,r){var i=v[r];return 6409===i||6406===i||6409===i||6410===i||6402===i||34041===i||a.ext_srgb&&(35904===i||35906===i)?n[i]=i:32855===i||r.indexOf("rgba")>=0?n[i]=6408:n[i]=6407,n;},{});function O(){this.internalformat=6408,this.format=6408,this.type=5121,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=37444,this.width=0,this.height=0,this.channels=0;}function M(n,r){n.internalformat=r.internalformat,n.format=r.format,n.type=r.type,n.compressed=r.compressed,n.premultiplyAlpha=r.premultiplyAlpha,n.flipY=r.flipY,n.unpackAlignment=r.unpackAlignment,n.colorSpace=r.colorSpace,n.width=r.width,n.height=r.height,n.channels=r.channels;}function R(n,r){if("object"==typeof r&&r){if("premultiplyAlpha"in r&&(w.type(r.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),n.premultiplyAlpha=r.premultiplyAlpha),"flipY"in r&&(w.type(r.flipY,"boolean","invalid texture flip"),n.flipY=r.flipY),"alignment"in r&&(w.oneOf(r.alignment,[1,2,4,8],"invalid texture unpack alignment"),n.unpackAlignment=r.alignment),"colorSpace"in r&&(w.parameter(r.colorSpace,m,"invalid colorSpace"),n.colorSpace=m[r.colorSpace]),"type"in r){var i=r.type;w(a.oes_texture_float||!("float"===i||"float32"===i),"you must enable the OES_texture_float extension in order to use floating point textures."),w(a.oes_texture_half_float||!("half float"===i||"float16"===i),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),w(a.webgl_depth_texture||!("uint16"===i||"uint32"===i||"depth stencil"===i),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),w.parameter(i,g,"invalid texture type"),n.type=g[i];}var s=n.width,l=n.height,u=n.channels,c=!1;"shape"in r?(w(Array.isArray(r.shape)&&r.shape.length>=2,"shape must be an array"),s=r.shape[0],l=r.shape[1],3===r.shape.length&&(w((u=r.shape[2])>0&&u<=4,"invalid number of channels"),c=!0),w(s>=0&&s<=o.maxTextureSize,"invalid width"),w(l>=0&&l<=o.maxTextureSize,"invalid height")):("radius"in r&&w((s=l=r.radius)>=0&&s<=o.maxTextureSize,"invalid radius"),"width"in r&&w((s=r.width)>=0&&s<=o.maxTextureSize,"invalid width"),"height"in r&&w((l=r.height)>=0&&l<=o.maxTextureSize,"invalid height"),"channels"in r&&(w((u=r.channels)>0&&u<=4,"invalid number of channels"),c=!0)),n.width=0|s,n.height=0|l,n.channels=0|u;var f=!1;if("format"in r){var d=r.format;w(a.webgl_depth_texture||!("depth"===d||"depth stencil"===d),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),w.parameter(d,v,"invalid texture format");var h=n.internalformat=v[d];n.format=C[h],d in g&&!("type"in r)&&(n.type=g[d]),d in y&&(n.compressed=!0),f=!0;}!c&&f?n.channels=ei[n.format]:c&&!f?n.channels!==er[n.format]&&(n.format=n.internalformat=er[n.channels]):f&&c&&w(n.channels===ei[n.format],"number of channels inconsistent with specified format");}}function P(n){i.pixelStorei(37440,n.flipY),i.pixelStorei(37441,n.premultiplyAlpha),i.pixelStorei(37443,n.colorSpace),i.pixelStorei(3317,n.unpackAlignment);}function k(){O.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1;}function I(r,i){var a=null;if(ey(i)?a=i:i&&(w.type(i,"object","invalid pixel data type"),R(r,i),"x"in i&&(r.xOffset=0|i.x),"y"in i&&(r.yOffset=0|i.y),ey(i.data)&&(a=i.data)),w(!r.compressed||a instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),i.copy){w(!a,"can not specify copy and data field for the same texture");var s=l.viewportWidth,u=l.viewportHeight;r.width=r.width||s-r.xOffset,r.height=r.height||u-r.yOffset,r.needsCopy=!0,w(r.xOffset>=0&&r.xOffset<s&&r.yOffset>=0&&r.yOffset<u&&r.width>0&&r.width<=s&&r.height>0&&r.height<=u,"copy texture read out of bounds");}else if(a){if(n(a))r.channels=r.channels||4,r.data=a,"type"in i||5121!==r.type||(r.type=e_(a));else if(em(a))r.channels=r.channels||4,function(n,r){var i=r.length;switch(n.type){case 5121:case 5123:case 5125:case 5126:var a=N.allocType(n.type,i);a.set(r),n.data=a;break;case 36193:n.data=J(r);break;default:w.raise("unsupported texture type, must specify a typed array");}}(r,a),r.alignment=1,r.needsFree=!0;else if(F(a)){var c,f,d,h,p,m,g=a.data;Array.isArray(g)||5121!==r.type||(r.type=e_(g));var v=a.shape,y=a.stride;3===v.length?(d=v[2],m=y[2]):(w(2===v.length,"invalid ndarray pixel data, must be 2 or 3D"),d=1,m=1),c=v[0],f=v[1],h=y[0],p=y[1],r.alignment=1,r.width=c,r.height=f,r.channels=d,r.format=r.internalformat=er[d],r.needsFree=!0,function(n,r,i,a,o,s){for(var l=n.width,u=n.height,c=n.channels,f=eb(n,l*u*c),d=0,h=0;h<u;++h)for(var p=0;p<l;++p)for(var m=0;m<c;++m)f[d++]=r[i*p+a*h+o*m+s];ex(n,f);}(r,g,h,p,m,a.offset);}else if(ev(a)===eo||ev(a)===es||ev(a)===el)ev(a)===eo||ev(a)===es?r.element=a:r.element=a.canvas,r.width=r.element.width,r.height=r.element.height,r.channels=4;else if(ev(a)===eu)r.element=a,r.width=a.width,r.height=a.height,r.channels=4;else if(ev(a)===ec)r.element=a,r.width=a.naturalWidth,r.height=a.naturalHeight,r.channels=4;else if(ev(a)===ef)r.element=a,r.width=a.videoWidth,r.height=a.videoHeight,r.channels=4;else if(eg(a)){var _=r.width||a[0].length,b=r.height||a.length,x=r.channels;x=ee(a[0][0])?x||a[0][0].length:x||1;for(var E=j.shape(a),S=1,T=0;T<E.length;++T)S*=E[T];var A=eb(r,S);j.flatten(a,E,"",A),ex(r,A),r.alignment=1,r.width=_,r.height=b,r.channels=x,r.format=r.internalformat=er[x],r.needsFree=!0;}}else r.width=r.width||1,r.height=r.height||1,r.channels=r.channels||4;5126===r.type?w(o.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):36193===r.type&&w(o.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled");}function L(n,r,a,o,l){var u=n.element,c=n.data,f=n.internalformat,d=n.format,h=n.type,p=n.width,m=n.height;P(n),u?i.texSubImage2D(r,l,a,o,d,h,u):n.compressed?i.compressedTexSubImage2D(r,l,a,o,f,p,m,c):n.needsCopy?(s(),i.copyTexSubImage2D(r,l,a,o,n.xOffset,n.yOffset,p,m)):i.texSubImage2D(r,l,a,o,p,m,d,h,c);}var D=[];function z(){return D.pop()||new k;}function U(n){n.needsFree&&N.freeType(n.data),k.call(n),D.push(n);}function V(){O.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16);}function G(n,r,i){var a=n.images[0]=z();n.mipmask=1,a.width=n.width=r,a.height=n.height=i,a.channels=n.channels=4;}function H(n,r){var i=null;if(ey(r))M(i=n.images[0]=z(),n),I(i,r),n.mipmask=1;else if(R(n,r),Array.isArray(r.mipmap))for(var a=r.mipmap,o=0;o<a.length;++o)M(i=n.images[o]=z(),n),i.width>>=o,i.height>>=o,I(i,a[o]),n.mipmask|=1<<o;else M(i=n.images[0]=z(),n),I(i,r),n.mipmask=1;M(n,n.images[0]),n.compressed&&(33776===n.internalformat||33777===n.internalformat||33778===n.internalformat||33779===n.internalformat)&&w(n.width%4==0&&n.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4");}function W(n,r){for(var a=n.images,o=0;o<a.length;++o){if(!a[o])return;!function(n,r,a){var o=n.element,l=n.data,u=n.internalformat,c=n.format,f=n.type,d=n.width,h=n.height;P(n),o?i.texImage2D(r,a,c,c,f,o):n.compressed?i.compressedTexImage2D(r,a,u,d,h,0,l):n.needsCopy?(s(),i.copyTexImage2D(r,a,c,n.xOffset,n.yOffset,d,h,0)):i.texImage2D(r,a,c,d,h,0,c,f,l||null);}(a[o],r,o);}}var X=[];function q(){var n=X.pop()||new V;O.call(n),n.mipmask=0;for(var r=0;r<16;++r)n.images[r]=null;return n;}function $(n){for(var r=n.images,i=0;i<r.length;++i)r[i]&&U(r[i]),r[i]=null;X.push(n);}function Y(){this.minFilter=9728,this.magFilter=9728,this.wrapS=33071,this.wrapT=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352;}function Z(n,r){if("min"in r){var i=r.min;w.parameter(i,p),n.minFilter=p[i],!(en.indexOf(n.minFilter)>=0)||"faces"in r||(n.genMipmaps=!0);}if("mag"in r){var a=r.mag;w.parameter(a,h),n.magFilter=h[a];}var s=n.wrapS,l=n.wrapT;if("wrap"in r){var u=r.wrap;"string"==typeof u?(w.parameter(u,d),s=l=d[u]):Array.isArray(u)&&(w.parameter(u[0],d),w.parameter(u[1],d),s=d[u[0]],l=d[u[1]]);}else{if("wrapS"in r){var c=r.wrapS;w.parameter(c,d),s=d[c];}if("wrapT"in r){var m=r.wrapT;w.parameter(m,d),l=d[m];}}if(n.wrapS=s,n.wrapT=l,"anisotropic"in r){var g=r.anisotropic;w("number"==typeof g&&g>=1&&g<=o.maxAnisotropic,"aniso samples must be between 1 and "),n.anisotropic=r.anisotropic;}if("mipmap"in r){var v=!1;switch(typeof r.mipmap){case"string":w.parameter(r.mipmap,f,"invalid mipmap hint"),n.mipmapHint=f[r.mipmap],n.genMipmaps=!0,v=!0;break;case"boolean":v=n.genMipmaps=r.mipmap;break;case"object":w(Array.isArray(r.mipmap),"invalid mipmap type"),n.genMipmaps=!1,v=!0;break;default:w.raise("invalid mipmap type");}!v||"min"in r||(n.minFilter=9984);}}function K(n,r){i.texParameteri(r,10241,n.minFilter),i.texParameteri(r,10240,n.magFilter),i.texParameteri(r,10242,n.wrapS),i.texParameteri(r,10243,n.wrapT),a.ext_texture_filter_anisotropic&&i.texParameteri(r,34046,n.anisotropic),n.genMipmaps&&(i.hint(33170,n.mipmapHint),i.generateMipmap(r));}var Q=0,ea={},ed=o.maxTextureUnits,eh=Array(ed).map(function(){return null;});function ep(n){O.call(this),this.mipmask=0,this.internalformat=6408,this.id=Q++,this.refCount=1,this.target=n,this.texture=i.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Y,c.profile&&(this.stats={size:0});}function ew(n){i.activeTexture(33984),i.bindTexture(n.target,n.texture);}function eS(){var n=eh[0];n?i.bindTexture(n.target,n.texture):i.bindTexture(3553,null);}function eT(n){var r=n.texture;w(r,"must not double destroy texture");var a=n.unit,o=n.target;a>=0&&(i.activeTexture(33984+a),i.bindTexture(o,null),eh[a]=null),i.deleteTexture(r),n.texture=null,n.params=null,n.pixels=null,n.refCount=0,delete ea[n.id],u.textureCount--;}return r(ep.prototype,{bind:function(){this.bindCount+=1;var n=this.unit;if(n<0){for(var r=0;r<ed;++r){var a=eh[r];if(a){if(a.bindCount>0)continue;a.unit=-1;}eh[r]=this,n=r;break;}n>=ed&&w.raise("insufficient number of texture units"),c.profile&&u.maxTextureUnits<n+1&&(u.maxTextureUnits=n+1),this.unit=n,i.activeTexture(33984+n),i.bindTexture(this.target,this.texture);}return n;},unbind:function(){this.bindCount-=1;},decRef:function(){--this.refCount<=0&&eT(this);}}),c.profile&&(u.getTotalTextureSize=function(){var n=0;return Object.keys(ea).forEach(function(r){n+=ea[r].stats.size;}),n;}),{create2D:function(n,r){var a=new ep(3553);function s(n,r){var i=a.texInfo;Y.call(i);var l=q();return"number"==typeof n?"number"==typeof r?G(l,0|n,0|r):G(l,0|n,0|n):n?(w.type(n,"object","invalid arguments to regl.texture"),Z(i,n),H(l,n)):G(l,1,1),i.genMipmaps&&(l.mipmask=(l.width<<1)-1),a.mipmask=l.mipmask,M(a,l),w.texture2D(i,l,o),a.internalformat=l.internalformat,s.width=l.width,s.height=l.height,ew(a),W(l,3553),K(i,3553),eS(),$(l),c.profile&&(a.stats.size=eE(a.internalformat,a.type,l.width,l.height,i.genMipmaps,!1)),s.format=x[a.internalformat],s.type=E[a.type],s.mag=S[i.magFilter],s.min=T[i.minFilter],s.wrapS=A[i.wrapS],s.wrapT=A[i.wrapT],s;}return ea[a.id]=a,u.textureCount++,s(n,r),s.subimage=function(n,r,i,o){w(!!n,"must specify image data");var l=0|r,u=0|i,c=0|o,f=z();return M(f,a),f.width=0,f.height=0,I(f,n),f.width=f.width||(a.width>>c)-l,f.height=f.height||(a.height>>c)-u,w(a.type===f.type&&a.format===f.format&&a.internalformat===f.internalformat,"incompatible format for texture.subimage"),w(l>=0&&u>=0&&l+f.width<=a.width&&u+f.height<=a.height,"texture.subimage write out of bounds"),w(a.mipmask&1<<c,"missing mipmap data"),w(f.data||f.element||f.needsCopy,"missing image data"),ew(a),L(f,3553,l,u,c),eS(),U(f),s;},s.resize=function(n,r){var o=0|n,l=0|r||o;if(o===a.width&&l===a.height)return s;s.width=a.width=o,s.height=a.height=l,ew(a);for(var u=0;a.mipmask>>u;++u){var f=o>>u,d=l>>u;if(!f||!d)break;i.texImage2D(3553,u,a.format,f,d,0,a.format,a.type,null);}return eS(),c.profile&&(a.stats.size=eE(a.internalformat,a.type,o,l,!1,!1)),s;},s._reglType="texture2d",s._texture=a,c.profile&&(s.stats=a.stats),s.destroy=function(){a.decRef();},s;},createCube:function(n,r,a,s,l,f){var d=new ep(34067);ea[d.id]=d,u.cubeCount++;var h=Array(6);function p(n,r,i,a,s,l){var u,f=d.texInfo;for(Y.call(f),u=0;u<6;++u)h[u]=q();if("number"!=typeof n&&n){if("object"==typeof n){if(r)H(h[0],n),H(h[1],r),H(h[2],i),H(h[3],a),H(h[4],s),H(h[5],l);else if(Z(f,n),R(d,n),"faces"in n){var m=n.faces;for(w(Array.isArray(m)&&6===m.length,"cube faces must be a length 6 array"),u=0;u<6;++u)w("object"==typeof m[u]&&!!m[u],"invalid input for cube map face"),M(h[u],d),H(h[u],m[u]);}else for(u=0;u<6;++u)H(h[u],n);}else w.raise("invalid arguments to cube map");}else{var g=0|n||1;for(u=0;u<6;++u)G(h[u],g,g);}for(M(d,h[0]),o.npotTextureCube||w(et(d.width)&&et(d.height),"your browser does not support non power or two texture dimensions"),f.genMipmaps?d.mipmask=(h[0].width<<1)-1:d.mipmask=h[0].mipmask,w.textureCube(d,f,h,o),d.internalformat=h[0].internalformat,p.width=h[0].width,p.height=h[0].height,ew(d),u=0;u<6;++u)W(h[u],34069+u);for(K(f,34067),eS(),c.profile&&(d.stats.size=eE(d.internalformat,d.type,p.width,p.height,f.genMipmaps,!0)),p.format=x[d.internalformat],p.type=E[d.type],p.mag=S[f.magFilter],p.min=T[f.minFilter],p.wrapS=A[f.wrapS],p.wrapT=A[f.wrapT],u=0;u<6;++u)$(h[u]);return p;}return p(n,r,a,s,l,f),p.subimage=function(n,r,i,a,o){w(!!r,"must specify image data"),w("number"==typeof n&&n===(0|n)&&n>=0&&n<6,"invalid face");var s=0|i,l=0|a,u=0|o,c=z();return M(c,d),c.width=0,c.height=0,I(c,r),c.width=c.width||(d.width>>u)-s,c.height=c.height||(d.height>>u)-l,w(d.type===c.type&&d.format===c.format&&d.internalformat===c.internalformat,"incompatible format for texture.subimage"),w(s>=0&&l>=0&&s+c.width<=d.width&&l+c.height<=d.height,"texture.subimage write out of bounds"),w(d.mipmask&1<<u,"missing mipmap data"),w(c.data||c.element||c.needsCopy,"missing image data"),ew(d),L(c,34069+n,s,l,u),eS(),U(c),p;},p.resize=function(n){var r=0|n;if(r!==d.width){p.width=d.width=r,p.height=d.height=r,ew(d);for(var a=0;a<6;++a)for(var o=0;d.mipmask>>o;++o)i.texImage2D(34069+a,o,d.format,r>>o,r>>o,0,d.format,d.type,null);return eS(),c.profile&&(d.stats.size=eE(d.internalformat,d.type,p.width,p.height,!1,!0)),p;}},p._reglType="textureCube",p._texture=d,c.profile&&(p.stats=d.stats),p.destroy=function(){d.decRef();},p;},clear:function(){for(var n=0;n<ed;++n)i.activeTexture(33984+n),i.bindTexture(3553,null),eh[n]=null;B(ea).forEach(eT),u.cubeCount=0,u.textureCount=0;},getTexture:function(n){return null;},restore:function(){for(var n=0;n<ed;++n){var r=eh[n];r&&(r.bindCount=0,r.unit=-1,eh[n]=null);}B(ea).forEach(function(n){n.texture=i.createTexture(),i.bindTexture(n.target,n.texture);for(var r=0;r<32;++r)if((n.mipmask&1<<r)!=0){if(3553===n.target)i.texImage2D(3553,r,n.internalformat,n.width>>r,n.height>>r,0,n.internalformat,n.type,null);else for(var a=0;a<6;++a)i.texImage2D(34069+a,r,n.internalformat,n.width>>r,n.height>>r,0,n.internalformat,n.type,null);}K(n.texInfo,n.target);});}};}(l,p,b,function(){z.procs.poll();},_,h,s),I=eS(l,p,b,h,s),L=function(n,i,a,o,s,l){var u={cur:null,next:null,dirty:!1,setFBO:null},c=["rgba"],f=["rgba4","rgb565","rgb5 a1"];i.ext_srgb&&f.push("srgba"),i.ext_color_buffer_half_float&&f.push("rgba16f","rgb16f"),i.webgl_color_buffer_float&&f.push("rgba32f");var d=["uint8"];function h(n,r,i){this.target=n,this.texture=r,this.renderbuffer=i;var a=0,o=0;r?(a=r.width,o=r.height):i&&(a=i.width,o=i.height),this.width=a,this.height=o;}function p(n){n&&(n.texture&&n.texture._texture.decRef(),n.renderbuffer&&n.renderbuffer._renderbuffer.decRef());}function m(n,r,i){if(n){if(n.texture){var a=n.texture._texture,o=Math.max(1,a.width),s=Math.max(1,a.height);w(o===r&&s===i,"inconsistent width/height for supplied texture"),a.refCount+=1;}else{var l=n.renderbuffer._renderbuffer;w(l.width===r&&l.height===i,"inconsistent width/height for renderbuffer"),l.refCount+=1;}}}function g(r,i){i&&(i.texture?n.framebufferTexture2D(36160,r,i.target,i.texture._texture.texture,0):n.framebufferRenderbuffer(36160,r,36161,i.renderbuffer._renderbuffer.renderbuffer));}function v(n){var r=3553,i=null,a=null,o=n;"object"==typeof n&&(o=n.data,"target"in n&&(r=0|n.target)),w.type(o,"function","invalid attachment data");var s=o._reglType;return"texture2d"===s?(i=o,w(3553===r)):"textureCube"===s?(i=o,w(r>=34069&&r<34075,"invalid cube map target")):"renderbuffer"===s?(a=o,r=36161):w.raise("invalid regl object for attachment"),new h(r,i,a);}function y(n,r,i,a,l){if(i){var u=o.create2D({width:n,height:r,format:a,type:l});return u._texture.refCount=0,new h(3553,u,null);}var c=s.create({width:n,height:r,format:a});return c._renderbuffer.refCount=0,new h(36161,null,c);}function _(n){return n&&(n.texture||n.renderbuffer);}function b(n,r,i){n&&(n.texture?n.texture.resize(r,i):n.renderbuffer&&n.renderbuffer.resize(r,i),n.width=r,n.height=i);}i.oes_texture_half_float&&d.push("half float","float16"),i.oes_texture_float&&d.push("float","float32");var x=0,E={};function S(){this.id=x++,E[this.id]=this,this.framebuffer=n.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null;}function T(n){n.colorAttachments.forEach(p),p(n.depthAttachment),p(n.stencilAttachment),p(n.depthStencilAttachment);}function A(r){var i=r.framebuffer;w(i,"must not double destroy framebuffer"),n.deleteFramebuffer(i),r.framebuffer=null,l.framebufferCount--,delete E[r.id];}function C(r){n.bindFramebuffer(36160,r.framebuffer);var i,o=r.colorAttachments;for(i=0;i<o.length;++i)g(36064+i,o[i]);for(i=o.length;i<a.maxColorAttachments;++i)n.framebufferTexture2D(36160,36064+i,3553,null,0);n.framebufferTexture2D(36160,33306,3553,null,0),n.framebufferTexture2D(36160,36096,3553,null,0),n.framebufferTexture2D(36160,36128,3553,null,0),g(36096,r.depthAttachment),g(36128,r.stencilAttachment),g(33306,r.depthStencilAttachment);var s=n.checkFramebufferStatus(36160);n.isContextLost()||36053===s||w.raise("framebuffer configuration not supported, status = "+eM[s]),n.bindFramebuffer(36160,u.next?u.next.framebuffer:null),u.cur=u.next,n.getError();}function O(n,o){var s=new S;function h(n,r){w(u.next!==s,"can not update framebuffer which is currently in use");var o,l=0,p=0,g=!0,b=!0,x=null,E=!0,S="rgba",A="uint8",O=1,M=null,R=null,P=null,k=!1;if("number"==typeof n)l=0|n,p=0|r||l;else if(n){if(w.type(n,"object","invalid arguments for framebuffer"),"shape"in n){var I=n.shape;w(Array.isArray(I)&&I.length>=2,"invalid shape for framebuffer"),l=I[0],p=I[1];}else"radius"in n&&(l=p=n.radius),"width"in n&&(l=n.width),"height"in n&&(p=n.height);("color"in n||"colors"in n)&&Array.isArray(x=n.color||n.colors)&&w(1===x.length||i.webgl_draw_buffers,"multiple render targets not supported"),!x&&("colorCount"in n&&w((O=0|n.colorCount)>0,"invalid color buffer count"),"colorTexture"in n&&(E=!!n.colorTexture,S="rgba4"),"colorType"in n&&(A=n.colorType,E?(w(i.oes_texture_float||!("float"===A||"float32"===A),"you must enable OES_texture_float in order to use floating point framebuffer objects"),w(i.oes_texture_half_float||!("half float"===A||"float16"===A),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===A||"float16"===A?(w(i.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),S="rgba16f"):("float"===A||"float32"===A)&&(w(i.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),S="rgba32f"),w.oneOf(A,d,"invalid color type")),"colorFormat"in n&&(S=n.colorFormat,c.indexOf(S)>=0?E=!0:f.indexOf(S)>=0?E=!1:E?w.oneOf(n.colorFormat,c,"invalid color format for texture"):w.oneOf(n.colorFormat,f,"invalid color format for renderbuffer"))),("depthTexture"in n||"depthStencilTexture"in n)&&w(!(k=!!(n.depthTexture||n.depthStencilTexture))||i.webgl_depth_texture,"webgl_depth_texture extension not supported"),"depth"in n&&("boolean"==typeof n.depth?g=n.depth:(M=n.depth,b=!1)),"stencil"in n&&("boolean"==typeof n.stencil?b=n.stencil:(R=n.stencil,g=!1)),"depthStencil"in n&&("boolean"==typeof n.depthStencil?g=b=n.depthStencil:(P=n.depthStencil,g=!1,b=!1));}else l=p=1;var L=null,N=null,D=null,F=null;if(Array.isArray(x))L=x.map(v);else if(x)L=[v(x)];else for(o=0,L=Array(O);o<O;++o)L[o]=y(l,p,E,S,A);w(i.webgl_draw_buffers||L.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),w(L.length<=a.maxColorAttachments,"too many color attachments, not supported"),l=l||L[0].width,p=p||L[0].height,M?N=v(M):g&&!b&&(N=y(l,p,k,"depth","uint32")),R?D=v(R):b&&!g&&(D=y(l,p,!1,"stencil","uint8")),P?F=v(P):!M&&!R&&b&&g&&(F=y(l,p,k,"depth stencil","depth stencil")),w(!!M+!!R+!!P<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var B=null;for(o=0;o<L.length;++o)if(m(L[o],l,p),w(!L[o]||L[o].texture&&eT.indexOf(L[o].texture._texture.format)>=0||L[o].renderbuffer&&eO.indexOf(L[o].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+o+" is invalid"),L[o]&&L[o].texture){var j=eA[L[o].texture._texture.format]*eC[L[o].texture._texture.type];null===B?B=j:w(B===j,"all color attachments much have the same number of bits per pixel.");}return m(N,l,p),w(!N||N.texture&&6402===N.texture._texture.format||N.renderbuffer&&33189===N.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object"),m(D,l,p),w(!D||D.renderbuffer&&36168===D.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object"),m(F,l,p),w(!F||F.texture&&34041===F.texture._texture.format||F.renderbuffer&&34041===F.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object"),T(s),s.width=l,s.height=p,s.colorAttachments=L,s.depthAttachment=N,s.stencilAttachment=D,s.depthStencilAttachment=F,h.color=L.map(_),h.depth=_(N),h.stencil=_(D),h.depthStencil=_(F),h.width=s.width,h.height=s.height,C(s),h;}return l.framebufferCount++,h(n,o),r(h,{resize:function(n,r){w(u.next!==s,"can not resize a framebuffer which is currently in use");var i=Math.max(0|n,1),a=Math.max(0|r||i,1);if(i===s.width&&a===s.height)return h;for(var o=s.colorAttachments,l=0;l<o.length;++l)b(o[l],i,a);return b(s.depthAttachment,i,a),b(s.stencilAttachment,i,a),b(s.depthStencilAttachment,i,a),s.width=h.width=i,s.height=h.height=a,C(s),h;},_reglType:"framebuffer",_framebuffer:s,destroy:function(){A(s),T(s);},use:function(n){u.setFBO({framebuffer:h},n);}});}return r(u,{getFramebuffer:function(n){if("function"==typeof n&&"framebuffer"===n._reglType){var r=n._framebuffer;if(r instanceof S)return r;}return null;},create:O,createCube:function(n){var s=Array(6);function l(n){w(0>s.indexOf(u.next),"can not update framebuffer which is currently in use");var a,f,h={color:null},p=0,m=null,g="rgba",v="uint8",y=1;if("number"==typeof n)p=0|n;else if(n){if(w.type(n,"object","invalid arguments for framebuffer"),"shape"in n){var _=n.shape;w(Array.isArray(_)&&_.length>=2,"invalid shape for framebuffer"),w(_[0]===_[1],"cube framebuffer must be square"),p=_[0];}else"radius"in n&&(p=0|n.radius),"width"in n?(p=0|n.width,"height"in n&&w(n.height===p,"must be square")):"height"in n&&(p=0|n.height);("color"in n||"colors"in n)&&Array.isArray(m=n.color||n.colors)&&w(1===m.length||i.webgl_draw_buffers,"multiple render targets not supported"),!m&&("colorCount"in n&&w((y=0|n.colorCount)>0,"invalid color buffer count"),"colorType"in n&&(w.oneOf(n.colorType,d,"invalid color type"),v=n.colorType),"colorFormat"in n&&(g=n.colorFormat,w.oneOf(n.colorFormat,c,"invalid color format for texture"))),"depth"in n&&(h.depth=n.depth),"stencil"in n&&(h.stencil=n.stencil),"depthStencil"in n&&(h.depthStencil=n.depthStencil);}else p=1;if(m){if(Array.isArray(m))for(a=0,f=[];a<m.length;++a)f[a]=m[a];else f=[m];}else{f=Array(y);var b={radius:p,format:g,type:v};for(a=0;a<y;++a)f[a]=o.createCube(b);}for(a=0,h.color=Array(f.length);a<f.length;++a){var x=f[a];w("function"==typeof x&&"textureCube"===x._reglType,"invalid cube map"),p=p||x.width,w(x.width===p&&x.height===p,"invalid cube map shape"),h.color[a]={target:34069,data:f[a]};}for(a=0;a<6;++a){for(var E=0;E<f.length;++E)h.color[E].target=34069+a;a>0&&(h.depth=s[0].depth,h.stencil=s[0].stencil,h.depthStencil=s[0].depthStencil),s[a]?s[a](h):s[a]=O(h);}return r(l,{width:p,height:p,color:f});}return l(n),r(l,{faces:s,resize:function(n){var r,i=0|n;if(w(i>0&&i<=a.maxCubeMapSize,"invalid radius for cube fbo"),i===l.width)return l;var o=l.color;for(r=0;r<o.length;++r)o[r].resize(i);for(r=0;r<6;++r)s[r].resize(i);return l.width=l.height=i,l;},_reglType:"framebufferCube",destroy:function(){s.forEach(function(n){n.destroy();});}});},clear:function(){B(E).forEach(A);},restore:function(){u.cur=null,u.next=null,u.dirty=!0,B(E).forEach(function(r){r.framebuffer=n.createFramebuffer(),C(r);});}});}(l,p,b,A,I,h),z=function(n,i,a,o,s,l,u,c,f,d,h,p,m,g,v){var y=d.Record,_={add:32774,subtract:32778,"reverse subtract":32779};a.ext_blend_minmax&&(_.min=32775,_.max=32776);var b=a.angle_instanced_arrays,x=a.webgl_draw_buffers,E={dirty:!0,profile:v.profile},S={},T=[],A={},O={};function M(n){return n.replace(".","_");}function R(n,r,i){var a=M(n);T.push(n),S[a]=E[a]=!!i,A[a]=r;}function P(n,r,i){var a=M(n);T.push(n),Array.isArray(i)?(E[a]=i.slice(),S[a]=i.slice()):E[a]=S[a]=i,O[a]=r;}R(eL,3024),R(eN,3042),P(eD,"blendColor",[0,0,0,0]),P(eF,"blendEquationSeparate",[32774,32774]),P(eB,"blendFuncSeparate",[1,0,1,0]),R(ej,2929,!0),P(ez,"depthFunc",513),P(eU,"depthRange",[0,1]),P(eV,"depthMask",!0),P(eG,eG,[!0,!0,!0,!0]),R(eH,2884),P(eW,"cullFace",1029),P(eX,eX,2305),P(eq,eq,1),R(e$,32823),P(eY,"polygonOffset",[0,0]),R(eZ,32926),R(eK,32928),P(eQ,"sampleCoverage",[1,!1]),R(eJ,2960),P(e0,"stencilMask",-1),P(e1,"stencilFunc",[519,0,-1]),P(e2,"stencilOpSeparate",[1028,7680,7680,7680]),P(e3,"stencilOpSeparate",[1029,7680,7680,7680]),R(e4,3089),P(e5,"scissor",[0,0,n.drawingBufferWidth,n.drawingBufferHeight]),P(e6,e6,[0,0,n.drawingBufferWidth,n.drawingBufferHeight]);var I={gl:n,context:m,strings:i,next:S,current:E,draw:p,elements:l,buffer:s,shader:h,attributes:d.state,vao:d,uniforms:f,framebuffer:c,extensions:a,timer:g,isBufferArgs:tE},L={primTypes:Z,compareFuncs:ty,blendFuncs:tg,blendEquations:_,stencilOps:t_,glTypes:V,orientationType:tx};w.optional(function(){I.isArrayLike=ee;}),x&&(L.backBuffer=[1029],L.drawBuffer=k(o.maxDrawbuffers,function(n){return 0===n?[0]:k(n,function(n){return 36064+n;});}));var N=0;function D(){var n=function(){var n=0,i=[],a=[];function o(){var i=[],a=[];return r(function(){i.push.apply(i,eP(arguments));},{def:function(){var r="v"+n++;return a.push(r),arguments.length>0&&(i.push(r,"="),i.push.apply(i,eP(arguments)),i.push(";")),r;},toString:function(){return ek([a.length>0?"var "+a.join(",")+";":"",ek(i)]);}});}function s(){var n=o(),i=o(),a=n.toString,s=i.toString;function l(r,a){i(r,a,"=",n.def(r,a),";");}return r(function(){n.apply(n,eP(arguments));},{def:n.def,entry:n,exit:i,save:l,set:function(r,i,a){l(r,i),n(r,i,"=",a,";");},toString:function(){return a()+s();}});}var l=o(),u={};return{global:l,link:function(r){for(var o=0;o<a.length;++o)if(a[o]===r)return i[o];var s="g"+n++;return i.push(s),a.push(r),s;},block:o,proc:function(n,i){var a=[];function o(){var n="a"+a.length;return a.push(n),n;}i=i||0;for(var l=0;l<i;++l)o();var c=s(),f=c.toString;return u[n]=r(c,{arg:o,toString:function(){return ek(["function(",a.join(),"){",f(),"}"]);}});},scope:s,cond:function(){var n=ek(arguments),i=s(),a=s(),o=i.toString,l=a.toString;return r(i,{then:function(){return i.apply(i,eP(arguments)),this;},else:function(){return a.apply(a,eP(arguments)),this;},toString:function(){var r=l();return r&&(r="else{"+r+"}"),ek(["if(",n,"){",o(),"}",r]);}});},compile:function(){var n=['"use strict";',l,"return {"];Object.keys(u).forEach(function(r){n.push('"',r,'":',u[r].toString(),",");}),n.push("}");var r=ek(n).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,i.concat(r)).apply(null,a);}};}(),a=n.link,o=n.global;n.id=N++,n.batchId="0";var s=a(I),l=n.shared={props:"a0"};Object.keys(I).forEach(function(n){l[n]=o.def(s,".",n);}),w.optional(function(){n.CHECK=a(w),n.commandStr=w.guessCommand(),n.command=a(n.commandStr),n.assert=function(n,r,i){n("if(!(",r,"))",this.CHECK,".commandRaise(",a(i),",",this.command,");");},L.invalidBlendCombinations=tv;});var u=n.next={},c=n.current={};Object.keys(O).forEach(function(n){Array.isArray(E[n])&&(u[n]=o.def(l.next,".",n),c[n]=o.def(l.current,".",n));});var f=n.constants={};Object.keys(L).forEach(function(n){f[n]=o.def(JSON.stringify(L[n]));}),n.invoke=function(r,i){switch(i.type){case 0:var o=["this",l.context,l.props,n.batchId];return r.def(a(i.data),".call(",o.slice(0,Math.max(i.data.length+1,4)),")");case 1:return r.def(l.props,i.data);case 2:return r.def(l.context,i.data);case 3:return r.def("this",i.data);case 4:return i.data.append(n,r),i.data.ref;}},n.attribCache={};var h={};return n.scopeAttrib=function(n){var r=i.id(n);if(r in h)return h[r];var o=d.scope[r];return o||(o=d.scope[r]=new y),h[r]=a(o);},n;}function F(n,r,i){var a=n.shared.context,o=n.scope();Object.keys(i).forEach(function(s){r.save(a,"."+s);var l=i[s];o(a,".",s,"=",l.append(n,r),";");}),r(o);}function B(n,r,i,a){var o,s,l=n.shared,u=l.gl,c=l.framebuffer;x&&(o=r.def(l.extensions,".webgl_draw_buffers"));var f=n.constants,d=f.drawBuffer,h=f.backBuffer;s=i?i.append(n,r):r.def(c,".next"),a||r("if(",s,"!==",c,".cur){"),r("if(",s,"){",u,".bindFramebuffer(",36160,",",s,".framebuffer);"),x&&r(o,".drawBuffersWEBGL(",d,"[",s,".colorAttachments.length]);"),r("}else{",u,".bindFramebuffer(",36160,",null);"),x&&r(o,".drawBuffersWEBGL(",h,");"),r("}",c,".cur=",s,";"),a||r("}");}function j(n,r,i){var a=n.shared,o=a.gl,s=n.current,l=n.next,u=a.current,c=a.next,f=n.cond(u,".dirty");T.forEach(function(r){var a,d,h=M(r);if(!(h in i.state)){if(h in l){a=l[h],d=s[h];var p=k(E[h].length,function(n){return f.def(a,"[",n,"]");});f(n.cond(p.map(function(n,r){return n+"!=="+d+"["+r+"]";}).join("||")).then(o,".",O[h],"(",p,");",p.map(function(n,r){return d+"["+r+"]="+n;}).join(";"),";"));}else{a=f.def(c,".",h);var m=n.cond(a,"!==",u,".",h);f(m),h in A?m(n.cond(a).then(o,".enable(",A[h],");").else(o,".disable(",A[h],");"),u,".",h,"=",a,";"):m(o,".",O[h],"(",a,");",u,".",h,"=",a,";");}}}),0===Object.keys(i.state).length&&f(u,".dirty=false;"),r(f);}function z(n,r,i,a){var o=n.shared,s=n.current,l=o.current,u=o.gl;tw(Object.keys(i)).forEach(function(o){var c=i[o];if(!a||a(c)){var f=c.append(n,r);if(A[o]){var d=A[o];tT(c)?f?r(u,".enable(",d,");"):r(u,".disable(",d,");"):r(n.cond(f).then(u,".enable(",d,");").else(u,".disable(",d,");")),r(l,".",o,"=",f,";");}else if(ee(f)){var h=s[o];r(u,".",O[o],"(",f,");",f.map(function(n,r){return h+"["+r+"]="+n;}).join(";"),";");}else r(u,".",O[o],"(",f,");",l,".",o,"=",f,";");}});}function U(n,r){b&&(n.instancing=r.def(n.shared.extensions,".angle_instanced_arrays"));}function G(n,r,i,a,o){var s,l,u,c=n.shared,f=n.stats,d=c.current,h=c.timer,p=i.profile;function m(){return"undefined"==typeof performance?"Date.now()":"performance.now()";}function v(n){n(s=r.def(),"=",m(),";"),"string"==typeof o?n(f,".count+=",o,";"):n(f,".count++;"),g&&(a?n(l=r.def(),"=",h,".getNumPendingQueries();"):n(h,".beginQuery(",f,");"));}function y(n){n(f,".cpuTime+=",m(),"-",s,";"),g&&(a?n(h,".pushScopeStats(",l,",",h,".getNumPendingQueries(),",f,");"):n(h,".endQuery();"));}function _(n){var i=r.def(d,".profile");r(d,".profile=",n,";"),r.exit(d,".profile=",i,";");}if(p){if(tT(p)){p.enable?(v(r),y(r.exit),_("true")):_("false");return;}_(u=p.append(n,r));}else u=r.def(d,".profile");var b=n.block();v(b),r("if(",u,"){",b,"}");var x=n.block();y(x),r.exit("if(",u,"){",x,"}");}function H(n,r,i,a,o){var s=n.shared;a.forEach(function(a){var l,u=a.name,c=i.attributes[u];if(c){if(!o(c))return;l=c.append(n,r);}else{if(!o(tO))return;var f=n.scopeAttrib(u);w.optional(function(){n.assert(r,f+".state","missing attribute "+u);}),l={},Object.keys(new y).forEach(function(n){l[n]=r.def(f,".",n);});}!function(i,a,o){var l=s.gl,u=r.def(i,".location"),c=r.def(s.attributes,"[",u,"]"),f=o.state,d=o.buffer,h=[o.x,o.y,o.z,o.w],p=["buffer","normalized","offset","stride"];function m(){r("if(!",c,".buffer){",l,".enableVertexAttribArray(",u,");}");var i,s=o.type;if(i=o.size?r.def(o.size,"||",a):a,r("if(",c,".type!==",s,"||",c,".size!==",i,"||",p.map(function(n){return c+"."+n+"!=="+o[n];}).join("||"),"){",l,".bindBuffer(",34962,",",d,".buffer);",l,".vertexAttribPointer(",[u,i,s,o.normalized,o.stride,o.offset],");",c,".type=",s,";",c,".size=",i,";",p.map(function(n){return c+"."+n+"="+o[n]+";";}).join(""),"}"),b){var f=o.divisor;r("if(",c,".divisor!==",f,"){",n.instancing,".vertexAttribDivisorANGLE(",[u,f],");",c,".divisor=",f,";}");}}function g(){r("if(",c,".buffer){",l,".disableVertexAttribArray(",u,");",c,".buffer=null;","}if(",eI.map(function(n,r){return c+"."+n+"!=="+h[r];}).join("||"),"){",l,".vertexAttrib4f(",u,",",h,");",eI.map(function(n,r){return c+"."+n+"="+h[r]+";";}).join(""),"}");}1===f?m():2===f?g():(r("if(",f,"===",1,"){"),m(),r("}else{"),g(),r("}"));}(n.link(a),function(n){switch(n){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1;}}(a.info.type),l);});}function W(n,r,a,o,s){for(var l=n.shared,u=l.gl,c=0;c<o.length;++c){var f,d,h=o[c],p=h.name,m=h.info.type,g=a.uniforms[p],v=n.link(h)+".location";if(g){if(!s(g))continue;if(tT(g)){var y=g.value;if(w.command(null!=y,'missing uniform "'+p+'"',n.commandStr),35678===m||35680===m){w.command("function"==typeof y&&(35678===m&&("texture2d"===y._reglType||"framebuffer"===y._reglType)||35680===m&&("textureCube"===y._reglType||"framebufferCube"===y._reglType)),"invalid texture for uniform "+p,n.commandStr);var _=n.link(y._texture||y.color[0]._texture);r(u,".uniform1i(",v,",",_+".bind());"),r.exit(_,".unbind();");}else if(35674===m||35675===m||35676===m){w.optional(function(){w.command(ee(y),"invalid matrix for uniform "+p,n.commandStr),w.command(35674===m&&4===y.length||35675===m&&9===y.length||35676===m&&16===y.length,"invalid length for matrix uniform "+p,n.commandStr);});var b=n.global.def("new Float32Array(["+Array.prototype.slice.call(y)+"])"),x=2;35675===m?x=3:35676===m&&(x=4),r(u,".uniformMatrix",x,"fv(",v,",false,",b,");");}else{switch(m){case 5126:w.commandType(y,"number","uniform "+p,n.commandStr),f="1f";break;case 35664:w.command(ee(y)&&2===y.length,"uniform "+p,n.commandStr),f="2f";break;case 35665:w.command(ee(y)&&3===y.length,"uniform "+p,n.commandStr),f="3f";break;case 35666:w.command(ee(y)&&4===y.length,"uniform "+p,n.commandStr),f="4f";break;case 35670:w.commandType(y,"boolean","uniform "+p,n.commandStr),f="1i";break;case 5124:w.commandType(y,"number","uniform "+p,n.commandStr),f="1i";break;case 35671:case 35667:w.command(ee(y)&&2===y.length,"uniform "+p,n.commandStr),f="2i";break;case 35672:case 35668:w.command(ee(y)&&3===y.length,"uniform "+p,n.commandStr),f="3i";break;case 35673:case 35669:w.command(ee(y)&&4===y.length,"uniform "+p,n.commandStr),f="4i";}r(u,".uniform",f,"(",v,",",ee(y)?Array.prototype.slice.call(y):y,");");}continue;}d=g.append(n,r);}else{if(!s(tO))continue;d=r.def(l.uniforms,"[",i.id(p),"]");}35678===m?r("if(",d,"&&",d,'._reglType==="framebuffer"){',d,"=",d,".color[0];","}"):35680===m&&r("if(",d,"&&",d,'._reglType==="framebufferCube"){',d,"=",d,".color[0];","}"),w.optional(function(){function i(i,a){n.assert(r,i,'bad data or missing for uniform "'+p+'".  '+a);}function a(n){i("typeof "+d+'==="'+n+'"',"invalid type, expected "+n);}function o(r,a){i(l.isArrayLike+"("+d+")&&"+d+".length==="+r,"invalid vector, should have length "+r,n.commandStr);}function s(r){i("typeof "+d+'==="function"&&'+d+'._reglType==="texture'+(3553===r?"2d":"Cube")+'"',"invalid texture type",n.commandStr);}switch(m){case 5124:case 5126:a("number");break;case 35667:case 35664:o(2,"number");break;case 35668:case 35665:o(3,"number");break;case 35669:case 35666:case 35674:o(4,"number");break;case 35670:a("boolean");break;case 35671:o(2,"boolean");break;case 35672:o(3,"boolean");break;case 35673:o(4,"boolean");break;case 35675:o(9,"number");break;case 35676:o(16,"number");break;case 35678:s(3553);break;case 35680:s(34067);}});var E=1;switch(m){case 35678:case 35680:var S=r.def(d,"._texture");r(u,".uniform1i(",v,",",S,".bind());"),r.exit(S,".unbind();");continue;case 5124:case 35670:f="1i";break;case 35667:case 35671:f="2i",E=2;break;case 35668:case 35672:f="3i",E=3;break;case 35669:case 35673:f="4i",E=4;break;case 5126:f="1f";break;case 35664:f="2f",E=2;break;case 35665:f="3f",E=3;break;case 35666:f="4f",E=4;break;case 35674:f="Matrix2fv";break;case 35675:f="Matrix3fv";break;case 35676:f="Matrix4fv";}if(r(u,".uniform",f,"(",v,","),"M"===f.charAt(0)){var T=Math.pow(m-35674+2,2),A=n.global.def("new Float32Array(",T,")");r("false,(Array.isArray(",d,")||",d," instanceof Float32Array)?",d,":(",k(T,function(n){return A+"["+n+"]="+d+"["+n+"]";}),",",A,")");}else E>1?r(k(E,function(n){return d+"["+n+"]";})):r(d);r(");");}}function X(n,r,i,a){var o,s,l,u,c,f,d,h,p=n.shared,m=p.gl,g=p.draw,v=a.draw,y=(s=v.elements,l=r,s?((s.contextDep&&a.contextDynamic||s.propDep)&&(l=i),o=s.append(n,l)):o=l.def(g,".",tt),o&&l("if("+o+")"+m+".bindBuffer(34963,"+o+".buffer.buffer);"),o);function _(o){var s=v[o];return s?s.contextDep&&a.contextDynamic||s.propDep?s.append(n,i):s.append(n,r):r.def(g,".",o);}var x=_(tn),E=_(ti),S=(c=v.count,f=r,c?((c.contextDep&&a.contextDynamic||c.propDep)&&(f=i),u=c.append(n,f),w.optional(function(){c.MISSING&&n.assert(r,"false","missing vertex count"),c.DYNAMIC&&n.assert(f,u+">=0","missing vertex count");})):(u=f.def(g,".",tr),w.optional(function(){n.assert(f,u+">=0","missing vertex count");})),u);if("number"==typeof S){if(0===S)return;}else i("if(",S,"){"),i.exit("}");b&&(d=_(ta),h=n.instancing);var T=y+".type",A=v.elements&&tT(v.elements);function C(){function n(){i(h,".drawElementsInstancedANGLE(",[x,S,T,E+"<<(("+T+"-5121)>>1)",d],");");}function r(){i(h,".drawArraysInstancedANGLE(",[x,E,S,d],");");}y?A?n():(i("if(",y,"){"),n(),i("}else{"),r(),i("}")):r();}function O(){function n(){i(m+".drawElements("+[x,S,T,E+"<<(("+T+"-5121)>>1)"]+");");}function r(){i(m+".drawArrays("+[x,E,S]+");");}y?A?n():(i("if(",y,"){"),n(),i("}else{"),r(),i("}")):r();}b&&("number"!=typeof d||d>=0)?"string"==typeof d?(i("if(",d,">0){"),C(),i("}else if(",d,"<0){"),O(),i("}")):C():O();}function q(n,r,i,a,o){var s=D(),l=s.proc("body",o);return w.optional(function(){s.commandStr=r.commandStr,s.command=s.link(r.commandStr);}),b&&(s.instancing=l.def(s.shared.extensions,".angle_instanced_arrays")),n(s,l,i,a),s.compile().body;}function $(n,r,i,a){U(n,r),i.useVAO?i.drawVAO?r(n.shared.vao,".setVAO(",i.drawVAO.append(n,r),");"):r(n.shared.vao,".setVAO(",n.shared.vao,".targetVAO);"):(r(n.shared.vao,".setVAO(null);"),H(n,r,i,a.attributes,function(){return!0;})),W(n,r,i,a.uniforms,function(){return!0;}),X(n,r,r,i);}function Y(n,r,i,a){function o(){return!0;}n.batchId="a1",U(n,r),H(n,r,i,a.attributes,o),W(n,r,i,a.uniforms,o),X(n,r,r,i);}function K(n,r,i,a){U(n,r);var o=i.contextDep,s=r.def(),l=r.def();n.shared.props=l,n.batchId=s;var u=n.scope(),c=n.scope();function f(n){return n.contextDep&&o||n.propDep;}function d(n){return!f(n);}if(r(u.entry,"for(",s,"=0;",s,"<","a1",";++",s,"){",l,"=","a0","[",s,"];",c,"}",u.exit),i.needsContext&&F(n,c,i.context),i.needsFramebuffer&&B(n,c,i.framebuffer),z(n,c,i.state,f),i.profile&&f(i.profile)&&G(n,c,i,!1,!0),a)i.useVAO?i.drawVAO?f(i.drawVAO)?c(n.shared.vao,".setVAO(",i.drawVAO.append(n,c),");"):u(n.shared.vao,".setVAO(",i.drawVAO.append(n,u),");"):u(n.shared.vao,".setVAO(",n.shared.vao,".targetVAO);"):(u(n.shared.vao,".setVAO(null);"),H(n,u,i,a.attributes,d),H(n,c,i,a.attributes,f)),W(n,u,i,a.uniforms,d),W(n,c,i,a.uniforms,f),X(n,u,c,i);else{var h=n.global.def("{}"),p=i.shader.progVar.append(n,c),m=c.def(p,".id"),g=c.def(h,"[",m,"]");c(n.shared.gl,".useProgram(",p,".program);","if(!",g,"){",g,"=",h,"[",m,"]=",n.link(function(r){return q(Y,n,i,r,2);}),"(",p,");}",g,".call(this,a0[",s,"],",s,");");}}function Q(n,r,i){var a=r.static[i];if(a&&function(n){if(!("object"!=typeof n||ee(n))){for(var r=Object.keys(n),i=0;i<r.length;++i)if(C.isDynamic(n[r[i]]))return!0;return!1;}}(a)){var o=n.global,s=Object.keys(a),l=!1,u=!1,c=!1,f=n.global.def("{}");s.forEach(function(r){var i=a[r];if(C.isDynamic(i)){"function"==typeof i&&(i=a[r]=C.unbox(i));var s=tC(i,null);l=l||s.thisDep,c=c||s.propDep,u=u||s.contextDep;}else{switch(o(f,".",r,"="),typeof i){case"number":o(i);break;case"string":o('"',i,'"');break;case"object":Array.isArray(i)&&o("[",i.join(),"]");break;default:o(n.link(i));}o(";");}}),r.dynamic[i]=new C.DynamicVariable(4,{thisDep:l,contextDep:u,propDep:c,ref:f,append:function(n,r){s.forEach(function(i){var o=a[i];if(C.isDynamic(o)){var s=n.invoke(r,o);r(f,".",i,"=",s,";");}});}}),delete r.static[i];}}return{next:S,current:E,procs:function(){var n,r=D(),i=r.proc("poll"),s=r.proc("refresh"),l=r.block();i(l),s(l);var u=r.shared,c=u.gl,f=u.next,d=u.current;l(d,".dirty=false;"),B(r,i),B(r,s,null,!0),b&&(n=r.link(b)),a.oes_vertex_array_object&&s(r.link(a.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var h=0;h<o.maxAttributes;++h){var p=s.def(u.attributes,"[",h,"]"),m=r.cond(p,".buffer");m.then(c,".enableVertexAttribArray(",h,");",c,".bindBuffer(",34962,",",p,".buffer.buffer);",c,".vertexAttribPointer(",h,",",p,".size,",p,".type,",p,".normalized,",p,".stride,",p,".offset);").else(c,".disableVertexAttribArray(",h,");",c,".vertexAttrib4f(",h,",",p,".x,",p,".y,",p,".z,",p,".w);",p,".buffer=null;"),s(m),b&&s(n,".vertexAttribDivisorANGLE(",h,",",p,".divisor);");}return s(r.shared.vao,".currentVAO=null;",r.shared.vao,".setVAO(",r.shared.vao,".targetVAO);"),Object.keys(A).forEach(function(n){var a=A[n],o=l.def(f,".",n),u=r.block();u("if(",o,"){",c,".enable(",a,")}else{",c,".disable(",a,")}",d,".",n,"=",o,";"),s(u),i("if(",o,"!==",d,".",n,"){",u,"}");}),Object.keys(O).forEach(function(n){var a,o,u=O[n],h=E[n],p=r.block();if(p(c,".",u,"("),ee(h)){var m=h.length;a=r.global.def(f,".",n),o=r.global.def(d,".",n),p(k(m,function(n){return a+"["+n+"]";}),");",k(m,function(n){return o+"["+n+"]="+a+"["+n+"];";}).join("")),i("if(",k(m,function(n){return a+"["+n+"]!=="+o+"["+n+"]";}).join("||"),"){",p,"}");}else a=l.def(f,".",n),o=l.def(d,".",n),p(a,");",d,".",n,"=",a,";"),i("if(",a,"!==",o,"){",p,"}");s(p);}),r.compile();}(),compile:function(n,r,u,f,p){var m=D();m.stats=m.link(p),Object.keys(r.static).forEach(function(n){Q(m,r,n);}),tm.forEach(function(r){Q(m,n,r);});var g=function(n,r,u,f,p){var m,g,v,x,E,S,A,C,O,R,P,I,L=n.static,N=n.dynamic;w.optional(function(){var n=[e7,e9,te,tt,tn,ti,tr,ta,e8,"vao"].concat(T);function r(r){Object.keys(r).forEach(function(r){w.command(n.indexOf(r)>=0,'unknown parameter "'+r+'"',p.commandStr);});}r(L),r(N);});var D=function(n,r){var i=n.static;if("string"==typeof i[te]&&"string"==typeof i[e9]){if(Object.keys(r.dynamic).length>0)return null;var a=r.static,o=Object.keys(a);if(o.length>0&&"number"==typeof a[o[0]]){for(var s=[],l=0;l<o.length;++l)w("number"==typeof a[o[l]],"must specify all vertex attribute locations when using vaos"),s.push([0|a[o[l]],o[l]]);return s;}}return null;}(n,r),F=function(n,r){var i=n.static,a=n.dynamic;if(e7 in i){var o=i[e7];return o?(o=c.getFramebuffer(o),w.command(o,"invalid framebuffer object"),tA(function(n,r){var i=n.link(o),a=n.shared;r.set(a.framebuffer,".next",i);var s=a.context;return r.set(s,"."+tl,i+".width"),r.set(s,"."+tu,i+".height"),i;})):tA(function(n,r){var i=n.shared;r.set(i.framebuffer,".next","null");var a=i.context;return r.set(a,"."+tl,a+"."+th),r.set(a,"."+tu,a+"."+tp),"null";});}if(!(e7 in a))return null;var s=a[e7];return tC(s,function(n,r){var i=n.invoke(r,s),a=n.shared,o=a.framebuffer,l=r.def(o,".getFramebuffer(",i,")");w.optional(function(){n.assert(r,"!"+i+"||"+l,"invalid framebuffer object");}),r.set(o,".next",l);var u=a.context;return r.set(u,"."+tl,l+"?"+l+".width:"+u+"."+th),r.set(u,"."+tu,l+"?"+l+".height:"+u+"."+tp),l;});}(n,0),B=function(n,r,i){var a=n.static,o=n.dynamic;function s(n){if(n in a){var s,l,u=a[n];w.commandType(u,"object","invalid "+n,i.commandStr);var c=!0,f=0|u.x,d=0|u.y;return"width"in u?(s=0|u.width,w.command(s>=0,"invalid "+n,i.commandStr)):c=!1,"height"in u?(l=0|u.height,w.command(l>=0,"invalid "+n,i.commandStr)):c=!1,new tS(!c&&r&&r.thisDep,!c&&r&&r.contextDep,!c&&r&&r.propDep,function(n,r){var i=n.shared.context,a=s;"width"in u||(a=r.def(i,".",tl,"-",f));var o=l;return"height"in u||(o=r.def(i,".",tu,"-",d)),[f,d,a,o];});}if(n in o){var h=o[n],p=tC(h,function(r,i){var a=r.invoke(i,h);w.optional(function(){r.assert(i,a+"&&typeof "+a+'==="object"',"invalid "+n);});var o=r.shared.context,s=i.def(a,".x|0"),l=i.def(a,".y|0"),u=i.def('"width" in ',a,"?",a,".width|0:","(",o,".",tl,"-",s,")"),c=i.def('"height" in ',a,"?",a,".height|0:","(",o,".",tu,"-",l,")");return w.optional(function(){r.assert(i,u+">=0&&"+c+">=0","invalid "+n);}),[s,l,u,c];});return r&&(p.thisDep=p.thisDep||r.thisDep,p.contextDep=p.contextDep||r.contextDep,p.propDep=p.propDep||r.propDep),p;}return r?new tS(r.thisDep,r.contextDep,r.propDep,function(n,r){var i=n.shared.context;return[0,0,r.def(i,".",tl),r.def(i,".",tu)];}):null;}var l=s(e6);if(l){var u=l;l=new tS(l.thisDep,l.contextDep,l.propDep,function(n,r){var i=u.append(n,r),a=n.shared.context;return r.set(a,"."+tc,i[2]),r.set(a,"."+tf,i[3]),i;});}return{viewport:l,scissor_box:s(e5)};}(n,F,p),j=function(n,r){var i=n.static,a=n.dynamic,o=function(){if(tt in i){var n=i[tt];tE(n)?n=l.getElements(l.create(n,!0)):n&&(n=l.getElements(n),w.command(n,"invalid elements",r.commandStr));var o=tA(function(r,i){if(n){var a=r.link(n);return r.ELEMENTS=a,a;}return r.ELEMENTS=null,null;});return o.value=n,o;}if(tt in a){var s=a[tt];return tC(s,function(n,r){var i=n.shared,a=i.isBufferArgs,o=i.elements,l=n.invoke(r,s),u=r.def("null"),c=r.def(a,"(",l,")"),f=n.cond(c).then(u,"=",o,".createStream(",l,");").else(u,"=",o,".getElements(",l,");");return w.optional(function(){n.assert(f.else,"!"+l+"||"+u,"invalid elements");}),r.entry(f),r.exit(n.cond(c).then(o,".destroyStream(",u,");")),n.ELEMENTS=u,u;});}return null;}();function s(n,s){if(n in i){var l=0|i[n];return w.command(!s||l>=0,"invalid "+n,r.commandStr),tA(function(n,r){return s&&(n.OFFSET=l),l;});}if(n in a){var u=a[n];return tC(u,function(r,i){var a=r.invoke(i,u);return s&&(r.OFFSET=a,w.optional(function(){r.assert(i,a+">=0","invalid "+n);})),a;});}return s&&o?tA(function(n,r){return n.OFFSET="0",0;}):null;}var u=s(ti,!0);return{elements:o,primitive:function(){if(tn in i){var n=i[tn];return w.commandParameter(n,Z,"invalid primitve",r.commandStr),tA(function(r,i){return Z[n];});}if(tn in a){var s=a[tn];return tC(s,function(n,r){var i=n.constants.primTypes,a=n.invoke(r,s);return w.optional(function(){n.assert(r,a+" in "+i,"invalid primitive, must be one of "+Object.keys(Z));}),r.def(i,"[",a,"]");});}return o?tT(o)?o.value?tA(function(n,r){return r.def(n.ELEMENTS,".primType");}):tA(function(){return 4;}):new tS(o.thisDep,o.contextDep,o.propDep,function(n,r){var i=n.ELEMENTS;return r.def(i,"?",i,".primType:",4);}):null;}(),count:function(){if(tr in i){var n=0|i[tr];return w.command("number"==typeof n&&n>=0,"invalid vertex count",r.commandStr),tA(function(){return n;});}if(tr in a){var s=a[tr];return tC(s,function(n,r){var i=n.invoke(r,s);return w.optional(function(){n.assert(r,"typeof "+i+'==="number"&&'+i+">=0&&"+i+"===("+i+"|0)","invalid vertex count");}),i;});}if(o){if(tT(o)){if(o)return u?new tS(u.thisDep,u.contextDep,u.propDep,function(n,r){var i=r.def(n.ELEMENTS,".vertCount-",n.OFFSET);return w.optional(function(){n.assert(r,i+">=0","invalid vertex offset/element buffer too small");}),i;}):tA(function(n,r){return r.def(n.ELEMENTS,".vertCount");});var l=tA(function(){return -1;});return w.optional(function(){l.MISSING=!0;}),l;}var c=new tS(o.thisDep||u.thisDep,o.contextDep||u.contextDep,o.propDep||u.propDep,function(n,r){var i=n.ELEMENTS;return n.OFFSET?r.def(i,"?",i,".vertCount-",n.OFFSET,":-1"):r.def(i,"?",i,".vertCount:-1");});return w.optional(function(){c.DYNAMIC=!0;}),c;}return null;}(),instances:s(ta,!1),offset:u};}(n,p),z=(m=n.static,g=n.dynamic,v={},T.forEach(function(n){var r=M(n);function i(i,a){if(n in m){var o=i(m[n]);v[r]=tA(function(){return o;});}else if(n in g){var s=g[n];v[r]=tC(s,function(n,r){return a(n,r,n.invoke(r,s));});}}switch(n){case eH:case eN:case eL:case eJ:case ej:case e4:case e$:case eZ:case eK:case eV:return i(function(r){return w.commandType(r,"boolean",n,p.commandStr),r;},function(r,i,a){return w.optional(function(){r.assert(i,"typeof "+a+'==="boolean"',"invalid flag "+n,r.commandStr);}),a;});case ez:return i(function(r){return w.commandParameter(r,ty,"invalid "+n,p.commandStr),ty[r];},function(r,i,a){var o=r.constants.compareFuncs;return w.optional(function(){r.assert(i,a+" in "+o,"invalid "+n+", must be one of "+Object.keys(ty));}),i.def(o,"[",a,"]");});case eU:return i(function(n){return w.command(ee(n)&&2===n.length&&"number"==typeof n[0]&&"number"==typeof n[1]&&n[0]<=n[1],"depth range is 2d array",p.commandStr),n;},function(n,r,i){return w.optional(function(){n.assert(r,n.shared.isArrayLike+"("+i+")&&"+i+".length===2&&typeof "+i+'[0]==="number"&&typeof '+i+'[1]==="number"&&'+i+"[0]<="+i+"[1]","depth range must be a 2d array");}),[r.def("+",i,"[0]"),r.def("+",i,"[1]")];});case eB:return i(function(n){w.commandType(n,"object","blend.func",p.commandStr);var i="srcRGB"in n?n.srcRGB:n.src,a="srcAlpha"in n?n.srcAlpha:n.src,o="dstRGB"in n?n.dstRGB:n.dst,s="dstAlpha"in n?n.dstAlpha:n.dst;return w.commandParameter(i,tg,r+".srcRGB",p.commandStr),w.commandParameter(a,tg,r+".srcAlpha",p.commandStr),w.commandParameter(o,tg,r+".dstRGB",p.commandStr),w.commandParameter(s,tg,r+".dstAlpha",p.commandStr),w.command(-1===tv.indexOf(i+", "+o),"unallowed blending combination (srcRGB, dstRGB) = ("+i+", "+o+")",p.commandStr),[tg[i],tg[o],tg[a],tg[s]];},function(r,i,a){var o=r.constants.blendFuncs;function s(s,l){var u=i.def('"',s,l,'" in ',a,"?",a,".",s,l,":",a,".",s);return w.optional(function(){r.assert(i,u+" in "+o,"invalid "+n+"."+s+l+", must be one of "+Object.keys(tg));}),u;}w.optional(function(){r.assert(i,a+"&&typeof "+a+'==="object"',"invalid blend func, must be an object");});var l=s("src","RGB"),u=s("dst","RGB");w.optional(function(){var n=r.constants.invalidBlendCombinations;r.assert(i,n+".indexOf("+l+'+", "+'+u+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)");});var c=i.def(o,"[",l,"]"),f=i.def(o,"[",s("src","Alpha"),"]");return[c,i.def(o,"[",u,"]"),f,i.def(o,"[",s("dst","Alpha"),"]")];});case eF:return i(function(r){return"string"==typeof r?(w.commandParameter(r,_,"invalid "+n,p.commandStr),[_[r],_[r]]):"object"==typeof r?(w.commandParameter(r.rgb,_,n+".rgb",p.commandStr),w.commandParameter(r.alpha,_,n+".alpha",p.commandStr),[_[r.rgb],_[r.alpha]]):void w.commandRaise("invalid blend.equation",p.commandStr);},function(r,i,a){var o=r.constants.blendEquations,s=i.def(),l=i.def(),u=r.cond("typeof ",a,'==="string"');return w.optional(function(){function i(n,i,a){r.assert(n,a+" in "+o,"invalid "+i+", must be one of "+Object.keys(_));}i(u.then,n,a),r.assert(u.else,a+"&&typeof "+a+'==="object"',"invalid "+n),i(u.else,n+".rgb",a+".rgb"),i(u.else,n+".alpha",a+".alpha");}),u.then(s,"=",l,"=",o,"[",a,"];"),u.else(s,"=",o,"[",a,".rgb];",l,"=",o,"[",a,".alpha];"),i(u),[s,l];});case eD:return i(function(n){return w.command(ee(n)&&4===n.length,"blend.color must be a 4d array",p.commandStr),k(4,function(r){return+n[r];});},function(n,r,i){return w.optional(function(){n.assert(r,n.shared.isArrayLike+"("+i+")&&"+i+".length===4","blend.color must be a 4d array");}),k(4,function(n){return r.def("+",i,"[",n,"]");});});case e0:return i(function(n){return w.commandType(n,"number",r,p.commandStr),0|n;},function(n,r,i){return w.optional(function(){n.assert(r,"typeof "+i+'==="number"',"invalid stencil.mask");}),r.def(i,"|0");});case e1:return i(function(i){w.commandType(i,"object",r,p.commandStr);var a=i.cmp||"keep",o=i.ref||0,s="mask"in i?i.mask:-1;return w.commandParameter(a,ty,n+".cmp",p.commandStr),w.commandType(o,"number",n+".ref",p.commandStr),w.commandType(s,"number",n+".mask",p.commandStr),[ty[a],o,s];},function(n,r,i){var a=n.constants.compareFuncs;return w.optional(function(){function o(){n.assert(r,Array.prototype.join.call(arguments,""),"invalid stencil.func");}o(i+"&&typeof ",i,'==="object"'),o('!("cmp" in ',i,")||(",i,".cmp in ",a,")");}),[r.def('"cmp" in ',i,"?",a,"[",i,".cmp]",":",7680),r.def(i,".ref|0"),r.def('"mask" in ',i,"?",i,".mask|0:-1")];});case e2:case e3:return i(function(i){w.commandType(i,"object",r,p.commandStr);var a=i.fail||"keep",o=i.zfail||"keep",s=i.zpass||"keep";return w.commandParameter(a,t_,n+".fail",p.commandStr),w.commandParameter(o,t_,n+".zfail",p.commandStr),w.commandParameter(s,t_,n+".zpass",p.commandStr),[n===e3?1029:1028,t_[a],t_[o],t_[s]];},function(r,i,a){var o=r.constants.stencilOps;function s(s){return w.optional(function(){r.assert(i,'!("'+s+'" in '+a+")||("+a+"."+s+" in "+o+")","invalid "+n+"."+s+", must be one of "+Object.keys(t_));}),i.def('"',s,'" in ',a,"?",o,"[",a,".",s,"]:",7680);}return w.optional(function(){r.assert(i,a+"&&typeof "+a+'==="object"',"invalid "+n);}),[n===e3?1029:1028,s("fail"),s("zfail"),s("zpass")];});case eY:return i(function(n){w.commandType(n,"object",r,p.commandStr);var i=0|n.factor,a=0|n.units;return w.commandType(i,"number",r+".factor",p.commandStr),w.commandType(a,"number",r+".units",p.commandStr),[i,a];},function(r,i,a){return w.optional(function(){r.assert(i,a+"&&typeof "+a+'==="object"',"invalid "+n);}),[i.def(a,".factor|0"),i.def(a,".units|0")];});case eW:return i(function(n){var i=0;return"front"===n?i=1028:"back"===n&&(i=1029),w.command(!!i,r,p.commandStr),i;},function(n,r,i){return w.optional(function(){n.assert(r,i+'==="front"||'+i+'==="back"',"invalid cull.face");}),r.def(i,'==="front"?',1028,":",1029);});case eq:return i(function(n){return w.command("number"==typeof n&&n>=o.lineWidthDims[0]&&n<=o.lineWidthDims[1],"invalid line width, must be a positive number between "+o.lineWidthDims[0]+" and "+o.lineWidthDims[1],p.commandStr),n;},function(n,r,i){return w.optional(function(){n.assert(r,"typeof "+i+'==="number"&&'+i+">="+o.lineWidthDims[0]+"&&"+i+"<="+o.lineWidthDims[1],"invalid line width");}),i;});case eX:return i(function(n){return w.commandParameter(n,tx,r,p.commandStr),tx[n];},function(n,r,i){return w.optional(function(){n.assert(r,i+'==="cw"||'+i+'==="ccw"',"invalid frontFace, must be one of cw,ccw");}),r.def(i+'==="cw"?2304:2305');});case eG:return i(function(n){return w.command(ee(n)&&4===n.length,"color.mask must be length 4 array",p.commandStr),n.map(function(n){return!!n;});},function(n,r,i){return w.optional(function(){n.assert(r,n.shared.isArrayLike+"("+i+")&&"+i+".length===4","invalid color.mask");}),k(4,function(n){return"!!"+i+"["+n+"]";});});case eQ:return i(function(n){w.command("object"==typeof n&&n,r,p.commandStr);var i="value"in n?n.value:1,a=!!n.invert;return w.command("number"==typeof i&&i>=0&&i<=1,"sample.coverage.value must be a number between 0 and 1",p.commandStr),[i,a];},function(n,r,i){return w.optional(function(){n.assert(r,i+"&&typeof "+i+'==="object"',"invalid sample.coverage");}),[r.def('"value" in ',i,"?+",i,".value:1"),r.def("!!",i,".invert")];});}}),v),U=function(n,r,a){var o,s=n.static,l=n.dynamic;function u(n){if(n in s){var r=i.id(s[n]);w.optional(function(){h.shader(tb[n],r,w.guessCommand());});var a=tA(function(){return r;});return a.id=r,a;}if(n in l){var o=l[n];return tC(o,function(r,i){var a=r.invoke(i,o),s=i.def(r.shared.strings,".id(",a,")");return w.optional(function(){i(r.shared.shader,".shader(",tb[n],",",s,",",r.command,");");}),s;});}return null;}var c=u(te),f=u(e9),d=null;return tT(c)&&tT(f)?(d=h.program(f.id,c.id,null,a),o=tA(function(n,r){return n.link(d);})):o=new tS(c&&c.thisDep||f&&f.thisDep,c&&c.contextDep||f&&f.contextDep,c&&c.propDep||f&&f.propDep,function(n,r){var i,a,o=n.shared.shader;i=c?c.append(n,r):r.def(o,".",te),a=f?f.append(n,r):r.def(o,".",e9);var s=o+".program("+a+","+i;return w.optional(function(){s+=","+n.command;}),r.def(s+")");}),{frag:c,vert:f,progVar:o,program:d};}(n,0,D);function G(n){var r=B[n];r&&(z[n]=r);}G(e6),G(M(e5));var H=Object.keys(z).length>0,W={framebuffer:F,draw:j,shader:U,state:z,dirty:H,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(W.profile=function(n){var r,i=n.static,a=n.dynamic;if(e8 in i){var o=!!i[e8];(r=tA(function(n,r){return o;})).enable=o;}else if(e8 in a){var s=a[e8];r=tC(s,function(n,r){return n.invoke(r,s);});}return r;}(n,p),W.uniforms=(x=u.static,E=u.dynamic,S={},Object.keys(x).forEach(function(n){var r,i=x[n];if("number"==typeof i||"boolean"==typeof i)r=tA(function(){return i;});else if("function"==typeof i){var a=i._reglType;"texture2d"===a||"textureCube"===a?r=tA(function(n){return n.link(i);}):"framebuffer"===a||"framebufferCube"===a?(w.command(i.color.length>0,'missing color attachment for framebuffer sent to uniform "'+n+'"',p.commandStr),r=tA(function(n){return n.link(i.color[0]);})):w.commandRaise('invalid data for uniform "'+n+'"',p.commandStr);}else ee(i)?r=tA(function(r){return r.global.def("[",k(i.length,function(a){return w.command("number"==typeof i[a]||"boolean"==typeof i[a],"invalid uniform "+n,r.commandStr),i[a];}),"]");}):w.commandRaise('invalid or missing data for uniform "'+n+'"',p.commandStr);r.value=i,S[n]=r;}),Object.keys(E).forEach(function(n){var r=E[n];S[n]=tC(r,function(n,i){return n.invoke(i,r);});}),S),W.drawVAO=W.scopeVAO=function(n,r){var i=n.static,a=n.dynamic;if("vao"in i){var o=i.vao;return null!==o&&null===d.getVAO(o)&&(o=d.createVAO(o)),tA(function(n){return n.link(d.getVAO(o));});}if("vao"in a){var s=a.vao;return tC(s,function(n,r){var i=n.invoke(r,s);return r.def(n.shared.vao+".getVAO("+i+")");});}return null;}(n,0),!W.drawVAO&&U.program&&!D&&a.angle_instanced_arrays){var X=!0,q=U.program.attributes.map(function(n){var i=r.static[n];return X=X&&!!i,i;});if(X&&q.length>0){var $=d.getVAO(d.createVAO(q));W.drawVAO=new tS(null,null,null,function(n,r){return n.link($);}),W.useVAO=!0;}}return D?W.useVAO=!0:W.attributes=(A=r.static,C=r.dynamic,O={},Object.keys(A).forEach(function(n){var r=A[n],a=i.id(n),o=new y;if(tE(r))o.state=1,o.buffer=s.getBuffer(s.create(r,34962,!1,!0)),o.type=0;else{var l=s.getBuffer(r);if(l)o.state=1,o.buffer=l,o.type=0;else if(w.command("object"==typeof r&&r,"invalid data for attribute "+n,p.commandStr),"constant"in r){var u=r.constant;o.buffer="null",o.state=2,"number"==typeof u?o.x=u:(w.command(ee(u)&&u.length>0&&u.length<=4,"invalid constant for attribute "+n,p.commandStr),eI.forEach(function(n,r){r<u.length&&(o[n]=u[r]);}));}else{l=tE(r.buffer)?s.getBuffer(s.create(r.buffer,34962,!1,!0)):s.getBuffer(r.buffer),w.command(!!l,'missing buffer for attribute "'+n+'"',p.commandStr);var c=0|r.offset;w.command(c>=0,'invalid offset for attribute "'+n+'"',p.commandStr);var f=0|r.stride;w.command(f>=0&&f<256,'invalid stride for attribute "'+n+'", must be integer betweeen [0, 255]',p.commandStr);var d=0|r.size;w.command(!("size"in r)||d>0&&d<=4,'invalid size for attribute "'+n+'", must be 1,2,3,4',p.commandStr);var h=!!r.normalized,m=0;"type"in r&&(w.commandParameter(r.type,V,"invalid type for attribute "+n,p.commandStr),m=V[r.type]);var g=0|r.divisor;"divisor"in r&&(w.command(0===g||b,'cannot specify divisor for attribute "'+n+'", instancing not supported',p.commandStr),w.command(g>=0,'invalid divisor for attribute "'+n+'"',p.commandStr)),w.optional(function(){var i=p.commandStr,a=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(r).forEach(function(r){w.command(a.indexOf(r)>=0,'unknown parameter "'+r+'" for attribute pointer "'+n+'" (valid parameters are '+a+")",i);});}),o.buffer=l,o.state=1,o.size=d,o.normalized=h,o.type=m||l.dtype,o.offset=c,o.stride=f,o.divisor=g;}}O[n]=tA(function(n,r){var i=n.attribCache;if(a in i)return i[a];var s={isStream:!1};return Object.keys(o).forEach(function(n){s[n]=o[n];}),o.buffer&&(s.buffer=n.link(o.buffer),s.type=s.type||s.buffer+".dtype"),i[a]=s,s;});}),Object.keys(C).forEach(function(n){var r=C[n];O[n]=tC(r,function(i,a){var o=i.invoke(a,r),s=i.shared,l=i.constants,u=s.isBufferArgs,c=s.buffer;w.optional(function(){i.assert(a,o+"&&(typeof "+o+'==="object"||typeof '+o+'==="function")&&('+u+"("+o+")||"+c+".getBuffer("+o+")||"+c+".getBuffer("+o+".buffer)||"+u+"("+o+'.buffer)||("constant" in '+o+"&&(typeof "+o+'.constant==="number"||'+s.isArrayLike+"("+o+".constant))))",'invalid dynamic attribute "'+n+'"');});var f={isStream:a.def(!1)},d=new y;d.state=1,Object.keys(d).forEach(function(n){f[n]=a.def(""+d[n]);});var h=f.buffer,p=f.type;function m(n){a(f[n],"=",o,".",n,"|0;");}return a("if(",u,"(",o,")){",f.isStream,"=true;",h,"=",c,".createStream(",34962,",",o,");",p,"=",h,".dtype;","}else{",h,"=",c,".getBuffer(",o,");","if(",h,"){",p,"=",h,".dtype;",'}else if("constant" in ',o,"){",f.state,"=",2,";","if(typeof "+o+'.constant === "number"){',f[eI[0]],"=",o,".constant;",eI.slice(1).map(function(n){return f[n];}).join("="),"=0;","}else{",eI.map(function(n,r){return f[n]+"="+o+".constant.length>"+r+"?"+o+".constant["+r+"]:0;";}).join(""),"}}else{","if(",u,"(",o,".buffer)){",h,"=",c,".createStream(",34962,",",o,".buffer);","}else{",h,"=",c,".getBuffer(",o,".buffer);","}",p,'="type" in ',o,"?",l.glTypes,"[",o,".type]:",h,".dtype;",f.normalized,"=!!",o,".normalized;"),m("size"),m("offset"),m("stride"),m("divisor"),a("}}"),a.exit("if(",f.isStream,"){",c,".destroyStream(",h,");","}"),f;});}),O),W.context=(R=f.static,P=f.dynamic,I={},Object.keys(R).forEach(function(n){var r=R[n];I[n]=tA(function(n,i){return"number"==typeof r||"boolean"==typeof r?""+r:n.link(r);});}),Object.keys(P).forEach(function(n){var r=P[n];I[n]=tC(r,function(n,i){return n.invoke(i,r);});}),I),W;}(n,r,u,f,m);return function(n,r){var i=n.proc("draw",1);U(n,i),F(n,i,r.context),B(n,i,r.framebuffer),j(n,i,r),z(n,i,r.state),G(n,i,r,!1,!0);var a=r.shader.progVar.append(n,i);if(i(n.shared.gl,".useProgram(",a,".program);"),r.shader.program)$(n,i,r,r.shader.program);else{i(n.shared.vao,".setVAO(null);");var o=n.global.def("{}"),s=i.def(a,".id"),l=i.def(o,"[",s,"]");i(n.cond(l).then(l,".call(this,a0);").else(l,"=",o,"[",s,"]=",n.link(function(i){return q($,n,r,i,1);}),"(",a,");",l,".call(this,a0);"));}Object.keys(r.state).length>0&&i(n.shared.current,".dirty=true;");}(m,g),function(n,r){var a=n.proc("scope",3);n.batchId="a2";var o=n.shared,s=o.current;function l(i){var s=r.shader[i];s&&a.set(o.shader,"."+i,s.append(n,a));}F(n,a,r.context),r.framebuffer&&r.framebuffer.append(n,a),tw(Object.keys(r.state)).forEach(function(i){var s=r.state[i].append(n,a);ee(s)?s.forEach(function(r,o){a.set(n.next[i],"["+o+"]",r);}):a.set(o.next,"."+i,s);}),G(n,a,r,!0,!0),[tt,ti,tr,ta,tn].forEach(function(i){var s=r.draw[i];s&&a.set(o.draw,"."+i,""+s.append(n,a));}),Object.keys(r.uniforms).forEach(function(s){a.set(o.uniforms,"["+i.id(s)+"]",r.uniforms[s].append(n,a));}),Object.keys(r.attributes).forEach(function(i){var o=r.attributes[i].append(n,a),s=n.scopeAttrib(i);Object.keys(new y).forEach(function(n){a.set(s,"."+n,o[n]);});}),r.scopeVAO&&a.set(o.vao,".targetVAO",r.scopeVAO.append(n,a)),l(e9),l(te),Object.keys(r.state).length>0&&(a(s,".dirty=true;"),a.exit(s,".dirty=true;")),a("a1(",n.shared.context,",a0,",n.batchId,");");}(m,g),function(n,r){var i=n.proc("batch",2);n.batchId="0",U(n,i);var a=!1,o=!0;Object.keys(r.context).forEach(function(n){a=a||r.context[n].propDep;}),a||(F(n,i,r.context),o=!1);var s=r.framebuffer,l=!1;function u(n){return n.contextDep&&a||n.propDep;}s?(s.propDep?a=l=!0:s.contextDep&&a&&(l=!0),l||B(n,i,s)):B(n,i,null),r.state.viewport&&r.state.viewport.propDep&&(a=!0),j(n,i,r),z(n,i,r.state,function(n){return!u(n);}),r.profile&&u(r.profile)||G(n,i,r,!1,"a1"),r.contextDep=a,r.needsContext=o,r.needsFramebuffer=l;var c=r.shader.progVar;if(c.contextDep&&a||c.propDep)K(n,i,r,null);else{var f=c.append(n,i);if(i(n.shared.gl,".useProgram(",f,".program);"),r.shader.program)K(n,i,r,r.shader.program);else{i(n.shared.vao,".setVAO(null);");var d=n.global.def("{}"),h=i.def(f,".id"),p=i.def(d,"[",h,"]");i(n.cond(p).then(p,".call(this,a0,a1);").else(p,"=",d,"[",h,"]=",n.link(function(i){return q(K,n,r,i,2);}),"(",f,");",p,".call(this,a0,a1);"));}}Object.keys(r.state).length>0&&i(n.shared.current,".dirty=true;");}(m,g),m.compile();}};}(l,d,p,b,x,S,0,L,{},E,T,{elements:null,primitive:4,count:-1,offset:0,instances:-1},_,m,s),U=function(r,i,a,o,s,l,u){function c(c){null===i.next?(w(s.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),f=5121):(w(null!==i.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),f=i.next.colorAttachments[0].texture._texture.type,l.oes_texture_float?(w(5121===f||5126===f,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===f&&w(u.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):w(5121===f,"Reading from a framebuffer is only allowed for the type 'uint8'"));var f,d=0,h=0,p=o.framebufferWidth,m=o.framebufferHeight,g=null;n(c)?g=c:c&&(w.type(c,"object","invalid arguments to regl.read()"),d=0|c.x,h=0|c.y,w(d>=0&&d<o.framebufferWidth,"invalid x offset for regl.read"),w(h>=0&&h<o.framebufferHeight,"invalid y offset for regl.read"),p=0|(c.width||o.framebufferWidth-d),m=0|(c.height||o.framebufferHeight-h),g=c.data||null),g&&(5121===f?w(g instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===f&&w(g instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),w(p>0&&p+d<=o.framebufferWidth,"invalid width for read pixels"),w(m>0&&m+h<=o.framebufferHeight,"invalid height for read pixels"),a();var v=p*m*4;return g||(5121===f?g=new Uint8Array(v):5126===f&&(g=g||new Float32Array(v))),w.isTypedArray(g,"data buffer for regl.read() must be a typedarray"),w(g.byteLength>=v,"data buffer for regl.read() too small"),r.pixelStorei(3333,4),r.readPixels(d,h,p,m,6408,f,g),g;}return function(n){var r;return n&&"framebuffer"in n?(i.setFBO({framebuffer:n.framebuffer},function(){r=c(n);}),r):c(n);};}(l,L,z.procs.poll,_,u,p,b),K=z.next,Q=l.canvas,ea=[],ed=[],eh=[],ep=[s.onDestroy],ew=null;function to(){if(0===ea.length){m&&m.update(),ew=null;return;}ew=O.next(to),tz();for(var n=ea.length-1;n>=0;--n){var r=ea[n];r&&r(_,null,0);}l.flush(),m&&m.update();}function ts(){!ew&&ea.length>0&&(ew=O.next(to));}function td(){ew&&(O.cancel(to),ew=null);}function tI(n){n.preventDefault(),c=!0,td(),ed.forEach(function(n){n();});}function tL(n){l.getError(),c=!1,f.restore(),T.restore(),x.restore(),A.restore(),I.restore(),L.restore(),E.restore(),m&&m.restore(),z.procs.refresh(),ts(),eh.forEach(function(n){n();});}function tN(n){function i(n){var r={},i={};return Object.keys(n).forEach(function(a){var o=n[a];C.isDynamic(o)?i[a]=C.unbox(o,a):r[a]=o;}),{dynamic:i,static:r};}w(!!n,"invalid args to regl({...})"),w.type(n,"object","invalid args to regl({...})");var a=i(n.context||{}),o=i(n.uniforms||{}),s=i(n.attributes||{}),l=i(function(n){var i=r({},n);function a(n){if(n in i){var r=i[n];delete i[n],Object.keys(r).forEach(function(a){i[n+"."+a]=r[a];});}}return delete i.uniforms,delete i.attributes,delete i.context,delete i.vao,"stencil"in i&&i.stencil.op&&(i.stencil.opBack=i.stencil.opFront=i.stencil.op,delete i.stencil.op),a("blend"),a("depth"),a("cull"),a("stencil"),a("polygonOffset"),a("scissor"),a("sample"),"vao"in n&&(i.vao=n.vao),i;}(n)),u={gpuTime:0,cpuTime:0,count:0},f=z.compile(l,s,o,a,u),d=f.draw,h=f.batch,p=f.scope,m=[];return r(function(n,r){var i;if(c&&w.raise("context lost"),"function"==typeof n)return p.call(this,null,n,0);if("function"==typeof r){if("number"==typeof n)for(i=0;i<n;++i)p.call(this,null,r,i);else if(!Array.isArray(n))return p.call(this,n,r,0);else for(i=0;i<n.length;++i)p.call(this,n[i],r,i);}else if("number"==typeof n){if(n>0)return h.call(this,function(n){for(;m.length<n;)m.push(null);return m;}(0|n),0|n);}else if(!Array.isArray(n))return d.call(this,n);else if(n.length)return h.call(this,n,n.length);},{stats:u});}Q&&(Q.addEventListener(tR,tI,!1),Q.addEventListener(tP,tL,!1));var tD=L.setFBO=tN({framebuffer:C.define.call(null,1,"framebuffer")});function tF(n,r){var i=0;z.procs.poll();var a=r.color;a&&(l.clearColor(+a[0]||0,+a[1]||0,+a[2]||0,+a[3]||0),i|=16384),"depth"in r&&(l.clearDepth(+r.depth),i|=256),"stencil"in r&&(l.clearStencil(0|r.stencil),i|=1024),w(!!i,"called regl.clear with no buffer specified"),l.clear(i);}function tB(n){return w.type(n,"function","regl.frame() callback must be a function"),ea.push(n),ts(),{cancel:function(){var r=tk(ea,n);w(r>=0,"cannot cancel a frame twice"),ea[r]=function n(){var r=tk(ea,n);ea[r]=ea[ea.length-1],ea.length-=1,ea.length<=0&&td();};}};}function tj(){var n=K.viewport,r=K.scissor_box;n[0]=n[1]=r[0]=r[1]=0,_.viewportWidth=_.framebufferWidth=_.drawingBufferWidth=n[2]=r[2]=l.drawingBufferWidth,_.viewportHeight=_.framebufferHeight=_.drawingBufferHeight=n[3]=r[3]=l.drawingBufferHeight;}function tz(){_.tick+=1,_.time=tV(),tj(),z.procs.poll();}function tU(){tj(),z.procs.refresh(),m&&m.update();}function tV(){return(M()-g)/1e3;}tU();var tG=r(tN,{clear:function(n){if(w("object"==typeof n&&n,"regl.clear() takes an object as input"),"framebuffer"in n){if(n.framebuffer&&"framebufferCube"===n.framebuffer_reglType)for(var i=0;i<6;++i)tD(r({framebuffer:n.framebuffer.faces[i]},n),tF);else tD(n,tF);}else tF(null,n);},prop:C.define.bind(null,1),context:C.define.bind(null,2),this:C.define.bind(null,3),draw:tN({}),buffer:function(n){return x.create(n,34962,!1,!1);},elements:function(n){return S.create(n,!1);},texture:A.create2D,cube:A.createCube,renderbuffer:I.create,framebuffer:L.create,framebufferCube:L.createCube,vao:E.createVAO,attributes:u,frame:tB,on:function(n,r){var i;switch(w.type(r,"function","listener callback must be a function"),n){case"frame":return tB(r);case"lost":i=ed;break;case"restore":i=eh;break;case"destroy":i=ep;break;default:w.raise("invalid event, must be one of frame,lost,restore,destroy");}return i.push(r),{cancel:function(){for(var n=0;n<i.length;++n)if(i[n]===r){i[n]=i[i.length-1],i.pop();return;}}};},limits:b,hasExtension:function(n){return b.extensions.indexOf(n.toLowerCase())>=0;},read:U,destroy:function(){ea.length=0,td(),Q&&(Q.removeEventListener(tR,tI),Q.removeEventListener(tP,tL)),T.clear(),L.clear(),I.clear(),A.clear(),S.clear(),x.clear(),E.clear(),m&&m.clear(),ep.forEach(function(n){n();});},_gl:l,_refresh:tU,poll:function(){tz(),m&&m.update();},now:tV,stats:h});return s.onDone(null,tG),tG;};},"object"==typeof r&&void 0!==n?n.exports=a():this.createREGL=a();},"858d251b":function(n,r,i){"use strict";function a(n){return"object"==typeof n&&"length"in n?n:Array.from(n);}function o(n,r){let i=n.length,a,o;for(;i;)o=r()*i--|0,a=n[i],n[i]=n[o],n[o]=a;return n;}i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return a;},shuffle:function(){return o;}});},"85ac25f0":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return y;},getCellProps:function(){return v;}});var a=i("777fffbe"),o=i("852bbaa9"),s=a._(i("7cfeda15")),l=a._(i("e4870cf0")),u=a._(i("a854094b")),c=a._(i("064ecd09")),f=o._(i("609f48be")),d=a._(i("801e414d")),h=i("c98516ca");i("8e17111c");var p=a._(i("bf8df361")),m=a._(i("bea18af3")),g=i("22aea40b");function v(n,r,i,a,o){var s,l,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,d=n.record,h=n.prefixCls,p=n.columnsKey,m=n.fixedInfoList,g=n.expandIconColumnIndex,v=n.nestExpandable,y=n.indentSize,_=n.expandIcon,b=n.expanded,x=n.hasNestChildren,E=n.onTriggerExpand,w=n.expandable,S=n.expandedKeys,T=p[i],A=m[i];i===(g||0)&&v&&(l=f.createElement(f.Fragment,null,f.createElement("span",{style:{paddingLeft:"".concat(y*a,"px")},className:"".concat(h,"-row-indent indent-level-").concat(a)}),_({prefixCls:h,expanded:b,expandable:x,record:d,onExpand:E})));var C=(null===(s=r.onCell)||void 0===s?void 0:s.call(r,d,o))||{};if(c){var O=C.rowSpan,M=void 0===O?1:O;if(w&&M&&i<c){for(var R=M,P=o;P<o+M;P+=1){var k=u[P];S.has(k)&&(R+=1);}C.rowSpan=R;}}return{key:T,fixedInfo:A,appendCellNode:l,additionalCellProps:C};}var y=(0,h.responseImmutable)(function(n){var r,i=n.className,a=n.style,o=n.record,h=n.index,y=n.renderIndex,_=n.rowKey,b=n.rowKeys,x=n.indent,E=void 0===x?0:x,w=n.rowComponent,S=n.cellComponent,T=n.scopeCellComponent,A=n.expandedRowInfo,C=(0,p.default)(o,_,h,E),O=C.prefixCls,M=C.flattenColumns,R=C.expandedRowClassName,P=C.expandedRowRender,k=C.rowProps,I=C.expanded,L=C.rowSupportExpand,N=f.useRef(!1);N.current||(N.current=I);var D=(0,g.computedExpandedClassName)(R,o,h,E),F=f.createElement(w,(0,s.default)({},k,{"data-row-key":_,className:(0,c.default)(i,"".concat(O,"-row"),"".concat(O,"-row-level-").concat(E),null==k?void 0:k.className,(0,u.default)({},D,E>=1)),style:(0,l.default)((0,l.default)({},a),null==k?void 0:k.style)}),M.map(function(n,r){var i=n.render,a=n.dataIndex,l=n.className,u=v(C,n,r,E,h,b,null==A?void 0:A.offset),c=u.key,p=u.fixedInfo,m=u.appendCellNode,g=u.additionalCellProps;return f.createElement(d.default,(0,s.default)({className:l,ellipsis:n.ellipsis,align:n.align,scope:n.rowScope,component:n.rowScope?T:S,prefixCls:O,key:c,record:o,index:h,renderIndex:y,dataIndex:a,render:i,shouldCellUpdate:n.shouldCellUpdate},p,{appendNode:m,additionalProps:g}));}));if(L&&(N.current||I)){var B=P(o,h,E+1,I);r=f.createElement(m.default,{expanded:I,className:(0,c.default)("".concat(O,"-expanded-row"),"".concat(O,"-expanded-row-level-").concat(E+1),D),prefixCls:O,component:w,cellComponent:S,colSpan:A?A.colSpan:M.length,stickyOffset:null==A?void 0:A.sticky,isEmpty:!1},B);}return f.createElement(f.Fragment,null,F,r);});},"863198de":function(n,r,i){var a=i("231450c4")(i("6040b637"),"Set");n.exports=a;},"863d40cc":function(n,r,i){"use strict";function a(n,r){this._context=n,this._t=r;}function o(n){return new a(n,.5);}function s(n){return new a(n,0);}function l(n){return new a(n,1);}i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return o;},stepAfter:function(){return l;},stepBefore:function(){return s;}}),a.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._x=this._y=NaN,this._point=0;},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line);},point:function(n,r){switch(n=+n,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,r),this._context.lineTo(n,r);else{var i=this._x*(1-this._t)+n*this._t;this._context.lineTo(i,this._y),this._context.lineTo(i,r);}}this._x=n,this._y=r;}};},86593540:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return g;}});var a=i("777fffbe"),o=i("064ecd09"),s=a._(o),l=i("609f48be");a._(l);var u=i("e4870cf0"),c=a._(u),f=i("a854094b"),d=a._(f),h=i("a3273044"),p=function(n){var r=n.componentCls,i=n.antCls;return(0,d.default)({},"".concat(r,"-actions"),(0,d.default)((0,d.default)({marginBlock:0,marginInline:0,paddingBlock:0,paddingInline:0,listStyle:"none",display:"flex",gap:n.marginXS,background:n.colorBgContainer,borderBlockStart:"".concat(n.lineWidth,"px ").concat(n.lineType," ").concat(n.colorSplit),minHeight:42},"& > *",{alignItems:"center",justifyContent:"center",flex:1,display:"flex",cursor:"pointer",color:n.colorTextSecondary,transition:"color 0.3s","&:hover":{color:n.colorPrimaryHover}}),"& > li > div",{flex:1,width:"100%",marginBlock:n.marginSM,marginInline:0,color:n.colorTextSecondary,textAlign:"center",a:{color:n.colorTextSecondary,transition:"color 0.3s","&:hover":{color:n.colorPrimaryHover}},div:(0,d.default)((0,d.default)({position:"relative",display:"block",minWidth:32,fontSize:n.fontSize,lineHeight:n.lineHeight,cursor:"pointer","&:hover":{color:n.colorPrimaryHover,transition:"color 0.3s"}},"a:not(".concat(i,"-btn),\n            > .anticon"),{display:"inline-block",width:"100%",color:n.colorTextSecondary,lineHeight:"22px",transition:"color 0.3s","&:hover":{color:n.colorPrimaryHover}}),".anticon",{fontSize:n.cardActionIconSize,lineHeight:"22px"}),"&:not(:last-child)":{borderInlineEnd:"".concat(n.lineWidth,"px ").concat(n.lineType," ").concat(n.colorSplit)}}));},m=i("dac8af92"),g=function(n){var r=n.actions,i=n.prefixCls,a=(0,h.useStyle)("ProCardActions",function(n){return[p((0,c.default)((0,c.default)({},n),{},{componentCls:".".concat(i),cardActionIconSize:16}))];}),o=a.wrapSSR,l=a.hashId;return o(Array.isArray(r)&&null!=r&&r.length?(0,m.jsx)("ul",{className:(0,s.default)("".concat(i,"-actions"),l),children:r.map(function(n,a){return(0,m.jsx)("li",{style:{width:"".concat(100/r.length,"%"),padding:0,margin:0},className:(0,s.default)("".concat(i,"-actions-item"),l),children:n},"action-".concat(a));})}):(0,m.jsx)("ul",{className:(0,s.default)("".concat(i,"-actions"),l),children:r}));};},"867408b8":function(n,r,i){"use strict";function a(n,r){let i=0,a=0;if(void 0===r)for(let r of n)null!=r&&(r=+r)>=r&&(++i,a+=r);else{let o=-1;for(let s of n)null!=(s=r(s,++o,n))&&(s=+s)>=s&&(++i,a+=s);}if(i)return a/i;}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},"8704c632":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});var a=function(n){return n;};},"87c560a4":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{VALID_FIND_BY_X_MARKS:function(){return Q;},bboxOf:function(){return A;},boundsOfBrushArea:function(){return M;},brushMousePosition:function(){return O;},createColorKey:function(){return R;},createDatumof:function(){return k;},createFindElementByEvent:function(){return J;},createUseState:function(){return D;},createValueof:function(){return z;},createXKey:function(){return P;},getElements:function(){return Y;},getPointsPath:function(){return $;},getPointsR:function(){return q;},getThetaPath:function(){return Z;},maybeRoot:function(){return K;},mergeState:function(){return j;},mousePosition:function(){return C;},offsetTransform:function(){return V;},renderBackground:function(){return G;},renderLink:function(){return U;},restoreCursor:function(){return W;},selectElementByData:function(){return X;},selectFacetG2Elements:function(){return w;},selectFacetViews:function(){return S;},selectG2Elements:function(){return E;},selectPlotArea:function(){return T;},setCursor:function(){return H;},useState:function(){return F;}});var a=i("777fffbe"),o=i("5e195043"),s=i("af0c43b0"),l=a._(i("944abdfb")),u=a._(i("9841474e")),c=a._(i("b7fbe0e8")),f=i("7d4c6398"),d=i("cfce14bf"),h=i("5b7abe3d"),p=i("6048efd3"),m=i("f7112881"),g=i("42fb15d0"),v=i("2ef7fc5f"),y=i("45669125"),_=i("d70a5c58"),b=i("df2e18b5"),x=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};function E(n){return(0,f.select)(n).selectAll(`.${h.ELEMENT_CLASS_NAME}`).nodes().filter(n=>!n.__removed__);}function w(n,r){return S(n,r).flatMap(({container:n})=>E(n));}function S(n,r){return r.filter(r=>r!==n&&r.options.parentKey===n.options.key);}function T(n){return(0,f.select)(n).select(`.${h.PLOT_CLASS_NAME}`).node();}function A(n){if("g"===n.tagName)return n.getRenderBounds();let r=n.getGeometryBounds(),i=new o.AABB;return i.setFromTransformedAABB(r,n.getWorldTransform()),i;}function C(n,r){let{offsetX:i,offsetY:a}=r,{min:[o,s],max:[l,u]}=A(n);return i<o||i>l||a<s||a>u?null:[i-o,a-s];}function O(n,r){let{offsetX:i,offsetY:a}=r,[o,s,l,u]=M(n);return[Math.min(l,Math.max(o,i))-o,Math.min(u,Math.max(s,a))-s];}function M(n){let{min:[r,i],max:[a,o]}=n.getRenderBounds();return[r,i,a,o];}function R(n){return n=>n.__data__.color;}function P(n){return n=>n.__data__.x;}function k(n){let r=new Map((Array.isArray(n)?n:[n]).flatMap(n=>Array.from(n.markState.keys()).map(r=>[B(n.key,r.key),r.data])));return n=>{let{index:i,markKey:a,viewKey:o}=n.__data__;return r.get(B(o,a))[i];};}let I={selected:3,unselected:3,active:2,inactive:2,default:1},L={selection:["selected","unselected"],highlight:["active","inactive"]},N=(n,r,i)=>{(0,b.traverseElements)(n,n=>{"setAttribute"in n&&"function"==typeof n.setAttribute&&n.setAttribute(r,i);});};function D(n,r){return r.forEach(r=>{let i=r.__interactionStyle__;i?r.__interactionStyle__=Object.assign(Object.assign({},i),n):r.__interactionStyle__=n;}),(n=(n,r)=>n,r=N)=>F(void 0,n,r);}function F(n,r=(n,r)=>n,i=N){let a="__states__",o="__ordinal__",s=n=>I[n]||I.default,l=n=>{var r;return null===(r=Object.entries(L).find(([r,i])=>i.includes(n)))||void 0===r?void 0:r[0];},u=l=>{var u;let{[a]:c=[],[o]:f={}}=l,d=[...c].sort((n,r)=>s(r)-s(n)),h=new Map;for(let r of d)for(let[i,a]of Object.entries((null===(u=null!=n?n:l.__interactionStyle__)||void 0===u?void 0:u[r])||{}))h.has(i)||h.set(i,a);let p=Object.assign({},f);for(let[n,r]of h.entries())p[n]=r;if(0!==Object.keys(p).length){for(let[n,a]of Object.entries(p)){let o=(0,v.getStyle)(l,n),s=r(a,l);i(l,n,s),n in f||(f[n]=o);}l[o]=f;}},c=n=>{n[a]||(n[a]=[]);};return{setState:(n,...r)=>{c(n),n[a]=[...r],u(n);},updateState:(n,...r)=>{c(n);let i=n[a],o=new Set(r.map(n=>l(n)).filter(n=>void 0!==n)),s=i.filter(n=>!o.has(l(n)));n[a]=[...s,...r],u(n);},removeState:(n,...r)=>{for(let i of(c(n),r)){let r=n[a].indexOf(i);-1!==r&&n[a].splice(r,1);}u(n);},hasState:(n,r)=>(c(n),-1!==n[a].indexOf(r))};}function B(n,r){return`${n},${r}`;}function j(n,r){let i=(Array.isArray(n)?n:[n]).flatMap(n=>n.marks.map(r=>[B(n.key,r.key),r.state])),a={};for(let n of r){let[r,o]=Array.isArray(n)?n:[n,{}];a[r]=i.reduce((n,i)=>{var a;let[s,l={}]=i;for(let[i,u]of Object.entries(void 0===(a=l[r])||"object"==typeof a&&0===Object.keys(a).length?o:l[r])){let r=n[i],a=(n,i,a,o)=>s!==B(o.__data__.viewKey,o.__data__.markKey)?null==r?void 0:r(n,i,a,o):"function"!=typeof u?u:u(n,i,a,o);n[i]=a;}return n;},{});}return a;}function z(n,r){let i=new Map(n.map((n,r)=>[n,r])),a=r?n.map(r):n;return(n,o)=>{if("function"!=typeof n)return n;let s=i.get(o);return n(r?r(o):o,s,a,o);};}function U(n){var{link:r=!1,valueof:i=(n,r)=>n,coordinate:a}=n,u=x(n,["link","valueof","coordinate"]);if(!r)return[()=>{},()=>{}];let c=n=>n.__data__.points,f=(n,r)=>{let[,i,a]=n,[o,,,s]=r;return[i,o,s,a];};return[n=>{var r;if(n.length<=1)return;let a=(0,l.default)(n,(n,r)=>{let{x:i}=n.__data__,{x:a}=r.__data__;return i-a;});for(let n=1;n<a.length;n++){let l=(0,s.path)(),h=a[n-1],p=a[n],[m,g,v,y]=f(c(h),c(p));l.moveTo(...m),l.lineTo(...g),l.lineTo(...v),l.lineTo(...y),l.closePath();let _=(0,d.mapObject)(u,n=>i(n,h)),{fill:b=h.getAttribute("fill")}=_,E=x(_,["fill"]),w=new o.Path({className:"element-link",style:Object.assign({d:l.toString(),fill:b,zIndex:-2},E)});null===(r=h.link)||void 0===r||r.remove(),h.parentNode.appendChild(w),h.link=w;}},n=>{var r;null===(r=n.link)||void 0===r||r.remove(),n.link=null;}];}function V(n,r,i){let a=r=>{let{transform:i}=n.style;return i?`${i} ${r}`:r;};if((0,g.isPolar)(i)){let{points:o}=n.__data__,[s,l]=(0,g.isTranspose)(i)?(0,y.reorder)(o):o,u=i.getCenter(),c=(0,_.sub)(s,u),f=(0,_.sub)(l,u),d=(0,_.angle)(c)+(0,_.angleBetween)(c,f)/2,h=r*Math.cos(d),p=r*Math.sin(d);return a(`translate(${h}, ${p})`);}return a((0,g.isTranspose)(i)?`translate(${r}, 0)`:`translate(0, ${-r})`);}function G(n){var{document:r,background:i,scale:a,coordinate:o,valueof:s}=n,l=x(n,["document","background","scale","coordinate","valueof"]);let u="element-background";if(!i)return[()=>{},()=>{}];let c=(n,r,i)=>{let a=n.invert(r),o=r+n.getBandWidth(a)/2,s=n.getStep(a)/2,l=s*i;return[o-s+l,o+s-l];},f=(n,r)=>{let{x:i}=a;if(!(0,p.isOrdinalScale)(i))return[0,1];let{__data__:o}=n,{x:s}=o,[l,u]=c(i,s,r);return[l,u];},h=(n,r)=>{let{y:i}=a;if(!(0,p.isOrdinalScale)(i))return[0,1];let{__data__:o}=n,{y:s}=o,[l,u]=c(i,s,r);return[l,u];},g=(n,i)=>{let{padding:a}=i,[s,l]=f(n,a),[u,c]=h(n,a),d=[[s,u],[l,u],[l,c],[s,c]].map(n=>o.map(n)),{__data__:p}=n,{y:g,y1:v}=p;return(0,m.rect)(r,d,{y:g,y1:v},o,i);},v=(n,r)=>{let{transform:i="scale(1.2, 1.2)",transformOrigin:a="center center",stroke:o=""}=r,s=Object.assign({transform:i,transformOrigin:a,stroke:o},x(r,["transform","transformOrigin","stroke"])),l=n.cloneNode(!0);for(let[n,r]of Object.entries(s))l.style[n]=r;return l;},y=()=>{let{x:n,y:r}=a;return[n,r].some(p.isOrdinalScale);};return[n=>{n.background&&n.background.remove();let r=(0,d.mapObject)(l,r=>s(r,n)),{fill:i="#CCD6EC",fillOpacity:a=.3,zIndex:o=-2,padding:c=.001,lineWidth:f=0}=r,h=Object.assign(Object.assign({},x(r,["fill","fillOpacity","zIndex","padding","lineWidth"])),{fill:i,fillOpacity:a,zIndex:o,padding:c,lineWidth:f}),p=(y()?g:v)(n,h);p.className=u,n.parentNode.parentNode.appendChild(p),n.background=p;},n=>{var r;null===(r=n.background)||void 0===r||r.remove(),n.background=null;},n=>n.className===u];}function H(n,r){let i=n.getRootNode().defaultView.getContextService().getDomElement();(null==i?void 0:i.style)&&(n.cursor=i.style.cursor,i.style.cursor=r);}function W(n){H(n,n.cursor);}function X(n,r,i){return n.find(n=>Object.entries(r).every(([r,a])=>i(n)[r]===a));}function q(n,r){return Math.sqrt(Math.pow(n[0]-r[0],2)+Math.pow(n[1]-r[1],2));}function $(n,r=!1){let i=(0,c.default)(n,n=>!!n).map((n,r)=>[0===r?"M":"L",...n]);return r&&i.push(["Z"]),i;}function Y(n){return n.querySelectorAll(".element");}function Z(n,r,i=0){let a=[["M",...r[1]]],o=q(n,r[1]),s=q(n,r[0]);return 0===o?a.push(["L",...r[3]],["A",s,s,0,i,1,...r[0]],["Z"]):a.push(["A",o,o,0,i,0,...r[2]],["L",...r[3]],["A",s,s,0,i,1,...r[0]],["Z"]),a;}function K(n,r){if(r(n))return n;let i=n.parent;for(;i&&!r(i);)i=i.parent;return i;}let Q=["interval","point","density"];function J({elementsof:n,root:r,coordinate:i,scale:a,validFindByXMarks:o=Q}){var s,l;let c=n(r),f=n=>o.includes(n.markType);if(c.find(f)){c=c.filter(f);let n=a.x,o=a.series,d=null!==(l=null===(s=null==n?void 0:n.getBandWidth)||void 0===s?void 0:s.call(n))&&void 0!==l?l:0,h=o?n=>{var r,i;let a=Math.round(1/(null!==(r=o.valueBandWidth)&&void 0!==r?r:1));return n.__data__.x+(null!==(i=n.__data__.series)&&void 0!==i?i:0)*d+d/(2*a);}:n=>n.__data__.x+d/2;return c.sort((n,r)=>h(n)-h(r)),n=>{let a=C(r,n);if(!a)return;let[o]=i.invert(a),s=(0,(0,u.default)(h).center)(c,o);return c[s];};}return n=>{let{target:r}=n;return K(r,n=>!!n.classList&&n.classList.includes("element"));};}},"880f07e8":function(n,r,i){"use strict";function a(n,r){return+n.toPrecision(r);}i.d(r,"__esModule",{value:!0}),i.d(r,"toPrecision",{enumerable:!0,get:function(){return a;}});},"88ddf3cf":function(n,r,i){var a=i("03f4be2a"),o=i("e5618c43"),s=i("137e7cc0");n.exports=function(n){return s(n)?a(n):o(n);};},"8970bd89":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{GlobelPointFillTriangulation:function(){return P;},HeatmapGridTriangulation:function(){return U;},HeatmapTriangulation:function(){return H;},LineArcTriangulation:function(){return G;},LineTriangulation:function(){return L;},PointExtrudeTriangulation:function(){return k;},PointFillTriangulation:function(){return R;},PointImageTriangulation:function(){return I;},PolygonExtrudeTriangulation:function(){return z;},RasterImageTriangulation:function(){return V;},SimpleLineTriangulation:function(){return N;},polygonTriangulation:function(){return B;},polygonTriangulationWithCenter:function(){return j;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("9479dab9"),l=i("c165292c"),u=a._(l),c=i("377bcc16"),f=o._(c),d=i("9400daad"),h=i("a854094b"),p=a._(h),m=i("d6f42022"),g=o._(m);let v=g.create();g.create();let y=g.create(),_=g.create(),b=g.create();function x(n,r,i,a,o){g.add(n,i,a),g.normalize(n,n),r=g.fromValues(-n[1],n[0]);let s=g.fromValues(-i[1],i[0]);return[o/g.dot(r,s),r];}function E(n,r){return g.set(n,-r[1],r[0]);}function w(n,r,i){return g.sub(n,r,i),g.normalize(n,n),n;}function S(n,r){return n[0]===r[0]&&n[1]===r[1];}class T{constructor(n={}){(0,p.default)(this,"complex",void 0),(0,p.default)(this,"join",void 0),(0,p.default)(this,"cap",void 0),(0,p.default)(this,"miterLimit",void 0),(0,p.default)(this,"thickness",void 0),(0,p.default)(this,"normal",void 0),(0,p.default)(this,"lastFlip",-1),(0,p.default)(this,"miter",g.fromValues(0,0)),(0,p.default)(this,"started",!1),(0,p.default)(this,"dash",!1),(0,p.default)(this,"totalDistance",0),(0,p.default)(this,"currentIndex",0),this.join=n.join||"miter",this.cap=n.cap||"butt",this.miterLimit=n.miterLimit||10,this.thickness=n.thickness||1,this.dash=n.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]};}simpleExtrude(n){let r=this.complex;if(n.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;let i=n.length,a=r.startIndex;for(let o=1;o<i;o++){let i=n[o-1],s=n[o],l=o<n.length-1?n[o+1]:null,u=this.simpleSegment(r,a,i,s,l);a+=u;}if(this.dash)for(let n=0;n<r.positions.length/6;n++)r.positions[6*n+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r;}extrude(n){let r=this.complex;if(n.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;let i=n.length,a=r.startIndex;for(let o=1;o<i;o++){let i=n[o-1],s=n[o],l=o<n.length-1?n[o+1]:null,u=this.segment(r,a,i,s,l);a+=u;}if(this.dash)for(let n=0;n<r.positions.length/6;n++)r.positions[6*n+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r;}simpleSegment(n,r,i,a,o){let l=0,u=n.indices,c=n.positions,f=n.normals,d=(0,s.aProjectFlat)([a[0],a[1]]),h=(0,s.aProjectFlat)([i[0],i[1]]);w(y,d,h);let p=0;if(this.dash&&(p=this.lineSegmentDistance(d,h),this.totalDistance+=p),this.normal||(this.normal=g.create(),E(this.normal,y)),this.started||(this.started=!0,this.extrusions(c,f,i,this.normal,this.thickness,this.totalDistance-p)),u.push(r+0,r+1,r+2),o){let n=(0,s.aProjectFlat)([o[0],o[1]]);S(d,n)&&g.add(n,d,g.normalize(n,g.subtract(n,d,h))),w(_,n,d);let[i,p]=x(b,g.create(),y,_,this.thickness),m=0>g.dot(b,this.normal)?-1:1;this.extrusions(c,f,a,p,i,this.totalDistance),u.push(...1===this.lastFlip?[r,r+2,r+3]:[r+2,r+1,r+3]),m=-1,g.copy(this.normal,p),l+=2,this.lastFlip=m;}else E(this.normal,y),this.extrusions(c,f,a,this.normal,this.thickness,this.totalDistance),u.push(...1===this.lastFlip?[r,r+2,r+3]:[r+2,r+1,r+3]),l+=2;return l;}segment(n,r,i,a,o){let l=0,u=n.indices,c=n.positions,f=n.normals,d="square"===this.cap,h="bevel"===this.join,p=(0,s.aProjectFlat)([a[0],a[1]]),m=(0,s.aProjectFlat)([i[0],i[1]]);w(y,p,m);let T=0;if(this.dash&&(T=this.lineSegmentDistance(p,m),this.totalDistance+=T),this.normal||(this.normal=g.create(),E(this.normal,y)),!this.started){if(this.started=!0,d){let n=g.create(),r=g.create();g.add(n,this.normal,y),g.add(r,this.normal,y),f.push(r[0],r[1],0),f.push(n[0],n[1],0),c.push(i[0],i[1],0|i[2],this.totalDistance-T,-this.thickness,0|i[2]),this.complex.indexes.push(this.currentIndex),c.push(i[0],i[1],0|i[2],this.totalDistance-T,this.thickness,0|i[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++;}else this.extrusions(c,f,i,this.normal,this.thickness,this.totalDistance-T);}if(u.push(r+0,r+1,r+2),o){let n=(0,s.aProjectFlat)([o[0],o[1]]);S(p,n)&&g.add(n,p,g.normalize(n,g.subtract(n,p,m))),w(_,n,p);let[i,d]=x(b,g.create(),y,_,this.thickness),T=0>g.dot(b,this.normal)?-1:1,A=h;!A&&"miter"===this.join&&i>this.miterLimit&&(A=!0),A?(f.push(this.normal[0],this.normal[1],0),f.push(d[0],d[1],0),c.push(a[0],a[1],0|a[2],this.totalDistance,-this.thickness*T,0|a[2]),this.complex.indexes.push(this.currentIndex),c.push(a[0],a[1],0|a[2],this.totalDistance,this.thickness*T,0|a[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,u.push(...this.lastFlip!==-T?[r,r+2,r+3]:[r+2,r+1,r+3]),u.push(r+2,r+3,r+4),E(v,_),g.copy(this.normal,v),f.push(this.normal[0],this.normal[1],0),c.push(a[0],a[1],0|a[2],this.totalDistance,-this.thickness*T,0|a[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,l+=3):(this.extrusions(c,f,a,d,i,this.totalDistance),u.push(...1===this.lastFlip?[r,r+2,r+3]:[r+2,r+1,r+3]),T=-1,g.copy(this.normal,d),l+=2),this.lastFlip=T;}else{if(E(this.normal,y),d){let n=g.create(),r=g.create();g.sub(r,y,this.normal),g.add(n,y,this.normal),f.push(r[0],r[1],0),f.push(n[0],n[1],0),c.push(a[0],a[1],0|a[2],this.totalDistance,this.thickness,0|a[2]),this.complex.indexes.push(this.currentIndex),c.push(a[0],a[1],0|a[2],this.totalDistance,this.thickness,0|a[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++;}else this.extrusions(c,f,a,this.normal,this.thickness,this.totalDistance);u.push(...1===this.lastFlip?[r,r+2,r+3]:[r+2,r+1,r+3]),l+=2;}return l;}extrusions(n,r,i,a,o,s){r.push(a[0],a[1],0),r.push(a[0],a[1],0),n.push(i[0],i[1],0|i[2],s,-o,0|i[2]),this.complex.indexes.push(this.currentIndex),n.push(i[0],i[1],0|i[2],s,o,0|i[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++;}lineSegmentDistance(n,r){let i=r[0]-n[0],a=r[1]-n[1];return Math.sqrt(i*i+a*a);}}var A=i("d2a6da1b"),C=i("cbd0341d");function O(n,r=!1){let i=n[0][0],a=n[0][n[0].length-1];i[0]===a[0]&&i[1]===a[1]&&(n[0]=n[0].slice(0,n[0].length-1));let o=n[0].length,l=u.default.flatten(n),{vertices:c,dimensions:d,holes:h}=l,p=[],m=[],g=[];for(let n=0;n<c.length/d;n++)p.push(c[n*d],c[n*d+1],1,-1,-1),g.push(0,0,1);let v=(0,C.getPolygonSurfaceIndices)(c,h,d,r);m.push(...v);for(let n=0;n<o;n++){let i=l.vertices.slice(n*d,(n+1)*d),a=l.vertices.slice((n+1)*d,(n+2)*d);0===a.length&&(a=l.vertices.slice(0,d));let o=p.length/5;p.push(i[0],i[1],1,0,0,a[0],a[1],1,.1,0,i[0],i[1],0,0,.8,a[0],a[1],0,.1,.8);let u=function(n,r,i,a=!1){let o=f.create(),l=f.create(),u=f.create();a&&(n=(0,s.lngLatToMeters)(n),r=(0,s.lngLatToMeters)(r),i=(0,s.lngLatToMeters)(i));let c=f.fromValues(...n),d=f.fromValues(...r),h=f.fromValues(...i);f.sub(o,h,d),f.sub(l,c,d),f.cross(u,o,l);let p=f.create();return f.normalize(p,u),p;}([a[0],a[1],1],[i[0],i[1],0],[i[0],i[1],1],r);g.push(...u,...u,...u,...u),m.push(...[1,2,0,3,2,1].map(n=>n+o));}return{positions:p,index:m,normals:g};}let M={};function R(n){let r=(0,s.calculateCentroid)(n.coordinates);return{vertices:[...r,...r,...r,...r],indices:[0,1,2,2,3,0],size:r.length};}function P(n){let r=(0,s.calculateCentroid)(n.coordinates),i=(0,d.lglt2xyz)(r);return{vertices:[...i,...i,...i,...i],indices:[0,1,2,2,3,0],size:i.length};}function k(n){let{shape:r}=n,{positions:i,index:a,normals:o}=function(n,r=!1){if(M&&M[n])return M[n];let i=O([A.geometryShape[n]?A.geometryShape[n]():A.geometryShape.cylinder()],r);return M[n]=i,i;}(r,!1);return{vertices:i,indices:a,normals:o,size:5};}function I(n){let r=(0,s.calculateCentroid)(n.coordinates);return{vertices:[...r],indices:[0],size:r.length};}function L(n){let{coordinates:r}=n,i=new T({dash:!0,join:"bevel"}),a=r;a[0]&&!Array.isArray(a[0][0])&&(a=[r]),a.forEach(n=>{i.extrude(n);});let o=i.complex;return{vertices:o.positions,indices:o.indices,normals:o.normals,indexes:o.indexes,size:6};}function N(n){let{coordinates:r}=n,i=[];if(!Array.isArray(r[0]))return{vertices:[],indices:[],normals:[],size:6,count:0};let{results:a,totalDistance:o}=function(n){let r=n;Array.isArray(r)&&Array.isArray(r[0])&&Array.isArray(r[0][0])&&(r=n.flat());let i=0;if(r.length<2)return{results:r,totalDistance:0};{let n=[],a=F(r[0],i);n.push(a);for(let a=1;a<r.length-1;a++){i+=D((0,s.aProjectFlat)(r[a-1]),(0,s.aProjectFlat)(r[a]));let o=F(r[a],i);n.push(o),n.push(o);}return i+=D((0,s.aProjectFlat)(r[r.length-2]),(0,s.aProjectFlat)(r[r.length-1])),n.push(F(r[r.length-1],i)),{results:n,totalDistance:i};}}(r);return a.map(n=>{i.push(n[0],n[1],n[2],n[3],0,o);}),{vertices:i,indices:[],normals:[],size:6,count:a.length};}function D(n,r){let i=r[0]-n[0],a=r[1]-n[1];return Math.sqrt(i*i+a*a);}function F(n,r){return n.length<3&&n.push(0),void 0!==r&&n.push(r),n;}function B(n){let{coordinates:r}=n,{vertices:i,dimensions:a,holes:o}=u.default.flatten(r);return{indices:(0,C.getPolygonSurfaceIndices)(i,o,a),vertices:i,size:a};}function j(n){let{indices:r,vertices:i,size:a}=B(n);return{indices:r,vertices:function(n){let r=[],{center:i,radius:a}=(0,s.calculatePointsCenterAndRadius)(n);for(let o=0;o<n.length;o+=2){let s=n[o],l=n[o+1];r.push(s,l,0,...i,a);}return r;}(i),size:a+4};}function z(n){let{positions:r,index:i,normals:a}=O(n.coordinates,!0);return{vertices:r,indices:i,normals:a,size:5};}function U(n){let{shape:r}=n,{positions:i,index:a}=function(n){let r=A.geometryShape[n]?A.geometryShape[n]():A.geometryShape.circle();return -1===["cylinder","triangleColumn","hexagonColumn","squareColumn"].indexOf(n)?function(n){let r=u.default.flatten(n),i=(0,u.default)(r.vertices,r.holes,r.dimensions);return{positions:r.vertices,index:i};}([r]):function(n){let r=n[0][0],i=n[0][n[0].length-1];r[0]===i[0]&&r[1]===i[1]&&(n[0]=n[0].slice(0,n[0].length-1));let a=n[0].length,o=u.default.flatten(n),{vertices:s,dimensions:l}=o,c=[],f=[];for(let n=0;n<s.length/l;n++)2===l?c.push(s[2*n],s[2*n+1],1):c.push(s[3*n],s[3*n+1],1);let d=(0,u.default)(o.vertices,o.holes,o.dimensions);f.push(...d);for(let n=0;n<a;n++){let r=o.vertices.slice(n*l,(n+1)*l),i=o.vertices.slice((n+1)*l,(n+2)*l);0===i.length&&(i=o.vertices.slice(0,l));let a=c.length/3;c.push(r[0],r[1],1,i[0],i[1],1,r[0],r[1],0,i[0],i[1],0),f.push(...[0,2,1,2,3,1].map(n=>n+a));}return{positions:c,index:f};}([r]);}(r);return{vertices:i,indices:a,size:3};}function V(n){let r=n.coordinates;return{vertices:[...r[0],0,0,0,...r[1],0,1,0,...r[2],0,1,1,...r[3],0,0,1],indices:[0,1,2,0,2,3],size:5};}function G(n,r){let{segmentNumber:i=30}=r,a=n.coordinates,o=[],s=[];for(let n=0;n<i;n++)o.push(n,1,n,a[0][0],a[0][1],a[1][0],a[1][1],n,-1,n,a[0][0],a[0][1],a[1][0],a[1][1]),n!==i-1&&s.push(...[0,1,2,1,3,2].map(r=>2*n+r));return{vertices:o,indices:s,size:7};}function H(n){let r=n.coordinates;2===r.length&&r.push(0);let i=W(-1,1),a=W(1,1);return{vertices:[...r,...i,...r,...W(-1,-1),...r,...W(1,-1),...r,...a],indices:[0,1,2,3,0,2],size:5};}function W(n,r){return[(n+1)/2,(r+1)/2];}},"89a0cb41":function(n,r,i){n.exports=function(n){return n&&n.__esModule?n:{default:n};},n.exports.__esModule=!0,n.exports.default=n.exports;},"8a2c7d78":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return o;}});var a=i("777fffbe")._(i("b2ebca38"));function o(n,r){var i="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!i){if(Array.isArray(n)||(i=(0,a.default)(n))||r&&n&&"number"==typeof n.length){i&&(n=i);var o=0,s=function(){};return{s:s,n:function(){return o>=n.length?{done:!0}:{done:!1,value:n[o++]};},e:function(n){throw n;},f:s};}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var l,u=!0,c=!1;return{s:function(){i=i.call(n);},n:function(){var n=i.next();return u=n.done,n;},e:function(n){c=!0,l=n;},f:function(){try{u||null==i.return||i.return();}finally{if(c)throw l;}}};}},"8a388190":function(n,r,i){"use strict";var a=i("8204d5bc");n.exports=function(n){var r=(n=n||{}).reporter,i=n.batchProcessor,o=n.stateHandler.getState;if(!r)throw Error("Missing required dependency: reporter.");return{makeDetectable:function(s,l,u){u||(u=l,l=s,s=null),(s=s||{}).debug,a.isIE(8)?u(l):function(l,u){var c,f,d=(c=["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"],f=n.important?" !important; ":"; ",(c.join(f)+f).trim()),h=!1,p=window.getComputedStyle(l),m=l.offsetWidth,g=l.offsetHeight;function v(){function n(){if("static"===p.position){l.style.setProperty("position","relative",s.important?"important":"");var n=function(n,r,i,a){var o=i[a];"auto"!==o&&"0"!==o.replace(/[^-\d\.]/g,"")&&(n.warn("An element that is positioned static has style."+a+"="+o+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+a+" will be set to 0. Element: ",r),r.style.setProperty(a,"0",s.important?"important":""));};n(r,l,p,"top"),n(r,l,p,"right"),n(r,l,p,"bottom"),n(r,l,p,"left");}}""!==p.position&&(n(p),h=!0);var i=document.createElement("object");i.style.cssText=d,i.tabIndex=-1,i.type="text/html",i.setAttribute("aria-hidden","true"),i.onload=function(){h||n(),function n(r,i){if(!r.contentDocument){var a=o(r);a.checkForObjectDocumentTimeoutId&&window.clearTimeout(a.checkForObjectDocumentTimeoutId),a.checkForObjectDocumentTimeoutId=setTimeout(function(){a.checkForObjectDocumentTimeoutId=0,n(r,i);},100);return;}i(r.contentDocument);}(this,function(n){u(l);});},a.isIE()||(i.data="about:blank"),o(l)&&(l.appendChild(i),o(l).object=i,a.isIE()&&(i.data="about:blank"));}o(l).startSize={width:m,height:g},i?i.add(v):v();}(l,u);},addListener:function(n,r){function i(){r(n);}if(a.isIE(8))o(n).object={proxy:i},n.attachEvent("onresize",i);else{var s=o(n).object;if(!s)throw Error("Element is not detectable by this strategy.");s.contentDocument.defaultView.addEventListener("resize",i);}},uninstall:function(n){if(o(n)){var r=o(n).object;r&&(a.isIE(8)?n.detachEvent("onresize",r.proxy):n.removeChild(r),o(n).checkForObjectDocumentTimeoutId&&window.clearTimeout(o(n).checkForObjectDocumentTimeoutId),delete o(n).object);}}};};},"8a7ba941":function(n,r,i){var a=i("a3f1a331"),o=i("29762c9a"),s=i("5f10f03a"),l=s&&s.isSet,u=l?o(l):a;n.exports=u;},"8b24b58d":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return ru;},processRelativeCoordinates:function(){return rl;}});var a=i("777fffbe"),o=i("d1751d7c"),s={},l={},u=n=>l[n],c=(n,r)=>{l[n]=r;},f=n=>s[n],d=(n,r)=>{s[n]=r;},h={},p={};function m(n){return Function("d","return {"+n.map(function(n,r){return JSON.stringify(n)+": d["+r+'] || ""';}).join(",")+"}");}function g(n){var r=Object.create(null),i=[];return n.forEach(function(n){for(var a in n)a in r||i.push(r[a]=a);}),i;}function v(n,r){var i=n+"",a=i.length;return a<r?Array(r-a+1).join(0)+i:i;}var y=function(n){var r=RegExp('[",\n\r]');function i(n,r){var i,a=[],o=n.length,s=0,l=0,u=o<=0,c=!1;function f(){if(u)return p;if(c)return c=!1,h;var r,i,a=s;if(34===n.charCodeAt(a)){for(;s++<o&&34!==n.charCodeAt(s)||34===n.charCodeAt(++s););return(r=s)>=o?u=!0:10===(i=n.charCodeAt(s++))?c=!0:13===i&&(c=!0,10===n.charCodeAt(s)&&++s),n.slice(a+1,r-1).replace(/""/g,'"');}for(;s<o;){if(10===(i=n.charCodeAt(r=s++)))c=!0;else if(13===i)c=!0,10===n.charCodeAt(s)&&++s;else if(44!==i)continue;return n.slice(a,r);}return u=!0,n.slice(a,o);}for(10===n.charCodeAt(o-1)&&--o,13===n.charCodeAt(o-1)&&--o;(i=f())!==p;){for(var d=[];i!==h&&i!==p;)d.push(i),i=f();r&&null==(d=r(d,l++))||a.push(d);}return a;}function a(n,r){return n.map(function(n){return r.map(function(r){return s(n[r]);}).join(",");});}function o(r){return r.map(s).join(n);}function s(n){var i,a,o,s,l,u;return null==n?"":n instanceof Date?(a=(i=n).getUTCHours(),o=i.getUTCMinutes(),s=i.getUTCSeconds(),l=i.getUTCMilliseconds(),isNaN(i)?"Invalid Date":((u=i.getUTCFullYear())<0?"-"+v(-u,6):u>9999?"+"+v(u,6):v(u,4))+"-"+v(i.getUTCMonth()+1,2)+"-"+v(i.getUTCDate(),2)+(l?"T"+v(a,2)+":"+v(o,2)+":"+v(s,2)+"."+v(l,3)+"Z":s?"T"+v(a,2)+":"+v(o,2)+":"+v(s,2)+"Z":o||a?"T"+v(a,2)+":"+v(o,2)+"Z":"")):r.test(n+="")?'"'+n.replace(/"/g,'""')+'"':n;}return{parse:function(n,r){var a,o,s=i(n,function(n,i){var s;if(a)return a(n,i-1);o=n,a=r?(s=m(n),function(i,a){return r(s(i),a,n);}):m(n);});return s.columns=o||[],s;},parseRows:i,format:function(r,i){return null==i&&(i=g(r)),[i.map(s).join(n)].concat(a(r,i)).join("\n");},formatBody:function(n,r){return null==r&&(r=g(n)),a(n,r).join("\n");},formatRows:function(n){return n.map(o).join("\n");},formatRow:o,formatValue:s};}(","),_=y.parse;y.parseRows,y.format,y.formatBody,y.formatRows,y.formatRow,y.formatValue;var b=i("7f3dc882"),x=i("ca69744f"),E=i("9479dab9"),w=i("ba937aa1"),S=a._(w);function T(n){return!!Array.isArray(n)&&(0===n.length||"number"==typeof n[0]);}function A(n){let r=Object.isFrozen(n)?E.lodashUtil.cloneDeep(n):n;return(0,S.default)(r,!0),r;}function C(n,r){return n||[[r[0],r[3]],[r[2],r[3]],[r[2],r[1]],[r[0],r[1]]];}var O=Object.defineProperty,M=Object.defineProperties,R=Object.getOwnPropertyDescriptors,P=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,L=(n,r,i)=>r in n?O(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i,N=(n,r)=>{for(var i in r||(r={}))k.call(r,i)&&L(n,i,r[i]);if(P)for(var i of P(r))I.call(r,i)&&L(n,i,r[i]);return n;},D=(n,r)=>M(n,R(r));function F(n,r){let{x:i,y:a,x1:o,y1:s,coordinates:l,geometry:u}=r,c=[];if(!Array.isArray(n))return{dataArray:[]};if(u)return n.filter(n=>n[u]&&n[u].type&&n[u].coordinates&&n[u].coordinates.length>0).forEach((n,r)=>{let i=A(n[u]);(0,x.flattenEach)(i,i=>{let a=(0,b.getCoords)(i),o=D(N({},n),{_id:r,coordinates:a});c.push(o);});}),{dataArray:c};for(let r=0;r<n.length;r++){let u=n[r],f=[];if(l){let n="Polygon";Array.isArray(l[0])||(n="Point"),Array.isArray(l[0])&&!Array.isArray(l[0][0])&&(n="LineString"),f=A({type:n,coordinates:u[l]}).coordinates;}else i&&a&&o&&s?f=[[parseFloat(u[i]),parseFloat(u[a])],[parseFloat(u[o]),parseFloat(u[s])]]:i&&a&&(f=[parseFloat(u[i]),parseFloat(u[a])]);let d=D(N({},u),{_id:r,coordinates:f});c.push(d);}return{dataArray:c};}var B=Object.defineProperty,j=Object.defineProperties,z=Object.getOwnPropertyDescriptors,U=Object.getOwnPropertySymbols,V=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,H=(n,r,i)=>r in n?B(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i,W=(n,r)=>{for(var i in r||(r={}))V.call(r,i)&&H(n,i,r[i]);if(U)for(var i of U(r))G.call(r,i)&&H(n,i,r[i]);return n;},X=(n,r)=>j(n,z(r));function q(n,r,i,a){var o={id:void 0===n?null:n,type:r,geometry:i,tags:a,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(n){var r=n.geometry,i=n.type;if("Point"===i||"MultiPoint"===i||"LineString"===i)$(n,r);else if("Polygon"===i||"MultiLineString"===i)for(var a=0;a<r.length;a++)$(n,r[a]);else if("MultiPolygon"===i)for(a=0;a<r.length;a++)for(var o=0;o<r[a].length;o++)$(n,r[a][o]);}(o),o;}function $(n,r){for(var i=0;i<r.length;i+=3)n.minX=Math.min(n.minX,r[i]),n.minY=Math.min(n.minY,r[i+1]),n.maxX=Math.max(n.maxX,r[i]),n.maxY=Math.max(n.maxY,r[i+1]);}function Y(n,r,i,a){if(r.geometry){var o=r.geometry.coordinates,s=r.geometry.type,l=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),u=[],c=r.id;if(i.promoteId?c=r.properties[i.promoteId]:i.generateId&&(c=a||0),"Point"===s)Z(o,u);else if("MultiPoint"===s)for(var f=0;f<o.length;f++)Z(o[f],u);else if("LineString"===s)K(o,u,l,!1);else if("MultiLineString"===s){if(i.lineMetrics){for(f=0;f<o.length;f++)u=[],K(o[f],u,l,!1),n.push(q(c,"LineString",u,r.properties));return;}Q(o,u,l,!1);}else if("Polygon"===s)Q(o,u,l,!0);else if("MultiPolygon"===s)for(f=0;f<o.length;f++){var d=[];Q(o[f],d,l,!0),u.push(d);}else if("GeometryCollection"===s){for(f=0;f<r.geometry.geometries.length;f++)Y(n,{id:c,geometry:r.geometry.geometries[f],properties:r.properties},i,a);return;}else throw Error("Input data is not a valid GeoJSON object.");n.push(q(c,s,u,r.properties));}}function Z(n,r){r.push(n[0]/360+.5),r.push(J(n[1])),r.push(0);}function K(n,r,i,a){for(var o,s,l=0,u=0;u<n.length;u++){var c=n[u][0]/360+.5,f=J(n[u][1]);r.push(c),r.push(f),r.push(0),u>0&&(a?l+=(o*f-c*s)/2:l+=Math.sqrt(Math.pow(c-o,2)+Math.pow(f-s,2))),o=c,s=f;}var d=r.length-3;r[2]=1,function n(r,i,a,o){for(var s,l=o,u=a-i>>1,c=a-i,f=r[i],d=r[i+1],h=r[a],p=r[a+1],m=i+3;m<a;m+=3){var g=function(n,r,i,a,o,s){var l=o-i,u=s-a;if(0!==l||0!==u){var c=((n-i)*l+(r-a)*u)/(l*l+u*u);c>1?(i=o,a=s):c>0&&(i+=l*c,a+=u*c);}return(l=n-i)*l+(u=r-a)*u;}(r[m],r[m+1],f,d,h,p);if(g>l)s=m,l=g;else if(g===l){var v=Math.abs(m-u);v<c&&(s=m,c=v);}}l>o&&(s-i>3&&n(r,i,s,o),r[s+2]=l,a-s>3&&n(r,s,a,o));}(r,0,d,i),r[d+2]=1,r.size=Math.abs(l),r.start=0,r.end=r.size;}function Q(n,r,i,a){for(var o=0;o<n.length;o++){var s=[];K(n[o],s,i,a),r.push(s);}}function J(n){var r=Math.sin(n*Math.PI/180),i=.5-.25*Math.log((1+r)/(1-r))/Math.PI;return i<0?0:i>1?1:i;}function ee(n,r,i,a,o,s,l,u){if(i/=r,a/=r,s>=i&&l<a)return n;if(l<i||s>=a)return null;for(var c=[],f=0;f<n.length;f++){var d=n[f],h=d.geometry,p=d.type,m=0===o?d.minX:d.minY,g=0===o?d.maxX:d.maxY;if(m>=i&&g<a){c.push(d);continue;}if(!(g<i)&&!(m>=a)){var v=[];if("Point"===p||"MultiPoint"===p)!function(n,r,i,a,o){for(var s=0;s<n.length;s+=3){var l=n[s+o];l>=i&&l<=a&&(r.push(n[s]),r.push(n[s+1]),r.push(n[s+2]));}}(h,v,i,a,o);else if("LineString"===p)et(h,v,i,a,o,!1,u.lineMetrics);else if("MultiLineString"===p)er(h,v,i,a,o,!1);else if("Polygon"===p)er(h,v,i,a,o,!0);else if("MultiPolygon"===p)for(var y=0;y<h.length;y++){var _=[];er(h[y],_,i,a,o,!0),_.length&&v.push(_);}if(v.length){if(u.lineMetrics&&"LineString"===p){for(y=0;y<v.length;y++)c.push(q(d.id,p,v[y],d.tags));continue;}("LineString"===p||"MultiLineString"===p)&&(1===v.length?(p="LineString",v=v[0]):p="MultiLineString"),("Point"===p||"MultiPoint"===p)&&(p=3===v.length?"Point":"MultiPoint"),c.push(q(d.id,p,v,d.tags));}}}return c.length?c:null;}function et(n,r,i,a,o,s,l){for(var u,c,f=en(n),d=0===o?ea:eo,h=n.start,p=0;p<n.length-3;p+=3){var m=n[p],g=n[p+1],v=n[p+2],y=n[p+3],_=n[p+4],b=0===o?m:g,x=0===o?y:_,E=!1;l&&(u=Math.sqrt(Math.pow(m-y,2)+Math.pow(g-_,2))),b<i?x>i&&(c=d(f,m,g,y,_,i),l&&(f.start=h+u*c)):b>a?x<a&&(c=d(f,m,g,y,_,a),l&&(f.start=h+u*c)):ei(f,m,g,v),x<i&&b>=i&&(c=d(f,m,g,y,_,i),E=!0),x>a&&b<=a&&(c=d(f,m,g,y,_,a),E=!0),!s&&E&&(l&&(f.end=h+u*c),r.push(f),f=en(n)),l&&(h+=u);}var w=n.length-3;m=n[w],g=n[w+1],v=n[w+2],(b=0===o?m:g)>=i&&b<=a&&ei(f,m,g,v),w=f.length-3,s&&w>=3&&(f[w]!==f[0]||f[w+1]!==f[1])&&ei(f,f[0],f[1],f[2]),f.length&&r.push(f);}function en(n){var r=[];return r.size=n.size,r.start=n.start,r.end=n.end,r;}function er(n,r,i,a,o,s){for(var l=0;l<n.length;l++)et(n[l],r,i,a,o,s,!1);}function ei(n,r,i,a){n.push(r),n.push(i),n.push(a);}function ea(n,r,i,a,o,s){var l=(s-r)/(a-r);return n.push(s),n.push(i+(o-i)*l),n.push(1),l;}function eo(n,r,i,a,o,s){var l=(s-i)/(o-i);return n.push(r+(a-r)*l),n.push(s),n.push(1),l;}function es(n,r){for(var i=[],a=0;a<n.length;a++){var o,s=n[a],l=s.type;if("Point"===l||"MultiPoint"===l||"LineString"===l)o=el(s.geometry,r);else if("MultiLineString"===l||"Polygon"===l){o=[];for(var u=0;u<s.geometry.length;u++)o.push(el(s.geometry[u],r));}else if("MultiPolygon"===l)for(u=0,o=[];u<s.geometry.length;u++){for(var c=[],f=0;f<s.geometry[u].length;f++)c.push(el(s.geometry[u][f],r));o.push(c);}i.push(q(s.id,l,o,s.tags));}return i;}function el(n,r){var i=[];i.size=n.size,void 0!==n.start&&(i.start=n.start,i.end=n.end);for(var a=0;a<n.length;a+=3)i.push(n[a]+r,n[a+1],n[a+2]);return i;}function eu(n,r){if(n.transformed)return n;var i,a,o,s=1<<n.z,l=n.x,u=n.y;for(i=0;i<n.features.length;i++){var c=n.features[i],f=c.geometry,d=c.type;if(c.geometry=[],1===d)for(a=0;a<f.length;a+=2)c.geometry.push(ec(f[a],f[a+1],r,s,l,u));else for(a=0;a<f.length;a++){var h=[];for(o=0;o<f[a].length;o+=2)h.push(ec(f[a][o],f[a][o+1],r,s,l,u));c.geometry.push(h);}}return n.transformed=!0,n;}function ec(n,r,i,a,o,s){return[Math.round(i*(n*a-o)),Math.round(i*(r*a-s))];}function ef(n,r,i,a,o,s){var l=a*a;if(a>0&&r.size<(o?l:a)){i.numPoints+=r.length/3;return;}for(var u=[],c=0;c<r.length;c+=3)(0===a||r[c+2]>l)&&(i.numSimplified++,u.push(r[c]),u.push(r[c+1])),i.numPoints++;o&&function(n,r){for(var i=0,a=0,o=n.length,s=o-2;a<o;s=a,a+=2)i+=(n[a]-n[s])*(n[a+1]+n[s+1]);if(i>0===r)for(a=0,o=n.length;a<o/2;a+=2){var l=n[a],u=n[a+1];n[a]=n[o-2-a],n[a+1]=n[o-1-a],n[o-2-a]=l,n[o-1-a]=u;}}(u,s),n.push(u);}function ed(n,r){var i,a,o,s,l,u,c=(r=this.options=function(n,r){for(var i in r)n[i]=r[i];return n;}(Object.create(this.options),r)).debug;if(c&&console.time("preprocess data"),r.maxZoom<0||r.maxZoom>24)throw Error("maxZoom should be in the 0-24 range");if(r.promoteId&&r.generateId)throw Error("promoteId and generateId cannot be used together.");var f=function(n,r){var i=[];if("FeatureCollection"===n.type)for(var a=0;a<n.features.length;a++)Y(i,n.features[a],r,a);else"Feature"===n.type?Y(i,n,r):Y(i,{geometry:n},r);return i;}(n,r);this.tiles={},this.tileCoords=[],c&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",r.indexMaxZoom,r.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),i=f,o=(a=r).buffer/a.extent,s=i,l=ee(i,1,-1-o,o,0,-1,2,a),u=ee(i,1,1-o,2+o,0,-1,2,a),(l||u)&&(s=ee(i,1,-o,1+o,0,-1,2,a)||[],l&&(s=es(l,1).concat(s)),u&&(s=s.concat(es(u,-1)))),(f=s).length&&this.splitTile(f,0,0,0),c&&(f.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)));}function eh(n,r,i){return((1<<n)*i+r)*32+n;}ed.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ed.prototype.splitTile=function(n,r,i,a,o,s,l){for(var u=[n,r,i,a],c=this.options,f=c.debug;u.length;){a=u.pop(),i=u.pop(),r=u.pop(),n=u.pop();var d=1<<r,h=eh(r,i,a),p=this.tiles[h];if(!p&&(f>1&&console.time("creation"),p=this.tiles[h]=function(n,r,i,a,o){for(var s=r===o.maxZoom?0:o.tolerance/((1<<r)*o.extent),l={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:a,z:r,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},u=0;u<n.length;u++){l.numFeatures++,function(n,r,i,a){var o=r.geometry,s=r.type,l=[];if("Point"===s||"MultiPoint"===s)for(var u=0;u<o.length;u+=3)l.push(o[u]),l.push(o[u+1]),n.numPoints++,n.numSimplified++;else if("LineString"===s)ef(l,o,n,i,!1,!1);else if("MultiLineString"===s||"Polygon"===s)for(u=0;u<o.length;u++)ef(l,o[u],n,i,"Polygon"===s,0===u);else if("MultiPolygon"===s)for(var c=0;c<o.length;c++){var f=o[c];for(u=0;u<f.length;u++)ef(l,f[u],n,i,!0,0===u);}if(l.length){var d=r.tags||null;if("LineString"===s&&a.lineMetrics){for(var h in d={},r.tags)d[h]=r.tags[h];d.mapbox_clip_start=o.start/o.size,d.mapbox_clip_end=o.end/o.size;}var p={geometry:l,type:"Polygon"===s||"MultiPolygon"===s?3:"LineString"===s||"MultiLineString"===s?2:1,tags:d};null!==r.id&&(p.id=r.id),n.features.push(p);}}(l,n[u],s,o);var c=n[u].minX,f=n[u].minY,d=n[u].maxX,h=n[u].maxY;c<l.minX&&(l.minX=c),f<l.minY&&(l.minY=f),d>l.maxX&&(l.maxX=d),h>l.maxY&&(l.maxY=h);}return l;}(n,r,i,a,c),this.tileCoords.push({z:r,x:i,y:a}),f)){f>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",r,i,a,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var m="z"+r;this.stats[m]=(this.stats[m]||0)+1,this.total++;}if(p.source=n,o){if(r===c.maxZoom||r===o)continue;var g=1<<o-r;if(i!==Math.floor(s/g)||a!==Math.floor(l/g))continue;}else if(r===c.indexMaxZoom||p.numPoints<=c.indexMaxPoints)continue;if(p.source=null,0!==n.length){f>1&&console.time("clipping");var v,y,_,b,x,E,w=.5*c.buffer/c.extent,S=.5-w,T=.5+w,A=1+w;v=y=_=b=null,x=ee(n,d,i-w,i+T,0,p.minX,p.maxX,c),E=ee(n,d,i+S,i+A,0,p.minX,p.maxX,c),n=null,x&&(v=ee(x,d,a-w,a+T,1,p.minY,p.maxY,c),y=ee(x,d,a+S,a+A,1,p.minY,p.maxY,c),x=null),E&&(_=ee(E,d,a-w,a+T,1,p.minY,p.maxY,c),b=ee(E,d,a+S,a+A,1,p.minY,p.maxY,c),E=null),f>1&&console.timeEnd("clipping"),u.push(v||[],r+1,2*i,2*a),u.push(y||[],r+1,2*i,2*a+1),u.push(_||[],r+1,2*i+1,2*a),u.push(b||[],r+1,2*i+1,2*a+1);}}},ed.prototype.getTile=function(n,r,i){var a=this.options,o=a.extent,s=a.debug;if(n<0||n>24)return null;var l=1<<n,u=eh(n,r=(r%l+l)%l,i);if(this.tiles[u])return eu(this.tiles[u],o);s>1&&console.log("drilling down to z%d-%d-%d",n,r,i);for(var c,f=n,d=r,h=i;!c&&f>0;)f--,d=Math.floor(d/2),h=Math.floor(h/2),c=this.tiles[eh(f,d,h)];return c&&c.source?(s>1&&console.log("found parent tile z%d-%d-%d",f,d,h),s>1&&console.time("drilling down"),this.splitTile(c.source,f,d,h,n,r,i),s>1&&console.timeEnd("drilling down"),this.tiles[u]?eu(this.tiles[u],o):null):null;};var ep=class{constructor(n,r,i,a){this.vectorLayerCache={},this.x=r,this.y=i,this.z=a,this.vectorTile=n;}getTileData(n){return n&&this.vectorTile.layers[n]?this.vectorLayerCache[n]?this.vectorLayerCache[n]:this.vectorTile.layers[n].features:[];}getFeatureById(){throw Error("Method not implemented.");}},em=Object.defineProperty,eg=Object.defineProperties,ev=Object.getOwnPropertyDescriptors,ey=Object.getOwnPropertySymbols,e_=Object.prototype.hasOwnProperty,eb=Object.prototype.propertyIsEnumerable,ex=(n,r,i)=>r in n?em(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i,eE=(n,r)=>{for(var i in r||(r={}))e_.call(r,i)&&ex(n,i,r[i]);if(ey)for(var i of ey(r))eb.call(r,i)&&ex(n,i,r[i]);return n;},ew=(n,r)=>eg(n,ev(r)),eS=(n,r,i)=>new Promise((a,o)=>{var s=n=>{try{u(i.next(n));}catch(n){o(n);}},l=n=>{try{u(i.throw(n));}catch(n){o(n);}},u=n=>n.done?a(n.value):Promise.resolve(n.value).then(s,l);u((i=i.apply(n,r)).next());}),eT={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0},eA=["Unknown","Point","LineString","Polygon"],eC=(n,r,i,a)=>eS(void 0,null,function*(){return new Promise(o=>{let s=r.getTile(n.z,n.x,n.y);o(new ep({layers:{defaultLayer:{features:s?s.features.map(n=>(function(n,r,i,a,o){let s,l,u=o.geometry,c=o.type,f=o.tags,d=o.id,h=n*Math.pow(2,a),p=n*r,m=n*i,g=eA[c];function v(n){for(let r=0;r<n.length;r++){let i=n[r];if(i[3])break;let a=180-(i[1]+m)*360/h,o=(i[0]+p)*360/h-180,s=360/Math.PI*Math.atan(Math.exp(a*Math.PI/180))-90;n[r]=[o,s,0,1];}}switch(c){case 1:let y=[];for(s=0;s<u.length;s++)y[s]=u[s][0];v(u=y);break;case 2:for(s=0;s<u.length;s++)v(u[s]);break;case 3:for(s=0,u=function(n){let r,i;let a=n.length;if(a<=1)return[n];let o=[];for(let s=0;s<a;s++){let a=function(n){let r=0;for(let i=0,a=n.length,o=a-1,s,l;i<a;o=i++)s=n[i],r+=((l=n[o]).x-s.x)*(s.y+l.y);return r;}(n[s]);0!==a&&(void 0===i&&(i=a<0),i===a<0?(r&&o.push(r),r=[n[s]]):r.push(n[s]));}return r&&o.push(r),o;}(u);s<u.length;s++)for(l=0;l<u[s].length;l++)v(u[s][l]);}return 1===u.length?u=u[0]:g="Multi"+g,{type:"Feature",geometry:{type:g,coordinates:u},properties:f,id:d,relativeOrigin:[0,0],coord:""};})(a,i.x,i.y,i.z,n)):[]}}},n.x,n.y,n.z));});}),eO=Object.defineProperty,eM=Object.defineProperties,eR=Object.getOwnPropertyDescriptors,eP=Object.getOwnPropertySymbols,ek=Object.prototype.hasOwnProperty,eI=Object.prototype.propertyIsEnumerable,eL=(n,r,i)=>r in n?eO(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i,eN=(n,r)=>{for(var i in r||(r={}))ek.call(r,i)&&eL(n,i,r[i]);if(eP)for(var i of eP(r))eI.call(r,i)&&eL(n,i,r[i]);return n;},eD=(n,r)=>eM(n,eR(r)),eF=Object.defineProperty,eB=Object.defineProperties,ej=Object.getOwnPropertyDescriptors,ez=Object.getOwnPropertySymbols,eU=Object.prototype.hasOwnProperty,eV=Object.prototype.propertyIsEnumerable,eG=(n,r,i)=>r in n?eF(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i,eH=(n,r)=>{for(var i in r||(r={}))eU.call(r,i)&&eG(n,i,r[i]);if(ez)for(var i of ez(r))eV.call(r,i)&&eG(n,i,r[i]);return n;},eW=(n,r)=>eB(n,ej(r)),eX=(n,r,i)=>new Promise((a,o)=>{var s=n=>{try{u(i.next(n));}catch(n){o(n);}},l=n=>{try{u(i.throw(n));}catch(n){o(n);}},u=n=>n.done?a(n.value):Promise.resolve(n.value).then(s,l);u((i=i.apply(n,r)).next());}),eq=(n,r,i,a)=>eX(void 0,null,function*(){let o={x:r.x,y:r.y,z:r.z},s=(0,E.getURLFromTemplate)(n,o);return new Promise(n=>{a?a(o,(i,a)=>{i||!a?n(new ep({layers:{defaultLayer:{features:[]}}},r.x,r.y,r.z)):n(new ep({layers:{defaultLayer:{features:a.features}}},r.x,r.y,r.z));}):(0,E.getData)(eW(eH({},i),{url:s}),(i,a)=>{i||!a?n(new ep({layers:{defaultLayer:{features:[]}}},r.x,r.y,r.z)):n(new ep({layers:{defaultLayer:{features:JSON.parse(a)}}},r.x,r.y,r.z));});});}),e$=i("7f096b0c"),eY=a._(e$),eZ=Object.defineProperty,eK=Object.defineProperties,eQ=Object.getOwnPropertyDescriptors,eJ=Object.getOwnPropertySymbols,e0=Object.prototype.hasOwnProperty,e1=Object.prototype.propertyIsEnumerable,e2=(n,r,i)=>r in n?eZ(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i,e3=(n,r)=>{for(var i in r||(r={}))e0.call(r,i)&&e2(n,i,r[i]);if(eJ)for(var i of eJ(r))e1.call(r,i)&&e2(n,i,r[i]);return n;},e4=(n,r)=>eK(n,eQ(r)),e5=(n,r,i)=>new Promise((a,o)=>{var s=n=>{try{u(i.next(n));}catch(n){o(n);}},l=n=>{try{u(i.throw(n));}catch(n){o(n);}},u=n=>n.done?a(n.value):Promise.resolve(n.value).then(s,l);u((i=i.apply(n,r)).next());}),e6={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},e8=(n,r,i,a,o)=>e5(void 0,null,function*(){let s=(0,E.getURLFromTemplate)(n,r);return new Promise(n=>{if(o)o({x:i.x,y:i.y,z:i.z},(r,a)=>{r||!a?n(void 0):n(new eY.default(a,i.x,i.y,i.z));});else{let r=(0,E.getArrayBuffer)(e4(e3({},a),{url:s}),(r,a)=>{r||!a?n(void 0):n(new eY.default(a,i.x,i.y,i.z));});i.xhrCancel=()=>r.cancel();}});}),e7=i("a94340e3"),e9=i("553ee311"),te=(n,r,i)=>new Promise((a,o)=>{var s=n=>{try{u(i.next(n));}catch(n){o(n);}},l=n=>{try{u(i.throw(n));}catch(n){o(n);}},u=n=>n.done?a(n.value):Promise.resolve(n.value).then(s,l);u((i=i.apply(n,r)).next());}),tt=(n,r,i,a)=>te(void 0,null,function*(){return new Promise((o,s)=>{r({x:n.x,y:n.y,z:n.z},(n,r)=>{if(n||0===r.length){s(n);return;}r&&(0,e7.processRasterData)([{data:r,bands:[0]}],i,a,(n,r)=>{n?s(n):r&&o(r);});});});}),tn=(n,r)=>te(void 0,null,function*(){return new Promise((i,a)=>{r({x:n.x,y:n.y,z:n.z},(n,r)=>{if(n||!r){a(n);return;}r instanceof ArrayBuffer?(0,E.formatImage)(r,(n,r)=>{n&&a(n),i(r);}):r instanceof HTMLImageElement?i(r):a(n);});});});function tr(n,r){n.xhrCancel=()=>{r.map(n=>{n.abort();});};}var ti=Object.defineProperty,ta=Object.defineProperties,to=Object.getOwnPropertyDescriptors,ts=Object.getOwnPropertySymbols,tl=Object.prototype.hasOwnProperty,tu=Object.prototype.propertyIsEnumerable,tc=(n,r,i)=>r in n?ti(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i,tf=(n,r)=>{for(var i in r||(r={}))tl.call(r,i)&&tc(n,i,r[i]);if(ts)for(var i of ts(r))tu.call(r,i)&&tc(n,i,r[i]);return n;},td=(n,r)=>ta(n,to(r)),th=(n,r,i)=>new Promise((a,o)=>{var s=n=>{try{u(i.next(n));}catch(n){o(n);}},l=n=>{try{u(i.throw(n));}catch(n){o(n);}},u=n=>n.done?a(n.value):Promise.resolve(n.value).then(s,l);u((i=i.apply(n,r)).next());}),tp=(n,r,i,a,o)=>th(void 0,null,function*(){var s;let l="string"==typeof(s=r.url)?[{url:s,bands:[0]}]:"string"==typeof s[0]?s.map(n=>({url:n,bands:[0]})):s;if(l.length>1){let{rasterFiles:s,xhrList:u,errList:c}=yield function(n,r){return th(this,null,function*(){let i=[],a=[],o=[];for(let s=0;s<n.length;s++){let l=n[s],u=td(tf({},r),{url:l.url}),c=l.bands,{err:f,data:d,xhr:h}=yield(0,E.makeXMLHttpRequestPromise)(td(tf({},u),{type:"arrayBuffer"}));f&&o.push(f),a.push(h),i.push({data:d,bands:c});}return{rasterFiles:i,xhrList:a,errList:o};});}(l,r);if(tr(n,u),c.length>0){i(c,null);return;}(0,e7.processRasterData)(s,a,o,i);}else tr(n,[(0,E.getArrayBuffer)(r,(n,r)=>{if(n)i(n);else if(r){let n=[{data:r,bands:l[0].bands}];(0,e7.processRasterData)(n,a,o,i);}})]);}),tm=Object.defineProperty,tg=Object.defineProperties,tv=Object.getOwnPropertyDescriptors,ty=Object.getOwnPropertySymbols,t_=Object.prototype.hasOwnProperty,tb=Object.prototype.propertyIsEnumerable,tx=(n,r,i)=>r in n?tm(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i,tE=(n,r)=>{for(var i in r||(r={}))t_.call(r,i)&&tx(n,i,r[i]);if(ty)for(var i of ty(r))tb.call(r,i)&&tx(n,i,r[i]);return n;},tw=(n,r)=>tg(n,tv(r)),tS=(n,r,i)=>new Promise((a,o)=>{var s=n=>{try{u(i.next(n));}catch(n){o(n);}},l=n=>{try{u(i.throw(n));}catch(n){o(n);}},u=n=>n.done?a(n.value):Promise.resolve(n.value).then(s,l);u((i=i.apply(n,r)).next());}),tT=(n,r,i,a)=>tS(void 0,null,function*(){let{format:o=tC,operation:s,requestParameters:l={}}=a,u=tw(tE({},l),{url:Array.isArray(n)?"string"==typeof n[0]?n.map(n=>(0,E.getURLFromTemplate)(n,r)):n.map(n=>({url:(0,E.getURLFromTemplate)(n.url,r),bands:n.bands||[0]})):(0,E.getURLFromTemplate)(n,r)});return new Promise((n,r)=>{tp(i,u,(i,a)=>{i?r(i):a&&n(a);},o,s);});}),tA=(n,r,i,a)=>tS(void 0,null,function*(){let o;let s=Array.isArray(n)?n[0]:n;return o=a.wmtsOptions?((null==a?void 0:a.getURLFromTemplate)||E.getWMTSURLFromTemplate)(s,tE(tE({},r),a.wmtsOptions)):((null==a?void 0:a.getURLFromTemplate)||E.getURLFromTemplate)(s,r),new Promise((n,r)=>{var s;let l=(0,E.getImage)(tw(tE({},null==a?void 0:a.requestParameters),{url:o,type:(null==(s=null==a?void 0:a.requestParameters)?void 0:s.type)||"arrayBuffer"}),(i,a)=>{i?r(i):a&&n(a);},a.transformResponse);i.xhrCancel=()=>l.cancel();});}),tC=()=>({rasterData:new Uint8Array([0]),width:1,height:1}),tO=Object.defineProperty,tM=Object.defineProperties,tR=Object.getOwnPropertyDescriptors,tP=Object.getOwnPropertySymbols,tk=Object.prototype.hasOwnProperty,tI=Object.prototype.propertyIsEnumerable,tL=(n,r,i)=>r in n?tO(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i,tN=(n,r)=>{for(var i in r||(r={}))tk.call(r,i)&&tL(n,i,r[i]);if(tP)for(var i of tP(r))tI.call(r,i)&&tL(n,i,r[i]);return n;},tD=(n,r)=>tM(n,tR(r)),tF={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0};e9.RasterTileType.ARRAYBUFFER,e9.RasterTileType.RGB;var tB=Object.defineProperty,tj=Object.defineProperties,tz=Object.getOwnPropertyDescriptors,tU=Object.getOwnPropertySymbols,tV=Object.prototype.hasOwnProperty,tG=Object.prototype.propertyIsEnumerable,tH=(n,r,i)=>r in n?tB(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i,tW=(n,r)=>{for(var i in r||(r={}))tV.call(r,i)&&tH(n,i,r[i]);if(tU)for(var i of tU(r))tG.call(r,i)&&tH(n,i,r[i]);return n;},tX=(n,r)=>tj(n,tz(r)),tq=(n,r)=>{var i={};for(var a in n)tV.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&tU)for(var a of tU(n))0>r.indexOf(a)&&tG.call(n,a)&&(i[a]=n[a]);return i;},t$=i("e38deed2"),tY=Object.defineProperty,tZ=Object.defineProperties,tK=Object.getOwnPropertyDescriptors,tQ=Object.getOwnPropertySymbols,tJ=Object.prototype.hasOwnProperty,t0=Object.prototype.propertyIsEnumerable,t1=(n,r,i)=>r in n?tY(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i,t2=(n,r)=>{for(var i in r||(r={}))tJ.call(r,i)&&t1(n,i,r[i]);if(tQ)for(var i of tQ(r))t0.call(r,i)&&t1(n,i,r[i]);return n;},t3=(n,r)=>tZ(n,tK(r)),t4=(n,r)=>{var i={};for(var a in n)tJ.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&tQ)for(var a of tQ(n))0>r.indexOf(a)&&t0.call(n,a)&&(i[a]=n[a]);return i;},t5=Object.defineProperty,t6=Object.defineProperties,t8=Object.getOwnPropertyDescriptors,t7=Object.getOwnPropertySymbols,t9=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable,nt=(n,r,i)=>r in n?t5(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i,nn=(n,r)=>{for(var i in r||(r={}))t9.call(r,i)&&nt(n,i,r[i]);if(t7)for(var i of t7(r))ne.call(r,i)&&nt(n,i,r[i]);return n;},nr=(n,r)=>t6(n,t8(r)),ni=(n,r)=>{var i={};for(var a in n)t9.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&t7)for(var a of t7(n))0>r.indexOf(a)&&ne.call(n,a)&&(i[a]=n[a]);return i;},na=Object.defineProperty,no=Object.defineProperties,ns=Object.getOwnPropertyDescriptors,nl=Object.getOwnPropertySymbols,nu=Object.prototype.hasOwnProperty,nc=Object.prototype.propertyIsEnumerable,nf=(n,r,i)=>r in n?na(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i,nd=(n,r)=>{for(var i in r||(r={}))nu.call(r,i)&&nf(n,i,r[i]);if(nl)for(var i of nl(r))nc.call(r,i)&&nf(n,i,r[i]);return n;},nh=(n,r)=>no(n,ns(r)),np=(n,r,i)=>new Promise((a,o)=>{var s=n=>{try{u(i.next(n));}catch(n){o(n);}},l=n=>{try{u(i.throw(n));}catch(n){o(n);}},u=n=>n.done?a(n.value):Promise.resolve(n.value).then(s,l);u((i=i.apply(n,r)).next());}),nm={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0},ng=n=>np(void 0,null,function*(){return new Promise(r=>{let[i,a,o,s]=n.bounds;r({layers:{testTile:{features:[{type:"Feature",properties:{key:n.x+"/"+n.y+"/"+n.z,x:(i+o)/2,y:(a+s)/2},geometry:{type:"LineString",coordinates:[[o,s],[o,a],[i,a],[i,a]]}}]}}});});}),nv=i("2569b57a"),ny=i("d555ff08"),n_=i("00ab32b8"),nb=a._(n_),nx=Object.defineProperty,nE=Object.getOwnPropertySymbols,nw=Object.prototype.hasOwnProperty,nS=Object.prototype.propertyIsEnumerable,nT=(n,r,i)=>r in n?nx(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i,nA=(n,r)=>{for(var i in r||(r={}))nw.call(r,i)&&nT(n,i,r[i]);if(nE)for(var i of nE(r))nS.call(r,i)&&nT(n,i,r[i]);return n;};function nC(n,r){let{radius:i=40,maxZoom:a=18,minZoom:o=0,zoom:s=2}=r;if(n.pointIndex){let r=n.pointIndex.getClusters(n.extent,Math.floor(s));return n.dataArray=r.map((n,r)=>nA({coordinates:n.geometry.coordinates,_id:r+1},n.properties)),n;}let l=new nb.default({radius:i,minZoom:o,maxZoom:a}),u={features:[]};return u.features=n.dataArray.map(n=>({type:"Feature",geometry:{type:"Point",coordinates:n.coordinates},properties:nA({},n)})),l.load(u.features),l;}function nO(n){let r;if(0===n.length)return 0;let i=n[0],a=0;for(let o=1;o<n.length;o++)r=i+1*n[o],Math.abs(i)>=Math.abs(n[o])?a+=i-r+n[o]:a+=n[o]-r+i,i=r;return i+1*a;}var nM={min:function(n){if(0===n.length)throw Error("min requires at least one data point");let r=n[0];for(let i=1;i<n.length;i++)n[i]<r&&(r=n[i]);return r;},max:function(n){if(0===n.length)throw Error("max requires at least one data point");let r=n[0];for(let i=1;i<n.length;i++)n[i]>r&&(r=n[i]);return r;},mean:function(n){if(0===n.length)throw Error("mean requires at least one data point");return nO(n)/n.length;},sum:nO},nR=Object.defineProperty,nP=Object.getOwnPropertySymbols,nk=Object.prototype.hasOwnProperty,nI=Object.prototype.propertyIsEnumerable,nL=(n,r,i)=>r in n?nR(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i,nN=(n,r)=>{for(var i in r||(r={}))nk.call(r,i)&&nL(n,i,r[i]);if(nP)for(var i of nP(r))nI.call(r,i)&&nL(n,i,r[i]);return n;},nD=(n,r,i)=>new Promise((a,o)=>{var s=n=>{try{u(i.next(n));}catch(n){o(n);}},l=n=>{try{u(i.throw(n));}catch(n){o(n);}},u=n=>n.done?a(n.value):Promise.resolve(n.value).then(s,l);u((i=i.apply(n,r)).next());}),{cloneDeep:nF,isFunction:nB,isString:nj,mergeWith:nz}=E.lodashUtil;function nU(n,r){if(Array.isArray(r))return r;}var nV=class extends ny.EventEmitter{constructor(n,r){super(),this.type="source",this.isTile=!1,this.inited=!1,this.hooks={init:new nv.SyncHook},this.parser={type:"geojson"},this.transforms=[],this.cluster=!1,this.clusterOptions={enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"},this.invalidExtent=!1,this.dataArrayChanged=!1,this.cfg={autoRender:!0},this.originData=n,this.initCfg(r),this.init().then(()=>{this.inited=!0,this.emit("update",{type:"inited"});});}getSourceCfg(){return this.cfg;}getClusters(n){return this.clusterIndex.getClusters(this.caculClusterExtent(2),n);}getClustersLeaves(n){return this.clusterIndex.getLeaves(n,1/0);}getParserType(){return this.parser.type;}updateClusterData(n){let{method:r="sum",field:i}=this.clusterOptions,a=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(n));this.clusterOptions.zoom=n,a.forEach(n=>{n.id||(n.properties.point_count=1);}),(i||nB(r))&&(a=a.map(n=>{let a=n.id;if(a){let o;let s=this.clusterIndex.getLeaves(a,1/0).map(n=>n.properties);if(nj(r)&&i){let n=s.map(n=>1*n[i]);o=nM[r](n);}nB(r)&&(o=r(s)),n.properties.stat=o;}else n.properties.point_count=1;return n;})),this.data=u("geojson")({type:"FeatureCollection",features:a}),this.executeTrans();}getFeatureById(n){let{type:r="geojson",geometry:i}=this.parser;if("geojson"!==r||this.cluster)return"json"===r&&i?this.data.dataArray.find(r=>r._id===n):n<this.data.dataArray.length?this.data.dataArray[n]:"null";{let r=nF(n<this.originData.features.length?this.originData.features[n]:"null");if((null==r?void 0:r.properties)&&(0!==this.transforms.length||this.dataArrayChanged)){let i=this.data.dataArray.find(r=>r._id===n);r.properties=i;}return r;}}updateFeaturePropertiesById(n,r){this.data.dataArray=this.data.dataArray.map(i=>i._id===n?nN(nN({},i),r):i),this.dataArrayChanged=!0,this.emit("update",{type:"update"});}getFeatureId(n,r){let i=this.data.dataArray.find(i=>i[n]===r);return null==i?void 0:i._id;}setData(n,r){this.originData=n,this.dataArrayChanged=!1,this.initCfg(r),this.init().then(()=>{this.emit("update",{type:"update"});});}reloadAllTile(){var n;null==(n=this.tileset)||n.reloadAll();}reloadTilebyId(n,r,i){var a;null==(a=this.tileset)||a.reloadTileById(n,r,i);}reloadTileByLnglat(n,r,i){var a;null==(a=this.tileset)||a.reloadTileByLnglat(n,r,i);}getTileExtent(n,r){var i;return null==(i=this.tileset)?void 0:i.getTileExtent(n,r);}getTileByZXY(n,r,i){var a;return null==(a=this.tileset)?void 0:a.getTileByZXY(n,r,i);}reloadTileByExtent(n,r){var i;null==(i=this.tileset)||i.reloadTileByExtent(n,r);}destroy(){var n;this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null,null==(n=this.tileset)||n.destroy();}processData(){return nD(this,null,function*(){return new Promise((n,r)=>{try{this.excuteParser(),this.initCluster(),this.executeTrans(),n({});}catch(n){r(n);}});});}initCfg(n){this.cfg=nz(this.cfg,n,nU);let r=this.cfg;r&&(r.parser&&(this.parser=r.parser),r.transforms&&(this.transforms=r.transforms),this.cluster=r.cluster||!1,r.clusterOptions&&(this.cluster=!0,this.clusterOptions=nN(nN({},this.clusterOptions),r.clusterOptions)));}init(){return nD(this,null,function*(){this.inited=!1,yield this.processData(),this.inited=!0;});}excuteParser(){let n=this.parser,r=u(n.type||"geojson");this.data=r(this.originData,n),this.tileset=this.initTileset(),n.cancelExtent||(this.extent=(0,E.extent)(this.data.dataArray),this.setCenter(this.extent),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3]);}setCenter(n){this.center=[(n[0]+n[2])/2,(n[1]+n[3])/2],(isNaN(this.center[0])||isNaN(this.center[1]))&&(this.center=[108.92361111111111,34.54083333333333]);}initTileset(){let{tilesetOptions:n}=this.data;return n?(this.isTile=!0,this.tileset)?(this.tileset.updateOptions(n),this.tileset):new E.TilesetManager(nN({},n)):void 0;}executeTrans(){this.transforms.forEach(n=>{let{type:r}=n,i=f(r)(this.data,n);Object.assign(this.data,i);});}initCluster(){if(!this.cluster)return;let n=this.clusterOptions||{};this.clusterIndex=nC(this.data,n);}caculClusterExtent(n){let r=[[-1/0,-1/0],[1/0,1/0]];return this.invalidExtent||(r=(0,E.padBounds)((0,E.bBoxToBounds)(this.extent),n)),r[0].concat(r[1]);}},nG=Math.PI/3,nH=[0,nG,2*nG,3*nG,4*nG,5*nG];function nW(n){return n[0];}function nX(n){return n[1];}var nq=function(){var n,r,i,a=0,o=0,s=1,l=1,u=nW,c=nX;function f(n){var a,o={},s=[],l=n.length;for(a=0;a<l;++a)if(!(isNaN(d=+u.call(null,f=n[a],a,n))||isNaN(h=+c.call(null,f,a,n)))){var f,d,h,p=Math.round(h/=i),m=Math.round(d=d/r-(1&p)/2),g=h-p;if(3*Math.abs(g)>1){var v=d-m,y=m+(d<m?-1:1)/2,_=p+(h<p?-1:1),b=d-y,x=h-_;v*v+g*g>b*b+x*x&&(m=y+(1&p?1:-1)/2,p=_);}var E=m+"-"+p,w=o[E];w?w.push(f):(s.push(w=o[E]=[f]),w.x=(m+(1&p)/2)*r,w.y=p*i);}return s;}function d(n){var r=0,i=0;return nH.map(function(a){var o=Math.sin(a)*n,s=-Math.cos(a)*n,l=o-r,u=s-i;return r=o,i=s,[l,u];});}return f.hexagon=function(r){return"m"+d(null==r?n:+r).join("l")+"z";},f.centers=function(){for(var u=[],c=Math.round(o/i),f=Math.round(a/r),d=c*i;d<l+n;d+=i,++c)for(var h=f*r+(1&c)*r/2;h<s+r/2;h+=r)u.push([h,d]);return u;},f.mesh=function(){var r=d(n).slice(0,4).join("l");return f.centers().map(function(n){return"M"+n+"m"+r;}).join("");},f.x=function(n){return arguments.length?(u=n,f):u;},f.y=function(n){return arguments.length?(c=n,f):c;},f.radius=function(a){return arguments.length?(r=2*(n=+a)*Math.sin(nG),i=1.5*n,f):n;},f.size=function(n){return arguments.length?(a=o=0,s=+n[0],l=+n[1],f):[s-a,l-o];},f.extent=function(n){return arguments.length?(a=+n[0][0],o=+n[0][1],s=+n[1][0],l=+n[1][1],f):[[a,o],[s,l]];},f.radius(1);},n$=Object.defineProperty,nY=Object.defineProperties,nZ=Object.getOwnPropertyDescriptors,nK=Object.getOwnPropertySymbols,nQ=Object.prototype.hasOwnProperty,nJ=Object.prototype.propertyIsEnumerable,n0=(n,r,i)=>r in n?n$(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i,n1=(n,r)=>{for(var i in r||(r={}))nQ.call(r,i)&&n0(n,i,r[i]);if(nK)for(var i of nK(r))nJ.call(r,i)&&n0(n,i,r[i]);return n;},n2=(n,r)=>nY(n,nZ(r)),n3=Object.defineProperty,n4=Object.getOwnPropertySymbols,n5=Object.prototype.hasOwnProperty,n6=Object.prototype.propertyIsEnumerable,n8=(n,r,i)=>r in n?n3(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i,n7=(n,r)=>{for(var i in r||(r={}))n5.call(r,i)&&n8(n,i,r[i]);if(n4)for(var i of n4(r))n6.call(r,i)&&n8(n,i,r[i]);return n;};o._(i("562f4065"),r),o._(i("e60efa84"),r);var n9=Object.defineProperty,re=Object.defineProperties,rt=Object.getOwnPropertyDescriptors,rn=Object.getOwnPropertySymbols,rr=Object.prototype.hasOwnProperty,ri=Object.prototype.propertyIsEnumerable,ra=(n,r,i)=>r in n?n9(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i,ro=(n,r)=>{for(var i in r||(r={}))rr.call(r,i)&&ra(n,i,r[i]);if(rn)for(var i of rn(r))ri.call(r,i)&&ra(n,i,r[i]);return n;},rs=(n,r)=>re(n,rt(r));function rl(n,r={}){let i,a,o,s;let{enableRelativeCoordinates:l=!1,relativeOrigin:u}=r;if(!l)return{dataArray:n,relativeOrigin:[0,0],originalExtent:[0,0,0,0]};let c=1/0,f=-1/0,d=1/0,h=-1/0;n.forEach(n=>{let r=n.coordinates;if(!r)return;let i=n=>{if("number"==typeof n[0]&&"number"==typeof n[1]){let[r,i]=n;c=Math.min(c,r),f=Math.max(f,r),d=Math.min(d,i),h=Math.max(h,i);}else Array.isArray(n[0])&&n.forEach(i);};i(r);});let p=[c,d,f,h],m=u||(i=1/0,a=-1/0,o=1/0,s=-1/0,n.forEach(n=>{let r=n.coordinates;if(!r)return;let l=n=>{if("number"==typeof n[0]&&"number"==typeof n[1]){let[r,l]=n;i=Math.min(i,r),a=Math.max(a,r),o=Math.min(o,l),s=Math.max(s,l);}else Array.isArray(n[0])&&n.forEach(l);};l(r);}),[(i+a)/2,(o+s)/2]);return{dataArray:function(n,r){let[i,a]=r;return n.map(n=>{if(!n.coordinates)return n;let r=n=>"number"==typeof n[0]&&"number"==typeof n[1]?[Number((n[0]-i).toPrecision(15)),Number((n[1]-a).toPrecision(15)),...n.slice(2)||[]]:Array.isArray(n[0])?n.map(r):n;return rs(ro({},n),{coordinates:r(n.coordinates)});});}(n,m),relativeOrigin:m,originalExtent:p};}c("rasterTile",function(n,r={}){if(Array.isArray(n)&&0===n.length||!Array.isArray(n)&&"string"!=typeof n)throw Error("tile server url is error");let{extent:i=[1/0,1/0,-1/0,-1/0],coordinates:a}=r,o=(null==r?void 0:r.dataType)||e9.RasterTileType.IMAGE;o===e9.RasterTileType.RGB&&(o=e9.RasterTileType.ARRAYBUFFER);let s=tD(tN(tN({},tF),r),{getTileData:(i,a)=>{switch(o){case e9.RasterTileType.IMAGE:return tA(n,i,a,r);case e9.RasterTileType.CUSTOMIMAGE:case e9.RasterTileType.CUSTOMTERRAINRGB:return tn(a,null==r?void 0:r.getCustomData);case e9.RasterTileType.ARRAYBUFFER:return tT(n,i,a,r);case e9.RasterTileType.CUSTOMARRAYBUFFER:case e9.RasterTileType.CUSTOMRGB:return tt(a,null==r?void 0:r.getCustomData,(null==r?void 0:r.format)||tC,null==r?void 0:r.operation);default:return tA(n,i,a,r);}}});return{data:n,dataArray:[{_id:1,coordinates:C(a,i)}],tilesetOptions:s,isTile:!0};}),c("mvt",function(n,r){let i=Array.isArray(n)?n[0]:n,a=e4(e3(e3({},e6),r),{getTileData:(n,a)=>e8(i,n,a,null==r?void 0:r.requestParameters,null==r?void 0:r.getCustomData)});return{data:i,dataArray:[],tilesetOptions:a,isTile:!0};}),c("geojsonvt",function(n,r){let i=function(n){let r={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!0,debug:0};return void 0===n||void 0===n.geojsonvtOptions?r:eE(eE({},r),n.geojsonvtOptions);}(r),a=i.extent||4096,o=new ed(n,i);return{data:n,dataArray:[],tilesetOptions:ew(eE(eE({},eT),r),{getTileData:(n,r)=>eC(r,o,n,a)}),isTile:!0};}),c("testTile",function(n,r){return{data:n,dataArray:[],tilesetOptions:nh(nd(nd({},nm),r),{getTileData:n=>ng(n)}),isTile:!0};}),c("geojson",function(n,r){let i=[],a={};return n.features?(n.features=n.features.filter(n=>{let r=n.geometry;return null!=n&&r&&r.type&&r.coordinates&&r.coordinates.length>0;}),0===(n=A(n)).features.length)?{dataArray:[],featureKeys:a}:((0,x.flattenEach)(n,(n,a)=>{var o;let s=void 0===(o=null==r?void 0:r.featureId)?null:isNaN(1*n.properties[o])?n.properties&&n.properties[o]?function(n){let r=n.toString(),i=5381,a=r.length;for(;a;)i=33*i^r.charCodeAt(--a);return i>>>0;}(n.properties[o]+"")%1000019:null:1*n.properties[o];null===s&&(s=a);let l=s,u=(0,b.getCoords)(n),c=X(W({},n.properties),{coordinates:u,_id:l});i.push(c);}),{dataArray:i,featureKeys:a}):(n.features=[],{dataArray:[]});}),c("jsonTile",function(n,r){return{dataArray:[],tilesetOptions:eW(eH({},r),{getTileData:(i,a)=>eq(n,a,null==r?void 0:r.requestParameters,r.getCustomData)}),isTile:!0};}),c("image",function n(r,i){let{extent:a=[121.168,30.2828,121.384,30.4219],coordinates:o,requestParameters:s={}}=i,l=new Promise(i=>{r instanceof HTMLImageElement||(0,E.isImageBitmap)(r)?i([r]):function(r,i,a){let o=[];if("string"==typeof r)(0,E.getImage)(eD(eN({},i),{url:r}),(n,r)=>{r&&(o.push(r),a(o));});else{let n=r.length,s=0;r.forEach(r=>{(0,E.getImage)(eD(eN({},i),{url:r}),(r,i)=>{s++,i&&o.push(i),s===n&&a(o);});});}return n;}(r,s,n=>{i(n);});});return{originData:r,images:l,_id:1,dataArray:[{_id:0,coordinates:C(o,a)}]};}),c("csv",function(n,r){return F(_(n),r);}),c("json",F),c("raster",function(n,r){let i,a,o;let{extent:s=[121.168,30.2828,121.384,30.4219],coordinates:l,width:u,height:c,min:f,max:d,format:h,operation:p}=r;if(void 0===h||T(n))i=Array.from(n),a=u,o=c;else{let r=Array.isArray(n)?n:[n];i=(0,e7.bandsOperation)(r,h,p);}return{_id:1,dataArray:[{_id:1,data:i,width:a,height:o,min:f,max:d,coordinates:C(l,s)}]};}),c("rasterRgb",function(n,r){let i;let{extent:a,coordinates:o,min:s,max:l,width:u,height:c,format:f,operation:d}=r,h=ni(r,["extent","coordinates","min","max","width","height","format","operation"]);if(void 0===f||T(n))i=Array.from(n);else{let r=Array.isArray(n)?n:[n];i=(0,e7.bandsOperation)(r,f,d);}let p=C(o,a);return{_id:1,dataArray:[nr(nn({_id:1,data:i,width:u,height:c},h),{min:s,max:l,coordinates:p})]};}),c("rgb",function(n,r){let{extent:i,coordinates:a,width:o,height:s}=r,l=t4(r,["extent","coordinates","width","height"]);n.length<3&&console.warn("RGB\u89E3\u6790\u9700\u8981\u4E09\u4E2A\u6CE2\u6BB5\u7684\u6570\u636E");let[u,c,f]=l.bands||[0,1,2],d=[n[u],n[c],n[f]],h=[],[p,m]=(null==l?void 0:l.countCut)||[2,98],g=(null==l?void 0:l.RMinMax)||(0,t$.percentile)(d[0],p,m),v=(null==l?void 0:l.GMinMax)||(0,t$.percentile)(d[1],p,m),y=(null==l?void 0:l.BMinMax)||(0,t$.percentile)(d[2],p,m);for(let n=0;n<d[0].length;n++)h.push(Math.max(0,d[0][n]-g[0])),h.push(Math.max(0,d[1][n]-v[0])),h.push(Math.max(0,d[2][n]-y[0]));let _=C(a,i);return{_id:1,dataArray:[t3(t2({_id:1,data:h,width:o,height:s,rMinMax:g,gMinMax:v,bMinMax:y},l),{coordinates:_})]};}),c("ndi",function(n,r){let{extent:i=[121.168,30.2828,121.384,30.4219],coordinates:a,width:o,height:s}=r,l=tq(r,["extent","coordinates","width","height"]);n.length<2&&console.warn("RGB\u89E3\u6790\u9700\u89812\u4E2A\u6CE2\u6BB5\u7684\u6570\u636E");let[u,c]=l.bands||[0,1],f=[n[u],n[c]],d=[];for(let n=0;n<f[0].length;n++)d.push((f[1][n]-f[0][n])/(f[1][n]+f[0][n]));let h=C(a,i);return{_id:1,dataArray:[tX(tW({_id:1,data:d,width:o,height:s},l),{coordinates:h})]};}),d("cluster",nC),d("filter",function(n,r){let{callback:i}=r;return i&&(n.dataArray=n.dataArray.filter(i)),n;}),d("join",function(n,r){let{sourceField:i,targetField:a,data:o}=r,s={};return o.forEach(n=>{s[n[i]]=n;}),n.dataArray=n.dataArray.map(n=>{let r=n[a];return n7(n7({},n),s[r]);}),n;}),d("map",function(n,r){let{callback:i}=r;return i&&(n.dataArray=n.dataArray.map(i)),n;}),d("grid",function(n,r){let i=n.dataArray,{size:a=10}=r,o=a/(2*Math.PI*6378e3)*268435456/2,{gridHash:s,gridOffset:l}=function(n,r){let i,a=1/0,o=-1/0;for(let r of n)Number.isFinite(i=r.coordinates[1])&&(a=i<a?i:a,o=i>o?i:o);let s={yOffset:r/6378e3*(180/Math.PI),xOffset:r/6378e3*(180/Math.PI)/Math.cos((a+o)/2*Math.PI/180)};if(s.xOffset<=0||s.yOffset<=0)return{gridHash:{},gridOffset:s};let l={};for(let r of n){let n=r.coordinates[1],i=r.coordinates[0];if(Number.isFinite(n)&&Number.isFinite(i)){let a=Math.floor((n+90)/s.yOffset),o=Math.floor((i+180)/s.xOffset),u=`${a}-${o}`;l[u]=l[u]||{count:0,points:[]},l[u].count+=1,l[u].points.push(r);}}return{gridHash:l,gridOffset:s};}(i,a);return{yOffset:o,xOffset:o,radius:o,type:"grid",dataArray:Object.keys(s).reduce((n,i,a)=>{let o=i.split("-"),u=parseInt(o[0],10),c=parseInt(o[1],10),f={};if(r.field&&r.method){let n=E.Satistics.getColumn(s[i].points,r.field);f[r.method]=E.Satistics.statMap[r.method](n);}return Object.assign(f,{_id:a,coordinates:(0,E.aProjectFlat)([-180+l.xOffset*(c+.5),-90+l.yOffset*(u+.5)]),rawData:s[i].points,count:s[i].count}),n.push(f),n;},[])};}),d("hexagon",function(n,r){let i=n.dataArray,{size:a=10,method:o="sum"}=r,s=a/(2*Math.PI*6378e3)*268435456/2,l=i.map(n=>{let[r,i]=(0,E.aProjectFlat)(n.coordinates);return n2(n1({},n),{coordinates:[r,i]});});return{dataArray:nq().radius(s).x(n=>n.coordinates[0]).y(n=>n.coordinates[1])(l).map((n,i)=>{if(r.field&&o){let i=E.Satistics.getColumn(n,r.field);n[o]=E.Satistics.statMap[o](i);}return{[r.method]:n[o],count:n.length,rawData:n,coordinates:[n.x,n.y],_id:i};}),radius:s,xOffset:s,yOffset:s,type:"hexagon"};});var ru=nV;},"8ba174bc":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return x;},useLegacyItems:function(){return b;}});var a=i("777fffbe"),o=i("852bbaa9"),s=a._(i("613f75ca")),l=a._(i("e4870cf0")),u=a._(i("a5a99096")),c=a._(i("91c0242a")),f=a._(i("384da8f0")),d=a._(i("064ecd09")),h=a._(i("f3efd1e9")),p=i("a275200c"),m=o._(i("609f48be")),g=a._(i("a19e1e02")),v=i("dac8af92");i("1054d627");var y=["tab","children"],_=["key","tab","tabKey","disabled","destroyInactiveTabPane","children","className","style","cardProps"];function b(n,r,i){return n?n.map(function(n){return(0,l.default)((0,l.default)({},n),{},{children:(0,v.jsx)(g.default,(0,l.default)((0,l.default)({},null==i?void 0:i.cardProps),{},{children:n.children}))});}):((0,p.noteOnce)(!i,"Tabs.TabPane is deprecated. Please use `items` directly."),(0,h.default)(r).map(function(n){if(m.default.isValidElement(n)){var r=n.key,a=n.props||{},o=a.tab,u=a.children,c=(0,s.default)(a,y);return(0,l.default)((0,l.default)({key:String(r)},c),{},{children:(0,v.jsx)(g.default,(0,l.default)((0,l.default)({},null==i?void 0:i.cardProps),{},{children:u})),label:o});}return null;}).filter(function(n){return n;}));}var x=function(n){var r=(0,m.useContext)(u.default.ConfigContext).getPrefixCls;if(f.default.startsWith("5"))return(0,v.jsx)(v.Fragment,{});var i=n.key,a=n.tab,o=n.tabKey,h=n.disabled,p=n.destroyInactiveTabPane,y=n.children,b=n.className,x=n.style,E=n.cardProps,w=(0,s.default)(n,_),S=r("pro-card-tabpane"),T=(0,d.default)(S,b);return(0,v.jsx)(c.default.TabPane,(0,l.default)((0,l.default)({tabKey:o,tab:a,className:T,style:x,disabled:h,destroyInactiveTabPane:p},w),{},{children:(0,v.jsx)(g.default,(0,l.default)((0,l.default)({},E),{},{children:y}))}),i);};},"8c0d48bf":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{createInterpolateColor:function(){return f;},createInterpolateNumber:function(){return c;},createInterpolateRound:function(){return h;},createInterpolateValue:function(){return d;}});var a=i("777fffbe"),o=i("2483f485"),s=a._(o);function l(n,r,i){let a=i;return(a<0&&(a+=1),a>1&&(a-=1),a<1/6)?n+(r-n)*6*a:a<.5?r:a<2/3?n+(r-n)*(2/3-a)*6:n;}function u(n){let r=s.default.get(n);if(!r)return null;let{model:i,value:a}=r;return"rgb"===i?a:"hsl"===i?function(n){let r=n[0]/360,i=n[1]/100,a=n[2]/100,o=n[3];if(0===i)return[255*a,255*a,255*a,o];let s=a<.5?a*(1+i):a+i-a*i,u=2*a-s;return[255*l(u,s,r+1/3),255*l(u,s,r),255*l(u,s,r-1/3),o];}(a):null;}let c=(n,r)=>i=>n*(1-i)+r*i,f=(n,r)=>{let i=u(n),a=u(r);return null===i||null===a?i?()=>n:()=>r:n=>{let r=[,,,,];for(let o=0;o<4;o+=1){let s=i[o],l=a[o];r[o]=s*(1-n)+l*n;}let[o,s,l,u]=r;return`rgba(${Math.round(o)}, ${Math.round(s)}, ${Math.round(l)}, ${u})`;};},d=(n,r)=>"number"==typeof n&&"number"==typeof r?c(n,r):"string"==typeof n&&"string"==typeof r?f(n,r):()=>n,h=(n,r)=>{let i=c(n,r);return n=>Math.round(i(n));};},"8c4eb2fb":function(n,r,i){var a=i("f53c9952"),o=i("78ccff10");n.exports=function(n,r){return a(n,o(n),r);};},"8c723d25":function(n,r,i){var a=i("96b0a7e2"),o=i("13850e1a"),s=i("7bcda897"),l=0/0,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,f=/^0o[0-7]+$/i,d=parseInt;n.exports=function(n){if("number"==typeof n)return n;if(s(n))return l;if(o(n)){var r="function"==typeof n.valueOf?n.valueOf():n;n=o(r)?r+"":r;}if("string"!=typeof n)return 0===n?n:+n;n=a(n);var i=c.test(n);return i||f.test(n)?d(n.slice(2),i?2:8):u.test(n)?l:+n;};},"8c7e4dff":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"isNormalizedArray",{enumerable:!0,get:function(){return o;}});var a=i("b88503dc");function o(n){return(0,a.isAbsoluteArray)(n)&&n.every(function(n){var r=n[0];return"ACLMQZ".includes(r);});}},"8ccd78b4":function(n,r,i){"use strict";function a(n){return!!(n.addonBefore||n.addonAfter);}function o(n){return!!(n.prefix||n.suffix||n.allowClear);}function s(n,r,i){var a=r.cloneNode(!0),o=Object.create(n,{target:{value:a},currentTarget:{value:a}});return a.value=i,"number"==typeof r.selectionStart&&"number"==typeof r.selectionEnd&&(a.selectionStart=r.selectionStart,a.selectionEnd=r.selectionEnd),a.setSelectionRange=function(){r.setSelectionRange.apply(r,arguments);},o;}function l(n,r,i,a){if(i){var o=r;if("click"===r.type){i(o=s(r,n,""));return;}if("file"!==n.type&&void 0!==a){i(o=s(r,n,a));return;}i(o);}}function u(n,r){if(n){n.focus(r);var i=(r||{}).cursor;if(i){var a=n.value.length;switch(i){case"start":n.setSelectionRange(0,0);break;case"end":n.setSelectionRange(a,a);break;default:n.setSelectionRange(0,a);}}}}i.d(r,"__esModule",{value:!0}),i.e(r,{hasAddon:function(){return a;},hasPrefixSuffix:function(){return o;},resolveOnChange:function(){return l;},triggerFocus:function(){return u;}});},"8e17111c":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"RenderBlock",{enumerable:!0,get:function(){return o;}});var a=i("852bbaa9")._(i("609f48be")),o=a.memo(function(){var n,r,i,o,s,l=(r=a.useRef(0),r.current+=1,i=a.useRef(void 0),o=[],Object.keys(n||{}).map(function(r){var a;(null==n?void 0:n[r])!==(null===(a=i.current)||void 0===a?void 0:a[r])&&o.push(r);}),i.current=n,s=a.useRef([]),o.length&&(s.current=o),a.useDebugValue(r.current),a.useDebugValue(s.current.join(", ")),r.current);return a.createElement("h1",null,"Render Times: ",l);});},"8e1e429e":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return c;}});var a=i("7b8bcee7");function o(n,r){return n.parent===r.parent?1:2;}function s(n){var r=n.children;return r?r[0]:n.t;}function l(n){var r=n.children;return r?r[r.length-1]:n.t;}function u(n,r){this._=n,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=r;}function c(){var n=o,r=1,i=1,a=null;function c(o){var s=function(n){for(var r,i,a,o,s,l=new u(n,0),c=[l];r=c.pop();)if(a=r._.children)for(r.children=Array(s=a.length),o=s-1;o>=0;--o)c.push(i=r.children[o]=new u(a[o],o)),i.parent=r;return(l.parent=new u(null,0)).children=[l],l;}(o);if(s.eachAfter(f),s.parent.m=-s.z,s.eachBefore(d),a)o.eachBefore(h);else{var l=o,c=o,p=o;o.eachBefore(function(n){n.x<l.x&&(l=n),n.x>c.x&&(c=n),n.depth>p.depth&&(p=n);});var m=l===c?1:n(l,c)/2,g=m-l.x,v=r/(c.x+m+g),y=i/(p.depth||1);o.eachBefore(function(n){n.x=(n.x+g)*v,n.y=n.depth*y;});}return o;}function f(r){var i=r.children,a=r.parent.children,o=r.i?a[r.i-1]:null;if(i){!function(n){for(var r,i=0,a=0,o=n.children,s=o.length;--s>=0;)r=o[s],r.z+=i,r.m+=i,i+=r.s+(a+=r.c);}(r);var u=(i[0].z+i[i.length-1].z)/2;o?(r.z=o.z+n(r._,o._),r.m=r.z-u):r.z=u;}else o&&(r.z=o.z+n(r._,o._));r.parent.A=function(r,i,a){if(i){for(var o,u,c,f=r,d=r,h=i,p=f.parent.children[0],m=f.m,g=d.m,v=h.m,y=p.m;h=l(h),f=s(f),h&&f;)p=s(p),(d=l(d)).a=r,(c=h.z+v-f.z-m+n(h._,f._))>0&&(function(n,r,i){var a=i/(r.i-n.i);r.c-=a,r.s+=i,n.c+=a,r.z+=i,r.m+=i;}((o=h,u=a,o.a.parent===r.parent?o.a:u),r,c),m+=c,g+=c),v+=h.m,m+=f.m,y+=p.m,g+=d.m;h&&!l(d)&&(d.t=h,d.m+=v-g),f&&!s(p)&&(p.t=f,p.m+=m-y,a=r);}return a;}(r,o,r.parent.A||a[0]);}function d(n){n._.x=n.z+n.parent.m,n.m+=n.parent.m;}function h(n){n.x*=r,n.y=n.depth*i;}return c.separation=function(r){return arguments.length?(n=r,c):n;},c.size=function(n){return arguments.length?(a=!1,r=+n[0],i=+n[1],c):a?null:[r,i];},c.nodeSize=function(n){return arguments.length?(a=!0,r=+n[0],i=+n[1],c):a?[r,i]:null;},c;}u.prototype=Object.create(a.Node.prototype);},"8e66fe3e":function(n,r,i){var a=i("92a1e96c");function o(n,r){if("function"!=typeof n||null!=r&&"function"!=typeof r)throw TypeError("Expected a function");var i=function(){var a=arguments,o=r?r.apply(this,a):a[0],s=i.cache;if(s.has(o))return s.get(o);var l=n.apply(this,a);return i.cache=s.set(o,l)||s,l;};return i.cache=new(o.Cache||a),i;}o.Cache=a,n.exports=o;},"8e9bca0c":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{LngLat:function(){return l;},earthRadius:function(){return s;}});var a=i("777fffbe")._(i("a854094b")),o=i("078616b2");let s=6371008.8;class l{constructor(n,r){if((0,a.default)(this,"lng",void 0),(0,a.default)(this,"lat",void 0),isNaN(n)||isNaN(r))throw Error(`Invalid LngLat object: (${n}, ${r})`);if(this.lng=+n,this.lat=+r,this.lat>90||this.lat<-90)throw Error("Invalid LngLat latitude value: must be between -90 and 90");}wrap(){return new l((0,o.wrap)(this.lng,-180,180),this.lat);}toArray(){return[this.lng,this.lat];}toString(){return`LngLat(${this.lng}, ${this.lat})`;}distanceTo(n){let r=Math.PI/180,i=this.lat*r,a=n.lat*r;return s*Math.acos(Math.min(Math.sin(i)*Math.sin(a)+Math.cos(i)*Math.cos(a)*Math.cos((n.lng-this.lng)*r),1));}static convert(n){if(n instanceof l)return n;if(Array.isArray(n)&&(2===n.length||3===n.length))return new l(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&"object"==typeof n&&null!==n)return new l(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]");}}},"8f2efba6":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return b;}});var a=i("777fffbe"),o=i("480dd2d5"),s=a._(o),l=i("670b2160"),u=a._(l),c=i("6f0d7bd0"),f=a._(c),d={};d["[object Float32Array]"]=d["[object Float64Array]"]=d["[object Int8Array]"]=d["[object Int16Array]"]=d["[object Int32Array]"]=d["[object Uint8Array]"]=d["[object Uint8ClampedArray]"]=d["[object Uint16Array]"]=d["[object Uint32Array]"]=!0,d["[object Arguments]"]=d["[object Array]"]=d["[object ArrayBuffer]"]=d["[object Boolean]"]=d["[object DataView]"]=d["[object Date]"]=d["[object Error]"]=d["[object Function]"]=d["[object Map]"]=d["[object Number]"]=d["[object Object]"]=d["[object RegExp]"]=d["[object Set]"]=d["[object String]"]=d["[object WeakMap]"]=!1;var h=i("6a859b73"),p=a._(h),m="object"==typeof r&&r&&!r.nodeType&&r,g=m&&"object"==typeof n&&n&&!n.nodeType&&n,v=g&&g.exports===m&&p.default.process,y=function(){try{var n=g&&g.require&&g.require("util").types;if(n)return n;return v&&v.binding&&v.binding("util");}catch(n){}}(),_=y&&y.isTypedArray,b=_?function(n){return _(n);}:function(n){return(0,f.default)(n)&&(0,u.default)(n.length)&&!!d[(0,s.default)(n)];};},"8f2f8753":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return f;}});var a=i("777fffbe"),o=a._(i("49f51d84")),s=a._(i("110b1906")),l=a._(i("352bae92")),u=i("d09fdf20"),c=i("91c1eb9d");function f(n,r){var i=(0,s.default)(!0),a=null,f=l.default,d=null,h=(0,u.withPath)(p);function p(s){var l,u,c,p=(s=(0,o.default)(s)).length,m=!1;for(null==a&&(d=f(c=h())),l=0;l<=p;++l)!(l<p&&i(u=s[l],l,s))===m&&((m=!m)?d.lineStart():d.lineEnd()),m&&d.point(+n(u,l,s),+r(u,l,s));if(c)return d=null,c+""||null;}return n="function"==typeof n?n:void 0===n?c.x:(0,s.default)(n),r="function"==typeof r?r:void 0===r?c.y:(0,s.default)(r),p.x=function(r){return arguments.length?(n="function"==typeof r?r:(0,s.default)(+r),p):n;},p.y=function(n){return arguments.length?(r="function"==typeof n?n:(0,s.default)(+n),p):r;},p.defined=function(n){return arguments.length?(i="function"==typeof n?n:(0,s.default)(!!n),p):i;},p.curve=function(n){return arguments.length?(f=n,null!=a&&(d=f(a)),p):f;},p.context=function(n){return arguments.length?(null==n?a=d=null:d=f(a=n),p):a;},p;}},"8f3cfa5a":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"lodashUtil",{enumerable:!0,get:function(){return O;}});var a=i("777fffbe"),o=a._(i("4e82a4b0")),s=a._(i("9e002045")),l=a._(i("b60abbbd")),u=a._(i("4a936d43")),c=a._(i("d6a4ea8a")),f=a._(i("23ec6b43")),d=a._(i("f60aa243")),h=a._(i("4858db45")),p=a._(i("1b6a3e38")),m=a._(i("3301e887")),g=a._(i("a59b28c4")),v=a._(i("0cde993c")),y=a._(i("6df780c1")),_=a._(i("4bb2c4c7")),b=a._(i("83d97c4d")),x=a._(i("1d53d00e")),E=a._(i("1fd52657")),w=a._(i("e0b9dec4")),S=a._(i("13850e1a")),T=a._(i("e956988f")),A=a._(i("663575cb")),C=a._(i("25caeceb")),O={isNil:d.default,merge:v.default,throttle:b.default,isString:m.default,debounce:l.default,pull:_.default,isTypedArray:g.default,isPlainObject:p.default,isNumber:h.default,isBoolean:c.default,isEqual:f.default,cloneDeep:s.default,uniq:x.default,clamp:o.default,upperFirst:E.default,get:u.default,mergeWith:y.default,isFunction:w.default,isObject:S.default,isUndefined:T.default,camelCase:A.default,uniqueId:C.default};},"8fe0a95a":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"ProFormListContainer",{enumerable:!0,get:function(){return b;}});var a=i("777fffbe"),o=a._(i("23934e00")),s=a._(i("9b84be4b")),l=a._(i("e4870cf0")),u=a._(i("ee64167d")),c=a._(i("06ecdd39")),f=i("64681837"),d=i("4e8d0e83"),h=i("58fbde6a"),p=a._(i("38ab0c18")),m=a._(i("ddaa0afd")),g=i("609f48be"),v=i("a6284f72"),y=i("20cb6955"),_=i("dac8af92"),b=function(n){var r=(0,f.useIntl)(),i=n.creatorButtonProps,a=n.prefixCls,b=n.children,x=n.creatorRecord,E=n.action,w=n.fields,S=n.actionGuard,T=n.max,A=n.fieldExtraRender,C=n.meta,O=n.containerClassName,M=n.containerStyle,R=n.onAfterAdd,P=n.onAfterRemove,k=(0,g.useContext)(f.ProProvider).hashId,I=(0,g.useRef)(new Map),L=(0,g.useState)(!1),N=(0,u.default)(L,2),D=N[0],F=N[1],B=(0,g.useMemo)(function(){return w.map(function(n){null!==(r=I.current)&&void 0!==r&&r.has(n.key.toString())||null===(a=I.current)||void 0===a||a.set(n.key.toString(),(0,d.nanoid)());var r,i,a,o=null===(i=I.current)||void 0===i?void 0:i.get(n.key.toString());return(0,l.default)((0,l.default)({},n),{},{uuid:o});});},[w]),j=(0,g.useMemo)(function(){var n=(0,l.default)({},E),r=B.length;return null!=S&&S.beforeAddRow?n.add=(0,s.default)((0,o.default)().mark(function n(){var i,a,s,l,u=arguments;return(0,o.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:for(a=Array(i=u.length),s=0;s<i;s++)a[s]=u[s];return n.next=3,S.beforeAddRow.apply(S,a.concat([r]));case 3:if(!n.sent){n.next=8;break;}return l=E.add.apply(E,a),null==R||R.apply(void 0,a.concat([r+1])),n.abrupt("return",l);case 8:return n.abrupt("return",!1);case 9:case"end":return n.stop();}},n);})):n.add=(0,s.default)((0,o.default)().mark(function n(){var i,a,s,l,u=arguments;return(0,o.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:for(a=Array(i=u.length),s=0;s<i;s++)a[s]=u[s];return l=E.add.apply(E,a),null==R||R.apply(void 0,a.concat([r+1])),n.abrupt("return",l);case 4:case"end":return n.stop();}},n);})),null!=S&&S.beforeRemoveRow?n.remove=(0,s.default)((0,o.default)().mark(function n(){var i,a,s,l,u=arguments;return(0,o.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:for(a=Array(i=u.length),s=0;s<i;s++)a[s]=u[s];return n.next=3,S.beforeRemoveRow.apply(S,a.concat([r]));case 3:if(!n.sent){n.next=8;break;}return l=E.remove.apply(E,a),null==P||P.apply(void 0,a.concat([r-1])),n.abrupt("return",l);case 8:return n.abrupt("return",!1);case 9:case"end":return n.stop();}},n);})):n.remove=(0,s.default)((0,o.default)().mark(function n(){var i,a,s,l,u=arguments;return(0,o.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:for(a=Array(i=u.length),s=0;s<i;s++)a[s]=u[s];return l=E.remove.apply(E,a),null==P||P.apply(void 0,a.concat([r-1])),n.abrupt("return",l);case 4:case"end":return n.stop();}},n);})),n;},[E,null==S?void 0:S.beforeAddRow,null==S?void 0:S.beforeRemoveRow,R,P,B.length]),z=(0,g.useMemo)(function(){if(!1===i||B.length===T)return null;var n=i||{},u=n.position,f=void 0===u?"bottom":u,d=n.creatorButtonText,g=void 0===d?r.getMessage("editableTable.action.add","\u6DFB\u52A0\u4E00\u884C\u6570\u636E"):d;return(0,_.jsx)(p.default,(0,l.default)((0,l.default)({className:"".concat(a,"-creator-button-").concat(f," ").concat(k||"").trim(),type:"dashed",loading:D,block:!0,icon:(0,_.jsx)(c.default,{})},(0,m.default)(i||{},["position","creatorButtonText"])),{},{onClick:(0,s.default)((0,o.default)().mark(function n(){var r,i;return(0,o.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return F(!0),i=B.length,"top"===f&&(i=0),n.next=5,j.add(null!==(r=(0,h.runFunction)(x))&&void 0!==r?r:{},i);case 5:F(!1);case 6:case"end":return n.stop();}},n);})),children:g}));},[i,B.length,T,r,a,k,D,j,x]),U=(0,g.useContext)(v.EditOrReadOnlyContext),V=(0,l.default)({width:"max-content",maxWidth:"100%",minWidth:"100%"},M),G=(0,g.useMemo)(function(){return B.map(function(r,i){return(0,g.createElement)(y.ProFormListItem,(0,l.default)((0,l.default)({},n),{},{key:r.uuid,field:r,index:i,action:j,count:B.length}),b);});},[b,n,B,j]);return"read"===U.mode||!0===n.readonly?(0,_.jsx)(_.Fragment,{children:G}):(0,_.jsxs)("div",{style:V,className:O,children:[!1!==i&&(null==i?void 0:i.position)==="top"&&z,G,A&&A(j,C),!1!==i&&(null==i?void 0:i.position)!=="top"&&z]});};},"904df147":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return y;}});var a=i("777fffbe"),o=i("852bbaa9"),s=a._(i("e4870cf0")),l=a._(i("613f75ca")),u=i("58fbde6a"),c=o._(i("609f48be")),f=a._(i("2faf3d77")),d=a._(i("551ddf56")),h=i("dac8af92"),p=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],m=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],g=c.default.forwardRef(function(n,r){var i=n.fieldProps,a=n.children,o=n.params,p=n.proFieldProps,g=n.mode,v=n.valueEnum,y=n.request,_=n.options,b=(0,l.default)(n,m),x=(0,s.default)({options:_,mode:g||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},i),E=(0,c.useContext)(f.default);return(0,h.jsx)(d.default,(0,s.default)((0,s.default)({valueEnum:(0,u.runFunction)(v),request:y,params:o,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,s.default)({getPopupContainer:E.getPopupContainer},x),ref:r,proFieldProps:p},b),{},{children:a}));}),v=c.default.forwardRef(function(n,r){var i=n.fieldProps,a=n.children,o=n.params,m=n.proFieldProps,g=n.mode,v=n.valueEnum,y=n.request,_=n.showSearch,b=n.options,x=(0,l.default)(n,p),E=(0,c.useContext)(f.default);return(0,h.jsx)(d.default,(0,s.default)((0,s.default)({valueEnum:(0,u.runFunction)(v),request:y,params:o,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,s.default)({options:b,mode:g,showSearch:_,getPopupContainer:E.getPopupContainer},i),ref:r,proFieldProps:m},x),{},{children:a}));});v.SearchSelect=g,v.displayName="ProFormComponent";var y=v;},"9063dcee":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{PointTriangulation:function(){return u;},default:function(){return c;}});var a=i("777fffbe"),o=a._(i("9b84be4b")),s=i("553ee311"),l=a._(i("6654a076"));function u(n){let r=n.coordinates;return{vertices:[...r],indices:[0],size:r.length};}class c extends l.default{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9});}getDefaultStyle(){return{blend:"additive"};}getCommonUniformsInfo(){return this.getUniformsBufferInfo({u_size_scale:.5});}initModels(){var n=this;return(0,o.default)(function*(){return n.buildModels();})();}buildModels(){var n=this;return(0,o.default)(function*(){return n.layer.triangulation=u,n.initUniformsBuffer(),[(yield n.layer.buildLayerModel({moduleName:"pointNormal",vertexShader:'layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;\nlayout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;\nlayout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;\n\nlayout(std140) uniform u_Common {\n  float u_size_scale;\n};\n\nout vec4 v_color;\n\n#pragma include "projection"\n#pragma include "project"\n\nvoid main() {\n  v_color = vec4(a_Color.xyz, a_Color.w * opacity);\n\n  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);\n  gl_Position = project_common_position_to_clipspace(project_pos);\n\n  gl_PointSize = a_Size * u_size_scale * 2.0 * u_DevicePixelRatio;\n}\n',fragmentShader:"in vec4 v_color;\nout vec4 outputColor;\nvoid main() {\n  outputColor = v_color;\n}",triangulation:u,defines:n.getDefines(),inject:n.getInject(),depth:{enable:!1},primitive:s.gl.POINTS,pick:!1}))];})();}clearModels(){}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:s.AttributeType.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:s.gl.DYNAMIC_DRAW,data:[],type:s.gl.FLOAT},size:1,update:n=>{let{size:r=1}=n;return Array.isArray(r)?[r[0]]:[r];}}});}}},"90b221a1":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return p;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("7cfeda15"),l=a._(s),u=i("609f48be"),c=o._(u),f={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z"}}]},name:"caret-up",theme:"outlined"},d=i("887aaf6c"),h=a._(d),p=c.forwardRef(function(n,r){return c.createElement(h.default,(0,l.default)({},n,{ref:r,icon:f}));});},"90e71d1b":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"Adder",{enumerable:!0,get:function(){return a;}});class a{constructor(){this._partials=new Float64Array(32),this._n=0;}add(n){let r=this._partials,i=0;for(let a=0;a<this._n&&a<32;a++){let o=r[a],s=n+o,l=Math.abs(n)<Math.abs(o)?n-(s-o):o-(s-n);l&&(r[i++]=l),n=s;}return r[i]=n,this._n=i+1,this;}valueOf(){let n=this._partials,r=this._n,i,a,o,s=0;if(r>0){for(s=n[--r];r>0&&(s=(i=s)+(a=n[--r]),!(o=a-(s-i))););r>0&&(o<0&&n[r-1]<0||o>0&&n[r-1]>0)&&(i=s+(a=2*o),a==i-s&&(s=i));}return s;}}},"90fd84e0":function(n,r,i){var a=i("231450c4")(i("6040b637"),"DataView");n.exports=a;},"9121315b":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{MercatorCoordinate:function(){return g;},altitudeFromMercatorZ:function(){return p;},latFromMercatorY:function(){return h;},lngFromMercatorX:function(){return d;},mercatorScale:function(){return m;},mercatorXfromLng:function(){return u;},mercatorYfromLat:function(){return c;},mercatorZfromAltitude:function(){return f;}});var a=i("777fffbe")._(i("a854094b")),o=i("8e9bca0c");let s=2*Math.PI*o.earthRadius;function l(n){return s*Math.cos(n*Math.PI/180);}function u(n){return(180+n)/360;}function c(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360;}function f(n,r){return n/l(r);}function d(n){return 360*n-180;}function h(n){return 360/Math.PI*Math.atan(Math.exp((180-360*n)*Math.PI/180))-90;}function p(n,r){return n*l(h(r));}function m(n){return 1/Math.cos(n*Math.PI/180);}class g{constructor(n,r,i=0){(0,a.default)(this,"x",void 0),(0,a.default)(this,"y",void 0),(0,a.default)(this,"z",void 0),this.x=+n,this.y=+r,this.z=+i;}static fromLngLat(n,r=0){let i=o.LngLat.convert(n);return new g(u(i.lng),c(i.lat),r/l(i.lat));}toLngLat(){return new o.LngLat(d(this.x),h(this.y));}toAltitude(){return p(this.z,this.y);}meterInMercatorCoordinateUnits(){return 1/s*m(h(this.y));}}},"912a5e21":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{conductCheck:function(){return c;},isCheckDisabled:function(){return u;}});var a=i("777fffbe"),o=a._(i("a275200c")),s=a._(i("07aa9410"));function l(n,r){var i=new Set;return n.forEach(function(n){r.has(n)||i.add(n);}),i;}function u(n){var r=n||{},i=r.disabled,a=r.disableCheckbox,o=r.checkable;return!!(i||a)||!1===o;}function c(n,r,i,a){var c,f=[];c=a||u;var d=new Set(n.filter(function(n){var r=!!(0,s.default)(i,n);return r||f.push(n),r;})),h=new Map,p=0;return Object.keys(i).forEach(function(n){var r=i[n],a=r.level,o=h.get(a);o||(o=new Set,h.set(a,o)),o.add(r),p=Math.max(p,a);}),(0,o.default)(!f.length,"Tree missing follow keys: ".concat(f.slice(0,100).map(function(n){return"'".concat(n,"'");}).join(", "))),!0===r?function(n,r,i,a){for(var o=new Set(n),s=new Set,u=0;u<=i;u+=1)(r.get(u)||new Set).forEach(function(n){var r=n.key,i=n.node,s=n.children,l=void 0===s?[]:s;o.has(r)&&!a(i)&&l.filter(function(n){return!a(n.node);}).forEach(function(n){o.add(n.key);});});for(var c=new Set,f=i;f>=0;f-=1)(r.get(f)||new Set).forEach(function(n){var r=n.parent;if(!(a(n.node)||!n.parent||c.has(n.parent.key))){if(a(n.parent.node)){c.add(r.key);return;}var i=!0,l=!1;(r.children||[]).filter(function(n){return!a(n.node);}).forEach(function(n){var r=n.key,a=o.has(r);i&&!a&&(i=!1),!l&&(a||s.has(r))&&(l=!0);}),i&&o.add(r.key),l&&s.add(r.key),c.add(r.key);}});return{checkedKeys:Array.from(o),halfCheckedKeys:Array.from(l(s,o))};}(d,h,p,c):function(n,r,i,a,o){for(var s=new Set(n),u=new Set(r),c=0;c<=a;c+=1)(i.get(c)||new Set).forEach(function(n){var r=n.key,i=n.node,a=n.children,l=void 0===a?[]:a;s.has(r)||u.has(r)||o(i)||l.filter(function(n){return!o(n.node);}).forEach(function(n){s.delete(n.key);});});u=new Set;for(var f=new Set,d=a;d>=0;d-=1)(i.get(d)||new Set).forEach(function(n){var r=n.parent;if(!(o(n.node)||!n.parent||f.has(n.parent.key))){if(o(n.parent.node)){f.add(r.key);return;}var i=!0,a=!1;(r.children||[]).filter(function(n){return!o(n.node);}).forEach(function(n){var r=n.key,o=s.has(r);i&&!o&&(i=!1),!a&&(o||u.has(r))&&(a=!0);}),i||s.delete(r.key),a&&u.add(r.key),f.add(r.key);}});return{checkedKeys:Array.from(s),halfCheckedKeys:Array.from(l(u,s))};}(d,r.halfCheckedKeys,h,p,c);}},"91419c49":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return o;}});var a=i("777fffbe")._(i("1daaa764")),o=function(n){if((0,a.default)(n))return n.reduce(function(n,r){return Math.min(n,r);},n[0]);};},"91c1eb9d":function(n,r,i){"use strict";function a(n){return n[0];}function o(n){return n[1];}i.d(r,"__esModule",{value:!0}),i.e(r,{x:function(){return a;},y:function(){return o;}});},"920dd2bf":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"BBox",{enumerable:!0,get:function(){return a;}});var a=function(){function n(n,r,i,a){void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=n,this.y=r,this.width=i,this.height=a;}return Object.defineProperty(n.prototype,"bottom",{get:function(){return this.y+this.height;},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"left",{get:function(){return this.x;},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){return this.x+this.width;},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"top",{get:function(){return this.y;},enumerable:!1,configurable:!0}),n.fromRect=function(r){return new n(r.x,r.y,r.width,r.height);},n.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left};},n.prototype.isPointIn=function(n,r){return n>=this.left&&n<=this.right&&r>=this.top&&r<=this.bottom;},n;}();},"927a8564":function(n,r,i){var a=i("863198de"),o=i("314b2508"),s=i("176581f8"),l=a&&1/s(new a([,-0]))[1]==1/0?function(n){return new a(n);}:o;n.exports=l;},"92d64018":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"d3Ticks",{enumerable:!0,get:function(){return o;}});var a=i("9a4b906d");let o=(n,r,i)=>{let o,s;let l=n,u=r;if(l===u&&i>0)return[l];let c=(0,a.tickIncrement)(l,u,i);if(0===c||!Number.isFinite(c))return[];if(c>0){l=Math.ceil(l/c),s=Array(o=Math.ceil((u=Math.floor(u/c))-l+1));for(let n=0;n<o;n+=1)s[n]=(l+n)*c;}else{l=Math.ceil(l*(c=-c)),s=Array(o=Math.ceil((u=Math.floor(u*c))-l+1));for(let n=0;n<o;n+=1)s[n]=(l+n)/c;}return s;};},"933558cb":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{ProField:function(){return s8;},default:function(){return s8;}});var a,o,s,l,u=i("777fffbe"),c=i("852bbaa9"),f=i("613f75ca"),d=u._(f),h=i("99c0cd4c"),p=u._(h),m=i("e4870cf0"),g=u._(m),v=i("64681837"),y=c._(v);i("87ed5a26"),i("fcd59b57"),i("865cc100");var _=i("e7d0cdde"),b=i("60996a32"),x=u._(b),E=i("609f48be"),w=c._(E),S=i("ee64167d"),T=u._(S),A=i("0790431f"),C=u._(A),O=i("13e8e493"),M=i("0a30d8df"),R=i("0c043dda"),P=i("f1020fa4"),k=u._(P),I=i("064ecd09"),L=u._(I),N=i("7cfeda15"),D=u._(N),F=i("cee2e65c"),B=i("52d73015"),j=u._(B),z=i("8a826376"),U=u._(z),V=i("ce03fd86"),G=u._(V),H=i("53c765bf"),W=u._(H),X=i("0dcab6c6"),q=c._(X),$="__RC_CASCADER_SPLIT__",Y="SHOW_PARENT",Z="SHOW_CHILD";function K(n){return n.join($);}function Q(n){return n.map(K);}function J(n){var r=n||{},i=r.label,a=r.value,o=r.children,s=a||"value";return{label:i||"label",value:s,key:s,children:o||"children"};}function ee(n,r){var i,a;return null!==(i=n.isLeaf)&&void 0!==i?i:!(null!==(a=n[r.children])&&void 0!==a&&a.length);}function et(n,r){return n.map(function(n){var i;return null===(i=n[q.SEARCH_MARK])||void 0===i?void 0:i.map(function(n){return n[r.value];});});}function en(n){return n?Array.isArray(n)&&Array.isArray(n[0])?n:(0===n.length?[]:[n]).map(function(n){return Array.isArray(n)?n:[n];}):[];}function er(n,r,i){var a=new Set(n),o=r();return n.filter(function(n){var r=o[n],s=r?r.parent:null,l=r?r.children:null;return!!r&&!!r.node.disabled||(i===Z?!(l&&l.some(function(n){return n.key&&a.has(n.key);})):!(s&&!s.node.disabled&&a.has(s.key)));});}function ei(n,r,i){for(var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=r,s=[],l=0;l<n.length;l+=1)!function(){var r,u,c,f=n[l],d=null===(r=o)||void 0===r?void 0:r.findIndex(function(n){var r=n[i.value];return a?String(r)===String(f):r===f;}),h=-1!==d?null===(u=o)||void 0===u?void 0:u[d]:null;s.push({value:null!==(c=null==h?void 0:h[i.value])&&void 0!==c?c:f,index:d,option:h}),o=null==h?void 0:h[i.children];}();return s;}function ea(n,r){return w.useCallback(function(i){var a=[],o=[];return i.forEach(function(i){ei(i,n,r).every(function(n){return n.option;})?o.push(i):a.push(i);}),[o,a];},[n,r]);}var eo=i("d105a374"),es=function(n,r){var i=w.useRef({options:[],info:{keyEntities:{},pathKeyEntities:{}}});return w.useCallback(function(){return i.current.options!==n&&(i.current.options=n,i.current.info=(0,eo.convertDataToEntities)(n,{fieldNames:r,initWrapper:function(n){return(0,g.default)((0,g.default)({},n),{},{pathKeyEntities:{}});},processEntity:function(n,i){var a=n.nodes.map(function(n){return n[r.value];}).join($);i.pathKeyEntities[a]=n,n.key=a;}})),i.current.info.pathKeyEntities;},[r,n]);};function el(n,r){var i=w.useMemo(function(){return r||[];},[r]),a=es(i,n),o=w.useCallback(function(r){var i=a();return r.map(function(r){return i[r].nodes.map(function(r){return r[n.value];});});},[a,n]);return[i,a,o];}var eu=i("a275200c"),ec=c._(eu),ef=i("912a5e21");function ed(n,r,i,a,o,s,l,u){return function(c){if(n){var f=K(c),d=Q(i),h=Q(a),p=d.includes(f),m=o.some(function(n){return K(n)===f;}),g=i,v=o;if(m&&!p)v=o.filter(function(n){return K(n)!==f;});else{var y=p?d.filter(function(n){return n!==f;}):[].concat((0,k.default)(d),[f]),_=s();g=l(er(p?(0,ef.conductCheck)(y,{checked:!1,halfCheckedKeys:h},_).checkedKeys:(0,ef.conductCheck)(y,!0,_).checkedKeys,s,u));}r([].concat((0,k.default)(v),(0,k.default)(g)));}else r(c);};}function eh(n,r,i,a,o){return w.useMemo(function(){var s=o(r),l=(0,T.default)(s,2),u=l[0],c=l[1];if(!n||!r.length)return[u,[],c];var f=Q(u),d=i(),h=(0,ef.conductCheck)(f,!0,d),p=h.checkedKeys,m=h.halfCheckedKeys;return[a(p),a(m),c];},[n,r,i,a,o]);}var ep=i("a854094b"),em=u._(ep),eg=w.memo(function(n){return n.children;},function(n,r){return!r.open;});function ev(n){var r,i=n.prefixCls,a=n.checked,o=n.halfChecked,s=n.disabled,l=n.onClick,u=n.disableCheckbox,c=w.useContext(W.default).checkable;return w.createElement("span",{className:(0,L.default)("".concat(i),(r={},(0,em.default)(r,"".concat(i,"-checked"),a),(0,em.default)(r,"".concat(i,"-indeterminate"),!a&&o),(0,em.default)(r,"".concat(i,"-disabled"),s||u),r)),onClick:l},"boolean"!=typeof c?c:null);}var ey="__cascader_fix_label__";function e_(n){var r=n.prefixCls,i=n.multiple,a=n.options,o=n.activeValue,s=n.prevValuePath,l=n.onToggleOpen,u=n.onSelect,c=n.onActive,f=n.checkedSet,d=n.halfCheckedSet,h=n.loadingKeys,p=n.isSelectable,m=n.disabled,g="".concat(r,"-menu-item"),v=w.useContext(W.default),y=v.fieldNames,_=v.changeOnSelect,b=v.expandTrigger,x=v.expandIcon,E=v.loadingIcon,S=v.dropdownMenuColumnStyle,T=v.optionRender,A="hover"===b,C=function(n){return m||n;},O=w.useMemo(function(){return a.map(function(n){var r,i=n.disabled,a=n.disableCheckbox,o=n[q.SEARCH_MARK],l=null!==(r=n[ey])&&void 0!==r?r:n[y.label],u=n[y.value],c=ee(n,y),p=o?o.map(function(n){return n[y.value];}):[].concat((0,k.default)(s),[u]),m=K(p);return{disabled:i,label:l,value:u,isLeaf:c,isLoading:h.includes(m),checked:f.has(m),halfChecked:d.has(m),option:n,disableCheckbox:a,fullPath:p,fullPathKey:m};});},[a,f,y,d,h,s]);return w.createElement("ul",{className:"".concat(r,"-menu"),role:"menu"},O.map(function(n){var a,s,f=n.disabled,d=n.label,h=n.value,m=n.isLeaf,v=n.isLoading,y=n.checked,b=n.halfChecked,O=n.option,M=n.fullPath,R=n.fullPathKey,P=n.disableCheckbox,I=function(){if(!C(f)){var n=(0,k.default)(M);A&&m&&n.pop(),c(n);}},N=function(){p(O)&&!C(f)&&u(M,m);};return"string"==typeof O.title?s=O.title:"string"==typeof d&&(s=d),w.createElement("li",{key:R,className:(0,L.default)(g,(a={},(0,em.default)(a,"".concat(g,"-expand"),!m),(0,em.default)(a,"".concat(g,"-active"),o===h||o===R),(0,em.default)(a,"".concat(g,"-disabled"),C(f)),(0,em.default)(a,"".concat(g,"-loading"),v),a)),style:S,role:"menuitemcheckbox",title:s,"aria-checked":y,"data-path-key":R,onClick:function(){I(),P||i&&!m||N();},onDoubleClick:function(){_&&l(!1);},onMouseEnter:function(){A&&I();},onMouseDown:function(n){n.preventDefault();}},i&&w.createElement(ev,{prefixCls:"".concat(r,"-checkbox"),checked:y,halfChecked:b,disabled:C(f)||P,disableCheckbox:P,onClick:function(n){P||(n.stopPropagation(),N());}}),w.createElement("div",{className:"".concat(g,"-content")},T?T(O):d),!v&&x&&!m&&w.createElement("div",{className:"".concat(g,"-expand-icon")},x),v&&E&&w.createElement("div",{className:"".concat(g,"-loading-icon")},E));}));}var eb=function(n,r){var i=w.useContext(W.default).values[0],a=w.useState([]),o=(0,T.default)(a,2),s=o[0],l=o[1];return w.useEffect(function(){n||l(i||[]);},[r,i]),[s,l];},ex=i("b57035fe"),eE=u._(ex),ew=function(n,r,i,a,o,s,l){var u=l.direction,c=l.searchValue,f=l.toggleOpen,d=l.open,h="rtl"===u,p=w.useMemo(function(){for(var n=-1,o=r,s=[],l=[],u=a.length,c=et(r,i),f=function(r){var u=o.findIndex(function(n,o){return(c[o]?K(c[o]):n[i.value])===a[r];});if(-1===u)return 1;n=u,s.push(n),l.push(a[r]),o=o[n][i.children];},d=0;d<u&&o&&!f(d);d+=1);for(var h=r,p=0;p<s.length-1;p+=1)h=h[s[p]][i.children];return[l,n,h,c];},[a,i,r]),m=(0,T.default)(p,4),g=m[0],v=m[1],y=m[2],_=m[3],b=function(n){o(n);},x=function(n){var r=y.length,a=v;-1===a&&n<0&&(a=r);for(var o=0;o<r;o+=1){var s=y[a=(a+n+r)%r];if(s&&!s.disabled){b(g.slice(0,-1).concat(_[a]?K(_[a]):s[i.value]));return;}}},E=function(){g.length>1?b(g.slice(0,-1)):f(!1);},S=function(){var n,r=((null===(n=y[v])||void 0===n?void 0:n[i.children])||[]).find(function(n){return!n.disabled;});r&&b([].concat((0,k.default)(g),[r[i.value]]));};w.useImperativeHandle(n,function(){return{onKeyDown:function(n){var r=n.which;switch(r){case eE.default.UP:case eE.default.DOWN:var a=0;r===eE.default.UP?a=-1:r===eE.default.DOWN&&(a=1),0!==a&&x(a);break;case eE.default.LEFT:if(c)break;h?S():E();break;case eE.default.RIGHT:if(c)break;h?E():S();break;case eE.default.BACKSPACE:c||E();break;case eE.default.ENTER:if(g.length){var o=y[v],l=(null==o?void 0:o[q.SEARCH_MARK])||[];l.length?s(l.map(function(n){return n[i.value];}),l[l.length-1]):s(g,y[v]);}break;case eE.default.ESC:f(!1),d&&n.stopPropagation();}},onKeyUp:function(){}};});},eS=w.forwardRef(function(n,r){var i,a,o,s=n.prefixCls,l=n.multiple,u=n.searchValue,c=n.toggleOpen,f=n.notFoundContent,d=n.direction,h=n.open,p=n.disabled,m=w.useRef(null),v=w.useContext(W.default),y=v.options,_=v.values,b=v.halfValues,x=v.fieldNames,E=v.changeOnSelect,S=v.onSelect,A=v.searchOptions,C=v.dropdownPrefixCls,O=v.loadData,M=v.expandTrigger,R=C||s,P=w.useState([]),I=(0,T.default)(P,2),N=I[0],F=I[1],B=function(n){if(O&&!u){var r=ei(n,y,x).map(function(n){return n.option;}),i=r[r.length-1];if(i&&!ee(i,x)){var a=K(n);F(function(n){return[].concat((0,k.default)(n),[a]);}),O(r);}}};w.useEffect(function(){N.length&&N.forEach(function(n){var r=ei(n.split($),y,x,!0).map(function(n){return n.option;}),i=r[r.length-1];(!i||i[x.children]||ee(i,x))&&F(function(r){return r.filter(function(r){return r!==n;});});});},[y,N,x]);var j=w.useMemo(function(){return new Set(Q(_));},[_]),z=w.useMemo(function(){return new Set(Q(b));},[b]),U=eb(l,h),V=(0,T.default)(U,2),G=V[0],H=V[1],X=function(n){H(n),B(n);},q=function(n){if(p)return!1;var r=n.disabled,i=ee(n,x);return!r&&(i||E||l);},Y=function(n,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];S(n),!l&&(r||E&&("hover"===M||i))&&c(!1);},Z=w.useMemo(function(){return u?A:y;},[u,A,y]),J=w.useMemo(function(){for(var n=[{options:Z}],r=Z,i=et(r,x),a=0;a<G.length&&!function(){var o=G[a],s=r.find(function(n,r){return(i[r]?K(i[r]):n[x.value])===o;}),l=null==s?void 0:s[x.children];if(!(null!=l&&l.length))return 1;r=l,n.push({options:l});}();a+=1);return n;},[Z,G,x]);ew(r,Z,x,G,X,function(n,r){q(r)&&Y(n,ee(r,x),!0);},{direction:d,searchValue:u,toggleOpen:c,open:h}),w.useEffect(function(){if(!u)for(var n=0;n<G.length;n+=1){var r,i=K(G.slice(0,n+1)),a=null===(r=m.current)||void 0===r?void 0:r.querySelector('li[data-path-key="'.concat(i.replace(/\\{0,2}"/g,'\\"'),'"]'));a&&function(n){var r=n.parentElement;if(r){var i=n.offsetTop-r.offsetTop;i-r.scrollTop<0?r.scrollTo({top:i}):i+n.offsetHeight-r.scrollTop>r.offsetHeight&&r.scrollTo({top:i+n.offsetHeight-r.offsetHeight});}}(a);}},[G,u]);var en=!(null!==(i=J[0])&&void 0!==i&&null!==(i=i.options)&&void 0!==i&&i.length),er=[(a={},(0,em.default)(a,x.value,"__EMPTY__"),(0,em.default)(a,ey,f),(0,em.default)(a,"disabled",!0),a)],ea=(0,g.default)((0,g.default)({},n),{},{multiple:!en&&l,onSelect:Y,onActive:X,onToggleOpen:c,checkedSet:j,halfCheckedSet:z,loadingKeys:N,isSelectable:q}),eo=(en?[{options:er}]:J).map(function(n,r){var i=G.slice(0,r),a=G[r];return w.createElement(e_,(0,D.default)({key:r},ea,{prefixCls:R,options:n.options,prevValuePath:i,activeValue:a}));});return w.createElement(eg,{open:h},w.createElement("div",{className:(0,L.default)("".concat(R,"-menus"),(o={},(0,em.default)(o,"".concat(R,"-menu-empty"),en),(0,em.default)(o,"".concat(R,"-rtl"),"rtl"===d),o)),ref:m},eo));}),eT=w.forwardRef(function(n,r){var i=(0,F.useBaseProps)();return w.createElement(eS,(0,D.default)({},n,i,{ref:r}));}),eA=i("e313b0e4");function eC(){}function eO(n){var r,i=n.prefixCls,a=void 0===i?"rc-cascader":i,o=n.style,s=n.className,l=n.options,u=n.checkable,c=n.defaultValue,f=n.value,d=n.fieldNames,h=n.changeOnSelect,p=n.onChange,m=n.showCheckedStrategy,g=n.loadData,v=n.expandTrigger,y=n.expandIcon,_=void 0===y?">":y,b=n.loadingIcon,x=n.direction,E=n.notFoundContent,S=n.disabled,A=!!u,C=(0,eA.useMergedState)(c,{value:f,postState:en}),O=(0,T.default)(C,2),M=O[0],R=O[1],P=w.useMemo(function(){return J(d);},[JSON.stringify(d)]),k=el(P,l),I=(0,T.default)(k,3),N=I[0],D=I[1],F=I[2],B=eh(A,M,D,F,ea(N,P)),j=(0,T.default)(B,3),z=j[0],U=j[1],V=j[2],G=(0,eA.useEvent)(function(n){if(R(n),p){var r=en(n),i=r.map(function(n){return ei(n,N,P).map(function(n){return n.option;});});p(A?r:r[0],A?i:i[0]);}}),H=ed(A,G,z,U,V,D,F,m),X=(0,eA.useEvent)(function(n){H(n);}),q=w.useMemo(function(){return{options:N,fieldNames:P,values:z,halfValues:U,changeOnSelect:h,onSelect:X,checkable:u,searchOptions:[],dropdownPrefixCls:void 0,loadData:g,expandTrigger:v,expandIcon:_,loadingIcon:b,dropdownMenuColumnStyle:void 0};},[N,P,z,U,h,X,u,g,v,_,b]),$="".concat(a,"-panel"),Y=!N.length;return w.createElement(W.default.Provider,{value:q},w.createElement("div",{className:(0,L.default)($,(r={},(0,em.default)(r,"".concat($,"-rtl"),"rtl"===x),(0,em.default)(r,"".concat($,"-empty"),Y),r),s),style:o},Y?void 0===E?"Not Found":E:w.createElement(eS,{prefixCls:a,searchValue:"",multiple:A,toggleOpen:eC,open:!0,direction:x,disabled:S})));}var eM=["id","prefixCls","fieldNames","defaultValue","value","changeOnSelect","onChange","displayRender","checkable","autoClearSearchValue","searchValue","onSearch","showSearch","expandTrigger","options","dropdownPrefixCls","loadData","popupVisible","open","popupClassName","dropdownClassName","dropdownMenuColumnStyle","dropdownStyle","popupPlacement","placement","onDropdownVisibleChange","onPopupVisibleChange","onOpenChange","expandIcon","loadingIcon","children","dropdownMatchSelectWidth","showCheckedStrategy","optionRender"],eR=w.forwardRef(function(n,r){var i,a=n.id,o=n.prefixCls,s=void 0===o?"rc-cascader":o,l=n.fieldNames,u=n.defaultValue,c=n.value,f=n.changeOnSelect,h=n.onChange,m=n.displayRender,v=n.checkable,y=n.autoClearSearchValue,_=void 0===y||y,b=n.searchValue,x=n.onSearch,E=n.showSearch,S=n.expandTrigger,A=n.options,C=n.dropdownPrefixCls,O=n.loadData,M=n.popupVisible,R=n.open,P=n.popupClassName,I=n.dropdownClassName,L=n.dropdownMenuColumnStyle,N=n.dropdownStyle,B=n.popupPlacement,z=n.placement,V=n.onDropdownVisibleChange,H=n.onPopupVisibleChange,X=n.onOpenChange,$=n.expandIcon,Z=void 0===$?">":$,ee=n.loadingIcon,et=n.children,eo=n.dropdownMatchSelectWidth,es=n.showCheckedStrategy,eu=void 0===es?Y:es,ec=n.optionRender,ef=(0,d.default)(n,eM),ep=(0,j.default)(a),em=!!v,eg=(0,G.default)(u,{value:c,postState:en}),ev=(0,T.default)(eg,2),ey=ev[0],e_=ev[1],eb=w.useMemo(function(){return J(l);},[JSON.stringify(l)]),ex=el(eb,A),eE=(0,T.default)(ex,3),ew=eE[0],eS=eE[1],eA=eE[2],eC=(0,G.default)("",{value:b,postState:function(n){return n||"";}}),eO=(0,T.default)(eC,2),eR=eO[0],eP=eO[1],ek=w.useMemo(function(){if(!E)return[!1,{}];var n={matchInputWidth:!0,limit:50};return E&&"object"===(0,p.default)(E)&&(n=(0,g.default)((0,g.default)({},n),E)),n.limit<=0&&(n.limit=!1),[!0,n];},[E]),eI=(0,T.default)(ek,2),eL=eI[0],eN=eI[1],eD=(0,q.default)(eR,ew,eb,C||s,eN,f||em),eF=eh(em,ey,eS,eA,ea(ew,eb)),eB=(0,T.default)(eF,3),ej=eB[0],ez=eB[1],eU=eB[2],eV=(i=w.useMemo(function(){var n=er(Q(ej),eS,eu);return[].concat((0,k.default)(eU),(0,k.default)(eA(n)));},[ej,eS,eA,eU,eu]),w.useMemo(function(){var n=m||function(n){var r=em?n.slice(-1):n;return r.every(function(n){return["string","number"].includes((0,p.default)(n));})?r.join(" / "):r.reduce(function(n,r,i){var a=w.isValidElement(r)?w.cloneElement(r,{key:i}):r;return 0===i?[a]:[].concat((0,k.default)(n),[" / ",a]);},[]);};return i.map(function(r){var i,a=ei(r,ew,eb),o=n(a.map(function(n){var r,i=n.option,a=n.value;return null!==(r=null==i?void 0:i[eb.label])&&void 0!==r?r:a;}),a.map(function(n){return n.option;})),s=K(r);return{label:o,value:s,key:s,valueCells:r,disabled:null===(i=a[a.length-1])||void 0===i||null===(i=i.option)||void 0===i?void 0:i.disabled};});},[i,ew,eb,m,em])),eG=(0,U.default)(function(n){if(e_(n),h){var r=en(n),i=r.map(function(n){return ei(n,ew,eb).map(function(n){return n.option;});});h(em?r:r[0],em?i:i[0]);}}),eH=ed(em,eG,ej,ez,eU,eS,eA,eu),eW=(0,U.default)(function(n){(!em||_)&&eP(""),eH(n);}),eX=w.useMemo(function(){return{options:ew,fieldNames:eb,values:ej,halfValues:ez,changeOnSelect:f,onSelect:eW,checkable:v,searchOptions:eD,dropdownPrefixCls:C,loadData:O,expandTrigger:S,expandIcon:Z,loadingIcon:ee,dropdownMenuColumnStyle:L,optionRender:ec};},[ew,eb,ej,ez,f,eW,v,eD,C,O,S,Z,ee,L,ec]),eq=!(eR?eD:ew).length,e$=eR&&eN.matchInputWidth||eq?{}:{minWidth:"auto"};return w.createElement(W.default.Provider,{value:eX},w.createElement(F.BaseSelect,(0,D.default)({},ef,{ref:r,id:ep,prefixCls:s,autoClearSearchValue:_,dropdownMatchSelectWidth:void 0!==eo&&eo,dropdownStyle:(0,g.default)((0,g.default)({},e$),N),displayValues:eV,onDisplayValuesChange:function(n,r){if("clear"===r.type){eG([]);return;}eW(r.values[0].valueCells);},mode:em?"multiple":void 0,searchValue:eR,onSearch:function(n,r){eP(n),"blur"!==r.source&&x&&x(n);},showSearch:eL,OptionList:eT,emptyOptions:eq,open:void 0!==R?R:M,dropdownClassName:I||P,placement:z||B,onDropdownVisibleChange:function(n){null==X||X(n),null==V||V(n),null==H||H(n);},getRawInputElement:function(){return et;}})));});eR.SHOW_PARENT=Y,eR.SHOW_CHILD=Z,eR.Panel=eO;var eP=i("ddaa0afd"),ek=u._(eP),eI=i("982f75bb"),eL=i("cf80e551"),eN=i("9c2ea017"),eD=u._(eN),eF=i("b031c5f4");i("99c64fee");var eB=i("0ec3aff9"),ej=i("4e559850"),ez=u._(ej),eU=i("d2eaac3a"),eV=u._(eU),eG=i("0c38182e"),eH=u._(eG),eW=i("5fe3006d"),eX=u._(eW),eq=i("2221581e"),e$=i("fe1e68bb"),eY=u._(e$),eZ=i("67a27ab1"),eK=u._(eZ),eQ=i("66663968"),eJ=u._(eQ),e0=i("cb705fb8"),e1=u._(e0),e2=i("043c4456"),e3=u._(e2),e4=i("9a21a271");function e5(n,r){let{getPrefixCls:i,direction:a,renderEmpty:o}=w.useContext(eB.ConfigContext);return[i("select",n),i("cascader",n),r||a,o];}function e6(n,r){return w.useMemo(()=>!!r&&w.createElement("span",{className:`${n}-checkbox-inner`}),[r]);}var e8=i("32fb75e8"),e7=u._(e8),e9=i("23d1e047"),te=u._(e9);let tt=(n,r,i)=>{let a=i;i||(a=r?w.createElement(e7.default,null):w.createElement(te.default,null));let o=w.createElement("span",{className:`${n}-menu-item-loading-icon`},w.createElement(C.default,{spin:!0}));return w.useMemo(()=>[a,o],[a]);};var tn=i("ee97be64"),tr=i("bc0474ca"),ti=i("398ab4d8"),ta=i("3c43c4ce"),to=i("1b591c39");let ts=n=>{let{prefixCls:r,componentCls:i}=n,a=`${i}-menu-item`,o=`
  &${a}-expand ${a}-expand-icon,
  ${a}-loading-icon
`;return[(0,ta.getStyle)(`${r}-checkbox`,n),{[i]:{"&-checkbox":{top:0,marginInlineEnd:n.paddingXS,pointerEvents:"unset"},"&-menus":{display:"flex",flexWrap:"nowrap",alignItems:"flex-start",[`&${i}-menu-empty`]:{[`${i}-menu`]:{width:"100%",height:"auto",[a]:{color:n.colorTextDisabled}}}},"&-menu":{flexGrow:1,flexShrink:0,minWidth:n.controlItemWidth,height:n.dropdownHeight,margin:0,padding:n.menuPadding,overflow:"auto",verticalAlign:"top",listStyle:"none","-ms-overflow-style":"-ms-autohiding-scrollbar","&:not(:last-child)":{borderInlineEnd:`${(0,ti.unit)(n.lineWidth)} ${n.lineType} ${n.colorSplit}`},"&-item":Object.assign(Object.assign({},to.textEllipsis),{display:"flex",flexWrap:"nowrap",alignItems:"center",padding:n.optionPadding,lineHeight:n.lineHeight,cursor:"pointer",transition:`all ${n.motionDurationMid}`,borderRadius:n.borderRadiusSM,"&:hover":{background:n.controlItemBgHover},"&-disabled":{color:n.colorTextDisabled,cursor:"not-allowed","&:hover":{background:"transparent"},[o]:{color:n.colorTextDisabled}},[`&-active:not(${a}-disabled)`]:{"&, &:hover":{color:n.optionSelectedColor,fontWeight:n.optionSelectedFontWeight,backgroundColor:n.optionSelectedBg}},"&-content":{flex:"auto"},[o]:{marginInlineStart:n.paddingXXS,color:n.colorIcon,fontSize:n.fontSizeIcon},"&-keyword":{color:n.colorHighlight}})}}}];},tl=n=>{let{componentCls:r,antCls:i}=n;return[{[r]:{width:n.controlWidth}},{[`${r}-dropdown`]:[{[`&${i}-select-dropdown`]:{padding:0}},ts(n)]},{[`${r}-dropdown-rtl`]:{direction:"rtl"}},(0,tn.genCompactItemStyle)(n)];},tu=n=>{let r=Math.round((n.controlHeight-n.fontSize*n.lineHeight)/2);return{controlWidth:184,controlItemWidth:111,dropdownHeight:180,optionSelectedBg:n.controlItemBgActive,optionSelectedFontWeight:n.fontWeightStrong,optionPadding:`${r}px ${n.paddingSM}px`,menuPadding:n.paddingXXS,optionSelectedColor:n.colorText};};var tc=(0,tr.genStyleHooks)("Cascader",n=>[tl(n)],tu,{unitless:{optionSelectedFontWeight:!0}});let tf=n=>{let{componentCls:r}=n;return{[`${r}-panel`]:[ts(n),{display:"inline-flex",border:`${(0,ti.unit)(n.lineWidth)} ${n.lineType} ${n.colorSplit}`,borderRadius:n.borderRadiusLG,overflowX:"auto",maxWidth:"100%",[`${r}-menus`]:{alignItems:"stretch"},[`${r}-menu`]:{height:"auto"},"&-empty":{padding:n.paddingXXS}}]};};var td=(0,tr.genComponentStyleHook)(["Cascader","Panel"],n=>tf(n),tu),th=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let{SHOW_CHILD:tp,SHOW_PARENT:tm}=eR,tg=(n,r,i,a)=>{let o=[],s=n.toLowerCase();return r.forEach((n,r)=>{0!==r&&o.push(" / ");let l=n[a.label],u=typeof l;("string"===u||"number"===u)&&(l=function(n,r,i){let a=n.toLowerCase().split(r).reduce((n,i,a)=>0===a?[i]:[].concat((0,k.default)(n),[r,i]),[]),o=[],s=0;return a.forEach((r,a)=>{let l=s+r.length,u=n.slice(s,l);s=l,a%2==1&&(u=w.createElement("span",{className:`${i}-menu-item-keyword`,key:`separator-${a}`},u)),o.push(u);}),o;}(String(l),s,i)),o.push(l);}),o;},tv=w.forwardRef((n,r)=>{var i,a,o,s;let{prefixCls:l,size:u,disabled:c,className:f,rootClassName:d,multiple:h,bordered:p=!0,transitionName:m,choiceTransitionName:g="",popupClassName:v,dropdownClassName:y,expandIcon:_,placement:b,showSearch:x,allowClear:E=!0,notFoundContent:S,direction:T,getPopupContainer:A,status:C,showArrow:O,builtinPlacements:M,style:R,variant:P,dropdownRender:k,onDropdownVisibleChange:I,dropdownMenuColumnStyle:N,popupRender:D,dropdownStyle:F,popupMenuColumnStyle:B,onOpenChange:j,styles:z,classNames:U}=n,V=th(n,["prefixCls","size","disabled","className","rootClassName","multiple","bordered","transitionName","choiceTransitionName","popupClassName","dropdownClassName","expandIcon","placement","showSearch","allowClear","notFoundContent","direction","getPopupContainer","status","showArrow","builtinPlacements","style","variant","dropdownRender","onDropdownVisibleChange","dropdownMenuColumnStyle","popupRender","dropdownStyle","popupMenuColumnStyle","onOpenChange","styles","classNames"]),G=(0,ek.default)(V,["suffixIcon"]),{getPrefixCls:H,getPopupContainer:W,className:X,style:q,classNames:$,styles:Y}=(0,eB.useComponentConfig)("cascader"),{popupOverflow:Z}=w.useContext(eB.ConfigContext),{status:K,hasFeedback:Q,isFormItemInput:J,feedbackIcon:ee}=w.useContext(eq.FormItemInputContext),et=(0,eF.getMergedStatus)(K,C),[en,er,ei,ea]=e5(l,T),eo="rtl"===ei,es=H(),el=(0,eH.default)(en),[eu,ec,ef]=(0,eJ.default)(en,el),ed=(0,eH.default)(er),[eh]=tc(er,ed),{compactSize:ep,compactItemClassnames:em}=(0,e4.useCompactItemContext)(en,T),[eg,ev]=(0,eY.default)("cascader",P,p),ey=S||(null==ea?void 0:ea("Cascader"))||w.createElement(ez.default,{componentName:"Cascader"}),e_=(0,L.default)((null===(i=null==U?void 0:U.popup)||void 0===i?void 0:i.root)||(null===(a=$.popup)||void 0===a?void 0:a.root)||v||y,`${er}-dropdown`,{[`${er}-dropdown-rtl`]:"rtl"===ei},d,el,$.root,null==U?void 0:U.root,ed,ec,ef),eb=(null===(o=null==z?void 0:z.popup)||void 0===o?void 0:o.root)||(null===(s=Y.popup)||void 0===s?void 0:s.root)||F,ex=w.useMemo(()=>{if(!x)return x;let n={render:tg};return"object"==typeof x&&(n=Object.assign(Object.assign({},n),x)),n;},[x]),eE=(0,eX.default)(n=>{var r;return null!==(r=null!=u?u:ep)&&void 0!==r?r:n;}),ew=w.useContext(eV.default),[eS,eT]=tt(en,eo,_),eA=e6(er,h),eC=(0,e3.default)(n.suffixIcon,O),{suffixIcon:eO,removeIcon:eM,clearIcon:eP}=(0,e1.default)(Object.assign(Object.assign({},n),{hasFeedback:Q,feedbackIcon:ee,showSuffixIcon:eC,multiple:h,prefixCls:en,componentName:"Cascader"})),eN=w.useMemo(()=>void 0!==b?b:eo?"bottomRight":"bottomLeft",[b,eo]),[eD]=(0,eI.useZIndex)("SelectLike",null==eb?void 0:eb.zIndex);return eh(eu(w.createElement(eR,Object.assign({prefixCls:en,className:(0,L.default)(!l&&er,{[`${en}-lg`]:"large"===eE,[`${en}-sm`]:"small"===eE,[`${en}-rtl`]:eo,[`${en}-${eg}`]:ev,[`${en}-in-form-item`]:J},(0,eF.getStatusClassNames)(en,et,Q),em,X,f,d,null==U?void 0:U.root,$.root,el,ed,ec,ef),disabled:null!=c?c:ew,style:Object.assign(Object.assign(Object.assign(Object.assign({},Y.root),null==z?void 0:z.root),q),R)},G,{builtinPlacements:(0,eK.default)(M,Z),direction:ei,placement:eN,notFoundContent:ey,allowClear:!0===E?{clearIcon:eP}:E,showSearch:ex,expandIcon:eS,suffixIcon:eO,removeIcon:eM,loadingIcon:eT,checkable:eA,dropdownClassName:e_,dropdownPrefixCls:l||er,dropdownStyle:Object.assign(Object.assign({},eb),{zIndex:eD}),dropdownRender:D||k,dropdownMenuColumnStyle:B||N,onOpenChange:j||I,choiceTransitionName:(0,eL.getTransitionName)(es,"",g),transitionName:(0,eL.getTransitionName)(es,"slide-up",m),getPopupContainer:A||W,ref:r}))));}),ty=(0,eD.default)(tv,"dropdownAlign",n=>(0,ek.default)(n,["visible"]));tv.SHOW_PARENT=tm,tv.SHOW_CHILD=tp,tv.Panel=function(n){let{prefixCls:r,className:i,multiple:a,rootClassName:o,notFoundContent:s,direction:l,expandIcon:u,disabled:c}=n,f=w.useContext(eV.default),[d,h,p,m]=e5(r,l),g=(0,eH.default)(h),[v,y,_]=tc(h,g);td(h);let[b,x]=tt(d,"rtl"===p,u),E=s||(null==m?void 0:m("Cascader"))||w.createElement(ez.default,{componentName:"Cascader"}),S=e6(h,a);return v(w.createElement(eO,Object.assign({},n,{checkable:S,prefixCls:h,className:(0,L.default)(i,y,o,_,g),notFoundContent:E,direction:p,expandIcon:b,loadingIcon:x,disabled:null!=c?c:f})));},tv._InternalPanelDoNotUseOrYouWillBeFired=ty;var t_=i("a5a99096"),tb=c._(t_),tx=i("6c581265"),tE=c._(tx),tw=i("dac8af92"),tS=["radioType","renderFormItem","mode","render","label","light"],tT=w.default.forwardRef(function(n,r){n.radioType;var i=n.renderFormItem,a=n.mode,o=n.render,s=n.label,l=n.light,u=(0,d.default)(n,tS),c=(0,(0,w.useContext)(tb.default.ConfigContext).getPrefixCls)("pro-field-cascader"),f=(0,tE.useFieldFetchData)(u),h=(0,T.default)(f,3),p=h[0],m=h[1],v=h[2],_=(0,y.useIntl)(),b=(0,w.useRef)(),x=(0,w.useState)(!1),E=(0,T.default)(x,2),S=E[0],A=E[1];(0,w.useImperativeHandle)(r,function(){return(0,g.default)((0,g.default)({},b.current||{}),{},{fetchData:function(n){return v(n);}});},[v]);var P=(0,w.useMemo)(function(){if("read"===a){var n,r=(null===(n=u.fieldProps)||void 0===n?void 0:n.fieldNames)||{},i=r.value,o=void 0===i?"value":i,s=r.label,l=void 0===s?"label":s,c=r.children,f=void 0===c?"children":c,d=new Map;return function n(r){if(!(null!=r&&r.length))return d;for(var i=r.length,a=0;a<i;){var s=r[a++];d.set(s[o],s[l]),n(s[f]);}return d;}(m);}},[a,m,null===(k=u.fieldProps)||void 0===k?void 0:k.fieldNames]);if("read"===a){var k,I,N=(0,tw.jsx)(tw.Fragment,{children:(0,R.proFieldParsingText)(u.text,(0,R.objectToMap)(u.valueEnum||P))});return o?null!==(I=o(u.text,(0,g.default)({mode:a},u.fieldProps),N))&&void 0!==I?I:null:N;}if("edit"===a){var D,F,B,j=(0,tw.jsx)(tv,(0,g.default)((0,g.default)((0,g.default)({},(0,M.compatibleBorder)(!l)),{},{ref:b,open:S,suffixIcon:p?(0,tw.jsx)(C.default,{}):void 0,placeholder:_.getMessage("tableForm.selectPlaceholder","\u8BF7\u9009\u62E9"),allowClear:(null===(D=u.fieldProps)||void 0===D?void 0:D.allowClear)!==!1},u.fieldProps),{},{onDropdownVisibleChange:function(n){var r,i;null==u||null===(r=u.fieldProps)||void 0===r||null===(i=r.onDropdownVisibleChange)||void 0===i||i.call(r,n),A(n);},className:(0,L.default)(null===(F=u.fieldProps)||void 0===F?void 0:F.className,c),options:m}));if(i&&(j=null!==(B=i(u.text,(0,g.default)((0,g.default)({mode:a},u.fieldProps),{},{options:m,loading:p}),j))&&void 0!==B?B:null),l){var z=u.fieldProps,U=z.disabled,V=z.value,G=!!V&&(null==V?void 0:V.length)!==0;return(0,tw.jsx)(O.FieldLabel,{label:s,disabled:U,bordered:u.bordered,value:G||S?j:null,style:G?{paddingInlineEnd:0}:void 0,allowClear:!1,downIcon:!G&&!S&&void 0,onClick:function(){var n,r;A(!0),null==u||null===(n=u.fieldProps)||void 0===n||null===(r=n.onDropdownVisibleChange)||void 0===r||r.call(n,!0);}});}return j;}return null;}),tA=i("a3273044"),tC=i("accd0a80"),tO=u._(tC),tM=i("f34e933b"),tR=u._(tM),tP=i("e68da947"),tk=u._(tP),tI=["layout","renderFormItem","mode","render"],tL=["fieldNames"],tN=w.default.forwardRef(function(n,r){var i=n.layout,a=n.renderFormItem,o=n.mode,s=n.render,l=(0,d.default)(n,tI),u=(0,(0,w.useContext)(tb.default.ConfigContext).getPrefixCls)("pro-field-checkbox"),c=null===(S=tR.default.Item)||void 0===S||null===(A=S.useStatus)||void 0===A?void 0:A.call(S),f=(0,tE.useFieldFetchData)(l),h=(0,T.default)(f,3),p=h[0],m=h[1],v=h[2],y=(0,tA.useStyle)("Checkbox",function(n){return(0,em.default)({},".".concat(u),{"&-error":{span:{color:n.colorError}},"&-warning":{span:{color:n.colorWarning}},"&-vertical":(0,em.default)((0,em.default)((0,em.default)({},"&".concat(n.antCls,"-checkbox-group"),{display:"inline-block"}),"".concat(n.antCls,"-checkbox-wrapper+").concat(n.antCls,"-checkbox-wrapper"),{"margin-inline-start":"0  !important"}),"".concat(n.antCls,"-checkbox-group-item"),{display:"flex",marginInlineEnd:0})});}),_=y.wrapSSR,b=y.hashId,x=(null===tA.useToken||void 0===tA.useToken?void 0:(0,tA.useToken)()).token,E=(0,w.useRef)();if((0,w.useImperativeHandle)(r,function(){return(0,g.default)((0,g.default)({},E.current||{}),{},{fetchData:function(n){return v(n);}});},[v]),p)return(0,tw.jsx)(tk.default,{size:"small"});if("read"===o){var S,A,C,O=null!=m&&m.length?null==m?void 0:m.reduce(function(n,r){var i;return(0,g.default)((0,g.default)({},n),{},(0,em.default)({},null!==(i=r.value)&&void 0!==i?i:"",r.label));},{}):void 0,M=(0,R.proFieldParsingText)(l.text,(0,R.objectToMap)(l.valueEnum||O));return s?null!==(C=s(l.text,(0,g.default)({mode:o},l.fieldProps),(0,tw.jsx)(tw.Fragment,{children:M})))&&void 0!==C?C:null:(0,tw.jsx)("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:x.marginSM},children:M});}if("edit"===o){var P,k,I=l.fieldProps||{},N=(I.fieldNames,(0,d.default)(I,tL)),D=_((0,tw.jsx)(tO.default.Group,(0,g.default)((0,g.default)({},N),{},{className:(0,L.default)(null===(P=l.fieldProps)||void 0===P?void 0:P.className,b,"".concat(u,"-").concat(void 0===i?"horizontal":i),(0,em.default)((0,em.default)({},"".concat(u,"-error"),(null==c?void 0:c.status)==="error"),"".concat(u,"-warning"),(null==c?void 0:c.status)==="warning")),options:m})));return a?null!==(k=a(l.text,(0,g.default)((0,g.default)({mode:o},l.fieldProps),{},{options:m,loading:p}),D))&&void 0!==k?k:null:D;}return null;}),tD=i("be902df5"),tF=u._(tD),tB=i("f8d2e5ac"),tj=function(n,r){if("string"!=typeof n)return n;try{if("json"===r)return JSON.stringify(JSON.parse(n),null,2);}catch(n){}return n;},tz=w.default.forwardRef(function(n,r){var i=n.text,a=n.mode,o=n.render,s=n.language,l=n.renderFormItem,u=n.plain,c=n.fieldProps,f=tj(i,void 0===s?"text":s),d=tA.proTheme.useToken().token;if("read"===a){var h=(0,tw.jsx)("pre",(0,g.default)((0,g.default)({ref:r},c),{},{style:(0,g.default)({padding:16,overflow:"auto",fontSize:"85%",lineHeight:1.45,color:d.colorTextSecondary,fontFamily:d.fontFamilyCode,backgroundColor:"rgba(150, 150, 150, 0.1)",borderRadius:3,width:"min-content"},c.style),children:(0,tw.jsx)("code",{children:f})}));return o?o(f,(0,g.default)((0,g.default)({mode:a},c),{},{ref:r}),h):h;}if("edit"===a||"update"===a){c.value=f;var p,m=(0,tw.jsx)(tF.default.TextArea,(0,g.default)((0,g.default)({rows:5},c),{},{ref:r}));return(u&&(m=(0,tw.jsx)(tF.default,(0,g.default)((0,g.default)({},c),{},{ref:r}))),l)?null!==(p=l(f,(0,g.default)((0,g.default)({mode:a},c),{},{ref:r}),m))&&void 0!==p?p:null:m;}return null;}),tU=i("ca3807c9"),tV=i("20281a68"),tG=u._(tV),tH=i("4d2fad5e"),tW=u._(tH),tX=i("2c9857d5"),tq=i("e6c8d689"),t$=u._(tq),tY=i("40d036eb"),tZ=c._(tY),tK=i("4b97d3c2"),tQ=c._(tK),tJ=i("1a3052a5"),t0=u._(tJ);let t1=w.default.createContext({}),t2=w.default.createContext({});var t3=i("f74b2536");let t4=({prefixCls:n,value:r,onChange:i})=>w.default.createElement("div",{className:`${n}-clear`,onClick:()=>{if(i&&r&&!r.cleared){let n=r.toHsb();n.a=0;let a=(0,t3.generateColor)(n);a.cleared=!0,i(a);}}});var t5=i("cef31543"),t6=u._(t5),t8=i("0300f56f"),t7=u._(t8),t9=i("c4157706"),ne=u._(t9),nt=i("115c0a49"),nn=c._(nt),nr=i("1fe7fa71"),ni=i("002639b3"),na=i("081d3809"),no=u._(na),ns=function(){var n=(0,w.useState)(!1),r=(0,T.default)(n,2),i=r[0],a=r[1];return(0,tQ.default)(function(){a((0,no.default)());},[]),i;},nl=i("08800308"),nu=u._(nl);function nc(n){var r=n.prefixCls,i=n.upNode,a=n.downNode,o=n.upDisabled,s=n.downDisabled,l=n.onStep,u=w.useRef(),c=w.useRef([]),f=w.useRef();f.current=l;var d=function(){clearTimeout(u.current);},h=function(n,r){n.preventDefault(),d(),f.current(r),u.current=setTimeout(function n(){f.current(r),u.current=setTimeout(n,200);},600);};if(w.useEffect(function(){return function(){d(),c.current.forEach(function(n){return nu.default.cancel(n);});};},[]),ns())return null;var p="".concat(r,"-handler"),m=(0,L.default)(p,"".concat(p,"-up"),(0,em.default)({},"".concat(p,"-up-disabled"),o)),g=(0,L.default)(p,"".concat(p,"-down"),(0,em.default)({},"".concat(p,"-down-disabled"),s)),v=function(){return c.current.push((0,nu.default)(d));},y={unselectable:"on",role:"button",onMouseUp:v,onMouseLeave:v};return w.createElement("div",{className:"".concat(p,"-wrap")},w.createElement("span",(0,D.default)({},y,{onMouseDown:function(n){h(n,!0);},"aria-label":"Increase Value","aria-disabled":o,className:m}),i||w.createElement("span",{unselectable:"on",className:"".concat(r,"-handler-up-inner")})),w.createElement("span",(0,D.default)({},y,{onMouseDown:function(n){h(n,!1);},"aria-label":"Decrease Value","aria-disabled":s,className:g}),a||w.createElement("span",{unselectable:"on",className:"".concat(r,"-handler-down-inner")})));}function nf(n){var r="number"==typeof n?(0,nn.num2str)(n):(0,nn.trimNumber)(n).fullStr;return r.includes(".")?(0,nn.trimNumber)(r.replace(/(\d)\.(\d)/g,"$1$2.")).fullStr:n+"0";}var nd=i("8ccd78b4"),nh=function(){var n=(0,w.useRef)(0),r=function(){nu.default.cancel(n.current);};return(0,w.useEffect)(function(){return r;},[]),function(i){r(),n.current=(0,nu.default)(function(){i();});};},np=["prefixCls","className","style","min","max","step","defaultValue","value","disabled","readOnly","upHandler","downHandler","keyboard","changeOnWheel","controls","classNames","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep","changeOnBlur","domRef"],nm=["disabled","style","prefixCls","value","prefix","suffix","addonBefore","addonAfter","className","classNames"],ng=function(n,r){return n||r.isEmpty()?r.toString():r.toNumber();},nv=function(n){var r=(0,nn.default)(n);return r.isInvalidate()?null:r;},ny=w.forwardRef(function(n,r){var i,a,o=n.prefixCls,s=n.className,l=n.style,u=n.min,c=n.max,f=n.step,h=void 0===f?1:f,m=n.defaultValue,g=n.value,v=n.disabled,y=n.readOnly,_=n.upHandler,b=n.downHandler,x=n.keyboard,E=n.changeOnWheel,S=void 0!==E&&E,A=n.controls,C=(n.classNames,n.stringMode),O=n.parser,M=n.formatter,R=n.precision,P=n.decimalSeparator,k=n.onChange,I=n.onInput,N=n.onPressEnter,F=n.onStep,B=n.changeOnBlur,j=void 0===B||B,z=n.domRef,U=(0,d.default)(n,np),V="".concat(o,"-input"),G=w.useRef(null),H=w.useState(!1),W=(0,T.default)(H,2),X=W[0],q=W[1],$=w.useRef(!1),Y=w.useRef(!1),Z=w.useRef(!1),K=w.useState(function(){return(0,nn.default)(null!=g?g:m);}),Q=(0,T.default)(K,2),J=Q[0],ee=Q[1],et=w.useCallback(function(n,r){if(!r)return R>=0?R:Math.max((0,nn.getNumberPrecision)(n),(0,nn.getNumberPrecision)(h));},[R,h]),en=w.useCallback(function(n){var r=String(n);if(O)return O(r);var i=r;return P&&(i=i.replace(P,".")),i.replace(/[^\w.-]+/g,"");},[O,P]),er=w.useRef(""),ei=w.useCallback(function(n,r){if(M)return M(n,{userTyping:r,input:String(er.current)});var i="number"==typeof n?(0,nn.num2str)(n):n;if(!r){var a=et(i,r);if((0,nn.validateNumber)(i)&&(P||a>=0)){var o=P||".";i=(0,nn.toFixed)(i,o,a);}}return i;},[M,et,P]),ea=w.useState(function(){var n=null!=m?m:g;return J.isInvalidate()&&["string","number"].includes((0,p.default)(n))?Number.isNaN(n)?"":n:ei(J.toString(),!1);}),eo=(0,T.default)(ea,2),es=eo[0],el=eo[1];function eu(n,r){el(ei(n.isInvalidate()?n.toString(!1):n.toString(!r),r));}er.current=es;var ef=w.useMemo(function(){return nv(c);},[c,R]),ed=w.useMemo(function(){return nv(u);},[u,R]),eh=w.useMemo(function(){return!(!ef||!J||J.isInvalidate())&&ef.lessEquals(J);},[ef,J]),ep=w.useMemo(function(){return!(!ed||!J||J.isInvalidate())&&J.lessEquals(ed);},[ed,J]),eg=(i=G.current,a=(0,w.useRef)(null),[function(){try{var n=i.selectionStart,r=i.selectionEnd,o=i.value,s=o.substring(0,n),l=o.substring(r);a.current={start:n,end:r,value:o,beforeTxt:s,afterTxt:l};}catch(n){}},function(){if(i&&a.current&&X)try{var n=i.value,r=a.current,o=r.beforeTxt,s=r.afterTxt,l=r.start,u=n.length;if(n.startsWith(o))u=o.length;else if(n.endsWith(s))u=n.length-a.current.afterTxt.length;else{var c=o[l-1],f=n.indexOf(c,l-1);-1!==f&&(u=f+1);}i.setSelectionRange(u,u);}catch(n){(0,ec.default)(!1,"Something warning of cursor restore. Please fire issue about this: ".concat(n.message));}}]),ev=(0,T.default)(eg,2),ey=ev[0],e_=ev[1],eb=function(n){return ef&&!n.lessEquals(ef)?ef:ed&&!ed.lessEquals(n)?ed:null;},ex=function(n){return!eb(n);},eE=function(n,r){var i=n,a=ex(i)||i.isEmpty();if(i.isEmpty()||r||(i=eb(i)||i,a=!0),!y&&!v&&a){var o,s=i.toString(),l=et(s,r);return l>=0&&!ex(i=(0,nn.default)((0,nn.toFixed)(s,".",l)))&&(i=(0,nn.default)((0,nn.toFixed)(s,".",l,!0))),i.equals(J)||(o=i,void 0===g&&ee(o),null==k||k(i.isEmpty()?null:ng(C,i)),void 0===g&&eu(i,r)),i;}return J;},ew=nh(),eS=function n(r){if(ey(),er.current=r,el(r),!Y.current){var i=en(r),a=(0,nn.default)(i);a.isNaN()||eE(a,!0);}null==I||I(r),ew(function(){var i=r;O||(i=r.replace(//g,".")),i!==r&&n(i);});},eT=function(n){if((!n||!eh)&&(n||!ep)){$.current=!1;var r,i=(0,nn.default)(Z.current?nf(h):h);n||(i=i.negate());var a=eE((J||(0,nn.default)(0)).add(i.toString()),!1);null==F||F(ng(C,a),{offset:Z.current?nf(h):h,type:n?"up":"down"}),null===(r=G.current)||void 0===r||r.focus();}},eA=function(n){var r,i=(0,nn.default)(en(es));r=i.isNaN()?eE(J,n):eE(i,n),void 0!==g?eu(J,!1):r.isNaN()||eu(r,!1);};return w.useEffect(function(){if(S&&X){var n=function(n){eT(n.deltaY<0),n.preventDefault();},r=G.current;if(r)return r.addEventListener("wheel",n,{passive:!1}),function(){return r.removeEventListener("wheel",n);};}}),(0,tQ.useLayoutUpdateEffect)(function(){J.isInvalidate()||eu(J,!1);},[R,M]),(0,tQ.useLayoutUpdateEffect)(function(){var n=(0,nn.default)(g);ee(n);var r=(0,nn.default)(en(es));n.equals(r)&&$.current&&!M||eu(n,$.current);},[g]),(0,tQ.useLayoutUpdateEffect)(function(){M&&e_();},[es]),w.createElement("div",{ref:z,className:(0,L.default)(o,s,(0,em.default)((0,em.default)((0,em.default)((0,em.default)((0,em.default)({},"".concat(o,"-focused"),X),"".concat(o,"-disabled"),v),"".concat(o,"-readonly"),y),"".concat(o,"-not-a-number"),J.isNaN()),"".concat(o,"-out-of-range"),!J.isInvalidate()&&!ex(J))),style:l,onFocus:function(){q(!0);},onBlur:function(){j&&eA(!1),q(!1),$.current=!1;},onKeyDown:function(n){var r=n.key,i=n.shiftKey;$.current=!0,Z.current=i,"Enter"===r&&(Y.current||($.current=!1),eA(!1),null==N||N(n)),!1!==x&&!Y.current&&["Up","ArrowUp","Down","ArrowDown"].includes(r)&&(eT("Up"===r||"ArrowUp"===r),n.preventDefault());},onKeyUp:function(){$.current=!1,Z.current=!1;},onCompositionStart:function(){Y.current=!0;},onCompositionEnd:function(){Y.current=!1,eS(G.current.value);},onBeforeInput:function(){$.current=!0;}},(void 0===A||A)&&w.createElement(nc,{prefixCls:o,upNode:_,downNode:b,upDisabled:eh,downDisabled:ep,onStep:eT}),w.createElement("div",{className:"".concat(V,"-wrap")},w.createElement("input",(0,D.default)({autoComplete:"off",role:"spinbutton","aria-valuemin":u,"aria-valuemax":c,"aria-valuenow":J.isInvalidate()?null:J.toString(),step:h},U,{ref:(0,ni.composeRef)(G,r),className:V,value:es,onChange:function(n){eS(n.target.value);},disabled:v,readOnly:y}))));}),n_=w.forwardRef(function(n,r){var i=n.disabled,a=n.style,o=n.prefixCls,s=void 0===o?"rc-input-number":o,l=n.value,u=n.prefix,c=n.suffix,f=n.addonBefore,h=n.addonAfter,p=n.className,m=n.classNames,g=(0,d.default)(n,nm),v=w.useRef(null),y=w.useRef(null),_=w.useRef(null),b=function(n){_.current&&(0,nd.triggerFocus)(_.current,n);};return w.useImperativeHandle(r,function(){var n,r;return n=_.current,r={focus:b,nativeElement:v.current.nativeElement||y.current},"undefined"!=typeof Proxy&&n?new Proxy(n,{get:function(n,i){if(r[i])return r[i];var a=n[i];return"function"==typeof a?a.bind(n):a;}}):n;}),w.createElement(nr.BaseInput,{className:p,triggerFocus:b,prefixCls:s,value:l,disabled:i,style:a,prefix:u,suffix:c,addonAfter:h,addonBefore:f,classNames:m,components:{affixWrapper:"div",groupWrapper:"div",wrapper:"div",groupAddon:"div"},ref:v},w.createElement(ny,(0,D.default)({prefixCls:s,disabled:i,ref:_,domRef:y,className:null==m?void 0:m.input},g)));}),nb=i("54bb12aa"),nx=i("b8bf818d"),nE=i("f2ad6117"),nw=i("769846ac");let nS=({componentCls:n,borderRadiusSM:r,borderRadiusLG:i},a)=>{let o="lg"===a?i:r;return{[`&-${a}`]:{[`${n}-handler-wrap`]:{borderStartEndRadius:o,borderEndEndRadius:o},[`${n}-handler-up`]:{borderStartEndRadius:o},[`${n}-handler-down`]:{borderEndEndRadius:o}}};},nT=n=>{let{componentCls:r,lineWidth:i,lineType:a,borderRadius:o,inputFontSizeSM:s,inputFontSizeLG:l,controlHeightLG:u,controlHeightSM:c,colorError:f,paddingInlineSM:d,paddingBlockSM:h,paddingBlockLG:p,paddingInlineLG:m,colorIcon:g,motionDurationMid:v,handleHoverColor:y,handleOpacity:_,paddingInline:b,paddingBlock:x,handleBg:E,handleActiveBg:w,colorTextDisabled:S,borderRadiusSM:T,borderRadiusLG:A,controlWidth:C,handleBorderColor:O,filledHandleBg:M,lineHeightLG:R,calc:P}=n;return[{[r]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,to.resetComponent)(n)),(0,tB.genBasicInputStyle)(n)),{display:"inline-block",width:C,margin:0,padding:0,borderRadius:o}),(0,nx.genOutlinedStyle)(n,{[`${r}-handler-wrap`]:{background:E,[`${r}-handler-down`]:{borderBlockStart:`${(0,ti.unit)(i)} ${a} ${O}`}}})),(0,nx.genFilledStyle)(n,{[`${r}-handler-wrap`]:{background:M,[`${r}-handler-down`]:{borderBlockStart:`${(0,ti.unit)(i)} ${a} ${O}`}},"&:focus-within":{[`${r}-handler-wrap`]:{background:E}}})),(0,nx.genUnderlinedStyle)(n,{[`${r}-handler-wrap`]:{background:E,[`${r}-handler-down`]:{borderBlockStart:`${(0,ti.unit)(i)} ${a} ${O}`}}})),(0,nx.genBorderlessStyle)(n)),{"&-rtl":{direction:"rtl",[`${r}-input`]:{direction:"rtl"}},"&-lg":{padding:0,fontSize:l,lineHeight:R,borderRadius:A,[`input${r}-input`]:{height:P(u).sub(P(i).mul(2)).equal(),padding:`${(0,ti.unit)(p)} ${(0,ti.unit)(m)}`}},"&-sm":{padding:0,fontSize:s,borderRadius:T,[`input${r}-input`]:{height:P(c).sub(P(i).mul(2)).equal(),padding:`${(0,ti.unit)(h)} ${(0,ti.unit)(d)}`}},"&-out-of-range":{[`${r}-input-wrap`]:{input:{color:f}}},"&-group":Object.assign(Object.assign(Object.assign({},(0,to.resetComponent)(n)),(0,tB.genInputGroupStyle)(n)),{"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",textAlign:"start",verticalAlign:"top",[`${r}-affix-wrapper`]:{width:"100%"},"&-lg":{[`${r}-group-addon`]:{borderRadius:A,fontSize:n.fontSizeLG}},"&-sm":{[`${r}-group-addon`]:{borderRadius:T}}},(0,nx.genOutlinedGroupStyle)(n)),(0,nx.genFilledGroupStyle)(n)),{[`&:not(${r}-compact-first-item):not(${r}-compact-last-item)${r}-compact-item`]:{[`${r}, ${r}-group-addon`]:{borderRadius:0}},[`&:not(${r}-compact-last-item)${r}-compact-first-item`]:{[`${r}, ${r}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${r}-compact-first-item)${r}-compact-last-item`]:{[`${r}, ${r}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}})}),[`&-disabled ${r}-input`]:{cursor:"not-allowed"},[r]:{"&-input":Object.assign(Object.assign(Object.assign(Object.assign({},(0,to.resetComponent)(n)),{width:"100%",padding:`${(0,ti.unit)(x)} ${(0,ti.unit)(b)}`,textAlign:"start",backgroundColor:"transparent",border:0,borderRadius:o,outline:0,transition:`all ${v} linear`,appearance:"textfield",fontSize:"inherit"}),(0,tB.genPlaceholderStyle)(n.colorTextPlaceholder)),{'&[type="number"]::-webkit-inner-spin-button, &[type="number"]::-webkit-outer-spin-button':{margin:0,appearance:"none"}})},[`&:hover ${r}-handler-wrap, &-focused ${r}-handler-wrap`]:{width:n.handleWidth,opacity:1}})},{[r]:Object.assign(Object.assign(Object.assign({[`${r}-handler-wrap`]:{position:"absolute",insetBlockStart:0,insetInlineEnd:0,width:n.handleVisibleWidth,opacity:_,height:"100%",borderStartStartRadius:0,borderStartEndRadius:o,borderEndEndRadius:o,borderEndStartRadius:0,display:"flex",flexDirection:"column",alignItems:"stretch",transition:`all ${v}`,overflow:"hidden",[`${r}-handler`]:{display:"flex",alignItems:"center",justifyContent:"center",flex:"auto",height:"40%",[`
              ${r}-handler-up-inner,
              ${r}-handler-down-inner
            `]:{marginInlineEnd:0,fontSize:n.handleFontSize}}},[`${r}-handler`]:{height:"50%",overflow:"hidden",color:g,fontWeight:"bold",lineHeight:0,textAlign:"center",cursor:"pointer",borderInlineStart:`${(0,ti.unit)(i)} ${a} ${O}`,transition:`all ${v} linear`,"&:active":{background:w},"&:hover":{height:"60%",[`
              ${r}-handler-up-inner,
              ${r}-handler-down-inner
            `]:{color:y}},"&-up-inner, &-down-inner":Object.assign(Object.assign({},(0,to.resetIcon)()),{color:g,transition:`all ${v} linear`,userSelect:"none"})},[`${r}-handler-up`]:{borderStartEndRadius:o},[`${r}-handler-down`]:{borderEndEndRadius:o}},nS(n,"lg")),nS(n,"sm")),{"&-disabled, &-readonly":{[`${r}-handler-wrap`]:{display:"none"},[`${r}-input`]:{color:"inherit"}},[`
          ${r}-handler-up-disabled,
          ${r}-handler-down-disabled
        `]:{cursor:"not-allowed"},[`
          ${r}-handler-up-disabled:hover &-handler-up-inner,
          ${r}-handler-down-disabled:hover &-handler-down-inner
        `]:{color:S}})}];},nA=n=>{let{componentCls:r,paddingBlock:i,paddingInline:a,inputAffixPadding:o,controlWidth:s,borderRadiusLG:l,borderRadiusSM:u,paddingInlineLG:c,paddingInlineSM:f,paddingBlockLG:d,paddingBlockSM:h,motionDurationMid:p}=n;return{[`${r}-affix-wrapper`]:Object.assign(Object.assign({[`input${r}-input`]:{padding:`${(0,ti.unit)(i)} 0`}},(0,tB.genBasicInputStyle)(n)),{position:"relative",display:"inline-flex",alignItems:"center",width:s,padding:0,paddingInlineStart:a,"&-lg":{borderRadius:l,paddingInlineStart:c,[`input${r}-input`]:{padding:`${(0,ti.unit)(d)} 0`}},"&-sm":{borderRadius:u,paddingInlineStart:f,[`input${r}-input`]:{padding:`${(0,ti.unit)(h)} 0`}},[`&:not(${r}-disabled):hover`]:{zIndex:1},"&-focused, &:focus":{zIndex:1},[`&-disabled > ${r}-disabled`]:{background:"transparent"},[`> div${r}`]:{width:"100%",border:"none",outline:"none",[`&${r}-focused`]:{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${r}-handler-wrap`]:{zIndex:2},[r]:{position:"static",color:"inherit","&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center",pointerEvents:"none"},"&-prefix":{marginInlineEnd:o},"&-suffix":{insetBlockStart:0,insetInlineEnd:0,height:"100%",marginInlineEnd:a,marginInlineStart:o,transition:`margin ${p}`}},[`&:hover ${r}-handler-wrap, &-focused ${r}-handler-wrap`]:{width:n.handleWidth,opacity:1},[`&:not(${r}-affix-wrapper-without-controls):hover ${r}-suffix`]:{marginInlineEnd:n.calc(n.handleWidth).add(a).equal()}}),[`${r}-underlined`]:{borderRadius:0}};};var nC=(0,tr.genStyleHooks)("InputNumber",n=>{let r=(0,nE.mergeToken)(n,(0,tB.initInputToken)(n));return[nT(r),nA(r),(0,tn.genCompactItemStyle)(r)];},n=>{var r;let i=null!==(r=n.handleVisible)&&void 0!==r?r:"auto",a=n.controlHeightSM-2*n.lineWidth;return Object.assign(Object.assign({},(0,nb.initComponentToken)(n)),{controlWidth:90,handleWidth:a,handleFontSize:n.fontSize/2,handleVisible:i,handleActiveBg:n.colorFillAlter,handleBg:n.colorBgContainer,filledHandleBg:new nw.FastColor(n.colorFillSecondary).onBackground(n.colorBgContainer).toHexString(),handleHoverColor:n.colorPrimary,handleBorderColor:n.colorBorder,handleOpacity:!0===i?1:0,handleVisibleWidth:!0===i?a:0});},{unitless:{handleOpacity:!0}}),nO=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let nM=w.forwardRef((n,r)=>{let{getPrefixCls:i,direction:a}=w.useContext(tb.ConfigContext),o=w.useRef(null);w.useImperativeHandle(r,()=>o.current);let{className:s,rootClassName:l,size:u,disabled:c,prefixCls:f,addonBefore:d,addonAfter:h,prefix:p,suffix:m,bordered:g,readOnly:v,status:y,controls:_,variant:b}=n,x=nO(n,["className","rootClassName","size","disabled","prefixCls","addonBefore","addonAfter","prefix","suffix","bordered","readOnly","status","controls","variant"]),E=i("input-number",f),S=(0,eH.default)(E),[T,A,C]=nC(E,S),{compactSize:O,compactItemClassnames:M}=(0,e4.useCompactItemContext)(E,a),R=w.createElement(ne.default,{className:`${E}-handler-up-inner`}),P=w.createElement(t7.default,{className:`${E}-handler-down-inner`}),k="boolean"==typeof _?_:void 0;"object"==typeof _&&(R=void 0===_.upIcon?R:w.createElement("span",{className:`${E}-handler-up-inner`},_.upIcon),P=void 0===_.downIcon?P:w.createElement("span",{className:`${E}-handler-down-inner`},_.downIcon));let{hasFeedback:I,status:N,isFormItemInput:D,feedbackIcon:F}=w.useContext(eq.FormItemInputContext),B=(0,eF.getMergedStatus)(N,y),j=(0,eX.default)(n=>{var r;return null!==(r=null!=u?u:O)&&void 0!==r?r:n;}),z=w.useContext(eV.default),U=null!=c?c:z,[V,G]=(0,eY.default)("inputNumber",b,g),H=I&&w.createElement(w.Fragment,null,F),W=(0,L.default)({[`${E}-lg`]:"large"===j,[`${E}-sm`]:"small"===j,[`${E}-rtl`]:"rtl"===a,[`${E}-in-form-item`]:D},A),X=`${E}-group`;return T(w.createElement(n_,Object.assign({ref:o,disabled:U,className:(0,L.default)(C,S,s,l,M),upHandler:R,downHandler:P,prefixCls:E,readOnly:v,controls:k,prefix:p,suffix:H||m,addonBefore:d&&w.createElement(tG.default,{form:!0,space:!0},d),addonAfter:h&&w.createElement(tG.default,{form:!0,space:!0},h),classNames:{input:W,variant:(0,L.default)({[`${E}-${V}`]:G},(0,eF.getStatusClassNames)(E,B,I)),affixWrapper:(0,L.default)({[`${E}-affix-wrapper-sm`]:"small"===j,[`${E}-affix-wrapper-lg`]:"large"===j,[`${E}-affix-wrapper-rtl`]:"rtl"===a,[`${E}-affix-wrapper-without-controls`]:!1===_||U},A),wrapper:(0,L.default)({[`${X}-rtl`]:"rtl"===a},A),groupWrapper:(0,L.default)({[`${E}-group-wrapper-sm`]:"small"===j,[`${E}-group-wrapper-lg`]:"large"===j,[`${E}-group-wrapper-rtl`]:"rtl"===a,[`${E}-group-wrapper-${V}`]:G},(0,eF.getStatusClassNames)(`${E}-group-wrapper`,B,I),A)}},x)));});nM._InternalPanelDoNotUseOrYouWillBeFired=n=>w.createElement(tb.default,{theme:{components:{InputNumber:{handleVisible:!0}}}},w.createElement(nM,Object.assign({},n)));let nR=({prefixCls:n,min:r=0,max:i=100,value:a,onChange:o,className:s,formatter:l})=>{let u=`${n}-steppers`,[c,f]=(0,w.useState)(0),d=Number.isNaN(a)?c:a;return w.default.createElement(nM,{className:(0,L.default)(u,s),min:r,max:i,value:d,formatter:l,size:"small",onChange:n=>{f(n||0),null==o||o(n);}});},nP=({prefixCls:n,value:r,onChange:i})=>{let a=`${n}-alpha-input`,[o,s]=(0,w.useState)(()=>(0,t3.generateColor)(r||"#000")),l=r||o;return w.default.createElement(nR,{value:(0,t3.getColorAlpha)(l),prefixCls:n,formatter:n=>`${n}%`,className:a,onChange:n=>{let r=l.toHsb();r.a=(n||0)/100;let a=(0,t3.generateColor)(r);s(a),null==i||i(a);}});};var nk=i("af81be3e"),nI=u._(nk);let nL=/(^#[\da-f]{6}$)|(^#[\da-f]{8}$)/i,nN=n=>nL.test(`#${n}`),nD=({prefixCls:n,value:r,onChange:i})=>{let a=`${n}-hex-input`,[o,s]=(0,w.useState)(()=>r?(0,tX.toHexFormat)(r.toHexString()):void 0);return(0,w.useEffect)(()=>{r&&s((0,tX.toHexFormat)(r.toHexString()));},[r]),w.default.createElement(nI.default,{className:a,value:o,prefix:"#",onChange:n=>{let r=n.target.value;s((0,tX.toHexFormat)(r)),nN((0,tX.toHexFormat)(r,!0))&&(null==i||i((0,t3.generateColor)(r)));},size:"small"});},nF=({prefixCls:n,value:r,onChange:i})=>{let a=`${n}-hsb-input`,[o,s]=(0,w.useState)(()=>(0,t3.generateColor)(r||"#000")),l=r||o,u=(n,r)=>{let a=l.toHsb();a[r]="h"===r?n:(n||0)/100;let o=(0,t3.generateColor)(a);s(o),null==i||i(o);};return w.default.createElement("div",{className:a},w.default.createElement(nR,{max:360,min:0,value:Number(l.toHsb().h),prefixCls:n,className:a,formatter:n=>(0,t3.getRoundNumber)(n||0).toString(),onChange:n=>u(Number(n),"h")}),w.default.createElement(nR,{max:100,min:0,value:100*Number(l.toHsb().s),prefixCls:n,className:a,formatter:n=>`${(0,t3.getRoundNumber)(n||0)}%`,onChange:n=>u(Number(n),"s")}),w.default.createElement(nR,{max:100,min:0,value:100*Number(l.toHsb().b),prefixCls:n,className:a,formatter:n=>`${(0,t3.getRoundNumber)(n||0)}%`,onChange:n=>u(Number(n),"b")}));},nB=({prefixCls:n,value:r,onChange:i})=>{let a=`${n}-rgb-input`,[o,s]=(0,w.useState)(()=>(0,t3.generateColor)(r||"#000")),l=r||o,u=(n,r)=>{let a=l.toRgb();a[r]=n||0;let o=(0,t3.generateColor)(a);s(o),null==i||i(o);};return w.default.createElement("div",{className:a},w.default.createElement(nR,{max:255,min:0,value:Number(l.toRgb().r),prefixCls:n,className:a,onChange:n=>u(Number(n),"r")}),w.default.createElement(nR,{max:255,min:0,value:Number(l.toRgb().g),prefixCls:n,className:a,onChange:n=>u(Number(n),"g")}),w.default.createElement(nR,{max:255,min:0,value:Number(l.toRgb().b),prefixCls:n,className:a,onChange:n=>u(Number(n),"b")}));},nj=["hex","hsb","rgb"].map(n=>({value:n,label:n.toUpperCase()})),nz=n=>{let{prefixCls:r,format:i,value:a,disabledAlpha:o,onFormatChange:s,onChange:l,disabledFormat:u}=n,[c,f]=(0,G.default)("hex",{value:i,onChange:s}),d=`${r}-input`,h=(0,w.useMemo)(()=>{let n={value:a,prefixCls:r,onChange:l};switch(c){case"hsb":return w.default.createElement(nF,Object.assign({},n));case"rgb":return w.default.createElement(nB,Object.assign({},n));default:return w.default.createElement(nD,Object.assign({},n));}},[c,r,a,l]);return w.default.createElement("div",{className:`${d}-container`},!u&&w.default.createElement(t6.default,{value:c,variant:"borderless",getPopupContainer:n=>n,popupMatchSelectWidth:68,placement:"bottomRight",onChange:n=>{f(n);},className:`${r}-format-select`,size:"small",options:nj}),w.default.createElement("div",{className:d},h),!o&&w.default.createElement(nP,{prefixCls:r,value:a,onChange:l}));};var nU=i("044bdec0"),nV=u._(nU),nG=i("792e90bc"),nH=i("7a349a12"),nW=w.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0,styles:{},classNames:{}}),nX=w.createContext({}),nq=["prefixCls","value","valueIndex","onStartMove","onDelete","style","render","dragging","draggingDelete","onOffsetChange","onChangeComplete","onFocus","onMouseEnter"],n$=w.forwardRef(function(n,r){var i,a=n.prefixCls,o=n.value,s=n.valueIndex,l=n.onStartMove,u=n.onDelete,c=n.style,f=n.render,h=n.dragging,p=n.draggingDelete,m=n.onOffsetChange,v=n.onChangeComplete,y=n.onFocus,_=n.onMouseEnter,b=(0,d.default)(n,nq),x=w.useContext(nW),E=x.min,S=x.max,T=x.direction,A=x.disabled,C=x.keyboard,O=x.range,M=x.tabIndex,R=x.ariaLabelForHandle,P=x.ariaLabelledByForHandle,k=x.ariaRequired,I=x.ariaValueTextFormatterForHandle,N=x.styles,F=x.classNames,B="".concat(a,"-handle"),j=function(n){A||l(n,s);},z=(0,nH.getDirectionStyle)(T,o,E,S),U={};null!==s&&(U={tabIndex:A?null:(0,nH.getIndex)(M,s),role:"slider","aria-valuemin":E,"aria-valuemax":S,"aria-valuenow":o,"aria-disabled":A,"aria-label":(0,nH.getIndex)(R,s),"aria-labelledby":(0,nH.getIndex)(P,s),"aria-required":(0,nH.getIndex)(k,s),"aria-valuetext":null===(i=(0,nH.getIndex)(I,s))||void 0===i?void 0:i(o),"aria-orientation":"ltr"===T||"rtl"===T?"horizontal":"vertical",onMouseDown:j,onTouchStart:j,onFocus:function(n){null==y||y(n,s);},onMouseEnter:function(n){_(n,s);},onKeyDown:function(n){if(!A&&C){var r=null;switch(n.which||n.keyCode){case eE.default.LEFT:r="ltr"===T||"btt"===T?-1:1;break;case eE.default.RIGHT:r="ltr"===T||"btt"===T?1:-1;break;case eE.default.UP:r="ttb"!==T?1:-1;break;case eE.default.DOWN:r="ttb"!==T?-1:1;break;case eE.default.HOME:r="min";break;case eE.default.END:r="max";break;case eE.default.PAGE_UP:r=2;break;case eE.default.PAGE_DOWN:r=-2;break;case eE.default.BACKSPACE:case eE.default.DELETE:u(s);}null!==r&&(n.preventDefault(),m(r,s));}},onKeyUp:function(n){switch(n.which||n.keyCode){case eE.default.LEFT:case eE.default.RIGHT:case eE.default.UP:case eE.default.DOWN:case eE.default.HOME:case eE.default.END:case eE.default.PAGE_UP:case eE.default.PAGE_DOWN:null==v||v();}}});var V=w.createElement("div",(0,D.default)({ref:r,className:(0,L.default)(B,(0,em.default)((0,em.default)((0,em.default)({},"".concat(B,"-").concat(s+1),null!==s&&O),"".concat(B,"-dragging"),h),"".concat(B,"-dragging-delete"),p),F.handle),style:(0,g.default)((0,g.default)((0,g.default)({},z),c),N.handle)},U,b));return f&&(V=f(V,{index:s,prefixCls:a,value:o,dragging:h,draggingDelete:p})),V;}),nY=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","activeHandleRender","draggingIndex","draggingDelete","onFocus"],nZ=w.forwardRef(function(n,r){var i=n.prefixCls,a=n.style,o=n.onStartMove,s=n.onOffsetChange,l=n.values,u=n.handleRender,c=n.activeHandleRender,f=n.draggingIndex,h=n.draggingDelete,p=n.onFocus,m=(0,d.default)(n,nY),v=w.useRef({}),y=w.useState(!1),_=(0,T.default)(y,2),b=_[0],x=_[1],E=w.useState(-1),S=(0,T.default)(E,2),A=S[0],C=S[1],O=function(n){C(n),x(!0);};w.useImperativeHandle(r,function(){return{focus:function(n){var r;null===(r=v.current[n])||void 0===r||r.focus();},hideHelp:function(){(0,nG.flushSync)(function(){x(!1);});}};});var M=(0,g.default)({prefixCls:i,onStartMove:o,onOffsetChange:s,render:u,onFocus:function(n,r){O(r),null==p||p(n);},onMouseEnter:function(n,r){O(r);}},m);return w.createElement(w.Fragment,null,l.map(function(n,r){var i=f===r;return w.createElement(n$,(0,D.default)({ref:function(n){n?v.current[r]=n:delete v.current[r];},dragging:i,draggingDelete:i&&h,style:(0,nH.getIndex)(a,r),key:r,value:n,valueIndex:r},M));}),c&&b&&w.createElement(n$,(0,D.default)({key:"a11y"},M,{value:l[A],valueIndex:null,dragging:-1!==f,draggingDelete:h,render:c,style:{pointerEvents:"none"},tabIndex:null,"aria-hidden":!0})));}),nK=function(n){var r=n.prefixCls,i=n.style,a=n.children,o=n.value,s=n.onClick,l=w.useContext(nW),u=l.min,c=l.max,f=l.direction,d=l.includedStart,h=l.includedEnd,p=l.included,m="".concat(r,"-text"),v=(0,nH.getDirectionStyle)(f,o,u,c);return w.createElement("span",{className:(0,L.default)(m,(0,em.default)({},"".concat(m,"-active"),p&&d<=o&&o<=h)),style:(0,g.default)((0,g.default)({},v),i),onMouseDown:function(n){n.stopPropagation();},onClick:function(){s(o);}},a);},nQ=function(n){var r=n.prefixCls,i=n.marks,a=n.onClick,o="".concat(r,"-mark");return i.length?w.createElement("div",{className:o},i.map(function(n){var r=n.value,i=n.style,s=n.label;return w.createElement(nK,{key:r,prefixCls:o,style:i,value:r,onClick:a},s);})):null;},nJ=function(n){var r=n.prefixCls,i=n.value,a=n.style,o=n.activeStyle,s=w.useContext(nW),l=s.min,u=s.max,c=s.direction,f=s.included,d=s.includedStart,h=s.includedEnd,p="".concat(r,"-dot"),m=f&&d<=i&&i<=h,v=(0,g.default)((0,g.default)({},(0,nH.getDirectionStyle)(c,i,l,u)),"function"==typeof a?a(i):a);return m&&(v=(0,g.default)((0,g.default)({},v),"function"==typeof o?o(i):o)),w.createElement("span",{className:(0,L.default)(p,(0,em.default)({},"".concat(p,"-active"),m)),style:v});},n0=function(n){var r=n.prefixCls,i=n.marks,a=n.dots,o=n.style,s=n.activeStyle,l=w.useContext(nW),u=l.min,c=l.max,f=l.step,d=w.useMemo(function(){var n=new Set;if(i.forEach(function(r){n.add(r.value);}),a&&null!==f)for(var r=u;r<=c;)n.add(r),r+=f;return Array.from(n);},[u,c,f,a,i]);return w.createElement("div",{className:"".concat(r,"-step")},d.map(function(n){return w.createElement(nJ,{prefixCls:r,key:n,value:n,style:o,activeStyle:s});}));},n1=function(n){var r=n.prefixCls,i=n.style,a=n.start,o=n.end,s=n.index,l=n.onStartMove,u=n.replaceCls,c=w.useContext(nW),f=c.direction,d=c.min,h=c.max,p=c.disabled,m=c.range,v=c.classNames,y="".concat(r,"-track"),_=(0,nH.getOffset)(a,d,h),b=(0,nH.getOffset)(o,d,h),x=function(n){!p&&l&&l(n,-1);},E={};switch(f){case"rtl":E.right="".concat(100*_,"%"),E.width="".concat(100*b-100*_,"%");break;case"btt":E.bottom="".concat(100*_,"%"),E.height="".concat(100*b-100*_,"%");break;case"ttb":E.top="".concat(100*_,"%"),E.height="".concat(100*b-100*_,"%");break;default:E.left="".concat(100*_,"%"),E.width="".concat(100*b-100*_,"%");}var S=u||(0,L.default)(y,(0,em.default)((0,em.default)({},"".concat(y,"-").concat(s+1),null!==s&&m),"".concat(r,"-track-draggable"),l),v.track);return w.createElement("div",{className:S,style:(0,g.default)((0,g.default)({},E),i),onMouseDown:x,onTouchStart:x});},n2=function(n){var r=n.prefixCls,i=n.style,a=n.values,o=n.startPoint,s=n.onStartMove,l=w.useContext(nW),u=l.included,c=l.range,f=l.min,d=l.styles,h=l.classNames,p=w.useMemo(function(){if(!c){if(0===a.length)return[];var n=null!=o?o:f,r=a[0];return[{start:Math.min(n,r),end:Math.max(n,r)}];}for(var i=[],s=0;s<a.length-1;s+=1)i.push({start:a[s],end:a[s+1]});return i;},[a,c,o,f]);if(!u)return null;var m=null!=p&&p.length&&(h.tracks||d.tracks)?w.createElement(n1,{index:null,prefixCls:r,start:p[0].start,end:p[p.length-1].end,replaceCls:(0,L.default)(h.tracks,"".concat(r,"-tracks")),style:d.tracks}):null;return w.createElement(w.Fragment,null,m,p.map(function(n,a){var o=n.start,l=n.end;return w.createElement(n1,{index:a,prefixCls:r,style:(0,g.default)((0,g.default)({},(0,nH.getIndex)(i,a)),d.track),start:o,end:l,key:a,onStartMove:s});}));};function n3(n){var r="targetTouches"in n?n.targetTouches[0]:n;return{pageX:r.pageX,pageY:r.pageY};}var n4=w.forwardRef(function(n,r){var i,a,o,s,l,u,c,f,d,h,m,v,y,_,b,x,E,S,A,C,O,M,R,P,I,N,D,F,B,j,z,V,H,W,X,q=n.prefixCls,$=void 0===q?"rc-slider":q,Y=n.className,Z=n.style,K=n.classNames,Q=n.styles,J=n.id,ee=n.disabled,et=void 0!==ee&&ee,en=n.keyboard,er=void 0===en||en,ei=n.autoFocus,ea=n.onFocus,eo=n.onBlur,es=n.min,el=void 0===es?0:es,eu=n.max,ef=void 0===eu?100:eu,ed=n.step,eh=void 0===ed?1:ed,ep=n.value,eg=n.defaultValue,ev=n.range,ey=n.count,e_=n.onChange,eb=n.onBeforeChange,ex=n.onAfterChange,eE=n.onChangeComplete,ew=n.allowCross,eS=n.pushable,eT=void 0!==eS&&eS,eA=n.reverse,eC=n.vertical,eO=n.included,eM=void 0===eO||eO,eR=n.startPoint,eP=n.trackStyle,ek=n.handleStyle,eI=n.railStyle,eL=n.dotStyle,eN=n.activeDotStyle,eD=n.marks,eF=n.dots,eB=n.handleRender,ej=n.activeHandleRender,ez=n.track,eU=n.tabIndex,eV=void 0===eU?0:eU,eG=n.ariaLabelForHandle,eH=n.ariaLabelledByForHandle,eW=n.ariaRequired,eX=n.ariaValueTextFormatterForHandle,eq=w.useRef(null),e$=w.useRef(null),eY=w.useMemo(function(){return eC?eA?"ttb":"btt":eA?"rtl":"ltr";},[eA,eC]),eZ=(0,w.useMemo)(function(){if(!0===ev||!ev)return[!!ev,!1,!1,0];var n=ev.editable,r=ev.draggableTrack;return[!0,n,!n&&r,ev.minCount||0,ev.maxCount];},[ev]),eK=(0,T.default)(eZ,5),eQ=eK[0],eJ=eK[1],e0=eK[2],e1=eK[3],e2=eK[4],e3=w.useMemo(function(){return isFinite(el)?el:0;},[el]),e4=w.useMemo(function(){return isFinite(ef)?ef:100;},[ef]),e5=w.useMemo(function(){return null!==eh&&eh<=0?1:eh;},[eh]),e6=w.useMemo(function(){return"boolean"==typeof eT?!!eT&&e5:eT>=0&&eT;},[eT,e5]),e8=w.useMemo(function(){return Object.keys(eD||{}).map(function(n){var r=eD[n],i={value:Number(n)};return r&&"object"===(0,p.default)(r)&&!w.isValidElement(r)&&("label"in r||"style"in r)?(i.style=r.style,i.label=r.label):i.label=r,i;}).filter(function(n){var r=n.label;return r||"number"==typeof r;}).sort(function(n,r){return n.value-r.value;});},[eD]),e7=(i=void 0===ew||ew,a=w.useCallback(function(n){return Math.max(e3,Math.min(e4,n));},[e3,e4]),o=w.useCallback(function(n){if(null!==e5){var r=e3+Math.round((a(n)-e3)/e5)*e5,i=function(n){return(String(n).split(".")[1]||"").length;},o=Math.max(i(e5),i(e4),i(e3)),s=Number(r.toFixed(o));return e3<=s&&s<=e4?s:null;}return null;},[e5,e3,e4,a]),s=w.useCallback(function(n){var r=a(n),i=e8.map(function(n){return n.value;});null!==e5&&i.push(o(n)),i.push(e3,e4);var s=i[0],l=e4-e3;return i.forEach(function(n){var i=Math.abs(r-n);i<=l&&(s=n,l=i);}),s;},[e3,e4,e8,e5,a,o]),l=function n(r,i,a){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit";if("number"==typeof i){var l,u=r[a],c=u+i,f=[];e8.forEach(function(n){f.push(n.value);}),f.push(e3,e4),f.push(o(u));var d=i>0?1:-1;"unit"===s?f.push(o(u+d*e5)):f.push(o(c)),f=f.filter(function(n){return null!==n;}).filter(function(n){return i<0?n<=u:n>=u;}),"unit"===s&&(f=f.filter(function(n){return n!==u;}));var h="unit"===s?u:c,p=Math.abs((l=f[0])-h);if(f.forEach(function(n){var r=Math.abs(n-h);r<p&&(l=n,p=r);}),void 0===l)return i<0?e3:e4;if("dist"===s)return l;if(Math.abs(i)>1){var m=(0,k.default)(r);return m[a]=l,n(m,i-d,a,s);}return l;}return"min"===i?e3:"max"===i?e4:void 0;},u=function(n,r,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit",o=n[i],s=l(n,r,i,a);return{value:s,changed:s!==o};},c=function(n){return null===e6&&0===n||"number"==typeof e6&&n<e6;},[s,function(n,r,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit",f=n.map(s),d=f[a],h=l(f,r,a,o);if(f[a]=h,!1===i){var p=e6||0;a>0&&f[a-1]!==d&&(f[a]=Math.max(f[a],f[a-1]+p)),a<f.length-1&&f[a+1]!==d&&(f[a]=Math.min(f[a],f[a+1]-p));}else if("number"==typeof e6||null===e6){for(var m=a+1;m<f.length;m+=1)for(var g=!0;c(f[m]-f[m-1])&&g;){var v=u(f,1,m);f[m]=v.value,g=v.changed;}for(var y=a;y>0;y-=1)for(var _=!0;c(f[y]-f[y-1])&&_;){var b=u(f,-1,y-1);f[y-1]=b.value,_=b.changed;}for(var x=f.length-1;x>0;x-=1)for(var E=!0;c(f[x]-f[x-1])&&E;){var w=u(f,-1,x-1);f[x-1]=w.value,E=w.changed;}for(var S=0;S<f.length-1;S+=1)for(var T=!0;c(f[S+1]-f[S])&&T;){var A=u(f,1,S+1);f[S+1]=A.value,T=A.changed;}}return{value:f[a],values:f};}]),e9=(0,T.default)(e7,2),te=e9[0],tt=e9[1],tn=(0,G.default)(eg,{value:ep}),tr=(0,T.default)(tn,2),ti=tr[0],ta=tr[1],to=w.useMemo(function(){var n=null==ti?[]:Array.isArray(ti)?ti:[ti],r=(0,T.default)(n,1)[0],i=void 0===r?e3:r,a=null===ti?[]:[i];if(eQ){if(a=(0,k.default)(n),ey||void 0===ti){var o,s=ey>=0?ey+1:2;for(a=a.slice(0,s);a.length<s;)a.push(null!==(o=a[a.length-1])&&void 0!==o?o:e3);}a.sort(function(n,r){return n-r;});}return a.forEach(function(n,r){a[r]=te(n);}),a;},[ti,eQ,e3,ey,te]),ts=function(n){return eQ?n:n[0];},tl=(0,U.default)(function(n){var r=(0,k.default)(n).sort(function(n,r){return n-r;});e_&&!(0,nV.default)(r,to,!0)&&e_(ts(r)),ta(r);}),tu=(0,U.default)(function(n){n&&eq.current.hideHelp();var r=ts(to);null==ex||ex(r),(0,ec.default)(!ex,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),null==eE||eE(r);}),tc=(f=w.useState(null),h=(d=(0,T.default)(f,2))[0],m=d[1],v=w.useState(-1),_=(y=(0,T.default)(v,2))[0],b=y[1],x=w.useState(!1),S=(E=(0,T.default)(x,2))[0],A=E[1],C=w.useState(to),M=(O=(0,T.default)(C,2))[0],R=O[1],P=w.useState(to),N=(I=(0,T.default)(P,2))[0],D=I[1],F=w.useRef(null),B=w.useRef(null),j=w.useRef(null),V=(z=w.useContext(nX)).onDragStart,H=z.onDragChange,(0,tQ.default)(function(){-1===_&&R(to);},[to,_]),w.useEffect(function(){return function(){document.removeEventListener("mousemove",F.current),document.removeEventListener("mouseup",B.current),j.current&&(j.current.removeEventListener("touchmove",F.current),j.current.removeEventListener("touchend",B.current));};},[]),W=function(n,r,i){void 0!==r&&m(r),R(n);var a=n;i&&(a=n.filter(function(n,r){return r!==_;})),tl(a),H&&H({rawValues:n,deleteIndex:i?_:-1,draggingIndex:_,draggingValue:r});},X=(0,U.default)(function(n,r,i){if(-1===n){var a=N[0],o=N[N.length-1],s=r*(e4-e3);s=Math.min(s=Math.max(s,e3-a),e4-o),s=te(a+s)-a,W(N.map(function(n){return n+s;}));}else{var l=(0,k.default)(M);l[n]=N[n];var u=tt(l,(e4-e3)*r,n,"dist");W(u.values,u.value,i);}}),[_,h,S,w.useMemo(function(){var n=(0,k.default)(to).sort(function(n,r){return n-r;}),r=(0,k.default)(M).sort(function(n,r){return n-r;}),i={};r.forEach(function(n){i[n]=(i[n]||0)+1;}),n.forEach(function(n){i[n]=(i[n]||0)-1;});var a=eJ?1:0;return Object.values(i).reduce(function(n,r){return n+Math.abs(r);},0)<=a?M:to;},[to,M,eJ]),function(n,r,i){n.stopPropagation();var a=i||to,o=a[r];b(r),m(o),D(a),R(a),A(!1);var s=n3(n),l=s.pageX,u=s.pageY,c=!1;V&&V({rawValues:a,draggingIndex:r,draggingValue:o});var f=function(n){n.preventDefault();var i,a,o=n3(n),s=o.pageX,f=o.pageY,d=s-l,h=f-u,p=e$.current.getBoundingClientRect(),m=p.width,g=p.height;switch(eY){case"btt":i=-h/g,a=d;break;case"ttb":i=h/g,a=d;break;case"rtl":i=-d/m,a=h;break;default:i=d/m,a=h;}A(c=!!eJ&&Math.abs(a)>130&&e1<M.length),X(r,i,c);},d=function n(r){r.preventDefault(),document.removeEventListener("mouseup",n),document.removeEventListener("mousemove",f),j.current&&(j.current.removeEventListener("touchmove",F.current),j.current.removeEventListener("touchend",B.current)),F.current=null,B.current=null,j.current=null,tu(c),b(-1),A(!1);};document.addEventListener("mouseup",d),document.addEventListener("mousemove",f),n.currentTarget.addEventListener("touchend",d),n.currentTarget.addEventListener("touchmove",f),F.current=f,B.current=d,j.current=n.currentTarget;}]),tf=(0,T.default)(tc,5),td=tf[0],th=tf[1],tp=tf[2],tm=tf[3],tg=tf[4],tv=function(n,r){if(!et){var i,a,o=(0,k.default)(to),s=0,l=0,u=e4-e3;to.forEach(function(r,i){var a=Math.abs(n-r);a<=u&&(u=a,s=i),r<n&&(l=i);});var c=s;eJ&&0!==u&&(!e2||to.length<e2)?(o.splice(l+1,0,n),c=l+1):o[s]=n,eQ&&!to.length&&void 0===ey&&o.push(n);var f=ts(o);null==eb||eb(f),tl(o),r?(null===(i=document.activeElement)||void 0===i||null===(a=i.blur)||void 0===a||a.call(i),eq.current.focus(c),tg(r,c,o)):(null==ex||ex(f),(0,ec.default)(!ex,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),null==eE||eE(f));}},ty=w.useState(null),t_=(0,T.default)(ty,2),tb=t_[0],tx=t_[1];w.useEffect(function(){if(null!==tb){var n=to.indexOf(tb);n>=0&&eq.current.focus(n);}tx(null);},[tb]);var tE=w.useMemo(function(){return(!e0||null!==e5)&&e0;},[e0,e5]),tw=(0,U.default)(function(n,r){tg(n,r),null==eb||eb(ts(to));}),tS=-1!==td;w.useEffect(function(){if(!tS){var n=to.lastIndexOf(th);eq.current.focus(n);}},[tS]);var tT=w.useMemo(function(){return(0,k.default)(tm).sort(function(n,r){return n-r;});},[tm]),tA=w.useMemo(function(){return eQ?[tT[0],tT[tT.length-1]]:[e3,tT[0]];},[tT,eQ,e3]),tC=(0,T.default)(tA,2),tO=tC[0],tM=tC[1];w.useImperativeHandle(r,function(){return{focus:function(){eq.current.focus(0);},blur:function(){var n,r=document.activeElement;null!==(n=e$.current)&&void 0!==n&&n.contains(r)&&(null==r||r.blur());}};}),w.useEffect(function(){ei&&eq.current.focus(0);},[]);var tR=w.useMemo(function(){return{min:e3,max:e4,direction:eY,disabled:et,keyboard:er,step:e5,included:eM,includedStart:tO,includedEnd:tM,range:eQ,tabIndex:eV,ariaLabelForHandle:eG,ariaLabelledByForHandle:eH,ariaRequired:eW,ariaValueTextFormatterForHandle:eX,styles:Q||{},classNames:K||{}};},[e3,e4,eY,et,er,e5,eM,tO,tM,eQ,eV,eG,eH,eW,eX,Q,K]);return w.createElement(nW.Provider,{value:tR},w.createElement("div",{ref:e$,className:(0,L.default)($,Y,(0,em.default)((0,em.default)((0,em.default)((0,em.default)({},"".concat($,"-disabled"),et),"".concat($,"-vertical"),eC),"".concat($,"-horizontal"),!eC),"".concat($,"-with-marks"),e8.length)),style:Z,onMouseDown:function(n){n.preventDefault();var r,i=e$.current.getBoundingClientRect(),a=i.width,o=i.height,s=i.left,l=i.top,u=i.bottom,c=i.right,f=n.clientX,d=n.clientY;switch(eY){case"btt":r=(u-d)/o;break;case"ttb":r=(d-l)/o;break;case"rtl":r=(c-f)/a;break;default:r=(f-s)/a;}tv(te(e3+r*(e4-e3)),n);},id:J},w.createElement("div",{className:(0,L.default)("".concat($,"-rail"),null==K?void 0:K.rail),style:(0,g.default)((0,g.default)({},eI),null==Q?void 0:Q.rail)}),!1!==ez&&w.createElement(n2,{prefixCls:$,style:eP,values:to,startPoint:eR,onStartMove:tE?tw:void 0}),w.createElement(n0,{prefixCls:$,marks:e8,dots:eF,style:eL,activeStyle:eN}),w.createElement(nZ,{ref:eq,prefixCls:$,style:ek,values:tm,draggingIndex:td,draggingDelete:tp,onStartMove:tw,onOffsetChange:function(n,r){if(!et){var i=tt(to,n,r);null==eb||eb(ts(to)),tl(i.values),tx(i.value);}},onFocus:ea,onBlur:eo,handleRender:eB,activeHandleRender:ej,onChangeComplete:tu,onDelete:eJ?function(n){if(!et&&eJ&&!(to.length<=e1)){var r=(0,k.default)(to);r.splice(n,1),null==eb||eb(ts(r)),tl(r);var i=Math.max(0,n-1);eq.current.hideHelp(),eq.current.focus(i);}}:void 0}),w.createElement(nQ,{prefixCls:$,marks:e8,onClick:tv})));});let n5=(0,w.createContext)({});var n6=i("7376d2b3"),n8=u._(n6);let n7=w.forwardRef((n,r)=>{let{open:i,draggingDelete:a,value:o}=n,s=(0,w.useRef)(null),l=i&&!a,u=(0,w.useRef)(null);function c(){nu.default.cancel(u.current),u.current=null;}return w.useEffect(()=>(l?u.current=(0,nu.default)(()=>{var n;null===(n=s.current)||void 0===n||n.forceAlign(),u.current=null;}):c(),c),[l,n.title,o]),w.createElement(n8.default,Object.assign({ref:(0,ni.composeRef)(s,r)},n,{open:l}));}),n9=n=>{let{componentCls:r,antCls:i,controlSize:a,dotSize:o,marginFull:s,marginPart:l,colorFillContentHover:u,handleColorDisabled:c,calc:f,handleSize:d,handleSizeHover:h,handleActiveColor:p,handleActiveOutlineColor:m,handleLineWidth:g,handleLineWidthHover:v,motionDurationMid:y}=n;return{[r]:Object.assign(Object.assign({},(0,to.resetComponent)(n)),{position:"relative",height:a,margin:`${(0,ti.unit)(l)} ${(0,ti.unit)(s)}`,padding:0,cursor:"pointer",touchAction:"none","&-vertical":{margin:`${(0,ti.unit)(s)} ${(0,ti.unit)(l)}`},[`${r}-rail`]:{position:"absolute",backgroundColor:n.railBg,borderRadius:n.borderRadiusXS,transition:`background-color ${y}`},[`${r}-track,${r}-tracks`]:{position:"absolute",transition:`background-color ${y}`},[`${r}-track`]:{backgroundColor:n.trackBg,borderRadius:n.borderRadiusXS},[`${r}-track-draggable`]:{boxSizing:"content-box",backgroundClip:"content-box",border:"solid rgba(0,0,0,0)"},"&:hover":{[`${r}-rail`]:{backgroundColor:n.railHoverBg},[`${r}-track`]:{backgroundColor:n.trackHoverBg},[`${r}-dot`]:{borderColor:u},[`${r}-handle::after`]:{boxShadow:`0 0 0 ${(0,ti.unit)(g)} ${n.colorPrimaryBorderHover}`},[`${r}-dot-active`]:{borderColor:n.dotActiveBorderColor}},[`${r}-handle`]:{position:"absolute",width:d,height:d,outline:"none",userSelect:"none","&-dragging-delete":{opacity:0},"&::before":{content:'""',position:"absolute",insetInlineStart:f(g).mul(-1).equal(),insetBlockStart:f(g).mul(-1).equal(),width:f(d).add(f(g).mul(2)).equal(),height:f(d).add(f(g).mul(2)).equal(),backgroundColor:"transparent"},"&::after":{content:'""',position:"absolute",insetBlockStart:0,insetInlineStart:0,width:d,height:d,backgroundColor:n.colorBgElevated,boxShadow:`0 0 0 ${(0,ti.unit)(g)} ${n.handleColor}`,outline:"0px solid transparent",borderRadius:"50%",cursor:"pointer",transition:`
            inset-inline-start ${y},
            inset-block-start ${y},
            width ${y},
            height ${y},
            box-shadow ${y},
            outline ${y}
          `},"&:hover, &:active, &:focus":{"&::before":{insetInlineStart:f(h).sub(d).div(2).add(v).mul(-1).equal(),insetBlockStart:f(h).sub(d).div(2).add(v).mul(-1).equal(),width:f(h).add(f(v).mul(2)).equal(),height:f(h).add(f(v).mul(2)).equal()},"&::after":{boxShadow:`0 0 0 ${(0,ti.unit)(v)} ${p}`,outline:`6px solid ${m}`,width:h,height:h,insetInlineStart:n.calc(d).sub(h).div(2).equal(),insetBlockStart:n.calc(d).sub(h).div(2).equal()}}},[`&-lock ${r}-handle`]:{"&::before, &::after":{transition:"none"}},[`${r}-mark`]:{position:"absolute",fontSize:n.fontSize},[`${r}-mark-text`]:{position:"absolute",display:"inline-block",color:n.colorTextDescription,textAlign:"center",wordBreak:"keep-all",cursor:"pointer",userSelect:"none","&-active":{color:n.colorText}},[`${r}-step`]:{position:"absolute",background:"transparent",pointerEvents:"none"},[`${r}-dot`]:{position:"absolute",width:o,height:o,backgroundColor:n.colorBgElevated,border:`${(0,ti.unit)(g)} solid ${n.dotBorderColor}`,borderRadius:"50%",cursor:"pointer",transition:`border-color ${n.motionDurationSlow}`,pointerEvents:"auto","&-active":{borderColor:n.dotActiveBorderColor}},[`&${r}-disabled`]:{cursor:"not-allowed",[`${r}-rail`]:{backgroundColor:`${n.railBg} !important`},[`${r}-track`]:{backgroundColor:`${n.trackBgDisabled} !important`},[`
          ${r}-dot
        `]:{backgroundColor:n.colorBgElevated,borderColor:n.trackBgDisabled,boxShadow:"none",cursor:"not-allowed"},[`${r}-handle::after`]:{backgroundColor:n.colorBgElevated,cursor:"not-allowed",width:d,height:d,boxShadow:`0 0 0 ${(0,ti.unit)(g)} ${c}`,insetInlineStart:0,insetBlockStart:0},[`
          ${r}-mark-text,
          ${r}-dot
        `]:{cursor:"not-allowed !important"}},[`&-tooltip ${i}-tooltip-inner`]:{minWidth:"unset"}})};},re=(n,r)=>{let{componentCls:i,railSize:a,handleSize:o,dotSize:s,marginFull:l,calc:u}=n,c=r?"width":"height",f=r?"height":"width",d=r?"insetBlockStart":"insetInlineStart",h=r?"top":"insetInlineStart",p=u(a).mul(3).sub(o).div(2).equal(),m=u(o).sub(a).div(2).equal(),g=r?{borderWidth:`${(0,ti.unit)(m)} 0`,transform:`translateY(${(0,ti.unit)(u(m).mul(-1).equal())})`}:{borderWidth:`0 ${(0,ti.unit)(m)}`,transform:`translateX(${(0,ti.unit)(n.calc(m).mul(-1).equal())})`};return{[r?"paddingBlock":"paddingInline"]:a,[f]:u(a).mul(3).equal(),[`${i}-rail`]:{[c]:"100%",[f]:a},[`${i}-track,${i}-tracks`]:{[f]:a},[`${i}-track-draggable`]:Object.assign({},g),[`${i}-handle`]:{[d]:p},[`${i}-mark`]:{insetInlineStart:0,top:0,[h]:u(a).mul(3).add(r?0:l).equal(),[c]:"100%"},[`${i}-step`]:{insetInlineStart:0,top:0,[h]:a,[c]:"100%",[f]:a},[`${i}-dot`]:{position:"absolute",[d]:u(a).sub(s).div(2).equal()}};},rt=n=>{let{componentCls:r,marginPartWithMark:i}=n;return{[`${r}-horizontal`]:Object.assign(Object.assign({},re(n,!0)),{[`&${r}-with-marks`]:{marginBottom:i}})};},rn=n=>{let{componentCls:r}=n;return{[`${r}-vertical`]:Object.assign(Object.assign({},re(n,!1)),{height:"100%"})};};var rr=(0,tr.genStyleHooks)("Slider",n=>{let r=(0,nE.mergeToken)(n,{marginPart:n.calc(n.controlHeight).sub(n.controlSize).div(2).equal(),marginFull:n.calc(n.controlSize).div(2).equal(),marginPartWithMark:n.calc(n.controlHeightLG).sub(n.controlSize).equal()});return[n9(r),rt(r),rn(r)];},n=>{let r=n.controlHeightLG/4,i=n.controlHeightSM/2,a=n.lineWidth+1,o=n.lineWidth+1.5,s=n.colorPrimary,l=new nw.FastColor(s).setA(.2).toRgbString();return{controlSize:r,railSize:4,handleSize:r,handleSizeHover:i,dotSize:8,handleLineWidth:a,handleLineWidthHover:o,railBg:n.colorFillTertiary,railHoverBg:n.colorFillSecondary,trackBg:n.colorPrimaryBorder,trackHoverBg:n.colorPrimaryBorderHover,handleColor:n.colorPrimaryBorder,handleActiveColor:s,handleActiveOutlineColor:l,handleColorDisabled:new nw.FastColor(n.colorTextDisabled).onBackground(n.colorBgContainer).toHexString(),dotBorderColor:n.colorBorderSecondary,dotActiveBorderColor:n.colorPrimaryBorder,trackBgDisabled:n.colorBgContainerDisabled};});function ri(){let[n,r]=w.useState(!1),i=w.useRef(null),a=()=>{nu.default.cancel(i.current);};return w.useEffect(()=>a,[]),[n,n=>{a(),n?r(n):i.current=(0,nu.default)(()=>{r(n);});}];}var ra=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let ro=w.default.forwardRef((n,r)=>{let{prefixCls:i,range:a,className:o,rootClassName:s,style:l,disabled:u,tooltipPrefixCls:c,tipFormatter:f,tooltipVisible:d,getTooltipPopupContainer:h,tooltipPlacement:p,tooltip:m={},onChangeComplete:g,classNames:v,styles:y}=n,_=ra(n,["prefixCls","range","className","rootClassName","style","disabled","tooltipPrefixCls","tipFormatter","tooltipVisible","getTooltipPopupContainer","tooltipPlacement","tooltip","onChangeComplete","classNames","styles"]),{vertical:b}=n,{getPrefixCls:x,direction:E,className:S,style:T,classNames:A,styles:C,getPopupContainer:O}=(0,eB.useComponentConfig)("slider"),M=w.default.useContext(eV.default),{handleRender:R,direction:P}=w.default.useContext(n5),k="rtl"===(P||E),[I,N]=ri(),[D,F]=ri(),B=Object.assign({},m),{open:j,placement:z,getPopupContainer:U,prefixCls:V,formatter:G}=B,H=null!=j?j:d,W=(I||D)&&!1!==H,X=G||null===G?G:f||null===f?f:n=>"number"==typeof n?n.toString():"",[q,$]=ri(),Y=(n,r)=>n||(r?k?"left":"right":"top"),Z=x("slider",i),[K,Q,J]=rr(Z),ee=(0,L.default)(o,S,A.root,null==v?void 0:v.root,s,{[`${Z}-rtl`]:k,[`${Z}-lock`]:q},Q,J);k&&!_.vertical&&(_.reverse=!_.reverse),w.default.useEffect(()=>{let n=()=>{(0,nu.default)(()=>{F(!1);},1);};return document.addEventListener("mouseup",n),()=>{document.removeEventListener("mouseup",n);};},[]);let et=a&&!H,en=R||((n,r)=>{let{index:i}=r,a=n.props;function o(n,r,i){var o,s;i&&(null===(o=_[n])||void 0===o||o.call(_,r)),null===(s=a[n])||void 0===s||s.call(a,r);}let s=Object.assign(Object.assign({},a),{onMouseEnter:n=>{N(!0),o("onMouseEnter",n);},onMouseLeave:n=>{N(!1),o("onMouseLeave",n);},onMouseDown:n=>{F(!0),$(!0),o("onMouseDown",n);},onFocus:n=>{var r;F(!0),null===(r=_.onFocus)||void 0===r||r.call(_,n),o("onFocus",n,!0);},onBlur:n=>{var r;F(!1),null===(r=_.onBlur)||void 0===r||r.call(_,n),o("onBlur",n,!0);}}),l=w.default.cloneElement(n,s),u=(!!H||W)&&null!==X;return et?l:w.default.createElement(n7,Object.assign({},B,{prefixCls:x("tooltip",null!=V?V:c),title:X?X(r.value):"",value:r.value,open:u,placement:Y(null!=z?z:p,b),key:i,classNames:{root:`${Z}-tooltip`},getPopupContainer:U||h||O}),l);}),er=et?(n,r)=>{let i=w.default.cloneElement(n,{style:Object.assign(Object.assign({},n.props.style),{visibility:"hidden"})});return w.default.createElement(n7,Object.assign({},B,{prefixCls:x("tooltip",null!=V?V:c),title:X?X(r.value):"",open:null!==X&&W,placement:Y(null!=z?z:p,b),key:"tooltip",classNames:{root:`${Z}-tooltip`},getPopupContainer:U||h||O,draggingDelete:r.draggingDelete}),i);}:void 0,ei=Object.assign(Object.assign(Object.assign(Object.assign({},C.root),T),null==y?void 0:y.root),l),ea=Object.assign(Object.assign({},C.tracks),null==y?void 0:y.tracks),eo=(0,L.default)(A.tracks,null==v?void 0:v.tracks);return K(w.default.createElement(n4,Object.assign({},_,{classNames:Object.assign({handle:(0,L.default)(A.handle,null==v?void 0:v.handle),rail:(0,L.default)(A.rail,null==v?void 0:v.rail),track:(0,L.default)(A.track,null==v?void 0:v.track)},eo?{tracks:eo}:{}),styles:Object.assign({handle:Object.assign(Object.assign({},C.handle),null==y?void 0:y.handle),rail:Object.assign(Object.assign({},C.rail),null==y?void 0:y.rail),track:Object.assign(Object.assign({},C.track),null==y?void 0:y.track)},Object.keys(ea).length?{tracks:ea}:{}),step:_.step,range:a,className:ee,style:ei,disabled:null!=u?u:M,ref:r,prefixCls:Z,handleRender:en,activeHandleRender:er,onChangeComplete:n=>{null==g||g(n),$(!1);}})));});var rs=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let rl=n=>{let{prefixCls:r,colors:i,type:a,color:o,range:s=!1,className:l,activeIndex:u,onActive:c,onDragStart:f,onDragChange:d,onKeyDelete:h}=n,p=Object.assign(Object.assign({},rs(n,["prefixCls","colors","type","color","range","className","activeIndex","onActive","onDragStart","onDragChange","onKeyDelete"])),{track:!1}),m=w.useMemo(()=>{let n=i.map(n=>`${n.color} ${n.percent}%`).join(", ");return`linear-gradient(90deg, ${n})`;},[i]),g=w.useMemo(()=>o&&a?"alpha"===a?o.toRgbString():`hsl(${o.toHsb().h}, 100%, 50%)`:null,[o,a]),v=(0,U.default)(f),y=(0,U.default)(d),_=w.useMemo(()=>({onDragStart:v,onDragChange:y}),[]),b=(0,U.default)((n,o)=>{let{onFocus:s,style:l,className:f,onKeyDown:d}=n.props,p=Object.assign({},l);return"gradient"===a&&(p.background=(0,t3.getGradientPercentColor)(i,o.value)),w.cloneElement(n,{onFocus:n=>{null==c||c(o.index),null==s||s(n);},style:p,className:(0,L.default)(f,{[`${r}-slider-handle-active`]:u===o.index}),onKeyDown:n=>{("Delete"===n.key||"Backspace"===n.key)&&h&&h(o.index),null==d||d(n);}});}),x=w.useMemo(()=>({direction:"ltr",handleRender:b}),[]);return w.createElement(n5.Provider,{value:x},w.createElement(nX.Provider,{value:_},w.createElement(ro,Object.assign({},p,{className:(0,L.default)(l,`${r}-slider`),tooltip:{open:!1},range:{editable:s,minCount:2},styles:{rail:{background:m},handle:g?{background:g}:{}},classNames:{rail:`${r}-slider-rail`,handle:`${r}-slider-handle`}}))));};function ru(n){return(0,k.default)(n).sort((n,r)=>n.percent-r.percent);}var rc=w.memo(n=>{let{prefixCls:r,mode:i,onChange:a,onChangeComplete:o,onActive:s,activeIndex:l,onGradientDragging:u,colors:c}=n,f=w.useMemo(()=>c.map(n=>({percent:n.percent,color:n.color.toRgbString()})),[c]),d=w.useMemo(()=>f.map(n=>n.percent),[f]),h=w.useRef(f);return"gradient"!==i?null:w.createElement(rl,{min:0,max:100,prefixCls:r,className:`${r}-gradient-slider`,colors:f,color:null,value:d,range:!0,onChangeComplete:n=>{o(new tX.AggregationColor(f)),l>=n.length&&s(n.length-1),u(!1);},disabled:!1,type:"gradient",activeIndex:l,onActive:s,onDragStart:({rawValues:n,draggingIndex:r,draggingValue:i})=>{if(n.length>f.length){let n=(0,t3.getGradientPercentColor)(f,i),a=(0,k.default)(f);a.splice(r,0,{percent:i,color:n}),h.current=a;}else h.current=f;u(!0),a(new tX.AggregationColor(ru(h.current)),!0);},onDragChange:({deleteIndex:n,draggingIndex:r,draggingValue:i})=>{let o=(0,k.default)(h.current);-1!==n?o.splice(n,1):(o[r]=Object.assign(Object.assign({},o[r]),{percent:i}),o=ru(o)),a(new tX.AggregationColor(o),!0);},onKeyDelete:n=>{let r=(0,k.default)(f);r.splice(n,1);let i=new tX.AggregationColor(r);a(i),o(i);}});}),rf=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let rd={slider:n=>{let{value:r,onChange:i,onChangeComplete:a}=n;return w.createElement(rl,Object.assign({},n,{value:[r],onChange:n=>i(n[0]),onChangeComplete:n=>a(n[0])}));}},rh=()=>{let n=(0,w.useContext)(t1),{mode:r,onModeChange:i,modeOptions:a,prefixCls:o,allowClear:s,value:l,disabledAlpha:u,onChange:c,onClear:f,onChangeComplete:d,activeIndex:h,gradientDragging:p}=n,m=rf(n,["mode","onModeChange","modeOptions","prefixCls","allowClear","value","disabledAlpha","onChange","onClear","onChangeComplete","activeIndex","gradientDragging"]),g=w.default.useMemo(()=>l.cleared?[{percent:0,color:new tX.AggregationColor("")},{percent:100,color:new tX.AggregationColor("")}]:l.getColors(),[l]),v=!l.isGradient(),[y,_]=w.default.useState(l);(0,tQ.default)(()=>{var n;v||_(null===(n=g[h])||void 0===n?void 0:n.color);},[p,h]);let b=w.default.useMemo(()=>{var n;return v?l:p?y:null===(n=g[h])||void 0===n?void 0:n.color;},[l,h,v,y,p]),[x,E]=w.default.useState(b),[S,T]=w.default.useState(0),A=(null==x?void 0:x.equals(b))?b:x;(0,tQ.default)(()=>{E(b);},[S,null==b?void 0:b.toHexString()]);let C=(n,i)=>{let a=(0,t3.generateColor)(n);if(l.cleared){let n=a.toRgb();if(n.r||n.g||n.b||!i)a=(0,t3.genAlphaColor)(a);else{let{type:n,value:r=0}=i;a=new tX.AggregationColor({h:"hue"===n?r:0,s:1,b:1,a:"alpha"===n?r/100:1});}}if("single"===r)return a;let o=(0,k.default)(g);return o[h]=Object.assign(Object.assign({},o[h]),{color:a}),new tX.AggregationColor(o);},O=(n,r,i)=>{let a=C(n,i);E(a.isGradient()?a.getColors()[h].color:a),c(a,r);},M=(n,r)=>{d(C(n,r)),T(n=>n+1);},R=null,P=a.length>1;return(s||P)&&(R=w.default.createElement("div",{className:`${o}-operation`},P&&w.default.createElement(t0.default,{size:"small",options:a,value:r,onChange:i}),w.default.createElement(t4,Object.assign({prefixCls:o,value:l,onChange:n=>{c(n),null==f||f();}},m)))),w.default.createElement(w.default.Fragment,null,R,w.default.createElement(rc,Object.assign({},n,{colors:g})),w.default.createElement(tZ.default,{prefixCls:o,value:null==A?void 0:A.toHsb(),disabledAlpha:u,onChange:(n,r)=>{O(n,!0,r);},onChangeComplete:(n,r)=>{M(n,r);},components:rd}),w.default.createElement(nz,Object.assign({value:b,onChange:n=>{c(C(n));},prefixCls:o,disabledAlpha:u},m)));};var rp=i("45707409"),rm=u._(rp);let rg=()=>{let{prefixCls:n,value:r,presets:i,onChange:a}=(0,w.useContext)(t2);return Array.isArray(i)?w.default.createElement(rm.default,{value:r,presets:i,prefixCls:n,onChange:a}):null;},rv=n=>{let{prefixCls:r,presets:i,panelRender:a,value:o,onChange:s,onClear:l,allowClear:u,disabledAlpha:c,mode:f,onModeChange:d,modeOptions:h,onChangeComplete:p,activeIndex:m,onActive:g,format:v,onFormatChange:y,gradientDragging:_,onGradientDragging:b,disabledFormat:x}=n,E=`${r}-inner`,S=w.default.useMemo(()=>({prefixCls:r,value:o,onChange:s,onClear:l,allowClear:u,disabledAlpha:c,mode:f,onModeChange:d,modeOptions:h,onChangeComplete:p,activeIndex:m,onActive:g,format:v,onFormatChange:y,gradientDragging:_,onGradientDragging:b,disabledFormat:x}),[r,o,s,l,u,c,f,d,h,p,m,g,v,y,_,b,x]),T=w.default.useMemo(()=>({prefixCls:r,value:o,presets:i,onChange:s}),[r,o,i,s]),A=w.default.createElement("div",{className:`${E}-content`},w.default.createElement(rh,null),Array.isArray(i)&&w.default.createElement(t$.default,null),w.default.createElement(rg,null));return w.default.createElement(t1.Provider,{value:S},w.default.createElement(t2.Provider,{value:T},w.default.createElement("div",{className:E},"function"==typeof a?a(A,{components:{Picker:rh,Presets:rg}}):A)));};var ry=i("ae8eb856"),r_=u._(ry),rb=i("91b67617"),rx=u._(rb),rE=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let rw=(0,w.forwardRef)((n,r)=>{let{color:i,prefixCls:a,open:o,disabled:s,format:l,className:u,showText:c,activeIndex:f}=n,d=rE(n,["color","prefixCls","open","disabled","format","className","showText","activeIndex"]),h=`${a}-trigger`,p=`${h}-text`,m=`${p}-cell`,[g]=(0,rx.default)("ColorPicker"),v=w.default.useMemo(()=>{if(!c)return"";if("function"==typeof c)return c(i);if(i.cleared)return g.transparent;if(i.isGradient())return i.getColors().map((n,r)=>{let i=-1!==f&&f!==r;return w.default.createElement("span",{key:r,className:(0,L.default)(m,i&&`${m}-inactive`)},n.color.toRgbString()," ",n.percent,"%");});let n=i.toHexString().toUpperCase(),r=(0,t3.getColorAlpha)(i);switch(l){case"rgb":return i.toRgbString();case"hsb":return i.toHsbString();default:return r<100?`${n.slice(0,7)},${r}%`:n;}},[i,l,c,f]),y=(0,w.useMemo)(()=>i.cleared?w.default.createElement(t4,{prefixCls:a}):w.default.createElement(tZ.ColorBlock,{prefixCls:a,color:i.toCssString()}),[i,a]);return w.default.createElement("div",Object.assign({ref:r,className:(0,L.default)(h,u,{[`${h}-active`]:o,[`${h}-disabled`]:s})},(0,r_.default)(d)),y,c&&w.default.createElement("div",{className:p},v));}),rS=(n,r)=>({backgroundImage:`conic-gradient(${r} 25%, transparent 25% 50%, ${r} 50% 75%, transparent 75% 100%)`,backgroundSize:`${n} ${n}`}),rT=(n,r)=>{let{componentCls:i,borderRadiusSM:a,colorPickerInsetShadow:o,lineWidth:s,colorFillSecondary:l}=n;return{[`${i}-color-block`]:Object.assign(Object.assign({position:"relative",borderRadius:a,width:r,height:r,boxShadow:o,flex:"none"},rS("50%",n.colorFillSecondary)),{[`${i}-color-block-inner`]:{width:"100%",height:"100%",boxShadow:`inset 0 0 0 ${(0,ti.unit)(s)} ${l}`,borderRadius:"inherit"}})};},rA=n=>{let{componentCls:r,antCls:i,fontSizeSM:a,lineHeightSM:o,colorPickerAlphaInputWidth:s,marginXXS:l,paddingXXS:u,controlHeightSM:c,marginXS:f,fontSizeIcon:d,paddingXS:h,colorTextPlaceholder:p,colorPickerInputNumberHandleWidth:m,lineWidth:g}=n;return{[`${r}-input-container`]:{display:"flex",[`${r}-steppers${i}-input-number`]:{fontSize:a,lineHeight:o,[`${i}-input-number-input`]:{paddingInlineStart:u,paddingInlineEnd:0},[`${i}-input-number-handler-wrap`]:{width:m}},[`${r}-steppers${r}-alpha-input`]:{flex:`0 0 ${(0,ti.unit)(s)}`,marginInlineStart:l},[`${r}-format-select${i}-select`]:{marginInlineEnd:f,width:"auto","&-single":{[`${i}-select-selector`]:{padding:0,border:0},[`${i}-select-arrow`]:{insetInlineEnd:0},[`${i}-select-selection-item`]:{paddingInlineEnd:n.calc(d).add(l).equal(),fontSize:a,lineHeight:(0,ti.unit)(c)},[`${i}-select-item-option-content`]:{fontSize:a,lineHeight:o},[`${i}-select-dropdown`]:{[`${i}-select-item`]:{minHeight:"auto"}}}},[`${r}-input`]:{gap:l,alignItems:"center",flex:1,width:0,[`${r}-hsb-input,${r}-rgb-input`]:{display:"flex",gap:l,alignItems:"center"},[`${r}-steppers`]:{flex:1},[`${r}-hex-input${i}-input-affix-wrapper`]:{flex:1,padding:`0 ${(0,ti.unit)(h)}`,[`${i}-input`]:{fontSize:a,textTransform:"uppercase",lineHeight:(0,ti.unit)(n.calc(c).sub(n.calc(g).mul(2)).equal())},[`${i}-input-prefix`]:{color:p}}}}};},rC=n=>{let{componentCls:r,controlHeightLG:i,borderRadiusSM:a,colorPickerInsetShadow:o,marginSM:s,colorBgElevated:l,colorFillSecondary:u,lineWidthBold:c,colorPickerHandlerSize:f}=n;return{userSelect:"none",[`${r}-select`]:{[`${r}-palette`]:{minHeight:n.calc(i).mul(4).equal(),overflow:"hidden",borderRadius:a},[`${r}-saturation`]:{position:"absolute",borderRadius:"inherit",boxShadow:o,inset:0},marginBottom:s},[`${r}-handler`]:{width:f,height:f,border:`${(0,ti.unit)(c)} solid ${l}`,position:"relative",borderRadius:"50%",cursor:"pointer",boxShadow:`${o}, 0 0 0 1px ${u}`}};},rO=n=>{let{componentCls:r,antCls:i,colorTextQuaternary:a,paddingXXS:o,colorPickerPresetColorSize:s,fontSizeSM:l,colorText:u,lineHeightSM:c,lineWidth:f,borderRadius:d,colorFill:h,colorWhite:p,marginXXS:m,paddingXS:g,fontHeightSM:v}=n;return{[`${r}-presets`]:{[`${i}-collapse-item > ${i}-collapse-header`]:{padding:0,[`${i}-collapse-expand-icon`]:{height:v,color:a,paddingInlineEnd:o}},[`${i}-collapse`]:{display:"flex",flexDirection:"column",gap:m},[`${i}-collapse-item > ${i}-collapse-content > ${i}-collapse-content-box`]:{padding:`${(0,ti.unit)(g)} 0`},"&-label":{fontSize:l,color:u,lineHeight:c},"&-items":{display:"flex",flexWrap:"wrap",gap:n.calc(m).mul(1.5).equal(),[`${r}-presets-color`]:{position:"relative",cursor:"pointer",width:s,height:s,"&::before":{content:'""',pointerEvents:"none",width:n.calc(s).add(n.calc(f).mul(4)).equal(),height:n.calc(s).add(n.calc(f).mul(4)).equal(),position:"absolute",top:n.calc(f).mul(-2).equal(),insetInlineStart:n.calc(f).mul(-2).equal(),borderRadius:d,border:`${(0,ti.unit)(f)} solid transparent`,transition:`border-color ${n.motionDurationMid} ${n.motionEaseInBack}`},"&:hover::before":{borderColor:h},"&::after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"21.5%",display:"table",width:n.calc(s).div(13).mul(5).equal(),height:n.calc(s).div(13).mul(8).equal(),border:`${(0,ti.unit)(n.lineWidthBold)} solid ${n.colorWhite}`,borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:`all ${n.motionDurationFast} ${n.motionEaseInBack}, opacity ${n.motionDurationFast}`},[`&${r}-presets-color-checked`]:{"&::after":{opacity:1,borderColor:p,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:`transform ${n.motionDurationMid} ${n.motionEaseOutBack} ${n.motionDurationFast}`},[`&${r}-presets-color-bright`]:{"&::after":{borderColor:"rgba(0, 0, 0, 0.45)"}}}}},"&-empty":{fontSize:l,color:a}}};},rM=n=>{let{componentCls:r,colorPickerInsetShadow:i,colorBgElevated:a,colorFillSecondary:o,lineWidthBold:s,colorPickerHandlerSizeSM:l,colorPickerSliderHeight:u,marginSM:c,marginXS:f}=n,d=n.calc(l).sub(n.calc(s).mul(2).equal()).equal(),h=n.calc(l).add(n.calc(s).mul(2).equal()).equal(),p={"&:after":{transform:"scale(1)",boxShadow:`${i}, 0 0 0 1px ${n.colorPrimaryActive}`}};return{[`${r}-slider`]:[rS((0,ti.unit)(u),n.colorFillSecondary),{margin:0,padding:0,height:u,borderRadius:n.calc(u).div(2).equal(),"&-rail":{height:u,borderRadius:n.calc(u).div(2).equal(),boxShadow:i},[`& ${r}-slider-handle`]:{width:d,height:d,top:0,borderRadius:"100%","&:before":{display:"block",position:"absolute",background:"transparent",left:{_skip_check_:!0,value:"50%"},top:"50%",transform:"translate(-50%, -50%)",width:h,height:h,borderRadius:"100%"},"&:after":{width:l,height:l,border:`${(0,ti.unit)(s)} solid ${a}`,boxShadow:`${i}, 0 0 0 1px ${o}`,outline:"none",insetInlineStart:n.calc(s).mul(-1).equal(),top:n.calc(s).mul(-1).equal(),background:"transparent",transition:"none"},"&:focus":p}}],[`${r}-slider-container`]:{display:"flex",gap:c,marginBottom:c,[`${r}-slider-group`]:{flex:1,flexDirection:"column",justifyContent:"space-between",display:"flex","&-disabled-alpha":{justifyContent:"center"}}},[`${r}-gradient-slider`]:{marginBottom:f,[`& ${r}-slider-handle`]:{"&:after":{transform:"scale(0.8)"},"&-active, &:focus":p}}};},rR=(n,r,i)=>({borderInlineEndWidth:n.lineWidth,borderColor:r,boxShadow:`0 0 0 ${(0,ti.unit)(n.controlOutlineWidth)} ${i}`,outline:0}),rP=n=>{let{componentCls:r}=n;return{"&-rtl":{[`${r}-presets-color`]:{"&::after":{direction:"ltr"}},[`${r}-clear`]:{"&::after":{direction:"ltr"}}}};},rk=(n,r,i)=>{let{componentCls:a,borderRadiusSM:o,lineWidth:s,colorSplit:l,colorBorder:u,red6:c}=n;return{[`${a}-clear`]:Object.assign(Object.assign({width:r,height:r,borderRadius:o,border:`${(0,ti.unit)(s)} solid ${l}`,position:"relative",overflow:"hidden",cursor:"inherit",transition:`all ${n.motionDurationFast}`},i),{"&::after":{content:'""',position:"absolute",insetInlineEnd:n.calc(s).mul(-1).equal(),top:n.calc(s).mul(-1).equal(),display:"block",width:40,height:2,transformOrigin:"calc(100% - 1px) 1px",transform:"rotate(-45deg)",backgroundColor:c},"&:hover":{borderColor:u}})};},rI=n=>{let{componentCls:r,colorError:i,colorWarning:a,colorErrorHover:o,colorWarningHover:s,colorErrorOutline:l,colorWarningOutline:u}=n;return{[`&${r}-status-error`]:{borderColor:i,"&:hover":{borderColor:o},[`&${r}-trigger-active`]:Object.assign({},rR(n,i,l))},[`&${r}-status-warning`]:{borderColor:a,"&:hover":{borderColor:s},[`&${r}-trigger-active`]:Object.assign({},rR(n,a,u))}};},rL=n=>{let{componentCls:r,controlHeightLG:i,controlHeightSM:a,controlHeight:o,controlHeightXS:s,borderRadius:l,borderRadiusSM:u,borderRadiusXS:c,borderRadiusLG:f,fontSizeLG:d}=n;return{[`&${r}-lg`]:{minWidth:i,minHeight:i,borderRadius:f,[`${r}-color-block, ${r}-clear`]:{width:o,height:o,borderRadius:l},[`${r}-trigger-text`]:{fontSize:d}},[`&${r}-sm`]:{minWidth:a,minHeight:a,borderRadius:u,[`${r}-color-block, ${r}-clear`]:{width:s,height:s,borderRadius:c},[`${r}-trigger-text`]:{lineHeight:(0,ti.unit)(s)}}};},rN=n=>{let{antCls:r,componentCls:i,colorPickerWidth:a,colorPrimary:o,motionDurationMid:s,colorBgElevated:l,colorTextDisabled:u,colorText:c,colorBgContainerDisabled:f,borderRadius:d,marginXS:h,marginSM:p,controlHeight:m,controlHeightSM:g,colorBgTextActive:v,colorPickerPresetColorSize:y,colorPickerPreviewSize:_,lineWidth:b,colorBorder:x,paddingXXS:E,fontSize:w,colorPrimaryHover:S,controlOutline:T}=n;return[{[i]:Object.assign({[`${i}-inner`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({"&-content":{display:"flex",flexDirection:"column",width:a,[`& > ${r}-divider`]:{margin:`${(0,ti.unit)(p)} 0 ${(0,ti.unit)(h)}`}},[`${i}-panel`]:Object.assign({},rC(n))},rM(n)),rT(n,_)),rA(n)),rO(n)),rk(n,y,{marginInlineStart:"auto"})),{[`${i}-operation`]:{display:"flex",justifyContent:"space-between",marginBottom:h}}),"&-trigger":Object.assign(Object.assign(Object.assign(Object.assign({minWidth:m,minHeight:m,borderRadius:d,border:`${(0,ti.unit)(b)} solid ${x}`,cursor:"pointer",display:"inline-flex",alignItems:"flex-start",justifyContent:"center",transition:`all ${s}`,background:l,padding:n.calc(E).sub(b).equal(),[`${i}-trigger-text`]:{marginInlineStart:h,marginInlineEnd:n.calc(h).sub(n.calc(E).sub(b)).equal(),fontSize:w,color:c,alignSelf:"center","&-cell":{"&:not(:last-child):after":{content:'", "'},"&-inactive":{color:u}}},"&:hover":{borderColor:S},[`&${i}-trigger-active`]:Object.assign({},rR(n,o,T)),"&-disabled":{color:u,background:f,cursor:"not-allowed","&:hover":{borderColor:v},[`${i}-trigger-text`]:{color:u}}},rk(n,g)),rT(n,g)),rI(n)),rL(n))},rP(n))},(0,tn.genCompactItemStyle)(n,{focusElCls:`${i}-trigger-active`})];};var rD=(0,tr.genStyleHooks)("ColorPicker",n=>{let{colorTextQuaternary:r,marginSM:i}=n;return[rN((0,nE.mergeToken)(n,{colorPickerWidth:234,colorPickerHandlerSize:16,colorPickerHandlerSizeSM:12,colorPickerAlphaInputWidth:44,colorPickerInputNumberHandleWidth:16,colorPickerPresetColorSize:24,colorPickerInsetShadow:`inset 0 0 1px 0 ${r}`,colorPickerSliderHeight:8,colorPickerPreviewSize:n.calc(8).mul(2).add(i).equal()}))];}),rF=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let rB=n=>{let{mode:r,value:i,defaultValue:a,format:o,defaultFormat:s,allowClear:l=!1,presets:u,children:c,trigger:f="click",open:d,disabled:h,placement:p="bottomLeft",arrow:m=!0,panelRender:g,showText:v,style:y,className:_,size:b,rootClassName:x,prefixCls:E,styles:S,disabledAlpha:T=!1,onFormatChange:A,onChange:C,onClear:O,onOpenChange:M,onChangeComplete:R,getPopupContainer:P,autoAdjustOverflow:k=!0,destroyTooltipOnHide:I,destroyOnHidden:N,disabledFormat:D}=n,F=rF(n,["mode","value","defaultValue","format","defaultFormat","allowClear","presets","children","trigger","open","disabled","placement","arrow","panelRender","showText","style","className","size","rootClassName","prefixCls","styles","disabledAlpha","onFormatChange","onChange","onClear","onOpenChange","onChangeComplete","getPopupContainer","autoAdjustOverflow","destroyTooltipOnHide","destroyOnHidden","disabledFormat"]),{getPrefixCls:B,direction:j,colorPicker:z}=(0,w.useContext)(eB.ConfigContext),V=(0,w.useContext)(eV.default),H=null!=h?h:V,[W,X]=(0,G.default)(!1,{value:d,postState:n=>!H&&n,onChange:M}),[q,$]=(0,G.default)(o,{value:o,defaultValue:s,onChange:A}),Y=B("color-picker",E),[Z,K,Q,J,ee]=function(n,r,i){let[a]=(0,rx.default)("ColorPicker"),[o,s]=(0,G.default)(n,{value:r}),[l,u]=w.useState("single"),[c,f]=w.useMemo(()=>{let n=(Array.isArray(i)?i:[i]).filter(n=>n);n.length||n.push("single");let r=new Set(n),o=[],s=(n,i)=>{r.has(n)&&o.push({label:i,value:n});};return s("single",a.singleColor),s("gradient",a.gradientColor),[o,r];},[i]),[d,h]=w.useState(null),p=(0,U.default)(n=>{h(n),s(n);}),m=w.useMemo(()=>{let n=(0,t3.generateColor)(o||"");return n.equals(d)?d:n;},[o,d]),g=w.useMemo(()=>{var n;return f.has(l)?l:null===(n=c[0])||void 0===n?void 0:n.value;},[f,l,c]);return w.useEffect(()=>{u(m.isGradient()?"gradient":"single");},[m]),[m,p,g,u,c];}(a,i,r),et=(0,w.useMemo)(()=>100>(0,t3.getColorAlpha)(Z),[Z]),[en,er]=w.default.useState(null),ei=n=>{if(R){let r=(0,t3.generateColor)(n);T&&et&&(r=(0,t3.genAlphaColor)(n)),R(r);}},ea=(n,r)=>{let i=(0,t3.generateColor)(n);T&&et&&(i=(0,t3.genAlphaColor)(i)),K(i),er(null),C&&C(i,i.toCssString()),r||ei(i);},[eo,es]=w.default.useState(0),[el,eu]=w.default.useState(!1),{status:ec}=w.default.useContext(eq.FormItemInputContext),{compactSize:ef,compactItemClassnames:ed}=(0,e4.useCompactItemContext)(Y,j),eh=(0,eX.default)(n=>{var r;return null!==(r=null!=b?b:ef)&&void 0!==r?r:n;}),ep=(0,eH.default)(Y),[em,eg,ev]=rD(Y,ep),ey={[`${Y}-rtl`]:j},e_=(0,L.default)(x,ev,ep,ey),eb=(0,L.default)((0,eF.getStatusClassNames)(Y,ec),{[`${Y}-sm`]:"small"===eh,[`${Y}-lg`]:"large"===eh},ed,null==z?void 0:z.className,e_,_,eg),ex=(0,L.default)(Y,e_),eE=Object.assign(Object.assign({},null==z?void 0:z.style),y);return em(w.default.createElement(tW.default,Object.assign({style:null==S?void 0:S.popup,styles:{body:null==S?void 0:S.popupOverlayInner},onOpenChange:n=>{n&&H||X(n);},content:w.default.createElement(tG.default,{form:!0},w.default.createElement(rv,{mode:Q,onModeChange:n=>{if(J(n),"single"===n&&Z.isGradient())es(0),ea(new tX.AggregationColor(Z.getColors()[0].color)),er(Z);else if("gradient"===n&&!Z.isGradient()){let n=et?(0,t3.genAlphaColor)(Z):Z;ea(new tX.AggregationColor(en||[{percent:0,color:n},{percent:100,color:n}]));}},modeOptions:ee,prefixCls:Y,value:Z,allowClear:l,disabled:H,disabledAlpha:T,presets:u,panelRender:g,format:q,onFormatChange:$,onChange:ea,onChangeComplete:ei,onClear:O,activeIndex:eo,onActive:es,gradientDragging:el,onGradientDragging:eu,disabledFormat:D})),classNames:{root:ex}},{open:W,trigger:f,placement:p,arrow:m,rootClassName:x,getPopupContainer:P,autoAdjustOverflow:k,destroyOnHidden:null!=N?N:!!I}),c||w.default.createElement(rw,Object.assign({activeIndex:W?eo:-1,open:W,className:eb,style:eE,prefixCls:Y,disabled:H,showText:v,format:q},F,{color:Z}))));},rj=(0,eD.default)(rB,void 0,n=>Object.assign(Object.assign({},n),{placement:"bottom",autoAdjustOverflow:!1}),"color-picker",n=>n);rB._InternalPanelDoNotUseOrYouWillBeFired=rj;var rz=i("384da8f0"),rU=u._(rz),rV=i("93e3aa3a"),rG=u._(rV),rH=i("0cde993c"),rW=u._(rH),rX=function(n,r,i,a,o){var s,l,u=o.clientWidth,c=o.clientHeight,f="number"==typeof n.pageX?n.pageX:n.touches[0].pageX,d="number"==typeof n.pageY?n.pageY:n.touches[0].pageY,h=f-(o.getBoundingClientRect().left+window.pageXOffset),p=d-(o.getBoundingClientRect().top+window.pageYOffset);if("vertical"===i){if(s=p<0?0:p>c?1:Math.round(100*p/c)/100,r.a!==s)return{h:r.h,s:r.s,l:r.l,a:s,source:"rgb"};}else if(a!==(l=h<0?0:h>u?1:Math.round(100*h/u)/100))return{h:r.h,s:r.s,l:r.l,a:l,source:"rgb"};return null;},rq={};i.e(rq,{calculateChange:function(){return rX;}});var r$={},rY=function(n,r,i,a){if("undefined"==typeof document&&!a)return null;var o=a?new a:document.createElement("canvas");o.width=2*i,o.height=2*i;var s=o.getContext("2d");return s?(s.fillStyle=n,s.fillRect(0,0,o.width,o.height),s.fillStyle=r,s.fillRect(0,0,i,i),s.translate(i,i),s.fillRect(0,0,i,i),o.toDataURL()):null;},rZ=function(n,r,i,a){var o="".concat(n,"-").concat(r,"-").concat(i).concat(a?"-server":"");if(r$[o])return r$[o];var s=rY(n,r,i,a);return r$[o]=s,s;},rK={};function rQ(n){return(rQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n;}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n;})(n);}function rJ(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable;})),i.push.apply(i,a);}return i;}function r0(n){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?rJ(Object(i),!0).forEach(function(r){var a,o;a=r,o=i[r],(a=function(n){var r=function(n,r){if("object"!==rQ(n)||null===n)return n;var i=n[Symbol.toPrimitive];if(void 0!==i){var a=i.call(n,r||"default");if("object"!==rQ(a))return a;throw TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(n);}(n,"string");return"symbol"===rQ(r)?r:String(r);}(a))in n?Object.defineProperty(n,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[a]=o;}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):rJ(Object(i)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(i,r));});}return n;}i.e(rK,{get:function(){return rZ;},render:function(){return rY;}});var r1=function(n){var r=n.white,i=n.grey,a=n.size,o=n.renderers,s=n.borderRadius,l=n.boxShadow,u=n.children,c=(0,rG.default)({default:{grid:{borderRadius:s,boxShadow:l,absolute:"0px 0px 0px 0px",background:"url(".concat(rK.get(r,i,a,o.canvas),") center left")}}});return(0,w.isValidElement)(u)?w.default.cloneElement(u,r0(r0({},u.props),{},{style:r0(r0({},u.props.style),c.grid)})):w.default.createElement("div",{style:c.grid});};function r2(n){return(r2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n;}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n;})(n);}function r3(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable;})),i.push.apply(i,a);}return i;}function r4(n){var r=function(n,r){if("object"!==r2(n)||null===n)return n;var i=n[Symbol.toPrimitive];if(void 0!==i){var a=i.call(n,r||"default");if("object"!==r2(a))return a;throw TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(n);}(n,"string");return"symbol"===r2(r)?r:String(r);}function r5(n,r){return(r5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n;})(n,r);}function r6(n){return(r6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n);})(n);}r1.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var r8=function(n){!function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&r5(n,r);}(o,n);var r,i,a=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0;}catch(n){return!1;}}(),function(){var n,i=r6(o);return n=r?Reflect.construct(i,arguments,r6(this).constructor):i.apply(this,arguments),function(n,r){if(r&&("object"===r2(r)||"function"==typeof r))return r;if(void 0!==r)throw TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n;}(n);}(this,n);});function o(){var n;!function(n,r){if(!(n instanceof r))throw TypeError("Cannot call a class as a function");}(this,o);for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];return(n=a.call.apply(a,[this].concat(i))).handleChange=function(r){var i=rq.calculateChange(r,n.props.hsl,n.props.direction,n.props.a,n.container);i&&"function"==typeof n.props.onChange&&n.props.onChange(i,r);},n.handleMouseDown=function(r){n.handleChange(r),window.addEventListener("mousemove",n.handleChange),window.addEventListener("mouseup",n.handleMouseUp);},n.handleMouseUp=function(){n.unbindEventListeners();},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleChange),window.removeEventListener("mouseup",n.handleMouseUp);},n;}return i=[{key:"componentWillUnmount",value:function(){this.unbindEventListeners();}},{key:"render",value:function(){var n=this,r=this.props.rgb,i=(0,rG.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba(".concat(r.r,",").concat(r.g,",").concat(r.b,", 0) 0%,\n           rgba(").concat(r.r,",").concat(r.g,",").concat(r.b,", 1) 100%)"),boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:"".concat(100*r.a,"%")},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba(".concat(r.r,",").concat(r.g,",").concat(r.b,", 0) 0%,\n           rgba(").concat(r.r,",").concat(r.g,",").concat(r.b,", 1) 100%)")},pointer:{left:0,top:"".concat(100*r.a,"%")}},overwrite:function(n){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?r3(Object(i),!0).forEach(function(r){var a,o;a=r,o=i[r],(a=r4(a))in n?Object.defineProperty(n,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[a]=o;}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):r3(Object(i)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(i,r));});}return n;}({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return w.default.createElement("div",{style:i.alpha},w.default.createElement("div",{style:i.checkboard},w.default.createElement(r1,{renderers:this.props.renderers})),w.default.createElement("div",{style:i.gradient}),w.default.createElement("div",{style:i.container,ref:function(r){return n.container=r;},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},w.default.createElement("div",{style:i.pointer},this.props.pointer?w.default.createElement(this.props.pointer,this.props):w.default.createElement("div",{style:i.slider}))));}}],function(n,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,r4(a.key),a);}}(o.prototype,i),Object.defineProperty(o,"prototype",{writable:!1}),o;}(w.PureComponent||w.Component),r7=function(n,r,i,a){var o,s,l=a.clientWidth,u=a.clientHeight,c="number"==typeof n.pageX?n.pageX:n.touches[0].pageX,f="number"==typeof n.pageY?n.pageY:n.touches[0].pageY,d=c-(a.getBoundingClientRect().left+window.pageXOffset),h=f-(a.getBoundingClientRect().top+window.pageYOffset);if("vertical"===r){if(o=h<0?359:h>u?0:360*(-(100*h/u)+100)/100,i.h!==o)return{h:o,s:i.s,l:i.l,a:i.a,source:"hsl"};}else if(s=d<0?0:d>l?359:100*d/l*360/100,i.h!==s)return{h:s,s:i.s,l:i.l,a:i.a,source:"hsl"};return null;},r9={};function ie(n){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n;}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n;})(n);}function it(n,r){return(it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n;})(n,r);}function ir(n){return(ir=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n);})(n);}i.e(r9,{calculateChange:function(){return r7;}});var ii=function(n){!function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&it(n,r);}(o,n);var r,i,a=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0;}catch(n){return!1;}}(),function(){var n,i=ir(o);return n=r?Reflect.construct(i,arguments,ir(this).constructor):i.apply(this,arguments),function(n,r){if(r&&("object"===ie(r)||"function"==typeof r))return r;if(void 0!==r)throw TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n;}(n);}(this,n);});function o(){var n;!function(n,r){if(!(n instanceof r))throw TypeError("Cannot call a class as a function");}(this,o);for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];return(n=a.call.apply(a,[this].concat(i))).handleChange=function(r){var i=r9.calculateChange(r,n.props.direction,n.props.hsl,n.container);i&&"function"==typeof n.props.onChange&&n.props.onChange(i,r);},n.handleMouseDown=function(r){n.handleChange(r),window.addEventListener("mousemove",n.handleChange),window.addEventListener("mouseup",n.handleMouseUp);},n.handleMouseUp=function(){n.unbindEventListeners();},n;}return i=[{key:"componentWillUnmount",value:function(){this.unbindEventListeners();}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp);}},{key:"render",value:function(){var n=this,r=this.props.direction,i=void 0===r?"horizontal":r,a=(0,rG.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:"".concat(100*this.props.hsl.h/360,"%")},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:"".concat(-(100*this.props.hsl.h/360)+100,"%")}}},{vertical:"vertical"===i});return w.default.createElement("div",{style:a.hue},w.default.createElement("div",{className:"hue-".concat(i),style:a.container,ref:function(r){return n.container=r;},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},w.default.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),w.default.createElement("div",{style:a.pointer},this.props.pointer?w.default.createElement(this.props.pointer,this.props):w.default.createElement("div",{style:a.slider}))));}}],function(n,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,function(n){var r=function(n,r){if("object"!==ie(n)||null===n)return n;var i=n[Symbol.toPrimitive];if(void 0!==i){var a=i.call(n,r||"default");if("object"!==ie(a))return a;throw TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(n);}(n,"string");return"symbol"===ie(r)?r:String(r);}(a.key),a);}}(o.prototype,i),Object.defineProperty(o,"prototype",{writable:!1}),o;}(w.PureComponent||w.Component),ia=i("83d97c4d"),io=u._(ia),is=function(n,r,i){var a=i.getBoundingClientRect(),o=a.width,s=a.height,l="number"==typeof n.pageX?n.pageX:n.touches[0].pageX,u="number"==typeof n.pageY?n.pageY:n.touches[0].pageY,c=l-(i.getBoundingClientRect().left+window.pageXOffset),f=u-(i.getBoundingClientRect().top+window.pageYOffset);c<0?c=0:c>o&&(c=o),f<0?f=0:f>s&&(f=s);var d=c/o,h=1-f/s;return{h:r.h,s:d,v:h,a:r.a,source:"hsv"};},il={};function iu(n){return(iu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n;}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n;})(n);}function ic(n,r){return(ic=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n;})(n,r);}function id(n){return(id=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n);})(n);}i.e(il,{calculateChange:function(){return is;}});var ih=function(n){!function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&ic(n,r);}(o,n);var r,i,a=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0;}catch(n){return!1;}}(),function(){var n,i=id(o);return n=r?Reflect.construct(i,arguments,id(this).constructor):i.apply(this,arguments),function(n,r){if(r&&("object"===iu(r)||"function"==typeof r))return r;if(void 0!==r)throw TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n;}(n);}(this,n);});function o(n){var r;return!function(n,r){if(!(n instanceof r))throw TypeError("Cannot call a class as a function");}(this,o),(r=a.call(this,n)).handleChange=function(n){"function"==typeof r.props.onChange&&r.throttle(r.props.onChange,il.calculateChange(n,r.props.hsl,r.container),n);},r.handleMouseDown=function(n){r.handleChange(n);var i=r.getContainerRenderWindow();i.addEventListener("mousemove",r.handleChange),i.addEventListener("mouseup",r.handleMouseUp);},r.handleMouseUp=function(){r.unbindEventListeners();},r.throttle=(0,io.default)(function(n,r,i){n(r,i);},50),r;}return i=[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners();}},{key:"getContainerRenderWindow",value:function(){for(var n=this.container,r=window;!r.document.contains(n)&&r.parent!==r;)r=r.parent;return r;}},{key:"unbindEventListeners",value:function(){var n=this.getContainerRenderWindow();n.removeEventListener("mousemove",this.handleChange),n.removeEventListener("mouseup",this.handleMouseUp);}},{key:"render",value:function(){var n=this,r=this.props.style||{},i=r.color,a=r.white,o=r.black,s=r.pointer,l=r.circle,u=(0,rG.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl(".concat(this.props.hsl.h,",100%, 50%)"),borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:"".concat(-(100*this.props.hsv.v)+100,"%"),left:"".concat(100*this.props.hsv.s,"%"),cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:i,white:a,black:o,pointer:s,circle:l}},{custom:!!this.props.style});return w.default.createElement("div",{style:u.color,ref:function(r){return n.container=r;},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},w.default.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),w.default.createElement("div",{style:u.white,className:"saturation-white"},w.default.createElement("div",{style:u.black,className:"saturation-black"}),w.default.createElement("div",{style:u.pointer},this.props.pointer?w.default.createElement(this.props.pointer,this.props):w.default.createElement("div",{style:u.circle}))));}}],function(n,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,function(n){var r=function(n,r){if("object"!==iu(n)||null===n)return n;var i=n[Symbol.toPrimitive];if(void 0!==i){var a=i.call(n,r||"default");if("object"!==iu(a))return a;throw TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(n);}(n,"string");return"symbol"===iu(r)?r:String(r);}(a.key),a);}}(o.prototype,i),Object.defineProperty(o,"prototype",{writable:!1}),o;}(w.PureComponent||w.Component),ip=i("b60abbbd"),im=u._(ip),ig=i("9a314689"),iv=u._(ig);function iy(n){return(iy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n;}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n;})(n);}var i_=/^\s+/,ib=/\s+$/;function ix(n,r){if(r=r||{},(n=n||"")instanceof ix)return n;if(!(this instanceof ix))return new ix(n,r);var i,a,o,s,l,u,c,f,d,h,p,m,g,v,y,_,b,x,E,w,S=(a={r:0,g:0,b:0},o=1,s=null,l=null,u=null,c=!1,f=!1,"string"==typeof(i=n)&&(i=function(n){n=n.replace(i_,"").replace(ib,"").toLowerCase();var r,i=!1;if(iB[n])n=iB[n],i=!0;else if("transparent"==n)return{r:0,g:0,b:0,a:0,format:"name"};return(r=iq.rgb.exec(n))?{r:r[1],g:r[2],b:r[3]}:(r=iq.rgba.exec(n))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=iq.hsl.exec(n))?{h:r[1],s:r[2],l:r[3]}:(r=iq.hsla.exec(n))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=iq.hsv.exec(n))?{h:r[1],s:r[2],v:r[3]}:(r=iq.hsva.exec(n))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=iq.hex8.exec(n))?{r:iG(r[1]),g:iG(r[2]),b:iG(r[3]),a:iG(r[4])/255,format:i?"name":"hex8"}:(r=iq.hex6.exec(n))?{r:iG(r[1]),g:iG(r[2]),b:iG(r[3]),format:i?"name":"hex"}:(r=iq.hex4.exec(n))?{r:iG(r[1]+""+r[1]),g:iG(r[2]+""+r[2]),b:iG(r[3]+""+r[3]),a:iG(r[4]+""+r[4])/255,format:i?"name":"hex8"}:!!(r=iq.hex3.exec(n))&&{r:iG(r[1]+""+r[1]),g:iG(r[2]+""+r[2]),b:iG(r[3]+""+r[3]),format:i?"name":"hex"};}(i)),"object"==iy(i)&&(i$(i.r)&&i$(i.g)&&i$(i.b)?(d=i.r,h=i.g,p=i.b,a={r:255*iU(d,255),g:255*iU(h,255),b:255*iU(p,255)},c=!0,f="%"===String(i.r).substr(-1)?"prgb":"rgb"):i$(i.h)&&i$(i.s)&&i$(i.v)?(s=iW(i.s),l=iW(i.v),m=i.h,g=s,v=l,m=6*iU(m,360),g=iU(g,100),v=iU(v,100),y=Math.floor(m),_=m-y,b=v*(1-g),x=v*(1-_*g),E=v*(1-(1-_)*g),a={r:255*[v,x,b,b,E,v][w=y%6],g:255*[E,v,v,x,b,b][w],b:255*[b,b,E,v,v,x][w]},c=!0,f="hsv"):i$(i.h)&&i$(i.s)&&i$(i.l)&&(s=iW(i.s),u=iW(i.l),a=function(n,r,i){var a,o,s;function l(n,r,i){return(i<0&&(i+=1),i>1&&(i-=1),i<1/6)?n+(r-n)*6*i:i<.5?r:i<2/3?n+(r-n)*(2/3-i)*6:n;}if(n=iU(n,360),r=iU(r,100),i=iU(i,100),0===r)a=o=s=i;else{var u=i<.5?i*(1+r):i+r-i*r,c=2*i-u;a=l(c,u,n+1/3),o=l(c,u,n),s=l(c,u,n-1/3);}return{r:255*a,g:255*o,b:255*s};}(i.h,s,u),c=!0,f="hsl"),i.hasOwnProperty("a")&&(o=i.a)),o=iz(o),{ok:c,format:i.format||f,r:Math.min(255,Math.max(a.r,0)),g:Math.min(255,Math.max(a.g,0)),b:Math.min(255,Math.max(a.b,0)),a:o});this._originalInput=n,this._r=S.r,this._g=S.g,this._b=S.b,this._a=S.a,this._roundA=Math.round(100*this._a)/100,this._format=r.format||S.format,this._gradientType=r.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=S.ok;}function iE(n,r,i){var a,o,s=Math.max(n=iU(n,255),r=iU(r,255),i=iU(i,255)),l=Math.min(n,r,i),u=(s+l)/2;if(s==l)a=o=0;else{var c=s-l;switch(o=u>.5?c/(2-s-l):c/(s+l),s){case n:a=(r-i)/c+(r<i?6:0);break;case r:a=(i-n)/c+2;break;case i:a=(n-r)/c+4;}a/=6;}return{h:a,s:o,l:u};}function iw(n,r,i){var a,o,s=Math.max(n=iU(n,255),r=iU(r,255),i=iU(i,255)),l=Math.min(n,r,i),u=s-l;if(o=0===s?0:u/s,s==l)a=0;else{switch(s){case n:a=(r-i)/u+(r<i?6:0);break;case r:a=(i-n)/u+2;break;case i:a=(n-r)/u+4;}a/=6;}return{h:a,s:o,v:s};}function iS(n,r,i,a){var o=[iH(Math.round(n).toString(16)),iH(Math.round(r).toString(16)),iH(Math.round(i).toString(16))];return a&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("");}function iT(n,r,i,a){return[iH(iX(a)),iH(Math.round(n).toString(16)),iH(Math.round(r).toString(16)),iH(Math.round(i).toString(16))].join("");}function iA(n,r){r=0===r?0:r||10;var i=ix(n).toHsl();return i.s-=r/100,i.s=iV(i.s),ix(i);}function iC(n,r){r=0===r?0:r||10;var i=ix(n).toHsl();return i.s+=r/100,i.s=iV(i.s),ix(i);}function iO(n){return ix(n).desaturate(100);}function iM(n,r){r=0===r?0:r||10;var i=ix(n).toHsl();return i.l+=r/100,i.l=iV(i.l),ix(i);}function iR(n,r){r=0===r?0:r||10;var i=ix(n).toRgb();return i.r=Math.max(0,Math.min(255,i.r-Math.round(-(r/100*255)))),i.g=Math.max(0,Math.min(255,i.g-Math.round(-(r/100*255)))),i.b=Math.max(0,Math.min(255,i.b-Math.round(-(r/100*255)))),ix(i);}function iP(n,r){r=0===r?0:r||10;var i=ix(n).toHsl();return i.l-=r/100,i.l=iV(i.l),ix(i);}function ik(n,r){var i=ix(n).toHsl(),a=(i.h+r)%360;return i.h=a<0?360+a:a,ix(i);}function iI(n){var r=ix(n).toHsl();return r.h=(r.h+180)%360,ix(r);}function iL(n,r){if(isNaN(r)||r<=0)throw Error("Argument to polyad must be a positive number");for(var i=ix(n).toHsl(),a=[ix(n)],o=360/r,s=1;s<r;s++)a.push(ix({h:(i.h+s*o)%360,s:i.s,l:i.l}));return a;}function iN(n){var r=ix(n).toHsl(),i=r.h;return[ix(n),ix({h:(i+72)%360,s:r.s,l:r.l}),ix({h:(i+216)%360,s:r.s,l:r.l})];}function iD(n,r,i){r=r||6,i=i||30;var a=ix(n).toHsl(),o=360/i,s=[ix(n)];for(a.h=(a.h-(o*r>>1)+720)%360;--r;)a.h=(a.h+o)%360,s.push(ix(a));return s;}function iF(n,r){r=r||6;for(var i=ix(n).toHsv(),a=i.h,o=i.s,s=i.v,l=[],u=1/r;r--;)l.push(ix({h:a,s:o,v:s})),s=(s+u)%1;return l;}ix.prototype={isDark:function(){return 128>this.getBrightness();},isLight:function(){return!this.isDark();},isValid:function(){return this._ok;},getOriginalInput:function(){return this._originalInput;},getFormat:function(){return this._format;},getAlpha:function(){return this._a;},getBrightness:function(){var n=this.toRgb();return(299*n.r+587*n.g+114*n.b)/1e3;},getLuminance:function(){var n,r,i,a=this.toRgb();return n=a.r/255,.2126*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.7152*((r=a.g/255)<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.0722*((i=a.b/255)<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4));},setAlpha:function(n){return this._a=iz(n),this._roundA=Math.round(100*this._a)/100,this;},toHsv:function(){var n=iw(this._r,this._g,this._b);return{h:360*n.h,s:n.s,v:n.v,a:this._a};},toHsvString:function(){var n=iw(this._r,this._g,this._b),r=Math.round(360*n.h),i=Math.round(100*n.s),a=Math.round(100*n.v);return 1==this._a?"hsv("+r+", "+i+"%, "+a+"%)":"hsva("+r+", "+i+"%, "+a+"%, "+this._roundA+")";},toHsl:function(){var n=iE(this._r,this._g,this._b);return{h:360*n.h,s:n.s,l:n.l,a:this._a};},toHslString:function(){var n=iE(this._r,this._g,this._b),r=Math.round(360*n.h),i=Math.round(100*n.s),a=Math.round(100*n.l);return 1==this._a?"hsl("+r+", "+i+"%, "+a+"%)":"hsla("+r+", "+i+"%, "+a+"%, "+this._roundA+")";},toHex:function(n){return iS(this._r,this._g,this._b,n);},toHexString:function(n){return"#"+this.toHex(n);},toHex8:function(n){var r,i,a,o,s;return r=this._r,i=this._g,a=this._b,o=this._a,s=[iH(Math.round(r).toString(16)),iH(Math.round(i).toString(16)),iH(Math.round(a).toString(16)),iH(iX(o))],n&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("");},toHex8String:function(n){return"#"+this.toHex8(n);},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a};},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")";},toPercentageRgb:function(){return{r:Math.round(100*iU(this._r,255))+"%",g:Math.round(100*iU(this._g,255))+"%",b:Math.round(100*iU(this._b,255))+"%",a:this._a};},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*iU(this._r,255))+"%, "+Math.round(100*iU(this._g,255))+"%, "+Math.round(100*iU(this._b,255))+"%)":"rgba("+Math.round(100*iU(this._r,255))+"%, "+Math.round(100*iU(this._g,255))+"%, "+Math.round(100*iU(this._b,255))+"%, "+this._roundA+")";},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(ij[iS(this._r,this._g,this._b,!0)]||!1);},toFilter:function(n){var r="#"+iT(this._r,this._g,this._b,this._a),i=r,a=this._gradientType?"GradientType = 1, ":"";if(n){var o=ix(n);i="#"+iT(o._r,o._g,o._b,o._a);}return"progid:DXImageTransform.Microsoft.gradient("+a+"startColorstr="+r+",endColorstr="+i+")";},toString:function(n){var r=!!n;n=n||this._format;var i=!1,a=this._a<1&&this._a>=0;return!r&&a&&("hex"===n||"hex6"===n||"hex3"===n||"hex4"===n||"hex8"===n||"name"===n)?"name"===n&&0===this._a?this.toName():this.toRgbString():("rgb"===n&&(i=this.toRgbString()),"prgb"===n&&(i=this.toPercentageRgbString()),("hex"===n||"hex6"===n)&&(i=this.toHexString()),"hex3"===n&&(i=this.toHexString(!0)),"hex4"===n&&(i=this.toHex8String(!0)),"hex8"===n&&(i=this.toHex8String()),"name"===n&&(i=this.toName()),"hsl"===n&&(i=this.toHslString()),"hsv"===n&&(i=this.toHsvString()),i||this.toHexString());},clone:function(){return ix(this.toString());},_applyModification:function(n,r){var i=n.apply(null,[this].concat([].slice.call(r)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this;},lighten:function(){return this._applyModification(iM,arguments);},brighten:function(){return this._applyModification(iR,arguments);},darken:function(){return this._applyModification(iP,arguments);},desaturate:function(){return this._applyModification(iA,arguments);},saturate:function(){return this._applyModification(iC,arguments);},greyscale:function(){return this._applyModification(iO,arguments);},spin:function(){return this._applyModification(ik,arguments);},_applyCombination:function(n,r){return n.apply(null,[this].concat([].slice.call(r)));},analogous:function(){return this._applyCombination(iD,arguments);},complement:function(){return this._applyCombination(iI,arguments);},monochromatic:function(){return this._applyCombination(iF,arguments);},splitcomplement:function(){return this._applyCombination(iN,arguments);},triad:function(){return this._applyCombination(iL,[3]);},tetrad:function(){return this._applyCombination(iL,[4]);}},ix.fromRatio=function(n,r){if("object"==iy(n)){var i={};for(var a in n)n.hasOwnProperty(a)&&("a"===a?i[a]=n[a]:i[a]=iW(n[a]));n=i;}return ix(n,r);},ix.equals=function(n,r){return!!n&&!!r&&ix(n).toRgbString()==ix(r).toRgbString();},ix.random=function(){return ix.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()});},ix.mix=function(n,r,i){i=0===i?0:i||50;var a=ix(n).toRgb(),o=ix(r).toRgb(),s=i/100;return ix({r:(o.r-a.r)*s+a.r,g:(o.g-a.g)*s+a.g,b:(o.b-a.b)*s+a.b,a:(o.a-a.a)*s+a.a});},ix.readability=function(n,r){var i=ix(n),a=ix(r);return(Math.max(i.getLuminance(),a.getLuminance())+.05)/(Math.min(i.getLuminance(),a.getLuminance())+.05);},ix.isReadable=function(n,r,i){var a,o,s,l,u,c=ix.readability(n,r);switch(u=!1,(o=((a=(a=i)||{level:"AA",size:"small"}).level||"AA").toUpperCase(),s=(a.size||"small").toLowerCase(),"AA"!==o&&"AAA"!==o&&(o="AA"),"small"!==s&&"large"!==s&&(s="small"),l={level:o,size:s}).level+l.size){case"AAsmall":case"AAAlarge":u=c>=4.5;break;case"AAlarge":u=c>=3;break;case"AAAsmall":u=c>=7;}return u;},ix.mostReadable=function(n,r,i){var a,o,s,l,u=null,c=0;o=(i=i||{}).includeFallbackColors,s=i.level,l=i.size;for(var f=0;f<r.length;f++)(a=ix.readability(n,r[f]))>c&&(c=a,u=ix(r[f]));return ix.isReadable(n,u,{level:s,size:l})||!o?u:(i.includeFallbackColors=!1,ix.mostReadable(n,["#fff","#000"],i));};var iB=ix.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},ij=ix.hexNames=function(n){var r={};for(var i in n)n.hasOwnProperty(i)&&(r[n[i]]=i);return r;}(iB);function iz(n){return(isNaN(n=parseFloat(n))||n<0||n>1)&&(n=1),n;}function iU(n,r){"string"==typeof(i=n)&&-1!=i.indexOf(".")&&1===parseFloat(i)&&(n="100%");var i,a,o="string"==typeof(a=n)&&-1!=a.indexOf("%");return(n=Math.min(r,Math.max(0,parseFloat(n))),o&&(n=parseInt(n*r,10)/100),1e-6>Math.abs(n-r))?1:n%r/parseFloat(r);}function iV(n){return Math.min(1,Math.max(0,n));}function iG(n){return parseInt(n,16);}function iH(n){return 1==n.length?"0"+n:""+n;}function iW(n){return n<=1&&(n=100*n+"%"),n;}function iX(n){return Math.round(255*parseFloat(n)).toString(16);}var iq=(o="[\\s|\\(]+("+(a="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+a+")[,|\\s]+("+a+")\\s*\\)?",s="[\\s|\\(]+("+a+")[,|\\s]+("+a+")[,|\\s]+("+a+")[,|\\s]+("+a+")\\s*\\)?",{CSS_UNIT:new RegExp(a),rgb:RegExp("rgb"+o),rgba:RegExp("rgba"+s),hsl:RegExp("hsl"+o),hsla:RegExp("hsla"+s),hsv:RegExp("hsv"+o),hsva:RegExp("hsva"+s),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function i$(n){return!!iq.CSS_UNIT.exec(n);}var iY=function(n){var r=0,i=0;return(0,iv.default)(["r","g","b","a","h","s","l","v"],function(a){n[a]&&(r+=1,isNaN(n[a])||(i+=1),("s"===a||"l"===a)&&/^\d+%$/.test(n[a])&&(i+=1));}),r===i&&n;},iZ=function(n,r){var i=n.hex?ix(n.hex):ix(n),a=i.toHsl(),o=i.toHsv(),s=i.toRgb(),l=i.toHex();return 0===a.s&&(a.h=r||0,o.h=r||0),{hsl:a,hex:"000000"===l&&0===s.a?"transparent":"#".concat(l),rgb:s,hsv:o,oldHue:n.h||r||a.h,source:n.source};},iK=function(n){if("transparent"===n)return!0;var r="#"===String(n).charAt(0)?1:0;return n.length!==4+r&&n.length<7+r&&ix(n).isValid();},iQ={};function iJ(n){return(iJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n;}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n;})(n);}function i0(){return(i0=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a]);}return n;}).apply(this,arguments);}function i1(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable;})),i.push.apply(i,a);}return i;}function i2(n){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?i1(Object(i),!0).forEach(function(r){var a,o;a=r,o=i[r],(a=i4(a))in n?Object.defineProperty(n,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[a]=o;}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):i1(Object(i)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(i,r));});}return n;}function i3(n,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,i4(a.key),a);}}function i4(n){var r=function(n,r){if("object"!==iJ(n)||null===n)return n;var i=n[Symbol.toPrimitive];if(void 0!==i){var a=i.call(n,r||"default");if("object"!==iJ(a))return a;throw TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(n);}(n,"string");return"symbol"===iJ(r)?r:String(r);}function i5(n,r){return(i5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n;})(n,r);}function i6(n){return(i6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n);})(n);}function i8(n){return(i8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n;}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n;})(n);}function i7(n){var r=function(n,r){if("object"!==i8(n)||null===n)return n;var i=n[Symbol.toPrimitive];if(void 0!==i){var a=i.call(n,r||"default");if("object"!==i8(a))return a;throw TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(n);}(n,"string");return"symbol"===i8(r)?r:String(r);}function i9(n,r){return(i9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n;})(n,r);}function ae(n){return(ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n);})(n);}i.e(iQ,{isValidHex:function(){return iK;},simpleCheckForValidColor:function(){return iY;},toState:function(){return iZ;}});var at=[38,40],an=1,ar=function(n){!function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&i9(n,r);}(o,n);var r,i,a=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0;}catch(n){return!1;}}(),function(){var n,i=ae(o);return n=r?Reflect.construct(i,arguments,ae(this).constructor):i.apply(this,arguments),function(n,r){if(r&&("object"===i8(r)||"function"==typeof r))return r;if(void 0!==r)throw TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n;}(n);}(this,n);});function o(n){var r;return!function(n,r){if(!(n instanceof r))throw TypeError("Cannot call a class as a function");}(this,o),(r=a.call(this)).handleBlur=function(){r.state.blurValue&&r.setState({value:r.state.blurValue,blurValue:null});},r.handleChange=function(n){r.setUpdatedValue(n.target.value,n);},r.handleKeyDown=function(n){var i,a=Number(String(n.target.value).replace(/%/g,""));if(!isNaN(a)&&(i=n.keyCode,at.indexOf(i)>-1)){var o=r.getArrowOffset(),s=38===n.keyCode?a+o:a-o;r.setUpdatedValue(s,n);}},r.handleDrag=function(n){if(r.props.dragLabel){var i=Math.round(r.props.value+n.movementX);i>=0&&i<=r.props.dragMax&&r.props.onChange&&r.props.onChange(r.getValueObjectWithLabel(i),n);}},r.handleMouseDown=function(n){r.props.dragLabel&&(n.preventDefault(),r.handleDrag(n),window.addEventListener("mousemove",r.handleDrag),window.addEventListener("mouseup",r.handleMouseUp));},r.handleMouseUp=function(){r.unbindEventListeners();},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleDrag),window.removeEventListener("mouseup",r.handleMouseUp);},r.state={value:String(n.value).toUpperCase(),blurValue:String(n.value).toUpperCase()},r.inputId="rc-editable-input-".concat(an++),r;}return i=[{key:"componentDidUpdate",value:function(n,r){this.props.value!==this.state.value&&(n.value!==this.props.value||r.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}));}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners();}},{key:"getValueObjectWithLabel",value:function(n){var r,i;return r={},(i=i7(i=this.props.label))in r?Object.defineProperty(r,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[i]=n,r;}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||1;}},{key:"setUpdatedValue",value:function(n,r){var i=this.props.label?this.getValueObjectWithLabel(n):n;this.props.onChange&&this.props.onChange(i,r),this.setState({value:n});}},{key:"render",value:function(){var n=this,r=(0,rG.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return w.default.createElement("div",{style:r.wrap},w.default.createElement("input",{id:this.inputId,style:r.input,ref:function(r){return n.input=r;},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?w.default.createElement("label",{htmlFor:this.inputId,style:r.label,onMouseDown:this.handleMouseDown},this.props.label):null);}}],function(n,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,i7(a.key),a);}}(o.prototype,i),Object.defineProperty(o,"prototype",{writable:!1}),o;}(w.PureComponent||w.Component);function ai(n){return(ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n;}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n;})(n);}function aa(){return(aa=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a]);}return n;}).apply(this,arguments);}function ao(n,r){return(ao=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n;})(n,r);}function as(n){return(as=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n);})(n);}function al(n){return(al="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n;}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n;})(n);}function au(){return(au=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a]);}return n;}).apply(this,arguments);}function ac(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable;})),i.push.apply(i,a);}return i;}function af(n){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?ac(Object(i),!0).forEach(function(r){var a,o;a=r,o=i[r],(a=function(n){var r=function(n,r){if("object"!==al(n)||null===n)return n;var i=n[Symbol.toPrimitive];if(void 0!==i){var a=i.call(n,r||"default");if("object"!==al(a))return a;throw TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(n);}(n,"string");return"symbol"===al(r)?r:String(r);}(a))in n?Object.defineProperty(n,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[a]=o;}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ac(Object(i)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(i,r));});}return n;}var ad=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(i){!function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&ao(n,r);}(l,i);var a,o,s=(a=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0;}catch(n){return!1;}}(),function(){var n,r=as(l);return n=a?Reflect.construct(r,arguments,as(this).constructor):r.apply(this,arguments),function(n,r){if(r&&("object"===ai(r)||"function"==typeof r))return r;if(void 0!==r)throw TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n;}(n);}(this,n);});function l(){var n;!function(n,r){if(!(n instanceof r))throw TypeError("Cannot call a class as a function");}(this,l);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=s.call.apply(s,[this].concat(i))).state={focus:!1},n.handleFocus=function(){return n.setState({focus:!0});},n.handleBlur=function(){return n.setState({focus:!1});},n;}return o=[{key:"render",value:function(){return w.default.createElement(r,{onFocus:this.handleFocus,onBlur:this.handleBlur},w.default.createElement(n,aa({},this.props,this.state)));}}],function(n,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,function(n){var r=function(n,r){if("object"!==ai(n)||null===n)return n;var i=n[Symbol.toPrimitive];if(void 0!==i){var a=i.call(n,r||"default");if("object"!==ai(a))return a;throw TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(n);}(n,"string");return"symbol"===ai(r)?r:String(r);}(a.key),a);}}(l.prototype,o),Object.defineProperty(l,"prototype",{writable:!1}),l;}(w.default.Component);}(function(n){var r=n.color,i=n.style,a=n.onClick,o=void 0===a?function(){}:a,s=n.onHover,l=n.title,u=void 0===l?r:l,c=n.children,f=n.focus,d=n.focusStyle,h="transparent"===r,p=(0,rG.default)({default:{swatch:af(af({background:r,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},i),f?void 0===d?{}:d:{})}}),m={};return s&&(m.onMouseOver=function(n){return s(r,n);}),w.default.createElement("div",au({style:p.swatch,onClick:function(n){return o(r,n);},title:u,tabIndex:0,onKeyDown:function(n){return 13===n.keyCode&&o(r,n);}},m),c,h&&w.default.createElement(r1,{borderRadius:p.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}));}),ah=function(n){var r=n.onChange,i=n.rgb,a=n.hsl,o=n.hex,s=n.disableAlpha,l=(0,rG.default)({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:s}),u=function(n,o){n.hex?iQ.isValidHex(n.hex)&&(null==r||r({hex:n.hex,source:"hex"},o)):n.r||n.g||n.b?null==r||r({r:n.r||(null==i?void 0:i.r),g:n.g||(null==i?void 0:i.g),b:n.b||(null==i?void 0:i.b),a:null==i?void 0:i.a,source:"rgb"},o):n.a&&(n.a<0?n.a=0:n.a>100&&(n.a=100),n.a/=100,null==r||r({h:null==a?void 0:a.h,s:null==a?void 0:a.s,l:null==a?void 0:a.l,a:n.a,source:"rgb"},o));};return w.default.createElement("div",{style:l.fields,className:"flexbox-fix"},w.default.createElement("div",{style:l.double},w.default.createElement(ar,{style:{input:l.input,label:l.label},label:"hex",value:null==o?void 0:o.replace("#",""),onChange:u})),w.default.createElement("div",{style:l.single},w.default.createElement(ar,{style:{input:l.input,label:l.label},label:"r",value:null==i?void 0:i.r,onChange:u,dragLabel:"true",dragMax:"255"})),w.default.createElement("div",{style:l.single},w.default.createElement(ar,{style:{input:l.input,label:l.label},label:"g",value:null==i?void 0:i.g,onChange:u,dragLabel:"true",dragMax:"255"})),w.default.createElement("div",{style:l.single},w.default.createElement(ar,{style:{input:l.input,label:l.label},label:"b",value:null==i?void 0:i.b,onChange:u,dragLabel:"true",dragMax:"255"})),w.default.createElement("div",{style:l.alpha},w.default.createElement(ar,{style:{input:l.input,label:l.label},label:"a",value:Math.round(100*((null==i?void 0:i.a)||0)),onChange:u,dragLabel:"true",dragMax:"100"})));};function ap(n){return(ap="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n;}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n;})(n);}function am(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable;})),i.push.apply(i,a);}return i;}function ag(n){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?am(Object(i),!0).forEach(function(r){var a,o;a=r,o=i[r],(a=function(n){var r=function(n,r){if("object"!==ap(n)||null===n)return n;var i=n[Symbol.toPrimitive];if(void 0!==i){var a=i.call(n,r||"default");if("object"!==ap(a))return a;throw TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(n);}(n,"string");return"symbol"===ap(r)?r:String(r);}(a))in n?Object.defineProperty(n,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[a]=o;}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):am(Object(i)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(i,r));});}return n;}var av=function(n){var r=n.colors,i=n.onClick,a=void 0===i?function(){}:i,o=n.onSwatchHover,s={colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{msBorderRadius:"3px",MozBorderRadius:"3px",OBorderRadius:"3px",WebkitBorderRadius:"3px",borderRadius:"3px",msBoxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)",MozBoxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)",OBoxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)",WebkitBoxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},l=function(n,r){null==a||a({hex:n,source:"hex"},r);};return w.default.createElement("div",{style:s.colors,className:"flexbox-fix"},null==r?void 0:r.map(function(n){var r="string"==typeof n?{color:n,title:void 0}:n,i="".concat(r.color).concat((null==r?void 0:r.title)||"");return w.default.createElement("div",{key:i,style:s.swatchWrap},w.default.createElement(ad,ag(ag({},r),{},{style:s.swatch,onClick:l,onHover:o,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px ".concat(r.color)}})));}));};function ay(n){return(ay="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n;}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n;})(n);}function a_(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable;})),i.push.apply(i,a);}return i;}var ab=function(n){var r=n.width,i=n.rgb,a=n.hex,o=n.hsv,s=n.hsl,l=n.onChange,u=n.onSwatchHover,c=n.disableAlpha,f=n.presetColors,d=n.renderers,h=n.styles,p=void 0===h?{}:h,m=n.className,g=(0,rG.default)((0,rW.default)({default:function(n){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?a_(Object(i),!0).forEach(function(r){var a,o;a=r,o=i[r],(a=function(n){var r=function(n,r){if("object"!==ay(n)||null===n)return n;var i=n[Symbol.toPrimitive];if(void 0!==i){var a=i.call(n,r||"default");if("object"!==ay(a))return a;throw TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(n);}(n,"string");return"symbol"===ay(r)?r:String(r);}(a))in n?Object.defineProperty(n,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[a]=o;}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):a_(Object(i)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(i,r));});}return n;}({picker:{width:r,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba(".concat(i.r,",").concat(i.g,",").concat(i.b,",").concat(i.a,")"),boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},p),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},p),{disableAlpha:c});return w.default.createElement("div",{style:g.picker,className:"sketch-picker ".concat(void 0===m?"":m)},w.default.createElement("div",{style:g.saturation},w.default.createElement(ih,{style:g.Saturation,hsl:s,hsv:o,onChange:l})),w.default.createElement("div",{style:g.controls,className:"flexbox-fix"},w.default.createElement("div",{style:g.sliders},w.default.createElement("div",{style:g.hue},w.default.createElement(ii,{style:g.Hue,hsl:s,onChange:l})),w.default.createElement("div",{style:g.alpha},w.default.createElement(r8,{style:g.Alpha,rgb:i,hsl:s,renderers:d,onChange:l}))),w.default.createElement("div",{style:g.color},w.default.createElement(r1,null),w.default.createElement("div",{style:g.activeColor}))),w.default.createElement(ah,{rgb:i,hsl:s,hex:a,onChange:l,disableAlpha:c}),w.default.createElement(av,{colors:f,onClick:l,onSwatchHover:u}));};ab.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};var ax=((l=function(n){!function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&i5(n,r);}(s,n);var r,i,a,o=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0;}catch(n){return!1;}}(),function(){var n,i=i6(s);return n=r?Reflect.construct(i,arguments,i6(this).constructor):i.apply(this,arguments),function(n,r){if(r&&("object"===iJ(r)||"function"==typeof r))return r;if(void 0!==r)throw TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n;}(n);}(this,n);});function s(n){var r;return function(n,r){if(!(n instanceof r))throw TypeError("Cannot call a class as a function");}(this,s),(r=o.call(this)).handleChange=function(n,i){if(iQ.simpleCheckForValidColor(n)){var a=iQ.toState(n,n.h||r.state.oldHue);r.setState(a),r.props.onChangeComplete&&r.debounce(r.props.onChangeComplete,a,i),r.props.onChange&&r.props.onChange(a,i);}},r.handleSwatchHover=function(n,i){if(iQ.simpleCheckForValidColor(n)){var a=iQ.toState(n,n.h||r.state.oldHue);r.props.onSwatchHover&&r.props.onSwatchHover(a,i);}},r.state=i2({},iQ.toState(n.color,0)),r.debounce=(0,im.default)(function(n,r,i){n(r,i);},100),r;}return i=[{key:"render",value:function(){var n={};return this.props.onSwatchHover&&(n.onSwatchHover=this.handleSwatchHover),w.default.createElement(ab,i0({},this.props,this.state,{onChange:this.handleChange},n));}}],a=[{key:"getDerivedStateFromProps",value:function(n,r){return i2({},iQ.toState(n.color,r.oldHue));}}],i&&i3(s.prototype,i),a&&i3(s,a),Object.defineProperty(s,"prototype",{writable:!1}),s;}(w.PureComponent||w.Component)).propTypes=i2({},ab.propTypes),l.defaultProps=i2(i2({},ab.defaultProps),{},{color:{h:250,s:.5,l:.2,a:1}}),l),aE=["mode","popoverProps"],aw=["#FF9D4E","#5BD8A6","#5B8FF9","#F7664E","#FF86B7","#2B9E9D","#9270CA","#6DC8EC","#667796","#F6BD16"],aS=w.default.forwardRef(function(n,r){var i=n.mode,a=n.popoverProps,o=(0,d.default)(n,aE),s=(0,(0,w.useContext)(tb.default.ConfigContext).getPrefixCls)("pro-field-color-picker"),l=tA.proTheme.useToken().token,u=(0,G.default)("#1890ff",{value:o.value,onChange:o.onChange}),c=(0,T.default)(u,2),f=c[0],h=c[1],p=(0,tA.useStyle)("ProFiledColorPicker"+f,function(){return(0,em.default)({},".".concat(s),{width:32,height:32,display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",border:"1px solid ".concat(l.colorSplit),borderRadius:l.borderRadius,"&:hover":{borderColor:f}});}),m=p.wrapSSR,v=p.hashId,y=m((0,tw.jsx)("div",{className:"".concat(s," ").concat(v).trim(),style:{cursor:o.disabled?"not-allowed":"pointer",backgroundColor:o.disabled?l.colorBgContainerDisabled:l.colorBgContainer},children:(0,tw.jsx)("div",{style:{backgroundColor:f,width:24,boxSizing:"border-box",height:24,borderRadius:l.borderRadius}})}));return((0,w.useImperativeHandle)(r,function(){}),"read"===i||o.disabled)?y:(0,tw.jsx)(tW.default,(0,g.default)((0,g.default)({trigger:"click",placement:"right"},a),{},{content:(0,tw.jsx)("div",{style:{margin:"-12px -16px"},children:(0,tw.jsx)(ax,(0,g.default)((0,g.default)({},o),{},{presetColors:o.colors||o.presetColors||aw,color:f,onChange:function(n){var r=n.hex,i=n.rgb,a=i.r,o=i.g,s=i.b,l=i.a;if(l&&l<1){h("rgba(".concat(a,", ").concat(o,", ").concat(s,", ").concat(l,")"));return;}h(r);}}))}),children:y}));}),aT={label:"Recommended",colors:["#F5222D","#FA8C16","#FADB14","#8BBB11","#52C41A","#13A8A8","#1677FF","#2F54EB","#722ED1","#EB2F96","#F5222D4D","#FA8C164D","#FADB144D","#8BBB114D","#52C41A4D","#13A8A84D","#1677FF4D","#2F54EB4D","#722ED14D","#EB2F964D"]};function aA(){return(0,tU.compareVersions)(rU.default,"5.5.0")>-1;}var aC=w.default.forwardRef(function(n,r){var i=n.text,a=n.mode,o=n.render,s=n.renderFormItem,l=n.fieldProps,u=n.old,c=(0,w.useContext)(tb.default.ConfigContext).getPrefixCls,f=w.default.useMemo(function(){return function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(void 0===n||!1===n)&&aA()?rB:aS;}(u);},[u]),d=c("pro-field-color-picker"),h=(0,w.useMemo)(function(){return u?"":(0,L.default)((0,em.default)({},d,aA()));},[d,u]);if("read"===a){var p=(0,tw.jsx)(f,{value:i,mode:"read",ref:r,className:h,open:!1});return o?o(i,(0,g.default)({mode:a},l),p):p;}if("edit"===a||"update"===a){var m=(0,g.default)({display:"table-cell"},l.style),v=(0,tw.jsx)(f,(0,g.default)((0,g.default)({ref:r,presets:[aT]},l),{},{style:m,className:h}));return s?s(i,(0,g.default)((0,g.default)({mode:a},l),{},{style:m}),v):v;}return null;}),aO=i("3c6b2216"),aM=i("2ba63931"),aR=u._(aM),aP=i("ab5f2fcc"),ak=u._(aP),aI=i("000dea7d"),aL=u._(aI);i("12ca19cd"),ak.default.extend(aL.default);var aN=w.default.forwardRef(function(n,r){var i=n.text,a=n.mode,o=n.format,s=n.label,l=n.light,u=n.render,c=n.renderFormItem,f=n.plain,d=n.showTime,h=n.fieldProps,p=n.picker,m=n.bordered,v=n.lightLabel,_=(0,y.useIntl)(),b=(0,w.useState)(!1),x=(0,T.default)(b,2),E=x[0],S=x[1];if("read"===a){var A,C=(A=h.format||o,i?"function"==typeof A?A((0,ak.default)(i)):(0,ak.default)(i).format((Array.isArray(A)?A[0]:A)||"YYYY-MM-DD"):"-");return u?u(i,(0,g.default)({mode:a},h),(0,tw.jsx)(tw.Fragment,{children:C})):(0,tw.jsx)(tw.Fragment,{children:C});}if("edit"===a||"update"===a){var R,P=h.disabled,k=h.value,I=h.placeholder,L=void 0===I?_.getMessage("tableForm.selectPlaceholder","\u8BF7\u9009\u62E9"):I,N=(0,aO.parseValueToDay)(k);return(R=l?(0,tw.jsx)(O.FieldLabel,{label:s,onClick:function(){var n;null==h||null===(n=h.onOpenChange)||void 0===n||n.call(h,!0),S(!0);},style:N?{paddingInlineEnd:0}:void 0,disabled:P,value:N||E?(0,tw.jsx)(aR.default,(0,g.default)((0,g.default)((0,g.default)({picker:p,showTime:d,format:o,ref:r},h),{},{value:N,onOpenChange:function(n){var r;S(n),null==h||null===(r=h.onOpenChange)||void 0===r||r.call(h,n);}},(0,M.compatibleBorder)(!1)),{},{open:E})):void 0,allowClear:!1,downIcon:!N&&!E&&void 0,bordered:m,ref:v}):(0,tw.jsx)(aR.default,(0,g.default)((0,g.default)((0,g.default)({picker:p,showTime:d,format:o,placeholder:L},(0,M.compatibleBorder)(void 0===f||!f)),{},{ref:r},h),{},{value:N})),c)?c(i,(0,g.default)({mode:a},h),R):R;}return null;}),aD=i("5916bc87"),aF=w.default.forwardRef(function(n,r){var i=n.text,a=n.mode,o=n.render,s=n.placeholder,l=n.renderFormItem,u=n.fieldProps,c=(0,y.useIntl)(),f=s||c.getMessage("tableForm.inputPlaceholder","\u8BF7\u8F93\u5165"),d=(0,w.useCallback)(function(n){var r=null!=n?n:void 0;return u.stringMode||"string"!=typeof r||(r=Number(r)),"number"!=typeof r||(0,aD.isNil)(r)||(0,aD.isNil)(u.precision)||(r=Number(r.toFixed(u.precision))),r;},[u]);if("read"===a){var h,p={};null!=u&&u.precision&&(p={minimumFractionDigits:Number(u.precision),maximumFractionDigits:Number(u.precision)});var m=new Intl.NumberFormat(void 0,(0,g.default)((0,g.default)({},p),(null==u?void 0:u.intlProps)||{})).format(Number(i)),v=null!=u&&u.stringMode?(0,tw.jsx)("span",{children:i}):(0,tw.jsx)("span",{ref:r,children:(null==u||null===(h=u.formatter)||void 0===h?void 0:h.call(u,m))||m});return o?o(i,(0,g.default)({mode:a},u),v):v;}if("edit"===a||"update"===a){var _=(0,tw.jsx)(nM,(0,g.default)((0,g.default)({ref:r,min:0,placeholder:f},(0,ek.default)(u,["onChange","onBlur"])),{},{onChange:function(n){var r;return null==u||null===(r=u.onChange)||void 0===r?void 0:r.call(u,d(n));},onBlur:function(n){var r;return null==u||null===(r=u.onBlur)||void 0===r?void 0:r.call(u,d(n.target.value));}}));return l?l(i,(0,g.default)({mode:a},u),_):_;}return null;}),aB=i("8f0ec5f3"),aj=u._(aB),az=w.default.forwardRef(function(n,r){var i=n.text,a=n.mode,o=n.render,s=n.placeholder,l=n.renderFormItem,u=n.fieldProps,c=n.separator,f=void 0===c?"~":c,d=n.separatorWidth,h=void 0===d?30:d,p=u.value,m=u.defaultValue,v=u.onChange,_=u.id,b=(0,y.useIntl)(),x=y.proTheme.useToken().token,E=(0,G.default)(function(){return m;},{value:p,onChange:v}),S=(0,T.default)(E,2),A=S[0],C=S[1],O=(0,w.useRef)(A);if("read"===a){var M=function(n){var r,i=new Intl.NumberFormat(void 0,(0,g.default)({minimumSignificantDigits:2},(null==u?void 0:u.intlProps)||{})).format(Number(n));return(null==u||null===(r=u.formatter)||void 0===r?void 0:r.call(u,i))||i;},R=(0,tw.jsxs)("span",{ref:r,children:[M(i[0])," ",f," ",M(i[1])]});return o?o(i,(0,g.default)({mode:a},u),R):R;}if("edit"===a||"update"===a){var P=function(n,r){var i=(0,k.default)(A||[]);i[n]=null===r?void 0:r,O.current=i,C(i);},I=(null==u?void 0:u.placeholder)||s||[b.getMessage("tableForm.inputPlaceholder","\u8BF7\u8F93\u5165"),b.getMessage("tableForm.inputPlaceholder","\u8BF7\u8F93\u5165")],L=function(n){return Array.isArray(I)?I[n]:I;},N=aj.default.Compact||tF.default.Group,D=aj.default.Compact?{}:{compact:!0},F=(0,tw.jsxs)(N,(0,g.default)((0,g.default)({},D),{},{onBlur:function(){if(Array.isArray(O.current)){var n=(0,T.default)(O.current,2),r=n[0],i=n[1];"number"==typeof r&&"number"==typeof i&&r>i?C([i,r]):void 0===r&&void 0===i&&C(void 0);}},children:[(0,tw.jsx)(nM,(0,g.default)((0,g.default)({},u),{},{placeholder:L(0),id:null!=_?_:"".concat(_,"-0"),style:{width:"calc((100% - ".concat(h,"px) / 2)")},value:null==A?void 0:A[0],defaultValue:null==m?void 0:m[0],onChange:function(n){return P(0,n);}})),(0,tw.jsx)(tF.default,{style:{width:h,textAlign:"center",borderInlineStart:0,borderInlineEnd:0,pointerEvents:"none",backgroundColor:null==x?void 0:x.colorBgContainer},placeholder:f,disabled:!0}),(0,tw.jsx)(nM,(0,g.default)((0,g.default)({},u),{},{placeholder:L(1),id:null!=_?_:"".concat(_,"-1"),style:{width:"calc((100% - ".concat(h,"px) / 2)"),borderInlineStart:0},value:null==A?void 0:A[1],defaultValue:null==m?void 0:m[1],onChange:function(n){return P(1,n);}}))]}));return l?l(i,(0,g.default)({mode:a},u),F):F;}return null;}),aU=i("7e3844f3"),aV=u._(aU);ak.default.extend(aV.default);var aG=w.default.forwardRef(function(n,r){var i=n.text,a=n.mode,o=n.plain,s=n.render,l=n.renderFormItem,u=n.format,c=n.fieldProps,f=(0,y.useIntl)();if("read"===a){var d=(0,tw.jsx)(n8.default,{title:(0,ak.default)(i).format((null==c?void 0:c.format)||u||"YYYY-MM-DD HH:mm:ss"),children:(0,ak.default)(i).fromNow()});return s?s(i,(0,g.default)({mode:a},c),(0,tw.jsx)(tw.Fragment,{children:d})):(0,tw.jsx)(tw.Fragment,{children:d});}if("edit"===a||"update"===a){var h=f.getMessage("tableForm.selectPlaceholder","\u8BF7\u9009\u62E9"),p=(0,aO.parseValueToDay)(c.value),m=(0,tw.jsx)(aR.default,(0,g.default)((0,g.default)((0,g.default)({ref:r,placeholder:h,showTime:!0},(0,M.compatibleBorder)(void 0===o||!o)),c),{},{value:p}));return l?l(i,(0,g.default)({mode:a},c),m):m;}return null;}),aH=i("4f0a089a"),aW=u._(aH),aX=i("35f57854"),aq=u._(aX),a$=i("b52eecc2"),aY=u._(a$),aZ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z"}},{tag:"path",attrs:{d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z"}}]},name:"rotate-left",theme:"outlined"},aK=i("887aaf6c"),aQ=u._(aK),aJ=w.forwardRef(function(n,r){return w.createElement(aQ.default,(0,D.default)({},n,{ref:r,icon:aZ}));}),a0={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z"}},{tag:"path",attrs:{d:"M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z"}}]},name:"rotate-right",theme:"outlined"},a1=w.forwardRef(function(n,r){return w.createElement(aQ.default,(0,D.default)({},n,{ref:r,icon:a0}));}),a2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8zM872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"swap",theme:"outlined"},a3=w.forwardRef(function(n,r){return w.createElement(aQ.default,(0,D.default)({},n,{ref:r,icon:a2}));}),a4={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"},a5=w.forwardRef(function(n,r){return w.createElement(aQ.default,(0,D.default)({},n,{ref:r,icon:a4}));}),a6={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"},a8=w.forwardRef(function(n,r){return w.createElement(aQ.default,(0,D.default)({},n,{ref:r,icon:a6}));}),a7=i("43b75ea7"),a9=i("e02d9736"),oe=i("e0c932ec");let ot=n=>({position:n||"absolute",inset:0}),on=n=>{let{iconCls:r,motionDurationSlow:i,paddingXXS:a,marginXXS:o,prefixCls:s,colorTextLightSolid:l}=n;return{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:l,background:new nw.FastColor("#000").setA(.5).toRgbString(),cursor:"pointer",opacity:0,transition:`opacity ${i}`,[`.${s}-mask-info`]:Object.assign(Object.assign({},to.textEllipsis),{padding:`0 ${(0,ti.unit)(a)}`,[r]:{marginInlineEnd:o,svg:{verticalAlign:"baseline"}}})};},or=n=>{let{previewCls:r,modalMaskBg:i,paddingSM:a,marginXL:o,margin:s,paddingLG:l,previewOperationColorDisabled:u,previewOperationHoverColor:c,motionDurationSlow:f,iconCls:d,colorTextLightSolid:h}=n,p=new nw.FastColor(i).setA(.1),m=p.clone().setA(.2);return{[`${r}-footer`]:{position:"fixed",bottom:o,left:{_skip_check_:!0,value:"50%"},display:"flex",flexDirection:"column",alignItems:"center",color:n.previewOperationColor,transform:"translateX(-50%)"},[`${r}-progress`]:{marginBottom:s},[`${r}-close`]:{position:"fixed",top:o,right:{_skip_check_:!0,value:o},display:"flex",color:h,backgroundColor:p.toRgbString(),borderRadius:"50%",padding:a,outline:0,border:0,cursor:"pointer",transition:`all ${f}`,"&:hover":{backgroundColor:m.toRgbString()},[`& > ${d}`]:{fontSize:n.previewOperationSize}},[`${r}-operations`]:{display:"flex",alignItems:"center",padding:`0 ${(0,ti.unit)(l)}`,backgroundColor:p.toRgbString(),borderRadius:100,"&-operation":{marginInlineStart:a,padding:a,cursor:"pointer",transition:`all ${f}`,userSelect:"none",[`&:not(${r}-operations-operation-disabled):hover > ${d}`]:{color:c},"&-disabled":{color:u,cursor:"not-allowed"},"&:first-of-type":{marginInlineStart:0},[`& > ${d}`]:{fontSize:n.previewOperationSize}}}};},oi=n=>{let{modalMaskBg:r,iconCls:i,previewOperationColorDisabled:a,previewCls:o,zIndexPopup:s,motionDurationSlow:l}=n,u=new nw.FastColor(r).setA(.1),c=u.clone().setA(.2);return{[`${o}-switch-left, ${o}-switch-right`]:{position:"fixed",insetBlockStart:"50%",zIndex:n.calc(s).add(1).equal(),display:"flex",alignItems:"center",justifyContent:"center",width:n.imagePreviewSwitchSize,height:n.imagePreviewSwitchSize,marginTop:n.calc(n.imagePreviewSwitchSize).mul(-1).div(2).equal(),color:n.previewOperationColor,background:u.toRgbString(),borderRadius:"50%",transform:"translateY(-50%)",cursor:"pointer",transition:`all ${l}`,userSelect:"none","&:hover":{background:c.toRgbString()},"&-disabled":{"&, &:hover":{color:a,background:"transparent",cursor:"not-allowed",[`> ${i}`]:{cursor:"not-allowed"}}},[`> ${i}`]:{fontSize:n.previewOperationSize}},[`${o}-switch-left`]:{insetInlineStart:n.marginSM},[`${o}-switch-right`]:{insetInlineEnd:n.marginSM}};},oa=n=>{let{motionEaseOut:r,previewCls:i,motionDurationSlow:a,componentCls:o}=n;return[{[`${o}-preview-root`]:{[i]:{height:"100%",textAlign:"center",pointerEvents:"none"},[`${i}-body`]:Object.assign(Object.assign({},ot()),{overflow:"hidden"}),[`${i}-img`]:{maxWidth:"100%",maxHeight:"70%",verticalAlign:"middle",transform:"scale3d(1, 1, 1)",cursor:"grab",transition:`transform ${a} ${r} 0s`,userSelect:"none","&-wrapper":Object.assign(Object.assign({},ot()),{transition:`transform ${a} ${r} 0s`,display:"flex",justifyContent:"center",alignItems:"center","& > *":{pointerEvents:"auto"},"&::before":{display:"inline-block",width:1,height:"50%",marginInlineEnd:-1,content:'""'}})},[`${i}-moving`]:{[`${i}-preview-img`]:{cursor:"grabbing","&-wrapper":{transitionDuration:"0s"}}}}},{[`${o}-preview-root`]:{[`${i}-wrap`]:{zIndex:n.zIndexPopup}}},{[`${o}-preview-operations-wrapper`]:{position:"fixed",zIndex:n.calc(n.zIndexPopup).add(1).equal()},"&":[or(n),oi(n)]}];},oo=n=>{let{componentCls:r}=n;return{[r]:{position:"relative",display:"inline-block",[`${r}-img`]:{width:"100%",height:"auto",verticalAlign:"middle"},[`${r}-img-placeholder`]:{backgroundColor:n.colorBgContainerDisabled,backgroundImage:"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTQuNSAyLjVoLTEzQS41LjUgMCAwIDAgMSAzdjEwYS41LjUgMCAwIDAgLjUuNWgxM2EuNS41IDAgMCAwIC41LS41VjNhLjUuNSAwIDAgMC0uNS0uNXpNNS4yODEgNC43NWExIDEgMCAwIDEgMCAyIDEgMSAwIDAgMSAwLTJ6bTguMDMgNi44M2EuMTI3LjEyNyAwIDAgMS0uMDgxLjAzSDIuNzY5YS4xMjUuMTI1IDAgMCAxLS4wOTYtLjIwN2wyLjY2MS0zLjE1NmEuMTI2LjEyNiAwIDAgMSAuMTc3LS4wMTZsLjAxNi4wMTZMNy4wOCAxMC4wOWwyLjQ3LTIuOTNhLjEyNi4xMjYgMCAwIDEgLjE3Ny0uMDE2bC4wMTUuMDE2IDMuNTg4IDQuMjQ0YS4xMjcuMTI3IDAgMCAxLS4wMi4xNzV6IiBmaWxsPSIjOEM4QzhDIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L3N2Zz4=')",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"30%"},[`${r}-mask`]:Object.assign({},on(n)),[`${r}-mask:hover`]:{opacity:1},[`${r}-placeholder`]:Object.assign({},ot())}};},os=n=>{let{previewCls:r}=n;return{[`${r}-root`]:(0,oe.initZoomMotion)(n,"zoom"),"&":(0,a9.initFadeMotion)(n,!0)};};var ol=(0,tr.genStyleHooks)("Image",n=>{let r=`${n.componentCls}-preview`,i=(0,nE.mergeToken)(n,{previewCls:r,modalMaskBg:new nw.FastColor("#000").setA(.45).toRgbString(),imagePreviewSwitchSize:n.controlHeightLG});return[oo(i),oa(i),(0,a7.genModalMaskStyle)((0,nE.mergeToken)(i,{componentCls:r})),os(i)];},n=>({zIndexPopup:n.zIndexPopupBase+80,previewOperationColor:new nw.FastColor(n.colorTextLightSolid).setA(.65).toRgbString(),previewOperationHoverColor:new nw.FastColor(n.colorTextLightSolid).setA(.85).toRgbString(),previewOperationColorDisabled:new nw.FastColor(n.colorTextLightSolid).setA(.25).toRgbString(),previewOperationSize:1.5*n.fontSizeIcon})),ou=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let oc={rotateLeft:w.createElement(aJ,null),rotateRight:w.createElement(a1,null),zoomIn:w.createElement(a5,null),zoomOut:w.createElement(a8,null),close:w.createElement(aY.default,null),left:w.createElement(e7.default,null),right:w.createElement(te.default,null),flipX:w.createElement(a3,null),flipY:w.createElement(a3,{rotate:90})};var of=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let od=n=>{let{prefixCls:r,preview:i,className:a,rootClassName:o,style:s}=n,l=of(n,["prefixCls","preview","className","rootClassName","style"]),{getPrefixCls:u,getPopupContainer:c,className:f,style:d,preview:h}=(0,eB.useComponentConfig)("image"),[p]=(0,rx.default)("Image"),m=u("image",r),g=u(),v=(0,eH.default)(m),[y,_,b]=ol(m,v),x=(0,L.default)(o,_,b,v),E=(0,L.default)(a,_,f),[S]=(0,eI.useZIndex)("ImagePreview","object"==typeof i?i.zIndex:void 0),T=w.useMemo(()=>{if(!1===i)return i;let n="object"==typeof i?i:{},{getContainer:r,closeIcon:a,rootClassName:o,destroyOnClose:s,destroyOnHidden:l}=n,u=of(n,["getContainer","closeIcon","rootClassName","destroyOnClose","destroyOnHidden"]);return Object.assign(Object.assign({mask:w.createElement("div",{className:`${m}-mask-info`},w.createElement(aW.default,null),null==p?void 0:p.preview),icons:oc},u),{destroyOnClose:null!=l?l:s,rootClassName:(0,L.default)(x,o),getContainer:null!=r?r:c,transitionName:(0,eL.getTransitionName)(g,"zoom",n.transitionName),maskTransitionName:(0,eL.getTransitionName)(g,"fade",n.maskTransitionName),zIndex:S,closeIcon:null!=a?a:null==h?void 0:h.closeIcon});},[i,p,null==h?void 0:h.closeIcon]),A=Object.assign(Object.assign({},d),s);return y(w.createElement(aq.default,Object.assign({prefixCls:m,preview:T,rootClassName:x,className:E,style:A},l)));};od.PreviewGroup=n=>{var{previewPrefixCls:r,preview:i}=n,a=ou(n,["previewPrefixCls","preview"]);let{getPrefixCls:o,direction:s}=w.useContext(eB.ConfigContext),l=o("image",r),u=`${l}-preview`,c=o(),f=(0,eH.default)(l),[d,h,p]=ol(l,f),[m]=(0,eI.useZIndex)("ImagePreview","object"==typeof i?i.zIndex:void 0),g=w.useMemo(()=>Object.assign(Object.assign({},oc),{left:"rtl"===s?w.createElement(te.default,null):w.createElement(e7.default,null),right:"rtl"===s?w.createElement(e7.default,null):w.createElement(te.default,null)}),[s]),v=w.useMemo(()=>{var n;if(!1===i)return i;let r="object"==typeof i?i:{},a=(0,L.default)(h,p,f,null!==(n=r.rootClassName)&&void 0!==n?n:"");return Object.assign(Object.assign({},r),{transitionName:(0,eL.getTransitionName)(c,"zoom",r.transitionName),maskTransitionName:(0,eL.getTransitionName)(c,"fade",r.maskTransitionName),rootClassName:a,zIndex:m});},[i]);return d(w.createElement(aq.default.PreviewGroup,Object.assign({preview:v,previewPrefixCls:u,icons:g},a)));};var oh=w.default.forwardRef(function(n,r){var i=n.text,a=n.mode,o=n.render,s=n.renderFormItem,l=n.fieldProps,u=n.placeholder,c=n.width,f=(0,y.useIntl)(),d=u||f.getMessage("tableForm.inputPlaceholder","\u8BF7\u8F93\u5165");if("read"===a){var h=(0,tw.jsx)(od,(0,g.default)({ref:r,width:c||32,src:i},l));return o?o(i,(0,g.default)({mode:a},l),h):h;}if("edit"===a||"update"===a){var p=(0,tw.jsx)(tF.default,(0,g.default)({ref:r,placeholder:d},l));return s?s(i,(0,g.default)({mode:a},l),p):p;}return null;}),op=w.default.forwardRef(function(n,r){var i=n.border,a=n.children,o=(0,(0,w.useContext)(tb.default.ConfigContext).getPrefixCls)("pro-field-index-column"),s=(0,tA.useStyle)("IndexColumn",function(){return(0,em.default)({},".".concat(o),{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"18px",height:"18px","&-border":{color:"#fff",fontSize:"12px",lineHeight:"12px",backgroundColor:"#314659",borderRadius:"9px","&.top-three":{backgroundColor:"#979797"}}});}),l=s.wrapSSR,u=s.hashId;return l((0,tw.jsx)("div",{ref:r,className:(0,L.default)(o,u,(0,em.default)((0,em.default)({},"".concat(o,"-border"),void 0!==i&&i),"top-three",a>3)),children:a}));});i("5476660b"),i("6ce1d7d9");var om=i("4175825c"),og=["contentRender","numberFormatOptions","numberPopoverRender","open"],ov=["text","mode","render","renderFormItem","fieldProps","proFieldKey","plain","valueEnum","placeholder","locale","customSymbol","numberFormatOptions","numberPopoverRender"],oy=new Intl.NumberFormat("zh-Hans-CN",{currency:"CNY",style:"currency"}),o_={default:oy,"zh-Hans-CN":{currency:"CNY",style:"currency"},"en-US":{style:"currency",currency:"USD"},"ru-RU":{style:"currency",currency:"RUB"},"ms-MY":{style:"currency",currency:"MYR"},"sr-RS":{style:"currency",currency:"RSD"},"pt-BR":{style:"currency",currency:"BRL"}},ob=function(n,r,i,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=null==r?void 0:r.toString().replaceAll(",","");if("string"==typeof s){var l=Number(s);if(Number.isNaN(l))return s;s=l;}if(!s&&0!==s)return"";var u=!1;try{u=!1!==n&&Intl.NumberFormat.supportedLocalesOf([n.replace("_","-")],{localeMatcher:"lookup"}).length>0;}catch(n){}try{var c=new Intl.NumberFormat(u&&!1!==n&&(null==n?void 0:n.replace("_","-"))||"zh-Hans-CN",(0,g.default)((0,g.default)({},o_[n||"zh-Hans-CN"]||oy),{},{maximumFractionDigits:i},a)).format(s),f=function(n){var r=n.match(/\d+/);if(!r)return n;var i=r[0];return n.slice(n.indexOf(i));}(c),d=(0,T.default)(c||"",1)[0];if(["+","-"].includes(d))return"".concat(o||"").concat(d).concat(f);return"".concat(o||"").concat(f);}catch(n){return s;}},ox=w.default.forwardRef(function(n,r){var i=n.contentRender,a=(n.numberFormatOptions,n.numberPopoverRender,n.open),o=(0,d.default)(n,og),s=(0,G.default)(function(){return o.defaultValue;},{value:o.value,onChange:o.onChange}),l=(0,T.default)(s,2),u=l[0],c=l[1],f=null==i?void 0:i((0,g.default)((0,g.default)({},o),{},{value:u})),h=(0,om.openVisibleCompatible)(!!f&&a);return(0,tw.jsx)(tW.default,(0,g.default)((0,g.default)({placement:"topLeft"},h),{},{trigger:["focus","click"],content:f,getPopupContainer:function(n){return(null==n?void 0:n.parentElement)||document.body;},children:(0,tw.jsx)(nM,(0,g.default)((0,g.default)({ref:r},o),{},{value:u,onChange:c}))}));}),oE=w.default.forwardRef(function(n,r){var i,a=n.text,o=n.mode,s=n.render,l=n.renderFormItem,u=n.fieldProps,c=(n.proFieldKey,n.plain,n.valueEnum,n.placeholder),f=n.locale,h=n.customSymbol,p=void 0===h?u.customSymbol:h,m=n.numberFormatOptions,v=void 0===m?null==u?void 0:u.numberFormatOptions:m,_=n.numberPopoverRender,b=void 0===_?(null==u?void 0:u.numberPopoverRender)||!1:_,x=(0,d.default)(n,ov),E=null!==(i=null==u?void 0:u.precision)&&void 0!==i?i:2,S=(0,y.useIntl)();f&&y.intlMap[f]&&(S=y.intlMap[f]);var A=c||S.getMessage("tableForm.inputPlaceholder","\u8BF7\u8F93\u5165"),C=(0,w.useMemo)(function(){return p||(!1!==x.moneySymbol&&!1!==u.moneySymbol?S.getMessage("moneySymbol","\xa5"):void 0);},[p,u.moneySymbol,S,x.moneySymbol]),O=(0,w.useCallback)(function(n){var r=RegExp("\\B(?=(\\d{".concat(3+Math.max(E-2,0),"})+(?!\\d))"),"g"),i=String(n).split("."),a=(0,T.default)(i,2),o=a[0],s=a[1],l=o.replace(r,","),u="";return s&&E>0&&(u=".".concat(s.slice(0,void 0===E?2:E))),"".concat(l).concat(u);},[E]);if("read"===o){var M=(0,tw.jsx)("span",{ref:r,children:ob(f||!1,a,E,null!=v?v:u.numberFormatOptions,C)});return s?s(a,(0,g.default)({mode:o},u),M):M;}if("edit"===o||"update"===o){var R=(0,tw.jsx)(ox,(0,g.default)((0,g.default)({contentRender:function(n){if(!1===b||!n.value)return null;var r=ob(C||f||!1,"".concat(O(n.value)),E,(0,g.default)((0,g.default)({},v),{},{notation:"compact"}),C);return"function"==typeof b?null==b?void 0:b(n,r):r;},ref:r,precision:E,formatter:function(n){return n&&C?"".concat(C," ").concat(O(n)):null==n?void 0:n.toString();},parser:function(n){return C&&n?n.replace(RegExp("\\".concat(C,"\\s?|(,*)"),"g"),""):n;},placeholder:A},(0,ek.default)(u,["numberFormatOptions","precision","numberPopoverRender","customSymbol","moneySymbol","visible","open"])),{},{onBlur:u.onBlur?function(n){var r,i=n.target.value;C&&i&&(i=i.replace(RegExp("\\".concat(C,"\\s?|(,*)"),"g"),"")),null===(r=u.onBlur)||void 0===r||r.call(u,i);}:void 0}));return l?l(a,(0,g.default)({mode:o},u),R):R;}return null;});i("af953eb8");var ow=function(n){return n.map(function(n,r){var i;return w.default.isValidElement(n)?w.default.cloneElement(n,(0,g.default)((0,g.default)({key:r},null==n?void 0:n.props),{},{style:(0,g.default)({},null==n||null===(i=n.props)||void 0===i?void 0:i.style)})):(0,tw.jsx)(w.default.Fragment,{children:n},r);});},oS=w.default.forwardRef(function(n,r){var i=n.text,a=n.mode,o=n.render,s=n.fieldProps,l=(0,(0,w.useContext)(tb.default.ConfigContext).getPrefixCls)("pro-field-option"),u=tA.proTheme.useToken().token;if((0,w.useImperativeHandle)(r,function(){return{};}),o){var c=o(i,(0,g.default)({mode:a},s),(0,tw.jsx)(tw.Fragment,{}));return c&&!((null==c?void 0:c.length)<1)&&Array.isArray(c)?(0,tw.jsx)("div",{style:{display:"flex",gap:u.margin,alignItems:"center"},className:l,children:ow(c)}):null;}return i&&Array.isArray(i)?(0,tw.jsx)("div",{style:{display:"flex",gap:u.margin,alignItems:"center"},className:l,children:ow(i)}):w.default.isValidElement(i)?i:null;}),oT=i("1e27b7a9"),oA=u._(oT),oC=["text","mode","render","renderFormItem","fieldProps","proFieldKey"],oO=w.default.forwardRef(function(n,r){var i=n.text,a=n.mode,o=n.render,s=n.renderFormItem,l=n.fieldProps,u=(n.proFieldKey,(0,d.default)(n,oC)),c=(0,y.useIntl)(),f=(0,G.default)(function(){return u.open||u.visible||!1;},{value:u.open||u.visible,onChange:u.onOpenChange||u.onVisible}),h=(0,T.default)(f,2),p=h[0],m=h[1];if("read"===a){var v=(0,tw.jsx)(tw.Fragment,{children:"-"});return(i&&(v=(0,tw.jsxs)(aj.default,{children:[(0,tw.jsx)("span",{ref:r,children:p?i:"********"}),(0,tw.jsx)("a",{onClick:function(){return m(!p);},children:p?(0,tw.jsx)(aW.default,{}):(0,tw.jsx)(oA.default,{})})]})),o)?o(i,(0,g.default)({mode:a},l),v):v;}if("edit"===a||"update"===a){var _=(0,tw.jsx)(tF.default.Password,(0,g.default)({placeholder:c.getMessage("tableForm.inputPlaceholder","\u8BF7\u8F93\u5165"),ref:r},l));return s?s(i,(0,g.default)({mode:a},l),_):_;}return null;});function oM(n){return"symbol"===(0,p.default)(n)||n instanceof Symbol?NaN:Number(n);}var oR=w.default.forwardRef(function(n,r){var i=n.text,a=n.prefix,o=n.precision,s=n.suffix,l=void 0===s?"%":s,u=n.mode,c=n.showColor,f=n.render,d=n.renderFormItem,h=n.fieldProps,p=n.placeholder,m=n.showSymbol,v=(0,y.useIntl)(),_=p||v.getMessage("tableForm.inputPlaceholder","\u8BF7\u8F93\u5165"),b=(0,w.useMemo)(function(){return"string"==typeof i&&i.includes("%")?oM(i.replace("%","")):oM(i);},[i]),x=(0,w.useMemo)(function(){return"function"==typeof m?null==m?void 0:m(i):m;},[m,i]);if("read"===u){var E=(0,tw.jsxs)("span",{style:void 0!==c&&c?{color:0===b?"#595959":b>0?"#ff4d4f":"#52c41a"}:{},ref:r,children:[a&&(0,tw.jsx)("span",{children:a}),x&&(0,tw.jsxs)(w.Fragment,{children:[0===b?null:b>0?"+":"-"," "]}),function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return r>=0?null==n?void 0:n.toFixed(r):n;}(Math.abs(b),o),l&&l]});return f?f(i,(0,g.default)((0,g.default)({mode:u},h),{},{prefix:a,precision:o,showSymbol:x,suffix:l}),E):E;}if("edit"===u||"update"===u){var S=(0,tw.jsx)(nM,(0,g.default)({ref:r,formatter:function(n){return n&&a?"".concat(a," ").concat(n).replace(/\B(?=(\d{3})+(?!\d)$)/g,","):n;},parser:function(n){return n?n.replace(/.*\s|,/g,""):"";},placeholder:_},h));return d?d(i,(0,g.default)({mode:u},h),S):S;}return null;}),oP=i("bfbbdf71"),ok=u._(oP);i("423cd7e3");var oI=w.default.forwardRef(function(n,r){var i=n.text,a=n.mode,o=n.render,s=n.plain,l=n.renderFormItem,u=n.fieldProps,c=n.placeholder,f=(0,y.useIntl)(),d=c||f.getMessage("tableForm.inputPlaceholder","\u8BF7\u8F93\u5165"),h=(0,w.useMemo)(function(){return"string"==typeof i&&i.includes("%")?oM(i.replace("%","")):oM(i);},[i]);if("read"===a){var p=(0,tw.jsx)(ok.default,(0,g.default)({ref:r,size:"small",style:{minWidth:100,maxWidth:320},percent:h,steps:s?10:void 0,status:100===h?"success":h<0?"exception":h<100?"active":"normal"},u));return o?o(h,(0,g.default)({mode:a},u),p):p;}if("edit"===a||"update"===a){var m=(0,tw.jsx)(nM,(0,g.default)({ref:r,placeholder:d},u));return l?l(i,(0,g.default)({mode:a},u),m):m;}return null;}),oL=i("cd4d52a4"),oN=u._(oL);i("5fefebf6");var oD=["radioType","renderFormItem","mode","render"],oF=w.default.forwardRef(function(n,r){var i=n.radioType,a=n.renderFormItem,o=n.mode,s=n.render,l=(0,d.default)(n,oD),u=(0,(0,w.useContext)(tb.default.ConfigContext).getPrefixCls)("pro-field-radio"),c=(0,tE.useFieldFetchData)(l),f=(0,T.default)(c,3),h=f[0],p=f[1],m=f[2],v=(0,w.useRef)(),y=null===(E=tR.default.Item)||void 0===E||null===(S=E.useStatus)||void 0===S?void 0:S.call(E);(0,w.useImperativeHandle)(r,function(){return(0,g.default)((0,g.default)({},v.current||{}),{},{fetchData:function(n){return m(n);}});},[m]);var _=(0,tA.useStyle)("FieldRadioRadio",function(n){return(0,em.default)((0,em.default)((0,em.default)({},".".concat(u,"-error"),{span:{color:n.colorError}}),".".concat(u,"-warning"),{span:{color:n.colorWarning}}),".".concat(u,"-vertical"),(0,em.default)({},"".concat(n.antCls,"-radio-wrapper"),{display:"flex",marginInlineEnd:0}));}),b=_.wrapSSR,x=_.hashId;if(h)return(0,tw.jsx)(tk.default,{size:"small"});if("read"===o){var E,S,A,C=null!=p&&p.length?null==p?void 0:p.reduce(function(n,r){var i;return(0,g.default)((0,g.default)({},n),{},(0,em.default)({},null!==(i=r.value)&&void 0!==i?i:"",r.label));},{}):void 0,O=(0,tw.jsx)(tw.Fragment,{children:(0,R.proFieldParsingText)(l.text,(0,R.objectToMap)(l.valueEnum||C))});return s?null!==(A=s(l.text,(0,g.default)({mode:o},l.fieldProps),O))&&void 0!==A?A:null:O;}if("edit"===o){var M,P,k=b((0,tw.jsx)(oN.default.Group,(0,g.default)((0,g.default)({ref:v,optionType:i},l.fieldProps),{},{className:(0,L.default)(null===(M=l.fieldProps)||void 0===M?void 0:M.className,(0,em.default)((0,em.default)({},"".concat(u,"-error"),(null==y?void 0:y.status)==="error"),"".concat(u,"-warning"),(null==y?void 0:y.status)==="warning"),x,"".concat(u,"-").concat(l.fieldProps.layout||"horizontal")),options:p})));return a?null!==(P=a(l.text,(0,g.default)((0,g.default)({mode:o},l.fieldProps),{},{options:p,loading:h}),k))&&void 0!==P?P:null:k;}return null;}),oB=w.default.forwardRef(function(n,r){var i=n.text,a=n.mode,o=n.light,s=n.label,l=n.format,u=n.render,c=n.picker,f=n.renderFormItem,d=n.plain,h=n.showTime,p=n.lightLabel,m=n.bordered,v=n.fieldProps,_=(0,y.useIntl)(),b=Array.isArray(i)?i:[],x=(0,T.default)(b,2),E=x[0],S=x[1],A=w.default.useState(!1),C=(0,T.default)(A,2),R=C[0],P=C[1],k=(0,w.useCallback)(function(n){if("function"==typeof(null==v?void 0:v.format)){var r;return null==v||null===(r=v.format)||void 0===r?void 0:r.call(v,n);}return(null==v?void 0:v.format)||l||"YYYY-MM-DD";},[v,l]),I=E?(0,ak.default)(E).format(k((0,ak.default)(E))):"",L=S?(0,ak.default)(S).format(k((0,ak.default)(S))):"";if("read"===a){var N=(0,tw.jsxs)("div",{ref:r,style:{display:"flex",flexWrap:"wrap",gap:8,alignItems:"center"},children:[(0,tw.jsx)("div",{children:I||"-"}),(0,tw.jsx)("div",{children:L||"-"})]});return u?u(i,(0,g.default)({mode:a},v),(0,tw.jsx)("span",{children:N})):N;}if("edit"===a||"update"===a){var D,F,B=(0,aO.parseValueToDay)(v.value);return(D=o?(0,tw.jsx)(O.FieldLabel,{label:s,onClick:function(){var n;null==v||null===(n=v.onOpenChange)||void 0===n||n.call(v,!0),P(!0);},style:B?{paddingInlineEnd:0}:void 0,disabled:v.disabled,value:B||R?(0,tw.jsx)(aR.default.RangePicker,(0,g.default)((0,g.default)((0,g.default)({picker:c,showTime:h,format:l},(0,M.compatibleBorder)(!1)),v),{},{placeholder:null!==(F=v.placeholder)&&void 0!==F?F:[_.getMessage("tableForm.selectPlaceholder","\u8BF7\u9009\u62E9"),_.getMessage("tableForm.selectPlaceholder","\u8BF7\u9009\u62E9")],onClear:function(){var n;P(!1),null==v||null===(n=v.onClear)||void 0===n||n.call(v);},value:B,onOpenChange:function(n){var r;B&&P(n),null==v||null===(r=v.onOpenChange)||void 0===r||r.call(v,n);}})):null,allowClear:!1,bordered:m,ref:p,downIcon:!B&&!R&&void 0}):(0,tw.jsx)(aR.default.RangePicker,(0,g.default)((0,g.default)((0,g.default)({ref:r,format:l,showTime:h,placeholder:[_.getMessage("tableForm.selectPlaceholder","\u8BF7\u9009\u62E9"),_.getMessage("tableForm.selectPlaceholder","\u8BF7\u9009\u62E9")]},(0,M.compatibleBorder)(void 0===d||!d)),v),{},{value:B})),f)?f(i,(0,g.default)({mode:a},v),D):D;}return null;}),oj={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"},oz=w.forwardRef(function(n,r){return w.createElement(aQ.default,(0,D.default)({},n,{ref:r,icon:oj}));}),oU=w.default.forwardRef(function(n,r){var i=n.disabled,a=n.prefixCls,o=n.character,s=n.characterRender,l=n.index,u=n.count,c=n.value,f=n.allowHalf,d=n.focused,h=n.onHover,p=n.onClick,m=l+1,g=new Set([a]);0===c&&0===l&&d?g.add("".concat(a,"-focused")):f&&c+.5>=m&&c<m?(g.add("".concat(a,"-half")),g.add("".concat(a,"-active")),d&&g.add("".concat(a,"-focused"))):(m<=c?g.add("".concat(a,"-full")):g.add("".concat(a,"-zero")),m===c&&d&&g.add("".concat(a,"-focused")));var v="function"==typeof o?o(n):o,y=w.default.createElement("li",{className:(0,L.default)(Array.from(g)),ref:r},w.default.createElement("div",{onClick:i?null:function(n){p(n,l);},onKeyDown:i?null:function(n){n.keyCode===eE.default.ENTER&&p(n,l);},onMouseMove:i?null:function(n){h(n,l);},role:"radio","aria-checked":c>l?"true":"false","aria-posinset":l+1,"aria-setsize":u,tabIndex:i?-1:0},w.default.createElement("div",{className:"".concat(a,"-first")},v),w.default.createElement("div",{className:"".concat(a,"-second")},v)));return s&&(y=s(y,n)),y;}),oV=["prefixCls","className","defaultValue","value","count","allowHalf","allowClear","keyboard","character","characterRender","disabled","direction","tabIndex","autoFocus","onHoverChange","onChange","onFocus","onBlur","onKeyDown","onMouseLeave"],oG=w.default.forwardRef(function(n,r){var i,a=n.prefixCls,o=void 0===a?"rc-rate":a,s=n.className,l=n.defaultValue,u=n.value,c=n.count,f=void 0===c?5:c,h=n.allowHalf,p=void 0!==h&&h,m=n.allowClear,g=void 0===m||m,v=n.keyboard,y=void 0===v||v,_=n.character,b=void 0===_?"\u2605":_,x=n.characterRender,E=n.disabled,S=n.direction,A=void 0===S?"ltr":S,C=n.tabIndex,O=n.autoFocus,M=n.onHoverChange,R=n.onChange,P=n.onFocus,k=n.onBlur,I=n.onKeyDown,N=n.onMouseLeave,F=(0,d.default)(n,oV),B=(i=w.useRef({}),[function(n){return i.current[n];},function(n){return function(r){i.current[n]=r;};}]),j=(0,T.default)(B,2),z=j[0],U=j[1],V=w.default.useRef(null),H=function(){if(!E){var n;null===(n=V.current)||void 0===n||n.focus();}};w.default.useImperativeHandle(r,function(){return{focus:H,blur:function(){if(!E){var n;null===(n=V.current)||void 0===n||n.blur();}}};});var W=(0,G.default)(l||0,{value:u}),X=(0,T.default)(W,2),q=X[0],$=X[1],Y=(0,G.default)(null),Z=(0,T.default)(Y,2),K=Z[0],Q=Z[1],J=function(n,r){var i="rtl"===A,a=n+1;if(p){var o,s,l,u,c,f,d,h,m,g=z(n),v=(u=(l=g.ownerDocument).body,c=l&&l.documentElement,o=(f=g.getBoundingClientRect()).left,s=f.top,d={left:o-=c.clientLeft||u.clientLeft||0,top:s-=c.clientTop||u.clientTop||0},m=(h=g.ownerDocument).defaultView||h.parentWindow,d.left+=function(n){var r=n.pageXOffset,i="scrollLeft";if("number"!=typeof r){var a=n.document;"number"!=typeof(r=a.documentElement[i])&&(r=a.body[i]);}return r;}(m),d.left),y=g.clientWidth;i&&r-v>y/2?a-=.5:!i&&r-v<y/2&&(a-=.5);}return a;},ee=function(n){$(n),null==R||R(n);},et=w.default.useState(!1),en=(0,T.default)(et,2),er=en[0],ei=en[1],ea=w.default.useState(null),eo=(0,T.default)(ea,2),es=eo[0],el=eo[1],eu=function(n,r){var i=J(r,n.pageX);i!==K&&(el(i),Q(null)),null==M||M(i);},ec=function(n){E||(el(null),Q(null),null==M||M(void 0)),n&&(null==N||N(n));},ef=function(n,r){var i=J(r,n.pageX),a=!1;g&&(a=i===q),ec(),ee(a?0:i),Q(a?i:null);};w.default.useEffect(function(){O&&!E&&H();},[]);var ed=Array(f).fill(0).map(function(n,r){return w.default.createElement(oU,{ref:U(r),index:r,count:f,disabled:E,prefixCls:"".concat(o,"-star"),allowHalf:p,value:null===es?q:es,onClick:ef,onHover:eu,key:n||r,character:b,characterRender:x,focused:er});}),eh=(0,L.default)(o,s,(0,em.default)((0,em.default)({},"".concat(o,"-disabled"),E),"".concat(o,"-rtl"),"rtl"===A));return w.default.createElement("ul",(0,D.default)({className:eh,onMouseLeave:ec,tabIndex:E?-1:void 0===C?0:C,onFocus:E?null:function(){ei(!0),null==P||P();},onBlur:E?null:function(){ei(!1),null==k||k();},onKeyDown:E?null:function(n){var r=n.keyCode,i="rtl"===A,a=p?.5:1;y&&(r===eE.default.RIGHT&&q<f&&!i?(ee(q+a),n.preventDefault()):r===eE.default.LEFT&&q>0&&!i?(ee(q-a),n.preventDefault()):r===eE.default.RIGHT&&q>0&&i?(ee(q-a),n.preventDefault()):r===eE.default.LEFT&&q<f&&i&&(ee(q+a),n.preventDefault())),null==I||I(n);},ref:V},(0,r_.default)(F,{aria:!0,data:!0,attr:!0})),ed);}),oH=i("a3be40a8"),oW=u._(oH),oX=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let oq=w.forwardRef((n,r)=>{let{prefixCls:i,className:a,rootClassName:o,style:s,tooltips:l,character:u=w.createElement(oz,null),disabled:c}=n,f=oX(n,["prefixCls","className","rootClassName","style","tooltips","character","disabled"]),{getPrefixCls:d,direction:h,rate:p}=w.useContext(eB.ConfigContext),m=d("rate",i),[g,v,y]=(0,oW.default)(m),_=Object.assign(Object.assign({},null==p?void 0:p.style),s),b=w.useContext(eV.default);return g(w.createElement(oG,Object.assign({ref:r,character:u,characterRender:(n,{index:r})=>l?w.createElement(n8.default,{title:l[r]},n):n,disabled:null!=c?c:b},f,{className:(0,L.default)(a,o,v,y,null==p?void 0:p.className),style:_,prefixCls:m,direction:h})));});var o$=w.default.forwardRef(function(n,r){var i=n.text,a=n.mode,o=n.render,s=n.renderFormItem,l=n.fieldProps;if("read"===a){var u=(0,tw.jsx)(oq,(0,g.default)((0,g.default)({allowHalf:!0,disabled:!0,ref:r},l),{},{value:i}));return o?o(i,(0,g.default)({mode:a},l),(0,tw.jsx)(tw.Fragment,{children:u})):u;}if("edit"===a||"update"===a){var c=(0,tw.jsx)(oq,(0,g.default)({allowHalf:!0,ref:r},l));return s?s(i,(0,g.default)({mode:a},l),c):c;}return null;}),oY=w.default.forwardRef(function(n,r){var i=n.text,a=n.mode,o=n.render,s=n.renderFormItem,l=n.fieldProps,u=n.placeholder,c=(0,y.useIntl)(),f=u||c.getMessage("tableForm.inputPlaceholder","\u8BF7\u8F93\u5165");if("read"===a){var d,h,p,m,v,_,b,x=(d=Number(i),h="",p=!1,d<0&&(d=-d,p=!0),m=Math.floor(d/86400),v=Math.floor(d/3600%24),_=Math.floor(d/60%60),b=Math.floor(d%60),h="".concat(b,"\u79D2"),_>0&&(h="".concat(_,"\u5206\u949F").concat(h)),v>0&&(h="".concat(v,"\u5C0F\u65F6").concat(h)),m>0&&(h="".concat(m,"\u5929").concat(h)),p&&(h+="\u524D"),h),E=(0,tw.jsx)("span",{ref:r,children:x});return o?o(i,(0,g.default)({mode:a},l),E):E;}if("edit"===a||"update"===a){var w=(0,tw.jsx)(nM,(0,g.default)({ref:r,min:0,style:{width:"100%"},placeholder:f},l));return s?s(i,(0,g.default)({mode:a},l),w):w;}return null;});i("735adc77"),i("4f4b6da4");var oZ=["mode","render","renderFormItem","fieldProps","emptyText"],oK=w.default.forwardRef(function(n,r){var i=n.mode,a=n.render,o=n.renderFormItem,s=n.fieldProps,l=n.emptyText,u=(0,d.default)(n,oZ),c=(0,w.useRef)(),f=(0,tE.useFieldFetchData)(n),h=(0,T.default)(f,3),p=h[0],m=h[1],v=h[2];if((0,w.useImperativeHandle)(r,function(){return(0,g.default)((0,g.default)({},c.current||{}),{},{fetchData:function(n){return v(n);}});},[v]),p)return(0,tw.jsx)(tk.default,{size:"small"});if("read"===i){var y,_=null!=m&&m.length?null==m?void 0:m.reduce(function(n,r){var i;return(0,g.default)((0,g.default)({},n),{},(0,em.default)({},null!==(i=r.value)&&void 0!==i?i:"",r.label));},{}):void 0,b=(0,tw.jsx)(tw.Fragment,{children:(0,R.proFieldParsingText)(u.text,(0,R.objectToMap)(u.valueEnum||_))});return a?null!==(y=a(u.text,(0,g.default)({mode:i},s),(0,tw.jsx)(tw.Fragment,{children:b})))&&void 0!==y?y:void 0===l?"-":l:b;}if("edit"===i||"update"===i){var x=(0,tw.jsx)(t0.default,(0,g.default)((0,g.default)({ref:c},(0,ek.default)(s||{},["allowClear"])),{},{options:m}));return o?o(u.text,(0,g.default)((0,g.default)({mode:i},s),{},{options:m,loading:p}),x):x;}return null;}),oQ=w.default.forwardRef(function(n,r){var i=n.text,a=n.mode,o=n.render,s=n.renderFormItem,l=n.fieldProps;if("read"===a)return o?o(i,(0,g.default)({mode:a},l),(0,tw.jsx)(tw.Fragment,{children:i})):(0,tw.jsx)(tw.Fragment,{children:i});if("edit"===a||"update"===a){var u=(0,tw.jsx)(ro,(0,g.default)((0,g.default)({ref:r},l),{},{style:(0,g.default)({minWidth:120},null==l?void 0:l.style)}));return s?s(i,(0,g.default)({mode:a},l),u):u;}return null;}),oJ=i("7e68252e"),o0=u._(oJ);i("1eef879c");var o1=w.default.forwardRef(function(n,r){var i=n.text,a=n.mode,o=n.render,s=n.light,l=n.label,u=n.renderFormItem,c=n.fieldProps,f=(0,y.useIntl)(),d=(0,w.useMemo)(function(){var n,r;return null==i||"".concat(i).length<1?"-":i?null!==(n=null==c?void 0:c.checkedChildren)&&void 0!==n?n:f.getMessage("switch.open","\u6253\u5F00"):null!==(r=null==c?void 0:c.unCheckedChildren)&&void 0!==r?r:f.getMessage("switch.close","\u5173\u95ED");},[null==c?void 0:c.checkedChildren,null==c?void 0:c.unCheckedChildren,i]);if("read"===a)return o?o(i,(0,g.default)({mode:a},c),(0,tw.jsx)(tw.Fragment,{children:d})):null!=d?d:"-";if("edit"===a||"update"===a){var h,p=(0,tw.jsx)(o0.default,(0,g.default)((0,g.default)({ref:r,size:s?"small":void 0},(0,ek.default)(c,["value"])),{},{checked:null!==(h=null==c?void 0:c.checked)&&void 0!==h?h:null==c?void 0:c.value}));if(s){var m=c.disabled,v=c.bordered;return(0,tw.jsx)(O.FieldLabel,{label:l,disabled:m,bordered:v,downIcon:!1,value:(0,tw.jsx)("div",{style:{paddingLeft:8},children:p}),allowClear:!1});}return u?u(i,(0,g.default)({mode:a},c),p):p;}return null;}),o2=w.default.forwardRef(function(n,r){var i=n.text,a=n.mode,o=n.render,s=n.renderFormItem,l=n.fieldProps,u=n.emptyText,c=void 0===u?"-":u,f=l||{},d=f.autoFocus,h=f.prefix,p=f.suffix,m=(0,y.useIntl)(),v=(0,w.useRef)();if((0,w.useImperativeHandle)(r,function(){return v.current;},[]),(0,w.useEffect)(function(){if(d){var n;null===(n=v.current)||void 0===n||n.focus();}},[d]),"read"===a){var _,b=(0,tw.jsxs)(tw.Fragment,{children:[void 0===h?"":h,null!=i?i:c,void 0===p?"":p]});return o?null!==(_=o(i,(0,g.default)({mode:a},l),b))&&void 0!==_?_:c:b;}if("edit"===a||"update"===a){var x=m.getMessage("tableForm.inputPlaceholder","\u8BF7\u8F93\u5165"),E=(0,tw.jsx)(tF.default,(0,g.default)({ref:v,placeholder:x,allowClear:!0},l));return s?s(i,(0,g.default)({mode:a},l),E):E;}return null;}),o3=w.default.forwardRef(function(n,r){var i=n.text,a=n.fieldProps,o=(0,(0,w.useContext)(tb.default.ConfigContext).getPrefixCls)("pro-field-readonly"),s="".concat(o,"-textarea"),l=(0,tA.useStyle)("TextArea",function(){return(0,em.default)({},".".concat(s),{display:"inline-block",lineHeight:"1.5715",maxWidth:"100%",whiteSpace:"pre-wrap"});}),u=l.wrapSSR,c=l.hashId;return u((0,tw.jsx)("span",(0,g.default)((0,g.default)({ref:r,className:(0,L.default)(c,o,s)},(0,ek.default)(a,["autoSize","classNames","styles"])),{},{children:null!=i?i:"-"})));}),o4=w.default.forwardRef(function(n,r){var i=n.text,a=n.mode,o=n.render,s=n.renderFormItem,l=n.fieldProps,u=(0,y.useIntl)();if("read"===a){var c=(0,tw.jsx)(o3,(0,g.default)((0,g.default)({},n),{},{ref:r}));return o?o(i,(0,g.default)({mode:a},(0,ek.default)(l,["showCount"])),c):c;}if("edit"===a||"update"===a){var f=(0,tw.jsx)(tF.default.TextArea,(0,g.default)({ref:r,rows:3,onKeyPress:function(n){"Enter"===n.key&&n.stopPropagation();},placeholder:u.getMessage("tableForm.inputPlaceholder","\u8BF7\u8F93\u5165")},l));return s?s(i,(0,g.default)({mode:a},l),f):f;}return null;}),o5=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let{TimePicker:o6,RangePicker:o8}=aR.default,o7=w.forwardRef((n,r)=>w.createElement(o8,Object.assign({},n,{picker:"time",mode:void 0,ref:r}))),o9=w.forwardRef((n,r)=>{var{addon:i,renderExtraFooter:a,variant:o,bordered:s}=n,l=o5(n,["addon","renderExtraFooter","variant","bordered"]);let[u]=(0,eY.default)("timePicker",o,s),c=w.useMemo(()=>a||i||void 0,[i,a]);return w.createElement(o6,Object.assign({},l,{mode:void 0,ref:r,renderExtraFooter:c,variant:u}));}),se=(0,eD.default)(o9,"popupAlign",void 0,"picker");o9._InternalPanelDoNotUseOrYouWillBeFired=se,o9.RangePicker=o7,o9._InternalPanelDoNotUseOrYouWillBeFired=se;var st=w.default.forwardRef(function(n,r){var i=n.text,a=n.light,o=n.label,s=n.mode,l=n.lightLabel,u=n.format,c=n.render,f=n.renderFormItem,d=n.plain,h=n.fieldProps,p=(0,y.useIntl)(),m=(0,w.useState)(!1),v=(0,T.default)(m,2),_=v[0],b=v[1],x=(null==h?void 0:h.format)||u||"HH:mm:ss",E=Array.isArray(i)?i:[],S=(0,T.default)(E,2),A=S[0],C=S[1],R=ak.default.isDayjs(A)||"number"==typeof A,P=ak.default.isDayjs(C)||"number"==typeof C,k=A?(0,ak.default)(A,R?void 0:x).format(x):"",I=C?(0,ak.default)(C,P?void 0:x).format(x):"";if("read"===s){var L=(0,tw.jsxs)("div",{ref:r,children:[(0,tw.jsx)("div",{children:k||"-"}),(0,tw.jsx)("div",{children:I||"-"})]});return c?c(i,(0,g.default)({mode:s},h),(0,tw.jsx)("span",{children:L})):L;}if("edit"===s||"update"===s){var N,D=(0,aO.parseValueToDay)(h.value,x);if(a){var F=h.disabled,B=h.placeholder,j=void 0===B?[p.getMessage("tableForm.selectPlaceholder","\u8BF7\u9009\u62E9"),p.getMessage("tableForm.selectPlaceholder","\u8BF7\u9009\u62E9")]:B;N=(0,tw.jsx)(O.FieldLabel,{onClick:function(){var n;null==h||null===(n=h.onOpenChange)||void 0===n||n.call(h,!0),b(!0);},style:D?{paddingInlineEnd:0}:void 0,label:o,disabled:F,placeholder:j,value:D||_?(0,tw.jsx)(o9.RangePicker,(0,g.default)((0,g.default)((0,g.default)({},(0,M.compatibleBorder)(!1)),{},{format:u,ref:r},h),{},{placeholder:j,value:D,onOpenChange:function(n){var r;b(n),null==h||null===(r=h.onOpenChange)||void 0===r||r.call(h,n);},open:_})):null,downIcon:!D&&!_&&void 0,allowClear:!1,ref:l});}else N=(0,tw.jsx)(o9.RangePicker,(0,g.default)((0,g.default)((0,g.default)({ref:r,format:u},(0,M.compatibleBorder)(void 0===d||!d)),h),{},{value:D}));return f?f(i,(0,g.default)({mode:s},h),N):N;}return null;}),sn=w.default.forwardRef(function(n,r){var i=n.text,a=n.mode,o=n.light,s=n.label,l=n.format,u=n.render,c=n.renderFormItem,f=n.plain,d=n.fieldProps,h=n.lightLabel,p=(0,w.useState)(!1),m=(0,T.default)(p,2),v=m[0],_=m[1],b=(0,y.useIntl)(),x=(null==d?void 0:d.format)||l||"HH:mm:ss",E=ak.default.isDayjs(i)||"number"==typeof i;if("read"===a){var S=(0,tw.jsx)("span",{ref:r,children:i?(0,ak.default)(i,E?void 0:x).format(x):"-"});return u?u(i,(0,g.default)({mode:a},d),(0,tw.jsx)("span",{children:S})):S;}if("edit"===a||"update"===a){var A,C,R=d.disabled,P=d.value,k=(0,aO.parseValueToDay)(P,x);return(A=o?(0,tw.jsx)(O.FieldLabel,{onClick:function(){var n;null==d||null===(n=d.onOpenChange)||void 0===n||n.call(d,!0),_(!0);},style:k?{paddingInlineEnd:0}:void 0,label:s,disabled:R,value:k||v?(0,tw.jsx)(o9,(0,g.default)((0,g.default)((0,g.default)({},(0,M.compatibleBorder)(!1)),{},{format:l,ref:r},d),{},{placeholder:null!==(C=d.placeholder)&&void 0!==C?C:b.getMessage("tableForm.selectPlaceholder","\u8BF7\u9009\u62E9"),value:k,onOpenChange:function(n){var r;_(n),null==d||null===(r=d.onOpenChange)||void 0===r||r.call(d,n);},open:v})):null,downIcon:!k&&!v&&void 0,allowClear:!1,ref:h}):(0,tw.jsx)(aR.default.TimePicker,(0,g.default)((0,g.default)((0,g.default)({ref:r,format:l},(0,M.compatibleBorder)(void 0===f||!f)),d),{},{value:k})),c)?c(i,(0,g.default)({mode:a},d),A):A;}return null;}),sr=function(n){var r=w.useRef({valueLabels:new Map});return w.useMemo(function(){var i=r.current.valueLabels,a=new Map,o=n.map(function(n){var r=n.value,o=n.label,s=null!=o?o:i.get(r);return a.set(r,s),(0,g.default)((0,g.default)({},n),{},{label:s});});return r.current.valueLabels=a,[o];},[n]);},si=function(n){var r=n||{},i=r.label,a=r.value;return{_title:i?[i]:["title","label"],value:a||"value",key:a||"value",children:r.children||"children"};},sa=function(n){return!n||n.disabled||n.disableCheckbox||!1===n.checkable;},so=function(n,r){var i=[];return!function n(a){a.forEach(function(a){var o=a[r.children];o&&(i.push(a[r.value]),n(o));});}(n),i;},ss=function(n){return null==n;},sl=i("f3efd1e9"),su=u._(sl),sc=function(){return null;},sf=["children","value"];function sd(n){if(!n)return n;var r=(0,g.default)({},n);return"props"in r||Object.defineProperty(r,"props",{get:function(){return(0,ec.default)(!1,"New `rc-tree-select` not support return node instance as argument anymore. Please consider to remove `props` access."),r;}}),r;}var sh=function(n,r,i){var a=i.fieldNames,o=i.treeNodeFilterProp,s=i.filterTreeNode,l=a.children;return w.useMemo(function(){if(!r||!1===s)return n;var i="function"==typeof s?s:function(n,i){return String(i[o]).toUpperCase().includes(r.toUpperCase());};return function n(a){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a.reduce(function(a,s){var u=s[l],c=o||i(r,sd(s)),f=n(u||[],c);return(c||f.length)&&a.push((0,g.default)((0,g.default)({},s),{},(0,em.default)({isLeaf:void 0},l,f))),a;},[]);}(n);},[n,r,l,o,s]);};function sp(n){var r=w.useRef();return r.current=n,w.useCallback(function(){return r.current.apply(r,arguments);},[]);}var sm=w.createContext(null),sg=i("8a2c7d78"),sv=u._(sg),sy=i("64cce978"),s_=c._(sy),sb=i("1cf256f2"),sx=u._(sb),sE=w.createContext(null),sw={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},sS=w.forwardRef(function(n,r){var i=(0,F.useBaseProps)(),a=i.prefixCls,o=i.multiple,s=i.searchValue,l=i.toggleOpen,u=i.open,c=i.notFoundContent,f=w.useContext(sE),d=f.virtual,h=f.listHeight,p=f.listItemHeight,m=f.listItemScrollOffset,g=f.treeData,v=f.fieldNames,y=f.onSelect,_=f.dropdownMatchSelectWidth,b=f.treeExpandAction,x=f.treeTitleRender,E=f.onPopupScroll,S=f.leftMaxCount,A=f.leafCountOnly,C=f.valueEntities,O=w.useContext(sm),M=O.checkable,R=O.checkedKeys,P=O.halfCheckedKeys,I=O.treeExpandedKeys,L=O.treeDefaultExpandAll,N=O.treeDefaultExpandedKeys,B=O.onTreeExpand,j=O.treeIcon,z=O.showTreeIcon,U=O.switcherIcon,V=O.treeLine,G=O.treeNodeFilterProp,H=O.loadData,W=O.treeLoadedKeys,X=O.treeMotion,q=O.onTreeLoad,$=O.keyEntities,Y=w.useRef(),Z=(0,sx.default)(function(){return g;},[u,g],function(n,r){return r[0]&&n[1]!==r[1];}),K=w.useMemo(function(){return M?{checked:R,halfChecked:P}:null;},[M,R,P]);w.useEffect(function(){if(u&&!o&&R.length){var n;null===(n=Y.current)||void 0===n||n.scrollTo({key:R[0]});}},[u]);var Q=function(n){n.preventDefault();},J=function(n,r){var i=r.node;M&&sa(i)||(y(i.key,{selected:!R.includes(i.key)}),o||l(!1));},ee=w.useState(N),et=(0,T.default)(ee,2),en=et[0],er=et[1],ei=w.useState(null),ea=(0,T.default)(ei,2),eo=ea[0],es=ea[1],el=w.useMemo(function(){return I?(0,k.default)(I):s?eo:en;},[en,eo,I,s]),eu=String(s).toLowerCase(),ec=function(n){return!!eu&&String(n[G]).toLowerCase().includes(eu);};w.useEffect(function(){s&&es(so(g,v));},[s]);var ef=w.useState(function(){return new Map;}),ed=(0,T.default)(ef,2),eh=ed[0],ep=ed[1];w.useEffect(function(){S&&ep(new Map);},[S]);var em=(0,eA.useEvent)(function(n){var r=n[v.value];return!R.includes(r)&&null!==S&&(S<=0||!!A&&!!S&&function(n){var r=n[v.value];if(!eh.has(r)){var i=C.get(r);if(0===(i.children||[]).length)eh.set(r,!1);else{var a=i.children.filter(function(n){return!n.node.disabled&&!n.node.disableCheckbox&&!R.includes(n.node[v.value]);}).length;eh.set(r,a>S);}}return eh.get(r);}(n));}),eg=function n(r){var i,a=(0,sv.default)(r);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(!o.disabled&&!1!==o.selectable){if(!s||ec(o))return o;if(o[v.children]){var l=n(o[v.children]);if(l)return l;}}}}catch(n){a.e(n);}finally{a.f();}return null;},ev=w.useState(null),ey=(0,T.default)(ev,2),e_=ey[0],eb=ey[1],ex=$[e_];w.useEffect(function(){if(u){var n,r=null;eb(o||!R.length||s?(n=eg(Z))?n[v.value]:null:R[0]);}},[u,s]),w.useImperativeHandle(r,function(){var n;return{scrollTo:null===(n=Y.current)||void 0===n?void 0:n.scrollTo,onKeyDown:function(n){var r;switch(n.which){case eE.default.UP:case eE.default.DOWN:case eE.default.LEFT:case eE.default.RIGHT:null===(r=Y.current)||void 0===r||r.onKeyDown(n);break;case eE.default.ENTER:if(ex){var i=em(ex.node),a=(null==ex?void 0:ex.node)||{},o=a.selectable,s=a.value,u=a.disabled;!1===o||u||i||J(null,{node:{key:e_},selected:!R.includes(s)});}break;case eE.default.ESC:l(!1);}},onKeyUp:function(){}};});var ew=(0,sx.default)(function(){return!s;},[s,I||en],function(n,r){var i=(0,T.default)(n,1)[0],a=(0,T.default)(r,2),o=a[0],s=a[1];return i!==o&&!!(o||s);});if(0===Z.length)return w.createElement("div",{role:"listbox",className:"".concat(a,"-empty"),onMouseDown:Q},c);var eS={fieldNames:v};return W&&(eS.loadedKeys=W),el&&(eS.expandedKeys=el),w.createElement("div",{onMouseDown:Q},ex&&u&&w.createElement("span",{style:sw,"aria-live":"assertive"},ex.node.value),w.createElement(s_.UnstableContext.Provider,{value:{nodeDisabled:em}},w.createElement(s_.default,(0,D.default)({ref:Y,focusable:!1,prefixCls:"".concat(a,"-tree"),treeData:Z,height:h,itemHeight:p,itemScrollOffset:m,virtual:!1!==d&&!1!==_,multiple:o,icon:j,showIcon:z,switcherIcon:U,showLine:V,loadData:ew?H:null,motion:X,activeKey:e_,checkable:M,checkStrictly:!0,checkedKeys:K,selectedKeys:M?[]:R,defaultExpandAll:L,titleRender:x},eS,{onActiveChange:eb,onSelect:J,onCheck:J,onExpand:function(n){er(n),es(n),B&&B(n);},onLoad:q,filterTreeNode:ec,expandAction:b,onScroll:E}))));}),sT="SHOW_ALL",sA="SHOW_PARENT",sC="SHOW_CHILD";function sO(n,r,i,a){var o=new Set(n);return r===sC?n.filter(function(n){var r=i[n];return!r||!r.children||!r.children.some(function(n){var r=n.node;return o.has(r[a.value]);})||!r.children.every(function(n){var r=n.node;return sa(r)||o.has(r[a.value]);});}):r===sA?n.filter(function(n){var r=i[n],a=r?r.parent:null;return!a||sa(a.node)||!o.has(a.key);}):n;}var sM=["id","prefixCls","value","defaultValue","onChange","onSelect","onDeselect","searchValue","inputValue","onSearch","autoClearSearchValue","filterTreeNode","treeNodeFilterProp","showCheckedStrategy","treeNodeLabelProp","multiple","treeCheckable","treeCheckStrictly","labelInValue","maxCount","fieldNames","treeDataSimpleMode","treeData","children","loadData","treeLoadedKeys","onTreeLoad","treeDefaultExpandAll","treeExpandedKeys","treeDefaultExpandedKeys","onTreeExpand","treeExpandAction","virtual","listHeight","listItemHeight","listItemScrollOffset","onDropdownVisibleChange","dropdownMatchSelectWidth","treeLine","treeIcon","showTreeIcon","switcherIcon","treeMotion","treeTitleRender","onPopupScroll"],sR=w.forwardRef(function(n,r){var i=n.id,a=n.prefixCls,o=n.value,s=n.defaultValue,l=n.onChange,u=n.onSelect,c=n.onDeselect,f=n.searchValue,h=n.inputValue,m=n.onSearch,v=n.autoClearSearchValue,y=void 0===v||v,_=n.filterTreeNode,b=n.treeNodeFilterProp,x=void 0===b?"value":b,E=n.showCheckedStrategy,S=n.treeNodeLabelProp,A=n.multiple,C=n.treeCheckable,O=n.treeCheckStrictly,M=n.labelInValue,R=n.maxCount,P=n.fieldNames,I=n.treeDataSimpleMode,L=n.treeData,N=n.children,B=n.loadData,z=n.treeLoadedKeys,U=n.onTreeLoad,V=n.treeDefaultExpandAll,H=n.treeExpandedKeys,W=n.treeDefaultExpandedKeys,X=n.onTreeExpand,q=n.treeExpandAction,$=n.virtual,Y=n.listHeight,Z=void 0===Y?200:Y,K=n.listItemHeight,Q=void 0===K?20:K,J=n.listItemScrollOffset,ee=void 0===J?0:J,et=n.onDropdownVisibleChange,en=n.dropdownMatchSelectWidth,er=void 0===en||en,ei=n.treeLine,ea=n.treeIcon,es=n.showTreeIcon,el=n.switcherIcon,eu=n.treeMotion,ed=n.treeTitleRender,eh=n.onPopupScroll,ep=(0,d.default)(n,sM),em=(0,j.default)(i),eg=C&&!O,ev=C||O,ey=O||M,e_=ev||A,eb=(0,G.default)(s,{value:o}),ex=(0,T.default)(eb,2),eE=ex[0],ew=ex[1],eS=w.useMemo(function(){return C?E||sC:sT;},[E,C]),eT=w.useMemo(function(){return si(P);},[JSON.stringify(P)]),eA=(0,G.default)("",{value:void 0!==f?f:h,postState:function(n){return n||"";}}),eC=(0,T.default)(eA,2),eO=eC[0],eM=eC[1],eR=w.useMemo(function(){if(L){if(I){var n,r,i,a,o,s=(0,g.default)({id:"id",pId:"pId",rootPId:null},"object"===(0,p.default)(I)?I:{});return n=s.id,r=s.pId,i=s.rootPId,a=new Map,o=[],L.forEach(function(r){var i=r[n],o=(0,g.default)((0,g.default)({},r),{},{key:r.key||i});a.set(i,o);}),a.forEach(function(n){var s=n[r],l=a.get(s);l?(l.children=l.children||[],l.children.push(n)):(s===i||null===i)&&o.push(n);}),o;}return L;}return function n(r){return(0,su.default)(r).map(function(r){if(!w.isValidElement(r)||!r.type)return null;var i=r.key,a=r.props,o=a.children,s=a.value,l=(0,d.default)(a,sf),u=(0,g.default)({key:i,value:s},l),c=n(o);return c.length&&(u.children=c),u;}).filter(function(n){return n;});}(N);},[N,I,L]),eP=w.useMemo(function(){return(0,eo.convertDataToEntities)(eR,{fieldNames:eT,initWrapper:function(n){return(0,g.default)((0,g.default)({},n),{},{valueEntities:new Map});},processEntity:function(n,r){var i=n.node[eT.value];r.valueEntities.set(i,n);}});},[eR,eT]),ek=eP.keyEntities,eI=eP.valueEntities,eL=w.useCallback(function(n){var r=[],i=[];return n.forEach(function(n){eI.has(n)?i.push(n):r.push(n);}),{missingRawValues:r,existRawValues:i};},[eI]),eN=sh(eR,eO,{fieldNames:eT,treeNodeFilterProp:x,filterTreeNode:_}),eD=w.useCallback(function(n){if(n){if(S)return n[S];for(var r=eT._title,i=0;i<r.length;i+=1){var a=n[r[i]];if(void 0!==a)return a;}}},[eT,S]),eF=w.useCallback(function(n){return(Array.isArray(n)?n:void 0!==n?[n]:[]).map(function(n){return n&&"object"===(0,p.default)(n)?n:{value:n};});},[]),eB=w.useCallback(function(n){return eF(n).map(function(n){var r,i,a=n.label,o=n.value,s=n.halfChecked,l=eI.get(o);return l?(a=ed?ed(l.node):null!==(i=a)&&void 0!==i?i:eD(l.node),r=l.node.disabled):void 0===a&&(a=eF(eE).find(function(n){return n.value===o;}).label),{label:a,value:o,halfChecked:s,disabled:r};});},[eI,eD,eF,eE]),ej=w.useMemo(function(){return eF(null===eE?[]:eE);},[eF,eE]),ez=w.useMemo(function(){var n=[],r=[];return ej.forEach(function(i){i.halfChecked?r.push(i):n.push(i);}),[n,r];},[ej]),eU=(0,T.default)(ez,2),eV=eU[0],eG=eU[1],eH=w.useMemo(function(){return eV.map(function(n){return n.value;});},[eV]),eW=w.useMemo(function(){var n=function(n){return n.map(function(n){return n.value;});},r=n(eV),i=n(eG),a=r.filter(function(n){return!ek[n];}),o=r,s=i;if(eg){var l=(0,ef.conductCheck)(r,!0,ek);o=l.checkedKeys,s=l.halfCheckedKeys;}return[Array.from(new Set([].concat((0,k.default)(a),(0,k.default)(o)))),s];},[eV,eG,eg,ek]),eX=(0,T.default)(eW,2),eq=eX[0],e$=eX[1],eY=sr(w.useMemo(function(){var n=eB(sO(eq,eS,ek,eT).map(function(n){var r,i;return null!==(r=null===(i=ek[n])||void 0===i||null===(i=i.node)||void 0===i?void 0:i[eT.value])&&void 0!==r?r:n;}).map(function(n){var r=eV.find(function(r){return r.value===n;});return{value:n,label:M?null==r?void 0:r.label:null==ed?void 0:ed(r)};})),r=n[0];return!e_&&r&&ss(r.value)&&ss(r.label)?[]:n.map(function(n){var r;return(0,g.default)((0,g.default)({},n),{},{label:null!==(r=n.label)&&void 0!==r?r:n.value});});},[eT,e_,eq,eV,eB,eS,ek])),eZ=(0,T.default)(eY,1)[0],eK=w.useMemo(function(){return e_&&("SHOW_CHILD"===eS||O||!C)?R:null;},[R,e_,O,eS,C]),eQ=sp(function(n,r,i){var a=sO(n,eS,ek,eT);if((!eK||!(a.length>eK))&&(ew(eB(n)),y&&eM(""),l)){var o=n;eg&&(o=a.map(function(n){var r=eI.get(n);return r?r.node[eT.value]:n;}));var s=r||{triggerValue:void 0,selected:void 0},u=s.triggerValue,c=s.selected,f=o;if(O){var d=eG.filter(function(n){return!o.includes(n.value);});f=[].concat((0,k.default)(f),(0,k.default)(d));}var h=eB(f),p={preValue:eV,triggerValue:u},m=!0;(O||"selection"===i&&!c)&&(m=!1),function(n,r,i,a,o,s){var l=null,u=null;function c(){u||(u=[],function n(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a.map(function(a,f){var d="".concat(o,"-").concat(f),h=a[s.value],p=i.includes(h),m=n(a[s.children]||[],d,p),g=w.createElement(sc,a,m.map(function(n){return n.node;}));if(r===h&&(l=g),p){var v={pos:d,node:g,children:m};return c||u.push(v),v;}return null;}).filter(function(n){return n;});}(a),u.sort(function(n,r){var a=n.node.props.value,o=r.node.props.value;return i.indexOf(a)-i.indexOf(o);}));}Object.defineProperty(n,"triggerNode",{get:function(){return(0,ec.default)(!1,"`triggerNode` is deprecated. Please consider decoupling data with node."),c(),l;}}),Object.defineProperty(n,"allCheckedNodes",{get:function(){return((0,ec.default)(!1,"`allCheckedNodes` is deprecated. Please consider decoupling data with node."),c(),o)?u:u.map(function(n){return n.node;});}});}(p,u,n,eR,m,eT),ev?p.checked=c:p.selected=c;var g=ey?h:h.map(function(n){return n.value;});l(e_?g:g[0],ey?null:h.map(function(n){return n.label;}),p);}}),eJ=w.useCallback(function(n,r){var i=r.selected,a=r.source,o=ek[n],s=null==o?void 0:o.node,l=null!==(d=null==s?void 0:s[eT.value])&&void 0!==d?d:n;if(e_){var f=i?[].concat((0,k.default)(eH),[l]):eq.filter(function(n){return n!==l;});if(eg){var d,h,p=eL(f),m=p.missingRawValues,g=p.existRawValues.map(function(n){return eI.get(n).key;});h=i?(0,ef.conductCheck)(g,!0,ek).checkedKeys:(0,ef.conductCheck)(g,{checked:!1,halfCheckedKeys:e$},ek).checkedKeys,f=[].concat((0,k.default)(m),(0,k.default)(h.map(function(n){return ek[n].node[eT.value];})));}eQ(f,{selected:i,triggerValue:l},a||"option");}else eQ([l],{selected:!0,triggerValue:l},"option");i||!e_?null==u||u(l,sd(s)):null==c||c(l,sd(s));},[eL,eI,ek,eT,e_,eH,eQ,eg,u,c,eq,e$,R]),e0=w.useCallback(function(n){if(et){var r={};Object.defineProperty(r,"documentClickClose",{get:function(){return(0,ec.default)(!1,"Second param of `onDropdownVisibleChange` has been removed."),!1;}}),et(n,r);}},[et]),e1=sp(function(n,r){var i=n.map(function(n){return n.value;});if("clear"===r.type){eQ(i,{},"selection");return;}r.values.length&&eJ(r.values[0].value,{selected:!1,source:"selection"});}),e2=w.useMemo(function(){return{virtual:$,dropdownMatchSelectWidth:er,listHeight:Z,listItemHeight:Q,listItemScrollOffset:ee,treeData:eN,fieldNames:eT,onSelect:eJ,treeExpandAction:q,treeTitleRender:ed,onPopupScroll:eh,leftMaxCount:void 0===R?null:R-eZ.length,leafCountOnly:"SHOW_CHILD"===eS&&!O&&!!C,valueEntities:eI};},[$,er,Z,Q,ee,eN,eT,eJ,q,ed,eh,R,eZ.length,eS,O,C,eI]),e3=w.useMemo(function(){return{checkable:ev,loadData:B,treeLoadedKeys:z,onTreeLoad:U,checkedKeys:eq,halfCheckedKeys:e$,treeDefaultExpandAll:V,treeExpandedKeys:H,treeDefaultExpandedKeys:W,onTreeExpand:X,treeIcon:ea,treeMotion:eu,showTreeIcon:es,switcherIcon:el,treeLine:ei,treeNodeFilterProp:x,keyEntities:ek};},[ev,B,z,U,eq,e$,V,H,W,X,ea,eu,es,el,ei,x,ek]);return w.createElement(sE.Provider,{value:e2},w.createElement(sm.Provider,{value:e3},w.createElement(F.BaseSelect,(0,D.default)({ref:r},ep,{id:em,prefixCls:void 0===a?"rc-tree-select":a,mode:e_?"multiple":void 0,displayValues:eZ,onDisplayValuesChange:e1,searchValue:eO,onSearch:function(n){eM(n),null==m||m(n);},OptionList:sS,emptyOptions:!eR.length,onDropdownVisibleChange:e0,dropdownMatchSelectWidth:er}))));});sR.TreeNode=sc,sR.SHOW_ALL=sT,sR.SHOW_PARENT=sA,sR.SHOW_CHILD=sC;var sP=i("65b1c40f"),sk=i("6fd5200b"),sI=u._(sk),sL=i("29fd198b");let sN=n=>{let{componentCls:r,treePrefixCls:i,colorBgElevated:a}=n,o=`.${i}`;return[{[`${r}-dropdown`]:[{padding:`${(0,ti.unit)(n.paddingXS)} ${(0,ti.unit)(n.calc(n.paddingXS).div(2).equal())}`},(0,sL.genTreeStyle)(i,(0,nE.mergeToken)(n,{colorBgContainer:a}),!1),{[o]:{borderRadius:0,[`${o}-list-holder-inner`]:{alignItems:"stretch",[`${o}-treenode`]:{[`${o}-node-content-wrapper`]:{flex:"auto"}}}}},(0,ta.getStyle)(`${i}-checkbox`,n),{"&-rtl":{direction:"rtl",[`${o}-switcher${o}-switcher_close`]:{[`${o}-switcher-icon svg`]:{transform:"rotate(90deg)"}}}}]}];};var sD=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let sF=w.forwardRef((n,r)=>{var i,a,o,s,l;let u;let{prefixCls:c,size:f,disabled:d,bordered:h=!0,style:p,className:m,rootClassName:g,treeCheckable:v,multiple:y,listHeight:_=256,listItemHeight:b,placement:x,notFoundContent:E,switcherIcon:S,treeLine:T,getPopupContainer:A,popupClassName:C,dropdownClassName:O,treeIcon:M=!1,transitionName:R,choiceTransitionName:P="",status:k,treeExpandAction:I,builtinPlacements:N,dropdownMatchSelectWidth:D,popupMatchSelectWidth:F,allowClear:B,variant:j,dropdownStyle:z,dropdownRender:U,popupRender:V,onDropdownVisibleChange:G,onOpenChange:H,tagRender:W,maxCount:X,showCheckedStrategy:q,treeCheckStrictly:$,styles:Y,classNames:Z}=n,K=sD(n,["prefixCls","size","disabled","bordered","style","className","rootClassName","treeCheckable","multiple","listHeight","listItemHeight","placement","notFoundContent","switcherIcon","treeLine","getPopupContainer","popupClassName","dropdownClassName","treeIcon","transitionName","choiceTransitionName","status","treeExpandAction","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","allowClear","variant","dropdownStyle","dropdownRender","popupRender","onDropdownVisibleChange","onOpenChange","tagRender","maxCount","showCheckedStrategy","treeCheckStrictly","styles","classNames"]),{getPopupContainer:Q,getPrefixCls:J,renderEmpty:ee,direction:et,virtual:en,popupMatchSelectWidth:er,popupOverflow:ei}=w.useContext(eB.ConfigContext),{styles:ea,classNames:eo}=(0,eB.useComponentConfig)("treeSelect"),[,es]=(0,sP.useToken)(),el=null!=b?b:(null==es?void 0:es.controlHeightSM)+(null==es?void 0:es.paddingXXS),eu=J(),ec=J("select",c),ef=J("select-tree",c),ed=J("tree-select",c),{compactSize:eh,compactItemClassnames:ep}=(0,e4.useCompactItemContext)(ec,et),em=(0,eH.default)(ec),eg=(0,eH.default)(ed),[ev,ey,e_]=(0,eJ.default)(ec,em),[eb]=(0,tr.genStyleHooks)("TreeSelect",n=>[sN((0,nE.mergeToken)(n,{treePrefixCls:ef}))],sL.initComponentToken)(ed,eg),[ex,eE]=(0,eY.default)("treeSelect",j,h),ew=(0,L.default)((null===(i=null==Z?void 0:Z.popup)||void 0===i?void 0:i.root)||(null===(a=null==eo?void 0:eo.popup)||void 0===a?void 0:a.root)||C||O,`${ed}-dropdown`,{[`${ed}-dropdown-rtl`]:"rtl"===et},g,eo.root,null==Z?void 0:Z.root,e_,em,eg,ey),eS=(null===(o=null==Y?void 0:Y.popup)||void 0===o?void 0:o.root)||(null===(s=null==ea?void 0:ea.popup)||void 0===s?void 0:s.root)||z,eT=!!(v||y),eA=w.useMemo(()=>{if(!X||("SHOW_ALL"!==q||$)&&"SHOW_PARENT"!==q)return X;},[X,q,$]),eC=(0,e3.default)(n.suffixIcon,n.showArrow),eO=null!==(l=null!=F?F:D)&&void 0!==l?l:er,{status:eM,hasFeedback:eR,isFormItemInput:eP,feedbackIcon:eN}=w.useContext(eq.FormItemInputContext),eD=(0,eF.getMergedStatus)(eM,k),{suffixIcon:ej,removeIcon:eU,clearIcon:eG}=(0,e1.default)(Object.assign(Object.assign({},K),{multiple:eT,showSuffixIcon:eC,hasFeedback:eR,feedbackIcon:eN,prefixCls:ec,componentName:"TreeSelect"}));u=void 0!==E?E:(null==ee?void 0:ee("Select"))||w.createElement(ez.default,{componentName:"Select"});let eW=(0,ek.default)(K,["suffixIcon","removeIcon","clearIcon","itemIcon","switcherIcon","style"]),e$=w.useMemo(()=>void 0!==x?x:"rtl"===et?"bottomRight":"bottomLeft",[x,et]),eZ=(0,eX.default)(n=>{var r;return null!==(r=null!=f?f:eh)&&void 0!==r?r:n;}),eQ=w.useContext(eV.default),e0=(0,L.default)(!c&&ed,{[`${ec}-lg`]:"large"===eZ,[`${ec}-sm`]:"small"===eZ,[`${ec}-rtl`]:"rtl"===et,[`${ec}-${ex}`]:eE,[`${ec}-in-form-item`]:eP},(0,eF.getStatusClassNames)(ec,eD,eR),ep,m,g,eo.root,null==Z?void 0:Z.root,e_,em,eg,ey),[e2]=(0,eI.useZIndex)("SelectLike",null==eS?void 0:eS.zIndex);return ev(eb(w.createElement(sR,Object.assign({virtual:en,disabled:null!=d?d:eQ},eW,{dropdownMatchSelectWidth:eO,builtinPlacements:(0,eK.default)(N,ei),ref:r,prefixCls:ec,className:e0,style:Object.assign(Object.assign({},null==Y?void 0:Y.root),p),listHeight:_,listItemHeight:el,treeCheckable:v?w.createElement("span",{className:`${ec}-tree-checkbox-inner`}):v,treeLine:!!T,suffixIcon:ej,multiple:eT,placement:e$,removeIcon:eU,allowClear:!0===B?{clearIcon:eG}:B,switcherIcon:n=>w.createElement(sI.default,{prefixCls:ef,switcherIcon:S,treeNodeProps:n,showLine:T}),showTreeIcon:M,notFoundContent:u,getPopupContainer:A||Q,treeMotion:null,dropdownClassName:ew,dropdownStyle:Object.assign(Object.assign({},eS),{zIndex:e2}),dropdownRender:V||U,onDropdownVisibleChange:H||G,choiceTransitionName:(0,eL.getTransitionName)(eu,"",P),transitionName:(0,eL.getTransitionName)(eu,"slide-up",R),treeExpandAction:I,tagRender:eT?W:void 0,maxCount:eA,showCheckedStrategy:q,treeCheckStrictly:$}))));}),sB=(0,eD.default)(sF,"dropdownAlign",n=>(0,ek.default)(n,["visible"]));sF.TreeNode=sc,sF.SHOW_ALL=sT,sF.SHOW_PARENT=sA,sF.SHOW_CHILD=sC,sF._InternalPanelDoNotUseOrYouWillBeFired=sB;var sj=["radioType","renderFormItem","mode","light","label","render"],sz=["onSearch","onClear","onChange","onBlur","showSearch","autoClearSearchValue","treeData","fetchDataOnSearch","searchValue"],sU=w.default.forwardRef(function(n,r){n.radioType;var i=n.renderFormItem,a=n.mode,o=n.light,s=n.label,l=n.render,u=(0,d.default)(n,sj),c=(0,(0,w.useContext)(tb.default.ConfigContext).getPrefixCls)("pro-field-tree-select"),f=(0,w.useRef)(null),h=(0,w.useState)(!1),p=(0,T.default)(h,2),m=p[0],v=p[1],_=u.fieldProps,b=_.onSearch,x=_.onClear,E=_.onChange,S=_.onBlur,A=_.showSearch,C=_.autoClearSearchValue,M=(_.treeData,_.fetchDataOnSearch),P=_.searchValue,k=(0,d.default)(_,sz),I=(0,y.useIntl)(),N=(0,tE.useFieldFetchData)((0,g.default)((0,g.default)({},u),{},{defaultKeyWords:P})),D=(0,T.default)(N,3),F=D[0],B=D[1],j=D[2],z=(0,G.default)(void 0,{onChange:b,value:P}),U=(0,T.default)(z,2),V=U[0],H=U[1];(0,w.useImperativeHandle)(r,function(){return(0,g.default)((0,g.default)({},f.current||{}),{},{fetchData:function(n){return j(n);}});});var W=(0,w.useMemo)(function(){if("read"===a){var n=(null==k?void 0:k.fieldNames)||{},r=n.value,i=void 0===r?"value":r,o=n.label,s=void 0===o?"label":o,l=n.children,u=void 0===l?"children":l,c=new Map;return function n(r){if(!(null!=r&&r.length))return c;for(var a=r.length,o=0;o<a;){var l=r[o++];c.set(l[i],l[s]),n(l[u]);}return c;}(B);}},[null==k?void 0:k.fieldNames,a,B]);if("read"===a){var X,q=(0,tw.jsx)(tw.Fragment,{children:(0,R.proFieldParsingText)(u.text,(0,R.objectToMap)(u.valueEnum||W))});return l?null!==(X=l(u.text,(0,g.default)((0,g.default)({mode:a},k),{},{treeData:B}),q))&&void 0!==X?X:null:q;}if("edit"===a){var $=Array.isArray(null==k?void 0:k.value)?null==k||null===(Z=k.value)||void 0===Z?void 0:Z.length:0,Y=(0,tw.jsx)(tk.default,{spinning:F,children:(0,tw.jsx)(sF,(0,g.default)((0,g.default)({open:m,onDropdownVisibleChange:function(n){var r;null==k||null===(r=k.onDropdownVisibleChange)||void 0===r||r.call(k,n),v(n);},ref:f,popupMatchSelectWidth:!o,placeholder:I.getMessage("tableForm.selectPlaceholder","\u8BF7\u9009\u62E9"),tagRender:o?function(n){if($<2)return(0,tw.jsx)(tw.Fragment,{children:n.label});var r,i=null==k||null===(r=k.value)||void 0===r?void 0:r.findIndex(function(r){return r===n.value||r.value===n.value;});return(0,tw.jsxs)(tw.Fragment,{children:[n.label," ",i<$-1?",":""]});}:void 0,bordered:!o},k),{},{treeData:B,showSearch:A,style:(0,g.default)({minWidth:60},k.style),allowClear:!1!==k.allowClear,searchValue:V,autoClearSearchValue:C,onClear:function(){null==x||x(),j(void 0),A&&H(void 0);},onChange:function(n,r,i){A&&C&&(j(void 0),H(void 0)),null==E||E(n,r,i);},onSearch:function(n){M&&null!=u&&u.request&&j(n),H(n);},onBlur:function(n){H(void 0),j(void 0),null==S||S(n);},className:(0,L.default)(null==k?void 0:k.className,c)}))});if(i&&(Y=null!==(K=i(u.text,(0,g.default)((0,g.default)({mode:a},k),{},{options:B,loading:F}),Y))&&void 0!==K?K:null),o){var Z,K,Q,J=k.disabled,ee=k.placeholder,et=!!k.value&&(null===(Q=k.value)||void 0===Q?void 0:Q.length)!==0;return(0,tw.jsx)(O.FieldLabel,{label:s,disabled:J,placeholder:ee,onClick:function(){var n;v(!0),null==k||null===(n=k.onDropdownVisibleChange)||void 0===n||n.call(k,!0);},bordered:u.bordered,value:et||m?Y:null,style:et?{paddingInlineEnd:0}:void 0,allowClear:!1,downIcon:!1});}return Y;}return null;});function sV(n){var r=(0,w.useState)(!1),i=(0,T.default)(r,2),a=i[0],o=i[1],s=(0,w.useRef)(null),l=(0,w.useCallback)(function(n){var r,i,a=null===(r=s.current)||void 0===r||null===(r=r.labelRef)||void 0===r||null===(r=r.current)||void 0===r?void 0:r.contains(n.target),o=null===(i=s.current)||void 0===i||null===(i=i.clearRef)||void 0===i||null===(i=i.current)||void 0===i?void 0:i.contains(n.target);return a&&!o;},[s]);return n.isLight?(0,tw.jsx)("div",{onMouseDown:function(n){l(n)&&o(!0);},onMouseUp:function(){o(!1);},children:w.default.cloneElement(n.children,{labelTrigger:a,lightLabel:s})}):(0,tw.jsx)(tw.Fragment,{children:n.children});}var sG=i("989dbbaa"),sH=u._(sG),sW=i("9c7e9d85"),sX=u._(sW),sq=i("6a59b78f"),s$=u._(sq),sY=i("4c5a0184"),sZ=u._(sY),sK=i("3d048fd5"),sQ=u._(sK),sJ=["fieldProps"],s0=["fieldProps"],s1=["fieldProps"],s2=["fieldProps"],s3=["text","valueType","mode","onChange","renderFormItem","value","readonly","fieldProps"],s4=["placeholder"];ak.default.extend(s$.default),ak.default.extend(sH.default),ak.default.extend(sX.default),ak.default.extend(aL.default),ak.default.extend(sQ.default),ak.default.extend(sZ.default);var s5=function(n,r,i){var a=(0,_.pickProProps)(i.fieldProps);return"progress"===r.type?(0,tw.jsx)(oI,(0,g.default)((0,g.default)({},i),{},{text:n,fieldProps:(0,g.default)({status:r.status?r.status:void 0},a)})):"money"===r.type?(0,tw.jsx)(oE,(0,g.default)((0,g.default)({locale:r.locale},i),{},{fieldProps:a,text:n,moneySymbol:r.moneySymbol})):"percent"===r.type?(0,tw.jsx)(oR,(0,g.default)((0,g.default)({},i),{},{text:n,showSymbol:r.showSymbol,precision:r.precision,fieldProps:a,showColor:r.showColor})):"image"===r.type?(0,tw.jsx)(oh,(0,g.default)((0,g.default)({},i),{},{text:n,width:r.width})):n;},s6=function(n,r,i,a){var o,s,l=i.mode,u=void 0===l?"read":l,c=i.emptyText,f=void 0===c?"-":c;if(!1!==f&&"read"===u&&"option"!==r&&"switch"!==r&&"boolean"!=typeof n&&"number"!=typeof n&&!n){var h=i.fieldProps,m=i.render;return m?m(n,(0,g.default)({mode:u},h),(0,tw.jsx)(tw.Fragment,{children:f})):(0,tw.jsx)(tw.Fragment,{children:f});}if(delete i.emptyText,"object"===(0,p.default)(r))return s5(n,r,i);var v=a&&a[r];if(v){if(delete i.ref,"read"===u)return null===(o=v.render)||void 0===o?void 0:o.call(v,n,(0,g.default)((0,g.default)({text:n},i),{},{mode:u||"read"}),(0,tw.jsx)(tw.Fragment,{children:n}));if("update"===u||"edit"===u)return null===(s=v.renderFormItem)||void 0===s?void 0:s.call(v,n,(0,g.default)({text:n},i),(0,tw.jsx)(tw.Fragment,{children:n}));}if("money"===r)return(0,tw.jsx)(oE,(0,g.default)((0,g.default)({},i),{},{text:n}));if("date"===r)return(0,tw.jsx)(sV,{isLight:i.light,children:(0,tw.jsx)(aN,(0,g.default)({text:n,format:"YYYY-MM-DD"},i))});if("dateWeek"===r)return(0,tw.jsx)(sV,{isLight:i.light,children:(0,tw.jsx)(aN,(0,g.default)({text:n,format:"YYYY-wo",picker:"week"},i))});if("dateWeekRange"===r){var y=i.fieldProps,_=(0,d.default)(i,sJ);return(0,tw.jsx)(sV,{isLight:i.light,children:(0,tw.jsx)(oB,(0,g.default)({text:n,format:"YYYY-W",showTime:!0,fieldProps:(0,g.default)({picker:"week"},y)},_))});}if("dateMonthRange"===r){var b=i.fieldProps,E=(0,d.default)(i,s0);return(0,tw.jsx)(sV,{isLight:i.light,children:(0,tw.jsx)(oB,(0,g.default)({text:n,format:"YYYY-MM",showTime:!0,fieldProps:(0,g.default)({picker:"month"},b)},E))});}if("dateQuarterRange"===r){var w=i.fieldProps,S=(0,d.default)(i,s1);return(0,tw.jsx)(sV,{isLight:i.light,children:(0,tw.jsx)(oB,(0,g.default)({text:n,format:"YYYY-Q",showTime:!0,fieldProps:(0,g.default)({picker:"quarter"},w)},S))});}if("dateYearRange"===r){var T=i.fieldProps,A=(0,d.default)(i,s2);return(0,tw.jsx)(sV,{isLight:i.light,children:(0,tw.jsx)(oB,(0,g.default)({text:n,format:"YYYY",showTime:!0,fieldProps:(0,g.default)({picker:"year"},T)},A))});}return"dateMonth"===r?(0,tw.jsx)(sV,{isLight:i.light,children:(0,tw.jsx)(aN,(0,g.default)({text:n,format:"YYYY-MM",picker:"month"},i))}):"dateQuarter"===r?(0,tw.jsx)(sV,{isLight:i.light,children:(0,tw.jsx)(aN,(0,g.default)({text:n,format:"YYYY-[Q]Q",picker:"quarter"},i))}):"dateYear"===r?(0,tw.jsx)(sV,{isLight:i.light,children:(0,tw.jsx)(aN,(0,g.default)({text:n,format:"YYYY",picker:"year"},i))}):"dateRange"===r?(0,tw.jsx)(oB,(0,g.default)({text:n,format:"YYYY-MM-DD"},i)):"dateTime"===r?(0,tw.jsx)(sV,{isLight:i.light,children:(0,tw.jsx)(aN,(0,g.default)({text:n,format:"YYYY-MM-DD HH:mm:ss",showTime:!0},i))}):"dateTimeRange"===r?(0,tw.jsx)(sV,{isLight:i.light,children:(0,tw.jsx)(oB,(0,g.default)({text:n,format:"YYYY-MM-DD HH:mm:ss",showTime:!0},i))}):"time"===r?(0,tw.jsx)(sV,{isLight:i.light,children:(0,tw.jsx)(sn,(0,g.default)({text:n,format:"HH:mm:ss"},i))}):"timeRange"===r?(0,tw.jsx)(sV,{isLight:i.light,children:(0,tw.jsx)(st,(0,g.default)({text:n,format:"HH:mm:ss"},i))}):"fromNow"===r?(0,tw.jsx)(aG,(0,g.default)({text:n},i)):"index"===r?(0,tw.jsx)(op,{children:n+1}):"indexBorder"===r?(0,tw.jsx)(op,{border:!0,children:n+1}):"progress"===r?(0,tw.jsx)(oI,(0,g.default)((0,g.default)({},i),{},{text:n})):"percent"===r?(0,tw.jsx)(oR,(0,g.default)({text:n},i)):"avatar"===r&&"string"==typeof n&&"read"===i.mode?(0,tw.jsx)(x.default,{src:n,size:22,shape:"circle"}):"code"===r?(0,tw.jsx)(tz,(0,g.default)({text:n},i)):"jsonCode"===r?(0,tw.jsx)(tz,(0,g.default)({text:n,language:"json"},i)):"textarea"===r?(0,tw.jsx)(o4,(0,g.default)({text:n},i)):"digit"===r?(0,tw.jsx)(aF,(0,g.default)({text:n},i)):"digitRange"===r?(0,tw.jsx)(az,(0,g.default)({text:n},i)):"second"===r?(0,tw.jsx)(oY,(0,g.default)({text:n},i)):"select"===r||"text"===r&&(i.valueEnum||i.request)?(0,tw.jsx)(sV,{isLight:i.light,children:(0,tw.jsx)(tE.default,(0,g.default)({text:n},i))}):"checkbox"===r?(0,tw.jsx)(tN,(0,g.default)({text:n},i)):"radio"===r?(0,tw.jsx)(oF,(0,g.default)({text:n},i)):"radioButton"===r?(0,tw.jsx)(oF,(0,g.default)({radioType:"button",text:n},i)):"rate"===r?(0,tw.jsx)(o$,(0,g.default)({text:n},i)):"slider"===r?(0,tw.jsx)(oQ,(0,g.default)({text:n},i)):"switch"===r?(0,tw.jsx)(o1,(0,g.default)({text:n},i)):"option"===r?(0,tw.jsx)(oS,(0,g.default)({text:n},i)):"password"===r?(0,tw.jsx)(oO,(0,g.default)({text:n},i)):"image"===r?(0,tw.jsx)(oh,(0,g.default)({text:n},i)):"cascader"===r?(0,tw.jsx)(tT,(0,g.default)({text:n},i)):"treeSelect"===r?(0,tw.jsx)(sU,(0,g.default)({text:n},i)):"color"===r?(0,tw.jsx)(aC,(0,g.default)({text:n},i)):"segmented"===r?(0,tw.jsx)(oK,(0,g.default)({text:n},i)):(0,tw.jsx)(o2,(0,g.default)({text:n},i));},s8=w.default.forwardRef(function(n,r){var i,a,o,s,l,u=n.text,c=n.valueType,f=n.mode,h=void 0===f?"read":f,p=n.onChange,m=n.renderFormItem,v=n.value,b=n.readonly,x=n.fieldProps,E=(0,d.default)(n,s3),S=(0,w.useContext)(y.default),T=(0,_.useRefFunction)(function(){for(var n,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];null==x||null===(n=x.onChange)||void 0===n||n.call.apply(n,[x].concat(i)),null==p||p.apply(void 0,i);}),A=(0,_.useDeepCompareMemo)(function(){return(void 0!==v||x)&&(0,g.default)((0,g.default)({value:v},(0,_.omitUndefined)(x)),{},{onChange:T});},[v,x,T]),C=s6("edit"===h?null!==(i=null!==(a=null==A?void 0:A.value)&&void 0!==a?a:u)&&void 0!==i?i:"":null!==(o=null!=u?u:null==A?void 0:A.value)&&void 0!==o?o:"",(void 0===c?"text":c)||"text",(0,_.omitUndefined)((0,g.default)((0,g.default)({ref:r},E),{},{mode:b?"read":h,renderFormItem:m?function(n,r,i){r.placeholder;var a=m(n,(0,d.default)(r,s4),i);return w.default.isValidElement(a)?w.default.cloneElement(a,(0,g.default)((0,g.default)({},A),a.props||{})):a;}:void 0,placeholder:m?void 0:null!==(s=null==E?void 0:E.placeholder)&&void 0!==s?s:null==A?void 0:A.placeholder,fieldProps:(0,_.pickProProps)((0,_.omitUndefined)((0,g.default)((0,g.default)({},A),{},{placeholder:m?void 0:null!==(l=null==E?void 0:E.placeholder)&&void 0!==l?l:null==A?void 0:A.placeholder})))})),S.valueTypeMap||{});return(0,tw.jsx)(w.default.Fragment,{children:C});});},93401226:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{ClearIcon:function(){return p;},default:function(){return h;}});var a=i("777fffbe"),o=i("852bbaa9"),s=a._(i("7cfeda15")),l=a._(i("613f75ca")),u=o._(i("609f48be")),c=a._(i("fa94063b")),f=["icon","type"],d=["onClear"];function h(n){var r=n.icon,i=n.type,a=(0,l.default)(n,f),o=u.useContext(c.default).prefixCls;return r?u.createElement("span",(0,s.default)({className:"".concat(o,"-").concat(i)},a),r):null;}function p(n){var r=n.onClear,i=(0,l.default)(n,d);return u.createElement(h,(0,s.default)({},i,{type:"clear",role:"button",onMouseDown:function(n){n.preventDefault();},onClick:function(n){n.stopPropagation(),r();}}));}},"93d97ebf":function(n,r,i){"use strict";var a=Object.prototype.hasOwnProperty,o="~";function s(){}function l(n,r,i){this.fn=n,this.context=r,this.once=i||!1;}function u(n,r,i,a,s){if("function"!=typeof i)throw TypeError("The listener must be a function");var u=new l(i,a||n,s),c=o?o+r:r;return n._events[c]?n._events[c].fn?n._events[c]=[n._events[c],u]:n._events[c].push(u):(n._events[c]=u,n._eventsCount++),n;}function c(n,r){0==--n._eventsCount?n._events=new s:delete n._events[r];}function f(){this._events=new s,this._eventsCount=0;}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(o=!1)),f.prototype.eventNames=function(){var n,r,i=[];if(0===this._eventsCount)return i;for(r in n=this._events)a.call(n,r)&&i.push(o?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(n)):i;},f.prototype.listeners=function(n){var r=o?o+n:n,i=this._events[r];if(!i)return[];if(i.fn)return[i.fn];for(var a=0,s=i.length,l=Array(s);a<s;a++)l[a]=i[a].fn;return l;},f.prototype.listenerCount=function(n){var r=o?o+n:n,i=this._events[r];return i?i.fn?1:i.length:0;},f.prototype.emit=function(n,r,i,a,s,l){var u=o?o+n:n;if(!this._events[u])return!1;var c,f,d=this._events[u],h=arguments.length;if(d.fn){switch(d.once&&this.removeListener(n,d.fn,void 0,!0),h){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,r),!0;case 3:return d.fn.call(d.context,r,i),!0;case 4:return d.fn.call(d.context,r,i,a),!0;case 5:return d.fn.call(d.context,r,i,a,s),!0;case 6:return d.fn.call(d.context,r,i,a,s,l),!0;}for(f=1,c=Array(h-1);f<h;f++)c[f-1]=arguments[f];d.fn.apply(d.context,c);}else{var p,m=d.length;for(f=0;f<m;f++)switch(d[f].once&&this.removeListener(n,d[f].fn,void 0,!0),h){case 1:d[f].fn.call(d[f].context);break;case 2:d[f].fn.call(d[f].context,r);break;case 3:d[f].fn.call(d[f].context,r,i);break;case 4:d[f].fn.call(d[f].context,r,i,a);break;default:if(!c)for(p=1,c=Array(h-1);p<h;p++)c[p-1]=arguments[p];d[f].fn.apply(d[f].context,c);}}return!0;},f.prototype.on=function(n,r,i){return u(this,n,r,i,!1);},f.prototype.once=function(n,r,i){return u(this,n,r,i,!0);},f.prototype.removeListener=function(n,r,i,a){var s=o?o+n:n;if(!this._events[s])return this;if(!r)return c(this,s),this;var l=this._events[s];if(l.fn)l.fn!==r||a&&!l.once||i&&l.context!==i||c(this,s);else{for(var u=0,f=[],d=l.length;u<d;u++)(l[u].fn!==r||a&&!l[u].once||i&&l[u].context!==i)&&f.push(l[u]);f.length?this._events[s]=1===f.length?f[0]:f:c(this,s);}return this;},f.prototype.removeAllListeners=function(n){var r;return n?(r=o?o+n:n,this._events[r]&&c(this,r)):(this._events=new s,this._eventsCount=0),this;},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=o,f.EventEmitter=f,void 0!==n&&(n.exports=f);},"93e3aa3a":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),r.ReactCSS=r.loop=r.handleActive=r.handleHover=r.hover=void 0;var a=f(i("b78c66bd")),o=f(i("018c5f61")),s=f(i("e45ffa75")),l=f(i("449c5245")),u=f(i("cf23b094")),c=f(i("d09f5ae7"));function f(n){return n&&n.__esModule?n:{default:n};}r.hover=l.default,r.handleHover=l.default,r.handleActive=u.default,r.loop=c.default;var d=r.ReactCSS=function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),l=1;l<r;l++)i[l-1]=arguments[l];var u=(0,a.default)(i),c=(0,o.default)(n,u);return(0,s.default)(c);};r.default=d;},"93e76dce":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{Container:function(){return p;},TableContext:function(){return h;}});var a=i("777fffbe"),o=a._(i("ee64167d")),s=a._(i("b83c7a4d")),l=a._(i("ce03fd86")),u=i("a275200c"),c=i("609f48be"),f=i("01746c28"),d=i("dac8af92"),h=(0,c.createContext)({}),p=function(n){var r=function(){var n,r,i,a,d,h,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},m=(0,c.useRef)(),g=(0,c.useRef)(null),v=(0,c.useRef)(),y=(0,c.useRef)(),_=(0,c.useState)(""),b=(0,o.default)(_,2),x=b[0],E=b[1],w=(0,c.useRef)([]),S=(0,l.default)(function(){return p.size||p.defaultSize||"middle";},{value:p.size,onChange:p.onSizeChange}),T=(0,o.default)(S,2),A=T[0],C=T[1],O=(0,c.useMemo)(function(){if(null!=p&&null!==(n=p.columnsState)&&void 0!==n&&n.defaultValue)return p.columnsState.defaultValue;var n,r,i={};return null===(r=p.columns)||void 0===r||r.forEach(function(n,r){var a=n.key,o=n.dataIndex,s=n.fixed,l=n.disable,u=(0,f.genColumnKey)(null!=a?a:o,r);u&&(i[u]={show:!0,fixed:s,disable:l});}),i;},[p.columns]),M=(0,l.default)(function(){var n=p.columnsState||{},r=n.persistenceType,i=n.persistenceKey;if(i&&r&&"undefined"!=typeof window){var a=window[r];try{var o,l,u,c,f=null==a?void 0:a.getItem(i);if(f){if(null!=p&&null!==(u=p.columnsState)&&void 0!==u&&u.defaultValue)return(0,s.default)({},null==p||null===(c=p.columnsState)||void 0===c?void 0:c.defaultValue,JSON.parse(f));return JSON.parse(f);}}catch(n){console.warn(n);}}return p.columnsStateMap||(null===(o=p.columnsState)||void 0===o?void 0:o.value)||(null===(l=p.columnsState)||void 0===l?void 0:l.defaultValue)||O;},{value:(null===(n=p.columnsState)||void 0===n?void 0:n.value)||p.columnsStateMap,onChange:(null===(r=p.columnsState)||void 0===r?void 0:r.onChange)||p.onColumnsStateChange}),R=(0,o.default)(M,2),P=R[0],k=R[1];(0,c.useEffect)(function(){var n=p.columnsState||{},r=n.persistenceType,i=n.persistenceKey;if(i&&r&&"undefined"!=typeof window){var a=window[r];try{var o,l,u=null==a?void 0:a.getItem(i);u?null!=p&&null!==(o=p.columnsState)&&void 0!==o&&o.defaultValue?k((0,s.default)({},null==p||null===(l=p.columnsState)||void 0===l?void 0:l.defaultValue,JSON.parse(u))):k(JSON.parse(u)):k(O);}catch(n){console.warn(n);}}},[null===(i=p.columnsState)||void 0===i?void 0:i.persistenceKey,null===(a=p.columnsState)||void 0===a?void 0:a.persistenceType,O]),(0,u.noteOnce)(!p.columnsStateMap,"columnsStateMap\u5DF2\u7ECF\u5E9F\u5F03\uFF0C\u8BF7\u4F7F\u7528 columnsState.value \u66FF\u6362"),(0,u.noteOnce)(!p.columnsStateMap,"columnsStateMap has been discarded, please use columnsState.value replacement");var I=(0,c.useCallback)(function(){var n=p.columnsState||{},r=n.persistenceType,i=n.persistenceKey;if(i&&r&&"undefined"!=typeof window){var a=window[r];try{null==a||a.removeItem(i);}catch(n){console.warn(n);}}},[p.columnsState]);(0,c.useEffect)(function(){if(null!==(n=p.columnsState)&&void 0!==n&&n.persistenceKey&&null!==(r=p.columnsState)&&void 0!==r&&r.persistenceType&&"undefined"!=typeof window){var n,r,i=p.columnsState,a=i.persistenceType,o=i.persistenceKey,s=window[a];try{null==s||s.setItem(o,JSON.stringify(P));}catch(n){console.warn(n),I();}}},[null===(d=p.columnsState)||void 0===d?void 0:d.persistenceKey,P,null===(h=p.columnsState)||void 0===h?void 0:h.persistenceType]);var L={action:m.current,setAction:function(n){m.current=n;},sortKeyColumns:w.current,setSortKeyColumns:function(n){w.current=n;},propsRef:y,columnsMap:P,keyWords:x,setKeyWords:function(n){return E(n);},setTableSize:C,tableSize:A,prefixName:v.current,setPrefixName:function(n){v.current=n;},setColumnsMap:k,columns:p.columns,rootDomRef:g,clearPersistenceStorage:I,defaultColumnKeyMap:O};return Object.defineProperty(L,"prefixName",{get:function(){return v.current;}}),Object.defineProperty(L,"sortKeyColumns",{get:function(){return w.current;}}),Object.defineProperty(L,"action",{get:function(){return m.current;}}),L;}(n.initValue);return(0,d.jsx)(h.Provider,{value:r,children:n.children});};},"9400daad":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{EARTH_RADIUS:function(){return a;},lglt2xyz:function(){return s;}});let a=100;function o(n){return n/180*Math.acos(-1);}function s(n){let r=o(n[0])+Math.PI/2,i=o(n[1]),s=a+.4*Math.random(),l=s*Math.cos(i)*Math.cos(r);return[s*Math.cos(i)*Math.sin(r),s*Math.sin(i),l];}},"944abdfb":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{ascendingDefined:function(){return c;},compareDefined:function(){return u;},default:function(){return l;}});var a=i("777fffbe"),o=i("4f81a096"),s=a._(o);function l(n,...r){if("function"!=typeof n[Symbol.iterator])throw TypeError("values is not iterable");n=Array.from(n);let[i]=r;if(i&&2!==i.length||r.length>1){var a;let o=Uint32Array.from(n,(n,r)=>r);return r.length>1?(r=r.map(r=>n.map(r)),o.sort((n,i)=>{for(let a of r){let r=c(a[n],a[i]);if(r)return r;}})):(i=n.map(i),o.sort((n,r)=>c(i[n],i[r]))),a=n,Array.from(o,n=>a[n]);}return n.sort(u(i));}function u(n=s.default){if(n===s.default)return c;if("function"!=typeof n)throw TypeError("compare is not a function");return(r,i)=>{let a=n(r,i);return a||0===a?a:(0===n(i,i))-(0===n(r,r));};}function c(n,r){return(null==n||!(n>=n))-(null==r||!(r>=r))||(n<r?-1:n>r?1:0);}},"9479dab9":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{DOM:function(){return J;},LRUCache:function(){return ea;},Satistics:function(){return ep;},anchorTranslate:function(){return u;},anchorType:function(){return l;},applyAnchorClass:function(){return c;},bindAll:function(){return er;},decodePickingColor:function(){return m;},defaultValue:function(){return em;},encodePickingColor:function(){return g;},generateCatRamp:function(){return _;},generateColorRamp:function(){return v;},generateCustomRamp:function(){return x;},generateLinearRamp:function(){return y;},generateQuantizeRamp:function(){return b;},getDefaultDomain:function(){return w;},guid:function(){return ei;},isImageBitmap:function(){return ee;},isPC:function(){return en;},rgb2arr:function(){return p;}});var a,o=i("852bbaa9"),s=i("d1751d7c");s._(i("ef12aaa0"),r);var l=((a=l||{}).CENTER="center",a.TOP="top",a["TOP-LEFT"]="top-left",a["TOP-RIGHT"]="top-right",a.BOTTOM="bottom",a["BOTTOM-LEFT"]="bottom-left",a["BOTTOM-RIGHT"]="bottom-right",a.LEFT="left",a.RIGHT="right",a),u={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function c(n,r,i){let a=n.classList;for(let n in u)u.hasOwnProperty(n)&&a.remove(`l7-${i}-anchor-${n}`);a.add(`l7-${i}-anchor-${r}`);}var f=i("6b07dc07"),d=o._(f),h={};function p(n){let r=h.color(n),i=[0,0,0,0];return null!=r&&(i[0]=r.r/255,i[1]=r.g/255,i[2]=r.b/255,i[3]=r.opacity),i;}function m(n){let r=n&&n[0];return r+256*(n&&n[1])+65536*(n&&n[2])-1;}function g(n){return[n+1&255,n+1>>8&255,n+1>>8>>8&255];}function v(n){let r=window.document.createElement("canvas"),i=r.getContext("2d");r.width=256,r.height=1;let a=null,o=i.createLinearGradient(0,0,256,1),s=n.positions[0],l=n.positions[n.positions.length-1];for(let r=0;r<n.colors.length;++r){let i=(n.positions[r]-s)/(l-s);o.addColorStop(i,n.colors[r]);}return i.fillStyle=o,i.fillRect(0,0,256,1),a=new Uint8ClampedArray(i.getImageData(0,0,256,1).data),r=null,i=null,{data:a,width:256,height:1};}function y(n,r){let i=window.document.createElement("canvas"),a=i.getContext("2d");i.width=256,i.height=1;let o=a.createLinearGradient(0,0,256,1),s=r[1]-r[0];for(let i=0;i<n.colors.length;++i){let a=Math.max((n.positions[i]-r[0])/s,0);o.addColorStop(a,n.colors[i]);}a.fillStyle=o,a.fillRect(0,0,256,1);let l=a.getImageData(0,0,256,1).data,u=E(a,l);return i=null,a=null,u;}function _(n){let r=window.document.createElement("canvas"),i=r.getContext("2d");r.width=256,r.height=1;let a=i.createImageData(256,1);return a.data.fill(0),n.positions.forEach((r,i)=>{let o=p(n.colors[i]);a.data[4*r+0]=255*o[0],a.data[4*r+1]=255*o[1],a.data[4*r+2]=255*o[2],a.data[4*r+3]=255*o[3];}),r=null,i=null,a;}function b(n){let r=window.document.createElement("canvas"),i=r.getContext("2d");i.globalAlpha=1,r.width=256,r.height=1;let a=256/n.colors.length;for(let r=0;r<n.colors.length;r++)i.beginPath(),i.lineWidth=2,i.strokeStyle=n.colors[r],i.moveTo(r*a,0),i.lineTo((r+1)*a,0),i.stroke();let o=i.getImageData(0,0,256,1).data,s=E(i,o);return r=null,i=null,s;}function x(n,r){let i=window.document.createElement("canvas"),a=i.getContext("2d");a.globalAlpha=1,i.width=256,i.height=1;let o=r[1]-r[0];n.positions.length-n.colors.length!=1&&console.warn("positions \u7684\u6570\u5B57\u4E2A\u6570\u5E94\u5F53\u6BD4 colors \u7684\u6837\u5F0F\u591A\u4E00\u4E2A,poisitions \u7684\u9996\u5C3E\u503C\u4E00\u822C\u4E3A\u6570\u636E\u7684\u6700\u5927\u6700\u65B0\u503C");for(let i=0;i<n.colors.length;i++)a.beginPath(),a.lineWidth=2,a.strokeStyle=n.colors[i],a.moveTo((n.positions[i]-r[0])/o*255,0),a.lineTo((n.positions[i+1]-r[0])/o*255,0),a.stroke();let s=a.getImageData(0,0,256,1).data,l=E(a,s);return i=null,a=null,l;}function E(n,r){let i=n.createImageData(256,1);for(let n=0;n<i.data.length;n+=4)i.data[n+0]=r[n+0],i.data[n+1]=r[n+1],i.data[n+2]=r[n+2],i.data[n+3]=r[n+3];return i;}function w(n){return(null==n?void 0:n.type)==="cat"?[0,255]:[0,1];}i.e(h,{color:function(){return d.default;}}),s._(i("e717d1df"),r);var{pull:S}=s._(i("8f3cfa5a"),r).lodashUtil;function T(n){let r=n;return"string"==typeof n&&(r=window.document.getElementById(n)),r;}function A(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"");}function C(n){return A(n).split(/\s+/);}function O(n,r,i){let a=window.document.createElement(n);return r&&(a.className=r||""),i&&i.appendChild(a),a;}function M(n){let r=n.parentNode;r&&r.removeChild(n);}function R(n,r){if(void 0!==n.classList){let i=C(r);for(let r=0,a=i.length;r<a;r++)n.classList.add(i[r]);}else if(!k(n,r)){let i=N(n);I(n,(i?i+" ":"")+r);}}function P(n,r){void 0!==n.classList?C(r).forEach(r=>{n.classList.remove(r);}):I(n,A((" "+N(n)+" ").replace(" "+r+" "," ")));}function k(n,r){if(void 0!==n.classList)return n.classList.contains(r);let i=N(n);return i.length>0&&RegExp("(^|\\s)"+r+"(\\s|$)").test(i);}function I(n,r){n instanceof HTMLElement?n.className=r:n.className.baseVal=r;}function L(n,r,i){void 0===i?k(n,r)?P(n,r):R(n,r):i?R(n,r):P(n,r);}function N(n){return n instanceof SVGElement&&(n=n.correspondingElement),void 0===n.className.baseVal?n.className:n.className.baseVal;}function D(n){for(;n&&n.firstChild;)n.removeChild(n.firstChild);}var F=function(n){var r;let i=null==(r=null==document?void 0:document.documentElement)?void 0:r.style;if(!i)return n[0];for(let r in n)if(n[r]&&n[r]in i)return n[r];return n[0];}(["transform","WebkitTransform"]);function B(n,r){n.style[F]=r;}function j(){if("function"==typeof Event)window.dispatchEvent(new Event("resize"));else{let n=window.document.createEvent("UIEvents");n.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(n);}}function z(n){console.log("%c\n",["padding: "+(n.height/2-8)+"px "+n.width/2+"px;","line-height: "+n.height+"px;","background-image: url("+n.toDataURL()+");"].join(""));}function U(){var n;let r=window.document.querySelector('meta[name="viewport"]');if(!r)return 1;let i=(null==(n=r.content)?void 0:n.split(",")).find(n=>{let[r]=n.split("=");return"initial-scale"===r;});return i?1*i.split("=")[1]:1;}var V=1>U()?1:window.devicePixelRatio;function G(n,r){n.setAttribute("style",`${n.style.cssText}${r}`);}function H(n){return n.split(";").map(n=>n.trim()).filter(n=>n);}function W(n,r){var i;let a=S(H(null!=(i=n.getAttribute("style"))?i:""),...H(r));n.setAttribute("style",a.join(";"));}function X(n){return Object.entries(n).map(([n,r])=>`${n}: ${r}`).join(";");}function q(n,r){return{left:n.left-r.left,top:n.top-r.top,right:r.left+r.width-n.left-n.width,bottom:r.top+r.height-n.top-n.height};}function $(n,r){n.checked=r,r?n.setAttribute("checked","true"):n.removeAttribute("checked");}function Y(n){n.innerHTML="";}function Z(n){n.setAttribute("draggable","false");}function K(n,r){if("string"==typeof r){let i=document.createElement("div");for(i.innerHTML=r;i.firstChild;)n.append(i.firstChild);}else Array.isArray(r)?n.append(...r):n.append(r);}function Q(n,r){var i;let a=Array.isArray(r)?r:[r],o=n;for(;o instanceof Element&&o!==window.document.body;){if(a.find(n=>null==o?void 0:o.matches(n)))return o;o=null!=(i=null==o?void 0:o.parentElement)?i:null;}}var J={};function ee(n){return"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap;}i.e(J,{DPR:function(){return V;},addClass:function(){return R;},addStyle:function(){return G;},appendElementType:function(){return K;},clearChildren:function(){return Y;},create:function(){return O;},css2Style:function(){return X;},empty:function(){return D;},findParentElement:function(){return Q;},getClass:function(){return N;},getContainer:function(){return T;},getDiffRect:function(){return q;},getStyleList:function(){return H;},getViewPortScale:function(){return U;},hasClass:function(){return k;},printCanvas:function(){return z;},remove:function(){return M;},removeClass:function(){return P;},removeStyle:function(){return W;},setChecked:function(){return $;},setClass:function(){return I;},setTransform:function(){return B;},setUnDraggable:function(){return Z;},splitWords:function(){return C;},toggleClass:function(){return L;},triggerResize:function(){return j;},trim:function(){return A;}}),"function"==typeof importScripts||(()=>("blob:"===window.location.protocol?window.parent:window).location.href);var et=null==navigator?void 0:navigator.userAgent;function en(){let n=!0;for(let r of["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"])if(et.indexOf(r)>0){n=!1;break;}return n;}function er(n,r){n.forEach(n=>{r[n]&&(r[n]=r[n].bind(r));});}function ei(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{let r=16*Math.random()|0;return("x"===n?r:3&r|8).toString(16);});}et.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),et.indexOf("Android")>-1||et.indexOf("Adr"),s._(i("4749c5b7"),r),Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var ea=class{constructor(n=50,r){this.limit=n,this.destroy=r||this.defaultDestroy,this.order=[],this.clear();}clear(){this.order.forEach(n=>{this.delete(n);}),this.cache={},this.order=[];}get(n){let r=this.cache[n];return r&&(this.deleteOrder(n),this.appendOrder(n)),r;}set(n,r){this.cache[n]?this.delete(n):Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[n]=r,this.appendOrder(n);}delete(n){let r=this.cache[n];r&&(this.deleteCache(n),this.deleteOrder(n),this.destroy(r,n));}deleteCache(n){delete this.cache[n];}deleteOrder(n){let r=this.order.findIndex(r=>r===n);r>=0&&this.order.splice(r,1);}appendOrder(n){this.order.push(n);}defaultDestroy(n,r){return null;}};function eo(n){if(0===n.length)throw Error("max requires at least one data point");let r=n[0];for(let i=1;i<n.length;i++)n[i]>r&&(r=n[i]);return 1*r;}function es(n){if(0===n.length)throw Error("min requires at least one data point");let r=n[0];for(let i=1;i<n.length;i++)n[i]<r&&(r=n[i]);return 1*r;}function el(n){if(0===n.length)return 0;let r=1*n[0];for(let i=1;i<n.length;i++)r+=1*n[i];return r;}function eu(n){if(0===n.length)throw Error("mean requires at least one data point");return el(n)/n.length;}function ec(n){if(0===n.length)throw Error("mean requires at least one data point");if(n.length<3)return n[0];n.sort();let r=n[0],i=NaN,a=0,o=1;for(let s=1;s<n.length+1;s++)n[s]!==r?(o>a&&(a=o,i=r),o=1,r=n[s]):o++;return 1*i;}s._(i("d4ba3080"),r);var ef={min:es,max:eo,mean:eu,sum:el,mode:ec};function ed(n,r){return n.map(n=>n[r]);}function eh(n,r){return ef[n](r);}var ep={};function em(n,r){return null==n?r:n;}i.e(ep,{getColumn:function(){return ed;},getSatByColumn:function(){return eh;},max:function(){return eo;},mean:function(){return eu;},min:function(){return es;},mode:function(){return ec;},statMap:function(){return ef;},sum:function(){return el;}}),s._(i("594adbe7"),r);},"95d6ddea":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});var a=function(n){return n;};},"96b0a7e2":function(n,r,i){var a=i("da176c76"),o=/^\s+/;n.exports=function(n){return n?n.slice(0,a(n)+1).replace(o,""):n;};},"97845be7":function(n,r,i){"use strict";function a(n,r,i){var a=n._x1-n._x0,o=r-n._x1,s=(n._y1-n._y0)/(a||o<0&&-0),l=(i-n._y1)/(o||a<0&&-0);return((s<0?-1:1)+(l<0?-1:1))*Math.min(Math.abs(s),Math.abs(l),.5*Math.abs((s*o+l*a)/(a+o)))||0;}function o(n,r){var i=n._x1-n._x0;return i?(3*(n._y1-n._y0)/i-r)/2:r;}function s(n,r,i){var a=n._x0,o=n._y0,s=n._x1,l=n._y1,u=(s-a)/3;n._context.bezierCurveTo(a+u,o+u*r,s-u,l-u*i,s,l);}function l(n){this._context=n;}function u(n){this._context=new c(n);}function c(n){this._context=n;}function f(n){return new l(n);}function d(n){return new u(n);}i.d(r,"__esModule",{value:!0}),i.e(r,{monotoneX:function(){return f;},monotoneY:function(){return d;}}),l.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0;},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:s(this,this._t0,o(this,this._t0));}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line;},point:function(n,r){var i=NaN;if(r=+r,(n=+n)!==this._x1||r!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 1:this._point=2;break;case 2:this._point=3,s(this,o(this,i=a(this,n,r)),i);break;default:s(this,this._t0,i=a(this,n,r));}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=r,this._t0=i;}}},(u.prototype=Object.create(l.prototype)).point=function(n,r){l.prototype.point.call(this,r,n);},c.prototype={moveTo:function(n,r){this._context.moveTo(r,n);},closePath:function(){this._context.closePath();},lineTo:function(n,r){this._context.lineTo(r,n);},bezierCurveTo:function(n,r,i,a,o,s){this._context.bezierCurveTo(r,n,a,i,s,o);}};},"97b08eac":function(n,r,i){"use strict";let a;i.d(r,"__esModule",{value:!0}),i.e(r,{AddressMode:function(){return X;},BlendFactor:function(){return H;},BlendMode:function(){return W;},BufferFrequencyHint:function(){return K;},BufferUsage:function(){return Z;},ChannelWriteMask:function(){return en;},ClipSpaceNearZ:function(){return eo;},CompareFunction:function(){return U;},CullMode:function(){return G;},FilterMode:function(){return q;},Format:function(){return ef;},MipmapFilterMode:function(){return $;},PrimitiveTopology:function(){return Y;},StencilOp:function(){return er;},TextureUsage:function(){return et;},TransparentBlack:function(){return eL;},VertexStepMode:function(){return Q;},ViewportOrigin:function(){return ea;},WebGLDeviceContribution:function(){return tJ;},WebGPUDeviceContribution:function(){return nk;},bindingsDescriptorCopy:function(){return te;},bindingsDescriptorEquals:function(){return eQ;},colorNewFromRGBA:function(){return eI;},inputLayoutDescriptorCopy:function(){return ti;},inputLayoutDescriptorEquals:function(){return e6;},preprocessShader_GLSL:function(){return tw;},renderPipelineDescriptorCopy:function(){return tt;},renderPipelineDescriptorEquals:function(){return e3;}});var o,s,l,u,c,f,d,h,p,m,g,v,y,_,b,x,E,w,S,T,A,C,O,M,R,P,k,I,L,N,D,F,B,j,z,U,V,G,H,W,X,q,$,Y,Z,K,Q,J,ee,et,en,er,ei,ea,eo,es,el,eu,ec,ef,ed,eh,ep,em,eg,ev=i("777fffbe"),ey=ev._(i("83684c30")),e_=ev._(i("1f338b89")),eb=ev._(i("3715e357")),ex=i("3862611d"),eE=ev._(i("ffac7795"));function ew(n,r,i){return n<<16|r<<8|i;}function eS(n){return n>>>8&255;}function eT(n){return n>>>16&255;}function eA(n){switch(n){case el.F32:case el.U32:case el.S32:return 4;case el.U16:case el.S16:case el.F16:return 2;case el.U8:case el.S8:return 1;default:throw Error("whoops");}}function eC(n){var r=255&n;if(r&ec.Depth)return ei.Depth;if(r&ec.Normalized)return ei.Float;var i=eT(n);if(i===el.F16||i===el.F32)return ei.Float;if(i===el.U8||i===el.U16||i===el.U32)return ei.Uint;if(i===el.S8||i===el.S16||i===el.S32)return ei.Sint;throw Error("whoops");}function eO(n,r){if(void 0===r&&(r=""),!n)throw Error("Assert fail: ".concat(r));}function eM(n){if(null!=n)return n;throw Error("Missing object");}function eR(n,r){return n.r===r.r&&n.g===r.g&&n.b===r.b&&n.a===r.a;}function eP(n,r){n.r=r.r,n.g=r.g,n.b=r.b,n.a=r.a;}function ek(n){return{r:n.r,g:n.g,b:n.b,a:n.a};}function eI(n,r,i,a){return void 0===a&&(a=1),{r:n,g:r,b:i,a:a};}(c=j||(j={}))[c.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",c[c.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",c[c.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",c[c.POINTS=0]="POINTS",c[c.LINES=1]="LINES",c[c.LINE_LOOP=2]="LINE_LOOP",c[c.LINE_STRIP=3]="LINE_STRIP",c[c.TRIANGLES=4]="TRIANGLES",c[c.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",c[c.TRIANGLE_FAN=6]="TRIANGLE_FAN",c[c.ZERO=0]="ZERO",c[c.ONE=1]="ONE",c[c.SRC_COLOR=768]="SRC_COLOR",c[c.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",c[c.SRC_ALPHA=770]="SRC_ALPHA",c[c.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",c[c.DST_ALPHA=772]="DST_ALPHA",c[c.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",c[c.DST_COLOR=774]="DST_COLOR",c[c.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",c[c.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",c[c.CONSTANT_COLOR=32769]="CONSTANT_COLOR",c[c.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",c[c.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",c[c.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",c[c.FUNC_ADD=32774]="FUNC_ADD",c[c.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",c[c.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",c[c.BLEND_EQUATION=32777]="BLEND_EQUATION",c[c.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",c[c.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",c[c.BLEND_DST_RGB=32968]="BLEND_DST_RGB",c[c.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",c[c.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",c[c.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",c[c.BLEND_COLOR=32773]="BLEND_COLOR",c[c.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",c[c.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",c[c.LINE_WIDTH=2849]="LINE_WIDTH",c[c.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",c[c.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",c[c.CULL_FACE_MODE=2885]="CULL_FACE_MODE",c[c.FRONT_FACE=2886]="FRONT_FACE",c[c.DEPTH_RANGE=2928]="DEPTH_RANGE",c[c.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",c[c.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",c[c.DEPTH_FUNC=2932]="DEPTH_FUNC",c[c.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",c[c.STENCIL_FUNC=2962]="STENCIL_FUNC",c[c.STENCIL_FAIL=2964]="STENCIL_FAIL",c[c.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",c[c.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",c[c.STENCIL_REF=2967]="STENCIL_REF",c[c.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",c[c.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",c[c.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",c[c.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",c[c.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",c[c.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",c[c.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",c[c.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",c[c.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",c[c.VIEWPORT=2978]="VIEWPORT",c[c.SCISSOR_BOX=3088]="SCISSOR_BOX",c[c.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",c[c.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",c[c.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",c[c.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",c[c.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",c[c.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",c[c.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",c[c.RED_BITS=3410]="RED_BITS",c[c.GREEN_BITS=3411]="GREEN_BITS",c[c.BLUE_BITS=3412]="BLUE_BITS",c[c.ALPHA_BITS=3413]="ALPHA_BITS",c[c.DEPTH_BITS=3414]="DEPTH_BITS",c[c.STENCIL_BITS=3415]="STENCIL_BITS",c[c.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",c[c.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",c[c.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",c[c.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",c[c.SAMPLES=32937]="SAMPLES",c[c.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",c[c.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",c[c.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",c[c.VENDOR=7936]="VENDOR",c[c.RENDERER=7937]="RENDERER",c[c.VERSION=7938]="VERSION",c[c.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",c[c.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",c[c.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",c[c.STATIC_DRAW=35044]="STATIC_DRAW",c[c.STREAM_DRAW=35040]="STREAM_DRAW",c[c.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",c[c.ARRAY_BUFFER=34962]="ARRAY_BUFFER",c[c.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",c[c.BUFFER_SIZE=34660]="BUFFER_SIZE",c[c.BUFFER_USAGE=34661]="BUFFER_USAGE",c[c.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",c[c.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",c[c.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",c[c.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",c[c.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",c[c.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",c[c.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",c[c.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",c[c.CULL_FACE=2884]="CULL_FACE",c[c.FRONT=1028]="FRONT",c[c.BACK=1029]="BACK",c[c.FRONT_AND_BACK=1032]="FRONT_AND_BACK",c[c.BLEND=3042]="BLEND",c[c.DEPTH_TEST=2929]="DEPTH_TEST",c[c.DITHER=3024]="DITHER",c[c.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",c[c.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",c[c.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",c[c.SCISSOR_TEST=3089]="SCISSOR_TEST",c[c.STENCIL_TEST=2960]="STENCIL_TEST",c[c.NO_ERROR=0]="NO_ERROR",c[c.INVALID_ENUM=1280]="INVALID_ENUM",c[c.INVALID_VALUE=1281]="INVALID_VALUE",c[c.INVALID_OPERATION=1282]="INVALID_OPERATION",c[c.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",c[c.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",c[c.CW=2304]="CW",c[c.CCW=2305]="CCW",c[c.DONT_CARE=4352]="DONT_CARE",c[c.FASTEST=4353]="FASTEST",c[c.NICEST=4354]="NICEST",c[c.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",c[c.BYTE=5120]="BYTE",c[c.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",c[c.SHORT=5122]="SHORT",c[c.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",c[c.INT=5124]="INT",c[c.UNSIGNED_INT=5125]="UNSIGNED_INT",c[c.FLOAT=5126]="FLOAT",c[c.DOUBLE=5130]="DOUBLE",c[c.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",c[c.ALPHA=6406]="ALPHA",c[c.RGB=6407]="RGB",c[c.RGBA=6408]="RGBA",c[c.LUMINANCE=6409]="LUMINANCE",c[c.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",c[c.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",c[c.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",c[c.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",c[c.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",c[c.VERTEX_SHADER=35633]="VERTEX_SHADER",c[c.COMPILE_STATUS=35713]="COMPILE_STATUS",c[c.DELETE_STATUS=35712]="DELETE_STATUS",c[c.LINK_STATUS=35714]="LINK_STATUS",c[c.VALIDATE_STATUS=35715]="VALIDATE_STATUS",c[c.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",c[c.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",c[c.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",c[c.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",c[c.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",c[c.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",c[c.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",c[c.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",c[c.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",c[c.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",c[c.SHADER_TYPE=35663]="SHADER_TYPE",c[c.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",c[c.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",c[c.NEVER=512]="NEVER",c[c.ALWAYS=519]="ALWAYS",c[c.LESS=513]="LESS",c[c.EQUAL=514]="EQUAL",c[c.LEQUAL=515]="LEQUAL",c[c.GREATER=516]="GREATER",c[c.GEQUAL=518]="GEQUAL",c[c.NOTEQUAL=517]="NOTEQUAL",c[c.KEEP=7680]="KEEP",c[c.REPLACE=7681]="REPLACE",c[c.INCR=7682]="INCR",c[c.DECR=7683]="DECR",c[c.INVERT=5386]="INVERT",c[c.INCR_WRAP=34055]="INCR_WRAP",c[c.DECR_WRAP=34056]="DECR_WRAP",c[c.NEAREST=9728]="NEAREST",c[c.LINEAR=9729]="LINEAR",c[c.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",c[c.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",c[c.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",c[c.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",c[c.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",c[c.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",c[c.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",c[c.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",c[c.TEXTURE_2D=3553]="TEXTURE_2D",c[c.TEXTURE=5890]="TEXTURE",c[c.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",c[c.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",c[c.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",c[c.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",c[c.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",c[c.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",c[c.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",c[c.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",c[c.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",c[c.TEXTURE0=33984]="TEXTURE0",c[c.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",c[c.REPEAT=10497]="REPEAT",c[c.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",c[c.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",c[c.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",c[c.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",c[c.FLOAT_VEC2=35664]="FLOAT_VEC2",c[c.FLOAT_VEC3=35665]="FLOAT_VEC3",c[c.FLOAT_VEC4=35666]="FLOAT_VEC4",c[c.INT_VEC2=35667]="INT_VEC2",c[c.INT_VEC3=35668]="INT_VEC3",c[c.INT_VEC4=35669]="INT_VEC4",c[c.BOOL=35670]="BOOL",c[c.BOOL_VEC2=35671]="BOOL_VEC2",c[c.BOOL_VEC3=35672]="BOOL_VEC3",c[c.BOOL_VEC4=35673]="BOOL_VEC4",c[c.FLOAT_MAT2=35674]="FLOAT_MAT2",c[c.FLOAT_MAT3=35675]="FLOAT_MAT3",c[c.FLOAT_MAT4=35676]="FLOAT_MAT4",c[c.SAMPLER_2D=35678]="SAMPLER_2D",c[c.SAMPLER_CUBE=35680]="SAMPLER_CUBE",c[c.LOW_FLOAT=36336]="LOW_FLOAT",c[c.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",c[c.HIGH_FLOAT=36338]="HIGH_FLOAT",c[c.LOW_INT=36339]="LOW_INT",c[c.MEDIUM_INT=36340]="MEDIUM_INT",c[c.HIGH_INT=36341]="HIGH_INT",c[c.FRAMEBUFFER=36160]="FRAMEBUFFER",c[c.RENDERBUFFER=36161]="RENDERBUFFER",c[c.RGBA4=32854]="RGBA4",c[c.RGB5_A1=32855]="RGB5_A1",c[c.RGB565=36194]="RGB565",c[c.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",c[c.STENCIL_INDEX=6401]="STENCIL_INDEX",c[c.STENCIL_INDEX8=36168]="STENCIL_INDEX8",c[c.DEPTH_STENCIL=34041]="DEPTH_STENCIL",c[c.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",c[c.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",c[c.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",c[c.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",c[c.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",c[c.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",c[c.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",c[c.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",c[c.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",c[c.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",c[c.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",c[c.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",c[c.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",c[c.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",c[c.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",c[c.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",c[c.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",c[c.NONE=0]="NONE",c[c.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",c[c.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",c[c.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",c[c.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",c[c.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",c[c.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",c[c.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",c[c.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",c[c.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",c[c.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",c[c.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",c[c.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",c[c.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",c[c.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",c[c.READ_BUFFER=3074]="READ_BUFFER",c[c.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",c[c.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",c[c.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",c[c.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",c[c.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",c[c.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",c[c.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",c[c.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",c[c.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",c[c.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",c[c.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",c[c.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",c[c.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",c[c.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",c[c.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",c[c.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",c[c.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",c[c.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",c[c.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",c[c.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",c[c.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",c[c.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",c[c.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",c[c.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",c[c.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",c[c.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",c[c.RED=6403]="RED",c[c.RGB8=32849]="RGB8",c[c.RGBA8=32856]="RGBA8",c[c.RGB10_A2=32857]="RGB10_A2",c[c.TEXTURE_3D=32879]="TEXTURE_3D",c[c.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",c[c.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",c[c.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",c[c.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",c[c.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",c[c.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",c[c.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",c[c.SRGB=35904]="SRGB",c[c.SRGB8=35905]="SRGB8",c[c.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",c[c.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",c[c.RGBA32F=34836]="RGBA32F",c[c.RGB32F=34837]="RGB32F",c[c.RGBA16F=34842]="RGBA16F",c[c.RGB16F=34843]="RGB16F",c[c.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",c[c.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",c[c.R11F_G11F_B10F=35898]="R11F_G11F_B10F",c[c.RGB9_E5=35901]="RGB9_E5",c[c.RGBA32UI=36208]="RGBA32UI",c[c.RGB32UI=36209]="RGB32UI",c[c.RGBA16UI=36214]="RGBA16UI",c[c.RGB16UI=36215]="RGB16UI",c[c.RGBA8UI=36220]="RGBA8UI",c[c.RGB8UI=36221]="RGB8UI",c[c.RGBA32I=36226]="RGBA32I",c[c.RGB32I=36227]="RGB32I",c[c.RGBA16I=36232]="RGBA16I",c[c.RGB16I=36233]="RGB16I",c[c.RGBA8I=36238]="RGBA8I",c[c.RGB8I=36239]="RGB8I",c[c.RED_INTEGER=36244]="RED_INTEGER",c[c.RGB_INTEGER=36248]="RGB_INTEGER",c[c.RGBA_INTEGER=36249]="RGBA_INTEGER",c[c.R8=33321]="R8",c[c.RG8=33323]="RG8",c[c.R16F=33325]="R16F",c[c.R32F=33326]="R32F",c[c.RG16F=33327]="RG16F",c[c.RG32F=33328]="RG32F",c[c.R8I=33329]="R8I",c[c.R8UI=33330]="R8UI",c[c.R16I=33331]="R16I",c[c.R16UI=33332]="R16UI",c[c.R32I=33333]="R32I",c[c.R32UI=33334]="R32UI",c[c.RG8I=33335]="RG8I",c[c.RG8UI=33336]="RG8UI",c[c.RG16I=33337]="RG16I",c[c.RG16UI=33338]="RG16UI",c[c.RG32I=33339]="RG32I",c[c.RG32UI=33340]="RG32UI",c[c.R8_SNORM=36756]="R8_SNORM",c[c.RG8_SNORM=36757]="RG8_SNORM",c[c.RGB8_SNORM=36758]="RGB8_SNORM",c[c.RGBA8_SNORM=36759]="RGBA8_SNORM",c[c.RGB10_A2UI=36975]="RGB10_A2UI",c[c.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",c[c.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",c[c.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",c[c.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",c[c.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",c[c.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",c[c.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",c[c.HALF_FLOAT=5131]="HALF_FLOAT",c[c.RG=33319]="RG",c[c.RG_INTEGER=33320]="RG_INTEGER",c[c.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",c[c.CURRENT_QUERY=34917]="CURRENT_QUERY",c[c.QUERY_RESULT=34918]="QUERY_RESULT",c[c.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",c[c.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",c[c.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",c[c.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",c[c.DRAW_BUFFER0=34853]="DRAW_BUFFER0",c[c.DRAW_BUFFER1=34854]="DRAW_BUFFER1",c[c.DRAW_BUFFER2=34855]="DRAW_BUFFER2",c[c.DRAW_BUFFER3=34856]="DRAW_BUFFER3",c[c.DRAW_BUFFER4=34857]="DRAW_BUFFER4",c[c.DRAW_BUFFER5=34858]="DRAW_BUFFER5",c[c.DRAW_BUFFER6=34859]="DRAW_BUFFER6",c[c.DRAW_BUFFER7=34860]="DRAW_BUFFER7",c[c.DRAW_BUFFER8=34861]="DRAW_BUFFER8",c[c.DRAW_BUFFER9=34862]="DRAW_BUFFER9",c[c.DRAW_BUFFER10=34863]="DRAW_BUFFER10",c[c.DRAW_BUFFER11=34864]="DRAW_BUFFER11",c[c.DRAW_BUFFER12=34865]="DRAW_BUFFER12",c[c.DRAW_BUFFER13=34866]="DRAW_BUFFER13",c[c.DRAW_BUFFER14=34867]="DRAW_BUFFER14",c[c.DRAW_BUFFER15=34868]="DRAW_BUFFER15",c[c.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",c[c.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",c[c.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",c[c.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",c[c.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",c[c.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",c[c.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",c[c.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",c[c.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",c[c.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",c[c.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",c[c.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",c[c.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",c[c.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",c[c.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",c[c.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",c[c.SAMPLER_3D=35679]="SAMPLER_3D",c[c.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",c[c.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",c[c.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",c[c.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",c[c.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",c[c.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",c[c.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",c[c.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",c[c.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",c[c.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",c[c.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",c[c.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",c[c.MAX_SAMPLES=36183]="MAX_SAMPLES",c[c.SAMPLER_BINDING=35097]="SAMPLER_BINDING",c[c.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",c[c.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",c[c.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",c[c.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",c[c.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",c[c.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",c[c.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",c[c.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",c[c.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",c[c.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",c[c.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",c[c.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",c[c.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",c[c.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",c[c.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",c[c.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",c[c.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",c[c.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",c[c.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",c[c.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",c[c.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",c[c.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",c[c.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",c[c.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",c[c.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",c[c.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",c[c.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",c[c.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",c[c.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",c[c.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",c[c.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",c[c.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",c[c.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",c[c.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",c[c.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",c[c.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",c[c.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",c[c.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",c[c.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",c[c.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",c[c.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",c[c.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",c[c.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",c[c.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",c[c.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",c[c.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",c[c.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",c[c.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",c[c.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",c[c.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",c[c.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",c[c.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",c[c.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",c[c.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",c[c.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",c[c.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",c[c.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",c[c.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",c[c.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",c[c.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",c[c.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",c[c.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",c[c.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",c[c.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",c[c.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",c[c.UNIFORM_TYPE=35383]="UNIFORM_TYPE",c[c.UNIFORM_SIZE=35384]="UNIFORM_SIZE",c[c.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",c[c.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",c[c.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",c[c.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",c[c.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",c[c.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",c[c.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",c[c.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",c[c.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",c[c.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",c[c.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",c[c.OBJECT_TYPE=37138]="OBJECT_TYPE",c[c.SYNC_CONDITION=37139]="SYNC_CONDITION",c[c.SYNC_STATUS=37140]="SYNC_STATUS",c[c.SYNC_FLAGS=37141]="SYNC_FLAGS",c[c.SYNC_FENCE=37142]="SYNC_FENCE",c[c.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",c[c.UNSIGNALED=37144]="UNSIGNALED",c[c.SIGNALED=37145]="SIGNALED",c[c.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",c[c.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",c[c.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",c[c.WAIT_FAILED=37149]="WAIT_FAILED",c[c.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",c[c.COLOR=6144]="COLOR",c[c.DEPTH=6145]="DEPTH",c[c.STENCIL=6146]="STENCIL",c[c.MIN=32775]="MIN",c[c.MAX=32776]="MAX",c[c.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",c[c.STREAM_READ=35041]="STREAM_READ",c[c.STREAM_COPY=35042]="STREAM_COPY",c[c.STATIC_READ=35045]="STATIC_READ",c[c.STATIC_COPY=35046]="STATIC_COPY",c[c.DYNAMIC_READ=35049]="DYNAMIC_READ",c[c.DYNAMIC_COPY=35050]="DYNAMIC_COPY",c[c.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",c[c.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",c[c.INVALID_INDEX=4294967295]="INVALID_INDEX",c[c.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",c[c.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",c[c.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE",c[c.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",c[c.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",c[c.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",c[c.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",c[c.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",c[c.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",c[c.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",c[c.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",c[c.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",c[c.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",c[c.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",c[c.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",c[c.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",c[c.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",c[c.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",c[c.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",c[c.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",c[c.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",c[c.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",c[c.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",c[c.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",c[c.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",c[c.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",c[c.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",c[c.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",c[c.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",c[c.UNSIGNED_INT_24_8_WEBGL=34042]="UNSIGNED_INT_24_8_WEBGL",c[c.HALF_FLOAT_OES=36193]="HALF_FLOAT_OES",c[c.RGBA32F_EXT=34836]="RGBA32F_EXT",c[c.RGB32F_EXT=34837]="RGB32F_EXT",c[c.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT",c[c.UNSIGNED_NORMALIZED_EXT=35863]="UNSIGNED_NORMALIZED_EXT",c[c.MIN_EXT=32775]="MIN_EXT",c[c.MAX_EXT=32776]="MAX_EXT",c[c.SRGB_EXT=35904]="SRGB_EXT",c[c.SRGB_ALPHA_EXT=35906]="SRGB_ALPHA_EXT",c[c.SRGB8_ALPHA8_EXT=35907]="SRGB8_ALPHA8_EXT",c[c.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT",c[c.FRAGMENT_SHADER_DERIVATIVE_HINT_OES=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT_OES",c[c.COLOR_ATTACHMENT0_WEBGL=36064]="COLOR_ATTACHMENT0_WEBGL",c[c.COLOR_ATTACHMENT1_WEBGL=36065]="COLOR_ATTACHMENT1_WEBGL",c[c.COLOR_ATTACHMENT2_WEBGL=36066]="COLOR_ATTACHMENT2_WEBGL",c[c.COLOR_ATTACHMENT3_WEBGL=36067]="COLOR_ATTACHMENT3_WEBGL",c[c.COLOR_ATTACHMENT4_WEBGL=36068]="COLOR_ATTACHMENT4_WEBGL",c[c.COLOR_ATTACHMENT5_WEBGL=36069]="COLOR_ATTACHMENT5_WEBGL",c[c.COLOR_ATTACHMENT6_WEBGL=36070]="COLOR_ATTACHMENT6_WEBGL",c[c.COLOR_ATTACHMENT7_WEBGL=36071]="COLOR_ATTACHMENT7_WEBGL",c[c.COLOR_ATTACHMENT8_WEBGL=36072]="COLOR_ATTACHMENT8_WEBGL",c[c.COLOR_ATTACHMENT9_WEBGL=36073]="COLOR_ATTACHMENT9_WEBGL",c[c.COLOR_ATTACHMENT10_WEBGL=36074]="COLOR_ATTACHMENT10_WEBGL",c[c.COLOR_ATTACHMENT11_WEBGL=36075]="COLOR_ATTACHMENT11_WEBGL",c[c.COLOR_ATTACHMENT12_WEBGL=36076]="COLOR_ATTACHMENT12_WEBGL",c[c.COLOR_ATTACHMENT13_WEBGL=36077]="COLOR_ATTACHMENT13_WEBGL",c[c.COLOR_ATTACHMENT14_WEBGL=36078]="COLOR_ATTACHMENT14_WEBGL",c[c.COLOR_ATTACHMENT15_WEBGL=36079]="COLOR_ATTACHMENT15_WEBGL",c[c.DRAW_BUFFER0_WEBGL=34853]="DRAW_BUFFER0_WEBGL",c[c.DRAW_BUFFER1_WEBGL=34854]="DRAW_BUFFER1_WEBGL",c[c.DRAW_BUFFER2_WEBGL=34855]="DRAW_BUFFER2_WEBGL",c[c.DRAW_BUFFER3_WEBGL=34856]="DRAW_BUFFER3_WEBGL",c[c.DRAW_BUFFER4_WEBGL=34857]="DRAW_BUFFER4_WEBGL",c[c.DRAW_BUFFER5_WEBGL=34858]="DRAW_BUFFER5_WEBGL",c[c.DRAW_BUFFER6_WEBGL=34859]="DRAW_BUFFER6_WEBGL",c[c.DRAW_BUFFER7_WEBGL=34860]="DRAW_BUFFER7_WEBGL",c[c.DRAW_BUFFER8_WEBGL=34861]="DRAW_BUFFER8_WEBGL",c[c.DRAW_BUFFER9_WEBGL=34862]="DRAW_BUFFER9_WEBGL",c[c.DRAW_BUFFER10_WEBGL=34863]="DRAW_BUFFER10_WEBGL",c[c.DRAW_BUFFER11_WEBGL=34864]="DRAW_BUFFER11_WEBGL",c[c.DRAW_BUFFER12_WEBGL=34865]="DRAW_BUFFER12_WEBGL",c[c.DRAW_BUFFER13_WEBGL=34866]="DRAW_BUFFER13_WEBGL",c[c.DRAW_BUFFER14_WEBGL=34867]="DRAW_BUFFER14_WEBGL",c[c.DRAW_BUFFER15_WEBGL=34868]="DRAW_BUFFER15_WEBGL",c[c.MAX_COLOR_ATTACHMENTS_WEBGL=36063]="MAX_COLOR_ATTACHMENTS_WEBGL",c[c.MAX_DRAW_BUFFERS_WEBGL=34852]="MAX_DRAW_BUFFERS_WEBGL",c[c.VERTEX_ARRAY_BINDING_OES=34229]="VERTEX_ARRAY_BINDING_OES",c[c.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",c[c.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",c[c.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",c[c.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",c[c.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",c[c.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",c[c.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT",(f=z||(z={}))[f.Buffer=0]="Buffer",f[f.Texture=1]="Texture",f[f.RenderTarget=2]="RenderTarget",f[f.Sampler=3]="Sampler",f[f.Program=4]="Program",f[f.Bindings=5]="Bindings",f[f.InputLayout=6]="InputLayout",f[f.RenderPipeline=7]="RenderPipeline",f[f.ComputePipeline=8]="ComputePipeline",f[f.Readback=9]="Readback",f[f.QueryPool=10]="QueryPool",f[f.RenderBundle=11]="RenderBundle",(d=U||(U={}))[d.NEVER=512]="NEVER",d[d.LESS=513]="LESS",d[d.EQUAL=514]="EQUAL",d[d.LEQUAL=515]="LEQUAL",d[d.GREATER=516]="GREATER",d[d.NOTEQUAL=517]="NOTEQUAL",d[d.GEQUAL=518]="GEQUAL",d[d.ALWAYS=519]="ALWAYS",(h=V||(V={}))[h.CCW=2305]="CCW",h[h.CW=2304]="CW",(p=G||(G={}))[p.NONE=0]="NONE",p[p.FRONT=1]="FRONT",p[p.BACK=2]="BACK",p[p.FRONT_AND_BACK=3]="FRONT_AND_BACK",(m=H||(H={}))[m.ZERO=0]="ZERO",m[m.ONE=1]="ONE",m[m.SRC=768]="SRC",m[m.ONE_MINUS_SRC=769]="ONE_MINUS_SRC",m[m.DST=774]="DST",m[m.ONE_MINUS_DST=775]="ONE_MINUS_DST",m[m.SRC_ALPHA=770]="SRC_ALPHA",m[m.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",m[m.DST_ALPHA=772]="DST_ALPHA",m[m.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",m[m.CONST=32769]="CONST",m[m.ONE_MINUS_CONSTANT=32770]="ONE_MINUS_CONSTANT",m[m.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",(g=W||(W={}))[g.ADD=32774]="ADD",g[g.SUBSTRACT=32778]="SUBSTRACT",g[g.REVERSE_SUBSTRACT=32779]="REVERSE_SUBSTRACT",g[g.MIN=32775]="MIN",g[g.MAX=32776]="MAX",(v=X||(X={}))[v.CLAMP_TO_EDGE=0]="CLAMP_TO_EDGE",v[v.REPEAT=1]="REPEAT",v[v.MIRRORED_REPEAT=2]="MIRRORED_REPEAT",(y=q||(q={}))[y.POINT=0]="POINT",y[y.BILINEAR=1]="BILINEAR",(_=$||($={}))[_.NO_MIP=0]="NO_MIP",_[_.NEAREST=1]="NEAREST",_[_.LINEAR=2]="LINEAR",(b=Y||(Y={}))[b.POINTS=0]="POINTS",b[b.TRIANGLES=1]="TRIANGLES",b[b.TRIANGLE_STRIP=2]="TRIANGLE_STRIP",b[b.LINES=3]="LINES",b[b.LINE_STRIP=4]="LINE_STRIP",(x=Z||(Z={}))[x.MAP_READ=1]="MAP_READ",x[x.MAP_WRITE=2]="MAP_WRITE",x[x.COPY_SRC=4]="COPY_SRC",x[x.COPY_DST=8]="COPY_DST",x[x.INDEX=16]="INDEX",x[x.VERTEX=32]="VERTEX",x[x.UNIFORM=64]="UNIFORM",x[x.STORAGE=128]="STORAGE",x[x.INDIRECT=256]="INDIRECT",x[x.QUERY_RESOLVE=512]="QUERY_RESOLVE",(E=K||(K={}))[E.STATIC=1]="STATIC",E[E.DYNAMIC=2]="DYNAMIC",(w=Q||(Q={}))[w.VERTEX=1]="VERTEX",w[w.INSTANCE=2]="INSTANCE",(J||(J={})).LOADED="loaded",(S=ee||(ee={}))[S.TEXTURE_2D=0]="TEXTURE_2D",S[S.TEXTURE_2D_ARRAY=1]="TEXTURE_2D_ARRAY",S[S.TEXTURE_3D=2]="TEXTURE_3D",S[S.TEXTURE_CUBE_MAP=3]="TEXTURE_CUBE_MAP",(T=et||(et={}))[T.SAMPLED=1]="SAMPLED",T[T.RENDER_TARGET=2]="RENDER_TARGET",T[T.STORAGE=4]="STORAGE",(A=en||(en={}))[A.NONE=0]="NONE",A[A.RED=1]="RED",A[A.GREEN=2]="GREEN",A[A.BLUE=4]="BLUE",A[A.ALPHA=8]="ALPHA",A[A.RGB=7]="RGB",A[A.ALL=15]="ALL",(C=er||(er={}))[C.KEEP=7680]="KEEP",C[C.ZERO=0]="ZERO",C[C.REPLACE=7681]="REPLACE",C[C.INVERT=5386]="INVERT",C[C.INCREMENT_CLAMP=7682]="INCREMENT_CLAMP",C[C.DECREMENT_CLAMP=7683]="DECREMENT_CLAMP",C[C.INCREMENT_WRAP=34055]="INCREMENT_WRAP",C[C.DECREMENT_WRAP=34056]="DECREMENT_WRAP",(O=ei||(ei={}))[O.Float=0]="Float",O[O.UnfilterableFloat=1]="UnfilterableFloat",O[O.Uint=2]="Uint",O[O.Sint=3]="Sint",O[O.Depth=4]="Depth",(M=ea||(ea={}))[M.LOWER_LEFT=0]="LOWER_LEFT",M[M.UPPER_LEFT=1]="UPPER_LEFT",(R=eo||(eo={}))[R.NEGATIVE_ONE=0]="NEGATIVE_ONE",R[R.ZERO=1]="ZERO",(P=es||(es={}))[P.OcclusionConservative=0]="OcclusionConservative",(k=el||(el={}))[k.U8=1]="U8",k[k.U16=2]="U16",k[k.U32=3]="U32",k[k.S8=4]="S8",k[k.S16=5]="S16",k[k.S32=6]="S32",k[k.F16=7]="F16",k[k.F32=8]="F32",k[k.BC1=65]="BC1",k[k.BC2=66]="BC2",k[k.BC3=67]="BC3",k[k.BC4_UNORM=68]="BC4_UNORM",k[k.BC4_SNORM=69]="BC4_SNORM",k[k.BC5_UNORM=70]="BC5_UNORM",k[k.BC5_SNORM=71]="BC5_SNORM",k[k.U16_PACKED_5551=97]="U16_PACKED_5551",k[k.U16_PACKED_565=98]="U16_PACKED_565",k[k.D24=129]="D24",k[k.D32F=130]="D32F",k[k.D24S8=131]="D24S8",k[k.D32FS8=132]="D32FS8",(I=eu||(eu={}))[I.R=1]="R",I[I.RG=2]="RG",I[I.RGB=3]="RGB",I[I.RGBA=4]="RGBA",I[I.A=5]="A",(L=ec||(ec={}))[L.None=0]="None",L[L.Normalized=1]="Normalized",L[L.sRGB=2]="sRGB",L[L.Depth=4]="Depth",L[L.Stencil=8]="Stencil",L[L.RenderTarget=16]="RenderTarget",L[L.Luminance=32]="Luminance",(N=ef||(ef={}))[N.ALPHA=ew(el.U8,eu.A,ec.None)]="ALPHA",N[N.U8_LUMINANCE=ew(el.U8,eu.A,ec.Luminance)]="U8_LUMINANCE",N[N.F16_LUMINANCE=ew(el.F16,eu.A,ec.Luminance)]="F16_LUMINANCE",N[N.F32_LUMINANCE=ew(el.F32,eu.A,ec.Luminance)]="F32_LUMINANCE",N[N.F16_R=ew(el.F16,eu.R,ec.None)]="F16_R",N[N.F16_RG=ew(el.F16,eu.RG,ec.None)]="F16_RG",N[N.F16_RGB=ew(el.F16,eu.RGB,ec.None)]="F16_RGB",N[N.F16_RGBA=ew(el.F16,eu.RGBA,ec.None)]="F16_RGBA",N[N.F32_R=ew(el.F32,eu.R,ec.None)]="F32_R",N[N.F32_RG=ew(el.F32,eu.RG,ec.None)]="F32_RG",N[N.F32_RGB=ew(el.F32,eu.RGB,ec.None)]="F32_RGB",N[N.F32_RGBA=ew(el.F32,eu.RGBA,ec.None)]="F32_RGBA",N[N.U8_R=ew(el.U8,eu.R,ec.None)]="U8_R",N[N.U8_R_NORM=ew(el.U8,eu.R,ec.Normalized)]="U8_R_NORM",N[N.U8_RG=ew(el.U8,eu.RG,ec.None)]="U8_RG",N[N.U8_RG_NORM=ew(el.U8,eu.RG,ec.Normalized)]="U8_RG_NORM",N[N.U8_RGB=ew(el.U8,eu.RGB,ec.None)]="U8_RGB",N[N.U8_RGB_NORM=ew(el.U8,eu.RGB,ec.Normalized)]="U8_RGB_NORM",N[N.U8_RGB_SRGB=ew(el.U8,eu.RGB,ec.sRGB|ec.Normalized)]="U8_RGB_SRGB",N[N.U8_RGBA=ew(el.U8,eu.RGBA,ec.None)]="U8_RGBA",N[N.U8_RGBA_NORM=ew(el.U8,eu.RGBA,ec.Normalized)]="U8_RGBA_NORM",N[N.U8_RGBA_SRGB=ew(el.U8,eu.RGBA,ec.sRGB|ec.Normalized)]="U8_RGBA_SRGB",N[N.U16_R=ew(el.U16,eu.R,ec.None)]="U16_R",N[N.U16_R_NORM=ew(el.U16,eu.R,ec.Normalized)]="U16_R_NORM",N[N.U16_RG_NORM=ew(el.U16,eu.RG,ec.Normalized)]="U16_RG_NORM",N[N.U16_RGBA_NORM=ew(el.U16,eu.RGBA,ec.Normalized)]="U16_RGBA_NORM",N[N.U16_RGBA=ew(el.U16,eu.RGBA,ec.None)]="U16_RGBA",N[N.U16_RGB=ew(el.U16,eu.RGB,ec.None)]="U16_RGB",N[N.U16_RG=ew(el.U16,eu.RG,ec.None)]="U16_RG",N[N.U32_R=ew(el.U32,eu.R,ec.None)]="U32_R",N[N.U32_RG=ew(el.U32,eu.RG,ec.None)]="U32_RG",N[N.U32_RGB=ew(el.U32,eu.RGB,ec.None)]="U32_RGB",N[N.U32_RGBA=ew(el.U32,eu.RGBA,ec.None)]="U32_RGBA",N[N.S8_R=ew(el.S8,eu.R,ec.None)]="S8_R",N[N.S8_R_NORM=ew(el.S8,eu.R,ec.Normalized)]="S8_R_NORM",N[N.S8_RG_NORM=ew(el.S8,eu.RG,ec.Normalized)]="S8_RG_NORM",N[N.S8_RGB_NORM=ew(el.S8,eu.RGB,ec.Normalized)]="S8_RGB_NORM",N[N.S8_RGBA_NORM=ew(el.S8,eu.RGBA,ec.Normalized)]="S8_RGBA_NORM",N[N.S16_R=ew(el.S16,eu.R,ec.None)]="S16_R",N[N.S16_RG=ew(el.S16,eu.RG,ec.None)]="S16_RG",N[N.S16_RG_NORM=ew(el.S16,eu.RG,ec.Normalized)]="S16_RG_NORM",N[N.S16_RGB_NORM=ew(el.S16,eu.RGB,ec.Normalized)]="S16_RGB_NORM",N[N.S16_RGBA=ew(el.S16,eu.RGBA,ec.None)]="S16_RGBA",N[N.S16_RGBA_NORM=ew(el.S16,eu.RGBA,ec.Normalized)]="S16_RGBA_NORM",N[N.S32_R=ew(el.S32,eu.R,ec.None)]="S32_R",N[N.S32_RG=ew(el.S32,eu.RG,ec.None)]="S32_RG",N[N.S32_RGB=ew(el.S32,eu.RGB,ec.None)]="S32_RGB",N[N.S32_RGBA=ew(el.S32,eu.RGBA,ec.None)]="S32_RGBA",N[N.U16_RGBA_5551=ew(el.U16_PACKED_5551,eu.RGBA,ec.Normalized)]="U16_RGBA_5551",N[N.U16_RGB_565=ew(el.U16_PACKED_565,eu.RGB,ec.Normalized)]="U16_RGB_565",N[N.BC1=ew(el.BC1,eu.RGBA,ec.Normalized)]="BC1",N[N.BC1_SRGB=ew(el.BC1,eu.RGBA,ec.Normalized|ec.sRGB)]="BC1_SRGB",N[N.BC2=ew(el.BC2,eu.RGBA,ec.Normalized)]="BC2",N[N.BC2_SRGB=ew(el.BC2,eu.RGBA,ec.Normalized|ec.sRGB)]="BC2_SRGB",N[N.BC3=ew(el.BC3,eu.RGBA,ec.Normalized)]="BC3",N[N.BC3_SRGB=ew(el.BC3,eu.RGBA,ec.Normalized|ec.sRGB)]="BC3_SRGB",N[N.BC4_UNORM=ew(el.BC4_UNORM,eu.R,ec.Normalized)]="BC4_UNORM",N[N.BC4_SNORM=ew(el.BC4_SNORM,eu.R,ec.Normalized)]="BC4_SNORM",N[N.BC5_UNORM=ew(el.BC5_UNORM,eu.RG,ec.Normalized)]="BC5_UNORM",N[N.BC5_SNORM=ew(el.BC5_SNORM,eu.RG,ec.Normalized)]="BC5_SNORM",N[N.D24=ew(el.D24,eu.R,ec.Depth)]="D24",N[N.D24_S8=ew(el.D24S8,eu.RG,ec.Depth|ec.Stencil)]="D24_S8",N[N.D32F=ew(el.D32F,eu.R,ec.Depth)]="D32F",N[N.D32F_S8=ew(el.D32FS8,eu.RG,ec.Depth|ec.Stencil)]="D32F_S8",N[N.U8_RGB_RT=ew(el.U8,eu.RGB,ec.RenderTarget|ec.Normalized)]="U8_RGB_RT",N[N.U8_RGBA_RT=ew(el.U8,eu.RGBA,ec.RenderTarget|ec.Normalized)]="U8_RGBA_RT",N[N.U8_RGBA_RT_SRGB=ew(el.U8,eu.RGBA,ec.RenderTarget|ec.Normalized|ec.sRGB)]="U8_RGBA_RT_SRGB";var eL=eI(0,0,0,0);eI(0,0,0,1);var eN=eI(1,1,1,0);function eD(n){return!!(n&&(n&n-1)==0);}function eF(n,r){return null!=n?n:r;}function eB(n,r){var i=r-1;return n+i&~i;}function ej(n,r){n.blendDstFactor=r.blendDstFactor,n.blendSrcFactor=r.blendSrcFactor,n.blendMode=r.blendMode;}function ez(n,r){return void 0===n&&(n={}),n.compare=r.compare,n.depthFailOp=r.depthFailOp,n.passOp=r.passOp,n.failOp=r.failOp,n.mask=r.mask,n;}function eU(n,r){return void 0===n&&(n={rgbBlendState:{},alphaBlendState:{},channelWriteMask:0}),ej(n.rgbBlendState,r.rgbBlendState),ej(n.alphaBlendState,r.alphaBlendState),n.channelWriteMask=r.channelWriteMask,n;}function eV(n,r){n.length!==r.length&&(n.length=r.length);for(var i=0;i<r.length;i++)n[i]=eU(n[i],r[i]);}function eG(n){var r=Object.assign({},n);return r.attachmentsState=[],eV(r.attachmentsState,n.attachmentsState),r.blendConstant=r.blendConstant&&ek(r.blendConstant),r.stencilFront=ez(void 0,n.stencilFront),r.stencilBack=ez(void 0,n.stencilBack),r;}eI(1,1,1,1);var eH={blendMode:W.ADD,blendSrcFactor:H.ONE,blendDstFactor:H.ZERO},eW={attachmentsState:[{channelWriteMask:en.ALL,rgbBlendState:eH,alphaBlendState:eH}],blendConstant:ek(eL),depthWrite:!0,depthCompare:U.LEQUAL,stencilWrite:!1,stencilFront:{compare:U.ALWAYS,passOp:er.KEEP,depthFailOp:er.KEEP,failOp:er.KEEP},stencilBack:{compare:U.ALWAYS,passOp:er.KEEP,depthFailOp:er.KEEP,failOp:er.KEEP},cullMode:G.NONE,frontFace:V.CCW,polygonOffset:!1,polygonOffsetFactor:0,polygonOffsetUnits:0};o={depthCompare:U.ALWAYS,depthWrite:!1},void 0===o&&(o=null),void 0===(s=eW)&&(s=eW),u=eG(s),null!==o&&(void 0!==(l=o).attachmentsState&&eV(u.attachmentsState,l.attachmentsState),u.blendConstant&&l.blendConstant&&eP(u.blendConstant,l.blendConstant),u.depthCompare=eF(l.depthCompare,u.depthCompare),u.depthWrite=eF(l.depthWrite,u.depthWrite),u.stencilWrite=eF(l.stencilWrite,u.stencilWrite),u.stencilFront&&l.stencilFront&&ez(u.stencilFront,l.stencilFront),u.stencilBack&&l.stencilBack&&ez(u.stencilBack,l.stencilBack),u.cullMode=eF(l.cullMode,u.cullMode),u.frontFace=eF(l.frontFace,u.frontFace),u.polygonOffset=eF(l.polygonOffset,u.polygonOffset),u.polygonOffsetFactor=eF(l.polygonOffsetFactor,u.polygonOffsetFactor),u.polygonOffsetUnits=eF(l.polygonOffsetUnits,u.polygonOffsetUnits));var eX={texture:null,sampler:null,formatKind:ei.Float,dimension:ee.TEXTURE_2D};function eq(n,r,i){if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++)if(!i(n[a],r[a]))return!1;return!0;}function e$(n,r){for(var i=Array(n.length),a=0;a<n.length;a++)i[a]=r(n[a]);return i;}function eY(n,r){return n.texture===r.texture&&n.binding===r.binding;}function eZ(n,r){return n.buffer===r.buffer&&n.size===r.size&&n.binding===r.binding&&n.offset===r.offset;}function eK(n,r){return null===n?null===r:null!==r&&n.sampler===r.sampler&&n.texture===r.texture&&n.dimension===r.dimension&&n.formatKind===r.formatKind&&n.comparison===r.comparison;}function eQ(n,r){return n.samplerBindings=n.samplerBindings||[],n.uniformBufferBindings=n.uniformBufferBindings||[],n.storageBufferBindings=n.storageBufferBindings||[],n.storageTextureBindings=n.storageTextureBindings||[],r.samplerBindings=r.samplerBindings||[],r.uniformBufferBindings=r.uniformBufferBindings||[],r.storageBufferBindings=r.storageBufferBindings||[],r.storageTextureBindings=r.storageTextureBindings||[],!!(n.samplerBindings.length===r.samplerBindings.length&&eq(n.samplerBindings,r.samplerBindings,eK)&&eq(n.uniformBufferBindings,r.uniformBufferBindings,eZ)&&eq(n.storageBufferBindings,r.storageBufferBindings,eZ)&&eq(n.storageTextureBindings,r.storageTextureBindings,eY));}function eJ(n,r){return n.blendMode==r.blendMode&&n.blendSrcFactor===r.blendSrcFactor&&n.blendDstFactor===r.blendDstFactor;}function e0(n,r){return!!(eJ(n.rgbBlendState,r.rgbBlendState)&&eJ(n.alphaBlendState,r.alphaBlendState))&&n.channelWriteMask===r.channelWriteMask;}function e1(n,r){return n.compare==r.compare&&n.depthFailOp===r.depthFailOp&&n.failOp===r.failOp&&n.passOp===r.passOp&&n.mask===r.mask;}function e2(n,r){return n===r;}function e3(n,r){var i,a,o,s;return n.topology===r.topology&&n.inputLayout===r.inputLayout&&n.sampleCount===r.sampleCount&&(!n.megaStateDescriptor||!r.megaStateDescriptor||(i=n.megaStateDescriptor,a=r.megaStateDescriptor,!!(eq(i.attachmentsState,a.attachmentsState,e0)&&(!i.blendConstant||!a.blendConstant||eR(i.blendConstant,a.blendConstant))&&(!i.stencilFront||!a.stencilFront||e1(i.stencilFront,a.stencilFront))&&(!i.stencilBack||!a.stencilBack||e1(i.stencilBack,a.stencilBack)))&&i.depthCompare===a.depthCompare&&i.depthWrite===a.depthWrite&&i.stencilWrite===a.stencilWrite&&i.cullMode===a.cullMode&&i.frontFace===a.frontFace&&i.polygonOffset===a.polygonOffset&&i.polygonOffsetFactor===a.polygonOffsetFactor&&i.polygonOffsetUnits===a.polygonOffsetUnits))&&(o=n.program,s=r.program,!!(o.id===s.id&&eq(n.colorAttachmentFormats,r.colorAttachmentFormats,e2))&&n.depthStencilAttachmentFormat===r.depthStencilAttachmentFormat);}function e4(n,r){return n.offset===r.offset&&n.shaderLocation===r.shaderLocation&&n.format===r.format&&n.divisor===r.divisor;}function e5(n,r){return(0,ey.default)(n)?(0,ey.default)(r):!(0,ey.default)(r)&&n.arrayStride===r.arrayStride&&n.stepMode===r.stepMode&&eq(n.attributes,r.attributes,e4);}function e6(n,r){var i,a;return!!(n.indexBufferFormat===r.indexBufferFormat&&eq(n.vertexBufferDescriptors,r.vertexBufferDescriptors,e5))&&(i=n.program,a=r.program,i.id===a.id);}function e8(n){return{sampler:n.sampler,texture:n.texture,dimension:n.dimension,formatKind:n.formatKind,comparison:n.comparison};}function e7(n){var r=n.buffer,i=n.size;return{binding:n.binding,buffer:r,offset:n.offset,size:i};}function e9(n){return{binding:n.binding,texture:n.texture};}function te(n){return{samplerBindings:n.samplerBindings&&e$(n.samplerBindings,e8),uniformBufferBindings:n.uniformBufferBindings&&e$(n.uniformBufferBindings,e7),storageBufferBindings:n.storageBufferBindings&&e$(n.storageBufferBindings,e7),storageTextureBindings:n.storageTextureBindings&&e$(n.storageTextureBindings,e9),pipeline:n.pipeline};}function tt(n){var r=n.inputLayout,i=n.program,a=n.topology;return{inputLayout:r,megaStateDescriptor:n.megaStateDescriptor&&eG(n.megaStateDescriptor),program:i,topology:a,colorAttachmentFormats:n.colorAttachmentFormats.slice(),depthStencilAttachmentFormat:n.depthStencilAttachmentFormat,sampleCount:n.sampleCount};}function tn(n){return{shaderLocation:n.shaderLocation,format:n.format,offset:n.offset,divisor:n.divisor};}function tr(n){return(0,ey.default)(n)?n:{arrayStride:n.arrayStride,stepMode:n.stepMode,attributes:e$(n.attributes,tn)};}function ti(n){return{vertexBufferDescriptors:e$(n.vertexBufferDescriptors,tr),indexBufferFormat:n.indexBufferFormat,program:n.program};}var ta=/([^[]*)(\[[0-9]+\])?/;function to(){var n=null;return function(r,i,a){var o=n!==a;return o&&(r.uniform1i(i,a),n=a),o;};}function ts(n,r,i,a){var o=null,s=null;return function(l,u,c){var f=r(c,i),d=f.length,h=!1;if(null===o)o=new Float32Array(d),s=d,h=!0;else{eO(s===d,"Uniform length cannot change.");for(var p=0;p<d;++p)if(f[p]!==o[p]){h=!0;break;}}return h&&(a(l,n,u,f),o.set(f)),h;};}function tl(n,r,i,a){n[r](i,a);}function tu(n,r,i,a){n[r](i,!1,a);}var tc={},tf={},td={},th=[0];function tp(n,r,i,a){1===r&&"boolean"==typeof n&&(n=n?1:0),Number.isFinite(n)&&(th[0]=n,n=th);var o=n.length;if(n instanceof i)return n;var s=a[o];s||(s=new i(o),a[o]=s);for(var l=0;l<o;l++)s[l]=n[l];return s;}function tm(n,r){return tp(n,r,Float32Array,tc);}function tg(n,r){return tp(n,r,Int32Array,tf);}function tv(n,r){return tp(n,r,Uint32Array,td);}var ty=((ed={})[j.FLOAT]=ts.bind(null,"uniform1fv",tm,1,tl),ed[j.FLOAT_VEC2]=ts.bind(null,"uniform2fv",tm,2,tl),ed[j.FLOAT_VEC3]=ts.bind(null,"uniform3fv",tm,3,tl),ed[j.FLOAT_VEC4]=ts.bind(null,"uniform4fv",tm,4,tl),ed[j.INT]=ts.bind(null,"uniform1iv",tg,1,tl),ed[j.INT_VEC2]=ts.bind(null,"uniform2iv",tg,2,tl),ed[j.INT_VEC3]=ts.bind(null,"uniform3iv",tg,3,tl),ed[j.INT_VEC4]=ts.bind(null,"uniform4iv",tg,4,tl),ed[j.BOOL]=ts.bind(null,"uniform1iv",tg,1,tl),ed[j.BOOL_VEC2]=ts.bind(null,"uniform2iv",tg,2,tl),ed[j.BOOL_VEC3]=ts.bind(null,"uniform3iv",tg,3,tl),ed[j.BOOL_VEC4]=ts.bind(null,"uniform4iv",tg,4,tl),ed[j.FLOAT_MAT2]=ts.bind(null,"uniformMatrix2fv",tm,4,tu),ed[j.FLOAT_MAT3]=ts.bind(null,"uniformMatrix3fv",tm,9,tu),ed[j.FLOAT_MAT4]=ts.bind(null,"uniformMatrix4fv",tm,16,tu),ed[j.UNSIGNED_INT]=ts.bind(null,"uniform1uiv",tv,1,tl),ed[j.UNSIGNED_INT_VEC2]=ts.bind(null,"uniform2uiv",tv,2,tl),ed[j.UNSIGNED_INT_VEC3]=ts.bind(null,"uniform3uiv",tv,3,tl),ed[j.UNSIGNED_INT_VEC4]=ts.bind(null,"uniform4uiv",tv,4,tl),ed[j.FLOAT_MAT2x3]=ts.bind(null,"uniformMatrix2x3fv",tm,6,tu),ed[j.FLOAT_MAT2x4]=ts.bind(null,"uniformMatrix2x4fv",tm,8,tu),ed[j.FLOAT_MAT3x2]=ts.bind(null,"uniformMatrix3x2fv",tm,6,tu),ed[j.FLOAT_MAT3x4]=ts.bind(null,"uniformMatrix3x4fv",tm,12,tu),ed[j.FLOAT_MAT4x2]=ts.bind(null,"uniformMatrix4x2fv",tm,8,tu),ed[j.FLOAT_MAT4x3]=ts.bind(null,"uniformMatrix4x3fv",tm,12,tu),ed[j.SAMPLER_2D]=to,ed[j.SAMPLER_CUBE]=to,ed[j.SAMPLER_3D]=to,ed[j.SAMPLER_2D_SHADOW]=to,ed[j.SAMPLER_2D_ARRAY]=to,ed[j.SAMPLER_2D_ARRAY_SHADOW]=to,ed[j.SAMPLER_CUBE_SHADOW]=to,ed[j.INT_SAMPLER_2D]=to,ed[j.INT_SAMPLER_3D]=to,ed[j.INT_SAMPLER_CUBE]=to,ed[j.INT_SAMPLER_2D_ARRAY]=to,ed[j.UNSIGNED_INT_SAMPLER_2D]=to,ed[j.UNSIGNED_INT_SAMPLER_3D]=to,ed[j.UNSIGNED_INT_SAMPLER_CUBE]=to,ed[j.UNSIGNED_INT_SAMPLER_2D_ARRAY]=to,ed);function t_(n,r,i){var a=ty[i.type];if(!a)throw Error("Unknown GLSL uniform type ".concat(i.type));return a().bind(null,n,r);}var tb={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function tx(n,r){return"#define ".concat(n," ").concat(r);}function tE(n){if(void 0===n)return null;var r=/binding\s*=\s*(\d+)/.exec(n);if(null!==r){var i=parseInt(r[1],10);if(!Number.isNaN(i))return i;}return null;}function tw(n,r,i,a,o){void 0===a&&(a=null),void 0===o&&(o=!0);var s="#version 100"===n.glslVersion,l="frag"===r&&(null===(b=i.match(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm))||void 0===b?void 0:b.length)>1,u=i.replace("\r\n","\n").split("\n").map(function(n){return n.replace(/[/][/].*$/,"");}).filter(function(n){return!(!n||/^\s+$/.test(n));}),c="";null!==a&&(c=Object.keys(a).map(function(n){return tx(n,a[n]);}).join("\n"));var f=u.find(function(n){return n.startsWith("precision");})||"precision mediump float;",d=o?u.filter(function(n){return!n.startsWith("precision");}).join("\n"):u.join("\n"),h="";if(n.viewportOrigin===ea.UPPER_LEFT&&(h+="".concat(tx("VIEWPORT_ORIGIN_TL","1"),"\n")),n.clipSpaceNearZ===eo.ZERO&&(h+="".concat(tx("CLIPSPACE_NEAR_ZERO","1"),"\n")),n.explicitBindingLocations){var p=0,m=0,g=0;d=d.replace(/^\s*(layout\((.*)\))?\s*uniform(.+{)$/gm,function(n,r,i,a){return"layout(".concat(i?"".concat(i,", "):"","set = ").concat(p,", binding = ").concat(m++,") uniform ").concat(a);}),p++,m=0,eO(n.separateSamplerTextures),d=(d=d.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(n,i,a,o,s){var l=tE(a);null===l&&(l=m++);var u=(0,ex.__read)([o,""],2),c=u[0],f=u[1];return"frag"===r?"\nlayout(set = ".concat(p,", binding = ").concat(2*l+0,") uniform texture").concat(c," T_").concat(s,";\nlayout(set = ").concat(p,", binding = ").concat(2*l+1,") uniform sampler").concat(f," S_").concat(s,";").trim():"";})).replace("frag"===r?/^\s*\b(varying|in)\b/gm:/^\s*\b(varying|out)\b/gm,function(n,r){return"layout(location = ".concat(g++,") ").concat(r);}),h+="".concat(tx("gl_VertexID","gl_VertexIndex"),"\n")+"".concat(tx("gl_InstanceID","gl_InstanceIndex"),"\n"),f=f.replace(/^precision (.*) sampler(.*);$/gm,"");}else{var v=0;d=d.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(n,r,i,a,o){var s=tE(i);return null===s&&(s=v++),"uniform sampler".concat(a," ").concat(o,"; // BINDING=").concat(s);});}if(d=(d=(d=d.replace(/\bPU_SAMPLER_(\w+)\((.*?)\)/g,function(n,r,i){return"SAMPLER_".concat(r,"(P_").concat(i,")");})).replace(/\bPF_SAMPLER_(\w+)\((.*?)\)/g,function(n,r,i){return"PP_SAMPLER_".concat(r,"(P_").concat(i,")");})).replace(/\bPU_TEXTURE\((.*?)\)/g,function(n,r){return"TEXTURE(P_".concat(r,")");}),n.separateSamplerTextures)d=(d=(d=(d=d.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g,function(n,r,i){var a=(0,ex.__read)([r,""],2),o=a[0],s=a[1];return"texture".concat(o," T_P_").concat(i,", sampler").concat(s," S_P_").concat(i);})).replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g,function(n,r,i){return"T_".concat(i,", S_").concat(i);})).replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(n,r,i){return"sampler".concat(r,"(T_").concat(i,", S_").concat(i,")");})).replace(/\bTEXTURE\((.*?)\)/g,function(n,r){return"T_".concat(r);});else{var y=[];d=(d=(d=d.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g,function(n,r,i){return"sampler".concat(r," P_").concat(i);})).replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g,function(n,r,i){return i;})).replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(n,r,i){return y.push([i,r]),i;}),s&&y.forEach(function(n){var r=(0,ex.__read)(n,2),i=r[0],a=r[1];d=d.replace(RegExp("texture\\(".concat(i),"g"),function(){return"texture".concat(a,"(").concat(i);});}),d=d.replace(/\bTEXTURE\((.*?)\)/g,function(n,r){return r;});}var _="".concat(s?"":n.glslVersion,"\n").concat(s&&l?"#extension GL_EXT_draw_buffers : require\n":"","\n").concat(s&&"frag"===r?"#extension GL_OES_standard_derivatives : enable\n":"").concat(o?f:"","\n").concat(h||"").concat(c?c+"\n":"","\n").concat(d,"\n").trim();if(n.explicitBindingLocations&&"frag"===r&&(_=_.replace(/^\b(out)\b/g,function(n,r){return"layout(location = 0) ".concat(r);})),s){if("frag"===r&&(_=_.replace(/^\s*in\s+(\S+)\s*(.*);$/gm,function(n,r,i){return"varying ".concat(r," ").concat(i,";\n");})),"vert"===r&&(_=(_=_.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(n,r,i){return"varying ".concat(r," ").concat(i,";\n");})).replace(/^\s*layout\(location\s*=\s*\S*\)\s*in\s+(\S+)\s*(.*);$/gm,function(n,r,i){return"attribute ".concat(r," ").concat(i,";\n");})),_=_.replace(/\s*uniform\s*.*\s*{((?:\s*.*\s*)*?)};/g,function(n,r){return r.trim().replace(/^.*$/gm,function(n){var r=n.trim();return r.startsWith("#")?r:n?"uniform ".concat(r):"";});}),"frag"===r){if(l){var b,x,E=[],w=(_=_.replace(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm,function(n,r){return E.push(r),"vec4 ".concat(r,";\n");})).lastIndexOf("}");_=_.substring(0,w)+"\n    ".concat(E.map(function(n,r){return"gl_FragData[".concat(r,"] = ").concat(n,";\n    ");}).join("\n"))+_.substring(w);}else if(_=_.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(n,r,i){return x=i,"".concat(r," ").concat(i,";\n");}),x){var w=_.lastIndexOf("}");_=_.substring(0,w)+"\n  gl_FragColor = vec4(".concat(x,");\n")+_.substring(w);}}_=_.replace(/^\s*layout\((.*)\)/gm,"");}return _;}var tS=function(n){function r(r){var i=r.id,a=r.device,o=n.call(this)||this;return o.id=i,o.device=a,null!==o.device.resourceCreationTracker&&o.device.resourceCreationTracker.trackResourceCreated(o),o;}return(0,ex.__extends)(r,n),r.prototype.destroy=function(){null!==this.device.resourceCreationTracker&&this.device.resourceCreationTracker.trackResourceDestroyed(this);},r;}(eE.default),tT=function(n){function r(r){var i=r.id,a=r.device,o=r.descriptor,s=n.call(this,{id:i,device:a})||this;s.type=z.Bindings;var l=o.uniformBufferBindings,u=o.samplerBindings;return s.uniformBufferBindings=l||[],s.samplerBindings=u||[],s.bindingLayouts=s.createBindingLayouts(),s;}return(0,ex.__extends)(r,n),r.prototype.createBindingLayouts=function(){var n=0,r=0,i=[],a=this.uniformBufferBindings.length,o=this.samplerBindings.length;return i.push({firstUniformBuffer:n,numUniformBuffers:a,firstSampler:r,numSamplers:o}),{numUniformBuffers:n+=a,numSamplers:r+=o,bindingLayoutTables:i};},r;}(tS);function tA(n){return void 0!==eh?eh:"undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext?(eh=!0,!0):eh=!!(n&&2===n._version);}function tC(n){switch(eT(n)){case el.BC1:case el.BC2:case el.BC3:case el.BC4_UNORM:case el.BC4_SNORM:case el.BC5_UNORM:case el.BC5_SNORM:return!0;default:return!1;}}function tO(n){if(255&n&ec.Normalized)return!1;var r=eT(n);return r===el.S8||r===el.S16||r===el.S32||r===el.U8||r===el.U16||r===el.U32;}function tM(n){return n&Z.INDEX?j.ELEMENT_ARRAY_BUFFER:n&Z.VERTEX?j.ARRAY_BUFFER:n&Z.UNIFORM?j.UNIFORM_BUFFER:void 0;}function tR(n){switch(n){case X.CLAMP_TO_EDGE:return j.CLAMP_TO_EDGE;case X.REPEAT:return j.REPEAT;case X.MIRRORED_REPEAT:return j.MIRRORED_REPEAT;default:throw Error("whoops");}}function tP(n,r){if(r===$.LINEAR&&n===q.BILINEAR)return j.LINEAR_MIPMAP_LINEAR;if(r===$.LINEAR&&n===q.POINT)return j.NEAREST_MIPMAP_LINEAR;if(r===$.NEAREST&&n===q.BILINEAR)return j.LINEAR_MIPMAP_NEAREST;if(r===$.NEAREST&&n===q.POINT)return j.NEAREST_MIPMAP_NEAREST;if(r===$.NO_MIP&&n===q.BILINEAR)return j.LINEAR;if(r===$.NO_MIP&&n===q.POINT)return j.NEAREST;throw Error("Unknown texture filter mode");}function tk(n,r){return void 0===r&&(r=0),n.gl_buffer_pages[r/n.pageByteSize|0];}function tI(n){return n.gl_texture;}function tL(n){return n.gl_sampler;}function tN(n,r){n.name=r,n.__SPECTOR_Metadata={name:r};}function tD(n,r){for(var i=[];;){var a=r.exec(n);if(!a)break;i.push(a);}return i;}function tF(n){return n.blendMode==W.ADD&&n.blendSrcFactor==H.ONE&&n.blendDstFactor===H.ZERO;}var tB=function(n){function r(r){var i,a=r.id,o=r.device,s=r.descriptor,l=n.call(this,{id:a,device:o})||this;l.type=z.Buffer;var u=s.viewOrSize,c=s.usage,f=s.hint,d=void 0===f?K.STATIC:f,h=o.uniformBufferMaxPageByteSize,p=o.gl,m=c&Z.UNIFORM;m||(tA(p)?p.bindVertexArray(null):o.OES_vertex_array_object.bindVertexArrayOES(null));var g=(0,e_.default)(u)?eB(u,4):eB(u.byteLength,4);if(l.gl_buffer_pages=[],m){for(var v=g;v>0;)l.gl_buffer_pages.push(l.createBufferPage(Math.min(v,h),c,d)),v-=h;i=h;}else l.gl_buffer_pages.push(l.createBufferPage(g,c,d)),i=g;return l.pageByteSize=i,l.byteSize=g,l.usage=c,l.gl_target=tM(c),(0,e_.default)(u)||l.setSubData(0,new Uint8Array(u.buffer)),m||(tA(p)?p.bindVertexArray(l.device.currentBoundVAO):o.OES_vertex_array_object.bindVertexArrayOES(l.device.currentBoundVAO)),l;}return(0,ex.__extends)(r,n),r.prototype.setSubData=function(n,r,i,a){void 0===i&&(i=0),void 0===a&&(a=r.byteLength-i);for(var o=this.device.gl,s=this.pageByteSize,l=n+a,u=n,c=n%s;u<l;){var f=tA(o)?o.COPY_WRITE_BUFFER:this.gl_target,d=tk(this,u);if(d.ubo)return;o.bindBuffer(f,d),tA(o)?o.bufferSubData(f,c,r,i,Math.min(l-u,s)):o.bufferSubData(f,c,r),u+=s,c=0,i+=s,this.device.debugGroupStatisticsBufferUpload();}},r.prototype.destroy=function(){n.prototype.destroy.call(this);for(var r=0;r<this.gl_buffer_pages.length;r++)this.gl_buffer_pages[r].ubo||this.device.gl.deleteBuffer(this.gl_buffer_pages[r]);this.gl_buffer_pages=[];},r.prototype.createBufferPage=function(n,r,i){var a=this.device.gl,o=r&Z.UNIFORM;if(!tA(a)&&o)return{ubo:!0};var s=this.device.ensureResourceExists(a.createBuffer()),l=tM(r),u=function(n){switch(n){case K.STATIC:return j.STATIC_DRAW;case K.DYNAMIC:return j.DYNAMIC_DRAW;}}(i);return a.bindBuffer(l,s),a.bufferData(l,n,u),s;},r;}(tS),tj=function(n){function r(r){var i,a,o,s,l,u=r.id,c=r.device,f=r.descriptor,d=n.call(this,{id:u,device:c})||this;d.type=z.InputLayout;var h=f.vertexBufferDescriptors,p=f.indexBufferFormat,m=f.program;eO(p===ef.U16_R||p===ef.U32_R||null===p);var g=null!==p?function(n){switch(n){case ef.U8_R:return j.UNSIGNED_BYTE;case ef.U16_R:return j.UNSIGNED_SHORT;case ef.U32_R:return j.UNSIGNED_INT;default:throw Error("whoops");}}(p):null,v=null!==p?eA(eT(p)):null,y=d.device.gl,_=d.device.ensureResourceExists(tA(y)?y.createVertexArray():c.OES_vertex_array_object.createVertexArrayOES());tA(y)?y.bindVertexArray(_):c.OES_vertex_array_object.bindVertexArrayOES(_),y.bindBuffer(y.ARRAY_BUFFER,tk(d.device.fallbackVertexBuffer));try{for(var b=(0,ex.__values)(f.vertexBufferDescriptors),x=b.next();!x.done;x=b.next()){var E=x.value,w=E.stepMode,S=E.attributes;try{for(var T=(o=void 0,(0,ex.__values)(S)),A=T.next();!A.done;A=T.next()){var C=A.value,O=C.shaderLocation,M=C.format,R=C.divisor,P=void 0===R?1:R,k=tA(y)?O:null===(l=m.attributes[O])||void 0===l?void 0:l.location,I=function(n){var r=eT(n),i=eS(n),a=255&n,o=function(n){switch(n){case el.U8:return j.UNSIGNED_BYTE;case el.U16:return j.UNSIGNED_SHORT;case el.U32:return j.UNSIGNED_INT;case el.S8:return j.BYTE;case el.S16:return j.SHORT;case el.S32:return j.INT;case el.F16:return j.HALF_FLOAT;case el.F32:return j.FLOAT;default:throw Error("whoops");}}(r);return{size:function(n){switch(n){case eu.R:return 1;case eu.RG:return 2;case eu.RGB:return 3;case eu.RGBA:return 4;default:return 1;}}(i),type:o,normalized:!!(a&ec.Normalized)};}(M);if(C.vertexFormat=I,!(0,ey.default)(k)){tO(M);var L=I.size,N=I.type,D=I.normalized;y.vertexAttribPointer(k,L,N,D,0,0),w===Q.INSTANCE&&(tA(y)?y.vertexAttribDivisor(k,P):c.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(k,P)),y.enableVertexAttribArray(k);}}}catch(n){o={error:n};}finally{try{A&&!A.done&&(s=T.return)&&s.call(T);}finally{if(o)throw o.error;}}}}catch(n){i={error:n};}finally{try{x&&!x.done&&(a=b.return)&&a.call(b);}finally{if(i)throw i.error;}}return tA(y)?y.bindVertexArray(null):c.OES_vertex_array_object.bindVertexArrayOES(null),d.vertexBufferDescriptors=h,d.vao=_,d.indexBufferFormat=p,d.indexBufferType=g,d.indexBufferCompByteSize=v,d.program=m,d;}return(0,ex.__extends)(r,n),r.prototype.destroy=function(){n.prototype.destroy.call(this),this.device.currentBoundVAO===this.vao&&(tA(this.device.gl)?(this.device.gl.bindVertexArray(null),this.device.gl.deleteVertexArray(this.vao)):(this.device.OES_vertex_array_object.bindVertexArrayOES(null),this.device.OES_vertex_array_object.deleteVertexArrayOES(this.vao)),this.device.currentBoundVAO=null);},r;}(tS),tz=function(n){function r(r){var i,a,o=r.id,s=r.device,l=r.descriptor,u=r.fake,c=n.call(this,{id:o,device:s})||this;c.type=z.Texture,l=(0,ex.__assign)({dimension:ee.TEXTURE_2D,depthOrArrayLayers:1,mipLevelCount:1},l);var f=c.device.gl,d=c.clampmipLevelCount(l);if(c.immutable=l.usage===et.RENDER_TARGET,c.pixelStore=l.pixelStore,c.format=l.format,c.dimension=l.dimension,c.formatKind=eC(l.format),c.width=l.width,c.height=l.height,c.depthOrArrayLayers=l.depthOrArrayLayers,c.mipmaps=d>=1,!u){a=c.device.ensureResourceExists(f.createTexture());var h=c.device.translateTextureType(l.format),p=c.device.translateTextureInternalFormat(l.format);if(c.device.setActiveTexture(f.TEXTURE0),c.device.currentTextures[0]=null,c.preprocessImage(),l.dimension===ee.TEXTURE_2D){if(i=j.TEXTURE_2D,f.bindTexture(i,a),c.immutable){if(tA(f))f.texStorage2D(i,d,p,l.width,l.height);else{var m=(p===j.DEPTH_COMPONENT||c.isNPOT(),0);(c.format!==ef.D32F&&c.format!==ef.D24_S8||tA(f)||s.WEBGL_depth_texture)&&(f.texImage2D(i,m,p,l.width,l.height,0,p,h,null),c.mipmaps&&(c.mipmaps=!1,f.texParameteri(j.TEXTURE_2D,j.TEXTURE_MIN_FILTER,j.LINEAR),f.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_S,j.CLAMP_TO_EDGE),f.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_T,j.CLAMP_TO_EDGE)));}}eO(1===l.depthOrArrayLayers);}else if(l.dimension===ee.TEXTURE_2D_ARRAY)i=j.TEXTURE_2D_ARRAY,f.bindTexture(i,a),c.immutable&&tA(f)&&f.texStorage3D(i,d,p,l.width,l.height,l.depthOrArrayLayers);else if(l.dimension===ee.TEXTURE_3D)i=j.TEXTURE_3D,f.bindTexture(i,a),c.immutable&&tA(f)&&f.texStorage3D(i,d,p,l.width,l.height,l.depthOrArrayLayers);else if(l.dimension===ee.TEXTURE_CUBE_MAP)i=j.TEXTURE_CUBE_MAP,f.bindTexture(i,a),c.immutable&&tA(f)&&f.texStorage2D(i,d,p,l.width,l.height),eO(6===l.depthOrArrayLayers);else throw Error("whoops");}return c.gl_texture=a,c.gl_target=i,c.mipLevelCount=d,c;}return(0,ex.__extends)(r,n),r.prototype.setImageData=function(n,r){void 0===r&&(r=0);var i,a,o,s=this.device.gl;tC(this.format);var l=this.gl_target===j.TEXTURE_3D||this.gl_target===j.TEXTURE_2D_ARRAY,u=this.gl_target===j.TEXTURE_CUBE_MAP,c=(i=n[0],Object.prototype.toString.call(i) in tb);this.device.setActiveTexture(s.TEXTURE0),this.device.currentTextures[0]=null;var f=n[0];c?(a=this.width,o=this.height):(a=f.width,o=f.height,this.width=a,this.height=o),s.bindTexture(this.gl_target,this.gl_texture);var d=this.device.translateTextureFormat(this.format),h=tA(s)?this.device.translateInternalTextureFormat(this.format):d,p=this.device.translateTextureType(this.format);this.preprocessImage();for(var m=0;m<this.depthOrArrayLayers;m++){var g=n[m],v=this.gl_target;u&&(v=j.TEXTURE_CUBE_MAP_POSITIVE_X+m%6),this.immutable?s.texSubImage2D(v,r,0,0,a,o,d,p,g):tA(s)?l?s.texImage3D(v,r,h,a,o,this.depthOrArrayLayers,0,d,p,g):s.texImage2D(v,r,h,a,o,0,d,p,g):c?s.texImage2D(v,r,d,a,o,0,d,p,g):s.texImage2D(v,r,d,d,p,g);}this.mipmaps&&this.generateMipmap(l);},r.prototype.destroy=function(){n.prototype.destroy.call(this),this.device.gl.deleteTexture(tI(this));},r.prototype.clampmipLevelCount=function(n){if(n.dimension===ee.TEXTURE_2D_ARRAY&&n.depthOrArrayLayers>1&&eT(n.format)===el.BC1)for(var r=n.width,i=n.height,a=0;a<n.mipLevelCount;a++){if(r<=2||i<=2)return a-1;r=Math.max(r/2|0,1),i=Math.max(i/2|0,1);}return n.mipLevelCount;},r.prototype.preprocessImage=function(){var n=this.device.gl;this.pixelStore&&(this.pixelStore.unpackFlipY&&n.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,!0),this.pixelStore.packAlignment&&n.pixelStorei(j.PACK_ALIGNMENT,this.pixelStore.packAlignment),this.pixelStore.unpackAlignment&&n.pixelStorei(j.UNPACK_ALIGNMENT,this.pixelStore.unpackAlignment));},r.prototype.generateMipmap=function(n){void 0===n&&(n=!1);var r=this.device.gl;return!tA(r)&&this.isNPOT()||this.gl_texture&&this.gl_target&&(r.bindTexture(this.gl_target,this.gl_texture),n?(r.texParameteri(this.gl_target,j.TEXTURE_BASE_LEVEL,0),r.texParameteri(this.gl_target,j.TEXTURE_MAX_LEVEL,Math.log2(this.width)),r.texParameteri(this.gl_target,j.TEXTURE_MIN_FILTER,j.LINEAR_MIPMAP_LINEAR),r.texParameteri(this.gl_target,j.TEXTURE_MAG_FILTER,j.LINEAR)):r.texParameteri(j.TEXTURE_2D,j.TEXTURE_MIN_FILTER,j.NEAREST_MIPMAP_LINEAR),r.generateMipmap(this.gl_target),r.bindTexture(this.gl_target,null)),this;},r.prototype.isNPOT=function(){return!tA(this.device.gl)&&(!eD(this.width)||!eD(this.height));},r;}(tS),tU=function(n){function r(r){var i=r.id,a=r.device,o=r.descriptor,s=n.call(this,{id:i,device:a})||this;s.type=z.RenderTarget,s.gl_renderbuffer=null,s.texture=null;var l=s.device.gl,u=o.format,c=o.width,f=o.height,d=o.sampleCount,h=void 0===d?1:d,p=o.texture,m=!1;if(u!==ef.D32F&&u!==ef.D24_S8||!p||tA(l)||a.WEBGL_depth_texture||(p.destroy(),s.texture=null,m=!0),!m&&p)s.texture=p;else{s.gl_renderbuffer=s.device.ensureResourceExists(l.createRenderbuffer()),l.bindRenderbuffer(l.RENDERBUFFER,s.gl_renderbuffer);var g=s.device.translateTextureInternalFormat(u,!0);tA(l)&&h>1?l.renderbufferStorageMultisample(j.RENDERBUFFER,h,g,c,f):l.renderbufferStorage(j.RENDERBUFFER,g,c,f);}return s.format=u,s.width=c,s.height=f,s.sampleCount=h,s;}return(0,ex.__extends)(r,n),r.prototype.destroy=function(){n.prototype.destroy.call(this),null!==this.gl_renderbuffer&&this.device.gl.deleteRenderbuffer(this.gl_renderbuffer),this.texture&&this.texture.destroy();},r;}(tS);(D=ep||(ep={}))[D.NeedsCompile=0]="NeedsCompile",D[D.Compiling=1]="Compiling",D[D.NeedsBind=2]="NeedsBind",D[D.ReadyToUse=3]="ReadyToUse";var tV=function(n){function r(r,i){var a=r.id,o=r.device,s=r.descriptor,l=n.call(this,{id:a,device:o})||this;l.rawVertexGLSL=i,l.type=z.Program,l.uniformSetters={},l.attributes=[];var u=l.device.gl;return l.descriptor=s,l.gl_program=l.device.ensureResourceExists(u.createProgram()),l.gl_shader_vert=null,l.gl_shader_frag=null,l.compileState=ep.NeedsCompile,l.tryCompileProgram(),l;}return(0,ex.__extends)(r,n),r.prototype.destroy=function(){n.prototype.destroy.call(this),this.device.gl.deleteProgram(this.gl_program),this.device.gl.deleteShader(this.gl_shader_vert),this.device.gl.deleteShader(this.gl_shader_frag);},r.prototype.tryCompileProgram=function(){eO(this.compileState===ep.NeedsCompile);var n=this.descriptor,r=n.vertex,i=n.fragment,a=this.device.gl;(null==r?void 0:r.glsl)&&(null==i?void 0:i.glsl)&&(this.gl_shader_vert=this.compileShader(r.postprocess?r.postprocess(r.glsl):r.glsl,a.VERTEX_SHADER),this.gl_shader_frag=this.compileShader(i.postprocess?i.postprocess(i.glsl):i.glsl,a.FRAGMENT_SHADER),a.attachShader(this.gl_program,this.gl_shader_vert),a.attachShader(this.gl_program,this.gl_shader_frag),a.linkProgram(this.gl_program),this.compileState=ep.Compiling,tA(a)||(this.readUniformLocationsFromLinkedProgram(),this.readAttributesFromLinkedProgram()));},r.prototype.readAttributesFromLinkedProgram=function(){for(var n,r,i,a,o,s=this.device.gl,l=s.getProgramParameter(this.gl_program,s.ACTIVE_ATTRIBUTES),u=(n=this.descriptor.vertex.glsl,r={},n.replace(/^\s*#define\s*(\S*)\s*(\S*)\s*$/gm,function(n,i,a){var o=Number(a);return r[i]=isNaN(o)?a:o,"";}),r),c=(i=this.rawVertexGLSL,a=[],i.replace(/^\s*layout\(location\s*=\s*(\S*)\)\s*in\s+\S+\s*(.*);$/gm,function(n,r,i){var o=Number(r);return a.push({location:isNaN(o)?u[r]:o,name:i}),"";}),a),f=this,d=0;d<l;d++)!function(n){var r=s.getActiveAttrib(f.gl_program,n),i=r.name,a=r.type,l=r.size,u=s.getAttribLocation(f.gl_program,i),d=null===(o=c.find(function(n){return n.name===i;}))||void 0===o?void 0:o.location;u>=0&&!(0,ey.default)(d)&&(f.attributes[d]={name:i,location:u,type:a,size:l});}(d);},r.prototype.readUniformLocationsFromLinkedProgram=function(){for(var n=this.device.gl,r=n.getProgramParameter(this.gl_program,n.ACTIVE_UNIFORMS),i=0;i<r;i++){var a=n.getActiveUniform(this.gl_program,i),o=function(n){if("]"!==n[n.length-1])return{name:n,length:1,isArray:!1};var r=n.match(ta);if(!r||r.length<2)throw Error("Failed to parse GLSL uniform name ".concat(n));return{name:r[1],length:Number(r[2])||1,isArray:!!r[2]};}(a.name).name,s=n.getUniformLocation(this.gl_program,o);if(this.uniformSetters[o]=t_(n,s,a),a&&a.size>1)for(var l=0;l<a.size;l++)s=n.getUniformLocation(this.gl_program,"".concat(o,"[").concat(l,"]")),this.uniformSetters["".concat(o,"[").concat(l,"]")]=t_(n,s,a);}},r.prototype.compileShader=function(n,r){var i=this.device.gl,a=this.device.ensureResourceExists(i.createShader(r));return i.shaderSource(a,n),i.compileShader(a),a;},r.prototype.setUniformsLegacy=function(n){void 0===n&&(n={});var r=this.device.gl;if(!tA(r)){var i=!1;for(var a in n){i||(r.useProgram(this.gl_program),i=!0);var o=n[a],s=this.uniformSetters[a];if(s){var l=o;l instanceof tz&&(l=l.textureIndex),s(l);}}}return this;},r;}(tS),tG=function(n){function r(r){var i=r.id,a=r.device,o=r.descriptor,s=n.call(this,{id:i,device:a})||this;s.type=z.QueryPool;var l=s.device.gl;if(tA(l)){var u=o.elemCount,c=o.type;s.gl_query=function(n,r){for(var i=Array(n),a=0;a<n;a++)i[a]=r();return i;}(u,function(){return s.device.ensureResourceExists(l.createQuery());}),s.gl_query_type=function(n){if(n===es.OcclusionConservative)return j.ANY_SAMPLES_PASSED_CONSERVATIVE;throw Error("whoops");}(c);}return s;}return(0,ex.__extends)(r,n),r.prototype.queryResultOcclusion=function(n){var r=this.device.gl;if(tA(r)){var i=this.gl_query[n];return r.getQueryParameter(i,r.QUERY_RESULT_AVAILABLE)?!!r.getQueryParameter(i,r.QUERY_RESULT):null;}return null;},r.prototype.destroy=function(){n.prototype.destroy.call(this);var r=this.device.gl;if(tA(r))for(var i=0;i<this.gl_query.length;i++)r.deleteQuery(this.gl_query[i]);},r;}(tS),tH=function(n){function r(r){var i=r.id,a=r.device,o=n.call(this,{id:i,device:a})||this;return o.type=z.Readback,o.gl_pbo=null,o.gl_sync=null,o;}return(0,ex.__extends)(r,n),r.prototype.clientWaitAsync=function(n,r,i){void 0===r&&(r=0),void 0===i&&(i=10);var a=this.device.gl;return new Promise(function(o,s){!function l(){var u=a.clientWaitSync(n,r,0);if(u==a.WAIT_FAILED){s();return;}if(u==a.TIMEOUT_EXPIRED){setTimeout(l,(0,eb.default)(i,0,a.MAX_CLIENT_WAIT_TIMEOUT_WEBGL));return;}o();}();});},r.prototype.getBufferSubDataAsync=function(n,r,i,a,o,s){return(0,ex.__awaiter)(this,void 0,void 0,function(){var l;return(0,ex.__generator)(this,function(u){switch(u.label){case 0:if(!tA(l=this.device.gl))return[3,2];return this.gl_sync=l.fenceSync(l.SYNC_GPU_COMMANDS_COMPLETE,0),l.flush(),[4,this.clientWaitAsync(this.gl_sync,0,10)];case 1:return u.sent(),l.bindBuffer(n,r),l.getBufferSubData(n,i,a,o,s),l.bindBuffer(n,null),[2,a];case 2:return[2];}});});},r.prototype.readTexture=function(n,r,i,a,o,s,l,u){return void 0===l&&(l=0),void 0===u&&(u=s.byteLength||0),(0,ex.__awaiter)(this,void 0,void 0,function(){var c,f,d,h,p;return(0,ex.__generator)(this,function(m){var g;return(c=this.device.gl,f=n,d=this.device.translateTextureFormat(f.format),h=this.device.translateTextureType(f.format),p=eA(eT(g=f.format))*eS(g),tA(c))?(this.gl_pbo=this.device.ensureResourceExists(c.createBuffer()),c.bindBuffer(c.PIXEL_PACK_BUFFER,this.gl_pbo),c.bufferData(c.PIXEL_PACK_BUFFER,u,c.STREAM_READ),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),c.bindFramebuffer(j.READ_FRAMEBUFFER,this.device.readbackFramebuffer),c.framebufferTexture2D(j.READ_FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,f.gl_texture,0),c.bindBuffer(c.PIXEL_PACK_BUFFER,this.gl_pbo),c.readPixels(r,i,a,o,d,h,l*p),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),[2,this.getBufferSubDataAsync(c.PIXEL_PACK_BUFFER,this.gl_pbo,0,s,l,0)]):[2,this.readTextureSync(n,r,i,a,o,s,l,u)];});});},r.prototype.readTextureSync=function(n,r,i,a,o,s,l,u){void 0===u&&(u=s.byteLength||0);var c=this.device.gl,f=this.device.translateTextureType(n.format);return c.bindFramebuffer(j.FRAMEBUFFER,this.device.readbackFramebuffer),c.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,n.gl_texture,0),c.pixelStorei(c.PACK_ALIGNMENT,4),c.readPixels(r,i,a,o,c.RGBA,f,s),s;},r.prototype.readBuffer=function(n,r,i,a,o){return(0,ex.__awaiter)(this,void 0,void 0,function(){var s;return(0,ex.__generator)(this,function(l){return tA(s=this.device.gl)?[2,this.getBufferSubDataAsync(s.ARRAY_BUFFER,tk(n,r),r,i,a,o)]:[2,Promise.reject()];});});},r.prototype.destroy=function(){n.prototype.destroy.call(this),tA(this.device.gl)&&(null!==this.gl_sync&&this.device.gl.deleteSync(this.gl_sync),null!==this.gl_pbo&&this.device.gl.deleteBuffer(this.gl_pbo));},r;}(tS),tW=function(n){function r(r){var i,a,o=r.id,s=r.device,l=r.descriptor,u=n.call(this,{id:o,device:s})||this;return u.type=z.RenderPipeline,u.drawMode=function(n){switch(n){case Y.TRIANGLES:return j.TRIANGLES;case Y.POINTS:return j.POINTS;case Y.TRIANGLE_STRIP:return j.TRIANGLE_STRIP;case Y.LINES:return j.LINES;case Y.LINE_STRIP:return j.LINE_STRIP;default:throw Error("Unknown primitive topology mode");}}(null!==(i=l.topology)&&void 0!==i?i:Y.TRIANGLES),u.program=l.program,u.inputLayout=l.inputLayout,u.megaState=(0,ex.__assign)((0,ex.__assign)({},eG(eW)),l.megaStateDescriptor),u.colorAttachmentFormats=l.colorAttachmentFormats.slice(),u.depthStencilAttachmentFormat=l.depthStencilAttachmentFormat,u.sampleCount=null!==(a=l.sampleCount)&&void 0!==a?a:1,u;}return(0,ex.__extends)(r,n),r;}(tS),tX=function(n){function r(r){var i=r.id,a=r.device,o=r.descriptor,s=n.call(this,{id:i,device:a})||this;return s.type=z.ComputePipeline,s.descriptor=o,s;}return(0,ex.__extends)(r,n),r;}(tS),tq=function(){function n(){this.liveObjects=new Set,this.creationStacks=new Map,this.deletionStacks=new Map;}return n.prototype.trackResourceCreated=function(n){this.creationStacks.set(n,Error().stack),this.liveObjects.add(n);},n.prototype.trackResourceDestroyed=function(n){this.deletionStacks.has(n)&&console.warn("Object double freed:",n,"\n\nCreation stack: ",this.creationStacks.get(n),"\n\nDeletion stack: ",this.deletionStacks.get(n),"\n\nThis stack: ",Error().stack),this.deletionStacks.set(n,Error().stack),this.liveObjects.delete(n);},n.prototype.checkForLeaks=function(){var n,r;try{for(var i=(0,ex.__values)(this.liveObjects.values()),a=i.next();!a.done;a=i.next()){var o=a.value;console.warn("Object leaked:",o,"Creation stack:",this.creationStacks.get(o));}}catch(r){n={error:r};}finally{try{a&&!a.done&&(r=i.return)&&r.call(i);}finally{if(n)throw n.error;}}},n.prototype.setResourceLeakCheck=function(n,r){r?this.liveObjects.add(n):this.liveObjects.delete(n);},n;}(),t$=function(n){function r(r){var i,a,o=r.id,s=r.device,l=r.descriptor,u=n.call(this,{id:o,device:s})||this;u.type=z.Sampler;var c=u.device.gl;if(tA(c)){var f=u.device.ensureResourceExists(c.createSampler());c.samplerParameteri(f,j.TEXTURE_WRAP_S,tR(l.addressModeU)),c.samplerParameteri(f,j.TEXTURE_WRAP_T,tR(l.addressModeV)),c.samplerParameteri(f,j.TEXTURE_WRAP_R,tR(null!==(i=l.addressModeW)&&void 0!==i?i:l.addressModeU)),c.samplerParameteri(f,j.TEXTURE_MIN_FILTER,tP(l.minFilter,l.mipmapFilter)),c.samplerParameteri(f,j.TEXTURE_MAG_FILTER,tP(l.magFilter,$.NO_MIP)),void 0!==l.lodMinClamp&&c.samplerParameterf(f,j.TEXTURE_MIN_LOD,l.lodMinClamp),void 0!==l.lodMaxClamp&&c.samplerParameterf(f,j.TEXTURE_MAX_LOD,l.lodMaxClamp),void 0!==l.compareFunction&&(c.samplerParameteri(f,c.TEXTURE_COMPARE_MODE,c.COMPARE_REF_TO_TEXTURE),c.samplerParameteri(f,c.TEXTURE_COMPARE_FUNC,l.compareFunction));var d=null!==(a=l.maxAnisotropy)&&void 0!==a?a:1;d>1&&null!==u.device.EXT_texture_filter_anisotropic&&(eO(l.minFilter===q.BILINEAR&&l.magFilter===q.BILINEAR&&l.mipmapFilter===$.LINEAR),c.samplerParameterf(f,u.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,d)),u.gl_sampler=f;}else u.descriptor=l;return u;}return(0,ex.__extends)(r,n),r.prototype.setTextureParameters=function(n,r,i){var a,o=this.device.gl,s=this.descriptor;this.isNPOT(r,i)?o.texParameteri(j.TEXTURE_2D,j.TEXTURE_MIN_FILTER,j.LINEAR):o.texParameteri(n,j.TEXTURE_MIN_FILTER,tP(s.minFilter,s.mipmapFilter)),o.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_S,tR(s.addressModeU)),o.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_T,tR(s.addressModeV)),o.texParameteri(n,j.TEXTURE_MAG_FILTER,tP(s.magFilter,$.NO_MIP));var l=null!==(a=s.maxAnisotropy)&&void 0!==a?a:1;l>1&&null!==this.device.EXT_texture_filter_anisotropic&&(eO(s.minFilter===q.BILINEAR&&s.magFilter===q.BILINEAR&&s.mipmapFilter===$.LINEAR),o.texParameteri(n,this.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l));},r.prototype.destroy=function(){n.prototype.destroy.call(this),tA(this.device.gl)&&this.device.gl.deleteSampler(tL(this));},r.prototype.isNPOT=function(n,r){return!eD(n)||!eD(r);},r;}(tS),tY=function(){function n(){}return n.prototype.dispatchWorkgroups=function(n,r,i){},n.prototype.dispatchWorkgroupsIndirect=function(n,r){},n.prototype.setPipeline=function(n){},n.prototype.setBindings=function(n){},n.prototype.pushDebugGroup=function(n){},n.prototype.popDebugGroup=function(){},n.prototype.insertDebugMarker=function(n){},n;}(),tZ=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.type=z.RenderBundle,r.commands=[],r;}return(0,ex.__extends)(r,n),r.prototype.push=function(n){this.commands.push(n);},r.prototype.replay=function(){this.commands.forEach(function(n){return n();});},r;}(tS),tK=/uniform(?:\s+)(\w+)(?:\s?){([^]*?)}/g,tQ=function(){function n(n,r){void 0===r&&(r={}),this.shaderDebug=!1,this.OES_vertex_array_object=null,this.ANGLE_instanced_arrays=null,this.OES_texture_float=null,this.OES_draw_buffers_indexed=null,this.WEBGL_draw_buffers=null,this.WEBGL_depth_texture=null,this.WEBGL_color_buffer_float=null,this.EXT_color_buffer_half_float=null,this.WEBGL_compressed_texture_s3tc=null,this.WEBGL_compressed_texture_s3tc_srgb=null,this.EXT_texture_compression_rgtc=null,this.EXT_texture_filter_anisotropic=null,this.KHR_parallel_shader_compile=null,this.EXT_texture_norm16=null,this.EXT_color_buffer_float=null,this.OES_texture_float_linear=null,this.OES_texture_half_float_linear=null,this.scTexture=null,this.scPlatformFramebuffer=null,this.currentActiveTexture=null,this.currentBoundVAO=null,this.currentProgram=null,this.resourceCreationTracker=null,this.resourceUniqueId=0,this.currentColorAttachments=[],this.currentColorAttachmentLevels=[],this.currentColorResolveTos=[],this.currentColorResolveToLevels=[],this.currentSampleCount=-1,this.currentIndexBufferByteOffset=null,this.currentMegaState=eG(eW),this.currentSamplers=[],this.currentTextures=[],this.currentUniformBuffers=[],this.currentUniformBufferByteOffsets=[],this.currentUniformBufferByteSizes=[],this.currentScissorEnabled=!1,this.currentStencilRef=null,this.currentRenderPassDescriptor=null,this.currentRenderPassDescriptorStack=[],this.debugGroupStack=[],this.resolveColorAttachmentsChanged=!1,this.resolveDepthStencilAttachmentsChanged=!1,this.explicitBindingLocations=!1,this.separateSamplerTextures=!1,this.viewportOrigin=ea.LOWER_LEFT,this.clipSpaceNearZ=eo.NEGATIVE_ONE,this.supportMRT=!1,this.inBlitRenderPass=!1,this.supportedSampleCounts=[],this.occlusionQueriesRecommended=!1,this.computeShadersSupported=!1,this.gl=n,this.contextAttributes=eM(n.getContextAttributes()),tA(n)?(this.EXT_texture_norm16=n.getExtension("EXT_texture_norm16"),this.EXT_color_buffer_float=n.getExtension("EXT_color_buffer_float")):(this.OES_vertex_array_object=n.getExtension("OES_vertex_array_object"),this.ANGLE_instanced_arrays=n.getExtension("ANGLE_instanced_arrays"),this.OES_texture_float=n.getExtension("OES_texture_float"),this.WEBGL_draw_buffers=n.getExtension("WEBGL_draw_buffers"),this.WEBGL_depth_texture=n.getExtension("WEBGL_depth_texture"),this.WEBGL_color_buffer_float=n.getExtension("WEBGL_color_buffer_float"),this.EXT_color_buffer_half_float=n.getExtension("EXT_color_buffer_half_float"),n.getExtension("EXT_frag_depth"),n.getExtension("OES_element_index_uint"),n.getExtension("OES_standard_derivatives")),this.WEBGL_compressed_texture_s3tc=n.getExtension("WEBGL_compressed_texture_s3tc"),this.WEBGL_compressed_texture_s3tc_srgb=n.getExtension("WEBGL_compressed_texture_s3tc_srgb"),this.EXT_texture_compression_rgtc=n.getExtension("EXT_texture_compression_rgtc"),this.EXT_texture_filter_anisotropic=n.getExtension("EXT_texture_filter_anisotropic"),this.EXT_texture_norm16=n.getExtension("EXT_texture_norm16"),this.OES_texture_float_linear=n.getExtension("OES_texture_float_linear"),this.OES_texture_half_float_linear=n.getExtension("OES_texture_half_float_linear"),this.KHR_parallel_shader_compile=n.getExtension("KHR_parallel_shader_compile"),tA(n)?(this.platformString="WebGL2",this.glslVersion="#version 300 es"):(this.platformString="WebGL1",this.glslVersion="#version 100"),this.scTexture=new tz({id:this.getNextUniqueId(),device:this,descriptor:{width:0,height:0,depthOrArrayLayers:1,dimension:ee.TEXTURE_2D,mipLevelCount:1,usage:et.RENDER_TARGET,format:!1===this.contextAttributes.alpha?ef.U8_RGB_RT:ef.U8_RGBA_RT},fake:!0}),this.scTexture.formatKind=ei.Float,this.scTexture.gl_target=null,this.scTexture.gl_texture=null,this.resolveColorReadFramebuffer=this.ensureResourceExists(n.createFramebuffer()),this.resolveColorDrawFramebuffer=this.ensureResourceExists(n.createFramebuffer()),this.resolveDepthStencilReadFramebuffer=this.ensureResourceExists(n.createFramebuffer()),this.resolveDepthStencilDrawFramebuffer=this.ensureResourceExists(n.createFramebuffer()),this.renderPassDrawFramebuffer=this.ensureResourceExists(n.createFramebuffer()),this.readbackFramebuffer=this.ensureResourceExists(n.createFramebuffer()),this.fallbackTexture2D=this.createFallbackTexture(ee.TEXTURE_2D,ei.Float),this.fallbackTexture2DDepth=this.createFallbackTexture(ee.TEXTURE_2D,ei.Depth),this.fallbackVertexBuffer=this.createBuffer({viewOrSize:1,usage:Z.VERTEX,hint:K.STATIC}),tA(n)&&(this.fallbackTexture2DArray=this.createFallbackTexture(ee.TEXTURE_2D_ARRAY,ei.Float),this.fallbackTexture3D=this.createFallbackTexture(ee.TEXTURE_3D,ei.Float),this.fallbackTextureCube=this.createFallbackTexture(ee.TEXTURE_CUBE_MAP,ei.Float)),this.currentMegaState.depthCompare=U.LESS,this.currentMegaState.depthWrite=!1,this.currentMegaState.attachmentsState[0].channelWriteMask=en.ALL,n.enable(n.DEPTH_TEST),n.enable(n.STENCIL_TEST),this.checkLimits(),r.shaderDebug&&(this.shaderDebug=!0),r.trackResources&&(this.resourceCreationTracker=new tq);}return n.prototype.destroy=function(){this.blitBindings&&this.blitBindings.destroy(),this.blitInputLayout&&this.blitInputLayout.destroy(),this.blitRenderPipeline&&this.blitRenderPipeline.destroy(),this.blitVertexBuffer&&this.blitVertexBuffer.destroy(),this.blitProgram&&this.blitProgram.destroy();},n.prototype.createFallbackTexture=function(n,r){var i=n===ee.TEXTURE_CUBE_MAP?6:1,a=r===ei.Depth?ef.D32F:ef.U8_RGBA_NORM,o=this.createTexture({dimension:n,format:a,usage:et.SAMPLED,width:1,height:1,depthOrArrayLayers:i,mipLevelCount:1});return r===ei.Float&&o.setImageData([new Uint8Array(4*i)]),tI(o);},n.prototype.getNextUniqueId=function(){return++this.resourceUniqueId;},n.prototype.checkLimits=function(){var n=this.gl;if(this.maxVertexAttribs=n.getParameter(j.MAX_VERTEX_ATTRIBS),tA(n)){this.uniformBufferMaxPageByteSize=Math.min(n.getParameter(j.MAX_UNIFORM_BLOCK_SIZE),65536),this.uniformBufferWordAlignment=n.getParameter(n.UNIFORM_BUFFER_OFFSET_ALIGNMENT)/4;var r=n.getInternalformatParameter(n.RENDERBUFFER,n.DEPTH32F_STENCIL8,n.SAMPLES);this.supportedSampleCounts=r?(0,ex.__spreadArray)([],(0,ex.__read)(r),!1):[],this.occlusionQueriesRecommended=!0;}else this.uniformBufferWordAlignment=64,this.uniformBufferMaxPageByteSize=65536;this.uniformBufferMaxPageWordSize=this.uniformBufferMaxPageByteSize/4,this.supportedSampleCounts.includes(1)||this.supportedSampleCounts.push(1),this.supportedSampleCounts.sort(function(n,r){return n-r;});},n.prototype.configureSwapChain=function(n,r,i){var a=this.scTexture;a.width=n,a.height=r,this.scPlatformFramebuffer=void 0===i?null:i;},n.prototype.getDevice=function(){return this;},n.prototype.getCanvas=function(){return this.gl.canvas;},n.prototype.getOnscreenTexture=function(){return this.scTexture;},n.prototype.beginFrame=function(){},n.prototype.endFrame=function(){},n.prototype.translateTextureInternalFormat=function(n,r){switch(void 0===r&&(r=!1),n){case ef.ALPHA:return j.ALPHA;case ef.U8_LUMINANCE:case ef.F16_LUMINANCE:case ef.F32_LUMINANCE:return j.LUMINANCE;case ef.F16_R:return j.R16F;case ef.F16_RG:return j.RG16F;case ef.F16_RGB:return j.RGB16F;case ef.F16_RGBA:return j.RGBA16F;case ef.F32_R:return j.R32F;case ef.F32_RG:return j.RG32F;case ef.F32_RGB:return j.RGB32F;case ef.F32_RGBA:return tA(this.gl)?j.RGBA32F:r?this.WEBGL_color_buffer_float.RGBA32F_EXT:j.RGBA;case ef.U8_R_NORM:return j.R8;case ef.U8_RG_NORM:return j.RG8;case ef.U8_RGB_NORM:case ef.U8_RGB_RT:return j.RGB8;case ef.U8_RGB_SRGB:return j.SRGB8;case ef.U8_RGBA_NORM:case ef.U8_RGBA_RT:return tA(this.gl)?j.RGBA8:r?j.RGBA4:j.RGBA;case ef.U8_RGBA:return j.RGBA;case ef.U8_RGBA_SRGB:case ef.U8_RGBA_RT_SRGB:return j.SRGB8_ALPHA8;case ef.U16_R:return j.R16UI;case ef.U16_R_NORM:return this.EXT_texture_norm16.R16_EXT;case ef.U16_RG_NORM:return this.EXT_texture_norm16.RG16_EXT;case ef.U16_RGBA_NORM:return this.EXT_texture_norm16.RGBA16_EXT;case ef.U16_RGBA_5551:return j.RGB5_A1;case ef.U16_RGB_565:return j.RGB565;case ef.U32_R:return j.R32UI;case ef.S8_RGBA_NORM:return j.RGBA8_SNORM;case ef.S8_RG_NORM:return j.RG8_SNORM;case ef.BC1:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT;case ef.BC1_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;case ef.BC2:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT;case ef.BC2_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;case ef.BC3:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT;case ef.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;case ef.BC4_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_RGTC1_EXT;case ef.BC4_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT;case ef.BC5_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT;case ef.BC5_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;case ef.D32F_S8:return tA(this.gl)?j.DEPTH32F_STENCIL8:this.WEBGL_depth_texture?j.DEPTH_STENCIL:j.DEPTH_COMPONENT16;case ef.D24_S8:return tA(this.gl)?j.DEPTH24_STENCIL8:this.WEBGL_depth_texture?j.DEPTH_STENCIL:j.DEPTH_COMPONENT16;case ef.D32F:return tA(this.gl)?j.DEPTH_COMPONENT32F:this.WEBGL_depth_texture?j.DEPTH_COMPONENT:j.DEPTH_COMPONENT16;case ef.D24:return tA(this.gl)?j.DEPTH_COMPONENT24:this.WEBGL_depth_texture?j.DEPTH_COMPONENT:j.DEPTH_COMPONENT16;default:throw Error("whoops");}},n.prototype.translateTextureType=function(n){switch(eT(n)){case el.U8:return j.UNSIGNED_BYTE;case el.U16:return j.UNSIGNED_SHORT;case el.U32:return j.UNSIGNED_INT;case el.S8:return j.BYTE;case el.F16:return j.HALF_FLOAT;case el.F32:return j.FLOAT;case el.U16_PACKED_5551:return j.UNSIGNED_SHORT_5_5_5_1;case el.D32F:return tA(this.gl)?j.FLOAT:this.WEBGL_depth_texture?j.UNSIGNED_INT:j.UNSIGNED_BYTE;case el.D24:return tA(this.gl)?j.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?j.UNSIGNED_SHORT:j.UNSIGNED_BYTE;case el.D24S8:return tA(this.gl)?j.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?j.UNSIGNED_INT_24_8_WEBGL:j.UNSIGNED_BYTE;case el.D32FS8:return j.FLOAT_32_UNSIGNED_INT_24_8_REV;default:throw Error("whoops");}},n.prototype.translateInternalTextureFormat=function(n){switch(n){case ef.F32_R:return j.R32F;case ef.F32_RG:return j.RG32F;case ef.F32_RGB:return j.RGB32F;case ef.F32_RGBA:return j.RGBA32F;case ef.F16_R:return j.R16F;case ef.F16_RG:return j.RG16F;case ef.F16_RGB:return j.RGB16F;case ef.F16_RGBA:return j.RGBA16F;}return this.translateTextureFormat(n);},n.prototype.translateTextureFormat=function(n){if(tC(n)||n===ef.F32_LUMINANCE||n===ef.U8_LUMINANCE)return this.translateTextureInternalFormat(n);var r=tA(this.gl)||!tA(this.gl)&&!!this.WEBGL_depth_texture;switch(n){case ef.D24_S8:case ef.D32F_S8:return r?j.DEPTH_STENCIL:j.RGBA;case ef.D24:case ef.D32F:return r?j.DEPTH_COMPONENT:j.RGBA;}var i=tO(n);switch(eS(n)){case eu.A:return j.ALPHA;case eu.R:return i?j.RED_INTEGER:j.RED;case eu.RG:return i?j.RG_INTEGER:j.RG;case eu.RGB:return i?j.RGB_INTEGER:j.RGB;case eu.RGBA:return j.RGBA;}},n.prototype.setActiveTexture=function(n){this.currentActiveTexture!==n&&(this.gl.activeTexture(n),this.currentActiveTexture=n);},n.prototype.bindVAO=function(n){this.currentBoundVAO!==n&&(tA(this.gl)?this.gl.bindVertexArray(n):this.OES_vertex_array_object.bindVertexArrayOES(n),this.currentBoundVAO=n);},n.prototype.programCompiled=function(n){eO(n.compileState!==ep.NeedsCompile),n.compileState===ep.Compiling&&(n.compileState=ep.NeedsBind,this.shaderDebug&&this.checkProgramCompilationForErrors(n));},n.prototype.useProgram=function(n){this.currentProgram!==n&&(this.programCompiled(n),this.gl.useProgram(n.gl_program),this.currentProgram=n);},n.prototype.ensureResourceExists=function(n){if(null!==n)return n;var r=this.gl.getError();throw Error("Created resource is null; GL error encountered: ".concat(r));},n.prototype.createBuffer=function(n){return new tB({id:this.getNextUniqueId(),device:this,descriptor:n});},n.prototype.createTexture=function(n){return new tz({id:this.getNextUniqueId(),device:this,descriptor:n});},n.prototype.createSampler=function(n){return new t$({id:this.getNextUniqueId(),device:this,descriptor:n});},n.prototype.createRenderTarget=function(n){return new tU({id:this.getNextUniqueId(),device:this,descriptor:n});},n.prototype.createRenderTargetFromTexture=function(n){var r=n.format,i=n.width,a=n.height;return eO(1===n.mipLevelCount),this.createRenderTarget({format:r,width:i,height:a,sampleCount:1,texture:n});},n.prototype.createProgram=function(n){var r,i,a,o=null===(r=n.vertex)||void 0===r?void 0:r.glsl;return(null===(i=n.vertex)||void 0===i?void 0:i.glsl)&&(n.vertex.glsl=tw(this.queryVendorInfo(),"vert",n.vertex.glsl)),(null===(a=n.fragment)||void 0===a?void 0:a.glsl)&&(n.fragment.glsl=tw(this.queryVendorInfo(),"frag",n.fragment.glsl)),this.createProgramSimple(n,o);},n.prototype.createProgramSimple=function(n,r){return new tV({id:this.getNextUniqueId(),device:this,descriptor:n},r);},n.prototype.createBindings=function(n){return new tT({id:this.getNextUniqueId(),device:this,descriptor:n});},n.prototype.createInputLayout=function(n){return new tj({id:this.getNextUniqueId(),device:this,descriptor:n});},n.prototype.createRenderPipeline=function(n){return new tW({id:this.getNextUniqueId(),device:this,descriptor:n});},n.prototype.createComputePass=function(){return new tY;},n.prototype.createComputePipeline=function(n){return new tX({id:this.getNextUniqueId(),device:this,descriptor:n});},n.prototype.createReadback=function(){return new tH({id:this.getNextUniqueId(),device:this});},n.prototype.createQueryPool=function(n,r){return new tG({id:this.getNextUniqueId(),device:this,descriptor:{type:n,elemCount:r}});},n.prototype.formatRenderPassDescriptor=function(n){var r,i,a,o,s,l,u=n.colorAttachment;n.depthClearValue=null!==(r=n.depthClearValue)&&void 0!==r?r:"load",n.stencilClearValue=null!==(i=n.stencilClearValue)&&void 0!==i?i:"load";for(var c=0;c<u.length;c++)n.colorAttachmentLevel||(n.colorAttachmentLevel=[]),n.colorAttachmentLevel[c]=null!==(a=n.colorAttachmentLevel[c])&&void 0!==a?a:0,n.colorResolveToLevel||(n.colorResolveToLevel=[]),n.colorResolveToLevel[c]=null!==(o=n.colorResolveToLevel[c])&&void 0!==o?o:0,n.colorClearColor||(n.colorClearColor=[]),n.colorClearColor[c]=null!==(s=n.colorClearColor[c])&&void 0!==s?s:"load",n.colorStore||(n.colorStore=[]),n.colorStore[c]=null!==(l=n.colorStore[c])&&void 0!==l&&l;},n.prototype.createRenderBundle=function(){return new tZ({id:this.getNextUniqueId(),device:this});},n.prototype.beginBundle=function(n){this.renderBundle=n;},n.prototype.endBundle=function(){this.renderBundle=void 0;},n.prototype.executeBundles=function(n){n.forEach(function(n){n.replay();});},n.prototype.createRenderPass=function(n){null!==this.currentRenderPassDescriptor&&this.currentRenderPassDescriptorStack.push(this.currentRenderPassDescriptor),this.currentRenderPassDescriptor=n,this.formatRenderPassDescriptor(n);var r=n.colorAttachment,i=n.colorAttachmentLevel,a=n.colorClearColor,o=n.colorResolveTo,s=n.colorResolveToLevel,l=n.depthStencilAttachment,u=n.depthClearValue,c=n.stencilClearValue,f=n.depthStencilResolveTo,d=o&&1===o.length&&o[0]===this.scTexture;this.setRenderPassParametersBegin(r.length,d);for(var h=0;h<r.length;h++)this.setRenderPassParametersColor(h,r[h],i[h],o[h],s[h],d);this.setRenderPassParametersDepthStencil(l,f,d),this.validateCurrentAttachments();for(var h=0;h<r.length;h++){var p=a[h];"load"!==p&&this.setRenderPassParametersClearColor(h,p.r,p.g,p.b,p.a);}return this.setRenderPassParametersClearDepthStencil(u,c),this;},n.prototype.submitPass=function(n){eO(null!==this.currentRenderPassDescriptor),this.endPass(),this.currentRenderPassDescriptorStack.length?this.currentRenderPassDescriptor=this.currentRenderPassDescriptorStack.pop():this.currentRenderPassDescriptor=null;},n.prototype.copySubTexture2D=function(n,r,i,a,o,s){var l=this.gl;if(eO(1===a.mipLevelCount),eO(1===n.mipLevelCount),tA(l))n===this.scTexture?l.bindFramebuffer(l.DRAW_FRAMEBUFFER,this.scPlatformFramebuffer):(l.bindFramebuffer(l.DRAW_FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.bindFramebufferAttachment(l.DRAW_FRAMEBUFFER,l.COLOR_ATTACHMENT0,n,0)),l.bindFramebuffer(l.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.bindFramebufferAttachment(l.READ_FRAMEBUFFER,l.COLOR_ATTACHMENT0,a,0),l.blitFramebuffer(o,s,o+a.width,s+a.height,r,i,r+a.width,i+a.height,l.COLOR_BUFFER_BIT,l.LINEAR),l.bindFramebuffer(l.READ_FRAMEBUFFER,null),l.bindFramebuffer(l.DRAW_FRAMEBUFFER,null);else if(n===this.scTexture){var u=this.createRenderTargetFromTexture(a);this.submitBlitRenderPass(u,n);}},n.prototype.queryLimits=function(){return this;},n.prototype.queryTextureFormatSupported=function(n,r,i){switch(n){case ef.BC1_SRGB:case ef.BC2_SRGB:case ef.BC3_SRGB:if(null!==this.WEBGL_compressed_texture_s3tc_srgb)return r%4==0&&i%4==0;return!1;case ef.BC1:case ef.BC2:case ef.BC3:if(null!==this.WEBGL_compressed_texture_s3tc)return r%4==0&&i%4==0;return!1;case ef.BC4_UNORM:case ef.BC4_SNORM:case ef.BC5_UNORM:case ef.BC5_SNORM:if(null!==this.EXT_texture_compression_rgtc)return r%4==0&&i%4==0;return!1;case ef.U16_R_NORM:case ef.U16_RG_NORM:case ef.U16_RGBA_NORM:return null!==this.EXT_texture_norm16;case ef.F32_R:case ef.F32_RG:case ef.F32_RGB:case ef.F32_RGBA:return null!==this.OES_texture_float_linear;case ef.F16_R:case ef.F16_RG:case ef.F16_RGB:case ef.F16_RGBA:return null!==this.OES_texture_half_float_linear;default:return!0;}},n.prototype.queryProgramReady=function(n){var r=this.gl;if(n.compileState===ep.NeedsCompile)throw Error("whoops");if(n.compileState===ep.Compiling){var i=void 0;return(i=null===this.KHR_parallel_shader_compile||r.getProgramParameter(n.gl_program,this.KHR_parallel_shader_compile.COMPLETION_STATUS_KHR))&&this.programCompiled(n),i;}return n.compileState===ep.NeedsBind||n.compileState===ep.ReadyToUse;},n.prototype.queryPlatformAvailable=function(){return this.gl.isContextLost();},n.prototype.queryVendorInfo=function(){return this;},n.prototype.queryRenderPass=function(n){return this.currentRenderPassDescriptor;},n.prototype.queryRenderTarget=function(n){return n;},n.prototype.setResourceName=function(n,r){if(n.name=r,n.type===z.Buffer)for(var i=n.gl_buffer_pages,a=0;a<i.length;a++)tN(i[a],"".concat(r," Page ").concat(a));else if(n.type===z.Texture)tN(tI(n),r);else if(n.type===z.Sampler)tN(tL(n),r);else if(n.type===z.RenderTarget){var o=n.gl_renderbuffer;null!==o&&tN(o,r);}else n.type===z.InputLayout&&tN(n.vao,r);},n.prototype.setResourceLeakCheck=function(n,r){null!==this.resourceCreationTracker&&this.resourceCreationTracker.setResourceLeakCheck(n,r);},n.prototype.checkForLeaks=function(){null!==this.resourceCreationTracker&&this.resourceCreationTracker.checkForLeaks();},n.prototype.pushDebugGroup=function(n){},n.prototype.popDebugGroup=function(){},n.prototype.insertDebugMarker=function(n){},n.prototype.programPatched=function(n,r){eO(this.shaderDebug);},n.prototype.getBufferData=function(n,r,i){void 0===i&&(i=0);var a=this.gl;tA(a)&&(a.bindBuffer(a.COPY_READ_BUFFER,tk(n,4*i)),a.getBufferSubData(a.COPY_READ_BUFFER,4*i,r));},n.prototype.debugGroupStatisticsDrawCall=function(n){void 0===n&&(n=1);for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].drawCallCount+=n;},n.prototype.debugGroupStatisticsBufferUpload=function(n){void 0===n&&(n=1);for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].bufferUploadCount+=n;},n.prototype.debugGroupStatisticsTextureBind=function(n){void 0===n&&(n=1);for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].textureBindCount+=n;},n.prototype.debugGroupStatisticsTriangles=function(n){for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].triangleCount+=n;},n.prototype.reportShaderError=function(n,r){var i=this.gl,a=i.getShaderParameter(n,i.COMPILE_STATUS);if(!a){console.error((void 0===o&&(o=1),r.split("\n").map(function(n,r){return"".concat(function(n,r,i){for(void 0===i&&(i="0");n.length<4;)n="".concat(i).concat(n);return n;}(""+(o+r),0," "),"  ").concat(n);}).join("\n")));var o,s=i.getExtension("WEBGL_debug_shaders");s&&console.error(s.getTranslatedShaderSource(n)),console.error(i.getShaderInfoLog(n));}return a;},n.prototype.checkProgramCompilationForErrors=function(n){var r=this.gl,i=n.gl_program;if(!r.getProgramParameter(i,r.LINK_STATUS)){var a=n.descriptor;if(!this.reportShaderError(n.gl_shader_vert,a.vertex.glsl)||!this.reportShaderError(n.gl_shader_frag,a.fragment.glsl))return;console.error(r.getProgramInfoLog(n.gl_program));}},n.prototype.bindFramebufferAttachment=function(n,r,i,a){var o=this.gl;if((0,ey.default)(i))o.framebufferRenderbuffer(n,r,o.RENDERBUFFER,null);else if(i.type===z.RenderTarget)null!==i.gl_renderbuffer?o.framebufferRenderbuffer(n,r,o.RENDERBUFFER,i.gl_renderbuffer):null!==i.texture&&o.framebufferTexture2D(n,r,j.TEXTURE_2D,tI(i.texture),a);else if(i.type===z.Texture){var s=tI(i);i.dimension===ee.TEXTURE_2D?o.framebufferTexture2D(n,r,j.TEXTURE_2D,s,a):tA(o)&&(i.dimension,ee.TEXTURE_2D_ARRAY);}},n.prototype.bindFramebufferDepthStencilAttachment=function(n,r){var i=this.gl,a=(0,ey.default)(r)?ec.Depth|ec.Stencil:255&r.format,o=!!(a&ec.Depth),s=!!(a&ec.Stencil);o&&s?tA(this.gl)||!tA(this.gl)&&this.WEBGL_depth_texture?this.bindFramebufferAttachment(n,i.DEPTH_STENCIL_ATTACHMENT,r,0):this.bindFramebufferAttachment(n,i.DEPTH_ATTACHMENT,r,0):o?(this.bindFramebufferAttachment(n,i.DEPTH_ATTACHMENT,r,0),this.bindFramebufferAttachment(n,i.STENCIL_ATTACHMENT,null,0)):s&&(this.bindFramebufferAttachment(n,i.STENCIL_ATTACHMENT,r,0),this.bindFramebufferAttachment(n,i.DEPTH_ATTACHMENT,null,0));},n.prototype.validateCurrentAttachments=function(){for(var n=-1,r=-1,i=-1,a=0;a<this.currentColorAttachments.length;a++){var o=this.currentColorAttachments[a];null!==o&&(-1===n?(n=o.sampleCount,r=o.width,i=o.height):(eO(n===o.sampleCount),eO(r===o.width),eO(i===o.height)));}this.currentDepthStencilAttachment&&(-1===n?n=this.currentDepthStencilAttachment.sampleCount:(eO(n===this.currentDepthStencilAttachment.sampleCount),eO(r===this.currentDepthStencilAttachment.width),eO(i===this.currentDepthStencilAttachment.height))),this.currentSampleCount=n;},n.prototype.setRenderPassParametersBegin=function(n,r){void 0===r&&(r=!1);var i=this.gl;if(r)i.bindFramebuffer(j.FRAMEBUFFER,null);else if(tA(i)?i.bindFramebuffer(j.DRAW_FRAMEBUFFER,this.renderPassDrawFramebuffer):this.inBlitRenderPass||i.bindFramebuffer(j.FRAMEBUFFER,this.renderPassDrawFramebuffer),tA(i)?i.drawBuffers([j.COLOR_ATTACHMENT0,j.COLOR_ATTACHMENT1,j.COLOR_ATTACHMENT2,j.COLOR_ATTACHMENT3]):!this.inBlitRenderPass&&this.WEBGL_draw_buffers&&this.WEBGL_draw_buffers.drawBuffersWEBGL([j.COLOR_ATTACHMENT0_WEBGL,j.COLOR_ATTACHMENT1_WEBGL,j.COLOR_ATTACHMENT2_WEBGL,j.COLOR_ATTACHMENT3_WEBGL]),!this.inBlitRenderPass)for(var a=n;a<this.currentColorAttachments.length;a++){var o=tA(i)?j.DRAW_FRAMEBUFFER:j.FRAMEBUFFER,s=tA(i)?j.COLOR_ATTACHMENT0:j.COLOR_ATTACHMENT0_WEBGL;i.framebufferRenderbuffer(o,s+a,j.RENDERBUFFER,null),i.framebufferTexture2D(o,s+a,j.TEXTURE_2D,null,0);}this.currentColorAttachments.length=n;},n.prototype.setRenderPassParametersColor=function(n,r,i,a,o,s){void 0===s&&(s=!1);var l=tA(this.gl);(this.currentColorAttachments[n]!==r||this.currentColorAttachmentLevels[n]!==i)&&(this.currentColorAttachments[n]=r,this.currentColorAttachmentLevels[n]=i,!s&&(l||!l&&this.WEBGL_draw_buffers)&&this.bindFramebufferAttachment(l?j.DRAW_FRAMEBUFFER:j.FRAMEBUFFER,(l?j.COLOR_ATTACHMENT0:j.COLOR_ATTACHMENT0_WEBGL)+n,r,i),this.resolveColorAttachmentsChanged=!0),(this.currentColorResolveTos[n]!==a||this.currentColorResolveToLevels[n]!==o)&&(this.currentColorResolveTos[n]=a,this.currentColorResolveToLevels[n]=o,null!==a&&(this.resolveColorAttachmentsChanged=!0));},n.prototype.setRenderPassParametersDepthStencil=function(n,r,i){void 0===i&&(i=!1);var a=this.gl;this.currentDepthStencilAttachment!==n&&(this.currentDepthStencilAttachment=n,i||this.inBlitRenderPass||this.bindFramebufferDepthStencilAttachment(tA(a)?j.DRAW_FRAMEBUFFER:j.FRAMEBUFFER,this.currentDepthStencilAttachment),this.resolveDepthStencilAttachmentsChanged=!0),this.currentDepthStencilResolveTo!==r&&(this.currentDepthStencilResolveTo=r,r&&(this.resolveDepthStencilAttachmentsChanged=!0));},n.prototype.setRenderPassParametersClearColor=function(n,r,i,a,o){var s=this.gl;if(null!==this.OES_draw_buffers_indexed){var l=this.currentMegaState.attachmentsState[n];l&&l.channelWriteMask!==en.ALL&&(this.OES_draw_buffers_indexed.colorMaskiOES(n,!0,!0,!0,!0),l.channelWriteMask=en.ALL);}else{var l=this.currentMegaState.attachmentsState[0];l&&l.channelWriteMask!==en.ALL&&(s.colorMask(!0,!0,!0,!0),l.channelWriteMask=en.ALL);}this.setScissorRectEnabled(!1),tA(s)?s.clearBufferfv(s.COLOR,n,[r,i,a,o]):(s.clearColor(r,i,a,o),s.clear(s.COLOR_BUFFER_BIT));},n.prototype.setRenderPassParametersClearDepthStencil=function(n,r){void 0===n&&(n="load"),void 0===r&&(r="load");var i=this.gl;"load"!==n&&(eO(!!this.currentDepthStencilAttachment),this.currentMegaState.depthWrite||(i.depthMask(!0),this.currentMegaState.depthWrite=!0),tA(i)?i.clearBufferfv(i.DEPTH,0,[n]):(i.clearDepth(n),i.clear(i.DEPTH_BUFFER_BIT))),"load"!==r&&(eO(!!this.currentDepthStencilAttachment),this.currentMegaState.stencilWrite||(i.enable(i.STENCIL_TEST),i.stencilMask(255),this.currentMegaState.stencilWrite=!0),tA(i)?i.clearBufferiv(i.STENCIL,0,[r]):(i.clearStencil(r),i.clear(i.STENCIL_BUFFER_BIT)));},n.prototype.setBindings=function(n){var r,i=this;if(this.renderBundle){this.renderBundle.push(function(){return i.setBindings(n);});return;}var a=this.gl,o=n.uniformBufferBindings,s=n.samplerBindings,l=n.bindingLayouts;eO(0<l.bindingLayoutTables.length);var u=l.bindingLayoutTables[0];eO(o.length>=u.numUniformBuffers),eO(s.length>=u.numSamplers);for(var c=0;c<o.length;c++){var f=o[c];if(0!==f.size){var d=u.firstUniformBuffer+c,h=f.buffer,p=f.offset||0,m=f.size||h.byteSize;if(h!==this.currentUniformBuffers[d]||p!==this.currentUniformBufferByteOffsets[d]||m!==this.currentUniformBufferByteSizes[d]){var g=p%h.pageByteSize,v=h.gl_buffer_pages[p/h.pageByteSize|0];eO(g+m<=h.pageByteSize),tA(a)&&a.bindBufferRange(a.UNIFORM_BUFFER,d,v,g,m),this.currentUniformBuffers[d]=h,this.currentUniformBufferByteOffsets[d]=p,this.currentUniformBufferByteSizes[d]=m;}}}for(var c=0;c<u.numSamplers;c++){var f=s[c],y=u.firstSampler+c,_=null!==f&&null!==f.sampler?tL(f.sampler):null,b=null!==f&&null!==f.texture?tI(f.texture):null;if(this.currentSamplers[y]!==_&&(tA(a)&&a.bindSampler(y,_),this.currentSamplers[y]=_),this.currentTextures[y]!==b){if(this.setActiveTexture(a.TEXTURE0+y),null!==b){var x=eM(f).texture,E=x.gl_target,w=x.width,S=x.height;f.texture.textureIndex=y,a.bindTexture(E,b),tA(a)||null===(r=f.sampler)||void 0===r||r.setTextureParameters(E,w,S),this.debugGroupStatisticsTextureBind();}else{var T=(0,ex.__assign)((0,ex.__assign)({},f),eX),A=T.dimension,C=T.formatKind,E=function(n){if(n===ee.TEXTURE_2D)return j.TEXTURE_2D;if(n===ee.TEXTURE_2D_ARRAY)return j.TEXTURE_2D_ARRAY;if(n===ee.TEXTURE_CUBE_MAP)return j.TEXTURE_CUBE_MAP;if(n===ee.TEXTURE_3D)return j.TEXTURE_3D;throw Error("whoops");}(A);a.bindTexture(E,this.getFallbackTexture((0,ex.__assign)({gl_target:E,formatKind:C},T)));}this.currentTextures[y]=b;}}},n.prototype.setViewport=function(n,r,i,a){this.gl.viewport(n,r,i,a);},n.prototype.setScissorRect=function(n,r,i,a){var o=this.gl;this.setScissorRectEnabled(!0),o.scissor(n,r,i,a);},n.prototype.applyAttachmentStateIndexed=function(n,r,i){var a=this.gl,o=this.OES_draw_buffers_indexed;r.channelWriteMask!==i.channelWriteMask&&(o.colorMaskiOES(n,!!(i.channelWriteMask&en.RED),!!(i.channelWriteMask&en.GREEN),!!(i.channelWriteMask&en.BLUE),!!(i.channelWriteMask&en.ALPHA)),r.channelWriteMask=i.channelWriteMask);var s=r.rgbBlendState.blendMode!==i.rgbBlendState.blendMode||r.alphaBlendState.blendMode!==i.alphaBlendState.blendMode,l=r.rgbBlendState.blendSrcFactor!==i.rgbBlendState.blendSrcFactor||r.alphaBlendState.blendSrcFactor!==i.alphaBlendState.blendSrcFactor||r.rgbBlendState.blendDstFactor!==i.rgbBlendState.blendDstFactor||r.alphaBlendState.blendDstFactor!==i.alphaBlendState.blendDstFactor;(l||s)&&(tF(r.rgbBlendState)&&tF(r.alphaBlendState)?o.enableiOES(n,a.BLEND):tF(i.rgbBlendState)&&tF(i.alphaBlendState)&&o.disableiOES(n,a.BLEND)),s&&(o.blendEquationSeparateiOES(n,i.rgbBlendState.blendMode,i.alphaBlendState.blendMode),r.rgbBlendState.blendMode=i.rgbBlendState.blendMode,r.alphaBlendState.blendMode=i.alphaBlendState.blendMode),l&&(o.blendFuncSeparateiOES(n,i.rgbBlendState.blendSrcFactor,i.rgbBlendState.blendDstFactor,i.alphaBlendState.blendSrcFactor,i.alphaBlendState.blendDstFactor),r.rgbBlendState.blendSrcFactor=i.rgbBlendState.blendSrcFactor,r.alphaBlendState.blendSrcFactor=i.alphaBlendState.blendSrcFactor,r.rgbBlendState.blendDstFactor=i.rgbBlendState.blendDstFactor,r.alphaBlendState.blendDstFactor=i.alphaBlendState.blendDstFactor);},n.prototype.applyAttachmentState=function(n,r){var i=this.gl;n.channelWriteMask!==r.channelWriteMask&&(i.colorMask(!!(r.channelWriteMask&en.RED),!!(r.channelWriteMask&en.GREEN),!!(r.channelWriteMask&en.BLUE),!!(r.channelWriteMask&en.ALPHA)),n.channelWriteMask=r.channelWriteMask);var a=n.rgbBlendState.blendMode!==r.rgbBlendState.blendMode||n.alphaBlendState.blendMode!==r.alphaBlendState.blendMode,o=n.rgbBlendState.blendSrcFactor!==r.rgbBlendState.blendSrcFactor||n.alphaBlendState.blendSrcFactor!==r.alphaBlendState.blendSrcFactor||n.rgbBlendState.blendDstFactor!==r.rgbBlendState.blendDstFactor||n.alphaBlendState.blendDstFactor!==r.alphaBlendState.blendDstFactor;(o||a)&&(tF(n.rgbBlendState)&&tF(n.alphaBlendState)?i.enable(i.BLEND):tF(r.rgbBlendState)&&tF(r.alphaBlendState)&&i.disable(i.BLEND)),a&&(i.blendEquationSeparate(r.rgbBlendState.blendMode,r.alphaBlendState.blendMode),n.rgbBlendState.blendMode=r.rgbBlendState.blendMode,n.alphaBlendState.blendMode=r.alphaBlendState.blendMode),o&&(i.blendFuncSeparate(r.rgbBlendState.blendSrcFactor,r.rgbBlendState.blendDstFactor,r.alphaBlendState.blendSrcFactor,r.alphaBlendState.blendDstFactor),n.rgbBlendState.blendSrcFactor=r.rgbBlendState.blendSrcFactor,n.alphaBlendState.blendSrcFactor=r.alphaBlendState.blendSrcFactor,n.rgbBlendState.blendDstFactor=r.rgbBlendState.blendDstFactor,n.alphaBlendState.blendDstFactor=r.alphaBlendState.blendDstFactor);},n.prototype.setMegaState=function(n){var r=this.gl,i=this.currentMegaState;if(null!==this.OES_draw_buffers_indexed)for(var a=0;a<n.attachmentsState.length;a++)this.applyAttachmentStateIndexed(a,i.attachmentsState[0],n.attachmentsState[0]);else eO(1===n.attachmentsState.length),this.applyAttachmentState(i.attachmentsState[0],n.attachmentsState[0]);eR(i.blendConstant,n.blendConstant)||(r.blendColor(n.blendConstant.r,n.blendConstant.g,n.blendConstant.b,n.blendConstant.a),eP(i.blendConstant,n.blendConstant)),i.depthCompare!==n.depthCompare&&(r.depthFunc(n.depthCompare),i.depthCompare=n.depthCompare),!!i.depthWrite!=!!n.depthWrite&&(r.depthMask(n.depthWrite),i.depthWrite=n.depthWrite),!!i.stencilWrite!=!!n.stencilWrite&&(r.stencilMask(n.stencilWrite?255:0),i.stencilWrite=n.stencilWrite);var o=!1;if(!e1(i.stencilFront,n.stencilFront)){o=!0;var s=n.stencilFront,l=s.passOp,u=s.failOp,c=s.depthFailOp,f=s.compare;(i.stencilFront.passOp!==l||i.stencilFront.failOp!==u||i.stencilFront.depthFailOp!==c)&&(r.stencilOpSeparate(r.FRONT,u,c,l),i.stencilFront.passOp=l,i.stencilFront.failOp=u,i.stencilFront.depthFailOp=c),i.stencilFront.compare!==f&&(this.setStencilReference(0),i.stencilFront.compare=f);}if(!e1(i.stencilBack,n.stencilBack)){o=!0;var d=n.stencilBack,l=d.passOp,u=d.failOp,c=d.depthFailOp,f=d.compare;(i.stencilBack.passOp!==l||i.stencilBack.failOp!==u||i.stencilBack.depthFailOp!==c)&&(r.stencilOpSeparate(r.BACK,u,c,l),i.stencilBack.passOp=l,i.stencilBack.failOp=u,i.stencilBack.depthFailOp=c),i.stencilBack.compare!==f&&(this.setStencilReference(0),i.stencilBack.compare=f);}(i.stencilFront.mask!==n.stencilFront.mask||i.stencilBack.mask!==n.stencilBack.mask)&&(o=!0,i.stencilFront.mask=n.stencilFront.mask,i.stencilBack.mask=n.stencilBack.mask),o&&this.applyStencil(),i.cullMode!==n.cullMode&&(i.cullMode===G.NONE?r.enable(r.CULL_FACE):n.cullMode===G.NONE&&r.disable(r.CULL_FACE),n.cullMode===G.BACK?r.cullFace(r.BACK):n.cullMode===G.FRONT?r.cullFace(r.FRONT):n.cullMode===G.FRONT_AND_BACK&&r.cullFace(r.FRONT_AND_BACK),i.cullMode=n.cullMode),i.frontFace!==n.frontFace&&(r.frontFace(n.frontFace),i.frontFace=n.frontFace),i.polygonOffset!==n.polygonOffset&&(n.polygonOffset?r.enable(r.POLYGON_OFFSET_FILL):r.disable(r.POLYGON_OFFSET_FILL),i.polygonOffset=n.polygonOffset),(i.polygonOffsetFactor!==n.polygonOffsetFactor||i.polygonOffsetUnits!==n.polygonOffsetUnits)&&(r.polygonOffset(n.polygonOffsetFactor,n.polygonOffsetUnits),i.polygonOffsetFactor=n.polygonOffsetFactor,i.polygonOffsetUnits=n.polygonOffsetUnits);},n.prototype.validatePipelineFormats=function(n){for(var r=0;r<this.currentColorAttachments.length;r++)if(null===this.currentColorAttachments[r])continue;this.currentDepthStencilAttachment&&eO(this.currentDepthStencilAttachment.format===n.depthStencilAttachmentFormat),-1!==this.currentSampleCount&&eO(this.currentSampleCount===n.sampleCount);},n.prototype.setPipeline=function(n){var r=this;if(this.renderBundle){this.renderBundle.push(function(){return r.setPipeline(n);});return;}this.currentPipeline=n,this.validatePipelineFormats(this.currentPipeline),this.setMegaState(this.currentPipeline.megaState);var i=this.currentPipeline.program;if(this.useProgram(i),i.compileState===ep.NeedsBind){var a=this.gl,o=i.gl_program,s=i.descriptor,l=tD(s.vertex.glsl,tK);if(tA(a))for(var u=0;u<l.length;u++){var c=(0,ex.__read)(l[u],2)[1],f=a.getUniformBlockIndex(o,c);-1!==f&&4294967295!==f&&a.uniformBlockBinding(o,f,u);}for(var d=tD(s.fragment.glsl,/^uniform .*sampler\S+ (\w+);\s* \/\/ BINDING=(\d+)$/gm),u=0;u<d.length;u++){var h=(0,ex.__read)(d[u],3),p=h[1],m=h[2],g=a.getUniformLocation(o,p);a.uniform1i(g,parseInt(m));}i.compileState=ep.ReadyToUse;}},n.prototype.setVertexInput=function(n,r,i){var a,o,s,l=this;if(this.renderBundle){this.renderBundle.push(function(){return l.setVertexInput(n,r,i);});return;}if(null!==n){eO(this.currentPipeline.inputLayout===n),this.bindVAO(n.vao);for(var u=this.gl,c=0;c<n.vertexBufferDescriptors.length;c++){var f=n.vertexBufferDescriptors[c],d=f.arrayStride,h=f.attributes;try{for(var p=(a=void 0,(0,ex.__values)(h)),m=p.next();!m.done;m=p.next()){var g=m.value,v=g.shaderLocation,y=g.offset,_=tA(u)?v:null===(s=n.program.attributes[v])||void 0===s?void 0:s.location;if(!(0,ey.default)(_)){var b=r[c];if(null===b)continue;var x=g.vertexFormat;u.bindBuffer(u.ARRAY_BUFFER,tk(b.buffer));var E=(b.offset||0)+y;u.vertexAttribPointer(_,x.size,x.type,x.normalized,d,E);}}}catch(n){a={error:n};}finally{try{m&&!m.done&&(o=p.return)&&o.call(p);}finally{if(a)throw a.error;}}}if(eO(null!==i==(null!==n.indexBufferFormat)),null!==i){var w=i.buffer;eO(w.usage===Z.INDEX),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,tk(w)),this.currentIndexBufferByteOffset=i.offset||0;}else this.currentIndexBufferByteOffset=null;}else eO(null===this.currentPipeline.inputLayout),eO(null===i),this.bindVAO(null),this.currentIndexBufferByteOffset=0;},n.prototype.setStencilReference=function(n){this.currentStencilRef!==n&&(this.currentStencilRef=n,this.applyStencil());},n.prototype.draw=function(n,r,i,a){var o,s=this;if(this.renderBundle){this.renderBundle.push(function(){return s.draw(n,r,i,a);});return;}var l=this.gl,u=this.currentPipeline;if(r){var c=[u.drawMode,i||0,n,r];tA(l)?l.drawArraysInstanced.apply(l,(0,ex.__spreadArray)([],(0,ex.__read)(c),!1)):(o=this.ANGLE_instanced_arrays).drawArraysInstancedANGLE.apply(o,(0,ex.__spreadArray)([],(0,ex.__read)(c),!1));}else l.drawArrays(u.drawMode,i,n);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(n/3*Math.max(r,1));},n.prototype.drawIndexed=function(n,r,i,a,o){var s,l=this;if(this.renderBundle){this.renderBundle.push(function(){return l.drawIndexed(n,r,i,a,o);});return;}var u=this.gl,c=this.currentPipeline,f=eM(c.inputLayout),d=eM(this.currentIndexBufferByteOffset)+i*f.indexBufferCompByteSize;if(r){var h=[c.drawMode,n,f.indexBufferType,d,r];tA(u)?u.drawElementsInstanced.apply(u,(0,ex.__spreadArray)([],(0,ex.__read)(h),!1)):(s=this.ANGLE_instanced_arrays).drawElementsInstancedANGLE.apply(s,(0,ex.__spreadArray)([],(0,ex.__read)(h),!1));}else u.drawElements(c.drawMode,n,f.indexBufferType,d);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(n/3*Math.max(r,1));},n.prototype.drawIndirect=function(n,r){},n.prototype.drawIndexedIndirect=function(n,r){},n.prototype.beginOcclusionQuery=function(n){var r=this.gl;if(tA(r)){var i=this.currentRenderPassDescriptor.occlusionQueryPool;r.beginQuery(i.gl_query_type,i.gl_query[n]);}},n.prototype.endOcclusionQuery=function(){var n=this.gl;if(tA(n)){var r=this.currentRenderPassDescriptor.occlusionQueryPool;n.endQuery(r.gl_query_type);}},n.prototype.pipelineQueryReady=function(n){return this.queryProgramReady(n.program);},n.prototype.pipelineForceReady=function(n){},n.prototype.endPass=function(){for(var n=this.gl,r=tA(n),i=1===this.currentColorResolveTos.length&&this.currentColorResolveTos[0]===this.scTexture,a=!1,o=0;o<this.currentColorAttachments.length;o++){var s=this.currentColorAttachments[o];if(null!==s){var l=this.currentColorResolveTos[o],u=!1;null!==l&&(eO(s.width===l.width&&s.height===l.height),this.setScissorRectEnabled(!1),!i&&(r&&n.bindFramebuffer(n.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&r&&this.bindFramebufferAttachment(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,s,this.currentColorAttachmentLevels[o])),u=!0,!i&&(l===this.scTexture?n.bindFramebuffer(r?j.DRAW_FRAMEBUFFER:j.FRAMEBUFFER,this.scPlatformFramebuffer):(n.bindFramebuffer(r?j.DRAW_FRAMEBUFFER:j.FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.resolveColorAttachmentsChanged&&n.framebufferTexture2D(r?j.DRAW_FRAMEBUFFER:j.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,l.gl_texture,this.currentColorResolveToLevels[o]))),i||(r?(n.blitFramebuffer(0,0,s.width,s.height,0,0,l.width,l.height,n.COLOR_BUFFER_BIT,n.LINEAR),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null)):this.submitBlitRenderPass(s,l)),a=!0),this.currentRenderPassDescriptor.colorStore[o]||i||u||(n.bindFramebuffer(r?j.READ_FRAMEBUFFER:j.FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&this.bindFramebufferAttachment(r?j.READ_FRAMEBUFFER:j.FRAMEBUFFER,n.COLOR_ATTACHMENT0,s,this.currentColorAttachmentLevels[o])),i||n.bindFramebuffer(r?j.READ_FRAMEBUFFER:j.FRAMEBUFFER,null);}}this.resolveColorAttachmentsChanged=!1;var c=this.currentDepthStencilAttachment;if(c){var f=this.currentDepthStencilResolveTo,u=!1;f&&(eO(c.width===f.width&&c.height===f.height),this.setScissorRectEnabled(!1),!i&&(n.bindFramebuffer(r?j.READ_FRAMEBUFFER:j.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),n.bindFramebuffer(r?j.DRAW_FRAMEBUFFER:j.FRAMEBUFFER,this.resolveDepthStencilDrawFramebuffer),this.resolveDepthStencilAttachmentsChanged&&(this.bindFramebufferDepthStencilAttachment(r?j.READ_FRAMEBUFFER:j.FRAMEBUFFER,c),this.bindFramebufferDepthStencilAttachment(r?j.DRAW_FRAMEBUFFER:j.FRAMEBUFFER,f))),u=!0,i||(r&&n.blitFramebuffer(0,0,c.width,c.height,0,0,f.width,f.height,n.DEPTH_BUFFER_BIT,n.NEAREST),n.bindFramebuffer(r?j.DRAW_FRAMEBUFFER:j.FRAMEBUFFER,null)),a=!0),i||this.currentRenderPassDescriptor.depthStencilStore||(u||(n.bindFramebuffer(r?j.READ_FRAMEBUFFER:j.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),this.resolveDepthStencilAttachmentsChanged&&this.bindFramebufferDepthStencilAttachment(r?j.READ_FRAMEBUFFER:j.FRAMEBUFFER,c),u=!0),r&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[n.DEPTH_STENCIL_ATTACHMENT])),!i&&u&&n.bindFramebuffer(r?j.READ_FRAMEBUFFER:j.FRAMEBUFFER,null),this.resolveDepthStencilAttachmentsChanged=!1;}i||a||n.bindFramebuffer(r?j.DRAW_FRAMEBUFFER:j.FRAMEBUFFER,null);},n.prototype.setScissorRectEnabled=function(n){if(this.currentScissorEnabled!==n){var r=this.gl;n?r.enable(r.SCISSOR_TEST):r.disable(r.SCISSOR_TEST),this.currentScissorEnabled=n;}},n.prototype.applyStencil=function(){(0,ey.default)(this.currentStencilRef)||(this.gl.stencilFuncSeparate(j.FRONT,this.currentMegaState.stencilFront.compare,this.currentStencilRef,this.currentMegaState.stencilFront.mask||255),this.gl.stencilFuncSeparate(j.BACK,this.currentMegaState.stencilBack.compare,this.currentStencilRef,this.currentMegaState.stencilBack.mask||255));},n.prototype.getFallbackTexture=function(n){var r=n.gl_target,i=n.formatKind;if(r===j.TEXTURE_2D)return i===ei.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(r===j.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(r===j.TEXTURE_3D)return this.fallbackTexture3D;if(r===j.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw Error("whoops");},n.prototype.submitBlitRenderPass=function(n,r){this.blitRenderPipeline||(this.blitProgram=this.createProgram({vertex:{glsl:"layout(location = 0) in vec2 a_Position;\nout vec2 v_TexCoord;\nvoid main() {\n  v_TexCoord = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n\n  #ifdef VIEWPORT_ORIGIN_TL\n    v_TexCoord.y = 1.0 - v_TexCoord.y;\n  #endif\n}"},fragment:{glsl:"uniform sampler2D u_Texture;\nin vec2 v_TexCoord;\nout vec4 outputColor;\nvoid main() {\n  outputColor = texture(SAMPLER_2D(u_Texture), v_TexCoord);\n}"}}),this.blitVertexBuffer=this.createBuffer({usage:Z.VERTEX|Z.COPY_DST,viewOrSize:new Float32Array([-4,-4,4,-4,0,4])}),this.blitInputLayout=this.createInputLayout({vertexBufferDescriptors:[{arrayStride:8,stepMode:Q.VERTEX,attributes:[{format:ef.F32_RG,offset:0,shaderLocation:0}]}],indexBufferFormat:null,program:this.blitProgram}),this.blitRenderPipeline=this.createRenderPipeline({topology:Y.TRIANGLES,sampleCount:1,program:this.blitProgram,colorAttachmentFormats:[ef.U8_RGBA_RT],depthStencilAttachmentFormat:null,inputLayout:this.blitInputLayout,megaStateDescriptor:eG(eW)}),this.blitBindings=this.createBindings({samplerBindings:[{sampler:null,texture:n.texture}],uniformBufferBindings:[]}),this.blitProgram.setUniformsLegacy({u_Texture:n}));var i=this.currentRenderPassDescriptor;this.currentRenderPassDescriptor=null,this.inBlitRenderPass=!0;var a=this.createRenderPass({colorAttachment:[n],colorResolveTo:[r],colorClearColor:[eN]}),o=this.getCanvas(),s=o.width,l=o.height;a.setPipeline(this.blitRenderPipeline),a.setBindings(this.blitBindings),a.setVertexInput(this.blitInputLayout,[{buffer:this.blitVertexBuffer}],null),a.setViewport(0,0,s,l),this.gl.disable(this.gl.BLEND),a.draw(3,0),this.gl.enable(this.gl.BLEND),this.currentRenderPassDescriptor=i,this.inBlitRenderPass=!1;},n;}(),tJ=function(){function n(n){this.pluginOptions=n;}return n.prototype.createSwapChain=function(n){return(0,ex.__awaiter)(this,void 0,void 0,function(){var r,i,a,o,s,l,u,c,f,d,h,p,m;return(0,ex.__generator)(this,function(g){return i=(r=this.pluginOptions).targets,a=r.xrCompatible,s=void 0!==(o=r.antialias)&&o,u=void 0!==(l=r.preserveDrawingBuffer)&&l,f=void 0===(c=r.premultipliedAlpha)||c,d=r.shaderDebug,h=r.trackResources,p={antialias:s,preserveDrawingBuffer:u,stencil:!0,premultipliedAlpha:f,xrCompatible:a},this.handleContextEvents(n),i.includes("webgl2")&&(m=n.getContext("webgl2",p)||n.getContext("experimental-webgl2",p)),!m&&i.includes("webgl1")&&(m=n.getContext("webgl",p)||n.getContext("experimental-webgl",p)),[2,new tQ(m,{shaderDebug:d,trackResources:h})];});});},n.prototype.handleContextEvents=function(n){var r=this.pluginOptions,i=r.onContextLost,a=r.onContextRestored,o=r.onContextCreationError;o&&n.addEventListener("webglcontextcreationerror",o,!1),i&&n.addEventListener("webglcontextlost",i,!1),a&&n.addEventListener("webglcontextrestored",a,!1);},n;}();let t0="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available");}};"undefined"!=typeof TextDecoder&&t0.decode();let t1=null;function t2(){return(null===t1||0===t1.byteLength)&&(t1=new Uint8Array(a.memory.buffer)),t1;}function t3(n,r){return n>>>=0,t0.decode(t2().subarray(n,n+r));}let t4=Array(128).fill(void 0);t4.push(void 0,null,!0,!1);let t5=t4.length,t6=0,t8="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available");}},t7="function"==typeof t8.encodeInto?function(n,r){return t8.encodeInto(n,r);}:function(n,r){let i=t8.encode(n);return r.set(i),{read:n.length,written:i.length};};function t9(n,r,i){if(void 0===i){let i=t8.encode(n),a=r(i.length,1)>>>0;return t2().subarray(a,a+i.length).set(i),t6=i.length,a;}let a=n.length,o=r(a,1)>>>0,s=t2(),l=0;for(;l<a;l++){let r=n.charCodeAt(l);if(r>127)break;s[o+l]=r;}if(l!==a){0!==l&&(n=n.slice(l)),o=i(o,a,a=l+3*n.length,1)>>>0;let r=t7(n,t2().subarray(o+l,o+a));l+=r.written;}return t6=l,o;}let ne=null;function nt(){return(null===ne||0===ne.byteLength)&&(ne=new Int32Array(a.memory.buffer)),ne;}function nn(n,r,i){let o,s;try{let c=a.__wbindgen_add_to_stack_pointer(-16),f=t9(n,a.__wbindgen_malloc,a.__wbindgen_realloc),d=t6,h=t9(r,a.__wbindgen_malloc,a.__wbindgen_realloc),p=t6;a.glsl_compile(c,f,d,h,p,i);var l=nt()[c/4+0],u=nt()[c/4+1];return o=l,s=u,t3(l,u);}finally{a.__wbindgen_add_to_stack_pointer(16),a.__wbindgen_free(o,s,1);}}class nr{static __wrap(n){n>>>=0;let r=Object.create(nr.prototype);return r.__wbg_ptr=n,r;}__destroy_into_raw(){let n=this.__wbg_ptr;return this.__wbg_ptr=0,n;}free(){let n=this.__destroy_into_raw();a.__wbg_wgslcomposer_free(n);}constructor(){let n=a.wgslcomposer_new();return nr.__wrap(n);}load_composable(n){let r=t9(n,a.__wbindgen_malloc,a.__wbindgen_realloc),i=t6;a.wgslcomposer_load_composable(this.__wbg_ptr,r,i);}wgsl_compile(n){let r,i;try{let l=a.__wbindgen_add_to_stack_pointer(-16),u=t9(n,a.__wbindgen_malloc,a.__wbindgen_realloc),c=t6;a.wgslcomposer_wgsl_compile(l,this.__wbg_ptr,u,c);var o=nt()[l/4+0],s=nt()[l/4+1];return r=o,i=s,t3(o,s);}finally{a.__wbindgen_add_to_stack_pointer(16),a.__wbindgen_free(r,i,1);}}}async function ni(n,r){if("function"==typeof Response&&n instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(n,r);}catch(r){if("application/wasm"!=n.headers.get("Content-Type"))console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r;}let i=await n.arrayBuffer();return await WebAssembly.instantiate(i,r);}{let i=await WebAssembly.instantiate(n,r);return i instanceof WebAssembly.Instance?{instance:i,module:n}:i;}}async function na(n){if(void 0!==a)return a;let r=function(){let n={};return n.wbg={},n.wbg.__wbindgen_string_new=function(n,r){return function(n){t5===t4.length&&t4.push(t4.length+1);let r=t5;return t5=t4[r],t4[r]=n,r;}(t3(n,r));},n.wbg.__wbindgen_object_drop_ref=function(n){var r;t4[r=n],r<132||(t4[r]=t5,t5=r);},n.wbg.__wbg_log_1d3ae0273d8f4f8a=function(n){console.log(t4[n]);},n.wbg.__wbg_log_576ca876af0d4a77=function(n,r){console.log(t4[n],t4[r]);},n.wbg.__wbindgen_throw=function(n,r){throw Error(t3(n,r));},n;}();("string"==typeof n||"function"==typeof Request&&n instanceof Request||"function"==typeof URL&&n instanceof URL)&&(n=fetch(n));let{instance:i,module:o}=await ni(await n,r);return a=i.exports,na.__wbindgen_wasm_module=o,ne=null,t1=null,a;}function no(n){if(n===ef.U8_R_NORM)return"r8unorm";if(n===ef.S8_R_NORM)return"r8snorm";if(n===ef.U8_RG_NORM)return"rg8unorm";if(n===ef.S8_RG_NORM)return"rg8snorm";if(n===ef.U32_R)return"r32uint";if(n===ef.S32_R)return"r32sint";if(n===ef.F32_R)return"r32float";else if(n===ef.U16_RG)return"rg16uint";else if(n===ef.S16_RG)return"rg16sint";else if(n===ef.F16_RG)return"rg16float";else if(n===ef.U8_RGBA_RT)return"bgra8unorm";else if(n===ef.U8_RGBA_RT_SRGB)return"bgra8unorm-srgb";else if(n===ef.U8_RGBA_NORM)return"rgba8unorm";else if(n===ef.U8_RGBA_SRGB)return"rgba8unorm-srgb";else if(n===ef.S8_RGBA_NORM)return"rgba8snorm";else if(n===ef.U32_RG)return"rg32uint";else if(n===ef.S32_RG)return"rg32sint";else if(n===ef.F32_RG)return"rg32float";else if(n===ef.U16_RGBA)return"rgba16uint";else if(n===ef.S16_RGBA)return"rgba16sint";else if(n===ef.F16_RGBA)return"rgba16float";else if(n===ef.F32_RGBA)return"rgba32float";else if(n===ef.U32_RGBA)return"rgba32uint";else if(n===ef.S32_RGBA)return"rgba32sint";else if(n===ef.D24)return"depth24plus";else if(n===ef.D24_S8)return"depth24plus-stencil8";else if(n===ef.D32F)return"depth32float";else if(n===ef.D32F_S8)return"depth32float-stencil8";else if(n===ef.BC1)return"bc1-rgba-unorm";else if(n===ef.BC1_SRGB)return"bc1-rgba-unorm-srgb";else if(n===ef.BC2)return"bc2-rgba-unorm";else if(n===ef.BC2_SRGB)return"bc2-rgba-unorm-srgb";else if(n===ef.BC3)return"bc3-rgba-unorm";else if(n===ef.BC3_SRGB)return"bc3-rgba-unorm-srgb";else if(n===ef.BC4_SNORM)return"bc4-r-snorm";else if(n===ef.BC4_UNORM)return"bc4-r-unorm";else if(n===ef.BC5_SNORM)return"bc5-rg-snorm";else if(n===ef.BC5_UNORM)return"bc5-rg-unorm";else throw"whoops";}function ns(n){if(n===X.CLAMP_TO_EDGE)return"clamp-to-edge";if(n===X.REPEAT)return"repeat";if(n===X.MIRRORED_REPEAT)return"mirror-repeat";throw Error("whoops");}function nl(n){if(n===q.BILINEAR)return"linear";if(n===q.POINT)return"nearest";throw Error("whoops");}function nu(n){return n.gpuBuffer;}function nc(n){if(n===H.ZERO)return"zero";if(n===H.ONE)return"one";if(n===H.SRC)return"src";if(n===H.ONE_MINUS_SRC)return"one-minus-src";if(n===H.DST)return"dst";if(n===H.ONE_MINUS_DST)return"one-minus-dst";if(n===H.SRC_ALPHA)return"src-alpha";else if(n===H.ONE_MINUS_SRC_ALPHA)return"one-minus-src-alpha";else if(n===H.DST_ALPHA)return"dst-alpha";else if(n===H.ONE_MINUS_DST_ALPHA)return"one-minus-dst-alpha";else if(n===H.CONST)return"constant";else if(n===H.ONE_MINUS_CONSTANT)return"one-minus-constant";else if(n===H.SRC_ALPHA_SATURATE)return"src-alpha-saturated";else throw Error("whoops");}function nf(n){return{operation:function(n){if(n===W.ADD)return"add";if(n===W.SUBSTRACT)return"subtract";if(n===W.REVERSE_SUBSTRACT)return"reverse-subtract";if(n===W.MIN)return"min";if(n===W.MAX)return"max";throw Error("whoops");}(n.blendMode),srcFactor:nc(n.blendSrcFactor),dstFactor:nc(n.blendDstFactor)};}function nd(n){return n.blendMode===W.ADD&&n.blendSrcFactor===H.ONE&&n.blendDstFactor===H.ZERO;}function nh(n){if(n===U.NEVER)return"never";if(n===U.LESS)return"less";if(n===U.EQUAL)return"equal";if(n===U.LEQUAL)return"less-equal";if(n===U.GREATER)return"greater";if(n===U.NOTEQUAL)return"not-equal";if(n===U.GEQUAL)return"greater-equal";else if(n===U.ALWAYS)return"always";else throw Error("whoops");}function np(n){if(n===er.KEEP)return"keep";if(n===er.REPLACE)return"replace";if(n===er.ZERO)return"zero";if(n===er.DECREMENT_CLAMP)return"decrement-clamp";if(n===er.DECREMENT_WRAP)return"decrement-wrap";if(n===er.INCREMENT_CLAMP)return"increment-clamp";if(n===er.INCREMENT_WRAP)return"increment-wrap";else if(n===er.INVERT)return"invert";else throw Error("whoops");}function nm(n,r,i,a){switch(void 0===i&&(i=!1),n){case ef.S8_R:case ef.S8_R_NORM:case ef.S8_RG_NORM:case ef.S8_RGB_NORM:case ef.S8_RGBA_NORM:var o=new Int8Array(r);return a&&o.set(new Int8Array(a)),o;case ef.U8_R:case ef.U8_R_NORM:case ef.U8_RG:case ef.U8_RG_NORM:case ef.U8_RGB:case ef.U8_RGB_NORM:case ef.U8_RGB_SRGB:case ef.U8_RGBA:case ef.U8_RGBA_NORM:case ef.U8_RGBA_SRGB:var s=new Uint8Array(r);return a&&s.set(new Uint8Array(a)),s;case ef.S16_R:case ef.S16_RG:case ef.S16_RG_NORM:case ef.S16_RGB_NORM:case ef.S16_RGBA:case ef.S16_RGBA_NORM:var l=new Int16Array(r instanceof ArrayBuffer?r:i?r/2:r);return a&&l.set(new Int16Array(a)),l;case ef.U16_R:case ef.U16_RGB:case ef.U16_RGBA_5551:case ef.U16_RGBA_NORM:case ef.U16_RG_NORM:case ef.U16_R_NORM:var u=new Uint16Array(r instanceof ArrayBuffer?r:i?r/2:r);return a&&u.set(new Uint16Array(a)),u;case ef.S32_R:var c=new Int32Array(r instanceof ArrayBuffer?r:i?r/4:r);return a&&c.set(new Int32Array(a)),c;case ef.U32_R:case ef.U32_RG:var f=new Uint32Array(r instanceof ArrayBuffer?r:i?r/4:r);return a&&f.set(new Uint32Array(a)),f;case ef.F32_R:case ef.F32_RG:case ef.F32_RGB:case ef.F32_RGBA:var d=new Float32Array(r instanceof ArrayBuffer?r:i?r/4:r);return a&&d.set(new Float32Array(a)),d;}var h=new Uint8Array(r);return a&&h.set(new Uint8Array(a)),h;}function ng(n){switch(n){case"r8unorm":case"r8snorm":case"r8uint":case"r8sint":return{width:1,height:1,length:1};case"r16uint":case"r16sint":case"r16float":case"rg8unorm":case"rg8snorm":case"rg8uint":case"rg8sint":case"depth16unorm":return{width:1,height:1,length:2};case"r32uint":case"r32sint":case"r32float":case"rg16uint":case"rg16sint":case"rg16float":case"rgba8unorm":case"rgba8unorm-srgb":case"rgba8snorm":case"rgba8uint":case"rgba8sint":case"bgra8unorm":case"bgra8unorm-srgb":case"rgb9e5ufloat":case"rgb10a2unorm":case"rg11b10ufloat":case"depth32float":default:return{width:1,height:1,length:4};case"rg32uint":case"rg32sint":case"rg32float":case"rgba16uint":case"rgba16sint":case"rgba16float":return{width:1,height:1,length:8};case"rgba32uint":case"rgba32sint":case"rgba32float":return{width:1,height:1,length:16};case"stencil8":throw Error("No fixed size for Stencil8 format!");case"depth24plus":throw Error("No fixed size for Depth24Plus format!");case"depth24plus-stencil8":throw Error("No fixed size for Depth24PlusStencil8 format!");case"depth32float-stencil8":return{width:1,height:1,length:5};case"bc7-rgba-unorm":case"bc7-rgba-unorm-srgb":case"bc6h-rgb-ufloat":case"bc6h-rgb-float":case"bc2-rgba-unorm":case"bc2-rgba-unorm-srgb":case"bc3-rgba-unorm":case"bc3-rgba-unorm-srgb":case"bc5-rg-unorm":case"bc5-rg-snorm":return{width:4,height:4,length:16};case"bc4-r-unorm":case"bc4-r-snorm":case"bc1-rgba-unorm":case"bc1-rgba-unorm-srgb":return{width:4,height:4,length:8};}}(F=em||(em={}))[F.COPY_SRC=1]="COPY_SRC",F[F.COPY_DST=2]="COPY_DST",F[F.TEXTURE_BINDING=4]="TEXTURE_BINDING",F[F.STORAGE_BINDING=8]="STORAGE_BINDING",F[F.STORAGE=8]="STORAGE",F[F.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT",(B=eg||(eg={}))[B.READ=1]="READ",B[B.WRITE=2]="WRITE";var nv=function(n){function r(r){var i=r.id,a=r.device,o=n.call(this)||this;return o.id=i,o.device=a,o;}return(0,ex.__extends)(r,n),r.prototype.destroy=function(){},r;}(eE.default),ny=function(n){function r(r){var i,a,o=r.id,s=r.device,l=r.descriptor,u=n.call(this,{id:o,device:s})||this;u.type=z.Bindings;var c=l.pipeline;eO(!!c);var f=l.uniformBufferBindings,d=l.storageBufferBindings,h=l.samplerBindings,p=l.storageTextureBindings;u.numUniformBuffers=(null==f?void 0:f.length)||0;var m=[[],[],[],[]],g=0;if(f&&f.length)for(var v=0;v<f.length;v++){var y=l.uniformBufferBindings[v],_=y.binding,b=y.size,x=y.offset,E=y.buffer,w={buffer:nu(E),offset:null!=x?x:0,size:b};m[0].push({binding:null!=_?_:g++,resource:w});}if(h&&h.length){g=0;for(var v=0;v<h.length;v++){var S=(0,ex.__assign)((0,ex.__assign)({},h[v]),eX),_=l.samplerBindings[v],T=null!==_.texture?_.texture:u.device.getFallbackTexture(S);S.dimension=T.dimension,S.formatKind=eC(T.format);var A=T.gpuTextureView;if(m[1].push({binding:null!==(i=_.textureBinding)&&void 0!==i?i:g++,resource:A}),-1!==_.samplerBinding){var C=(null!==_.sampler?_.sampler:u.device.getFallbackSampler(S)).gpuSampler;m[1].push({binding:null!==(a=_.samplerBinding)&&void 0!==a?a:g++,resource:C});}}}if(d&&d.length){g=0;for(var v=0;v<d.length;v++){var O=l.storageBufferBindings[v],_=O.binding,b=O.size,x=O.offset,E=O.buffer,w={buffer:nu(E),offset:null!=x?x:0,size:b};m[2].push({binding:null!=_?_:g++,resource:w});}}if(p&&p.length){g=0;for(var v=0;v<p.length;v++){var M=l.storageTextureBindings[v],_=M.binding,T=M.texture,A=T.gpuTextureView;m[3].push({binding:null!=_?_:g++,resource:A});}}var R=m.findLastIndex(function(n){return!!n.length;});return u.gpuBindGroup=m.map(function(n,r){return r<=R&&u.device.device.createBindGroup({layout:c.getBindGroupLayout(r),entries:n});}),u;}return(0,ex.__extends)(r,n),r;}(nv),n_=function(n){function r(r){var i,a=r.id,o=r.device,s=r.descriptor,l=n.call(this,{id:a,device:o})||this;l.type=z.Buffer;var u=s.usage,c=s.viewOrSize,f=!!(u&Z.MAP_READ);l.usage=(i=0,u&Z.INDEX&&(i|=GPUBufferUsage.INDEX),u&Z.VERTEX&&(i|=GPUBufferUsage.VERTEX),u&Z.UNIFORM&&(i|=GPUBufferUsage.UNIFORM),u&Z.STORAGE&&(i|=GPUBufferUsage.STORAGE),u&Z.COPY_SRC&&(i|=GPUBufferUsage.COPY_SRC),u&Z.INDIRECT&&(i|=GPUBufferUsage.INDIRECT),i|=GPUBufferUsage.COPY_DST),f&&(l.usage=Z.MAP_READ|Z.COPY_DST);var d=!(0,e_.default)(c);return l.view=(0,e_.default)(c)?null:c,l.size=(0,e_.default)(c)?eB(c,4):eB(c.byteLength,4),(0,e_.default)(c)?l.gpuBuffer=l.device.device.createBuffer({usage:l.usage,size:l.size,mappedAtCreation:!!f&&d}):(l.gpuBuffer=l.device.device.createBuffer({usage:l.usage,size:l.size,mappedAtCreation:!0}),new(c&&c.constructor||Float32Array)(l.gpuBuffer.getMappedRange()).set(c),l.gpuBuffer.unmap()),l;}return(0,ex.__extends)(r,n),r.prototype.setSubData=function(n,r,i,a){void 0===i&&(i=0),void 0===a&&(a=0);var o=this.gpuBuffer;a=Math.min(a=a||r.byteLength,this.size-n);var s=r.byteOffset+i,l=s+a,u=a+3&-4;if(u!==a){var c=new Uint8Array(r.buffer.slice(s,l));(r=new Uint8Array(u)).set(c),i=0,s=0,l=u,a=u;}for(var f=0;l-(s+f)>15728640;)this.device.device.queue.writeBuffer(o,n+f,r.buffer,s+f,15728640),f+=15728640;this.device.device.queue.writeBuffer(o,n+f,r.buffer,s+f,a-f);},r.prototype.destroy=function(){n.prototype.destroy.call(this),this.gpuBuffer.destroy();},r;}(nv),nb=function(){function n(){this.gpuComputePassEncoder=null;}return n.prototype.dispatchWorkgroups=function(n,r,i){this.gpuComputePassEncoder.dispatchWorkgroups(n,r,i);},n.prototype.dispatchWorkgroupsIndirect=function(n,r){this.gpuComputePassEncoder.dispatchWorkgroupsIndirect(n.gpuBuffer,r);},n.prototype.finish=function(){this.gpuComputePassEncoder.end(),this.gpuComputePassEncoder=null,this.frameCommandEncoder=null;},n.prototype.beginComputePass=function(n){eO(null===this.gpuComputePassEncoder),this.frameCommandEncoder=n,this.gpuComputePassEncoder=this.frameCommandEncoder.beginComputePass(this.gpuComputePassDescriptor);},n.prototype.setPipeline=function(n){var r=eM(n.gpuComputePipeline);this.gpuComputePassEncoder.setPipeline(r);},n.prototype.setBindings=function(n){var r=this;n.gpuBindGroup.forEach(function(i,a){i&&r.gpuComputePassEncoder.setBindGroup(a,n.gpuBindGroup[a]);});},n.prototype.pushDebugGroup=function(n){this.gpuComputePassEncoder.pushDebugGroup(n);},n.prototype.popDebugGroup=function(){this.gpuComputePassEncoder.popDebugGroup();},n.prototype.insertDebugMarker=function(n){this.gpuComputePassEncoder.insertDebugMarker(n);},n;}(),nx=function(n){function r(r){var i=r.id,a=r.device,o=r.descriptor,s=n.call(this,{id:i,device:a})||this;s.type=z.ComputePipeline,s.gpuComputePipeline=null,s.descriptor=o;var l=o.program.computeStage;if(null===l)return s;var u={layout:"auto",compute:(0,ex.__assign)({},l)};return s.gpuComputePipeline=s.device.device.createComputePipeline(u),void 0!==s.name&&(s.gpuComputePipeline.label=s.name),s;}return(0,ex.__extends)(r,n),r.prototype.getBindGroupLayout=function(n){return this.gpuComputePipeline.getBindGroupLayout(n);},r;}(nv),nE=function(n){function r(r){var i,a,o,s,l=r.id,u=r.device,c=r.descriptor,f=n.call(this,{id:l,device:u})||this;f.type=z.InputLayout;var d=[];try{for(var h=(0,ex.__values)(c.vertexBufferDescriptors),p=h.next();!p.done;p=h.next()){var m=p.value,g=m.arrayStride,v=m.stepMode,y=m.attributes;d.push({arrayStride:g,stepMode:function(n){if(n===Q.VERTEX)return"vertex";if(n===Q.INSTANCE)return"instance";throw Error("whoops");}(v),attributes:[]});try{for(var _=(o=void 0,(0,ex.__values)(y)),b=_.next();!b.done;b=_.next()){var x=b.value,E=x.shaderLocation,w=x.format,S=x.offset;d[d.length-1].attributes.push({shaderLocation:E,format:function(n){if(n===ef.U8_R||n===ef.U8_RG)return"uint8x2";if(n===ef.U8_RGB||n===ef.U8_RGBA)return"uint8x4";if(n===ef.U8_RG_NORM)return"unorm8x2";if(n===ef.U8_RGBA_NORM)return"unorm8x4";if(n===ef.S8_RGB_NORM)return"snorm8x4";else if(n===ef.S8_RGBA_NORM)return"snorm8x4";else if(n===ef.U16_RG_NORM)return"unorm16x2";else if(n===ef.U16_RGBA_NORM)return"unorm16x4";else if(n===ef.S16_RG_NORM)return"snorm16x2";else if(n===ef.S16_RGBA_NORM)return"snorm16x4";else if(n===ef.S16_RG)return"uint16x2";else if(n===ef.F16_RG)return"float16x2";else if(n===ef.F16_RGBA)return"float16x4";else if(n===ef.F32_R)return"float32";else if(n===ef.F32_RG)return"float32x2";else if(n===ef.F32_RGB)return"float32x3";else if(n===ef.F32_RGBA)return"float32x4";else throw"whoops";}(w),offset:S});}}catch(n){o={error:n};}finally{try{b&&!b.done&&(s=_.return)&&s.call(_);}finally{if(o)throw o.error;}}}}catch(n){i={error:n};}finally{try{p&&!p.done&&(a=h.return)&&a.call(h);}finally{if(i)throw i.error;}}return f.indexFormat=function(n){if(null!==n){if(n===ef.U16_R)return"uint16";if(n===ef.U32_R)return"uint32";throw Error("whoops");}}(c.indexBufferFormat),f.buffers=d,f;}return(0,ex.__extends)(r,n),r;}(nv),nw=function(n){function r(r){var i=r.id,a=r.device,o=r.descriptor,s=n.call(this,{id:i,device:a})||this;return s.type=z.Program,s.vertexStage=null,s.fragmentStage=null,s.computeStage=null,s.descriptor=o,o.vertex&&(s.vertexStage=s.createShaderStage(o.vertex,"vertex")),o.fragment&&(s.fragmentStage=s.createShaderStage(o.fragment,"fragment")),o.compute&&(s.computeStage=s.createShaderStage(o.compute,"compute")),s;}return(0,ex.__extends)(r,n),r.prototype.setUniformsLegacy=function(n){},r.prototype.createShaderStage=function(n,r){var i,a,o=n.glsl,s=n.wgsl,l=n.entryPoint,u=n.postprocess,c=s;if(!c)try{c=this.device.glsl_compile(o,r,!1);}catch(n){throw console.error(n,o),Error("whoops");}var f=function(n){if(!c.includes(n))return"continue";c=(c=c.replace("var T_".concat(n,": texture_2d<f32>;"),"var T_".concat(n,": texture_depth_2d;"))).replace(RegExp("textureSample\\(T_".concat(n,"(.*)\\);$"),"gm"),function(r,i){return"vec4<f32>(textureSample(T_".concat(n).concat(i,"), 0.0, 0.0, 0.0);");});};try{for(var d=(0,ex.__values)(["u_TextureFramebufferDepth"]),h=d.next();!h.done;h=d.next()){var p=h.value;f(p);}}catch(n){i={error:n};}finally{try{h&&!h.done&&(a=d.return)&&a.call(d);}finally{if(i)throw i.error;}}return u&&(c=u(c)),{module:this.device.device.createShaderModule({code:c}),entryPoint:l||"main"};},r;}(nv),nS=function(n){function r(r){var i=r.id,a=r.device,o=r.descriptor,s=n.call(this,{id:i,device:a})||this;s.type=z.QueryPool;var l=o.elemCount,u=o.type;return s.querySet=s.device.device.createQuerySet({type:function(n){if(n===es.OcclusionConservative)return"occlusion";throw Error("whoops");}(u),count:l}),s.resolveBuffer=s.device.device.createBuffer({size:8*l,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),s.cpuBuffer=s.device.device.createBuffer({size:8*l,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),s.results=null,s;}return(0,ex.__extends)(r,n),r.prototype.queryResultOcclusion=function(n){return null===this.results?null:this.results[n]!==BigInt(0);},r.prototype.destroy=function(){n.prototype.destroy.call(this),this.querySet.destroy(),this.resolveBuffer.destroy(),this.cpuBuffer.destroy();},r;}(nv),nT=function(n){function r(r){var i=r.id,a=r.device,o=n.call(this,{id:i,device:a})||this;return o.type=z.Readback,o;}return(0,ex.__extends)(r,n),r.prototype.readTexture=function(n,r,i,a,o,s,l,u){return void 0===l&&(l=0),(0,ex.__awaiter)(this,void 0,void 0,function(){var u,c,f,d,h,p,m;return(0,ex.__generator)(this,function(g){return h=(d=256*Math.ceil((f=Math.ceil(a/(c=ng((u=n).gpuTextureformat)).width)*c.length)/256))*o,p=this.device.createBuffer({usage:Z.STORAGE|Z.MAP_READ|Z.COPY_DST,hint:K.STATIC,viewOrSize:h}),(m=this.device.device.createCommandEncoder()).copyTextureToBuffer({texture:u.gpuTexture,mipLevel:0,origin:{x:r,y:i,z:0}},{buffer:p.gpuBuffer,offset:0,bytesPerRow:d},{width:a,height:o,depthOrArrayLayers:1}),this.device.device.queue.submit([m.finish()]),[2,this.readBuffer(p,0,s.byteLength===h?s:null,l,h,u.format,!0,!1,f,d,o)];});});},r.prototype.readTextureSync=function(n,r,i,a,o,s,l,u){throw Error("ERROR_MSG_METHOD_NOT_IMPLEMENTED");},r.prototype.readBuffer=function(n,r,i,a,o,s,l,u,c,f,d){var h=this;void 0===r&&(r=0),void 0===i&&(i=null),void 0===o&&(o=0),void 0===s&&(s=ef.U8_RGB),void 0===l&&(l=!1),void 0===c&&(c=0),void 0===f&&(f=0),void 0===d&&(d=0);var p=o||n.size,m=i||n.view,g=m&&m.constructor&&m.constructor.BYTES_PER_ELEMENT||eA(eT(s)),v=n;if(!(n.usage&Z.MAP_READ&&n.usage&Z.COPY_DST)){var y=this.device.device.createCommandEncoder();v=this.device.createBuffer({usage:Z.STORAGE|Z.MAP_READ|Z.COPY_DST,hint:K.STATIC,viewOrSize:p}),y.copyBufferToBuffer(n.gpuBuffer,r,v.gpuBuffer,0,p),this.device.device.queue.submit([y.finish()]);}return new Promise(function(n,i){v.gpuBuffer.mapAsync(eg.READ,r,p).then(function(){var i=v.gpuBuffer.getMappedRange(r,p),a=m;if(l)a=null===a?nm(s,p,!0,i):nm(s,a.buffer,void 0,i);else if(null===a)switch(g){case 1:(a=new Uint8Array(p)).set(new Uint8Array(i));break;case 2:a=h.getHalfFloatAsFloatRGBAArrayBuffer(p/2,i);break;case 4:(a=new Float32Array(p/4)).set(new Float32Array(i));}else switch(g){case 1:(a=new Uint8Array(a.buffer)).set(new Uint8Array(i));break;case 2:a=h.getHalfFloatAsFloatRGBAArrayBuffer(p/2,i,m);break;case 4:var o=m&&m.constructor||Float32Array;(a=new o(a.buffer)).set(new o(i));}if(c!==f){1!==g||l||(c*=2,f*=2);for(var u=new Uint8Array(a.buffer),y=c,_=0,b=1;b<d;++b){_=b*f;for(var x=0;x<c;++x)u[y++]=u[_++];}a=0===g||l?new Uint8Array(u.buffer,0,y):new Float32Array(u.buffer,0,y/4);}v.gpuBuffer.unmap(),n(a);},function(n){return i(n);});});},r.prototype.getHalfFloatAsFloatRGBAArrayBuffer=function(n,r,i){i||(i=new Float32Array(n));for(var a=new Uint16Array(r);n--;)i[n]=function(n){var r=(32768&n)>>15,i=(31744&n)>>10,a=1023&n;return 0===i?(r?-1:1)*6103515625e-14*(a/1024):31==i?a?NaN:1/0*(r?-1:1):(r?-1:1)*Math.pow(2,i-15)*(1+a/1024);}(a[n]);return i;},r;}(nv),nA=function(){function n(n){this.device=n,this.gpuRenderPassEncoder=null,this.gfxColorAttachment=[],this.gfxColorAttachmentLevel=[],this.gfxColorResolveTo=[],this.gfxColorResolveToLevel=[],this.gfxDepthStencilAttachment=null,this.gfxDepthStencilResolveTo=null,this.gpuColorAttachments=[],this.gpuDepthStencilAttachment={view:null,depthLoadOp:"load",depthStoreOp:"store",stencilLoadOp:"load",stencilStoreOp:"store"},this.gpuRenderPassDescriptor={colorAttachments:this.gpuColorAttachments,depthStencilAttachment:this.gpuDepthStencilAttachment};}return n.prototype.getEncoder=function(){var n;return(null===(n=this.renderBundle)||void 0===n?void 0:n.renderBundleEncoder)||this.gpuRenderPassEncoder;},n.prototype.getTextureView=function(n,r){return(eO(r<n.mipLevelCount),1===n.mipLevelCount)?n.gpuTextureView:n.gpuTexture.createView({baseMipLevel:r,mipLevelCount:1});},n.prototype.setRenderPassDescriptor=function(n){this.descriptor=n,this.gpuRenderPassDescriptor.colorAttachments=this.gpuColorAttachments;var r,i,a,o,s,l,u=n.colorAttachment.length;this.gfxColorAttachment.length=u,this.gfxColorResolveTo.length=u;for(var c=0;c<n.colorAttachment.length;c++){var f=n.colorAttachment[c],d=n.colorResolveTo[c];if(null===f&&null!==d&&(f=d,d=null),this.gfxColorAttachment[c]=f,this.gfxColorResolveTo[c]=d,this.gfxColorAttachmentLevel[c]=(null===(r=n.colorAttachmentLevel)||void 0===r?void 0:r[c])||0,this.gfxColorResolveToLevel[c]=(null===(i=n.colorResolveToLevel)||void 0===i?void 0:i[c])||0,null!==f){void 0===this.gpuColorAttachments[c]&&(this.gpuColorAttachments[c]={});var h=this.gpuColorAttachments[c];h.view=this.getTextureView(f,(null===(a=this.gfxColorAttachmentLevel)||void 0===a?void 0:a[c])||0);var p=null!==(s=null===(o=n.colorClearColor)||void 0===o?void 0:o[c])&&void 0!==s?s:"load";"load"===p?h.loadOp="load":(h.loadOp="clear",h.clearValue=p),h.storeOp=(null===(l=n.colorStore)||void 0===l?void 0:l[c])?"store":"discard",h.resolveTarget=void 0,null!==d&&(f.sampleCount>1?h.resolveTarget=this.getTextureView(d,this.gfxColorResolveToLevel[c]):h.storeOp="store");}else{this.gpuColorAttachments.length=c,this.gfxColorAttachment.length=c,this.gfxColorResolveTo.length=c;break;}}if(this.gfxDepthStencilAttachment=n.depthStencilAttachment,this.gfxDepthStencilResolveTo=n.depthStencilResolveTo,n.depthStencilAttachment){var m=n.depthStencilAttachment,h=this.gpuDepthStencilAttachment;h.view=m.gpuTextureView,255&m.format&ec.Depth?("load"===n.depthClearValue?h.depthLoadOp="load":(h.depthLoadOp="clear",h.depthClearValue=n.depthClearValue),n.depthStencilStore||null!==this.gfxDepthStencilResolveTo?h.depthStoreOp="store":h.depthStoreOp="discard"):(h.depthLoadOp=void 0,h.depthStoreOp=void 0),255&m.format&ec.Stencil?("load"===n.stencilClearValue?h.stencilLoadOp="load":(h.stencilLoadOp="clear",h.stencilClearValue=n.stencilClearValue),n.depthStencilStore||null!==this.gfxDepthStencilResolveTo?h.stencilStoreOp="store":h.stencilStoreOp="discard"):(h.stencilLoadOp=void 0,h.stencilStoreOp=void 0),this.gpuRenderPassDescriptor.depthStencilAttachment=this.gpuDepthStencilAttachment;}else this.gpuRenderPassDescriptor.depthStencilAttachment=void 0;this.gpuRenderPassDescriptor.occlusionQuerySet=(0,ey.default)(n.occlusionQueryPool)?void 0:n.occlusionQueryPool.querySet;},n.prototype.beginRenderPass=function(n,r){eO(null===this.gpuRenderPassEncoder),this.setRenderPassDescriptor(r),this.frameCommandEncoder=n,this.gpuRenderPassEncoder=this.frameCommandEncoder.beginRenderPass(this.gpuRenderPassDescriptor);},n.prototype.flipY=function(n,r){return this.device.swapChainHeight-n-r;},n.prototype.setViewport=function(n,r,i,a,o,s){void 0===o&&(o=0),void 0===s&&(s=1),this.gpuRenderPassEncoder.setViewport(n,this.flipY(r,a),i,a,o,s);},n.prototype.setScissorRect=function(n,r,i,a){this.gpuRenderPassEncoder.setScissorRect(n,this.flipY(r,a),i,a);},n.prototype.setPipeline=function(n){var r=eM(n.gpuRenderPipeline);this.getEncoder().setPipeline(r);},n.prototype.setVertexInput=function(n,r,i){if(null!==n){var a=this.getEncoder();null!==i&&a.setIndexBuffer(nu(i.buffer),eM(n.indexFormat),i.offset);for(var o=0;o<r.length;o++){var s=r[o];null!==s&&a.setVertexBuffer(o,nu(s.buffer),s.offset);}}},n.prototype.setBindings=function(n){var r=this.getEncoder();n.gpuBindGroup.forEach(function(i,a){i&&r.setBindGroup(a,n.gpuBindGroup[a]);});},n.prototype.setStencilReference=function(n){this.gpuRenderPassEncoder.setStencilReference(n);},n.prototype.draw=function(n,r,i,a){this.getEncoder().draw(n,r,i,a);},n.prototype.drawIndexed=function(n,r,i,a,o){this.getEncoder().drawIndexed(n,r,i,a,o);},n.prototype.drawIndirect=function(n,r){this.getEncoder().drawIndirect(nu(n),r);},n.prototype.drawIndexedIndirect=function(n,r){this.getEncoder().drawIndexedIndirect(nu(n),r);},n.prototype.beginOcclusionQuery=function(n){this.gpuRenderPassEncoder.beginOcclusionQuery(n);},n.prototype.endOcclusionQuery=function(){this.gpuRenderPassEncoder.endOcclusionQuery();},n.prototype.pushDebugGroup=function(n){this.gpuRenderPassEncoder.pushDebugGroup(n);},n.prototype.popDebugGroup=function(){this.gpuRenderPassEncoder.popDebugGroup();},n.prototype.insertDebugMarker=function(n){this.gpuRenderPassEncoder.insertDebugMarker(n);},n.prototype.beginBundle=function(n){this.renderBundle=n;},n.prototype.endBundle=function(){this.renderBundle.finish();},n.prototype.executeBundles=function(n){this.gpuRenderPassEncoder.executeBundles(n.map(function(n){return n.renderBundle;}));},n.prototype.finish=function(){var n;null===(n=this.gpuRenderPassEncoder)||void 0===n||n.end(),this.gpuRenderPassEncoder=null;for(var r=0;r<this.gfxColorAttachment.length;r++){var i=this.gfxColorAttachment[r],a=this.gfxColorResolveTo[r];null!==i&&null!==a&&1===i.sampleCount&&this.copyAttachment(a,this.gfxColorAttachmentLevel[r],i,this.gfxColorResolveToLevel[r]);}this.gfxDepthStencilAttachment&&this.gfxDepthStencilResolveTo&&(this.gfxDepthStencilAttachment.sampleCount>1||this.copyAttachment(this.gfxDepthStencilResolveTo,0,this.gfxDepthStencilAttachment,0)),this.frameCommandEncoder=null;},n.prototype.copyAttachment=function(n,r,i,a){eO(1===i.sampleCount);var o={texture:i.gpuTexture,mipLevel:a},s={texture:n.gpuTexture,mipLevel:r};eO(i.width>>>a==n.width>>>r),eO(i.height>>>a==n.height>>>r),eO(!!(i.usage&em.COPY_SRC)),eO(!!(n.usage&em.COPY_DST)),this.frameCommandEncoder.copyTextureToTexture(o,s,[n.width,n.height,1]);},n;}(),nC=function(n){function r(r){var i=r.id,a=r.device,o=r.descriptor,s=n.call(this,{id:i,device:a})||this;return s.type=z.RenderPipeline,s.isCreatingAsync=!1,s.gpuRenderPipeline=null,s.descriptor=o,s.device.createRenderPipelineInternal(s,!1),s;}return(0,ex.__extends)(r,n),r.prototype.getBindGroupLayout=function(n){return this.gpuRenderPipeline.getBindGroupLayout(n);},r;}(nv),nO=function(n){function r(r){var i,a,o=r.id,s=r.device,l=r.descriptor,u=n.call(this,{id:o,device:s})||this;u.type=z.Sampler;var c=l.lodMinClamp,f=l.mipmapFilter===$.NO_MIP?l.lodMinClamp:l.lodMaxClamp,d=null!==(i=l.maxAnisotropy)&&void 0!==i?i:1;return d>1&&eO(l.minFilter===q.BILINEAR&&l.magFilter===q.BILINEAR&&l.mipmapFilter===$.LINEAR),u.gpuSampler=u.device.device.createSampler({addressModeU:ns(l.addressModeU),addressModeV:ns(l.addressModeV),addressModeW:ns(null!==(a=l.addressModeW)&&void 0!==a?a:l.addressModeU),lodMinClamp:c,lodMaxClamp:f,minFilter:nl(l.minFilter),magFilter:nl(l.magFilter),mipmapFilter:function(n){if(n===$.LINEAR)return"linear";if(n===$.NEAREST||n===$.NO_MIP)return"nearest";throw Error("whoops");}(l.mipmapFilter),compare:void 0!==l.compareFunction?nh(l.compareFunction):void 0,maxAnisotropy:d}),u;}return(0,ex.__extends)(r,n),r;}(nv),nM=function(n){function r(r){var i=r.id,a=r.device,o=r.descriptor,s=r.skipCreate,l=r.sampleCount,u=n.call(this,{id:i,device:a})||this;u.type=z.Texture,u.flipY=!1;var c=o.format,f=o.dimension,d=o.width,h=o.height,p=o.depthOrArrayLayers,m=o.mipLevelCount,g=o.usage,v=o.pixelStore;return u.flipY=!!(null==v?void 0:v.unpackFlipY),u.device.createTextureShared({format:c,dimension:null!=f?f:ee.TEXTURE_2D,width:d,height:h,depthOrArrayLayers:null!=p?p:1,mipLevelCount:null!=m?m:1,usage:g,sampleCount:null!=l?l:1},u,s),u;}return(0,ex.__extends)(r,n),r.prototype.textureFromImageBitmapOrCanvas=function(n,r,i){for(var a=r[0].width,o=r[0].height,s={size:{width:a,height:o,depthOrArrayLayers:i},format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT},l=n.createTexture(s),u=0;u<r.length;u++)n.queue.copyExternalImageToTexture({source:r[u],flipY:this.flipY},{texture:l,origin:[0,0,u]},[a,o]);return[l,a,o];},r.prototype.isImageBitmapOrCanvases=function(n){var r=n[0];return r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof OffscreenCanvas;},r.prototype.isVideo=function(n){return n[0]instanceof HTMLVideoElement;},r.prototype.setImageData=function(n,r){var i,a,o,s,l=this,u=this.device.device;if(this.isImageBitmapOrCanvases(n))a=(i=(0,ex.__read)(this.textureFromImageBitmapOrCanvas(u,n,this.depthOrArrayLayers),3))[0],o=i[1],s=i[2];else if(this.isVideo(n))a=u.importExternalTexture({source:n[0]});else{var c=ng(this.gpuTextureformat),f=Math.ceil(this.width/c.width)*c.length;n.forEach(function(n){u.queue.writeTexture({texture:l.gpuTexture},n,{bytesPerRow:f},{width:l.width,height:l.height});});}this.width=o,this.height=s,a&&(this.gpuTexture=a),this.gpuTextureView=this.gpuTexture.createView({dimension:function(n){if(n===ee.TEXTURE_2D)return"2d";if(n===ee.TEXTURE_CUBE_MAP)return"cube";if(n===ee.TEXTURE_2D_ARRAY)return"2d-array";if(n===ee.TEXTURE_3D)return"3d";throw Error("whoops");}(this.dimension)});},r.prototype.destroy=function(){n.prototype.destroy.call(this),this.gpuTexture.destroy();},r;}(nv),nR=function(n){function r(r){var i=r.id,a=r.device,o=n.call(this,{id:i,device:a})||this;return o.type=z.RenderBundle,o.renderBundleEncoder=o.device.device.createRenderBundleEncoder({colorFormats:[o.device.swapChainFormat]}),o;}return(0,ex.__extends)(r,n),r.prototype.finish=function(){this.renderBundle=this.renderBundleEncoder.finish();},r;}(nv),nP=function(){function n(n,r,i,a,o,s){this.swapChainWidth=0,this.swapChainHeight=0,this.swapChainTextureUsage=em.RENDER_ATTACHMENT|em.COPY_DST,this._resourceUniqueId=0,this.renderPassPool=[],this.computePassPool=[],this.frameCommandEncoderPool=[],this.featureTextureCompressionBC=!1,this.platformString="WebGPU",this.glslVersion="#version 440",this.explicitBindingLocations=!0,this.separateSamplerTextures=!0,this.viewportOrigin=ea.UPPER_LEFT,this.clipSpaceNearZ=eo.ZERO,this.supportsSyncPipelineCompilation=!1,this.supportMRT=!0,this.device=r,this.canvas=i,this.canvasContext=a,this.glsl_compile=o,this.WGSLComposer=s,this.fallbackTexture2D=this.createFallbackTexture(ee.TEXTURE_2D,ei.Float),this.setResourceName(this.fallbackTexture2D,"Fallback Texture2D"),this.fallbackTexture2DDepth=this.createFallbackTexture(ee.TEXTURE_2D,ei.Depth),this.setResourceName(this.fallbackTexture2DDepth,"Fallback Depth Texture2D"),this.fallbackTexture2DArray=this.createFallbackTexture(ee.TEXTURE_2D_ARRAY,ei.Float),this.setResourceName(this.fallbackTexture2DArray,"Fallback Texture2DArray"),this.fallbackTexture3D=this.createFallbackTexture(ee.TEXTURE_3D,ei.Float),this.setResourceName(this.fallbackTexture3D,"Fallback Texture3D"),this.fallbackTextureCube=this.createFallbackTexture(ee.TEXTURE_CUBE_MAP,ei.Float),this.setResourceName(this.fallbackTextureCube,"Fallback TextureCube"),this.fallbackSamplerFiltering=this.createSampler({addressModeU:X.REPEAT,addressModeV:X.REPEAT,minFilter:q.POINT,magFilter:q.POINT,mipmapFilter:$.NEAREST}),this.setResourceName(this.fallbackSamplerFiltering,"Fallback Sampler Filtering"),this.fallbackSamplerComparison=this.createSampler({addressModeU:X.REPEAT,addressModeV:X.REPEAT,minFilter:q.POINT,magFilter:q.POINT,mipmapFilter:$.NEAREST,compareFunction:U.ALWAYS}),this.setResourceName(this.fallbackSamplerComparison,"Fallback Sampler Comparison Filtering"),this.device.features&&(this.featureTextureCompressionBC=this.device.features.has("texture-compression-bc")),this.device.onuncapturederror=function(n){console.error(n.error);},this.swapChainFormat=navigator.gpu.getPreferredCanvasFormat(),this.canvasContext.configure({device:this.device,format:this.swapChainFormat,usage:this.swapChainTextureUsage,alphaMode:"premultiplied"});}return n.prototype.destroy=function(){},n.prototype.configureSwapChain=function(n,r){(this.swapChainWidth!==n||this.swapChainHeight!==r)&&(this.swapChainWidth=n,this.swapChainHeight=r);},n.prototype.getOnscreenTexture=function(){var n=this.canvasContext.getCurrentTexture(),r=n.createView(),i=new nM({id:0,device:this,descriptor:{format:ef.U8_RGBA_RT,width:this.swapChainWidth,height:this.swapChainHeight,depthOrArrayLayers:0,dimension:ee.TEXTURE_2D,mipLevelCount:1,usage:this.swapChainTextureUsage},skipCreate:!0});return i.depthOrArrayLayers=1,i.sampleCount=1,i.gpuTexture=n,i.gpuTextureView=r,i.name="Onscreen",this.setResourceName(i,"Onscreen Texture"),i;},n.prototype.getDevice=function(){return this;},n.prototype.getCanvas=function(){return this.canvas;},n.prototype.beginFrame=function(){eO(0===this.frameCommandEncoderPool.length);},n.prototype.endFrame=function(){eO(this.frameCommandEncoderPool.every(function(n){return null!==n;})),this.device.queue.submit(this.frameCommandEncoderPool.map(function(n){return n.finish();})),this.frameCommandEncoderPool=[];},n.prototype.getNextUniqueId=function(){return++this._resourceUniqueId;},n.prototype.createBuffer=function(n){return new n_({id:this.getNextUniqueId(),device:this,descriptor:n});},n.prototype.createTexture=function(n){return new nM({id:this.getNextUniqueId(),device:this,descriptor:n});},n.prototype.createSampler=function(n){return new nO({id:this.getNextUniqueId(),device:this,descriptor:n});},n.prototype.createRenderTarget=function(n){var r=new nM({id:this.getNextUniqueId(),device:this,descriptor:(0,ex.__assign)((0,ex.__assign)({},n),{dimension:ee.TEXTURE_2D,mipLevelCount:1,depthOrArrayLayers:1,usage:et.RENDER_TARGET}),sampleCount:n.sampleCount});return r.depthOrArrayLayers=1,r.type=z.RenderTarget,r;},n.prototype.createRenderTargetFromTexture=function(n){var r=n.format,i=n.width,a=n.height,o=n.depthOrArrayLayers,s=n.sampleCount,l=n.mipLevelCount,u=n.gpuTexture,c=n.gpuTextureView,f=n.usage;eO(!!(f&em.RENDER_ATTACHMENT));var d=new nM({id:this.getNextUniqueId(),device:this,descriptor:{format:r,width:i,height:a,depthOrArrayLayers:o,dimension:ee.TEXTURE_2D,mipLevelCount:l,usage:f},skipCreate:!0});return d.depthOrArrayLayers=o,d.sampleCount=s,d.gpuTexture=u,d.gpuTextureView=c,d;},n.prototype.createProgram=function(n){var r,i;return(null===(r=n.vertex)||void 0===r?void 0:r.glsl)&&(n.vertex.glsl=tw(this.queryVendorInfo(),"vert",n.vertex.glsl)),(null===(i=n.fragment)||void 0===i?void 0:i.glsl)&&(n.fragment.glsl=tw(this.queryVendorInfo(),"frag",n.fragment.glsl)),new nw({id:this.getNextUniqueId(),device:this,descriptor:n});},n.prototype.createProgramSimple=function(n){return new nw({id:this.getNextUniqueId(),device:this,descriptor:n});},n.prototype.createTextureShared=function(n,r,i){var a,o,s={width:n.width,height:n.height,depthOrArrayLayers:n.depthOrArrayLayers},l=n.mipLevelCount,u=no(n.format),c=function(n){if(n===ee.TEXTURE_2D||n===ee.TEXTURE_CUBE_MAP||n===ee.TEXTURE_2D_ARRAY)return"2d";if(n===ee.TEXTURE_3D)return"3d";throw Error("whoops");}(n.dimension),f=(a=n.usage,o=0,a&et.SAMPLED&&(o|=em.TEXTURE_BINDING|em.COPY_DST|em.COPY_SRC),a&et.STORAGE&&(o|=em.TEXTURE_BINDING|em.STORAGE_BINDING|em.COPY_SRC|em.COPY_DST),a&et.RENDER_TARGET&&(o|=em.RENDER_ATTACHMENT|em.TEXTURE_BINDING|em.COPY_SRC|em.COPY_DST),o);if(r.gpuTextureformat=u,r.dimension=n.dimension,r.format=n.format,r.width=n.width,r.height=n.height,r.depthOrArrayLayers=n.depthOrArrayLayers,r.mipLevelCount=l,r.usage=f,r.sampleCount=n.sampleCount,!i){var d=this.device.createTexture({size:s,mipLevelCount:l,format:u,dimension:c,sampleCount:n.sampleCount,usage:f}),h=d.createView();r.gpuTexture=d,r.gpuTextureView=h;}},n.prototype.getFallbackSampler=function(n){return n.formatKind===ei.Depth&&n.comparison?this.fallbackSamplerComparison:this.fallbackSamplerFiltering;},n.prototype.getFallbackTexture=function(n){var r=n.dimension,i=n.formatKind;if(r===ee.TEXTURE_2D)return i===ei.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(r===ee.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(r===ee.TEXTURE_3D)return this.fallbackTexture3D;if(r===ee.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw Error("whoops");},n.prototype.createFallbackTexture=function(n,r){var i=n===ee.TEXTURE_CUBE_MAP?6:1,a=r===ei.Float?ef.U8_RGBA_NORM:ef.D24;return this.createTexture({dimension:n,format:a,usage:et.SAMPLED,width:1,height:1,depthOrArrayLayers:i,mipLevelCount:1});},n.prototype.createBindings=function(n){return new ny({id:this.getNextUniqueId(),device:this,descriptor:n});},n.prototype.createInputLayout=function(n){return new nE({id:this.getNextUniqueId(),device:this,descriptor:n});},n.prototype.createComputePipeline=function(n){return new nx({id:this.getNextUniqueId(),device:this,descriptor:n});},n.prototype.createRenderPipeline=function(n){return new nC({id:this.getNextUniqueId(),device:this,descriptor:(0,ex.__assign)({},n)});},n.prototype.createQueryPool=function(n,r){return new nS({id:this.getNextUniqueId(),device:this,descriptor:{type:n,elemCount:r}});},n.prototype.createRenderPipelineInternal=function(n,r){if(null===n.gpuRenderPipeline){var i,a=n.descriptor,o=a.program,s=o.vertexStage,l=o.fragmentStage;if(null!==s&&null!==l){var u,c,f,d=a.megaStateDescriptor||{},h=d.stencilBack,p=d.stencilFront,m=(0,ex.__rest)(d,["stencilBack","stencilFront"]),g=eG(eW);a.megaStateDescriptor=(0,ex.__assign)((0,ex.__assign)((0,ex.__assign)({},g),{stencilBack:(0,ex.__assign)((0,ex.__assign)({},g.stencilBack),h),stencilFront:(0,ex.__assign)((0,ex.__assign)({},g.stencilFront),p)}),m);var v=a.megaStateDescriptor.attachmentsState[0];a.colorAttachmentFormats.forEach(function(n,r){a.megaStateDescriptor.attachmentsState[r]||(a.megaStateDescriptor.attachmentsState[r]=eU(void 0,v));});var y=(u=null!==(i=a.topology)&&void 0!==i?i:Y.TRIANGLES,c=a.megaStateDescriptor,{topology:function(n){switch(n){case Y.TRIANGLES:return"triangle-list";case Y.POINTS:return"point-list";case Y.TRIANGLE_STRIP:return"triangle-strip";case Y.LINES:return"line-list";case Y.LINE_STRIP:return"line-strip";default:throw Error("Unknown primitive topology mode");}}(u),cullMode:function(n){if(n===G.NONE)return"none";if(n===G.FRONT)return"front";if(n===G.BACK)return"back";throw Error("whoops");}(c.cullMode),frontFace:function(n){if(n===V.CCW)return"ccw";if(n===V.CW)return"cw";throw Error("whoops");}(c.frontFace)}),_=(f=a.colorAttachmentFormats,a.megaStateDescriptor.attachmentsState.map(function(n,r){return{format:no(f[r]),blend:function(n){if(!(nd(n.rgbBlendState)&&nd(n.alphaBlendState)))return{color:nf(n.rgbBlendState),alpha:nf(n.alphaBlendState)};}(n),writeMask:n.channelWriteMask};})),b=function(n,r){if(!(0,ey.default)(n))return{format:no(n),depthWriteEnabled:!!r.depthWrite,depthCompare:nh(r.depthCompare),depthBias:r.polygonOffset?r.polygonOffsetUnits:0,depthBiasSlopeScale:r.polygonOffset?r.polygonOffsetFactor:0,stencilFront:{compare:nh(r.stencilFront.compare),passOp:np(r.stencilFront.passOp),failOp:np(r.stencilFront.failOp),depthFailOp:np(r.stencilFront.depthFailOp)},stencilBack:{compare:nh(r.stencilBack.compare),passOp:np(r.stencilBack.passOp),failOp:np(r.stencilBack.failOp),depthFailOp:np(r.stencilBack.depthFailOp)},stencilReadMask:4294967295,stencilWriteMask:4294967295};}(a.depthStencilAttachmentFormat,a.megaStateDescriptor),x=void 0;null!==a.inputLayout&&(x=a.inputLayout.buffers);var E=a.sampleCount,w={layout:"auto",vertex:(0,ex.__assign)((0,ex.__assign)({},s),{buffers:x}),primitive:y,depthStencil:b,multisample:{count:E},fragment:(0,ex.__assign)((0,ex.__assign)({},l),{targets:_})};n.gpuRenderPipeline=this.device.createRenderPipeline(w);}}},n.prototype.createReadback=function(){return new nT({id:this.getNextUniqueId(),device:this});},n.prototype.createRenderBundle=function(){return new nR({id:this.getNextUniqueId(),device:this});},n.prototype.createRenderPass=function(n){var r=this.renderPassPool.pop();void 0===r&&(r=new nA(this));var i=this.frameCommandEncoderPool.pop();return void 0===i&&(i=this.device.createCommandEncoder()),r.beginRenderPass(i,n),r;},n.prototype.createComputePass=function(){var n=this.computePassPool.pop();void 0===n&&(n=new nb);var r=this.frameCommandEncoderPool.pop();return void 0===r&&(r=this.device.createCommandEncoder()),n.beginComputePass(r),n;},n.prototype.submitPass=function(n){n instanceof nA?(this.frameCommandEncoderPool.push(n.frameCommandEncoder),n.finish(),this.renderPassPool.push(n)):n instanceof nb&&(this.frameCommandEncoderPool.push(n.frameCommandEncoder),n.finish(),this.computePassPool.push(n));},n.prototype.copySubTexture2D=function(n,r,i,a,o,s,l){var u=this.device.createCommandEncoder(),c={texture:a.gpuTexture,origin:[o,s,0],mipLevel:0,aspect:"all"},f={texture:n.gpuTexture,origin:[r,i,0],mipLevel:0,aspect:"all"};eO(!!(a.usage&em.COPY_SRC)),eO(!!(n.usage&em.COPY_DST)),u.copyTextureToTexture(c,f,[a.width,a.height,l||1]),this.device.queue.submit([u.finish()]);},n.prototype.queryLimits=function(){return{uniformBufferMaxPageWordSize:this.device.limits.maxUniformBufferBindingSize>>>2,uniformBufferWordAlignment:this.device.limits.minUniformBufferOffsetAlignment>>>2,supportedSampleCounts:[1],occlusionQueriesRecommended:!0,computeShadersSupported:!0};},n.prototype.queryTextureFormatSupported=function(n,r,i){if(function(n){switch(eT(n)){case el.BC1:case el.BC2:case el.BC3:case el.BC4_SNORM:case el.BC4_UNORM:case el.BC5_SNORM:case el.BC5_UNORM:return!0;default:return!1;}}(n)){if(!this.featureTextureCompressionBC)return!1;var a=function(n){switch(eT(n)){case el.BC1:case el.BC2:case el.BC3:case el.BC4_SNORM:case el.BC4_UNORM:case el.BC5_SNORM:case el.BC5_UNORM:return 4;default:return 1;}}(n);return r%a==0&&i%a==0&&this.featureTextureCompressionBC;}switch(n){case ef.U16_RGBA_NORM:case ef.F32_RGBA:return!1;}return!0;},n.prototype.queryPlatformAvailable=function(){return!0;},n.prototype.queryVendorInfo=function(){return this;},n.prototype.queryRenderPass=function(n){return n.descriptor;},n.prototype.queryRenderTarget=function(n){return n;},n.prototype.setResourceName=function(n,r){if(n.name=r,n.type===z.Buffer){var i=n;i.gpuBuffer.label=r;}else if(n.type===z.Texture){var i=n;i.gpuTexture.label=r,i.gpuTextureView.label=r;}else if(n.type===z.RenderTarget){var i=n;i.gpuTexture.label=r,i.gpuTextureView.label=r;}else if(n.type===z.Sampler){var i=n;i.gpuSampler.label=r;}else if(n.type===z.RenderPipeline){var i=n;null!==i.gpuRenderPipeline&&(i.gpuRenderPipeline.label=r);}},n.prototype.setResourceLeakCheck=function(n,r){},n.prototype.checkForLeaks=function(){},n.prototype.programPatched=function(n){},n.prototype.pipelineQueryReady=function(n){return null!==n.gpuRenderPipeline;},n.prototype.pipelineForceReady=function(n){this.createRenderPipelineInternal(n,!1);},n;}(),nk=function(){function n(n){this.pluginOptions=n;}return n.prototype.createSwapChain=function(n){return(0,ex.__awaiter)(this,void 0,void 0,function(){var r,i,a,o,s,l;return(0,ex.__generator)(this,function(u){switch(u.label){case 0:if(void 0===globalThis.navigator.gpu)return[2,null];r=null,u.label=1;case 1:return u.trys.push([1,3,,4]),i=this.pluginOptions.xrCompatible,[4,globalThis.navigator.gpu.requestAdapter({xrCompatible:i})];case 2:return r=u.sent(),[3,4];case 3:return console.log(u.sent()),[3,4];case 4:if(null===r)return[2,null];return a=["depth32float-stencil8","texture-compression-bc","float32-filterable"].filter(function(n){return r.features.has(n);}),[4,r.requestDevice({requiredFeatures:a})];case 5:if((o=u.sent())&&(s=this.pluginOptions.onContextLost,o.lost.then(function(){s&&s();})),null===o||!(l=n.getContext("webgpu")))return[2,null];u.label=6;case 6:return u.trys.push([6,8,,9]),[4,na(this.pluginOptions.shaderCompilerPath)];case 7:case 8:return u.sent(),[3,9];case 9:return[2,new nP(r,o,n,l,nn,nr&&new nr)];}});});},n;}();},"97f96ff9":function(n,r,i){"use strict";function a(){return 0;}function o(n){return function(){return n;};}i.d(r,"__esModule",{value:!0}),i.e(r,{constantZero:function(){return a;},default:function(){return o;}});},"9841474e":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return u;}});var a=i("777fffbe"),o=i("4f81a096"),s=a._(o);function l(n,r){return null==n||null==r?NaN:r<n?-1:r>n?1:r>=n?0:NaN;}function u(n){let r,i,a;function o(n,a,s=0,l=n.length){if(s<l){if(0!==r(a,a))return l;do{let r=s+l>>>1;0>i(n[r],a)?s=r+1:l=r;}while(s<l)}return s;}return 2!==n.length?(r=s.default,i=(r,i)=>(0,s.default)(n(r),i),a=(r,i)=>n(r)-i):(r=n===s.default||n===l?n:c,i=n,a=n),{left:o,center:function(n,r,i=0,s=n.length){let l=o(n,r,i,s-1);return l>i&&a(n[l-1],r)>-a(n[l],r)?l-1:l;},right:function(n,a,o=0,s=n.length){if(o<s){if(0!==r(a,a))return s;do{let r=o+s>>>1;0>=i(n[r],a)?o=r+1:s=r;}while(o<s)}return o;}};}function c(){return 0;}},"988eab63":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{LightFilter:function(){return F;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("613f75ca"),l=a._(s),u=i("a854094b"),c=a._(u),f=i("e4870cf0"),d=a._(f),h=i("ee64167d"),p=a._(h),m=i("7cfeda15"),g=a._(m),v=i("609f48be"),y=o._(v),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"},b=i("887aaf6c"),x=a._(b),E=y.forwardRef(function(n,r){return y.createElement(x.default,(0,g.default)({},n,{ref:r,icon:_}));}),w=i("64681837"),S=i("13e8e493"),T=i("995a46b6"),A=i("a5a99096"),C=a._(A),O=i("064ecd09"),M=a._(O),R=i("ddaa0afd"),P=a._(R),k=i("cd1e34ba"),I=i("a3273044"),L=i("dac8af92"),N=["size","collapse","collapseLabel","initialValues","onValuesChange","form","placement","formRef","bordered","ignoreRules","footerRender"],D=function(n){var r=n.items,i=n.prefixCls,a=n.size,o=void 0===a?"middle":a,s=n.collapse,l=n.collapseLabel,u=n.onValuesChange,f=n.bordered,h=n.values,m=n.footerRender,g=n.placement,v=(0,w.useIntl)(),_="".concat(i,"-light-filter"),b=(0,I.useStyle)("LightFilter",function(n){var r;return[(r=(0,d.default)((0,d.default)({},n),{},{componentCls:".".concat(_)}),(0,c.default)({},r.componentCls,{lineHeight:"30px","&::before":{display:"block",height:0,visibility:"hidden",content:"'.'"},"&-small":{lineHeight:r.lineHeight},"&-container":{display:"flex",flexWrap:"wrap",gap:r.marginXS},"&-item":(0,c.default)({whiteSpace:"nowrap"},"".concat(r.antCls,"-form-item"),{marginBlock:0}),"&-line":{minWidth:"198px"},"&-line:not(:first-child)":{marginBlockStart:"16px",marginBlockEnd:8},"&-collapse-icon":{width:r.controlHeight,height:r.controlHeight,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},"&-effective":(0,c.default)({},"".concat(r.componentCls,"-collapse-icon"),{backgroundColor:r.colorBgTextHover})}))];}),x=b.wrapSSR,A=b.hashId,C=(0,y.useState)(!1),O=(0,p.default)(C,2),R=O[0],P=O[1],k=(0,y.useState)(function(){return(0,d.default)({},h);}),N=(0,p.default)(k,2),D=N[0],F=N[1];(0,y.useEffect)(function(){F((0,d.default)({},h));},[h]);var B=(0,y.useMemo)(function(){var n=[],i=[];return r.forEach(function(r){(r.props||{}).secondary||s?n.push(r):i.push(r);}),{collapseItems:n,outsideItems:i};},[n.items]),j=B.collapseItems,z=B.outsideItems;return x((0,L.jsx)("div",{className:(0,M.default)(_,A,"".concat(_,"-").concat(o),(0,c.default)({},"".concat(_,"-effective"),Object.keys(h).some(function(n){return Array.isArray(h[n])?h[n].length>0:h[n];}))),children:(0,L.jsxs)("div",{className:"".concat(_,"-container ").concat(A).trim(),children:[z.map(function(n,r){if(!(null!=n&&n.props))return n;var i=n.key,a=((null==n?void 0:n.props)||{}).fieldProps,o=null!=a&&a.placement?null==a?void 0:a.placement:g;return(0,L.jsx)("div",{className:"".concat(_,"-item ").concat(A).trim(),children:y.default.cloneElement(n,{fieldProps:(0,d.default)((0,d.default)({},n.props.fieldProps),{},{placement:o}),proFieldProps:(0,d.default)((0,d.default)({},n.props.proFieldProps),{},{light:!0,label:n.props.label,bordered:f}),bordered:f})},i||r);}),j.length?(0,L.jsx)("div",{className:"".concat(_,"-item ").concat(A).trim(),children:(0,L.jsx)(T.FilterDropdown,{padding:24,open:R,onOpenChange:function(n){P(n);},placement:g,label:l||(s?(0,L.jsx)(E,{className:"".concat(_,"-collapse-icon ").concat(A).trim()}):(0,L.jsx)(S.FieldLabel,{size:o,label:v.getMessage("form.lightFilter.more","\u66F4\u591A\u7B5B\u9009")})),footerRender:m,footer:{onConfirm:function(){u((0,d.default)({},D)),P(!1);},onClear:function(){var n={};j.forEach(function(r){n[r.props.name]=void 0;}),u(n);}},children:j.map(function(n){var r=n.key,i=n.props,a=i.name,o=i.fieldProps,s=(0,d.default)((0,d.default)({},o),{},{onChange:function(n){return F((0,d.default)((0,d.default)({},D),{},(0,c.default)({},a,null!=n&&n.target?n.target.value:n))),!1;}});D.hasOwnProperty(a)&&(s[n.props.valuePropName||"value"]=D[a]);var l=null!=o&&o.placement?null==o?void 0:o.placement:g;return(0,L.jsx)("div",{className:"".concat(_,"-line ").concat(A).trim(),children:y.default.cloneElement(n,{fieldProps:(0,d.default)((0,d.default)({},s),{},{placement:l})})},r);})})},"more"):null]})}));};function F(n){var r=n.size,i=n.collapse,a=n.collapseLabel,o=n.initialValues,s=n.onValuesChange,u=n.form,c=n.placement,f=n.formRef,h=n.bordered,m=(n.ignoreRules,n.footerRender),g=(0,l.default)(n,N),v=(0,(0,y.useContext)(C.default.ConfigContext).getPrefixCls)("pro-form"),_=(0,y.useState)(function(){return(0,d.default)({},o);}),b=(0,p.default)(_,2),x=b[0],E=b[1],w=(0,y.useRef)();return(0,y.useImperativeHandle)(f,function(){return w.current;},[w.current]),(0,L.jsx)(k.BaseForm,(0,d.default)((0,d.default)({size:r,initialValues:o,form:u,contentRender:function(n){return(0,L.jsx)(D,{prefixCls:v,items:null==n?void 0:n.flatMap(function(n){var r;return n&&null!=n&&n.type&&(null==n||null===(r=n.type)||void 0===r?void 0:r.displayName)==="ProForm-Group"?n.props.children:n;}),size:r,bordered:h,collapse:i,collapseLabel:a,placement:c,values:x||{},footerRender:m,onValuesChange:function(n){var r,i,a=(0,d.default)((0,d.default)({},x),n);E(a),null===(r=w.current)||void 0===r||r.setFieldsValue(a),null===(i=w.current)||void 0===i||i.submit(),s&&s(n,a);}});},formRef:w,formItemProps:{colon:!1,labelAlign:"left"},fieldProps:{style:{width:void 0}}},(0,P.default)(g,["labelWidth"])),{},{onValuesChange:function(n,r){var i;E(r),null==s||s(n,r),null===(i=w.current)||void 0===i||i.submit();}}));}},99045891:function(n,r,i){var a=i("2d19bd14"),o=i("743ea378");n.exports=function(n,r){r=a(r,n);for(var i=0,s=r.length;null!=n&&i<s;)n=n[o(r[i++])];return i&&i==s?n:void 0;};},"991309e4":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return d;}});var a=i("777fffbe"),o=a._(i("9b84be4b")),s=a._(i("a854094b")),l=i("553ee311"),u=i("9479dab9"),c=a._(i("6654a076")),f=i("8970bd89");class d extends c.default{constructor(...n){super(...n),(0,s.default)(this,"raiseCount",0),(0,s.default)(this,"raiseRepeat",0);}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,EXTRUDE:10,NORMAL:11});}getCommonUniformsInfo(){let{animateOption:n={enable:!1,speed:.01,repeat:!1},sourceColor:r,targetColor:i,pickLight:a=!1,heightfixed:o=!1,opacityLinear:s={enable:!1,dir:"up"},lightEnable:l=!0}=this.layer.getLayerConfig(),c=0,f=[0,0,0,0],d=[0,0,0,0];if(r&&i&&(f=(0,u.rgb2arr)(r),d=(0,u.rgb2arr)(i),c=1),this.raiseCount<1&&this.raiseRepeat>0&&n.enable){let{speed:r=.01}=n;this.raiseCount+=r,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1);}let h={u_pickLight:Number(a),u_heightfixed:Number(o),u_r:n.enable&&this.raiseRepeat>0?this.raiseCount:1,u_linearColor:c,u_sourceColor:f,u_targetColor:d,u_opacitylinear:Number(s.enable),u_opacitylinear_dir:"up"===s.dir?1:0,u_lightEnable:Number(l)};return this.getUniformsBufferInfo(h);}initModels(){var n=this;return(0,o.default)(function*(){return n.buildModels();})();}buildModels(){var n=this;return(0,o.default)(function*(){let{depth:r=!0,animateOption:{repeat:i=1}}=n.layer.getLayerConfig();return n.raiseRepeat=i,n.initUniformsBuffer(),[(yield n.layer.buildLayerModel({moduleName:"pointExtrude",vertexShader:'#define pi (3.1415926535)\n\nlayout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;\nlayout(location = ATTRIBUTE_LOCATION_SIZE) in vec3 a_Size;\nlayout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec4 a_Extrude;\nlayout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;\n\nlayout(std140) uniform commonUniforms {\n  float u_pickLight;\n  float u_heightfixed;\n  float u_r;\n  float u_linearColor;\n  vec4 u_sourceColor;\n  vec4 u_targetColor;\n  float u_opacitylinear;\n  float u_opacitylinear_dir;\n  float u_lightEnable;\n};\nout vec4 v_color;\nout float v_lightWeight;\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nfloat getYRadian(float x, float z) {\n  if (x > 0.0 && z > 0.0) {\n    return atan(x / z);\n  } else if (x > 0.0 && z <= 0.0) {\n    return atan(-z / x) + pi / 2.0;\n  } else if (x <= 0.0 && z <= 0.0) {\n    return pi + atan(x / z); //atan(x/z) +\n  } else {\n    return atan(z / -x) + pi * 3.0 / 2.0;\n  }\n}\n\nfloat getXRadian(float y, float r) {\n  return atan(y / r);\n}\n\nvoid main() {\n  vec3 size = a_Size * a_Position;\n\n  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB\n\n  if (u_heightfixed < 1.0) {\n    // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6\n  } else {\n    // \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09\n    if (\n      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET\n    ) {\n      offset *= 4.0 / pow(2.0, 21.0 - u_Zoom);\n    }\n  }\n\n  vec2 positions = a_Extrude.xy;\n  vec2 positions64Low = a_Extrude.zw;\n  vec4 project_pos = project_position(vec4(positions, 0.0, 1.0), positions64Low);\n\n  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F\n  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);\n\n  // // \u5706\u67F1\u5149\u7167\u6548\u679C\n  float lightWeight = 1.0;\n\n  if (u_lightEnable > 0.0) {\n    // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027\n    lightWeight = calc_lighting(pos);\n  }\n\n  v_lightWeight = lightWeight;\n\n  v_color = a_Color;\n\n  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272\n  if (u_linearColor == 1.0) {\n    // \u4F7F\u7528\u6E10\u53D8\u989C\u8272\n    v_color = mix(u_sourceColor, u_targetColor, a_Position.z);\n    v_color.a = v_color.a * opacity;\n  } else {\n    v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);\n  }\n\n  if (u_opacitylinear > 0.0) {\n    v_color.a *= u_opacitylinear_dir > 0.0 ? 1.0 - a_Position.z : a_Position.z;\n  }\n\n  gl_Position = project_common_position_to_clipspace(pos);\n\n  setPickingColor(a_PickingColor);\n}\n',fragmentShader:'\nin vec4 v_color;\nin float v_lightWeight;\nout vec4 outputColor;\n\nlayout(std140) uniform commonUniforms {\n  float u_pickLight;\n  float u_heightfixed;\n  float u_r;\n  float u_linearColor;\n  vec4 u_sourceColor;\n  vec4 u_targetColor;\n  float u_opacitylinear;\n  float u_opacitylinear_dir;\n  float u_lightEnable;\n};\n\n#pragma include "scene_uniforms"\n#pragma include "picking"\n\nvoid main() {\n\n  outputColor = v_color;\n  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8\n  // picking\n  if(u_pickLight > 0.0) {\n    outputColor = filterColorAlpha(outputColor, v_lightWeight);\n  } else {\n    outputColor = filterColor(outputColor);\n  }\n}\n',triangulation:f.PointExtrudeTriangulation,defines:n.getDefines(),inject:n.getInject(),cull:{enable:!0,face:l.gl.FRONT},depth:{enable:r}}))];})();}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:l.AttributeType.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:l.gl.DYNAMIC_DRAW,data:[],type:l.gl.FLOAT},size:3,update:n=>{let{size:r}=n;if(!r)return[2,2,2];{let n=[];return Array.isArray(r)&&(n=2===r.length?[r[0],r[0],r[1]]:r),Array.isArray(r)||(n=[r,r,r]),n;}}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:l.AttributeType.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:l.gl.STATIC_DRAW,data:[],type:l.gl.FLOAT},size:3,update:(n,r,i,a,o)=>o}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:l.AttributeType.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:l.gl.DYNAMIC_DRAW,data:[],type:l.gl.FLOAT},size:4,update:n=>{let r=(0,u.calculateCentroid)(n.coordinates);return[r[0],r[1],(0,u.fp64LowPart)(r[0]),(0,u.fp64LowPart)(r[1])];}}});}}},"9973901c":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{EXPAND_COLUMN:function(){return s.EXPAND_COLUMN;},INTERNAL_COL_DEFINE:function(){return el.INTERNAL_COL_DEFINE;},INTERNAL_HOOKS:function(){return s.INTERNAL_HOOKS;},Summary:function(){return T;},genTable:function(){return eG;},genVirtualTable:function(){return e6;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("a6bb4a78"),l=i("000ce906"),u=i("609f48be"),c=o._(u),f=i("c98516ca"),d=o._(f),h=i("8e17111c");a._(h);var p=i("7cfeda15"),m=a._(p),g=i("801e414d"),v=a._(g),y=i("a9a8ecdb"),_=c.createContext({}),b=i("613f75ca"),x=a._(b),E=["children"];function w(n){return n.children;}w.Row=function(n){var r=n.children,i=(0,x.default)(n,E);return c.createElement("tr",i,r);},w.Cell=function(n){var r=n.className,i=n.index,a=n.children,o=n.colSpan,s=void 0===o?1:o,u=n.rowSpan,f=n.align,h=(0,l.useContext)(d.default,["prefixCls","direction"]),p=h.prefixCls,g=h.direction,b=c.useContext(_),x=b.scrollColumnIndex,E=b.stickyOffsets,w=b.flattenColumns,S=i+s-1+1===x?s+1:s,T=(0,y.getCellFixedInfo)(i,i+S-1,w,E,g);return c.createElement(v.default,(0,m.default)({className:r,index:i,component:"td",prefixCls:p,record:null,dataIndex:null,align:f,colSpan:S,rowSpan:u,render:function(){return a;}},T));};var S=(0,d.responseImmutable)(function(n){var r=n.children,i=n.stickyOffsets,a=n.flattenColumns,o=(0,l.useContext)(d.default,"prefixCls"),s=a.length-1,u=a[s],f=c.useMemo(function(){return{stickyOffsets:i,flattenColumns:a,scrollColumnIndex:null!=u&&u.scrollbar?s:null};},[u,a,s,i]);return c.createElement(_.Provider,{value:f},c.createElement("tfoot",{className:"".concat(o,"-summary")},r));}),T=w,A=i("a854094b"),C=a._(A),O=i("ee64167d"),M=a._(O),R=i("e4870cf0"),P=a._(R),k=i("064ecd09"),I=a._(k),L=i("ec71d407"),N=a._(L),D=i("bc1e4a01"),F=i("d64af98f"),B=o._(F),j=i("8a826376"),z=a._(j),U=i("ae8eb856"),V=a._(U),G=i("dfe6c97a"),H=a._(G),W=i("a275200c");a._(W);var X=i("0c4be061"),q=a._(X),$=i("29196330"),Y=a._($),Z=i("d7f32850"),K=i("85ac25f0"),Q=o._(K),J=i("bea18af3"),ee=a._(J),et=i("4b97d3c2"),en=a._(et);function er(n){var r=n.columnKey,i=n.onColumnResize,a=c.useRef();return(0,en.default)(function(){a.current&&i(r,a.current.offsetWidth);},[]),c.createElement(N.default,{data:r},c.createElement("td",{ref:a,style:{padding:0,border:0,height:0}},c.createElement("div",{style:{height:0,overflow:"hidden"}},"\xa0")));}var ei=i("f7bdf97c"),ea=a._(ei);function eo(n){var r=n.prefixCls,i=n.columnsKey,a=n.onColumnResize,o=c.useRef(null);return c.createElement("tr",{"aria-hidden":"true",className:"".concat(r,"-measure-row"),style:{height:0,fontSize:0},ref:o},c.createElement(N.default.Collection,{onBatchResize:function(n){(0,ea.default)(o.current)&&n.forEach(function(n){a(n.data,n.size.offsetWidth);});}},i.map(function(n){return c.createElement(er,{key:n,columnKey:n,onColumnResize:a});})));}var es=(0,d.responseImmutable)(function(n){var r,i=n.data,a=n.measureColumnWidth,o=(0,l.useContext)(d.default,["prefixCls","getComponent","onColumnResize","flattenColumns","getRowKey","expandedKeys","childrenColumnName","emptyNode","expandedRowOffset","fixedInfoList","colWidths"]),s=o.prefixCls,u=o.getComponent,f=o.onColumnResize,h=o.flattenColumns,p=o.getRowKey,m=o.expandedKeys,g=o.childrenColumnName,v=o.emptyNode,y=o.expandedRowOffset,_=void 0===y?0:y,b=o.colWidths,x=(0,Y.default)(i,g,m,p),E=c.useMemo(function(){return x.map(function(n){return n.rowKey;});},[x]),w=c.useRef({renderWithProps:!1}),S=c.useMemo(function(){for(var n=h.length-_,r=0,i=0;i<_;i+=1)r+=b[i]||0;return{offset:_,colSpan:n,sticky:r};},[h.length,_,b]),T=u(["body","wrapper"],"tbody"),A=u(["body","row"],"tr"),C=u(["body","cell"],"td"),O=u(["body","cell"],"th");r=i.length?x.map(function(n,r){var i=n.record,a=n.indent,o=n.index,s=n.rowKey;return c.createElement(Q.default,{key:s,rowKey:s,rowKeys:E,record:i,index:r,renderIndex:o,rowComponent:A,cellComponent:C,scopeCellComponent:O,indent:a,expandedRowInfo:S});}):c.createElement(ee.default,{expanded:!0,className:"".concat(s,"-placeholder"),prefixCls:s,component:A,cellComponent:C,colSpan:h.length,isEmpty:!0},v);var M=(0,Z.getColumnsKey)(h);return c.createElement(q.default.Provider,{value:w.current},c.createElement(T,{className:"".concat(s,"-tbody")},a&&c.createElement(eo,{prefixCls:s,columnsKey:M,onColumnResize:f}),r));}),el=i("6bb3a01b"),eu=["columnType"];function ec(n){for(var r=n.colWidths,i=n.columns,a=n.columCount,o=(0,l.useContext)(d.default,["tableLayout"]).tableLayout,s=[],u=a||i.length,f=!1,h=u-1;h>=0;h-=1){var p=r[h],g=i&&i[h],v=void 0,y=void 0;if(g&&(v=g[el.INTERNAL_COL_DEFINE],"auto"===o&&(y=g.minWidth)),p||y||v||f){var _=v||{},b=(_.columnType,(0,x.default)(_,eu));s.unshift(c.createElement("col",(0,m.default)({key:h,style:{width:p,minWidth:y}},b))),f=!0;}}return c.createElement("colgroup",null,s);}var ef=i("f1020fa4"),ed=a._(ef),eh=i("002639b3"),ep=["className","noData","columns","flattenColumns","colWidths","columCount","stickyOffsets","direction","fixHeader","stickyTopOffset","stickyBottomOffset","stickyClassName","onScroll","maxContentScroll","children"],em=c.forwardRef(function(n,r){var i=n.className,a=n.noData,o=n.columns,s=n.flattenColumns,u=n.colWidths,f=n.columCount,h=n.stickyOffsets,p=n.direction,m=n.fixHeader,g=n.stickyTopOffset,v=n.stickyBottomOffset,y=n.stickyClassName,_=n.onScroll,b=n.maxContentScroll,E=n.children,w=(0,x.default)(n,ep),S=(0,l.useContext)(d.default,["prefixCls","scrollbarSize","isSticky","getComponent"]),T=S.prefixCls,A=S.scrollbarSize,O=S.isSticky,M=(0,S.getComponent)(["header","table"],"table"),R=O&&!m?0:A,k=c.useRef(null),L=c.useCallback(function(n){(0,eh.fillRef)(r,n),(0,eh.fillRef)(k,n);},[]);c.useEffect(function(){function n(n){var r=n.currentTarget,i=n.deltaX;i&&(_({currentTarget:r,scrollLeft:r.scrollLeft+i}),n.preventDefault());}var r=k.current;return null==r||r.addEventListener("wheel",n,{passive:!1}),function(){null==r||r.removeEventListener("wheel",n);};},[]);var N=c.useMemo(function(){return s.every(function(n){return n.width;});},[s]),D=s[s.length-1],F={fixed:D?D.fixed:null,scrollbar:!0,onHeaderCell:function(){return{className:"".concat(T,"-cell-scrollbar")};}},B=(0,c.useMemo)(function(){return R?[].concat((0,ed.default)(o),[F]):o;},[R,o]),j=(0,c.useMemo)(function(){return R?[].concat((0,ed.default)(s),[F]):s;},[R,s]),z=(0,c.useMemo)(function(){var n=h.right,r=h.left;return(0,P.default)((0,P.default)({},h),{},{left:"rtl"===p?[].concat((0,ed.default)(r.map(function(n){return n+R;})),[0]):r,right:"rtl"===p?n:[].concat((0,ed.default)(n.map(function(n){return n+R;})),[0]),isSticky:O});},[R,h,O]),U=(0,c.useMemo)(function(){for(var n=[],r=0;r<f;r+=1){var i=u[r];if(void 0===i)return null;n[r]=i;}return n;},[u.join("_"),f]);return c.createElement("div",{style:(0,P.default)({overflow:"hidden"},O?{top:g,bottom:v}:{}),ref:L,className:(0,I.default)(i,(0,C.default)({},y,!!y))},c.createElement(M,{style:{tableLayout:"fixed",visibility:a||U?null:"hidden"}},(!a||!b||N)&&c.createElement(ec,{colWidths:U?[].concat((0,ed.default)(U),[R]):[],columCount:f+1,columns:j}),E((0,P.default)((0,P.default)({},w),{},{stickyOffsets:z,columns:B,flattenColumns:j}))));}),eg=c.memo(em),ev=function(n){var r,i=n.cells,a=n.stickyOffsets,o=n.flattenColumns,s=n.rowComponent,u=n.cellComponent,f=n.onHeaderRow,h=n.index,p=(0,l.useContext)(d.default,["prefixCls","direction"]),g=p.prefixCls,_=p.direction;f&&(r=f(i.map(function(n){return n.column;}),h));var b=(0,Z.getColumnsKey)(i.map(function(n){return n.column;}));return c.createElement(s,r,i.map(function(n,r){var i,s=n.column,l=(0,y.getCellFixedInfo)(n.colStart,n.colEnd,o,a,_);return s&&s.onHeaderCell&&(i=n.column.onHeaderCell(s)),c.createElement(v.default,(0,m.default)({},n,{scope:s.title?n.colSpan>1?"colgroup":"col":null,ellipsis:s.ellipsis,align:s.align,component:u,prefixCls:g,key:b[r]},l,{additionalProps:i,rowType:"header"}));}));},ey=(0,d.responseImmutable)(function(n){var r=n.stickyOffsets,i=n.columns,a=n.flattenColumns,o=n.onHeaderRow,s=(0,l.useContext)(d.default,["prefixCls","getComponent"]),u=s.prefixCls,f=s.getComponent,h=c.useMemo(function(){return function(n){var r=[];!function n(i,a){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r[o]=r[o]||[];var s=a;return i.filter(Boolean).map(function(i){var a={key:i.key,className:i.className||"",children:i.title,column:i,colStart:s},l=1,u=i.children;return u&&u.length>0&&(l=n(u,s,o+1).reduce(function(n,r){return n+r;},0),a.hasSubColumns=!0),"colSpan"in i&&(l=i.colSpan),"rowSpan"in i&&(a.rowSpan=i.rowSpan),a.colSpan=l,a.colEnd=a.colStart+l-1,r[o].push(a),s+=l,l;});}(n,0);for(var i=r.length,a=function(n){r[n].forEach(function(r){"rowSpan"in r||r.hasSubColumns||(r.rowSpan=i-n);});},o=0;o<i;o+=1)a(o);return r;}(i);},[i]),p=f(["header","wrapper"],"thead"),m=f(["header","row"],"tr"),g=f(["header","cell"],"th");return c.createElement(p,{className:"".concat(u,"-thead")},h.map(function(n,i){return c.createElement(ev,{key:i,flattenColumns:a,cells:n,stickyOffsets:r,rowComponent:m,cellComponent:g,onHeaderRow:o,index:i});}));}),e_=i("a4968617"),eb=a._(e_),ex=i("99c0cd4c"),eE=a._(ex),ew=i("22aea40b"),eS=i("1cf256f2"),eT=a._(eS),eA=i("044bdec0"),eC=a._(eA),eO=i("17721671"),eM=(0,a._(eO).default)()?window:null;function eR(n){var r=n.className,i=n.children;return c.createElement("div",{className:r},i);}var eP=i("5e94a672"),ek=a._(eP),eI=i("08800308"),eL=a._(eI),eN=i("ae257664");function eD(n){var r=(0,eN.getDOM)(n).getBoundingClientRect(),i=document.documentElement;return{left:r.left+(window.pageXOffset||i.scrollLeft)-(i.clientLeft||document.body.clientLeft||0),top:r.top+(window.pageYOffset||i.scrollTop)-(i.clientTop||document.body.clientTop||0)};}var eF=c.forwardRef(function(n,r){var i,a,o,s,u,f,h,p,m=n.scrollBodyRef,g=n.onScroll,v=n.offsetScroll,y=n.container,_=n.direction,b=(0,l.useContext)(d.default,"prefixCls"),x=(null===(h=m.current)||void 0===h?void 0:h.scrollWidth)||0,E=(null===(p=m.current)||void 0===p?void 0:p.clientWidth)||0,w=x&&E/x*E,S=c.useRef(),T=(i={scrollLeft:0,isHiddenScrollBar:!0},a=(0,c.useRef)(i),o=(0,c.useState)({}),s=(0,M.default)(o,2)[1],u=(0,c.useRef)(null),f=(0,c.useRef)([]),(0,c.useEffect)(function(){return function(){u.current=null;};},[]),[a.current,function(n){f.current.push(n);var r=Promise.resolve();u.current=r,r.then(function(){if(u.current===r){var n=f.current,i=a.current;f.current=[],n.forEach(function(n){a.current=n(a.current);}),u.current=null,i!==a.current&&s({});}});}]),A=(0,M.default)(T,2),O=A[0],R=A[1],k=c.useRef({delta:0,x:0}),L=c.useState(!1),N=(0,M.default)(L,2),D=N[0],F=N[1],j=c.useRef(null);c.useEffect(function(){return function(){eL.default.cancel(j.current);};},[]);var z=function(){F(!1);},U=function(n){var r,i=(n||(null===(r=window)||void 0===r?void 0:r.event)).buttons;if(!D||0===i){D&&F(!1);return;}var a=k.current.x+n.pageX-k.current.x-k.current.delta,o="rtl"===_;a=Math.max(o?w-E:0,Math.min(o?0:E-w,a)),(!o||Math.abs(a)+Math.abs(w)<E)&&(g({scrollLeft:a/E*(x+2)}),k.current.x=n.pageX);},V=function(){eL.default.cancel(j.current),j.current=(0,eL.default)(function(){if(m.current){var n=eD(m.current).top,r=n+m.current.offsetHeight,i=y===window?document.documentElement.scrollTop+window.innerHeight:eD(y).top+y.clientHeight;r-(0,B.default)()<=i||n>=i-v?R(function(n){return(0,P.default)((0,P.default)({},n),{},{isHiddenScrollBar:!0});}):R(function(n){return(0,P.default)((0,P.default)({},n),{},{isHiddenScrollBar:!1});});}});},G=function(n){R(function(r){return(0,P.default)((0,P.default)({},r),{},{scrollLeft:n/x*E||0});});};return(c.useImperativeHandle(r,function(){return{setScrollLeft:G,checkScrollBarVisible:V};}),c.useEffect(function(){var n=(0,ek.default)(document.body,"mouseup",z,!1),r=(0,ek.default)(document.body,"mousemove",U,!1);return V(),function(){n.remove(),r.remove();};},[w,D]),c.useEffect(function(){if(m.current){for(var n=[],r=(0,eN.getDOM)(m.current);r;)n.push(r),r=r.parentElement;return n.forEach(function(n){return n.addEventListener("scroll",V,!1);}),window.addEventListener("resize",V,!1),window.addEventListener("scroll",V,!1),y.addEventListener("scroll",V,!1),function(){n.forEach(function(n){return n.removeEventListener("scroll",V);}),window.removeEventListener("resize",V),window.removeEventListener("scroll",V),y.removeEventListener("scroll",V);};}},[y]),c.useEffect(function(){O.isHiddenScrollBar||R(function(n){var r=m.current;return r?(0,P.default)((0,P.default)({},n),{},{scrollLeft:r.scrollLeft/r.scrollWidth*r.clientWidth}):n;});},[O.isHiddenScrollBar]),x<=E||!w||O.isHiddenScrollBar)?null:c.createElement("div",{style:{height:(0,B.default)(),width:E,bottom:v},className:"".concat(b,"-sticky-scroll")},c.createElement("div",{onMouseDown:function(n){n.persist(),k.current.delta=n.pageX-O.scrollLeft,k.current.x=0,F(!0),n.preventDefault();},ref:S,className:(0,I.default)("".concat(b,"-sticky-scroll-bar"),(0,C.default)({},"".concat(b,"-sticky-scroll-bar-active"),D)),style:{width:"".concat(w,"px"),transform:"translate3d(".concat(O.scrollLeft,"px, 0, 0)")}}));}),eB="rc-table",ej=[],ez={};function eU(){return"No Data";}var eV=c.forwardRef(function(n,r){var i,a=(0,P.default)({rowKey:"key",prefixCls:eB,emptyText:eU},n),o=a.prefixCls,l=a.className,u=a.rowClassName,f=a.style,h=a.data,p=a.rowKey,g=a.scroll,v=a.tableLayout,_=a.direction,b=a.title,x=a.footer,E=a.summary,T=a.caption,A=a.id,O=a.showHeader,R=a.components,k=a.emptyText,L=a.onRow,F=a.onHeaderRow,j=a.onScroll,U=a.internalHooks,G=a.transformColumns,W=a.internalRefs,X=a.tailor,q=a.getContainerWidth,$=a.sticky,Y=a.rowHoverable,K=void 0===Y||Y,Q=h||ej,J=!!Q.length,ee=U===s.INTERNAL_HOOKS,et=c.useCallback(function(n,r){return(0,H.default)(R,n)||r;},[R]),er=c.useMemo(function(){return"function"==typeof p?p:function(n){return n&&n[p];};},[p]),ei=et(["body"]),ea=(t$=c.useState(-1),tZ=(tY=(0,M.default)(t$,2))[0],tK=tY[1],tQ=c.useState(-1),t0=(tJ=(0,M.default)(tQ,2))[0],t1=tJ[1],[tZ,t0,c.useCallback(function(n,r){tK(n),t1(r);},[])]),eo=(0,M.default)(ea,3),eu=eo[0],ef=eo[1],eh=eo[2],ep=(t3=(t2=(0,el.getExpandableProps)(a)).expandIcon,t4=t2.expandedRowKeys,t5=t2.defaultExpandedRowKeys,t6=t2.defaultExpandAllRows,t8=t2.expandedRowRender,t7=t2.onExpand,t9=t2.onExpandedRowsChange,ne=t2.childrenColumnName,nt=t3||ew.renderExpandIcon,nn=ne||"children",nr=c.useMemo(function(){return t8?"row":!!(a.expandable&&a.internalHooks===s.INTERNAL_HOOKS&&a.expandable.__PARENT_RENDER_ICON__||Q.some(function(n){return n&&"object"===(0,eE.default)(n)&&n[nn];}))&&"nest";},[!!t8,Q]),ni=c.useState(function(){return t5||(t6?(0,ew.findAllChildrenKeys)(Q,er,nn):[]);}),no=(na=(0,M.default)(ni,2))[0],ns=na[1],nl=c.useMemo(function(){return new Set(t4||no||[]);},[t4,no]),nu=c.useCallback(function(n){var r,i=er(n,Q.indexOf(n)),a=nl.has(i);a?(nl.delete(i),r=(0,ed.default)(nl)):r=[].concat((0,ed.default)(nl),[i]),ns(r),t7&&t7(!a,n),t9&&t9(r);},[er,nl,Q,t7,t9]),[t2,nr,nl,nt,nn,nu]),em=(0,M.default)(ep,6),ev=em[0],e_=em[1],ex=em[2],eS=em[3],eA=em[4],eO=em[5],eP=null==g?void 0:g.x,ek=c.useState(0),eI=(0,M.default)(ek,2),eL=eI[0],eD=eI[1],eV=(0,eb.default)((0,P.default)((0,P.default)((0,P.default)({},a),ev),{},{expandable:!!ev.expandedRowRender,columnTitle:ev.columnTitle,expandedKeys:ex,getRowKey:er,onTriggerExpand:eO,expandIcon:eS,expandIconColumnIndex:ev.expandIconColumnIndex,direction:_,scrollWidth:ee&&X&&"number"==typeof eP?eP:null,clientWidth:eL}),ee?G:null),eG=(0,M.default)(eV,4),eH=eG[0],eW=eG[1],eX=eG[2],eq=eG[3],e$=null!=eX?eX:eP,eY=c.useMemo(function(){return{columns:eH,flattenColumns:eW};},[eH,eW]),eZ=c.useRef(),eK=c.useRef(),eQ=c.useRef(),eJ=c.useRef();c.useImperativeHandle(r,function(){return{nativeElement:eZ.current,scrollTo:function(n){var r;if(eQ.current instanceof HTMLElement){var i=n.index,a=n.top,o=n.key;if((0,Z.validNumberValue)(a))null===(s=eQ.current)||void 0===s||s.scrollTo({top:a});else{var s,l,u=null!=o?o:er(Q[i]);null===(l=eQ.current.querySelector('[data-row-key="'.concat(u,'"]')))||void 0===l||l.scrollIntoView();}}else null!==(r=eQ.current)&&void 0!==r&&r.scrollTo&&eQ.current.scrollTo(n);}};});var e0=c.useRef(),e1=c.useState(!1),e2=(0,M.default)(e1,2),e3=e2[0],e4=e2[1],e5=c.useState(!1),e6=(0,M.default)(e5,2),e8=e6[0],e7=e6[1],e9=c.useState(new Map),te=(0,M.default)(e9,2),tt=te[0],tn=te[1],tr=(0,Z.getColumnsKey)(eW).map(function(n){return tt.get(n);}),ti=c.useMemo(function(){return tr;},[tr.join("_")]),ta=(0,c.useMemo)(function(){var n=eW.length,r=function(n,r,i){for(var a=[],o=0,s=n;s!==r;s+=i)a.push(o),eW[s].fixed&&(o+=ti[s]||0);return a;},i=r(0,n,1),a=r(n-1,-1,-1).reverse();return"rtl"===_?{left:a,right:i}:{left:i,right:a};},[ti,eW,_]),to=g&&(0,Z.validateValue)(g.y),ts=g&&(0,Z.validateValue)(e$)||!!ev.fixed,tl=ts&&eW.some(function(n){return n.fixed;}),tu=c.useRef(),tc=(nd=void 0===(nf=(nc="object"===(0,eE.default)($)?$:{}).offsetHeader)?0:nf,np=void 0===(nh=nc.offsetSummary)?0:nh,ng=void 0===(nm=nc.offsetScroll)?0:nm,ny=(void 0===(nv=nc.getContainer)?function(){return eM;}:nv)()||eM,n_=!!$,c.useMemo(function(){return{isSticky:n_,stickyClassName:n_?"".concat(o,"-sticky-holder"):"",offsetHeader:nd,offsetSummary:np,offsetScroll:ng,container:ny};},[n_,ng,nd,np,o,ny])),tf=tc.isSticky,td=tc.offsetHeader,th=tc.offsetSummary,tp=tc.offsetScroll,tm=tc.stickyClassName,tg=tc.container,tv=c.useMemo(function(){return null==E?void 0:E(Q);},[E,Q]),ty=(to||tf)&&c.isValidElement(tv)&&tv.type===w&&tv.props.fixed;to&&(nx={overflowY:J?"scroll":"auto",maxHeight:g.y}),ts&&(nb={overflowX:"auto"},to||(nx={overflowY:"hidden"}),nE={width:!0===e$?"auto":e$,minWidth:"100%"});var t_=c.useCallback(function(n,r){tn(function(i){if(i.get(n)!==r){var a=new Map(i);return a.set(n,r),a;}return i;});},[]),tb=function(n){var r=(0,c.useRef)(null),i=(0,c.useRef)();function a(){window.clearTimeout(i.current);}return(0,c.useEffect)(function(){return a;},[]),[function(n){r.current=n,a(),i.current=window.setTimeout(function(){r.current=null,i.current=void 0;},100);},function(){return r.current;}];}(0),tx=(0,M.default)(tb,2),tE=tx[0],tw=tx[1];function tS(n,r){r&&("function"==typeof r?r(n):r.scrollLeft!==n&&(r.scrollLeft=n,r.scrollLeft!==n&&setTimeout(function(){r.scrollLeft=n;},0)));}var tT=(0,z.default)(function(n){var r,i=n.currentTarget,a=n.scrollLeft,o="rtl"===_,s="number"==typeof a?a:i.scrollLeft,l=i||ez;tw()&&tw()!==l||(tE(l),tS(s,eK.current),tS(s,eQ.current),tS(s,e0.current),tS(s,null===(r=tu.current)||void 0===r?void 0:r.setScrollLeft));var u=i||eK.current;if(u){var c=ee&&X&&"number"==typeof e$?e$:u.scrollWidth,f=u.clientWidth;if(c===f){e4(!1),e7(!1);return;}o?(e4(-s<c-f),e7(-s>0)):(e4(s>0),e7(s<c-f));}}),tA=(0,z.default)(function(n){tT(n),null==j||j(n);}),tC=function(){if(ts&&eQ.current){var n;tT({currentTarget:(0,eN.getDOM)(eQ.current),scrollLeft:null===(n=eQ.current)||void 0===n?void 0:n.scrollLeft});}else e4(!1),e7(!1);},tO=c.useRef(!1);c.useEffect(function(){tO.current&&tC();},[ts,h,eH.length]),c.useEffect(function(){tO.current=!0;},[]);var tM=c.useState(0),tR=(0,M.default)(tM,2),tP=tR[0],tk=tR[1],tI=c.useState(!0),tL=(0,M.default)(tI,2),tN=tL[0],tD=tL[1];(0,en.default)(function(){X&&ee||(eQ.current instanceof Element?tk((0,B.getTargetScrollBarSize)(eQ.current).width):tk((0,B.getTargetScrollBarSize)(eJ.current).width)),tD((0,D.isStyleSupport)("position","sticky"));},[]),c.useEffect(function(){ee&&W&&(W.body.current=eQ.current);});var tF=c.useCallback(function(n){return c.createElement(c.Fragment,null,c.createElement(ey,n),"top"===ty&&c.createElement(S,n,tv));},[ty,tv]),tB=c.useCallback(function(n){return c.createElement(S,n,tv);},[tv]),tj=et(["table"],"table"),tz=c.useMemo(function(){return v||(tl?"max-content"===e$?"auto":"fixed":to||tf||eW.some(function(n){return n.ellipsis;})?"fixed":"auto");},[to,tl,eW,v,tf]),tU={colWidths:ti,columCount:eW.length,stickyOffsets:ta,onHeaderRow:F,fixHeader:to,scroll:g},tV=c.useMemo(function(){return J?null:"function"==typeof k?k():k;},[J,k]),tG=c.createElement(es,{data:Q,measureColumnWidth:to||ts||tf}),tH=c.createElement(ec,{colWidths:eW.map(function(n){return n.width;}),columns:eW}),tW=null!=T?c.createElement("caption",{className:"".concat(o,"-caption")},T):void 0,tX=(0,V.default)(a,{data:!0}),tq=(0,V.default)(a,{aria:!0});if(to||tf){"function"==typeof ei?(nS=ei(Q,{scrollbarSize:tP,ref:eQ,onScroll:tT}),tU.colWidths=eW.map(function(n,r){var i=n.width,a=r===eW.length-1?i-tP:i;return"number"!=typeof a||Number.isNaN(a)?0:a;})):nS=c.createElement("div",{style:(0,P.default)((0,P.default)({},nb),nx),onScroll:tA,ref:eQ,className:(0,I.default)("".concat(o,"-body"))},c.createElement(tj,(0,m.default)({style:(0,P.default)((0,P.default)({},nE),{},{tableLayout:tz})},tq),tW,tH,tG,!ty&&tv&&c.createElement(S,{stickyOffsets:ta,flattenColumns:eW},tv)));var t$,tY,tZ,tK,tQ,tJ,t0,t1,t2,t3,t4,t5,t6,t8,t7,t9,ne,nt,nn,nr,ni,na,no,ns,nl,nu,nc,nf,nd,nh,np,nm,ng,nv,ny,n_,nb,nx,nE,nw,nS,nT=(0,P.default)((0,P.default)((0,P.default)({noData:!Q.length,maxContentScroll:ts&&"max-content"===e$},tU),eY),{},{direction:_,stickyClassName:tm,onScroll:tT});nw=c.createElement(c.Fragment,null,!1!==O&&c.createElement(eg,(0,m.default)({},nT,{stickyTopOffset:td,className:"".concat(o,"-header"),ref:eK}),tF),nS,ty&&"top"!==ty&&c.createElement(eg,(0,m.default)({},nT,{stickyBottomOffset:th,className:"".concat(o,"-summary"),ref:e0}),tB),tf&&eQ.current&&eQ.current instanceof Element&&c.createElement(eF,{ref:tu,offsetScroll:tp,scrollBodyRef:eQ,onScroll:tT,container:tg,direction:_}));}else nw=c.createElement("div",{style:(0,P.default)((0,P.default)({},nb),nx),className:(0,I.default)("".concat(o,"-content")),onScroll:tT,ref:eQ},c.createElement(tj,(0,m.default)({style:(0,P.default)((0,P.default)({},nE),{},{tableLayout:tz})},tq),tW,tH,!1!==O&&c.createElement(ey,(0,m.default)({},tU,eY)),tG,tv&&c.createElement(S,{stickyOffsets:ta,flattenColumns:eW},tv)));var nA=c.createElement("div",(0,m.default)({className:(0,I.default)(o,l,(0,C.default)((0,C.default)((0,C.default)((0,C.default)((0,C.default)((0,C.default)((0,C.default)((0,C.default)((0,C.default)((0,C.default)({},"".concat(o,"-rtl"),"rtl"===_),"".concat(o,"-ping-left"),e3),"".concat(o,"-ping-right"),e8),"".concat(o,"-layout-fixed"),"fixed"===v),"".concat(o,"-fixed-header"),to),"".concat(o,"-fixed-column"),tl),"".concat(o,"-fixed-column-gapped"),tl&&eq),"".concat(o,"-scroll-horizontal"),ts),"".concat(o,"-has-fix-left"),eW[0]&&eW[0].fixed),"".concat(o,"-has-fix-right"),eW[eW.length-1]&&"right"===eW[eW.length-1].fixed)),style:f,id:A,ref:eZ},tX),b&&c.createElement(eR,{className:"".concat(o,"-title")},b(Q)),c.createElement("div",{ref:eJ,className:"".concat(o,"-container")},nw),x&&c.createElement(eR,{className:"".concat(o,"-footer")},x(Q)));ts&&(nA=c.createElement(N.default,{onResize:function(n){var r,i=n.width;null===(r=tu.current)||void 0===r||r.checkScrollBarVisible();var a=eZ.current?eZ.current.offsetWidth:i;ee&&q&&eZ.current&&(a=q(eZ.current,a)||a),a!==eL&&(tC(),eD(a));}},nA));var nC=(i=eW.map(function(n,r){return(0,y.getCellFixedInfo)(r,r,eW,ta,_);}),(0,eT.default)(function(){return i;},[i],function(n,r){return!(0,eC.default)(n,r);})),nO=c.useMemo(function(){return{scrollX:e$,prefixCls:o,getComponent:et,scrollbarSize:tP,direction:_,fixedInfoList:nC,isSticky:tf,supportSticky:tN,componentWidth:eL,fixHeader:to,fixColumn:tl,horizonScroll:ts,tableLayout:tz,rowClassName:u,expandedRowClassName:ev.expandedRowClassName,expandIcon:eS,expandableType:e_,expandRowByClick:ev.expandRowByClick,expandedRowRender:ev.expandedRowRender,expandedRowOffset:ev.expandedRowOffset,onTriggerExpand:eO,expandIconColumnIndex:ev.expandIconColumnIndex,indentSize:ev.indentSize,allColumnsFixedLeft:eW.every(function(n){return"left"===n.fixed;}),emptyNode:tV,columns:eH,flattenColumns:eW,onColumnResize:t_,colWidths:ti,hoverStartRow:eu,hoverEndRow:ef,onHover:eh,rowExpandable:ev.rowExpandable,onRow:L,getRowKey:er,expandedKeys:ex,childrenColumnName:eA,rowHoverable:K};},[e$,o,et,tP,_,nC,tf,tN,eL,to,tl,ts,tz,u,ev.expandedRowClassName,eS,e_,ev.expandRowByClick,ev.expandedRowRender,ev.expandedRowOffset,eO,ev.expandIconColumnIndex,ev.indentSize,tV,eH,eW,t_,ti,eu,ef,eh,ev.rowExpandable,L,er,ex,eA,K]);return c.createElement(d.default.Provider,{value:nO},nA);});function eG(n){return(0,d.makeImmutable)(eV,n);}var eH=eG();eH.EXPAND_COLUMN=s.EXPAND_COLUMN,eH.INTERNAL_HOOKS=s.INTERNAL_HOOKS,eH.Column=function(n){return null;},eH.ColumnGroup=function(n){return null;},eH.Summary=T;var eW=i("e313b0e4"),eX=i("b0590fda"),eq=a._(eX),e$=i("bf8df361"),eY=a._(e$),eZ=(0,l.createContext)(null),eK=(0,l.createContext)(null);function eQ(n){var r,i=n.rowInfo,a=n.column,o=n.colIndex,s=n.indent,u=n.index,f=n.component,d=n.renderIndex,h=n.record,p=n.style,g=n.className,y=n.inverse,_=n.getHeight,b=a.render,x=a.dataIndex,E=a.className,w=a.width,S=(0,l.useContext)(eK,["columnsOffset"]).columnsOffset,T=(0,Q.getCellProps)(i,a,o,s,u),A=T.key,C=T.fixedInfo,O=T.appendCellNode,M=T.additionalCellProps,R=M.style,k=M.colSpan,L=void 0===k?1:k,N=M.rowSpan,D=void 0===N?1:N,F=S[(r=o-1)+(L||1)]-(S[r]||0),B=(0,P.default)((0,P.default)((0,P.default)({},R),p),{},{flex:"0 0 ".concat(F,"px"),width:"".concat(F,"px"),marginRight:L>1?w-F:0,pointerEvents:"auto"}),j=c.useMemo(function(){return y?D<=1:0===L||0===D||D>1;},[D,L,y]);j?B.visibility="hidden":y&&(B.height=null==_?void 0:_(D));var z={};return(0===D||0===L)&&(z.rowSpan=1,z.colSpan=1),c.createElement(v.default,(0,m.default)({className:(0,I.default)(E,g),ellipsis:a.ellipsis,align:a.align,scope:a.rowScope,component:f,prefixCls:i.prefixCls,key:A,record:h,index:u,renderIndex:d,dataIndex:x,render:j?function(){return null;}:b,shouldCellUpdate:a.shouldCellUpdate},C,{appendNode:O,additionalProps:(0,P.default)((0,P.default)({},M),{},{style:B},z)}));}var eJ=["data","index","className","rowKey","style","extra","getHeight"],e0=c.forwardRef(function(n,r){var i,a=n.data,o=n.index,s=n.className,u=n.rowKey,f=n.style,h=n.extra,p=n.getHeight,g=(0,x.default)(n,eJ),y=a.record,_=a.indent,b=a.index,E=(0,l.useContext)(d.default,["prefixCls","flattenColumns","fixColumn","componentWidth","scrollX"]),w=E.scrollX,S=E.flattenColumns,T=E.prefixCls,A=E.fixColumn,O=E.componentWidth,M=(0,l.useContext)(eZ,["getComponent"]).getComponent,R=(0,eY.default)(y,u,o,_),k=M(["body","row"],"div"),L=M(["body","cell"],"div"),N=R.rowSupportExpand,D=R.expanded,F=R.rowProps,B=R.expandedRowRender,j=R.expandedRowClassName;if(N&&D){var z=B(y,o,_+1,D),U=(0,ew.computedExpandedClassName)(j,y,o,_),V={};A&&(V={style:(0,C.default)({},"--virtual-width","".concat(O,"px"))});var G="".concat(T,"-expanded-row-cell");i=c.createElement(k,{className:(0,I.default)("".concat(T,"-expanded-row"),"".concat(T,"-expanded-row-level-").concat(_+1),U)},c.createElement(v.default,{component:L,prefixCls:T,className:(0,I.default)(G,(0,C.default)({},"".concat(G,"-fixed"),A)),additionalProps:V},z));}var H=(0,P.default)((0,P.default)({},f),{},{width:w});h&&(H.position="absolute",H.pointerEvents="none");var W=c.createElement(k,(0,m.default)({},F,g,{"data-row-key":u,ref:N?null:r,className:(0,I.default)(s,"".concat(T,"-row"),null==F?void 0:F.className,(0,C.default)({},"".concat(T,"-row-extra"),h)),style:(0,P.default)((0,P.default)({},H),null==F?void 0:F.style)}),S.map(function(n,r){return c.createElement(eQ,{key:r,component:L,rowInfo:R,column:n,colIndex:r,indent:_,index:o,renderIndex:b,record:y,inverse:h,getHeight:p});}));return N?c.createElement("div",{ref:r},W,i):W;}),e1=(0,d.responseImmutable)(e0),e2=c.forwardRef(function(n,r){var i=n.data,a=n.onScroll,o=(0,l.useContext)(d.default,["flattenColumns","onColumnResize","getRowKey","prefixCls","expandedKeys","childrenColumnName","scrollX","direction"]),s=o.flattenColumns,u=o.onColumnResize,f=o.getRowKey,h=o.expandedKeys,p=o.prefixCls,m=o.childrenColumnName,g=o.scrollX,v=o.direction,y=(0,l.useContext)(eZ),_=y.sticky,b=y.scrollY,x=y.listItemHeight,E=y.getComponent,w=y.onScroll,S=c.useRef(),T=(0,Y.default)(i,m,h,f),A=c.useMemo(function(){var n=0;return s.map(function(r){var i=r.width,a=r.key;return n+=i,[a,i,n];});},[s]),C=c.useMemo(function(){return A.map(function(n){return n[2];});},[A]);c.useEffect(function(){A.forEach(function(n){var r=(0,M.default)(n,2);u(r[0],r[1]);});},[A]),c.useImperativeHandle(r,function(){var n,r={scrollTo:function(n){var r;null===(r=S.current)||void 0===r||r.scrollTo(n);},nativeElement:null===(n=S.current)||void 0===n?void 0:n.nativeElement};return Object.defineProperty(r,"scrollLeft",{get:function(){var n;return(null===(n=S.current)||void 0===n?void 0:n.getScrollInfo().x)||0;},set:function(n){var r;null===(r=S.current)||void 0===r||r.scrollTo({left:n});}}),r;});var O=function(n,r){var i=null===(o=T[r])||void 0===o?void 0:o.record,a=n.onCell;if(a){var o,s,l=a(i,r);return null!==(s=null==l?void 0:l.rowSpan)&&void 0!==s?s:1;}return 1;},R=c.useMemo(function(){return{columnsOffset:C};},[C]),P="".concat(p,"-tbody"),k=E(["body","wrapper"]),I={};return _&&(I.position="sticky",I.bottom=0,"object"===(0,eE.default)(_)&&_.offsetScroll&&(I.bottom=_.offsetScroll)),c.createElement(eK.Provider,{value:R},c.createElement(eq.default,{fullHeight:!1,ref:S,prefixCls:"".concat(P,"-virtual"),styles:{horizontalScrollBar:I},className:P,height:b,itemHeight:x||24,data:T,itemKey:function(n){return f(n.record);},component:k,scrollWidth:g,direction:v,onVirtualScroll:function(n){var r,i=n.x;a({currentTarget:null===(r=S.current)||void 0===r?void 0:r.nativeElement,scrollLeft:i});},onScroll:w,extraRender:function(n){var r=n.start,i=n.end,a=n.getSize,o=n.offsetY;if(i<0)return null;for(var l=s.filter(function(n){return 0===O(n,r);}),u=r,d=function(n){if(!(l=l.filter(function(r){return 0===O(r,n);})).length)return u=n,1;},h=r;h>=0&&!d(h);h-=1);for(var p=s.filter(function(n){return 1!==O(n,i);}),m=i,g=function(n){if(!(p=p.filter(function(r){return 1!==O(r,n);})).length)return m=Math.max(n-1,i),1;},v=i;v<T.length&&!g(v);v+=1);for(var y=[],_=function(n){if(!T[n])return 1;s.some(function(r){return O(r,n)>1;})&&y.push(n);},b=u;b<=m;b+=1)if(_(b))continue;return y.map(function(n){var r=T[n],i=f(r.record,n),s=a(i);return c.createElement(e1,{key:n,data:r,rowKey:i,index:n,style:{top:-o+s.top},extra:!0,getHeight:function(r){var o=n+r-1,s=a(i,f(T[o].record,o));return s.bottom-s.top;}});});}},function(n,r,i){var a=f(n.record,r);return c.createElement(e1,{data:n,rowKey:a,index:r,style:i.style});}));}),e3=(0,d.responseImmutable)(e2),e4=function(n,r){var i=r.ref,a=r.onScroll;return c.createElement(e3,{ref:i,data:n,onScroll:a});},e5=c.forwardRef(function(n,r){var i=n.data,a=n.columns,o=n.scroll,l=n.sticky,u=n.prefixCls,f=void 0===u?eB:u,d=n.className,h=n.listItemHeight,p=n.components,g=n.onScroll,v=o||{},y=v.x,_=v.y;"number"!=typeof y&&(y=1),"number"!=typeof _&&(_=500);var b=(0,eW.useEvent)(function(n,r){return(0,H.default)(p,n)||r;}),x=(0,eW.useEvent)(g),E=c.useMemo(function(){return{sticky:l,scrollY:_,listItemHeight:h,getComponent:b,onScroll:x};},[l,_,h,b,x]);return c.createElement(eZ.Provider,{value:E},c.createElement(eH,(0,m.default)({},n,{className:(0,I.default)(d,"".concat(f,"-virtual")),scroll:(0,P.default)((0,P.default)({},o),{},{x:y}),components:(0,P.default)((0,P.default)({},p),{},{body:null!=i&&i.length?e4:void 0}),columns:a,internalHooks:s.INTERNAL_HOOKS,tailor:!0,ref:r})));});function e6(n){return(0,d.makeImmutable)(e5,n);}},"99b35fdd":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return d;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("1d1b11bd"),l=o._(i("97f96ff9")),u=a._(i("f2763889")),c=i("6416e5f7");function f(n){return Math.sqrt(n.value);}function d(){var n=null,r=1,i=1,a=l.constantZero;function o(o){let s=(0,u.default)();return o.x=r/2,o.y=i/2,n?o.eachBefore(h(n)).eachAfter(p(a,.5,s)).eachBefore(m(1)):o.eachBefore(h(f)).eachAfter(p(l.constantZero,1,s)).eachAfter(p(a,o.r/Math.min(r,i),s)).eachBefore(m(Math.min(r,i)/(2*o.r))),o;}return o.radius=function(r){return arguments.length?(n=(0,s.optional)(r),o):n;},o.size=function(n){return arguments.length?(r=+n[0],i=+n[1],o):[r,i];},o.padding=function(n){return arguments.length?(a="function"==typeof n?n:(0,l.default)(+n),o):a;},o;}function h(n){return function(r){r.children||(r.r=Math.max(0,+n(r)||0));};}function p(n,r,i){return function(a){if(o=a.children){var o,s,l,u=o.length,f=n(a)*r||0;if(f)for(s=0;s<u;++s)o[s].r+=f;if(l=(0,c.packSiblingsRandom)(o,i),f)for(s=0;s<u;++s)o[s].r-=f;a.r=l+f;}};}function m(n){return function(r){var i=r.parent;r.r*=n,i&&(r.x=i.x+n*r.x,r.y=i.y+n*r.y);};}},"99e31455":function(n,r,i){var a,o;a=this,o=function(){"use strict";var n,r,i;function a(a,o){if(n){if(r){var s="var sharedChunk = {}; ("+n+")(sharedChunk); ("+r+")(sharedChunk);",l={};n(l),i=o(l),"undefined"!=typeof window&&(i.workerUrl=window.URL.createObjectURL(new Blob([s],{type:"text/javascript"})));}else r=o;}else n=o;}return a(["exports"],function(n){function r(n,r){return n(r={exports:{}},r.exports),r.exports;}function i(n,r,i,a){this.cx=3*n,this.bx=3*(i-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(a-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=a,this.p2x=i,this.p2y=a;}function a(n,r){this.x=n,this.y=r;}i.prototype.sampleCurveX=function(n){return((this.ax*n+this.bx)*n+this.cx)*n;},i.prototype.sampleCurveY=function(n){return((this.ay*n+this.by)*n+this.cy)*n;},i.prototype.sampleCurveDerivativeX=function(n){return(3*this.ax*n+2*this.bx)*n+this.cx;},i.prototype.solveCurveX=function(n,r){var i,a,o,s,l;for(void 0===r&&(r=1e-6),o=n,l=0;l<8;l++){if(Math.abs(s=this.sampleCurveX(o)-n)<r)return o;var u=this.sampleCurveDerivativeX(o);if(1e-6>Math.abs(u))break;o-=s/u;}if((o=n)<(i=0))return i;if(o>(a=1))return a;for(;i<a&&!(Math.abs((s=this.sampleCurveX(o))-n)<r);)n>s?i=o:a=o,o=.5*(a-i)+i;return o;},i.prototype.solve=function(n,r){return this.sampleCurveY(this.solveCurveX(n,r));},a.prototype={clone:function(){return new a(this.x,this.y);},add:function(n){return this.clone()._add(n);},sub:function(n){return this.clone()._sub(n);},multByPoint:function(n){return this.clone()._multByPoint(n);},divByPoint:function(n){return this.clone()._divByPoint(n);},mult:function(n){return this.clone()._mult(n);},div:function(n){return this.clone()._div(n);},rotate:function(n){return this.clone()._rotate(n);},rotateAround:function(n,r){return this.clone()._rotateAround(n,r);},matMult:function(n){return this.clone()._matMult(n);},unit:function(){return this.clone()._unit();},perp:function(){return this.clone()._perp();},round:function(){return this.clone()._round();},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y);},equals:function(n){return this.x===n.x&&this.y===n.y;},dist:function(n){return Math.sqrt(this.distSqr(n));},distSqr:function(n){var r=n.x-this.x,i=n.y-this.y;return r*r+i*i;},angle:function(){return Math.atan2(this.y,this.x);},angleTo:function(n){return Math.atan2(this.y-n.y,this.x-n.x);},angleWith:function(n){return this.angleWithSep(n.x,n.y);},angleWithSep:function(n,r){return Math.atan2(this.x*r-this.y*n,this.x*n+this.y*r);},_matMult:function(n){var r=n[2]*this.x+n[3]*this.y;return this.x=n[0]*this.x+n[1]*this.y,this.y=r,this;},_add:function(n){return this.x+=n.x,this.y+=n.y,this;},_sub:function(n){return this.x-=n.x,this.y-=n.y,this;},_mult:function(n){return this.x*=n,this.y*=n,this;},_div:function(n){return this.x/=n,this.y/=n,this;},_multByPoint:function(n){return this.x*=n.x,this.y*=n.y,this;},_divByPoint:function(n){return this.x/=n.x,this.y/=n.y,this;},_unit:function(){return this._div(this.mag()),this;},_perp:function(){var n=this.y;return this.y=this.x,this.x=-n,this;},_rotate:function(n){var r=Math.cos(n),i=Math.sin(n),a=i*this.x+r*this.y;return this.x=r*this.x-i*this.y,this.y=a,this;},_rotateAround:function(n,r){var i=Math.cos(n),a=Math.sin(n),o=r.y+a*(this.x-r.x)+i*(this.y-r.y);return this.x=r.x+i*(this.x-r.x)-a*(this.y-r.y),this.y=o,this;},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this;}},a.convert=function(n){return n instanceof a?n:Array.isArray(n)?new a(n[0],n[1]):n;};var o,s,l,u="undefined"!=typeof self?self:{};function c(n,r,a,o){var s=new i(n,r,a,o);return function(n){return s.solve(n);};}var f=c(.25,.1,.25,1);function d(n,r,i){return Math.min(i,Math.max(r,n));}function h(n,r,i){var a=i-r,o=((n-r)%a+a)%a+r;return o===r?i:o;}function p(n){for(var r=[],i=arguments.length-1;i-- >0;)r[i]=arguments[i+1];for(var a=0;a<r.length;a+=1){var o=r[a];for(var s in o)n[s]=o[s];}return n;}var m=1;function g(){return m++;}function v(){return function n(r){return r?(r^16*Math.random()>>r/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,n);}();}function y(n){return!!n&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(n);}function _(n,r){n.forEach(function(n){r[n]&&(r[n]=r[n].bind(r));});}function b(n,r){return -1!==n.indexOf(r,n.length-r.length);}function x(n,r,i){var a={};for(var o in n)a[o]=r.call(i||this,n[o],o,n);return a;}function E(n,r,i){var a={};for(var o in n)r.call(i||this,n[o],o,n)&&(a[o]=n[o]);return a;}function w(n){return Array.isArray(n)?n.map(w):"object"==typeof n&&n?x(n,w):n;}var S={};function T(n){S[n]||("undefined"!=typeof console&&console.warn(n),S[n]=!0);}function A(n,r,i){return(i.y-n.y)*(r.x-n.x)>(r.y-n.y)*(i.x-n.x);}function C(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope;}function O(n){var r={};if(n.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(n,i,a,o){var s=a||o;return r[i]=!s||s.toLowerCase(),"";}),r["max-age"]){var i=parseInt(r["max-age"],10);isNaN(i)?delete r["max-age"]:r["max-age"]=i;}return r;}var M=null;function R(n){if(null==M){var r=n.navigator?n.navigator.userAgent:null;M=!!n.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")));}return M;}function P(n){try{var r=u[n];return r.setItem("_mapbox_test_",1),r.removeItem("_mapbox_test_"),!0;}catch(n){return!1;}}var k,I,L,N,D=u.performance&&u.performance.now?u.performance.now.bind(u.performance):Date.now.bind(Date),F=u.requestAnimationFrame||u.mozRequestAnimationFrame||u.webkitRequestAnimationFrame||u.msRequestAnimationFrame,B=u.cancelAnimationFrame||u.mozCancelAnimationFrame||u.webkitCancelAnimationFrame||u.msCancelAnimationFrame,j={now:D,frame:function(n){var r=F(n);return{cancel:function(){return B(r);}};},getImageData:function(n,r){void 0===r&&(r=0);var i=u.document.createElement("canvas"),a=i.getContext("2d");if(!a)throw Error("failed to create canvas 2d context");return i.width=n.width,i.height=n.height,a.drawImage(n,0,0,n.width,n.height),a.getImageData(-r,-r,n.width+2*r,n.height+2*r);},resolveURL:function(n){return k||(k=u.document.createElement("a")),k.href=n,k.href;},hardwareConcurrency:u.navigator&&u.navigator.hardwareConcurrency||4,get devicePixelRatio(){return u.devicePixelRatio;},get prefersReducedMotion(){return!!u.matchMedia&&(null==I&&(I=u.matchMedia("(prefers-reduced-motion: reduce)")),I.matches);}},z={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null;},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},U={supported:!1,testSupport:function(n){!V&&N&&(G?H(n):L=n);}},V=!1,G=!1;function H(n){var r=n.createTexture();n.bindTexture(n.TEXTURE_2D,r);try{if(n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,N),n.isContextLost())return;U.supported=!0;}catch(n){}n.deleteTexture(r),V=!0;}u.document&&((N=u.document.createElement("img")).onload=function(){L&&H(L),L=null,G=!0;},N.onerror=function(){V=!0,L=null;},N.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var W=function(n,r){this._transformRequestFn=n,this._customAccessToken=r,this._createSkuToken();};function X(n){return 0===n.indexOf("mapbox:");}W.prototype._createSkuToken=function(){var n=function(){for(var n="",r=0;r<10;r++)n+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1","01",n].join(""),tokenExpiresAt:Date.now()+432e5};}();this._skuToken=n.token,this._skuTokenExpiresAt=n.tokenExpiresAt;},W.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt;},W.prototype.transformRequest=function(n,r){return this._transformRequestFn&&this._transformRequestFn(n,r)||{url:n};},W.prototype.normalizeStyleURL=function(n,r){if(!X(n))return n;var i=Z(n);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||r);},W.prototype.normalizeGlyphsURL=function(n,r){if(!X(n))return n;var i=Z(n);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||r);},W.prototype.normalizeSourceURL=function(n,r){if(!X(n))return n;var i=Z(n);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||r);},W.prototype.normalizeSpriteURL=function(n,r,i,a){var o=Z(n);return X(n)?(o.path="/styles/v1"+o.path+"/sprite"+r+i,this._makeAPIURL(o,this._customAccessToken||a)):(o.path+=""+r+i,K(o));},W.prototype.normalizeTileURL=function(n,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),n&&!X(n))return n;var i=Z(n);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,(j.devicePixelRatio>=2||512===r?"@2x":"")+(U.supported?".webp":"$1")),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path;var a=this._customAccessToken||function(n){for(var r=0;r<n.length;r+=1){var i=n[r].match(/^access_token=(.*)$/);if(i)return i[1];}return null;}(i.params)||z.ACCESS_TOKEN;return z.REQUIRE_ACCESS_TOKEN&&a&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,a);},W.prototype.canonicalizeTileURL=function(n,r){var i=Z(n);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return n;var a="mapbox://tiles/";a+=i.path.replace("/v4/","");var o=i.params;return r&&(o=o.filter(function(n){return!n.match(/^access_token=/);})),o.length&&(a+="?"+o.join("&")),a;},W.prototype.canonicalizeTileset=function(n,r){for(var i=!!r&&X(r),a=[],o=0,s=n.tiles||[];o<s.length;o+=1){var l=s[o];$(l)?a.push(this.canonicalizeTileURL(l,i)):a.push(l);}return a;},W.prototype._makeAPIURL=function(n,r){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",a=Z(z.API_URL);if(n.protocol=a.protocol,n.authority=a.authority,"http"===n.protocol){var o=n.params.indexOf("secure");o>=0&&n.params.splice(o,1);}if("/"!==a.path&&(n.path=""+a.path+n.path),!z.REQUIRE_ACCESS_TOKEN)return K(n);if(!(r=r||z.ACCESS_TOKEN))throw Error("An API access token is required to use Mapbox GL. "+i);if("s"===r[0])throw Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return n.params=n.params.filter(function(n){return -1===n.indexOf("access_token");}),n.params.push("access_token="+r),K(n);};var q=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function $(n){return q.test(n);}var Y=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Z(n){var r=n.match(Y);if(!r)throw Error("Unable to parse URL object");return{protocol:r[1],authority:r[2],path:r[3]||"/",params:r[4]?r[4].split("&"):[]};}function K(n){var r=n.params.length?"?"+n.params.join("&"):"";return n.protocol+"://"+n.authority+n.path+r;}function Q(n){if(!n)return null;var r=n.split(".");if(!r||3!==r.length)return null;try{return JSON.parse(decodeURIComponent(u.atob(r[1]).split("").map(function(n){return"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2);}).join("")));}catch(n){return null;}}var J=function(n){this.type=n,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null;};J.prototype.getStorageKey=function(n){var r,i=Q(z.ACCESS_TOKEN);return r=i&&i.u?u.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,function(n,r){return String.fromCharCode(Number("0x"+r));})):z.ACCESS_TOKEN||"",n?"mapbox.eventData."+n+":"+r:"mapbox.eventData:"+r;},J.prototype.fetchEventData=function(){var n=P("localStorage"),r=this.getStorageKey(),i=this.getStorageKey("uuid");if(n)try{var a=u.localStorage.getItem(r);a&&(this.eventData=JSON.parse(a));var o=u.localStorage.getItem(i);o&&(this.anonId=o);}catch(n){T("Unable to read from LocalStorage");}},J.prototype.saveEventData=function(){var n=P("localStorage"),r=this.getStorageKey(),i=this.getStorageKey("uuid");if(n)try{u.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&u.localStorage.setItem(r,JSON.stringify(this.eventData));}catch(n){T("Unable to write to LocalStorage");}},J.prototype.processRequests=function(n){},J.prototype.postEvent=function(n,r,i,a){var o=this;if(z.EVENTS_URL){var s=Z(z.EVENTS_URL);s.params.push("access_token="+(a||z.ACCESS_TOKEN||""));var l={event:this.type,created:new Date(n).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:"01",userId:this.anonId},u=r?p(l,r):l,c={url:K(s),headers:{"Content-Type":"text/plain"},body:JSON.stringify([u])};this.pendingRequest=ex(c,function(n){o.pendingRequest=null,i(n),o.saveEventData(),o.processRequests(a);});}},J.prototype.queueRequest=function(n,r){this.queue.push(n),this.processRequests(r);};var ee,et,en=function(n){function r(){n.call(this,"map.load"),this.success={},this.skuToken="";}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.postMapLoadEvent=function(n,r,i,a){this.skuToken=i;var o=!(!a&&!z.ACCESS_TOKEN),s=Array.isArray(n)&&n.some(function(n){return X(n)||$(n);});z.EVENTS_URL&&o&&s&&this.queueRequest({id:r,timestamp:Date.now()},a);},r.prototype.processRequests=function(n){var r=this;if(!this.pendingRequest&&0!==this.queue.length){var i=this.queue.shift(),a=i.id,o=i.timestamp;a&&this.success[a]||(this.anonId||this.fetchEventData(),y(this.anonId)||(this.anonId=v()),this.postEvent(o,{skuToken:this.skuToken},function(n){n||a&&(r.success[a]=!0);},n));}},r;}(J),er=new(function(n){function r(r){n.call(this,"appUserTurnstile"),this._customAccessToken=r;}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.postTurnstileEvent=function(n,r){z.EVENTS_URL&&z.ACCESS_TOKEN&&Array.isArray(n)&&n.some(function(n){return X(n)||$(n);})&&this.queueRequest(Date.now(),r);},r.prototype.processRequests=function(n){var r=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var i=Q(z.ACCESS_TOKEN),a=i?i.u:z.ACCESS_TOKEN,o=a!==this.eventData.tokenU;y(this.anonId)||(this.anonId=v(),o=!0);var s=this.queue.shift();if(this.eventData.lastSuccess){var l=new Date(this.eventData.lastSuccess),u=new Date(s),c=(s-this.eventData.lastSuccess)/864e5;o=o||c>=1||c<-1||l.getDate()!==u.getDate();}else o=!0;if(!o)return this.processRequests();this.postEvent(s,{"enabled.telemetry":!1},function(n){n||(r.eventData.lastSuccess=s,r.eventData.tokenU=a);},n);}},r;}(J)),ei=er.postTurnstileEvent.bind(er),ea=new en,eo=ea.postMapLoadEvent.bind(ea),es=500,el=50;function eu(){u.caches&&!ee&&(ee=u.caches.open("mapbox-tiles"));}function ec(n){var r=n.indexOf("?");return r<0?n:n.slice(0,r);}var ef,ed=1/0;function eh(){return null==ef&&(ef=u.OffscreenCanvas&&new u.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof u.createImageBitmap),ef;}var ep={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(ep);var em,eg,ev=function(n){function r(r,i,a){401===i&&$(a)&&(r+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),n.call(this,r),this.status=i,this.url=a,this.name=this.constructor.name,this.message=r;}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url;},r;}(Error),ey=C()?function(){return self.worker&&self.worker.referrer;}:function(){return("blob:"===u.location.protocol?u.parent:u).location.href;},e_=function(n,r){var i,a,o,s,l,c,f,d,h;if(!(/^file:/.test(i=n.url)||/^file:/.test(ey())&&!/^\w+:/.test(i))){if(u.fetch&&u.Request&&u.AbortController&&u.Request.prototype.hasOwnProperty("signal"))return o=new u.AbortController,s=new u.Request(n.url,{method:n.method||"GET",body:n.body,credentials:n.credentials,headers:n.headers,referrer:ey(),signal:o.signal}),l=!1,c=!1,f=(a=s.url).indexOf("sku=")>0&&$(a),"json"===n.type&&s.headers.set("Accept","application/json"),d=function(i,a,o){if(!c){if(i&&"SecurityError"!==i.message&&T(i),a&&o)return h(a);var l=Date.now();u.fetch(s).then(function(i){if(i.ok){var a=f?i.clone():null;return h(i,a,l);}return r(new ev(i.statusText,i.status,n.url));}).catch(function(n){20!==n.code&&r(Error(n.message));});}},h=function(i,a,o){("arrayBuffer"===n.type?i.arrayBuffer():"json"===n.type?i.json():i.text()).then(function(n){c||(a&&o&&function(n,r,i){if(eu(),ee){var a={status:r.status,statusText:r.statusText,headers:new u.Headers};r.headers.forEach(function(n,r){return a.headers.set(r,n);});var o=O(r.headers.get("Cache-Control")||"");o["no-store"]||(o["max-age"]&&a.headers.set("Expires",new Date(i+1e3*o["max-age"]).toUTCString()),new Date(a.headers.get("Expires")).getTime()-i<42e4||function(n,r){if(void 0===et)try{new Response(new ReadableStream),et=!0;}catch(n){et=!1;}et?r(n.body):n.blob().then(r);}(r,function(r){var i=new u.Response(r,a);eu(),ee&&ee.then(function(r){return r.put(ec(n.url),i);}).catch(function(n){return T(n.message);});}));}}(s,a,o),l=!0,r(null,n,i.headers.get("Cache-Control"),i.headers.get("Expires")));}).catch(function(n){c||r(Error(n.message));});},f?function(n,r){if(eu(),!ee)return r(null);var i=ec(n.url);ee.then(function(n){n.match(i).then(function(a){var o=function(n){if(!n)return!1;var r=new Date(n.headers.get("Expires")||0),i=O(n.headers.get("Cache-Control")||"");return r>Date.now()&&!i["no-cache"];}(a);n.delete(i),o&&n.put(i,a.clone()),r(null,a,o);}).catch(r);}).catch(r);}(s,d):d(null,null),{cancel:function(){c=!0,l||o.abort();}};if(C()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",n,r,void 0,!0);}return function(n,r){var i=new u.XMLHttpRequest;for(var a in i.open(n.method||"GET",n.url,!0),"arrayBuffer"===n.type&&(i.responseType="arraybuffer"),n.headers)i.setRequestHeader(a,n.headers[a]);return"json"===n.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===n.credentials,i.onerror=function(){r(Error(i.statusText));},i.onload=function(){if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){var a=i.response;if("json"===n.type)try{a=JSON.parse(i.response);}catch(n){return r(n);}r(null,a,i.getResponseHeader("Cache-Control"),i.getResponseHeader("Expires"));}else r(new ev(i.statusText,i.status,n.url));},i.send(n.body),{cancel:function(){return i.abort();}};}(n,r);},eb=function(n,r){return e_(p(n,{type:"arrayBuffer"}),r);},ex=function(n,r){return e_(p(n,{method:"POST"}),r);},eE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";em=[],eg=0;var ew=function(n,r){if(U.supported&&(n.headers||(n.headers={}),n.headers.accept="image/webp,*/*"),eg>=z.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:n,callback:r,cancelled:!1,cancel:function(){this.cancelled=!0;}};return em.push(i),i;}eg++;var a=!1,o=function(){if(!a)for(a=!0,eg--;em.length&&eg<z.MAX_PARALLEL_IMAGE_REQUESTS;){var n=em.shift();n.cancelled||(n.cancel=ew(n.requestParameters,n.callback).cancel);}},s=eb(n,function(n,i,a,s){var l,c,f;o(),n?r(n):i&&(eh()?function(n,r){var i=new u.Blob([new Uint8Array(n)],{type:"image/png"});u.createImageBitmap(i).then(function(n){r(null,n);}).catch(function(n){r(Error("Could not load image because of "+n.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));});}(i,r):(l=new u.Image,c=u.URL,l.onload=function(){r(null,l),c.revokeObjectURL(l.src),l.onload=null,u.requestAnimationFrame(function(){l.src=eE;});},l.onerror=function(){return r(Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));},f=new u.Blob([new Uint8Array(i)],{type:"image/png"}),l.cacheControl=a,l.expires=s,l.src=i.byteLength?c.createObjectURL(f):eE));});return{cancel:function(){s.cancel(),o();}};};function eS(n,r,i){i[n]&&-1!==i[n].indexOf(r)||(i[n]=i[n]||[],i[n].push(r));}function eT(n,r,i){if(i&&i[n]){var a=i[n].indexOf(r);-1!==a&&i[n].splice(a,1);}}var eA=function(n,r){void 0===r&&(r={}),p(this,r),this.type=n;},eC=function(n){function r(r,i){void 0===i&&(i={}),n.call(this,"error",p({error:r},i));}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r;}(eA),eO=function(){};eO.prototype.on=function(n,r){return this._listeners=this._listeners||{},eS(n,r,this._listeners),this;},eO.prototype.off=function(n,r){return eT(n,r,this._listeners),eT(n,r,this._oneTimeListeners),this;},eO.prototype.once=function(n,r){return this._oneTimeListeners=this._oneTimeListeners||{},eS(n,r,this._oneTimeListeners),this;},eO.prototype.fire=function(n,r){"string"==typeof n&&(n=new eA(n,r||{}));var i=n.type;if(this.listens(i)){n.target=this;for(var a=0,o=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];a<o.length;a+=1)o[a].call(this,n);for(var s=0,l=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];s<l.length;s+=1){var u=l[s];eT(i,u,this._oneTimeListeners),u.call(this,n);}var c=this._eventedParent;c&&(p(n,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),c.fire(n));}else n instanceof eC&&console.error(n.error);return this;},eO.prototype.listens=function(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n);},eO.prototype.setEventedParent=function(n,r){return this._eventedParent=n,this._eventedParentData=r,this;};var eM={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},eR=function(n,r,i,a){this.message=(n?n+": ":"")+i,a&&(this.identifier=a),null!=r&&r.__line__&&(this.line=r.__line__);};function eP(n){var r=n.value;return r?[new eR(n.key,r,"constants have been deprecated as of v8")]:[];}function ek(n){for(var r=[],i=arguments.length-1;i-- >0;)r[i]=arguments[i+1];for(var a=0;a<r.length;a+=1){var o=r[a];for(var s in o)n[s]=o[s];}return n;}function eI(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n;}function eL(n){if(Array.isArray(n))return n.map(eL);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){var r={};for(var i in n)r[i]=eL(n[i]);return r;}return eI(n);}var eN=function(n){function r(r,i){n.call(this,i),this.message=i,this.key=r;}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r;}(Error),eD=function(n,r){void 0===r&&(r=[]),this.parent=n,this.bindings={};for(var i=0,a=r;i<a.length;i+=1){var o=a[i];this.bindings[o[0]]=o[1];}};eD.prototype.concat=function(n){return new eD(this,n);},eD.prototype.get=function(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw Error(n+" not found in scope.");},eD.prototype.has=function(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n);};var eF={kind:"null"},eB={kind:"number"},ej={kind:"string"},ez={kind:"boolean"},eU={kind:"color"},eV={kind:"object"},eG={kind:"value"},eH={kind:"collator"},eW={kind:"formatted"},eX={kind:"resolvedImage"};function eq(n,r){return{kind:"array",itemType:n,N:r};}function e$(n){if("array"===n.kind){var r=e$(n.itemType);return"number"==typeof n.N?"array<"+r+", "+n.N+">":"value"===n.itemType.kind?"array":"array<"+r+">";}return n.kind;}var eY=[eF,eB,ej,ez,eU,eW,eV,eq(eG),eX];function eZ(n,r){if("error"===r.kind)return null;if("array"===n.kind){if("array"===r.kind&&(0===r.N&&"value"===r.itemType.kind||!eZ(n.itemType,r.itemType))&&("number"!=typeof n.N||n.N===r.N))return null;}else{if(n.kind===r.kind)return null;if("value"===n.kind){for(var i=0;i<eY.length;i+=1)if(!eZ(eY[i],r))return null;}}return"Expected "+e$(n)+" but found "+e$(r)+" instead.";}function eK(n,r){return r.some(function(r){return r.kind===n.kind;});}function eQ(n,r){return r.some(function(r){return"null"===r?null===n:"array"===r?Array.isArray(n):"object"===r?n&&!Array.isArray(n)&&"object"==typeof n:r===typeof n;});}var eJ=r(function(n,r){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function a(n){return(n=Math.round(n))<0?0:n>255?255:n;}function o(n){return a("%"===n[n.length-1]?parseFloat(n)/100*255:parseInt(n));}function s(n){var r;return(r="%"===n[n.length-1]?parseFloat(n)/100:parseFloat(n))<0?0:r>1?1:r;}function l(n,r,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?n+(r-n)*i*6:2*i<1?r:3*i<2?n+(r-n)*(2/3-i)*6:n;}try{r.parseCSSColor=function(n){var r,u=n.replace(/ /g,"").toLowerCase();if(u in i)return i[u].slice();if("#"===u[0])return 4===u.length?(r=parseInt(u.substr(1),16))>=0&&r<=4095?[(3840&r)>>4|(3840&r)>>8,240&r|(240&r)>>4,15&r|(15&r)<<4,1]:null:7===u.length&&(r=parseInt(u.substr(1),16))>=0&&r<=16777215?[(16711680&r)>>16,(65280&r)>>8,255&r,1]:null;var c=u.indexOf("("),f=u.indexOf(")");if(-1!==c&&f+1===u.length){var d=u.substr(0,c),h=u.substr(c+1,f-(c+1)).split(","),p=1;switch(d){case"rgba":if(4!==h.length)break;p=s(h.pop());case"rgb":return 3!==h.length?null:[o(h[0]),o(h[1]),o(h[2]),p];case"hsla":if(4!==h.length)break;p=s(h.pop());case"hsl":if(3!==h.length)break;var m=(parseFloat(h[0])%360+360)%360/360,g=s(h[1]),v=s(h[2]),y=v<=.5?v*(g+1):v+g-v*g,_=2*v-y;return[a(255*l(_,y,m+1/3)),a(255*l(_,y,m)),a(255*l(_,y,m-1/3)),p];}}return null;};}catch(n){}}).parseCSSColor,e0=function(n,r,i,a){void 0===a&&(a=1),this.r=n,this.g=r,this.b=i,this.a=a;};e0.parse=function(n){if(n){if(n instanceof e0)return n;if("string"==typeof n){var r=eJ(n);if(r)return new e0(r[0]/255*r[3],r[1]/255*r[3],r[2]/255*r[3],r[3]);}}},e0.prototype.toString=function(){var n=this.toArray(),r=n[1],i=n[2],a=n[3];return"rgba("+Math.round(n[0])+","+Math.round(r)+","+Math.round(i)+","+a+")";},e0.prototype.toArray=function(){var n=this.a;return 0===n?[0,0,0,0]:[255*this.r/n,255*this.g/n,255*this.b/n,n];},e0.black=new e0(0,0,0,1),e0.white=new e0(1,1,1,1),e0.transparent=new e0(0,0,0,0),e0.red=new e0(1,0,0,1);var e1=function(n,r,i){this.sensitivity=n?r?"variant":"case":r?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"});};e1.prototype.compare=function(n,r){return this.collator.compare(n,r);},e1.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale;};var e2=function(n,r,i,a,o){this.text=n,this.image=r,this.scale=i,this.fontStack=a,this.textColor=o;},e3=function(n){this.sections=n;};e3.fromString=function(n){return new e3([new e2(n,null,null,null,null)]);},e3.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(n){return 0!==n.text.length||n.image&&0!==n.image.name.length;});},e3.factory=function(n){return n instanceof e3?n:e3.fromString(n);},e3.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(n){return n.text;}).join("");},e3.prototype.serialize=function(){for(var n=["format"],r=0,i=this.sections;r<i.length;r+=1){var a=i[r];if(a.image)n.push(["image",a.image.name]);else{n.push(a.text);var o={};a.fontStack&&(o["text-font"]=["literal",a.fontStack.split(",")]),a.scale&&(o["font-scale"]=a.scale),a.textColor&&(o["text-color"]=["rgba"].concat(a.textColor.toArray())),n.push(o);}}return n;};var e4=function(n){this.name=n.name,this.available=n.available;};function e5(n,r,i,a){return"number"==typeof n&&n>=0&&n<=255&&"number"==typeof r&&r>=0&&r<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===a||"number"==typeof a&&a>=0&&a<=1?null:"Invalid rgba value ["+[n,r,i,a].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof a?[n,r,i,a]:[n,r,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255.";}function e6(n){if(null===n||"string"==typeof n||"boolean"==typeof n||"number"==typeof n||n instanceof e0||n instanceof e1||n instanceof e3||n instanceof e4)return!0;if(Array.isArray(n)){for(var r=0;r<n.length;r+=1)if(!e6(n[r]))return!1;return!0;}if("object"==typeof n){for(var i in n)if(!e6(n[i]))return!1;return!0;}return!1;}function e8(n){if(null===n)return eF;if("string"==typeof n)return ej;if("boolean"==typeof n)return ez;if("number"==typeof n)return eB;if(n instanceof e0)return eU;if(n instanceof e1)return eH;if(n instanceof e3)return eW;if(n instanceof e4)return eX;if(Array.isArray(n)){for(var r,i=n.length,a=0;a<n.length;a+=1){var o=e8(n[a]);if(r){if(r===o)continue;r=eG;break;}r=o;}return eq(r||eG,i);}return eV;}function e7(n){var r=typeof n;return null===n?"":"string"===r||"number"===r||"boolean"===r?String(n):n instanceof e0||n instanceof e3||n instanceof e4?n.toString():JSON.stringify(n);}e4.prototype.toString=function(){return this.name;},e4.fromString=function(n){return n?new e4({name:n,available:!1}):null;},e4.prototype.serialize=function(){return["image",this.name];};var e9=function(n,r){this.type=n,this.value=r;};e9.parse=function(n,r){if(2!==n.length)return r.error("'literal' expression requires exactly one argument, but found "+(n.length-1)+" instead.");if(!e6(n[1]))return r.error("invalid value");var i=n[1],a=e8(i),o=r.expectedType;return"array"===a.kind&&0===a.N&&o&&"array"===o.kind&&("number"!=typeof o.N||0===o.N)&&(a=o),new e9(a,i);},e9.prototype.evaluate=function(){return this.value;},e9.prototype.eachChild=function(){},e9.prototype.outputDefined=function(){return!0;},e9.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof e0?["rgba"].concat(this.value.toArray()):this.value instanceof e3?this.value.serialize():this.value;};var te=function(n){this.name="ExpressionEvaluationError",this.message=n;};te.prototype.toJSON=function(){return this.message;};var tt={string:ej,number:eB,boolean:ez,object:eV},tn=function(n,r){this.type=n,this.args=r;};tn.parse=function(n,r){if(n.length<2)return r.error("Expected at least one argument.");var i,a,o,s=1,l=n[0];if("array"===l){if(n.length>2){var u=n[1];if("string"!=typeof u||!(u in tt)||"object"===u)return r.error('The item type argument of "array" must be one of string, number, boolean',1);i=tt[u],s++;}else i=eG;if(n.length>3){if(null!==n[2]&&("number"!=typeof n[2]||n[2]<0||n[2]!==Math.floor(n[2])))return r.error('The length argument to "array" must be a positive integer literal',2);a=n[2],s++;}o=eq(i,a);}else o=tt[l];for(var c=[];s<n.length;s++){var f=r.parse(n[s],s,eG);if(!f)return null;c.push(f);}return new tn(o,c);},tn.prototype.evaluate=function(n){for(var r=0;r<this.args.length;r++){var i=this.args[r].evaluate(n);if(!eZ(this.type,e8(i)))return i;if(r===this.args.length-1)throw new te("Expected value to be of type "+e$(this.type)+", but found "+e$(e8(i))+" instead.");}return null;},tn.prototype.eachChild=function(n){this.args.forEach(n);},tn.prototype.outputDefined=function(){return this.args.every(function(n){return n.outputDefined();});},tn.prototype.serialize=function(){var n=this.type,r=[n.kind];if("array"===n.kind){var i=n.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){r.push(i.kind);var a=n.N;("number"==typeof a||this.args.length>1)&&r.push(a);}}return r.concat(this.args.map(function(n){return n.serialize();}));};var tr=function(n){this.type=eW,this.sections=n;};tr.parse=function(n,r){if(n.length<2)return r.error("Expected at least one argument.");var i=n[1];if(!Array.isArray(i)&&"object"==typeof i)return r.error("First argument must be an image or text section.");for(var a=[],o=!1,s=1;s<=n.length-1;++s){var l=n[s];if(o&&"object"==typeof l&&!Array.isArray(l)){o=!1;var u=null;if(l["font-scale"]&&!(u=r.parse(l["font-scale"],1,eB)))return null;var c=null;if(l["text-font"]&&!(c=r.parse(l["text-font"],1,eq(ej))))return null;var f=null;if(l["text-color"]&&!(f=r.parse(l["text-color"],1,eU)))return null;var d=a[a.length-1];d.scale=u,d.font=c,d.textColor=f;}else{var h=r.parse(n[s],1,eG);if(!h)return null;var p=h.type.kind;if("string"!==p&&"value"!==p&&"null"!==p&&"resolvedImage"!==p)return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,a.push({content:h,scale:null,font:null,textColor:null});}}return new tr(a);},tr.prototype.evaluate=function(n){return new e3(this.sections.map(function(r){var i=r.content.evaluate(n);return e8(i)===eX?new e2("",i,null,null,null):new e2(e7(i),null,r.scale?r.scale.evaluate(n):null,r.font?r.font.evaluate(n).join(","):null,r.textColor?r.textColor.evaluate(n):null);}));},tr.prototype.eachChild=function(n){for(var r=0,i=this.sections;r<i.length;r+=1){var a=i[r];n(a.content),a.scale&&n(a.scale),a.font&&n(a.font),a.textColor&&n(a.textColor);}},tr.prototype.outputDefined=function(){return!1;},tr.prototype.serialize=function(){for(var n=["format"],r=0,i=this.sections;r<i.length;r+=1){var a=i[r];n.push(a.content.serialize());var o={};a.scale&&(o["font-scale"]=a.scale.serialize()),a.font&&(o["text-font"]=a.font.serialize()),a.textColor&&(o["text-color"]=a.textColor.serialize()),n.push(o);}return n;};var ti=function(n){this.type=eX,this.input=n;};ti.parse=function(n,r){if(2!==n.length)return r.error("Expected two arguments.");var i=r.parse(n[1],1,ej);return i?new ti(i):r.error("No image name provided.");},ti.prototype.evaluate=function(n){var r=this.input.evaluate(n),i=e4.fromString(r);return i&&n.availableImages&&(i.available=n.availableImages.indexOf(r)>-1),i;},ti.prototype.eachChild=function(n){n(this.input);},ti.prototype.outputDefined=function(){return!1;},ti.prototype.serialize=function(){return["image",this.input.serialize()];};var ta={"to-boolean":ez,"to-color":eU,"to-number":eB,"to-string":ej},to=function(n,r){this.type=n,this.args=r;};to.parse=function(n,r){if(n.length<2)return r.error("Expected at least one argument.");var i=n[0];if(("to-boolean"===i||"to-string"===i)&&2!==n.length)return r.error("Expected one argument.");for(var a=ta[i],o=[],s=1;s<n.length;s++){var l=r.parse(n[s],s,eG);if(!l)return null;o.push(l);}return new to(a,o);},to.prototype.evaluate=function(n){if("boolean"===this.type.kind)return!!this.args[0].evaluate(n);if("color"===this.type.kind){for(var r,i,a=0,o=this.args;a<o.length;a+=1){if(i=null,(r=o[a].evaluate(n))instanceof e0)return r;if("string"==typeof r){var s=n.parseColor(r);if(s)return s;}else if(Array.isArray(r)&&!(i=r.length<3||r.length>4?"Invalid rbga value "+JSON.stringify(r)+": expected an array containing either three or four numeric values.":e5(r[0],r[1],r[2],r[3])))return new e0(r[0]/255,r[1]/255,r[2]/255,r[3]);}throw new te(i||"Could not parse color from value '"+("string"==typeof r?r:String(JSON.stringify(r)))+"'");}if("number"===this.type.kind){for(var l=null,u=0,c=this.args;u<c.length;u+=1){if(null===(l=c[u].evaluate(n)))return 0;var f=Number(l);if(!isNaN(f))return f;}throw new te("Could not convert "+JSON.stringify(l)+" to number.");}return"formatted"===this.type.kind?e3.fromString(e7(this.args[0].evaluate(n))):"resolvedImage"===this.type.kind?e4.fromString(e7(this.args[0].evaluate(n))):e7(this.args[0].evaluate(n));},to.prototype.eachChild=function(n){this.args.forEach(n);},to.prototype.outputDefined=function(){return this.args.every(function(n){return n.outputDefined();});},to.prototype.serialize=function(){if("formatted"===this.type.kind)return new tr([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new ti(this.args[0]).serialize();var n=["to-"+this.type.kind];return this.eachChild(function(r){n.push(r.serialize());}),n;};var ts=["Unknown","Point","LineString","Polygon"],tl=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null;};tl.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null;},tl.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?ts[this.feature.type]:this.feature.type:null;},tl.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null;},tl.prototype.canonicalID=function(){return this.canonical;},tl.prototype.properties=function(){return this.feature&&this.feature.properties||{};},tl.prototype.parseColor=function(n){var r=this._parseColorCache[n];return r||(r=this._parseColorCache[n]=e0.parse(n)),r;};var tu=function(n,r,i,a){this.name=n,this.type=r,this._evaluate=i,this.args=a;};tu.prototype.evaluate=function(n){return this._evaluate(n,this.args);},tu.prototype.eachChild=function(n){this.args.forEach(n);},tu.prototype.outputDefined=function(){return!1;},tu.prototype.serialize=function(){return[this.name].concat(this.args.map(function(n){return n.serialize();}));},tu.parse=function(n,r){var i,a=n[0],o=tu.definitions[a];if(!o)return r.error('Unknown expression "'+a+'". If you wanted a literal array, use ["literal", [...]].',0);for(var s=Array.isArray(o)?o[0]:o.type,l=Array.isArray(o)?[[o[1],o[2]]]:o.overloads,u=l.filter(function(r){var i=r[0];return!Array.isArray(i)||i.length===n.length-1;}),c=null,f=0;f<u.length;f+=1){var d=u[f],h=d[0],p=d[1];c=new tA(r.registry,r.path,null,r.scope);for(var m=[],g=!1,v=1;v<n.length;v++){var y=n[v],_=Array.isArray(h)?h[v-1]:h.type,b=c.parse(y,1+m.length,_);if(!b){g=!0;break;}m.push(b);}if(!g){if(Array.isArray(h)&&h.length!==m.length)c.error("Expected "+h.length+" arguments, but found "+m.length+" instead.");else{for(var x=0;x<m.length;x++){var E=Array.isArray(h)?h[x]:h.type,w=m[x];c.concat(x+1).checkSubtype(E,w.type);}if(0===c.errors.length)return new tu(a,s,p,m);}}}if(1===u.length)(i=r.errors).push.apply(i,c.errors);else{for(var S=(u.length?u:l).map(function(n){var r;return Array.isArray(r=n[0])?"("+r.map(e$).join(", ")+")":"("+e$(r.type)+"...)";}).join(" | "),T=[],A=1;A<n.length;A++){var C=r.parse(n[A],1+T.length);if(!C)return null;T.push(e$(C.type));}r.error("Expected arguments of type "+S+", but found ("+T.join(", ")+") instead.");}return null;},tu.register=function(n,r){for(var i in tu.definitions=r,r)n[i]=tu;};var tc=function(n,r,i){this.type=eH,this.locale=i,this.caseSensitive=n,this.diacriticSensitive=r;};function tf(n,r){n[0]=Math.min(n[0],r[0]),n[1]=Math.min(n[1],r[1]),n[2]=Math.max(n[2],r[0]),n[3]=Math.max(n[3],r[1]);}function td(n,r){return!(n[0]<=r[0]||n[2]>=r[2]||n[1]<=r[1]||n[3]>=r[3]);}function th(n,r){for(var i,a,o,s,l,u,c,f,d=!1,h=0,p=r.length;h<p;h++)for(var m=r[h],g=0,v=m.length;g<v-1;g++){if((l=n[0]-(o=m[g])[0])*(f=n[1]-(s=m[g+1])[1])-(c=n[0]-s[0])*(u=n[1]-o[1])==0&&l*c<=0&&u*f<=0)return!1;i=m[g],a=m[g+1],i[1]>n[1]!=a[1]>n[1]&&n[0]<(a[0]-i[0])*(n[1]-i[1])/(a[1]-i[1])+i[0]&&(d=!d);}return d;}function tp(n,r,i,a){var o=a[0]-i[0],s=a[1]-i[1],l=(n[0]-i[0])*s-o*(n[1]-i[1]),u=(r[0]-i[0])*s-o*(r[1]-i[1]);return l>0&&u<0||l<0&&u>0;}function tm(n,r){for(var i=0;i<n.length;++i)if(!th(n[i],r))return!1;for(var a=0;a<n.length-1;++a)if(function(n,r,i){for(var a,o,s,l,u=0;u<i.length;u+=1)for(var c=i[u],f=0;f<c.length-1;++f)if(0!=(s=[(o=c[f+1])[0]-(a=c[f])[0],o[1]-a[1]])[0]*(l=[r[0]-n[0],r[1]-n[1]])[1]-s[1]*l[0]&&tp(n,r,a,o)&&tp(a,o,n,r))return!0;return!1;}(n[a],n[a+1],r))return!1;return!0;}function tg(n,r,i){for(var a=[],o=0;o<n.length;o++){for(var s=[],l=0;l<n[o].length;l++){var u=function(n,r){var i=(180+n[0])/360,a=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n[1]*Math.PI/360)))/360,o=Math.pow(2,r.z);return[Math.round(i*o*8192),Math.round(a*o*8192)];}(n[o][l],i);tf(r,u),s.push(u);}a.push(s);}return a;}function tv(n,r,i){for(var a=[],o=0;o<n.length;o++){var s=tg(n[o],r,i);a.push(s);}return a;}function ty(n,r,i,a){if(n[0]<i[0]||n[0]>i[2]){var o=.5*a,s=n[0]-i[0]>o?-a:i[0]-n[0]>o?a:0;0===s&&(s=n[0]-i[2]>o?-a:i[2]-n[0]>o?a:0),n[0]+=s;}tf(r,n);}function t_(n,r,i,a){for(var o=8192*Math.pow(2,a.z),s=[8192*a.x,8192*a.y],l=[],u=0;u<n.length;u+=1)for(var c=0,f=n[u];c<f.length;c+=1){var d=f[c],h=[d.x+s[0],d.y+s[1]];ty(h,r,i,o),l.push(h);}return l;}function tb(n,r,i,a){for(var o=8192*Math.pow(2,a.z),s=[8192*a.x,8192*a.y],l=[],u=0;u<n.length;u+=1){for(var c=[],f=0,d=n[u];f<d.length;f+=1){var h=d[f],p=[h.x+s[0],h.y+s[1]];tf(r,p),c.push(p);}l.push(c);}if(r[2]-r[0]<=o/2){r[0]=r[1]=1/0,r[2]=r[3]=-1/0;for(var m=0;m<l.length;m+=1)for(var g=0,v=l[m];g<v.length;g+=1)ty(v[g],r,i,o);}return l;}tc.parse=function(n,r){if(2!==n.length)return r.error("Expected one argument.");var i=n[1];if("object"!=typeof i||Array.isArray(i))return r.error("Collator options argument must be an object.");var a=r.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,ez);if(!a)return null;var o=r.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,ez);if(!o)return null;var s=null;return!i.locale||(s=r.parse(i.locale,1,ej))?new tc(a,o,s):null;},tc.prototype.evaluate=function(n){return new e1(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null);},tc.prototype.eachChild=function(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale);},tc.prototype.outputDefined=function(){return!1;},tc.prototype.serialize=function(){var n={};return n["case-sensitive"]=this.caseSensitive.serialize(),n["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(n.locale=this.locale.serialize()),["collator",n];};var tx=function(n,r){this.type=ez,this.geojson=n,this.geometries=r;};function tE(n){if(n instanceof tu&&("get"===n.name&&1===n.args.length||"feature-state"===n.name||"has"===n.name&&1===n.args.length||"properties"===n.name||"geometry-type"===n.name||"id"===n.name||/^filter-/.test(n.name))||n instanceof tx)return!1;var r=!0;return n.eachChild(function(n){r&&!tE(n)&&(r=!1);}),r;}function tw(n){if(n instanceof tu&&"feature-state"===n.name)return!1;var r=!0;return n.eachChild(function(n){r&&!tw(n)&&(r=!1);}),r;}function tS(n,r){if(n instanceof tu&&r.indexOf(n.name)>=0)return!1;var i=!0;return n.eachChild(function(n){i&&!tS(n,r)&&(i=!1);}),i;}tx.parse=function(n,r){if(2!==n.length)return r.error("'within' expression requires exactly one argument, but found "+(n.length-1)+" instead.");if(e6(n[1])){var i=n[1];if("FeatureCollection"===i.type)for(var a=0;a<i.features.length;++a){var o=i.features[a].geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new tx(i,i.features[a].geometry);}else if("Feature"===i.type){var s=i.geometry.type;if("Polygon"===s||"MultiPolygon"===s)return new tx(i,i.geometry);}else if("Polygon"===i.type||"MultiPolygon"===i.type)return new tx(i,i);}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.");},tx.prototype.evaluate=function(n){if(null!=n.geometry()&&null!=n.canonicalID()){if("Point"===n.geometryType())return function(n,r){var i=[1/0,1/0,-1/0,-1/0],a=[1/0,1/0,-1/0,-1/0],o=n.canonicalID();if("Polygon"===r.type){var s=tg(r.coordinates,a,o),l=t_(n.geometry(),i,a,o);if(!td(i,a))return!1;for(var u=0;u<l.length;u+=1)if(!th(l[u],s))return!1;}if("MultiPolygon"===r.type){var c=tv(r.coordinates,a,o),f=t_(n.geometry(),i,a,o);if(!td(i,a))return!1;for(var d=0;d<f.length;d+=1)if(!function(n,r){for(var i=0;i<r.length;i++)if(th(n,r[i]))return!0;return!1;}(f[d],c))return!1;}return!0;}(n,this.geometries);if("LineString"===n.geometryType())return function(n,r){var i=[1/0,1/0,-1/0,-1/0],a=[1/0,1/0,-1/0,-1/0],o=n.canonicalID();if("Polygon"===r.type){var s=tg(r.coordinates,a,o),l=tb(n.geometry(),i,a,o);if(!td(i,a))return!1;for(var u=0;u<l.length;u+=1)if(!tm(l[u],s))return!1;}if("MultiPolygon"===r.type){var c=tv(r.coordinates,a,o),f=tb(n.geometry(),i,a,o);if(!td(i,a))return!1;for(var d=0;d<f.length;d+=1)if(!function(n,r){for(var i=0;i<r.length;i++)if(tm(n,r[i]))return!0;return!1;}(f[d],c))return!1;}return!0;}(n,this.geometries);}return!1;},tx.prototype.eachChild=function(){},tx.prototype.outputDefined=function(){return!0;},tx.prototype.serialize=function(){return["within",this.geojson];};var tT=function(n,r){this.type=r.type,this.name=n,this.boundExpression=r;};tT.parse=function(n,r){if(2!==n.length||"string"!=typeof n[1])return r.error("'var' expression requires exactly one string literal argument.");var i=n[1];return r.scope.has(i)?new tT(i,r.scope.get(i)):r.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1);},tT.prototype.evaluate=function(n){return this.boundExpression.evaluate(n);},tT.prototype.eachChild=function(){},tT.prototype.outputDefined=function(){return!1;},tT.prototype.serialize=function(){return["var",this.name];};var tA=function(n,r,i,a,o){void 0===r&&(r=[]),void 0===a&&(a=new eD),void 0===o&&(o=[]),this.registry=n,this.path=r,this.key=r.map(function(n){return"["+n+"]";}).join(""),this.scope=a,this.errors=o,this.expectedType=i;};function tC(n,r){for(var i,a=n.length-1,o=0,s=a,l=0;o<=s;)if((i=n[l=Math.floor((o+s)/2)])<=r){if(l===a||r<n[l+1])return l;o=l+1;}else{if(!(i>r))throw new te("Input is not a number.");s=l-1;}return 0;}tA.prototype.parse=function(n,r,i,a,o){return void 0===o&&(o={}),r?this.concat(r,i,a)._parse(n,o):this._parse(n,o);},tA.prototype._parse=function(n,r){function i(n,r,i){return"assert"===i?new tn(r,[n]):"coerce"===i?new to(r,[n]):n;}if(null!==n&&"string"!=typeof n&&"boolean"!=typeof n&&"number"!=typeof n||(n=["literal",n]),Array.isArray(n)){if(0===n.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var a=n[0];if("string"!=typeof a)return this.error("Expression name must be a string, but found "+typeof a+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var o=this.registry[a];if(o){var s=o.parse(n,this);if(!s)return null;if(this.expectedType){var l=this.expectedType,u=s.type;if("string"!==l.kind&&"number"!==l.kind&&"boolean"!==l.kind&&"object"!==l.kind&&"array"!==l.kind||"value"!==u.kind){if("color"!==l.kind&&"formatted"!==l.kind&&"resolvedImage"!==l.kind||"value"!==u.kind&&"string"!==u.kind){if(this.checkSubtype(l,u))return null;}else s=i(s,l,r.typeAnnotation||"coerce");}else s=i(s,l,r.typeAnnotation||"assert");}if(!(s instanceof e9)&&"resolvedImage"!==s.type.kind&&function n(r){if(r instanceof tT)return n(r.boundExpression);if(r instanceof tu&&"error"===r.name||r instanceof tc||r instanceof tx)return!1;var i=r instanceof to||r instanceof tn,a=!0;return r.eachChild(function(r){a=i?a&&n(r):a&&r instanceof e9;}),!!a&&tE(r)&&tS(r,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]);}(s)){var c=new tl;try{s=new e9(s.type,s.evaluate(c));}catch(n){return this.error(n.message),null;}}return s;}return this.error('Unknown expression "'+a+'". If you wanted a literal array, use ["literal", [...]].',0);}return this.error(void 0===n?"'undefined' value invalid. Use null instead.":"object"==typeof n?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof n+" instead.");},tA.prototype.concat=function(n,r,i){var a="number"==typeof n?this.path.concat(n):this.path,o=i?this.scope.concat(i):this.scope;return new tA(this.registry,a,r||null,o,this.errors);},tA.prototype.error=function(n){for(var r=[],i=arguments.length-1;i-- >0;)r[i]=arguments[i+1];var a=""+this.key+r.map(function(n){return"["+n+"]";}).join("");this.errors.push(new eN(a,n));},tA.prototype.checkSubtype=function(n,r){var i=eZ(n,r);return i&&this.error(i),i;};var tO=function(n,r,i){this.type=n,this.input=r,this.labels=[],this.outputs=[];for(var a=0;a<i.length;a+=1){var o=i[a],s=o[1];this.labels.push(o[0]),this.outputs.push(s);}};function tM(n,r,i){return n*(1-i)+r*i;}tO.parse=function(n,r){if(n.length-1<4)return r.error("Expected at least 4 arguments, but found only "+(n.length-1)+".");if((n.length-1)%2!=0)return r.error("Expected an even number of arguments.");var i=r.parse(n[1],1,eB);if(!i)return null;var a=[],o=null;r.expectedType&&"value"!==r.expectedType.kind&&(o=r.expectedType);for(var s=1;s<n.length;s+=2){var l=1===s?-1/0:n[s],u=n[s+1],c=s,f=s+1;if("number"!=typeof l)return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',c);if(a.length&&a[a.length-1][0]>=l)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',c);var d=r.parse(u,f,o);if(!d)return null;o=o||d.type,a.push([l,d]);}return new tO(o,i,a);},tO.prototype.evaluate=function(n){var r=this.labels,i=this.outputs;if(1===r.length)return i[0].evaluate(n);var a=this.input.evaluate(n);if(a<=r[0])return i[0].evaluate(n);var o=r.length;return a>=r[o-1]?i[o-1].evaluate(n):i[tC(r,a)].evaluate(n);},tO.prototype.eachChild=function(n){n(this.input);for(var r=0,i=this.outputs;r<i.length;r+=1)n(i[r]);},tO.prototype.outputDefined=function(){return this.outputs.every(function(n){return n.outputDefined();});},tO.prototype.serialize=function(){for(var n=["step",this.input.serialize()],r=0;r<this.labels.length;r++)r>0&&n.push(this.labels[r]),n.push(this.outputs[r].serialize());return n;};var tR=Object.freeze({__proto__:null,number:tM,color:function(n,r,i){return new e0(tM(n.r,r.r,i),tM(n.g,r.g,i),tM(n.b,r.b,i),tM(n.a,r.a,i));},array:function(n,r,i){return n.map(function(n,a){return tM(n,r[a],i);});}}),tP=6/29*3*(6/29),tk=Math.PI/180,tI=180/Math.PI;function tL(n){return n>.008856451679035631?Math.pow(n,1/3):n/tP+4/29;}function tN(n){return n>6/29?n*n*n:tP*(n-4/29);}function tD(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055);}function tF(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);}function tB(n){var r=tF(n.r),i=tF(n.g),a=tF(n.b),o=tL((.4124564*r+.3575761*i+.1804375*a)/.95047),s=tL((.2126729*r+.7151522*i+.072175*a)/1);return{l:116*s-16,a:500*(o-s),b:200*(s-tL((.0193339*r+.119192*i+.9503041*a)/1.08883)),alpha:n.a};}function tj(n){var r=(n.l+16)/116,i=isNaN(n.a)?r:r+n.a/500,a=isNaN(n.b)?r:r-n.b/200;return r=1*tN(r),new e0(tD(3.2404542*(i=.95047*tN(i))-1.5371385*r-.4985314*(a=1.08883*tN(a))),tD(-.969266*i+1.8760108*r+.041556*a),tD(.0556434*i-.2040259*r+1.0572252*a),n.alpha);}var tz={forward:tB,reverse:tj,interpolate:function(n,r,i){return{l:tM(n.l,r.l,i),a:tM(n.a,r.a,i),b:tM(n.b,r.b,i),alpha:tM(n.alpha,r.alpha,i)};}},tU={forward:function(n){var r=tB(n),i=r.l,a=r.a,o=r.b,s=Math.atan2(o,a)*tI;return{h:s<0?s+360:s,c:Math.sqrt(a*a+o*o),l:i,alpha:n.a};},reverse:function(n){var r=n.h*tk,i=n.c;return tj({l:n.l,a:Math.cos(r)*i,b:Math.sin(r)*i,alpha:n.alpha});},interpolate:function(n,r,i){var a,o;return{h:(a=n.h,o=r.h-a,a+i*(o>180||o<-180?o-360*Math.round(o/360):o)),c:tM(n.c,r.c,i),l:tM(n.l,r.l,i),alpha:tM(n.alpha,r.alpha,i)};}},tV=Object.freeze({__proto__:null,lab:tz,hcl:tU}),tG=function(n,r,i,a,o){this.type=n,this.operator=r,this.interpolation=i,this.input=a,this.labels=[],this.outputs=[];for(var s=0;s<o.length;s+=1){var l=o[s],u=l[1];this.labels.push(l[0]),this.outputs.push(u);}};function tH(n,r,i,a){var o=a-i,s=n-i;return 0===o?0:1===r?s/o:(Math.pow(r,s)-1)/(Math.pow(r,o)-1);}tG.interpolationFactor=function(n,r,a,o){var s=0;if("exponential"===n.name)s=tH(r,n.base,a,o);else if("linear"===n.name)s=tH(r,1,a,o);else if("cubic-bezier"===n.name){var l=n.controlPoints;s=new i(l[0],l[1],l[2],l[3]).solve(tH(r,1,a,o));}return s;},tG.parse=function(n,r){var i=n[0],a=n[1],o=n[2],s=n.slice(3);if(!Array.isArray(a)||0===a.length)return r.error("Expected an interpolation type expression.",1);if("linear"===a[0])a={name:"linear"};else if("exponential"===a[0]){var l=a[1];if("number"!=typeof l)return r.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:l};}else{if("cubic-bezier"!==a[0])return r.error("Unknown interpolation type "+String(a[0]),1,0);var u=a.slice(1);if(4!==u.length||u.some(function(n){return"number"!=typeof n||n<0||n>1;}))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:u};}if(n.length-1<4)return r.error("Expected at least 4 arguments, but found only "+(n.length-1)+".");if((n.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(!(o=r.parse(o,2,eB)))return null;var c=[],f=null;"interpolate-hcl"===i||"interpolate-lab"===i?f=eU:r.expectedType&&"value"!==r.expectedType.kind&&(f=r.expectedType);for(var d=0;d<s.length;d+=2){var h=s[d],p=s[d+1],m=d+3,g=d+4;if("number"!=typeof h)return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',m);if(c.length&&c[c.length-1][0]>=h)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',m);var v=r.parse(p,g,f);if(!v)return null;f=f||v.type,c.push([h,v]);}return"number"===f.kind||"color"===f.kind||"array"===f.kind&&"number"===f.itemType.kind&&"number"==typeof f.N?new tG(f,i,a,o,c):r.error("Type "+e$(f)+" is not interpolatable.");},tG.prototype.evaluate=function(n){var r=this.labels,i=this.outputs;if(1===r.length)return i[0].evaluate(n);var a=this.input.evaluate(n);if(a<=r[0])return i[0].evaluate(n);var o=r.length;if(a>=r[o-1])return i[o-1].evaluate(n);var s=tC(r,a),l=tG.interpolationFactor(this.interpolation,a,r[s],r[s+1]),u=i[s].evaluate(n),c=i[s+1].evaluate(n);return"interpolate"===this.operator?tR[this.type.kind.toLowerCase()](u,c,l):"interpolate-hcl"===this.operator?tU.reverse(tU.interpolate(tU.forward(u),tU.forward(c),l)):tz.reverse(tz.interpolate(tz.forward(u),tz.forward(c),l));},tG.prototype.eachChild=function(n){n(this.input);for(var r=0,i=this.outputs;r<i.length;r+=1)n(i[r]);},tG.prototype.outputDefined=function(){return this.outputs.every(function(n){return n.outputDefined();});},tG.prototype.serialize=function(){var n;n="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var r=[this.operator,n,this.input.serialize()],i=0;i<this.labels.length;i++)r.push(this.labels[i],this.outputs[i].serialize());return r;};var tW=function(n,r){this.type=n,this.args=r;};tW.parse=function(n,r){if(n.length<2)return r.error("Expectected at least one argument.");var i=null,a=r.expectedType;a&&"value"!==a.kind&&(i=a);for(var o=[],s=0,l=n.slice(1);s<l.length;s+=1){var u=r.parse(l[s],1+o.length,i,void 0,{typeAnnotation:"omit"});if(!u)return null;i=i||u.type,o.push(u);}return new tW(a&&o.some(function(n){return eZ(a,n.type);})?eG:i,o);},tW.prototype.evaluate=function(n){for(var r,i=null,a=0,o=0,s=this.args;o<s.length&&(a++,(i=s[o].evaluate(n))&&i instanceof e4&&!i.available&&(r||(r=i.name),i=null,a===this.args.length&&(i=r)),null===i);o+=1);return i;},tW.prototype.eachChild=function(n){this.args.forEach(n);},tW.prototype.outputDefined=function(){return this.args.every(function(n){return n.outputDefined();});},tW.prototype.serialize=function(){var n=["coalesce"];return this.eachChild(function(r){n.push(r.serialize());}),n;};var tX=function(n,r){this.type=r.type,this.bindings=[].concat(n),this.result=r;};tX.prototype.evaluate=function(n){return this.result.evaluate(n);},tX.prototype.eachChild=function(n){for(var r=0,i=this.bindings;r<i.length;r+=1)n(i[r][1]);n(this.result);},tX.parse=function(n,r){if(n.length<4)return r.error("Expected at least 3 arguments, but found "+(n.length-1)+" instead.");for(var i=[],a=1;a<n.length-1;a+=2){var o=n[a];if("string"!=typeof o)return r.error("Expected string, but found "+typeof o+" instead.",a);if(/[^a-zA-Z0-9_]/.test(o))return r.error("Variable names must contain only alphanumeric characters or '_'.",a);var s=r.parse(n[a+1],a+1);if(!s)return null;i.push([o,s]);}var l=r.parse(n[n.length-1],n.length-1,r.expectedType,i);return l?new tX(i,l):null;},tX.prototype.outputDefined=function(){return this.result.outputDefined();},tX.prototype.serialize=function(){for(var n=["let"],r=0,i=this.bindings;r<i.length;r+=1){var a=i[r];n.push(a[0],a[1].serialize());}return n.push(this.result.serialize()),n;};var tq=function(n,r,i){this.type=n,this.index=r,this.input=i;};tq.parse=function(n,r){if(3!==n.length)return r.error("Expected 2 arguments, but found "+(n.length-1)+" instead.");var i=r.parse(n[1],1,eB),a=r.parse(n[2],2,eq(r.expectedType||eG));return i&&a?new tq(a.type.itemType,i,a):null;},tq.prototype.evaluate=function(n){var r=this.index.evaluate(n),i=this.input.evaluate(n);if(r<0)throw new te("Array index out of bounds: "+r+" < 0.");if(r>=i.length)throw new te("Array index out of bounds: "+r+" > "+(i.length-1)+".");if(r!==Math.floor(r))throw new te("Array index must be an integer, but found "+r+" instead.");return i[r];},tq.prototype.eachChild=function(n){n(this.index),n(this.input);},tq.prototype.outputDefined=function(){return!1;},tq.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()];};var t$=function(n,r){this.type=ez,this.needle=n,this.haystack=r;};t$.parse=function(n,r){if(3!==n.length)return r.error("Expected 2 arguments, but found "+(n.length-1)+" instead.");var i=r.parse(n[1],1,eG),a=r.parse(n[2],2,eG);return i&&a?eK(i.type,[ez,ej,eB,eF,eG])?new t$(i,a):r.error("Expected first argument to be of type boolean, string, number or null, but found "+e$(i.type)+" instead"):null;},t$.prototype.evaluate=function(n){var r=this.needle.evaluate(n),i=this.haystack.evaluate(n);if(!i)return!1;if(!eQ(r,["boolean","string","number","null"]))throw new te("Expected first argument to be of type boolean, string, number or null, but found "+e$(e8(r))+" instead.");if(!eQ(i,["string","array"]))throw new te("Expected second argument to be of type array or string, but found "+e$(e8(i))+" instead.");return i.indexOf(r)>=0;},t$.prototype.eachChild=function(n){n(this.needle),n(this.haystack);},t$.prototype.outputDefined=function(){return!0;},t$.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()];};var tY=function(n,r,i){this.type=eB,this.needle=n,this.haystack=r,this.fromIndex=i;};tY.parse=function(n,r){if(n.length<=2||n.length>=5)return r.error("Expected 3 or 4 arguments, but found "+(n.length-1)+" instead.");var i=r.parse(n[1],1,eG),a=r.parse(n[2],2,eG);if(!i||!a)return null;if(!eK(i.type,[ez,ej,eB,eF,eG]))return r.error("Expected first argument to be of type boolean, string, number or null, but found "+e$(i.type)+" instead");if(4===n.length){var o=r.parse(n[3],3,eB);return o?new tY(i,a,o):null;}return new tY(i,a);},tY.prototype.evaluate=function(n){var r=this.needle.evaluate(n),i=this.haystack.evaluate(n);if(!eQ(r,["boolean","string","number","null"]))throw new te("Expected first argument to be of type boolean, string, number or null, but found "+e$(e8(r))+" instead.");if(!eQ(i,["string","array"]))throw new te("Expected second argument to be of type array or string, but found "+e$(e8(i))+" instead.");if(this.fromIndex){var a=this.fromIndex.evaluate(n);return i.indexOf(r,a);}return i.indexOf(r);},tY.prototype.eachChild=function(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex);},tY.prototype.outputDefined=function(){return!1;},tY.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var n=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),n];}return["index-of",this.needle.serialize(),this.haystack.serialize()];};var tZ=function(n,r,i,a,o,s){this.inputType=n,this.type=r,this.input=i,this.cases=a,this.outputs=o,this.otherwise=s;};tZ.parse=function(n,r){if(n.length<5)return r.error("Expected at least 4 arguments, but found only "+(n.length-1)+".");if(n.length%2!=1)return r.error("Expected an even number of arguments.");r.expectedType&&"value"!==r.expectedType.kind&&(a=r.expectedType);for(var i,a,o={},s=[],l=2;l<n.length-1;l+=2){var u=n[l],c=n[l+1];Array.isArray(u)||(u=[u]);var f=r.concat(l);if(0===u.length)return f.error("Expected at least one branch label.");for(var d=0,h=u;d<h.length;d+=1){var p=h[d];if("number"!=typeof p&&"string"!=typeof p)return f.error("Branch labels must be numbers or strings.");if("number"==typeof p&&Math.abs(p)>Number.MAX_SAFE_INTEGER)return f.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof p&&Math.floor(p)!==p)return f.error("Numeric branch labels must be integer values.");if(i){if(f.checkSubtype(i,e8(p)))return null;}else i=e8(p);if(void 0!==o[String(p)])return f.error("Branch labels must be unique.");o[String(p)]=s.length;}var m=r.parse(c,l,a);if(!m)return null;a=a||m.type,s.push(m);}var g=r.parse(n[1],1,eG);if(!g)return null;var v=r.parse(n[n.length-1],n.length-1,a);return v?"value"!==g.type.kind&&r.concat(1).checkSubtype(i,g.type)?null:new tZ(i,a,g,o,s,v):null;},tZ.prototype.evaluate=function(n){var r=this.input.evaluate(n);return(e8(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(n);},tZ.prototype.eachChild=function(n){n(this.input),this.outputs.forEach(n),n(this.otherwise);},tZ.prototype.outputDefined=function(){return this.outputs.every(function(n){return n.outputDefined();})&&this.otherwise.outputDefined();},tZ.prototype.serialize=function(){for(var n=this,r=["match",this.input.serialize()],i=[],a={},o=0,s=Object.keys(this.cases).sort();o<s.length;o+=1){var l=s[o];void 0===(d=a[this.cases[l]])?(a[this.cases[l]]=i.length,i.push([this.cases[l],[l]])):i[d][1].push(l);}for(var u=function(r){return"number"===n.inputType.kind?Number(r):r;},c=0;c<i.length;c+=1){var f=i[c],d=f[0],h=f[1];r.push(1===h.length?u(h[0]):h.map(u)),r.push(this.outputs[outputIndex$1].serialize());}return r.push(this.otherwise.serialize()),r;};var tK=function(n,r,i){this.type=n,this.branches=r,this.otherwise=i;};tK.parse=function(n,r){if(n.length<4)return r.error("Expected at least 3 arguments, but found only "+(n.length-1)+".");if(n.length%2!=0)return r.error("Expected an odd number of arguments.");r.expectedType&&"value"!==r.expectedType.kind&&(i=r.expectedType);for(var i,a=[],o=1;o<n.length-1;o+=2){var s=r.parse(n[o],o,ez);if(!s)return null;var l=r.parse(n[o+1],o+1,i);if(!l)return null;a.push([s,l]),i=i||l.type;}var u=r.parse(n[n.length-1],n.length-1,i);return u?new tK(i,a,u):null;},tK.prototype.evaluate=function(n){for(var r=0,i=this.branches;r<i.length;r+=1){var a=i[r],o=a[1];if(a[0].evaluate(n))return o.evaluate(n);}return this.otherwise.evaluate(n);},tK.prototype.eachChild=function(n){for(var r=0,i=this.branches;r<i.length;r+=1){var a=i[r],o=a[1];n(a[0]),n(o);}n(this.otherwise);},tK.prototype.outputDefined=function(){return this.branches.every(function(n){return n[1].outputDefined();})&&this.otherwise.outputDefined();},tK.prototype.serialize=function(){var n=["case"];return this.eachChild(function(r){n.push(r.serialize());}),n;};var tQ=function(n,r,i,a){this.type=n,this.input=r,this.beginIndex=i,this.endIndex=a;};function tJ(n,r){return"=="===n||"!="===n?"boolean"===r.kind||"string"===r.kind||"number"===r.kind||"null"===r.kind||"value"===r.kind:"string"===r.kind||"number"===r.kind||"value"===r.kind;}function t0(n,r,i,a){return 0===a.compare(r,i);}function t1(n,r,i){var a="=="!==n&&"!="!==n;return function(){function o(n,r,i){this.type=ez,this.lhs=n,this.rhs=r,this.collator=i,this.hasUntypedArgument="value"===n.type.kind||"value"===r.type.kind;}return o.parse=function(n,r){if(3!==n.length&&4!==n.length)return r.error("Expected two or three arguments.");var i=n[0],s=r.parse(n[1],1,eG);if(!s)return null;if(!tJ(i,s.type))return r.concat(1).error('"'+i+"\" comparisons are not supported for type '"+e$(s.type)+"'.");var l=r.parse(n[2],2,eG);if(!l)return null;if(!tJ(i,l.type))return r.concat(2).error('"'+i+"\" comparisons are not supported for type '"+e$(l.type)+"'.");if(s.type.kind!==l.type.kind&&"value"!==s.type.kind&&"value"!==l.type.kind)return r.error("Cannot compare types '"+e$(s.type)+"' and '"+e$(l.type)+"'.");a&&("value"===s.type.kind&&"value"!==l.type.kind?s=new tn(l.type,[s]):"value"!==s.type.kind&&"value"===l.type.kind&&(l=new tn(s.type,[l])));var u=null;if(4===n.length){if("string"!==s.type.kind&&"string"!==l.type.kind&&"value"!==s.type.kind&&"value"!==l.type.kind)return r.error("Cannot use collator to compare non-string types.");if(!(u=r.parse(n[3],3,eH)))return null;}return new o(s,l,u);},o.prototype.evaluate=function(o){var s=this.lhs.evaluate(o),l=this.rhs.evaluate(o);if(a&&this.hasUntypedArgument){var u=e8(s),c=e8(l);if(u.kind!==c.kind||"string"!==u.kind&&"number"!==u.kind)throw new te('Expected arguments for "'+n+'" to be (string, string) or (number, number), but found ('+u.kind+", "+c.kind+") instead.");}if(this.collator&&!a&&this.hasUntypedArgument){var f=e8(s),d=e8(l);if("string"!==f.kind||"string"!==d.kind)return r(o,s,l);}return this.collator?i(o,s,l,this.collator.evaluate(o)):r(o,s,l);},o.prototype.eachChild=function(n){n(this.lhs),n(this.rhs),this.collator&&n(this.collator);},o.prototype.outputDefined=function(){return!0;},o.prototype.serialize=function(){var r=[n];return this.eachChild(function(n){r.push(n.serialize());}),r;},o;}();}tQ.parse=function(n,r){if(n.length<=2||n.length>=5)return r.error("Expected 3 or 4 arguments, but found "+(n.length-1)+" instead.");var i=r.parse(n[1],1,eG),a=r.parse(n[2],2,eB);if(!i||!a)return null;if(!eK(i.type,[eq(eG),ej,eG]))return r.error("Expected first argument to be of type array or string, but found "+e$(i.type)+" instead");if(4===n.length){var o=r.parse(n[3],3,eB);return o?new tQ(i.type,i,a,o):null;}return new tQ(i.type,i,a);},tQ.prototype.evaluate=function(n){var r=this.input.evaluate(n),i=this.beginIndex.evaluate(n);if(!eQ(r,["string","array"]))throw new te("Expected first argument to be of type array or string, but found "+e$(e8(r))+" instead.");if(this.endIndex){var a=this.endIndex.evaluate(n);return r.slice(i,a);}return r.slice(i);},tQ.prototype.eachChild=function(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex);},tQ.prototype.outputDefined=function(){return!1;},tQ.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var n=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),n];}return["slice",this.input.serialize(),this.beginIndex.serialize()];};var t2=t1("==",function(n,r,i){return r===i;},t0),t3=t1("!=",function(n,r,i){return r!==i;},function(n,r,i,a){return!t0(0,r,i,a);}),t4=t1("<",function(n,r,i){return r<i;},function(n,r,i,a){return 0>a.compare(r,i);}),t5=t1(">",function(n,r,i){return r>i;},function(n,r,i,a){return a.compare(r,i)>0;}),t6=t1("<=",function(n,r,i){return r<=i;},function(n,r,i,a){return 0>=a.compare(r,i);}),t8=t1(">=",function(n,r,i){return r>=i;},function(n,r,i,a){return a.compare(r,i)>=0;}),t7=function(n,r,i,a,o){this.type=ej,this.number=n,this.locale=r,this.currency=i,this.minFractionDigits=a,this.maxFractionDigits=o;};t7.parse=function(n,r){if(3!==n.length)return r.error("Expected two arguments.");var i=r.parse(n[1],1,eB);if(!i)return null;var a=n[2];if("object"!=typeof a||Array.isArray(a))return r.error("NumberFormat options argument must be an object.");var o=null;if(a.locale&&!(o=r.parse(a.locale,1,ej)))return null;var s=null;if(a.currency&&!(s=r.parse(a.currency,1,ej)))return null;var l=null;if(a["min-fraction-digits"]&&!(l=r.parse(a["min-fraction-digits"],1,eB)))return null;var u=null;return!a["max-fraction-digits"]||(u=r.parse(a["max-fraction-digits"],1,eB))?new t7(i,o,s,l,u):null;},t7.prototype.evaluate=function(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n));},t7.prototype.eachChild=function(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits);},t7.prototype.outputDefined=function(){return!1;},t7.prototype.serialize=function(){var n={};return this.locale&&(n.locale=this.locale.serialize()),this.currency&&(n.currency=this.currency.serialize()),this.minFractionDigits&&(n["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(n["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),n];};var t9=function(n){this.type=eB,this.input=n;};t9.parse=function(n,r){if(2!==n.length)return r.error("Expected 1 argument, but found "+(n.length-1)+" instead.");var i=r.parse(n[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?r.error("Expected argument of type string or array, but found "+e$(i.type)+" instead."):new t9(i):null;},t9.prototype.evaluate=function(n){var r=this.input.evaluate(n);if("string"==typeof r||Array.isArray(r))return r.length;throw new te("Expected value to be of type string or array, but found "+e$(e8(r))+" instead.");},t9.prototype.eachChild=function(n){n(this.input);},t9.prototype.outputDefined=function(){return!1;},t9.prototype.serialize=function(){var n=["length"];return this.eachChild(function(r){n.push(r.serialize());}),n;};var ne={"==":t2,"!=":t3,">":t5,"<":t4,">=":t8,"<=":t6,array:tn,at:tq,boolean:tn,case:tK,coalesce:tW,collator:tc,format:tr,image:ti,in:t$,"index-of":tY,interpolate:tG,"interpolate-hcl":tG,"interpolate-lab":tG,length:t9,let:tX,literal:e9,match:tZ,number:tn,"number-format":t7,object:tn,slice:tQ,step:tO,string:tn,"to-boolean":to,"to-color":to,"to-number":to,"to-string":to,var:tT,within:tx};function nt(n,r){var i=r[0],a=r[1],o=r[2],s=r[3];i=i.evaluate(n),a=a.evaluate(n),o=o.evaluate(n);var l=s?s.evaluate(n):1,u=e5(i,a,o,l);if(u)throw new te(u);return new e0(i/255*l,a/255*l,o/255*l,l);}function nn(n,r){var i=r[n];return void 0===i?null:i;}function nr(n){return{type:n};}function ni(n){return{result:"success",value:n};}function na(n){return{result:"error",value:n};}function no(n){return"data-driven"===n["property-type"]||"cross-faded-data-driven"===n["property-type"];}function ns(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1;}function nl(n){return!!n.expression&&n.expression.interpolated;}function nu(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":null===n?"null":typeof n;}function nc(n){return"object"==typeof n&&null!==n&&!Array.isArray(n);}function nf(n){return n;}function nd(n,r,i){return void 0!==n?n:void 0!==r?r:void 0!==i?i:void 0;}function nh(n,r,i,a,o){return nd(typeof i===o?a[i]:void 0,n.default,r.default);}function np(n,r,i){if("number"!==nu(i))return nd(n.default,r.default);var a=n.stops.length;if(1===a||i<=n.stops[0][0])return n.stops[0][1];if(i>=n.stops[a-1][0])return n.stops[a-1][1];var o=tC(n.stops.map(function(n){return n[0];}),i);return n.stops[o][1];}function nm(n,r,i){var a,o,s,l=void 0!==n.base?n.base:1;if("number"!==nu(i))return nd(n.default,r.default);var u=n.stops.length;if(1===u||i<=n.stops[0][0])return n.stops[0][1];if(i>=n.stops[u-1][0])return n.stops[u-1][1];var c=tC(n.stops.map(function(n){return n[0];}),i),f=(a=n.stops[c][0],o=n.stops[c+1][0]-a,s=i-a,0===o?0:1===l?s/o:(Math.pow(l,s)-1)/(Math.pow(l,o)-1)),d=n.stops[c][1],h=n.stops[c+1][1],p=tR[r.type]||nf;if(n.colorSpace&&"rgb"!==n.colorSpace){var m=tV[n.colorSpace];p=function(n,r){return m.reverse(m.interpolate(m.forward(n),m.forward(r),f));};}return"function"==typeof d.evaluate?{evaluate:function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];var i=d.evaluate.apply(void 0,n),a=h.evaluate.apply(void 0,n);if(void 0!==i&&void 0!==a)return p(i,a,f);}}:p(d,h,f);}function ng(n,r,i){return"color"===r.type?i=e0.parse(i):"formatted"===r.type?i=e3.fromString(i.toString()):"resolvedImage"===r.type?i=e4.fromString(i.toString()):nu(i)===r.type||"enum"===r.type&&r.values[i]||(i=void 0),nd(i,n.default,r.default);}tu.register(ne,{error:[{kind:"error"},[ej],function(n,r){throw new te(r[0].evaluate(n));}],typeof:[ej,[eG],function(n,r){return e$(e8(r[0].evaluate(n)));}],"to-rgba":[eq(eB,4),[eU],function(n,r){return r[0].evaluate(n).toArray();}],rgb:[eU,[eB,eB,eB],nt],rgba:[eU,[eB,eB,eB,eB],nt],has:{type:ez,overloads:[[[ej],function(n,r){return r[0].evaluate(n) in n.properties();}],[[ej,eV],function(n,r){var i=r[1];return r[0].evaluate(n) in i.evaluate(n);}]]},get:{type:eG,overloads:[[[ej],function(n,r){return nn(r[0].evaluate(n),n.properties());}],[[ej,eV],function(n,r){var i=r[1];return nn(r[0].evaluate(n),i.evaluate(n));}]]},"feature-state":[eG,[ej],function(n,r){return nn(r[0].evaluate(n),n.featureState||{});}],properties:[eV,[],function(n){return n.properties();}],"geometry-type":[ej,[],function(n){return n.geometryType();}],id:[eG,[],function(n){return n.id();}],zoom:[eB,[],function(n){return n.globals.zoom;}],"heatmap-density":[eB,[],function(n){return n.globals.heatmapDensity||0;}],"line-progress":[eB,[],function(n){return n.globals.lineProgress||0;}],accumulated:[eG,[],function(n){return void 0===n.globals.accumulated?null:n.globals.accumulated;}],"+":[eB,nr(eB),function(n,r){for(var i=0,a=0;a<r.length;a+=1)i+=r[a].evaluate(n);return i;}],"*":[eB,nr(eB),function(n,r){for(var i=1,a=0;a<r.length;a+=1)i*=r[a].evaluate(n);return i;}],"-":{type:eB,overloads:[[[eB,eB],function(n,r){var i=r[1];return r[0].evaluate(n)-i.evaluate(n);}],[[eB],function(n,r){return-r[0].evaluate(n);}]]},"/":[eB,[eB,eB],function(n,r){var i=r[1];return r[0].evaluate(n)/i.evaluate(n);}],"%":[eB,[eB,eB],function(n,r){var i=r[1];return r[0].evaluate(n)%i.evaluate(n);}],ln2:[eB,[],function(){return Math.LN2;}],pi:[eB,[],function(){return Math.PI;}],e:[eB,[],function(){return Math.E;}],"^":[eB,[eB,eB],function(n,r){var i=r[1];return Math.pow(r[0].evaluate(n),i.evaluate(n));}],sqrt:[eB,[eB],function(n,r){return Math.sqrt(r[0].evaluate(n));}],log10:[eB,[eB],function(n,r){return Math.log(r[0].evaluate(n))/Math.LN10;}],ln:[eB,[eB],function(n,r){return Math.log(r[0].evaluate(n));}],log2:[eB,[eB],function(n,r){return Math.log(r[0].evaluate(n))/Math.LN2;}],sin:[eB,[eB],function(n,r){return Math.sin(r[0].evaluate(n));}],cos:[eB,[eB],function(n,r){return Math.cos(r[0].evaluate(n));}],tan:[eB,[eB],function(n,r){return Math.tan(r[0].evaluate(n));}],asin:[eB,[eB],function(n,r){return Math.asin(r[0].evaluate(n));}],acos:[eB,[eB],function(n,r){return Math.acos(r[0].evaluate(n));}],atan:[eB,[eB],function(n,r){return Math.atan(r[0].evaluate(n));}],min:[eB,nr(eB),function(n,r){return Math.min.apply(Math,r.map(function(r){return r.evaluate(n);}));}],max:[eB,nr(eB),function(n,r){return Math.max.apply(Math,r.map(function(r){return r.evaluate(n);}));}],abs:[eB,[eB],function(n,r){return Math.abs(r[0].evaluate(n));}],round:[eB,[eB],function(n,r){var i=r[0].evaluate(n);return i<0?-Math.round(-i):Math.round(i);}],floor:[eB,[eB],function(n,r){return Math.floor(r[0].evaluate(n));}],ceil:[eB,[eB],function(n,r){return Math.ceil(r[0].evaluate(n));}],"filter-==":[ez,[ej,eG],function(n,r){var i=r[0],a=r[1];return n.properties()[i.value]===a.value;}],"filter-id-==":[ez,[eG],function(n,r){var i=r[0];return n.id()===i.value;}],"filter-type-==":[ez,[ej],function(n,r){var i=r[0];return n.geometryType()===i.value;}],"filter-<":[ez,[ej,eG],function(n,r){var i=r[0],a=r[1],o=n.properties()[i.value],s=a.value;return typeof o==typeof s&&o<s;}],"filter-id-<":[ez,[eG],function(n,r){var i=r[0],a=n.id(),o=i.value;return typeof a==typeof o&&a<o;}],"filter->":[ez,[ej,eG],function(n,r){var i=r[0],a=r[1],o=n.properties()[i.value],s=a.value;return typeof o==typeof s&&o>s;}],"filter-id->":[ez,[eG],function(n,r){var i=r[0],a=n.id(),o=i.value;return typeof a==typeof o&&a>o;}],"filter-<=":[ez,[ej,eG],function(n,r){var i=r[0],a=r[1],o=n.properties()[i.value],s=a.value;return typeof o==typeof s&&o<=s;}],"filter-id-<=":[ez,[eG],function(n,r){var i=r[0],a=n.id(),o=i.value;return typeof a==typeof o&&a<=o;}],"filter->=":[ez,[ej,eG],function(n,r){var i=r[0],a=r[1],o=n.properties()[i.value],s=a.value;return typeof o==typeof s&&o>=s;}],"filter-id->=":[ez,[eG],function(n,r){var i=r[0],a=n.id(),o=i.value;return typeof a==typeof o&&a>=o;}],"filter-has":[ez,[eG],function(n,r){return r[0].value in n.properties();}],"filter-has-id":[ez,[],function(n){return null!==n.id()&&void 0!==n.id();}],"filter-type-in":[ez,[eq(ej)],function(n,r){return r[0].value.indexOf(n.geometryType())>=0;}],"filter-id-in":[ez,[eq(eG)],function(n,r){return r[0].value.indexOf(n.id())>=0;}],"filter-in-small":[ez,[ej,eq(eG)],function(n,r){var i=r[0];return r[1].value.indexOf(n.properties()[i.value])>=0;}],"filter-in-large":[ez,[ej,eq(eG)],function(n,r){var i=r[0],a=r[1];return function(n,r,i,a){for(;i<=a;){var o=i+a>>1;if(r[o]===n)return!0;r[o]>n?a=o-1:i=o+1;}return!1;}(n.properties()[i.value],a.value,0,a.value.length-1);}],all:{type:ez,overloads:[[[ez,ez],function(n,r){var i=r[1];return r[0].evaluate(n)&&i.evaluate(n);}],[nr(ez),function(n,r){for(var i=0;i<r.length;i+=1)if(!r[i].evaluate(n))return!1;return!0;}]]},any:{type:ez,overloads:[[[ez,ez],function(n,r){var i=r[1];return r[0].evaluate(n)||i.evaluate(n);}],[nr(ez),function(n,r){for(var i=0;i<r.length;i+=1)if(r[i].evaluate(n))return!0;return!1;}]]},"!":[ez,[ez],function(n,r){return!r[0].evaluate(n);}],"is-supported-script":[ez,[ej],function(n,r){var i=n.globals&&n.globals.isSupportedScript;return!i||i(r[0].evaluate(n));}],upcase:[ej,[ej],function(n,r){return r[0].evaluate(n).toUpperCase();}],downcase:[ej,[ej],function(n,r){return r[0].evaluate(n).toLowerCase();}],concat:[ej,nr(eG),function(n,r){return r.map(function(r){return e7(r.evaluate(n));}).join("");}],"resolved-locale":[ej,[eH],function(n,r){return r[0].evaluate(n).resolvedLocale();}]});var nv=function(n,r){this.expression=n,this._warningHistory={},this._evaluator=new tl,this._defaultValue=r?"color"===r.type&&nc(r.default)?new e0(0,0,0,0):"color"===r.type?e0.parse(r.default)||null:void 0===r.default?null:r.default:null,this._enumValues=r&&"enum"===r.type?r.values:null;};function ny(n){return Array.isArray(n)&&n.length>0&&"string"==typeof n[0]&&n[0]in ne;}function n_(n,r){var i,a=new tA(ne,[],r?(i={color:eU,string:ej,number:eB,enum:ej,boolean:ez,formatted:eW,resolvedImage:eX},"array"===r.type?eq(i[r.value]||eG,r.length):i[r.type]):void 0),o=a.parse(n,void 0,void 0,void 0,r&&"string"===r.type?{typeAnnotation:"coerce"}:void 0);return o?ni(new nv(o,r)):na(a.errors);}nv.prototype.evaluateWithoutErrorHandling=function(n,r,i,a,o,s){return this._evaluator.globals=n,this._evaluator.feature=r,this._evaluator.featureState=i,this._evaluator.canonical=a,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s,this.expression.evaluate(this._evaluator);},nv.prototype.evaluate=function(n,r,i,a,o,s){this._evaluator.globals=n,this._evaluator.feature=r||null,this._evaluator.featureState=i||null,this._evaluator.canonical=a,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s||null;try{var l=this.expression.evaluate(this._evaluator);if(null==l||"number"==typeof l&&l!=l)return this._defaultValue;if(this._enumValues&&!(l in this._enumValues))throw new te("Expected value to be one of "+Object.keys(this._enumValues).map(function(n){return JSON.stringify(n);}).join(", ")+", but found "+JSON.stringify(l)+" instead.");return l;}catch(n){return this._warningHistory[n.message]||(this._warningHistory[n.message]=!0,"undefined"!=typeof console&&console.warn(n.message)),this._defaultValue;}};var nb=function(n,r){this.kind=n,this._styleExpression=r,this.isStateDependent="constant"!==n&&!tw(r.expression);};nb.prototype.evaluateWithoutErrorHandling=function(n,r,i,a,o,s){return this._styleExpression.evaluateWithoutErrorHandling(n,r,i,a,o,s);},nb.prototype.evaluate=function(n,r,i,a,o,s){return this._styleExpression.evaluate(n,r,i,a,o,s);};var nx=function(n,r,i,a){this.kind=n,this.zoomStops=i,this._styleExpression=r,this.isStateDependent="camera"!==n&&!tw(r.expression),this.interpolationType=a;};function nE(n,r){if("error"===(n=n_(n,r)).result)return n;var i=n.value.expression,a=tE(i);if(!a&&!no(r))return na([new eN("","data expressions not supported")]);var o=tS(i,["zoom"]);if(!o&&!ns(r))return na([new eN("","zoom expressions not supported")]);var s=function n(r){var i=null;if(r instanceof tX)i=n(r.result);else if(r instanceof tW)for(var a=0,o=r.args;a<o.length&&!(i=n(o[a]));a+=1);else(r instanceof tO||r instanceof tG)&&r.input instanceof tu&&"zoom"===r.input.name&&(i=r);return i instanceof eN||r.eachChild(function(r){var a=n(r);a instanceof eN?i=a:!i&&a?i=new eN("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&a&&i!==a&&(i=new eN("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'));}),i;}(i);return s||o?s instanceof eN?na([s]):s instanceof tG&&!nl(r)?na([new eN("",'"interpolate" expressions cannot be used with this property')]):ni(s?new nx(a?"camera":"composite",n.value,s.labels,s instanceof tG?s.interpolation:void 0):new nb(a?"constant":"source",n.value)):na([new eN("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);}nx.prototype.evaluateWithoutErrorHandling=function(n,r,i,a,o,s){return this._styleExpression.evaluateWithoutErrorHandling(n,r,i,a,o,s);},nx.prototype.evaluate=function(n,r,i,a,o,s){return this._styleExpression.evaluate(n,r,i,a,o,s);},nx.prototype.interpolationFactor=function(n,r,i){return this.interpolationType?tG.interpolationFactor(this.interpolationType,n,r,i):0;};var nw=function(n,r){this._parameters=n,this._specification=r,ek(this,function n(r,i){var a,o,s,l="color"===i.type,u=r.stops&&"object"==typeof r.stops[0][0],c=u||!(u||void 0!==r.property),f=r.type||(nl(i)?"exponential":"interval");if(l&&((r=ek({},r)).stops&&(r.stops=r.stops.map(function(n){return[n[0],e0.parse(n[1])];})),r.default=e0.parse(r.default?r.default:i.default)),r.colorSpace&&"rgb"!==r.colorSpace&&!tV[r.colorSpace])throw Error("Unknown color space: "+r.colorSpace);if("exponential"===f)a=nm;else if("interval"===f)a=np;else if("categorical"===f){a=nh,o=Object.create(null);for(var d=0,h=r.stops;d<h.length;d+=1){var p=h[d];o[p[0]]=p[1];}s=typeof r.stops[0][0];}else{if("identity"!==f)throw Error('Unknown function type "'+f+'"');a=ng;}if(u){for(var m={},g=[],v=0;v<r.stops.length;v++){var y=r.stops[v],_=y[0].zoom;void 0===m[_]&&(m[_]={zoom:_,type:r.type,property:r.property,default:r.default,stops:[]},g.push(_)),m[_].stops.push([y[0].value,y[1]]);}for(var b=[],x=0;x<g.length;x+=1){var E=g[x];b.push([m[E].zoom,n(m[E],i)]);}var w={name:"linear"};return{kind:"composite",interpolationType:w,interpolationFactor:tG.interpolationFactor.bind(void 0,w),zoomStops:b.map(function(n){return n[0];}),evaluate:function(n,a){var o=n.zoom;return nm({stops:b,base:r.base},i,o).evaluate(o,a);}};}if(c){var S="exponential"===f?{name:"exponential",base:void 0!==r.base?r.base:1}:null;return{kind:"camera",interpolationType:S,interpolationFactor:tG.interpolationFactor.bind(void 0,S),zoomStops:r.stops.map(function(n){return n[0];}),evaluate:function(n){return a(r,i,n.zoom,o,s);}};}return{kind:"source",evaluate:function(n,l){var u=l&&l.properties?l.properties[r.property]:void 0;return void 0===u?nd(r.default,i.default):a(r,i,u,o,s);}};}(this._parameters,this._specification));};function nS(n){var r=n.key,i=n.value,a=n.valueSpec||{},o=n.objectElementValidators||{},s=n.style,l=n.styleSpec,u=[],c=nu(i);if("object"!==c)return[new eR(r,i,"object expected, "+c+" found")];for(var f in i){var d=f.split(".")[0],h=a[d]||a["*"],p=void 0;if(o[d])p=o[d];else if(a[d])p=n$;else if(o["*"])p=o["*"];else{if(!a["*"]){u.push(new eR(r,i[f],'unknown property "'+f+'"'));continue;}p=n$;}u=u.concat(p({key:(r?r+".":r)+f,value:i[f],valueSpec:h,style:s,styleSpec:l,object:i,objectKey:f},i));}for(var m in a)o[m]||a[m].required&&void 0===a[m].default&&void 0===i[m]&&u.push(new eR(r,i,'missing required property "'+m+'"'));return u;}function nT(n){var r=n.value,i=n.valueSpec,a=n.style,o=n.styleSpec,s=n.key,l=n.arrayElementValidator||n$;if("array"!==nu(r))return[new eR(s,r,"array expected, "+nu(r)+" found")];if(i.length&&r.length!==i.length)return[new eR(s,r,"array length "+i.length+" expected, length "+r.length+" found")];if(i["min-length"]&&r.length<i["min-length"])return[new eR(s,r,"array length at least "+i["min-length"]+" expected, length "+r.length+" found")];var u={type:i.value,values:i.values};o.$version<7&&(u.function=i.function),"object"===nu(i.value)&&(u=i.value);for(var c=[],f=0;f<r.length;f++)c=c.concat(l({array:r,arrayIndex:f,value:r[f],valueSpec:u,style:a,styleSpec:o,key:s+"["+f+"]"}));return c;}function nA(n){var r=n.key,i=n.value,a=n.valueSpec,o=nu(i);return"number"===o&&i!=i&&(o="NaN"),"number"!==o?[new eR(r,i,"number expected, "+o+" found")]:"minimum"in a&&i<a.minimum?[new eR(r,i,i+" is less than the minimum value "+a.minimum)]:"maximum"in a&&i>a.maximum?[new eR(r,i,i+" is greater than the maximum value "+a.maximum)]:[];}function nC(n){var r,i,a,o=n.valueSpec,s=eI(n.value.type),l={},u="categorical"!==s&&void 0===n.value.property,c="array"===nu(n.value.stops)&&"array"===nu(n.value.stops[0])&&"object"===nu(n.value.stops[0][0]),f=nS({key:n.key,value:n.value,valueSpec:n.styleSpec.function,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:function(n){if("identity"===s)return[new eR(n.key,n.value,'identity function may not have a "stops" property')];var r=[],i=n.value;return r=r.concat(nT({key:n.key,value:i,valueSpec:n.valueSpec,style:n.style,styleSpec:n.styleSpec,arrayElementValidator:d})),"array"===nu(i)&&0===i.length&&r.push(new eR(n.key,i,"array must have at least one stop")),r;},default:function(n){return n$({key:n.key,value:n.value,valueSpec:o,style:n.style,styleSpec:n.styleSpec});}}});return"identity"===s&&u&&f.push(new eR(n.key,n.value,'missing required property "property"')),"identity"===s||n.value.stops||f.push(new eR(n.key,n.value,'missing required property "stops"')),"exponential"===s&&n.valueSpec.expression&&!nl(n.valueSpec)&&f.push(new eR(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(u||no(n.valueSpec)?u&&!ns(n.valueSpec)&&f.push(new eR(n.key,n.value,"zoom functions not supported")):f.push(new eR(n.key,n.value,"property functions not supported"))),("categorical"===s||c)&&void 0===n.value.property&&f.push(new eR(n.key,n.value,'"property" property is required')),f;function d(n){var r=[],s=n.value,u=n.key;if("array"!==nu(s))return[new eR(u,s,"array expected, "+nu(s)+" found")];if(2!==s.length)return[new eR(u,s,"array length 2 expected, length "+s.length+" found")];if(c){if("object"!==nu(s[0]))return[new eR(u,s,"object expected, "+nu(s[0])+" found")];if(void 0===s[0].zoom)return[new eR(u,s,"object stop key must have zoom")];if(void 0===s[0].value)return[new eR(u,s,"object stop key must have value")];if(a&&a>eI(s[0].zoom))return[new eR(u,s[0].zoom,"stop zoom values must appear in ascending order")];eI(s[0].zoom)!==a&&(a=eI(s[0].zoom),i=void 0,l={}),r=r.concat(nS({key:u+"[0]",value:s[0],valueSpec:{zoom:{}},style:n.style,styleSpec:n.styleSpec,objectElementValidators:{zoom:nA,value:h}}));}else r=r.concat(h({key:u+"[0]",value:s[0],valueSpec:{},style:n.style,styleSpec:n.styleSpec},s));return ny(eL(s[1]))?r.concat([new eR(u+"[1]",s[1],"expressions are not allowed in function stops.")]):r.concat(n$({key:u+"[1]",value:s[1],valueSpec:o,style:n.style,styleSpec:n.styleSpec}));}function h(n,a){var u=nu(n.value),c=eI(n.value),f=null!==n.value?n.value:a;if(r){if(u!==r)return[new eR(n.key,f,u+" stop domain type must match previous stop domain type "+r)];}else r=u;if("number"!==u&&"string"!==u&&"boolean"!==u)return[new eR(n.key,f,"stop domain value must be a number, string, or boolean")];if("number"!==u&&"categorical"!==s){var d="number expected, "+u+" found";return no(o)&&void 0===s&&(d+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new eR(n.key,f,d)];}return"categorical"!==s||"number"!==u||isFinite(c)&&Math.floor(c)===c?"categorical"!==s&&"number"===u&&void 0!==i&&c<i?[new eR(n.key,f,"stop domain values must appear in ascending order")]:(i=c,"categorical"===s&&c in l?[new eR(n.key,f,"stop domain values must be unique")]:(l[c]=!0,[])):[new eR(n.key,f,"integer expected, found "+c)];}}function nO(n){var r=("property"===n.expressionContext?nE:n_)(eL(n.value),n.valueSpec);if("error"===r.result)return r.value.map(function(r){return new eR(""+n.key+r.key,n.value,r.message);});var i=r.value.expression||r.value._styleExpression.expression;if("property"===n.expressionContext&&"text-font"===n.propertyKey&&!i.outputDefined())return[new eR(n.key,n.value,'Invalid data expression for "'+n.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===n.expressionContext&&"layout"===n.propertyType&&!tw(i))return[new eR(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===n.expressionContext&&!tw(i))return[new eR(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&0===n.expressionContext.indexOf("cluster")){if(!tS(i,["zoom","feature-state"]))return[new eR(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===n.expressionContext&&!tE(i))return[new eR(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")];}return[];}function nM(n){var r=n.key,i=n.value,a=n.valueSpec,o=[];return Array.isArray(a.values)?-1===a.values.indexOf(eI(i))&&o.push(new eR(r,i,"expected one of ["+a.values.join(", ")+"], "+JSON.stringify(i)+" found")):-1===Object.keys(a.values).indexOf(eI(i))&&o.push(new eR(r,i,"expected one of ["+Object.keys(a.values).join(", ")+"], "+JSON.stringify(i)+" found")),o;}function nR(n){if(!0===n||!1===n)return!0;if(!Array.isArray(n)||0===n.length)return!1;switch(n[0]){case"has":return n.length>=2&&"$id"!==n[1]&&"$type"!==n[1];case"in":return n.length>=3&&("string"!=typeof n[1]||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==n.length||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(var r=0,i=n.slice(1);r<i.length;r+=1){var a=i[r];if(!nR(a)&&"boolean"!=typeof a)return!1;}return!0;default:return!0;}}nw.deserialize=function(n){return new nw(n._parameters,n._specification);},nw.serialize=function(n){return{_parameters:n._parameters,_specification:n._specification};};var nP={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function nk(n){if(null==n)return{filter:function(){return!0;},needGeometry:!1};nR(n)||(n=function n(r){if(!r)return!0;var i=r[0];return r.length<=1?"any"!==i:"=="===i?nL(r[1],r[2],"=="):"!="===i?nF(nL(r[1],r[2],"==")):"<"===i||">"===i||"<="===i||">="===i?nL(r[1],r[2],i):"any"===i?["any"].concat(r.slice(1).map(n)):"all"===i?["all"].concat(r.slice(1).map(n)):"none"===i?["all"].concat(r.slice(1).map(n).map(nF)):"in"===i?nN(r[1],r.slice(2)):"!in"===i?nF(nN(r[1],r.slice(2))):"has"===i?nD(r[1]):"!has"===i?nF(nD(r[1])):"within"!==i||r;}(n));var r=n_(n,nP);if("error"===r.result)throw Error(r.value.map(function(n){return n.key+": "+n.message;}).join(", "));return{filter:function(n,i,a){return r.value.evaluate(n,i,{},a);},needGeometry:function n(r){if(!Array.isArray(r))return!1;if("within"===r[0])return!0;for(var i=1;i<r.length;i++)if(n(r[i]))return!0;return!1;}(n)};}function nI(n,r){return n<r?-1:n>r?1:0;}function nL(n,r,i){switch(n){case"$type":return["filter-type-"+i,r];case"$id":return["filter-id-"+i,r];default:return["filter-"+i,n,r];}}function nN(n,r){if(0===r.length)return!1;switch(n){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(function(n){return typeof n!=typeof r[0];})?["filter-in-large",n,["literal",r.sort(nI)]]:["filter-in-small",n,["literal",r]];}}function nD(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n];}}function nF(n){return["!",n];}function nB(n){return nR(eL(n.value))?nO(ek({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function n(r){var i=r.value,a=r.key;if("array"!==nu(i))return[new eR(a,i,"array expected, "+nu(i)+" found")];var o,s=r.styleSpec,l=[];if(i.length<1)return[new eR(a,i,"filter array must have at least 1 element")];switch(l=l.concat(nM({key:a+"[0]",value:i[0],valueSpec:s.filter_operator,style:r.style,styleSpec:r.styleSpec})),eI(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&"$type"===eI(i[1])&&l.push(new eR(a,i,'"$type" cannot be use with operator "'+i[0]+'"'));case"==":case"!=":3!==i.length&&l.push(new eR(a,i,'filter array for operator "'+i[0]+'" must have 3 elements'));case"in":case"!in":i.length>=2&&"string"!==(o=nu(i[1]))&&l.push(new eR(a+"[1]",i[1],"string expected, "+o+" found"));for(var u=2;u<i.length;u++)o=nu(i[u]),"$type"===eI(i[1])?l=l.concat(nM({key:a+"["+u+"]",value:i[u],valueSpec:s.geometry_type,style:r.style,styleSpec:r.styleSpec})):"string"!==o&&"number"!==o&&"boolean"!==o&&l.push(new eR(a+"["+u+"]",i[u],"string, number, or boolean expected, "+o+" found"));break;case"any":case"all":case"none":for(var c=1;c<i.length;c++)l=l.concat(n({key:a+"["+c+"]",value:i[c],style:r.style,styleSpec:r.styleSpec}));break;case"has":case"!has":o=nu(i[1]),2!==i.length?l.push(new eR(a,i,'filter array for "'+i[0]+'" operator must have 2 elements')):"string"!==o&&l.push(new eR(a+"[1]",i[1],"string expected, "+o+" found"));break;case"within":o=nu(i[1]),2!==i.length?l.push(new eR(a,i,'filter array for "'+i[0]+'" operator must have 2 elements')):"object"!==o&&l.push(new eR(a+"[1]",i[1],"object expected, "+o+" found"));}return l;}(n);}function nj(n,r){var i=n.key,a=n.style,o=n.styleSpec,s=n.value,l=n.objectKey,u=o[r+"_"+n.layerType];if(!u)return[];var c=l.match(/^(.*)-transition$/);if("paint"===r&&c&&u[c[1]]&&u[c[1]].transition)return n$({key:i,value:s,valueSpec:o.transition,style:a,styleSpec:o});var f,d=n.valueSpec||u[l];if(!d)return[new eR(i,s,'unknown property "'+l+'"')];if("string"===nu(s)&&no(d)&&!d.tokens&&(f=/^{([^}]+)}$/.exec(s)))return[new eR(i,s,'"'+l+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(f[1])+" }`.")];var h=[];return"symbol"===n.layerType&&("text-field"===l&&a&&!a.glyphs&&h.push(new eR(i,s,'use of "text-field" requires a style "glyphs" property')),"text-font"===l&&nc(eL(s))&&"identity"===eI(s.type)&&h.push(new eR(i,s,'"text-font" does not support identity functions'))),h.concat(n$({key:n.key,value:s,valueSpec:d,style:a,styleSpec:o,expressionContext:"property",propertyType:r,propertyKey:l}));}function nz(n){return nj(n,"paint");}function nU(n){return nj(n,"layout");}function nV(n){var r=[],i=n.value,a=n.key,o=n.style,s=n.styleSpec;i.type||i.ref||r.push(new eR(a,i,'either "type" or "ref" is required'));var l,u=eI(i.type),c=eI(i.ref);if(i.id)for(var f=eI(i.id),d=0;d<n.arrayIndex;d++){var h=o.layers[d];eI(h.id)===f&&r.push(new eR(a,i.id,'duplicate layer id "'+i.id+'", previously used at line '+h.id.__line__));}if("ref"in i)["type","source","source-layer","filter","layout"].forEach(function(n){n in i&&r.push(new eR(a,i[n],'"'+n+'" is prohibited for ref layers'));}),o.layers.forEach(function(n){eI(n.id)===c&&(l=n);}),l?l.ref?r.push(new eR(a,i.ref,"ref cannot reference another ref layer")):u=eI(l.type):r.push(new eR(a,i.ref,'ref layer "'+c+'" not found'));else if("background"!==u){if(i.source){var p=o.sources&&o.sources[i.source],m=p&&eI(p.type);p?"vector"===m&&"raster"===u?r.push(new eR(a,i.source,'layer "'+i.id+'" requires a raster source')):"raster"===m&&"raster"!==u?r.push(new eR(a,i.source,'layer "'+i.id+'" requires a vector source')):"vector"!==m||i["source-layer"]?"raster-dem"===m&&"hillshade"!==u?r.push(new eR(a,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"===u&&i.paint&&i.paint["line-gradient"]&&("geojson"!==m||!p.lineMetrics)&&r.push(new eR(a,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):r.push(new eR(a,i,'layer "'+i.id+'" must specify a "source-layer"')):r.push(new eR(a,i.source,'source "'+i.source+'" not found'));}else r.push(new eR(a,i,'missing required property "source"'));}return r=r.concat(nS({key:a,value:i,valueSpec:s.layer,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{"*":function(){return[];},type:function(){return n$({key:a+".type",value:i.type,valueSpec:s.layer.type,style:n.style,styleSpec:n.styleSpec,object:i,objectKey:"type"});},filter:nB,layout:function(n){return nS({layer:i,key:n.key,value:n.value,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{"*":function(n){return nU(ek({layerType:u},n));}}});},paint:function(n){return nS({layer:i,key:n.key,value:n.value,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{"*":function(n){return nz(ek({layerType:u},n));}}});}}}));}function nG(n){var r=n.value,i=n.key,a=nu(r);return"string"!==a?[new eR(i,r,"string expected, "+a+" found")]:[];}var nH={promoteId:function(n){var r=n.key,i=n.value;if("string"===nu(i))return nG({key:r,value:i});var a=[];for(var o in i)a.push.apply(a,nG({key:r+"."+o,value:i[o]}));return a;}};function nW(n){var r=n.value,i=n.key,a=n.styleSpec,o=n.style;if(!r.type)return[new eR(i,r,'"type" is required')];var s,l=eI(r.type);switch(l){case"vector":case"raster":case"raster-dem":return nS({key:i,value:r,valueSpec:a["source_"+l.replace("-","_")],style:n.style,styleSpec:a,objectElementValidators:nH});case"geojson":if(s=nS({key:i,value:r,valueSpec:a.source_geojson,style:o,styleSpec:a,objectElementValidators:nH}),r.cluster)for(var u in r.clusterProperties){var c=r.clusterProperties[u],f=c[0],d="string"==typeof f?[f,["accumulated"],["get",u]]:f;s.push.apply(s,nO({key:i+"."+u+".map",value:c[1],expressionContext:"cluster-map"})),s.push.apply(s,nO({key:i+"."+u+".reduce",value:d,expressionContext:"cluster-reduce"}));}return s;case"video":return nS({key:i,value:r,valueSpec:a.source_video,style:o,styleSpec:a});case"image":return nS({key:i,value:r,valueSpec:a.source_image,style:o,styleSpec:a});case"canvas":return[new eR(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return nM({key:i+".type",value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:o,styleSpec:a});}}function nX(n){var r=n.value,i=n.styleSpec,a=i.light,o=n.style,s=[],l=nu(r);if(void 0===r)return s;if("object"!==l)return s.concat([new eR("light",r,"object expected, "+l+" found")]);for(var u in r){var c=u.match(/^(.*)-transition$/);s=s.concat(c&&a[c[1]]&&a[c[1]].transition?n$({key:u,value:r[u],valueSpec:i.transition,style:o,styleSpec:i}):a[u]?n$({key:u,value:r[u],valueSpec:a[u],style:o,styleSpec:i}):[new eR(u,r[u],'unknown property "'+u+'"')]);}return s;}var nq={"*":function(){return[];},array:nT,boolean:function(n){var r=n.value,i=n.key,a=nu(r);return"boolean"!==a?[new eR(i,r,"boolean expected, "+a+" found")]:[];},number:nA,color:function(n){var r=n.key,i=n.value,a=nu(i);return"string"!==a?[new eR(r,i,"color expected, "+a+" found")]:null===eJ(i)?[new eR(r,i,'color expected, "'+i+'" found')]:[];},constants:eP,enum:nM,filter:nB,function:nC,layer:nV,object:nS,source:nW,light:nX,string:nG,formatted:function(n){return 0===nG(n).length?[]:nO(n);},resolvedImage:function(n){return 0===nG(n).length?[]:nO(n);}};function n$(n){var r=n.value,i=n.valueSpec,a=n.styleSpec;return i.expression&&nc(eI(r))?nC(n):i.expression&&ny(eL(r))?nO(n):i.type&&nq[i.type]?nq[i.type](n):nS(ek({},n,{valueSpec:i.type?a[i.type]:i}));}function nY(n){var r=n.value,i=n.key,a=nG(n);return a.length||(-1===r.indexOf("{fontstack}")&&a.push(new eR(i,r,'"glyphs" url must include a "{fontstack}" token')),-1===r.indexOf("{range}")&&a.push(new eR(i,r,'"glyphs" url must include a "{range}" token'))),a;}function nZ(n,r){void 0===r&&(r=eM);var i=[];return i=i.concat(n$({key:"",value:n,valueSpec:r.$root,styleSpec:r,style:n,objectElementValidators:{glyphs:nY,"*":function(){return[];}}})),n.constants&&(i=i.concat(eP({key:"constants",value:n.constants,style:n,styleSpec:r}))),nK(i);}function nK(n){return[].concat(n).sort(function(n,r){return n.line-r.line;});}function nQ(n){return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return nK(n.apply(this,r));};}nZ.source=nQ(nW),nZ.light=nQ(nX),nZ.layer=nQ(nV),nZ.filter=nQ(nB),nZ.paintProperty=nQ(nz),nZ.layoutProperty=nQ(nU);var nJ=nZ.light,n0=nZ.paintProperty,n1=nZ.layoutProperty;function n2(n,r){var i=!1;if(r&&r.length)for(var a=0;a<r.length;a+=1)n.fire(new eC(Error(r[a].message))),i=!0;return i;}function n3(n,r,i){var a=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;var o=new Int32Array(this.arrayBuffer);n=o[0],this.d=(r=o[1])+2*(i=o[2]);for(var s=0;s<this.d*this.d;s++){var l=o[3+s],u=o[3+s+1];a.push(l===u?null:o.subarray(l,u));}var c=o[3+a.length+1];this.keys=o.subarray(o[3+a.length],c),this.bboxes=o.subarray(c),this.insert=this._insertReadonly;}else{this.d=r+2*i;for(var f=0;f<this.d*this.d;f++)a.push([]);this.keys=[],this.bboxes=[];}this.n=r,this.extent=n,this.padding=i,this.scale=r/n,this.uid=0;var d=i/r*n;this.min=-d,this.max=n+d;}n3.prototype.insert=function(n,r,i,a,o){this._forEachCell(r,i,a,o,this._insertCell,this.uid++),this.keys.push(n),this.bboxes.push(r),this.bboxes.push(i),this.bboxes.push(a),this.bboxes.push(o);},n3.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer.";},n3.prototype._insertCell=function(n,r,i,a,o,s){this.cells[o].push(s);},n3.prototype.query=function(n,r,i,a,o){var s=this.min,l=this.max;if(n<=s&&r<=s&&l<=i&&l<=a&&!o)return Array.prototype.slice.call(this.keys);var u=[];return this._forEachCell(n,r,i,a,this._queryCell,u,{},o),u;},n3.prototype._queryCell=function(n,r,i,a,o,s,l,u){var c=this.cells[o];if(null!==c)for(var f=this.keys,d=this.bboxes,h=0;h<c.length;h++){var p=c[h];if(void 0===l[p]){var m=4*p;(u?u(d[m+0],d[m+1],d[m+2],d[m+3]):n<=d[m+2]&&r<=d[m+3]&&i>=d[m+0]&&a>=d[m+1])?(l[p]=!0,s.push(f[p])):l[p]=!1;}}},n3.prototype._forEachCell=function(n,r,i,a,o,s,l,u){for(var c=this._convertToCellCoord(n),f=this._convertToCellCoord(r),d=this._convertToCellCoord(i),h=this._convertToCellCoord(a),p=c;p<=d;p++)for(var m=f;m<=h;m++){var g=this.d*m+p;if((!u||u(this._convertFromCellCoord(p),this._convertFromCellCoord(m),this._convertFromCellCoord(p+1),this._convertFromCellCoord(m+1)))&&o.call(this,n,r,i,a,g,s,l,u))return;}},n3.prototype._convertFromCellCoord=function(n){return(n-this.padding)/this.scale;},n3.prototype._convertToCellCoord=function(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding));},n3.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var n=this.cells,r=3+this.cells.length+1+1,i=0,a=0;a<this.cells.length;a++)i+=this.cells[a].length;var o=new Int32Array(r+i+this.keys.length+this.bboxes.length);o[0]=this.extent,o[1]=this.n,o[2]=this.padding;for(var s=r,l=0;l<n.length;l++){var u=n[l];o[3+l]=s,o.set(u,s),s+=u.length;}return o[3+n.length]=s,o.set(this.keys,s),o[3+n.length+1]=s+=this.keys.length,o.set(this.bboxes,s),s+=this.bboxes.length,o.buffer;};var n4=u.ImageData,n5=u.ImageBitmap,n6={};function n8(n,r,i){void 0===i&&(i={}),Object.defineProperty(r,"_classRegistryKey",{value:n,writeable:!1}),n6[n]={klass:r,omit:i.omit||[],shallow:i.shallow||[]};}for(var n7 in n8("Object",Object),n3.serialize=function(n,r){var i=n.toArrayBuffer();return r&&r.push(i),{buffer:i};},n3.deserialize=function(n){return new n3(n.buffer);},n8("Grid",n3),n8("Color",e0),n8("Error",Error),n8("ResolvedImage",e4),n8("StylePropertyFunction",nw),n8("StyleExpression",nv,{omit:["_evaluator"]}),n8("ZoomDependentExpression",nx),n8("ZoomConstantExpression",nb),n8("CompoundExpression",tu,{omit:["_evaluate"]}),ne)ne[n7]._classRegistryKey||n8("Expression_"+n7,ne[n7]);function n9(n){return n&&"undefined"!=typeof ArrayBuffer&&(n instanceof ArrayBuffer||n.constructor&&"ArrayBuffer"===n.constructor.name);}function re(n){return n5&&n instanceof n5;}function rt(n,r){if(null==n||"boolean"==typeof n||"number"==typeof n||"string"==typeof n||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp)return n;if(n9(n)||re(n))return r&&r.push(n),n;if(ArrayBuffer.isView(n))return r&&r.push(n.buffer),n;if(n instanceof n4)return r&&r.push(n.data.buffer),n;if(Array.isArray(n)){for(var i=[],a=0;a<n.length;a+=1)i.push(rt(n[a],r));return i;}if("object"==typeof n){var o=n.constructor,s=o._classRegistryKey;if(!s)throw Error("can't serialize object of unregistered class");var l=o.serialize?o.serialize(n,r):{};if(!o.serialize){for(var u in n)if(n.hasOwnProperty(u)&&!(n6[s].omit.indexOf(u)>=0)){var c=n[u];l[u]=n6[s].shallow.indexOf(u)>=0?c:rt(c,r);}n instanceof Error&&(l.message=n.message);}if(l.$name)throw Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(l.$name=s),l;}throw Error("can't serialize object of type "+typeof n);}function rn(n){if(null==n||"boolean"==typeof n||"number"==typeof n||"string"==typeof n||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp||n9(n)||re(n)||ArrayBuffer.isView(n)||n instanceof n4)return n;if(Array.isArray(n))return n.map(rn);if("object"==typeof n){var r=n.$name||"Object",i=n6[r].klass;if(!i)throw Error("can't deserialize unregistered class "+r);if(i.deserialize)return i.deserialize(n);for(var a=Object.create(i.prototype),o=0,s=Object.keys(n);o<s.length;o+=1){var l=s[o];if("$name"!==l){var u=n[l];a[l]=n6[r].shallow.indexOf(l)>=0?u:rn(u);}}return a;}throw Error("can't deserialize object of type "+typeof n);}var rr=function(){this.first=!0;};rr.prototype.update=function(n,r){var i=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=r):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=r),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=i,!0));};var ri={"Latin-1 Supplement":function(n){return n>=128&&n<=255;},Arabic:function(n){return n>=1536&&n<=1791;},"Arabic Supplement":function(n){return n>=1872&&n<=1919;},"Arabic Extended-A":function(n){return n>=2208&&n<=2303;},"Hangul Jamo":function(n){return n>=4352&&n<=4607;},"Unified Canadian Aboriginal Syllabics":function(n){return n>=5120&&n<=5759;},Khmer:function(n){return n>=6016&&n<=6143;},"Unified Canadian Aboriginal Syllabics Extended":function(n){return n>=6320&&n<=6399;},"General Punctuation":function(n){return n>=8192&&n<=8303;},"Letterlike Symbols":function(n){return n>=8448&&n<=8527;},"Number Forms":function(n){return n>=8528&&n<=8591;},"Miscellaneous Technical":function(n){return n>=8960&&n<=9215;},"Control Pictures":function(n){return n>=9216&&n<=9279;},"Optical Character Recognition":function(n){return n>=9280&&n<=9311;},"Enclosed Alphanumerics":function(n){return n>=9312&&n<=9471;},"Geometric Shapes":function(n){return n>=9632&&n<=9727;},"Miscellaneous Symbols":function(n){return n>=9728&&n<=9983;},"Miscellaneous Symbols and Arrows":function(n){return n>=11008&&n<=11263;},"CJK Radicals Supplement":function(n){return n>=11904&&n<=12031;},"Kangxi Radicals":function(n){return n>=12032&&n<=12255;},"Ideographic Description Characters":function(n){return n>=12272&&n<=12287;},"CJK Symbols and Punctuation":function(n){return n>=12288&&n<=12351;},Hiragana:function(n){return n>=12352&&n<=12447;},Katakana:function(n){return n>=12448&&n<=12543;},Bopomofo:function(n){return n>=12544&&n<=12591;},"Hangul Compatibility Jamo":function(n){return n>=12592&&n<=12687;},Kanbun:function(n){return n>=12688&&n<=12703;},"Bopomofo Extended":function(n){return n>=12704&&n<=12735;},"CJK Strokes":function(n){return n>=12736&&n<=12783;},"Katakana Phonetic Extensions":function(n){return n>=12784&&n<=12799;},"Enclosed CJK Letters and Months":function(n){return n>=12800&&n<=13055;},"CJK Compatibility":function(n){return n>=13056&&n<=13311;},"CJK Unified Ideographs Extension A":function(n){return n>=13312&&n<=19903;},"Yijing Hexagram Symbols":function(n){return n>=19904&&n<=19967;},"CJK Unified Ideographs":function(n){return n>=19968&&n<=40959;},"Yi Syllables":function(n){return n>=40960&&n<=42127;},"Yi Radicals":function(n){return n>=42128&&n<=42191;},"Hangul Jamo Extended-A":function(n){return n>=43360&&n<=43391;},"Hangul Syllables":function(n){return n>=44032&&n<=55215;},"Hangul Jamo Extended-B":function(n){return n>=55216&&n<=55295;},"Private Use Area":function(n){return n>=57344&&n<=63743;},"CJK Compatibility Ideographs":function(n){return n>=63744&&n<=64255;},"Arabic Presentation Forms-A":function(n){return n>=64336&&n<=65023;},"Vertical Forms":function(n){return n>=65040&&n<=65055;},"CJK Compatibility Forms":function(n){return n>=65072&&n<=65103;},"Small Form Variants":function(n){return n>=65104&&n<=65135;},"Arabic Presentation Forms-B":function(n){return n>=65136&&n<=65279;},"Halfwidth and Fullwidth Forms":function(n){return n>=65280&&n<=65519;}};function ra(n){for(var r=0;r<n.length;r+=1)if(ro(n[r].charCodeAt(0)))return!0;return!1;}function ro(n){return!(746!==n&&747!==n&&(n<4352||!(ri["Bopomofo Extended"](n)||ri.Bopomofo(n)||ri["CJK Compatibility Forms"](n)&&!(n>=65097&&n<=65103)||ri["CJK Compatibility Ideographs"](n)||ri["CJK Compatibility"](n)||ri["CJK Radicals Supplement"](n)||ri["CJK Strokes"](n)||!(!ri["CJK Symbols and Punctuation"](n)||n>=12296&&n<=12305||n>=12308&&n<=12319||12336===n)||ri["CJK Unified Ideographs Extension A"](n)||ri["CJK Unified Ideographs"](n)||ri["Enclosed CJK Letters and Months"](n)||ri["Hangul Compatibility Jamo"](n)||ri["Hangul Jamo Extended-A"](n)||ri["Hangul Jamo Extended-B"](n)||ri["Hangul Jamo"](n)||ri["Hangul Syllables"](n)||ri.Hiragana(n)||ri["Ideographic Description Characters"](n)||ri.Kanbun(n)||ri["Kangxi Radicals"](n)||ri["Katakana Phonetic Extensions"](n)||ri.Katakana(n)&&12540!==n||!(!ri["Halfwidth and Fullwidth Forms"](n)||65288===n||65289===n||65293===n||n>=65306&&n<=65310||65339===n||65341===n||65343===n||n>=65371&&n<=65503||65507===n||n>=65512&&n<=65519)||!(!ri["Small Form Variants"](n)||n>=65112&&n<=65118||n>=65123&&n<=65126)||ri["Unified Canadian Aboriginal Syllabics"](n)||ri["Unified Canadian Aboriginal Syllabics Extended"](n)||ri["Vertical Forms"](n)||ri["Yijing Hexagram Symbols"](n)||ri["Yi Syllables"](n)||ri["Yi Radicals"](n))));}function rs(n){return!(ro(n)||ri["Latin-1 Supplement"](n)&&(167===n||169===n||174===n||177===n||188===n||189===n||190===n||215===n||247===n)||ri["General Punctuation"](n)&&(8214===n||8224===n||8225===n||8240===n||8241===n||8251===n||8252===n||8258===n||8263===n||8264===n||8265===n||8273===n)||ri["Letterlike Symbols"](n)||ri["Number Forms"](n)||ri["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||9003===n||n>=9085&&n<=9114||n>=9150&&n<=9165||9167===n||n>=9169&&n<=9179||n>=9186&&n<=9215)||ri["Control Pictures"](n)&&9251!==n||ri["Optical Character Recognition"](n)||ri["Enclosed Alphanumerics"](n)||ri["Geometric Shapes"](n)||ri["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||ri["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||ri["CJK Symbols and Punctuation"](n)||ri.Katakana(n)||ri["Private Use Area"](n)||ri["CJK Compatibility Forms"](n)||ri["Small Form Variants"](n)||ri["Halfwidth and Fullwidth Forms"](n)||8734===n||8756===n||8757===n||n>=9984&&n<=10087||n>=10102&&n<=10131||65532===n||65533===n);}function rl(n){return n>=1424&&n<=2303||ri["Arabic Presentation Forms-A"](n)||ri["Arabic Presentation Forms-B"](n);}var ru=null,rc="unavailable",rf=null,rd=function(n){n&&"string"==typeof n&&n.indexOf("NetworkError")>-1&&(rc="error"),ru&&ru(n);};function rh(){rp.fire(new eA("pluginStateChange",{pluginStatus:rc,pluginURL:rf}));}var rp=new eO,rm=function(){return rc;},rg=function(){if("deferred"!==rc||!rf)throw Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");rc="loading",rh(),rf&&eb({url:rf},function(n){n?rd(n):(rc="loaded",rh());});},rv={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===rc||null!=rv.applyArabicShaping;},isLoading:function(){return"loading"===rc;},setState:function(n){rc=n.pluginStatus,rf=n.pluginURL;},isParsed:function(){return null!=rv.applyArabicShaping&&null!=rv.processBidirectionalText&&null!=rv.processStyledBidirectionalText;},getPluginURL:function(){return rf;}},ry=function(n,r){this.zoom=n,r?(this.now=r.now,this.fadeDuration=r.fadeDuration,this.zoomHistory=r.zoomHistory,this.transition=r.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new rr,this.transition={});};ry.prototype.isSupportedScript=function(n){return function(n,r){for(var i,a=0;a<n.length;a+=1)if(i=n[a].charCodeAt(0),!r&&rl(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||ri.Khmer(i))return!1;return!0;}(n,rv.isLoaded());},ry.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1);},ry.prototype.getCrossfadeParameters=function(){var n=this.zoom,r=n-Math.floor(n),i=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:r+(1-r)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*r};};var r_=function(n,r){this.property=n,this.value=r,this.expression=function(n,r){if(nc(n))return new nw(n,r);if(ny(n)){var i=nE(n,r);if("error"===i.result)throw Error(i.value.map(function(n){return n.key+": "+n.message;}).join(", "));return i.value;}var a=n;return"string"==typeof n&&"color"===r.type&&(a=e0.parse(n)),{kind:"constant",evaluate:function(){return a;}};}(void 0===r?n.specification.default:r,n.specification);};r_.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind;},r_.prototype.possiblyEvaluate=function(n,r,i){return this.property.possiblyEvaluate(this,n,r,i);};var rb=function(n){this.property=n,this.value=new r_(n,void 0);};rb.prototype.transitioned=function(n,r){return new rE(this.property,this.value,r,p({},n.transition,this.transition),n.now);},rb.prototype.untransitioned=function(){return new rE(this.property,this.value,null,{},0);};var rx=function(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues);};rx.prototype.getValue=function(n){return w(this._values[n].value.value);},rx.prototype.setValue=function(n,r){this._values.hasOwnProperty(n)||(this._values[n]=new rb(this._values[n].property)),this._values[n].value=new r_(this._values[n].property,null===r?void 0:w(r));},rx.prototype.getTransition=function(n){return w(this._values[n].transition);},rx.prototype.setTransition=function(n,r){this._values.hasOwnProperty(n)||(this._values[n]=new rb(this._values[n].property)),this._values[n].transition=w(r)||void 0;},rx.prototype.serialize=function(){for(var n={},r=0,i=Object.keys(this._values);r<i.length;r+=1){var a=i[r],o=this.getValue(a);void 0!==o&&(n[a]=o);var s=this.getTransition(a);void 0!==s&&(n[a+"-transition"]=s);}return n;},rx.prototype.transitioned=function(n,r){for(var i=new rw(this._properties),a=0,o=Object.keys(this._values);a<o.length;a+=1){var s=o[a];i._values[s]=this._values[s].transitioned(n,r._values[s]);}return i;},rx.prototype.untransitioned=function(){for(var n=new rw(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var a=i[r];n._values[a]=this._values[a].untransitioned();}return n;};var rE=function(n,r,i,a,o){this.property=n,this.value=r,this.begin=o+a.delay||0,this.end=this.begin+a.duration||0,n.specification.transition&&(a.delay||a.duration)&&(this.prior=i);};rE.prototype.possiblyEvaluate=function(n,r,i){var a=n.now||0,o=this.value.possiblyEvaluate(n,r,i),s=this.prior;if(s){if(a>this.end||this.value.isDataDriven())return this.prior=null,o;if(a<this.begin)return s.possiblyEvaluate(n,r,i);var l=(a-this.begin)/(this.end-this.begin);return this.property.interpolate(s.possiblyEvaluate(n,r,i),o,function(n){if(n<=0)return 0;if(n>=1)return 1;var r=n*n,i=r*n;return 4*(n<.5?i:3*(n-r)+i-.75);}(l));}return o;};var rw=function(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues);};rw.prototype.possiblyEvaluate=function(n,r,i){for(var a=new rA(this._properties),o=0,s=Object.keys(this._values);o<s.length;o+=1){var l=s[o];a._values[l]=this._values[l].possiblyEvaluate(n,r,i);}return a;},rw.prototype.hasTransition=function(){for(var n=0,r=Object.keys(this._values);n<r.length;n+=1)if(this._values[r[n]].prior)return!0;return!1;};var rS=function(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues);};rS.prototype.getValue=function(n){return w(this._values[n].value);},rS.prototype.setValue=function(n,r){this._values[n]=new r_(this._values[n].property,null===r?void 0:w(r));},rS.prototype.serialize=function(){for(var n={},r=0,i=Object.keys(this._values);r<i.length;r+=1){var a=i[r],o=this.getValue(a);void 0!==o&&(n[a]=o);}return n;},rS.prototype.possiblyEvaluate=function(n,r,i){for(var a=new rA(this._properties),o=0,s=Object.keys(this._values);o<s.length;o+=1){var l=s[o];a._values[l]=this._values[l].possiblyEvaluate(n,r,i);}return a;};var rT=function(n,r,i){this.property=n,this.value=r,this.parameters=i;};rT.prototype.isConstant=function(){return"constant"===this.value.kind;},rT.prototype.constantOr=function(n){return"constant"===this.value.kind?this.value.value:n;},rT.prototype.evaluate=function(n,r,i,a){return this.property.evaluate(this.value,this.parameters,n,r,i,a);};var rA=function(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues);};rA.prototype.get=function(n){return this._values[n];};var rC=function(n){this.specification=n;};rC.prototype.possiblyEvaluate=function(n,r){return n.expression.evaluate(r);},rC.prototype.interpolate=function(n,r,i){var a=tR[this.specification.type];return a?a(n,r,i):n;};var rO=function(n,r){this.specification=n,this.overrides=r;};rO.prototype.possiblyEvaluate=function(n,r,i,a){return new rT(this,"constant"===n.expression.kind||"camera"===n.expression.kind?{kind:"constant",value:n.expression.evaluate(r,null,{},i,a)}:n.expression,r);},rO.prototype.interpolate=function(n,r,i){if("constant"!==n.value.kind||"constant"!==r.value.kind)return n;if(void 0===n.value.value||void 0===r.value.value)return new rT(this,{kind:"constant",value:void 0},n.parameters);var a=tR[this.specification.type];return a?new rT(this,{kind:"constant",value:a(n.value.value,r.value.value,i)},n.parameters):n;},rO.prototype.evaluate=function(n,r,i,a,o,s){return"constant"===n.kind?n.value:n.evaluate(r,i,a,o,s);};var rM=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.possiblyEvaluate=function(n,r,i,a){if(void 0===n.value)return new rT(this,{kind:"constant",value:void 0},r);if("constant"===n.expression.kind){var o=n.expression.evaluate(r,null,{},i,a),s="resolvedImage"===n.property.specification.type&&"string"!=typeof o?o.name:o;return new rT(this,{kind:"constant",value:this._calculate(s,s,s,r)},r);}return"camera"===n.expression.kind?new rT(this,{kind:"constant",value:this._calculate(n.expression.evaluate({zoom:r.zoom-1}),n.expression.evaluate({zoom:r.zoom}),n.expression.evaluate({zoom:r.zoom+1}),r)},r):new rT(this,n.expression,r);},r.prototype.evaluate=function(n,r,i,a,o,s){if("source"===n.kind){var l=n.evaluate(r,i,a,o,s);return this._calculate(l,l,l,r);}return"composite"===n.kind?this._calculate(n.evaluate({zoom:Math.floor(r.zoom)-1},i,a),n.evaluate({zoom:Math.floor(r.zoom)},i,a),n.evaluate({zoom:Math.floor(r.zoom)+1},i,a),r):n.value;},r.prototype._calculate=function(n,r,i,a){return a.zoom>a.zoomHistory.lastIntegerZoom?{from:n,to:r}:{from:i,to:r};},r.prototype.interpolate=function(n){return n;},r;}(rO),rR=function(n){this.specification=n;};rR.prototype.possiblyEvaluate=function(n,r,i,a){if(void 0!==n.value){if("constant"===n.expression.kind){var o=n.expression.evaluate(r,null,{},i,a);return this._calculate(o,o,o,r);}return this._calculate(n.expression.evaluate(new ry(Math.floor(r.zoom-1),r)),n.expression.evaluate(new ry(Math.floor(r.zoom),r)),n.expression.evaluate(new ry(Math.floor(r.zoom+1),r)),r);}},rR.prototype._calculate=function(n,r,i,a){return a.zoom>a.zoomHistory.lastIntegerZoom?{from:n,to:r}:{from:i,to:r};},rR.prototype.interpolate=function(n){return n;};var rP=function(n){this.specification=n;};rP.prototype.possiblyEvaluate=function(n,r,i,a){return!!n.expression.evaluate(r,null,{},i,a);},rP.prototype.interpolate=function(){return!1;};var rk=function(n){for(var r in this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],n){var i=n[r];i.specification.overridable&&this.overridableProperties.push(r);var a=this.defaultPropertyValues[r]=new r_(i,void 0),o=this.defaultTransitionablePropertyValues[r]=new rb(i);this.defaultTransitioningPropertyValues[r]=o.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=a.possiblyEvaluate({});}};n8("DataDrivenProperty",rO),n8("DataConstantProperty",rC),n8("CrossFadedDataDrivenProperty",rM),n8("CrossFadedProperty",rR),n8("ColorRampProperty",rP);var rI=function(n){function r(r,i){if(n.call(this),this.id=r.id,this.type=r.type,this._featureFilter={filter:function(){return!0;},needGeometry:!1},"custom"!==r.type&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,"background"!==r.type&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),i.layout&&(this._unevaluatedLayout=new rS(i.layout)),i.paint)){for(var a in this._transitionablePaint=new rx(i.paint),r.paint)this.setPaintProperty(a,r.paint[a],{validate:!1});for(var o in r.layout)this.setLayoutProperty(o,r.layout[o],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new rA(i.paint);}}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters;},r.prototype.getLayoutProperty=function(n){return"visibility"===n?this.visibility:this._unevaluatedLayout.getValue(n);},r.prototype.setLayoutProperty=function(n,r,i){void 0===i&&(i={}),null!=r&&this._validate(n1,"layers."+this.id+".layout."+n,n,r,i)||("visibility"!==n?this._unevaluatedLayout.setValue(n,r):this.visibility=r);},r.prototype.getPaintProperty=function(n){return b(n,"-transition")?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n);},r.prototype.setPaintProperty=function(n,r,i){if(void 0===i&&(i={}),null!=r&&this._validate(n0,"layers."+this.id+".paint."+n,n,r,i))return!1;if(b(n,"-transition"))return this._transitionablePaint.setTransition(n.slice(0,-11),r||void 0),!1;var a=this._transitionablePaint._values[n],o="cross-faded-data-driven"===a.property.specification["property-type"],s=a.value.isDataDriven(),l=a.value;this._transitionablePaint.setValue(n,r),this._handleSpecialPaintPropertyUpdate(n);var u=this._transitionablePaint._values[n].value;return u.isDataDriven()||s||o||this._handleOverridablePaintPropertyUpdate(n,l,u);},r.prototype._handleSpecialPaintPropertyUpdate=function(n){},r.prototype._handleOverridablePaintPropertyUpdate=function(n,r,i){return!1;},r.prototype.isHidden=function(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||"none"===this.visibility;},r.prototype.updateTransitions=function(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint);},r.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition();},r.prototype.recalculate=function(n,r){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,r)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,r);},r.prototype.serialize=function(){var n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),E(n,function(n,r){return!(void 0===n||"layout"===r&&!Object.keys(n).length||"paint"===r&&!Object.keys(n).length);});},r.prototype._validate=function(n,r,i,a,o){return void 0===o&&(o={}),(!o||!1!==o.validate)&&n2(this,n.call(nZ,{key:r,layerType:this.type,objectKey:i,value:a,styleSpec:eM,style:{glyphs:!0,sprite:!0}}));},r.prototype.is3D=function(){return!1;},r.prototype.isTileClipped=function(){return!1;},r.prototype.hasOffscreenPass=function(){return!1;},r.prototype.resize=function(){},r.prototype.isStateDependent=function(){for(var n in this.paint._values){var r=this.paint.get(n);if(r instanceof rT&&no(r.property.specification)&&("source"===r.value.kind||"composite"===r.value.kind)&&r.value.isStateDependent)return!0;}return!1;},r;}(eO),rL={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},rN=function(n,r){this._structArray=n,this._pos1=r*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8;},rD=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0);};function rF(n,r){void 0===r&&(r=1);var i=0,a=0;return{members:n.map(function(n){var o=rL[n.type].BYTES_PER_ELEMENT,s=i=rB(i,Math.max(r,o)),l=n.components||1;return a=Math.max(a,o),i+=o*l,{name:n.name,type:n.type,components:l,offset:s};}),size:rB(i,Math.max(a,r)),alignment:r};}function rB(n,r){return Math.ceil(n/r)*r;}rD.serialize=function(n,r){return n._trim(),r&&(n.isTransferred=!0,r.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer};},rD.deserialize=function(n){var r=Object.create(this.prototype);return r.arrayBuffer=n.arrayBuffer,r.length=n.length,r.capacity=n.arrayBuffer.byteLength/r.bytesPerElement,r._refreshViews(),r;},rD.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews());},rD.prototype.clear=function(){this.length=0;},rD.prototype.resize=function(n){this.reserve(n),this.length=n;},rD.prototype.reserve=function(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var r=this.uint8;this._refreshViews(),r&&this.uint8.set(r);}},rD.prototype._refreshViews=function(){throw Error("_refreshViews() must be implemented by each concrete StructArray layout");};var rj=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);},r.prototype.emplaceBack=function(n,r){var i=this.length;return this.resize(i+1),this.emplace(i,n,r);},r.prototype.emplace=function(n,r,i){var a=2*n;return this.int16[a+0]=r,this.int16[a+1]=i,n;},r;}(rD);rj.prototype.bytesPerElement=4,n8("StructArrayLayout2i4",rj);var rz=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);},r.prototype.emplaceBack=function(n,r,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,n,r,i,a);},r.prototype.emplace=function(n,r,i,a,o){var s=4*n;return this.int16[s+0]=r,this.int16[s+1]=i,this.int16[s+2]=a,this.int16[s+3]=o,n;},r;}(rD);rz.prototype.bytesPerElement=8,n8("StructArrayLayout4i8",rz);var rU=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);},r.prototype.emplaceBack=function(n,r,i,a,o,s){var l=this.length;return this.resize(l+1),this.emplace(l,n,r,i,a,o,s);},r.prototype.emplace=function(n,r,i,a,o,s,l){var u=6*n;return this.int16[u+0]=r,this.int16[u+1]=i,this.int16[u+2]=a,this.int16[u+3]=o,this.int16[u+4]=s,this.int16[u+5]=l,n;},r;}(rD);rU.prototype.bytesPerElement=12,n8("StructArrayLayout2i4i12",rU);var rV=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);},r.prototype.emplaceBack=function(n,r,i,a,o,s){var l=this.length;return this.resize(l+1),this.emplace(l,n,r,i,a,o,s);},r.prototype.emplace=function(n,r,i,a,o,s,l){var u=4*n,c=8*n;return this.int16[u+0]=r,this.int16[u+1]=i,this.uint8[c+4]=a,this.uint8[c+5]=o,this.uint8[c+6]=s,this.uint8[c+7]=l,n;},r;}(rD);rV.prototype.bytesPerElement=8,n8("StructArrayLayout2i4ub8",rV);var rG=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);},r.prototype.emplaceBack=function(n,r){var i=this.length;return this.resize(i+1),this.emplace(i,n,r);},r.prototype.emplace=function(n,r,i){var a=2*n;return this.float32[a+0]=r,this.float32[a+1]=i,n;},r;}(rD);rG.prototype.bytesPerElement=8,n8("StructArrayLayout2f8",rG);var rH=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);},r.prototype.emplaceBack=function(n,r,i,a,o,s,l,u,c,f){var d=this.length;return this.resize(d+1),this.emplace(d,n,r,i,a,o,s,l,u,c,f);},r.prototype.emplace=function(n,r,i,a,o,s,l,u,c,f,d){var h=10*n;return this.uint16[h+0]=r,this.uint16[h+1]=i,this.uint16[h+2]=a,this.uint16[h+3]=o,this.uint16[h+4]=s,this.uint16[h+5]=l,this.uint16[h+6]=u,this.uint16[h+7]=c,this.uint16[h+8]=f,this.uint16[h+9]=d,n;},r;}(rD);rH.prototype.bytesPerElement=20,n8("StructArrayLayout10ui20",rH);var rW=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);},r.prototype.emplaceBack=function(n,r,i,a,o,s,l,u,c,f,d,h){var p=this.length;return this.resize(p+1),this.emplace(p,n,r,i,a,o,s,l,u,c,f,d,h);},r.prototype.emplace=function(n,r,i,a,o,s,l,u,c,f,d,h,p){var m=12*n;return this.int16[m+0]=r,this.int16[m+1]=i,this.int16[m+2]=a,this.int16[m+3]=o,this.uint16[m+4]=s,this.uint16[m+5]=l,this.uint16[m+6]=u,this.uint16[m+7]=c,this.int16[m+8]=f,this.int16[m+9]=d,this.int16[m+10]=h,this.int16[m+11]=p,n;},r;}(rD);rW.prototype.bytesPerElement=24,n8("StructArrayLayout4i4ui4i24",rW);var rX=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);},r.prototype.emplaceBack=function(n,r,i){var a=this.length;return this.resize(a+1),this.emplace(a,n,r,i);},r.prototype.emplace=function(n,r,i,a){var o=3*n;return this.float32[o+0]=r,this.float32[o+1]=i,this.float32[o+2]=a,n;},r;}(rD);rX.prototype.bytesPerElement=12,n8("StructArrayLayout3f12",rX);var rq=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer);},r.prototype.emplaceBack=function(n){var r=this.length;return this.resize(r+1),this.emplace(r,n);},r.prototype.emplace=function(n,r){return this.uint32[1*n+0]=r,n;},r;}(rD);rq.prototype.bytesPerElement=4,n8("StructArrayLayout1ul4",rq);var r$=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);},r.prototype.emplaceBack=function(n,r,i,a,o,s,l,u,c){var f=this.length;return this.resize(f+1),this.emplace(f,n,r,i,a,o,s,l,u,c);},r.prototype.emplace=function(n,r,i,a,o,s,l,u,c,f){var d=10*n;return this.int16[d+0]=r,this.int16[d+1]=i,this.int16[d+2]=a,this.int16[d+3]=o,this.int16[d+4]=s,this.int16[d+5]=l,this.uint32[5*n+3]=u,this.uint16[d+8]=c,this.uint16[d+9]=f,n;},r;}(rD);r$.prototype.bytesPerElement=20,n8("StructArrayLayout6i1ul2ui20",r$);var rY=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);},r.prototype.emplaceBack=function(n,r,i,a,o,s){var l=this.length;return this.resize(l+1),this.emplace(l,n,r,i,a,o,s);},r.prototype.emplace=function(n,r,i,a,o,s,l){var u=6*n;return this.int16[u+0]=r,this.int16[u+1]=i,this.int16[u+2]=a,this.int16[u+3]=o,this.int16[u+4]=s,this.int16[u+5]=l,n;},r;}(rD);rY.prototype.bytesPerElement=12,n8("StructArrayLayout2i2i2i12",rY);var rZ=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);},r.prototype.emplaceBack=function(n,r,i,a,o){var s=this.length;return this.resize(s+1),this.emplace(s,n,r,i,a,o);},r.prototype.emplace=function(n,r,i,a,o,s){var l=4*n,u=8*n;return this.float32[l+0]=r,this.float32[l+1]=i,this.float32[l+2]=a,this.int16[u+6]=o,this.int16[u+7]=s,n;},r;}(rD);rZ.prototype.bytesPerElement=16,n8("StructArrayLayout2f1f2i16",rZ);var rK=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);},r.prototype.emplaceBack=function(n,r,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,n,r,i,a);},r.prototype.emplace=function(n,r,i,a,o){var s=12*n,l=3*n;return this.uint8[s+0]=r,this.uint8[s+1]=i,this.float32[l+1]=a,this.float32[l+2]=o,n;},r;}(rD);rK.prototype.bytesPerElement=12,n8("StructArrayLayout2ub2f12",rK);var rQ=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);},r.prototype.emplaceBack=function(n,r,i){var a=this.length;return this.resize(a+1),this.emplace(a,n,r,i);},r.prototype.emplace=function(n,r,i,a){var o=3*n;return this.uint16[o+0]=r,this.uint16[o+1]=i,this.uint16[o+2]=a,n;},r;}(rD);rQ.prototype.bytesPerElement=6,n8("StructArrayLayout3ui6",rQ);var rJ=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);},r.prototype.emplaceBack=function(n,r,i,a,o,s,l,u,c,f,d,h,p,m,g,v,y){var _=this.length;return this.resize(_+1),this.emplace(_,n,r,i,a,o,s,l,u,c,f,d,h,p,m,g,v,y);},r.prototype.emplace=function(n,r,i,a,o,s,l,u,c,f,d,h,p,m,g,v,y,_){var b=24*n,x=12*n,E=48*n;return this.int16[b+0]=r,this.int16[b+1]=i,this.uint16[b+2]=a,this.uint16[b+3]=o,this.uint32[x+2]=s,this.uint32[x+3]=l,this.uint32[x+4]=u,this.uint16[b+10]=c,this.uint16[b+11]=f,this.uint16[b+12]=d,this.float32[x+7]=h,this.float32[x+8]=p,this.uint8[E+36]=m,this.uint8[E+37]=g,this.uint8[E+38]=v,this.uint32[x+10]=y,this.int16[b+22]=_,n;},r;}(rD);rJ.prototype.bytesPerElement=48,n8("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",rJ);var r0=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);},r.prototype.emplaceBack=function(n,r,i,a,o,s,l,u,c,f,d,h,p,m,g,v,y,_,b,x,E,w,S,T,A,C,O,M){var R=this.length;return this.resize(R+1),this.emplace(R,n,r,i,a,o,s,l,u,c,f,d,h,p,m,g,v,y,_,b,x,E,w,S,T,A,C,O,M);},r.prototype.emplace=function(n,r,i,a,o,s,l,u,c,f,d,h,p,m,g,v,y,_,b,x,E,w,S,T,A,C,O,M,R){var P=34*n,k=17*n;return this.int16[P+0]=r,this.int16[P+1]=i,this.int16[P+2]=a,this.int16[P+3]=o,this.int16[P+4]=s,this.int16[P+5]=l,this.int16[P+6]=u,this.int16[P+7]=c,this.uint16[P+8]=f,this.uint16[P+9]=d,this.uint16[P+10]=h,this.uint16[P+11]=p,this.uint16[P+12]=m,this.uint16[P+13]=g,this.uint16[P+14]=v,this.uint16[P+15]=y,this.uint16[P+16]=_,this.uint16[P+17]=b,this.uint16[P+18]=x,this.uint16[P+19]=E,this.uint16[P+20]=w,this.uint16[P+21]=S,this.uint16[P+22]=T,this.uint32[k+12]=A,this.float32[k+13]=C,this.float32[k+14]=O,this.float32[k+15]=M,this.float32[k+16]=R,n;},r;}(rD);r0.prototype.bytesPerElement=68,n8("StructArrayLayout8i15ui1ul4f68",r0);var r1=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);},r.prototype.emplaceBack=function(n){var r=this.length;return this.resize(r+1),this.emplace(r,n);},r.prototype.emplace=function(n,r){return this.float32[1*n+0]=r,n;},r;}(rD);r1.prototype.bytesPerElement=4,n8("StructArrayLayout1f4",r1);var r2=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);},r.prototype.emplaceBack=function(n,r,i){var a=this.length;return this.resize(a+1),this.emplace(a,n,r,i);},r.prototype.emplace=function(n,r,i,a){var o=3*n;return this.int16[o+0]=r,this.int16[o+1]=i,this.int16[o+2]=a,n;},r;}(rD);r2.prototype.bytesPerElement=6,n8("StructArrayLayout3i6",r2);var r3=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);},r.prototype.emplaceBack=function(n,r,i){var a=this.length;return this.resize(a+1),this.emplace(a,n,r,i);},r.prototype.emplace=function(n,r,i,a){var o=4*n;return this.uint32[2*n+0]=r,this.uint16[o+2]=i,this.uint16[o+3]=a,n;},r;}(rD);r3.prototype.bytesPerElement=8,n8("StructArrayLayout1ul2ui8",r3);var r4=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);},r.prototype.emplaceBack=function(n,r){var i=this.length;return this.resize(i+1),this.emplace(i,n,r);},r.prototype.emplace=function(n,r,i){var a=2*n;return this.uint16[a+0]=r,this.uint16[a+1]=i,n;},r;}(rD);r4.prototype.bytesPerElement=4,n8("StructArrayLayout2ui4",r4);var r5=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);},r.prototype.emplaceBack=function(n){var r=this.length;return this.resize(r+1),this.emplace(r,n);},r.prototype.emplace=function(n,r){return this.uint16[1*n+0]=r,n;},r;}(rD);r5.prototype.bytesPerElement=2,n8("StructArrayLayout1ui2",r5);var r6=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);},r.prototype.emplaceBack=function(n,r,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,n,r,i,a);},r.prototype.emplace=function(n,r,i,a,o){var s=4*n;return this.float32[s+0]=r,this.float32[s+1]=i,this.float32[s+2]=a,this.float32[s+3]=o,n;},r;}(rD);r6.prototype.bytesPerElement=16,n8("StructArrayLayout4f16",r6);var r8=function(n){function r(){n.apply(this,arguments);}n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0];},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1];},i.x1.get=function(){return this._structArray.int16[this._pos2+2];},i.y1.get=function(){return this._structArray.int16[this._pos2+3];},i.x2.get=function(){return this._structArray.int16[this._pos2+4];},i.y2.get=function(){return this._structArray.int16[this._pos2+5];},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3];},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8];},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9];},i.anchorPoint.get=function(){return new a(this.anchorPointX,this.anchorPointY);},Object.defineProperties(r.prototype,i),r;}(rN);r8.prototype.size=20;var r7=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.get=function(n){return new r8(this,n);},r;}(r$);n8("CollisionBoxArray",r7);var r9=function(n){function r(){n.apply(this,arguments);}n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0];},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1];},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2];},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3];},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2];},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3];},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4];},i.segment.get=function(){return this._structArray.uint16[this._pos2+10];},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11];},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12];},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7];},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8];},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36];},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37];},i.placedOrientation.set=function(n){this._structArray.uint8[this._pos1+37]=n;},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38];},i.hidden.set=function(n){this._structArray.uint8[this._pos1+38]=n;},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10];},i.crossTileID.set=function(n){this._structArray.uint32[this._pos4+10]=n;},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22];},Object.defineProperties(r.prototype,i),r;}(rN);r9.prototype.size=48;var ie=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.get=function(n){return new r9(this,n);},r;}(rJ);n8("PlacedSymbolArray",ie);var it=function(n){function r(){n.apply(this,arguments);}n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0];},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1];},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2];},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3];},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4];},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5];},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6];},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7];},i.key.get=function(){return this._structArray.uint16[this._pos2+8];},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9];},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10];},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11];},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12];},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13];},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14];},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15];},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16];},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17];},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18];},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19];},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20];},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21];},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22];},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12];},i.crossTileID.set=function(n){this._structArray.uint32[this._pos4+12]=n;},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13];},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14];},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15];},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16];},Object.defineProperties(r.prototype,i),r;}(rN);it.prototype.size=68;var ir=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.get=function(n){return new it(this,n);},r;}(r0);n8("SymbolInstanceArray",ir);var ii=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getoffsetX=function(n){return this.float32[1*n+0];},r;}(r1);n8("GlyphOffsetArray",ii);var ia=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getx=function(n){return this.int16[3*n+0];},r.prototype.gety=function(n){return this.int16[3*n+1];},r.prototype.gettileUnitDistanceFromAnchor=function(n){return this.int16[3*n+2];},r;}(r2);n8("SymbolLineVertexArray",ia);var io=function(n){function r(){n.apply(this,arguments);}n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0];},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2];},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3];},Object.defineProperties(r.prototype,i),r;}(rN);io.prototype.size=8;var is=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.get=function(n){return new io(this,n);},r;}(r3);n8("FeatureIndexArray",is);var il=rF([{name:"a_pos",components:2,type:"Int16"}],4).members,iu=function(n){void 0===n&&(n=[]),this.segments=n;};function ic(n,r){return 256*(n=d(Math.floor(n),0,255))+d(Math.floor(r),0,255);}iu.prototype.prepareSegment=function(n,r,i,a){var o=this.segments[this.segments.length-1];return n>iu.MAX_VERTEX_ARRAY_LENGTH&&T("Max vertices per segment is "+iu.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+n),(!o||o.vertexLength+n>iu.MAX_VERTEX_ARRAY_LENGTH||o.sortKey!==a)&&(o={vertexOffset:r.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==a&&(o.sortKey=a),this.segments.push(o)),o;},iu.prototype.get=function(){return this.segments;},iu.prototype.destroy=function(){for(var n=0,r=this.segments;n<r.length;n+=1){var i=r[n];for(var a in i.vaos)i.vaos[a].destroy();}},iu.simpleSegment=function(n,r,i,a){return new iu([{vertexOffset:n,primitiveOffset:r,vertexLength:i,primitiveLength:a,vaos:{},sortKey:0}]);},iu.MAX_VERTEX_ARRAY_LENGTH=65535,n8("SegmentVector",iu);var id=rF([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ih=r(function(n){n.exports=function(n,r){var i,a,o,s,l,u;for(a=n.length-(i=3&n.length),o=r,u=0;u<a;)l=255&n.charCodeAt(u)|(255&n.charCodeAt(++u))<<8|(255&n.charCodeAt(++u))<<16|(255&n.charCodeAt(++u))<<24,++u,o=27492+(65535&(s=5*(65535&(o=(o^=l=(65535&(l=(l=(65535&l)*3432918353+(((l>>>16)*3432918353&65535)<<16)&4294967295)<<15|l>>>17))*461845907+(((l>>>16)*461845907&65535)<<16)&4294967295)<<13|o>>>19))+((5*(o>>>16)&65535)<<16)&4294967295))+((58964+(s>>>16)&65535)<<16);switch(l=0,i){case 3:l^=(255&n.charCodeAt(u+2))<<16;case 2:l^=(255&n.charCodeAt(u+1))<<8;case 1:o^=l=(65535&(l=(l=(65535&(l^=255&n.charCodeAt(u)))*3432918353+(((l>>>16)*3432918353&65535)<<16)&4294967295)<<15|l>>>17))*461845907+(((l>>>16)*461845907&65535)<<16)&4294967295;}return o^=n.length,o=2246822507*(65535&(o^=o>>>16))+((2246822507*(o>>>16)&65535)<<16)&4294967295,o=3266489909*(65535&(o^=o>>>13))+((3266489909*(o>>>16)&65535)<<16)&4294967295,(o^=o>>>16)>>>0;};}),ip=r(function(n){n.exports=function(n,r){for(var i,a=n.length,o=r^a,s=0;a>=4;)i=1540483477*(65535&(i=255&n.charCodeAt(s)|(255&n.charCodeAt(++s))<<8|(255&n.charCodeAt(++s))<<16|(255&n.charCodeAt(++s))<<24))+((1540483477*(i>>>16)&65535)<<16),o=1540483477*(65535&o)+((1540483477*(o>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),a-=4,++s;switch(a){case 3:o^=(255&n.charCodeAt(s+2))<<16;case 2:o^=(255&n.charCodeAt(s+1))<<8;case 1:o=1540483477*(65535&(o^=255&n.charCodeAt(s)))+((1540483477*(o>>>16)&65535)<<16);}return o=1540483477*(65535&(o^=o>>>13))+((1540483477*(o>>>16)&65535)<<16),(o^=o>>>15)>>>0;};});ih.murmur3=ih,ih.murmur2=ip;var im=function(){this.ids=[],this.positions=[],this.indexed=!1;};function ig(n){var r=+n;return!isNaN(r)&&r<=9007199254740991?r:ih(String(n));}function iv(n,r,i){var a=n[r];n[r]=n[i],n[i]=a;}im.prototype.add=function(n,r,i,a){this.ids.push(ig(n)),this.positions.push(r,i,a);},im.prototype.getPositions=function(n){for(var r=ig(n),i=0,a=this.ids.length-1;i<a;){var o=i+a>>1;this.ids[o]>=r?a=o:i=o+1;}for(var s=[];this.ids[i]===r;)s.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return s;},im.serialize=function(n,r){var i=new Float64Array(n.ids),a=new Uint32Array(n.positions);return function n(r,i,a,o){for(;a<o;){for(var s=r[a+o>>1],l=a-1,u=o+1;;){do l++;while(r[l]<s)do u--;while(r[u]>s)if(l>=u)break;iv(r,l,u),iv(i,3*l,3*u),iv(i,3*l+1,3*u+1),iv(i,3*l+2,3*u+2);}u-a<o-u?(n(r,i,a,u),a=u+1):(n(r,i,u+1,o),o=u);}}(i,a,0,i.length-1),r&&r.push(i.buffer,a.buffer),{ids:i,positions:a};},im.deserialize=function(n){var r=new im;return r.ids=n.ids,r.positions=n.positions,r.indexed=!0,r;},n8("FeaturePositionMap",im);var iy=function(n,r){this.gl=n.gl,this.location=r;},i_=function(n){function r(r,i){n.call(this,r,i),this.current=0;}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.set=function(n){this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n));},r;}(iy),ib=function(n){function r(r,i){n.call(this,r,i),this.current=0;}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.set=function(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n));},r;}(iy),ix=function(n){function r(r,i){n.call(this,r,i),this.current=[0,0];}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.set=function(n){n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1]));},r;}(iy),iE=function(n){function r(r,i){n.call(this,r,i),this.current=[0,0,0];}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.set=function(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2]));},r;}(iy),iw=function(n){function r(r,i){n.call(this,r,i),this.current=[0,0,0,0];}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.set=function(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]));},r;}(iy),iS=function(n){function r(r,i){n.call(this,r,i),this.current=e0.transparent;}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.set=function(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a));},r;}(iy),iT=new Float32Array(16),iA=function(n){function r(r,i){n.call(this,r,i),this.current=iT;}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.set=function(n){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(var r=1;r<16;r++)if(n[r]!==this.current[r]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break;}},r;}(iy);function iC(n){return[ic(255*n.r,255*n.g),ic(255*n.b,255*n.a)];}var iO=function(n,r,i){this.value=n,this.uniformNames=r.map(function(n){return"u_"+n;}),this.type=i;};iO.prototype.setUniform=function(n,r,i){n.set(i.constantOr(this.value));},iO.prototype.getBinding=function(n,r,i){return"color"===this.type?new iS(n,r):new ib(n,r);};var iM=function(n,r){this.uniformNames=r.map(function(n){return"u_"+n;}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1;};iM.prototype.setConstantPatternPositions=function(n,r){this.pixelRatioFrom=r.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=r.tlbr,this.patternTo=n.tlbr;},iM.prototype.setUniform=function(n,r,i,a){var o="u_pattern_to"===a?this.patternTo:"u_pattern_from"===a?this.patternFrom:"u_pixel_ratio_to"===a?this.pixelRatioTo:"u_pixel_ratio_from"===a?this.pixelRatioFrom:null;o&&n.set(o);},iM.prototype.getBinding=function(n,r,i){return"u_pattern"===i.substr(0,9)?new iw(n,r):new ib(n,r);};var iR=function(n,r,i,a){this.expression=n,this.type=i,this.maxValue=0,this.paintVertexAttributes=r.map(function(n){return{name:"a_"+n,type:"Float32",components:"color"===i?2:1,offset:0};}),this.paintVertexArray=new a;};iR.prototype.populatePaintArray=function(n,r,i,a,o){var s=this.paintVertexArray.length,l=this.expression.evaluate(new ry(0),r,{},a,[],o);this.paintVertexArray.resize(n),this._setPaintValue(s,n,l);},iR.prototype.updatePaintArray=function(n,r,i,a){var o=this.expression.evaluate({zoom:0},i,a);this._setPaintValue(n,r,o);},iR.prototype._setPaintValue=function(n,r,i){if("color"===this.type)for(var a=iC(i),o=n;o<r;o++)this.paintVertexArray.emplace(o,a[0],a[1]);else{for(var s=n;s<r;s++)this.paintVertexArray.emplace(s,i);this.maxValue=Math.max(this.maxValue,Math.abs(i));}},iR.prototype.upload=function(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent));},iR.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy();};var iP=function(n,r,i,a,o,s){this.expression=n,this.uniformNames=r.map(function(n){return"u_"+n+"_t";}),this.type=i,this.useIntegerZoom=a,this.zoom=o,this.maxValue=0,this.paintVertexAttributes=r.map(function(n){return{name:"a_"+n,type:"Float32",components:"color"===i?4:2,offset:0};}),this.paintVertexArray=new s;};iP.prototype.populatePaintArray=function(n,r,i,a,o){var s=this.expression.evaluate(new ry(this.zoom),r,{},a,[],o),l=this.expression.evaluate(new ry(this.zoom+1),r,{},a,[],o),u=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(u,n,s,l);},iP.prototype.updatePaintArray=function(n,r,i,a){var o=this.expression.evaluate({zoom:this.zoom},i,a),s=this.expression.evaluate({zoom:this.zoom+1},i,a);this._setPaintValue(n,r,o,s);},iP.prototype._setPaintValue=function(n,r,i,a){if("color"===this.type)for(var o=iC(i),s=iC(a),l=n;l<r;l++)this.paintVertexArray.emplace(l,o[0],o[1],s[0],s[1]);else{for(var u=n;u<r;u++)this.paintVertexArray.emplace(u,i,a);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(a));}},iP.prototype.upload=function(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent));},iP.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy();},iP.prototype.setUniform=function(n,r){var i=this.useIntegerZoom?Math.floor(r.zoom):r.zoom,a=d(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);n.set(a);},iP.prototype.getBinding=function(n,r,i){return new ib(n,r);};var ik=function(n,r,i,a,o,s){this.expression=n,this.type=r,this.useIntegerZoom=i,this.zoom=a,this.layerId=s,this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o;};ik.prototype.populatePaintArray=function(n,r,i){var a=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(a,n,r.patterns&&r.patterns[this.layerId],i);},ik.prototype.updatePaintArray=function(n,r,i,a,o){this._setPaintValues(n,r,i.patterns&&i.patterns[this.layerId],o);},ik.prototype._setPaintValues=function(n,r,i,a){if(a&&i){var o=a[i.min],s=a[i.mid],l=a[i.max];if(o&&s&&l)for(var u=n;u<r;u++)this.zoomInPaintVertexArray.emplace(u,s.tl[0],s.tl[1],s.br[0],s.br[1],o.tl[0],o.tl[1],o.br[0],o.br[1],s.pixelRatio,o.pixelRatio),this.zoomOutPaintVertexArray.emplace(u,s.tl[0],s.tl[1],s.br[0],s.br[1],l.tl[0],l.tl[1],l.br[0],l.br[1],s.pixelRatio,l.pixelRatio);}},ik.prototype.upload=function(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,id.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,id.members,this.expression.isStateDependent));},ik.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy();};var iI=function(n,r,i){this.binders={},this._buffers=[];var a=[];for(var o in n.paint._values)if(i(o)){var s=n.paint.get(o);if(s instanceof rT&&no(s.property.specification)){var l,u=(l=n.type,({"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]})[o]||[o.replace(l+"-","").replace(/-/g,"_")]),c=s.value,f=s.property.specification.type,d=s.property.useIntegerZoom,h=s.property.specification["property-type"],p="cross-faded"===h||"cross-faded-data-driven"===h;if("constant"===c.kind)this.binders[o]=p?new iM(c.value,u):new iO(c.value,u,f),a.push("/u_"+o);else if("source"===c.kind||p){var m=iN(o,f,"source");this.binders[o]=p?new ik(c,f,d,r,m,n.id):new iR(c,u,f,m),a.push("/a_"+o);}else{var g=iN(o,f,"composite");this.binders[o]=new iP(c,u,f,d,r,g),a.push("/z_"+o);}}}this.cacheKey=a.sort().join("");};iI.prototype.getMaxValue=function(n){var r=this.binders[n];return r instanceof iR||r instanceof iP?r.maxValue:0;},iI.prototype.populatePaintArrays=function(n,r,i,a,o){for(var s in this.binders){var l=this.binders[s];(l instanceof iR||l instanceof iP||l instanceof ik)&&l.populatePaintArray(n,r,i,a,o);}},iI.prototype.setConstantPatternPositions=function(n,r){for(var i in this.binders){var a=this.binders[i];a instanceof iM&&a.setConstantPatternPositions(n,r);}},iI.prototype.updatePaintArrays=function(n,r,i,a,o){var s=!1;for(var l in n)for(var u=0,c=r.getPositions(l);u<c.length;u+=1){var f=c[u],d=i.feature(f.index);for(var h in this.binders){var p=this.binders[h];if((p instanceof iR||p instanceof iP||p instanceof ik)&&!0===p.expression.isStateDependent){var m=a.paint.get(h);p.expression=m.value,p.updatePaintArray(f.start,f.end,d,n[l],o),s=!0;}}}return s;},iI.prototype.defines=function(){var n=[];for(var r in this.binders){var i=this.binders[r];(i instanceof iO||i instanceof iM)&&n.push.apply(n,i.uniformNames.map(function(n){return"#define HAS_UNIFORM_"+n;}));}return n;},iI.prototype.getBinderAttributes=function(){var n=[];for(var r in this.binders){var i=this.binders[r];if(i instanceof iR||i instanceof iP)for(var a=0;a<i.paintVertexAttributes.length;a++)n.push(i.paintVertexAttributes[a].name);else if(i instanceof ik)for(var o=0;o<id.members.length;o++)n.push(id.members[o].name);}return n;},iI.prototype.getBinderUniforms=function(){var n=[];for(var r in this.binders){var i=this.binders[r];if(i instanceof iO||i instanceof iM||i instanceof iP)for(var a=0,o=i.uniformNames;a<o.length;a+=1)n.push(o[a]);}return n;},iI.prototype.getPaintVertexBuffers=function(){return this._buffers;},iI.prototype.getUniforms=function(n,r){var i=[];for(var a in this.binders){var o=this.binders[a];if(o instanceof iO||o instanceof iM||o instanceof iP)for(var s=0,l=o.uniformNames;s<l.length;s+=1){var u=l[s];if(r[u]){var c=o.getBinding(n,r[u],u);i.push({name:u,property:a,binding:c});}}}return i;},iI.prototype.setUniforms=function(n,r,i,a){for(var o=0;o<r.length;o+=1){var s=r[o],l=s.name,u=s.property;this.binders[u].setUniform(s.binding,a,i.get(u),l);}},iI.prototype.updatePaintBuffers=function(n){for(var r in this._buffers=[],this.binders){var i=this.binders[r];if(n&&i instanceof ik){var a=2===n.fromScale?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;a&&this._buffers.push(a);}else(i instanceof iR||i instanceof iP)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer);}},iI.prototype.upload=function(n){for(var r in this.binders){var i=this.binders[r];(i instanceof iR||i instanceof iP||i instanceof ik)&&i.upload(n);}this.updatePaintBuffers();},iI.prototype.destroy=function(){for(var n in this.binders){var r=this.binders[n];(r instanceof iR||r instanceof iP||r instanceof ik)&&r.destroy();}};var iL=function(n,r,i){void 0===i&&(i=function(){return!0;}),this.programConfigurations={};for(var a=0;a<n.length;a+=1){var o=n[a];this.programConfigurations[o.id]=new iI(o,r,i);}this.needsUpload=!1,this._featureMap=new im,this._bufferOffset=0;};function iN(n,r,i){var a={"line-pattern":{source:rH,composite:rH},"fill-pattern":{source:rH,composite:rH},"fill-extrusion-pattern":{source:rH,composite:rH}}[n];return a&&a[i]||({color:{source:rG,composite:r6},number:{source:r1,composite:rG}})[r][i];}iL.prototype.populatePaintArrays=function(n,r,i,a,o,s){for(var l in this.programConfigurations)this.programConfigurations[l].populatePaintArrays(n,r,a,o,s);void 0!==r.id&&this._featureMap.add(r.id,i,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0;},iL.prototype.updatePaintArrays=function(n,r,i,a){for(var o=0;o<i.length;o+=1){var s=i[o];this.needsUpload=this.programConfigurations[s.id].updatePaintArrays(n,this._featureMap,r,s,a)||this.needsUpload;}},iL.prototype.get=function(n){return this.programConfigurations[n];},iL.prototype.upload=function(n){if(this.needsUpload){for(var r in this.programConfigurations)this.programConfigurations[r].upload(n);this.needsUpload=!1;}},iL.prototype.destroy=function(){for(var n in this.programConfigurations)this.programConfigurations[n].destroy();},n8("ConstantBinder",iO),n8("CrossFadedConstantBinder",iM),n8("SourceExpressionBinder",iR),n8("CrossFadedCompositeBinder",ik),n8("CompositeExpressionBinder",iP),n8("ProgramConfiguration",iI,{omit:["_buffers"]}),n8("ProgramConfigurationSet",iL);var iD=-16383-1;function iF(n){for(var r=8192/n.extent,i=n.loadGeometry(),a=0;a<i.length;a++)for(var o=i[a],s=0;s<o.length;s++){var l=o[s],u=Math.round(l.x*r),c=Math.round(l.y*r);l.x=d(u,iD,16383),l.y=d(c,iD,16383),(u<l.x||u>l.x+1||c<l.y||c>l.y+1)&&T("Geometry exceeds allowed extent, reduce your vector tile buffer size");}return i;}function iB(n,r){return{type:n.type,id:n.id,properties:n.properties,geometry:r?iF(n):[]};}function ij(n,r,i,a,o){n.emplaceBack(2*r+(a+1)/2,2*i+(o+1)/2);}var iz=function(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(function(n){return n.id;}),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new rj,this.indexArray=new rQ,this.segments=new iu,this.programConfigurations=new iL(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(function(n){return n.isStateDependent();}).map(function(n){return n.id;});};function iU(n,r){for(var i=0;i<n.length;i++)if(iq(r,n[i]))return!0;for(var a=0;a<r.length;a++)if(iq(n,r[a]))return!0;return!!iG(n,r);}function iV(n,r){if(1===n.length)return iX(r,n[0]);for(var i=0;i<r.length;i++)for(var a=r[i],o=0;o<a.length;o++)if(iq(n,a[o]))return!0;for(var s=0;s<n.length;s++)if(iX(r,n[s]))return!0;for(var l=0;l<r.length;l++)if(iG(n,r[l]))return!0;return!1;}function iG(n,r){if(0===n.length||0===r.length)return!1;for(var i,a,o=0;o<n.length-1;o++)for(var s=n[o],l=n[o+1],u=0;u<r.length-1;u++)if(A(s,i=r[u],a=r[u+1])!==A(l,i,a)&&A(s,l,i)!==A(s,l,a))return!0;return!1;}function iH(n,r,i){var a=i*i;if(1===r.length)return n.distSqr(r[0])<a;for(var o=1;o<r.length;o++)if(iW(n,r[o-1],r[o])<a)return!0;return!1;}function iW(n,r,i){var a=r.distSqr(i);if(0===a)return n.distSqr(r);var o=((n.x-r.x)*(i.x-r.x)+(n.y-r.y)*(i.y-r.y))/a;return n.distSqr(o<0?r:o>1?i:i.sub(r)._mult(o)._add(r));}function iX(n,r){for(var i,a,o,s=!1,l=0;l<n.length;l++)for(var u=0,c=(i=n[l]).length-1;u<i.length;c=u++)(a=i[u]).y>r.y!=(o=i[c]).y>r.y&&r.x<(o.x-a.x)*(r.y-a.y)/(o.y-a.y)+a.x&&(s=!s);return s;}function iq(n,r){for(var i=!1,a=0,o=n.length-1;a<n.length;o=a++){var s=n[a],l=n[o];s.y>r.y!=l.y>r.y&&r.x<(l.x-s.x)*(r.y-s.y)/(l.y-s.y)+s.x&&(i=!i);}return i;}function i$(n,r,i){var a=r.paint.get(n).value;return"constant"===a.kind?a.value:i.programConfigurations.get(r.id).getMaxValue(n);}function iY(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1]);}function iZ(n,r,i,o,s){if(!r[0]&&!r[1])return n;var l=a.convert(r)._mult(s);"viewport"===i&&l._rotate(-o);for(var u=[],c=0;c<n.length;c++)u.push(n[c].sub(l));return u;}iz.prototype.populate=function(n,r,i){var a=this.layers[0],o=[],s=null;"circle"===a.type&&(s=a.layout.get("circle-sort-key"));for(var l=0;l<n.length;l+=1){var u=n[l],c=u.feature,f=u.id,d=u.index,h=u.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,m=iB(c,p);if(this.layers[0]._featureFilter.filter(new ry(this.zoom),m,i)){var g=s?s.evaluate(m,{},i):void 0,v={id:f,properties:c.properties,type:c.type,sourceLayerIndex:h,index:d,geometry:p?m.geometry:iF(c),patterns:{},sortKey:g};o.push(v);}}s&&o.sort(function(n,r){return n.sortKey-r.sortKey;});for(var y=0;y<o.length;y+=1){var _=o[y],b=_.geometry,x=_.index,E=_.sourceLayerIndex,w=n[x].feature;this.addFeature(_,b,x,i),r.featureIndex.insert(w,b,x,E,this.index);}},iz.prototype.update=function(n,r,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,r,this.stateDependentLayers,i);},iz.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length;},iz.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload;},iz.prototype.upload=function(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,il),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0;},iz.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy());},iz.prototype.addFeature=function(n,r,i,a){for(var o=0;o<r.length;o+=1)for(var s=0,l=r[o];s<l.length;s+=1){var u=l[s],c=u.x,f=u.y;if(!(c<0||c>=8192||f<0||f>=8192)){var d=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),h=d.vertexLength;ij(this.layoutVertexArray,c,f,-1,-1),ij(this.layoutVertexArray,c,f,1,-1),ij(this.layoutVertexArray,c,f,1,1),ij(this.layoutVertexArray,c,f,-1,1),this.indexArray.emplaceBack(h,h+1,h+2),this.indexArray.emplaceBack(h,h+3,h+2),d.vertexLength+=4,d.primitiveLength+=2;}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,i,{},a);},n8("CircleBucket",iz,{omit:["layers"]});var iK=new rk({"circle-sort-key":new rO(eM.layout_circle["circle-sort-key"])}),iQ={paint:new rk({"circle-radius":new rO(eM.paint_circle["circle-radius"]),"circle-color":new rO(eM.paint_circle["circle-color"]),"circle-blur":new rO(eM.paint_circle["circle-blur"]),"circle-opacity":new rO(eM.paint_circle["circle-opacity"]),"circle-translate":new rC(eM.paint_circle["circle-translate"]),"circle-translate-anchor":new rC(eM.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new rC(eM.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new rC(eM.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new rO(eM.paint_circle["circle-stroke-width"]),"circle-stroke-color":new rO(eM.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new rO(eM.paint_circle["circle-stroke-opacity"])}),layout:iK},iJ="undefined"!=typeof Float32Array?Float32Array:Array;function i0(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n;}function i1(n,r,i){var a=r[0],o=r[1],s=r[2],l=r[3],u=r[4],c=r[5],f=r[6],d=r[7],h=r[8],p=r[9],m=r[10],g=r[11],v=r[12],y=r[13],_=r[14],b=r[15],x=i[0],E=i[1],w=i[2],S=i[3];return n[0]=x*a+E*u+w*h+S*v,n[1]=x*o+E*c+w*p+S*y,n[2]=x*s+E*f+w*m+S*_,n[3]=x*l+E*d+w*g+S*b,n[4]=(x=i[4])*a+(E=i[5])*u+(w=i[6])*h+(S=i[7])*v,n[5]=x*o+E*c+w*p+S*y,n[6]=x*s+E*f+w*m+S*_,n[7]=x*l+E*d+w*g+S*b,n[8]=(x=i[8])*a+(E=i[9])*u+(w=i[10])*h+(S=i[11])*v,n[9]=x*o+E*c+w*p+S*y,n[10]=x*s+E*f+w*m+S*_,n[11]=x*l+E*d+w*g+S*b,n[12]=(x=i[12])*a+(E=i[13])*u+(w=i[14])*h+(S=i[15])*v,n[13]=x*o+E*c+w*p+S*y,n[14]=x*s+E*f+w*m+S*_,n[15]=x*l+E*d+w*g+S*b,n;}function i2(n,r,i){var a=r[0],o=r[1],s=r[2],l=r[3];return n[0]=i[0]*a+i[4]*o+i[8]*s+i[12]*l,n[1]=i[1]*a+i[5]*o+i[9]*s+i[13]*l,n[2]=i[2]*a+i[6]*o+i[10]*s+i[14]*l,n[3]=i[3]*a+i[7]*o+i[11]*s+i[15]*l,n;}Math.hypot||(Math.hypot=function(){for(var n=arguments,r=0,i=arguments.length;i--;)r+=n[i]*n[i];return Math.sqrt(r);}),o=new iJ(3),iJ!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),s=new iJ(4),iJ!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0,s[3]=0);var i3=(l=new iJ(2),iJ!=Float32Array&&(l[0]=0,l[1]=0),function(n){function r(r){n.call(this,r,iQ);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.createBucket=function(n){return new iz(n);},r.prototype.queryRadius=function(n){return i$("circle-radius",this,n)+i$("circle-stroke-width",this,n)+iY(this.paint.get("circle-translate"));},r.prototype.queryIntersectsFeature=function(n,r,i,a,o,s,l,u){for(var c=iZ(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),s.angle,l),f=this.paint.get("circle-radius").evaluate(r,i)+this.paint.get("circle-stroke-width").evaluate(r,i),d="map"===this.paint.get("circle-pitch-alignment"),h=d?c:c.map(function(n){return i4(n,u);}),p=d?f*l:f,m=0;m<a.length;m+=1)for(var g=0,v=a[m];g<v.length;g+=1){var y,_=v[g],b=d?_:i4(_,u),x=p,E=i2([],[_.x,_.y,0,1],u);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?x*=E[3]/s.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(x*=s.cameraToCenterDistance/E[3]),y=x,iq(h,b)||iH(b,h,y))return!0;}return!1;},r;}(rI));function i4(n,r){var i=i2([],[n.x,n.y,0,1],r);return new a(i[0]/i[3],i[1]/i[3]);}var i5=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r;}(iz);function i6(n,r,i,a){var o=r.width,s=r.height;if(a){if(a instanceof Uint8ClampedArray)a=new Uint8Array(a.buffer);else if(a.length!==o*s*i)throw RangeError("mismatched image size");}else a=new Uint8Array(o*s*i);return n.width=o,n.height=s,n.data=a,n;}function i8(n,r,i){var a=r.width,o=r.height;if(a!==n.width||o!==n.height){var s=i6({},{width:a,height:o},i);i7(n,s,{x:0,y:0},{x:0,y:0},{width:Math.min(n.width,a),height:Math.min(n.height,o)},i),n.width=a,n.height=o,n.data=s.data;}}function i7(n,r,i,a,o,s){if(0===o.width||0===o.height)return r;if(o.width>n.width||o.height>n.height||i.x>n.width-o.width||i.y>n.height-o.height)throw RangeError("out of range source coordinates for image copy");if(o.width>r.width||o.height>r.height||a.x>r.width-o.width||a.y>r.height-o.height)throw RangeError("out of range destination coordinates for image copy");for(var l=n.data,u=r.data,c=0;c<o.height;c++)for(var f=((i.y+c)*n.width+i.x)*s,d=((a.y+c)*r.width+a.x)*s,h=0;h<o.width*s;h++)u[d+h]=l[f+h];return r;}n8("HeatmapBucket",i5,{omit:["layers"]});var i9=function(n,r){i6(this,n,1,r);};i9.prototype.resize=function(n){i8(this,n,1);},i9.prototype.clone=function(){return new i9({width:this.width,height:this.height},new Uint8Array(this.data));},i9.copy=function(n,r,i,a,o){i7(n,r,i,a,o,1);};var ae=function(n,r){i6(this,n,4,r);};ae.prototype.resize=function(n){i8(this,n,4);},ae.prototype.replace=function(n,r){r?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n;},ae.prototype.clone=function(){return new ae({width:this.width,height:this.height},new Uint8Array(this.data));},ae.copy=function(n,r,i,a,o){i7(n,r,i,a,o,4);},n8("AlphaImage",i9),n8("RGBAImage",ae);var at={paint:new rk({"heatmap-radius":new rO(eM.paint_heatmap["heatmap-radius"]),"heatmap-weight":new rO(eM.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new rC(eM.paint_heatmap["heatmap-intensity"]),"heatmap-color":new rP(eM.paint_heatmap["heatmap-color"]),"heatmap-opacity":new rC(eM.paint_heatmap["heatmap-opacity"])})};function an(n){var r={},i=n.resolution||256,a=n.clips?n.clips.length:1,o=n.image||new ae({width:i,height:a}),s=function(i,a,s){r[n.evaluationKey]=s;var l=n.expression.evaluate(r);o.data[i+a+0]=Math.floor(255*l.r/l.a),o.data[i+a+1]=Math.floor(255*l.g/l.a),o.data[i+a+2]=Math.floor(255*l.b/l.a),o.data[i+a+3]=Math.floor(255*l.a);};if(n.clips)for(var l=0,u=0;l<a;++l,u+=4*i)for(var c=0,f=0;c<i;c++,f+=4){var d=c/(i-1),h=n.clips[l];s(u,f,h.start*(1-d)+h.end*d);}else for(var p=0,m=0;p<i;p++,m+=4)s(0,m,p/(i-1));return o;}var ar=function(n){function r(r){n.call(this,r,at),this._updateColorRamp();}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.createBucket=function(n){return new i5(n);},r.prototype._handleSpecialPaintPropertyUpdate=function(n){"heatmap-color"===n&&this._updateColorRamp();},r.prototype._updateColorRamp=function(){this.colorRamp=an({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null;},r.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null);},r.prototype.queryRadius=function(){return 0;},r.prototype.queryIntersectsFeature=function(){return!1;},r.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility;},r;}(rI),ai={paint:new rk({"hillshade-illumination-direction":new rC(eM.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new rC(eM.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new rC(eM.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new rC(eM.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new rC(eM.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new rC(eM.paint_hillshade["hillshade-accent-color"])})},aa=function(n){function r(r){n.call(this,r,ai);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility;},r;}(rI),ao=rF([{name:"a_pos",components:2,type:"Int16"}],4).members,as=al;function al(n,r,i){i=i||2;var a,o,s,l,u,c,f,d=r&&r.length,h=d?r[0]*i:n.length,p=au(n,0,h,i,!0),m=[];if(!p||p.next===p.prev)return m;if(d&&(p=function(n,r,i,a){var o,s,l,u=[];for(o=0,s=r.length;o<s;o++)(l=au(n,r[o]*a,o<s-1?r[o+1]*a:n.length,a,!1))===l.next&&(l.steiner=!0),u.push(function(n){var r=n,i=n;do(r.x<i.x||r.x===i.x&&r.y<i.y)&&(i=r),r=r.next;while(r!==n)return i;}(l));for(u.sort(af),o=0;o<u.length;o++)(function(n,r){if(r=function(n,r){var i,a,o,s=r,l=n.x,u=n.y,c=-1/0;do{if(u<=s.y&&u>=s.next.y&&s.next.y!==s.y){var f=s.x+(u-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(f<=l&&f>c){if(c=f,f===l){if(u===s.y)return s;if(u===s.next.y)return s.next;}o=s.x<s.next.x?s:s.next;}}s=s.next;}while(s!==r)if(!o)return null;if(l===c)return o;var d,h=o,p=o.x,m=o.y,g=1/0;s=o;do l>=s.x&&s.x>=p&&l!==s.x&&ah(u<m?l:c,u,p,m,u<m?c:l,u,s.x,s.y)&&(d=Math.abs(u-s.y)/(l-s.x),a_(s,n)&&(d<g||d===g&&(s.x>o.x||s.x===o.x&&(i=o,a=s,0>ap(i.prev,i,a.prev)&&0>ap(a.next,i,i.next))))&&(o=s,g=d)),s=s.next;while(s!==h)return o;}(n,r)){var i=ab(r,n);ac(r,r.next),ac(i,i.next);}})(u[o],i),i=ac(i,i.next);return i;}(n,r,p,i)),n.length>80*i){a=s=n[0],o=l=n[1];for(var g=i;g<h;g+=i)(u=n[g])<a&&(a=u),(c=n[g+1])<o&&(o=c),u>s&&(s=u),c>l&&(l=c);f=0!==(f=Math.max(s-a,l-o))?1/f:0;}return function n(r,i,a,o,s,l,u){if(r){!u&&l&&function(n,r,i,a){var o=n;do null===o.z&&(o.z=ad(o.x,o.y,r,i,a)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==n)o.prevZ.nextZ=null,o.prevZ=null,function(n){var r,i,a,o,s,l,u,c,f=1;do{for(i=n,n=null,s=null,l=0;i;){for(l++,a=i,u=0,r=0;r<f&&(u++,a=a.nextZ);r++);for(c=f;u>0||c>0&&a;)0!==u&&(0===c||!a||i.z<=a.z)?(o=i,i=i.nextZ,u--):(o=a,a=a.nextZ,c--),s?s.nextZ=o:n=o,o.prevZ=s,s=o;i=a;}s.nextZ=null,f*=2;}while(l>1)}(o);}(r,o,s,l);for(var c,f,d=r;r.prev!==r.next;)if(c=r.prev,f=r.next,l?function(n,r,i,a){var o=n.prev,s=n.next;if(ap(o,n,s)>=0)return!1;for(var l=o.x>n.x?o.x>s.x?o.x:s.x:n.x>s.x?n.x:s.x,u=o.y>n.y?o.y>s.y?o.y:s.y:n.y>s.y?n.y:s.y,c=ad(o.x<n.x?o.x<s.x?o.x:s.x:n.x<s.x?n.x:s.x,o.y<n.y?o.y<s.y?o.y:s.y:n.y<s.y?n.y:s.y,r,i,a),f=ad(l,u,r,i,a),d=n.prevZ,h=n.nextZ;d&&d.z>=c&&h&&h.z<=f;){if(d!==n.prev&&d!==n.next&&ah(o.x,o.y,n.x,n.y,s.x,s.y,d.x,d.y)&&ap(d.prev,d,d.next)>=0||(d=d.prevZ,h!==n.prev&&h!==n.next&&ah(o.x,o.y,n.x,n.y,s.x,s.y,h.x,h.y)&&ap(h.prev,h,h.next)>=0))return!1;h=h.nextZ;}for(;d&&d.z>=c;){if(d!==n.prev&&d!==n.next&&ah(o.x,o.y,n.x,n.y,s.x,s.y,d.x,d.y)&&ap(d.prev,d,d.next)>=0)return!1;d=d.prevZ;}for(;h&&h.z<=f;){if(h!==n.prev&&h!==n.next&&ah(o.x,o.y,n.x,n.y,s.x,s.y,h.x,h.y)&&ap(h.prev,h,h.next)>=0)return!1;h=h.nextZ;}return!0;}(r,o,s,l):function(n){var r=n.prev,i=n.next;if(ap(r,n,i)>=0)return!1;for(var a=n.next.next;a!==n.prev;){if(ah(r.x,r.y,n.x,n.y,i.x,i.y,a.x,a.y)&&ap(a.prev,a,a.next)>=0)return!1;a=a.next;}return!0;}(r))i.push(c.i/a),i.push(r.i/a),i.push(f.i/a),aE(r),r=f.next,d=f.next;else if((r=f)===d){u?1===u?n(r=function(n,r,i){var a=n;do{var o=a.prev,s=a.next.next;!am(o,s)&&ag(o,a,a.next,s)&&a_(o,s)&&a_(s,o)&&(r.push(o.i/i),r.push(a.i/i),r.push(s.i/i),aE(a),aE(a.next),a=n=s),a=a.next;}while(a!==n)return ac(a);}(ac(r),i,a),i,a,o,s,l,2):2===u&&function(r,i,a,o,s,l){var u=r;do{for(var c,f,d=u.next.next;d!==u.prev;){if(u.i!==d.i&&(c=u,f=d,c.next.i!==f.i&&c.prev.i!==f.i&&!function(n,r){var i=n;do{if(i.i!==n.i&&i.next.i!==n.i&&i.i!==r.i&&i.next.i!==r.i&&ag(i,i.next,n,r))return!0;i=i.next;}while(i!==n)return!1;}(c,f)&&(a_(c,f)&&a_(f,c)&&function(n,r){var i=n,a=!1,o=(n.x+r.x)/2,s=(n.y+r.y)/2;do i.y>s!=i.next.y>s&&i.next.y!==i.y&&o<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(a=!a),i=i.next;while(i!==n)return a;}(c,f)&&(ap(c.prev,c,f.prev)||ap(c,f.prev,f))||am(c,f)&&ap(c.prev,c,c.next)>0&&ap(f.prev,f,f.next)>0))){var h=ab(u,d);return u=ac(u,u.next),h=ac(h,h.next),n(u,i,a,o,s,l),void n(h,i,a,o,s,l);}d=d.next;}u=u.next;}while(u!==r)}(r,i,a,o,s,l):n(ac(r),i,a,o,s,l,1);break;}}}(p,m,i,a,o,f),m;}function au(n,r,i,a,o){var s,l;if(o===aS(n,r,i,a)>0)for(s=r;s<i;s+=a)l=ax(s,n[s],n[s+1],l);else for(s=i-a;s>=r;s-=a)l=ax(s,n[s],n[s+1],l);return l&&am(l,l.next)&&(aE(l),l=l.next),l;}function ac(n,r){if(!n)return n;r||(r=n);var i,a=n;do if(i=!1,a.steiner||!am(a,a.next)&&0!==ap(a.prev,a,a.next))a=a.next;else{if(aE(a),(a=r=a.prev)===a.next)break;i=!0;}while(i||a!==r)return r;}function af(n,r){return n.x-r.x;}function ad(n,r,i,a,o){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-i)*o)|n<<8))|n<<4))|n<<2))|n<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-a)*o)|r<<8))|r<<4))|r<<2))|r<<1))<<1;}function ah(n,r,i,a,o,s,l,u){return(o-l)*(r-u)-(n-l)*(s-u)>=0&&(n-l)*(a-u)-(i-l)*(r-u)>=0&&(i-l)*(s-u)-(o-l)*(a-u)>=0;}function ap(n,r,i){return(r.y-n.y)*(i.x-r.x)-(r.x-n.x)*(i.y-r.y);}function am(n,r){return n.x===r.x&&n.y===r.y;}function ag(n,r,i,a){var o=ay(ap(n,r,i)),s=ay(ap(n,r,a)),l=ay(ap(i,a,n)),u=ay(ap(i,a,r));return o!==s&&l!==u||!(0!==o||!av(n,i,r))||!(0!==s||!av(n,a,r))||!(0!==l||!av(i,n,a))||!(0!==u||!av(i,r,a));}function av(n,r,i){return r.x<=Math.max(n.x,i.x)&&r.x>=Math.min(n.x,i.x)&&r.y<=Math.max(n.y,i.y)&&r.y>=Math.min(n.y,i.y);}function ay(n){return n>0?1:n<0?-1:0;}function a_(n,r){return 0>ap(n.prev,n,n.next)?ap(n,r,n.next)>=0&&ap(n,n.prev,r)>=0:0>ap(n,r,n.prev)||0>ap(n,n.next,r);}function ab(n,r){var i=new aw(n.i,n.x,n.y),a=new aw(r.i,r.x,r.y),o=n.next,s=r.prev;return n.next=r,r.prev=n,i.next=o,o.prev=i,a.next=i,i.prev=a,s.next=a,a.prev=s,a;}function ax(n,r,i,a){var o=new aw(n,r,i);return a?(o.next=a.next,o.prev=a,a.next.prev=o,a.next=o):(o.prev=o,o.next=o),o;}function aE(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ);}function aw(n,r,i){this.i=n,this.x=r,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1;}function aS(n,r,i,a){for(var o=0,s=r,l=i-a;s<i;s+=a)o+=(n[l]-n[s])*(n[s+1]+n[l+1]),l=s;return o;}function aT(n,r,i){var a=n[r];n[r]=n[i],n[i]=a;}function aA(n,r){return n<r?-1:n>r?1:0;}function aC(n,r){var i,a=n.length;if(a<=1)return[n];for(var o,s,l=[],u=0;u<a;u++){var c=function(n){for(var r=0,i=0,a=n.length,o=a-1,s=void 0,l=void 0;i<a;o=i++)r+=((l=n[o]).x-(s=n[i]).x)*(s.y+l.y);return r;}(n[u]);0!==c&&(n[u].area=Math.abs(c),void 0===s&&(s=c<0),s===c<0?(o&&l.push(o),o=[n[u]]):o.push(n[u]));}if(o&&l.push(o),r>1)for(var f=0;f<l.length;f++)l[f].length<=r||(function n(r,i,a,o,s){for(;o>a;){if(o-a>600){var l=o-a+1,u=i-a+1,c=Math.log(l),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(l-f)/l)*(u-l/2<0?-1:1);n(r,i,Math.max(a,Math.floor(i-u*f/l+d)),Math.min(o,Math.floor(i+(l-u)*f/l+d)),s);}var h=r[i],p=a,m=o;for(aT(r,a,i),s(r[o],h)>0&&aT(r,a,o);p<m;){for(aT(r,p,m),p++,m--;0>s(r[p],h);)p++;for(;s(r[m],h)>0;)m--;}0===s(r[a],h)?aT(r,a,m):aT(r,++m,o),m<=i&&(a=m+1),i<=m&&(o=m-1);}}(i=l[f],r,1,l[f].length-1||i.length-1,aO||aA),l[f]=l[f].slice(0,r));return l;}function aO(n,r){return r.area-n.area;}function aM(n,r,i){for(var a=i.patternDependencies,o=!1,s=0;s<r.length;s+=1){var l=r[s].paint.get(n+"-pattern");l.isConstant()||(o=!0);var u=l.constantOr(null);u&&(o=!0,a[u.to]=!0,a[u.from]=!0);}return o;}function aR(n,r,i,a,o){for(var s=o.patternDependencies,l=0;l<r.length;l+=1){var u=r[l],c=u.paint.get(n+"-pattern").value;if("constant"!==c.kind){var f=c.evaluate({zoom:a-1},i,{},o.availableImages),d=c.evaluate({zoom:a},i,{},o.availableImages),h=c.evaluate({zoom:a+1},i,{},o.availableImages);d=d&&d.name?d.name:d,h=h&&h.name?h.name:h,s[f=f&&f.name?f.name:f]=!0,s[d]=!0,s[h]=!0,i.patterns[u.id]={min:f,mid:d,max:h};}}return i;}al.deviation=function(n,r,i,a){var o=r&&r.length,s=Math.abs(aS(n,0,o?r[0]*i:n.length,i));if(o)for(var l=0,u=r.length;l<u;l++)s-=Math.abs(aS(n,r[l]*i,l<u-1?r[l+1]*i:n.length,i));var c=0;for(l=0;l<a.length;l+=3){var f=a[l]*i,d=a[l+1]*i,h=a[l+2]*i;c+=Math.abs((n[f]-n[h])*(n[d+1]-n[f+1])-(n[f]-n[d])*(n[h+1]-n[f+1]));}return 0===s&&0===c?0:Math.abs((c-s)/s);},al.flatten=function(n){for(var r=n[0][0].length,i={vertices:[],holes:[],dimensions:r},a=0,o=0;o<n.length;o++){for(var s=0;s<n[o].length;s++)for(var l=0;l<r;l++)i.vertices.push(n[o][s][l]);o>0&&i.holes.push(a+=n[o-1].length);}return i;},as.default=al;var aP=function(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(function(n){return n.id;}),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new rj,this.indexArray=new rQ,this.indexArray2=new r4,this.programConfigurations=new iL(n.layers,n.zoom),this.segments=new iu,this.segments2=new iu,this.stateDependentLayerIds=this.layers.filter(function(n){return n.isStateDependent();}).map(function(n){return n.id;});};aP.prototype.populate=function(n,r,i){this.hasPattern=aM("fill",this.layers,r);for(var a=this.layers[0].layout.get("fill-sort-key"),o=[],s=0;s<n.length;s+=1){var l=n[s],u=l.feature,c=l.id,f=l.index,d=l.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,p=iB(u,h);if(this.layers[0]._featureFilter.filter(new ry(this.zoom),p,i)){var m=a?a.evaluate(p,{},i,r.availableImages):void 0,g={id:c,properties:u.properties,type:u.type,sourceLayerIndex:d,index:f,geometry:h?p.geometry:iF(u),patterns:{},sortKey:m};o.push(g);}}a&&o.sort(function(n,r){return n.sortKey-r.sortKey;});for(var v=0;v<o.length;v+=1){var y=o[v],_=y.geometry,b=y.index,x=y.sourceLayerIndex;if(this.hasPattern){var E=aR("fill",this.layers,y,this.zoom,r);this.patternFeatures.push(E);}else this.addFeature(y,_,b,i,{});r.featureIndex.insert(n[b].feature,_,b,x,this.index);}},aP.prototype.update=function(n,r,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,r,this.stateDependentLayers,i);},aP.prototype.addFeatures=function(n,r,i){for(var a=0,o=this.patternFeatures;a<o.length;a+=1){var s=o[a];this.addFeature(s,s.geometry,s.index,r,i);}},aP.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length;},aP.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload;},aP.prototype.upload=function(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,ao),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0;},aP.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy());},aP.prototype.addFeature=function(n,r,i,a,o){for(var s=0,l=aC(r,500);s<l.length;s+=1){for(var u=l[s],c=0,f=0;f<u.length;f+=1)c+=u[f].length;for(var d=this.segments.prepareSegment(c,this.layoutVertexArray,this.indexArray),h=d.vertexLength,p=[],m=[],g=0;g<u.length;g+=1){var v=u[g];if(0!==v.length){v!==u[0]&&m.push(p.length/2);var y=this.segments2.prepareSegment(v.length,this.layoutVertexArray,this.indexArray2),_=y.vertexLength;this.layoutVertexArray.emplaceBack(v[0].x,v[0].y),this.indexArray2.emplaceBack(_+v.length-1,_),p.push(v[0].x),p.push(v[0].y);for(var b=1;b<v.length;b++)this.layoutVertexArray.emplaceBack(v[b].x,v[b].y),this.indexArray2.emplaceBack(_+b-1,_+b),p.push(v[b].x),p.push(v[b].y);y.vertexLength+=v.length,y.primitiveLength+=v.length;}}for(var x=as(p,m),E=0;E<x.length;E+=3)this.indexArray.emplaceBack(h+x[E],h+x[E+1],h+x[E+2]);d.vertexLength+=c,d.primitiveLength+=x.length/3;}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,i,o,a);},n8("FillBucket",aP,{omit:["layers","patternFeatures"]});var ak=new rk({"fill-sort-key":new rO(eM.layout_fill["fill-sort-key"])}),aI={paint:new rk({"fill-antialias":new rC(eM.paint_fill["fill-antialias"]),"fill-opacity":new rO(eM.paint_fill["fill-opacity"]),"fill-color":new rO(eM.paint_fill["fill-color"]),"fill-outline-color":new rO(eM.paint_fill["fill-outline-color"]),"fill-translate":new rC(eM.paint_fill["fill-translate"]),"fill-translate-anchor":new rC(eM.paint_fill["fill-translate-anchor"]),"fill-pattern":new rM(eM.paint_fill["fill-pattern"])}),layout:ak},aL=function(n){function r(r){n.call(this,r,aI);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.recalculate=function(r,i){n.prototype.recalculate.call(this,r,i);var a=this.paint._values["fill-outline-color"];"constant"===a.value.kind&&void 0===a.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"]);},r.prototype.createBucket=function(n){return new aP(n);},r.prototype.queryRadius=function(){return iY(this.paint.get("fill-translate"));},r.prototype.queryIntersectsFeature=function(n,r,i,a,o,s,l){return iV(iZ(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),s.angle,l),a);},r.prototype.isTileClipped=function(){return!0;},r;}(rI),aN=rF([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members;function aD(n,r,i,a,o){this.properties={},this.extent=i,this.type=0,this._pbf=n,this._geometry=-1,this._keys=a,this._values=o,n.readFields(aF,this,r);}function aF(n,r,i){1==n?r.id=i.readVarint():2==n?function(n,r){for(var i=n.readVarint()+n.pos;n.pos<i;){var a=r._keys[n.readVarint()],o=r._values[n.readVarint()];r.properties[a]=o;}}(i,r):3==n?r.type=i.readVarint():4==n&&(r._geometry=i.pos);}function aB(n,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields(aj,this,r),this.length=this._features.length;}function aj(n,r,i){15===n?r.version=i.readVarint():1===n?r.name=i.readString():5===n?r.extent=i.readVarint():2===n?r._features.push(i.pos):3===n?r._keys.push(i.readString()):4===n&&r._values.push(function(n){for(var r=null,i=n.readVarint()+n.pos;n.pos<i;){var a=n.readVarint()>>3;r=1===a?n.readString():2===a?n.readFloat():3===a?n.readDouble():4===a?n.readVarint64():5===a?n.readVarint():6===a?n.readSVarint():7===a?n.readBoolean():null;}return r;}(i));}function az(n,r,i){if(3===n){var a=new aB(i,i.readVarint()+i.pos);a.length&&(r[a.name]=a);}}aD.types=["Unknown","Point","LineString","Polygon"],aD.prototype.loadGeometry=function(){var n=this._pbf;n.pos=this._geometry;for(var r,i=n.readVarint()+n.pos,o=1,s=0,l=0,u=0,c=[];n.pos<i;){if(s<=0){var f=n.readVarint();o=7&f,s=f>>3;}if(s--,1===o||2===o)l+=n.readSVarint(),u+=n.readSVarint(),1===o&&(r&&c.push(r),r=[]),r.push(new a(l,u));else{if(7!==o)throw Error("unknown command "+o);r&&r.push(r[0].clone());}}return r&&c.push(r),c;},aD.prototype.bbox=function(){var n=this._pbf;n.pos=this._geometry;for(var r=n.readVarint()+n.pos,i=1,a=0,o=0,s=0,l=1/0,u=-1/0,c=1/0,f=-1/0;n.pos<r;){if(a<=0){var d=n.readVarint();i=7&d,a=d>>3;}if(a--,1===i||2===i)(o+=n.readSVarint())<l&&(l=o),o>u&&(u=o),(s+=n.readSVarint())<c&&(c=s),s>f&&(f=s);else if(7!==i)throw Error("unknown command "+i);}return[l,c,u,f];},aD.prototype.toGeoJSON=function(n,r,i){var a,o,s=this.extent*Math.pow(2,i),l=this.extent*n,u=this.extent*r,c=this.loadGeometry(),f=aD.types[this.type];function d(n){for(var r=0;r<n.length;r++){var i=n[r];n[r]=[360*(i.x+l)/s-180,360/Math.PI*Math.atan(Math.exp((180-360*(i.y+u)/s)*Math.PI/180))-90];}}switch(this.type){case 1:var h=[];for(a=0;a<c.length;a++)h[a]=c[a][0];d(c=h);break;case 2:for(a=0;a<c.length;a++)d(c[a]);break;case 3:for(c=function(n){var r=n.length;if(r<=1)return[n];for(var i,a,o=[],s=0;s<r;s++){var l=function(n){for(var r,i,a=0,o=0,s=n.length,l=s-1;o<s;l=o++)a+=((i=n[l]).x-(r=n[o]).x)*(r.y+i.y);return a;}(n[s]);0!==l&&(void 0===a&&(a=l<0),a===l<0?(i&&o.push(i),i=[n[s]]):i.push(n[s]));}return i&&o.push(i),o;}(c),a=0;a<c.length;a++)for(o=0;o<c[a].length;o++)d(c[a][o]);}1===c.length?c=c[0]:f="Multi"+f;var p={type:"Feature",geometry:{type:f,coordinates:c},properties:this.properties};return"id"in this&&(p.id=this.id),p;},aB.prototype.feature=function(n){if(n<0||n>=this._features.length)throw Error("feature index out of bounds");this._pbf.pos=this._features[n];var r=this._pbf.readVarint()+this._pbf.pos;return new aD(this._pbf,r,this.extent,this._keys,this._values);};var aU={VectorTile:function(n,r){this.layers=n.readFields(az,{},r);},VectorTileFeature:aD,VectorTileLayer:aB},aV=aU.VectorTileFeature.types;function aG(n,r,i,a,o,s,l,u){n.emplaceBack(r,i,2*Math.floor(8192*a)+l,16384*o,16384*s,Math.round(u));}var aH=function(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(function(n){return n.id;}),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new rU,this.indexArray=new rQ,this.programConfigurations=new iL(n.layers,n.zoom),this.segments=new iu,this.stateDependentLayerIds=this.layers.filter(function(n){return n.isStateDependent();}).map(function(n){return n.id;});};aH.prototype.populate=function(n,r,i){this.features=[],this.hasPattern=aM("fill-extrusion",this.layers,r);for(var a=0;a<n.length;a+=1){var o=n[a],s=o.feature,l=o.id,u=o.index,c=o.sourceLayerIndex,f=this.layers[0]._featureFilter.needGeometry,d=iB(s,f);if(this.layers[0]._featureFilter.filter(new ry(this.zoom),d,i)){var h={id:l,sourceLayerIndex:c,index:u,geometry:f?d.geometry:iF(s),properties:s.properties,type:s.type,patterns:{}};this.hasPattern?this.features.push(aR("fill-extrusion",this.layers,h,this.zoom,r)):this.addFeature(h,h.geometry,u,i,{}),r.featureIndex.insert(s,h.geometry,u,c,this.index,!0);}}},aH.prototype.addFeatures=function(n,r,i){for(var a=0,o=this.features;a<o.length;a+=1){var s=o[a];this.addFeature(s,s.geometry,s.index,r,i);}},aH.prototype.update=function(n,r,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,r,this.stateDependentLayers,i);},aH.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length;},aH.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload;},aH.prototype.upload=function(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,aN),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0;},aH.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy());},aH.prototype.addFeature=function(n,r,i,a,o){for(var s=0,l=aC(r,500);s<l.length;s+=1){for(var u=l[s],c=0,f=0;f<u.length;f+=1)c+=u[f].length;for(var d=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),h=0;h<u.length;h+=1){var p=u[h];if(0!==p.length&&!(p.every(function(n){return n.x<0;})||p.every(function(n){return n.x>8192;})||p.every(function(n){return n.y<0;})||p.every(function(n){return n.y>8192;})))for(var m=0,g=0;g<p.length;g++){var v=p[g];if(g>=1){var y=p[g-1];if((v.x!==y.x||!(v.x<0)&&!(v.x>8192))&&(v.y!==y.y||!(v.y<0)&&!(v.y>8192))){d.vertexLength+4>iu.MAX_VERTEX_ARRAY_LENGTH&&(d=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var _=v.sub(y)._perp()._unit(),b=y.dist(v);m+b>32768&&(m=0),aG(this.layoutVertexArray,v.x,v.y,_.x,_.y,0,0,m),aG(this.layoutVertexArray,v.x,v.y,_.x,_.y,0,1,m),aG(this.layoutVertexArray,y.x,y.y,_.x,_.y,0,0,m+=b),aG(this.layoutVertexArray,y.x,y.y,_.x,_.y,0,1,m);var x=d.vertexLength;this.indexArray.emplaceBack(x,x+2,x+1),this.indexArray.emplaceBack(x+1,x+2,x+3),d.vertexLength+=4,d.primitiveLength+=2;}}}}if(d.vertexLength+c>iu.MAX_VERTEX_ARRAY_LENGTH&&(d=this.segments.prepareSegment(c,this.layoutVertexArray,this.indexArray)),"Polygon"===aV[n.type]){for(var E=[],w=[],S=d.vertexLength,T=0;T<u.length;T+=1){var A=u[T];if(0!==A.length){A!==u[0]&&w.push(E.length/2);for(var C=0;C<A.length;C++){var O=A[C];aG(this.layoutVertexArray,O.x,O.y,0,0,1,1,0),E.push(O.x),E.push(O.y);}}}for(var M=as(E,w),R=0;R<M.length;R+=3)this.indexArray.emplaceBack(S+M[R],S+M[R+2],S+M[R+1]);d.primitiveLength+=M.length/3,d.vertexLength+=c;}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,i,o,a);},n8("FillExtrusionBucket",aH,{omit:["layers","features"]});var aW={paint:new rk({"fill-extrusion-opacity":new rC(eM["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new rO(eM["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new rC(eM["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new rC(eM["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new rM(eM["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new rO(eM["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new rO(eM["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new rC(eM["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},aX=function(n){function r(r){n.call(this,r,aW);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.createBucket=function(n){return new aH(n);},r.prototype.queryRadius=function(){return iY(this.paint.get("fill-extrusion-translate"));},r.prototype.is3D=function(){return!0;},r.prototype.queryIntersectsFeature=function(n,r,i,o,s,l,u,c){var f=iZ(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),l.angle,u),d=this.paint.get("fill-extrusion-height").evaluate(r,i),h=this.paint.get("fill-extrusion-base").evaluate(r,i),p=function(n,r,i,o){for(var s=[],l=0;l<n.length;l+=1){var u=n[l],c=[u.x,u.y,0,1];i2(c,c,r),s.push(new a(c[0]/c[3],c[1]/c[3]));}return s;}(f,c),m=function(n,r,i,o){for(var s=[],l=[],u=o[8]*r,c=o[9]*r,f=o[10]*r,d=o[11]*r,h=o[8]*i,p=o[9]*i,m=o[10]*i,g=o[11]*i,v=0;v<n.length;v+=1){for(var y=[],_=[],b=0,x=n[v];b<x.length;b+=1){var E=x[b],w=E.x,S=E.y,T=o[0]*w+o[4]*S+o[12],A=o[1]*w+o[5]*S+o[13],C=o[2]*w+o[6]*S+o[14],O=o[3]*w+o[7]*S+o[15],M=C+f,R=O+d,P=T+h,k=A+p,I=C+m,L=O+g,N=new a((T+u)/R,(A+c)/R);N.z=M/R,y.push(N);var D=new a(P/L,k/L);D.z=I/L,_.push(D);}s.push(y),l.push(_);}return[s,l];}(o,h,d,c);return function(n,r,i){var a=1/0;iV(i,r)&&(a=a$(i,r[0]));for(var o=0;o<r.length;o++)for(var s=r[o],l=n[o],u=0;u<s.length-1;u++){var c=s[u],f=[c,s[u+1],l[u+1],l[u],c];iU(i,f)&&(a=Math.min(a,a$(i,f)));}return a!==1/0&&a;}(m[0],m[1],p);},r;}(rI);function aq(n,r){return n.x*r.x+n.y*r.y;}function a$(n,r){if(1===n.length){for(var i,a=0,o=r[a++];!i||o.equals(i);)if(!(i=r[a++]))return 1/0;for(;a<r.length;a++){var s=r[a],l=n[0],u=i.sub(o),c=s.sub(o),f=l.sub(o),d=aq(u,u),h=aq(u,c),p=aq(c,c),m=aq(f,u),g=aq(f,c),v=d*p-h*h,y=(p*m-h*g)/v,_=(d*g-h*m)/v,b=o.z*(1-y-_)+i.z*y+s.z*_;if(isFinite(b))return b;}return 1/0;}for(var x=1/0,E=0;E<r.length;E+=1)x=Math.min(x,r[E].z);return x;}var aY=rF([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,aZ=rF([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,aK=aU.VectorTileFeature.types,aQ=Math.cos(Math.PI/180*37.5),aJ=function(n){var r=this;this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(function(n){return n.id;}),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(n){r.gradients[n.id]={};}),this.layoutVertexArray=new rV,this.layoutVertexArray2=new rG,this.indexArray=new rQ,this.programConfigurations=new iL(n.layers,n.zoom),this.segments=new iu,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(n){return n.isStateDependent();}).map(function(n){return n.id;});};aJ.prototype.populate=function(n,r,i){this.hasPattern=aM("line",this.layers,r);for(var a=this.layers[0].layout.get("line-sort-key"),o=[],s=0;s<n.length;s+=1){var l=n[s],u=l.feature,c=l.id,f=l.index,d=l.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,p=iB(u,h);if(this.layers[0]._featureFilter.filter(new ry(this.zoom),p,i)){var m=a?a.evaluate(p,{},i):void 0,g={id:c,properties:u.properties,type:u.type,sourceLayerIndex:d,index:f,geometry:h?p.geometry:iF(u),patterns:{},sortKey:m};o.push(g);}}a&&o.sort(function(n,r){return n.sortKey-r.sortKey;});for(var v=0;v<o.length;v+=1){var y=o[v],_=y.geometry,b=y.index,x=y.sourceLayerIndex;if(this.hasPattern){var E=aR("line",this.layers,y,this.zoom,r);this.patternFeatures.push(E);}else this.addFeature(y,_,b,i,{});r.featureIndex.insert(n[b].feature,_,b,x,this.index);}},aJ.prototype.update=function(n,r,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,r,this.stateDependentLayers,i);},aJ.prototype.addFeatures=function(n,r,i){for(var a=0,o=this.patternFeatures;a<o.length;a+=1){var s=o[a];this.addFeature(s,s.geometry,s.index,r,i);}},aJ.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length;},aJ.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload;},aJ.prototype.upload=function(n){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,aZ)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,aY),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0;},aJ.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy());},aJ.prototype.lineFeatureClips=function(n){if(n.properties&&n.properties.hasOwnProperty("mapbox_clip_start")&&n.properties.hasOwnProperty("mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end};},aJ.prototype.addFeature=function(n,r,i,a,o){var s=this.layers[0].layout,l=s.get("line-join").evaluate(n,{}),u=s.get("line-cap"),c=s.get("line-miter-limit"),f=s.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(var d=0;d<r.length;d+=1)this.addLine(r[d],n,l,u,c,f);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,i,o,a);},aJ.prototype.addLine=function(n,r,i,a,o,s){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var l=0;l<n.length-1;l++)this.totalDistance+=n[l].dist(n[l+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance);}for(var u="Polygon"===aK[r.type],c=n.length;c>=2&&n[c-1].equals(n[c-2]);)c--;for(var f=0;f<c-1&&n[f].equals(n[f+1]);)f++;if(!(c<(u?3:2))){"bevel"===i&&(o=1.05);var d,h=this.overscaling<=16?122880/(512*this.overscaling):0,p=this.segments.prepareSegment(10*c,this.layoutVertexArray,this.indexArray),m=void 0,g=void 0,v=void 0,y=void 0;this.e1=this.e2=-1,u&&(y=n[f].sub(d=n[c-2])._unit()._perp());for(var _=f;_<c;_++)if(!(g=_===c-1?u?n[f+1]:void 0:n[_+1])||!n[_].equals(g)){y&&(v=y),d&&(m=d),d=n[_],y=g?g.sub(d)._unit()._perp():v;var b=(v=v||y).add(y);0===b.x&&0===b.y||b._unit();var x=v.x*y.x+v.y*y.y,E=b.x*y.x+b.y*y.y,w=0!==E?1/E:1/0,S=2*Math.sqrt(2-2*E),T=E<aQ&&m&&g,A=v.x*y.y-v.y*y.x>0;if(T&&_>f){var C=d.dist(m);if(C>2*h){var O=d.sub(d.sub(m)._mult(h/C)._round());this.updateDistance(m,O),this.addCurrentVertex(O,v,0,0,p),m=O;}}var M=m&&g,R=M?i:u?"butt":a;if(M&&"round"===R&&(w<s?R="miter":w<=2&&(R="fakeround")),"miter"===R&&w>o&&(R="bevel"),"bevel"===R&&(w>2&&(R="flipbevel"),w<o&&(R="miter")),m&&this.updateDistance(m,d),"miter"===R)b._mult(w),this.addCurrentVertex(d,b,0,0,p);else if("flipbevel"===R){if(w>100)b=y.mult(-1);else{var P=w*v.add(y).mag()/v.sub(y).mag();b._perp()._mult(P*(A?-1:1));}this.addCurrentVertex(d,b,0,0,p),this.addCurrentVertex(d,b.mult(-1),0,0,p);}else if("bevel"===R||"fakeround"===R){var k=-Math.sqrt(w*w-1),I=A?k:0,L=A?0:k;if(m&&this.addCurrentVertex(d,v,I,L,p),"fakeround"===R)for(var N=Math.round(180*S/Math.PI/20),D=1;D<N;D++){var F=D/N;if(.5!==F){var B=F-.5;F+=F*B*(F-1)*((1.0904+x*(x*(3.55645-1.43519*x)-3.2452))*B*B+(.848013+x*(.215638*x-1.06021)));}var j=y.sub(v)._mult(F)._add(v)._unit()._mult(A?-1:1);this.addHalfVertex(d,j.x,j.y,!1,A,0,p);}g&&this.addCurrentVertex(d,y,-I,-L,p);}else if("butt"===R)this.addCurrentVertex(d,b,0,0,p);else if("square"===R){var z=m?1:-1;this.addCurrentVertex(d,b,z,z,p);}else"round"===R&&(m&&(this.addCurrentVertex(d,v,0,0,p),this.addCurrentVertex(d,v,1,1,p,!0)),g&&(this.addCurrentVertex(d,y,-1,-1,p,!0),this.addCurrentVertex(d,y,0,0,p)));if(T&&_<c-1){var U=d.dist(g);if(U>2*h){var V=d.add(g.sub(d)._mult(h/U)._round());this.updateDistance(d,V),this.addCurrentVertex(V,y,0,0,p),d=V;}}}}},aJ.prototype.addCurrentVertex=function(n,r,i,a,o,s){void 0===s&&(s=!1);var l=r.y*a-r.x,u=-r.y-r.x*a;this.addHalfVertex(n,r.x+r.y*i,r.y-r.x*i,s,!1,i,o),this.addHalfVertex(n,l,u,s,!0,-a,o),this.distance>16384&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(n,r,i,a,o,s));},aJ.prototype.addHalfVertex=function(n,r,i,a,o,s,l){var u=.5*(this.lineClips?32767*this.scaledDistance:this.scaledDistance);this.layoutVertexArray.emplaceBack((n.x<<1)+(a?1:0),(n.y<<1)+(o?1:0),Math.round(63*r)+128,Math.round(63*i)+128,1+(0===s?0:s<0?-1:1)|(63&u)<<2,u>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var c=l.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,c),l.primitiveLength++),o?this.e2=c:this.e1=c;},aJ.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance;},aJ.prototype.updateDistance=function(n,r){this.distance+=n.dist(r),this.updateScaledDistance();},n8("LineBucket",aJ,{omit:["layers","patternFeatures"]});var a0=new rk({"line-cap":new rC(eM.layout_line["line-cap"]),"line-join":new rO(eM.layout_line["line-join"]),"line-miter-limit":new rC(eM.layout_line["line-miter-limit"]),"line-round-limit":new rC(eM.layout_line["line-round-limit"]),"line-sort-key":new rO(eM.layout_line["line-sort-key"])}),a1={paint:new rk({"line-opacity":new rO(eM.paint_line["line-opacity"]),"line-color":new rO(eM.paint_line["line-color"]),"line-translate":new rC(eM.paint_line["line-translate"]),"line-translate-anchor":new rC(eM.paint_line["line-translate-anchor"]),"line-width":new rO(eM.paint_line["line-width"]),"line-gap-width":new rO(eM.paint_line["line-gap-width"]),"line-offset":new rO(eM.paint_line["line-offset"]),"line-blur":new rO(eM.paint_line["line-blur"]),"line-dasharray":new rR(eM.paint_line["line-dasharray"]),"line-pattern":new rM(eM.paint_line["line-pattern"]),"line-gradient":new rP(eM.paint_line["line-gradient"])}),layout:a0},a2=new(function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.possiblyEvaluate=function(r,i){return i=new ry(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,zoomHistory:i.zoomHistory,transition:i.transition}),n.prototype.possiblyEvaluate.call(this,r,i);},r.prototype.evaluate=function(r,i,a,o){return i=p({},i,{zoom:Math.floor(i.zoom)}),n.prototype.evaluate.call(this,r,i,a,o);},r;}(rO))(a1.paint.properties["line-width"].specification);a2.useIntegerZoom=!0;var a3=function(n){function r(r){n.call(this,r,a1),this.gradientVersion=0;}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._handleSpecialPaintPropertyUpdate=function(n){"line-gradient"===n&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof tO,this.gradientVersion=(this.gradientVersion+1)%9007199254740991);},r.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression;},r.prototype.recalculate=function(r,i){n.prototype.recalculate.call(this,r,i),this.paint._values["line-floorwidth"]=a2.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r);},r.prototype.createBucket=function(n){return new aJ(n);},r.prototype.queryRadius=function(n){var r,i;return r=i$("line-width",this,n),((i=i$("line-gap-width",this,n))>0?i+2*r:r)/2+Math.abs(i$("line-offset",this,n))+iY(this.paint.get("line-translate"));},r.prototype.queryIntersectsFeature=function(n,r,i,o,s,l,u){var c,f,d=iZ(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),l.angle,u),h=u/2*(c=this.paint.get("line-width").evaluate(r,i),(f=this.paint.get("line-gap-width").evaluate(r,i))>0?f+2*c:c),p=this.paint.get("line-offset").evaluate(r,i);return p&&(o=function(n,r){for(var i=[],o=new a(0,0),s=0;s<n.length;s++){for(var l=n[s],u=[],c=0;c<l.length;c++){var f=l[c],d=l[c+1],h=0===c?o:f.sub(l[c-1])._unit()._perp(),p=c===l.length-1?o:d.sub(f)._unit()._perp(),m=h._add(p)._unit();m._mult(1/(m.x*p.x+m.y*p.y)),u.push(m._mult(r)._add(f));}i.push(u);}return i;}(o,p*u)),function(n,r,i){for(var a=0;a<r.length;a++){var o=r[a];if(n.length>=3){for(var s=0;s<o.length;s++)if(iq(n,o[s]))return!0;}if(function(n,r,i){if(n.length>1){if(iG(n,r))return!0;for(var a=0;a<r.length;a++)if(iH(r[a],n,i))return!0;}for(var o=0;o<n.length;o++)if(iH(n[o],r,i))return!0;return!1;}(n,o,i))return!0;}return!1;}(d,o,h);},r.prototype.isTileClipped=function(){return!0;},r;}(rI),a4=rF([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),a5=rF([{name:"a_projected_pos",components:3,type:"Float32"}],4),a6=(rF([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),rF([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),a8=(rF([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),rF([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),a7=rF([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);rF([{name:"triangle",components:3,type:"Uint16"}]),rF([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),rF([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),rF([{type:"Float32",name:"offsetX"}]),rF([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var a9={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xa2":"\uFFE0","\xa3":"\uFFE1","\xa5":"\uFFE5","\xa6":"\uFFE4","\xac":"\uFFE2","\xaf":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},oe=function(n,r,i,a,o){var s,l,u=8*o-a-1,c=(1<<u)-1,f=c>>1,d=-7,h=i?o-1:0,p=i?-1:1,m=n[r+h];for(h+=p,s=m&(1<<-d)-1,m>>=-d,d+=u;d>0;s=256*s+n[r+h],h+=p,d-=8);for(l=s&(1<<-d)-1,s>>=-d,d+=a;d>0;l=256*l+n[r+h],h+=p,d-=8);if(0===s)s=1-f;else{if(s===c)return l?NaN:1/0*(m?-1:1);l+=Math.pow(2,a),s-=f;}return(m?-1:1)*l*Math.pow(2,s-a);},ot=function(n,r,i,a,o,s){var l,u,c,f=8*s-o-1,d=(1<<f)-1,h=d>>1,p=23===o?5960464477539062e-23:0,m=a?0:s-1,g=a?1:-1,v=r<0||0===r&&1/r<0?1:0;for(isNaN(r=Math.abs(r))||r===1/0?(u=isNaN(r)?1:0,l=d):(l=Math.floor(Math.log(r)/Math.LN2),r*(c=Math.pow(2,-l))<1&&(l--,c*=2),(r+=l+h>=1?p/c:p*Math.pow(2,1-h))*c>=2&&(l++,c/=2),l+h>=d?(u=0,l=d):l+h>=1?(u=(r*c-1)*Math.pow(2,o),l+=h):(u=r*Math.pow(2,h-1)*Math.pow(2,o),l=0));o>=8;n[i+m]=255&u,m+=g,u/=256,o-=8);for(l=l<<o|u,f+=o;f>0;n[i+m]=255&l,m+=g,l/=256,f-=8);n[i+m-g]|=128*v;};function on(n){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(n)?n:new Uint8Array(n||0),this.pos=0,this.type=0,this.length=this.buf.length;}on.Varint=0,on.Fixed64=1,on.Bytes=2,on.Fixed32=5;var or="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function oi(n){return n.type===on.Bytes?n.readVarint()+n.pos:n.pos+1;}function oa(n,r,i){var a=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));i.realloc(a);for(var o=i.pos-1;o>=n;o--)i.buf[o+a]=i.buf[o];}function oo(n,r){for(var i=0;i<n.length;i++)r.writeVarint(n[i]);}function os(n,r){for(var i=0;i<n.length;i++)r.writeSVarint(n[i]);}function ol(n,r){for(var i=0;i<n.length;i++)r.writeFloat(n[i]);}function ou(n,r){for(var i=0;i<n.length;i++)r.writeDouble(n[i]);}function oc(n,r){for(var i=0;i<n.length;i++)r.writeBoolean(n[i]);}function of(n,r){for(var i=0;i<n.length;i++)r.writeFixed32(n[i]);}function od(n,r){for(var i=0;i<n.length;i++)r.writeSFixed32(n[i]);}function oh(n,r){for(var i=0;i<n.length;i++)r.writeFixed64(n[i]);}function op(n,r){for(var i=0;i<n.length;i++)r.writeSFixed64(n[i]);}function om(n,r){return(n[r]|n[r+1]<<8|n[r+2]<<16)+16777216*n[r+3];}function og(n,r,i){n[i]=r,n[i+1]=r>>>8,n[i+2]=r>>>16,n[i+3]=r>>>24;}function ov(n,r){return(n[r]|n[r+1]<<8|n[r+2]<<16)+(n[r+3]<<24);}function oy(n,r,i){1===n&&i.readMessage(o_,r);}function o_(n,r,i){if(3===n){var a=i.readMessage(ob,{}),o=a.width,s=a.height,l=a.left,u=a.top,c=a.advance;r.push({id:a.id,bitmap:new i9({width:o+6,height:s+6},a.bitmap),metrics:{width:o,height:s,left:l,top:u,advance:c}});}}function ob(n,r,i){1===n?r.id=i.readVarint():2===n?r.bitmap=i.readBytes():3===n?r.width=i.readVarint():4===n?r.height=i.readVarint():5===n?r.left=i.readSVarint():6===n?r.top=i.readSVarint():7===n&&(r.advance=i.readVarint());}function ox(n){for(var r=0,i=0,a=0;a<n.length;a+=1){var o=n[a];r+=o.w*o.h,i=Math.max(i,o.w);}n.sort(function(n,r){return r.h-n.h;});for(var s=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),i),h:1/0}],l=0,u=0,c=0;c<n.length;c+=1)for(var f=n[c],d=s.length-1;d>=0;d--){var h=s[d];if(!(f.w>h.w||f.h>h.h)){if(f.x=h.x,f.y=h.y,u=Math.max(u,f.y+f.h),l=Math.max(l,f.x+f.w),f.w===h.w&&f.h===h.h){var p=s.pop();d<s.length&&(s[d]=p);}else f.h===h.h?(h.x+=f.w,h.w-=f.w):(f.w===h.w||s.push({x:h.x+f.w,y:h.y,w:h.w-f.w,h:f.h}),h.y+=f.h,h.h-=f.h);break;}}return{w:l,h:u,fill:r/(l*u)||0};}on.prototype={destroy:function(){this.buf=null;},readFields:function(n,r,i){for(i=i||this.length;this.pos<i;){var a=this.readVarint(),o=a>>3,s=this.pos;this.type=7&a,n(o,r,this),this.pos===s&&this.skip(a);}return r;},readMessage:function(n,r){return this.readFields(n,r,this.readVarint()+this.pos);},readFixed32:function(){var n=om(this.buf,this.pos);return this.pos+=4,n;},readSFixed32:function(){var n=ov(this.buf,this.pos);return this.pos+=4,n;},readFixed64:function(){var n=om(this.buf,this.pos)+4294967296*om(this.buf,this.pos+4);return this.pos+=8,n;},readSFixed64:function(){var n=om(this.buf,this.pos)+4294967296*ov(this.buf,this.pos+4);return this.pos+=8,n;},readFloat:function(){var n=oe(this.buf,this.pos,!0,23,4);return this.pos+=4,n;},readDouble:function(){var n=oe(this.buf,this.pos,!0,52,8);return this.pos+=8,n;},readVarint:function(n){var r,i,a=this.buf;return r=127&(i=a[this.pos++]),i<128?r:(r|=(127&(i=a[this.pos++]))<<7,i<128?r:(r|=(127&(i=a[this.pos++]))<<14,i<128?r:(r|=(127&(i=a[this.pos++]))<<21,i<128?r:function(n,r,i){var a,o,s,l=i.buf;if(o=(112&(s=l[i.pos++]))>>4,s<128||(o|=(127&(s=l[i.pos++]))<<3,s<128)||(o|=(127&(s=l[i.pos++]))<<10,s<128)||(o|=(127&(s=l[i.pos++]))<<17,s<128)||(o|=(127&(s=l[i.pos++]))<<24,s<128)||(o|=(1&(s=l[i.pos++]))<<31,s<128))return a=o,r?4294967296*a+(n>>>0):4294967296*(a>>>0)+(n>>>0);throw Error("Expected varint not more than 10 bytes");}(r|=(15&(i=a[this.pos]))<<28,n,this))));},readVarint64:function(){return this.readVarint(!0);},readSVarint:function(){var n=this.readVarint();return n%2==1?-((n+1)/2):n/2;},readBoolean:function(){return!!this.readVarint();},readString:function(){var n,r=this.readVarint()+this.pos,i=this.pos;return this.pos=r,r-i>=12&&or?(n=this.buf,or.decode(n.subarray(i,r))):function(n,r,i){for(var a="",o=r;o<i;){var s,l,u,c=n[o],f=null,d=c>239?4:c>223?3:c>191?2:1;if(o+d>i)break;1===d?c<128&&(f=c):2===d?128==(192&(s=n[o+1]))&&(f=(31&c)<<6|63&s)<=127&&(f=null):3===d?(l=n[o+2],128==(192&(s=n[o+1]))&&128==(192&l)&&((f=(15&c)<<12|(63&s)<<6|63&l)<=2047||f>=55296&&f<=57343)&&(f=null)):4===d&&(l=n[o+2],u=n[o+3],128==(192&(s=n[o+1]))&&128==(192&l)&&128==(192&u)&&((f=(15&c)<<18|(63&s)<<12|(63&l)<<6|63&u)<=65535||f>=1114112)&&(f=null)),null===f?(f=65533,d=1):f>65535&&(f-=65536,a+=String.fromCharCode(f>>>10&1023|55296),f=56320|1023&f),a+=String.fromCharCode(f),o+=d;}return a;}(this.buf,i,r);},readBytes:function(){var n=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,n);return this.pos=n,r;},readPackedVarint:function(n,r){if(this.type!==on.Bytes)return n.push(this.readVarint(r));var i=oi(this);for(n=n||[];this.pos<i;)n.push(this.readVarint(r));return n;},readPackedSVarint:function(n){if(this.type!==on.Bytes)return n.push(this.readSVarint());var r=oi(this);for(n=n||[];this.pos<r;)n.push(this.readSVarint());return n;},readPackedBoolean:function(n){if(this.type!==on.Bytes)return n.push(this.readBoolean());var r=oi(this);for(n=n||[];this.pos<r;)n.push(this.readBoolean());return n;},readPackedFloat:function(n){if(this.type!==on.Bytes)return n.push(this.readFloat());var r=oi(this);for(n=n||[];this.pos<r;)n.push(this.readFloat());return n;},readPackedDouble:function(n){if(this.type!==on.Bytes)return n.push(this.readDouble());var r=oi(this);for(n=n||[];this.pos<r;)n.push(this.readDouble());return n;},readPackedFixed32:function(n){if(this.type!==on.Bytes)return n.push(this.readFixed32());var r=oi(this);for(n=n||[];this.pos<r;)n.push(this.readFixed32());return n;},readPackedSFixed32:function(n){if(this.type!==on.Bytes)return n.push(this.readSFixed32());var r=oi(this);for(n=n||[];this.pos<r;)n.push(this.readSFixed32());return n;},readPackedFixed64:function(n){if(this.type!==on.Bytes)return n.push(this.readFixed64());var r=oi(this);for(n=n||[];this.pos<r;)n.push(this.readFixed64());return n;},readPackedSFixed64:function(n){if(this.type!==on.Bytes)return n.push(this.readSFixed64());var r=oi(this);for(n=n||[];this.pos<r;)n.push(this.readSFixed64());return n;},skip:function(n){var r=7&n;if(r===on.Varint)for(;this.buf[this.pos++]>127;);else if(r===on.Bytes)this.pos=this.readVarint()+this.pos;else if(r===on.Fixed32)this.pos+=4;else{if(r!==on.Fixed64)throw Error("Unimplemented type: "+r);this.pos+=8;}},writeTag:function(n,r){this.writeVarint(n<<3|r);},realloc:function(n){for(var r=this.length||16;r<this.pos+n;)r*=2;if(r!==this.length){var i=new Uint8Array(r);i.set(this.buf),this.buf=i,this.length=r;}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length);},writeFixed32:function(n){this.realloc(4),og(this.buf,n,this.pos),this.pos+=4;},writeSFixed32:function(n){this.realloc(4),og(this.buf,n,this.pos),this.pos+=4;},writeFixed64:function(n){this.realloc(8),og(this.buf,-1&n,this.pos),og(this.buf,Math.floor(1/4294967296*n),this.pos+4),this.pos+=8;},writeSFixed64:function(n){this.realloc(8),og(this.buf,-1&n,this.pos),og(this.buf,Math.floor(1/4294967296*n),this.pos+4),this.pos+=8;},writeVarint:function(n){(n=+n||0)>268435455||n<0?function(n,r){var i,a,o,s,l;if(n>=0?(i=n%4294967296|0,a=n/4294967296|0):(a=~(-n/4294967296),4294967295^(i=~(-n%4294967296))?i=i+1|0:(i=0,a=a+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw Error("Given varint doesn't fit into 10 bytes");r.realloc(10),o=i,r.buf[r.pos++]=127&o|128,o>>>=7,r.buf[r.pos++]=127&o|128,o>>>=7,r.buf[r.pos++]=127&o|128,o>>>=7,r.buf[r.pos++]=127&o|128,r.buf[r.pos]=127&(o>>>=7),l=(7&(s=a))<<4,r.buf[r.pos++]|=l|((s>>>=3)?128:0),s&&(r.buf[r.pos++]=127&s|((s>>>=7)?128:0),s&&(r.buf[r.pos++]=127&s|((s>>>=7)?128:0),s&&(r.buf[r.pos++]=127&s|((s>>>=7)?128:0),s&&(r.buf[r.pos++]=127&s|((s>>>=7)?128:0),s&&(r.buf[r.pos++]=127&s)))));}(n,this):(this.realloc(4),this.buf[this.pos++]=127&n|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=n>>>7&127))));},writeSVarint:function(n){this.writeVarint(n<0?-(2*n)-1:2*n);},writeBoolean:function(n){this.writeVarint(!!n);},writeString:function(n){n=String(n),this.realloc(4*n.length),this.pos++;var r=this.pos;this.pos=function(n,r,i){for(var a,o,s=0;s<r.length;s++){if((a=r.charCodeAt(s))>55295&&a<57344){if(!o){a>56319||s+1===r.length?(n[i++]=239,n[i++]=191,n[i++]=189):o=a;continue;}if(a<56320){n[i++]=239,n[i++]=191,n[i++]=189,o=a;continue;}a=o-55296<<10|a-56320|65536,o=null;}else o&&(n[i++]=239,n[i++]=191,n[i++]=189,o=null);a<128?n[i++]=a:(a<2048?n[i++]=a>>6|192:(a<65536?n[i++]=a>>12|224:(n[i++]=a>>18|240,n[i++]=a>>12&63|128),n[i++]=a>>6&63|128),n[i++]=63&a|128);}return i;}(this.buf,n,this.pos);var i=this.pos-r;i>=128&&oa(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i;},writeFloat:function(n){this.realloc(4),ot(this.buf,n,this.pos,!0,23,4),this.pos+=4;},writeDouble:function(n){this.realloc(8),ot(this.buf,n,this.pos,!0,52,8),this.pos+=8;},writeBytes:function(n){var r=n.length;this.writeVarint(r),this.realloc(r);for(var i=0;i<r;i++)this.buf[this.pos++]=n[i];},writeRawMessage:function(n,r){this.pos++;var i=this.pos;n(r,this);var a=this.pos-i;a>=128&&oa(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a;},writeMessage:function(n,r,i){this.writeTag(n,on.Bytes),this.writeRawMessage(r,i);},writePackedVarint:function(n,r){r.length&&this.writeMessage(n,oo,r);},writePackedSVarint:function(n,r){r.length&&this.writeMessage(n,os,r);},writePackedBoolean:function(n,r){r.length&&this.writeMessage(n,oc,r);},writePackedFloat:function(n,r){r.length&&this.writeMessage(n,ol,r);},writePackedDouble:function(n,r){r.length&&this.writeMessage(n,ou,r);},writePackedFixed32:function(n,r){r.length&&this.writeMessage(n,of,r);},writePackedSFixed32:function(n,r){r.length&&this.writeMessage(n,od,r);},writePackedFixed64:function(n,r){r.length&&this.writeMessage(n,oh,r);},writePackedSFixed64:function(n,r){r.length&&this.writeMessage(n,op,r);},writeBytesField:function(n,r){this.writeTag(n,on.Bytes),this.writeBytes(r);},writeFixed32Field:function(n,r){this.writeTag(n,on.Fixed32),this.writeFixed32(r);},writeSFixed32Field:function(n,r){this.writeTag(n,on.Fixed32),this.writeSFixed32(r);},writeFixed64Field:function(n,r){this.writeTag(n,on.Fixed64),this.writeFixed64(r);},writeSFixed64Field:function(n,r){this.writeTag(n,on.Fixed64),this.writeSFixed64(r);},writeVarintField:function(n,r){this.writeTag(n,on.Varint),this.writeVarint(r);},writeSVarintField:function(n,r){this.writeTag(n,on.Varint),this.writeSVarint(r);},writeStringField:function(n,r){this.writeTag(n,on.Bytes),this.writeString(r);},writeFloatField:function(n,r){this.writeTag(n,on.Fixed32),this.writeFloat(r);},writeDoubleField:function(n,r){this.writeTag(n,on.Fixed64),this.writeDouble(r);},writeBooleanField:function(n,r){this.writeVarintField(n,!!r);}};var oE=function(n,r){var i=r.pixelRatio,a=r.version,o=r.stretchX,s=r.stretchY,l=r.content;this.paddedRect=n,this.pixelRatio=i,this.stretchX=o,this.stretchY=s,this.content=l,this.version=a;},ow={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};ow.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1];},ow.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1];},ow.tlbr.get=function(){return this.tl.concat(this.br);},ow.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio];},Object.defineProperties(oE.prototype,ow);var oS=function(n,r){var i={},a={};this.haveRenderCallbacks=[];var o=[];this.addImages(n,i,o),this.addImages(r,a,o);var s=ox(o),l=new ae({width:s.w||1,height:s.h||1});for(var u in n){var c=n[u],f=i[u].paddedRect;ae.copy(c.data,l,{x:0,y:0},{x:f.x+1,y:f.y+1},c.data);}for(var d in r){var h=r[d],p=a[d].paddedRect,m=p.x+1,g=p.y+1,v=h.data.width,y=h.data.height;ae.copy(h.data,l,{x:0,y:0},{x:m,y:g},h.data),ae.copy(h.data,l,{x:0,y:y-1},{x:m,y:g-1},{width:v,height:1}),ae.copy(h.data,l,{x:0,y:0},{x:m,y:g+y},{width:v,height:1}),ae.copy(h.data,l,{x:v-1,y:0},{x:m-1,y:g},{width:1,height:y}),ae.copy(h.data,l,{x:0,y:0},{x:m+v,y:g},{width:1,height:y});}this.image=l,this.iconPositions=i,this.patternPositions=a;};oS.prototype.addImages=function(n,r,i){for(var a in n){var o=n[a],s={x:0,y:0,w:o.data.width+2,h:o.data.height+2};i.push(s),r[a]=new oE(s,o),o.hasRenderCallback&&this.haveRenderCallbacks.push(a);}},oS.prototype.patchUpdatedImages=function(n,r){for(var i in n.dispatchRenderCallbacks(this.haveRenderCallbacks),n.updatedImages)this.patchUpdatedImage(this.iconPositions[i],n.getImage(i),r),this.patchUpdatedImage(this.patternPositions[i],n.getImage(i),r);},oS.prototype.patchUpdatedImage=function(n,r,i){if(n&&r&&n.version!==r.version){n.version=r.version;var a=n.tl;i.update(r.data,void 0,{x:a[0],y:a[1]});}},n8("ImagePosition",oE),n8("ImageAtlas",oS);var oT={horizontal:1,vertical:2,horizontalOnly:3},oA=function(){this.scale=1,this.fontStack="",this.imageName=null;};oA.forText=function(n,r){var i=new oA;return i.scale=n||1,i.fontStack=r,i;},oA.forImage=function(n){var r=new oA;return r.imageName=n,r;};var oC=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null;};function oO(n,r,i,a,o,s,l,u,c,f,d,h,p,m,g,v){var y,_=oC.fromFeature(n,o);h===oT.vertical&&_.verticalizePunctuation();var b=rv.processBidirectionalText,x=rv.processStyledBidirectionalText;if(b&&1===_.sections.length){y=[];for(var E=0,w=b(_.toString(),oL(_,f,s,r,a,m,g));E<w.length;E+=1){var S=w[E],T=new oC;T.text=S,T.sections=_.sections;for(var A=0;A<S.length;A++)T.sectionIndex.push(0);y.push(T);}}else if(x){y=[];for(var C=0,O=x(_.text,_.sectionIndex,oL(_,f,s,r,a,m,g));C<O.length;C+=1){var M=O[C],R=new oC;R.text=M[0],R.sectionIndex=M[1],R.sections=_.sections,y.push(R);}}else y=function(n,r){for(var i=[],a=n.text,o=0,s=0;s<r.length;s+=1){var l=r[s];i.push(n.substring(o,l)),o=l;}return o<a.length&&i.push(n.substring(o,a.length)),i;}(_,oL(_,f,s,r,a,m,g));var P=[],k={positionedLines:P,text:_.toString(),top:d[1],bottom:d[1],left:d[0],right:d[0],writingMode:h,iconsInText:!1,verticalizable:!1};return function(n,r,i,a,o,s,l,u,c,f,d,h){for(var p=0,m=-17,g=0,v=0,y="right"===u?1:"left"===u?0:.5,_=0,b=0;b<o.length;b+=1){var x=o[b];x.trim();var E=x.getMaxScale(),w=24*(E-1),S={positionedGlyphs:[],lineOffset:0};n.positionedLines[_]=S;var T=S.positionedGlyphs,A=0;if(x.length()){for(var C=0;C<x.length();C++){var O=x.getSection(C),M=x.getSectionIndex(C),R=x.getCharCode(C),P=0,k=null,I=null,L=null,N=24,D=!(c===oT.horizontal||!d&&!ro(R)||d&&(oM[R]||ri.Arabic(R)||ri["Arabic Supplement"](R)||ri["Arabic Extended-A"](R)||ri["Arabic Presentation Forms-A"](R)||ri["Arabic Presentation Forms-B"](R)));if(O.imageName){var F=a[O.imageName];if(!F)continue;L=O.imageName,n.iconsInText=n.iconsInText||!0,I=F.paddedRect;var B=F.displaySize;O.scale=24*O.scale/h,P=w+(24-B[1]*O.scale),N=(k={width:B[0],height:B[1],left:1,top:-3,advance:D?B[1]:B[0]}).advance;var j=D?B[0]*O.scale-24*E:B[1]*O.scale-24*E;j>0&&j>A&&(A=j);}else{var z=i[O.fontStack],U=z&&z[R];if(U&&U.rect)I=U.rect,k=U.metrics;else{var V=r[O.fontStack],G=V&&V[R];if(!G)continue;k=G.metrics;}P=24*(E-O.scale);}D?(n.verticalizable=!0,T.push({glyph:R,imageName:L,x:p,y:m+P,vertical:D,scale:O.scale,fontStack:O.fontStack,sectionIndex:M,metrics:k,rect:I}),p+=N*O.scale+f):(T.push({glyph:R,imageName:L,x:p,y:m+P,vertical:D,scale:O.scale,fontStack:O.fontStack,sectionIndex:M,metrics:k,rect:I}),p+=k.advance*O.scale+f);}0!==T.length&&(g=Math.max(p-f,g),function(n,r,i,a,o){if(a||o)for(var s=n[i],l=(n[i].x+s.metrics.advance*s.scale)*a,u=0;u<=i;u++)n[u].x-=l,n[u].y+=o;}(T,0,T.length-1,y,A)),p=0;var H=s*E+A;S.lineOffset=Math.max(A,w),m+=H,v=Math.max(H,v),++_;}else m+=s,++_;}var W=m- -17,X=oN(l),q=X.horizontalAlign,$=X.verticalAlign;(function(n,r,i,a,o,s,l,u,c){var f,d=(r-i)*o;f=s!==l?-u*a- -17:(-a*c+.5)*l;for(var h=0;h<n.length;h+=1)for(var p=0,m=n[h].positionedGlyphs;p<m.length;p+=1){var g=m[p];g.x+=d,g.y+=f;}})(n.positionedLines,y,q,$,g,v,s,W,o.length),n.top+=-$*W,n.bottom=n.top+W,n.left+=-q*g,n.right=n.left+g;}(k,r,i,a,y,l,u,c,h,f,p,v),!function(n){for(var r=0;r<n.length;r+=1)if(0!==n[r].positionedGlyphs.length)return!1;return!0;}(P)&&k;}oC.fromFeature=function(n,r){for(var i=new oC,a=0;a<n.sections.length;a++){var o=n.sections[a];o.image?i.addImageSection(o):i.addTextSection(o,r);}return i;},oC.prototype.length=function(){return this.text.length;},oC.prototype.getSection=function(n){return this.sections[this.sectionIndex[n]];},oC.prototype.getSectionIndex=function(n){return this.sectionIndex[n];},oC.prototype.getCharCode=function(n){return this.text.charCodeAt(n);},oC.prototype.verticalizePunctuation=function(){this.text=function(n){for(var r="",i=0;i<n.length;i++){var a=n.charCodeAt(i+1)||null,o=n.charCodeAt(i-1)||null;r+=a&&rs(a)&&!a9[n[i+1]]||o&&rs(o)&&!a9[n[i-1]]||!a9[n[i]]?n[i]:a9[n[i]];}return r;}(this.text);},oC.prototype.trim=function(){for(var n=0,r=0;r<this.text.length&&oM[this.text.charCodeAt(r)];r++)n++;for(var i=this.text.length,a=this.text.length-1;a>=0&&a>=n&&oM[this.text.charCodeAt(a)];a--)i--;this.text=this.text.substring(n,i),this.sectionIndex=this.sectionIndex.slice(n,i);},oC.prototype.substring=function(n,r){var i=new oC;return i.text=this.text.substring(n,r),i.sectionIndex=this.sectionIndex.slice(n,r),i.sections=this.sections,i;},oC.prototype.toString=function(){return this.text;},oC.prototype.getMaxScale=function(){var n=this;return this.sectionIndex.reduce(function(r,i){return Math.max(r,n.sections[i].scale);},0);},oC.prototype.addTextSection=function(n,r){this.text+=n.text,this.sections.push(oA.forText(n.scale,n.fontStack||r));for(var i=this.sections.length-1,a=0;a<n.text.length;++a)this.sectionIndex.push(i);},oC.prototype.addImageSection=function(n){var r=n.image?n.image.name:"";if(0!==r.length){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(oA.forImage(r)),this.sectionIndex.push(this.sections.length-1)):T("Reached maximum number of images 6401");}else T("Can't add FormattedSection with an empty image.");},oC.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID);};var oM={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},oR={};function oP(n,r,i,a,o,s){if(r.imageName){var l=a[r.imageName];return l?l.displaySize[0]*r.scale*24/s+o:0;}var u=i[r.fontStack],c=u&&u[n];return c?c.metrics.advance*r.scale+o:0;}function ok(n,r,i,a){var o=Math.pow(n-r,2);return a?n<r?o/2:2*o:o+Math.abs(i)*i;}function oI(n,r,i,a,o,s){for(var l=null,u=ok(r,i,o,s),c=0;c<a.length;c+=1){var f=a[c],d=ok(r-f.x,i,o,s)+f.badness;d<=u&&(l=f,u=d);}return{index:n,x:r,priorBreak:l,badness:u};}function oL(n,r,i,a,o,s,l){if("point"!==s||!n)return[];for(var u=[],c=function(n,r,i,a,o,s){for(var l=0,u=0;u<n.length();u++){var c=n.getSection(u);l+=oP(n.getCharCode(u),c,a,o,r,s);}return l/Math.max(1,Math.ceil(l/i));}(n,r,i,a,o,l),f=n.text.indexOf("\u200B")>=0,d=0,h=0;h<n.length();h++){var p=n.getSection(h),m=n.getCharCode(h);if(oM[m]||(d+=oP(m,p,a,o,r,l)),h<n.length()-1){var g=!(m<11904||!(ri["Bopomofo Extended"](m)||ri.Bopomofo(m)||ri["CJK Compatibility Forms"](m)||ri["CJK Compatibility Ideographs"](m)||ri["CJK Compatibility"](m)||ri["CJK Radicals Supplement"](m)||ri["CJK Strokes"](m)||ri["CJK Symbols and Punctuation"](m)||ri["CJK Unified Ideographs Extension A"](m)||ri["CJK Unified Ideographs"](m)||ri["Enclosed CJK Letters and Months"](m)||ri["Halfwidth and Fullwidth Forms"](m)||ri.Hiragana(m)||ri["Ideographic Description Characters"](m)||ri["Kangxi Radicals"](m)||ri["Katakana Phonetic Extensions"](m)||ri.Katakana(m)||ri["Vertical Forms"](m)||ri["Yi Radicals"](m)||ri["Yi Syllables"](m)));(oR[m]||g||p.imageName)&&u.push(oI(h+1,d,c,u,function(n,r,i){var a=0;return 10===n&&(a-=1e4),i&&(a+=150),40!==n&&65288!==n||(a+=50),41!==r&&65289!==r||(a+=50),a;}(m,n.getCharCode(h+1),g&&f),!1));}}return function n(r){return r?n(r.priorBreak).concat(r.index):[];}(oI(n.length(),d,c,u,0,!0));}function oN(n){var r=.5,i=.5;switch(n){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0;}switch(n){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0;}return{horizontalAlign:r,verticalAlign:i};}function oD(n,r,i,a,o,s){var l,u=n.image;if(u.content){var c=u.content,f=u.pixelRatio||1;l=[c[0]/f,c[1]/f,u.displaySize[0]-c[2]/f,u.displaySize[1]-c[3]/f];}var d,h,p,m,g=r.left*s,v=r.right*s;"width"===i||"both"===i?(m=o[0]+g-a[3],h=o[0]+v+a[1]):h=(m=o[0]+(g+v-u.displaySize[0])/2)+u.displaySize[0];var y=r.top*s,_=r.bottom*s;return"height"===i||"both"===i?(d=o[1]+y-a[0],p=o[1]+_+a[2]):p=(d=o[1]+(y+_-u.displaySize[1])/2)+u.displaySize[1],{image:u,top:d,right:h,bottom:p,left:m,collisionPadding:l};}oR[10]=!0,oR[32]=!0,oR[38]=!0,oR[40]=!0,oR[41]=!0,oR[43]=!0,oR[45]=!0,oR[47]=!0,oR[173]=!0,oR[183]=!0,oR[8203]=!0,oR[8208]=!0,oR[8211]=!0,oR[8231]=!0;var oF=function(n){function r(r,i,a,o){n.call(this,r,i),this.angle=a,void 0!==o&&(this.segment=o);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.clone=function(){return new r(this.x,this.y,this.angle,this.segment);},r;}(a);function oB(n,r){var i=r.expression;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new ry(n+1))};if("source"===i.kind)return{kind:"source"};for(var a=i.zoomStops,o=i.interpolationType,s=0;s<a.length&&a[s]<=n;)s++;for(var l=s=Math.max(0,s-1);l<a.length&&a[l]<n+1;)l++;l=Math.min(a.length-1,l);var u=a[s],c=a[l];return"composite"===i.kind?{kind:"composite",minZoom:u,maxZoom:c,interpolationType:o}:{kind:"camera",minZoom:u,maxZoom:c,minSize:i.evaluate(new ry(u)),maxSize:i.evaluate(new ry(c)),interpolationType:o};}function oj(n,r,i){var a=r.uSize,o=i.lowerSize;return"source"===n.kind?o/128:"composite"===n.kind?tM(o/128,i.upperSize/128,r.uSizeT):a;}function oz(n,r){var i=0,a=0;if("constant"===n.kind)a=n.layoutSize;else if("source"!==n.kind){var o=n.interpolationType,s=o?d(tG.interpolationFactor(o,r,n.minZoom,n.maxZoom),0,1):0;"camera"===n.kind?a=tM(n.minSize,n.maxSize,s):i=s;}return{uSizeT:i,uSize:a};}n8("Anchor",oF);var oU=Object.freeze({__proto__:null,getSizeData:oB,evaluateSizeForFeature:oj,evaluateSizeForZoom:oz,SIZE_PACK_FACTOR:128});function oV(n,r,i,a,o){if(void 0===r.segment)return!0;for(var s=r,l=r.segment+1,u=0;u>-i/2;){if(--l<0)return!1;u-=n[l].dist(s),s=n[l];}u+=n[l].dist(n[l+1]),l++;for(var c=[],f=0;u<i/2;){var d=n[l],h=n[l+1];if(!h)return!1;var p=n[l-1].angleTo(d)-d.angleTo(h);for(p=Math.abs((p+3*Math.PI)%(2*Math.PI)-Math.PI),c.push({distance:u,angleDelta:p}),f+=p;u-c[0].distance>a;)f-=c.shift().angleDelta;if(f>o)return!1;l++,u+=d.dist(h);}return!0;}function oG(n){for(var r=0,i=0;i<n.length-1;i++)r+=n[i].dist(n[i+1]);return r;}function oH(n,r){return Math.max(n?n.right-n.left:0,r?r.right-r.left:0);}function oW(n,r,i,o,s){for(var l=[],u=0;u<n.length;u++)for(var c=n[u],f=void 0,d=0;d<c.length-1;d++){var h=c[d],p=c[d+1];h.x<r&&p.x<r||(h.x<r?h=new a(r,h.y+(r-h.x)/(p.x-h.x)*(p.y-h.y))._round():p.x<r&&(p=new a(r,h.y+(r-h.x)/(p.x-h.x)*(p.y-h.y))._round()),h.y<i&&p.y<i||(h.y<i?h=new a(h.x+(i-h.y)/(p.y-h.y)*(p.x-h.x),i)._round():p.y<i&&(p=new a(h.x+(i-h.y)/(p.y-h.y)*(p.x-h.x),i)._round()),h.x>=o&&p.x>=o||(h.x>=o?h=new a(o,h.y+(o-h.x)/(p.x-h.x)*(p.y-h.y))._round():p.x>=o&&(p=new a(o,h.y+(o-h.x)/(p.x-h.x)*(p.y-h.y))._round()),h.y>=s&&p.y>=s||(h.y>=s?h=new a(h.x+(s-h.y)/(p.y-h.y)*(p.x-h.x),s)._round():p.y>=s&&(p=new a(h.x+(s-h.y)/(p.y-h.y)*(p.x-h.x),s)._round()),f&&h.equals(f[f.length-1])||l.push(f=[h]),f.push(p)))));}return l;}function oX(n,r,i,o){var s=[],l=n.image,u=l.pixelRatio,c=l.paddedRect.w-2,f=l.paddedRect.h-2,d=n.right-n.left,h=n.bottom-n.top,p=l.stretchX||[[0,c]],m=l.stretchY||[[0,f]],g=function(n,r){return n+r[1]-r[0];},v=p.reduce(g,0),y=m.reduce(g,0),_=c-v,b=f-y,x=0,E=v,w=0,S=y,T=0,A=_,C=0,O=b;if(l.content&&o){var M=l.content;x=oq(p,0,M[0]),w=oq(m,0,M[1]),E=oq(p,M[0],M[2]),S=oq(m,M[1],M[3]),T=M[0]-x,C=M[1]-w,A=M[2]-M[0]-E,O=M[3]-M[1]-S;}var R=function(o,s,c,f){var p,m,g,_,b=(o.stretch-x)/E*d+n.left,M=(p=o.fixed-T,p-A*o.stretch/v),R=(s.stretch-w)/S*h+n.top,P=(m=s.fixed-C,m-O*s.stretch/y),k=(c.stretch-x)/E*d+n.left,I=(g=c.fixed-T,g-A*c.stretch/v),L=(f.stretch-w)/S*h+n.top,N=(_=f.fixed-C,_-O*f.stretch/y),D=new a(b,R),F=new a(k,R),B=new a(k,L),j=new a(b,L),z=new a(M/u,P/u),U=new a(I/u,N/u),V=r*Math.PI/180;if(V){var G=Math.sin(V),H=Math.cos(V),W=[H,-G,G,H];D._matMult(W),F._matMult(W),j._matMult(W),B._matMult(W);}var X=o.stretch+o.fixed,q=s.stretch+s.fixed;return{tl:D,tr:F,bl:j,br:B,tex:{x:l.paddedRect.x+1+X,y:l.paddedRect.y+1+q,w:c.stretch+c.fixed-X,h:f.stretch+f.fixed-q},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:z,pixelOffsetBR:U,minFontScaleX:A/u/d,minFontScaleY:O/u/h,isSDF:i};};if(o&&(l.stretchX||l.stretchY))for(var P=o$(p,_,v),k=o$(m,b,y),I=0;I<P.length-1;I++)for(var L=P[I],N=P[I+1],D=0;D<k.length-1;D++)s.push(R(L,k[D],N,k[D+1]));else s.push(R({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:c+1},{fixed:0,stretch:f+1}));return s;}function oq(n,r,i){for(var a=0,o=0;o<n.length;o+=1){var s=n[o];a+=Math.max(r,Math.min(i,s[1]))-Math.max(r,Math.min(i,s[0]));}return a;}function o$(n,r,i){for(var a=[{fixed:-1,stretch:0}],o=0;o<n.length;o+=1){var s=n[o],l=s[0],u=s[1],c=a[a.length-1];a.push({fixed:l-c.stretch,stretch:c.stretch}),a.push({fixed:l-c.stretch,stretch:c.stretch+(u-l)});}return a.push({fixed:r+1,stretch:i}),a;}var oY=function(n,r,i,o,s,l,u,c,f,d){if(this.boxStartIndex=n.length,f){var h=l.top,p=l.bottom,m=l.collisionPadding;m&&(h-=m[1],p+=m[3]);var g=p-h;g>0&&(g=Math.max(10,g),this.circleDiameter=g);}else{var v=l.top*u-c,y=l.bottom*u+c,_=l.left*u-c,b=l.right*u+c,x=l.collisionPadding;if(x&&(_-=x[0]*u,v-=x[1]*u,b+=x[2]*u,y+=x[3]*u),d){var E=new a(_,v),w=new a(b,v),S=new a(_,y),T=new a(b,y),A=d*Math.PI/180;E._rotate(A),w._rotate(A),S._rotate(A),T._rotate(A),_=Math.min(E.x,w.x,S.x,T.x),b=Math.max(E.x,w.x,S.x,T.x),v=Math.min(E.y,w.y,S.y,T.y),y=Math.max(E.y,w.y,S.y,T.y);}n.emplaceBack(r.x,r.y,_,v,b,y,i,o,s);}this.boxEndIndex=n.length;},oZ=function(n,r){if(void 0===n&&(n=[]),void 0===r&&(r=oK),this.data=n,this.length=this.data.length,this.compare=r,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i);};function oK(n,r){return n<r?-1:n>r?1:0;}function oQ(n,r){return r.max-n.max;}function oJ(n,r,i,o){this.p=new a(n,r),this.h=i,this.d=function(n,r){for(var i=!1,a=1/0,o=0;o<r.length;o++)for(var s=r[o],l=0,u=s.length,c=u-1;l<u;c=l++){var f=s[l],d=s[c];f.y>n.y!=d.y>n.y&&n.x<(d.x-f.x)*(n.y-f.y)/(d.y-f.y)+f.x&&(i=!i),a=Math.min(a,iW(n,f,d));}return(i?1:-1)*Math.sqrt(a);}(this.p,o),this.max=this.d+this.h*Math.SQRT2;}oZ.prototype.push=function(n){this.data.push(n),this.length++,this._up(this.length-1);},oZ.prototype.pop=function(){if(0!==this.length){var n=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),n;}},oZ.prototype.peek=function(){return this.data[0];},oZ.prototype._up=function(n){for(var r=this.data,i=this.compare,a=r[n];n>0;){var o=n-1>>1,s=r[o];if(i(a,s)>=0)break;r[n]=s,n=o;}r[n]=a;},oZ.prototype._down=function(n){for(var r=this.data,i=this.compare,a=this.length>>1,o=r[n];n<a;){var s=1+(n<<1),l=r[s],u=s+1;if(u<this.length&&0>i(r[u],l)&&(s=u,l=r[u]),i(l,o)>=0)break;r[n]=l,n=s;}r[n]=o;};var o0=Number.POSITIVE_INFINITY;function o1(n,r){return r[1]!==o0?function(n,r,i){var a=0,o=0;switch(r=Math.abs(r),i=Math.abs(i),n){case"top-right":case"top-left":case"top":o=i-7;break;case"bottom-right":case"bottom-left":case"bottom":o=7-i;}switch(n){case"top-right":case"bottom-right":case"right":a=-r;break;case"top-left":case"bottom-left":case"left":a=r;}return[a,o];}(n,r[0],r[1]):function(n,r){var i=0,a=0;r<0&&(r=0);var o=r/Math.sqrt(2);switch(n){case"top-right":case"top-left":a=o-7;break;case"bottom-right":case"bottom-left":a=7-o;break;case"bottom":a=7-r;break;case"top":a=r-7;}switch(n){case"top-right":case"bottom-right":i=-o;break;case"top-left":case"bottom-left":i=o;break;case"left":i=r;break;case"right":i=-r;}return[i,a];}(n,r[0]);}function o2(n){switch(n){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left";}return"center";}function o3(n,r,i,o,s,l,u,c,f,d,h,p,m,g,v){var y=function(n,r,i,o,s,l,u,c){for(var f=o.layout.get("text-rotate").evaluate(l,{})*Math.PI/180,d=[],h=0,p=r.positionedLines;h<p.length;h+=1)for(var m=p[h],g=0,v=m.positionedGlyphs;g<v.length;g+=1){var y=v[g];if(y.rect){var _=y.rect||{},b=4,x=!0,E=1,w=0,S=(s||c)&&y.vertical,T=y.metrics.advance*y.scale/2;if(c&&r.verticalizable&&(w=m.lineOffset/2-(y.imageName?-(24-y.metrics.width*y.scale)/2:24*(y.scale-1))),y.imageName){var A=u[y.imageName];x=A.sdf,b=1/(E=A.pixelRatio);}var C=s?[y.x+T,y.y]:[0,0],O=s?[0,0]:[y.x+T+i[0],y.y+i[1]-w],M=[0,0];S&&(M=O,O=[0,0]);var R=(y.metrics.left-b)*y.scale-T+O[0],P=(-y.metrics.top-b)*y.scale+O[1],k=R+_.w*y.scale/E,I=P+_.h*y.scale/E,L=new a(R,P),N=new a(k,P),D=new a(R,I),F=new a(k,I);if(S){var B=new a(-T,T- -17),j=-Math.PI/2,z=12-T,U=new a(22-z,-(y.imageName?z:0)),V=new(Function.prototype.bind.apply(a,[null].concat(M)));L._rotateAround(j,B)._add(U)._add(V),N._rotateAround(j,B)._add(U)._add(V),D._rotateAround(j,B)._add(U)._add(V),F._rotateAround(j,B)._add(U)._add(V);}if(f){var G=Math.sin(f),H=Math.cos(f),W=[H,-G,G,H];L._matMult(W),N._matMult(W),D._matMult(W),F._matMult(W);}var X=new a(0,0),q=new a(0,0);d.push({tl:L,tr:N,bl:D,br:F,tex:_,writingMode:r.writingMode,glyphOffset:C,sectionIndex:y.sectionIndex,isSDF:x,pixelOffsetTL:X,pixelOffsetBR:q,minFontScaleX:0,minFontScaleY:0});}}return d;}(0,i,c,s,l,u,o,n.allowVerticalPlacement),_=n.textSizeData,b=null;"source"===_.kind?(b=[128*s.layout.get("text-size").evaluate(u,{})])[0]>32640&&T(n.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===_.kind&&((b=[128*g.compositeTextSizes[0].evaluate(u,{},v),128*g.compositeTextSizes[1].evaluate(u,{},v)])[0]>32640||b[1]>32640)&&T(n.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),n.addSymbols(n.text,y,b,c,l,u,d,r,f.lineStartIndex,f.lineLength,m,v);for(var x=0;x<h.length;x+=1)p[h[x]]=n.text.placedSymbolArray.length-1;return 4*y.length;}function o4(n){for(var r in n)return n[r];return null;}var o5=aU.VectorTileFeature.types,o6=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function o8(n,r,i,a,o,s,l,u,c,f,d,h,p){var m=u?Math.min(32640,Math.round(u[0])):0,g=u?Math.min(32640,Math.round(u[1])):0;n.emplaceBack(r,i,Math.round(32*a),Math.round(32*o),s,l,(m<<1)+(c?1:0),g,16*f,16*d,256*h,256*p);}function o7(n,r,i){n.emplaceBack(r.x,r.y,i),n.emplaceBack(r.x,r.y,i),n.emplaceBack(r.x,r.y,i),n.emplaceBack(r.x,r.y,i);}var o9=function(n){this.layoutVertexArray=new rW,this.indexArray=new rQ,this.programConfigurations=n,this.segments=new iu,this.dynamicLayoutVertexArray=new rX,this.opacityVertexArray=new rq,this.placedSymbolArray=new ie;};o9.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length;},o9.prototype.upload=function(n,r,i,a){this.isEmpty()||(i&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,a4.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,r),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,a5.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,o6,!0),this.opacityVertexBuffer.itemSize=1),(i||a)&&this.programConfigurations.upload(n));},o9.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy());},n8("SymbolBuffers",o9);var se=function(n,r,i){this.layoutVertexArray=new n,this.layoutAttributes=r,this.indexArray=new i,this.segments=new iu,this.collisionVertexArray=new rK;};se.prototype.upload=function(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,a6.members,!0);},se.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy());},n8("CollisionBuffers",se);var st=function(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(function(n){return n.id;}),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=i0([]),this.placementViewportMatrix=i0([]);var r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=oB(this.zoom,r["text-size"]),this.iconSizeData=oB(this.zoom,r["icon-size"]);var i=this.layers[0].layout,a=i.get("symbol-sort-key"),o=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==o&&void 0!==a.constantOr(1),this.sortFeaturesByY=("viewport-y"===o||"auto"===o&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===i.get("symbol-placement")&&(this.writingModes=i.get("text-writing-mode").map(function(n){return oT[n];})),this.stateDependentLayerIds=this.layers.filter(function(n){return n.isStateDependent();}).map(function(n){return n.id;}),this.sourceID=n.sourceID;};st.prototype.createArrays=function(){this.text=new o9(new iL(this.layers,this.zoom,function(n){return/^text/.test(n);})),this.icon=new o9(new iL(this.layers,this.zoom,function(n){return/^icon/.test(n);})),this.glyphOffsetArray=new ii,this.lineVertexArray=new ia,this.symbolInstances=new ir;},st.prototype.calculateGlyphDependencies=function(n,r,i,a,o){for(var s=0;s<n.length;s++)if(r[n.charCodeAt(s)]=!0,(i||a)&&o){var l=a9[n.charAt(s)];l&&(r[l.charCodeAt(0)]=!0);}},st.prototype.populate=function(n,r,i){var a=this.layers[0],o=a.layout,s=o.get("text-font"),l=o.get("text-field"),u=o.get("icon-image"),c=("constant"!==l.value.kind||l.value.value instanceof e3&&!l.value.value.isEmpty()||l.value.value.toString().length>0)&&("constant"!==s.value.kind||s.value.value.length>0),f="constant"!==u.value.kind||!!u.value.value||Object.keys(u.parameters).length>0,d=o.get("symbol-sort-key");if(this.features=[],c||f){for(var h=r.iconDependencies,p=r.glyphDependencies,m=r.availableImages,g=new ry(this.zoom),v=0;v<n.length;v+=1){var y=n[v],_=y.feature,b=y.id,x=y.index,E=y.sourceLayerIndex,w=a._featureFilter.needGeometry,S=iB(_,w);if(a._featureFilter.filter(g,S,i)){w||(S.geometry=iF(_));var T=void 0;if(c){var A=a.getValueAndResolveTokens("text-field",S,i,m),C=e3.factory(A);(function(n){for(var r=0,i=n.sections;r<i.length;r+=1)if(function(n){for(var r=0;r<n.length;r+=1)if(rl(n[r].charCodeAt(0)))return!0;return!1;}(i[r].text))return!0;return!1;})(C)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===rm()||this.hasRTLText&&rv.isParsed())&&(T=function(n,r,i){return n.sections.forEach(function(n){var a,o;n.text=(a=n.text,"uppercase"===(o=r.layout.get("text-transform").evaluate(i,{}))?a=a.toLocaleUpperCase():"lowercase"===o&&(a=a.toLocaleLowerCase()),rv.applyArabicShaping&&(a=rv.applyArabicShaping(a)),a);}),n;}(C,a,S));}var O=void 0;if(f){var M=a.getValueAndResolveTokens("icon-image",S,i,m);O=M instanceof e4?M:e4.fromString(M);}if(T||O){var R=this.sortFeaturesByKey?d.evaluate(S,{},i):void 0;if(this.features.push({id:b,text:T,icon:O,index:x,sourceLayerIndex:E,geometry:S.geometry,properties:_.properties,type:o5[_.type],sortKey:R}),O&&(h[O.name]=!0),T){var P=s.evaluate(S,{},i).join(","),k="map"===o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(oT.vertical)>=0;for(var I=0,L=T.sections;I<L.length;I+=1){var N=L[I];if(N.image)h[N.image.name]=!0;else{var D=ra(T.toString()),F=N.fontStack||P,B=p[F]=p[F]||{};this.calculateGlyphDependencies(N.text,B,k,this.allowVerticalPlacement,D);}}}}}}"line"===o.get("symbol-placement")&&(this.features=function(n){var r={},i={},a=[],o=0;function s(r){a.push(n[r]),o++;}function l(n,r,o){var s=i[n];return delete i[n],i[r]=s,a[s].geometry[0].pop(),a[s].geometry[0]=a[s].geometry[0].concat(o[0]),s;}function u(n,i,o){var s=r[i];return delete r[i],r[n]=s,a[s].geometry[0].shift(),a[s].geometry[0]=o[0].concat(a[s].geometry[0]),s;}function c(n,r,i){var a=i?r[0][r[0].length-1]:r[0][0];return n+":"+a.x+":"+a.y;}for(var f=0;f<n.length;f++){var d=n[f],h=d.geometry,p=d.text?d.text.toString():null;if(p){var m=c(p,h),g=c(p,h,!0);if(m in i&&g in r&&i[m]!==r[g]){var v=u(m,g,h),y=l(m,g,a[v].geometry);delete r[m],delete i[g],i[c(p,a[y].geometry,!0)]=y,a[v].geometry=null;}else m in i?l(m,g,h):g in r?u(m,g,h):(s(f),r[m]=o-1,i[g]=o-1);}else s(f);}return a.filter(function(n){return n.geometry;});}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(n,r){return n.sortKey-r.sortKey;});}},st.prototype.update=function(n,r,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,r,this.layers,i),this.icon.programConfigurations.updatePaintArrays(n,r,this.layers,i));},st.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText;},st.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload;},st.prototype.upload=function(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0;},st.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy();},st.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData();},st.prototype.addToLineVertexArray=function(n,r){var i=this.lineVertexArray.length;if(void 0!==n.segment){for(var a=n.dist(r[n.segment+1]),o=n.dist(r[n.segment]),s={},l=n.segment+1;l<r.length;l++)s[l]={x:r[l].x,y:r[l].y,tileUnitDistanceFromAnchor:a},l<r.length-1&&(a+=r[l+1].dist(r[l]));for(var u=n.segment||0;u>=0;u--)s[u]={x:r[u].x,y:r[u].y,tileUnitDistanceFromAnchor:o},u>0&&(o+=r[u-1].dist(r[u]));for(var c=0;c<r.length;c++){var f=s[c];this.lineVertexArray.emplaceBack(f.x,f.y,f.tileUnitDistanceFromAnchor);}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i};},st.prototype.addSymbols=function(n,r,i,a,o,s,l,u,c,f,d,h){for(var p=n.indexArray,m=n.layoutVertexArray,g=n.segments.prepareSegment(4*r.length,m,p,this.canOverlap?s.sortKey:void 0),v=this.glyphOffsetArray.length,y=g.vertexLength,_=this.allowVerticalPlacement&&l===oT.vertical?Math.PI/2:0,b=s.text&&s.text.sections,x=0;x<r.length;x++){var E=r[x],w=E.tl,S=E.tr,T=E.bl,A=E.br,C=E.tex,O=E.pixelOffsetTL,M=E.pixelOffsetBR,R=E.minFontScaleX,P=E.minFontScaleY,k=E.glyphOffset,I=E.isSDF,L=E.sectionIndex,N=g.vertexLength,D=k[1];o8(m,u.x,u.y,w.x,D+w.y,C.x,C.y,i,I,O.x,O.y,R,P),o8(m,u.x,u.y,S.x,D+S.y,C.x+C.w,C.y,i,I,M.x,O.y,R,P),o8(m,u.x,u.y,T.x,D+T.y,C.x,C.y+C.h,i,I,O.x,M.y,R,P),o8(m,u.x,u.y,A.x,D+A.y,C.x+C.w,C.y+C.h,i,I,M.x,M.y,R,P),o7(n.dynamicLayoutVertexArray,u,_),p.emplaceBack(N,N+1,N+2),p.emplaceBack(N+1,N+2,N+3),g.vertexLength+=4,g.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(k[0]),x!==r.length-1&&L===r[x+1].sectionIndex||n.programConfigurations.populatePaintArrays(m.length,s,s.index,{},h,b&&b[L]);}n.placedSymbolArray.emplaceBack(u.x,u.y,v,this.glyphOffsetArray.length-v,y,c,f,u.segment,i?i[0]:0,i?i[1]:0,a[0],a[1],l,0,!1,0,d);},st.prototype._addCollisionDebugVertex=function(n,r,i,a,o,s){return r.emplaceBack(0,0),n.emplaceBack(i.x,i.y,a,o,Math.round(s.x),Math.round(s.y));},st.prototype.addCollisionDebugVertices=function(n,r,i,o,s,l,u){var c=s.segments.prepareSegment(4,s.layoutVertexArray,s.indexArray),f=c.vertexLength,d=s.layoutVertexArray,h=s.collisionVertexArray,p=u.anchorX,m=u.anchorY;this._addCollisionDebugVertex(d,h,l,p,m,new a(n,r)),this._addCollisionDebugVertex(d,h,l,p,m,new a(i,r)),this._addCollisionDebugVertex(d,h,l,p,m,new a(i,o)),this._addCollisionDebugVertex(d,h,l,p,m,new a(n,o)),c.vertexLength+=4;var g=s.indexArray;g.emplaceBack(f,f+1),g.emplaceBack(f+1,f+2),g.emplaceBack(f+2,f+3),g.emplaceBack(f+3,f),c.primitiveLength+=4;},st.prototype.addDebugCollisionBoxes=function(n,r,i,a){for(var o=n;o<r;o++){var s=this.collisionBoxArray.get(o);this.addCollisionDebugVertices(s.x1,s.y1,s.x2,s.y2,a?this.textCollisionBox:this.iconCollisionBox,s.anchorPoint,i);}},st.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new se(rY,a8.members,r4),this.iconCollisionBox=new se(rY,a8.members,r4);for(var n=0;n<this.symbolInstances.length;n++){var r=this.symbolInstances.get(n);this.addDebugCollisionBoxes(r.textBoxStartIndex,r.textBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.iconBoxStartIndex,r.iconBoxEndIndex,r,!1),this.addDebugCollisionBoxes(r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex,r,!1);}},st.prototype._deserializeCollisionBoxesForSymbol=function(n,r,i,a,o,s,l,u,c){for(var f={},d=r;d<i;d++){var h=n.get(d);f.textBox={x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2,anchorPointX:h.anchorPointX,anchorPointY:h.anchorPointY},f.textFeatureIndex=h.featureIndex;break;}for(var p=a;p<o;p++){var m=n.get(p);f.verticalTextBox={x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,anchorPointX:m.anchorPointX,anchorPointY:m.anchorPointY},f.verticalTextFeatureIndex=m.featureIndex;break;}for(var g=s;g<l;g++){var v=n.get(g);f.iconBox={x1:v.x1,y1:v.y1,x2:v.x2,y2:v.y2,anchorPointX:v.anchorPointX,anchorPointY:v.anchorPointY},f.iconFeatureIndex=v.featureIndex;break;}for(var y=u;y<c;y++){var _=n.get(y);f.verticalIconBox={x1:_.x1,y1:_.y1,x2:_.x2,y2:_.y2,anchorPointX:_.anchorPointX,anchorPointY:_.anchorPointY},f.verticalIconFeatureIndex=_.featureIndex;break;}return f;},st.prototype.deserializeCollisionBoxes=function(n){this.collisionArrays=[];for(var r=0;r<this.symbolInstances.length;r++){var i=this.symbolInstances.get(r);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex));}},st.prototype.hasTextData=function(){return this.text.segments.get().length>0;},st.prototype.hasIconData=function(){return this.icon.segments.get().length>0;},st.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox;},st.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0;},st.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0;},st.prototype.addIndicesForPlacedSymbol=function(n,r){for(var i=n.placedSymbolArray.get(r),a=i.vertexStartIndex+4*i.numGlyphs,o=i.vertexStartIndex;o<a;o+=4)n.indexArray.emplaceBack(o,o+1,o+2),n.indexArray.emplaceBack(o+1,o+2,o+3);},st.prototype.getSortedSymbolIndexes=function(n){if(this.sortedAngle===n&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var r=Math.sin(n),i=Math.cos(n),a=[],o=[],s=[],l=0;l<this.symbolInstances.length;++l){s.push(l);var u=this.symbolInstances.get(l);a.push(0|Math.round(r*u.anchorX+i*u.anchorY)),o.push(u.featureIndex);}return s.sort(function(n,r){return a[n]-a[r]||o[r]-o[n];}),s;},st.prototype.addToSortKeyRanges=function(n,r){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===r?i.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:r,symbolInstanceStart:n,symbolInstanceEnd:n+1});},st.prototype.sortFeatures=function(n){var r=this;if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,a=this.symbolInstanceIndexes;i<a.length;i+=1){var o=this.symbolInstances.get(a[i]);this.featureSortOrder.push(o.featureIndex),[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach(function(n,i,a){n>=0&&a.indexOf(n)===i&&r.addIndicesForPlacedSymbol(r.text,n);}),o.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,o.verticalPlacedTextSymbolIndex),o.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,o.placedIconSymbolIndex),o.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,o.verticalPlacedIconSymbolIndex);}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray);}},n8("SymbolBucket",st,{omit:["layers","collisionBoxArray","features","compareText"]}),st.MAX_GLYPHS=65535,st.addDynamicAttributes=o7;var sn=new rk({"symbol-placement":new rC(eM.layout_symbol["symbol-placement"]),"symbol-spacing":new rC(eM.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new rC(eM.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new rO(eM.layout_symbol["symbol-sort-key"]),"symbol-z-order":new rC(eM.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new rC(eM.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new rC(eM.layout_symbol["icon-ignore-placement"]),"icon-optional":new rC(eM.layout_symbol["icon-optional"]),"icon-rotation-alignment":new rC(eM.layout_symbol["icon-rotation-alignment"]),"icon-size":new rO(eM.layout_symbol["icon-size"]),"icon-text-fit":new rC(eM.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new rC(eM.layout_symbol["icon-text-fit-padding"]),"icon-image":new rO(eM.layout_symbol["icon-image"]),"icon-rotate":new rO(eM.layout_symbol["icon-rotate"]),"icon-padding":new rC(eM.layout_symbol["icon-padding"]),"icon-keep-upright":new rC(eM.layout_symbol["icon-keep-upright"]),"icon-offset":new rO(eM.layout_symbol["icon-offset"]),"icon-anchor":new rO(eM.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new rC(eM.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new rC(eM.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new rC(eM.layout_symbol["text-rotation-alignment"]),"text-field":new rO(eM.layout_symbol["text-field"]),"text-font":new rO(eM.layout_symbol["text-font"]),"text-size":new rO(eM.layout_symbol["text-size"]),"text-max-width":new rO(eM.layout_symbol["text-max-width"]),"text-line-height":new rC(eM.layout_symbol["text-line-height"]),"text-letter-spacing":new rO(eM.layout_symbol["text-letter-spacing"]),"text-justify":new rO(eM.layout_symbol["text-justify"]),"text-radial-offset":new rO(eM.layout_symbol["text-radial-offset"]),"text-variable-anchor":new rC(eM.layout_symbol["text-variable-anchor"]),"text-anchor":new rO(eM.layout_symbol["text-anchor"]),"text-max-angle":new rC(eM.layout_symbol["text-max-angle"]),"text-writing-mode":new rC(eM.layout_symbol["text-writing-mode"]),"text-rotate":new rO(eM.layout_symbol["text-rotate"]),"text-padding":new rC(eM.layout_symbol["text-padding"]),"text-keep-upright":new rC(eM.layout_symbol["text-keep-upright"]),"text-transform":new rO(eM.layout_symbol["text-transform"]),"text-offset":new rO(eM.layout_symbol["text-offset"]),"text-allow-overlap":new rC(eM.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new rC(eM.layout_symbol["text-ignore-placement"]),"text-optional":new rC(eM.layout_symbol["text-optional"])}),sr={paint:new rk({"icon-opacity":new rO(eM.paint_symbol["icon-opacity"]),"icon-color":new rO(eM.paint_symbol["icon-color"]),"icon-halo-color":new rO(eM.paint_symbol["icon-halo-color"]),"icon-halo-width":new rO(eM.paint_symbol["icon-halo-width"]),"icon-halo-blur":new rO(eM.paint_symbol["icon-halo-blur"]),"icon-translate":new rC(eM.paint_symbol["icon-translate"]),"icon-translate-anchor":new rC(eM.paint_symbol["icon-translate-anchor"]),"text-opacity":new rO(eM.paint_symbol["text-opacity"]),"text-color":new rO(eM.paint_symbol["text-color"],{runtimeType:eU,getOverride:function(n){return n.textColor;},hasOverride:function(n){return!!n.textColor;}}),"text-halo-color":new rO(eM.paint_symbol["text-halo-color"]),"text-halo-width":new rO(eM.paint_symbol["text-halo-width"]),"text-halo-blur":new rO(eM.paint_symbol["text-halo-blur"]),"text-translate":new rC(eM.paint_symbol["text-translate"]),"text-translate-anchor":new rC(eM.paint_symbol["text-translate-anchor"])}),layout:sn},si=function(n){this.type=n.property.overrides?n.property.overrides.runtimeType:eF,this.defaultValue=n;};si.prototype.evaluate=function(n){if(n.formattedSection){var r=this.defaultValue.property.overrides;if(r&&r.hasOverride(n.formattedSection))return r.getOverride(n.formattedSection);}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default;},si.prototype.eachChild=function(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression);},si.prototype.outputDefined=function(){return!1;},si.prototype.serialize=function(){return null;},n8("FormatSectionOverride",si,{omit:["defaultValue"]});var sa=function(n){function r(r){n.call(this,r,sr);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.recalculate=function(r,i){if(n.prototype.recalculate.call(this,r,i),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var a=this.layout.get("text-writing-mode");if(a){for(var o=[],s=0;s<a.length;s+=1){var l=a[s];0>o.indexOf(l)&&o.push(l);}this.layout._values["text-writing-mode"]=o;}else this.layout._values["text-writing-mode"]=["horizontal"];}this._setPaintOverrides();},r.prototype.getValueAndResolveTokens=function(n,r,i,a){var o,s=this.layout.get(n).evaluate(r,{},i,a),l=this._unevaluatedLayout._values[n];return l.isDataDriven()||ny(l.value)||!s?s:(o=r.properties,s.replace(/{([^{}]+)}/g,function(n,r){return r in o?String(o[r]):"";}));},r.prototype.createBucket=function(n){return new st(n);},r.prototype.queryRadius=function(){return 0;},r.prototype.queryIntersectsFeature=function(){return!1;},r.prototype._setPaintOverrides=function(){for(var n=0,i=sr.paint.overridableProperties;n<i.length;n+=1){var a=i[n];if(r.hasPaintOverride(this.layout,a)){var o,s=this.paint.get(a),l=new nv(new si(s),s.property.specification);o="constant"===s.value.kind||"source"===s.value.kind?new nb("source",l):new nx("composite",l,s.value.zoomStops,s.value._interpolationType),this.paint._values[a]=new rT(s.property,o,s.parameters);}}},r.prototype._handleOverridablePaintPropertyUpdate=function(n,i,a){return!(!this.layout||i.isDataDriven()||a.isDataDriven())&&r.hasPaintOverride(this.layout,n);},r.hasPaintOverride=function(n,r){var i=n.get("text-field"),a=sr.paint.properties[r],o=!1,s=function(n){for(var r=0;r<n.length;r+=1)if(a.overrides&&a.overrides.hasOverride(n[r]))return void(o=!0);};if("constant"===i.value.kind&&i.value.value instanceof e3)s(i.value.value.sections);else if("source"===i.value.kind){var l=function(n){o||(n instanceof e9&&e8(n.value)===eW?s(n.value.sections):n instanceof tr?s(n.sections):n.eachChild(l));},u=i.value;u._styleExpression&&l(u._styleExpression.expression);}return o;},r;}(rI),so={paint:new rk({"background-color":new rC(eM.paint_background["background-color"]),"background-pattern":new rR(eM.paint_background["background-pattern"]),"background-opacity":new rC(eM.paint_background["background-opacity"])})},ss=function(n){function r(r){n.call(this,r,so);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r;}(rI),sl={paint:new rk({"raster-opacity":new rC(eM.paint_raster["raster-opacity"]),"raster-hue-rotate":new rC(eM.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new rC(eM.paint_raster["raster-brightness-min"]),"raster-brightness-max":new rC(eM.paint_raster["raster-brightness-max"]),"raster-saturation":new rC(eM.paint_raster["raster-saturation"]),"raster-contrast":new rC(eM.paint_raster["raster-contrast"]),"raster-resampling":new rC(eM.paint_raster["raster-resampling"]),"raster-fade-duration":new rC(eM.paint_raster["raster-fade-duration"])})},su=function(n){function r(r){n.call(this,r,sl);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r;}(rI),sc=function(n){function r(r){n.call(this,r,{}),this.implementation=r;}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.is3D=function(){return"3d"===this.implementation.renderingMode;},r.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender;},r.prototype.recalculate=function(){},r.prototype.updateTransitions=function(){},r.prototype.hasTransition=function(){},r.prototype.serialize=function(){},r.prototype.onAdd=function(n){this.implementation.onAdd&&this.implementation.onAdd(n,n.painter.context.gl);},r.prototype.onRemove=function(n){this.implementation.onRemove&&this.implementation.onRemove(n,n.painter.context.gl);},r;}(rI),sf={circle:i3,heatmap:ar,hillshade:aa,fill:aL,"fill-extrusion":aX,line:a3,symbol:sa,background:ss,raster:su},sd=u.HTMLImageElement,sh=u.HTMLCanvasElement,sp=u.HTMLVideoElement,sm=u.ImageData,sg=u.ImageBitmap,sv=function(n,r,i,a){this.context=n,this.format=i,this.texture=n.gl.createTexture(),this.update(r,a);};sv.prototype.update=function(n,r,i){var a=n.width,o=n.height,s=!(this.size&&this.size[0]===a&&this.size[1]===o||i),l=this.context,u=l.gl;if(this.useMipmap=!!(r&&r.useMipmap),u.bindTexture(u.TEXTURE_2D,this.texture),l.pixelStoreUnpackFlipY.set(!1),l.pixelStoreUnpack.set(1),l.pixelStoreUnpackPremultiplyAlpha.set(this.format===u.RGBA&&(!r||!1!==r.premultiply)),s)this.size=[a,o],n instanceof sd||n instanceof sh||n instanceof sp||n instanceof sm||sg&&n instanceof sg?u.texImage2D(u.TEXTURE_2D,0,this.format,this.format,u.UNSIGNED_BYTE,n):u.texImage2D(u.TEXTURE_2D,0,this.format,a,o,0,this.format,u.UNSIGNED_BYTE,n.data);else{var c=i||{x:0,y:0},f=c.x,d=c.y;n instanceof sd||n instanceof sh||n instanceof sp||n instanceof sm||sg&&n instanceof sg?u.texSubImage2D(u.TEXTURE_2D,0,f,d,u.RGBA,u.UNSIGNED_BYTE,n):u.texSubImage2D(u.TEXTURE_2D,0,f,d,a,o,u.RGBA,u.UNSIGNED_BYTE,n.data);}this.useMipmap&&this.isSizePowerOfTwo()&&u.generateMipmap(u.TEXTURE_2D);},sv.prototype.bind=function(n,r,i){var a=this.context.gl;a.bindTexture(a.TEXTURE_2D,this.texture),i!==a.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=a.LINEAR),n!==this.filter&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,n),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,i||n),this.filter=n),r!==this.wrap&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,r),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,r),this.wrap=r);},sv.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0;},sv.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null;};var sy=function(n){var r=this;this._callback=n,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){r._triggered=!1,r._callback();});};sy.prototype.trigger=function(){var n=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){n._triggered=!1,n._callback();},0));},sy.prototype.remove=function(){delete this._channel,this._callback=function(){};};var s_=function(n,r,i){this.target=n,this.parent=r,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},_(["receive","process"],this),this.invoker=new sy(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=C()?n:u;};function sb(n,r,i){var a=2*Math.PI*6378137/256/Math.pow(2,i);return[n*a-2*Math.PI*6378137/2,r*a-2*Math.PI*6378137/2];}s_.prototype.send=function(n,r,i,a,o){var s=this;void 0===o&&(o=!1);var l=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[l]=i);var u=R(this.globalScope)?void 0:[];return this.target.postMessage({id:l,type:n,hasCallback:!!i,targetMapId:a,mustQueue:o,sourceMapId:this.mapId,data:rt(r,u)},u),{cancel:function(){i&&delete s.callbacks[l],s.target.postMessage({id:l,type:"<cancel>",targetMapId:a,sourceMapId:s.mapId});}};},s_.prototype.receive=function(n){var r=n.data,i=r.id;if(i&&(!r.targetMapId||this.mapId===r.targetMapId)){if("<cancel>"===r.type){delete this.tasks[i];var a=this.cancelCallbacks[i];delete this.cancelCallbacks[i],a&&a();}else C()||r.mustQueue?(this.tasks[i]=r,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,r);}},s_.prototype.process=function(){if(this.taskQueue.length){var n=this.taskQueue.shift(),r=this.tasks[n];delete this.tasks[n],this.taskQueue.length&&this.invoker.trigger(),r&&this.processTask(n,r);}},s_.prototype.processTask=function(n,r){var i=this;if("<response>"===r.type){var a=this.callbacks[n];delete this.callbacks[n],a&&(r.error?a(rn(r.error)):a(null,rn(r.data)));}else{var o=!1,s=R(this.globalScope)?void 0:[],l=r.hasCallback?function(r,a){o=!0,delete i.cancelCallbacks[n],i.target.postMessage({id:n,type:"<response>",sourceMapId:i.mapId,error:r?rt(r):null,data:rt(a,s)},s);}:function(n){o=!0;},u=null,c=rn(r.data);if(this.parent[r.type])u=this.parent[r.type](r.sourceMapId,c,l);else if(this.parent.getWorkerSource){var f=r.type.split(".");u=this.parent.getWorkerSource(r.sourceMapId,f[0],c.source)[f[1]](c,l);}else l(Error("Could not find function "+r.type));!o&&u&&u.cancel&&(this.cancelCallbacks[n]=u.cancel);}},s_.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1);};var sx=function(n,r){n&&(r?this.setSouthWest(n).setNorthEast(r):4===n.length?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]));};sx.prototype.setNorthEast=function(n){return this._ne=n instanceof sE?new sE(n.lng,n.lat):sE.convert(n),this;},sx.prototype.setSouthWest=function(n){return this._sw=n instanceof sE?new sE(n.lng,n.lat):sE.convert(n),this;},sx.prototype.extend=function(n){var r,i,a=this._sw,o=this._ne;if(n instanceof sE)r=n,i=n;else{if(!(n instanceof sx))return Array.isArray(n)?4===n.length||n.every(Array.isArray)?this.extend(sx.convert(n)):this.extend(sE.convert(n)):this;if(i=n._ne,!(r=n._sw)||!i)return this;}return a||o?(a.lng=Math.min(r.lng,a.lng),a.lat=Math.min(r.lat,a.lat),o.lng=Math.max(i.lng,o.lng),o.lat=Math.max(i.lat,o.lat)):(this._sw=new sE(r.lng,r.lat),this._ne=new sE(i.lng,i.lat)),this;},sx.prototype.getCenter=function(){return new sE((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2);},sx.prototype.getSouthWest=function(){return this._sw;},sx.prototype.getNorthEast=function(){return this._ne;},sx.prototype.getNorthWest=function(){return new sE(this.getWest(),this.getNorth());},sx.prototype.getSouthEast=function(){return new sE(this.getEast(),this.getSouth());},sx.prototype.getWest=function(){return this._sw.lng;},sx.prototype.getSouth=function(){return this._sw.lat;},sx.prototype.getEast=function(){return this._ne.lng;},sx.prototype.getNorth=function(){return this._ne.lat;},sx.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()];},sx.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")";},sx.prototype.isEmpty=function(){return!(this._sw&&this._ne);},sx.prototype.contains=function(n){var r=sE.convert(n),i=r.lng,a=r.lat,o=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(o=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=a&&a<=this._ne.lat&&o;},sx.convert=function(n){return!n||n instanceof sx?n:new sx(n);};var sE=function(n,r){if(isNaN(n)||isNaN(r))throw Error("Invalid LngLat object: ("+n+", "+r+")");if(this.lng=+n,this.lat=+r,this.lat>90||this.lat<-90)throw Error("Invalid LngLat latitude value: must be between -90 and 90");};sE.prototype.wrap=function(){return new sE(h(this.lng,-180,180),this.lat);},sE.prototype.toArray=function(){return[this.lng,this.lat];},sE.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")";},sE.prototype.distanceTo=function(n){var r=Math.PI/180,i=this.lat*r,a=n.lat*r;return 6371008.8*Math.acos(Math.min(Math.sin(i)*Math.sin(a)+Math.cos(i)*Math.cos(a)*Math.cos((n.lng-this.lng)*r),1));},sE.prototype.toBounds=function(n){void 0===n&&(n=0);var r=360*n/40075017,i=r/Math.cos(Math.PI/180*this.lat);return new sx(new sE(this.lng-i,this.lat-r),new sE(this.lng+i,this.lat+r));},sE.convert=function(n){if(n instanceof sE)return n;if(Array.isArray(n)&&(2===n.length||3===n.length))return new sE(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&"object"==typeof n&&null!==n)return new sE(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]");};var sw=2*Math.PI*6371008.8;function sS(n){return sw*Math.cos(n*Math.PI/180);}function sT(n){return(180+n)/360;}function sA(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360;}function sC(n){return 360/Math.PI*Math.atan(Math.exp((180-360*n)*Math.PI/180))-90;}var sO=function(n,r,i){void 0===i&&(i=0),this.x=+n,this.y=+r,this.z=+i;};sO.fromLngLat=function(n,r){void 0===r&&(r=0);var i=sE.convert(n);return new sO(sT(i.lng),sA(i.lat),r/sS(i.lat));},sO.prototype.toLngLat=function(){return new sE(360*this.x-180,sC(this.y));},sO.prototype.toAltitude=function(){return this.z*sS(sC(this.y));},sO.prototype.meterInMercatorCoordinateUnits=function(){return 1/sw*(1/Math.cos(sC(this.y)*Math.PI/180));};var sM=function(n,r,i){this.z=n,this.x=r,this.y=i,this.key=sk(0,n,n,r,i);};sM.prototype.equals=function(n){return this.z===n.z&&this.x===n.x&&this.y===n.y;},sM.prototype.url=function(n,r){var i,a,o,s,l,u=(a=this.y,o=this.z,s=sb(256*(i=this.x),256*(a=Math.pow(2,o)-a-1),o),l=sb(256*(i+1),256*(a+1),o),s[0]+","+s[1]+","+l[0]+","+l[1]),c=function(n,r,i){for(var a,o="",s=n;s>0;s--)o+=(r&(a=1<<s-1)?1:0)+(i&a?2:0);return o;}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===r?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",c).replace("{bbox-epsg-3857}",u);},sM.prototype.getTilePoint=function(n){var r=Math.pow(2,this.z);return new a(8192*(n.x*r-this.x),8192*(n.y*r-this.y));},sM.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y;};var sR=function(n,r){this.wrap=n,this.canonical=r,this.key=sk(n,r.z,r.z,r.x,r.y);},sP=function(n,r,i,a,o){this.overscaledZ=n,this.wrap=r,this.canonical=new sM(i,+a,+o),this.key=sk(r,n,i,a,o);};function sk(n,r,i,a,o){(n*=2)<0&&(n=-1*n-1);var s=1<<i;return(s*s*n+s*o+a).toString(36)+i.toString(36)+r.toString(36);}sP.prototype.equals=function(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical);},sP.prototype.scaledTo=function(n){var r=this.canonical.z-n;return n>this.canonical.z?new sP(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new sP(n,this.wrap,n,this.canonical.x>>r,this.canonical.y>>r);},sP.prototype.calculateScaledKey=function(n,r){var i=this.canonical.z-n;return n>this.canonical.z?sk(this.wrap*+r,n,this.canonical.z,this.canonical.x,this.canonical.y):sk(this.wrap*+r,n,n,this.canonical.x>>i,this.canonical.y>>i);},sP.prototype.isChildOf=function(n){if(n.wrap!==this.wrap)return!1;var r=this.canonical.z-n.canonical.z;return 0===n.overscaledZ||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>r&&n.canonical.y===this.canonical.y>>r;},sP.prototype.children=function(n){if(this.overscaledZ>=n)return[new sP(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var r=this.canonical.z+1,i=2*this.canonical.x,a=2*this.canonical.y;return[new sP(r,this.wrap,r,i,a),new sP(r,this.wrap,r,i+1,a),new sP(r,this.wrap,r,i,a+1),new sP(r,this.wrap,r,i+1,a+1)];},sP.prototype.isLessThan=function(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y));},sP.prototype.wrapped=function(){return new sP(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y);},sP.prototype.unwrapTo=function(n){return new sP(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y);},sP.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z);},sP.prototype.toUnwrapped=function(){return new sR(this.wrap,this.canonical);},sP.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y;},sP.prototype.getTilePoint=function(n){return this.canonical.getTilePoint(new sO(n.x-this.wrap,n.y));},n8("CanonicalTileID",sM),n8("OverscaledTileID",sP,{omit:["posMatrix"]});var sI=function(n,r,i){if(this.uid=n,r.height!==r.width)throw RangeError("DEM tiles must be square");if(i&&"mapbox"!==i&&"terrarium"!==i)return T('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=r.height;var a=this.dim=r.height-2;this.data=new Uint32Array(r.data.buffer),this.encoding=i||"mapbox";for(var o=0;o<a;o++)this.data[this._idx(-1,o)]=this.data[this._idx(0,o)],this.data[this._idx(a,o)]=this.data[this._idx(a-1,o)],this.data[this._idx(o,-1)]=this.data[this._idx(o,0)],this.data[this._idx(o,a)]=this.data[this._idx(o,a-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(a,-1)]=this.data[this._idx(a-1,0)],this.data[this._idx(-1,a)]=this.data[this._idx(0,a-1)],this.data[this._idx(a,a)]=this.data[this._idx(a-1,a-1)];};sI.prototype.get=function(n,r){var i=new Uint8Array(this.data.buffer),a=4*this._idx(n,r);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(i[a],i[a+1],i[a+2]);},sI.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4];},sI.prototype._idx=function(n,r){if(n<-1||n>=this.dim+1||r<-1||r>=this.dim+1)throw RangeError("out of range source coordinates for DEM data");return(r+1)*this.stride+(n+1);},sI.prototype._unpackMapbox=function(n,r,i){return(256*n*256+256*r+i)/10-1e4;},sI.prototype._unpackTerrarium=function(n,r,i){return 256*n+r+i/256-32768;},sI.prototype.getPixels=function(){return new ae({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer));},sI.prototype.backfillBorder=function(n,r,i){if(this.dim!==n.dim)throw Error("dem dimension mismatch");var a=r*this.dim,o=r*this.dim+this.dim,s=i*this.dim,l=i*this.dim+this.dim;switch(r){case -1:a=o-1;break;case 1:o=a+1;}switch(i){case -1:s=l-1;break;case 1:l=s+1;}for(var u=-r*this.dim,c=-i*this.dim,f=s;f<l;f++)for(var d=a;d<o;d++)this.data[this._idx(d,f)]=n.data[this._idx(d+u,f+c)];},n8("DEMData",sI);var sL=function(n){this._stringToNumber={},this._numberToString=[];for(var r=0;r<n.length;r++){var i=n[r];this._stringToNumber[i]=r,this._numberToString[r]=i;}};sL.prototype.encode=function(n){return this._stringToNumber[n];},sL.prototype.decode=function(n){return this._numberToString[n];};var sN=function(n,r,i,a,o){this.type="Feature",this._vectorTileFeature=n,n._z=r,n._x=i,n._y=a,this.properties=n.properties,this.id=o;},sD={geometry:{configurable:!0}};sD.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry;},sD.geometry.set=function(n){this._geometry=n;},sN.prototype.toJSON=function(){var n={geometry:this.geometry};for(var r in this)"_geometry"!==r&&"_vectorTileFeature"!==r&&(n[r]=this[r]);return n;},Object.defineProperties(sN.prototype,sD);var sF=function(){this.state={},this.stateChanges={},this.deletedStates={};};sF.prototype.updateState=function(n,r,i){var a=String(r);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][a]=this.stateChanges[n][a]||{},p(this.stateChanges[n][a],i),null===this.deletedStates[n])for(var o in this.deletedStates[n]={},this.state[n])o!==a&&(this.deletedStates[n][o]=null);else if(this.deletedStates[n]&&null===this.deletedStates[n][a])for(var s in this.deletedStates[n][a]={},this.state[n][a])i[s]||(this.deletedStates[n][a][s]=null);else for(var l in i)this.deletedStates[n]&&this.deletedStates[n][a]&&null===this.deletedStates[n][a][l]&&delete this.deletedStates[n][a][l];},sF.prototype.removeFeatureState=function(n,r,i){if(null!==this.deletedStates[n]){var a=String(r);if(this.deletedStates[n]=this.deletedStates[n]||{},i&&void 0!==r)null!==this.deletedStates[n][a]&&(this.deletedStates[n][a]=this.deletedStates[n][a]||{},this.deletedStates[n][a][i]=null);else if(void 0!==r){if(this.stateChanges[n]&&this.stateChanges[n][a])for(i in this.deletedStates[n][a]={},this.stateChanges[n][a])this.deletedStates[n][a][i]=null;else this.deletedStates[n][a]=null;}else this.deletedStates[n]=null;}},sF.prototype.getState=function(n,r){var i=String(r),a=p({},(this.state[n]||{})[i],(this.stateChanges[n]||{})[i]);if(null===this.deletedStates[n])return{};if(this.deletedStates[n]){var o=this.deletedStates[n][r];if(null===o)return{};for(var s in o)delete a[s];}return a;},sF.prototype.initializeTileState=function(n,r){n.setFeatureState(this.state,r);},sF.prototype.coalesceChanges=function(n,r){var i={};for(var a in this.stateChanges){this.state[a]=this.state[a]||{};var o={};for(var s in this.stateChanges[a])this.state[a][s]||(this.state[a][s]={}),p(this.state[a][s],this.stateChanges[a][s]),o[s]=this.state[a][s];i[a]=o;}for(var l in this.deletedStates){this.state[l]=this.state[l]||{};var u={};if(null===this.deletedStates[l])for(var c in this.state[l])u[c]={},this.state[l][c]={};else for(var f in this.deletedStates[l]){if(null===this.deletedStates[l][f])this.state[l][f]={};else for(var d=0,h=Object.keys(this.deletedStates[l][f]);d<h.length;d+=1)delete this.state[l][f][h[d]];u[f]=this.state[l][f];}i[l]=i[l]||{},p(i[l],u);}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(i).length)for(var m in n)n[m].setFeatureState(i,r);};var sB=function(n,r){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new n3(8192,16,0),this.grid3D=new n3(8192,16,0),this.featureIndexArray=new is,this.promoteId=r;};function sj(n,r,i,a,o){return x(n,function(n,s){var l=r instanceof rA?r.get(s):null;return l&&l.evaluate?l.evaluate(i,a,o):l;});}function sz(n){for(var r=1/0,i=1/0,a=-1/0,o=-1/0,s=0;s<n.length;s+=1){var l=n[s];r=Math.min(r,l.x),i=Math.min(i,l.y),a=Math.max(a,l.x),o=Math.max(o,l.y);}return{minX:r,minY:i,maxX:a,maxY:o};}function sU(n,r){return r-n;}sB.prototype.insert=function(n,r,i,a,o,s){var l=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,a,o);for(var u=s?this.grid3D:this.grid,c=0;c<r.length;c++){for(var f=r[c],d=[1/0,1/0,-1/0,-1/0],h=0;h<f.length;h++){var p=f[h];d[0]=Math.min(d[0],p.x),d[1]=Math.min(d[1],p.y),d[2]=Math.max(d[2],p.x),d[3]=Math.max(d[3],p.y);}d[0]<8192&&d[1]<8192&&d[2]>=0&&d[3]>=0&&u.insert(l,d[0],d[1],d[2],d[3]);}},sB.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new aU.VectorTile(new on(this.rawTileData)).layers,this.sourceLayerCoder=new sL(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers;},sB.prototype.query=function(n,r,i,o){var s=this;this.loadVTLayers();for(var l=n.params||{},u=8192/n.tileSize/n.scale,c=nk(l.filter),f=n.queryGeometry,d=n.queryPadding*u,h=sz(f),p=this.grid.query(h.minX-d,h.minY-d,h.maxX+d,h.maxY+d),m=sz(n.cameraQueryGeometry),g=this.grid3D.query(m.minX-d,m.minY-d,m.maxX+d,m.maxY+d,function(r,i,o,s){return function(n,r,i,o,s){for(var l=0;l<n.length;l+=1){var u=n[l];if(r<=u.x&&i<=u.y&&o>=u.x&&s>=u.y)return!0;}var c=[new a(r,i),new a(r,s),new a(o,s),new a(o,i)];if(n.length>2){for(var f=0;f<c.length;f+=1)if(iq(n,c[f]))return!0;}for(var d=0;d<n.length-1;d++)if(function(n,r,i){var a=i[0],o=i[2];if(n.x<a.x&&r.x<a.x||n.x>o.x&&r.x>o.x||n.y<a.y&&r.y<a.y||n.y>o.y&&r.y>o.y)return!1;var s=A(n,r,i[0]);return s!==A(n,r,i[1])||s!==A(n,r,i[2])||s!==A(n,r,i[3]);}(n[d],n[d+1],c))return!0;return!1;}(n.cameraQueryGeometry,r-d,i-d,o+d,s+d);}),v=0;v<g.length;v+=1)p.push(g[v]);p.sort(sU);for(var y,_={},b=0;b<p.length;b++)(function(a){var d=p[a];if(d!==y){y=d;var h=s.featureIndexArray.get(d),m=null;s.loadMatchingFeature(_,h.bucketIndex,h.sourceLayerIndex,h.featureIndex,c,l.layers,l.availableImages,r,i,o,function(r,i,a){return m||(m=iF(r)),i.queryIntersectsFeature(f,r,a,m,s.z,n.transform,u,n.pixelPosMatrix);});}})(b);return _;},sB.prototype.loadMatchingFeature=function(n,r,i,a,o,s,l,u,c,f,d){var h=this.bucketLayerIDs[r];if(!s||function(n,r){for(var i=0;i<n.length;i++)if(r.indexOf(n[i])>=0)return!0;return!1;}(s,h)){var m=this.sourceLayerCoder.decode(i),g=this.vtLayers[m].feature(a);if(o.needGeometry){var v=iB(g,!0);if(!o.filter(new ry(this.tileID.overscaledZ),v,this.tileID.canonical))return;}else if(!o.filter(new ry(this.tileID.overscaledZ),g))return;for(var y=this.getId(g,m),_=0;_<h.length;_++){var b=h[_];if(!(s&&0>s.indexOf(b))){var x=u[b];if(x){var E={};void 0!==y&&f&&(E=f.getState(x.sourceLayer||"_geojsonTileLayer",y));var w=p({},c[b]);w.paint=sj(w.paint,x.paint,g,E,l),w.layout=sj(w.layout,x.layout,g,E,l);var S=!d||d(g,x,E);if(S){var T=new sN(g,this.z,this.x,this.y,y);T.layer=w;var A=n[b];void 0===A&&(A=n[b]=[]),A.push({featureIndex:a,feature:T,intersectionZ:S});}}}}}},sB.prototype.lookupSymbolFeatures=function(n,r,i,a,o,s,l,u){var c={};this.loadVTLayers();for(var f=nk(o),d=0;d<n.length;d+=1)this.loadMatchingFeature(c,i,a,n[d],f,s,l,u,r);return c;},sB.prototype.hasLayer=function(n){for(var r=0,i=this.bucketLayerIDs;r<i.length;r+=1)for(var a=0,o=i[r];a<o.length;a+=1)if(n===o[a])return!0;return!1;},sB.prototype.getId=function(n,r){var i=n.id;return this.promoteId&&"boolean"==typeof(i=n.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[r]])&&(i=Number(i)),i;},n8("FeatureIndex",sB,{omit:["rawTileData","sourceLayerCoder"]});var sV=function(n,r){this.tileID=n,this.uid=g(),this.uses=0,this.tileSize=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading";};sV.prototype.registerFadeDuration=function(n){var r=n+this.timeAdded;r<j.now()||this.fadeEndTime&&r<this.fadeEndTime||(this.fadeEndTime=r);},sV.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state;},sV.prototype.loadVectorData=function(n,r,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){for(var a in n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(n,r){var i={};if(!r)return i;for(var a=function(){var n=s[o],a=n.layerIds.map(function(n){return r.getLayer(n);}).filter(Boolean);if(0!==a.length){n.layers=a,n.stateDependentLayerIds&&(n.stateDependentLayers=n.stateDependentLayerIds.map(function(n){return a.filter(function(r){return r.id===n;})[0];}));for(var l=0,u=a;l<u.length;l+=1)i[u[l].id]=n;}},o=0,s=n;o<s.length;o+=1)a();return i;}(n.buckets,r.style),this.hasSymbolBuckets=!1,this.buckets){var o=this.buckets[a];if(o instanceof st){if(this.hasSymbolBuckets=!0,!i)break;o.justReloaded=!0;}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var s in this.buckets){var l=this.buckets[s];if(l instanceof st&&l.hasRTLText){this.hasRTLText=!0,rv.isLoading()||rv.isLoaded()||"deferred"!==rm()||rg();break;}}for(var u in this.queryPadding=0,this.buckets){var c=this.buckets[u];this.queryPadding=Math.max(this.queryPadding,r.style.getLayer(u).queryRadius(c));}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage);}else this.collisionBoxArray=new r7;},sV.prototype.unloadVectorData=function(){for(var n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded";},sV.prototype.getBucket=function(n){return this.buckets[n.id];},sV.prototype.upload=function(n){for(var r in this.buckets){var i=this.buckets[r];i.uploadPending()&&i.upload(n);}var a=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new sv(n,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new sv(n,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null);},sV.prototype.prepare=function(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture);},sV.prototype.queryRenderedFeatures=function(n,r,i,a,o,s,l,u,c,f){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:a,cameraQueryGeometry:o,scale:s,tileSize:this.tileSize,pixelPosMatrix:f,transform:u,params:l,queryPadding:this.queryPadding*c},n,r,i):{};},sV.prototype.querySourceFeatures=function(n,r){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var a=i.loadVTLayers(),o=r?r.sourceLayer:"",s=a._geojsonTileLayer||a[o];if(s)for(var l=nk(r&&r.filter),u=this.tileID.canonical,c=u.z,f=u.x,d=u.y,h={z:c,x:f,y:d},p=0;p<s.length;p++){var m=s.feature(p);if(l.needGeometry){var g=iB(m,!0);if(!l.filter(new ry(this.tileID.overscaledZ),g,this.tileID.canonical))continue;}else if(!l.filter(new ry(this.tileID.overscaledZ),m))continue;var v=i.getId(m,o),y=new sN(m,c,f,d,v);y.tile=h,n.push(y);}}},sV.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state;},sV.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length;},sV.prototype.setExpiryData=function(n){var r=this.expirationTime;if(n.cacheControl){var i=O(n.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"]);}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){var a=Date.now(),o=!1;if(this.expirationTime>a)o=!1;else if(r){if(this.expirationTime<r)o=!0;else{var s=this.expirationTime-r;s?this.expirationTime=a+Math.max(s,3e4):o=!0;}}else o=!0;o?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0;}},sV.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),2147483647);},sV.prototype.setFeatureState=function(n,r){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(n).length){var i=this.latestFeatureIndex.loadVTLayers();for(var a in this.buckets)if(r.style.hasLayer(a)){var o=this.buckets[a],s=o.layers[0].sourceLayer||"_geojsonTileLayer",l=i[s],u=n[s];if(l&&u&&0!==Object.keys(u).length){o.update(u,l,this.imageAtlas&&this.imageAtlas.patternPositions||{});var c=r&&r.style&&r.style.getLayer(a);c&&(this.queryPadding=Math.max(this.queryPadding,c.queryRadius(o)));}}}},sV.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil;},sV.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<j.now();},sV.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0;},sV.prototype.setHoldDuration=function(n){this.symbolFadeHoldUntil=j.now()+n;},sV.prototype.setDependencies=function(n,r){for(var i={},a=0;a<r.length;a+=1)i[r[a]]=!0;this.dependencies[n]=i;},sV.prototype.hasDependency=function(n,r){for(var i=0;i<n.length;i+=1){var a=this.dependencies[n[i]];if(a){for(var o=0;o<r.length;o+=1)if(a[r[o]])return!0;}}return!1;};var sG=u.performance,sH=function(n){this._marks={start:[n.url,"start"].join("#"),end:[n.url,"end"].join("#"),measure:n.url.toString()},sG.mark(this._marks.start);};sH.prototype.finish=function(){sG.mark(this._marks.end);var n=sG.getEntriesByName(this._marks.measure);return 0===n.length&&(sG.measure(this._marks.measure,this._marks.start,this._marks.end),n=sG.getEntriesByName(this._marks.measure),sG.clearMarks(this._marks.start),sG.clearMarks(this._marks.end),sG.clearMeasures(this._marks.measure)),n;},n.Actor=s_,n.AlphaImage=i9,n.CanonicalTileID=sM,n.CollisionBoxArray=r7,n.Color=e0,n.DEMData=sI,n.DataConstantProperty=rC,n.DictionaryCoder=sL,n.EXTENT=8192,n.ErrorEvent=eC,n.EvaluationParameters=ry,n.Event=eA,n.Evented=eO,n.FeatureIndex=sB,n.FillBucket=aP,n.FillExtrusionBucket=aH,n.ImageAtlas=oS,n.ImagePosition=oE,n.LineBucket=aJ,n.LngLat=sE,n.LngLatBounds=sx,n.MercatorCoordinate=sO,n.ONE_EM=24,n.OverscaledTileID=sP,n.Point=a,n.Point$1=a,n.Properties=rk,n.Protobuf=on,n.RGBAImage=ae,n.RequestManager=W,n.RequestPerformance=sH,n.ResourceType=ep,n.SegmentVector=iu,n.SourceFeatureState=sF,n.StructArrayLayout1ui2=r5,n.StructArrayLayout2f1f2i16=rZ,n.StructArrayLayout2i4=rj,n.StructArrayLayout3ui6=rQ,n.StructArrayLayout4i8=rz,n.SymbolBucket=st,n.Texture=sv,n.Tile=sV,n.Transitionable=rx,n.Uniform1f=ib,n.Uniform1i=i_,n.Uniform2f=ix,n.Uniform3f=iE,n.Uniform4f=iw,n.UniformColor=iS,n.UniformMatrix4f=iA,n.UnwrappedTileID=sR,n.ValidationError=eR,n.WritingMode=oT,n.ZoomHistory=rr,n.add=function(n,r,i){return n[0]=r[0]+i[0],n[1]=r[1]+i[1],n[2]=r[2]+i[2],n;},n.addDynamicAttributes=o7,n.asyncAll=function(n,r,i){if(!n.length)return i(null,[]);var a=n.length,o=Array(n.length),s=null;n.forEach(function(n,l){r(n,function(n,r){n&&(s=n),o[l]=r,0==--a&&i(s,o);});});},n.bezier=c,n.bindAll=_,n.browser=j,n.cacheEntryPossiblyAdded=function(n){++ed>el&&(n.getActor().send("enforceCacheSizeLimit",es),ed=0);},n.clamp=d,n.clearTileCache=function(n){var r=u.caches.delete("mapbox-tiles");n&&r.catch(n).then(function(){return n();});},n.clipLine=oW,n.clone=function(n){var r=new iJ(16);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r;},n.clone$1=w,n.clone$2=function(n){var r=new iJ(3);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r;},n.collisionCircleLayout=a7,n.config=z,n.create=function(){var n=new iJ(16);return iJ!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n;},n.create$1=function(){var n=new iJ(9);return iJ!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1,n;},n.create$2=function(){var n=new iJ(4);return iJ!=Float32Array&&(n[1]=0,n[2]=0),n[0]=1,n[3]=1,n;},n.createCommonjsModule=r,n.createExpression=n_,n.createLayout=rF,n.createStyleLayer=function(n){return"custom"===n.type?new sc(n):new sf[n.type](n);},n.cross=function(n,r,i){var a=r[0],o=r[1],s=r[2],l=i[0],u=i[1],c=i[2];return n[0]=o*c-s*u,n[1]=s*l-a*c,n[2]=a*u-o*l,n;},n.deepEqual=function n(r,i){if(Array.isArray(r)){if(!Array.isArray(i)||r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(!n(r[a],i[a]))return!1;return!0;}if("object"==typeof r&&null!==r&&null!==i){if("object"!=typeof i||Object.keys(r).length!==Object.keys(i).length)return!1;for(var o in r)if(!n(r[o],i[o]))return!1;return!0;}return r===i;},n.dot=function(n,r){return n[0]*r[0]+n[1]*r[1]+n[2]*r[2];},n.dot$1=function(n,r){return n[0]*r[0]+n[1]*r[1]+n[2]*r[2]+n[3]*r[3];},n.ease=f,n.emitValidationErrors=n2,n.endsWith=b,n.enforceCacheSizeLimit=function(n){eu(),ee&&ee.then(function(r){r.keys().then(function(i){for(var a=0;a<i.length-n;a++)r.delete(i[a]);});});},n.evaluateSizeForFeature=oj,n.evaluateSizeForZoom=oz,n.evaluateVariableOffset=o1,n.evented=rp,n.extend=p,n.featureFilter=nk,n.filterObject=E,n.fromRotation=function(n,r){var i=Math.sin(r),a=Math.cos(r);return n[0]=a,n[1]=i,n[2]=0,n[3]=-i,n[4]=a,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n;},n.getAnchorAlignment=oN,n.getAnchorJustification=o2,n.getArrayBuffer=eb,n.getImage=ew,n.getJSON=function(n,r){return e_(p(n,{type:"json"}),r);},n.getRTLTextPluginStatus=rm,n.getReferrer=ey,n.getVideo=function(n,r){var i,a,o=u.document.createElement("video");o.muted=!0,o.onloadstart=function(){r(null,o);};for(var s=0;s<n.length;s++){var l=u.document.createElement("source");i=n[s],a=void 0,(a=u.document.createElement("a")).href=i,(a.protocol!==u.document.location.protocol||a.host!==u.document.location.host)&&(o.crossOrigin="Anonymous"),l.src=n[s],o.appendChild(l);}return{cancel:function(){}};},n.identity=i0,n.invert=function(n,r){var i=r[0],a=r[1],o=r[2],s=r[3],l=r[4],u=r[5],c=r[6],f=r[7],d=r[8],h=r[9],p=r[10],m=r[11],g=r[12],v=r[13],y=r[14],_=r[15],b=i*u-a*l,x=i*c-o*l,E=i*f-s*l,w=a*c-o*u,S=a*f-s*u,T=o*f-s*c,A=d*v-h*g,C=d*y-p*g,O=d*_-m*g,M=h*y-p*v,R=h*_-m*v,P=p*_-m*y,k=b*P-x*R+E*M+w*O-S*C+T*A;return k?(n[0]=(u*P-c*R+f*M)*(k=1/k),n[1]=(o*R-a*P-s*M)*k,n[2]=(v*T-y*S+_*w)*k,n[3]=(p*S-h*T-m*w)*k,n[4]=(c*O-l*P-f*C)*k,n[5]=(i*P-o*O+s*C)*k,n[6]=(y*E-g*T-_*x)*k,n[7]=(d*T-p*E+m*x)*k,n[8]=(l*R-u*O+f*A)*k,n[9]=(a*O-i*R-s*A)*k,n[10]=(g*S-v*E+_*b)*k,n[11]=(h*E-d*S-m*b)*k,n[12]=(u*C-l*M-c*A)*k,n[13]=(i*M-a*C+o*A)*k,n[14]=(v*x-g*w-y*b)*k,n[15]=(d*w-h*x+p*b)*k,n):null;},n.isChar=ri,n.isMapboxURL=X,n.keysDifference=function(n,r){var i=[];for(var a in n)a in r||i.push(a);return i;},n.makeRequest=e_,n.mapObject=x,n.mercatorXfromLng=sT,n.mercatorYfromLat=sA,n.mercatorZfromAltitude=function(n,r){return n/sS(r);},n.mul=i1,n.multiply=i1,n.mvt=aU,n.nextPowerOfTwo=function(n){return n<=1?1:Math.pow(2,Math.ceil(Math.log(n)/Math.LN2));},n.normalize=function(n,r){var i=r[0],a=r[1],o=r[2],s=i*i+a*a+o*o;return s>0&&(s=1/Math.sqrt(s)),n[0]=r[0]*s,n[1]=r[1]*s,n[2]=r[2]*s,n;},n.number=tM,n.offscreenCanvasSupported=eh,n.ortho=function(n,r,i,a,o,s,l){var u=1/(r-i),c=1/(a-o),f=1/(s-l);return n[0]=-2*u,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*c,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*f,n[11]=0,n[12]=(r+i)*u,n[13]=(o+a)*c,n[14]=(l+s)*f,n[15]=1,n;},n.parseGlyphPBF=function(n){return new on(n).readFields(oy,[]);},n.pbf=on,n.performSymbolLayout=function(n,r,i,o,s,l,u){n.createArrays(),n.tilePixelRatio=8192/(512*n.overscaling),n.compareText={},n.iconsNeedLinear=!1;var c=n.layers[0].layout,f=n.layers[0]._unevaluatedLayout._values,d={};if("composite"===n.textSizeData.kind){var h=n.textSizeData,p=h.maxZoom;d.compositeTextSizes=[f["text-size"].possiblyEvaluate(new ry(h.minZoom),u),f["text-size"].possiblyEvaluate(new ry(p),u)];}if("composite"===n.iconSizeData.kind){var m=n.iconSizeData,g=m.maxZoom;d.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new ry(m.minZoom),u),f["icon-size"].possiblyEvaluate(new ry(g),u)];}d.layoutTextSize=f["text-size"].possiblyEvaluate(new ry(n.zoom+1),u),d.layoutIconSize=f["icon-size"].possiblyEvaluate(new ry(n.zoom+1),u),d.textMaxSize=f["text-size"].possiblyEvaluate(new ry(18));for(var v=24*c.get("text-line-height"),y="map"===c.get("text-rotation-alignment")&&"point"!==c.get("symbol-placement"),_=c.get("text-keep-upright"),b=c.get("text-size"),x=0,E=n.features;x<E.length;x+=1)(function(){var l=E[x],f=c.get("text-font").evaluate(l,{},u).join(","),h=b.evaluate(l,{},u),p=d.layoutTextSize.evaluate(l,{},u),m=d.layoutIconSize.evaluate(l,{},u),g={horizontal:{},vertical:void 0},w=l.text,S=[0,0];if(w){var A=w.toString(),C=24*c.get("text-letter-spacing").evaluate(l,{},u),O=!function(n){for(var r,i=0;i<n.length;i+=1)if(r=n[i].charCodeAt(0),ri.Arabic(r)||ri["Arabic Supplement"](r)||ri["Arabic Extended-A"](r)||ri["Arabic Presentation Forms-A"](r)||ri["Arabic Presentation Forms-B"](r))return!1;return!0;}(A)?0:C,M=c.get("text-anchor").evaluate(l,{},u),R=c.get("text-variable-anchor");if(!R){var P=c.get("text-radial-offset").evaluate(l,{},u);S=P?o1(M,[24*P,o0]):c.get("text-offset").evaluate(l,{},u).map(function(n){return 24*n;});}var k=y?"center":c.get("text-justify").evaluate(l,{},u),I=c.get("symbol-placement"),L="point"===I?24*c.get("text-max-width").evaluate(l,{},u):0,N=function(){n.allowVerticalPlacement&&ra(A)&&(g.vertical=oO(w,r,i,s,f,L,v,M,"left",O,S,oT.vertical,!0,I,p,h));};if(!y&&R){for(var D="auto"===k?R.map(function(n){return o2(n);}):[k],F=!1,B=0;B<D.length;B++){var j=D[B];if(!g.horizontal[j]){if(F)g.horizontal[j]=g.horizontal[0];else{var z=oO(w,r,i,s,f,L,v,"center",j,O,S,oT.horizontal,!1,I,p,h);z&&(g.horizontal[j]=z,F=1===z.positionedLines.length);}}}N();}else{"auto"===k&&(k=o2(M));var U=oO(w,r,i,s,f,L,v,M,k,O,S,oT.horizontal,!1,I,p,h);U&&(g.horizontal[k]=U),N(),ra(A)&&y&&_&&(g.vertical=oO(w,r,i,s,f,L,v,M,k,O,S,oT.vertical,!1,I,p,h));}}var V=void 0,G=!1;if(l.icon&&l.icon.name){var H,W,X,q,$,Y=o[l.icon.name];Y&&(H=s[l.icon.name],W=c.get("icon-offset").evaluate(l,{},u),X=oN(c.get("icon-anchor").evaluate(l,{},u)),q=W[0]-H.displaySize[0]*X.horizontalAlign,$=W[1]-H.displaySize[1]*X.verticalAlign,V={image:H,top:$,bottom:$+H.displaySize[1],left:q,right:q+H.displaySize[0]},G=Y.sdf,void 0===n.sdfIcons?n.sdfIcons=Y.sdf:n.sdfIcons!==Y.sdf&&T("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Y.pixelRatio!==n.pixelRatio||0!==c.get("icon-rotate").constantOr(1))&&(n.iconsNeedLinear=!0));}var Z=o4(g.horizontal)||g.vertical;n.iconsInText=!!Z&&Z.iconsInText,(Z||V)&&function(n,r,i,o,s,l,u,c,f,d,h){var p=l.textMaxSize.evaluate(r,{});void 0===p&&(p=u);var m,g=n.layers[0].layout,v=g.get("icon-offset").evaluate(r,{},h),y=o4(i.horizontal),_=u/24,b=n.tilePixelRatio*_,x=n.tilePixelRatio*p/24,E=n.tilePixelRatio*c,w=n.tilePixelRatio*g.get("symbol-spacing"),S=g.get("text-padding")*n.tilePixelRatio,A=g.get("icon-padding")*n.tilePixelRatio,C=g.get("text-max-angle")/180*Math.PI,O="map"===g.get("text-rotation-alignment")&&"point"!==g.get("symbol-placement"),M="map"===g.get("icon-rotation-alignment")&&"point"!==g.get("symbol-placement"),R=g.get("symbol-placement"),P=w/2,k=g.get("icon-text-fit");o&&"none"!==k&&(n.allowVerticalPlacement&&i.vertical&&(m=oD(o,i.vertical,k,g.get("icon-text-fit-padding"),v,_)),y&&(o=oD(o,y,k,g.get("icon-text-fit-padding"),v,_)));var I=function(a,c){c.x<0||c.x>=8192||c.y<0||c.y>=8192||function(n,r,i,a,o,s,l,u,c,f,d,h,p,m,g,v,y,_,b,x,E,w,S,A,C){var O,M,R,P,k,I=n.addToLineVertexArray(r,i),L=0,N=0,D=0,F=0,B=-1,j=-1,z={},U=ih(""),V=0,G=0;if(void 0===u._unevaluatedLayout.getValue("text-radial-offset")?(V=(O=u.layout.get("text-offset").evaluate(E,{},A).map(function(n){return 24*n;}))[0],G=O[1]):(V=24*u.layout.get("text-radial-offset").evaluate(E,{},A),G=o0),n.allowVerticalPlacement&&a.vertical){var H=u.layout.get("text-rotate").evaluate(E,{},A)+90;P=new oY(c,r,f,d,h,a.vertical,p,m,g,H),l&&(k=new oY(c,r,f,d,h,l,y,_,g,H));}if(o){var W=u.layout.get("icon-rotate").evaluate(E,{}),X="none"!==u.layout.get("icon-text-fit"),q=oX(o,W,S,X),$=l?oX(l,W,S,X):void 0;R=new oY(c,r,f,d,h,o,y,_,!1,W),L=4*q.length;var Y=n.iconSizeData,Z=null;"source"===Y.kind?(Z=[128*u.layout.get("icon-size").evaluate(E,{})])[0]>32640&&T(n.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===Y.kind&&((Z=[128*w.compositeIconSizes[0].evaluate(E,{},A),128*w.compositeIconSizes[1].evaluate(E,{},A)])[0]>32640||Z[1]>32640)&&T(n.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),n.addSymbols(n.icon,q,Z,x,b,E,!1,r,I.lineStartIndex,I.lineLength,-1,A),B=n.icon.placedSymbolArray.length-1,$&&(N=4*$.length,n.addSymbols(n.icon,$,Z,x,b,E,oT.vertical,r,I.lineStartIndex,I.lineLength,-1,A),j=n.icon.placedSymbolArray.length-1);}for(var K in a.horizontal){var Q=a.horizontal[K];M||(U=ih(Q.text),M=new oY(c,r,f,d,h,Q,p,m,g,u.layout.get("text-rotate").evaluate(E,{},A)));var J=1===Q.positionedLines.length;if(D+=o3(n,r,Q,s,u,g,E,v,I,a.vertical?oT.horizontal:oT.horizontalOnly,J?Object.keys(a.horizontal):[K],z,B,w,A),J)break;}a.vertical&&(F+=o3(n,r,a.vertical,s,u,g,E,v,I,oT.vertical,["vertical"],z,j,w,A));var ee=M?M.boxStartIndex:n.collisionBoxArray.length,et=M?M.boxEndIndex:n.collisionBoxArray.length,en=P?P.boxStartIndex:n.collisionBoxArray.length,er=P?P.boxEndIndex:n.collisionBoxArray.length,ei=R?R.boxStartIndex:n.collisionBoxArray.length,ea=R?R.boxEndIndex:n.collisionBoxArray.length,eo=k?k.boxStartIndex:n.collisionBoxArray.length,es=k?k.boxEndIndex:n.collisionBoxArray.length,el=-1,eu=function(n,r){return n&&n.circleDiameter?Math.max(n.circleDiameter,r):r;};el=eu(M,-1),el=eu(P,el),el=eu(R,el);var ec=(el=eu(k,el))>-1?1:0;ec&&(el*=C/24),n.glyphOffsetArray.length>=st.MAX_GLYPHS&&T("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==E.sortKey&&n.addToSortKeyRanges(n.symbolInstances.length,E.sortKey),n.symbolInstances.emplaceBack(r.x,r.y,z.right>=0?z.right:-1,z.center>=0?z.center:-1,z.left>=0?z.left:-1,z.vertical||-1,B,j,U,ee,et,en,er,ei,ea,eo,es,f,D,F,L,N,ec,0,p,V,G,el);}(n,c,a,i,o,s,m,n.layers[0],n.collisionBoxArray,r.index,r.sourceLayerIndex,n.index,b,S,O,f,E,A,M,v,r,l,d,h,u);};if("line"===R)for(var L=0,N=oW(r.geometry,0,0,8192,8192);L<N.length;L+=1)for(var D=N[L],F=0,B=function(n,r,i,a,o,s,l,u,c){var f=a?.6*24*l:0,d=oH(a,o),h=d*l,p=0===n[0].x||8192===n[0].x||0===n[0].y||8192===n[0].y;return r-h<r/4&&(r=h+r/4),function n(r,i,a,o,s,l,u,c,f){for(var d=l/2,h=oG(r),p=0,m=i-a,g=[],v=0;v<r.length-1;v++){for(var y=r[v],_=r[v+1],b=y.dist(_),x=_.angleTo(y);m+a<p+b;){var E=((m+=a)-p)/b,w=tM(y.x,_.x,E),S=tM(y.y,_.y,E);if(w>=0&&w<f&&S>=0&&S<f&&m-d>=0&&m+d<=h){var T=new oF(w,S,x,v);T._round(),o&&!oV(r,T,l,o,s)||g.push(T);}}p+=b;}return c||g.length||u||(g=n(r,p/2,a,o,s,l,u,!0,f)),g;}(n,p?r/2*u%r:(d/2+48)*l*u%r,r,f,i,h,p,!1,8192);}(D,w,C,i.vertical||y,o,0,x,n.overscaling,8192);F<B.length;F+=1){var j=B[F];y&&function(n,r,i,a){var o=n.compareText;if(r in o){for(var s=o[r],l=s.length-1;l>=0;l--)if(a.dist(s[l])<i)return!0;}else o[r]=[];return o[r].push(a),!1;}(n,y.text,P,j)||I(D,j);}else if("line-center"===R)for(var z=0,U=r.geometry;z<U.length;z+=1){var V=U[z];if(V.length>1){var G=function(n,r,i,a,o,s){for(var l=i?.6*24*s:0,u=oH(i,a)*s,c=0,f=oG(n)/2,d=0;d<n.length-1;d++){var h=n[d],p=n[d+1],m=h.dist(p);if(c+m>f){var g=(f-c)/m,v=new oF(tM(h.x,p.x,g),tM(h.y,p.y,g),p.angleTo(h),d);return v._round(),!l||oV(n,v,u,l,r)?v:void 0;}c+=m;}}(V,C,i.vertical||y,o,0,x);G&&I(V,G);}}else if("Polygon"===r.type)for(var H=0,W=aC(r.geometry,0);H<W.length;H+=1){var X=W[H],q=function(n,r,i){void 0===r&&(r=1),void 0===i&&(i=!1);for(var o=1/0,s=1/0,l=-1/0,u=-1/0,c=n[0],f=0;f<c.length;f++){var d=c[f];(!f||d.x<o)&&(o=d.x),(!f||d.y<s)&&(s=d.y),(!f||d.x>l)&&(l=d.x),(!f||d.y>u)&&(u=d.y);}var h=Math.min(l-o,u-s),p=h/2,m=new oZ([],oQ);if(0===h)return new a(o,s);for(var g=o;g<l;g+=h)for(var v=s;v<u;v+=h)m.push(new oJ(g+p,v+p,p,n));for(var y=function(n){for(var r=0,i=0,a=0,o=n[0],s=0,l=o.length,u=l-1;s<l;u=s++){var c=o[s],f=o[u],d=c.x*f.y-f.x*c.y;i+=(c.x+f.x)*d,a+=(c.y+f.y)*d,r+=3*d;}return new oJ(i/r,a/r,0,n);}(n),_=m.length;m.length;){var b=m.pop();(b.d>y.d||!y.d)&&(y=b,i&&console.log("found best %d after %d probes",Math.round(1e4*b.d)/1e4,_)),b.max-y.d<=r||(m.push(new oJ(b.p.x-(p=b.h/2),b.p.y-p,p,n)),m.push(new oJ(b.p.x+p,b.p.y-p,p,n)),m.push(new oJ(b.p.x-p,b.p.y+p,p,n)),m.push(new oJ(b.p.x+p,b.p.y+p,p,n)),_+=4);}return i&&(console.log("num probes: "+_),console.log("best distance: "+y.d)),y.p;}(X,16);I(X[0],new oF(q.x,q.y,0));}else if("LineString"===r.type)for(var $=0,Y=r.geometry;$<Y.length;$+=1){var Z=Y[$];I(Z,new oF(Z[0].x,Z[0].y,0));}else if("Point"===r.type)for(var K=0,Q=r.geometry;K<Q.length;K+=1)for(var J=0,ee=Q[K];J<ee.length;J+=1){var et=ee[J];I([et],new oF(et.x,et.y,0));}}(n,l,g,V,o,d,p,m,S,G,u);})();l&&n.generateCollisionDebugBuffers();},n.perspective=function(n,r,i,a,o){var s,l=1/Math.tan(r/2);return n[0]=l/i,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=l,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,null!=o&&o!==1/0?(n[10]=(o+a)*(s=1/(a-o)),n[14]=2*o*a*s):(n[10]=-1,n[14]=-2*a),n;},n.pick=function(n,r){for(var i={},a=0;a<r.length;a++){var o=r[a];o in n&&(i[o]=n[o]);}return i;},n.plugin=rv,n.polygonIntersectsPolygon=iU,n.postMapLoadEvent=eo,n.postTurnstileEvent=ei,n.potpack=ox,n.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],n.register=n8,n.registerForPluginStateChange=function(n){return n({pluginStatus:rc,pluginURL:rf}),rp.on("pluginStateChange",n),n;},n.renderColorRamp=an,n.rotate=function(n,r,i){var a=r[0],o=r[1],s=r[2],l=r[3],u=Math.sin(i),c=Math.cos(i);return n[0]=a*c+s*u,n[1]=o*c+l*u,n[2]=-(a*u)+s*c,n[3]=-(o*u)+l*c,n;},n.rotateX=function(n,r,i){var a=Math.sin(i),o=Math.cos(i),s=r[4],l=r[5],u=r[6],c=r[7],f=r[8],d=r[9],h=r[10],p=r[11];return r!==n&&(n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n[4]=s*o+f*a,n[5]=l*o+d*a,n[6]=u*o+h*a,n[7]=c*o+p*a,n[8]=f*o-s*a,n[9]=d*o-l*a,n[10]=h*o-u*a,n[11]=p*o-c*a,n;},n.rotateZ=function(n,r,i){var a=Math.sin(i),o=Math.cos(i),s=r[0],l=r[1],u=r[2],c=r[3],f=r[4],d=r[5],h=r[6],p=r[7];return r!==n&&(n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n[0]=s*o+f*a,n[1]=l*o+d*a,n[2]=u*o+h*a,n[3]=c*o+p*a,n[4]=f*o-s*a,n[5]=d*o-l*a,n[6]=h*o-u*a,n[7]=p*o-c*a,n;},n.scale=function(n,r,i){var a=i[0],o=i[1],s=i[2];return n[0]=r[0]*a,n[1]=r[1]*a,n[2]=r[2]*a,n[3]=r[3]*a,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=r[7]*o,n[8]=r[8]*s,n[9]=r[9]*s,n[10]=r[10]*s,n[11]=r[11]*s,n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],n;},n.scale$1=function(n,r,i){return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=r[3]*i,n;},n.scale$2=function(n,r,i){return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n;},n.setCacheLimits=function(n,r){es=n,el=r;},n.setRTLTextPlugin=function(n,r,i){if(void 0===i&&(i=!1),"deferred"===rc||"loading"===rc||"loaded"===rc)throw Error("setRTLTextPlugin cannot be called multiple times.");rf=j.resolveURL(n),rc="deferred",ru=r,rh(),i||rg();},n.sphericalToCartesian=function(n){var r=n[0],i=n[1],a=n[2];return i+=90,{x:r*Math.cos(i*=Math.PI/180)*Math.sin(a*=Math.PI/180),y:r*Math.sin(i)*Math.sin(a),z:r*Math.cos(a)};},n.sqrLen=function(n){var r=n[0],i=n[1];return r*r+i*i;},n.styleSpec=eM,n.sub=function(n,r,i){return n[0]=r[0]-i[0],n[1]=r[1]-i[1],n[2]=r[2]-i[2],n;},n.symbolSize=oU,n.transformMat3=function(n,r,i){var a=r[0],o=r[1],s=r[2];return n[0]=a*i[0]+o*i[3]+s*i[6],n[1]=a*i[1]+o*i[4]+s*i[7],n[2]=a*i[2]+o*i[5]+s*i[8],n;},n.transformMat4=i2,n.translate=function(n,r,i){var a,o,s,l,u,c,f,d,h,p,m,g,v=i[0],y=i[1],_=i[2];return r===n?(n[12]=r[0]*v+r[4]*y+r[8]*_+r[12],n[13]=r[1]*v+r[5]*y+r[9]*_+r[13],n[14]=r[2]*v+r[6]*y+r[10]*_+r[14],n[15]=r[3]*v+r[7]*y+r[11]*_+r[15]):(o=r[1],s=r[2],l=r[3],u=r[4],c=r[5],f=r[6],d=r[7],h=r[8],p=r[9],m=r[10],g=r[11],n[0]=a=r[0],n[1]=o,n[2]=s,n[3]=l,n[4]=u,n[5]=c,n[6]=f,n[7]=d,n[8]=h,n[9]=p,n[10]=m,n[11]=g,n[12]=a*v+u*y+h*_+r[12],n[13]=o*v+c*y+p*_+r[13],n[14]=s*v+f*y+m*_+r[14],n[15]=l*v+d*y+g*_+r[15]),n;},n.triggerPluginCompletionEvent=rd,n.uniqueId=g,n.validateCustomStyleLayer=function(n){var r=[],i=n.id;return void 0===i&&r.push({message:"layers."+i+': missing required property "id"'}),void 0===n.render&&r.push({message:"layers."+i+': missing required method "render"'}),n.renderingMode&&"2d"!==n.renderingMode&&"3d"!==n.renderingMode&&r.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),r;},n.validateLight=nJ,n.validateStyle=nZ,n.values=function(n){var r=[];for(var i in n)r.push(n[i]);return r;},n.vectorTile=aU,n.version="1.13.3",n.warnOnce=T,n.webpSupported=U,n.window=u,n.wrap=h;}),a(["./shared"],function(n){var r=function(n){this.keyCache={},n&&this.replace(n);};r.prototype.replace=function(n){this._layerConfigs={},this._layers={},this.update(n,[]);},r.prototype.update=function(r,i){for(var a=this,o=0;o<r.length;o+=1){var s=r[o];this._layerConfigs[s.id]=s;var l=this._layers[s.id]=n.createStyleLayer(s);l._featureFilter=n.featureFilter(l.filter),this.keyCache[s.id]&&delete this.keyCache[s.id];}for(var u=0;u<i.length;u+=1){var c=i[u];delete this.keyCache[c],delete this._layerConfigs[c],delete this._layers[c];}this.familiesBySource={};for(var f=0,d=function(r,i){for(var a={},o=0;o<r.length;o++){var s=i&&i[r[o].id]||function(r){for(var i="",a=0,o=n.refProperties;a<o.length;a+=1)i+="/"+function n(r){var i=typeof r;if("number"===i||"boolean"===i||"string"===i||null==r)return JSON.stringify(r);if(Array.isArray(r)){for(var a="[",o=0;o<r.length;o+=1)a+=n(r[o])+",";return a+"]";}for(var s=Object.keys(r).sort(),l="{",u=0;u<s.length;u++)l+=JSON.stringify(s[u])+":"+n(r[s[u]])+",";return l+"}";}(r[o[a]]);return i;}(r[o]);i&&(i[r[o].id]=s);var l=a[s];l||(l=a[s]=[]),l.push(r[o]);}var u=[];for(var c in a)u.push(a[c]);return u;}(n.values(this._layerConfigs),this.keyCache);f<d.length;f+=1){var h=d[f].map(function(n){return a._layers[n.id];}),p=h[0];if("none"!==p.visibility){var m=p.source||"",g=this.familiesBySource[m];g||(g=this.familiesBySource[m]={});var v=p.sourceLayer||"_geojsonTileLayer",y=g[v];y||(y=g[v]=[]),y.push(h);}}};var i=function(r){var i={},a=[];for(var o in r){var s=r[o],l=i[o]={};for(var u in s){var c=s[+u];if(c&&0!==c.bitmap.width&&0!==c.bitmap.height){var f={x:0,y:0,w:c.bitmap.width+2,h:c.bitmap.height+2};a.push(f),l[u]={rect:f,metrics:c.metrics};}}}var d=n.potpack(a),h=new n.AlphaImage({width:d.w||1,height:d.h||1});for(var p in r){var m=r[p];for(var g in m){var v=m[+g];if(v&&0!==v.bitmap.width&&0!==v.bitmap.height){var y=i[p][g].rect;n.AlphaImage.copy(v.bitmap,h,{x:0,y:0},{x:y.x+1,y:y.y+1},v.bitmap);}}}this.image=h,this.positions=i;};n.register("GlyphAtlas",i);var a=function(r){this.tileID=new n.OverscaledTileID(r.tileID.overscaledZ,r.tileID.wrap,r.tileID.canonical.z,r.tileID.canonical.x,r.tileID.canonical.y),this.uid=r.uid,this.zoom=r.zoom,this.pixelRatio=r.pixelRatio,this.tileSize=r.tileSize,this.source=r.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=r.showCollisionBoxes,this.collectResourceTiming=!!r.collectResourceTiming,this.returnDependencies=!!r.returnDependencies,this.promoteId=r.promoteId;};function o(r,i,a){for(var o=new n.EvaluationParameters(i),s=0;s<r.length;s+=1)r[s].recalculate(o,a);}function s(r,i){var a=n.getArrayBuffer(r.request,function(r,a,o,s){r?i(r):a&&i(null,{vectorTile:new n.vectorTile.VectorTile(new n.pbf(a)),rawData:a,cacheControl:o,expires:s});});return function(){a.cancel(),i();};}a.prototype.parse=function(r,a,s,l,u){var c=this;this.status="parsing",this.data=r,this.collisionBoxArray=new n.CollisionBoxArray;var f=new n.DictionaryCoder(Object.keys(r.layers).sort()),d=new n.FeatureIndex(this.tileID,this.promoteId);d.bucketLayerIDs=[];var h,p,m,g,v={},y={featureIndex:d,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:s},_=a.familiesBySource[this.source];for(var b in _){var x=r.layers[b];if(x){1===x.version&&n.warnOnce('Vector tile source "'+this.source+'" layer "'+b+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var E=f.encode(b),w=[],S=0;S<x.length;S++){var T=x.feature(S),A=d.getId(T,b);w.push({feature:T,id:A,index:S,sourceLayerIndex:E});}for(var C=0,O=_[b];C<O.length;C+=1){var M=O[C],R=M[0];R.minzoom&&this.zoom<Math.floor(R.minzoom)||R.maxzoom&&this.zoom>=R.maxzoom||"none"!==R.visibility&&(o(M,this.zoom,s),(v[R.id]=R.createBucket({index:d.bucketLayerIDs.length,layers:M,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:E,sourceID:this.source})).populate(w,y,this.tileID.canonical),d.bucketLayerIDs.push(M.map(function(n){return n.id;})));}}}var P=n.mapObject(y.glyphDependencies,function(n){return Object.keys(n).map(Number);});Object.keys(P).length?l.send("getGlyphs",{uid:this.uid,stacks:P},function(n,r){h||(h=n,p=r,L.call(c));}):p={};var k=Object.keys(y.iconDependencies);k.length?l.send("getImages",{icons:k,source:this.source,tileID:this.tileID,type:"icons"},function(n,r){h||(h=n,m=r,L.call(c));}):m={};var I=Object.keys(y.patternDependencies);function L(){if(h)return u(h);if(p&&m&&g){var r=new i(p),a=new n.ImageAtlas(m,g);for(var l in v){var c=v[l];c instanceof n.SymbolBucket?(o(c.layers,this.zoom,s),n.performSymbolLayout(c,p,r.positions,m,a.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):c.hasPattern&&(c instanceof n.LineBucket||c instanceof n.FillBucket||c instanceof n.FillExtrusionBucket)&&(o(c.layers,this.zoom,s),c.addFeatures(y,this.tileID.canonical,a.patternPositions));}this.status="done",u(null,{buckets:n.values(v).filter(function(n){return!n.isEmpty();}),featureIndex:d,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:r.image,imageAtlas:a,glyphMap:this.returnDependencies?p:null,iconMap:this.returnDependencies?m:null,glyphPositions:this.returnDependencies?r.positions:null});}}I.length?l.send("getImages",{icons:I,source:this.source,tileID:this.tileID,type:"patterns"},function(n,r){h||(h=n,g=r,L.call(c));}):g={},L.call(this);};var l=function(n,r,i,a){this.actor=n,this.layerIndex=r,this.availableImages=i,this.loadVectorData=a||s,this.loading={},this.loaded={};};l.prototype.loadTile=function(r,i){var o=this,s=r.uid;this.loading||(this.loading={});var l=!!(r&&r.request&&r.request.collectResourceTiming)&&new n.RequestPerformance(r.request),u=this.loading[s]=new a(r);u.abort=this.loadVectorData(r,function(r,a){if(delete o.loading[s],r||!a)return u.status="done",o.loaded[s]=u,i(r);var c=a.rawData,f={};a.expires&&(f.expires=a.expires),a.cacheControl&&(f.cacheControl=a.cacheControl);var d={};if(l){var h=l.finish();h&&(d.resourceTiming=JSON.parse(JSON.stringify(h)));}u.vectorTile=a.vectorTile,u.parse(a.vectorTile,o.layerIndex,o.availableImages,o.actor,function(r,a){if(r||!a)return i(r);i(null,n.extend({rawTileData:c.slice(0)},a,f,d));}),o.loaded=o.loaded||{},o.loaded[s]=u;});},l.prototype.reloadTile=function(n,r){var i=this,a=this.loaded,o=n.uid,s=this;if(a&&a[o]){var l=a[o];l.showCollisionBoxes=n.showCollisionBoxes;var u=function(n,a){var o=l.reloadCallback;o&&(delete l.reloadCallback,l.parse(l.vectorTile,s.layerIndex,i.availableImages,s.actor,o)),r(n,a);};"parsing"===l.status?l.reloadCallback=u:"done"===l.status&&(l.vectorTile?l.parse(l.vectorTile,this.layerIndex,this.availableImages,this.actor,u):u());}},l.prototype.abortTile=function(n,r){var i=this.loading,a=n.uid;i&&i[a]&&i[a].abort&&(i[a].abort(),delete i[a]),r();},l.prototype.removeTile=function(n,r){var i=this.loaded,a=n.uid;i&&i[a]&&delete i[a],r();};var u=n.window.ImageBitmap,c=function(){this.loaded={};};function f(n,r){if(0!==n.length){d(n[0],r);for(var i=1;i<n.length;i++)d(n[i],!r);}}function d(n,r){for(var i=0,a=0,o=0,s=n.length,l=s-1;o<s;l=o++){var u=(n[o][0]-n[l][0])*(n[l][1]+n[o][1]),c=i+u;a+=Math.abs(i)>=Math.abs(u)?i-c+u:u-c+i,i=c;}i+a>=0!=!!r&&n.reverse();}c.prototype.loadTile=function(r,i){var a=r.uid,o=r.encoding,s=r.rawImageData,l=u&&s instanceof u?this.getImageData(s):s,c=new n.DEMData(a,l,o);this.loaded=this.loaded||{},this.loaded[a]=c,i(null,c);},c.prototype.getImageData=function(r){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(r.width,r.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=r.width,this.offscreenCanvas.height=r.height,this.offscreenCanvasContext.drawImage(r,0,0,r.width,r.height);var i=this.offscreenCanvasContext.getImageData(-1,-1,r.width+2,r.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new n.RGBAImage({width:i.width,height:i.height},i.data);},c.prototype.removeTile=function(n){var r=this.loaded,i=n.uid;r&&r[i]&&delete r[i];};var h=n.vectorTile.VectorTileFeature.prototype.toGeoJSON,p=function(r){this._feature=r,this.extent=n.EXTENT,this.type=r.type,this.properties=r.tags,"id"in r&&!isNaN(r.id)&&(this.id=parseInt(r.id,10));};p.prototype.loadGeometry=function(){if(1===this._feature.type){for(var r=[],i=0,a=this._feature.geometry;i<a.length;i+=1){var o=a[i];r.push([new n.Point$1(o[0],o[1])]);}return r;}for(var s=[],l=0,u=this._feature.geometry;l<u.length;l+=1){for(var c=[],f=0,d=u[l];f<d.length;f+=1){var h=d[f];c.push(new n.Point$1(h[0],h[1]));}s.push(c);}return s;},p.prototype.toGeoJSON=function(n,r,i){return h.call(this,n,r,i);};var m=function(r){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=n.EXTENT,this.length=r.length,this._features=r;};m.prototype.feature=function(n){return new p(this._features[n]);};var g=n.vectorTile.VectorTileFeature;function v(n,r){this.options=r||{},this.features=n,this.length=n.length;}function y(n,r){this.id="number"==typeof n.id?n.id:void 0,this.type=n.type,this.rawGeometry=1===n.type?[n.geometry]:n.geometry,this.properties=n.tags,this.extent=r||4096;}v.prototype.feature=function(n){return new y(this.features[n],this.options.extent);},y.prototype.loadGeometry=function(){var r=this.rawGeometry;this.geometry=[];for(var i=0;i<r.length;i++){for(var a=r[i],o=[],s=0;s<a.length;s++)o.push(new n.Point$1(a[s][0],a[s][1]));this.geometry.push(o);}return this.geometry;},y.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var n=this.geometry,r=1/0,i=-1/0,a=1/0,o=-1/0,s=0;s<n.length;s++)for(var l=n[s],u=0;u<l.length;u++){var c=l[u];r=Math.min(r,c.x),i=Math.max(i,c.x),a=Math.min(a,c.y),o=Math.max(o,c.y);}return[r,a,i,o];},y.prototype.toGeoJSON=g.prototype.toGeoJSON;var _=b;function b(r){var i=new n.pbf;return function(n,r){for(var i in n.layers)r.writeMessage(3,x,n.layers[i]);}(r,i),i.finish();}function x(n,r){r.writeVarintField(15,n.version||1),r.writeStringField(1,n.name||""),r.writeVarintField(5,n.extent||4096);var i,a={keys:[],values:[],keycache:{},valuecache:{}};for(i=0;i<n.length;i++)a.feature=n.feature(i),r.writeMessage(2,E,a);var o=a.keys;for(i=0;i<o.length;i++)r.writeStringField(3,o[i]);var s=a.values;for(i=0;i<s.length;i++)r.writeMessage(4,T,s[i]);}function E(n,r){var i=n.feature;void 0!==i.id&&r.writeVarintField(1,i.id),r.writeMessage(2,w,n),r.writeVarintField(3,i.type),r.writeMessage(4,S,i);}function w(n,r){var i=n.feature,a=n.keys,o=n.values,s=n.keycache,l=n.valuecache;for(var u in i.properties){var c=s[u];void 0===c&&(a.push(u),s[u]=c=a.length-1),r.writeVarint(c);var f=i.properties[u],d=typeof f;"string"!==d&&"boolean"!==d&&"number"!==d&&(f=JSON.stringify(f));var h=d+":"+f,p=l[h];void 0===p&&(o.push(f),l[h]=p=o.length-1),r.writeVarint(p);}}function S(n,r){for(var i=n.loadGeometry(),a=n.type,o=0,s=0,l=i.length,u=0;u<l;u++){var c=i[u],f=1;1===a&&(f=c.length),r.writeVarint((f<<3)+1);for(var d=3===a?c.length-1:c.length,h=0;h<d;h++){1===h&&1!==a&&r.writeVarint((d-1<<3)+2);var p=c[h].x-o,m=c[h].y-s;r.writeVarint(p<<1^p>>31),r.writeVarint(m<<1^m>>31),o+=p,s+=m;}3===a&&r.writeVarint(15);}}function T(n,r){var i=typeof n;"string"===i?r.writeStringField(1,n):"boolean"===i?r.writeBooleanField(7,n):"number"===i&&(n%1!=0?r.writeDoubleField(3,n):n<0?r.writeSVarintField(6,n):r.writeVarintField(5,n));}function A(n,r,i,a){C(n,i,a),C(r,2*i,2*a),C(r,2*i+1,2*a+1);}function C(n,r,i){var a=n[r];n[r]=n[i],n[i]=a;}function O(n,r,i,a){var o=n-i,s=r-a;return o*o+s*s;}_.fromVectorTileJs=b,_.fromGeojsonVt=function(n,r){r=r||{};var i={};for(var a in n)i[a]=new v(n[a].features,r),i[a].name=a,i[a].version=r.version,i[a].extent=r.extent;return b({layers:i});},_.GeoJSONWrapper=v;var M=function(n){return n[0];},R=function(n){return n[1];},P=function(n,r,i,a,o){void 0===r&&(r=M),void 0===i&&(i=R),void 0===a&&(a=64),void 0===o&&(o=Float64Array),this.nodeSize=a,this.points=n;for(var s=n.length<65536?Uint16Array:Uint32Array,l=this.ids=new s(n.length),u=this.coords=new o(2*n.length),c=0;c<n.length;c++)l[c]=c,u[2*c]=r(n[c]),u[2*c+1]=i(n[c]);!function n(r,i,a,o,s,l){if(!(s-o<=a)){var u=o+s>>1;(function n(r,i,a,o,s,l){for(;s>o;){if(s-o>600){var u=s-o+1,c=a-o+1,f=Math.log(u),d=.5*Math.exp(2*f/3),h=.5*Math.sqrt(f*d*(u-d)/u)*(c-u/2<0?-1:1);n(r,i,a,Math.max(o,Math.floor(a-c*d/u+h)),Math.min(s,Math.floor(a+(u-c)*d/u+h)),l);}var p=i[2*a+l],m=o,g=s;for(A(r,i,o,a),i[2*s+l]>p&&A(r,i,o,s);m<g;){for(A(r,i,m,g),m++,g--;i[2*m+l]<p;)m++;for(;i[2*g+l]>p;)g--;}i[2*o+l]===p?A(r,i,o,g):A(r,i,++g,s),g<=a&&(o=g+1),a<=g&&(s=g-1);}})(r,i,u,o,s,l%2),n(r,i,a,o,u-1,l+1),n(r,i,a,u+1,s,l+1);}}(l,u,a,0,l.length-1,0);};P.prototype.range=function(n,r,i,a){return function(n,r,i,a,o,s,l){for(var u,c,f=[0,n.length-1,0],d=[];f.length;){var h=f.pop(),p=f.pop(),m=f.pop();if(p-m<=l)for(var g=m;g<=p;g++)c=r[2*g+1],(u=r[2*g])>=i&&u<=o&&c>=a&&c<=s&&d.push(n[g]);else{var v=Math.floor((m+p)/2);c=r[2*v+1],(u=r[2*v])>=i&&u<=o&&c>=a&&c<=s&&d.push(n[v]);var y=(h+1)%2;(0===h?i<=u:a<=c)&&(f.push(m),f.push(v-1),f.push(y)),(0===h?o>=u:s>=c)&&(f.push(v+1),f.push(p),f.push(y));}}return d;}(this.ids,this.coords,n,r,i,a,this.nodeSize);},P.prototype.within=function(n,r,i){return function(n,r,i,a,o,s){for(var l=[0,n.length-1,0],u=[],c=o*o;l.length;){var f=l.pop(),d=l.pop(),h=l.pop();if(d-h<=s)for(var p=h;p<=d;p++)O(r[2*p],r[2*p+1],i,a)<=c&&u.push(n[p]);else{var m=Math.floor((h+d)/2),g=r[2*m],v=r[2*m+1];O(g,v,i,a)<=c&&u.push(n[m]);var y=(f+1)%2;(0===f?i-o<=g:a-o<=v)&&(l.push(h),l.push(m-1),l.push(y)),(0===f?i+o>=g:a+o>=v)&&(l.push(m+1),l.push(d),l.push(y));}}return u;}(this.ids,this.coords,n,r,i,this.nodeSize);};var k={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(n){return n;}},I=function(n){this.options=B(Object.create(k),n),this.trees=Array(this.options.maxZoom+1);};function L(n){return{type:"Feature",id:n.id,properties:N(n),geometry:{type:"Point",coordinates:[360*(n.x-.5),360*Math.atan(Math.exp((180-360*n.y)*Math.PI/180))/Math.PI-90]}};}function N(n){var r=n.numPoints,i=r>=1e4?Math.round(r/1e3)+"k":r>=1e3?Math.round(r/100)/10+"k":r;return B(B({},n.properties),{cluster:!0,cluster_id:n.id,point_count:r,point_count_abbreviated:i});}function D(n){return n/360+.5;}function F(n){var r=Math.sin(n*Math.PI/180),i=.5-.25*Math.log((1+r)/(1-r))/Math.PI;return i<0?0:i>1?1:i;}function B(n,r){for(var i in r)n[i]=r[i];return n;}function j(n){return n.x;}function z(n){return n.y;}function U(n,r,i,a){var o={id:void 0===n?null:n,type:r,geometry:i,tags:a,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(n){var r=n.geometry,i=n.type;if("Point"===i||"MultiPoint"===i||"LineString"===i)V(n,r);else if("Polygon"===i||"MultiLineString"===i)for(var a=0;a<r.length;a++)V(n,r[a]);else if("MultiPolygon"===i)for(a=0;a<r.length;a++)for(var o=0;o<r[a].length;o++)V(n,r[a][o]);}(o),o;}function V(n,r){for(var i=0;i<r.length;i+=3)n.minX=Math.min(n.minX,r[i]),n.minY=Math.min(n.minY,r[i+1]),n.maxX=Math.max(n.maxX,r[i]),n.maxY=Math.max(n.maxY,r[i+1]);}function G(n,r,i,a){if(r.geometry){var o=r.geometry.coordinates,s=r.geometry.type,l=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),u=[],c=r.id;if(i.promoteId?c=r.properties[i.promoteId]:i.generateId&&(c=a||0),"Point"===s)H(o,u);else if("MultiPoint"===s)for(var f=0;f<o.length;f++)H(o[f],u);else if("LineString"===s)W(o,u,l,!1);else if("MultiLineString"===s){if(i.lineMetrics){for(f=0;f<o.length;f++)W(o[f],u=[],l,!1),n.push(U(c,"LineString",u,r.properties));return;}X(o,u,l,!1);}else if("Polygon"===s)X(o,u,l,!0);else{if("MultiPolygon"!==s){if("GeometryCollection"===s){for(f=0;f<r.geometry.geometries.length;f++)G(n,{id:c,geometry:r.geometry.geometries[f],properties:r.properties},i,a);return;}throw Error("Input data is not a valid GeoJSON object.");}for(f=0;f<o.length;f++){var d=[];X(o[f],d,l,!0),u.push(d);}}n.push(U(c,s,u,r.properties));}}function H(n,r){r.push(n[0]/360+.5),r.push(q(n[1])),r.push(0);}function W(n,r,i,a){for(var o,s,l=0,u=0;u<n.length;u++){var c=n[u][0]/360+.5,f=q(n[u][1]);r.push(c),r.push(f),r.push(0),u>0&&(l+=a?(o*f-c*s)/2:Math.sqrt(Math.pow(c-o,2)+Math.pow(f-s,2))),o=c,s=f;}var d=r.length-3;r[2]=1,function n(r,i,a,o){for(var s,l=o,u=a-i>>1,c=a-i,f=r[i],d=r[i+1],h=r[a],p=r[a+1],m=i+3;m<a;m+=3){var g=function(n,r,i,a,o,s){var l=o-i,u=s-a;if(0!==l||0!==u){var c=((n-i)*l+(r-a)*u)/(l*l+u*u);c>1?(i=o,a=s):c>0&&(i+=l*c,a+=u*c);}return(l=n-i)*l+(u=r-a)*u;}(r[m],r[m+1],f,d,h,p);if(g>l)s=m,l=g;else if(g===l){var v=Math.abs(m-u);v<c&&(s=m,c=v);}}l>o&&(s-i>3&&n(r,i,s,o),r[s+2]=l,a-s>3&&n(r,s,a,o));}(r,0,d,i),r[d+2]=1,r.size=Math.abs(l),r.start=0,r.end=r.size;}function X(n,r,i,a){for(var o=0;o<n.length;o++){var s=[];W(n[o],s,i,a),r.push(s);}}function q(n){var r=Math.sin(n*Math.PI/180),i=.5-.25*Math.log((1+r)/(1-r))/Math.PI;return i<0?0:i>1?1:i;}function $(n,r,i,a,o,s,l,u){if(a/=r,s>=(i/=r)&&l<a)return n;if(l<i||s>=a)return null;for(var c=[],f=0;f<n.length;f++){var d=n[f],h=d.geometry,p=d.type,m=0===o?d.minX:d.minY,g=0===o?d.maxX:d.maxY;if(m>=i&&g<a)c.push(d);else if(!(g<i||m>=a)){var v=[];if("Point"===p||"MultiPoint"===p)(function(n,r,i,a,o){for(var s=0;s<n.length;s+=3){var l=n[s+o];l>=i&&l<=a&&(r.push(n[s]),r.push(n[s+1]),r.push(n[s+2]));}})(h,v,i,a,o);else if("LineString"===p)Y(h,v,i,a,o,!1,u.lineMetrics);else if("MultiLineString"===p)K(h,v,i,a,o,!1);else if("Polygon"===p)K(h,v,i,a,o,!0);else if("MultiPolygon"===p)for(var y=0;y<h.length;y++){var _=[];K(h[y],_,i,a,o,!0),_.length&&v.push(_);}if(v.length){if(u.lineMetrics&&"LineString"===p){for(y=0;y<v.length;y++)c.push(U(d.id,p,v[y],d.tags));continue;}"LineString"!==p&&"MultiLineString"!==p||(1===v.length?(p="LineString",v=v[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===v.length?"Point":"MultiPoint"),c.push(U(d.id,p,v,d.tags));}}}return c.length?c:null;}function Y(n,r,i,a,o,s,l){for(var u,c,f=Z(n),d=0===o?J:ee,h=n.start,p=0;p<n.length-3;p+=3){var m=n[p],g=n[p+1],v=n[p+2],y=n[p+3],_=n[p+4],b=0===o?m:g,x=0===o?y:_,E=!1;l&&(u=Math.sqrt(Math.pow(m-y,2)+Math.pow(g-_,2))),b<i?x>i&&(c=d(f,m,g,y,_,i),l&&(f.start=h+u*c)):b>a?x<a&&(c=d(f,m,g,y,_,a),l&&(f.start=h+u*c)):Q(f,m,g,v),x<i&&b>=i&&(c=d(f,m,g,y,_,i),E=!0),x>a&&b<=a&&(c=d(f,m,g,y,_,a),E=!0),!s&&E&&(l&&(f.end=h+u*c),r.push(f),f=Z(n)),l&&(h+=u);}var w=n.length-3;m=n[w],g=n[w+1],v=n[w+2],(b=0===o?m:g)>=i&&b<=a&&Q(f,m,g,v),w=f.length-3,s&&w>=3&&(f[w]!==f[0]||f[w+1]!==f[1])&&Q(f,f[0],f[1],f[2]),f.length&&r.push(f);}function Z(n){var r=[];return r.size=n.size,r.start=n.start,r.end=n.end,r;}function K(n,r,i,a,o,s){for(var l=0;l<n.length;l++)Y(n[l],r,i,a,o,s,!1);}function Q(n,r,i,a){n.push(r),n.push(i),n.push(a);}function J(n,r,i,a,o,s){var l=(s-r)/(a-r);return n.push(s),n.push(i+(o-i)*l),n.push(1),l;}function ee(n,r,i,a,o,s){var l=(s-i)/(o-i);return n.push(r+(a-r)*l),n.push(s),n.push(1),l;}function et(n,r){for(var i=[],a=0;a<n.length;a++){var o,s=n[a],l=s.type;if("Point"===l||"MultiPoint"===l||"LineString"===l)o=en(s.geometry,r);else if("MultiLineString"===l||"Polygon"===l){o=[];for(var u=0;u<s.geometry.length;u++)o.push(en(s.geometry[u],r));}else if("MultiPolygon"===l)for(o=[],u=0;u<s.geometry.length;u++){for(var c=[],f=0;f<s.geometry[u].length;f++)c.push(en(s.geometry[u][f],r));o.push(c);}i.push(U(s.id,l,o,s.tags));}return i;}function en(n,r){var i=[];i.size=n.size,void 0!==n.start&&(i.start=n.start,i.end=n.end);for(var a=0;a<n.length;a+=3)i.push(n[a]+r,n[a+1],n[a+2]);return i;}function er(n,r){if(n.transformed)return n;var i,a,o,s=1<<n.z,l=n.x,u=n.y;for(i=0;i<n.features.length;i++){var c=n.features[i],f=c.geometry,d=c.type;if(c.geometry=[],1===d)for(a=0;a<f.length;a+=2)c.geometry.push(ei(f[a],f[a+1],r,s,l,u));else for(a=0;a<f.length;a++){var h=[];for(o=0;o<f[a].length;o+=2)h.push(ei(f[a][o],f[a][o+1],r,s,l,u));c.geometry.push(h);}}return n.transformed=!0,n;}function ei(n,r,i,a,o,s){return[Math.round(i*(n*a-o)),Math.round(i*(r*a-s))];}function ea(n,r,i,a,o,s){var l=a*a;if(a>0&&r.size<(o?l:a))i.numPoints+=r.length/3;else{for(var u=[],c=0;c<r.length;c+=3)(0===a||r[c+2]>l)&&(i.numSimplified++,u.push(r[c]),u.push(r[c+1])),i.numPoints++;o&&function(n,r){for(var i=0,a=0,o=n.length,s=o-2;a<o;s=a,a+=2)i+=(n[a]-n[s])*(n[a+1]+n[s+1]);if(i>0===r)for(a=0,o=n.length;a<o/2;a+=2){var l=n[a],u=n[a+1];n[a]=n[o-2-a],n[a+1]=n[o-1-a],n[o-2-a]=l,n[o-1-a]=u;}}(u,s),n.push(u);}}function eo(n,r){var i,a,o,s,l,u,c=(r=this.options=function(n,r){for(var i in r)n[i]=r[i];return n;}(Object.create(this.options),r)).debug;if(c&&console.time("preprocess data"),r.maxZoom<0||r.maxZoom>24)throw Error("maxZoom should be in the 0-24 range");if(r.promoteId&&r.generateId)throw Error("promoteId and generateId cannot be used together.");var f=function(n,r){var i=[];if("FeatureCollection"===n.type)for(var a=0;a<n.features.length;a++)G(i,n.features[a],r,a);else G(i,"Feature"===n.type?n:{geometry:n},r);return i;}(n,r);this.tiles={},this.tileCoords=[],c&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",r.indexMaxZoom,r.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(i=f,o=(a=r).buffer/a.extent,s=i,l=$(i,1,-1-o,o,0,-1,2,a),u=$(i,1,1-o,2+o,0,-1,2,a),(l||u)&&(s=$(i,1,-o,1+o,0,-1,2,a)||[],l&&(s=et(l,1).concat(s)),u&&(s=s.concat(et(u,-1)))),f=s).length&&this.splitTile(f,0,0,0),c&&(f.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)));}function es(n,r,i){return 32*((1<<n)*i+r)+n;}function el(n,r){var i=n.tileID.canonical;if(!this._geoJSONIndex)return r(null,null);var a=this._geoJSONIndex.getTile(i.z,i.x,i.y);if(!a)return r(null,null);var o=new m(a.features),s=_(o);0===s.byteOffset&&s.byteLength===s.buffer.byteLength||(s=new Uint8Array(s)),r(null,{vectorTile:o,rawData:s.buffer});}I.prototype.load=function(n){var r=this.options,i=r.log,a=r.minZoom,o=r.maxZoom,s=r.nodeSize;i&&console.time("total time");var l="prepare "+n.length+" points";i&&console.time(l),this.points=n;for(var u=[],c=0;c<n.length;c++)n[c].geometry&&u.push(function(n,r){var i=n.geometry.coordinates,a=i[1];return{x:D(i[0]),y:F(a),zoom:1/0,index:r,parentId:-1};}(n[c],c));this.trees[o+1]=new P(u,j,z,s,Float32Array),i&&console.timeEnd(l);for(var f=o;f>=a;f--){var d=+Date.now();u=this._cluster(u,f),this.trees[f]=new P(u,j,z,s,Float32Array),i&&console.log("z%d: %d clusters in %dms",f,u.length,+Date.now()-d);}return i&&console.timeEnd("total time"),this;},I.prototype.getClusters=function(n,r){var i=((n[0]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,n[1])),o=180===n[2]?180:((n[2]+180)%360+360)%360-180,s=Math.max(-90,Math.min(90,n[3]));if(n[2]-n[0]>=360)i=-180,o=180;else if(i>o){var l=this.getClusters([i,a,180,s],r),u=this.getClusters([-180,a,o,s],r);return l.concat(u);}for(var c=this.trees[this._limitZoom(r)],f=[],d=0,h=c.range(D(i),F(s),D(o),F(a));d<h.length;d+=1){var p=c.points[h[d]];f.push(p.numPoints?L(p):this.points[p.index]);}return f;},I.prototype.getChildren=function(n){var r=this._getOriginId(n),i=this._getOriginZoom(n),a="No cluster with the specified id.",o=this.trees[i];if(!o)throw Error(a);var s=o.points[r];if(!s)throw Error(a);for(var l=this.options.radius/(this.options.extent*Math.pow(2,i-1)),u=[],c=0,f=o.within(s.x,s.y,l);c<f.length;c+=1){var d=o.points[f[c]];d.parentId===n&&u.push(d.numPoints?L(d):this.points[d.index]);}if(0===u.length)throw Error(a);return u;},I.prototype.getLeaves=function(n,r,i){var a=[];return this._appendLeaves(a,n,r=r||10,i=i||0,0),a;},I.prototype.getTile=function(n,r,i){var a=this.trees[this._limitZoom(n)],o=Math.pow(2,n),s=this.options,l=s.radius/s.extent,u=(i-l)/o,c=(i+1+l)/o,f={features:[]};return this._addTileFeatures(a.range((r-l)/o,u,(r+1+l)/o,c),a.points,r,i,o,f),0===r&&this._addTileFeatures(a.range(1-l/o,u,1,c),a.points,o,i,o,f),r===o-1&&this._addTileFeatures(a.range(0,u,l/o,c),a.points,-1,i,o,f),f.features.length?f:null;},I.prototype.getClusterExpansionZoom=function(n){for(var r=this._getOriginZoom(n)-1;r<=this.options.maxZoom;){var i=this.getChildren(n);if(r++,1!==i.length)break;n=i[0].properties.cluster_id;}return r;},I.prototype._appendLeaves=function(n,r,i,a,o){for(var s=0,l=this.getChildren(r);s<l.length;s+=1){var u=l[s],c=u.properties;if(c&&c.cluster?o+c.point_count<=a?o+=c.point_count:o=this._appendLeaves(n,c.cluster_id,i,a,o):o<a?o++:n.push(u),n.length===i)break;}return o;},I.prototype._addTileFeatures=function(n,r,i,a,o,s){for(var l=0;l<n.length;l+=1){var u=r[n[l]],c=u.numPoints,f={type:1,geometry:[[Math.round(this.options.extent*(u.x*o-i)),Math.round(this.options.extent*(u.y*o-a))]],tags:c?N(u):this.points[u.index].properties},d=void 0;c?d=u.id:this.options.generateId?d=u.index:this.points[u.index].id&&(d=this.points[u.index].id),void 0!==d&&(f.id=d),s.features.push(f);}},I.prototype._limitZoom=function(n){return Math.max(this.options.minZoom,Math.min(+n,this.options.maxZoom+1));},I.prototype._cluster=function(n,r){for(var i=[],a=this.options,o=a.reduce,s=a.minPoints,l=a.radius/(a.extent*Math.pow(2,r)),u=0;u<n.length;u++){var c=n[u];if(!(c.zoom<=r)){c.zoom=r;for(var f=this.trees[r+1],d=f.within(c.x,c.y,l),h=c.numPoints||1,p=h,m=0;m<d.length;m+=1){var g=f.points[d[m]];g.zoom>r&&(p+=g.numPoints||1);}if(p>=s){for(var v=c.x*h,y=c.y*h,_=o&&h>1?this._map(c,!0):null,b=(u<<5)+(r+1)+this.points.length,x=0;x<d.length;x+=1){var E=f.points[d[x]];if(!(E.zoom<=r)){E.zoom=r;var w=E.numPoints||1;v+=E.x*w,y+=E.y*w,E.parentId=b,o&&(_||(_=this._map(c,!0)),o(_,this._map(E)));}}c.parentId=b,i.push({x:v/p,y:y/p,zoom:1/0,id:b,parentId:-1,numPoints:p,properties:_});}else if(i.push(c),p>1)for(var S=0;S<d.length;S+=1){var T=f.points[d[S]];T.zoom<=r||(T.zoom=r,i.push(T));}}}return i;},I.prototype._getOriginId=function(n){return n-this.points.length>>5;},I.prototype._getOriginZoom=function(n){return(n-this.points.length)%32;},I.prototype._map=function(n,r){if(n.numPoints)return r?B({},n.properties):n.properties;var i=this.points[n.index].properties,a=this.options.map(i);return r&&a===i?B({},a):a;},eo.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},eo.prototype.splitTile=function(n,r,i,a,o,s,l){for(var u=[n,r,i,a],c=this.options,f=c.debug;u.length;){a=u.pop(),i=u.pop(),r=u.pop(),n=u.pop();var d=1<<r,h=es(r,i,a),p=this.tiles[h];if(!p&&(f>1&&console.time("creation"),p=this.tiles[h]=function(n,r,i,a,o){for(var s=r===o.maxZoom?0:o.tolerance/((1<<r)*o.extent),l={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:a,z:r,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},u=0;u<n.length;u++){l.numFeatures++,function(n,r,i,a){var o=r.geometry,s=r.type,l=[];if("Point"===s||"MultiPoint"===s)for(var u=0;u<o.length;u+=3)l.push(o[u]),l.push(o[u+1]),n.numPoints++,n.numSimplified++;else if("LineString"===s)ea(l,o,n,i,!1,!1);else if("MultiLineString"===s||"Polygon"===s)for(u=0;u<o.length;u++)ea(l,o[u],n,i,"Polygon"===s,0===u);else if("MultiPolygon"===s)for(var c=0;c<o.length;c++){var f=o[c];for(u=0;u<f.length;u++)ea(l,f[u],n,i,!0,0===u);}if(l.length){var d=r.tags||null;if("LineString"===s&&a.lineMetrics){for(var h in d={},r.tags)d[h]=r.tags[h];d.mapbox_clip_start=o.start/o.size,d.mapbox_clip_end=o.end/o.size;}var p={geometry:l,type:"Polygon"===s||"MultiPolygon"===s?3:"LineString"===s||"MultiLineString"===s?2:1,tags:d};null!==r.id&&(p.id=r.id),n.features.push(p);}}(l,n[u],s,o);var c=n[u].minX,f=n[u].minY,d=n[u].maxX,h=n[u].maxY;c<l.minX&&(l.minX=c),f<l.minY&&(l.minY=f),d>l.maxX&&(l.maxX=d),h>l.maxY&&(l.maxY=h);}return l;}(n,r,i,a,c),this.tileCoords.push({z:r,x:i,y:a}),f)){f>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",r,i,a,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var m="z"+r;this.stats[m]=(this.stats[m]||0)+1,this.total++;}if(p.source=n,o){if(r===c.maxZoom||r===o)continue;var g=1<<o-r;if(i!==Math.floor(s/g)||a!==Math.floor(l/g))continue;}else if(r===c.indexMaxZoom||p.numPoints<=c.indexMaxPoints)continue;if(p.source=null,0!==n.length){f>1&&console.time("clipping");var v,y,_,b,x,E,w=.5*c.buffer/c.extent,S=.5-w,T=.5+w,A=1+w;v=y=_=b=null,x=$(n,d,i-w,i+T,0,p.minX,p.maxX,c),E=$(n,d,i+S,i+A,0,p.minX,p.maxX,c),n=null,x&&(v=$(x,d,a-w,a+T,1,p.minY,p.maxY,c),y=$(x,d,a+S,a+A,1,p.minY,p.maxY,c),x=null),E&&(_=$(E,d,a-w,a+T,1,p.minY,p.maxY,c),b=$(E,d,a+S,a+A,1,p.minY,p.maxY,c),E=null),f>1&&console.timeEnd("clipping"),u.push(v||[],r+1,2*i,2*a),u.push(y||[],r+1,2*i,2*a+1),u.push(_||[],r+1,2*i+1,2*a),u.push(b||[],r+1,2*i+1,2*a+1);}}},eo.prototype.getTile=function(n,r,i){var a=this.options,o=a.extent,s=a.debug;if(n<0||n>24)return null;var l=1<<n,u=es(n,r=(r%l+l)%l,i);if(this.tiles[u])return er(this.tiles[u],o);s>1&&console.log("drilling down to z%d-%d-%d",n,r,i);for(var c,f=n,d=r,h=i;!c&&f>0;)f--,d=Math.floor(d/2),h=Math.floor(h/2),c=this.tiles[es(f,d,h)];return c&&c.source?(s>1&&console.log("found parent tile z%d-%d-%d",f,d,h),s>1&&console.time("drilling down"),this.splitTile(c.source,f,d,h,n,r,i),s>1&&console.timeEnd("drilling down"),this.tiles[u]?er(this.tiles[u],o):null):null;};var eu=function(r){function i(n,i,a,o){r.call(this,n,i,a,el),o&&(this.loadGeoJSON=o);}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.loadData=function(n,r){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=r,this._pendingLoadDataParams=n,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData());},i.prototype._loadData=function(){var r=this;if(this._pendingCallback&&this._pendingLoadDataParams){var i=this._pendingCallback,a=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var o=!!(a&&a.request&&a.request.collectResourceTiming)&&new n.RequestPerformance(a.request);this.loadGeoJSON(a,function(s,l){if(s||!l)return i(s);if("object"!=typeof l)return i(Error("Input data given to '"+a.source+"' is not a valid GeoJSON object."));!function n(r,i){var a,o=r&&r.type;if("FeatureCollection"===o)for(a=0;a<r.features.length;a++)n(r.features[a],i);else if("GeometryCollection"===o)for(a=0;a<r.geometries.length;a++)n(r.geometries[a],i);else if("Feature"===o)n(r.geometry,i);else if("Polygon"===o)f(r.coordinates,i);else if("MultiPolygon"===o)for(a=0;a<r.coordinates.length;a++)f(r.coordinates[a],i);return r;}(l,!0);try{if(a.filter){var u,c,d=n.createExpression(a.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===d.result)throw Error(d.value.map(function(n){return n.key+": "+n.message;}).join(", "));var h=l.features.filter(function(n){return d.value.evaluate({zoom:0},n);});l={type:"FeatureCollection",features:h};}r._geoJSONIndex=a.cluster?new I(function(r){var i=r.superclusterOptions,a=r.clusterProperties;if(!a||!i)return i;for(var o={},s={},l={accumulated:null,zoom:0},u={properties:null},c=Object.keys(a),f=0;f<c.length;f+=1){var d=c[f],h=a[d],p=h[0],m=n.createExpression(h[1]),g=n.createExpression("string"==typeof p?[p,["accumulated"],["get",d]]:p);o[d]=m.value,s[d]=g.value;}return i.map=function(n){u.properties=n;for(var r={},i=0;i<c.length;i+=1){var a=c[i];r[a]=o[a].evaluate(l,u);}return r;},i.reduce=function(n,r){u.properties=r;for(var i=0;i<c.length;i+=1){var a=c[i];l.accumulated=n[a],n[a]=s[a].evaluate(l,u);}},i;}(a)).load(l.features):(u=l,c=a.geojsonVtOptions,new eo(u,c));}catch(n){return i(n);}r.loaded={};var p={};if(o){var m=o.finish();m&&(p.resourceTiming={},p.resourceTiming[a.source]=JSON.parse(JSON.stringify(m)));}i(null,p);});}},i.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData());},i.prototype.reloadTile=function(n,i){var a=this.loaded;return a&&a[n.uid]?r.prototype.reloadTile.call(this,n,i):this.loadTile(n,i);},i.prototype.loadGeoJSON=function(r,i){if(r.request)n.getJSON(r.request,i);else{if("string"!=typeof r.data)return i(Error("Input data given to '"+r.source+"' is not a valid GeoJSON object."));try{return i(null,JSON.parse(r.data));}catch(n){return i(Error("Input data given to '"+r.source+"' is not a valid GeoJSON object."));}}},i.prototype.removeSource=function(n,r){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),r();},i.prototype.getClusterExpansionZoom=function(n,r){try{r(null,this._geoJSONIndex.getClusterExpansionZoom(n.clusterId));}catch(n){r(n);}},i.prototype.getClusterChildren=function(n,r){try{r(null,this._geoJSONIndex.getChildren(n.clusterId));}catch(n){r(n);}},i.prototype.getClusterLeaves=function(n,r){try{r(null,this._geoJSONIndex.getLeaves(n.clusterId,n.limit,n.offset));}catch(n){r(n);}},i;}(l),ec=function(r){var i=this;this.self=r,this.actor=new n.Actor(r,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:l,geojson:eu},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(n,r){if(i.workerSourceTypes[n])throw Error('Worker source with name "'+n+'" already registered.');i.workerSourceTypes[n]=r;},this.self.registerRTLTextPlugin=function(r){if(n.plugin.isParsed())throw Error("RTL text plugin already registered.");n.plugin.applyArabicShaping=r.applyArabicShaping,n.plugin.processBidirectionalText=r.processBidirectionalText,n.plugin.processStyledBidirectionalText=r.processStyledBidirectionalText;};};return ec.prototype.setReferrer=function(n,r){this.referrer=r;},ec.prototype.setImages=function(n,r,i){for(var a in this.availableImages[n]=r,this.workerSources[n]){var o=this.workerSources[n][a];for(var s in o)o[s].availableImages=r;}i();},ec.prototype.setLayers=function(n,r,i){this.getLayerIndex(n).replace(r),i();},ec.prototype.updateLayers=function(n,r,i){this.getLayerIndex(n).update(r.layers,r.removedIds),i();},ec.prototype.loadTile=function(n,r,i){this.getWorkerSource(n,r.type,r.source).loadTile(r,i);},ec.prototype.loadDEMTile=function(n,r,i){this.getDEMWorkerSource(n,r.source).loadTile(r,i);},ec.prototype.reloadTile=function(n,r,i){this.getWorkerSource(n,r.type,r.source).reloadTile(r,i);},ec.prototype.abortTile=function(n,r,i){this.getWorkerSource(n,r.type,r.source).abortTile(r,i);},ec.prototype.removeTile=function(n,r,i){this.getWorkerSource(n,r.type,r.source).removeTile(r,i);},ec.prototype.removeDEMTile=function(n,r){this.getDEMWorkerSource(n,r.source).removeTile(r);},ec.prototype.removeSource=function(n,r,i){if(this.workerSources[n]&&this.workerSources[n][r.type]&&this.workerSources[n][r.type][r.source]){var a=this.workerSources[n][r.type][r.source];delete this.workerSources[n][r.type][r.source],void 0!==a.removeSource?a.removeSource(r,i):i();}},ec.prototype.loadWorkerSource=function(n,r,i){try{this.self.importScripts(r.url),i();}catch(n){i(n.toString());}},ec.prototype.syncRTLPluginState=function(r,i,a){try{n.plugin.setState(i);var o=n.plugin.getPluginURL();if(n.plugin.isLoaded()&&!n.plugin.isParsed()&&null!=o){this.self.importScripts(o);var s=n.plugin.isParsed();a(s?void 0:Error("RTL Text Plugin failed to import scripts from "+o),s);}}catch(n){a(n.toString());}},ec.prototype.getAvailableImages=function(n){var r=this.availableImages[n];return r||(r=[]),r;},ec.prototype.getLayerIndex=function(n){var i=this.layerIndexes[n];return i||(i=this.layerIndexes[n]=new r),i;},ec.prototype.getWorkerSource=function(n,r,i){var a=this;return this.workerSources[n]||(this.workerSources[n]={}),this.workerSources[n][r]||(this.workerSources[n][r]={}),this.workerSources[n][r][i]||(this.workerSources[n][r][i]=new this.workerSourceTypes[r]({send:function(r,i,o){a.actor.send(r,i,o,n);}},this.getLayerIndex(n),this.getAvailableImages(n))),this.workerSources[n][r][i];},ec.prototype.getDEMWorkerSource=function(n,r){return this.demWorkerSources[n]||(this.demWorkerSources[n]={}),this.demWorkerSources[n][r]||(this.demWorkerSources[n][r]=new c),this.demWorkerSources[n][r];},ec.prototype.enforceCacheSizeLimit=function(r,i){n.enforceCacheSizeLimit(i);},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new ec(self)),ec;}),a(["./shared"],function(n){var r=n.createCommonjsModule(function(n){function r(n){return!i(n);}function i(n){var i;return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var n,r,i=new Blob([""],{type:"text/javascript"}),a=URL.createObjectURL(i);try{r=new Worker(a),n=!0;}catch(r){n=!1;}return r&&r.terminate(),URL.revokeObjectURL(a),n;}()?"insufficient worker support":"Uint8ClampedArray"in window?ArrayBuffer.isView?!function(){var n=document.createElement("canvas");n.width=n.height=1;var r=n.getContext("2d");if(!r)return!1;var i=r.getImageData(0,0,1,1);return i&&i.width===n.width;}()?"insufficient Canvas/getImageData support":(void 0===a[i=n&&n.failIfMajorPerformanceCaveat]&&(a[i]=function(n){var i,a,o=(i=document.createElement("canvas"),(a=Object.create(r.webGLContextAttributes)).failIfMajorPerformanceCaveat=n,i.probablySupportsContext?i.probablySupportsContext("webgl",a)||i.probablySupportsContext("experimental-webgl",a):i.supportsContext?i.supportsContext("webgl",a)||i.supportsContext("experimental-webgl",a):i.getContext("webgl",a)||i.getContext("experimental-webgl",a));if(!o)return!1;var s=o.createShader(o.VERTEX_SHADER);return!(!s||o.isContextLost())&&(o.shaderSource(s,"void main() {}"),o.compileShader(s),!0===o.getShaderParameter(s,o.COMPILE_STATUS));}(i)),a[i]?void 0:"insufficient WebGL support"):"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";}n.exports?n.exports=r:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=r,window.mapboxgl.notSupportedReason=i);var a={};r.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};}),i={create:function(r,i,a){var o=n.window.document.createElement(r);return void 0!==i&&(o.className=i),a&&a.appendChild(o),o;},createNS:function(r,i){return n.window.document.createElementNS(r,i);}},a=n.window.document&&n.window.document.documentElement.style;function o(n){if(!a)return n[0];for(var r=0;r<n.length;r++)if(n[r]in a)return n[r];return n[0];}var s,l=o(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);i.disableDrag=function(){a&&l&&(s=a[l],a[l]="none");},i.enableDrag=function(){a&&l&&(a[l]=s);};var u=o(["transform","WebkitTransform"]);i.setTransform=function(n,r){n.style[u]=r;};var c=!1;try{var f=Object.defineProperty({},"passive",{get:function(){c=!0;}});n.window.addEventListener("test",f,f),n.window.removeEventListener("test",f,f);}catch(n){c=!1;}i.addEventListener=function(n,r,i,a){void 0===a&&(a={}),n.addEventListener(r,i,"passive"in a&&c?a:a.capture);},i.removeEventListener=function(n,r,i,a){void 0===a&&(a={}),n.removeEventListener(r,i,"passive"in a&&c?a:a.capture);};var d=function(r){r.preventDefault(),r.stopPropagation(),n.window.removeEventListener("click",d,!0);};i.suppressClick=function(){n.window.addEventListener("click",d,!0),n.window.setTimeout(function(){n.window.removeEventListener("click",d,!0);},0);},i.mousePos=function(r,i){var a=r.getBoundingClientRect();return new n.Point(i.clientX-a.left-r.clientLeft,i.clientY-a.top-r.clientTop);},i.touchPos=function(r,i){for(var a=r.getBoundingClientRect(),o=[],s=0;s<i.length;s++)o.push(new n.Point(i[s].clientX-a.left-r.clientLeft,i[s].clientY-a.top-r.clientTop));return o;},i.mouseButton=function(r){return void 0!==n.window.InstallTrigger&&2===r.button&&r.ctrlKey&&n.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:r.button;},i.remove=function(n){n.parentNode&&n.parentNode.removeChild(n);};var h=function(r){function i(){r.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new n.RGBAImage({width:1,height:1}),this.dirty=!0;}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.isLoaded=function(){return this.loaded;},i.prototype.setLoaded=function(n){if(this.loaded!==n&&(this.loaded=n,n)){for(var r=0,i=this.requestors;r<i.length;r+=1){var a=i[r];this._notify(a.ids,a.callback);}this.requestors=[];}},i.prototype.getImage=function(n){return this.images[n];},i.prototype.addImage=function(n,r){this._validate(n,r)&&(this.images[n]=r);},i.prototype._validate=function(r,i){var a=!0;return this._validateStretch(i.stretchX,i.data&&i.data.width)||(this.fire(new n.ErrorEvent(Error('Image "'+r+'" has invalid "stretchX" value'))),a=!1),this._validateStretch(i.stretchY,i.data&&i.data.height)||(this.fire(new n.ErrorEvent(Error('Image "'+r+'" has invalid "stretchY" value'))),a=!1),this._validateContent(i.content,i)||(this.fire(new n.ErrorEvent(Error('Image "'+r+'" has invalid "content" value'))),a=!1),a;},i.prototype._validateStretch=function(n,r){if(!n)return!0;for(var i=0,a=0;a<n.length;a+=1){var o=n[a];if(o[0]<i||o[1]<o[0]||r<o[1])return!1;i=o[1];}return!0;},i.prototype._validateContent=function(n,r){return!(n&&(4!==n.length||n[0]<0||r.data.width<n[0]||n[1]<0||r.data.height<n[1]||n[2]<0||r.data.width<n[2]||n[3]<0||r.data.height<n[3]||n[2]<n[0]||n[3]<n[1]));},i.prototype.updateImage=function(n,r){r.version=this.images[n].version+1,this.images[n]=r,this.updatedImages[n]=!0;},i.prototype.removeImage=function(n){var r=this.images[n];delete this.images[n],delete this.patterns[n],r.userImage&&r.userImage.onRemove&&r.userImage.onRemove();},i.prototype.listImages=function(){return Object.keys(this.images);},i.prototype.getImages=function(n,r){var i=!0;if(!this.isLoaded())for(var a=0;a<n.length;a+=1)this.images[n[a]]||(i=!1);this.isLoaded()||i?this._notify(n,r):this.requestors.push({ids:n,callback:r});},i.prototype._notify=function(r,i){for(var a={},o=0;o<r.length;o+=1){var s=r[o];this.images[s]||this.fire(new n.Event("styleimagemissing",{id:s}));var l=this.images[s];l?a[s]={data:l.data.clone(),pixelRatio:l.pixelRatio,sdf:l.sdf,version:l.version,stretchX:l.stretchX,stretchY:l.stretchY,content:l.content,hasRenderCallback:!!(l.userImage&&l.userImage.render)}:n.warnOnce('Image "'+s+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.');}i(null,a);},i.prototype.getPixelSize=function(){var n=this.atlasImage;return{width:n.width,height:n.height};},i.prototype.getPattern=function(r){var i=this.patterns[r],a=this.getImage(r);if(!a)return null;if(i&&i.position.version===a.version)return i.position;if(i)i.position.version=a.version;else{var o={w:a.data.width+2,h:a.data.height+2,x:0,y:0},s=new n.ImagePosition(o,a);this.patterns[r]={bin:o,position:s};}return this._updatePatternAtlas(),this.patterns[r].position;},i.prototype.bind=function(r){var i=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new n.Texture(r,this.atlasImage,i.RGBA),this.atlasTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE);},i.prototype._updatePatternAtlas=function(){var r=[];for(var i in this.patterns)r.push(this.patterns[i].bin);var a=n.potpack(r),o=a.w,s=a.h,l=this.atlasImage;for(var u in l.resize({width:o||1,height:s||1}),this.patterns){var c=this.patterns[u].bin,f=c.x+1,d=c.y+1,h=this.images[u].data,p=h.width,m=h.height;n.RGBAImage.copy(h,l,{x:0,y:0},{x:f,y:d},{width:p,height:m}),n.RGBAImage.copy(h,l,{x:0,y:m-1},{x:f,y:d-1},{width:p,height:1}),n.RGBAImage.copy(h,l,{x:0,y:0},{x:f,y:d+m},{width:p,height:1}),n.RGBAImage.copy(h,l,{x:p-1,y:0},{x:f-1,y:d},{width:1,height:m}),n.RGBAImage.copy(h,l,{x:0,y:0},{x:f+p,y:d},{width:1,height:m});}this.dirty=!0;},i.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={};},i.prototype.dispatchRenderCallbacks=function(n){for(var r=0;r<n.length;r+=1){var i=n[r];if(!this.callbackDispatchedThisFrame[i]){this.callbackDispatchedThisFrame[i]=!0;var a=this.images[i];(function(n){var r=n.userImage;return!!(r&&r.render&&r.render())&&(n.data.replace(new Uint8Array(r.data.buffer)),!0);})(a)&&this.updateImage(i,a);}}},i;}(n.Evented);function p(n,r,i,a,o,s){this.fontSize=n||24,this.buffer=void 0===r?3:r,this.cutoff=a||.25,this.fontFamily=o||"sans-serif",this.fontWeight=s||"normal",this.radius=i||8;var l=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=l,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(l*l),this.gridInner=new Float64Array(l*l),this.f=new Float64Array(l),this.d=new Float64Array(l),this.z=new Float64Array(l+1),this.v=new Int16Array(l),this.middle=Math.round(l/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1));}function m(n,r,i,a,o,s,l){for(var u=0;u<r;u++){for(var c=0;c<i;c++)a[c]=n[c*r+u];for(g(a,o,s,l,i),c=0;c<i;c++)n[c*r+u]=o[c];}for(c=0;c<i;c++){for(u=0;u<r;u++)a[u]=n[c*r+u];for(g(a,o,s,l,r),u=0;u<r;u++)n[c*r+u]=Math.sqrt(o[u]);}}function g(n,r,i,a,o){i[0]=0,a[0]=-1e20,a[1]=1e20;for(var s=1,l=0;s<o;s++){for(var u=(n[s]+s*s-(n[i[l]]+i[l]*i[l]))/(2*s-2*i[l]);u<=a[l];)l--,u=(n[s]+s*s-(n[i[l]]+i[l]*i[l]))/(2*s-2*i[l]);i[++l]=s,a[l]=u,a[l+1]=1e20;}for(s=0,l=0;s<o;s++){for(;a[l+1]<s;)l++;r[s]=(s-i[l])*(s-i[l])+n[i[l]];}}p.prototype.draw=function(n){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(n,this.buffer,this.middle);for(var r=this.ctx.getImageData(0,0,this.size,this.size),i=new Uint8ClampedArray(this.size*this.size),a=0;a<this.size*this.size;a++){var o=r.data[4*a+3]/255;this.gridOuter[a]=1===o?0:0===o?1e20:Math.pow(Math.max(0,.5-o),2),this.gridInner[a]=1===o?1e20:0===o?0:Math.pow(Math.max(0,o-.5),2);}for(m(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),m(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),a=0;a<this.size*this.size;a++)i[a]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[a]-this.gridInner[a])/this.radius+this.cutoff))));return i;},p.default=p;var v=function(n,r){this.requestManager=n,this.localIdeographFontFamily=r,this.entries={};};v.prototype.setURL=function(n){this.url=n;},v.prototype.getGlyphs=function(r,i){var a=this,o=[];for(var s in r)for(var l=0,u=r[s];l<u.length;l+=1)o.push({stack:s,id:u[l]});n.asyncAll(o,function(n,r){var i=n.stack,o=n.id,s=a.entries[i];s||(s=a.entries[i]={glyphs:{},requests:{},ranges:{}});var l=s.glyphs[o];if(void 0===l){if(l=a._tinySDF(s,i,o))return s.glyphs[o]=l,void r(null,{stack:i,id:o,glyph:l});var u=Math.floor(o/256);if(256*u>65535)r(Error("glyphs > 65535 not supported"));else if(s.ranges[u])r(null,{stack:i,id:o,glyph:l});else{var c=s.requests[u];c||(c=s.requests[u]=[],v.loadGlyphRange(i,u,a.url,a.requestManager,function(n,r){if(r){for(var i in r)a._doesCharSupportLocalGlyph(+i)||(s.glyphs[+i]=r[+i]);s.ranges[u]=!0;}for(var o=0,l=c;o<l.length;o+=1)(0,l[o])(n,r);delete s.requests[u];})),c.push(function(n,a){n?r(n):a&&r(null,{stack:i,id:o,glyph:a[o]||null});});}}else r(null,{stack:i,id:o,glyph:l});},function(n,r){if(n)i(n);else if(r){for(var a={},o=0;o<r.length;o+=1){var s=r[o],l=s.stack,u=s.id,c=s.glyph;(a[l]||(a[l]={}))[u]=c&&{id:c.id,bitmap:c.bitmap.clone(),metrics:c.metrics};}i(null,a);}});},v.prototype._doesCharSupportLocalGlyph=function(r){return!!this.localIdeographFontFamily&&(n.isChar["CJK Unified Ideographs"](r)||n.isChar["Hangul Syllables"](r)||n.isChar.Hiragana(r)||n.isChar.Katakana(r));},v.prototype._tinySDF=function(r,i,a){var o=this.localIdeographFontFamily;if(o&&this._doesCharSupportLocalGlyph(a)){var s=r.tinySDF;if(!s){var l="400";/bold/i.test(i)?l="900":/medium/i.test(i)?l="500":/light/i.test(i)&&(l="200"),s=r.tinySDF=new v.TinySDF(24,3,8,.25,o,l);}return{id:a,bitmap:new n.AlphaImage({width:30,height:30},s.draw(String.fromCharCode(a))),metrics:{width:24,height:24,left:0,top:-8,advance:24}};}},v.loadGlyphRange=function(r,i,a,o,s){var l=256*i,u=o.transformRequest(o.normalizeGlyphsURL(a).replace("{fontstack}",r).replace("{range}",l+"-"+(l+255)),n.ResourceType.Glyphs);n.getArrayBuffer(u,function(r,i){if(r)s(r);else if(i){for(var a={},o=0,l=n.parseGlyphPBF(i);o<l.length;o+=1){var u=l[o];a[u.id]=u;}s(null,a);}});},v.TinySDF=p;var y=function(){this.specification=n.styleSpec.light.position;};y.prototype.possiblyEvaluate=function(r,i){return n.sphericalToCartesian(r.expression.evaluate(i));},y.prototype.interpolate=function(r,i,a){return{x:n.number(r.x,i.x,a),y:n.number(r.y,i.y,a),z:n.number(r.z,i.z,a)};};var _=new n.Properties({anchor:new n.DataConstantProperty(n.styleSpec.light.anchor),position:new y,color:new n.DataConstantProperty(n.styleSpec.light.color),intensity:new n.DataConstantProperty(n.styleSpec.light.intensity)}),b=function(r){function i(i){r.call(this),this._transitionable=new n.Transitionable(_),this.setLight(i),this._transitioning=this._transitionable.untransitioned();}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.getLight=function(){return this._transitionable.serialize();},i.prototype.setLight=function(r,i){if(void 0===i&&(i={}),!this._validate(n.validateLight,r,i))for(var a in r){var o=r[a];n.endsWith(a,"-transition")?this._transitionable.setTransition(a.slice(0,-11),o):this._transitionable.setValue(a,o);}},i.prototype.updateTransitions=function(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning);},i.prototype.hasTransition=function(){return this._transitioning.hasTransition();},i.prototype.recalculate=function(n){this.properties=this._transitioning.possiblyEvaluate(n);},i.prototype._validate=function(r,i,a){return(!a||!1!==a.validate)&&n.emitValidationErrors(this,r.call(n.validateStyle,n.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:n.styleSpec})));},i;}(n.Evented),x=function(n,r){this.width=n,this.height=r,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={};};x.prototype.getDash=function(n,r){var i=n.join(",")+String(r);return this.dashEntry[i]||(this.dashEntry[i]=this.addDash(n,r)),this.dashEntry[i];},x.prototype.getDashRanges=function(n,r,i){var a=[],o=n.length%2==1?-n[n.length-1]*i:0,s=n[0]*i,l=!0;a.push({left:o,right:s,isDash:l,zeroLength:0===n[0]});for(var u=n[0],c=1;c<n.length;c++){var f=n[c];a.push({left:o=u*i,right:s=(u+=f)*i,isDash:l=!l,zeroLength:0===f});}return a;},x.prototype.addRoundDash=function(n,r,i){for(var a=r/2,o=-i;o<=i;o++)for(var s=this.width*(this.nextRow+i+o),l=0,u=n[l],c=0;c<this.width;c++){c/u.right>1&&(u=n[++l]);var f=Math.min(Math.abs(c-u.left),Math.abs(c-u.right)),d=void 0,h=o/i*(a+1);if(u.isDash){var p=a-Math.abs(h);d=Math.sqrt(f*f+p*p);}else d=a-Math.sqrt(f*f+h*h);this.data[s+c]=Math.max(0,Math.min(255,d+128));}},x.prototype.addRegularDash=function(n){for(var r=n.length-1;r>=0;--r){var i=n[r],a=n[r+1];i.zeroLength?n.splice(r,1):a&&a.isDash===i.isDash&&(a.left=i.left,n.splice(r,1));}var o=n[0],s=n[n.length-1];o.isDash===s.isDash&&(o.left=s.left-this.width,s.right=o.right+this.width);for(var l=this.width*this.nextRow,u=0,c=n[u],f=0;f<this.width;f++){f/c.right>1&&(c=n[++u]);var d=Math.min(Math.abs(f-c.left),Math.abs(f-c.right));this.data[l+f]=Math.max(0,Math.min(255,(c.isDash?d:-d)+128));}},x.prototype.addDash=function(r,i){var a=i?7:0,o=2*a+1;if(this.nextRow+o>this.height)return n.warnOnce("LineAtlas out of space"),null;for(var s=0,l=0;l<r.length;l++)s+=r[l];if(0!==s){var u=this.width/s,c=this.getDashRanges(r,this.width,u);i?this.addRoundDash(c,u,a):this.addRegularDash(c);}var f={y:(this.nextRow+a+.5)/this.height,height:2*a/this.height,width:s};return this.nextRow+=o,this.dirty=!0,f;},x.prototype.bind=function(n){var r=n.gl;this.texture?(r.bindTexture(r.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,r.texSubImage2D(r.TEXTURE_2D,0,0,0,this.width,this.height,r.ALPHA,r.UNSIGNED_BYTE,this.data))):(this.texture=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.REPEAT),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.REPEAT),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texImage2D(r.TEXTURE_2D,0,r.ALPHA,this.width,this.height,0,r.ALPHA,r.UNSIGNED_BYTE,this.data));};var E=function r(i,a){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=n.uniqueId();for(var o=this.workerPool.acquire(this.id),s=0;s<o.length;s++){var l=new r.Actor(o[s],a,this.id);l.name="Worker "+s,this.actors.push(l);}};function w(r,i,a){var o=function(o,s){if(o)return a(o);if(s){var l=n.pick(n.extend(s,r),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);s.vector_layers&&(l.vectorLayers=s.vector_layers,l.vectorLayerIds=l.vectorLayers.map(function(n){return n.id;})),l.tiles=i.canonicalizeTileset(l,r.url),a(null,l);}};return r.url?n.getJSON(i.transformRequest(i.normalizeSourceURL(r.url),n.ResourceType.Source),o):n.browser.frame(function(){return o(null,r);});}E.prototype.broadcast=function(r,i,a){n.asyncAll(this.actors,function(n,a){n.send(r,i,a);},a=a||function(){});},E.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor];},E.prototype.remove=function(){this.actors.forEach(function(n){n.remove();}),this.actors=[],this.workerPool.release(this.id);},E.Actor=n.Actor;var S=function(r,i,a){this.bounds=n.LngLatBounds.convert(this.validateBounds(r)),this.minzoom=i||0,this.maxzoom=a||24;};S.prototype.validateBounds=function(n){return Array.isArray(n)&&4===n.length?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90];},S.prototype.contains=function(r){var i=Math.pow(2,r.z),a=Math.floor(n.mercatorXfromLng(this.bounds.getWest())*i),o=Math.floor(n.mercatorYfromLat(this.bounds.getNorth())*i),s=Math.ceil(n.mercatorXfromLng(this.bounds.getEast())*i),l=Math.ceil(n.mercatorYfromLat(this.bounds.getSouth())*i);return r.x>=a&&r.x<s&&r.y>=o&&r.y<l;};var T=function(r){function i(i,a,o,s){if(r.call(this),this.id=i,this.dispatcher=o,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,n.extend(this,n.pick(a,["url","scheme","tileSize","promoteId"])),this._options=n.extend({type:"vector"},a),this._collectResourceTiming=a.collectResourceTiming,512!==this.tileSize)throw Error("vector tile sources must have a tileSize of 512");this.setEventedParent(s);}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.load=function(){var r=this;this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=w(this._options,this.map._requestManager,function(i,a){r._tileJSONRequest=null,r._loaded=!0,i?r.fire(new n.ErrorEvent(i)):a&&(n.extend(r,a),a.bounds&&(r.tileBounds=new S(a.bounds,r.minzoom,r.maxzoom)),n.postTurnstileEvent(a.tiles,r.map._requestManager._customAccessToken),n.postMapLoadEvent(a.tiles,r.map._getMapId(),r.map._requestManager._skuToken,r.map._requestManager._customAccessToken),r.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})),r.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"})));});},i.prototype.loaded=function(){return this._loaded;},i.prototype.hasTile=function(n){return!this.tileBounds||this.tileBounds.contains(n.canonical);},i.prototype.onAdd=function(n){this.map=n,this.load();},i.prototype.setSourceProperty=function(n){this._tileJSONRequest&&this._tileJSONRequest.cancel(),n(),this.map.style.sourceCaches[this.id].clearTiles(),this.load();},i.prototype.setTiles=function(n){var r=this;return this.setSourceProperty(function(){r._options.tiles=n;}),this;},i.prototype.setUrl=function(n){var r=this;return this.setSourceProperty(function(){r.url=n,r._options.url=n;}),this;},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null);},i.prototype.serialize=function(){return n.extend({},this._options);},i.prototype.loadTile=function(r,i){var a=this.map._requestManager.normalizeTileURL(r.tileID.canonical.url(this.tiles,this.scheme)),o={request:this.map._requestManager.transformRequest(a,n.ResourceType.Tile),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:n.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function s(a,o){return delete r.request,r.aborted?i(null):a&&404!==a.status?i(a):(o&&o.resourceTiming&&(r.resourceTiming=o.resourceTiming),this.map._refreshExpiredTiles&&o&&r.setExpiryData(o),r.loadVectorData(o,this.map.painter),n.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(r.reloadCallback&&(this.loadTile(r,r.reloadCallback),r.reloadCallback=null)));}o.request.collectResourceTiming=this._collectResourceTiming,r.actor&&"expired"!==r.state?"loading"===r.state?r.reloadCallback=i:r.request=r.actor.send("reloadTile",o,s.bind(this)):(r.actor=this.dispatcher.getActor(),r.request=r.actor.send("loadTile",o,s.bind(this)));},i.prototype.abortTile=function(n){n.request&&(n.request.cancel(),delete n.request),n.actor&&n.actor.send("abortTile",{uid:n.uid,type:this.type,source:this.id},void 0);},i.prototype.unloadTile=function(n){n.unloadVectorData(),n.actor&&n.actor.send("removeTile",{uid:n.uid,type:this.type,source:this.id},void 0);},i.prototype.hasTransition=function(){return!1;},i;}(n.Evented),A=function(r){function i(i,a,o,s){r.call(this),this.id=i,this.dispatcher=o,this.setEventedParent(s),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=n.extend({type:"raster"},a),n.extend(this,n.pick(a,["url","scheme","tileSize"]));}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.load=function(){var r=this;this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=w(this._options,this.map._requestManager,function(i,a){r._tileJSONRequest=null,r._loaded=!0,i?r.fire(new n.ErrorEvent(i)):a&&(n.extend(r,a),a.bounds&&(r.tileBounds=new S(a.bounds,r.minzoom,r.maxzoom)),n.postTurnstileEvent(a.tiles),n.postMapLoadEvent(a.tiles,r.map._getMapId(),r.map._requestManager._skuToken),r.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})),r.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"})));});},i.prototype.loaded=function(){return this._loaded;},i.prototype.onAdd=function(n){this.map=n,this.load();},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null);},i.prototype.serialize=function(){return n.extend({},this._options);},i.prototype.hasTile=function(n){return!this.tileBounds||this.tileBounds.contains(n.canonical);},i.prototype.loadTile=function(r,i){var a=this,o=this.map._requestManager.normalizeTileURL(r.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);r.request=n.getImage(this.map._requestManager.transformRequest(o,n.ResourceType.Tile),function(o,s){if(delete r.request,r.aborted)r.state="unloaded",i(null);else if(o)r.state="errored",i(o);else if(s){a.map._refreshExpiredTiles&&r.setExpiryData(s),delete s.cacheControl,delete s.expires;var l=a.map.painter.context,u=l.gl;r.texture=a.map.painter.getTileTexture(s.width),r.texture?r.texture.update(s,{useMipmap:!0}):(r.texture=new n.Texture(l,s,u.RGBA,{useMipmap:!0}),r.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE,u.LINEAR_MIPMAP_NEAREST),l.extTextureFilterAnisotropic&&u.texParameterf(u.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax)),r.state="loaded",n.cacheEntryPossiblyAdded(a.dispatcher),i(null);}});},i.prototype.abortTile=function(n,r){n.request&&(n.request.cancel(),delete n.request),r();},i.prototype.unloadTile=function(n,r){n.texture&&this.map.painter.saveTileTexture(n.texture),r();},i.prototype.hasTransition=function(){return!1;},i;}(n.Evented),C=function(r){function i(i,a,o,s){r.call(this,i,a,o,s),this.type="raster-dem",this.maxzoom=22,this._options=n.extend({type:"raster-dem"},a),this.encoding=a.encoding||"mapbox";}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding};},i.prototype.loadTile=function(r,i){var a=this.map._requestManager.normalizeTileURL(r.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function o(n,a){n&&(r.state="errored",i(n)),a&&(r.dem=a,r.needsHillshadePrepare=!0,r.state="loaded",i(null));}r.request=n.getImage(this.map._requestManager.transformRequest(a,n.ResourceType.Tile),(function(a,s){if(delete r.request,r.aborted)r.state="unloaded",i(null);else if(a)r.state="errored",i(a);else if(s){this.map._refreshExpiredTiles&&r.setExpiryData(s),delete s.cacheControl,delete s.expires;var l=n.window.ImageBitmap&&s instanceof n.window.ImageBitmap&&n.offscreenCanvasSupported()?s:n.browser.getImageData(s,1),u={uid:r.uid,coord:r.tileID,source:this.id,rawImageData:l,encoding:this.encoding};r.actor&&"expired"!==r.state||(r.actor=this.dispatcher.getActor(),r.actor.send("loadDEMTile",u,o.bind(this)));}}).bind(this)),r.neighboringTiles=this._getNeighboringTiles(r.tileID);},i.prototype._getNeighboringTiles=function(r){var i=r.canonical,a=Math.pow(2,i.z),o=(i.x-1+a)%a,s=0===i.x?r.wrap-1:r.wrap,l=(i.x+1+a)%a,u=i.x+1===a?r.wrap+1:r.wrap,c={};return c[new n.OverscaledTileID(r.overscaledZ,s,i.z,o,i.y).key]={backfilled:!1},c[new n.OverscaledTileID(r.overscaledZ,u,i.z,l,i.y).key]={backfilled:!1},i.y>0&&(c[new n.OverscaledTileID(r.overscaledZ,s,i.z,o,i.y-1).key]={backfilled:!1},c[new n.OverscaledTileID(r.overscaledZ,r.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},c[new n.OverscaledTileID(r.overscaledZ,u,i.z,l,i.y-1).key]={backfilled:!1}),i.y+1<a&&(c[new n.OverscaledTileID(r.overscaledZ,s,i.z,o,i.y+1).key]={backfilled:!1},c[new n.OverscaledTileID(r.overscaledZ,r.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},c[new n.OverscaledTileID(r.overscaledZ,u,i.z,l,i.y+1).key]={backfilled:!1}),c;},i.prototype.unloadTile=function(n){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&n.actor.send("removeDEMTile",{uid:n.uid,source:this.id});},i;}(A),O=function(r){function i(i,a,o,s){r.call(this),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=o.getActor(),this.setEventedParent(s),this._data=a.data,this._options=n.extend({},a),this._collectResourceTiming=a.collectResourceTiming,this._resourceTiming=[],void 0!==a.maxzoom&&(this.maxzoom=a.maxzoom),a.type&&(this.type=a.type),a.attribution&&(this.attribution=a.attribution),this.promoteId=a.promoteId;var l=n.EXTENT/this.tileSize;this.workerOptions=n.extend({source:this.id,cluster:a.cluster||!1,geojsonVtOptions:{buffer:(void 0!==a.buffer?a.buffer:128)*l,tolerance:(void 0!==a.tolerance?a.tolerance:.375)*l,extent:n.EXTENT,maxZoom:this.maxzoom,lineMetrics:a.lineMetrics||!1,generateId:a.generateId||!1},superclusterOptions:{maxZoom:void 0!==a.clusterMaxZoom?Math.min(a.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,a.clusterMinPoints||2),extent:n.EXTENT,radius:(a.clusterRadius||50)*l,log:!1,generateId:a.generateId||!1},clusterProperties:a.clusterProperties,filter:a.filter},a.workerOptions);}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.load=function(){var r=this;this.fire(new n.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(i){if(i)r.fire(new n.ErrorEvent(i));else{var a={dataType:"source",sourceDataType:"metadata"};r._collectResourceTiming&&r._resourceTiming&&r._resourceTiming.length>0&&(a.resourceTiming=r._resourceTiming,r._resourceTiming=[]),r.fire(new n.Event("data",a));}});},i.prototype.onAdd=function(n){this.map=n,this.load();},i.prototype.setData=function(r){var i=this;return this._data=r,this.fire(new n.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(r){if(r)i.fire(new n.ErrorEvent(r));else{var a={dataType:"source",sourceDataType:"content"};i._collectResourceTiming&&i._resourceTiming&&i._resourceTiming.length>0&&(a.resourceTiming=i._resourceTiming,i._resourceTiming=[]),i.fire(new n.Event("data",a));}}),this;},i.prototype.getClusterExpansionZoom=function(n,r){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:n,source:this.id},r),this;},i.prototype.getClusterChildren=function(n,r){return this.actor.send("geojson.getClusterChildren",{clusterId:n,source:this.id},r),this;},i.prototype.getClusterLeaves=function(n,r,i,a){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:n,limit:r,offset:i},a),this;},i.prototype._updateWorkerData=function(r){var i=this;this._loaded=!1;var a=n.extend({},this.workerOptions),o=this._data;"string"==typeof o?(a.request=this.map._requestManager.transformRequest(n.browser.resolveURL(o),n.ResourceType.Source),a.request.collectResourceTiming=this._collectResourceTiming):a.data=JSON.stringify(o),this.actor.send(this.type+".loadData",a,function(n,o){i._removed||o&&o.abandoned||(i._loaded=!0,o&&o.resourceTiming&&o.resourceTiming[i.id]&&(i._resourceTiming=o.resourceTiming[i.id].slice(0)),i.actor.send(i.type+".coalesce",{source:a.source},null),r(n));});},i.prototype.loaded=function(){return this._loaded;},i.prototype.loadTile=function(r,i){var a=this,o=r.actor?"reloadTile":"loadTile";r.actor=this.actor,r.request=this.actor.send(o,{type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:n.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(n,s){return delete r.request,r.unloadVectorData(),r.aborted?i(null):n?i(n):(r.loadVectorData(s,a.map.painter,"reloadTile"===o),i(null));});},i.prototype.abortTile=function(n){n.request&&(n.request.cancel(),delete n.request),n.aborted=!0;},i.prototype.unloadTile=function(n){n.unloadVectorData(),this.actor.send("removeTile",{uid:n.uid,type:this.type,source:this.id});},i.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id});},i.prototype.serialize=function(){return n.extend({},this._options,{type:this.type,data:this._data});},i.prototype.hasTransition=function(){return!1;},i;}(n.Evented),M=n.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),R=function(r){function i(n,i,a,o){r.call(this),this.id=n,this.dispatcher=a,this.coordinates=i.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(o),this.options=i;}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.load=function(r,i){var a=this;this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this.url=this.options.url,n.getImage(this.map._requestManager.transformRequest(this.url,n.ResourceType.Image),function(o,s){a._loaded=!0,o?a.fire(new n.ErrorEvent(o)):s&&(a.image=s,r&&(a.coordinates=r),i&&i(),a._finishLoading());});},i.prototype.loaded=function(){return this._loaded;},i.prototype.updateImage=function(n){var r=this;return this.image&&n.url&&(this.options.url=n.url,this.load(n.coordinates,function(){r.texture=null;})),this;},i.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})));},i.prototype.onAdd=function(n){this.map=n,this.load();},i.prototype.setCoordinates=function(r){var i=this;this.coordinates=r;var a=r.map(n.MercatorCoordinate.fromLngLat);this.tileID=function(r){for(var i=1/0,a=1/0,o=-1/0,s=-1/0,l=0;l<r.length;l+=1){var u=r[l];i=Math.min(i,u.x),a=Math.min(a,u.y),o=Math.max(o,u.x),s=Math.max(s,u.y);}var c=Math.max(0,Math.floor(-Math.log(Math.max(o-i,s-a))/Math.LN2)),f=Math.pow(2,c);return new n.CanonicalTileID(c,Math.floor((i+o)/2*f),Math.floor((a+s)/2*f));}(a),this.minzoom=this.maxzoom=this.tileID.z;var o=a.map(function(n){return i.tileID.getTilePoint(n)._round();});return this._boundsArray=new n.StructArrayLayout4i8,this._boundsArray.emplaceBack(o[0].x,o[0].y,0,0),this._boundsArray.emplaceBack(o[1].x,o[1].y,n.EXTENT,0),this._boundsArray.emplaceBack(o[3].x,o[3].y,0,n.EXTENT),this._boundsArray.emplaceBack(o[2].x,o[2].y,n.EXTENT,n.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"})),this;},i.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var r=this.map.painter.context,i=r.gl;for(var a in this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,M.members)),this.boundsSegments||(this.boundsSegments=n.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new n.Texture(r,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var o=this.tiles[a];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture);}}},i.prototype.loadTile=function(n,r){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={}):n.state="errored",r(null);},i.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates};},i.prototype.hasTransition=function(){return!1;},i;}(n.Evented),P=function(r){function i(n,i,a,o){r.call(this,n,i,a,o),this.roundZoom=!0,this.type="video",this.options=i;}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.load=function(){var r=this;this._loaded=!1;var i=this.options;this.urls=[];for(var a=0,o=i.urls;a<o.length;a+=1)this.urls.push(this.map._requestManager.transformRequest(o[a],n.ResourceType.Source).url);n.getVideo(this.urls,function(i,a){r._loaded=!0,i?r.fire(new n.ErrorEvent(i)):a&&(r.video=a,r.video.loop=!0,r.video.setAttribute("playsinline",""),r.video.addEventListener("playing",function(){r.map.triggerRepaint();}),r.map&&r.video.play(),r._finishLoading());});},i.prototype.pause=function(){this.video&&this.video.pause();},i.prototype.play=function(){this.video&&this.video.play();},i.prototype.seek=function(r){if(this.video){var i=this.video.seekable;r<i.start(0)||r>i.end(0)?this.fire(new n.ErrorEvent(new n.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+i.start(0)+" and "+i.end(0)+"-second mark."))):this.video.currentTime=r;}},i.prototype.getVideo=function(){return this.video;},i.prototype.onAdd=function(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)));},i.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var r=this.map.painter.context,i=r.gl;for(var a in this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,M.members)),this.boundsSegments||(this.boundsSegments=n.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new n.Texture(r,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var o=this.tiles[a];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture);}}},i.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates};},i.prototype.hasTransition=function(){return this.video&&!this.video.paused;},i;}(R),k=function(r){function i(i,a,o,s){r.call(this,i,a,o,s),a.coordinates?Array.isArray(a.coordinates)&&4===a.coordinates.length&&!a.coordinates.some(function(n){return!Array.isArray(n)||2!==n.length||n.some(function(n){return"number"!=typeof n;});})||this.fire(new n.ErrorEvent(new n.ValidationError("sources."+i,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new n.ErrorEvent(new n.ValidationError("sources."+i,null,'missing required property "coordinates"'))),a.animate&&"boolean"!=typeof a.animate&&this.fire(new n.ErrorEvent(new n.ValidationError("sources."+i,null,'optional "animate" property must be a boolean value'))),a.canvas?"string"==typeof a.canvas||a.canvas instanceof n.window.HTMLCanvasElement||this.fire(new n.ErrorEvent(new n.ValidationError("sources."+i,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new n.ErrorEvent(new n.ValidationError("sources."+i,null,'missing required property "canvas"'))),this.options=a,this.animate=void 0===a.animate||a.animate;}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof n.window.HTMLCanvasElement?this.options.canvas:n.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new n.ErrorEvent(Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint();},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1);},this._finishLoading());},i.prototype.getCanvas=function(){return this.canvas;},i.prototype.onAdd=function(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play();},i.prototype.onRemove=function(){this.pause();},i.prototype.prepare=function(){var r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var i=this.map.painter.context,a=i.gl;for(var o in this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,M.members)),this.boundsSegments||(this.boundsSegments=n.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new n.Texture(i,this.canvas,a.RGBA,{premultiply:!0}),this.tiles){var s=this.tiles[o];"loaded"!==s.state&&(s.state="loaded",s.texture=this.texture);}}},i.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates};},i.prototype.hasTransition=function(){return this._playing;},i.prototype._hasInvalidDimensions=function(){for(var n=0,r=[this.canvas.width,this.canvas.height];n<r.length;n+=1){var i=r[n];if(isNaN(i)||i<=0)return!0;}return!1;},i;}(R),I={vector:T,raster:A,"raster-dem":C,geojson:O,video:P,image:R,canvas:k};function L(n,r){var i=n.tileID,a=r.tileID;return i.overscaledZ-a.overscaledZ||i.canonical.y-a.canonical.y||i.wrap-a.wrap||i.canonical.x-a.canonical.x;}var N=function(n,r){this.max=n,this.onRemove=r,this.reset();};N.prototype.reset=function(){for(var n in this.data)for(var r=0,i=this.data[n];r<i.length;r+=1){var a=i[r];a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value);}return this.data={},this.order=[],this;},N.prototype.add=function(n,r,i){var a=this,o=n.wrapped().key;void 0===this.data[o]&&(this.data[o]=[]);var s={value:r,timeout:void 0};if(void 0!==i&&(s.timeout=setTimeout(function(){a.remove(n,s);},i)),this.data[o].push(s),this.order.push(o),this.order.length>this.max){var l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l);}return this;},N.prototype.has=function(n){return n.wrapped().key in this.data;},N.prototype.getAndRemove=function(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null;},N.prototype._getAndRemoveByKey=function(n){var r=this.data[n].shift();return r.timeout&&clearTimeout(r.timeout),0===this.data[n].length&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),r.value;},N.prototype.getByKey=function(n){var r=this.data[n];return r?r[0].value:null;},N.prototype.get=function(n){return this.has(n)?this.data[n.wrapped().key][0].value:null;},N.prototype.remove=function(n,r){if(!this.has(n))return this;var i=n.wrapped().key,a=void 0===r?0:this.data[i].indexOf(r),o=this.data[i][a];return this.data[i].splice(a,1),o.timeout&&clearTimeout(o.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(o.value),this.order.splice(this.order.indexOf(i),1),this;},N.prototype.setMaxSize=function(n){for(this.max=n;this.order.length>this.max;){var r=this._getAndRemoveByKey(this.order[0]);r&&this.onRemove(r);}return this;},N.prototype.filter=function(n){var r=[];for(var i in this.data)for(var a=0,o=this.data[i];a<o.length;a+=1){var s=o[a];n(s.value)||r.push(s);}for(var l=0;l<r.length;l+=1){var u=r[l];this.remove(u.value.tileID,u);}};var D=function(n,r,i){this.context=n;var a=n.gl;this.buffer=a.createBuffer(),this.dynamicDraw=!!i,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,r.arrayBuffer,this.dynamicDraw?a.DYNAMIC_DRAW:a.STATIC_DRAW),this.dynamicDraw||delete r.arrayBuffer;};D.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer);},D.prototype.updateData=function(n){var r=this.context.gl;this.context.unbindVAO(),this.bind(),r.bufferSubData(r.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer);},D.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer);};var F={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},B=function(n,r,i,a){this.length=r.length,this.attributes=i,this.itemSize=r.bytesPerElement,this.dynamicDraw=a,this.context=n;var o=n.gl;this.buffer=o.createBuffer(),n.bindVertexBuffer.set(this.buffer),o.bufferData(o.ARRAY_BUFFER,r.arrayBuffer,this.dynamicDraw?o.DYNAMIC_DRAW:o.STATIC_DRAW),this.dynamicDraw||delete r.arrayBuffer;};B.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer);},B.prototype.updateData=function(n){var r=this.context.gl;this.bind(),r.bufferSubData(r.ARRAY_BUFFER,0,n.arrayBuffer);},B.prototype.enableAttributes=function(n,r){for(var i=0;i<this.attributes.length;i++){var a=r.attributes[this.attributes[i].name];void 0!==a&&n.enableVertexAttribArray(a);}},B.prototype.setVertexAttribPointers=function(n,r,i){for(var a=0;a<this.attributes.length;a++){var o=this.attributes[a],s=r.attributes[o.name];void 0!==s&&n.vertexAttribPointer(s,o.components,n[F[o.type]],!1,this.itemSize,o.offset+this.itemSize*(i||0));}},B.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer);};var j=function(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1;};j.prototype.get=function(){return this.current;},j.prototype.set=function(n){},j.prototype.getDefault=function(){return this.default;},j.prototype.setDefault=function(){this.set(this.default);};var z=function(r){function i(){r.apply(this,arguments);}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.getDefault=function(){return n.Color.transparent;},i.prototype.set=function(n){var r=this.current;(n.r!==r.r||n.g!==r.g||n.b!==r.b||n.a!==r.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1);},i;}(j),U=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getDefault=function(){return 1;},r.prototype.set=function(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1);},r;}(j),V=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getDefault=function(){return 0;},r.prototype.set=function(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1);},r;}(j),G=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getDefault=function(){return[!0,!0,!0,!0];},r.prototype.set=function(n){var r=this.current;(n[0]!==r[0]||n[1]!==r[1]||n[2]!==r[2]||n[3]!==r[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1);},r;}(j),H=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getDefault=function(){return!0;},r.prototype.set=function(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1);},r;}(j),W=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getDefault=function(){return 255;},r.prototype.set=function(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1);},r;}(j),X=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255};},r.prototype.set=function(n){var r=this.current;(n.func!==r.func||n.ref!==r.ref||n.mask!==r.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1);},r;}(j),q=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getDefault=function(){var n=this.gl;return[n.KEEP,n.KEEP,n.KEEP];},r.prototype.set=function(n){var r=this.current;(n[0]!==r[0]||n[1]!==r[1]||n[2]!==r[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1);},r;}(j),$=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getDefault=function(){return!1;},r.prototype.set=function(n){if(n!==this.current||this.dirty){var r=this.gl;n?r.enable(r.STENCIL_TEST):r.disable(r.STENCIL_TEST),this.current=n,this.dirty=!1;}},r;}(j),Y=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getDefault=function(){return[0,1];},r.prototype.set=function(n){var r=this.current;(n[0]!==r[0]||n[1]!==r[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1);},r;}(j),Z=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getDefault=function(){return!1;},r.prototype.set=function(n){if(n!==this.current||this.dirty){var r=this.gl;n?r.enable(r.DEPTH_TEST):r.disable(r.DEPTH_TEST),this.current=n,this.dirty=!1;}},r;}(j),K=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getDefault=function(){return this.gl.LESS;},r.prototype.set=function(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1);},r;}(j),Q=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getDefault=function(){return!1;},r.prototype.set=function(n){if(n!==this.current||this.dirty){var r=this.gl;n?r.enable(r.BLEND):r.disable(r.BLEND),this.current=n,this.dirty=!1;}},r;}(j),J=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getDefault=function(){var n=this.gl;return[n.ONE,n.ZERO];},r.prototype.set=function(n){var r=this.current;(n[0]!==r[0]||n[1]!==r[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1);},r;}(j),ee=function(r){function i(){r.apply(this,arguments);}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.getDefault=function(){return n.Color.transparent;},i.prototype.set=function(n){var r=this.current;(n.r!==r.r||n.g!==r.g||n.b!==r.b||n.a!==r.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1);},i;}(j),et=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getDefault=function(){return this.gl.FUNC_ADD;},r.prototype.set=function(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1);},r;}(j),en=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getDefault=function(){return!1;},r.prototype.set=function(n){if(n!==this.current||this.dirty){var r=this.gl;n?r.enable(r.CULL_FACE):r.disable(r.CULL_FACE),this.current=n,this.dirty=!1;}},r;}(j),er=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getDefault=function(){return this.gl.BACK;},r.prototype.set=function(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1);},r;}(j),ei=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getDefault=function(){return this.gl.CCW;},r.prototype.set=function(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1);},r;}(j),ea=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getDefault=function(){return null;},r.prototype.set=function(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1);},r;}(j),eo=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getDefault=function(){return this.gl.TEXTURE0;},r.prototype.set=function(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1);},r;}(j),es=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getDefault=function(){var n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight];},r.prototype.set=function(n){var r=this.current;(n[0]!==r[0]||n[1]!==r[1]||n[2]!==r[2]||n[3]!==r[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1);},r;}(j),el=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getDefault=function(){return null;},r.prototype.set=function(n){if(n!==this.current||this.dirty){var r=this.gl;r.bindFramebuffer(r.FRAMEBUFFER,n),this.current=n,this.dirty=!1;}},r;}(j),eu=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getDefault=function(){return null;},r.prototype.set=function(n){if(n!==this.current||this.dirty){var r=this.gl;r.bindRenderbuffer(r.RENDERBUFFER,n),this.current=n,this.dirty=!1;}},r;}(j),ec=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getDefault=function(){return null;},r.prototype.set=function(n){if(n!==this.current||this.dirty){var r=this.gl;r.bindTexture(r.TEXTURE_2D,n),this.current=n,this.dirty=!1;}},r;}(j),ef=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getDefault=function(){return null;},r.prototype.set=function(n){if(n!==this.current||this.dirty){var r=this.gl;r.bindBuffer(r.ARRAY_BUFFER,n),this.current=n,this.dirty=!1;}},r;}(j),ed=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getDefault=function(){return null;},r.prototype.set=function(n){var r=this.gl;r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1;},r;}(j),eh=function(n){function r(r){n.call(this,r),this.vao=r.extVertexArrayObject;}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getDefault=function(){return null;},r.prototype.set=function(n){this.vao&&(n!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(n),this.current=n,this.dirty=!1);},r;}(j),ep=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getDefault=function(){return 4;},r.prototype.set=function(n){if(n!==this.current||this.dirty){var r=this.gl;r.pixelStorei(r.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1;}},r;}(j),em=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getDefault=function(){return!1;},r.prototype.set=function(n){if(n!==this.current||this.dirty){var r=this.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1;}},r;}(j),eg=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getDefault=function(){return!1;},r.prototype.set=function(n){if(n!==this.current||this.dirty){var r=this.gl;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1;}},r;}(j),ev=function(n){function r(r,i){n.call(this,r),this.context=r,this.parent=i;}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getDefault=function(){return null;},r;}(j),ey=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.setDirty=function(){this.dirty=!0;},r.prototype.set=function(n){if(n!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var r=this.gl;r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,n,0),this.current=n,this.dirty=!1;}},r;}(ev),e_=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.set=function(n){if(n!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var r=this.gl;r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,n),this.current=n,this.dirty=!1;}},r;}(ev),eb=function(n,r,i,a){this.context=n,this.width=r,this.height=i;var o=this.framebuffer=n.gl.createFramebuffer();this.colorAttachment=new ey(n,o),a&&(this.depthAttachment=new e_(n,o));};eb.prototype.destroy=function(){var n=this.context.gl,r=this.colorAttachment.get();if(r&&n.deleteTexture(r),this.depthAttachment){var i=this.depthAttachment.get();i&&n.deleteRenderbuffer(i);}n.deleteFramebuffer(this.framebuffer);};var ex=function(n,r,i){this.func=n,this.mask=r,this.range=i;};ex.ReadOnly=!1,ex.ReadWrite=!0,ex.disabled=new ex(519,ex.ReadOnly,[0,1]);var eE=function(n,r,i,a,o,s){this.test=n,this.ref=r,this.mask=i,this.fail=a,this.depthFail=o,this.pass=s;};eE.disabled=new eE({func:519,mask:0},0,0,7680,7680,7680);var ew=function(n,r,i){this.blendFunction=n,this.blendColor=r,this.mask=i;};ew.disabled=new ew(ew.Replace=[1,0],n.Color.transparent,[!1,!1,!1,!1]),ew.unblended=new ew(ew.Replace,n.Color.transparent,[!0,!0,!0,!0]),ew.alphaBlended=new ew([1,771],n.Color.transparent,[!0,!0,!0,!0]);var eS=function(n,r,i){this.enable=n,this.mode=r,this.frontFace=i;};eS.disabled=new eS(!1,1029,2305),eS.backCCW=new eS(!0,1029,2305);var eT=function(n){this.gl=n,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new z(this),this.clearDepth=new U(this),this.clearStencil=new V(this),this.colorMask=new G(this),this.depthMask=new H(this),this.stencilMask=new W(this),this.stencilFunc=new X(this),this.stencilOp=new q(this),this.stencilTest=new $(this),this.depthRange=new Y(this),this.depthTest=new Z(this),this.depthFunc=new K(this),this.blend=new Q(this),this.blendFunc=new J(this),this.blendColor=new ee(this),this.blendEquation=new et(this),this.cullFace=new en(this),this.cullFaceSide=new er(this),this.frontFace=new ei(this),this.program=new ea(this),this.activeTexture=new eo(this),this.viewport=new es(this),this.bindFramebuffer=new el(this),this.bindRenderbuffer=new eu(this),this.bindTexture=new ec(this),this.bindVertexBuffer=new ef(this),this.bindElementBuffer=new ed(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new eh(this),this.pixelStoreUnpack=new ep(this),this.pixelStoreUnpackPremultiplyAlpha=new em(this),this.pixelStoreUnpackFlipY=new eg(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=n.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(n.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=n.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=n.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE);};eT.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault();},eT.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0;},eT.prototype.createIndexBuffer=function(n,r){return new D(this,n,r);},eT.prototype.createVertexBuffer=function(n,r,i){return new B(this,n,r,i);},eT.prototype.createRenderbuffer=function(n,r,i){var a=this.gl,o=a.createRenderbuffer();return this.bindRenderbuffer.set(o),a.renderbufferStorage(a.RENDERBUFFER,n,r,i),this.bindRenderbuffer.set(null),o;},eT.prototype.createFramebuffer=function(n,r,i){return new eb(this,n,r,i);},eT.prototype.clear=function(n){var r=n.color,i=n.depth,a=this.gl,o=0;r&&(o|=a.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),void 0!==i&&(o|=a.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(i),this.depthMask.set(!0)),a.clear(o);},eT.prototype.setCullFace=function(n){!1===n.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace));},eT.prototype.setDepthMode=function(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1);},eT.prototype.setStencilMode=function(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1);},eT.prototype.setColorMode=function(r){n.deepEqual(r.blendFunction,ew.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask);},eT.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null);};var eA=function(r){function i(i,a,o){var s=this;r.call(this),this.id=i,this.dispatcher=o,this.on("data",function(n){"source"===n.dataType&&"metadata"===n.sourceDataType&&(s._sourceLoaded=!0),s._sourceLoaded&&!s._paused&&"source"===n.dataType&&"content"===n.sourceDataType&&(s.reload(),s.transform&&s.update(s.transform));}),this.on("error",function(){s._sourceErrored=!0;}),this._source=function(r,i,a,o){var s=new I[i.type](r,i,a,o);if(s.id!==r)throw Error("Expected Source id to be "+r+" instead of "+s.id);return n.bindAll(["load","abort","unload","serialize","prepare"],s),s;}(i,a,o,this),this._tiles={},this._cache=new N(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new n.SourceFeatureState;}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.onAdd=function(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(n);},i.prototype.onRemove=function(n){this._source&&this._source.onRemove&&this._source.onRemove(n);},i.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var n in this._tiles){var r=this._tiles[n];if("loaded"!==r.state&&"errored"!==r.state)return!1;}return!0;},i.prototype.getSource=function(){return this._source;},i.prototype.pause=function(){this._paused=!0;},i.prototype.resume=function(){if(this._paused){var n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform);}},i.prototype._loadTile=function(n,r){return this._source.loadTile(n,r);},i.prototype._unloadTile=function(n){if(this._source.unloadTile)return this._source.unloadTile(n,function(){});},i.prototype._abortTile=function(n){if(this._source.abortTile)return this._source.abortTile(n,function(){});},i.prototype.serialize=function(){return this._source.serialize();},i.prototype.prepare=function(n){for(var r in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var i=this._tiles[r];i.upload(n),i.prepare(this.map.style.imageManager);}},i.prototype.getIds=function(){return n.values(this._tiles).map(function(n){return n.tileID;}).sort(eC).map(function(n){return n.key;});},i.prototype.getRenderableIds=function(r){var i=this,a=[];for(var o in this._tiles)this._isIdRenderable(o,r)&&a.push(this._tiles[o]);return r?a.sort(function(r,a){var o=r.tileID,s=a.tileID,l=new n.Point(o.canonical.x,o.canonical.y)._rotate(i.transform.angle),u=new n.Point(s.canonical.x,s.canonical.y)._rotate(i.transform.angle);return o.overscaledZ-s.overscaledZ||u.y-l.y||u.x-l.x;}).map(function(n){return n.tileID.key;}):a.map(function(n){return n.tileID;}).sort(eC).map(function(n){return n.key;});},i.prototype.hasRenderableParent=function(n){var r=this.findLoadedParent(n,0);return!!r&&this._isIdRenderable(r.tileID.key);},i.prototype._isIdRenderable=function(n,r){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(r||!this._tiles[n].holdingForFade());},i.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var n in this._cache.reset(),this._tiles)"errored"!==this._tiles[n].state&&this._reloadTile(n,"reloading");},i.prototype._reloadTile=function(n,r){var i=this._tiles[n];i&&("loading"!==i.state&&(i.state=r),this._loadTile(i,this._tileLoaded.bind(this,i,n,r)));},i.prototype._tileLoaded=function(r,i,a,o){if(o)return r.state="errored",void(404!==o.status?this._source.fire(new n.ErrorEvent(o,{tile:r})):this.update(this.transform));r.timeAdded=n.browser.now(),"expired"===a&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(i,r),"raster-dem"===this.getSource().type&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),this._source.fire(new n.Event("data",{dataType:"source",tile:r,coord:r.tileID}));},i.prototype._backfillDEM=function(n){for(var r=this.getRenderableIds(),i=0;i<r.length;i++){var a=r[i];if(n.neighboringTiles&&n.neighboringTiles[a]){var o=this.getTileByID(a);s(n,o),s(o,n);}}function s(n,r){n.needsHillshadePrepare=!0;var i=r.tileID.canonical.x-n.tileID.canonical.x,a=r.tileID.canonical.y-n.tileID.canonical.y,o=Math.pow(2,n.tileID.canonical.z),s=r.tileID.key;0===i&&0===a||Math.abs(a)>1||(Math.abs(i)>1&&(1===Math.abs(i+o)?i+=o:1===Math.abs(i-o)&&(i-=o)),r.dem&&n.dem&&(n.dem.backfillBorder(r.dem,i,a),n.neighboringTiles&&n.neighboringTiles[s]&&(n.neighboringTiles[s].backfilled=!0)));}},i.prototype.getTile=function(n){return this.getTileByID(n.key);},i.prototype.getTileByID=function(n){return this._tiles[n];},i.prototype._retainLoadedChildren=function(n,r,i,a){for(var o in this._tiles){var s=this._tiles[o];if(!(a[o]||!s.hasData()||s.tileID.overscaledZ<=r||s.tileID.overscaledZ>i)){for(var l=s.tileID;s&&s.tileID.overscaledZ>r+1;){var u=s.tileID.scaledTo(s.tileID.overscaledZ-1);(s=this._tiles[u.key])&&s.hasData()&&(l=u);}for(var c=l;c.overscaledZ>r;)if(n[(c=c.scaledTo(c.overscaledZ-1)).key]){a[l.key]=l;break;}}}},i.prototype.findLoadedParent=function(n,r){if(n.key in this._loadedParentTiles){var i=this._loadedParentTiles[n.key];return i&&i.tileID.overscaledZ>=r?i:null;}for(var a=n.overscaledZ-1;a>=r;a--){var o=n.scaledTo(a),s=this._getLoadedTile(o);if(s)return s;}},i.prototype._getLoadedTile=function(n){var r=this._tiles[n.key];return r&&r.hasData()?r:this._cache.getByKey(n.wrapped().key);},i.prototype.updateCacheSize=function(n){var r=Math.floor((Math.ceil(n.width/this._source.tileSize)+1)*(Math.ceil(n.height/this._source.tileSize)+1)*5),i="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(i);},i.prototype.handleWrapJump=function(n){var r=Math.round((n-(void 0===this._prevLng?n:this._prevLng))/360);if(this._prevLng=n,r){var i={};for(var a in this._tiles){var o=this._tiles[a];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+r),i[o.tileID.key]=o;}for(var s in this._tiles=i,this._timers)clearTimeout(this._timers[s]),delete this._timers[s];for(var l in this._tiles)this._setTileReloadTimer(l,this._tiles[l]);}},i.prototype.update=function(r){var a=this;if(this.transform=r,this._sourceLoaded&&!this._paused){this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?o=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(r){return new n.OverscaledTileID(r.canonical.z,r.wrap,r.canonical.z,r.canonical.x,r.canonical.y);}):(o=r.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(o=o.filter(function(n){return a._source.hasTile(n);}))):o=[];var o,s=r.coveringZoomLevel(this._source),l=Math.max(s-i.maxOverzooming,this._source.minzoom),u=Math.max(s+i.maxUnderzooming,this._source.minzoom),c=this._updateRetainedTiles(o,s);if(eO(this._source.type)){for(var f={},d={},h=0,p=Object.keys(c);h<p.length;h+=1){var m=p[h],g=c[m],v=this._tiles[m];if(v&&!(v.fadeEndTime&&v.fadeEndTime<=n.browser.now())){var y=this.findLoadedParent(g,l);y&&(this._addTile(y.tileID),f[y.tileID.key]=y.tileID),d[m]=g;}}for(var _ in this._retainLoadedChildren(d,s,u,c),f)c[_]||(this._coveredTiles[_]=!0,c[_]=f[_]);}for(var b in c)this._tiles[b].clearFadeHold();for(var x=0,E=n.keysDifference(this._tiles,c);x<E.length;x+=1){var w=E[x],S=this._tiles[w];S.hasSymbolBuckets&&!S.holdingForFade()?S.setHoldDuration(this.map._fadeDuration):S.hasSymbolBuckets&&!S.symbolFadeFinished()||this._removeTile(w);}this._updateLoadedParentTileCache();}},i.prototype.releaseSymbolFadeTiles=function(){for(var n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(n);},i.prototype._updateRetainedTiles=function(n,r){for(var a={},o={},s=Math.max(r-i.maxOverzooming,this._source.minzoom),l=Math.max(r+i.maxUnderzooming,this._source.minzoom),u={},c=0;c<n.length;c+=1){var f=n[c],d=this._addTile(f);a[f.key]=f,d.hasData()||r<this._source.maxzoom&&(u[f.key]=f);}this._retainLoadedChildren(u,r,l,a);for(var h=0;h<n.length;h+=1){var p=n[h],m=this._tiles[p.key];if(!m.hasData()){if(r+1>this._source.maxzoom){var g=p.children(this._source.maxzoom)[0],v=this.getTile(g);if(v&&v.hasData()){a[g.key]=g;continue;}}else{var y=p.children(this._source.maxzoom);if(a[y[0].key]&&a[y[1].key]&&a[y[2].key]&&a[y[3].key])continue;}for(var _=m.wasRequested(),b=p.overscaledZ-1;b>=s;--b){var x=p.scaledTo(b);if(o[x.key]||(o[x.key]=!0,(m=this.getTile(x))||!_||(m=this._addTile(x)),m&&(a[x.key]=x,_=m.wasRequested(),m.hasData())))break;}}}return a;},i.prototype._updateLoadedParentTileCache=function(){for(var n in this._loadedParentTiles={},this._tiles){for(var r=[],i=void 0,a=this._tiles[n].tileID;a.overscaledZ>0;){if(a.key in this._loadedParentTiles){i=this._loadedParentTiles[a.key];break;}r.push(a.key);var o=a.scaledTo(a.overscaledZ-1);if(i=this._getLoadedTile(o))break;a=o;}for(var s=0;s<r.length;s+=1)this._loadedParentTiles[r[s]]=i;}},i.prototype._addTile=function(r){var i=this._tiles[r.key];if(i)return i;(i=this._cache.getAndRemove(r))&&(this._setTileReloadTimer(r.key,i),i.tileID=r,this._state.initializeTileState(i,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,i)));var a=!!i;return a||(i=new n.Tile(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(i,this._tileLoaded.bind(this,i,r.key,i.state))),i?(i.uses++,this._tiles[r.key]=i,a||this._source.fire(new n.Event("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i):null;},i.prototype._setTileReloadTimer=function(n,r){var i=this;n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);var a=r.getExpiryTimeout();a&&(this._timers[n]=setTimeout(function(){i._reloadTile(n,"expired"),delete i._timers[n];},a));},i.prototype._removeTile=function(n){var r=this._tiles[n];r&&(r.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),r.uses>0||(r.hasData()&&"reloading"!==r.state?this._cache.add(r.tileID,r,r.getExpiryTimeout()):(r.aborted=!0,this._abortTile(r),this._unloadTile(r))));},i.prototype.clearTiles=function(){for(var n in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(n);this._cache.reset();},i.prototype.tilesIn=function(r,i,a){var o=this,s=[],l=this.transform;if(!l)return s;for(var u=a?l.getCameraQueryGeometry(r):r,c=r.map(function(n){return l.pointCoordinate(n);}),f=u.map(function(n){return l.pointCoordinate(n);}),d=this.getIds(),h=1/0,p=1/0,m=-1/0,g=-1/0,v=0;v<f.length;v+=1){var y=f[v];h=Math.min(h,y.x),p=Math.min(p,y.y),m=Math.max(m,y.x),g=Math.max(g,y.y);}for(var _=0;_<d.length;_++)(function(r){var a=o._tiles[d[r]];if(!a.holdingForFade()){var u=a.tileID,v=Math.pow(2,l.zoom-a.tileID.overscaledZ),y=i*a.queryPadding*n.EXTENT/a.tileSize/v,_=[u.getTilePoint(new n.MercatorCoordinate(h,p)),u.getTilePoint(new n.MercatorCoordinate(m,g))];if(_[0].x-y<n.EXTENT&&_[0].y-y<n.EXTENT&&_[1].x+y>=0&&_[1].y+y>=0){var b=c.map(function(n){return u.getTilePoint(n);}),x=f.map(function(n){return u.getTilePoint(n);});s.push({tile:a,tileID:u,queryGeometry:b,cameraQueryGeometry:x,scale:v});}}})(_);return s;},i.prototype.getVisibleCoordinates=function(n){for(var r=this,i=this.getRenderableIds(n).map(function(n){return r._tiles[n].tileID;}),a=0;a<i.length;a+=1){var o=i[a];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped());}return i;},i.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(eO(this._source.type))for(var r in this._tiles){var i=this._tiles[r];if(void 0!==i.fadeEndTime&&i.fadeEndTime>=n.browser.now())return!0;}return!1;},i.prototype.setFeatureState=function(n,r,i){this._state.updateState(n=n||"_geojsonTileLayer",r,i);},i.prototype.removeFeatureState=function(n,r,i){this._state.removeFeatureState(n=n||"_geojsonTileLayer",r,i);},i.prototype.getFeatureState=function(n,r){return this._state.getState(n=n||"_geojsonTileLayer",r);},i.prototype.setDependencies=function(n,r,i){var a=this._tiles[n];a&&a.setDependencies(r,i);},i.prototype.reloadTilesForDependencies=function(n,r){for(var i in this._tiles)this._tiles[i].hasDependency(n,r)&&this._reloadTile(i,"reloading");this._cache.filter(function(i){return!i.hasDependency(n,r);});},i;}(n.Evented);function eC(n,r){var i=Math.abs(2*n.wrap)-+(n.wrap<0),a=Math.abs(2*r.wrap)-+(r.wrap<0);return n.overscaledZ-r.overscaledZ||a-i||r.canonical.y-n.canonical.y||r.canonical.x-n.canonical.x;}function eO(n){return"raster"===n||"image"===n||"video"===n;}function eM(){return new n.window.Worker(rh.workerUrl);}eA.maxOverzooming=10,eA.maxUnderzooming=3;var eR="mapboxgl_preloaded_worker_pool",eP=function(){this.active={};};eP.prototype.acquire=function(n){if(!this.workers)for(this.workers=[];this.workers.length<eP.workerCount;)this.workers.push(new eM);return this.active[n]=!0,this.workers.slice();},eP.prototype.release=function(n){delete this.active[n],0===this.numActive()&&(this.workers.forEach(function(n){n.terminate();}),this.workers=null);},eP.prototype.isPreloaded=function(){return!!this.active[eR];},eP.prototype.numActive=function(){return Object.keys(this.active).length;};var ek,eI=Math.floor(n.browser.hardwareConcurrency/2);function eL(){return ek||(ek=new eP),ek;}function eN(r){r=r.slice();for(var i=Object.create(null),a=0;a<r.length;a++)i[r[a].id]=r[a];for(var o=0;o<r.length;o++)"ref"in r[o]&&(r[o]=function(r,i){var a={};for(var o in r)"ref"!==o&&(a[o]=r[o]);return n.refProperties.forEach(function(n){n in i&&(a[n]=i[n]);}),a;}(r[o],i[r[o].ref]));return r;}eP.workerCount=Math.max(Math.min(eI,6),1);var eD={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function eF(n,r,i){i.push({command:eD.addSource,args:[n,r[n]]});}function eB(n,r,i){r.push({command:eD.removeSource,args:[n]}),i[n]=!0;}function ej(r,i,a,o,s,l){var u;for(u in i=i||{},r=r||{})r.hasOwnProperty(u)&&(n.deepEqual(r[u],i[u])||a.push({command:l,args:[o,u,i[u],s]}));for(u in i)i.hasOwnProperty(u)&&!r.hasOwnProperty(u)&&(n.deepEqual(r[u],i[u])||a.push({command:l,args:[o,u,i[u],s]}));}function ez(n){return n.id;}function eU(n,r){return n[r.id]=r,n;}var eV=function(n,r){this.reset(n,r);};eV.prototype.reset=function(n,r){this.points=n||[],this._distances=[0];for(var i=1;i<this.points.length;i++)this._distances[i]=this._distances[i-1]+this.points[i].dist(this.points[i-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(r||0,.5*this.length),this.paddedLength=this.length-2*this.padding;},eV.prototype.lerp=function(r){if(1===this.points.length)return this.points[0];r=n.clamp(r,0,1);for(var i=1,a=this._distances[i],o=r*this.paddedLength+this.padding;a<o&&i<this._distances.length;)a=this._distances[++i];var s=i-1,l=this._distances[s],u=a-l,c=u>0?(o-l)/u:0;return this.points[s].mult(1-c).add(this.points[i].mult(c));};var eG=function(n,r,i){var a=this.boxCells=[],o=this.circleCells=[];this.xCellCount=Math.ceil(n/i),this.yCellCount=Math.ceil(r/i);for(var s=0;s<this.xCellCount*this.yCellCount;s++)a.push([]),o.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=r,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/r,this.boxUid=0,this.circleUid=0;};function eH(r,i,a,o,s){var l=n.create();return i?(n.scale(l,l,[1/s,1/s,1]),a||n.rotateZ(l,l,o.angle)):n.multiply(l,o.labelPlaneMatrix,r),l;}function eW(r,i,a,o,s){if(i){var l=n.clone(r);return n.scale(l,l,[s,s,1]),a||n.rotateZ(l,l,-o.angle),l;}return o.glCoordMatrix;}function eX(r,i){var a=[r.x,r.y,0,1];e1(a,a,i);var o=a[3];return{point:new n.Point(a[0]/o,a[1]/o),signedDistanceFromCamera:o};}function eq(n,r){return .5+n/r*.5;}function e$(n,r,i,a,o,s,l,u,c,f,d){var h=u.glyphStartIndex+u.numGlyphs,p=u.lineStartIndex,m=u.lineStartIndex+u.lineLength,g=r.getoffsetX(u.glyphStartIndex),v=r.getoffsetX(h-1),y=eQ(n*g,i,a,o,s,l,u.segment,p,m,c,f,d);if(!y)return null;var _=eQ(n*v,i,a,o,s,l,u.segment,p,m,c,f,d);return _?{first:y,last:_}:null;}function eY(r,i,a,o){return r===n.WritingMode.horizontal&&Math.abs(a.y-i.y)>Math.abs(a.x-i.x)*o?{useVertical:!0}:(r===n.WritingMode.vertical?i.y<a.y:i.x>a.x)?{needsFlipping:!0}:null;}function eZ(r,i,a,o,s,l,u,c,f,d,h,p,m,g){var v,y=i/24,_=r.lineOffsetX*y,b=r.lineOffsetY*y;if(r.numGlyphs>1){var x=r.glyphStartIndex+r.numGlyphs,E=r.lineStartIndex,w=r.lineStartIndex+r.lineLength,S=e$(y,c,_,b,a,h,p,r,f,l,m);if(!S)return{notEnoughRoom:!0};var T=eX(S.first.point,u).point,A=eX(S.last.point,u).point;if(o&&!a){var C=eY(r.writingMode,T,A,g);if(C)return C;}v=[S.first];for(var O=r.glyphStartIndex+1;O<x-1;O++)v.push(eQ(y*c.getoffsetX(O),_,b,a,h,p,r.segment,E,w,f,l,m));v.push(S.last);}else{if(o&&!a){var M=eX(p,s).point,R=r.lineStartIndex+r.segment+1,P=new n.Point(f.getx(R),f.gety(R)),k=eX(P,s),I=k.signedDistanceFromCamera>0?k.point:eK(p,P,M,1,s),L=eY(r.writingMode,M,I,g);if(L)return L;}var N=eQ(y*c.getoffsetX(r.glyphStartIndex),_,b,a,h,p,r.segment,r.lineStartIndex,r.lineStartIndex+r.lineLength,f,l,m);if(!N)return{notEnoughRoom:!0};v=[N];}for(var D=0,F=v;D<F.length;D+=1){var B=F[D];n.addDynamicAttributes(d,B.point,B.angle);}return{};}function eK(n,r,i,a,o){var s=eX(n.add(n.sub(r)._unit()),o).point,l=i.sub(s);return i.add(l._mult(a/l.mag()));}function eQ(r,i,a,o,s,l,u,c,f,d,h,p){var m=o?r-i:r+i,g=m>0?1:-1,v=0;o&&(g*=-1,v=Math.PI),g<0&&(v+=Math.PI);for(var y=g>0?c+u:c+u+1,_=s,b=s,x=0,E=0,w=Math.abs(m),S=[];x+E<=w;){if((y+=g)<c||y>=f)return null;if(b=_,S.push(_),void 0===(_=p[y])){var T=new n.Point(d.getx(y),d.gety(y)),A=eX(T,h);if(A.signedDistanceFromCamera>0)_=p[y]=A.point;else{var C=y-g;_=eK(0===x?l:new n.Point(d.getx(C),d.gety(C)),T,b,w-x+1,h);}}x+=E,E=b.dist(_);}var O=(w-x)/E,M=_.sub(b),R=M.mult(O)._add(b);R._add(M._unit()._perp()._mult(a*g));var P=v+Math.atan2(_.y-b.y,_.x-b.x);return S.push(R),{point:R,angle:P,path:S};}eG.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length;},eG.prototype.insert=function(n,r,i,a,o){this._forEachCell(r,i,a,o,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(r),this.bboxes.push(i),this.bboxes.push(a),this.bboxes.push(o);},eG.prototype.insertCircle=function(n,r,i,a){this._forEachCell(r-a,i-a,r+a,i+a,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(r),this.circles.push(i),this.circles.push(a);},eG.prototype._insertBoxCell=function(n,r,i,a,o,s){this.boxCells[o].push(s);},eG.prototype._insertCircleCell=function(n,r,i,a,o,s){this.circleCells[o].push(s);},eG.prototype._query=function(n,r,i,a,o,s){if(i<0||n>this.width||a<0||r>this.height)return!o&&[];var l=[];if(n<=0&&r<=0&&this.width<=i&&this.height<=a){if(o)return!0;for(var u=0;u<this.boxKeys.length;u++)l.push({key:this.boxKeys[u],x1:this.bboxes[4*u],y1:this.bboxes[4*u+1],x2:this.bboxes[4*u+2],y2:this.bboxes[4*u+3]});for(var c=0;c<this.circleKeys.length;c++){var f=this.circles[3*c],d=this.circles[3*c+1],h=this.circles[3*c+2];l.push({key:this.circleKeys[c],x1:f-h,y1:d-h,x2:f+h,y2:d+h});}return s?l.filter(s):l;}return this._forEachCell(n,r,i,a,this._queryCell,l,{hitTest:o,seenUids:{box:{},circle:{}}},s),o?l.length>0:l;},eG.prototype._queryCircle=function(n,r,i,a,o){var s=n-i,l=n+i,u=r-i,c=r+i;if(l<0||s>this.width||c<0||u>this.height)return!a&&[];var f=[];return this._forEachCell(s,u,l,c,this._queryCellCircle,f,{hitTest:a,circle:{x:n,y:r,radius:i},seenUids:{box:{},circle:{}}},o),a?f.length>0:f;},eG.prototype.query=function(n,r,i,a,o){return this._query(n,r,i,a,!1,o);},eG.prototype.hitTest=function(n,r,i,a,o){return this._query(n,r,i,a,!0,o);},eG.prototype.hitTestCircle=function(n,r,i,a){return this._queryCircle(n,r,i,!0,a);},eG.prototype._queryCell=function(n,r,i,a,o,s,l,u){var c=l.seenUids,f=this.boxCells[o];if(null!==f)for(var d=this.bboxes,h=0;h<f.length;h+=1){var p=f[h];if(!c.box[p]){c.box[p]=!0;var m=4*p;if(n<=d[m+2]&&r<=d[m+3]&&i>=d[m+0]&&a>=d[m+1]&&(!u||u(this.boxKeys[p]))){if(l.hitTest)return s.push(!0),!0;s.push({key:this.boxKeys[p],x1:d[m],y1:d[m+1],x2:d[m+2],y2:d[m+3]});}}}var g=this.circleCells[o];if(null!==g)for(var v=this.circles,y=0;y<g.length;y+=1){var _=g[y];if(!c.circle[_]){c.circle[_]=!0;var b=3*_;if(this._circleAndRectCollide(v[b],v[b+1],v[b+2],n,r,i,a)&&(!u||u(this.circleKeys[_]))){if(l.hitTest)return s.push(!0),!0;var x=v[b],E=v[b+1],w=v[b+2];s.push({key:this.circleKeys[_],x1:x-w,y1:E-w,x2:x+w,y2:E+w});}}}},eG.prototype._queryCellCircle=function(n,r,i,a,o,s,l,u){var c=l.circle,f=l.seenUids,d=this.boxCells[o];if(null!==d)for(var h=this.bboxes,p=0;p<d.length;p+=1){var m=d[p];if(!f.box[m]){f.box[m]=!0;var g=4*m;if(this._circleAndRectCollide(c.x,c.y,c.radius,h[g+0],h[g+1],h[g+2],h[g+3])&&(!u||u(this.boxKeys[m])))return s.push(!0),!0;}}var v=this.circleCells[o];if(null!==v)for(var y=this.circles,_=0;_<v.length;_+=1){var b=v[_];if(!f.circle[b]){f.circle[b]=!0;var x=3*b;if(this._circlesCollide(y[x],y[x+1],y[x+2],c.x,c.y,c.radius)&&(!u||u(this.circleKeys[b])))return s.push(!0),!0;}}},eG.prototype._forEachCell=function(n,r,i,a,o,s,l,u){for(var c=this._convertToXCellCoord(n),f=this._convertToYCellCoord(r),d=this._convertToXCellCoord(i),h=this._convertToYCellCoord(a),p=c;p<=d;p++)for(var m=f;m<=h;m++)if(o.call(this,n,r,i,a,this.xCellCount*m+p,s,l,u))return;},eG.prototype._convertToXCellCoord=function(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)));},eG.prototype._convertToYCellCoord=function(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)));},eG.prototype._circlesCollide=function(n,r,i,a,o,s){var l=a-n,u=o-r,c=i+s;return c*c>l*l+u*u;},eG.prototype._circleAndRectCollide=function(n,r,i,a,o,s,l){var u=(s-a)/2,c=Math.abs(n-(a+u));if(c>u+i)return!1;var f=(l-o)/2,d=Math.abs(r-(o+f));if(d>f+i)return!1;if(c<=u||d<=f)return!0;var h=c-u,p=d-f;return h*h+p*p<=i*i;};var eJ=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function e0(n,r){for(var i=0;i<n;i++){var a=r.length;r.resize(a+4),r.float32.set(eJ,3*a);}}function e1(n,r,i){var a=r[0],o=r[1];return n[0]=i[0]*a+i[4]*o+i[12],n[1]=i[1]*a+i[5]*o+i[13],n[3]=i[3]*a+i[7]*o+i[15],n;}var e2=function(n,r,i){void 0===r&&(r=new eG(n.width+200,n.height+200,25)),void 0===i&&(i=new eG(n.width+200,n.height+200,25)),this.transform=n,this.grid=r,this.ignoredGrid=i,this.pitchfactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+100,this.screenBottomBoundary=n.height+100,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200;};function e3(r,i,a){return i*(n.EXTENT/(r.tileSize*Math.pow(2,a-r.tileID.overscaledZ)));}e2.prototype.placeCollisionBox=function(n,r,i,a,o){var s=this.projectAndGetPerspectiveRatio(a,n.anchorPointX,n.anchorPointY),l=i*s.perspectiveRatio,u=n.x1*l+s.point.x,c=n.y1*l+s.point.y,f=n.x2*l+s.point.x,d=n.y2*l+s.point.y;return!this.isInsideGrid(u,c,f,d)||!r&&this.grid.hitTest(u,c,f,d,o)?{box:[],offscreen:!1}:{box:[u,c,f,d],offscreen:this.isOffscreen(u,c,f,d)};},e2.prototype.placeCollisionCircles=function(r,i,a,o,s,l,u,c,f,d,h,p,m){var g=[],v=new n.Point(i.anchorX,i.anchorY),y=eX(v,l),_=eq(this.transform.cameraToCenterDistance,y.signedDistanceFromCamera),b=(d?s/_:s*_)/n.ONE_EM,x=eX(v,u).point,E=e$(b,o,i.lineOffsetX*b,i.lineOffsetY*b,!1,x,v,i,a,u,{}),w=!1,S=!1,T=!0;if(E){for(var A,C=.5*p*_+m,O=new n.Point(-100,-100),M=new n.Point(this.screenRightBoundary,this.screenBottomBoundary),R=new eV,P=E.first,k=E.last,I=[],L=P.path.length-1;L>=1;L--)I.push(P.path[L]);for(var N=1;N<k.path.length;N++)I.push(k.path[N]);var D=2.5*C;if(c){var F=I.map(function(n){return eX(n,c);});I=F.some(function(n){return n.signedDistanceFromCamera<=0;})?[]:F.map(function(n){return n.point;});}var B=[];if(I.length>0){for(var j=I[0].clone(),z=I[0].clone(),U=1;U<I.length;U++)j.x=Math.min(j.x,I[U].x),j.y=Math.min(j.y,I[U].y),z.x=Math.max(z.x,I[U].x),z.y=Math.max(z.y,I[U].y);B=j.x>=O.x&&z.x<=M.x&&j.y>=O.y&&z.y<=M.y?[I]:z.x<O.x||j.x>M.x||z.y<O.y||j.y>M.y?[]:n.clipLine([I],O.x,O.y,M.x,M.y);}for(var V=0,G=B;V<G.length;V+=1){R.reset(G[V],.25*C),A=R.length<=.5*C?1:Math.ceil(R.paddedLength/D)+1;for(var H=0;H<A;H++){var W=H/Math.max(A-1,1),X=R.lerp(W),q=X.x+100,$=X.y+100;g.push(q,$,C,0);var Y=q-C,Z=$-C,K=q+C,Q=$+C;if(T=T&&this.isOffscreen(Y,Z,K,Q),S=S||this.isInsideGrid(Y,Z,K,Q),!r&&this.grid.hitTestCircle(q,$,C,h)&&(w=!0,!f))return{circles:[],offscreen:!1,collisionDetected:w};}}}return{circles:(f||!w)&&S?g:[],offscreen:T,collisionDetected:w};},e2.prototype.queryRenderedSymbols=function(r){if(0===r.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var i=[],a=1/0,o=1/0,s=-1/0,l=-1/0,u=0;u<r.length;u+=1){var c=r[u],f=new n.Point(c.x+100,c.y+100);a=Math.min(a,f.x),o=Math.min(o,f.y),s=Math.max(s,f.x),l=Math.max(l,f.y),i.push(f);}for(var d={},h={},p=0,m=this.grid.query(a,o,s,l).concat(this.ignoredGrid.query(a,o,s,l));p<m.length;p+=1){var g=m[p],v=g.key;if(void 0===d[v.bucketInstanceId]&&(d[v.bucketInstanceId]={}),!d[v.bucketInstanceId][v.featureIndex]){var y=[new n.Point(g.x1,g.y1),new n.Point(g.x2,g.y1),new n.Point(g.x2,g.y2),new n.Point(g.x1,g.y2)];n.polygonIntersectsPolygon(i,y)&&(d[v.bucketInstanceId][v.featureIndex]=!0,void 0===h[v.bucketInstanceId]&&(h[v.bucketInstanceId]=[]),h[v.bucketInstanceId].push(v.featureIndex));}}return h;},e2.prototype.insertCollisionBox=function(n,r,i,a,o){(r?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:a,collisionGroupID:o},n[0],n[1],n[2],n[3]);},e2.prototype.insertCollisionCircles=function(n,r,i,a,o){for(var s=r?this.ignoredGrid:this.grid,l={bucketInstanceId:i,featureIndex:a,collisionGroupID:o},u=0;u<n.length;u+=4)s.insertCircle(l,n[u],n[u+1],n[u+2]);},e2.prototype.projectAndGetPerspectiveRatio=function(r,i,a){var o=[i,a,0,1];return e1(o,o,r),{point:new n.Point((o[0]/o[3]+1)/2*this.transform.width+100,(-o[1]/o[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/o[3]*.5};},e2.prototype.isOffscreen=function(n,r,i,a){return i<100||n>=this.screenRightBoundary||a<100||r>this.screenBottomBoundary;},e2.prototype.isInsideGrid=function(n,r,i,a){return i>=0&&n<this.gridRightBoundary&&a>=0&&r<this.gridBottomBoundary;},e2.prototype.getViewportMatrix=function(){var r=n.identity([]);return n.translate(r,r,[-100,-100,0]),r;};var e4=function(n,r,i,a){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?r:-r))):a&&i?1:0,this.placed=i;};e4.prototype.isHidden=function(){return 0===this.opacity&&!this.placed;};var e5=function(n,r,i,a,o){this.text=new e4(n?n.text:null,r,i,o),this.icon=new e4(n?n.icon:null,r,a,o);};e5.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden();};var e6=function(n,r,i){this.text=n,this.icon=r,this.skipFade=i;},e8=function(){this.invProjMatrix=n.create(),this.viewportMatrix=n.create(),this.circles=[];},e7=function(n,r,i,a,o){this.bucketInstanceId=n,this.featureIndex=r,this.sourceLayerIndex=i,this.bucketIndex=a,this.tileID=o;},e9=function(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={};};function te(r,i,a,o,s){var l=n.getAnchorAlignment(r),u=-(l.horizontalAlign-.5)*i,c=-(l.verticalAlign-.5)*a,f=n.evaluateVariableOffset(r,o);return new n.Point(u+f[0]*s,c+f[1]*s);}function tt(r,i,a,o,s,l){var u=r.x1,c=r.x2,f=r.y1,d=r.y2,h=r.anchorPointX,p=r.anchorPointY,m=new n.Point(i,a);return o&&m._rotate(s?l:-l),{x1:u+m.x,y1:f+m.y,x2:c+m.x,y2:d+m.y,anchorPointX:h,anchorPointY:p};}e9.prototype.get=function(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){var r=++this.maxGroupID;this.collisionGroups[n]={ID:r,predicate:function(n){return n.collisionGroupID===r;}};}return this.collisionGroups[n];};var tn=function(n,r,i,a){this.transform=n.clone(),this.collisionIndex=new e2(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=r,this.retainedQueryData={},this.collisionGroups=new e9(i),this.collisionCircleArrays={},this.prevPlacement=a,a&&(a.prevPlacement=void 0),this.placedOrientations={};};function tr(n,r,i,a,o){n.emplaceBack(r?1:0,i?1:0,a||0,o||0),n.emplaceBack(r?1:0,i?1:0,a||0,o||0),n.emplaceBack(r?1:0,i?1:0,a||0,o||0),n.emplaceBack(r?1:0,i?1:0,a||0,o||0);}function ti(n){if(0===n.opacity&&!n.placed)return 0;if(1===n.opacity&&n.placed)return 4294967295;var r=n.placed?1:0,i=Math.floor(127*n.opacity);return 33554432*i+16777216*r+131072*i+65536*r+512*i+256*r+2*i+r;}tn.prototype.getBucketParts=function(r,i,a,o){var s=a.getBucket(i),l=a.latestFeatureIndex;if(s&&l&&i.id===s.layerIds[0]){var u=a.collisionBoxArray,c=s.layers[0].layout,f=Math.pow(2,this.transform.zoom-a.tileID.overscaledZ),d=a.tileSize/n.EXTENT,h=this.transform.calculatePosMatrix(a.tileID.toUnwrapped()),p="map"===c.get("text-pitch-alignment"),m="map"===c.get("text-rotation-alignment"),g=e3(a,1,this.transform.zoom),v=eH(h,p,m,this.transform,g),y=null;if(p){var _=eW(h,p,m,this.transform,g);y=n.multiply([],this.transform.labelPlaneMatrix,_);}this.retainedQueryData[s.bucketInstanceId]=new e7(s.bucketInstanceId,l,s.sourceLayerIndex,s.index,a.tileID);var b={bucket:s,layout:c,posMatrix:h,textLabelPlaneMatrix:v,labelToScreenMatrix:y,scale:f,textPixelRatio:d,holdingForFade:a.holdingForFade(),collisionBoxArray:u,partiallyEvaluatedTextSize:n.evaluateSizeForZoom(s.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(s.sourceID)};if(o)for(var x=0,E=s.sortKeyRanges;x<E.length;x+=1){var w=E[x];r.push({sortKey:w.sortKey,symbolInstanceStart:w.symbolInstanceStart,symbolInstanceEnd:w.symbolInstanceEnd,parameters:b});}else r.push({symbolInstanceStart:0,symbolInstanceEnd:s.symbolInstances.length,parameters:b});}},tn.prototype.attemptAnchorPlacement=function(n,r,i,a,o,s,l,u,c,f,d,h,p,m,g){var v,y=[h.textOffset0,h.textOffset1],_=te(n,i,a,y,o),b=this.collisionIndex.placeCollisionBox(tt(r,_.x,_.y,s,l,this.transform.angle),d,u,c,f.predicate);if(!g||0!==this.collisionIndex.placeCollisionBox(tt(g,_.x,_.y,s,l,this.transform.angle),d,u,c,f.predicate).box.length)return b.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(v=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:y,width:i,height:a,anchor:n,textBoxScale:o,prevAnchor:v},this.markUsedJustification(p,n,h,m),p.allowVerticalPlacement&&(this.markUsedOrientation(p,m,h),this.placedOrientations[h.crossTileID]=m),{shift:_,placedGlyphBoxes:b}):void 0;},tn.prototype.placeLayerBucketPart=function(r,i,a){var o=this,s=r.parameters,l=s.bucket,u=s.layout,c=s.posMatrix,f=s.textLabelPlaneMatrix,d=s.labelToScreenMatrix,h=s.textPixelRatio,p=s.holdingForFade,m=s.collisionBoxArray,g=s.partiallyEvaluatedTextSize,v=s.collisionGroup,y=u.get("text-optional"),_=u.get("icon-optional"),b=u.get("text-allow-overlap"),x=u.get("icon-allow-overlap"),E="map"===u.get("text-rotation-alignment"),w="map"===u.get("text-pitch-alignment"),S="none"!==u.get("icon-text-fit"),T="viewport-y"===u.get("symbol-z-order"),A=b&&(x||!l.hasIconData()||_),C=x&&(b||!l.hasTextData()||y);!l.collisionArrays&&m&&l.deserializeCollisionBoxes(m);var O=function(r,s){if(!i[r.crossTileID]){if(p)o.placements[r.crossTileID]=new e6(!1,!1,!1);else{var m,T=!1,O=!1,M=!0,R=null,P={box:null,offscreen:null},k={box:null,offscreen:null},I=null,L=null,N=0,D=0,F=0;s.textFeatureIndex?N=s.textFeatureIndex:r.useRuntimeCollisionCircles&&(N=r.featureIndex),s.verticalTextFeatureIndex&&(D=s.verticalTextFeatureIndex);var B=s.textBox;if(B){var j=function(i){var a=n.WritingMode.horizontal;if(l.allowVerticalPlacement&&!i&&o.prevPlacement){var s=o.prevPlacement.placedOrientations[r.crossTileID];s&&(o.placedOrientations[r.crossTileID]=s,o.markUsedOrientation(l,a=s,r));}return a;},z=function(i,a){if(l.allowVerticalPlacement&&r.numVerticalGlyphVertices>0&&s.verticalTextBox)for(var o=0,u=l.writingModes;o<u.length&&(u[o]===n.WritingMode.vertical?k=P=a():P=i(),!(P&&P.box&&P.box.length));o+=1);else P=i();};if(u.get("text-variable-anchor")){var U=u.get("text-variable-anchor");if(o.prevPlacement&&o.prevPlacement.variableOffsets[r.crossTileID]){var V=o.prevPlacement.variableOffsets[r.crossTileID];U.indexOf(V.anchor)>0&&(U=U.filter(function(n){return n!==V.anchor;})).unshift(V.anchor);}var G=function(n,i,a){for(var s=n.x2-n.x1,u=n.y2-n.y1,f=r.textBoxScale,d=S&&!x?i:null,p={box:[],offscreen:!1},m=b?2*U.length:U.length,g=0;g<m;++g){var y=o.attemptAnchorPlacement(U[g%U.length],n,s,u,f,E,w,h,c,v,g>=U.length,r,l,a,d);if(y&&(p=y.placedGlyphBoxes)&&p.box&&p.box.length){T=!0,R=y.shift;break;}}return p;};z(function(){return G(B,s.iconBox,n.WritingMode.horizontal);},function(){var i=s.verticalTextBox;return l.allowVerticalPlacement&&!(P&&P.box&&P.box.length)&&r.numVerticalGlyphVertices>0&&i?G(i,s.verticalIconBox,n.WritingMode.vertical):{box:null,offscreen:null};}),P&&(T=P.box,M=P.offscreen);var H=j(P&&P.box);if(!T&&o.prevPlacement){var W=o.prevPlacement.variableOffsets[r.crossTileID];W&&(o.variableOffsets[r.crossTileID]=W,o.markUsedJustification(l,W.anchor,r,H));}}else{var X=function(n,i){var a=o.collisionIndex.placeCollisionBox(n,b,h,c,v.predicate);return a&&a.box&&a.box.length&&(o.markUsedOrientation(l,i,r),o.placedOrientations[r.crossTileID]=i),a;};z(function(){return X(B,n.WritingMode.horizontal);},function(){var i=s.verticalTextBox;return l.allowVerticalPlacement&&r.numVerticalGlyphVertices>0&&i?X(i,n.WritingMode.vertical):{box:null,offscreen:null};}),j(P&&P.box&&P.box.length);}}if(T=(m=P)&&m.box&&m.box.length>0,M=m&&m.offscreen,r.useRuntimeCollisionCircles){var q=l.text.placedSymbolArray.get(r.centerJustifiedTextSymbolIndex),$=n.evaluateSizeForFeature(l.textSizeData,g,q),Y=u.get("text-padding");I=o.collisionIndex.placeCollisionCircles(b,q,l.lineVertexArray,l.glyphOffsetArray,$,c,f,d,a,w,v.predicate,r.collisionCircleDiameter,Y),T=b||I.circles.length>0&&!I.collisionDetected,M=M&&I.offscreen;}if(s.iconFeatureIndex&&(F=s.iconFeatureIndex),s.iconBox){var Z=function(n){var r=S&&R?tt(n,R.x,R.y,E,w,o.transform.angle):n;return o.collisionIndex.placeCollisionBox(r,x,h,c,v.predicate);};O=k&&k.box&&k.box.length&&s.verticalIconBox?(L=Z(s.verticalIconBox)).box.length>0:(L=Z(s.iconBox)).box.length>0,M=M&&L.offscreen;}var K=y||0===r.numHorizontalGlyphVertices&&0===r.numVerticalGlyphVertices,Q=_||0===r.numIconVertices;if(K||Q?Q?K||(O=O&&T):T=O&&T:O=T=O&&T,T&&m&&m.box&&o.collisionIndex.insertCollisionBox(m.box,u.get("text-ignore-placement"),l.bucketInstanceId,k&&k.box&&D?D:N,v.ID),O&&L&&o.collisionIndex.insertCollisionBox(L.box,u.get("icon-ignore-placement"),l.bucketInstanceId,F,v.ID),I&&(T&&o.collisionIndex.insertCollisionCircles(I.circles,u.get("text-ignore-placement"),l.bucketInstanceId,N,v.ID),a)){var J=l.bucketInstanceId,ee=o.collisionCircleArrays[J];void 0===ee&&(ee=o.collisionCircleArrays[J]=new e8);for(var et=0;et<I.circles.length;et+=4)ee.circles.push(I.circles[et+0]),ee.circles.push(I.circles[et+1]),ee.circles.push(I.circles[et+2]),ee.circles.push(I.collisionDetected?1:0);}o.placements[r.crossTileID]=new e6(T||A,O||C,M||l.justReloaded),i[r.crossTileID]=!0;}}};if(T)for(var M=l.getSortedSymbolIndexes(this.transform.angle),R=M.length-1;R>=0;--R){var P=M[R];O(l.symbolInstances.get(P),l.collisionArrays[P]);}else for(var k=r.symbolInstanceStart;k<r.symbolInstanceEnd;k++)O(l.symbolInstances.get(k),l.collisionArrays[k]);if(a&&l.bucketInstanceId in this.collisionCircleArrays){var I=this.collisionCircleArrays[l.bucketInstanceId];n.invert(I.invProjMatrix,c),I.viewportMatrix=this.collisionIndex.getViewportMatrix();}l.justReloaded=!1;},tn.prototype.markUsedJustification=function(r,i,a,o){var s;s=o===n.WritingMode.vertical?a.verticalPlacedTextSymbolIndex:({left:a.leftJustifiedTextSymbolIndex,center:a.centerJustifiedTextSymbolIndex,right:a.rightJustifiedTextSymbolIndex})[n.getAnchorJustification(i)];for(var l=0,u=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex,a.verticalPlacedTextSymbolIndex];l<u.length;l+=1){var c=u[l];c>=0&&(r.text.placedSymbolArray.get(c).crossTileID=s>=0&&c!==s?0:a.crossTileID);}},tn.prototype.markUsedOrientation=function(r,i,a){for(var o=i===n.WritingMode.horizontal||i===n.WritingMode.horizontalOnly?i:0,s=i===n.WritingMode.vertical?i:0,l=0,u=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex];l<u.length;l+=1)r.text.placedSymbolArray.get(u[l]).placedOrientation=o;a.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).placedOrientation=s);},tn.prototype.commit=function(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;var r=this.prevPlacement,i=!1;this.prevZoomAdjustment=r?r.zoomAdjustment(this.transform.zoom):0;var a=r?r.symbolFadeChange(n):1,o=r?r.opacities:{},s=r?r.variableOffsets:{},l=r?r.placedOrientations:{};for(var u in this.placements){var c=this.placements[u],f=o[u];f?(this.opacities[u]=new e5(f,a,c.text,c.icon),i=i||c.text!==f.text.placed||c.icon!==f.icon.placed):(this.opacities[u]=new e5(null,a,c.text,c.icon,c.skipFade),i=i||c.text||c.icon);}for(var d in o){var h=o[d];if(!this.opacities[d]){var p=new e5(h,a,!1,!1);p.isHidden()||(this.opacities[d]=p,i=i||h.text.placed||h.icon.placed);}}for(var m in s)this.variableOffsets[m]||!this.opacities[m]||this.opacities[m].isHidden()||(this.variableOffsets[m]=s[m]);for(var g in l)this.placedOrientations[g]||!this.opacities[g]||this.opacities[g].isHidden()||(this.placedOrientations[g]=l[g]);i?this.lastPlacementChangeTime=n:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=r?r.lastPlacementChangeTime:n);},tn.prototype.updateLayerOpacities=function(n,r){for(var i={},a=0;a<r.length;a+=1){var o=r[a],s=o.getBucket(n);s&&o.latestFeatureIndex&&n.id===s.layerIds[0]&&this.updateBucketOpacities(s,i,o.collisionBoxArray);}},tn.prototype.updateBucketOpacities=function(r,i,a){var o=this;r.hasTextData()&&r.text.opacityVertexArray.clear(),r.hasIconData()&&r.icon.opacityVertexArray.clear(),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();var s=r.layers[0].layout,l=new e5(null,0,!1,!1,!0),u=s.get("text-allow-overlap"),c=s.get("icon-allow-overlap"),f=s.get("text-variable-anchor"),d="map"===s.get("text-rotation-alignment"),h="map"===s.get("text-pitch-alignment"),p="none"!==s.get("icon-text-fit"),m=new e5(null,0,u&&(c||!r.hasIconData()||s.get("icon-optional")),c&&(u||!r.hasTextData()||s.get("text-optional")),!0);!r.collisionArrays&&a&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(a);for(var g=function(n,r,i){for(var a=0;a<r/4;a++)n.opacityVertexArray.emplaceBack(i);},v=0;v<r.symbolInstances.length;v++)(function(a){var s=r.symbolInstances.get(a),u=s.numHorizontalGlyphVertices,c=s.numVerticalGlyphVertices,v=s.crossTileID,y=o.opacities[v];i[v]?y=l:y||(o.opacities[v]=y=m),i[v]=!0;var _=s.numIconVertices>0,b=o.placedOrientations[s.crossTileID],x=b===n.WritingMode.vertical,E=b===n.WritingMode.horizontal||b===n.WritingMode.horizontalOnly;if(u>0||c>0){var w=ti(y.text);g(r.text,u,x?ta:w),g(r.text,c,E?ta:w);var S=y.text.isHidden();[s.rightJustifiedTextSymbolIndex,s.centerJustifiedTextSymbolIndex,s.leftJustifiedTextSymbolIndex].forEach(function(n){n>=0&&(r.text.placedSymbolArray.get(n).hidden=S||x?1:0);}),s.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(s.verticalPlacedTextSymbolIndex).hidden=S||E?1:0);var T=o.variableOffsets[s.crossTileID];T&&o.markUsedJustification(r,T.anchor,s,b);var A=o.placedOrientations[s.crossTileID];A&&(o.markUsedJustification(r,"left",s,A),o.markUsedOrientation(r,A,s));}if(_){var C=ti(y.icon),O=!(p&&s.verticalPlacedIconSymbolIndex&&x);s.placedIconSymbolIndex>=0&&(g(r.icon,s.numIconVertices,O?C:ta),r.icon.placedSymbolArray.get(s.placedIconSymbolIndex).hidden=y.icon.isHidden()),s.verticalPlacedIconSymbolIndex>=0&&(g(r.icon,s.numVerticalIconVertices,O?ta:C),r.icon.placedSymbolArray.get(s.verticalPlacedIconSymbolIndex).hidden=y.icon.isHidden());}if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){var M=r.collisionArrays[a];if(M){var R=new n.Point(0,0);if(M.textBox||M.verticalTextBox){var P=!0;if(f){var k=o.variableOffsets[v];k?(R=te(k.anchor,k.width,k.height,k.textOffset,k.textBoxScale),d&&R._rotate(h?o.transform.angle:-o.transform.angle)):P=!1;}M.textBox&&tr(r.textCollisionBox.collisionVertexArray,y.text.placed,!P||x,R.x,R.y),M.verticalTextBox&&tr(r.textCollisionBox.collisionVertexArray,y.text.placed,!P||E,R.x,R.y);}var I=!!(!E&&M.verticalIconBox);M.iconBox&&tr(r.iconCollisionBox.collisionVertexArray,y.icon.placed,I,p?R.x:0,p?R.y:0),M.verticalIconBox&&tr(r.iconCollisionBox.collisionVertexArray,y.icon.placed,!I,p?R.x:0,p?R.y:0);}}})(v);if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.bucketInstanceId in this.collisionCircleArrays){var y=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=y.invProjMatrix,r.placementViewportMatrix=y.viewportMatrix,r.collisionCircleArray=y.circles,delete this.collisionCircleArrays[r.bucketInstanceId];}},tn.prototype.symbolFadeChange=function(n){return 0===this.fadeDuration?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment;},tn.prototype.zoomAdjustment=function(n){return Math.max(0,(this.transform.zoom-n)/1.5);},tn.prototype.hasTransitions=function(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration;},tn.prototype.stillRecent=function(n,r){var i=this.zoomAtLastRecencyCheck===r?1-this.zoomAdjustment(r):1;return this.zoomAtLastRecencyCheck=r,this.commitTime+this.fadeDuration*i>n;},tn.prototype.setStale=function(){this.stale=!0;};var ta=0,to=function(n){this._sortAcrossTiles="viewport-y"!==n.layout.get("symbol-z-order")&&void 0!==n.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[];};to.prototype.continuePlacement=function(n,r,i,a,o){for(var s=this._bucketParts;this._currentTileIndex<n.length;)if(r.getBucketParts(s,a,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,o())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,s.sort(function(n,r){return n.sortKey-r.sortKey;}));this._currentPartIndex<s.length;)if(r.placeLayerBucketPart(s[this._currentPartIndex],this._seenCrossTileIDs,i),this._currentPartIndex++,o())return!0;return!1;};var ts=function(n,r,i,a,o,s,l){this.placement=new tn(n,o,s,l),this._currentPlacementIndex=r.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=a,this._done=!1;};ts.prototype.isDone=function(){return this._done;},ts.prototype.continuePlacement=function(r,i,a){for(var o=this,s=n.browser.now(),l=function(){var r=n.browser.now()-s;return!o._forceFullPlacement&&r>2;};this._currentPlacementIndex>=0;){var u=i[r[this._currentPlacementIndex]],c=this.placement.collisionIndex.transform.zoom;if("symbol"===u.type&&(!u.minzoom||u.minzoom<=c)&&(!u.maxzoom||u.maxzoom>c)){if(this._inProgressLayer||(this._inProgressLayer=new to(u)),this._inProgressLayer.continuePlacement(a[u.source],this.placement,this._showCollisionBoxes,u,l))return;delete this._inProgressLayer;}this._currentPlacementIndex--;}this._done=!0;},ts.prototype.commit=function(n){return this.placement.commit(n),this.placement;};var tl=512/n.EXTENT/2,tu=function(n,r,i){this.tileID=n,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(var a=0;a<r.length;a++){var o=r.get(a),s=o.key;this.indexedSymbolInstances[s]||(this.indexedSymbolInstances[s]=[]),this.indexedSymbolInstances[s].push({crossTileID:o.crossTileID,coord:this.getScaledCoordinates(o,n)});}};tu.prototype.getScaledCoordinates=function(r,i){var a=tl/Math.pow(2,i.canonical.z-this.tileID.canonical.z);return{x:Math.floor((i.canonical.x*n.EXTENT+r.anchorX)*a),y:Math.floor((i.canonical.y*n.EXTENT+r.anchorY)*a)};},tu.prototype.findMatches=function(n,r,i){for(var a=this.tileID.canonical.z<r.canonical.z?1:Math.pow(2,this.tileID.canonical.z-r.canonical.z),o=0;o<n.length;o++){var s=n.get(o);if(!s.crossTileID){var l=this.indexedSymbolInstances[s.key];if(l)for(var u=this.getScaledCoordinates(s,r),c=0;c<l.length;c+=1){var f=l[c];if(Math.abs(f.coord.x-u.x)<=a&&Math.abs(f.coord.y-u.y)<=a&&!i[f.crossTileID]){i[f.crossTileID]=!0,s.crossTileID=f.crossTileID;break;}}}}};var tc=function(){this.maxCrossTileID=0;};tc.prototype.generate=function(){return++this.maxCrossTileID;};var tf=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0;};tf.prototype.handleWrapJump=function(n){var r=Math.round((n-this.lng)/360);if(0!==r)for(var i in this.indexes){var a=this.indexes[i],o={};for(var s in a){var l=a[s];l.tileID=l.tileID.unwrapTo(l.tileID.wrap+r),o[l.tileID.key]=l;}this.indexes[i]=o;}this.lng=n;},tf.prototype.addBucket=function(n,r,i){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===r.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key]);}for(var a=0;a<r.symbolInstances.length;a++)r.symbolInstances.get(a).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});var o=this.usedCrossTileIDs[n.overscaledZ];for(var s in this.indexes){var l=this.indexes[s];if(Number(s)>n.overscaledZ)for(var u in l){var c=l[u];c.tileID.isChildOf(n)&&c.findMatches(r.symbolInstances,n,o);}else{var f=l[n.scaledTo(Number(s)).key];f&&f.findMatches(r.symbolInstances,n,o);}}for(var d=0;d<r.symbolInstances.length;d++){var h=r.symbolInstances.get(d);h.crossTileID||(h.crossTileID=i.generate(),o[h.crossTileID]=!0);}return void 0===this.indexes[n.overscaledZ]&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new tu(n,r.symbolInstances,r.bucketInstanceId),!0;},tf.prototype.removeBucketCrossTileIDs=function(n,r){for(var i in r.indexedSymbolInstances)for(var a=0,o=r.indexedSymbolInstances[i];a<o.length;a+=1)delete this.usedCrossTileIDs[n][o[a].crossTileID];},tf.prototype.removeStaleBuckets=function(n){var r=!1;for(var i in this.indexes){var a=this.indexes[i];for(var o in a)n[a[o].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,a[o]),delete a[o],r=!0);}return r;};var td=function(){this.layerIndexes={},this.crossTileIDs=new tc,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={};};td.prototype.addLayer=function(n,r,i){var a=this.layerIndexes[n.id];void 0===a&&(a=this.layerIndexes[n.id]=new tf);var o=!1,s={};a.handleWrapJump(i);for(var l=0;l<r.length;l+=1){var u=r[l],c=u.getBucket(n);c&&n.id===c.layerIds[0]&&(c.bucketInstanceId||(c.bucketInstanceId=++this.maxBucketInstanceId),a.addBucket(u.tileID,c,this.crossTileIDs)&&(o=!0),s[c.bucketInstanceId]=!0);}return a.removeStaleBuckets(s)&&(o=!0),o;},td.prototype.pruneUnusedLayers=function(n){var r={};for(var i in n.forEach(function(n){r[n]=!0;}),this.layerIndexes)r[i]||delete this.layerIndexes[i];};var th=function(r,i){return n.emitValidationErrors(r,i&&i.filter(function(n){return"source.canvas"!==n.identifier;}));},tp=n.pick(eD,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),tm=n.pick(eD,["setCenter","setZoom","setBearing","setPitch"]),tg=function(){var r={},i=n.styleSpec.$version;for(var a in n.styleSpec.$root){var o,s=n.styleSpec.$root[a];s.required&&null!=(o="version"===a?i:"array"===s.type?[]:{})&&(r[a]=o);}return r;}(),tv=function(r){function i(a,o){var s=this;void 0===o&&(o={}),r.call(this),this.map=a,this.dispatcher=new E(eL(),this),this.imageManager=new h,this.imageManager.setEventedParent(this),this.glyphManager=new v(a._requestManager,o.localIdeographFontFamily),this.lineAtlas=new x(256,512),this.crossTileSymbolIndex=new td,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new n.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",n.getReferrer());var l=this;this._rtlTextPluginCallback=i.registerForPluginStateChange(function(r){l.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:r.pluginStatus,pluginURL:r.pluginURL},function(r,i){if(n.triggerPluginCompletionEvent(r),i&&i.every(function(n){return n;}))for(var a in l.sourceCaches)l.sourceCaches[a].reload();});}),this.on("data",function(n){if("source"===n.dataType&&"metadata"===n.sourceDataType){var r=s.sourceCaches[n.sourceId];if(r){var i=r.getSource();if(i&&i.vectorLayerIds)for(var a in s._layers){var o=s._layers[a];o.source===i.id&&s._validateLayer(o);}}}});}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.loadURL=function(r,i){var a=this;void 0===i&&(i={}),this.fire(new n.Event("dataloading",{dataType:"style"}));var o="boolean"==typeof i.validate?i.validate:!n.isMapboxURL(r);r=this.map._requestManager.normalizeStyleURL(r,i.accessToken);var s=this.map._requestManager.transformRequest(r,n.ResourceType.Style);this._request=n.getJSON(s,function(r,i){a._request=null,r?a.fire(new n.ErrorEvent(r)):i&&a._load(i,o);});},i.prototype.loadJSON=function(r,i){var a=this;void 0===i&&(i={}),this.fire(new n.Event("dataloading",{dataType:"style"})),this._request=n.browser.frame(function(){a._request=null,a._load(r,!1!==i.validate);});},i.prototype.loadEmpty=function(){this.fire(new n.Event("dataloading",{dataType:"style"})),this._load(tg,!1);},i.prototype._load=function(r,i){if(!i||!th(this,n.validateStyle(r))){for(var a in this._loaded=!0,this.stylesheet=r,r.sources)this.addSource(a,r.sources[a],{validate:!1});r.sprite?this._loadSprite(r.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(r.glyphs);var o=eN(this.stylesheet.layers);this._order=o.map(function(n){return n.id;}),this._layers={},this._serializedLayers={};for(var s=0;s<o.length;s+=1){var l=o[s];(l=n.createStyleLayer(l)).setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=l,this._serializedLayers[l.id]=l.serialize();}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new b(this.stylesheet.light),this.fire(new n.Event("data",{dataType:"style"})),this.fire(new n.Event("style.load"));}},i.prototype._loadSprite=function(r){var i=this;this._spriteRequest=function(r,i,a){var o,s,l,u=n.browser.devicePixelRatio>1?"@2x":"",c=n.getJSON(i.transformRequest(i.normalizeSpriteURL(r,u,".json"),n.ResourceType.SpriteJSON),function(n,r){c=null,l||(l=n,o=r,d());}),f=n.getImage(i.transformRequest(i.normalizeSpriteURL(r,u,".png"),n.ResourceType.SpriteImage),function(n,r){f=null,l||(l=n,s=r,d());});function d(){if(l)a(l);else if(o&&s){var r=n.browser.getImageData(s),i={};for(var u in o){var c=o[u],f=c.width,d=c.height,h=c.x,p=c.y,m=c.sdf,g=c.pixelRatio,v=c.stretchX,y=c.stretchY,_=c.content,b=new n.RGBAImage({width:f,height:d});n.RGBAImage.copy(r,b,{x:h,y:p},{x:0,y:0},{width:f,height:d}),i[u]={data:b,pixelRatio:g,sdf:m,stretchX:v,stretchY:y,content:_};}a(null,i);}}return{cancel:function(){c&&(c.cancel(),c=null),f&&(f.cancel(),f=null);}};}(r,this.map._requestManager,function(r,a){if(i._spriteRequest=null,r)i.fire(new n.ErrorEvent(r));else if(a)for(var o in a)i.imageManager.addImage(o,a[o]);i.imageManager.setLoaded(!0),i._availableImages=i.imageManager.listImages(),i.dispatcher.broadcast("setImages",i._availableImages),i.fire(new n.Event("data",{dataType:"style"}));});},i.prototype._validateLayer=function(r){var i=this.sourceCaches[r.source];if(i){var a=r.sourceLayer;if(a){var o=i.getSource();("geojson"===o.type||o.vectorLayerIds&&-1===o.vectorLayerIds.indexOf(a))&&this.fire(new n.ErrorEvent(Error('Source layer "'+a+'" does not exist on source "'+o.id+'" as specified by style layer "'+r.id+'"')));}}},i.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var n in this.sourceCaches)if(!this.sourceCaches[n].loaded())return!1;return!!this.imageManager.isLoaded();},i.prototype._serializeLayers=function(n){for(var r=[],i=0;i<n.length;i+=1){var a=this._layers[n[i]];"custom"!==a.type&&r.push(a.serialize());}return r;},i.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var n in this.sourceCaches)if(this.sourceCaches[n].hasTransition())return!0;for(var r in this._layers)if(this._layers[r].hasTransition())return!0;return!1;},i.prototype._checkLoaded=function(){if(!this._loaded)throw Error("Style is not done loading");},i.prototype.update=function(r){if(this._loaded){var i=this._changed;if(this._changed){var a=Object.keys(this._updatedLayers),o=Object.keys(this._removedLayers);for(var s in(a.length||o.length)&&this._updateWorkerLayers(a,o),this._updatedSources){var l=this._updatedSources[s];"reload"===l?this._reloadSource(s):"clear"===l&&this._clearSource(s);}for(var u in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[u].updateTransitions(r);this.light.updateTransitions(r),this._resetUpdates();}var c={};for(var f in this.sourceCaches){var d=this.sourceCaches[f];c[f]=d.used,d.used=!1;}for(var h=0,p=this._order;h<p.length;h+=1){var m=this._layers[p[h]];m.recalculate(r,this._availableImages),!m.isHidden(r.zoom)&&m.source&&(this.sourceCaches[m.source].used=!0);}for(var g in c){var v=this.sourceCaches[g];c[g]!==v.used&&v.fire(new n.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}));}this.light.recalculate(r),this.z=r.zoom,i&&this.fire(new n.Event("data",{dataType:"style"}));}},i.prototype._updateTilesForChangedImages=function(){var n=Object.keys(this._changedImages);if(n.length){for(var r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={};}},i.prototype._updateWorkerLayers=function(n,r){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(n),removedIds:r});},i.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={};},i.prototype.setState=function(r){var i=this;if(this._checkLoaded(),th(this,n.validateStyle(r)))return!1;(r=n.clone$1(r)).layers=eN(r.layers);var a=(function(r,i){if(!r)return[{command:eD.setStyle,args:[i]}];var a=[];try{if(!n.deepEqual(r.version,i.version))return[{command:eD.setStyle,args:[i]}];n.deepEqual(r.center,i.center)||a.push({command:eD.setCenter,args:[i.center]}),n.deepEqual(r.zoom,i.zoom)||a.push({command:eD.setZoom,args:[i.zoom]}),n.deepEqual(r.bearing,i.bearing)||a.push({command:eD.setBearing,args:[i.bearing]}),n.deepEqual(r.pitch,i.pitch)||a.push({command:eD.setPitch,args:[i.pitch]}),n.deepEqual(r.sprite,i.sprite)||a.push({command:eD.setSprite,args:[i.sprite]}),n.deepEqual(r.glyphs,i.glyphs)||a.push({command:eD.setGlyphs,args:[i.glyphs]}),n.deepEqual(r.transition,i.transition)||a.push({command:eD.setTransition,args:[i.transition]}),n.deepEqual(r.light,i.light)||a.push({command:eD.setLight,args:[i.light]});var o={},s=[];!function(r,i,a,o){var s,l;for(s in i=i||{},r=r||{})r.hasOwnProperty(s)&&(i.hasOwnProperty(s)||eB(s,a,o));for(s in i)i.hasOwnProperty(s)&&(r.hasOwnProperty(s)?n.deepEqual(r[s],i[s])||("geojson"===r[s].type&&"geojson"===i[s].type&&function(r,i,a){var o;for(o in r[a])if(r[a].hasOwnProperty(o)&&"data"!==o&&!n.deepEqual(r[a][o],i[a][o]))return!1;for(o in i[a])if(i[a].hasOwnProperty(o)&&"data"!==o&&!n.deepEqual(r[a][o],i[a][o]))return!1;return!0;}(r,i,s)?a.push({command:eD.setGeoJSONSourceData,args:[s,i[s].data]}):(l=i,eB(s,a,o),eF(s,l,a))):eF(s,i,a));}(r.sources,i.sources,s,o);var l=[];r.layers&&r.layers.forEach(function(n){o[n.source]?a.push({command:eD.removeLayer,args:[n.id]}):l.push(n);}),a=a.concat(s),function(r,i,a){i=i||[];var o,s,l,u,c,f,d,h=(r=r||[]).map(ez),p=i.map(ez),m=r.reduce(eU,{}),g=i.reduce(eU,{}),v=h.slice(),y=Object.create(null);for(o=0,s=0;o<h.length;o++)g.hasOwnProperty(l=h[o])?s++:(a.push({command:eD.removeLayer,args:[l]}),v.splice(v.indexOf(l,s),1));for(o=0,s=0;o<p.length;o++)v[v.length-1-o]!==(l=p[p.length-1-o])&&(m.hasOwnProperty(l)?(a.push({command:eD.removeLayer,args:[l]}),v.splice(v.lastIndexOf(l,v.length-s),1)):s++,a.push({command:eD.addLayer,args:[g[l],f=v[v.length-o]]}),v.splice(v.length-o,0,l),y[l]=!0);for(o=0;o<p.length;o++)if(u=m[l=p[o]],c=g[l],!y[l]&&!n.deepEqual(u,c)){if(n.deepEqual(u.source,c.source)&&n.deepEqual(u["source-layer"],c["source-layer"])&&n.deepEqual(u.type,c.type)){for(d in ej(u.layout,c.layout,a,l,null,eD.setLayoutProperty),ej(u.paint,c.paint,a,l,null,eD.setPaintProperty),n.deepEqual(u.filter,c.filter)||a.push({command:eD.setFilter,args:[l,c.filter]}),n.deepEqual(u.minzoom,c.minzoom)&&n.deepEqual(u.maxzoom,c.maxzoom)||a.push({command:eD.setLayerZoomRange,args:[l,c.minzoom,c.maxzoom]}),u)u.hasOwnProperty(d)&&"layout"!==d&&"paint"!==d&&"filter"!==d&&"metadata"!==d&&"minzoom"!==d&&"maxzoom"!==d&&(0===d.indexOf("paint.")?ej(u[d],c[d],a,l,d.slice(6),eD.setPaintProperty):n.deepEqual(u[d],c[d])||a.push({command:eD.setLayerProperty,args:[l,d,c[d]]}));for(d in c)c.hasOwnProperty(d)&&!u.hasOwnProperty(d)&&"layout"!==d&&"paint"!==d&&"filter"!==d&&"metadata"!==d&&"minzoom"!==d&&"maxzoom"!==d&&(0===d.indexOf("paint.")?ej(u[d],c[d],a,l,d.slice(6),eD.setPaintProperty):n.deepEqual(u[d],c[d])||a.push({command:eD.setLayerProperty,args:[l,d,c[d]]}));}else a.push({command:eD.removeLayer,args:[l]}),f=v[v.lastIndexOf(l)+1],a.push({command:eD.addLayer,args:[c,f]});}}(l,i.layers,a);}catch(n){console.warn("Unable to compute style diff:",n),a=[{command:eD.setStyle,args:[i]}];}return a;})(this.serialize(),r).filter(function(n){return!(n.command in tm);});if(0===a.length)return!1;var o=a.filter(function(n){return!(n.command in tp);});if(o.length>0)throw Error("Unimplemented: "+o.map(function(n){return n.command;}).join(", ")+".");return a.forEach(function(n){"setTransition"!==n.command&&i[n.command].apply(i,n.args);}),this.stylesheet=r,!0;},i.prototype.addImage=function(r,i){if(this.getImage(r))return this.fire(new n.ErrorEvent(Error("An image with this name already exists.")));this.imageManager.addImage(r,i),this._afterImageUpdated(r);},i.prototype.updateImage=function(n,r){this.imageManager.updateImage(n,r);},i.prototype.getImage=function(n){return this.imageManager.getImage(n);},i.prototype.removeImage=function(r){if(!this.getImage(r))return this.fire(new n.ErrorEvent(Error("No image with this name exists.")));this.imageManager.removeImage(r),this._afterImageUpdated(r);},i.prototype._afterImageUpdated=function(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new n.Event("data",{dataType:"style"}));},i.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages();},i.prototype.addSource=function(r,i,a){var o=this;if(void 0===a&&(a={}),this._checkLoaded(),void 0!==this.sourceCaches[r])throw Error("There is already a source with this ID");if(!i.type)throw Error("The type property must be defined, but only the following properties were given: "+Object.keys(i).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(n.validateStyle.source,"sources."+r,i,null,a))){this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);var s=this.sourceCaches[r]=new eA(r,i,this.dispatcher);s.style=this,s.setEventedParent(this,function(){return{isSourceLoaded:o.loaded(),source:s.serialize(),sourceId:r};}),s.onAdd(this.map),this._changed=!0;}},i.prototype.removeSource=function(r){if(this._checkLoaded(),void 0===this.sourceCaches[r])throw Error("There is no source with this ID");for(var i in this._layers)if(this._layers[i].source===r)return this.fire(new n.ErrorEvent(Error('Source "'+r+'" cannot be removed while layer "'+i+'" is using it.')));var a=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],a.fire(new n.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),a.setEventedParent(null),a.clearTiles(),a.onRemove&&a.onRemove(this.map),this._changed=!0;},i.prototype.setGeoJSONSourceData=function(n,r){this._checkLoaded(),this.sourceCaches[n].getSource().setData(r),this._changed=!0;},i.prototype.getSource=function(n){return this.sourceCaches[n]&&this.sourceCaches[n].getSource();},i.prototype.addLayer=function(r,i,a){void 0===a&&(a={}),this._checkLoaded();var o=r.id;if(this.getLayer(o))this.fire(new n.ErrorEvent(Error('Layer with id "'+o+'" already exists on this map')));else{if("custom"===r.type){if(th(this,n.validateCustomStyleLayer(r)))return;s=n.createStyleLayer(r);}else{if("object"==typeof r.source&&(this.addSource(o,r.source),r=n.clone$1(r),r=n.extend(r,{source:o})),this._validate(n.validateStyle.layer,"layers."+o,r,{arrayIndex:-1},a))return;s=n.createStyleLayer(r),this._validateLayer(s),s.setEventedParent(this,{layer:{id:o}}),this._serializedLayers[s.id]=s.serialize();}var s,l=i?this._order.indexOf(i):this._order.length;if(i&&-1===l)this.fire(new n.ErrorEvent(Error('Layer with id "'+i+'" does not exist on this map.')));else{if(this._order.splice(l,0,o),this._layerOrderChanged=!0,this._layers[o]=s,this._removedLayers[o]&&s.source&&"custom"!==s.type){var u=this._removedLayers[o];delete this._removedLayers[o],u.type!==s.type?this._updatedSources[s.source]="clear":(this._updatedSources[s.source]="reload",this.sourceCaches[s.source].pause());}this._updateLayer(s),s.onAdd&&s.onAdd(this.map);}}},i.prototype.moveLayer=function(r,i){if(this._checkLoaded(),this._changed=!0,this._layers[r]){if(r!==i){var a=this._order.indexOf(r);this._order.splice(a,1);var o=i?this._order.indexOf(i):this._order.length;i&&-1===o?this.fire(new n.ErrorEvent(Error('Layer with id "'+i+'" does not exist on this map.'))):(this._order.splice(o,0,r),this._layerOrderChanged=!0);}}else this.fire(new n.ErrorEvent(Error("The layer '"+r+"' does not exist in the map's style and cannot be moved.")));},i.prototype.removeLayer=function(r){this._checkLoaded();var i=this._layers[r];if(i){i.setEventedParent(null);var a=this._order.indexOf(r);this._order.splice(a,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=i,delete this._layers[r],delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],i.onRemove&&i.onRemove(this.map);}else this.fire(new n.ErrorEvent(Error("The layer '"+r+"' does not exist in the map's style and cannot be removed.")));},i.prototype.getLayer=function(n){return this._layers[n];},i.prototype.hasLayer=function(n){return n in this._layers;},i.prototype.setLayerZoomRange=function(r,i,a){this._checkLoaded();var o=this.getLayer(r);o?o.minzoom===i&&o.maxzoom===a||(null!=i&&(o.minzoom=i),null!=a&&(o.maxzoom=a),this._updateLayer(o)):this.fire(new n.ErrorEvent(Error("The layer '"+r+"' does not exist in the map's style and cannot have zoom extent.")));},i.prototype.setFilter=function(r,i,a){void 0===a&&(a={}),this._checkLoaded();var o=this.getLayer(r);if(o){if(!n.deepEqual(o.filter,i))return null==i?(o.filter=void 0,void this._updateLayer(o)):void(this._validate(n.validateStyle.filter,"layers."+o.id+".filter",i,null,a)||(o.filter=n.clone$1(i),this._updateLayer(o)));}else this.fire(new n.ErrorEvent(Error("The layer '"+r+"' does not exist in the map's style and cannot be filtered.")));},i.prototype.getFilter=function(r){return n.clone$1(this.getLayer(r).filter);},i.prototype.setLayoutProperty=function(r,i,a,o){void 0===o&&(o={}),this._checkLoaded();var s=this.getLayer(r);s?n.deepEqual(s.getLayoutProperty(i),a)||(s.setLayoutProperty(i,a,o),this._updateLayer(s)):this.fire(new n.ErrorEvent(Error("The layer '"+r+"' does not exist in the map's style and cannot be styled.")));},i.prototype.getLayoutProperty=function(r,i){var a=this.getLayer(r);if(a)return a.getLayoutProperty(i);this.fire(new n.ErrorEvent(Error("The layer '"+r+"' does not exist in the map's style.")));},i.prototype.setPaintProperty=function(r,i,a,o){void 0===o&&(o={}),this._checkLoaded();var s=this.getLayer(r);s?n.deepEqual(s.getPaintProperty(i),a)||(s.setPaintProperty(i,a,o)&&this._updateLayer(s),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new n.ErrorEvent(Error("The layer '"+r+"' does not exist in the map's style and cannot be styled.")));},i.prototype.getPaintProperty=function(n,r){return this.getLayer(n).getPaintProperty(r);},i.prototype.setFeatureState=function(r,i){this._checkLoaded();var a=r.source,o=r.sourceLayer,s=this.sourceCaches[a];if(void 0!==s){var l=s.getSource().type;"geojson"===l&&o?this.fire(new n.ErrorEvent(Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==l||o?(void 0===r.id&&this.fire(new n.ErrorEvent(Error("The feature id parameter must be provided."))),s.setFeatureState(o,r.id,i)):this.fire(new n.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")));}else this.fire(new n.ErrorEvent(Error("The source '"+a+"' does not exist in the map's style.")));},i.prototype.removeFeatureState=function(r,i){this._checkLoaded();var a=r.source,o=this.sourceCaches[a];if(void 0!==o){var s=o.getSource().type,l="vector"===s?r.sourceLayer:void 0;"vector"!==s||l?i&&"string"!=typeof r.id&&"number"!=typeof r.id?this.fire(new n.ErrorEvent(Error("A feature id is required to remove its specific state property."))):o.removeFeatureState(l,r.id,i):this.fire(new n.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")));}else this.fire(new n.ErrorEvent(Error("The source '"+a+"' does not exist in the map's style.")));},i.prototype.getFeatureState=function(r){this._checkLoaded();var i=r.source,a=r.sourceLayer,o=this.sourceCaches[i];if(void 0!==o){if("vector"!==o.getSource().type||a)return void 0===r.id&&this.fire(new n.ErrorEvent(Error("The feature id parameter must be provided."))),o.getFeatureState(a,r.id);this.fire(new n.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")));}else this.fire(new n.ErrorEvent(Error("The source '"+i+"' does not exist in the map's style.")));},i.prototype.getTransition=function(){return n.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition);},i.prototype.serialize=function(){return n.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:n.mapObject(this.sourceCaches,function(n){return n.serialize();}),layers:this._serializeLayers(this._order)},function(n){return void 0!==n;});},i.prototype._updateLayer=function(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&"raster"!==this.sourceCaches[n.source].getSource().type&&(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause()),this._changed=!0;},i.prototype._flattenAndSortRenderedFeatures=function(n){for(var r=this,i=function(n){return"fill-extrusion"===r._layers[n].type;},a={},o=[],s=this._order.length-1;s>=0;s--){var l=this._order[s];if(i(l)){a[l]=s;for(var u=0;u<n.length;u+=1){var c=n[u][l];if(c)for(var f=0;f<c.length;f+=1)o.push(c[f]);}}}o.sort(function(n,r){return r.intersectionZ-n.intersectionZ;});for(var d=[],h=this._order.length-1;h>=0;h--){var p=this._order[h];if(i(p))for(var m=o.length-1;m>=0;m--){var g=o[m].feature;if(a[g.layer.id]<h)break;d.push(g),o.pop();}else for(var v=0;v<n.length;v+=1){var y=n[v][p];if(y)for(var _=0;_<y.length;_+=1)d.push(y[_].feature);}}return d;},i.prototype.queryRenderedFeatures=function(r,i,a){i&&i.filter&&this._validate(n.validateStyle.filter,"queryRenderedFeatures.filter",i.filter,null,i);var o={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new n.ErrorEvent(Error("parameters.layers must be an Array."))),[];for(var s=0,l=i.layers;s<l.length;s+=1){var u=l[s],c=this._layers[u];if(!c)return this.fire(new n.ErrorEvent(Error("The layer '"+u+"' does not exist in the map's style and cannot be queried for features."))),[];o[c.source]=!0;}}var f=[];for(var d in i.availableImages=this._availableImages,this.sourceCaches)i.layers&&!o[d]||f.push(function(r,i,a,o,s,l){var u=function(n,r,i){if(n)for(var a=0;a<n.length;a+=1){var o=r[n[a]];if(o&&o.source===i&&"fill-extrusion"===o.type)return!0;}else for(var s in r){var l=r[s];if(l.source===i&&"fill-extrusion"===l.type)return!0;}return!1;}(s&&s.layers,i,r.id),c=l.maxPitchScaleFactor(),f=r.tilesIn(o,c,u);f.sort(L);for(var d=[],h=0;h<f.length;h+=1){var p=f[h];d.push({wrappedTileID:p.tileID.wrapped().key,queryResults:p.tile.queryRenderedFeatures(i,a,r._state,p.queryGeometry,p.cameraQueryGeometry,p.scale,s,l,c,function(r,i){var a=n.identity([]);return n.translate(a,a,[1,1,0]),n.scale(a,a,[.5*r.width,.5*r.height,1]),n.multiply(a,a,r.calculatePosMatrix(i.toUnwrapped()));}(r.transform,p.tileID))});}var m=function(n){for(var r={},i={},a=0;a<n.length;a+=1){var o=n[a],s=o.queryResults,l=o.wrappedTileID,u=i[l]=i[l]||{};for(var c in s)for(var f=s[c],d=u[c]=u[c]||{},h=r[c]=r[c]||[],p=0;p<f.length;p+=1){var m=f[p];d[m.featureIndex]||(d[m.featureIndex]=!0,h.push(m));}}return r;}(d);for(var g in m)m[g].forEach(function(n){var i=n.feature,a=r.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=a;});return m;}(this.sourceCaches[d],this._layers,this._serializedLayers,r,i,a));return this.placement&&f.push(function(n,r,i,a,o,s,l){for(var u={},c=s.queryRenderedSymbols(a),f=[],d=0,h=Object.keys(c).map(Number);d<h.length;d+=1)f.push(l[h[d]]);f.sort(L);for(var p=0;p<f.length;p+=1)(function(){var i=f[p],a=i.featureIndex.lookupSymbolFeatures(c[i.bucketInstanceId],r,i.bucketIndex,i.sourceLayerIndex,o.filter,o.layers,o.availableImages,n);for(var s in a){var l=u[s]=u[s]||[],d=a[s];d.sort(function(n,r){var a=i.featureSortOrder;if(a){var o=a.indexOf(n.featureIndex);return a.indexOf(r.featureIndex)-o;}return r.featureIndex-n.featureIndex;});for(var h=0;h<d.length;h+=1)l.push(d[h]);}})();var m=function(r){u[r].forEach(function(a){var o=a.feature,s=i[n[r].source].getFeatureState(o.layer["source-layer"],o.id);o.source=o.layer.source,o.layer["source-layer"]&&(o.sourceLayer=o.layer["source-layer"]),o.state=s;});};for(var g in u)m(g);return u;}(this._layers,this._serializedLayers,this.sourceCaches,r,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(f);},i.prototype.querySourceFeatures=function(r,i){i&&i.filter&&this._validate(n.validateStyle.filter,"querySourceFeatures.filter",i.filter,null,i);var a=this.sourceCaches[r];return a?function(n,r){for(var i=n.getRenderableIds().map(function(r){return n.getTileByID(r);}),a=[],o={},s=0;s<i.length;s++){var l=i[s],u=l.tileID.canonical.key;o[u]||(o[u]=!0,l.querySourceFeatures(a,r));}return a;}(a,i):[];},i.prototype.addSourceType=function(n,r,a){return i.getSourceType(n)?a(Error('A source type called "'+n+'" already exists.')):(i.setSourceType(n,r),r.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:n,url:r.workerSourceURL},a):a(null,null));},i.prototype.getLight=function(){return this.light.getLight();},i.prototype.setLight=function(r,i){void 0===i&&(i={}),this._checkLoaded();var a=this.light.getLight(),o=!1;for(var s in r)if(!n.deepEqual(r[s],a[s])){o=!0;break;}if(o){var l={now:n.browser.now(),transition:n.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,i),this.light.updateTransitions(l);}},i.prototype._validate=function(r,i,a,o,s){return void 0===s&&(s={}),(!s||!1!==s.validate)&&th(this,r.call(n.validateStyle,n.extend({key:i,style:this.serialize(),value:a,styleSpec:n.styleSpec},o)));},i.prototype._remove=function(){for(var r in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),n.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[r].setEventedParent(null);for(var i in this.sourceCaches)this.sourceCaches[i].clearTiles(),this.sourceCaches[i].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove();},i.prototype._clearSource=function(n){this.sourceCaches[n].clearTiles();},i.prototype._reloadSource=function(n){this.sourceCaches[n].resume(),this.sourceCaches[n].reload();},i.prototype._updateSources=function(n){for(var r in this.sourceCaches)this.sourceCaches[r].update(n);},i.prototype._generateCollisionBoxes=function(){for(var n in this.sourceCaches)this._reloadSource(n);},i.prototype._updatePlacement=function(r,i,a,o,s){void 0===s&&(s=!1);for(var l=!1,u=!1,c={},f=0,d=this._order;f<d.length;f+=1){var h=this._layers[d[f]];if("symbol"===h.type){if(!c[h.source]){var p=this.sourceCaches[h.source];c[h.source]=p.getRenderableIds(!0).map(function(n){return p.getTileByID(n);}).sort(function(n,r){return r.tileID.overscaledZ-n.tileID.overscaledZ||(n.tileID.isLessThan(r.tileID)?-1:1);});}var m=this.crossTileSymbolIndex.addLayer(h,c[h.source],r.center.lng);l=l||m;}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((s=s||this._layerOrderChanged||0===a)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(n.browser.now(),r.zoom))&&(this.pauseablePlacement=new ts(r,this._order,s,i,a,o,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,c),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(n.browser.now()),u=!0),l&&this.pauseablePlacement.placement.setStale()),u||l)for(var g=0,v=this._order;g<v.length;g+=1){var y=this._layers[v[g]];"symbol"===y.type&&this.placement.updateLayerOpacities(y,c[y.source]);}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(n.browser.now());},i.prototype._releaseSymbolFadeTiles=function(){for(var n in this.sourceCaches)this.sourceCaches[n].releaseSymbolFadeTiles();},i.prototype.getImages=function(n,r,i){this.imageManager.getImages(r.icons,i),this._updateTilesForChangedImages();var a=this.sourceCaches[r.source];a&&a.setDependencies(r.tileID.key,r.type,r.icons);},i.prototype.getGlyphs=function(n,r,i){this.glyphManager.getGlyphs(r.stacks,i);},i.prototype.getResource=function(r,i,a){return n.makeRequest(i,a);},i;}(n.Evented);tv.getSourceType=function(n){return I[n];},tv.setSourceType=function(n,r){I[n]=r;},tv.registerForPluginStateChange=n.registerForPluginStateChange;var ty=n.createLayout([{name:"a_pos",type:"Int16",components:2}]),t_=tb("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}");function tb(n,r){var i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,a=r.match(/attribute ([\w]+) ([\w]+)/g),o=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),s=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),l=s?s.concat(o):o,u={};return{fragmentSource:n=n.replace(i,function(n,r,i,a,o){return u[o]=!0,"define"===r?"\n#ifndef HAS_UNIFORM_u_"+o+"\nvarying "+i+" "+a+" "+o+";\n#else\nuniform "+i+" "+a+" u_"+o+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+o+"\n    "+i+" "+a+" "+o+" = u_"+o+";\n#endif\n";}),vertexSource:r=r.replace(i,function(n,r,i,a,o){var s="float"===a?"vec2":"vec4",l=o.match(/color/)?"color":s;return u[o]?"define"===r?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float u_"+o+"_t;\nattribute "+i+" "+s+" a_"+o+";\nvarying "+i+" "+a+" "+o+";\n#else\nuniform "+i+" "+a+" u_"+o+";\n#endif\n":"vec4"===l?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = a_"+o+";\n#else\n    "+i+" "+a+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = unpack_mix_"+l+"(a_"+o+", u_"+o+"_t);\n#else\n    "+i+" "+a+" "+o+" = u_"+o+";\n#endif\n":"define"===r?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float u_"+o+"_t;\nattribute "+i+" "+s+" a_"+o+";\n#else\nuniform "+i+" "+a+" u_"+o+";\n#endif\n":"vec4"===l?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+i+" "+a+" "+o+" = a_"+o+";\n#else\n    "+i+" "+a+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+i+" "+a+" "+o+" = unpack_mix_"+l+"(a_"+o+", u_"+o+"_t);\n#else\n    "+i+" "+a+" "+o+" = u_"+o+";\n#endif\n";}),staticAttributes:a,staticUniforms:l};}var tx=Object.freeze({__proto__:null,prelude:t_,background:tb("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:tb("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:tb("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:tb("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:tb("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:tb("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:tb("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:tb("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:tb("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),fill:tb("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:tb("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:tb("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:tb("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:tb("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:tb("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:tb("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:tb("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:tb("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),lineGradient:tb("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),linePattern:tb("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:tb("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:tb("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:tb("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),symbolSDF:tb("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:tb("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}")}),tE=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null;};function tw(n){for(var r=[],i=0;i<n.length;i++)if(null!==n[i]){var a=n[i].split(" ");r.push(a.pop());}return r;}tE.prototype.bind=function(n,r,i,a,o,s,l,u){this.context=n;for(var c=this.boundPaintVertexBuffers.length!==a.length,f=0;!c&&f<a.length;f++)this.boundPaintVertexBuffers[f]!==a[f]&&(c=!0);n.extVertexArrayObject&&this.vao&&this.boundProgram===r&&this.boundLayoutVertexBuffer===i&&!c&&this.boundIndexBuffer===o&&this.boundVertexOffset===s&&this.boundDynamicVertexBuffer===l&&this.boundDynamicVertexBuffer2===u?(n.bindVertexArrayOES.set(this.vao),l&&l.bind(),o&&o.dynamicDraw&&o.bind(),u&&u.bind()):this.freshBind(r,i,a,o,s,l,u);},tE.prototype.freshBind=function(n,r,i,a,o,s,l){var u,c=n.numAttributes,f=this.context,d=f.gl;if(f.extVertexArrayObject)this.vao&&this.destroy(),this.vao=f.extVertexArrayObject.createVertexArrayOES(),f.bindVertexArrayOES.set(this.vao),u=0,this.boundProgram=n,this.boundLayoutVertexBuffer=r,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=a,this.boundVertexOffset=o,this.boundDynamicVertexBuffer=s,this.boundDynamicVertexBuffer2=l;else{u=f.currentNumAttributes||0;for(var h=c;h<u;h++)d.disableVertexAttribArray(h);}r.enableAttributes(d,n);for(var p=0;p<i.length;p+=1)i[p].enableAttributes(d,n);s&&s.enableAttributes(d,n),l&&l.enableAttributes(d,n),r.bind(),r.setVertexAttribPointers(d,n,o);for(var m=0;m<i.length;m+=1){var g=i[m];g.bind(),g.setVertexAttribPointers(d,n,o);}s&&(s.bind(),s.setVertexAttribPointers(d,n,o)),a&&a.bind(),l&&(l.bind(),l.setVertexAttribPointers(d,n,o)),f.currentNumAttributes=c;},tE.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null);};var tS=function(n,r,i,a,o,s){var l=n.gl;this.program=l.createProgram();for(var u=tw(i.staticAttributes),c=a?a.getBinderAttributes():[],f=u.concat(c),d=i.staticUniforms?tw(i.staticUniforms):[],h=a?a.getBinderUniforms():[],p=[],m=0,g=d.concat(h);m<g.length;m+=1){var v=g[m];0>p.indexOf(v)&&p.push(v);}var y=a?a.defines():[];s&&y.push("#define OVERDRAW_INSPECTOR;");var _=y.concat(t_.fragmentSource,i.fragmentSource).join("\n"),b=y.concat(t_.vertexSource,i.vertexSource).join("\n"),x=l.createShader(l.FRAGMENT_SHADER);if(l.isContextLost())this.failedToCreate=!0;else{l.shaderSource(x,_),l.compileShader(x),l.attachShader(this.program,x);var E=l.createShader(l.VERTEX_SHADER);if(l.isContextLost())this.failedToCreate=!0;else{l.shaderSource(E,b),l.compileShader(E),l.attachShader(this.program,E),this.attributes={};var w={};this.numAttributes=f.length;for(var S=0;S<this.numAttributes;S++)f[S]&&(l.bindAttribLocation(this.program,S,f[S]),this.attributes[f[S]]=S);l.linkProgram(this.program),l.deleteShader(E),l.deleteShader(x);for(var T=0;T<p.length;T++){var A=p[T];if(A&&!w[A]){var C=l.getUniformLocation(this.program,A);C&&(w[A]=C);}}this.fixedUniforms=o(n,w),this.binderUniforms=a?a.getUniforms(n,w):[];}}};function tT(n,r,i){var a=1/e3(i,1,r.transform.tileZoom),o=Math.pow(2,i.tileID.overscaledZ),s=i.tileSize*Math.pow(2,r.transform.tileZoom)/o,l=s*(i.tileID.canonical.x+i.tileID.wrap*o),u=s*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[a,n.fromScale,n.toScale],u_fade:n.t,u_pixel_coord_upper:[l>>16,u>>16],u_pixel_coord_lower:[65535&l,65535&u]};}tS.prototype.draw=function(n,r,i,a,o,s,l,u,c,f,d,h,p,m,g,v){var y,_=n.gl;if(!this.failedToCreate){for(var b in n.program.set(this.program),n.setDepthMode(i),n.setStencilMode(a),n.setColorMode(o),n.setCullFace(s),this.fixedUniforms)this.fixedUniforms[b].set(l[b]);m&&m.setUniforms(n,this.binderUniforms,h,{zoom:p});for(var x=((y={})[_.LINES]=2,y[_.TRIANGLES]=3,y[_.LINE_STRIP]=1,y)[r],E=0,w=d.get();E<w.length;E+=1){var S=w[E],T=S.vaos||(S.vaos={});(T[u]||(T[u]=new tE)).bind(n,this,c,m?m.getPaintVertexBuffers():[],f,S.vertexOffset,g,v),_.drawElements(r,S.primitiveLength*x,_.UNSIGNED_SHORT,S.primitiveOffset*x*2);}}};var tA=function(r,i,a,o){var s=i.style.light,l=s.properties.get("position"),u=[l.x,l.y,l.z],c=n.create$1();"viewport"===s.properties.get("anchor")&&n.fromRotation(c,-i.transform.angle),n.transformMat3(u,u,c);var f=s.properties.get("color");return{u_matrix:r,u_lightpos:u,u_lightintensity:s.properties.get("intensity"),u_lightcolor:[f.r,f.g,f.b],u_vertical_gradient:+a,u_opacity:o};},tC=function(n){return{u_matrix:n};},tO=function(r,i,a,o){return n.extend(tC(r),tT(a,i,o));},tM=function(r,i,a,o){var s,l,u=r.transform;if("map"===o.paint.get("circle-pitch-alignment")){var c=e3(a,1,u.zoom);s=!0,l=[c,c];}else s=!1,l=u.pixelsToGLUnits;return{u_camera_to_center_distance:u.cameraToCenterDistance,u_scale_with_map:+("map"===o.paint.get("circle-pitch-scale")),u_matrix:r.translatePosMatrix(i.posMatrix,a,o.paint.get("circle-translate"),o.paint.get("circle-translate-anchor")),u_pitch_with_map:+s,u_device_pixel_ratio:n.browser.devicePixelRatio,u_extrude_scale:l};},tR=function(n,r,i){var a=e3(i,1,r.zoom),o=Math.pow(2,r.zoom-i.tileID.overscaledZ),s=i.tileID.overscaleFactor();return{u_matrix:n,u_camera_to_center_distance:r.cameraToCenterDistance,u_pixels_to_tile_units:a,u_extrude_scale:[r.pixelsToGLUnits[0]/(a*o),r.pixelsToGLUnits[1]/(a*o)],u_overscale_factor:s};},tP=function(n,r,i){return void 0===i&&(i=1),{u_matrix:n,u_color:r,u_overlay:0,u_overlay_scale:i};},tk=function(n){return{u_matrix:n};},tI=function(r,i,a){var o=r.transform;return{u_matrix:tF(r,i,a),u_ratio:1/e3(i,1,o.zoom),u_device_pixel_ratio:n.browser.devicePixelRatio,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]};},tL=function(r,i,a,o){var s=r.transform,l=tD(i,s);return{u_matrix:tF(r,i,a),u_texsize:i.imageAtlasTexture.size,u_ratio:1/e3(i,1,s.zoom),u_device_pixel_ratio:n.browser.devicePixelRatio,u_image:0,u_scale:[l,o.fromScale,o.toScale],u_fade:o.t,u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]]};},tN=function(r,i,a,o,s){var l=r.lineAtlas,u=tD(i,r.transform),c="round"===a.layout.get("line-cap"),f=l.getDash(o.from,c),d=l.getDash(o.to,c),h=f.width*s.fromScale,p=d.width*s.toScale;return n.extend(tI(r,i,a),{u_patternscale_a:[u/h,-f.height/2],u_patternscale_b:[u/p,-d.height/2],u_sdfgamma:l.width/(256*Math.min(h,p)*n.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:f.y,u_tex_y_b:d.y,u_mix:s.t});};function tD(n,r){return 1/e3(n,1,r.tileZoom);}function tF(n,r,i){return n.translatePosMatrix(r.tileID.posMatrix,r,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"));}var tB,tj=function(n,r,i,a,o){var s,l,u,c,f;return{u_matrix:n,u_tl_parent:r,u_scale_parent:i,u_buffer_scale:1,u_fade_t:a.mix,u_opacity:a.opacity*o.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:o.paint.get("raster-brightness-min"),u_brightness_high:o.paint.get("raster-brightness-max"),u_saturation_factor:(l=o.paint.get("raster-saturation"))>0?1-1/(1.001-l):-l,u_contrast_factor:(s=o.paint.get("raster-contrast"))>0?1/(1-s):1+s,u_spin_weights:(c=Math.sin(u=o.paint.get("raster-hue-rotate")*(Math.PI/180)),[(2*(f=Math.cos(u))+1)/3,(-Math.sqrt(3)*c-f+1)/3,(Math.sqrt(3)*c-f+1)/3])};},tz=function(n,r,i,a,o,s,l,u,c,f){var d=o.transform;return{u_is_size_zoom_constant:+("constant"===n||"source"===n),u_is_size_feature_constant:+("constant"===n||"camera"===n),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:d.cameraToCenterDistance,u_pitch:d.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:d.width/d.height,u_fade_change:o.options.fadeDuration?o.symbolFadeChange:1,u_matrix:s,u_label_plane_matrix:l,u_coord_matrix:u,u_is_text:+c,u_pitch_with_map:+a,u_texsize:f,u_texture:0};},tU=function(r,i,a,o,s,l,u,c,f,d,h){var p=s.transform;return n.extend(tz(r,i,a,o,s,l,u,c,f,d),{u_gamma_scale:o?Math.cos(p._pitch)*p.cameraToCenterDistance:1,u_device_pixel_ratio:n.browser.devicePixelRatio,u_is_halo:+h});},tV=function(r,i,a,o,s,l){var u,c,f,d,h,p,m,g,v;return n.extend((u=a.imageManager.getPattern(o.from.toString()),c=a.imageManager.getPattern(o.to.toString()),d=(f=a.imageManager.getPixelSize()).width,h=f.height,p=Math.pow(2,s.tileID.overscaledZ),g=(m=s.tileSize*Math.pow(2,a.transform.tileZoom)/p)*(s.tileID.canonical.x+s.tileID.wrap*p),v=m*s.tileID.canonical.y,{u_image:0,u_pattern_tl_a:u.tl,u_pattern_br_a:u.br,u_pattern_tl_b:c.tl,u_pattern_br_b:c.br,u_texsize:[d,h],u_mix:l.t,u_pattern_size_a:u.displaySize,u_pattern_size_b:c.displaySize,u_scale_a:l.fromScale,u_scale_b:l.toScale,u_tile_units_to_pixels:1/e3(s,1,a.transform.tileZoom),u_pixel_coord_upper:[g>>16,v>>16],u_pixel_coord_lower:[65535&g,65535&v]}),{u_matrix:r,u_opacity:i});},tG={fillExtrusion:function(r,i){return{u_matrix:new n.UniformMatrix4f(r,i.u_matrix),u_lightpos:new n.Uniform3f(r,i.u_lightpos),u_lightintensity:new n.Uniform1f(r,i.u_lightintensity),u_lightcolor:new n.Uniform3f(r,i.u_lightcolor),u_vertical_gradient:new n.Uniform1f(r,i.u_vertical_gradient),u_opacity:new n.Uniform1f(r,i.u_opacity)};},fillExtrusionPattern:function(r,i){return{u_matrix:new n.UniformMatrix4f(r,i.u_matrix),u_lightpos:new n.Uniform3f(r,i.u_lightpos),u_lightintensity:new n.Uniform1f(r,i.u_lightintensity),u_lightcolor:new n.Uniform3f(r,i.u_lightcolor),u_vertical_gradient:new n.Uniform1f(r,i.u_vertical_gradient),u_height_factor:new n.Uniform1f(r,i.u_height_factor),u_image:new n.Uniform1i(r,i.u_image),u_texsize:new n.Uniform2f(r,i.u_texsize),u_pixel_coord_upper:new n.Uniform2f(r,i.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(r,i.u_pixel_coord_lower),u_scale:new n.Uniform3f(r,i.u_scale),u_fade:new n.Uniform1f(r,i.u_fade),u_opacity:new n.Uniform1f(r,i.u_opacity)};},fill:function(r,i){return{u_matrix:new n.UniformMatrix4f(r,i.u_matrix)};},fillPattern:function(r,i){return{u_matrix:new n.UniformMatrix4f(r,i.u_matrix),u_image:new n.Uniform1i(r,i.u_image),u_texsize:new n.Uniform2f(r,i.u_texsize),u_pixel_coord_upper:new n.Uniform2f(r,i.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(r,i.u_pixel_coord_lower),u_scale:new n.Uniform3f(r,i.u_scale),u_fade:new n.Uniform1f(r,i.u_fade)};},fillOutline:function(r,i){return{u_matrix:new n.UniformMatrix4f(r,i.u_matrix),u_world:new n.Uniform2f(r,i.u_world)};},fillOutlinePattern:function(r,i){return{u_matrix:new n.UniformMatrix4f(r,i.u_matrix),u_world:new n.Uniform2f(r,i.u_world),u_image:new n.Uniform1i(r,i.u_image),u_texsize:new n.Uniform2f(r,i.u_texsize),u_pixel_coord_upper:new n.Uniform2f(r,i.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(r,i.u_pixel_coord_lower),u_scale:new n.Uniform3f(r,i.u_scale),u_fade:new n.Uniform1f(r,i.u_fade)};},circle:function(r,i){return{u_camera_to_center_distance:new n.Uniform1f(r,i.u_camera_to_center_distance),u_scale_with_map:new n.Uniform1i(r,i.u_scale_with_map),u_pitch_with_map:new n.Uniform1i(r,i.u_pitch_with_map),u_extrude_scale:new n.Uniform2f(r,i.u_extrude_scale),u_device_pixel_ratio:new n.Uniform1f(r,i.u_device_pixel_ratio),u_matrix:new n.UniformMatrix4f(r,i.u_matrix)};},collisionBox:function(r,i){return{u_matrix:new n.UniformMatrix4f(r,i.u_matrix),u_camera_to_center_distance:new n.Uniform1f(r,i.u_camera_to_center_distance),u_pixels_to_tile_units:new n.Uniform1f(r,i.u_pixels_to_tile_units),u_extrude_scale:new n.Uniform2f(r,i.u_extrude_scale),u_overscale_factor:new n.Uniform1f(r,i.u_overscale_factor)};},collisionCircle:function(r,i){return{u_matrix:new n.UniformMatrix4f(r,i.u_matrix),u_inv_matrix:new n.UniformMatrix4f(r,i.u_inv_matrix),u_camera_to_center_distance:new n.Uniform1f(r,i.u_camera_to_center_distance),u_viewport_size:new n.Uniform2f(r,i.u_viewport_size)};},debug:function(r,i){return{u_color:new n.UniformColor(r,i.u_color),u_matrix:new n.UniformMatrix4f(r,i.u_matrix),u_overlay:new n.Uniform1i(r,i.u_overlay),u_overlay_scale:new n.Uniform1f(r,i.u_overlay_scale)};},clippingMask:function(r,i){return{u_matrix:new n.UniformMatrix4f(r,i.u_matrix)};},heatmap:function(r,i){return{u_extrude_scale:new n.Uniform1f(r,i.u_extrude_scale),u_intensity:new n.Uniform1f(r,i.u_intensity),u_matrix:new n.UniformMatrix4f(r,i.u_matrix)};},heatmapTexture:function(r,i){return{u_matrix:new n.UniformMatrix4f(r,i.u_matrix),u_world:new n.Uniform2f(r,i.u_world),u_image:new n.Uniform1i(r,i.u_image),u_color_ramp:new n.Uniform1i(r,i.u_color_ramp),u_opacity:new n.Uniform1f(r,i.u_opacity)};},hillshade:function(r,i){return{u_matrix:new n.UniformMatrix4f(r,i.u_matrix),u_image:new n.Uniform1i(r,i.u_image),u_latrange:new n.Uniform2f(r,i.u_latrange),u_light:new n.Uniform2f(r,i.u_light),u_shadow:new n.UniformColor(r,i.u_shadow),u_highlight:new n.UniformColor(r,i.u_highlight),u_accent:new n.UniformColor(r,i.u_accent)};},hillshadePrepare:function(r,i){return{u_matrix:new n.UniformMatrix4f(r,i.u_matrix),u_image:new n.Uniform1i(r,i.u_image),u_dimension:new n.Uniform2f(r,i.u_dimension),u_zoom:new n.Uniform1f(r,i.u_zoom),u_unpack:new n.Uniform4f(r,i.u_unpack)};},line:function(r,i){return{u_matrix:new n.UniformMatrix4f(r,i.u_matrix),u_ratio:new n.Uniform1f(r,i.u_ratio),u_device_pixel_ratio:new n.Uniform1f(r,i.u_device_pixel_ratio),u_units_to_pixels:new n.Uniform2f(r,i.u_units_to_pixels)};},lineGradient:function(r,i){return{u_matrix:new n.UniformMatrix4f(r,i.u_matrix),u_ratio:new n.Uniform1f(r,i.u_ratio),u_device_pixel_ratio:new n.Uniform1f(r,i.u_device_pixel_ratio),u_units_to_pixels:new n.Uniform2f(r,i.u_units_to_pixels),u_image:new n.Uniform1i(r,i.u_image),u_image_height:new n.Uniform1f(r,i.u_image_height)};},linePattern:function(r,i){return{u_matrix:new n.UniformMatrix4f(r,i.u_matrix),u_texsize:new n.Uniform2f(r,i.u_texsize),u_ratio:new n.Uniform1f(r,i.u_ratio),u_device_pixel_ratio:new n.Uniform1f(r,i.u_device_pixel_ratio),u_image:new n.Uniform1i(r,i.u_image),u_units_to_pixels:new n.Uniform2f(r,i.u_units_to_pixels),u_scale:new n.Uniform3f(r,i.u_scale),u_fade:new n.Uniform1f(r,i.u_fade)};},lineSDF:function(r,i){return{u_matrix:new n.UniformMatrix4f(r,i.u_matrix),u_ratio:new n.Uniform1f(r,i.u_ratio),u_device_pixel_ratio:new n.Uniform1f(r,i.u_device_pixel_ratio),u_units_to_pixels:new n.Uniform2f(r,i.u_units_to_pixels),u_patternscale_a:new n.Uniform2f(r,i.u_patternscale_a),u_patternscale_b:new n.Uniform2f(r,i.u_patternscale_b),u_sdfgamma:new n.Uniform1f(r,i.u_sdfgamma),u_image:new n.Uniform1i(r,i.u_image),u_tex_y_a:new n.Uniform1f(r,i.u_tex_y_a),u_tex_y_b:new n.Uniform1f(r,i.u_tex_y_b),u_mix:new n.Uniform1f(r,i.u_mix)};},raster:function(r,i){return{u_matrix:new n.UniformMatrix4f(r,i.u_matrix),u_tl_parent:new n.Uniform2f(r,i.u_tl_parent),u_scale_parent:new n.Uniform1f(r,i.u_scale_parent),u_buffer_scale:new n.Uniform1f(r,i.u_buffer_scale),u_fade_t:new n.Uniform1f(r,i.u_fade_t),u_opacity:new n.Uniform1f(r,i.u_opacity),u_image0:new n.Uniform1i(r,i.u_image0),u_image1:new n.Uniform1i(r,i.u_image1),u_brightness_low:new n.Uniform1f(r,i.u_brightness_low),u_brightness_high:new n.Uniform1f(r,i.u_brightness_high),u_saturation_factor:new n.Uniform1f(r,i.u_saturation_factor),u_contrast_factor:new n.Uniform1f(r,i.u_contrast_factor),u_spin_weights:new n.Uniform3f(r,i.u_spin_weights)};},symbolIcon:function(r,i){return{u_is_size_zoom_constant:new n.Uniform1i(r,i.u_is_size_zoom_constant),u_is_size_feature_constant:new n.Uniform1i(r,i.u_is_size_feature_constant),u_size_t:new n.Uniform1f(r,i.u_size_t),u_size:new n.Uniform1f(r,i.u_size),u_camera_to_center_distance:new n.Uniform1f(r,i.u_camera_to_center_distance),u_pitch:new n.Uniform1f(r,i.u_pitch),u_rotate_symbol:new n.Uniform1i(r,i.u_rotate_symbol),u_aspect_ratio:new n.Uniform1f(r,i.u_aspect_ratio),u_fade_change:new n.Uniform1f(r,i.u_fade_change),u_matrix:new n.UniformMatrix4f(r,i.u_matrix),u_label_plane_matrix:new n.UniformMatrix4f(r,i.u_label_plane_matrix),u_coord_matrix:new n.UniformMatrix4f(r,i.u_coord_matrix),u_is_text:new n.Uniform1i(r,i.u_is_text),u_pitch_with_map:new n.Uniform1i(r,i.u_pitch_with_map),u_texsize:new n.Uniform2f(r,i.u_texsize),u_texture:new n.Uniform1i(r,i.u_texture)};},symbolSDF:function(r,i){return{u_is_size_zoom_constant:new n.Uniform1i(r,i.u_is_size_zoom_constant),u_is_size_feature_constant:new n.Uniform1i(r,i.u_is_size_feature_constant),u_size_t:new n.Uniform1f(r,i.u_size_t),u_size:new n.Uniform1f(r,i.u_size),u_camera_to_center_distance:new n.Uniform1f(r,i.u_camera_to_center_distance),u_pitch:new n.Uniform1f(r,i.u_pitch),u_rotate_symbol:new n.Uniform1i(r,i.u_rotate_symbol),u_aspect_ratio:new n.Uniform1f(r,i.u_aspect_ratio),u_fade_change:new n.Uniform1f(r,i.u_fade_change),u_matrix:new n.UniformMatrix4f(r,i.u_matrix),u_label_plane_matrix:new n.UniformMatrix4f(r,i.u_label_plane_matrix),u_coord_matrix:new n.UniformMatrix4f(r,i.u_coord_matrix),u_is_text:new n.Uniform1i(r,i.u_is_text),u_pitch_with_map:new n.Uniform1i(r,i.u_pitch_with_map),u_texsize:new n.Uniform2f(r,i.u_texsize),u_texture:new n.Uniform1i(r,i.u_texture),u_gamma_scale:new n.Uniform1f(r,i.u_gamma_scale),u_device_pixel_ratio:new n.Uniform1f(r,i.u_device_pixel_ratio),u_is_halo:new n.Uniform1i(r,i.u_is_halo)};},symbolTextAndIcon:function(r,i){return{u_is_size_zoom_constant:new n.Uniform1i(r,i.u_is_size_zoom_constant),u_is_size_feature_constant:new n.Uniform1i(r,i.u_is_size_feature_constant),u_size_t:new n.Uniform1f(r,i.u_size_t),u_size:new n.Uniform1f(r,i.u_size),u_camera_to_center_distance:new n.Uniform1f(r,i.u_camera_to_center_distance),u_pitch:new n.Uniform1f(r,i.u_pitch),u_rotate_symbol:new n.Uniform1i(r,i.u_rotate_symbol),u_aspect_ratio:new n.Uniform1f(r,i.u_aspect_ratio),u_fade_change:new n.Uniform1f(r,i.u_fade_change),u_matrix:new n.UniformMatrix4f(r,i.u_matrix),u_label_plane_matrix:new n.UniformMatrix4f(r,i.u_label_plane_matrix),u_coord_matrix:new n.UniformMatrix4f(r,i.u_coord_matrix),u_is_text:new n.Uniform1i(r,i.u_is_text),u_pitch_with_map:new n.Uniform1i(r,i.u_pitch_with_map),u_texsize:new n.Uniform2f(r,i.u_texsize),u_texsize_icon:new n.Uniform2f(r,i.u_texsize_icon),u_texture:new n.Uniform1i(r,i.u_texture),u_texture_icon:new n.Uniform1i(r,i.u_texture_icon),u_gamma_scale:new n.Uniform1f(r,i.u_gamma_scale),u_device_pixel_ratio:new n.Uniform1f(r,i.u_device_pixel_ratio),u_is_halo:new n.Uniform1i(r,i.u_is_halo)};},background:function(r,i){return{u_matrix:new n.UniformMatrix4f(r,i.u_matrix),u_opacity:new n.Uniform1f(r,i.u_opacity),u_color:new n.UniformColor(r,i.u_color)};},backgroundPattern:function(r,i){return{u_matrix:new n.UniformMatrix4f(r,i.u_matrix),u_opacity:new n.Uniform1f(r,i.u_opacity),u_image:new n.Uniform1i(r,i.u_image),u_pattern_tl_a:new n.Uniform2f(r,i.u_pattern_tl_a),u_pattern_br_a:new n.Uniform2f(r,i.u_pattern_br_a),u_pattern_tl_b:new n.Uniform2f(r,i.u_pattern_tl_b),u_pattern_br_b:new n.Uniform2f(r,i.u_pattern_br_b),u_texsize:new n.Uniform2f(r,i.u_texsize),u_mix:new n.Uniform1f(r,i.u_mix),u_pattern_size_a:new n.Uniform2f(r,i.u_pattern_size_a),u_pattern_size_b:new n.Uniform2f(r,i.u_pattern_size_b),u_scale_a:new n.Uniform1f(r,i.u_scale_a),u_scale_b:new n.Uniform1f(r,i.u_scale_b),u_pixel_coord_upper:new n.Uniform2f(r,i.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(r,i.u_pixel_coord_lower),u_tile_units_to_pixels:new n.Uniform1f(r,i.u_tile_units_to_pixels)};}};function tH(r,i,a,o,s,l,u){for(var c=r.context,f=c.gl,d=r.useProgram("collisionBox"),h=[],p=0,m=0,g=0;g<o.length;g++){var v=o[g],y=i.getTile(v),_=y.getBucket(a);if(_){var b=v.posMatrix;0===s[0]&&0===s[1]||(b=r.translatePosMatrix(v.posMatrix,y,s,l));var x=u?_.textCollisionBox:_.iconCollisionBox,E=_.collisionCircleArray;if(E.length>0){var w=n.create(),S=b;n.mul(w,_.placementInvProjMatrix,r.transform.glCoordMatrix),n.mul(w,w,_.placementViewportMatrix),h.push({circleArray:E,circleOffset:m,transform:S,invTransform:w}),m=p+=E.length/4;}x&&d.draw(c,f.LINES,ex.disabled,eE.disabled,r.colorModeForRenderPass(),eS.disabled,tR(b,r.transform,y),a.id,x.layoutVertexBuffer,x.indexBuffer,x.segments,null,r.transform.zoom,null,null,x.collisionVertexBuffer);}}if(u&&h.length){var T=r.useProgram("collisionCircle"),A=new n.StructArrayLayout2f1f2i16;A.resize(4*p),A._trim();for(var C=0,O=0;O<h.length;O+=1)for(var M=h[O],R=0;R<M.circleArray.length/4;R++){var P=4*R,k=M.circleArray[P+0],I=M.circleArray[P+1],L=M.circleArray[P+2],N=M.circleArray[P+3];A.emplace(C++,k,I,L,N,0),A.emplace(C++,k,I,L,N,1),A.emplace(C++,k,I,L,N,2),A.emplace(C++,k,I,L,N,3);}(!tB||tB.length<2*p)&&(tB=function(r){var i=2*r,a=new n.StructArrayLayout3ui6;a.resize(i),a._trim();for(var o=0;o<i;o++){var s=6*o;a.uint16[s+0]=4*o+0,a.uint16[s+1]=4*o+1,a.uint16[s+2]=4*o+2,a.uint16[s+3]=4*o+2,a.uint16[s+4]=4*o+3,a.uint16[s+5]=4*o+0;}return a;}(p));for(var D=c.createIndexBuffer(tB,!0),F=c.createVertexBuffer(A,n.collisionCircleLayout.members,!0),B=0;B<h.length;B+=1){var j,z=h[B],U={u_matrix:z.transform,u_inv_matrix:z.invTransform,u_camera_to_center_distance:(j=r.transform).cameraToCenterDistance,u_viewport_size:[j.width,j.height]};T.draw(c,f.TRIANGLES,ex.disabled,eE.disabled,r.colorModeForRenderPass(),eS.disabled,U,a.id,F,D,n.SegmentVector.simpleSegment(0,2*z.circleOffset,z.circleArray.length,z.circleArray.length/2),null,r.transform.zoom,null,null,null);}F.destroy(),D.destroy();}}var tW=n.identity(new Float32Array(16));function tX(r,i,a,o,s,l,u,c,f,d,h,p){for(var m=r.context,g=m.gl,v=r.transform,y="map"===c,_="map"===f,b=y&&"point"!==a.layout.get("symbol-placement"),x=y&&!_&&!b,E=void 0!==a.layout.get("symbol-sort-key").constantOr(1),w=!1,S=r.depthModeForSublayer(0,ex.ReadOnly),T=a.layout.get("text-variable-anchor"),A=[],C=0;C<o.length;C+=1){var O=o[C],M=i.getTile(O),R=M.getBucket(a);if(R){var P=s?R.text:R.icon;if(P&&P.segments.get().length){var k,I,L,N=P.programConfigurations.get(a.id),D=s||R.sdfIcons,F=s?R.textSizeData:R.iconSizeData,B=_||0!==v.pitch,j=r.useProgram(R.iconsInText&&s?"symbolTextAndIcon":D?"symbolSDF":"symbolIcon",N),z=n.evaluateSizeForZoom(F,v.zoom),U=void 0,V=[0,0],G=void 0,H=void 0,W=null,X=void 0;if(s)G=M.glyphAtlasTexture,H=g.LINEAR,U=M.glyphAtlasTexture.size,R.iconsInText&&(V=M.imageAtlasTexture.size,W=M.imageAtlasTexture,X=B||r.options.rotating||r.options.zooming||"composite"===F.kind||"camera"===F.kind?g.LINEAR:g.NEAREST);else{var q=1!==a.layout.get("icon-size").constantOr(0)||R.iconsNeedLinear;G=M.imageAtlasTexture,H=D||r.options.rotating||r.options.zooming||q||B?g.LINEAR:g.NEAREST,U=M.imageAtlasTexture.size;}var $=e3(M,1,r.transform.zoom),Y=eH(O.posMatrix,_,y,r.transform,$),Z=eW(O.posMatrix,_,y,r.transform,$),K=T&&R.hasTextData(),Q="none"!==a.layout.get("icon-text-fit")&&K&&R.hasIconData();b&&function(r,i,a,o,s,l,u,c){var f=o?r.textSizeData:r.iconSizeData,d=n.evaluateSizeForZoom(f,a.transform.zoom),h=[256/a.width*2+1,256/a.height*2+1],p=o?r.text.dynamicLayoutVertexArray:r.icon.dynamicLayoutVertexArray;p.clear();for(var m=r.lineVertexArray,g=o?r.text.placedSymbolArray:r.icon.placedSymbolArray,v=a.transform.width/a.transform.height,y=!1,_=0;_<g.length;_++){var b=g.get(_);if(b.hidden||b.writingMode===n.WritingMode.vertical&&!y)e0(b.numGlyphs,p);else{y=!1;var x=[b.anchorX,b.anchorY,0,1];if(n.transformMat4(x,x,i),function(n,r){var i=n[0]/n[3],a=n[1]/n[3];return i>=-r[0]&&i<=r[0]&&a>=-r[1]&&a<=r[1];}(x,h)){var E=eq(a.transform.cameraToCenterDistance,x[3]),w=n.evaluateSizeForFeature(f,d,b),S=u?w/E:w*E,T=new n.Point(b.anchorX,b.anchorY),A=eX(T,s).point,C={},O=eZ(b,S,!1,c,i,s,l,r.glyphOffsetArray,m,p,A,T,C,v);y=O.useVertical,(O.notEnoughRoom||y||O.needsFlipping&&eZ(b,S,!0,c,i,s,l,r.glyphOffsetArray,m,p,A,T,C,v).notEnoughRoom)&&e0(b.numGlyphs,p);}else e0(b.numGlyphs,p);}}o?r.text.dynamicLayoutVertexBuffer.updateData(p):r.icon.dynamicLayoutVertexBuffer.updateData(p);}(R,O.posMatrix,r,s,Y,Z,_,d);var J=r.translatePosMatrix(O.posMatrix,M,l,u),ee=b||s&&T||Q?tW:Y,et=r.translatePosMatrix(Z,M,l,u,!0),en=D&&0!==a.paint.get(s?"text-halo-width":"icon-halo-width").constantOr(1),er={program:j,buffers:P,uniformValues:D?R.iconsInText?(k=F.kind,I=U,L=V,n.extend(tU(k,z,x,_,r,J,ee,et,!0,I,!0),{u_texsize_icon:L,u_texture_icon:1})):tU(F.kind,z,x,_,r,J,ee,et,s,U,!0):tz(F.kind,z,x,_,r,J,ee,et,s,U),atlasTexture:G,atlasTextureIcon:W,atlasInterpolation:H,atlasInterpolationIcon:X,isSDF:D,hasHalo:en};if(E&&R.canOverlap){w=!0;for(var ei=0,ea=P.segments.get();ei<ea.length;ei+=1){var eo=ea[ei];A.push({segments:new n.SegmentVector([eo]),sortKey:eo.sortKey,state:er});}}else A.push({segments:P.segments,sortKey:0,state:er});}}}w&&A.sort(function(n,r){return n.sortKey-r.sortKey;});for(var es=0;es<A.length;es+=1){var el=A[es],eu=el.state;if(m.activeTexture.set(g.TEXTURE0),eu.atlasTexture.bind(eu.atlasInterpolation,g.CLAMP_TO_EDGE),eu.atlasTextureIcon&&(m.activeTexture.set(g.TEXTURE1),eu.atlasTextureIcon&&eu.atlasTextureIcon.bind(eu.atlasInterpolationIcon,g.CLAMP_TO_EDGE)),eu.isSDF){var ec=eu.uniformValues;eu.hasHalo&&(ec.u_is_halo=1,tq(eu.buffers,el.segments,a,r,eu.program,S,h,p,ec)),ec.u_is_halo=0;}tq(eu.buffers,el.segments,a,r,eu.program,S,h,p,eu.uniformValues);}}function tq(n,r,i,a,o,s,l,u,c){var f=a.context;o.draw(f,f.gl.TRIANGLES,s,l,u,eS.disabled,c,i.id,n.layoutVertexBuffer,n.indexBuffer,r,i.paint,a.transform.zoom,n.programConfigurations.get(i.id),n.dynamicLayoutVertexBuffer,n.opacityVertexBuffer);}function t$(r,i,a,o,s,l,u){var c,f,d,h,p,m=r.context.gl,g=a.paint.get("fill-pattern"),v=g&&g.constantOr(1),y=a.getCrossfadeParameters();u?(f=v&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",c=m.LINES):(f=v?"fillPattern":"fill",c=m.TRIANGLES);for(var _=0;_<o.length;_+=1){var b=o[_],x=i.getTile(b);if(!v||x.patternsLoaded()){var E=x.getBucket(a);if(E){var w=E.programConfigurations.get(a.id),S=r.useProgram(f,w);v&&(r.context.activeTexture.set(m.TEXTURE0),x.imageAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),w.updatePaintBuffers(y));var T=g.constantOr(null);if(T&&x.imageAtlas){var A=x.imageAtlas,C=A.patternPositions[T.to.toString()],O=A.patternPositions[T.from.toString()];C&&O&&w.setConstantPatternPositions(C,O);}var M=r.translatePosMatrix(b.posMatrix,x,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor"));if(u){h=E.indexBuffer2,p=E.segments2;var R=[m.drawingBufferWidth,m.drawingBufferHeight];d="fillOutlinePattern"===f&&v?n.extend(tO(M,r,y,x),{u_world:R}):{u_matrix:M,u_world:R};}else h=E.indexBuffer,p=E.segments,d=v?tO(M,r,y,x):tC(M);S.draw(r.context,c,s,r.stencilModeForClipping(b),l,eS.disabled,d,a.id,E.layoutVertexBuffer,h,p,a.paint,r.transform.zoom,w);}}}}function tY(r,i,a,o,s,l,u){for(var c=r.context,f=c.gl,d=a.paint.get("fill-extrusion-pattern"),h=d.constantOr(1),p=a.getCrossfadeParameters(),m=a.paint.get("fill-extrusion-opacity"),g=0;g<o.length;g+=1){var v=o[g],y=i.getTile(v),_=y.getBucket(a);if(_){var b=_.programConfigurations.get(a.id),x=r.useProgram(h?"fillExtrusionPattern":"fillExtrusion",b);h&&(r.context.activeTexture.set(f.TEXTURE0),y.imageAtlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE),b.updatePaintBuffers(p));var E=d.constantOr(null);if(E&&y.imageAtlas){var w=y.imageAtlas,S=w.patternPositions[E.to.toString()],T=w.patternPositions[E.from.toString()];S&&T&&b.setConstantPatternPositions(S,T);}var A=r.translatePosMatrix(v.posMatrix,y,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),C=a.paint.get("fill-extrusion-vertical-gradient"),O=h?n.extend(tA(A,r,C,m),tT(p,r,y),{u_height_factor:-Math.pow(2,v.overscaledZ)/y.tileSize/8}):tA(A,r,C,m);x.draw(c,c.gl.TRIANGLES,s,l,u,eS.backCCW,O,a.id,_.layoutVertexBuffer,_.indexBuffer,_.segments,a.paint,r.transform.zoom,b);}}}var tZ=new n.Color(1,0,0,1),tK=new n.Color(0,1,0,1),tQ=new n.Color(0,0,1,1),tJ=new n.Color(1,0,1,1),t0=new n.Color(0,1,1,1);function t1(n,r,i,a){t3(n,0,r+i/2,n.transform.width,i,a);}function t2(n,r,i,a){t3(n,r-i/2,0,i,n.transform.height,a);}function t3(r,i,a,o,s,l){var u=r.context,c=u.gl;c.enable(c.SCISSOR_TEST),c.scissor(i*n.browser.devicePixelRatio,a*n.browser.devicePixelRatio,o*n.browser.devicePixelRatio,s*n.browser.devicePixelRatio),u.clear({color:l}),c.disable(c.SCISSOR_TEST);}var t4={symbol:function(r,i,a,o,s){if("translucent"===r.renderPass){var l=eE.disabled,u=r.colorModeForRenderPass();a.layout.get("text-variable-anchor")&&function(r,i,a,o,s,l,u){for(var c=i.transform,f="map"===s,d="map"===l,h=0;h<r.length;h+=1){var p=r[h],m=o.getTile(p),g=m.getBucket(a);if(g&&g.text&&g.text.segments.get().length){var v=n.evaluateSizeForZoom(g.textSizeData,c.zoom),y=e3(m,1,i.transform.zoom),_=eH(p.posMatrix,d,f,i.transform,y),b="none"!==a.layout.get("icon-text-fit")&&g.hasIconData();if(v){var x=Math.pow(2,c.zoom-m.tileID.overscaledZ);(function(r,i,a,o,s,l,u,c,f,d,h){var p=r.text.placedSymbolArray,m=r.text.dynamicLayoutVertexArray,g=r.icon.dynamicLayoutVertexArray,v={};m.clear();for(var y=0;y<p.length;y++){var _=p.get(y),b=_.hidden||!_.crossTileID||r.allowVerticalPlacement&&!_.placedOrientation?null:o[_.crossTileID];if(b){var x=new n.Point(_.anchorX,_.anchorY),E=eX(x,a?c:u),w=eq(l.cameraToCenterDistance,E.signedDistanceFromCamera),S=s.evaluateSizeForFeature(r.textSizeData,d,_)*w/n.ONE_EM;a&&(S*=r.tilePixelRatio/f);for(var T=function(r,i,a,o,s,l){var u=n.getAnchorAlignment(r),c=-(u.horizontalAlign-.5)*i,f=-(u.verticalAlign-.5)*a,d=n.evaluateVariableOffset(r,o);return new n.Point((c/s+d[0])*l,(f/s+d[1])*l);}(b.anchor,b.width,b.height,b.textOffset,b.textBoxScale,S),A=a?eX(x.add(T),u).point:E.point.add(i?T.rotate(-l.angle):T),C=r.allowVerticalPlacement&&_.placedOrientation===n.WritingMode.vertical?Math.PI/2:0,O=0;O<_.numGlyphs;O++)n.addDynamicAttributes(m,A,C);h&&_.associatedIconIndex>=0&&(v[_.associatedIconIndex]={shiftedAnchor:A,angle:C});}else e0(_.numGlyphs,m);}if(h){g.clear();for(var M=r.icon.placedSymbolArray,R=0;R<M.length;R++){var P=M.get(R);if(P.hidden)e0(P.numGlyphs,g);else{var k=v[R];if(k)for(var I=0;I<P.numGlyphs;I++)n.addDynamicAttributes(g,k.shiftedAnchor,k.angle);else e0(P.numGlyphs,g);}}r.icon.dynamicLayoutVertexBuffer.updateData(g);}r.text.dynamicLayoutVertexBuffer.updateData(m);})(g,f,d,u,n.symbolSize,c,_,p.posMatrix,x,v,b);}}}}(o,r,a,i,a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),s),0!==a.paint.get("icon-opacity").constantOr(1)&&tX(r,i,a,o,!1,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),a.layout.get("icon-rotation-alignment"),a.layout.get("icon-pitch-alignment"),a.layout.get("icon-keep-upright"),l,u),0!==a.paint.get("text-opacity").constantOr(1)&&tX(r,i,a,o,!0,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),a.layout.get("text-keep-upright"),l,u),i.map.showCollisionBoxes&&(tH(r,i,a,o,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),!0),tH(r,i,a,o,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),!1));}},circle:function(r,i,a,o){if("translucent"===r.renderPass){var s=a.paint.get("circle-opacity"),l=a.paint.get("circle-stroke-width"),u=a.paint.get("circle-stroke-opacity"),c=void 0!==a.layout.get("circle-sort-key").constantOr(1);if(0!==s.constantOr(1)||0!==l.constantOr(1)&&0!==u.constantOr(1)){for(var f=r.context,d=f.gl,h=r.depthModeForSublayer(0,ex.ReadOnly),p=eE.disabled,m=r.colorModeForRenderPass(),g=[],v=0;v<o.length;v++){var y=o[v],_=i.getTile(y),b=_.getBucket(a);if(b){var x=b.programConfigurations.get(a.id),E={programConfiguration:x,program:r.useProgram("circle",x),layoutVertexBuffer:b.layoutVertexBuffer,indexBuffer:b.indexBuffer,uniformValues:tM(r,y,_,a)};if(c)for(var w=0,S=b.segments.get();w<S.length;w+=1){var T=S[w];g.push({segments:new n.SegmentVector([T]),sortKey:T.sortKey,state:E});}else g.push({segments:b.segments,sortKey:0,state:E});}}c&&g.sort(function(n,r){return n.sortKey-r.sortKey;});for(var A=0;A<g.length;A+=1){var C=g[A],O=C.state;O.program.draw(f,d.TRIANGLES,h,p,m,eS.disabled,O.uniformValues,a.id,O.layoutVertexBuffer,O.indexBuffer,C.segments,a.paint,r.transform.zoom,O.programConfiguration);}}}},heatmap:function(r,i,a,o){if(0!==a.paint.get("heatmap-opacity")){if("offscreen"===r.renderPass){var s=r.context,l=s.gl,u=eE.disabled,c=new ew([l.ONE,l.ONE],n.Color.transparent,[!0,!0,!0,!0]);(function(n,r,i){var a=n.gl;n.activeTexture.set(a.TEXTURE1),n.viewport.set([0,0,r.width/4,r.height/4]);var o=i.heatmapFbo;if(o)a.bindTexture(a.TEXTURE_2D,o.colorAttachment.get()),n.bindFramebuffer.set(o.framebuffer);else{var s,l,u=a.createTexture();a.bindTexture(a.TEXTURE_2D,u),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),s=o=i.heatmapFbo=n.createFramebuffer(r.width/4,r.height/4,!1),(l=n.gl).texImage2D(l.TEXTURE_2D,0,l.RGBA,r.width/4,r.height/4,0,l.RGBA,n.extRenderToTextureHalfFloat?n.extTextureHalfFloat.HALF_FLOAT_OES:l.UNSIGNED_BYTE,null),s.colorAttachment.set(u);}})(s,r,a),s.clear({color:n.Color.transparent});for(var f=0;f<o.length;f++){var d=o[f];if(!i.hasRenderableParent(d)){var h=i.getTile(d),p=h.getBucket(a);if(p){var m,g,v,y=p.programConfigurations.get(a.id);r.useProgram("heatmap",y).draw(s,l.TRIANGLES,ex.disabled,u,c,eS.disabled,(m=d.posMatrix,g=r.transform.zoom,v=a.paint.get("heatmap-intensity"),{u_matrix:m,u_extrude_scale:e3(h,1,g),u_intensity:v}),a.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,a.paint,r.transform.zoom,y);}}}s.viewport.set([0,0,r.width,r.height]);}else"translucent"===r.renderPass&&(r.context.setColorMode(r.colorModeForRenderPass()),function(r,i){var a=r.context,o=a.gl,s=i.heatmapFbo;if(s){a.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,s.colorAttachment.get()),a.activeTexture.set(o.TEXTURE1);var l,u,c=i.colorRampTexture;c||(c=i.colorRampTexture=new n.Texture(a,i.colorRamp,o.RGBA)),c.bind(o.LINEAR,o.CLAMP_TO_EDGE),r.useProgram("heatmapTexture").draw(a,o.TRIANGLES,ex.disabled,eE.disabled,r.colorModeForRenderPass(),eS.disabled,(l=n.create(),n.ortho(l,0,r.width,r.height,0,0,1),{u_matrix:l,u_world:[(u=r.context.gl).drawingBufferWidth,u.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:i.paint.get("heatmap-opacity")}),i.id,r.viewportBuffer,r.quadTriangleIndexBuffer,r.viewportSegments,i.paint,r.transform.zoom);}}(r,a));}},line:function(r,i,a,o){if("translucent"===r.renderPass){var s=a.paint.get("line-opacity"),l=a.paint.get("line-width");if(0!==s.constantOr(1)&&0!==l.constantOr(1))for(var u=r.depthModeForSublayer(0,ex.ReadOnly),c=r.colorModeForRenderPass(),f=a.paint.get("line-dasharray"),d=a.paint.get("line-pattern"),h=d.constantOr(1),p=a.paint.get("line-gradient"),m=a.getCrossfadeParameters(),g=h?"linePattern":f?"lineSDF":p?"lineGradient":"line",v=r.context,y=v.gl,_=!0,b=0;b<o.length;b+=1){var x=o[b],E=i.getTile(x);if(!h||E.patternsLoaded()){var w=E.getBucket(a);if(w){var S,T=w.programConfigurations.get(a.id),A=r.context.program.get(),C=r.useProgram(g,T),O=_||C.program!==A,M=d.constantOr(null);if(M&&E.imageAtlas){var R=E.imageAtlas,P=R.patternPositions[M.to.toString()],k=R.patternPositions[M.from.toString()];P&&k&&T.setConstantPatternPositions(P,k);}var I=h?tL(r,E,a,m):f?tN(r,E,a,f,m):p?(S=w.lineClipsArray.length,n.extend(tI(r,E,a),{u_image:0,u_image_height:S})):tI(r,E,a);if(h)v.activeTexture.set(y.TEXTURE0),E.imageAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),T.updatePaintBuffers(m);else if(f&&(O||r.lineAtlas.dirty))v.activeTexture.set(y.TEXTURE0),r.lineAtlas.bind(v);else if(p){var L=w.gradients[a.id],N=L.texture;if(a.gradientVersion!==L.version){var D=256;if(a.stepInterpolant){var F=i.getSource().maxzoom,B=x.canonical.z===F?Math.ceil(1<<r.transform.maxZoom-x.canonical.z):1;D=n.clamp(n.nextPowerOfTwo(w.maxLineLength/n.EXTENT*1024*B),256,v.maxTextureSize);}L.gradient=n.renderColorRamp({expression:a.gradientExpression(),evaluationKey:"lineProgress",resolution:D,image:L.gradient||void 0,clips:w.lineClipsArray}),L.texture?L.texture.update(L.gradient):L.texture=new n.Texture(v,L.gradient,y.RGBA),L.version=a.gradientVersion,N=L.texture;}v.activeTexture.set(y.TEXTURE0),N.bind(a.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE);}C.draw(v,y.TRIANGLES,u,r.stencilModeForClipping(x),c,eS.disabled,I,a.id,w.layoutVertexBuffer,w.indexBuffer,w.segments,a.paint,r.transform.zoom,T,w.layoutVertexBuffer2),_=!1;}}}}},fill:function(r,i,a,o){var s=a.paint.get("fill-color"),l=a.paint.get("fill-opacity");if(0!==l.constantOr(1)){var u=r.colorModeForRenderPass(),c=a.paint.get("fill-pattern"),f=r.opaquePassEnabledForLayer()&&!c.constantOr(1)&&1===s.constantOr(n.Color.transparent).a&&1===l.constantOr(0)?"opaque":"translucent";if(r.renderPass===f){var d=r.depthModeForSublayer(1,"opaque"===r.renderPass?ex.ReadWrite:ex.ReadOnly);t$(r,i,a,o,d,u,!1);}if("translucent"===r.renderPass&&a.paint.get("fill-antialias")){var h=r.depthModeForSublayer(a.getPaintProperty("fill-outline-color")?2:0,ex.ReadOnly);t$(r,i,a,o,h,u,!0);}}},"fill-extrusion":function(n,r,i,a){var o=i.paint.get("fill-extrusion-opacity");if(0!==o&&"translucent"===n.renderPass){var s=new ex(n.context.gl.LEQUAL,ex.ReadWrite,n.depthRangeFor3D);if(1!==o||i.paint.get("fill-extrusion-pattern").constantOr(1))tY(n,r,i,a,s,eE.disabled,ew.disabled),tY(n,r,i,a,s,n.stencilModeFor3D(),n.colorModeForRenderPass());else{var l=n.colorModeForRenderPass();tY(n,r,i,a,s,eE.disabled,l);}}},hillshade:function(r,i,a,o){if("offscreen"===r.renderPass||"translucent"===r.renderPass){for(var s=r.context,l=r.depthModeForSublayer(0,ex.ReadOnly),u=r.colorModeForRenderPass(),c="translucent"===r.renderPass?r.stencilConfigForOverlap(o):[{},o],f=c[0],d=0,h=c[1];d<h.length;d+=1){var p=h[d],m=i.getTile(p);m.needsHillshadePrepare&&"offscreen"===r.renderPass?function(r,i,a,o,s,l){var u=r.context,c=u.gl,f=i.dem;if(f&&f.data){var d,h,p,m=f.dim,g=f.stride,v=f.getPixels();if(u.activeTexture.set(c.TEXTURE1),u.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||r.getTileTexture(g),i.demTexture){var y=i.demTexture;y.update(v,{premultiply:!1}),y.bind(c.NEAREST,c.CLAMP_TO_EDGE);}else i.demTexture=new n.Texture(u,v,c.RGBA,{premultiply:!1}),i.demTexture.bind(c.NEAREST,c.CLAMP_TO_EDGE);u.activeTexture.set(c.TEXTURE0);var _=i.fbo;if(!_){var b=new n.Texture(u,{width:m,height:m,data:null},c.RGBA);b.bind(c.LINEAR,c.CLAMP_TO_EDGE),(_=i.fbo=u.createFramebuffer(m,m,!0)).colorAttachment.set(b.texture);}u.bindFramebuffer.set(_.framebuffer),u.viewport.set([0,0,m,m]),r.useProgram("hillshadePrepare").draw(u,c.TRIANGLES,o,s,l,eS.disabled,(d=i.tileID,h=f.stride,p=n.create(),n.ortho(p,0,n.EXTENT,-n.EXTENT,0,0,1),n.translate(p,p,[0,-n.EXTENT,0]),{u_matrix:p,u_image:1,u_dimension:[h,h],u_zoom:d.overscaledZ,u_unpack:f.getUnpackVector()}),a.id,r.rasterBoundsBuffer,r.quadTriangleIndexBuffer,r.rasterBoundsSegments),i.needsHillshadePrepare=!1;}}(r,m,a,l,eE.disabled,u):"translucent"===r.renderPass&&function(r,i,a,o,s,l){var u=r.context,c=u.gl,f=i.fbo;if(f){var d,h,p,m,g,v,y,_,b=r.useProgram("hillshade");u.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,f.colorAttachment.get());var x=(d=a.paint.get("hillshade-shadow-color"),h=a.paint.get("hillshade-highlight-color"),p=a.paint.get("hillshade-accent-color"),m=a.paint.get("hillshade-illumination-direction")*(Math.PI/180),"viewport"===a.paint.get("hillshade-illumination-anchor")&&(m-=r.transform.angle),_=!r.options.moving,{u_matrix:r.transform.calculatePosMatrix(i.tileID.toUnwrapped(),_),u_image:0,u_latrange:(v=Math.pow(2,(g=i.tileID).canonical.z),y=g.canonical.y,[new n.MercatorCoordinate(0,y/v).toLngLat().lat,new n.MercatorCoordinate(0,(y+1)/v).toLngLat().lat]),u_light:[a.paint.get("hillshade-exaggeration"),m],u_shadow:d,u_highlight:h,u_accent:p});b.draw(u,c.TRIANGLES,o,s,l,eS.disabled,x,a.id,r.rasterBoundsBuffer,r.quadTriangleIndexBuffer,r.rasterBoundsSegments);}}(r,m,a,l,f[p.overscaledZ],u);}s.viewport.set([0,0,r.width,r.height]);}},raster:function(r,i,a,o){if("translucent"===r.renderPass&&0!==a.paint.get("raster-opacity")&&o.length)for(var s=r.context,l=s.gl,u=i.getSource(),c=r.useProgram("raster"),f=r.colorModeForRenderPass(),d=u instanceof R?[{},o]:r.stencilConfigForOverlap(o),h=d[0],p=d[1],m=p[p.length-1].overscaledZ,g=!r.options.moving,v=0;v<p.length;v+=1){var y=p[v],_=r.depthModeForSublayer(y.overscaledZ-m,1===a.paint.get("raster-opacity")?ex.ReadWrite:ex.ReadOnly,l.LESS),b=i.getTile(y),x=r.transform.calculatePosMatrix(y.toUnwrapped(),g);b.registerFadeDuration(a.paint.get("raster-fade-duration"));var E=i.findLoadedParent(y,0),w=function(r,i,a,o,s){var l=o.paint.get("raster-fade-duration");if(l>0){var u=n.browser.now(),c=(u-r.timeAdded)/l,f=i?(u-i.timeAdded)/l:-1,d=a.getSource(),h=s.coveringZoomLevel({tileSize:d.tileSize,roundZoom:d.roundZoom}),p=!i||Math.abs(i.tileID.overscaledZ-h)>Math.abs(r.tileID.overscaledZ-h),m=p&&r.refreshedUponExpiration?1:n.clamp(p?c:1-f,0,1);return r.refreshedUponExpiration&&c>=1&&(r.refreshedUponExpiration=!1),i?{opacity:1,mix:1-m}:{opacity:m,mix:0};}return{opacity:1,mix:0};}(b,E,i,a,r.transform),S=void 0,T=void 0,A="nearest"===a.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;s.activeTexture.set(l.TEXTURE0),b.texture.bind(A,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),s.activeTexture.set(l.TEXTURE1),E?(E.texture.bind(A,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),S=Math.pow(2,E.tileID.overscaledZ-b.tileID.overscaledZ),T=[b.tileID.canonical.x*S%1,b.tileID.canonical.y*S%1]):b.texture.bind(A,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST);var C=tj(x,T||[0,0],S||1,w,a);u instanceof R?c.draw(s,l.TRIANGLES,_,eE.disabled,f,eS.disabled,C,a.id,u.boundsBuffer,r.quadTriangleIndexBuffer,u.boundsSegments):c.draw(s,l.TRIANGLES,_,h[y.overscaledZ],f,eS.disabled,C,a.id,r.rasterBoundsBuffer,r.quadTriangleIndexBuffer,r.rasterBoundsSegments);}},background:function(n,r,i){var a=i.paint.get("background-color"),o=i.paint.get("background-opacity");if(0!==o){var s=n.context,l=s.gl,u=n.transform,c=u.tileSize,f=i.paint.get("background-pattern");if(!n.isPatternMissing(f)){var d=!f&&1===a.a&&1===o&&n.opaquePassEnabledForLayer()?"opaque":"translucent";if(n.renderPass===d){var h=eE.disabled,p=n.depthModeForSublayer(0,"opaque"===d?ex.ReadWrite:ex.ReadOnly),m=n.colorModeForRenderPass(),g=n.useProgram(f?"backgroundPattern":"background"),v=u.coveringTiles({tileSize:c});f&&(s.activeTexture.set(l.TEXTURE0),n.imageManager.bind(n.context));for(var y=i.getCrossfadeParameters(),_=0;_<v.length;_+=1){var b=v[_],x=n.transform.calculatePosMatrix(b.toUnwrapped()),E=f?tV(x,o,n,f,{tileID:b,tileSize:c},y):{u_matrix:x,u_opacity:o,u_color:a};g.draw(s,l.TRIANGLES,p,h,m,eS.disabled,E,i.id,n.tileExtentBuffer,n.quadTriangleIndexBuffer,n.tileExtentSegments);}}}}},debug:function(r,i,a){for(var o=0;o<a.length;o++)!function(r,i,a){var o=r.context,s=o.gl,l=a.posMatrix,u=r.useProgram("debug"),c=ex.disabled,f=eE.disabled,d=r.colorModeForRenderPass();o.activeTexture.set(s.TEXTURE0),r.emptyTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),u.draw(o,s.LINE_STRIP,c,f,d,eS.disabled,tP(l,n.Color.red),"$debug",r.debugBuffer,r.tileBorderIndexBuffer,r.debugSegments);var h=i.getTileByID(a.key).latestRawTileData,p=Math.floor((h&&h.byteLength||0)/1024),m=512/Math.min(i.getTile(a).tileSize,512)*(a.overscaledZ/r.transform.zoom)*.5,g=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(g+=" => "+a.overscaledZ),function(n,r){n.initDebugOverlayCanvas();var i=n.debugOverlayCanvas,a=n.context.gl,o=n.debugOverlayCanvas.getContext("2d");o.clearRect(0,0,i.width,i.height),o.shadowColor="white",o.shadowBlur=2,o.lineWidth=1.5,o.strokeStyle="white",o.textBaseline="top",o.font="bold 36px Open Sans, sans-serif",o.fillText(r,5,5),o.strokeText(r,5,5),n.debugOverlayTexture.update(i),n.debugOverlayTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE);}(r,g+" "+p+"kb"),u.draw(o,s.TRIANGLES,c,f,ew.alphaBlended,eS.disabled,tP(l,n.Color.transparent,m),"$debug",r.debugBuffer,r.quadTriangleIndexBuffer,r.debugSegments);}(r,i,a[o]);},custom:function(n,r,i){var a=n.context,o=i.implementation;if("offscreen"===n.renderPass){var s=o.prerender;s&&(n.setCustomLayerDefaults(),a.setColorMode(n.colorModeForRenderPass()),s.call(o,a.gl,n.transform.customLayerMatrix()),a.setDirty(),n.setBaseState());}else if("translucent"===n.renderPass){n.setCustomLayerDefaults(),a.setColorMode(n.colorModeForRenderPass()),a.setStencilMode(eE.disabled);var l="3d"===o.renderingMode?new ex(n.context.gl.LEQUAL,ex.ReadWrite,n.depthRangeFor3D):n.depthModeForSublayer(0,ex.ReadOnly);a.setDepthMode(l),o.render(a.gl,n.transform.customLayerMatrix()),a.setDirty(),n.setBaseState(),a.bindFramebuffer.set(null);}}},t5=function(n,r){this.context=new eT(n),this.transform=r,this._tileTextures={},this.setup(),this.numSublayers=eA.maxUnderzooming+eA.maxOverzooming+1,this.depthEpsilon=1/65536,this.crossTileSymbolIndex=new td,this.gpuTimers={};};t5.prototype.resize=function(r,i){if(this.width=r*n.browser.devicePixelRatio,this.height=i*n.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var a=0,o=this.style._order;a<o.length;a+=1)this.style._layers[o[a]].resize();},t5.prototype.setup=function(){var r=this.context,i=new n.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(n.EXTENT,0),i.emplaceBack(0,n.EXTENT),i.emplaceBack(n.EXTENT,n.EXTENT),this.tileExtentBuffer=r.createVertexBuffer(i,ty.members),this.tileExtentSegments=n.SegmentVector.simpleSegment(0,0,4,2);var a=new n.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(n.EXTENT,0),a.emplaceBack(0,n.EXTENT),a.emplaceBack(n.EXTENT,n.EXTENT),this.debugBuffer=r.createVertexBuffer(a,ty.members),this.debugSegments=n.SegmentVector.simpleSegment(0,0,4,5);var o=new n.StructArrayLayout4i8;o.emplaceBack(0,0,0,0),o.emplaceBack(n.EXTENT,0,n.EXTENT,0),o.emplaceBack(0,n.EXTENT,0,n.EXTENT),o.emplaceBack(n.EXTENT,n.EXTENT,n.EXTENT,n.EXTENT),this.rasterBoundsBuffer=r.createVertexBuffer(o,M.members),this.rasterBoundsSegments=n.SegmentVector.simpleSegment(0,0,4,2);var s=new n.StructArrayLayout2i4;s.emplaceBack(0,0),s.emplaceBack(1,0),s.emplaceBack(0,1),s.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(s,ty.members),this.viewportSegments=n.SegmentVector.simpleSegment(0,0,4,2);var l=new n.StructArrayLayout1ui2;l.emplaceBack(0),l.emplaceBack(1),l.emplaceBack(3),l.emplaceBack(2),l.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(l);var u=new n.StructArrayLayout3ui6;u.emplaceBack(0,1,2),u.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(u),this.emptyTexture=new n.Texture(r,{width:1,height:1,data:new Uint8Array([0,0,0,0])},r.gl.RGBA);var c=this.context.gl;this.stencilClearMode=new eE({func:c.ALWAYS,mask:0},0,255,c.ZERO,c.ZERO,c.ZERO);},t5.prototype.clearStencil=function(){var r=this.context,i=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var a=n.create();n.ortho(a,0,this.width,this.height,0,0,1),n.scale(a,a,[i.drawingBufferWidth,i.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,i.TRIANGLES,ex.disabled,this.stencilClearMode,ew.disabled,eS.disabled,tk(a),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments);},t5.prototype._renderTileClippingMasks=function(n,r){if(this.currentStencilSource!==n.source&&n.isTileClipped()&&r&&r.length){this.currentStencilSource=n.source;var i=this.context,a=i.gl;this.nextStencilID+r.length>256&&this.clearStencil(),i.setColorMode(ew.disabled),i.setDepthMode(ex.disabled);var o=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var s=0;s<r.length;s+=1){var l=r[s],u=this._tileClippingMaskIDs[l.key]=this.nextStencilID++;o.draw(i,a.TRIANGLES,ex.disabled,new eE({func:a.ALWAYS,mask:0},u,255,a.KEEP,a.KEEP,a.REPLACE),ew.disabled,eS.disabled,tk(l.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments);}}},t5.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var n=this.nextStencilID++,r=this.context.gl;return new eE({func:r.NOTEQUAL,mask:255},n,255,r.KEEP,r.KEEP,r.REPLACE);},t5.prototype.stencilModeForClipping=function(n){var r=this.context.gl;return new eE({func:r.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,r.KEEP,r.KEEP,r.REPLACE);},t5.prototype.stencilConfigForOverlap=function(n){var r,i=this.context.gl,a=n.sort(function(n,r){return r.overscaledZ-n.overscaledZ;}),o=a[a.length-1].overscaledZ,s=a[0].overscaledZ-o+1;if(s>1){this.currentStencilSource=void 0,this.nextStencilID+s>256&&this.clearStencil();for(var l={},u=0;u<s;u++)l[u+o]=new eE({func:i.GEQUAL,mask:255},u+this.nextStencilID,255,i.KEEP,i.KEEP,i.REPLACE);return this.nextStencilID+=s,[l,a];}return[((r={})[o]=eE.disabled,r),a];},t5.prototype.colorModeForRenderPass=function(){var r=this.context.gl;return this._showOverdrawInspector?new ew([r.CONSTANT_COLOR,r.ONE],new n.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?ew.unblended:ew.alphaBlended;},t5.prototype.depthModeForSublayer=function(n,r,i){if(!this.opaquePassEnabledForLayer())return ex.disabled;var a=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new ex(i||this.context.gl.LEQUAL,r,[a,a]);},t5.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff;},t5.prototype.render=function(r,i){var a,o,s,l,u=this;this.style=r,this.options=i,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(n.browser.now()),this.imageManager.beginFrame();var c=this.style._order,f=this.style.sourceCaches;for(var d in f){var h=f[d];h.used&&h.prepare(this.context);}var p,m,g={},v={},y={};for(var _ in f){var b=f[_];g[_]=b.getVisibleCoordinates(),v[_]=g[_].slice().reverse(),y[_]=b.getVisibleCoordinates(!0).reverse();}this.opaquePassCutoff=1/0;for(var x=0;x<c.length;x++)if(this.style._layers[c[x]].is3D()){this.opaquePassCutoff=x;break;}this.renderPass="offscreen";for(var E=0;E<c.length;E+=1){var w=this.style._layers[c[E]];if(w.hasOffscreenPass()&&!w.isHidden(this.transform.zoom)){var S=v[w.source];("custom"===w.type||S.length)&&this.renderLayer(this,f[w.source],w,S);}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:i.showOverdrawInspector?n.Color.black:n.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=i.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=c.length-1;this.currentLayer>=0;this.currentLayer--){var T=this.style._layers[c[this.currentLayer]],A=f[T.source],C=g[T.source];this._renderTileClippingMasks(T,C),this.renderLayer(this,A,T,C);}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<c.length;this.currentLayer++){var O=this.style._layers[c[this.currentLayer]],M=f[O.source],R=("symbol"===O.type?y:v)[O.source];this._renderTileClippingMasks(O,g[O.source]),this.renderLayer(this,M,O,R);}this.options.showTileBoundaries&&(n.values(this.style._layers).forEach(function(n){n.source&&!n.isHidden(u.transform.zoom)&&(n.source!==(m&&m.id)&&(m=u.style.sourceCaches[n.source]),(!p||p.getSource().maxzoom<m.getSource().maxzoom)&&(p=m));}),p&&t4.debug(this,p,p.getVisibleCoordinates())),this.options.showPadding&&(a=this.transform.padding,t1(this,this.transform.height-(a.top||0),3,tZ),t1(this,a.bottom||0,3,tK),t2(this,a.left||0,3,tQ),t2(this,this.transform.width-(a.right||0),3,tJ),t3(this,(s=(o=this.transform.centerPoint).x)-1,(l=this.transform.height-o.y)-10,2,20,t0),t3(this,s-10,l-1,20,2,t0)),this.context.setDefault();},t5.prototype.renderLayer=function(n,r,i,a){i.isHidden(this.transform.zoom)||("background"===i.type||"custom"===i.type||a.length)&&(this.id=i.id,this.gpuTimingStart(i),t4[i.type](n,r,i,a,this.style.placement.variableOffsets),this.gpuTimingEnd());},t5.prototype.gpuTimingStart=function(n){if(this.options.gpuTiming){var r=this.context.extTimerQuery,i=this.gpuTimers[n.id];i||(i=this.gpuTimers[n.id]={calls:0,cpuTime:0,query:r.createQueryEXT()}),i.calls++,r.beginQueryEXT(r.TIME_ELAPSED_EXT,i.query);}},t5.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var n=this.context.extTimerQuery;n.endQueryEXT(n.TIME_ELAPSED_EXT);}},t5.prototype.collectGpuTimers=function(){var n=this.gpuTimers;return this.gpuTimers={},n;},t5.prototype.queryGpuTimers=function(n){var r={};for(var i in n){var a=n[i],o=this.context.extTimerQuery,s=o.getQueryObjectEXT(a.query,o.QUERY_RESULT_EXT)/1e6;o.deleteQueryEXT(a.query),r[i]=s;}return r;},t5.prototype.translatePosMatrix=function(r,i,a,o,s){if(!a[0]&&!a[1])return r;var l=s?"map"===o?this.transform.angle:0:"viewport"===o?-this.transform.angle:0;if(l){var u=Math.sin(l),c=Math.cos(l);a=[a[0]*c-a[1]*u,a[0]*u+a[1]*c];}var f=[s?a[0]:e3(i,a[0],this.transform.zoom),s?a[1]:e3(i,a[1],this.transform.zoom),0],d=new Float32Array(16);return n.translate(d,r,f),d;},t5.prototype.saveTileTexture=function(n){var r=this._tileTextures[n.size[0]];r?r.push(n):this._tileTextures[n.size[0]]=[n];},t5.prototype.getTileTexture=function(n){var r=this._tileTextures[n];return r&&r.length>0?r.pop():null;},t5.prototype.isPatternMissing=function(n){if(!n)return!1;if(!n.from||!n.to)return!0;var r=this.imageManager.getPattern(n.from.toString()),i=this.imageManager.getPattern(n.to.toString());return!r||!i;},t5.prototype.useProgram=function(n,r){this.cache=this.cache||{};var i=""+n+(r?r.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[i]||(this.cache[i]=new tS(this.context,n,tx[n],r,tG[n],this._showOverdrawInspector)),this.cache[i];},t5.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault();},t5.prototype.setBaseState=function(){var n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD);},t5.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=n.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new n.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA));},t5.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy();};var t6=function(n,r){this.points=n,this.planes=r;};t6.fromInvProjectionMatrix=function(r,i,a){var o=Math.pow(2,a),s=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(i){return n.transformMat4([],i,r);}).map(function(r){return n.scale$1([],r,1/r[3]/i*o);}),l=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(r){var i=n.sub([],s[r[0]],s[r[1]]),a=n.sub([],s[r[2]],s[r[1]]),o=n.normalize([],n.cross([],i,a)),l=-n.dot(o,s[r[1]]);return o.concat(l);});return new t6(s,l);};var t8=function(r,i){this.min=r,this.max=i,this.center=n.scale$2([],n.add([],this.min,this.max),.5);};t8.prototype.quadrant=function(r){for(var i=[r%2==0,r<2],a=n.clone$2(this.min),o=n.clone$2(this.max),s=0;s<i.length;s++)a[s]=i[s]?this.min[s]:this.center[s],o[s]=i[s]?this.center[s]:this.max[s];return o[2]=this.max[2],new t8(a,o);},t8.prototype.distanceX=function(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0];},t8.prototype.distanceY=function(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1];},t8.prototype.intersects=function(r){for(var i=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],a=!0,o=0;o<r.planes.length;o++){for(var s=r.planes[o],l=0,u=0;u<i.length;u++)l+=n.dot$1(s,i[u])>=0;if(0===l)return 0;l!==i.length&&(a=!1);}if(a)return 2;for(var c=0;c<3;c++){for(var f=Number.MAX_VALUE,d=-Number.MAX_VALUE,h=0;h<r.points.length;h++){var p=r.points[h][c]-this.min[c];f=Math.min(f,p),d=Math.max(d,p);}if(d<0||f>this.max[c]-this.min[c])return 0;}return 1;};var t7=function(n,r,i,a){if(void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=0),isNaN(n)||n<0||isNaN(r)||r<0||isNaN(i)||i<0||isNaN(a)||a<0)throw Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=r,this.left=i,this.right=a;};t7.prototype.interpolate=function(r,i,a){return null!=i.top&&null!=r.top&&(this.top=n.number(r.top,i.top,a)),null!=i.bottom&&null!=r.bottom&&(this.bottom=n.number(r.bottom,i.bottom,a)),null!=i.left&&null!=r.left&&(this.left=n.number(r.left,i.left,a)),null!=i.right&&null!=r.right&&(this.right=n.number(r.right,i.right,a)),this;},t7.prototype.getCenter=function(r,i){var a=n.clamp((this.left+r-this.right)/2,0,r),o=n.clamp((this.top+i-this.bottom)/2,0,i);return new n.Point(a,o);},t7.prototype.equals=function(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right;},t7.prototype.clone=function(){return new t7(this.top,this.bottom,this.left,this.right);},t7.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right};};var t9=function(r,i,a,o,s){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===s||s,this._minZoom=r||0,this._maxZoom=i||22,this._minPitch=null==a?0:a,this._maxPitch=null==o?60:o,this.setMaxBounds(),this.width=0,this.height=0,this._center=new n.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new t7,this._posMatrixCache={},this._alignedPosMatrixCache={};},ne={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};t9.prototype.clone=function(){var n=new t9(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.tileSize=this.tileSize,n.latRange=this.latRange,n.width=this.width,n.height=this.height,n._center=this._center,n.zoom=this.zoom,n.angle=this.angle,n._fov=this._fov,n._pitch=this._pitch,n._unmodified=this._unmodified,n._edgeInsets=this._edgeInsets.clone(),n._calcMatrices(),n;},ne.minZoom.get=function(){return this._minZoom;},ne.minZoom.set=function(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n));},ne.maxZoom.get=function(){return this._maxZoom;},ne.maxZoom.set=function(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n));},ne.minPitch.get=function(){return this._minPitch;},ne.minPitch.set=function(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n));},ne.maxPitch.get=function(){return this._maxPitch;},ne.maxPitch.set=function(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n));},ne.renderWorldCopies.get=function(){return this._renderWorldCopies;},ne.renderWorldCopies.set=function(n){void 0===n?n=!0:null===n&&(n=!1),this._renderWorldCopies=n;},ne.worldSize.get=function(){return this.tileSize*this.scale;},ne.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2));},ne.size.get=function(){return new n.Point(this.width,this.height);},ne.bearing.get=function(){return-this.angle/Math.PI*180;},ne.bearing.set=function(r){var i=-n.wrap(r,-180,180)*Math.PI/180;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=n.create$2(),n.rotate(this.rotationMatrix,this.rotationMatrix,this.angle));},ne.pitch.get=function(){return this._pitch/Math.PI*180;},ne.pitch.set=function(r){var i=n.clamp(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices());},ne.fov.get=function(){return this._fov/Math.PI*180;},ne.fov.set=function(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices());},ne.zoom.get=function(){return this._zoom;},ne.zoom.set=function(n){var r=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==r&&(this._unmodified=!1,this._zoom=r,this.scale=this.zoomScale(r),this.tileZoom=Math.floor(r),this.zoomFraction=r-this.tileZoom,this._constrain(),this._calcMatrices());},ne.center.get=function(){return this._center;},ne.center.set=function(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices());},ne.padding.get=function(){return this._edgeInsets.toJSON();},ne.padding.set=function(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices());},ne.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height);},t9.prototype.isPaddingEqual=function(n){return this._edgeInsets.equals(n);},t9.prototype.interpolatePadding=function(n,r,i){this._unmodified=!1,this._edgeInsets.interpolate(n,r,i),this._constrain(),this._calcMatrices();},t9.prototype.coveringZoomLevel=function(n){return Math.max(0,(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize)));},t9.prototype.getVisibleUnwrappedCoordinates=function(r){var i=[new n.UnwrappedTileID(0,r)];if(this._renderWorldCopies)for(var a=this.pointCoordinate(new n.Point(0,0)),o=this.pointCoordinate(new n.Point(this.width,0)),s=this.pointCoordinate(new n.Point(this.width,this.height)),l=this.pointCoordinate(new n.Point(0,this.height)),u=Math.floor(Math.min(a.x,o.x,s.x,l.x)),c=Math.floor(Math.max(a.x,o.x,s.x,l.x)),f=u-1;f<=c+1;f++)0!==f&&i.push(new n.UnwrappedTileID(f,r));return i;},t9.prototype.coveringTiles=function(r){var i=this.coveringZoomLevel(r),a=i;if(void 0!==r.minzoom&&i<r.minzoom)return[];void 0!==r.maxzoom&&i>r.maxzoom&&(i=r.maxzoom);var o=n.MercatorCoordinate.fromLngLat(this.center),s=Math.pow(2,i),l=[s*o.x,s*o.y,0],u=t6.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i),c=r.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(c=i);var f=function(n){return{aabb:new t8([n*s,0,0],[(n+1)*s,s,0]),zoom:0,x:0,y:0,wrap:n,fullyVisible:!1};},d=[],h=[],p=i,m=r.reparseOverscaled?a:i;if(this._renderWorldCopies)for(var g=1;g<=3;g++)d.push(f(-g)),d.push(f(g));for(d.push(f(0));d.length>0;){var v=d.pop(),y=v.x,_=v.y,b=v.fullyVisible;if(!b){var x=v.aabb.intersects(u);if(0===x)continue;b=2===x;}var E=Math.max(Math.abs(v.aabb.distanceX(l)),Math.abs(v.aabb.distanceY(l)));if(v.zoom===p||E>3+(1<<p-v.zoom)-2&&v.zoom>=c)h.push({tileID:new n.OverscaledTileID(v.zoom===p?m:v.zoom,v.wrap,v.zoom,y,_),distanceSq:n.sqrLen([l[0]-.5-y,l[1]-.5-_])});else for(var w=0;w<4;w++){var S=(y<<1)+w%2,T=(_<<1)+(w>>1);d.push({aabb:v.aabb.quadrant(w),zoom:v.zoom+1,x:S,y:T,wrap:v.wrap,fullyVisible:b});}}return h.sort(function(n,r){return n.distanceSq-r.distanceSq;}).map(function(n){return n.tileID;});},t9.prototype.resize=function(n,r){this.width=n,this.height=r,this.pixelsToGLUnits=[2/n,-2/r],this._constrain(),this._calcMatrices();},ne.unmodified.get=function(){return this._unmodified;},t9.prototype.zoomScale=function(n){return Math.pow(2,n);},t9.prototype.scaleZoom=function(n){return Math.log(n)/Math.LN2;},t9.prototype.project=function(r){var i=n.clamp(r.lat,-this.maxValidLatitude,this.maxValidLatitude);return new n.Point(n.mercatorXfromLng(r.lng)*this.worldSize,n.mercatorYfromLat(i)*this.worldSize);},t9.prototype.unproject=function(r){return new n.MercatorCoordinate(r.x/this.worldSize,r.y/this.worldSize).toLngLat();},ne.point.get=function(){return this.project(this.center);},t9.prototype.setLocationAtPoint=function(r,i){var a=this.pointCoordinate(i),o=this.pointCoordinate(this.centerPoint),s=this.locationCoordinate(r),l=new n.MercatorCoordinate(s.x-(a.x-o.x),s.y-(a.y-o.y));this.center=this.coordinateLocation(l),this._renderWorldCopies&&(this.center=this.center.wrap());},t9.prototype.locationPoint=function(n){return this.coordinatePoint(this.locationCoordinate(n));},t9.prototype.pointLocation=function(n){return this.coordinateLocation(this.pointCoordinate(n));},t9.prototype.locationCoordinate=function(r){return n.MercatorCoordinate.fromLngLat(r);},t9.prototype.coordinateLocation=function(n){return n.toLngLat();},t9.prototype.pointCoordinate=function(r){var i=[r.x,r.y,0,1],a=[r.x,r.y,1,1];n.transformMat4(i,i,this.pixelMatrixInverse),n.transformMat4(a,a,this.pixelMatrixInverse);var o=i[3],s=a[3],l=i[1]/o,u=a[1]/s,c=i[2]/o,f=a[2]/s,d=c===f?0:(0-c)/(f-c);return new n.MercatorCoordinate(n.number(i[0]/o,a[0]/s,d)/this.worldSize,n.number(l,u,d)/this.worldSize);},t9.prototype.coordinatePoint=function(r){var i=[r.x*this.worldSize,r.y*this.worldSize,0,1];return n.transformMat4(i,i,this.pixelMatrix),new n.Point(i[0]/i[3],i[1]/i[3]);},t9.prototype.getBounds=function(){return(new n.LngLatBounds).extend(this.pointLocation(new n.Point(0,0))).extend(this.pointLocation(new n.Point(this.width,0))).extend(this.pointLocation(new n.Point(this.width,this.height))).extend(this.pointLocation(new n.Point(0,this.height)));},t9.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new n.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null;},t9.prototype.setMaxBounds=function(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude]);},t9.prototype.calculatePosMatrix=function(r,i){void 0===i&&(i=!1);var a=r.key,o=i?this._alignedPosMatrixCache:this._posMatrixCache;if(o[a])return o[a];var s=r.canonical,l=this.worldSize/this.zoomScale(s.z),u=s.x+Math.pow(2,s.z)*r.wrap,c=n.identity(new Float64Array(16));return n.translate(c,c,[u*l,s.y*l,0]),n.scale(c,c,[l/n.EXTENT,l/n.EXTENT,1]),n.multiply(c,i?this.alignedProjMatrix:this.projMatrix,c),o[a]=new Float32Array(c),o[a];},t9.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice();},t9.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var r,i,a,o,s=-90,l=90,u=-180,c=180,f=this.size,d=this._unmodified;if(this.latRange){var h=this.latRange;s=n.mercatorYfromLat(h[1])*this.worldSize,r=(l=n.mercatorYfromLat(h[0])*this.worldSize)-s<f.y?f.y/(l-s):0;}if(this.lngRange){var p=this.lngRange;u=n.mercatorXfromLng(p[0])*this.worldSize,i=(c=n.mercatorXfromLng(p[1])*this.worldSize)-u<f.x?f.x/(c-u):0;}var m=this.point,g=Math.max(i||0,r||0);if(g)return this.center=this.unproject(new n.Point(i?(c+u)/2:m.x,r?(l+s)/2:m.y)),this.zoom+=this.scaleZoom(g),this._unmodified=d,void(this._constraining=!1);if(this.latRange){var v=m.y,y=f.y/2;v-y<s&&(o=s+y),v+y>l&&(o=l-y);}if(this.lngRange){var _=m.x,b=f.x/2;_-b<u&&(a=u+b),_+b>c&&(a=c-b);}void 0===a&&void 0===o||(this.center=this.unproject(new n.Point(void 0!==a?a:m.x,void 0!==o?o:m.y))),this._unmodified=d,this._constraining=!1;}},t9.prototype._calcMatrices=function(){if(this.height){var r=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var i=Math.PI/2+this._pitch,a=this._fov*(.5+r.y/this.height),o=Math.sin(a)*this.cameraToCenterDistance/Math.sin(n.clamp(Math.PI-i-a,.01,Math.PI-.01)),s=this.point,l=s.x,u=s.y,c=1.01*(Math.cos(Math.PI/2-this._pitch)*o+this.cameraToCenterDistance),f=this.height/50,d=new Float64Array(16);n.perspective(d,this._fov,this.width/this.height,f,c),d[8]=-(2*r.x)/this.width,d[9]=2*r.y/this.height,n.scale(d,d,[1,-1,1]),n.translate(d,d,[0,0,-this.cameraToCenterDistance]),n.rotateX(d,d,this._pitch),n.rotateZ(d,d,this.angle),n.translate(d,d,[-l,-u,0]),this.mercatorMatrix=n.scale([],d,[this.worldSize,this.worldSize,this.worldSize]),n.scale(d,d,[1,1,n.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=d,this.invProjMatrix=n.invert([],this.projMatrix);var h=this.width%2/2,p=this.height%2/2,m=Math.cos(this.angle),g=Math.sin(this.angle),v=l-Math.round(l)+m*h+g*p,y=u-Math.round(u)+m*p+g*h,_=new Float64Array(d);if(n.translate(_,_,[v>.5?v-1:v,y>.5?y-1:y,0]),this.alignedProjMatrix=_,d=n.create(),n.scale(d,d,[this.width/2,-this.height/2,1]),n.translate(d,d,[1,-1,0]),this.labelPlaneMatrix=d,d=n.create(),n.scale(d,d,[1,-1,1]),n.translate(d,d,[-1,-1,0]),n.scale(d,d,[2/this.width,2/this.height,1]),this.glCoordMatrix=d,this.pixelMatrix=n.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(d=n.invert(new Float64Array(16),this.pixelMatrix)))throw Error("failed to invert matrix");this.pixelMatrixInverse=d,this._posMatrixCache={},this._alignedPosMatrixCache={};}},t9.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var r=this.pointCoordinate(new n.Point(0,0)),i=[r.x*this.worldSize,r.y*this.worldSize,0,1];return n.transformMat4(i,i,this.pixelMatrix)[3]/this.cameraToCenterDistance;},t9.prototype.getCameraPoint=function(){var r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new n.Point(0,r));},t9.prototype.getCameraQueryGeometry=function(r){var i=this.getCameraPoint();if(1===r.length)return[r[0],i];for(var a=i.x,o=i.y,s=i.x,l=i.y,u=0;u<r.length;u+=1){var c=r[u];a=Math.min(a,c.x),o=Math.min(o,c.y),s=Math.max(s,c.x),l=Math.max(l,c.y);}return[new n.Point(a,o),new n.Point(s,o),new n.Point(s,l),new n.Point(a,l),new n.Point(a,o)];},Object.defineProperties(t9.prototype,ne);var nt=function(r){var i,a,o,s;this._hashName=r&&encodeURIComponent(r),n.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(i=this._updateHashUnthrottled.bind(this),a=!1,o=null,s=function(){o=null,a&&(i(),o=setTimeout(s,300),a=!1);},function(){return a=!0,o||s(),o;});};nt.prototype.addTo=function(r){return this._map=r,n.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this;},nt.prototype.remove=function(){return n.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this;},nt.prototype.getHashString=function(r){var i=this._map.getCenter(),a=Math.round(100*this._map.getZoom())/100,o=Math.pow(10,Math.ceil((a*Math.LN2+Math.log(512/360/.5))/Math.LN10)),s=Math.round(i.lng*o)/o,l=Math.round(i.lat*o)/o,u=this._map.getBearing(),c=this._map.getPitch(),f="";if(f+=r?"/"+s+"/"+l+"/"+a:a+"/"+l+"/"+s,(u||c)&&(f+="/"+Math.round(10*u)/10),c&&(f+="/"+Math.round(c)),this._hashName){var d=this._hashName,h=!1,p=n.window.location.hash.slice(1).split("&").map(function(n){var r=n.split("=")[0];return r===d?(h=!0,r+"="+f):n;}).filter(function(n){return n;});return h||p.push(d+"="+f),"#"+p.join("&");}return"#"+f;},nt.prototype._getCurrentHash=function(){var r,i=this,a=n.window.location.hash.replace("#","");return this._hashName?(a.split("&").map(function(n){return n.split("=");}).forEach(function(n){n[0]===i._hashName&&(r=n);}),(r&&r[1]||"").split("/")):a.split("/");},nt.prototype._onHashChange=function(){var n=this._getCurrentHash();if(n.length>=3&&!n.some(function(n){return isNaN(n);})){var r=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(n[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:r,pitch:+(n[4]||0)}),!0;}return!1;},nt.prototype._updateHashUnthrottled=function(){var r=n.window.location.href.replace(/(#.+)?$/,this.getHashString());try{n.window.history.replaceState(n.window.history.state,null,r);}catch(n){}};var nn={linearity:.3,easing:n.bezier(0,0,.3,1)},nr=n.extend({deceleration:2500,maxSpeed:1400},nn),ni=n.extend({deceleration:20,maxSpeed:1400},nn),na=n.extend({deceleration:1e3,maxSpeed:360},nn),no=n.extend({deceleration:1e3,maxSpeed:90},nn),ns=function(n){this._map=n,this.clear();};function nl(n,r){(!n.duration||n.duration<r.duration)&&(n.duration=r.duration,n.easing=r.easing);}function nu(r,i,a){var o=a.maxSpeed,s=a.linearity,l=a.deceleration,u=n.clamp(r*s/(i/1e3),-o,o),c=Math.abs(u)/(l*s);return{easing:a.easing,duration:1e3*c,amount:c/2*u};}ns.prototype.clear=function(){this._inertiaBuffer=[];},ns.prototype.record=function(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:n.browser.now(),settings:r});},ns.prototype._drainInertiaBuffer=function(){for(var r=this._inertiaBuffer,i=n.browser.now();r.length>0&&i-r[0].time>160;)r.shift();},ns.prototype._onMoveEnd=function(r){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var i={zoom:0,bearing:0,pitch:0,pan:new n.Point(0,0),pinchAround:void 0,around:void 0},a=0,o=this._inertiaBuffer;a<o.length;a+=1){var s=o[a].settings;i.zoom+=s.zoomDelta||0,i.bearing+=s.bearingDelta||0,i.pitch+=s.pitchDelta||0,s.panDelta&&i.pan._add(s.panDelta),s.around&&(i.around=s.around),s.pinchAround&&(i.pinchAround=s.pinchAround);}var l=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,u={};if(i.pan.mag()){var c=nu(i.pan.mag(),l,n.extend({},nr,r||{}));u.offset=i.pan.mult(c.amount/i.pan.mag()),u.center=this._map.transform.center,nl(u,c);}if(i.zoom){var f=nu(i.zoom,l,ni);u.zoom=this._map.transform.zoom+f.amount,nl(u,f);}if(i.bearing){var d=nu(i.bearing,l,na);u.bearing=this._map.transform.bearing+n.clamp(d.amount,-179,179),nl(u,d);}if(i.pitch){var h=nu(i.pitch,l,no);u.pitch=this._map.transform.pitch+h.amount,nl(u,h);}if(u.zoom||u.bearing){var p=void 0===i.pinchAround?i.around:i.pinchAround;u.around=p?this._map.unproject(p):this._map.getCenter();}return this.clear(),n.extend(u,{noMoveStart:!0});}};var nc=function(r){function a(a,o,s,l){void 0===l&&(l={});var u=i.mousePos(o.getCanvasContainer(),s),c=o.unproject(u);r.call(this,a,n.extend({point:u,lngLat:c,originalEvent:s},l)),this._defaultPrevented=!1,this.target=o;}r&&(a.__proto__=r),(a.prototype=Object.create(r&&r.prototype)).constructor=a;var o={defaultPrevented:{configurable:!0}};return a.prototype.preventDefault=function(){this._defaultPrevented=!0;},o.defaultPrevented.get=function(){return this._defaultPrevented;},Object.defineProperties(a.prototype,o),a;}(n.Event),nf=function(r){function a(a,o,s){var l="touchend"===a?s.changedTouches:s.touches,u=i.touchPos(o.getCanvasContainer(),l),c=u.map(function(n){return o.unproject(n);}),f=u.reduce(function(n,r,i,a){return n.add(r.div(a.length));},new n.Point(0,0)),d=o.unproject(f);r.call(this,a,{points:u,point:f,lngLats:c,lngLat:d,originalEvent:s}),this._defaultPrevented=!1;}r&&(a.__proto__=r),(a.prototype=Object.create(r&&r.prototype)).constructor=a;var o={defaultPrevented:{configurable:!0}};return a.prototype.preventDefault=function(){this._defaultPrevented=!0;},o.defaultPrevented.get=function(){return this._defaultPrevented;},Object.defineProperties(a.prototype,o),a;}(n.Event),nd=function(n){function r(r,i,a){n.call(this,r,{originalEvent:a}),this._defaultPrevented=!1;}n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r;var i={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0;},i.defaultPrevented.get=function(){return this._defaultPrevented;},Object.defineProperties(r.prototype,i),r;}(n.Event),nh=function(n,r){this._map=n,this._clickTolerance=r.clickTolerance;};nh.prototype.reset=function(){delete this._mousedownPos;},nh.prototype.wheel=function(n){return this._firePreventable(new nd(n.type,this._map,n));},nh.prototype.mousedown=function(n,r){return this._mousedownPos=r,this._firePreventable(new nc(n.type,this._map,n));},nh.prototype.mouseup=function(n){this._map.fire(new nc(n.type,this._map,n));},nh.prototype.click=function(n,r){this._mousedownPos&&this._mousedownPos.dist(r)>=this._clickTolerance||this._map.fire(new nc(n.type,this._map,n));},nh.prototype.dblclick=function(n){return this._firePreventable(new nc(n.type,this._map,n));},nh.prototype.mouseover=function(n){this._map.fire(new nc(n.type,this._map,n));},nh.prototype.mouseout=function(n){this._map.fire(new nc(n.type,this._map,n));},nh.prototype.touchstart=function(n){return this._firePreventable(new nf(n.type,this._map,n));},nh.prototype.touchmove=function(n){this._map.fire(new nf(n.type,this._map,n));},nh.prototype.touchend=function(n){this._map.fire(new nf(n.type,this._map,n));},nh.prototype.touchcancel=function(n){this._map.fire(new nf(n.type,this._map,n));},nh.prototype._firePreventable=function(n){if(this._map.fire(n),n.defaultPrevented)return{};},nh.prototype.isEnabled=function(){return!0;},nh.prototype.isActive=function(){return!1;},nh.prototype.enable=function(){},nh.prototype.disable=function(){};var np=function(n){this._map=n;};np.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent;},np.prototype.mousemove=function(n){this._map.fire(new nc(n.type,this._map,n));},np.prototype.mousedown=function(){this._delayContextMenu=!0;},np.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new nc("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent);},np.prototype.contextmenu=function(n){this._delayContextMenu?this._contextMenuEvent=n:this._map.fire(new nc(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault();},np.prototype.isEnabled=function(){return!0;},np.prototype.isActive=function(){return!1;},np.prototype.enable=function(){},np.prototype.disable=function(){};var nm=function(n,r){this._map=n,this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=r.clickTolerance||1;};function ng(n,r){for(var i={},a=0;a<n.length;a++)i[n[a].identifier]=r[a];return i;}nm.prototype.isEnabled=function(){return!!this._enabled;},nm.prototype.isActive=function(){return!!this._active;},nm.prototype.enable=function(){this.isEnabled()||(this._enabled=!0);},nm.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1);},nm.prototype.mousedown=function(n,r){this.isEnabled()&&n.shiftKey&&0===n.button&&(i.disableDrag(),this._startPos=this._lastPos=r,this._active=!0);},nm.prototype.mousemoveWindow=function(n,r){if(this._active&&!(this._lastPos.equals(r)||!this._box&&r.dist(this._startPos)<this._clickTolerance)){var a=this._startPos;this._lastPos=r,this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",n));var o=Math.min(a.x,r.x),s=Math.max(a.x,r.x),l=Math.min(a.y,r.y),u=Math.max(a.y,r.y);i.setTransform(this._box,"translate("+o+"px,"+l+"px)"),this._box.style.width=s-o+"px",this._box.style.height=u-l+"px";}},nm.prototype.mouseupWindow=function(r,a){var o=this;if(this._active&&0===r.button){var s=this._startPos;if(this.reset(),i.suppressClick(),s.x!==a.x||s.y!==a.y)return this._map.fire(new n.Event("boxzoomend",{originalEvent:r})),{cameraAnimation:function(n){return n.fitScreenCoordinates(s,a,o._map.getBearing(),{linear:!0});}};this._fireEvent("boxzoomcancel",r);}},nm.prototype.keydown=function(n){this._active&&27===n.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",n));},nm.prototype.blur=function(){this.reset();},nm.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(i.remove(this._box),this._box=null),i.enableDrag(),delete this._startPos,delete this._lastPos;},nm.prototype._fireEvent=function(r,i){return this._map.fire(new n.Event(r,{originalEvent:i}));};var nv=function(n){this.reset(),this.numTouches=n.numTouches;};nv.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1;},nv.prototype.touchstart=function(r,i,a){(this.centroid||a.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=r.timeStamp),a.length===this.numTouches&&(this.centroid=function(r){for(var i=new n.Point(0,0),a=0;a<r.length;a+=1)i._add(r[a]);return i.div(r.length);}(i),this.touches=ng(a,i)));},nv.prototype.touchmove=function(n,r,i){if(!this.aborted&&this.centroid){var a=ng(i,r);for(var o in this.touches){var s=a[o];(!s||s.dist(this.touches[o])>30)&&(this.aborted=!0);}}},nv.prototype.touchend=function(n,r,i){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),0===i.length){var a=!this.aborted&&this.centroid;if(this.reset(),a)return a;}};var ny=function(n){this.singleTap=new nv(n),this.numTaps=n.numTaps,this.reset();};ny.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset();},ny.prototype.touchstart=function(n,r,i){this.singleTap.touchstart(n,r,i);},ny.prototype.touchmove=function(n,r,i){this.singleTap.touchmove(n,r,i);},ny.prototype.touchend=function(n,r,i){var a=this.singleTap.touchend(n,r,i);if(a){var o=n.timeStamp-this.lastTime<500,s=!this.lastTap||30>this.lastTap.dist(a);if(o&&s||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=a,this.count===this.numTaps)return this.reset(),a;}};var n_=function(){this._zoomIn=new ny({numTouches:1,numTaps:2}),this._zoomOut=new ny({numTouches:2,numTaps:1}),this.reset();};n_.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset();},n_.prototype.touchstart=function(n,r,i){this._zoomIn.touchstart(n,r,i),this._zoomOut.touchstart(n,r,i);},n_.prototype.touchmove=function(n,r,i){this._zoomIn.touchmove(n,r,i),this._zoomOut.touchmove(n,r,i);},n_.prototype.touchend=function(n,r,i){var a=this,o=this._zoomIn.touchend(n,r,i),s=this._zoomOut.touchend(n,r,i);return o?(this._active=!0,n.preventDefault(),setTimeout(function(){return a.reset();},0),{cameraAnimation:function(r){return r.easeTo({duration:300,zoom:r.getZoom()+1,around:r.unproject(o)},{originalEvent:n});}}):s?(this._active=!0,n.preventDefault(),setTimeout(function(){return a.reset();},0),{cameraAnimation:function(r){return r.easeTo({duration:300,zoom:r.getZoom()-1,around:r.unproject(s)},{originalEvent:n});}}):void 0;},n_.prototype.touchcancel=function(){this.reset();},n_.prototype.enable=function(){this._enabled=!0;},n_.prototype.disable=function(){this._enabled=!1,this.reset();},n_.prototype.isEnabled=function(){return this._enabled;},n_.prototype.isActive=function(){return this._active;};var nb={0:1,2:2},nx=function(n){this.reset(),this._clickTolerance=n.clickTolerance||1;};nx.prototype.blur=function(){this.reset();},nx.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton;},nx.prototype._correctButton=function(n,r){return!1;},nx.prototype._move=function(n,r){return{};},nx.prototype.mousedown=function(n,r){if(!this._lastPoint){var a=i.mouseButton(n);this._correctButton(n,a)&&(this._lastPoint=r,this._eventButton=a);}},nx.prototype.mousemoveWindow=function(n,r){var i,a=this._lastPoint;if(a){if(n.preventDefault(),i=nb[this._eventButton],void 0===n.buttons||(n.buttons&i)!==i)this.reset();else if(this._moved||!(r.dist(a)<this._clickTolerance))return this._moved=!0,this._lastPoint=r,this._move(a,r);}},nx.prototype.mouseupWindow=function(n){this._lastPoint&&i.mouseButton(n)===this._eventButton&&(this._moved&&i.suppressClick(),this.reset());},nx.prototype.enable=function(){this._enabled=!0;},nx.prototype.disable=function(){this._enabled=!1,this.reset();},nx.prototype.isEnabled=function(){return this._enabled;},nx.prototype.isActive=function(){return this._active;};var nE=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.mousedown=function(r,i){n.prototype.mousedown.call(this,r,i),this._lastPoint&&(this._active=!0);},r.prototype._correctButton=function(n,r){return 0===r&&!n.ctrlKey;},r.prototype._move=function(n,r){return{around:r,panDelta:r.sub(n)};},r;}(nx),nw=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._correctButton=function(n,r){return 0===r&&n.ctrlKey||2===r;},r.prototype._move=function(n,r){var i=.8*(r.x-n.x);if(i)return this._active=!0,{bearingDelta:i};},r.prototype.contextmenu=function(n){n.preventDefault();},r;}(nx),nS=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._correctButton=function(n,r){return 0===r&&n.ctrlKey||2===r;},r.prototype._move=function(n,r){var i=-.5*(r.y-n.y);if(i)return this._active=!0,{pitchDelta:i};},r.prototype.contextmenu=function(n){n.preventDefault();},r;}(nx),nT=function(n){this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset();};nT.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new n.Point(0,0);},nT.prototype.touchstart=function(n,r,i){return this._calculateTransform(n,r,i);},nT.prototype.touchmove=function(n,r,i){if(this._active&&!(i.length<this._minTouches))return n.preventDefault(),this._calculateTransform(n,r,i);},nT.prototype.touchend=function(n,r,i){this._calculateTransform(n,r,i),this._active&&i.length<this._minTouches&&this.reset();},nT.prototype.touchcancel=function(){this.reset();},nT.prototype._calculateTransform=function(r,i,a){a.length>0&&(this._active=!0);var o=ng(a,i),s=new n.Point(0,0),l=new n.Point(0,0),u=0;for(var c in o){var f=o[c],d=this._touches[c];d&&(s._add(f),l._add(f.sub(d)),u++,o[c]=f);}if(this._touches=o,!(u<this._minTouches)&&l.mag()){var h=l.div(u);if(this._sum._add(h),!(this._sum.mag()<this._clickTolerance))return{around:s.div(u),panDelta:h};}},nT.prototype.enable=function(){this._enabled=!0;},nT.prototype.disable=function(){this._enabled=!1,this.reset();},nT.prototype.isEnabled=function(){return this._enabled;},nT.prototype.isActive=function(){return this._active;};var nA=function(){this.reset();};function nC(n,r,i){for(var a=0;a<n.length;a++)if(n[a].identifier===i)return r[a];}function nO(n,r){return Math.log(n/r)/Math.LN2;}nA.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches;},nA.prototype._start=function(n){},nA.prototype._move=function(n,r,i){return{};},nA.prototype.touchstart=function(n,r,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([r[0],r[1]]));},nA.prototype.touchmove=function(n,r,i){if(this._firstTwoTouches){n.preventDefault();var a=this._firstTwoTouches,o=a[1],s=nC(i,r,a[0]),l=nC(i,r,o);if(s&&l){var u=this._aroundCenter?null:s.add(l).div(2);return this._move([s,l],u,n);}}},nA.prototype.touchend=function(n,r,a){if(this._firstTwoTouches){var o=this._firstTwoTouches,s=o[1],l=nC(a,r,o[0]),u=nC(a,r,s);l&&u||(this._active&&i.suppressClick(),this.reset());}},nA.prototype.touchcancel=function(){this.reset();},nA.prototype.enable=function(n){this._enabled=!0,this._aroundCenter=!!n&&"center"===n.around;},nA.prototype.disable=function(){this._enabled=!1,this.reset();},nA.prototype.isEnabled=function(){return this._enabled;},nA.prototype.isActive=function(){return this._active;};var nM=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.reset=function(){n.prototype.reset.call(this),delete this._distance,delete this._startDistance;},r.prototype._start=function(n){this._startDistance=this._distance=n[0].dist(n[1]);},r.prototype._move=function(n,r){var i=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(.1>Math.abs(nO(this._distance,this._startDistance))))return this._active=!0,{zoomDelta:nO(this._distance,i),pinchAround:r};},r;}(nA);function nR(n,r){return 180*n.angleWith(r)/Math.PI;}var nP=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.reset=function(){n.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector;},r.prototype._start=function(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1]);},r.prototype._move=function(n,r){var i=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:nR(this._vector,i),pinchAround:r};},r.prototype._isBelowThreshold=function(n){this._minDiameter=Math.min(this._minDiameter,n.mag());var r=25/(Math.PI*this._minDiameter)*360;return Math.abs(nR(n,this._startVector))<r;},r;}(nA);function nk(n){return Math.abs(n.y)>Math.abs(n.x);}var nI=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.reset=function(){n.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints;},r.prototype._start=function(n){this._lastPoints=n,nk(n[0].sub(n[1]))&&(this._valid=!1);},r.prototype._move=function(n,r,i){var a=n[0].sub(this._lastPoints[0]),o=n[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(a,o,i.timeStamp),this._valid)return this._lastPoints=n,this._active=!0,{pitchDelta:-((a.y+o.y)/2*.5)};},r.prototype.gestureBeginsVertically=function(n,r,i){if(void 0!==this._valid)return this._valid;var a=n.mag()>=2,o=r.mag()>=2;if(a||o){if(!a||!o)return void 0===this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;var s=n.y>0==r.y>0;return nk(n)&&nk(r)&&s;}},r;}(nA),nL=function(){this._panStep=100,this._bearingStep=15,this._pitchStep=10,this._rotationDisabled=!1;};function nN(n){return n*(2-n);}nL.prototype.blur=function(){this.reset();},nL.prototype.reset=function(){this._active=!1;},nL.prototype.keydown=function(n){var r=this;if(!(n.altKey||n.ctrlKey||n.metaKey)){var i=0,a=0,o=0,s=0,l=0;switch(n.keyCode){case 61:case 107:case 171:case 187:i=1;break;case 189:case 109:case 173:i=-1;break;case 37:n.shiftKey?a=-1:(n.preventDefault(),s=-1);break;case 39:n.shiftKey?a=1:(n.preventDefault(),s=1);break;case 38:n.shiftKey?o=1:(n.preventDefault(),l=-1);break;case 40:n.shiftKey?o=-1:(n.preventDefault(),l=1);break;default:return;}return this._rotationDisabled&&(a=0,o=0),{cameraAnimation:function(u){var c=u.getZoom();u.easeTo({duration:300,easeId:"keyboardHandler",easing:nN,zoom:i?Math.round(c)+i*(n.shiftKey?2:1):c,bearing:u.getBearing()+a*r._bearingStep,pitch:u.getPitch()+o*r._pitchStep,offset:[-s*r._panStep,-l*r._panStep],center:u.getCenter()},{originalEvent:n});}};}},nL.prototype.enable=function(){this._enabled=!0;},nL.prototype.disable=function(){this._enabled=!1,this.reset();},nL.prototype.isEnabled=function(){return this._enabled;},nL.prototype.isActive=function(){return this._active;},nL.prototype.disableRotation=function(){this._rotationDisabled=!0;},nL.prototype.enableRotation=function(){this._rotationDisabled=!1;};var nD=function(r,i){this._map=r,this._el=r.getCanvasContainer(),this._handler=i,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,n.bindAll(["_onTimeout"],this);};nD.prototype.setZoomRate=function(n){this._defaultZoomRate=n;},nD.prototype.setWheelZoomRate=function(n){this._wheelZoomRate=n;},nD.prototype.isEnabled=function(){return!!this._enabled;},nD.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout;},nD.prototype.isZooming=function(){return!!this._zooming;},nD.prototype.enable=function(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=n&&"center"===n.around);},nD.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1);},nD.prototype.wheel=function(r){if(this.isEnabled()){var i=r.deltaMode===n.window.WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY,a=n.browser.now(),o=a-(this._lastWheelEventTime||0);this._lastWheelEventTime=a,0!==i&&i%4.000244140625==0?this._type="wheel":0!==i&&4>Math.abs(i)?this._type="trackpad":o>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=200>Math.abs(o*i)?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),r.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=r,this._delta-=i,this._active||this._start(r)),r.preventDefault();}},nD.prototype._onTimeout=function(n){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(n);},nD.prototype._start=function(r){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var a=i.mousePos(this._el,r);this._around=n.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(a)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame());}},nD.prototype.renderFrame=function(){var r=this;if(this._frameId&&(this._frameId=null,this.isActive())){var i=this._map.transform;if(0!==this._delta){var a="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,o=2/(1+Math.exp(-Math.abs(this._delta*a)));this._delta<0&&0!==o&&(o=1/o);var s="number"==typeof this._targetZoom?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(s*o))),"wheel"===this._type&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0;}var l,u="number"==typeof this._targetZoom?this._targetZoom:i.zoom,c=this._startZoom,f=this._easing,d=!1;if("wheel"===this._type&&c&&f){var h=Math.min((n.browser.now()-this._lastWheelEventTime)/200,1),p=f(h);l=n.number(c,u,p),h<1?this._frameId||(this._frameId=!0):d=!0;}else l=u,d=!0;return this._active=!0,d&&(this._active=!1,this._finishTimeout=setTimeout(function(){r._zooming=!1,r._handler._triggerRenderFrame(),delete r._targetZoom,delete r._finishTimeout;},200)),{noInertia:!0,needsRenderFrame:!d,zoomDelta:l-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent};}},nD.prototype._smoothOutEasing=function(r){var i=n.ease;if(this._prevEase){var a=this._prevEase,o=(n.browser.now()-a.start)/a.duration,s=a.easing(o+.01)-a.easing(o),l=.27/Math.sqrt(s*s+1e-4)*.01,u=Math.sqrt(.0729-l*l);i=n.bezier(l,u,.25,1);}return this._prevEase={start:n.browser.now(),duration:r,easing:i},i;},nD.prototype.blur=function(){this.reset();},nD.prototype.reset=function(){this._active=!1;};var nF=function(n,r){this._clickZoom=n,this._tapZoom=r;};nF.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable();},nF.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable();},nF.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled();},nF.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive();};var nB=function(){this.reset();};nB.prototype.reset=function(){this._active=!1;},nB.prototype.blur=function(){this.reset();},nB.prototype.dblclick=function(n,r){return n.preventDefault(),{cameraAnimation:function(i){i.easeTo({duration:300,zoom:i.getZoom()+(n.shiftKey?-1:1),around:i.unproject(r)},{originalEvent:n});}};},nB.prototype.enable=function(){this._enabled=!0;},nB.prototype.disable=function(){this._enabled=!1,this.reset();},nB.prototype.isEnabled=function(){return this._enabled;},nB.prototype.isActive=function(){return this._active;};var nj=function(){this._tap=new ny({numTouches:1,numTaps:1}),this.reset();};nj.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset();},nj.prototype.touchstart=function(n,r,i){this._swipePoint||(this._tapTime&&n.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?i.length>0&&(this._swipePoint=r[0],this._swipeTouch=i[0].identifier):this._tap.touchstart(n,r,i));},nj.prototype.touchmove=function(n,r,i){if(this._tapTime){if(this._swipePoint&&i[0].identifier===this._swipeTouch){var a=r[0],o=a.y-this._swipePoint.y;return this._swipePoint=a,n.preventDefault(),this._active=!0,{zoomDelta:o/128};}}else this._tap.touchmove(n,r,i);},nj.prototype.touchend=function(n,r,i){this._tapTime?this._swipePoint&&0===i.length&&this.reset():this._tap.touchend(n,r,i)&&(this._tapTime=n.timeStamp);},nj.prototype.touchcancel=function(){this.reset();},nj.prototype.enable=function(){this._enabled=!0;},nj.prototype.disable=function(){this._enabled=!1,this.reset();},nj.prototype.isEnabled=function(){return this._enabled;},nj.prototype.isActive=function(){return this._active;};var nz=function(n,r,i){this._el=n,this._mousePan=r,this._touchPan=i;};nz.prototype.enable=function(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan");},nz.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan");},nz.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled();},nz.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive();};var nU=function(n,r,i){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=r,this._mousePitch=i;};nU.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable();},nU.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable();},nU.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled());},nU.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive();};var nV=function(n,r,i,a){this._el=n,this._touchZoom=r,this._touchRotate=i,this._tapDragZoom=a,this._rotationDisabled=!1,this._enabled=!0;};nV.prototype.enable=function(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate");},nV.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate");},nV.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled();},nV.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive();},nV.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable();},nV.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable();};var nG=function(n){return n.zoom||n.drag||n.pitch||n.rotate;},nH=function(n){function r(){n.apply(this,arguments);}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r;}(n.Event);function nW(n){return n.panDelta&&n.panDelta.mag()||n.zoomDelta||n.bearingDelta||n.pitchDelta;}var nX=function(r,a){this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ns(r),this._bearingSnap=a.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(a),n.bindAll(["handleEvent","handleWindowEvent"],this);var o=this._el;this._listeners=[[o,"touchstart",{passive:!0}],[o,"touchmove",{passive:!1}],[o,"touchend",void 0],[o,"touchcancel",void 0],[o,"mousedown",void 0],[o,"mousemove",void 0],[o,"mouseup",void 0],[n.window.document,"mousemove",{capture:!0}],[n.window.document,"mouseup",void 0],[o,"mouseover",void 0],[o,"mouseout",void 0],[o,"dblclick",void 0],[o,"click",void 0],[o,"keydown",{capture:!1}],[o,"keyup",void 0],[o,"wheel",{passive:!1}],[o,"contextmenu",void 0],[n.window,"blur",void 0]];for(var s=0,l=this._listeners;s<l.length;s+=1){var u=l[s],c=u[0];i.addEventListener(c,u[1],c===n.window.document?this.handleWindowEvent:this.handleEvent,u[2]);}};nX.prototype.destroy=function(){for(var r=0,a=this._listeners;r<a.length;r+=1){var o=a[r],s=o[0];i.removeEventListener(s,o[1],s===n.window.document?this.handleWindowEvent:this.handleEvent,o[2]);}},nX.prototype._addDefaultHandlers=function(n){var r=this._map,i=r.getCanvasContainer();this._add("mapEvent",new nh(r,n));var a=r.boxZoom=new nm(r,n);this._add("boxZoom",a);var o=new n_,s=new nB;r.doubleClickZoom=new nF(s,o),this._add("tapZoom",o),this._add("clickZoom",s);var l=new nj;this._add("tapDragZoom",l);var u=r.touchPitch=new nI;this._add("touchPitch",u);var c=new nw(n),f=new nS(n);r.dragRotate=new nU(n,c,f),this._add("mouseRotate",c,["mousePitch"]),this._add("mousePitch",f,["mouseRotate"]);var d=new nE(n),h=new nT(n);r.dragPan=new nz(i,d,h),this._add("mousePan",d),this._add("touchPan",h,["touchZoom","touchRotate"]);var p=new nP,m=new nM;r.touchZoomRotate=new nV(i,m,p,l),this._add("touchRotate",p,["touchPan","touchZoom"]),this._add("touchZoom",m,["touchPan","touchRotate"]);var g=r.scrollZoom=new nD(r,this);this._add("scrollZoom",g,["mousePan"]);var v=r.keyboard=new nL;this._add("keyboard",v),this._add("blockableMapEvent",new np(r));for(var y=0,_=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];y<_.length;y+=1){var b=_[y];n.interactive&&n[b]&&r[b].enable(n[b]);}},nX.prototype._add=function(n,r,i){this._handlers.push({handlerName:n,handler:r,allowed:i}),this._handlersById[n]=r;},nX.prototype.stop=function(n){if(!this._updatingCamera){for(var r=0,i=this._handlers;r<i.length;r+=1)i[r].handler.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[];}},nX.prototype.isActive=function(){for(var n=0,r=this._handlers;n<r.length;n+=1)if(r[n].handler.isActive())return!0;return!1;},nX.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming();},nX.prototype.isRotating=function(){return!!this._eventsInProgress.rotate;},nX.prototype.isMoving=function(){return!!nG(this._eventsInProgress)||this.isZooming();},nX.prototype._blockedByActive=function(n,r,i){for(var a in n)if(a!==i&&(!r||0>r.indexOf(a)))return!0;return!1;},nX.prototype.handleWindowEvent=function(n){this.handleEvent(n,n.type+"Window");},nX.prototype._getMapTouches=function(n){for(var r=[],i=0;i<n.length;i+=1){var a=n[i];this._el.contains(a.target)&&r.push(a);}return r;},nX.prototype.handleEvent=function(n,r){this._updatingCamera=!0;for(var a="renderFrame"===n.type?void 0:n,o={needsRenderFrame:!1},s={},l={},u=n.touches?this._getMapTouches(n.touches):void 0,c=u?i.touchPos(this._el,u):i.mousePos(this._el,n),f=0,d=this._handlers;f<d.length;f+=1){var h=d[f],p=h.handlerName,m=h.handler,g=h.allowed;if(m.isEnabled()){var v=void 0;this._blockedByActive(l,g,p)?m.reset():m[r||n.type]&&(v=m[r||n.type](n,c,u),this.mergeHandlerResult(o,s,v,p,a),v&&v.needsRenderFrame&&this._triggerRenderFrame()),(v||m.isActive())&&(l[p]=m);}}var y={};for(var _ in this._previousActiveHandlers)l[_]||(y[_]=a);this._previousActiveHandlers=l,(Object.keys(y).length||nW(o))&&(this._changes.push([o,s,y]),this._triggerRenderFrame()),(Object.keys(l).length||nW(o))&&this._map._stop(!0),this._updatingCamera=!1;var b=o.cameraAnimation;b&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],b(this._map));},nX.prototype.mergeHandlerResult=function(r,i,a,o,s){if(a){n.extend(r,a);var l={handlerName:o,originalEvent:a.originalEvent||s};void 0!==a.zoomDelta&&(i.zoom=l),void 0!==a.panDelta&&(i.drag=l),void 0!==a.pitchDelta&&(i.pitch=l),void 0!==a.bearingDelta&&(i.rotate=l);}},nX.prototype._applyChanges=function(){for(var r={},i={},a={},o=0,s=this._changes;o<s.length;o+=1){var l=s[o],u=l[0],c=l[1],f=l[2];u.panDelta&&(r.panDelta=(r.panDelta||new n.Point(0,0))._add(u.panDelta)),u.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+u.zoomDelta),u.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+u.bearingDelta),u.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+u.pitchDelta),void 0!==u.around&&(r.around=u.around),void 0!==u.pinchAround&&(r.pinchAround=u.pinchAround),u.noInertia&&(r.noInertia=u.noInertia),n.extend(i,c),n.extend(a,f);}this._updateMapTransform(r,i,a),this._changes=[];},nX.prototype._updateMapTransform=function(n,r,i){var a=this._map,o=a.transform;if(!nW(n))return this._fireEvents(r,i,!0);var s=n.panDelta,l=n.zoomDelta,u=n.bearingDelta,c=n.pitchDelta,f=n.around,d=n.pinchAround;void 0!==d&&(f=d),a._stop(!0),f=f||a.transform.centerPoint;var h=o.pointLocation(s?f.sub(s):f);u&&(o.bearing+=u),c&&(o.pitch+=c),l&&(o.zoom+=l),o.setLocationAtPoint(h,f),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(r,i,!0);},nX.prototype._fireEvents=function(r,i,a){var o=this,s=nG(this._eventsInProgress),l=nG(r),u={};for(var c in r)this._eventsInProgress[c]||(u[c+"start"]=r[c].originalEvent),this._eventsInProgress[c]=r[c];for(var f in!s&&l&&this._fireEvent("movestart",l.originalEvent),u)this._fireEvent(f,u[f]);for(var d in l&&this._fireEvent("move",l.originalEvent),r)this._fireEvent(d,r[d].originalEvent);var h,p={};for(var m in this._eventsInProgress){var g=this._eventsInProgress[m],v=g.handlerName,y=g.originalEvent;this._handlersById[v].isActive()||(delete this._eventsInProgress[m],p[m+"end"]=h=i[v]||y);}for(var _ in p)this._fireEvent(_,p[_]);var b=nG(this._eventsInProgress);if(a&&(s||l)&&!b){this._updatingCamera=!0;var x=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),E=function(n){return 0!==n&&-o._bearingSnap<n&&n<o._bearingSnap;};x?(E(x.bearing||this._map.getBearing())&&(x.bearing=0),this._map.easeTo(x,{originalEvent:h})):(this._map.fire(new n.Event("moveend",{originalEvent:h})),E(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1;}},nX.prototype._fireEvent=function(r,i){this._map.fire(new n.Event(r,i?{originalEvent:i}:{}));},nX.prototype._requestFrame=function(){var n=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(r){delete n._frameId,n.handleEvent(new nH("renderFrame",{timeStamp:r})),n._applyChanges();});},nX.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame());};var nq=function(r){function i(i,a){r.call(this),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=a.bearingSnap,n.bindAll(["_renderFrameCallback"],this);}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.getCenter=function(){return new n.LngLat(this.transform.center.lng,this.transform.center.lat);},i.prototype.setCenter=function(n,r){return this.jumpTo({center:n},r);},i.prototype.panBy=function(r,i,a){return r=n.Point.convert(r).mult(-1),this.panTo(this.transform.center,n.extend({offset:r},i),a);},i.prototype.panTo=function(r,i,a){return this.easeTo(n.extend({center:r},i),a);},i.prototype.getZoom=function(){return this.transform.zoom;},i.prototype.setZoom=function(n,r){return this.jumpTo({zoom:n},r),this;},i.prototype.zoomTo=function(r,i,a){return this.easeTo(n.extend({zoom:r},i),a);},i.prototype.zoomIn=function(n,r){return this.zoomTo(this.getZoom()+1,n,r),this;},i.prototype.zoomOut=function(n,r){return this.zoomTo(this.getZoom()-1,n,r),this;},i.prototype.getBearing=function(){return this.transform.bearing;},i.prototype.setBearing=function(n,r){return this.jumpTo({bearing:n},r),this;},i.prototype.getPadding=function(){return this.transform.padding;},i.prototype.setPadding=function(n,r){return this.jumpTo({padding:n},r),this;},i.prototype.rotateTo=function(r,i,a){return this.easeTo(n.extend({bearing:r},i),a);},i.prototype.resetNorth=function(r,i){return this.rotateTo(0,n.extend({duration:1e3},r),i),this;},i.prototype.resetNorthPitch=function(r,i){return this.easeTo(n.extend({bearing:0,pitch:0,duration:1e3},r),i),this;},i.prototype.snapToNorth=function(n,r){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,r):this;},i.prototype.getPitch=function(){return this.transform.pitch;},i.prototype.setPitch=function(n,r){return this.jumpTo({pitch:n},r),this;},i.prototype.cameraForBounds=function(r,i){r=n.LngLatBounds.convert(r);var a=i&&i.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),a,i);},i.prototype._cameraForBoxAndBearing=function(r,i,a,o){var s={top:0,bottom:0,right:0,left:0};if("number"==typeof(o=n.extend({padding:s,offset:[0,0],maxZoom:this.transform.maxZoom},o)).padding){var l=o.padding;o.padding={top:l,bottom:l,right:l,left:l};}o.padding=n.extend(s,o.padding);var u=this.transform,c=u.padding,f=u.project(n.LngLat.convert(r)),d=u.project(n.LngLat.convert(i)),h=f.rotate(-a*Math.PI/180),p=d.rotate(-a*Math.PI/180),m=new n.Point(Math.max(h.x,p.x),Math.max(h.y,p.y)),g=new n.Point(Math.min(h.x,p.x),Math.min(h.y,p.y)),v=m.sub(g),y=(u.width-(c.left+c.right+o.padding.left+o.padding.right))/v.x,_=(u.height-(c.top+c.bottom+o.padding.top+o.padding.bottom))/v.y;if(!(_<0||y<0)){var b=Math.min(u.scaleZoom(u.scale*Math.min(y,_)),o.maxZoom),x="number"==typeof o.offset.x?new n.Point(o.offset.x,o.offset.y):n.Point.convert(o.offset),E=new n.Point((o.padding.left-o.padding.right)/2,(o.padding.top-o.padding.bottom)/2).rotate(a*Math.PI/180),w=x.add(E).mult(u.scale/u.zoomScale(b));return{center:u.unproject(f.add(d).div(2).sub(w)),zoom:b,bearing:a};}n.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");},i.prototype.fitBounds=function(n,r,i){return this._fitInternal(this.cameraForBounds(n,r),r,i);},i.prototype.fitScreenCoordinates=function(r,i,a,o,s){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(n.Point.convert(r)),this.transform.pointLocation(n.Point.convert(i)),a,o),o,s);},i.prototype._fitInternal=function(r,i,a){return r?(delete(i=n.extend(r,i)).padding,i.linear?this.easeTo(i,a):this.flyTo(i,a)):this;},i.prototype.jumpTo=function(r,i){this.stop();var a=this.transform,o=!1,s=!1,l=!1;return"zoom"in r&&a.zoom!==+r.zoom&&(o=!0,a.zoom=+r.zoom),void 0!==r.center&&(a.center=n.LngLat.convert(r.center)),"bearing"in r&&a.bearing!==+r.bearing&&(s=!0,a.bearing=+r.bearing),"pitch"in r&&a.pitch!==+r.pitch&&(l=!0,a.pitch=+r.pitch),null==r.padding||a.isPaddingEqual(r.padding)||(a.padding=r.padding),this.fire(new n.Event("movestart",i)).fire(new n.Event("move",i)),o&&this.fire(new n.Event("zoomstart",i)).fire(new n.Event("zoom",i)).fire(new n.Event("zoomend",i)),s&&this.fire(new n.Event("rotatestart",i)).fire(new n.Event("rotate",i)).fire(new n.Event("rotateend",i)),l&&this.fire(new n.Event("pitchstart",i)).fire(new n.Event("pitch",i)).fire(new n.Event("pitchend",i)),this.fire(new n.Event("moveend",i));},i.prototype.easeTo=function(r,i){var a=this;this._stop(!1,r.easeId),(!1===(r=n.extend({offset:[0,0],duration:500,easing:n.ease},r)).animate||!r.essential&&n.browser.prefersReducedMotion)&&(r.duration=0);var o=this.transform,s=this.getZoom(),l=this.getBearing(),u=this.getPitch(),c=this.getPadding(),f="zoom"in r?+r.zoom:s,d="bearing"in r?this._normalizeBearing(r.bearing,l):l,h="pitch"in r?+r.pitch:u,p="padding"in r?r.padding:o.padding,m=n.Point.convert(r.offset),g=o.centerPoint.add(m),v=o.pointLocation(g),y=n.LngLat.convert(r.center||v);this._normalizeCenter(y);var _,b,x=o.project(v),E=o.project(y).sub(x),w=o.zoomScale(f-s);r.around&&(_=n.LngLat.convert(r.around),b=o.locationPoint(_));var S={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||f!==s,this._rotating=this._rotating||l!==d,this._pitching=this._pitching||h!==u,this._padding=!o.isPaddingEqual(p),this._easeId=r.easeId,this._prepareEase(i,r.noMoveStart,S),this._ease(function(r){if(a._zooming&&(o.zoom=n.number(s,f,r)),a._rotating&&(o.bearing=n.number(l,d,r)),a._pitching&&(o.pitch=n.number(u,h,r)),a._padding&&(o.interpolatePadding(c,p,r),g=o.centerPoint.add(m)),_)o.setLocationAtPoint(_,b);else{var v=o.zoomScale(o.zoom-s),y=Math.pow(f>s?Math.min(2,w):Math.max(.5,w),1-r),S=o.unproject(x.add(E.mult(r*y)).mult(v));o.setLocationAtPoint(o.renderWorldCopies?S.wrap():S,g);}a._fireMoveEvents(i);},function(n){a._afterEase(i,n);},r),this;},i.prototype._prepareEase=function(r,i,a){void 0===a&&(a={}),this._moving=!0,i||a.moving||this.fire(new n.Event("movestart",r)),this._zooming&&!a.zooming&&this.fire(new n.Event("zoomstart",r)),this._rotating&&!a.rotating&&this.fire(new n.Event("rotatestart",r)),this._pitching&&!a.pitching&&this.fire(new n.Event("pitchstart",r));},i.prototype._fireMoveEvents=function(r){this.fire(new n.Event("move",r)),this._zooming&&this.fire(new n.Event("zoom",r)),this._rotating&&this.fire(new n.Event("rotate",r)),this._pitching&&this.fire(new n.Event("pitch",r));},i.prototype._afterEase=function(r,i){if(!this._easeId||!i||this._easeId!==i){delete this._easeId;var a=this._zooming,o=this._rotating,s=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,a&&this.fire(new n.Event("zoomend",r)),o&&this.fire(new n.Event("rotateend",r)),s&&this.fire(new n.Event("pitchend",r)),this.fire(new n.Event("moveend",r));}},i.prototype.flyTo=function(r,i){var a=this;if(!r.essential&&n.browser.prefersReducedMotion){var o=n.pick(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(o,i);}this.stop(),r=n.extend({offset:[0,0],speed:1.2,curve:1.42,easing:n.ease},r);var s=this.transform,l=this.getZoom(),u=this.getBearing(),c=this.getPitch(),f=this.getPadding(),d="zoom"in r?n.clamp(+r.zoom,s.minZoom,s.maxZoom):l,h="bearing"in r?this._normalizeBearing(r.bearing,u):u,p="pitch"in r?+r.pitch:c,m="padding"in r?r.padding:s.padding,g=s.zoomScale(d-l),v=n.Point.convert(r.offset),y=s.centerPoint.add(v),_=s.pointLocation(y),b=n.LngLat.convert(r.center||_);this._normalizeCenter(b);var x=s.project(_),E=s.project(b).sub(x),w=r.curve,S=Math.max(s.width,s.height),T=S/g,A=E.mag();if("minZoom"in r){var C=n.clamp(Math.min(r.minZoom,l,d),s.minZoom,s.maxZoom);w=Math.sqrt(S/s.zoomScale(C-l)/A*2);}var O=w*w;function M(n){var r=(T*T-S*S+(n?-1:1)*O*O*A*A)/(2*(n?T:S)*O*A);return Math.log(Math.sqrt(r*r+1)-r);}function R(n){return(Math.exp(n)-Math.exp(-n))/2;}function P(n){return(Math.exp(n)+Math.exp(-n))/2;}var k=M(0),I=function(n){return P(k)/P(k+w*n);},L=function(n){var r;return S*((P(k)*(R(r=k+w*n)/P(r))-R(k))/O)/A;},N=(M(1)-k)/w;if(1e-6>Math.abs(A)||!isFinite(N)){if(1e-6>Math.abs(S-T))return this.easeTo(r,i);var D=T<S?-1:1;N=Math.abs(Math.log(T/S))/w,L=function(){return 0;},I=function(n){return Math.exp(D*w*n);};}return r.duration="duration"in r?+r.duration:1e3*N/("screenSpeed"in r?+r.screenSpeed/w:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=u!==h,this._pitching=p!==c,this._padding=!s.isPaddingEqual(m),this._prepareEase(i,!1),this._ease(function(r){var o=r*N,g=1/I(o);s.zoom=1===r?d:l+s.scaleZoom(g),a._rotating&&(s.bearing=n.number(u,h,r)),a._pitching&&(s.pitch=n.number(c,p,r)),a._padding&&(s.interpolatePadding(f,m,r),y=s.centerPoint.add(v));var _=1===r?b:s.unproject(x.add(E.mult(L(o))).mult(g));s.setLocationAtPoint(s.renderWorldCopies?_.wrap():_,y),a._fireMoveEvents(i);},function(){return a._afterEase(i);},r),this;},i.prototype.isEasing=function(){return!!this._easeFrameId;},i.prototype.stop=function(){return this._stop();},i.prototype._stop=function(n,r){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var i=this._onEaseEnd;delete this._onEaseEnd,i.call(this,r);}if(!n){var a=this.handlers;a&&a.stop(!1);}return this;},i.prototype._ease=function(r,i,a){!1===a.animate||0===a.duration?(r(1),i()):(this._easeStart=n.browser.now(),this._easeOptions=a,this._onEaseFrame=r,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback));},i.prototype._renderFrameCallback=function(){var r=Math.min((n.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(r)),r<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop();},i.prototype._normalizeBearing=function(r,i){var a=Math.abs((r=n.wrap(r,-180,180))-i);return Math.abs(r-360-i)<a&&(r-=360),Math.abs(r+360-i)<a&&(r+=360),r;},i.prototype._normalizeCenter=function(n){var r=this.transform;if(r.renderWorldCopies&&!r.lngRange){var i=n.lng-r.center.lng;n.lng+=i>180?-360:i<-180?360:0;}},i;}(n.Evented),n$=function(r){void 0===r&&(r={}),this.options=r,n.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this);};n$.prototype.getDefaultPosition=function(){return"bottom-right";},n$.prototype.onAdd=function(n){var r=this.options&&this.options.compact;return this._map=n,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=i.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=i.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),r&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===r&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container;},n$.prototype.onRemove=function(){i.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0;},n$.prototype._setElementTitle=function(n,r){var i=this._map._getUIString("AttributionControl."+r);n.title=i,n.setAttribute("aria-label",i);},n$.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"));},n$.prototype._updateEditLink=function(){var r=this._editLink;r||(r=this._editLink=this._container.querySelector(".mapbox-improve-map"));var i=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||n.config.ACCESS_TOKEN}];if(r){var a=i.reduce(function(n,r,a){return r.value&&(n+=r.key+"="+r.value+(a<i.length-1?"&":"")),n;},"?");r.href=n.config.FEEDBACK_URL+"/"+a+(this._map._hash?this._map._hash.getHashString(!0):""),r.rel="noopener nofollow",this._setElementTitle(r,"MapFeedback");}},n$.prototype._updateData=function(n){n&&("metadata"===n.sourceDataType||"visibility"===n.sourceDataType||"style"===n.dataType)&&(this._updateAttributions(),this._updateEditLink());},n$.prototype._updateAttributions=function(){if(this._map.style){var n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(function(n){return"string"!=typeof n?"":n;})):"string"==typeof this.options.customAttribution&&n.push(this.options.customAttribution)),this._map.style.stylesheet){var r=this._map.style.stylesheet;this.styleOwner=r.owner,this.styleId=r.id;}var i=this._map.style.sourceCaches;for(var a in i){var o=i[a];if(o.used){var s=o.getSource();s.attribution&&0>n.indexOf(s.attribution)&&n.push(s.attribution);}}n.sort(function(n,r){return n.length-r.length;});var l=(n=n.filter(function(r,i){for(var a=i+1;a<n.length;a++)if(n[a].indexOf(r)>=0)return!1;return!0;})).join(" | ");l!==this._attribHTML&&(this._attribHTML=l,n.length?(this._innerContainer.innerHTML=l,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null);}},n$.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show");};var nY=function(){n.bindAll(["_updateLogo"],this),n.bindAll(["_updateCompact"],this);};nY.prototype.onAdd=function(n){this._map=n,this._container=i.create("div","mapboxgl-ctrl");var r=i.create("a","mapboxgl-ctrl-logo");return r.target="_blank",r.rel="noopener nofollow",r.href="https://www.mapbox.com/",r.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),r.setAttribute("rel","noopener nofollow"),this._container.appendChild(r),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container;},nY.prototype.onRemove=function(){i.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact);},nY.prototype.getDefaultPosition=function(){return"bottom-left";},nY.prototype._updateLogo=function(n){n&&"metadata"!==n.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none");},nY.prototype._logoRequired=function(){if(this._map.style){var n=this._map.style.sourceCaches;for(var r in n)if(n[r].getSource().mapbox_logo)return!0;return!1;}},nY.prototype._updateCompact=function(){var n=this._container.children;if(n.length){var r=n[0];this._map.getCanvasContainer().offsetWidth<250?r.classList.add("mapboxgl-compact"):r.classList.remove("mapboxgl-compact");}};var nZ=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1;};nZ.prototype.add=function(n){var r=++this._id;return this._queue.push({callback:n,id:r,cancelled:!1}),r;},nZ.prototype.remove=function(n){for(var r=this._currentlyRunning,i=0,a=r?this._queue.concat(r):this._queue;i<a.length;i+=1){var o=a[i];if(o.id===n)return void(o.cancelled=!0);}},nZ.prototype.run=function(n){void 0===n&&(n=0);var r=this._currentlyRunning=this._queue;this._queue=[];for(var i=0;i<r.length;i+=1){var a=r[i];if(!a.cancelled&&(a.callback(n),this._cleared))break;}this._cleared=!1,this._currentlyRunning=!1;},nZ.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[];};var nK={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},nQ=n.window.HTMLImageElement,nJ=n.window.HTMLElement,n0=n.window.ImageBitmap,n1={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},n2=function(a){function o(r){var i=this;if(null!=(r=n.extend({},n1,r)).minZoom&&null!=r.maxZoom&&r.minZoom>r.maxZoom)throw Error("maxZoom must be greater than or equal to minZoom");if(null!=r.minPitch&&null!=r.maxPitch&&r.minPitch>r.maxPitch)throw Error("maxPitch must be greater than or equal to minPitch");if(null!=r.minPitch&&r.minPitch<0)throw Error("minPitch must be greater than or equal to 0");if(null!=r.maxPitch&&r.maxPitch>60)throw Error("maxPitch must be less than or equal to 60");var o=new t9(r.minZoom,r.maxZoom,r.minPitch,r.maxPitch,r.renderWorldCopies);if(a.call(this,o,r),this._interactive=r.interactive,this._maxTileCacheSize=r.maxTileCacheSize,this._failIfMajorPerformanceCaveat=r.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=r.preserveDrawingBuffer,this._antialias=r.antialias,this._trackResize=r.trackResize,this._bearingSnap=r.bearingSnap,this._refreshExpiredTiles=r.refreshExpiredTiles,this._fadeDuration=r.fadeDuration,this._crossSourceCollisions=r.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=r.collectResourceTiming,this._renderTaskQueue=new nZ,this._controls=[],this._mapId=n.uniqueId(),this._locale=n.extend({},nK,r.locale),this._clickTolerance=r.clickTolerance,this._requestManager=new n.RequestManager(r.transformRequest,r.accessToken),"string"==typeof r.container){if(this._container=n.window.document.getElementById(r.container),!this._container)throw Error("Container '"+r.container+"' not found.");}else{if(!(r.container instanceof nJ))throw Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=r.container;}if(r.maxBounds&&this.setMaxBounds(r.maxBounds),n.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw Error("Failed to initialize WebGL.");this.on("move",function(){return i._update(!1);}),this.on("moveend",function(){return i._update(!1);}),this.on("zoom",function(){return i._update(!0);}),void 0!==n.window&&(n.window.addEventListener("online",this._onWindowOnline,!1),n.window.addEventListener("resize",this._onWindowResize,!1),n.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new nX(this,r),this._hash=r.hash&&new nt("string"==typeof r.hash&&r.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:r.center,zoom:r.zoom,bearing:r.bearing,pitch:r.pitch}),r.bounds&&(this.resize(),this.fitBounds(r.bounds,n.extend({},r.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=r.localIdeographFontFamily,r.style&&this.setStyle(r.style,{localIdeographFontFamily:r.localIdeographFontFamily}),r.attributionControl&&this.addControl(new n$({customAttribution:r.customAttribution})),this.addControl(new nY,r.logoPosition),this.on("style.load",function(){i.transform.unmodified&&i.jumpTo(i.style.stylesheet);}),this.on("data",function(r){i._update("style"===r.dataType),i.fire(new n.Event(r.dataType+"data",r));}),this.on("dataloading",function(r){i.fire(new n.Event(r.dataType+"dataloading",r));});}a&&(o.__proto__=a),(o.prototype=Object.create(a&&a.prototype)).constructor=o;var s={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return o.prototype._getMapId=function(){return this._mapId;},o.prototype.addControl=function(r,i){if(void 0===i&&(i=r.getDefaultPosition?r.getDefaultPosition():"top-right"),!r||!r.onAdd)return this.fire(new n.ErrorEvent(Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var a=r.onAdd(this);this._controls.push(r);var o=this._controlPositions[i];return -1!==i.indexOf("bottom")?o.insertBefore(a,o.firstChild):o.appendChild(a),this;},o.prototype.removeControl=function(r){if(!r||!r.onRemove)return this.fire(new n.ErrorEvent(Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var i=this._controls.indexOf(r);return i>-1&&this._controls.splice(i,1),r.onRemove(this),this;},o.prototype.hasControl=function(n){return this._controls.indexOf(n)>-1;},o.prototype.resize=function(r){var i=this._containerDimensions(),a=i[0],o=i[1];if(a===this.transform.width&&o===this.transform.height)return this;this._resizeCanvas(a,o),this.transform.resize(a,o),this.painter.resize(a,o);var s=!this._moving;return s&&this.fire(new n.Event("movestart",r)).fire(new n.Event("move",r)),this.fire(new n.Event("resize",r)),s&&this.fire(new n.Event("moveend",r)),this;},o.prototype.getBounds=function(){return this.transform.getBounds();},o.prototype.getMaxBounds=function(){return this.transform.getMaxBounds();},o.prototype.setMaxBounds=function(r){return this.transform.setMaxBounds(n.LngLatBounds.convert(r)),this._update();},o.prototype.setMinZoom=function(n){if((n=null==n?-2:n)>=-2&&n<=this.transform.maxZoom)return this.transform.minZoom=n,this._update(),this.getZoom()<n&&this.setZoom(n),this;throw Error("minZoom must be between -2 and the current maxZoom, inclusive");},o.prototype.getMinZoom=function(){return this.transform.minZoom;},o.prototype.setMaxZoom=function(n){if((n=null==n?22:n)>=this.transform.minZoom)return this.transform.maxZoom=n,this._update(),this.getZoom()>n&&this.setZoom(n),this;throw Error("maxZoom must be greater than the current minZoom");},o.prototype.getMaxZoom=function(){return this.transform.maxZoom;},o.prototype.setMinPitch=function(n){if((n=null==n?0:n)<0)throw Error("minPitch must be greater than or equal to 0");if(n>=0&&n<=this.transform.maxPitch)return this.transform.minPitch=n,this._update(),this.getPitch()<n&&this.setPitch(n),this;throw Error("minPitch must be between 0 and the current maxPitch, inclusive");},o.prototype.getMinPitch=function(){return this.transform.minPitch;},o.prototype.setMaxPitch=function(n){if((n=null==n?60:n)>60)throw Error("maxPitch must be less than or equal to 60");if(n>=this.transform.minPitch)return this.transform.maxPitch=n,this._update(),this.getPitch()>n&&this.setPitch(n),this;throw Error("maxPitch must be greater than the current minPitch");},o.prototype.getMaxPitch=function(){return this.transform.maxPitch;},o.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies;},o.prototype.setRenderWorldCopies=function(n){return this.transform.renderWorldCopies=n,this._update();},o.prototype.project=function(r){return this.transform.locationPoint(n.LngLat.convert(r));},o.prototype.unproject=function(r){return this.transform.pointLocation(n.Point.convert(r));},o.prototype.isMoving=function(){return this._moving||this.handlers.isMoving();},o.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming();},o.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating();},o.prototype._createDelegatedListener=function(n,r,i){var a,o=this;if("mouseenter"===n||"mouseover"===n){var s=!1;return{layer:r,listener:i,delegates:{mousemove:function(a){var l=o.getLayer(r)?o.queryRenderedFeatures(a.point,{layers:[r]}):[];l.length?s||(s=!0,i.call(o,new nc(n,o,a.originalEvent,{features:l}))):s=!1;},mouseout:function(){s=!1;}}};}if("mouseleave"===n||"mouseout"===n){var l=!1;return{layer:r,listener:i,delegates:{mousemove:function(a){(o.getLayer(r)?o.queryRenderedFeatures(a.point,{layers:[r]}):[]).length?l=!0:l&&(l=!1,i.call(o,new nc(n,o,a.originalEvent)));},mouseout:function(r){l&&(l=!1,i.call(o,new nc(n,o,r.originalEvent)));}}};}return{layer:r,listener:i,delegates:((a={})[n]=function(n){var a=o.getLayer(r)?o.queryRenderedFeatures(n.point,{layers:[r]}):[];a.length&&(n.features=a,i.call(o,n),delete n.features);},a)};},o.prototype.on=function(n,r,i){if(void 0===i)return a.prototype.on.call(this,n,r);var o=this._createDelegatedListener(n,r,i);for(var s in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[n]=this._delegatedListeners[n]||[],this._delegatedListeners[n].push(o),o.delegates)this.on(s,o.delegates[s]);return this;},o.prototype.once=function(n,r,i){if(void 0===i)return a.prototype.once.call(this,n,r);var o=this._createDelegatedListener(n,r,i);for(var s in o.delegates)this.once(s,o.delegates[s]);return this;},o.prototype.off=function(n,r,i){var o=this;return void 0===i?a.prototype.off.call(this,n,r):(this._delegatedListeners&&this._delegatedListeners[n]&&function(a){for(var s=a[n],l=0;l<s.length;l++){var u=s[l];if(u.layer===r&&u.listener===i){for(var c in u.delegates)o.off(c,u.delegates[c]);return s.splice(l,1),o;}}}(this._delegatedListeners),this);},o.prototype.queryRenderedFeatures=function(r,i){if(!this.style)return[];if(void 0!==i||void 0===r||r instanceof n.Point||Array.isArray(r)||(i=r,r=void 0),i=i||{},(r=r||[[0,0],[this.transform.width,this.transform.height]])instanceof n.Point||"number"==typeof r[0])a=[n.Point.convert(r)];else{var a,o=n.Point.convert(r[0]),s=n.Point.convert(r[1]);a=[o,new n.Point(s.x,o.y),s,new n.Point(o.x,s.y),o];}return this.style.queryRenderedFeatures(a,i,this.transform);},o.prototype.querySourceFeatures=function(n,r){return this.style.querySourceFeatures(n,r);},o.prototype.setStyle=function(r,i){return!1!==(i=n.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&r?(this._diffStyle(r,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(r,i));},o.prototype._getUIString=function(n){var r=this._locale[n];if(null==r)throw Error("Missing UI string '"+n+"'");return r;},o.prototype._updateStyle=function(n,r){return this.style&&(this.style.setEventedParent(null),this.style._remove()),n?(this.style=new tv(this,r||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof n?this.style.loadURL(n):this.style.loadJSON(n)):delete this.style,this;},o.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new tv(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty());},o.prototype._diffStyle=function(r,i){var a=this;if("string"==typeof r){var o=this._requestManager.normalizeStyleURL(r),s=this._requestManager.transformRequest(o,n.ResourceType.Style);n.getJSON(s,function(r,o){r?a.fire(new n.ErrorEvent(r)):o&&a._updateDiff(o,i);});}else"object"==typeof r&&this._updateDiff(r,i);},o.prototype._updateDiff=function(r,i){try{this.style.setState(r)&&this._update(!0);}catch(a){n.warnOnce("Unable to perform style diff: "+(a.message||a.error||a)+".  Rebuilding the style from scratch."),this._updateStyle(r,i);}},o.prototype.getStyle=function(){if(this.style)return this.style.serialize();},o.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():n.warnOnce("There is no style added to the map.");},o.prototype.addSource=function(n,r){return this._lazyInitEmptyStyle(),this.style.addSource(n,r),this._update(!0);},o.prototype.isSourceLoaded=function(r){var i=this.style&&this.style.sourceCaches[r];if(void 0!==i)return i.loaded();this.fire(new n.ErrorEvent(Error("There is no source with ID '"+r+"'")));},o.prototype.areTilesLoaded=function(){var n=this.style&&this.style.sourceCaches;for(var r in n){var i=n[r]._tiles;for(var a in i){var o=i[a];if("loaded"!==o.state&&"errored"!==o.state)return!1;}}return!0;},o.prototype.addSourceType=function(n,r,i){return this._lazyInitEmptyStyle(),this.style.addSourceType(n,r,i);},o.prototype.removeSource=function(n){return this.style.removeSource(n),this._update(!0);},o.prototype.getSource=function(n){return this.style.getSource(n);},o.prototype.addImage=function(r,i,a){void 0===a&&(a={});var o=a.pixelRatio;void 0===o&&(o=1);var s=a.sdf;void 0===s&&(s=!1);var l=a.stretchX,u=a.stretchY,c=a.content;if(this._lazyInitEmptyStyle(),i instanceof nQ||n0&&i instanceof n0){var f=n.browser.getImageData(i);this.style.addImage(r,{data:new n.RGBAImage({width:f.width,height:f.height},f.data),pixelRatio:o,stretchX:l,stretchY:u,content:c,sdf:s,version:0});}else{if(void 0===i.width||void 0===i.height)return this.fire(new n.ErrorEvent(Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));this.style.addImage(r,{data:new n.RGBAImage({width:i.width,height:i.height},new Uint8Array(i.data)),pixelRatio:o,stretchX:l,stretchY:u,content:c,sdf:s,version:0,userImage:i}),i.onAdd&&i.onAdd(this,r);}},o.prototype.updateImage=function(r,i){var a=this.style.getImage(r);if(!a)return this.fire(new n.ErrorEvent(Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var o=i instanceof nQ||n0&&i instanceof n0?n.browser.getImageData(i):i,s=o.width,l=o.height,u=o.data;return void 0===s||void 0===l?this.fire(new n.ErrorEvent(Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):s!==a.data.width||l!==a.data.height?this.fire(new n.ErrorEvent(Error("The width and height of the updated image must be that same as the previous version of the image"))):(a.data.replace(u,!(i instanceof nQ||n0&&i instanceof n0)),void this.style.updateImage(r,a));},o.prototype.hasImage=function(r){return r?!!this.style.getImage(r):(this.fire(new n.ErrorEvent(Error("Missing required image id"))),!1);},o.prototype.removeImage=function(n){this.style.removeImage(n);},o.prototype.loadImage=function(r,i){n.getImage(this._requestManager.transformRequest(r,n.ResourceType.Image),i);},o.prototype.listImages=function(){return this.style.listImages();},o.prototype.addLayer=function(n,r){return this._lazyInitEmptyStyle(),this.style.addLayer(n,r),this._update(!0);},o.prototype.moveLayer=function(n,r){return this.style.moveLayer(n,r),this._update(!0);},o.prototype.removeLayer=function(n){return this.style.removeLayer(n),this._update(!0);},o.prototype.getLayer=function(n){return this.style.getLayer(n);},o.prototype.setLayerZoomRange=function(n,r,i){return this.style.setLayerZoomRange(n,r,i),this._update(!0);},o.prototype.setFilter=function(n,r,i){return void 0===i&&(i={}),this.style.setFilter(n,r,i),this._update(!0);},o.prototype.getFilter=function(n){return this.style.getFilter(n);},o.prototype.setPaintProperty=function(n,r,i,a){return void 0===a&&(a={}),this.style.setPaintProperty(n,r,i,a),this._update(!0);},o.prototype.getPaintProperty=function(n,r){return this.style.getPaintProperty(n,r);},o.prototype.setLayoutProperty=function(n,r,i,a){return void 0===a&&(a={}),this.style.setLayoutProperty(n,r,i,a),this._update(!0);},o.prototype.getLayoutProperty=function(n,r){return this.style.getLayoutProperty(n,r);},o.prototype.setLight=function(n,r){return void 0===r&&(r={}),this._lazyInitEmptyStyle(),this.style.setLight(n,r),this._update(!0);},o.prototype.getLight=function(){return this.style.getLight();},o.prototype.setFeatureState=function(n,r){return this.style.setFeatureState(n,r),this._update();},o.prototype.removeFeatureState=function(n,r){return this.style.removeFeatureState(n,r),this._update();},o.prototype.getFeatureState=function(n){return this.style.getFeatureState(n);},o.prototype.getContainer=function(){return this._container;},o.prototype.getCanvasContainer=function(){return this._canvasContainer;},o.prototype.getCanvas=function(){return this._canvas;},o.prototype._containerDimensions=function(){var n=0,r=0;return this._container&&(n=this._container.clientWidth||400,r=this._container.clientHeight||300),[n,r];},o.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==n.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&n.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.");},o.prototype._setupContainer=function(){var n=this._container;n.classList.add("mapboxgl-map"),(this._missingCSSCanary=i.create("div","mapboxgl-canary",n)).style.visibility="hidden",this._detectMissingCSS();var r=this._canvasContainer=i.create("div","mapboxgl-canvas-container",n);this._interactive&&r.classList.add("mapboxgl-interactive"),this._canvas=i.create("canvas","mapboxgl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var a=this._containerDimensions();this._resizeCanvas(a[0],a[1]);var o=this._controlContainer=i.create("div","mapboxgl-control-container",n),s=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(n){s[n]=i.create("div","mapboxgl-ctrl-"+n,o);}),this._container.addEventListener("scroll",this._onMapScroll,!1);},o.prototype._resizeCanvas=function(r,i){var a=n.browser.devicePixelRatio||1;this._canvas.width=a*r,this._canvas.height=a*i,this._canvas.style.width=r+"px",this._canvas.style.height=i+"px";},o.prototype._setupPainter=function(){var i=n.extend({},r.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),a=this._canvas.getContext("webgl",i)||this._canvas.getContext("experimental-webgl",i);a?(this.painter=new t5(a,this.transform),n.webpSupported.testSupport(a)):this.fire(new n.ErrorEvent(Error("Failed to initialize WebGL")));},o.prototype._contextLost=function(r){r.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new n.Event("webglcontextlost",{originalEvent:r}));},o.prototype._contextRestored=function(r){this._setupPainter(),this.resize(),this._update(),this.fire(new n.Event("webglcontextrestored",{originalEvent:r}));},o.prototype._onMapScroll=function(n){if(n.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1;},o.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded();},o.prototype._update=function(n){return this.style&&(this._styleDirty=this._styleDirty||n,this._sourcesDirty=!0,this.triggerRepaint()),this;},o.prototype._requestRenderFrame=function(n){return this._update(),this._renderTaskQueue.add(n);},o.prototype._cancelRenderFrame=function(n){this._renderTaskQueue.remove(n);},o.prototype._render=function(r){var i,a=this,o=0,s=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=s.createQueryEXT(),s.beginQueryEXT(s.TIME_ELAPSED_EXT,i),o=n.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(r),!this._removed){var l=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var u=this.transform.zoom,c=n.browser.now();this.style.zoomHistory.update(u,c);var f=new n.EvaluationParameters(u,{now:c,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),d=f.crossFadingFactor();1===d&&d===this._crossFadingFactor||(l=!0,this._crossFadingFactor=d),this.style.update(f);}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new n.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new n.Event("load"))),this.style&&(this.style.hasTransitions()||l)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var h=n.browser.now()-o;s.endQueryEXT(s.TIME_ELAPSED_EXT,i),setTimeout(function(){var r=s.getQueryObjectEXT(i,s.QUERY_RESULT_EXT)/1e6;s.deleteQueryEXT(i),a.fire(new n.Event("gpu-timing-frame",{cpuTime:h,gpuTime:r}));},50);}if(this.listens("gpu-timing-layer")){var p=this.painter.collectGpuTimers();setTimeout(function(){var r=a.painter.queryGpuTimers(p);a.fire(new n.Event("gpu-timing-layer",{layerTimes:r}));},50);}var m=this._sourcesDirty||this._styleDirty||this._placementDirty;return m||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new n.Event("idle")),!this._loaded||this._fullyLoaded||m||(this._fullyLoaded=!0),this;}},o.prototype.remove=function(){this._hash&&this._hash.remove();for(var r=0,i=this._controls;r<i.length;r+=1)i[r].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==n.window&&(n.window.removeEventListener("resize",this._onWindowResize,!1),n.window.removeEventListener("orientationchange",this._onWindowResize,!1),n.window.removeEventListener("online",this._onWindowOnline,!1));var a=this.painter.context.gl.getExtension("WEBGL_lose_context");a&&a.loseContext(),n3(this._canvasContainer),n3(this._controlContainer),n3(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new n.Event("remove"));},o.prototype.triggerRepaint=function(){var r=this;this.style&&!this._frame&&(this._frame=n.browser.frame(function(n){r._frame=null,r._render(n);}));},o.prototype._onWindowOnline=function(){this._update();},o.prototype._onWindowResize=function(n){this._trackResize&&this.resize({originalEvent:n})._update();},s.showTileBoundaries.get=function(){return!!this._showTileBoundaries;},s.showTileBoundaries.set=function(n){this._showTileBoundaries!==n&&(this._showTileBoundaries=n,this._update());},s.showPadding.get=function(){return!!this._showPadding;},s.showPadding.set=function(n){this._showPadding!==n&&(this._showPadding=n,this._update());},s.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes;},s.showCollisionBoxes.set=function(n){this._showCollisionBoxes!==n&&(this._showCollisionBoxes=n,n?this.style._generateCollisionBoxes():this._update());},s.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector;},s.showOverdrawInspector.set=function(n){this._showOverdrawInspector!==n&&(this._showOverdrawInspector=n,this._update());},s.repaint.get=function(){return!!this._repaint;},s.repaint.set=function(n){this._repaint!==n&&(this._repaint=n,this.triggerRepaint());},s.vertices.get=function(){return!!this._vertices;},s.vertices.set=function(n){this._vertices=n,this._update();},o.prototype._setCacheLimits=function(r,i){n.setCacheLimits(r,i);},s.version.get=function(){return n.version;},Object.defineProperties(o.prototype,s),o;}(nq);function n3(n){n.parentNode&&n.parentNode.removeChild(n);}var n4={showCompass:!0,showZoom:!0,visualizePitch:!1},n5=function(r){var a=this;this.options=n.extend({},n4,r),this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(n){return n.preventDefault();}),this.options.showZoom&&(n.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(n){return a._map.zoomIn({},{originalEvent:n});}),i.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(n){return a._map.zoomOut({},{originalEvent:n});}),i.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(n.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(n){a.options.visualizePitch?a._map.resetNorthPitch({},{originalEvent:n}):a._map.resetNorth({},{originalEvent:n});}),this._compassIcon=i.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0));};n5.prototype._updateZoomButtons=function(){var n=this._map.getZoom(),r=n===this._map.getMaxZoom(),i=n===this._map.getMinZoom();this._zoomInButton.disabled=r,this._zoomOutButton.disabled=i,this._zoomInButton.setAttribute("aria-disabled",r.toString()),this._zoomOutButton.setAttribute("aria-disabled",i.toString());},n5.prototype._rotateCompassArrow=function(){var n=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=n;},n5.prototype.onAdd=function(n){return this._map=n,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new n6(this._map,this._compass,this.options.visualizePitch)),this._container;},n5.prototype.onRemove=function(){i.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map;},n5.prototype._createButton=function(n,r){var a=i.create("button",n,this._container);return a.type="button",a.addEventListener("click",r),a;},n5.prototype._setButtonTitle=function(n,r){var i=this._map._getUIString("NavigationControl."+r);n.title=i,n.setAttribute("aria-label",i);};var n6=function(r,a,o){void 0===o&&(o=!1),this._clickTolerance=10,this.element=a,this.mouseRotate=new nw({clickTolerance:r.dragRotate._mouseRotate._clickTolerance}),this.map=r,o&&(this.mousePitch=new nS({clickTolerance:r.dragRotate._mousePitch._clickTolerance})),n.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),i.addEventListener(a,"mousedown",this.mousedown),i.addEventListener(a,"touchstart",this.touchstart,{passive:!1}),i.addEventListener(a,"touchmove",this.touchmove),i.addEventListener(a,"touchend",this.touchend),i.addEventListener(a,"touchcancel",this.reset);};function n8(r,i,a){if(r=new n.LngLat(r.lng,r.lat),i){var o=new n.LngLat(r.lng-360,r.lat),s=new n.LngLat(r.lng+360,r.lat),l=a.locationPoint(r).distSqr(i);a.locationPoint(o).distSqr(i)<l?r=o:a.locationPoint(s).distSqr(i)<l&&(r=s);}for(;Math.abs(r.lng-a.center.lng)>180;){var u=a.locationPoint(r);if(u.x>=0&&u.y>=0&&u.x<=a.width&&u.y<=a.height)break;r.lng>a.center.lng?r.lng-=360:r.lng+=360;}return r;}n6.prototype.down=function(n,r){this.mouseRotate.mousedown(n,r),this.mousePitch&&this.mousePitch.mousedown(n,r),i.disableDrag();},n6.prototype.move=function(n,r){var i=this.map,a=this.mouseRotate.mousemoveWindow(n,r);if(a&&a.bearingDelta&&i.setBearing(i.getBearing()+a.bearingDelta),this.mousePitch){var o=this.mousePitch.mousemoveWindow(n,r);o&&o.pitchDelta&&i.setPitch(i.getPitch()+o.pitchDelta);}},n6.prototype.off=function(){var n=this.element;i.removeEventListener(n,"mousedown",this.mousedown),i.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),i.removeEventListener(n,"touchmove",this.touchmove),i.removeEventListener(n,"touchend",this.touchend),i.removeEventListener(n,"touchcancel",this.reset),this.offTemp();},n6.prototype.offTemp=function(){i.enableDrag(),i.removeEventListener(n.window,"mousemove",this.mousemove),i.removeEventListener(n.window,"mouseup",this.mouseup);},n6.prototype.mousedown=function(r){this.down(n.extend({},r,{ctrlKey:!0,preventDefault:function(){return r.preventDefault();}}),i.mousePos(this.element,r)),i.addEventListener(n.window,"mousemove",this.mousemove),i.addEventListener(n.window,"mouseup",this.mouseup);},n6.prototype.mousemove=function(n){this.move(n,i.mousePos(this.element,n));},n6.prototype.mouseup=function(n){this.mouseRotate.mouseupWindow(n),this.mousePitch&&this.mousePitch.mouseupWindow(n),this.offTemp();},n6.prototype.touchstart=function(n){1!==n.targetTouches.length?this.reset():(this._startPos=this._lastPos=i.touchPos(this.element,n.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return n.preventDefault();}},this._startPos));},n6.prototype.touchmove=function(n){1!==n.targetTouches.length?this.reset():(this._lastPos=i.touchPos(this.element,n.targetTouches)[0],this.move({preventDefault:function(){return n.preventDefault();}},this._lastPos));},n6.prototype.touchend=function(n){0===n.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset();},n6.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp();};var n7={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function n9(n,r,i){var a=n.classList;for(var o in n7)a.remove("mapboxgl-"+i+"-anchor-"+o);a.add("mapboxgl-"+i+"-anchor-"+r);}var re,rt=function(r){function a(a,o){if(r.call(this),(a instanceof n.window.HTMLElement||o)&&(a=n.extend({element:a},o)),n.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&"auto"!==a.pitchAlignment?a.pitchAlignment:this._rotationAlignment,a&&a.element)this._element=a.element,this._offset=n.Point.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=i.create("div"),this._element.setAttribute("aria-label","Map marker");var s=i.createNS("http://www.w3.org/2000/svg","svg");s.setAttributeNS(null,"display","block"),s.setAttributeNS(null,"height","41px"),s.setAttributeNS(null,"width","27px"),s.setAttributeNS(null,"viewBox","0 0 27 41");var l=i.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"stroke","none"),l.setAttributeNS(null,"stroke-width","1"),l.setAttributeNS(null,"fill","none"),l.setAttributeNS(null,"fill-rule","evenodd");var u=i.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill-rule","nonzero");var c=i.createNS("http://www.w3.org/2000/svg","g");c.setAttributeNS(null,"transform","translate(3.0, 29.0)"),c.setAttributeNS(null,"fill","#000000");for(var f=0,d=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];f<d.length;f+=1){var h=d[f],p=i.createNS("http://www.w3.org/2000/svg","ellipse");p.setAttributeNS(null,"opacity","0.04"),p.setAttributeNS(null,"cx","10.5"),p.setAttributeNS(null,"cy","5.80029008"),p.setAttributeNS(null,"rx",h.rx),p.setAttributeNS(null,"ry",h.ry),c.appendChild(p);}var m=i.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"fill",this._color);var g=i.createNS("http://www.w3.org/2000/svg","path");g.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),m.appendChild(g);var v=i.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"opacity","0.25"),v.setAttributeNS(null,"fill","#000000");var y=i.createNS("http://www.w3.org/2000/svg","path");y.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),v.appendChild(y);var _=i.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"transform","translate(6.0, 7.0)"),_.setAttributeNS(null,"fill","#FFFFFF");var b=i.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"transform","translate(8.0, 8.0)");var x=i.createNS("http://www.w3.org/2000/svg","circle");x.setAttributeNS(null,"fill","#000000"),x.setAttributeNS(null,"opacity","0.25"),x.setAttributeNS(null,"cx","5.5"),x.setAttributeNS(null,"cy","5.5"),x.setAttributeNS(null,"r","5.4999962");var E=i.createNS("http://www.w3.org/2000/svg","circle");E.setAttributeNS(null,"fill","#FFFFFF"),E.setAttributeNS(null,"cx","5.5"),E.setAttributeNS(null,"cy","5.5"),E.setAttributeNS(null,"r","5.4999962"),b.appendChild(x),b.appendChild(E),u.appendChild(c),u.appendChild(m),u.appendChild(v),u.appendChild(_),u.appendChild(b),s.appendChild(u),s.setAttributeNS(null,"height",41*this._scale+"px"),s.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(s),this._offset=n.Point.convert(a&&a.offset||[0,-14]);}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(n){n.preventDefault();}),this._element.addEventListener("mousedown",function(n){n.preventDefault();}),n9(this._element,this._anchor,"marker"),this._popup=null;}return r&&(a.__proto__=r),(a.prototype=Object.create(r&&r.prototype)).constructor=a,a.prototype.addTo=function(n){return this.remove(),this._map=n,n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this;},a.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),i.remove(this._element),this._popup&&this._popup.remove(),this;},a.prototype.getLngLat=function(){return this._lngLat;},a.prototype.setLngLat=function(r){return this._lngLat=n.LngLat.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this;},a.prototype.getElement=function(){return this._element;},a.prototype.setPopup=function(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){var r=Math.sqrt(91.125);n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[r,-1*(24.6+r)],"bottom-right":[-r,-1*(24.6+r)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset;}this._popup=n,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress);}return this;},a.prototype._onKeyPress=function(n){var r=n.code,i=n.charCode||n.keyCode;"Space"!==r&&"Enter"!==r&&32!==i&&13!==i||this.togglePopup();},a.prototype._onMapClick=function(n){var r=n.originalEvent.target,i=this._element;this._popup&&(r===i||i.contains(r))&&this.togglePopup();},a.prototype.getPopup=function(){return this._popup;},a.prototype.togglePopup=function(){var n=this._popup;return n&&(n.isOpen()?n.remove():n.addTo(this._map)),this;},a.prototype._update=function(n){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=n8(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var r="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?r="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(r="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var a="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?a="rotateX(0deg)":"map"===this._pitchAlignment&&(a="rotateX("+this._map.getPitch()+"deg)"),n&&"moveend"!==n.type||(this._pos=this._pos.round()),i.setTransform(this._element,n7[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+a+" "+r);}},a.prototype.getOffset=function(){return this._offset;},a.prototype.setOffset=function(r){return this._offset=n.Point.convert(r),this._update(),this;},a.prototype._onMove=function(r){if(!this._isDragging){var i=this._clickTolerance||this._map._clickTolerance;this._isDragging=r.point.dist(this._pointerdownPos)>=i;}this._isDragging&&(this._pos=r.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new n.Event("dragstart"))),this.fire(new n.Event("drag")));},a.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new n.Event("dragend")),this._state="inactive";},a.prototype._addDragHandler=function(n){this._element.contains(n.originalEvent.target)&&(n.preventDefault(),this._positionDelta=n.point.sub(this._pos).add(this._offset),this._pointerdownPos=n.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp));},a.prototype.setDraggable=function(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this;},a.prototype.isDraggable=function(){return this._draggable;},a.prototype.setRotation=function(n){return this._rotation=n||0,this._update(),this;},a.prototype.getRotation=function(){return this._rotation;},a.prototype.setRotationAlignment=function(n){return this._rotationAlignment=n||"auto",this._update(),this;},a.prototype.getRotationAlignment=function(){return this._rotationAlignment;},a.prototype.setPitchAlignment=function(n){return this._pitchAlignment=n&&"auto"!==n?n:this._rotationAlignment,this._update(),this;},a.prototype.getPitchAlignment=function(){return this._pitchAlignment;},a;}(n.Evented),rn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},rr=0,ri=!1,ra=function(r){function a(i){r.call(this),this.options=n.extend({},rn,i),n.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this);}return r&&(a.__proto__=r),(a.prototype=Object.create(r&&r.prototype)).constructor=a,a.prototype.onAdd=function(r){var a;return this._map=r,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),a=this._setupUI,void 0!==re?a(re):void 0!==n.window.navigator.permissions?n.window.navigator.permissions.query({name:"geolocation"}).then(function(n){a(re="denied"!==n.state);}):a(re=!!n.window.navigator.geolocation),this._container;},a.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(n.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),i.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,rr=0,ri=!1;},a.prototype._isOutOfMapMaxBounds=function(n){var r=this._map.getMaxBounds(),i=n.coords;return r&&(i.longitude<r.getWest()||i.longitude>r.getEast()||i.latitude<r.getSouth()||i.latitude>r.getNorth());},a.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");}},a.prototype._onSuccess=function(r){if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new n.Event("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(r),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new n.Event("geolocate",r)),this._finish();}},a.prototype._updateCamera=function(r){var i=new n.LngLat(r.coords.longitude,r.coords.latitude),a=r.coords.accuracy,o=this._map.getBearing(),s=n.extend({bearing:o},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(a),s,{geolocateSource:!0});},a.prototype._updateMarker=function(r){if(r){var i=new n.LngLat(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius();}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove();},a.prototype._updateCircleRadius=function(){var n=this._map._container.clientHeight/2,r=this._map.unproject([0,n]),i=this._map.unproject([1,n]),a=r.distanceTo(i),o=Math.ceil(2*this._accuracy/a);this._circleElement.style.width=o+"px",this._circleElement.style.height=o+"px";},a.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius();},a.prototype._onError=function(r){if(this._map){if(this.options.trackUserLocation){if(1===r.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i),void 0!==this._geolocationWatchID&&this._clearWatch();}else{if(3===r.code&&ri)return;this._setErrorState();}}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new n.Event("error",r)),this._finish();}},a.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0;},a.prototype._setupUI=function(r){var a=this;if(this._container.addEventListener("contextmenu",function(n){return n.preventDefault();}),this._geolocateButton=i.create("button","mapboxgl-ctrl-geolocate",this._container),i.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===r){n.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o);}else{var s=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s);}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=i.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new rt(this._dotElement),this._circleElement=i.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new rt({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(r){r.geolocateSource||"ACTIVE_LOCK"!==a._watchState||r.originalEvent&&"resize"===r.originalEvent.type||(a._watchState="BACKGROUND",a._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),a._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),a.fire(new n.Event("trackuserlocationend")));});},a.prototype.trigger=function(){if(!this._setup)return n.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new n.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":rr--,ri=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new n.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new n.Event("trackuserlocationstart"));}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var r;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++rr>1?(r={maximumAge:6e5,timeout:0},ri=!0):(r=this.options.positionOptions,ri=!1),this._geolocationWatchID=n.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,r);}}else n.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0;},a.prototype._clearWatch=function(){n.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null);},a;}(n.Evented),ro={maxWidth:100,unit:"metric"},rs=function(r){this.options=n.extend({},ro,r),n.bindAll(["_onMove","setUnit"],this);};function rl(n,r,i){var a=i&&i.maxWidth||100,o=n._container.clientHeight/2,s=n.unproject([0,o]),l=n.unproject([a,o]),u=s.distanceTo(l);if(i&&"imperial"===i.unit){var c=3.2808*u;c>5280?ru(r,a,c/5280,n._getUIString("ScaleControl.Miles")):ru(r,a,c,n._getUIString("ScaleControl.Feet"));}else i&&"nautical"===i.unit?ru(r,a,u/1852,n._getUIString("ScaleControl.NauticalMiles")):u>=1e3?ru(r,a,u/1e3,n._getUIString("ScaleControl.Kilometers")):ru(r,a,u,n._getUIString("ScaleControl.Meters"));}function ru(n,r,i,a){var o,s,l,u,c=(l=Math.pow(10,(""+Math.floor(i)).length-1))*(u=(u=i/l)>=10?10:u>=5?5:u>=3?3:u>=2?2:u>=1?1:(s=Math.pow(10,Math.ceil(-Math.log(o=u)/Math.LN10)),Math.round(o*s)/s));n.style.width=c/i*r+"px",n.innerHTML=c+"&nbsp;"+a;}rs.prototype.getDefaultPosition=function(){return"bottom-left";},rs.prototype._onMove=function(){rl(this._map,this._container,this.options);},rs.prototype.onAdd=function(n){return this._map=n,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",n.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container;},rs.prototype.onRemove=function(){i.remove(this._container),this._map.off("move",this._onMove),this._map=void 0;},rs.prototype.setUnit=function(n){this.options.unit=n,rl(this._map,this._container,this.options);};var rc=function(r){this._fullscreen=!1,r&&r.container&&(r.container instanceof n.window.HTMLElement?this._container=r.container:n.warnOnce("Full screen control 'container' must be a DOM element.")),n.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in n.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in n.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in n.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in n.window.document&&(this._fullscreenchange="MSFullscreenChange");};rc.prototype.onAdd=function(r){return this._map=r,this._container||(this._container=this._map.getContainer()),this._controlContainer=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",n.warnOnce("This device does not support fullscreen mode.")),this._controlContainer;},rc.prototype.onRemove=function(){i.remove(this._controlContainer),this._map=null,n.window.document.removeEventListener(this._fullscreenchange,this._changeIcon);},rc.prototype._checkFullscreenSupport=function(){return!!(n.window.document.fullscreenEnabled||n.window.document.mozFullScreenEnabled||n.window.document.msFullscreenEnabled||n.window.document.webkitFullscreenEnabled);},rc.prototype._setupUI=function(){var r=this._fullscreenButton=i.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);i.create("span","mapboxgl-ctrl-icon",r).setAttribute("aria-hidden",!0),r.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),n.window.document.addEventListener(this._fullscreenchange,this._changeIcon);},rc.prototype._updateTitle=function(){var n=this._getTitle();this._fullscreenButton.setAttribute("aria-label",n),this._fullscreenButton.title=n;},rc.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter");},rc.prototype._isFullscreen=function(){return this._fullscreen;},rc.prototype._changeIcon=function(){(n.window.document.fullscreenElement||n.window.document.mozFullScreenElement||n.window.document.webkitFullscreenElement||n.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle());},rc.prototype._onClickFullscreen=function(){this._isFullscreen()?n.window.document.exitFullscreen?n.window.document.exitFullscreen():n.window.document.mozCancelFullScreen?n.window.document.mozCancelFullScreen():n.window.document.msExitFullscreen?n.window.document.msExitFullscreen():n.window.document.webkitCancelFullScreen&&n.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen();};var rf={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},rd=function(r){function a(i){r.call(this),this.options=n.extend(Object.create(rf),i),n.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this);}return r&&(a.__proto__=r),(a.prototype=Object.create(r&&r.prototype)).constructor=a,a.prototype.addTo=function(r){return this._map&&this.remove(),this._map=r,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new n.Event("open")),this;},a.prototype.isOpen=function(){return!!this._map;},a.prototype.remove=function(){return this._content&&i.remove(this._content),this._container&&(i.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new n.Event("close")),this;},a.prototype.getLngLat=function(){return this._lngLat;},a.prototype.setLngLat=function(r){return this._lngLat=n.LngLat.convert(r),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this;},a.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this;},a.prototype.getElement=function(){return this._container;},a.prototype.setText=function(r){return this.setDOMContent(n.window.document.createTextNode(r));},a.prototype.setHTML=function(r){var i,a=n.window.document.createDocumentFragment(),o=n.window.document.createElement("body");for(o.innerHTML=r;i=o.firstChild;)a.appendChild(i);return this.setDOMContent(a);},a.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth;},a.prototype.setMaxWidth=function(n){return this.options.maxWidth=n,this._update(),this;},a.prototype.setDOMContent=function(n){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=i.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(n),this._createCloseButton(),this._update(),this._focusFirstElement(),this;},a.prototype.addClassName=function(n){this._container&&this._container.classList.add(n);},a.prototype.removeClassName=function(n){this._container&&this._container.classList.remove(n);},a.prototype.setOffset=function(n){return this.options.offset=n,this._update(),this;},a.prototype.toggleClassName=function(n){if(this._container)return this._container.classList.toggle(n);},a.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=i.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose));},a.prototype._onMouseUp=function(n){this._update(n.point);},a.prototype._onMouseMove=function(n){this._update(n.point);},a.prototype._onDrag=function(n){this._update(n.point);},a.prototype._update=function(r){var a=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=i.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=i.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(n){return a._container.classList.add(n);}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=n8(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||r)){var o=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat),s=this.options.anchor,l=function r(i){if(i){if("number"==typeof i){var a=Math.round(Math.sqrt(.5*Math.pow(i,2)));return{center:new n.Point(0,0),top:new n.Point(0,i),"top-left":new n.Point(a,a),"top-right":new n.Point(-a,a),bottom:new n.Point(0,-i),"bottom-left":new n.Point(a,-a),"bottom-right":new n.Point(-a,-a),left:new n.Point(i,0),right:new n.Point(-i,0)};}if(i instanceof n.Point||Array.isArray(i)){var o=n.Point.convert(i);return{center:o,top:o,"top-left":o,"top-right":o,bottom:o,"bottom-left":o,"bottom-right":o,left:o,right:o};}return{center:n.Point.convert(i.center||[0,0]),top:n.Point.convert(i.top||[0,0]),"top-left":n.Point.convert(i["top-left"]||[0,0]),"top-right":n.Point.convert(i["top-right"]||[0,0]),bottom:n.Point.convert(i.bottom||[0,0]),"bottom-left":n.Point.convert(i["bottom-left"]||[0,0]),"bottom-right":n.Point.convert(i["bottom-right"]||[0,0]),left:n.Point.convert(i.left||[0,0]),right:n.Point.convert(i.right||[0,0])};}return r(new n.Point(0,0));}(this.options.offset);if(!s){var u,c=this._container.offsetWidth,f=this._container.offsetHeight;u=o.y+l.bottom.y<f?["top"]:o.y>this._map.transform.height-f?["bottom"]:[],o.x<c/2?u.push("left"):o.x>this._map.transform.width-c/2&&u.push("right"),s=0===u.length?"bottom":u.join("-");}var d=o.add(l[s]).round();i.setTransform(this._container,n7[s]+" translate("+d.x+"px,"+d.y+"px)"),n9(this._container,s,"popup");}},a.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var n=this._container.querySelector("a[href], [tabindex]:not([tabindex='-1']), [contenteditable]:not([contenteditable='false']), button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled])");n&&n.focus();}},a.prototype._onClose=function(){this.remove();},a;}(n.Evented),rh={version:n.version,supported:r,setRTLTextPlugin:n.setRTLTextPlugin,getRTLTextPluginStatus:n.getRTLTextPluginStatus,Map:n2,NavigationControl:n5,GeolocateControl:ra,AttributionControl:n$,ScaleControl:rs,FullscreenControl:rc,Popup:rd,Marker:rt,Style:tv,LngLat:n.LngLat,LngLatBounds:n.LngLatBounds,Point:n.Point,MercatorCoordinate:n.MercatorCoordinate,Evented:n.Evented,config:n.config,prewarm:function(){eL().acquire(eR);},clearPrewarmedResources:function(){var n=ek;n&&(n.isPreloaded()&&1===n.numActive()?(n.release(eR),ek=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"));},get accessToken(){return n.config.ACCESS_TOKEN;},set accessToken(e){n.config.ACCESS_TOKEN=e;},get baseApiUrl(){return n.config.API_URL;},set baseApiUrl(e){n.config.API_URL=e;},get workerCount(){return eP.workerCount;},set workerCount(t){eP.workerCount=t;},get maxParallelImageRequests(){return n.config.MAX_PARALLEL_IMAGE_REQUESTS;},set maxParallelImageRequests(e){n.config.MAX_PARALLEL_IMAGE_REQUESTS=e;},clearStorage:function(r){n.clearTileCache(r);},workerUrl:""};return rh;}),i;},"object"==typeof r&&void 0!==n?n.exports=o():(a=a||self).mapboxgl=o();},"9a0d8613":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return y;}});var a=i("777fffbe"),o=a._(i("e4870cf0")),s=a._(i("613f75ca")),l=i("58fbde6a"),u=a._(i("accd0a80")),c=a._(i("609f48be")),f=i("7f173680"),d=a._(i("551ddf56")),h=i("dac8af92"),p=["options","fieldProps","proFieldProps","valueEnum"],m=c.default.forwardRef(function(n,r){var i=n.options,a=n.fieldProps,u=n.proFieldProps,c=n.valueEnum,f=(0,s.default)(n,p);return(0,h.jsx)(d.default,(0,o.default)({ref:r,valueType:"checkbox",valueEnum:(0,l.runFunction)(c,void 0),fieldProps:(0,o.default)({options:i},a),lightProps:(0,o.default)({labelFormatter:function(){return(0,h.jsx)(d.default,(0,o.default)({ref:r,valueType:"checkbox",mode:"read",valueEnum:(0,l.runFunction)(c,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,o.default)({options:i},a),proFieldProps:u},f));}},f.lightProps),proFieldProps:u},f));}),g=c.default.forwardRef(function(n,r){var i=n.fieldProps,a=n.children;return(0,h.jsx)(u.default,(0,o.default)((0,o.default)({ref:r},i),{},{children:a}));}),v=(0,f.createField)(g,{valuePropName:"checked"});v.Group=m;var y=v;},"9a314689":function(n,r,i){n.exports=i("6909693a");},"9a4b906d":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{tickIncrement:function(){return l;},tickStep:function(){return u;}});let a=Math.sqrt(50),o=Math.sqrt(10),s=Math.sqrt(2);function l(n,r,i){let l=(r-n)/Math.max(0,i),u=Math.floor(Math.log(l)/Math.LN10),c=l/10**u;return u>=0?(c>=a?10:c>=o?5:c>=s?2:1)*10**u:-(10**-u)/(c>=a?10:c>=o?5:c>=s?2:1);}function u(n,r,i){let l=Math.abs(r-n)/Math.max(0,i),u=10**Math.floor(Math.log(l)/Math.LN10),c=l/u;return c>=a?u*=10:c>=o?u*=5:c>=s&&(u*=2),r<n?-u:u;}},"9a62f123":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return p;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("7cfeda15"),l=a._(s),u=i("609f48be"),c=o._(u),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M752 664c-28.5 0-54.8 10-75.4 26.7L469.4 540.8a160.68 160.68 0 000-57.6l207.2-149.9C697.2 350 723.5 360 752 360c66.2 0 120-53.8 120-120s-53.8-120-120-120-120 53.8-120 120c0 11.6 1.6 22.7 4.7 33.3L439.9 415.8C410.7 377.1 364.3 352 312 352c-88.4 0-160 71.6-160 160s71.6 160 160 160c52.3 0 98.7-25.1 127.9-63.8l196.8 142.5c-3.1 10.6-4.7 21.8-4.7 33.3 0 66.2 53.8 120 120 120s120-53.8 120-120-53.8-120-120-120zm0-476c28.7 0 52 23.3 52 52s-23.3 52-52 52-52-23.3-52-52 23.3-52 52-52zM312 600c-48.5 0-88-39.5-88-88s39.5-88 88-88 88 39.5 88 88-39.5 88-88 88zm440 236c-28.7 0-52-23.3-52-52s23.3-52 52-52 52 23.3 52 52-23.3 52-52 52z"}}]},name:"share-alt",theme:"outlined"},d=i("887aaf6c"),h=a._(d),p=c.forwardRef(function(n,r){return c.createElement(h.default,(0,l.default)({},n,{ref:r,icon:f}));});},"9b6d4c16":function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return p;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("7cfeda15"),l=a._(s),u=i("609f48be"),c=o._(u),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},d=i("887aaf6c"),h=a._(d),p=c.forwardRef(function(n,r){return c.createElement(h.default,(0,l.default)({},n,{ref:r,icon:f}));});},"9b99576f":function(n,r,i){"use strict";var a=Object.prototype.hasOwnProperty,o="~";function s(){}function l(n,r,i){this.fn=n,this.context=r,this.once=i||!1;}function u(n,r,i,a,s){if("function"!=typeof i)throw TypeError("The listener must be a function");var u=new l(i,a||n,s),c=o?o+r:r;return n._events[c]?n._events[c].fn?n._events[c]=[n._events[c],u]:n._events[c].push(u):(n._events[c]=u,n._eventsCount++),n;}function c(n,r){0==--n._eventsCount?n._events=new s:delete n._events[r];}function f(){this._events=new s,this._eventsCount=0;}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(o=!1)),f.prototype.eventNames=function(){var n,r,i=[];if(0===this._eventsCount)return i;for(r in n=this._events)a.call(n,r)&&i.push(o?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(n)):i;},f.prototype.listeners=function(n){var r=o?o+n:n,i=this._events[r];if(!i)return[];if(i.fn)return[i.fn];for(var a=0,s=i.length,l=Array(s);a<s;a++)l[a]=i[a].fn;return l;},f.prototype.listenerCount=function(n){var r=o?o+n:n,i=this._events[r];return i?i.fn?1:i.length:0;},f.prototype.emit=function(n,r,i,a,s,l){var u=o?o+n:n;if(!this._events[u])return!1;var c,f,d=this._events[u],h=arguments.length;if(d.fn){switch(d.once&&this.removeListener(n,d.fn,void 0,!0),h){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,r),!0;case 3:return d.fn.call(d.context,r,i),!0;case 4:return d.fn.call(d.context,r,i,a),!0;case 5:return d.fn.call(d.context,r,i,a,s),!0;case 6:return d.fn.call(d.context,r,i,a,s,l),!0;}for(f=1,c=Array(h-1);f<h;f++)c[f-1]=arguments[f];d.fn.apply(d.context,c);}else{var p,m=d.length;for(f=0;f<m;f++)switch(d[f].once&&this.removeListener(n,d[f].fn,void 0,!0),h){case 1:d[f].fn.call(d[f].context);break;case 2:d[f].fn.call(d[f].context,r);break;case 3:d[f].fn.call(d[f].context,r,i);break;case 4:d[f].fn.call(d[f].context,r,i,a);break;default:if(!c)for(p=1,c=Array(h-1);p<h;p++)c[p-1]=arguments[p];d[f].fn.apply(d[f].context,c);}}return!0;},f.prototype.on=function(n,r,i){return u(this,n,r,i,!1);},f.prototype.once=function(n,r,i){return u(this,n,r,i,!0);},f.prototype.removeListener=function(n,r,i,a){var s=o?o+n:n;if(!this._events[s])return this;if(!r)return c(this,s),this;var l=this._events[s];if(l.fn)l.fn!==r||a&&!l.once||i&&l.context!==i||c(this,s);else{for(var u=0,f=[],d=l.length;u<d;u++)(l[u].fn!==r||a&&!l[u].once||i&&l[u].context!==i)&&f.push(l[u]);f.length?this._events[s]=1===f.length?f[0]:f:c(this,s);}return this;},f.prototype.removeAllListeners=function(n){var r;return n?(r=o?o+n:n,this._events[r]&&c(this,r)):(this._events=new s,this._eventsCount=0),this;},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=o,f.EventEmitter=f,void 0!==n&&(n.exports=f);},"9c7e9d85":function(n,r,i){var a,o;a=this,o=function(){return function(n,r,i){var a=function(n){return n.add(4-n.isoWeekday(),"day");},o=r.prototype;o.isoWeekYear=function(){return a(this).year();},o.isoWeek=function(n){if(!this.$utils().u(n))return this.add(7*(n-this.isoWeek()),"day");var r,o,s,l=a(this),u=(r=this.isoWeekYear(),s=4-(o=(this.$u?i.utc:i)().year(r).startOf("year")).isoWeekday(),o.isoWeekday()>4&&(s+=7),o.add(s,"day"));return l.diff(u,"week")+1;},o.isoWeekday=function(n){return this.$utils().u(n)?this.day()||7:this.day(this.day()%7?n:n-7);};var s=o.startOf;o.startOf=function(n,r){var i=this.$utils(),a=!!i.u(r)||r;return"isoweek"===i.p(n)?a?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):s.bind(this)(n,r);};};},"object"==typeof r&&void 0!==n?n.exports=o():"function"==typeof define&&define.amd?define(o):(a="undefined"!=typeof globalThis?globalThis:a||self).dayjs_plugin_isoWeek=o();},"9db76b3f":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{Radial:function(){return s;},getRadialOptions:function(){return o;}});var a=i("036338e2");let o=(n={})=>Object.assign(Object.assign({},{startAngle:-Math.PI/2,endAngle:3*Math.PI/2,innerRadius:0,outerRadius:1}),n),s=n=>{let{startAngle:r,endAngle:i,innerRadius:s,outerRadius:l}=o(n);return[["transpose"],["translate",.5,.5],["reflect"],["translate",-.5,-.5],...(0,a.Polar)({startAngle:r,endAngle:i,innerRadius:s,outerRadius:l})];};s.props={};},"9e002045":function(n,r,i){var a=i("6584c86d");n.exports=function(n){return a(n,5);};},"9e135458":function(n,r,i){var a=i("7dd83cf2"),o=i("88ddf3cf");n.exports=function(n){for(var r=o(n),i=r.length;i--;){var s=r[i],l=n[s];r[i]=[s,l,a(l)];}return r;};},"9f61e6e3":function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return T;},defaultGetValueFromEvent:function(){return E;}});var a=i("777fffbe"),o=i("852bbaa9"),s=a._(i("e4870cf0")),l=a._(i("f1020fa4")),u=a._(i("613f75ca")),c=i("58fbde6a"),f=i("865cc100"),d=a._(i("be902df5")),h=a._(i("8f0ec5f3")),p=a._(i("f3efd1e9")),m=o._(i("609f48be")),g=i("7f173680"),v=i("02a23b09"),y=i("dac8af92"),_=["children","value","valuePropName","onChange","fieldProps","space","type","transform","convertValue","lightProps"],b=["children","space","valuePropName"],x={space:h.default,group:d.default.Group};function E(n){var r=arguments.length<=1?void 0:arguments[1];return r&&r.target&&n in r.target?r.target[n]:r;}var w=function(n){var r=n.children,i=n.value,a=void 0===i?[]:i,o=n.valuePropName,d=n.onChange,h=n.fieldProps,g=n.space,b=n.type,w=void 0===b?"space":b,S=(n.transform,n.convertValue,n.lightProps,(0,u.default)(n,_)),T=(0,f.useRefFunction)(function(n,r){var i,s=(0,l.default)(a);s[r]=E(o||"value",n),null==d||d(s),null==h||null===(i=h.onChange)||void 0===i||i.call(h,s);}),A=-1,C=(0,p.default)((0,c.runFunction)(r,a,n)).map(function(n){if(m.default.isValidElement(n)){var r,i,o,l=A+=1,u=(null==n||null===(r=n.type)||void 0===r?void 0:r.displayName)==="ProFormComponent"||(null==n||null===(i=n.props)||void 0===i?void 0:i.readonly)?(0,s.default)((0,s.default)({key:l,ignoreFormItem:!0},n.props||{}),{},{fieldProps:(0,s.default)((0,s.default)({},null==n||null===(o=n.props)||void 0===o?void 0:o.fieldProps),{},{onChange:function(){T(arguments.length<=0?void 0:arguments[0],l);}}),value:null==a?void 0:a[l],onChange:void 0}):(0,s.default)((0,s.default)({key:l},n.props||{}),{},{value:null==a?void 0:a[l],onChange:function(r){var i,a;T(r,l),null===(i=(a=n.props).onChange)||void 0===i||i.call(a,r);}});return m.default.cloneElement(n,u);}return n;}),O=x[w],M=(0,v.useGridHelpers)(S).RowWrapper,R=(0,m.useMemo)(function(){return(0,s.default)({},"group"===w?{compact:!0}:{});},[w]),P=(0,m.useCallback)(function(n){var r=n.children;return(0,y.jsx)(O,(0,s.default)((0,s.default)((0,s.default)({},R),g),{},{align:"start",wrap:!0,children:r}));},[O,g,R]);return(0,y.jsx)(M,{Wrapper:P,children:C});},S=m.default.forwardRef(function(n,r){var i=n.children,a=n.space,o=n.valuePropName,l=(0,u.default)(n,b);return(0,m.useImperativeHandle)(r,function(){return{};}),(0,y.jsx)(w,(0,s.default)((0,s.default)((0,s.default)({space:a,valuePropName:o},l.fieldProps),{},{onChange:void 0},l),{},{children:i}));}),T=(0,g.createField)(S);},a0845193:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{boundTest:function(){return g;}});var a=i("3862611d"),o=i("1915def0"),s=i("6210cecb"),l=i("3e5046a0"),u=i("f3a8ca34"),c=i("5557e3b4"),f=i("e7513aab"),d=function(){function n(n,r,i,a){this.set(n,r,i,a);}return Object.defineProperty(n.prototype,"left",{get:function(){return this.x1;},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"top",{get:function(){return this.y1;},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){return this.x2;},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bottom",{get:function(){return this.y2;},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0;},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0;},enumerable:!1,configurable:!0}),n.prototype.rotatedPoints=function(n,r,i){var a=this.x1,o=this.y1,s=this.x2,l=this.y2,u=Math.cos(n),c=Math.sin(n),f=r-r*u+i*c,d=i-r*c-i*u;return[[u*a-c*l+f,c*a+u*l+d],[u*s-c*l+f,c*s+u*l+d],[u*a-c*o+f,c*a+u*o+d],[u*s-c*o+f,c*s+u*o+d]];},n.prototype.set=function(n,r,i,a){return i<n?(this.x2=n,this.x1=i):(this.x1=n,this.x2=i),a<r?(this.y2=r,this.y1=a):(this.y1=r,this.y2=a),this;},n.prototype.defined=function(n){return this[n]!==Number.MAX_VALUE&&this[n]!==-Number.MAX_VALUE;},n;}();function h(n,r){var i=n.getEulerAngles()||0;n.setEulerAngles(0);var s=n.getBounds(),l=(0,a.__read)(s.min,2),u=l[0],h=l[1],p=(0,a.__read)(s.max,2),m=p[0],g=p[1],v=n.getBBox(),y=v.width,_=v.height,b=0,x=0,E=u,w=h,S=(0,f.textOf)(n);if(S){_-=1.5;var T=S.style.textAlign,A=S.style.textBaseline;"center"===T?E=(u+m)/2:("right"===T||"end"===T)&&(E=m),"middle"===A?w=(h+g)/2:"bottom"===A&&(w=g);}var C=(0,a.__read)((0,o.parseSeriesAttr)(r),4),O=C[0],M=void 0===O?0:O,R=C[1],P=void 0===R?0:R,k=C[2],I=C[3],L=new d((b+=u)-(void 0===I?P:I),(x+=h)-M,b+y+P,x+_+(void 0===k?M:k));return n.setEulerAngles(i),L.rotatedPoints((0,c.degToRad)(i),E,w);}function p(n,r){return r[0]<=Math.max(n[0][0],n[1][0])&&r[0]<=Math.min(n[0][0],n[1][0])&&r[1]<=Math.max(n[0][1],n[1][1])&&r[1]<=Math.min(n[0][1],n[1][1]);}function m(n,r,i){var a=(r[1]-n[1])*(i[0]-r[0])-(r[0]-n[0])*(i[1]-r[1]);return 0===a?0:a<0?2:1;}function g(n,r,i){var c,f,g=r.crossPadding,v=new Set,y=null,_=function(n,r){var i=n.type,c=n.labelDirection,f=n.crossSize;if(!f)return!1;if("arc"===i){var h=n.center,p=n.radius,m=(0,a.__read)(h,2),g=m[0],v=m[1],y="negative"===c?0:f,_=-p-y,b=p+y,x=(0,a.__read)((0,o.parseSeriesAttr)(r),4),E=x[0],w=x[1],S=x[2];return new d(g+_-x[3],v+_-E,g+b+w,v+b+S);}var T=(0,a.__read)(n.startPos,2),A=T[0],C=T[1],O=(0,a.__read)(n.endPos,2),M=O[0],R=O[1],P=(0,a.__read)((0,u.isAxisVertical)(n)?[-r,0,r,0]:[0,r,0,-r],4),k=P[0],I=P[1],L=P[2],N=P[3],D=(0,l.getLabelVector)(0,n),F=(0,s.scale)(D,f),B=new d(A,C,M,R);return B.x1+=N,B.y1+=k,B.x2+=I+F[0],B.y2+=L+F[1],B;}(r,g);try{for(var b=(0,a.__values)(n),x=b.next();!x.done;x=b.next()){var E,w=x.value;!function(n){if(_){var r,i,a,o,s,l;return r=_.x1,i=_.x2,a=_.y1,o=_.y2,s=h(n,void 0),l=[[r,a],[i,a],[i,o],[r,o]],s.every(function(n){return function(n,r){var i=n.length;if(i<3)return!1;var a=[r,[9999,r[1]]],o=0,s=0;do{var l=[n[s],n[(s+1)%i]];if(function(n,r){var i=m(n[0],n[1],r[0]),a=m(n[0],n[1],r[1]),o=m(r[0],r[1],n[0]),s=m(r[0],r[1],n[1]);return!!(i!==a&&o!==s||0===i&&p(n,r[0])||0===a&&p(n,r[1])||0===o&&p(r,n[0])||0===s&&p(r,n[1]));}(l,a)){if(0===m(l[0],r,l[1]))return p(l,r);o++;}s=(s+1)%i;}while(0!==s)return!!(1&o);}(l,n);});}return!0;}(w)?v.add(w):y&&((E=y)&&E.firstChild?function(n,r,i){var o,s,l=h(n,i).flat(1),u=h(r,i).flat(1),c=[[l[0],l[1],l[2],l[3]],[l[0],l[1],l[4],l[5]],[l[4],l[5],l[6],l[7]],[l[2],l[3],l[6],l[7]]];try{for(var f=(0,a.__values)(c),d=f.next();!d.done;d=f.next()){var p=d.value;if(function(n,r){return[[n[0],n[1],n[2],n[3]],[n[2],n[3],n[4],n[5]],[n[4],n[5],n[6],n[7]],[n[6],n[7],n[0],n[1]]].some(function(n){return function(n,r){var i=(0,a.__read)(n,4),o=i[0],s=i[1],l=i[2],u=i[3],c=(0,a.__read)(r,4),f=c[0],d=c[1],h=c[2],p=c[3],m=l-o,g=u-s,v=h-f,y=p-d,_=m*y-v*g;if(0===_)return!1;var b=_>0,x=o-f,E=s-d,w=m*E-g*x;if(w<0===b)return!1;var S=v*E-y*x;return S<0!==b&&w>_!==b&&S>_!==b;}(r,n);});}(u,p))return!0;}}catch(n){o={error:n};}finally{try{d&&!d.done&&(s=f.return)&&s.call(f);}finally{if(o)throw o.error;}}return!1;}(E.firstChild,w.firstChild,(0,o.parseSeriesAttr)(i)):0)?(v.add(y),v.add(w)):y=w;}}catch(n){c={error:n};}finally{try{x&&!x.done&&(f=b.return)&&f.call(b);}finally{if(c)throw c.error;}}return Array.from(v);}},a09cbefa:function(n,r,i){function a(n,r,i){return{x:n*Math.cos(i)-r*Math.sin(i),y:n*Math.sin(i)+r*Math.cos(i)};}i.d(r,"__esModule",{value:!0}),i.e(r,{arcToCubic:function(){return function n(r,i,o,s,l,u,c,f,d,h){var p,m,g,v,y,_=r,b=i,x=o,E=s,w=f,S=d,T=120*Math.PI/180,A=Math.PI/180*(+l||0),C=[];if(h)m=h[0],g=h[1],v=h[2],y=h[3];else{_=(p=a(_,b,-A)).x,b=p.y,w=(p=a(w,S,-A)).x,S=p.y;var O=(_-w)/2,M=(b-S)/2,R=O*O/(x*x)+M*M/(E*E);R>1&&(x*=R=Math.sqrt(R),E*=R);var P=x*x,k=E*E,I=(u===c?-1:1)*Math.sqrt(Math.abs((P*k-P*M*M-k*O*O)/(P*M*M+k*O*O)));v=I*x*M/E+(_+w)/2,y=-(I*E)*O/x+(b+S)/2,m=Math.asin(((b-y)/E*1e9>>0)/1e9),g=Math.asin(((S-y)/E*1e9>>0)/1e9),m=_<v?Math.PI-m:m,g=w<v?Math.PI-g:g,m<0&&(m=2*Math.PI+m),g<0&&(g=2*Math.PI+g),c&&m>g&&(m-=2*Math.PI),!c&&g>m&&(g-=2*Math.PI);}var L=g-m;if(Math.abs(L)>T){var N=g,D=w,F=S;C=n(w=v+x*Math.cos(g=m+T*(c&&g>m?1:-1)),S=y+E*Math.sin(g),x,E,l,0,c,D,F,[g,N,v,y]);}L=g-m;var B=Math.cos(m),j=Math.cos(g),z=Math.tan(L/4),U=4/3*x*z,V=4/3*E*z,G=[_,b],H=[_+U*Math.sin(m),b-V*B],W=[w+U*Math.sin(g),S-V*j],X=[w,S];if(H[0]=2*G[0]-H[0],H[1]=2*G[1]-H[1],h)return H.concat(W,X,C);C=H.concat(W,X,C);for(var q=[],$=0,Y=C.length;$<Y;$+=1)q[$]=$%2?a(C[$-1],C[$],A).y:a(C[$],C[$+1],A).x;return q;};}});},a0fb45af:function(n,r,i){"use strict";var a=i("f5a08f97").default,o=i("89a0cb41").default;Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=o(i("25aa6dd5")),l=a(i("609f48be")),u=o(i("cd3e165a")),c=o(i("74336ea5")),f=l.forwardRef(function(n,r){return l.createElement(c.default,(0,s.default)({},n,{ref:r,icon:u.default}));});r.default=f;},a114d3c3:function(n,r,i){var a=i("ce7446c0"),o=i("bd5c7bc0"),s=i("696c14ad"),l=i("bbc15be8");n.exports=function(n,r){return(l(n)?a:s)(n,o(r,3));};},a125f0ec:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{copyAttributes:function(){return l;},getLocalBBox:function(){return o;},isHorizontal:function(){return s;}});var a=i("3862611d");function o(n){var r=n.getLocalBounds(),i=r.min,o=r.max,s=(0,a.__read)([i,o],2),l=(0,a.__read)(s[0],2),u=l[0],c=l[1],f=(0,a.__read)(s[1],2),d=f[0],h=f[1];return{x:u,y:c,width:d-u,height:h-c,left:u,bottom:h,top:c,right:d};}function s(n,r){var i=(0,a.__read)(n,2),o=i[0],s=i[1],l=(0,a.__read)(r,2),u=l[0],c=l[1];return o!==u&&s===c;}function l(n,r){var i,o,s=r.attributes;try{for(var l=(0,a.__values)(Object.entries(s)),u=l.next();!u.done;u=l.next()){var c=(0,a.__read)(u.value,2),f=c[0],d=c[1];"id"!==f&&"className"!==f&&n.attr(f,d);}}catch(n){i={error:n};}finally{try{u&&!u.done&&(o=l.return)&&o.call(l);}finally{if(i)throw i.error;}}}},a13e65f7:function(n,r,i){"use strict";var a=Object.prototype.hasOwnProperty,o="~";function s(){}function l(n,r,i){this.fn=n,this.context=r,this.once=i||!1;}function u(n,r,i,a,s){if("function"!=typeof i)throw TypeError("The listener must be a function");var u=new l(i,a||n,s),c=o?o+r:r;return n._events[c]?n._events[c].fn?n._events[c]=[n._events[c],u]:n._events[c].push(u):(n._events[c]=u,n._eventsCount++),n;}function c(n,r){0==--n._eventsCount?n._events=new s:delete n._events[r];}function f(){this._events=new s,this._eventsCount=0;}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(o=!1)),f.prototype.eventNames=function(){var n,r,i=[];if(0===this._eventsCount)return i;for(r in n=this._events)a.call(n,r)&&i.push(o?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(n)):i;},f.prototype.listeners=function(n){var r=o?o+n:n,i=this._events[r];if(!i)return[];if(i.fn)return[i.fn];for(var a=0,s=i.length,l=Array(s);a<s;a++)l[a]=i[a].fn;return l;},f.prototype.listenerCount=function(n){var r=o?o+n:n,i=this._events[r];return i?i.fn?1:i.length:0;},f.prototype.emit=function(n,r,i,a,s,l){var u=o?o+n:n;if(!this._events[u])return!1;var c,f,d=this._events[u],h=arguments.length;if(d.fn){switch(d.once&&this.removeListener(n,d.fn,void 0,!0),h){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,r),!0;case 3:return d.fn.call(d.context,r,i),!0;case 4:return d.fn.call(d.context,r,i,a),!0;case 5:return d.fn.call(d.context,r,i,a,s),!0;case 6:return d.fn.call(d.context,r,i,a,s,l),!0;}for(f=1,c=Array(h-1);f<h;f++)c[f-1]=arguments[f];d.fn.apply(d.context,c);}else{var p,m=d.length;for(f=0;f<m;f++)switch(d[f].once&&this.removeListener(n,d[f].fn,void 0,!0),h){case 1:d[f].fn.call(d[f].context);break;case 2:d[f].fn.call(d[f].context,r);break;case 3:d[f].fn.call(d[f].context,r,i);break;case 4:d[f].fn.call(d[f].context,r,i,a);break;default:if(!c)for(p=1,c=Array(h-1);p<h;p++)c[p-1]=arguments[p];d[f].fn.apply(d[f].context,c);}}return!0;},f.prototype.on=function(n,r,i){return u(this,n,r,i,!1);},f.prototype.once=function(n,r,i){return u(this,n,r,i,!0);},f.prototype.removeListener=function(n,r,i,a){var s=o?o+n:n;if(!this._events[s])return this;if(!r)return c(this,s),this;var l=this._events[s];if(l.fn)l.fn!==r||a&&!l.once||i&&l.context!==i||c(this,s);else{for(var u=0,f=[],d=l.length;u<d;u++)(l[u].fn!==r||a&&!l[u].once||i&&l[u].context!==i)&&f.push(l[u]);f.length?this._events[s]=1===f.length?f[0]:f:c(this,s);}return this;},f.prototype.removeAllListeners=function(n){var r;return n?(r=o?o+n:n,this._events[r]&&c(this,r)):(this._events=new s,this._eventsCount=0),this;},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=o,f.EventEmitter=f,void 0!==n&&(n.exports=f);},a19e1e02:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return C;}});var a=i("777fffbe"),o=i("852bbaa9"),s=a._(i("e4870cf0")),l=a._(i("a854094b")),u=a._(i("99c0cd4c")),c=a._(i("ee64167d")),f=a._(i("613f75ca")),d=a._(i("23d1e047")),h=i("9bab38e5"),p=a._(i("a5a99096")),m=a._(i("91c0242a")),g=a._(i("4ff39a66")),v=a._(i("064ecd09")),y=a._(i("ce03fd86")),_=a._(i("ddaa0afd")),b=o._(i("609f48be")),x=a._(i("86593540")),E=a._(i("41a7442f")),w=i("8ba174bc"),S=a._(i("3eac21b1")),T=i("dac8af92"),A=["className","style","bodyStyle","headStyle","title","subTitle","extra","wrap","layout","loading","gutter","tooltip","split","headerBordered","bordered","boxShadow","children","size","actions","ghost","hoverable","direction","collapsed","collapsible","collapsibleIconRender","colStyle","defaultCollapsed","onCollapse","checked","onChecked","tabs","type"],C=b.default.forwardRef(function(n,r){var i,a,o,C=n.className,O=n.style,M=n.bodyStyle,R=n.headStyle,P=n.title,k=n.subTitle,I=n.extra,L=n.wrap,N=n.layout,D=n.loading,F=n.gutter,B=n.tooltip,j=n.split,z=n.headerBordered,U=n.bordered,V=n.boxShadow,G=n.children,H=n.size,W=n.actions,X=n.ghost,q=n.hoverable,$=n.direction,Y=n.collapsed,Z=n.collapsible,K=n.collapsibleIconRender,Q=n.colStyle,J=n.defaultCollapsed,ee=n.onCollapse,et=n.checked,en=n.onChecked,er=n.tabs,ei=n.type,ea=(0,f.default)(n,A),eo=(0,b.useContext)(p.default.ConfigContext).getPrefixCls,es=(0,g.default)()||{lg:!0,md:!0,sm:!0,xl:!1,xs:!1,xxl:!1},el=(0,y.default)(void 0!==J&&J,{value:Y,onChange:ee}),eu=(0,c.default)(el,2),ec=eu[0],ef=eu[1],ed=["xxl","xl","lg","md","sm","xs"],eh=(0,w.useLegacyItems)(null==er?void 0:er.items,G,er),ep=function(n,r){return n?r:{};},em=function(n){var r=n;if("object"===(0,u.default)(n))for(var i=0;i<ed.length;i+=1){var a=ed[i];if(null!=es&&es[a]&&(null==n?void 0:n[a])!==void 0){r=n[a];break;}}var o=ep("string"==typeof r&&/\d%|\dpx/i.test(r),{width:r,flexShrink:0});return{span:r,colSpanStyle:o};},eg=eo("pro-card"),ev=(0,S.default)(eg),ey=ev.wrapSSR,e_=ev.hashId,eb=(a=[0,0],(Array.isArray(i=void 0===F?0:F)?i:[i,0]).forEach(function(n,r){if("object"===(0,u.default)(n))for(var i=0;i<ed.length;i+=1){var o=ed[i];if(es[o]&&void 0!==n[o]){a[r]=n[o];break;}}else a[r]=n||0;}),a),ex=(0,c.default)(eb,2),eE=ex[0],ew=ex[1],eS=!1,eT=b.default.Children.toArray(G),eA=eT.map(function(n,r){var i;if(null!=n&&null!==(i=n.type)&&void 0!==i&&i.isProCard){eS=!0;var a=em(n.props.colSpan),o=a.span,u=a.colSpanStyle,c=(0,v.default)(["".concat(eg,"-col")],e_,(0,l.default)((0,l.default)((0,l.default)({},"".concat(eg,"-split-vertical"),"vertical"===j&&r!==eT.length-1),"".concat(eg,"-split-horizontal"),"horizontal"===j&&r!==eT.length-1),"".concat(eg,"-col-").concat(o),"number"==typeof o&&o>=0&&o<=24)),f=ey((0,T.jsx)("div",{style:(0,s.default)((0,s.default)((0,s.default)((0,s.default)({},u),ep(eE>0,{paddingInlineEnd:eE/2,paddingInlineStart:eE/2})),ep(ew>0,{paddingBlockStart:ew/2,paddingBlockEnd:ew/2})),Q),className:c,children:b.default.cloneElement(n)}));return b.default.cloneElement(f,{key:"pro-card-col-".concat((null==n?void 0:n.key)||r)});}return n;}),eC=(0,v.default)("".concat(eg),C,e_,(o={},(0,l.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)(o,"".concat(eg,"-border"),void 0!==U&&U),"".concat(eg,"-box-shadow"),void 0!==V&&V),"".concat(eg,"-contain-card"),eS),"".concat(eg,"-loading"),D),"".concat(eg,"-split"),"vertical"===j||"horizontal"===j),"".concat(eg,"-ghost"),void 0!==X&&X),"".concat(eg,"-hoverable"),void 0!==q&&q),"".concat(eg,"-size-").concat(H),H),"".concat(eg,"-type-").concat(ei),ei),"".concat(eg,"-collapse"),ec),(0,l.default)(o,"".concat(eg,"-checked"),et))),eO=(0,v.default)("".concat(eg,"-body"),e_,(0,l.default)((0,l.default)((0,l.default)({},"".concat(eg,"-body-center"),"center"===N),"".concat(eg,"-body-direction-column"),"horizontal"===j||"column"===$),"".concat(eg,"-body-wrap"),void 0!==L&&L&&eS)),eM=b.default.isValidElement(D)?D:(0,T.jsx)(E.default,{prefix:eg,style:(null==M?void 0:M.padding)===0||(null==M?void 0:M.padding)==="0px"?{padding:24}:void 0}),eR=void 0!==Z&&Z&&void 0===Y&&(K?K({collapsed:ec}):(0,T.jsx)(d.default,{rotate:ec?void 0:90,className:"".concat(eg,"-collapsible-icon ").concat(e_).trim()}));return ey((0,T.jsxs)("div",(0,s.default)((0,s.default)({className:eC,style:O,ref:r,onClick:function(n){var r;null==en||en(n),null==ea||null===(r=ea.onClick)||void 0===r||r.call(ea,n);}},(0,_.default)(ea,["prefixCls","colSpan"])),{},{children:[(P||I||eR)&&(0,T.jsxs)("div",{className:(0,v.default)("".concat(eg,"-header"),e_,(0,l.default)((0,l.default)({},"".concat(eg,"-header-border"),void 0!==z&&z||"inner"===ei),"".concat(eg,"-header-collapsible"),eR)),style:R,onClick:function(){eR&&ef(!ec);},children:[(0,T.jsxs)("div",{className:"".concat(eg,"-title ").concat(e_).trim(),children:[eR,(0,T.jsx)(h.LabelIconTip,{label:P,tooltip:B,subTitle:k})]}),I&&(0,T.jsx)("div",{className:"".concat(eg,"-extra ").concat(e_).trim(),onClick:function(n){return n.stopPropagation();},children:I})]}),er?(0,T.jsx)("div",{className:"".concat(eg,"-tabs ").concat(e_).trim(),children:(0,T.jsx)(m.default,(0,s.default)((0,s.default)({onChange:er.onChange},(0,_.default)(er,["cardProps"])),{},{items:eh,children:D?eM:G}))}):(0,T.jsx)("div",{className:eO,style:M,children:D?eM:eA}),W?(0,T.jsx)(x.default,{actions:W,prefixCls:eg}):null]})));});},a1c5be3c:function(n,r,i){"use strict";var a;i.d(r,"__esModule",{value:!0}),r.default=void 0;let o=(a=i("a0fb45af"))&&a.__esModule?a:{default:a};r.default=o,n.exports=o;},a26da295:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return f;}});var a=i("777fffbe"),o=i("1f547793"),s=a._(o),l=i("fdfa415f"),u=(0,a._(l).default)(Object.keys,Object),c=Object.prototype.hasOwnProperty;function f(n){if(!(0,s.default)(n))return u(n);var r=[];for(var i in Object(n))c.call(n,i)&&"constructor"!=i&&r.push(i);return r;}},a2868c16:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return p;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("7cfeda15"),l=a._(s),u=i("609f48be"),c=o._(u),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"},d=i("887aaf6c"),h=a._(d),p=c.forwardRef(function(n,r){return c.createElement(h.default,(0,l.default)({},n,{ref:r,icon:f}));});},a2d16fe8:function(n,r,i){"use strict";function a(n){var r;return null==n||null===(r=n.getRootNode)||void 0===r?void 0:r.call(n);}function o(n){return a(n) instanceof ShadowRoot;}i.d(r,"__esModule",{value:!0}),r.getShadowRoot=function(n){return o(n)?a(n):null;},r.inShadow=o;},a3307b57:function(n,r,i){n.exports=function(n,r){for(var i=-1,a=null==n?0:n.length;++i<a;)if(r(n[i],i,n))return!0;return!1;};},a3f1a331:function(n,r,i){var a=i("469db534"),o=i("3cd6a52e");n.exports=function(n){return o(n)&&"[object Set]"==a(n);};},a46fcb64:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{ARC_DEFAULT_OPTIONS:function(){return u;},AXIS_BASE_DEFAULT_ATTR:function(){return l;},CLASS_NAMES:function(){return f;},HELIX_DEFAULT_OPTIONS:function(){return c;}});var a=i("777fffbe")._(i("d7948920")),o=i("5e195043"),s=i("fc81244b"),l={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",crossPadding:10,titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:function(){return new o.Path({style:{d:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],fill:"black",transformOrigin:"center"}});},labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",labelOverlap:[]},u=(0,a.default)({},l,{style:{type:"arc"}}),c=(0,a.default)({},l,{style:{}}),f=(0,s.classNames)({mainGroup:"main-group",gridGroup:"grid-group",grid:"grid",lineGroup:"line-group",line:"line",tickGroup:"tick-group",tick:"tick",tickItem:"tick-item",labelGroup:"label-group",label:"label",labelItem:"label-item",titleGroup:"title-group",title:"title",lineFirst:"line-first",lineSecond:"line-second"},"axis");},a48bf6c0:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{isFullTooltip:function(){return u;},maybeAnimation:function(){return c;},maybeTooltip:function(){return l;},subTooltip:function(){return s;}});var a=i("777fffbe")._(i("d7948920")),o=i("f5373dff");function s(n,r,i={},l=!1){if((0,o.isUnset)(n)||Array.isArray(n)&&l)return n;let u=(0,o.subObject)(n,r);return(0,a.default)(i,u);}function l(n,r={}){return(0,o.isUnset)(n)||Array.isArray(n)||!u(n)?n:(0,a.default)(r,n);}function u(n){if(0===Object.keys(n).length)return!0;let{title:r,items:i}=n;return void 0!==r||void 0!==i;}function c(n,r){return"object"==typeof n?(0,o.subObject)(n,r):n;}},a4968617:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{convertChildrenToColumns:function(){return M;},default:function(){return P;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("ee64167d"),l=a._(s),u=i("a854094b"),c=a._(u),f=i("f1020fa4"),d=a._(f),h=i("99c0cd4c"),p=a._(h),m=i("e4870cf0"),g=a._(m),v=i("613f75ca"),y=a._(v),_=i("f3efd1e9"),b=a._(_),x=i("a275200c");a._(x);var E=i("609f48be"),w=o._(E),S=i("a6bb4a78"),T=i("6bb3a01b");function A(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"number"==typeof r?r:r.endsWith("%")?n*parseFloat(r)/100:null;}var C=["children"],O=["fixed"];function M(n){return(0,b.default)(n).filter(function(n){return w.isValidElement(n);}).map(function(n){var r=n.key,i=n.props,a=i.children,o=(0,y.default)(i,C),s=(0,g.default)({key:r},o);return a&&(s.children=M(a)),s;});}function R(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key";return n.filter(function(n){return n&&"object"===(0,p.default)(n);}).reduce(function(n,i,a){var o=i.fixed,s=!0===o?"left":o,l="".concat(r,"-").concat(a),u=i.children;return u&&u.length>0?[].concat((0,d.default)(n),(0,d.default)(R(u,l).map(function(n){return(0,g.default)({fixed:s},n);}))):[].concat((0,d.default)(n),[(0,g.default)((0,g.default)({key:l},i),{},{fixed:s})]);},[]);}function P(n,r){var i=n.prefixCls,a=n.columns,o=n.children,s=n.expandable,u=n.expandedKeys,f=n.columnTitle,d=n.getRowKey,h=n.onTriggerExpand,m=n.expandIcon,v=n.rowExpandable,_=n.expandIconColumnIndex,b=n.expandedRowOffset,x=void 0===b?0:b,E=n.direction,C=n.expandRowByClick,P=n.columnWidth,k=n.fixed,I=n.scrollWidth,L=n.clientWidth,N=w.useMemo(function(){return function n(r){return r.filter(function(n){return n&&"object"===(0,p.default)(n)&&!n.hidden;}).map(function(r){var i=r.children;return i&&i.length>0?(0,g.default)((0,g.default)({},r),{},{children:n(i)}):r;});}((a||M(o)||[]).slice());},[a,o]),D=w.useMemo(function(){if(s){var n,r=N.slice();if(!r.includes(S.EXPAND_COLUMN)){var a=_||0;a>=0&&(a||"left"===k||!k)&&r.splice(a,0,S.EXPAND_COLUMN),"right"===k&&r.splice(N.length,0,S.EXPAND_COLUMN);}var o=r.indexOf(S.EXPAND_COLUMN);r=r.filter(function(n,r){return n!==S.EXPAND_COLUMN||r===o;});var l=N[o];n=k||(l?l.fixed:null);var p=(0,c.default)((0,c.default)((0,c.default)((0,c.default)((0,c.default)((0,c.default)({},T.INTERNAL_COL_DEFINE,{className:"".concat(i,"-expand-icon-col"),columnType:"EXPAND_COLUMN"}),"title",f),"fixed",n),"className","".concat(i,"-row-expand-icon-cell")),"width",P),"render",function(n,r,a){var o=d(r,a),s=m({prefixCls:i,expanded:u.has(o),expandable:!v||v(r),record:r,onExpand:h});return C?w.createElement("span",{onClick:function(n){return n.stopPropagation();}},s):s;});return r.map(function(n,r){var i=n===S.EXPAND_COLUMN?p:n;return r<x?(0,g.default)((0,g.default)({},i),{},{fixed:i.fixed||"left"}):i;});}return N.filter(function(n){return n!==S.EXPAND_COLUMN;});},[s,N,d,u,m,E,x]),F=w.useMemo(function(){var n=D;return r&&(n=r(n)),n.length||(n=[{render:function(){return null;}}]),n;},[r,D,E]),B=w.useMemo(function(){return"rtl"===E?R(F).map(function(n){var r=n.fixed,i=(0,y.default)(n,O),a=r;return"left"===r?a="right":"right"===r&&(a="left"),(0,g.default)({fixed:a},i);}):R(F);},[F,E,I]),j=w.useMemo(function(){for(var n=-1,r=B.length-1;r>=0;r-=1){var i=B[r].fixed;if("left"===i||!0===i){n=r;break;}}if(n>=0)for(var a=0;a<=n;a+=1){var o=B[a].fixed;if("left"!==o&&!0!==o)return!0;}var s=B.findIndex(function(n){return"right"===n.fixed;});if(s>=0){for(var l=s;l<B.length;l+=1)if("right"!==B[l].fixed)return!0;}return!1;},[B]),z=w.useMemo(function(){if(I&&I>0){var n=0,r=0;B.forEach(function(i){var a=A(I,i.width);a?n+=a:r+=1;});var i=Math.max(I,L),a=Math.max(i-n,r),o=r,s=a/r,l=0,u=B.map(function(n){var r=(0,g.default)({},n),i=A(I,r.width);if(i)r.width=i;else{var u=Math.floor(s);r.width=1===o?a:u,a-=u,o-=1;}return l+=r.width,r;});if(l<i){var c=i/l;a=i,u.forEach(function(n,r){var i=Math.floor(n.width*c);n.width=r===u.length-1?a:i,a-=i;});}return[u,Math.max(l,i)];}return[B,I];},[B,I,L]),U=(0,l.default)(z,2);return[F,U[0],U[1],j];}},a4b1544e:function(n,r,i){var a=i("4c221234");n.exports=function(n,r,i){return(r=a(r))in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n;},n.exports.__esModule=!0,n.exports.default=n.exports;},a4c5f883:function(n,r,i){n.exports=function(n,r,i,a){for(var o=n.length,s=i+(a?1:-1);a?s--:++s<o;)if(r(n[s],s,n))return s;return -1;};},a5a44481:function(n,r,i){"use strict";function a(n,r){return n.parent===r.parent?1:2;}function o(n,r){return n+r.x;}function s(n,r){return Math.max(n,r.y);}function l(){var n=a,r=1,i=1,l=!1;function u(a){var u,c=0;a.eachAfter(function(r){var i=r.children;i?(r.x=i.reduce(o,0)/i.length,r.y=1+i.reduce(s,0)):(r.x=u?c+=n(r,u):0,r.y=0,u=r);});var f=function(n){for(var r;r=n.children;)n=r[0];return n;}(a),d=function(n){for(var r;r=n.children;)n=r[r.length-1];return n;}(a),h=f.x-n(f,d)/2,p=d.x+n(d,f)/2;return a.eachAfter(l?function(n){n.x=(n.x-a.x)*r,n.y=(a.y-n.y)*i;}:function(n){n.x=(n.x-h)/(p-h)*r,n.y=(1-(a.y?n.y/a.y:1))*i;});}return u.separation=function(r){return arguments.length?(n=r,u):n;},u.size=function(n){return arguments.length?(l=!1,r=+n[0],i=+n[1],u):l?null:[r,i];},u.nodeSize=function(n){return arguments.length?(l=!0,r=+n[0],i=+n[1],u):l?[r,i]:null;},u;}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return l;}});},a602d54e:function(n,r,i){"use strict";function a(n,r,i,a,o){return(void 0===a&&(a=!0),void 0===o&&(o=function(n){n.node().removeChildren();}),n)?i(r):(a&&o(r),null);}i.d(r,"__esModule",{value:!0}),i.d(r,"ifShow",{enumerable:!0,get:function(){return a;}});},a6284f72:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"EditOrReadOnlyContext",{enumerable:!0,get:function(){return a;}});var a=i("777fffbe")._(i("609f48be")).default.createContext({mode:"edit"});},a63b8d99:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{applyStyleSheet:function(){return l;},splitStyle:function(){return d;},subStyleProps:function(){return c;},superStyleProps:function(){return f;}});var a=i("3862611d");function o(n){return n.toString().charAt(0).toUpperCase()+n.toString().slice(1);}function s(n,r,i){void 0===i&&(i=!0);var a,o=r||(null===(a=n.match(/^([a-z][a-z0-9]+)/))||void 0===a?void 0:a[0])||"",s=n.replace(new RegExp("^(".concat(o,")")),"");return i?s.toString().charAt(0).toLowerCase()+s.toString().slice(1):s;}function l(n,r){Object.entries(r).forEach(function(r){var i=(0,a.__read)(r,2),o=i[0],s=i[1];(0,a.__spreadArray)([n],(0,a.__read)(n.querySelectorAll(o)),!1).filter(function(n){return n.matches(o);}).forEach(function(n){n&&(n.style.cssText+=Object.entries(s).reduce(function(n,r){return"".concat(n).concat(r.join(":"),";");},""));});});}var u=function(n,r){if(!(null==n?void 0:n.startsWith(r)))return!1;var i=n[r.length];return i>="A"&&i<="Z";};function c(n,r,i){void 0===i&&(i=!1);var l={};return Object.entries(n).forEach(function(n){var c=(0,a.__read)(n,2),f=c[0],d=c[1];if("className"===f||"class"===f);else if(u(f,"show")&&u(s(f,"show"),r)!==i)f==="".concat("show").concat(o(r))?l[f]=d:l[f.replace(new RegExp(o(r)),"")]=d;else if(!u(f,"show")&&u(f,r)!==i){var h=s(f,r);"filter"===h&&"function"==typeof d||(l[h]=d);}}),l;}function f(n,r){return Object.entries(n).reduce(function(n,i){var s=(0,a.__read)(i,2),l=s[0],u=s[1];return l.startsWith("show")?n["show".concat(r).concat(l.slice(4))]=u:n["".concat(r).concat(o(l))]=u,n;},{});}function d(n,r){void 0===r&&(r=["x","y","class","className"]);var i=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],o={},s={};return Object.entries(n).forEach(function(n){var l=(0,a.__read)(n,2),u=l[0],c=l[1];r.includes(u)||(-1!==i.indexOf(u)?s[u]=c:o[u]=c);}),[o,s];}},a6bb4a78:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{EXPAND_COLUMN:function(){return a;},INTERNAL_HOOKS:function(){return o;}});var a={},o="rc-table-internal-hook";},a788b59c:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return p;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("7cfeda15"),l=a._(s),u=i("609f48be"),c=o._(u),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},d=i("887aaf6c"),h=a._(d),p=c.forwardRef(function(n,r){return c.createElement(h.default,(0,l.default)({},n,{ref:r,icon:f}));});},a86dec85:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return p;}});var a=i("777fffbe"),o=a._(i("e4870cf0")),s=a._(i("613f75ca")),l=i("5d8cf7db"),u=i("609f48be"),c=i("efd8a033"),f=a._(i("b0cb32eb")),d=i("dac8af92"),h=["steps","columns","forceUpdate","grid"],p=function(n){var r=n.steps,i=n.columns,a=n.forceUpdate,p=n.grid,m=(0,s.default)(n,h),g=(0,l.useLatest)(m),v=(0,u.useCallback)(function(n){var r,i;null===(r=(i=g.current).onCurrentChange)||void 0===r||r.call(i,n),a([]);},[a,g]),y=(0,u.useMemo)(function(){return null==r?void 0:r.map(function(n,r){return(0,u.createElement)(f.default,(0,o.default)((0,o.default)({grid:p},n),{},{key:r,layoutType:"StepForm",columns:i[r]}));});},[i,p,r]);return(0,d.jsx)(c.StepsForm,(0,o.default)((0,o.default)({},m),{},{onCurrentChange:v,children:y}));};},a8763fbb:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return B;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("7cfeda15"),l=a._(s),u=i("a854094b"),c=a._(u),f=i("ee64167d"),d=a._(f),h=i("613f75ca"),p=a._(h),m=i("064ecd09"),g=a._(m),v=i("e313b0e4"),y=i("4b97d3c2"),_=a._(y),b=i("08800308"),x=a._(b),E=i("609f48be"),w=o._(E),S=i("4f68f1f3"),T=i("fa94063b"),A=a._(T),C=i("e2a7a472"),O=a._(C),M=i("93401226"),R=a._(M),P=i("8bbe4f57"),k=a._(P),I=i("85158032"),L=a._(I),N=["YYYY","MM","DD","HH","mm","ss","SSS"],D=function(){function n(r){(0,k.default)(this,n),(0,c.default)(this,"format",void 0),(0,c.default)(this,"maskFormat",void 0),(0,c.default)(this,"cells",void 0),(0,c.default)(this,"maskCells",void 0),this.format=r;var i=RegExp(N.map(function(n){return"(".concat(n,")");}).join("|"),"g");this.maskFormat=r.replace(i,function(n){return"\u9867".repeat(n.length);});var a=new RegExp("(".concat(N.join("|"),")")),o=(r.split(a)||[]).filter(function(n){return n;}),s=0;this.cells=o.map(function(n){var r=N.includes(n),i=s,a=s+n.length;return s=a,{text:n,mask:r,start:i,end:a};}),this.maskCells=this.cells.filter(function(n){return n.mask;});}return(0,L.default)(n,[{key:"getSelection",value:function(n){var r=this.maskCells[n]||{};return[r.start||0,r.end||0];}},{key:"match",value:function(n){for(var r=0;r<this.maskFormat.length;r+=1){var i=this.maskFormat[r],a=n[r];if(!a||"\u9867"!==i&&i!==a)return!1;}return!0;}},{key:"size",value:function(){return this.maskCells.length;}},{key:"getMaskCellIndex",value:function(n){for(var r=Number.MAX_SAFE_INTEGER,i=0,a=0;a<this.maskCells.length;a+=1){var o=this.maskCells[a],s=o.start,l=o.end;if(n>=s&&n<=l)return a;var u=Math.min(Math.abs(n-s),Math.abs(n-l));u<r&&(r=u,i=a);}return i;}}]),n;}(),F=["active","showActiveCls","suffixIcon","format","validateFormat","onChange","onInput","helped","onHelp","onSubmit","onKeyDown","preserveInvalidOnBlur","invalid","clearIcon"],B=w.forwardRef(function(n,r){var i=n.active,a=n.showActiveCls,o=n.suffixIcon,s=n.format,u=n.validateFormat,f=n.onChange,h=(n.onInput,n.helped),m=n.onHelp,y=n.onSubmit,b=n.onKeyDown,E=n.preserveInvalidOnBlur,T=void 0!==E&&E,C=n.invalid,M=n.clearIcon,P=(0,p.default)(n,F),k=n.value,I=n.onFocus,L=n.onBlur,N=n.onMouseUp,B=w.useContext(A.default),j=B.prefixCls,z=B.input,U="".concat(j,"-input"),V=w.useState(!1),G=(0,d.default)(V,2),H=G[0],W=G[1],X=w.useState(k),q=(0,d.default)(X,2),$=q[0],Y=q[1],Z=w.useState(""),K=(0,d.default)(Z,2),Q=K[0],J=K[1],ee=w.useState(null),et=(0,d.default)(ee,2),en=et[0],er=et[1],ei=w.useState(null),ea=(0,d.default)(ei,2),eo=ea[0],es=ea[1],el=$||"";w.useEffect(function(){Y(k);},[k]);var eu=w.useRef(),ec=w.useRef();w.useImperativeHandle(r,function(){return{nativeElement:eu.current,inputElement:ec.current,focus:function(n){ec.current.focus(n);},blur:function(){ec.current.blur();}};});var ef=w.useMemo(function(){return new D(s||"");},[s]),ed=w.useMemo(function(){return h?[0,0]:ef.getSelection(en);},[ef,en,h]),eh=(0,d.default)(ed,2),ep=eh[0],em=eh[1],eg=function(n){n&&n!==s&&n!==k&&m();},ev=(0,v.useEvent)(function(n){u(n)&&f(n),Y(n),eg(n);}),ey=w.useRef(!1),e_=function(n){L(n);};(0,O.default)(i,function(){i||T||Y(k);});var eb=function(n){"Enter"===n.key&&u(el)&&y(),null==b||b(n);},ex=w.useRef();(0,_.default)(function(){if(H&&s&&!ey.current){if(!ef.match(el)){ev(s);return;}return ec.current.setSelectionRange(ep,em),ex.current=(0,x.default)(function(){ec.current.setSelectionRange(ep,em);}),function(){x.default.cancel(ex.current);};}},[ef,s,H,el,en,ep,em,eo,ev]);var eE=s?{onFocus:function(n){W(!0),er(0),J(""),I(n);},onBlur:function(n){W(!1),e_(n);},onKeyDown:function(n){eb(n);var r=n.key,i=null,a=null,o=em-ep,l=s.slice(ep,em),u=function(n){er(function(r){var i=r+n;return Math.min(i=Math.max(i,0),ef.size()-1);});},c=function(n){var r={YYYY:[0,9999,new Date().getFullYear()],MM:[1,12],DD:[1,31],HH:[0,23],mm:[0,59],ss:[0,59],SSS:[0,999]}[l],i=(0,d.default)(r,3),a=i[0],o=i[1],s=i[2],u=Number(el.slice(ep,em));if(isNaN(u))return String(s||(n>0?a:o));var c=o-a+1;return String(a+(c+(u+n)-a)%c);};switch(r){case"Backspace":case"Delete":i="",a=l;break;case"ArrowLeft":i="",u(-1);break;case"ArrowRight":i="",u(1);break;case"ArrowUp":i="",a=c(1);break;case"ArrowDown":i="",a=c(-1);break;default:isNaN(Number(r))||(a=i=Q+r);}null!==i&&(J(i),i.length>=o&&(u(1),J(""))),null!==a&&ev((el.slice(0,ep)+(0,S.leftPad)(a,o)+el.slice(em)).slice(0,s.length)),es({});},onMouseDown:function(){ey.current=!0;},onMouseUp:function(n){var r=n.target.selectionStart;er(ef.getMaskCellIndex(r)),es({}),null==N||N(n),ey.current=!1;},onPaste:function(n){var r=n.clipboardData.getData("text");u(r)&&ev(r);}}:{};return w.createElement("div",{ref:eu,className:(0,g.default)(U,(0,c.default)((0,c.default)({},"".concat(U,"-active"),i&&(void 0===a||a)),"".concat(U,"-placeholder"),h))},w.createElement(void 0===z?"input":z,(0,l.default)({ref:ec,"aria-invalid":C,autoComplete:"off"},P,{onKeyDown:eb,onBlur:e_},eE,{value:el,onChange:function(n){if(!s){var r=n.target.value;eg(r),Y(r),f(r);}}})),w.createElement(R.default,{type:"suffix",icon:o}),M);});},a94340e3:function(n,r,i){function a(n,r){let{width:i,height:a}=r[0],o=r.map(n=>n.rasterData),s=i*a,l=[],u=JSON.stringify(n);for(let n=0;n<s;n++){let r=JSON.parse(u),i=function n(r,i,a){if(2===r.length&&"band"===r[0]&&"number"==typeof r[1])try{return i[r[1]][a];}catch(n){return console.warn("Raster Data err!"),0;}r.map((o,s)=>{if(Array.isArray(o)&&o.length>0){if("band"===o[0])try{r[s]=i[o[1]][a];}catch(n){console.warn("Raster Data err!"),r[s]=0;}else n(o,i,a);}});}(r,o,n);if("number"==typeof i)l.push(i);else{let n=function n(r){let i=function(n){let[r,i=-1,a=-1]=n;return void 0===r?(console.warn("Express err!"),["+",0,0]):[r.replace(/\s+/g,""),i,a];}(r),a=i[0],o=i[1],s=i[2];return Array.isArray(o)&&(o=n(r[1])),Array.isArray(s)&&(s=n(r[2])),function(n,r,i){switch(n){case"+":return r+i;case"-":return r-i;case"*":return r*i;case"/":return r/i;case"%":return r%i;case"^":return Math.pow(r,i);case"abs":return Math.abs(r);case"floor":return Math.floor(r);case"round":return Math.round(r);case"ceil":return Math.ceil(r);case"sin":return Math.sin(r);case"cos":return Math.cos(r);case"atan":return -1===i?Math.atan(r):Math.atan2(r,i);case"min":return Math.min(r,i);case"max":return Math.max(r,i);case"log10":return Math.log(r);case"log2":return Math.log2(r);default:return console.warn("Calculate symbol err! Return default 0"),0;}}(a,o,s);}(r);l.push(n);}}return l;}i.d(r,"__esModule",{value:!0}),i.e(r,{bandsOperation:function(){return v;},processRasterData:function(){return y;}});var o=i("e38deed2"),s=Object.defineProperty,l=Object.defineProperties,u=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,h=(n,r,i)=>r in n?s(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i,p=(n,r)=>{for(var i in r||(r={}))f.call(r,i)&&h(n,i,r[i]);if(c)for(var i of c(r))d.call(r,i)&&h(n,i,r[i]);return n;},m=(n,r)=>l(n,u(r)),g=(n,r,i)=>new Promise((a,o)=>{var s=n=>{try{u(i.next(n));}catch(n){o(n);}},l=n=>{try{u(i.throw(n));}catch(n){o(n);}},u=n=>n.done?a(n.value):Promise.resolve(n.value).then(s,l);u((i=i.apply(n,r)).next());});function v(n,r,i){return g(this,null,function*(){let s;if(0===n.length)return{rasterData:[0],width:1,heigh:1};let l=yield Promise.all(n.map(({data:n,bands:i=[0]})=>r(n,i))),u=[];l.forEach(n=>{Array.isArray(n)?u.push(...n):u.push(n);});let{width:c,height:f}=u[0];switch(typeof i){case"function":s=i(u);break;case"object":s=Array.isArray(i)?{rasterData:a(i,u)}:function(n,r){var i,s;let l=o.operationsSchema[n.type];return"function"===l.type?l.method(r,null==n?void 0:n.options):"operation"===l.type?"rgb"===n.type?(i=l.expression,s=r,void 0===i.r&&console.warn("Channel R lost in Operation! Use band[0] to fill!"),void 0===i.g&&console.warn("Channel G lost in Operation! Use band[0] to fill!"),void 0===i.b&&console.warn("Channel B lost in Operation! Use band[0] to fill!"),[a(i.r||["band",0],s),a(i.g||["band",0],s),a(i.b||["band",0],s)]):{rasterData:a(l.expression,r)}:void 0;}(i,u);break;default:s={rasterData:u[0].rasterData};}return m(p({},s),{width:c,height:f});});}function y(n,r,i,a){return g(this,null,function*(){a(null,{data:yield v(n,r,i)});});}},a96a4c71:function(n,r,i){"use strict";function a(n,r,i,a,o){for(var s,l=n.children,u=-1,c=l.length,f=n.value&&(a-r)/n.value;++u<c;)(s=l[u]).y0=i,s.y1=o,s.x0=r,s.x1=r+=s.value*f;}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},a9a8ecdb:function(n,r,i){"use strict";function a(n,r,i,a,o){var s,l,u=i[n]||{},c=i[r]||{};"left"===u.fixed?s=a.left["rtl"===o?r:n]:"right"===c.fixed&&(l=a.right["rtl"===o?n:r]);var f=!1,d=!1,h=!1,p=!1,m=i[r+1],g=i[n-1],v=m&&!m.fixed||g&&!g.fixed||i.every(function(n){return"left"===n.fixed;});return"rtl"===o?void 0!==s?p=!(g&&"left"===g.fixed)&&v:void 0!==l&&(h=!(m&&"right"===m.fixed)&&v):void 0!==s?f=!(m&&"left"===m.fixed)&&v:void 0!==l&&(d=!(g&&"right"===g.fixed)&&v),{fixLeft:s,fixRight:l,lastFixLeft:f,firstFixRight:d,lastFixRight:h,firstFixLeft:p,isSticky:a.isSticky};}i.d(r,"__esModule",{value:!0}),i.d(r,"getCellFixedInfo",{enumerable:!0,get:function(){return a;}});},a9c8d857:function(n,r,i){var a=i("215bed1c"),o=i("c9af844f"),s=i("515e037d"),l=i("d6067cfe"),u=i("bca4565f");n.exports=function(n,r,i){var c=n.constructor;switch(r){case"[object ArrayBuffer]":return a(n);case"[object Boolean]":case"[object Date]":return new c(+n);case"[object DataView]":return o(n,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return u(n,i);case"[object Map]":case"[object Set]":return new c;case"[object Number]":case"[object String]":return new c(n);case"[object RegExp]":return s(n);case"[object Symbol]":return l(n);}};},aab2678b:function(n,r,i){"use strict";function a(n,r,i){var a=n[0],o=n[1];return[a+(r[0]-a)*i,o+(r[1]-o)*i];}i.d(r,"__esModule",{value:!0}),i.d(r,"midPoint",{enumerable:!0,get:function(){return a;}});},abbe7005:function(n,r,i){"use strict";function a(n){return n.replace(/-(\w)/g,function(n,r){return r.toUpperCase();});}function o(n){return n.replace(/([A-Z])/g,"-$1").toLowerCase();}i.d(r,"__esModule",{value:!0}),i.e(r,{camelCase:function(){return a;},kebabCase:function(){return o;}});},ac0c5eff:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});var a=i("777fffbe")._(i("2cc7f81c")).default.Uint8Array;},ac1f3315:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"Pow",{enumerable:!0,get:function(){return d;}});var a=i("777fffbe")._(i("8704c632")),o=i("32f028e7"),s=i("8c0d48bf"),l=i("92d64018");let u=n=>r=>r<0?-((-r)**n):r**n,c=n=>r=>r<0?-((-r)**(1/n)):r**(1/n),f=n=>n<0?-Math.sqrt(-n):Math.sqrt(n);class d extends o.Continuous{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,exponent:2,interpolate:s.createInterpolateValue,tickMethod:l.d3Ticks,tickCount:5};}constructor(n){super(n);}chooseTransforms(){let{exponent:n}=this.options;return 1===n?[a.default,a.default]:[.5===n?f:u(n),c(n)];}clone(){return new d(this.options);}}},ac23d12b:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{arcBox:function(){return d;},cubicBox:function(){return _;},cubicPointDistance:function(){return b;},distance:function(){return c;},lineLength:function(){return p;},linePointAt:function(){return m;},linePointToLine:function(){return g;},polylineLength:function(){return x;},quadBox:function(){return S;},quadPointDistance:function(){return T;}});var a=i("777fffbe"),o=i("852bbaa9"),s=a._(i("f1020fa4")),l=a._(i("47de8308")),u=o._(i("d6f42022"));function c(n,r,i,a){var o=n-i,s=r-a;return Math.sqrt(o*o+s*s);}function f(n,r){var i=Math.min.apply(Math,(0,s.default)(n)),a=Math.min.apply(Math,(0,s.default)(r));return{x:i,y:a,width:Math.max.apply(Math,(0,s.default)(n))-i,height:Math.max.apply(Math,(0,s.default)(r))-a};}function d(n,r,i,a,o,s,l){for(var u=Math.atan(-a/i*Math.tan(o)),c=1/0,f=-1/0,d=[s,l],h=-(2*Math.PI);h<=2*Math.PI;h+=Math.PI){var p=u+h;s<l?s<p&&p<l&&d.push(p):l<p&&p<s&&d.push(p);}for(var m=0;m<d.length;m++){var g,v=i*Math.cos(o)*Math.cos(g=d[m])-a*Math.sin(o)*Math.sin(g)+n;v<c&&(c=v),v>f&&(f=v);}for(var y=Math.atan(a/(i*Math.tan(o))),_=1/0,b=-1/0,x=[s,l],E=-(2*Math.PI);E<=2*Math.PI;E+=Math.PI){var w=y+E;s<l?s<w&&w<l&&x.push(w):l<w&&w<s&&x.push(w);}for(var S=0;S<x.length;S++){var T,A=i*Math.sin(o)*Math.cos(T=x[S])+a*Math.cos(o)*Math.sin(T)+r;A<_&&(_=A),A>b&&(b=A);}return{x:c,y:_,width:f-c,height:b-_};}function h(n,r,i,a,o,l){var u=-1,f=1/0,d=[i,a],h=20;l&&l>200&&(h=l/10);for(var p=1/h,m=p/10,g=0;g<=h;g++){var v=g*p,y=[o.apply(void 0,(0,s.default)(n.concat([v]))),o.apply(void 0,(0,s.default)(r.concat([v])))],_=c(d[0],d[1],y[0],y[1]);_<f&&(u=v,f=_);}if(0===u)return{x:n[0],y:r[0]};if(1===u){var b=n.length;return{x:n[b-1],y:r[b-1]};}f=1/0;for(var x=0;x<32&&!(m<1e-4);x++){var E=u-m,w=u+m,S=[o.apply(void 0,(0,s.default)(n.concat([E]))),o.apply(void 0,(0,s.default)(r.concat([E])))],T=c(d[0],d[1],S[0],S[1]);if(E>=0&&T<f)u=E,f=T;else{var A=[o.apply(void 0,(0,s.default)(n.concat([w]))),o.apply(void 0,(0,s.default)(r.concat([w])))],C=c(d[0],d[1],A[0],A[1]);w<=1&&C<f?(u=w,f=C):m*=.5;}}return{x:o.apply(void 0,(0,s.default)(n.concat([u]))),y:o.apply(void 0,(0,s.default)(r.concat([u])))};}function p(n,r,i,a){return c(n,r,i,a);}function m(n,r,i,a,o){return{x:(1-o)*n+o*i,y:(1-o)*r+o*a};}function g(n,r,i,a,o,s){var l=[i-n,a-r];if(u.exactEquals(l,[0,0]))return Math.sqrt((o-n)*(o-n)+(s-r)*(s-r));var c=[-l[1],l[0]];return u.normalize(c,c),Math.abs(u.dot([o-n,s-r],c));}function v(n,r,i,a,o){var s=1-o;return s*s*s*n+3*r*o*s*s+3*i*o*o*s+a*o*o*o;}function y(n,r,i,a){var o,s,u,c=-3*n+9*r-9*i+3*a,f=6*n-12*r+6*i,d=3*r-3*n,h=[];if((0,l.default)(c,0))!(0,l.default)(f,0)&&(o=-d/f)>=0&&o<=1&&h.push(o);else{var p=f*f-4*c*d;(0,l.default)(p,0)?h.push(-f/(2*c)):p>0&&(o=(-f+(u=Math.sqrt(p)))/(2*c),s=(-f-u)/(2*c),o>=0&&o<=1&&h.push(o),s>=0&&s<=1&&h.push(s));}return h;}function _(n,r,i,a,o,s,l,u){for(var c=[n,l],d=[r,u],h=y(n,i,o,l),p=y(r,a,s,u),m=0;m<h.length;m++)c.push(v(n,i,o,l,h[m]));for(var g=0;g<p.length;g++)d.push(v(r,a,s,u,p[g]));return f(c,d);}function b(n,r,i,a,o,s,l,u,f,d,p){var m=h([n,i,o,l],[r,a,s,u],f,d,v,p);return c(m.x,m.y,f,d);}function x(n){return function(n){if(n.length<2)return 0;for(var r=0,i=0;i<n.length-1;i++){var a=n[i],o=n[i+1];r+=c(a[0],a[1],o[0],o[1]);}return r;}(n);}function E(n,r,i,a){var o=1-a;return o*o*n+2*a*o*r+a*a*i;}function w(n,r,i){var a=n+i-2*r;if((0,l.default)(a,0))return[.5];var o=(n-r)/a;return o<=1&&o>=0?[o]:[];}function S(n,r,i,a,o,s){var l=w(n,i,o)[0],u=w(r,a,s)[0],c=[n,o],d=[r,s];return void 0!==l&&c.push(E(n,i,o,l)),void 0!==u&&d.push(E(r,a,s,u)),f(c,d);}function T(n,r,i,a,o,s,l,u){var f=h([n,i,o],[r,a,s],l,u,E);return c(f.x,f.y,l,u);}},ac5270b7:function(n,r,i){n.exports=function(n,r){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=i){var a,o,s,l,u=[],c=!0,f=!1;try{if(s=(i=i.call(n)).next,0===r){if(Object(i)!==i)return;c=!1;}else for(;!(c=(a=s.call(i)).done)&&(u.push(a.value),u.length!==r);c=!0);}catch(n){f=!0,o=n;}finally{try{if(!c&&null!=i.return&&(l=i.return(),Object(l)!==l))return;}finally{if(f)throw o;}}return u;}},n.exports.__esModule=!0,n.exports.default=n.exports;},adb75670:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{path2Curve:function(){return d;}});var a=i("3862611d"),o=i("589c3a02"),s=i("eb06400d"),l=i("8c7e4dff"),u=i("a09cbefa"),c=i("aab2678b"),f=function(n,r,i,o){var s=(0,c.midPoint)([n,r],[i,o],.5);return(0,a.__spreadArray)((0,a.__spreadArray)([],s,!0),[i,o,i,o],!1);};function d(n,r){if(void 0===r&&(r=!1),(0,l.isNormalizedArray)(n)&&n.every(function(n){var r=n[0];return"MC".includes(r);})){var i,c,d=[].concat(n);return r?[d,[]]:d;}for(var h=(0,s.normalizePath)(n),p=(0,a.__assign)({},o.paramsParser),m=[],g="",v=h.length,y=[],_=0;_<v;_+=1){h[_]&&(g=h[_][0]),m[_]=g;var b=function(n,r){var i,a,o,s,l,c,d,h=n[0],p=n.slice(1).map(Number),m=p[0],g=p[1],v=r.x1,y=r.y1,_=r.x,b=r.y;switch("TQ".includes(h)||(r.qx=null,r.qy=null),h){case"M":r.x=m,r.y=g;break;case"A":return d=[v,y].concat(p),["C"].concat((0,u.arcToCubic)(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9]));case"Q":return r.qx=m,r.qy=g,["C"].concat((i=(d=[v,y].concat(p))[0],a=d[1],o=d[2],s=d[3],[1/3*i+2/3*o,1/3*a+2/3*s,1/3*(l=d[4])+2/3*o,1/3*(c=d[5])+2/3*s,l,c]));case"L":return["C"].concat(f(v,y,m,g));case"Z":if(v===_&&y===b)return["C",v,y,_,b,_,b];return["C"].concat(f(v,y,_,b));}return n;}(h[_],p);h[_]=b,function(n,r,i){if(n[i].length>7){n[i].shift();for(var a=n[i],o=i;a.length;)r[i]="A",n.splice(o+=1,0,["C"].concat(a.splice(0,6)));n.splice(i,1);}}(h,m,_),v=h.length,"Z"===g&&y.push(_),c=(i=h[_]).length,p.x1=+i[c-2],p.y1=+i[c-1],p.x2=+i[c-4]||p.x1,p.y2=+i[c-3]||p.y1;}return r?[h,y]:h;}},ae17acd2:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"mergeWithArrayCoverage",{enumerable:!0,get:function(){return l;}});var a=i("d8554caa"),o=this&&this.__spreadArray||function(n,r,i){if(i||2==arguments.length)for(var a,o=0,s=r.length;o<s;o++)!a&&o in r||(a||(a=Array.prototype.slice.call(r,0,o)),a[o]=r[o]);return n.concat(a||Array.prototype.slice.call(r));},s=function(n,r){if((0,a.isArray)(r))return r;},l=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return a.mergeWith.apply(void 0,o(o([],n,!1),[s],!1));};},aea2ff65:function(n,r,i){n.exports=function(n){return n!=n;};},aef7be7a:function(n,r,i){n.exports=function(){return[];};},af0c43b0:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{Path:function(){return u;},path:function(){return c;}});let a=Math.PI,o=2*a,s=o-1e-6;function l(n){this._+=n[0];for(let r=1,i=n.length;r<i;++r)this._+=arguments[r]+n[r];}class u{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==n?l:function(n){let r=Math.floor(n);if(!(r>=0))throw Error(`invalid digits: ${n}`);if(r>15)return l;let i=10**r;return function(n){this._+=n[0];for(let r=1,a=n.length;r<a;++r)this._+=Math.round(arguments[r]*i)/i+n[r];};}(n);}moveTo(n,r){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+r}`;}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`);}lineTo(n,r){this._append`L${this._x1=+n},${this._y1=+r}`;}quadraticCurveTo(n,r,i,a){this._append`Q${+n},${+r},${this._x1=+i},${this._y1=+a}`;}bezierCurveTo(n,r,i,a,o,s){this._append`C${+n},${+r},${+i},${+a},${this._x1=+o},${this._y1=+s}`;}arcTo(n,r,i,o,s){if(n=+n,r=+r,i=+i,o=+o,(s=+s)<0)throw Error(`negative radius: ${s}`);let l=this._x1,u=this._y1,c=i-n,f=o-r,d=l-n,h=u-r,p=d*d+h*h;if(null===this._x1)this._append`M${this._x1=n},${this._y1=r}`;else if(p>1e-6){if(Math.abs(h*c-f*d)>1e-6&&s){let m=i-l,g=o-u,v=c*c+f*f,y=Math.sqrt(v),_=Math.sqrt(p),b=s*Math.tan((a-Math.acos((v+p-(m*m+g*g))/(2*y*_)))/2),x=b/_,E=b/y;Math.abs(x-1)>1e-6&&this._append`L${n+x*d},${r+x*h}`,this._append`A${s},${s},0,0,${+(h*m>d*g)},${this._x1=n+E*c},${this._y1=r+E*f}`;}else this._append`L${this._x1=n},${this._y1=r}`;}}arc(n,r,i,l,u,c){if(n=+n,r=+r,c=!!c,(i=+i)<0)throw Error(`negative radius: ${i}`);let f=i*Math.cos(l),d=i*Math.sin(l),h=n+f,p=r+d,m=1^c,g=c?l-u:u-l;null===this._x1?this._append`M${h},${p}`:(Math.abs(this._x1-h)>1e-6||Math.abs(this._y1-p)>1e-6)&&this._append`L${h},${p}`,i&&(g<0&&(g=g%o+o),g>s?this._append`A${i},${i},0,1,${m},${n-f},${r-d}A${i},${i},0,1,${m},${this._x1=h},${this._y1=p}`:g>1e-6&&this._append`A${i},${i},0,${+(g>=a)},${m},${this._x1=n+i*Math.cos(u)},${this._y1=r+i*Math.sin(u)}`);}rect(n,r,i,a){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+r}h${i=+i}v${+a}h${-i}Z`;}toString(){return this._;}}function c(){return new u;}c.prototype=u.prototype;},b0af5eb7:function(n,r,i){"use strict";(n.exports={}).forEach=function(n,r){for(var i=0;i<n.length;i++){var a=r(n[i]);if(a)return a;}};},b0cb32eb:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return S;}});var a=i("777fffbe"),o=a._(i("e4870cf0")),s=a._(i("ee64167d")),l=a._(i("613f75ca"));i("9bab38e5"),i("87ed5a26"),i("58fbde6a"),i("5d8cf7db"),i("bcd4df20"),i("865cc100");var u=i("e7d0cdde"),c=a._(i("f34e933b")),f=i("609f48be"),d=i("5cbc1fd1"),h=i("988eab63"),p=i("1e224d4e"),m=i("2e660475"),g=i("6fc5b35e"),v=i("efd8a033"),y=a._(i("42870d23")),_=a._(i("a86dec85")),b=i("b2fe4e2b"),x=i("dac8af92"),E=["columns","layoutType","type","action","shouldUpdate","formRef"],w={DrawerForm:d.DrawerForm,QueryFilter:g.QueryFilter,LightFilter:h.LightFilter,StepForm:v.StepsForm.StepForm,StepsForm:_.default,ModalForm:p.ModalForm,Embed:y.default,Form:m.ProForm},S=function(n){var r=n.columns,i=n.layoutType,a=void 0===i?"Form":i,d=n.type,h=void 0===d?"form":d,p=n.action,g=n.shouldUpdate,v=void 0===g?function(n,r){return(0,u.stringify)(n)!==(0,u.stringify)(r);}:g,y=n.formRef,_=(0,l.default)(n,E),S=w[a]||m.ProForm,T=c.default.useForm(),A=(0,s.default)(T,1)[0],C=c.default.useFormInstance(),O=(0,f.useState)([]),M=(0,s.default)(O,2)[1],R=(0,f.useState)(function(){return[];}),P=(0,s.default)(R,2),k=P[0],I=P[1],L=(0,u.useReactiveRef)(n.form||C||A),N=(0,f.useRef)(),D=(0,u.useLatest)(n),F=(0,u.useRefFunction)(function(n){return n.filter(function(n){return!(n.hideInForm&&"form"===h);}).sort(function(n,r){return r.order||n.order?(r.order||0)-(n.order||0):(r.index||0)-(n.index||0);}).map(function(n,r){var i=(0,u.runFunction)(n.title,n,"form",(0,x.jsx)(u.LabelIconTip,{label:n.title,tooltip:n.tooltip||n.tip})),a=(0,u.omitUndefined)({title:i,label:i,name:n.name,valueType:(0,u.runFunction)(n.valueType,{}),key:n.key||n.dataIndex||r,columns:n.columns,valueEnum:n.valueEnum,dataIndex:n.dataIndex||n.key,initialValue:n.initialValue,width:n.width,index:n.index,readonly:n.readonly,colSize:n.colSize,colProps:n.colProps,rowProps:n.rowProps,className:n.className,tooltip:n.tooltip||n.tip,dependencies:n.dependencies,proFieldProps:n.proFieldProps,ignoreFormItem:n.ignoreFormItem,getFieldProps:n.fieldProps?function(){return(0,u.runFunction)(n.fieldProps,L.current,n);}:void 0,getFormItemProps:n.formItemProps?function(){return(0,u.runFunction)(n.formItemProps,L.current,n);}:void 0,render:n.render,renderFormItem:n.renderFormItem,renderText:n.renderText,request:n.request,params:n.params,transform:n.transform,convertValue:n.convertValue,debounceTime:n.debounceTime,defaultKeyWords:n.defaultKeyWords});return(0,b.renderValueType)(a,{action:p,type:h,originItem:n,formRef:L,genItems:F});}).filter(function(n){return!!n;});}),B=(0,f.useCallback)(function(n,r){var i=D.current.onValuesChange;(!0===v||"function"==typeof v&&v(r,N.current))&&I([]),N.current=r,null==i||i(n,r);},[D,v]),j=(0,u.useDeepCompareMemo)(function(){if(L.current&&!(r.length&&Array.isArray(r[0])))return F(r);},[r,null==_?void 0:_.open,p,h,k]),z=(0,u.useDeepCompareMemo)(function(){return"StepsForm"===a?{forceUpdate:M,columns:r}:{};},[r,a]);return(0,f.useImperativeHandle)(y,function(){return L.current;},[L.current]),(0,x.jsx)(S,(0,o.default)((0,o.default)((0,o.default)({},z),_),{},{onInit:function(n,r){var i;y&&(y.current=r),null==_||null===(i=_.onInit)||void 0===i||i.call(_,n,r),L.current=r;},form:n.form||A,formRef:L,onValuesChange:B,children:j}));};},b0ea517f:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{maybeAppend:function(){return p;},select:function(){return h;}});var a=i("777fffbe"),o=i("3862611d"),s=i("1daaa764"),l=a._(s),u=function(n){if(!(0,l.default)(n))return[];for(var r=[],i=0;i<n.length;i++)r=r.concat(n[i]);return r;},c=i("5e195043"),f=i("45d14b4e"),d=function(){var n,r,i;function a(r,i,a,o,s,l,u){void 0===r&&(r=null),void 0===i&&(i=null),void 0===a&&(a=null),void 0===o&&(o=null),void 0===s&&(s=[null,null,null,null,null]),void 0===l&&(l=[]),void 0===u&&(u=[]),n.add(this),this._elements=Array.from(r),this._data=i,this._parent=a,this._document=o,this._enter=s[0],this._update=s[1],this._exit=s[2],this._merge=s[3],this._split=s[4],this._transitions=l,this._facetElements=u;}return a.prototype.selectAll=function(n){var i="string"==typeof n?this._parent.querySelectorAll(n):n;return new r(i,null,this._elements[0],this._document);},a.prototype.selectFacetAll=function(n){var i="string"==typeof n?this._parent.querySelectorAll(n):n;return new r(this._elements,null,this._parent,this._document,void 0,void 0,i);},a.prototype.select=function(n){var i="string"==typeof n?this._parent.querySelectorAll(n)[0]||null:n;return new r([i],null,i,this._document);},a.prototype.append=function(n){var i=this,a="function"==typeof n?n:function(){return i.createElement(n);},s=[];if(null!==this._data){for(var l=0;l<this._data.length;l++){var u=this._data[l],c=(0,o.__read)(Array.isArray(u)?u:[u,null],2),f=c[0],d=c[1],h=a(f,l);h.__data__=f,null!==d&&(h.__fromElements__=d),this._parent.appendChild(h),s.push(h);}return new r(s,null,this._parent,this._document);}for(var l=0;l<this._elements.length;l++){var p=this._elements[l],f=p.__data__,h=a(f,l);p.appendChild(h),s.push(h);}return new r(s,null,s[0],this._document);},a.prototype.maybeAppend=function(r,a){var s=(0,o.__classPrivateFieldGet)(this,n,"m",i).call(this,"#"===r[0]?r:"#".concat(r),a);return s.attr("id",r),s;},a.prototype.maybeAppendByClassName=function(r,a){var s=r.toString(),l=(0,o.__classPrivateFieldGet)(this,n,"m",i).call(this,"."===s[0]?s:".".concat(s),a);return l.attr("className",s),l;},a.prototype.maybeAppendByName=function(r,a){var s=(0,o.__classPrivateFieldGet)(this,n,"m",i).call(this,'[name="'.concat(r,'"]'),a);return s.attr("name",r),s;},a.prototype.data=function(n,i,a){void 0===i&&(i=function(n){return n;}),void 0===a&&(a=function(){return null;});for(var s,l,u,c,f,d=[],h=[],p=new Set(this._elements),m=[],g=new Set,v=new Map(this._elements.map(function(n,r){return[i(n.__data__,r),n];})),y=new Map(this._facetElements.map(function(n,r){return[i(n.__data__,r),n];})),_=(s=this._elements,l=function(n){return a(n.__data__);},u=new Map,s.forEach(function(n){var r=l(n);u.has(r)||u.set(r,[]),u.get(r).push(n);}),u),b=0;b<n.length;b++){var x=n[b],E=i(x,b),w=a(x,b);if(v.has(E)){var S=v.get(E);S.__data__=x,S.__facet__=!1,h.push(S),p.delete(S),v.delete(E);}else if(y.has(E)){var S=y.get(E);S.__data__=x,S.__facet__=!0,h.push(S),y.delete(E);}else if(_.has(E)){var T=_.get(E);m.push([x,T]);try{for(var A=(c=void 0,(0,o.__values)(T)),C=A.next();!C.done;C=A.next()){var S=C.value;p.delete(S);}}catch(n){c={error:n};}finally{try{C&&!C.done&&(f=A.return)&&f.call(A);}finally{if(c)throw c.error;}}_.delete(E);}else if(v.has(w)){var S=v.get(w);S.__toData__?S.__toData__.push(x):S.__toData__=[x],g.add(S),p.delete(S);}else d.push(x);}var O=[new r([],d,this._parent,this._document),new r(h,null,this._parent,this._document),new r(p,null,this._parent,this._document),new r([],m,this._parent,this._document),new r(g,null,this._parent,this._document)];return new r(this._elements,null,this._parent,this._document,O);},a.prototype.merge=function(n){var i=(0,o.__spreadArray)((0,o.__spreadArray)([],(0,o.__read)(this._elements),!1),(0,o.__read)(n._elements),!1),a=(0,o.__spreadArray)((0,o.__spreadArray)([],(0,o.__read)(this._transitions),!1),(0,o.__read)(n._transitions),!1);return new r(i,null,this._parent,this._document,void 0,a);},a.prototype.createElement=function(n){if(this._document)return this._document.createElement(n,{});var i=r.registry[n];return i?new i:function(n){throw Error(n);}("Unknown node type: ".concat(n));},a.prototype.join=function(n,r,i,a,o){void 0===n&&(n=function(n){return n;}),void 0===r&&(r=function(n){return n;}),void 0===i&&(i=function(n){return n.remove();}),void 0===a&&(a=function(n){return n;}),void 0===o&&(o=function(n){return n.remove();});var s=n(this._enter),l=r(this._update),u=i(this._exit),c=a(this._merge),f=o(this._split);return l.merge(s).merge(u).merge(c).merge(f);},a.prototype.remove=function(){for(var n=this,i=0;i<this._elements.length;i++)!function(r){var i=n._elements[r],a=n._transitions[r];a?a.then(function(){return i.remove();}):i.remove();}(i);return new r([],null,this._parent,this._document,void 0,this._transitions);},a.prototype.each=function(n){for(var r=0;r<this._elements.length;r++){var i=this._elements[r],a=i.__data__;n.call(i,a,r);}return this;},a.prototype.attr=function(n,r){var i="function"!=typeof r?function(){return r;}:r;return this.each(function(a,o){void 0!==r&&(this[n]=i.call(this,a,o));});},a.prototype.style=function(n,r,i){void 0===i&&(i=!0);var a="function"==typeof r&&i?r:function(){return r;};return this.each(function(i,o){void 0!==r&&(this.style[n]=a.call(this,i,o));});},a.prototype.styles=function(n,r){return void 0===n&&(n={}),void 0===r&&(r=!0),this.each(function(i,a){var s=this;Object.entries(n).forEach(function(n){var l=(0,o.__read)(n,2),u=l[0],c=l[1],f="function"==typeof c&&r?c:function(){return c;};void 0!==c&&s.attr(u,f.call(s,i,a));});});},a.prototype.update=function(n,r){void 0===r&&(r=!0);var i="function"==typeof n&&r?n:function(){return n;};return this.each(function(r,a){n&&this.update&&this.update(i.call(this,r,a));});},a.prototype.maybeUpdate=function(n,r){void 0===r&&(r=!0);var i="function"==typeof n&&r?n:function(){return n;};return this.each(function(r,a){n&&this.update&&this.update(i.call(this,r,a));});},a.prototype.transition=function(n){this._transitions;var r=Array(this._elements.length);return this.each(function(i,a){r[a]=n.call(this,i,a);}),this._transitions=u(r),this;},a.prototype.on=function(n,r){return this.each(function(){this.addEventListener(n,r);}),this;},a.prototype.call=function(n){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return n.call.apply(n,(0,o.__spreadArray)([this._parent,this],(0,o.__read)(r),!1)),this;},a.prototype.node=function(){return this._elements[0];},a.prototype.nodes=function(){return this._elements;},a.prototype.transitions=function(){return this._transitions.filter(function(n){return!!n;});},a.prototype.parent=function(){return this._parent;},r=a,n=new WeakSet,i=function(n,i){var a=this._elements[0],o=a.querySelector(n);if(o)return new r([o],null,this._parent,this._document);var s="string"==typeof i?this.createElement(i):i();return a.appendChild(s),new r([s],null,this._parent,this._document);},a.registry={g:c.Group,rect:c.Rect,circle:c.Circle,path:c.Path,text:f.Text,ellipse:c.Ellipse,image:c.Image,line:c.Line,polygon:c.Polygon,polyline:c.Polyline,html:c.HTML},a;}();function h(n){return new d([n],null,n,n.ownerDocument);}function p(n,r,i){return n.querySelector(r)?h(n).select(r):h(n).append(i);}},b182123d:function(n,r,i){var a=i("f53c9952"),o=i("459d5e7d");n.exports=function(n,r){return a(n,o(n),r);};},b278ecbe:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{COMMON_ATTRIBUTE_LOCATION:function(){return o;},getCommonStyleAttributeOptions:function(){return s;}});var a=i("553ee311");let o={POSITION:0,POSITION_64LOW:1,COLOR:2,PICKING_COLOR:3,STROKE:4,OPACITY:5,OFFSETS:6,ROTATION:7,MAX:8};function s(n){switch(n){case"rotation":return{name:"Rotation",type:a.AttributeType.Attribute,descriptor:{name:"a_Rotation",shaderLocation:o.ROTATION,buffer:{usage:a.gl.DYNAMIC_DRAW,data:[],type:a.gl.FLOAT},size:1,update:n=>{let{rotation:r=0}=n;return Array.isArray(r)?[r[0]]:[r];}}};case"stroke":return{name:"stroke",type:a.AttributeType.Attribute,descriptor:{name:"a_Stroke",shaderLocation:o.STROKE,buffer:{usage:a.gl.DYNAMIC_DRAW,data:[],type:a.gl.FLOAT},size:4,update:n=>{let{stroke:r=[1,1,1,1]}=n;return r;}}};case"opacity":return{name:"opacity",type:a.AttributeType.Attribute,descriptor:{name:"a_Opacity",shaderLocation:o.OPACITY,buffer:{usage:a.gl.STATIC_DRAW,data:[],type:a.gl.FLOAT},size:1,update:n=>{let{opacity:r=1}=n;return[r];}}};case"offsets":return{name:"offsets",type:a.AttributeType.Attribute,descriptor:{name:"a_Offsets",shaderLocation:o.OFFSETS,buffer:{usage:a.gl.STATIC_DRAW,data:[],type:a.gl.FLOAT},size:2,update:n=>{let{offsets:r}=n;return r;}}};default:return;}}},b2910433:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{Tiny:function(){return o;}});var a=i("66cc087b"),o={Line:(0,a.makeChartComp)("TinyLine"),Area:(0,a.makeChartComp)("TinyArea"),Column:(0,a.makeChartComp)("TinyColumn"),Progress:(0,a.makeChartComp)("TinyProgress"),Ring:(0,a.makeChartComp)("TinyRing")};},b2fe4e2b:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{renderValueType:function(){return P;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("e4870cf0"),l=a._(s),u=i("a275200c"),c=i("dfb73c9a"),f=a._(c),d=i("609f48be"),h=o._(d),p=i("e6c8d689"),m=a._(p),g=i("613f75ca"),v=a._(g),y=i("87ed5a26"),_=i("ddaa0afd"),b=a._(_),x=i("551ddf56"),E=a._(x),w=i("dac8af92"),S=["key"],T=function(n,r){var i=r.action,a=r.formRef,o=r.type,s=r.originItem,u=(0,l.default)((0,l.default)({},(0,b.default)(n,["dataIndex","width","render","renderFormItem","renderText","title"])),{},{name:n.name||n.key||n.dataIndex,width:n.width,render:null!=n&&n.render?function(r,a,s){var u,c,f,d;return null==n||null===(u=n.render)||void 0===u?void 0:u.call(n,r,a,s,null==i?void 0:i.current,(0,l.default)((0,l.default)({type:o},n),{},{key:null===(c=n.key)||void 0===c?void 0:c.toString(),formItemProps:null===(f=n.getFormItemProps)||void 0===f?void 0:f.call(n),fieldProps:null===(d=n.getFieldProps)||void 0===d?void 0:d.call(n)}));}:void 0}),c=function(){var n=u.key,r=(0,v.default)(u,S);return(0,w.jsx)(E.default,(0,l.default)((0,l.default)({},r),{},{ignoreFormItem:!0}),n);},d=null!=n&&n.renderFormItem?function(r,i){var u,f,d,h,p=(0,y.omitUndefined)((0,l.default)((0,l.default)({},i),{},{onChange:void 0}));return null==n||null===(u=n.renderFormItem)||void 0===u?void 0:u.call(n,(0,l.default)((0,l.default)({type:o},n),{},{key:null===(f=n.key)||void 0===f?void 0:f.toString(),formItemProps:null===(d=n.getFormItemProps)||void 0===d?void 0:d.call(n),fieldProps:null===(h=n.getFieldProps)||void 0===h?void 0:h.call(n),originProps:s}),(0,l.default)((0,l.default)({},p),{},{defaultRender:c,type:o}),a.current);}:void 0,p=function(){if(null!=n&&n.renderFormItem){var r=null==d?void 0:d(null,{});if(!r||n.ignoreFormItem)return r;}return(0,h.createElement)(E.default,(0,l.default)((0,l.default)({},u),{},{key:[n.key,n.index||0].join("-"),renderFormItem:d}));};return n.dependencies?(0,w.jsx)(f.default,{name:n.dependencies||[],children:p},n.key):p();},A=i("11bba482"),C=i("9f61e6e3"),O=a._(C),M=i("37e36e70"),R=[function(n){return!(n.valueType&&"string"==typeof n.valueType&&["index","indexBorder","option"].includes(null==n?void 0:n.valueType))||null;},function(n,r){var i,a=r.genItems;return"group"!==n.valueType||(n.columns&&Array.isArray(n.columns)?(0,w.jsx)(M.ProFormGroup,(0,l.default)((0,l.default)({label:n.label,colProps:n.colProps,rowProps:n.rowProps},null===(i=n.getFieldProps)||void 0===i?void 0:i.call(n)),{},{children:a(n.columns)}),n.key):null);},function(n,r){var i,a,o=r.genItems;return"formList"!==n.valueType||!n.dataIndex||(n.columns&&Array.isArray(n.columns)?(0,h.createElement)(A.ProFormList,(0,l.default)((0,l.default)({},null===(i=n.getFormItemProps)||void 0===i?void 0:i.call(n)),{},{key:n.key,name:n.dataIndex,label:n.label,initialValue:n.initialValue,colProps:n.colProps,rowProps:n.rowProps},null===(a=n.getFieldProps)||void 0===a?void 0:a.call(n)),o(n.columns)):null);},function(n,r){var i,a,o=r.genItems;return"formSet"!==n.valueType||!n.dataIndex||(n.columns&&Array.isArray(n.columns)?(0,h.createElement)(O.default,(0,l.default)((0,l.default)({},null===(i=n.getFormItemProps)||void 0===i?void 0:i.call(n)),{},{key:n.key,initialValue:n.initialValue,name:n.dataIndex,label:n.label,colProps:n.colProps,rowProps:n.rowProps},null===(a=n.getFieldProps)||void 0===a?void 0:a.call(n)),o(n.columns)):null);},function(n){if("divider"===n.valueType){var r;return(0,h.createElement)(m.default,(0,l.default)((0,l.default)({},null===(r=n.getFieldProps)||void 0===r?void 0:r.call(n)),{},{key:n.key}));}return!0;},function(n,r){if("dependency"===n.valueType){var i,a,o,s=null===(i=n.getFieldProps)||void 0===i?void 0:i.call(n);return((0,u.noteOnce)(Array.isArray(null!==(a=n.name)&&void 0!==a?a:null==s?void 0:s.name),'SchemaForm: fieldProps.name should be NamePath[] when valueType is "dependency"'),(0,u.noteOnce)("function"==typeof n.columns,'SchemaForm: columns should be a function when valueType is "dependency"'),Array.isArray(null!==(o=n.name)&&void 0!==o?o:null==s?void 0:s.name))?(0,h.createElement)(f.default,(0,l.default)((0,l.default)({name:n.name},s),{},{key:n.key}),function(i){return n.columns&&"function"==typeof n.columns?r.genItems(n.columns(i)):null;}):null;}return!0;}],P=function(n,r){for(var i=0;i<R.length;i++){var a=(0,R[i])(n,r);if(!0!==a)return a;}return T(n,r);};},b42f1d64:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});var a=function(n){var r=typeof n;return null!=n&&("object"==r||"function"==r);};},b4b08cd7:function(n,r,i){"use strict";function a(n,r){if(!n)throw Error(r||"viewport-mercator-project: assertion failed.");}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},b53528ac:function(n,r,i){n.exports=function(n){return!!n&&"string"!=typeof n&&(n instanceof Array||Array.isArray(n)||n.length>=0&&(n.splice instanceof Function||Object.getOwnPropertyDescriptor(n,n.length-1)&&"String"!==n.constructor.name));};},b55e4682:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{CityBuildingLayer:function(){return b;},HeatmapLayer:function(){return k;},ImageLayer:function(){return L.default;},LineLayer:function(){return D.default;},MaskLayer:function(){return ei.default;},PointLayer:function(){return B.default;},PolygonLayer:function(){return z.default;},RasterLayer:function(){return V.default;},TileLayer:function(){return en;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("d1751d7c"),l=i("9b84be4b"),u=a._(l),c=i("a854094b"),f=a._(c),d=i("e333157c"),h=a._(d),p=i("553ee311"),m=i("9479dab9"),g=i("6654a076"),v=a._(g),y=i("8970bd89");class _ extends v.default{constructor(...n){super(...n),(0,f.default)(this,"cityCenter",void 0),(0,f.default)(this,"cityMinSize",void 0);}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,NORMAL:10,UV:11});}getCommonUniformsInfo(){let{opacity:n=1,baseColor:r="rgb(16,16,16)",brightColor:i="rgb(255,176,38)",windowColor:a="rgb(30,60,89)",time:o=0,sweep:s={enable:!1,sweepRadius:1,sweepColor:"rgb(255, 255, 255)",sweepSpeed:.4,sweepCenter:this.cityCenter}}=this.layer.getLayerConfig(),l={u_baseColor:(0,m.rgb2arr)(r),u_brightColor:(0,m.rgb2arr)(i),u_windowColor:(0,m.rgb2arr)(a),u_circleSweepColor:[...(0,m.rgb2arr)(s.sweepColor).slice(0,3),1],u_cityCenter:s.sweepCenter||this.cityCenter,u_circleSweep:s.enable?1:0,u_cityMinSize:this.cityMinSize*s.sweepRadius,u_circleSweepSpeed:s.sweepSpeed,u_opacity:n,u_near:0,u_far:1,u_time:this.layer.getLayerAnimateTime()||o};return this.getUniformsBufferInfo(l);}calCityGeo(){let[n,r,i,a]=this.layer.getSource().extent;this.cityCenter=[(i+n)/2,(a+r)/2],this.cityMinSize=Math.sqrt(Math.pow(i-n,2)+Math.pow(a-r,2))/4;}initModels(){var n=this;return(0,u.default)(function*(){return n.calCityGeo(),n.initUniformsBuffer(),n.startModelAnimate(),n.buildModels();})();}buildModels(){var n=this;return(0,u.default)(function*(){return[(yield n.layer.buildLayerModel({moduleName:"cityBuilding",vertexShader:'precision highp float;\n\n#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\nlayout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;\nlayout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;\nlayout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;\nlayout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;\n\nout vec2 v_texCoord;\nout vec4 v_Color;\nout float v_worldDis;\n\nlayout(std140) uniform commonUniforms {\n  vec4 u_baseColor : [ 1.0, 0, 0, 1.0 ];\n  vec4 u_brightColor : [ 1.0, 0, 0, 1.0 ];\n  vec4 u_windowColor : [ 1.0, 0, 0, 1.0 ];\n  vec4 u_circleSweepColor;\n  vec2 u_cityCenter;\n  float u_circleSweep;\n  float u_cityMinSize;\n  float u_circleSweepSpeed;\n  float u_opacity: 1.0;\n  float u_near : 0;\n  float u_far : 1;\n  float u_time;\n};\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\n\nvoid main() {\n  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);\n  vec4 project_pos = project_position(pos);\n\n   v_texCoord = a_Uv;\n\n  if(u_circleSweep > 0.0) {\n     vec2 lnglatscale = vec2(0.0);\n    lnglatscale = (a_Position.xy - u_cityCenter) * vec2(0.0, 0.135);\n    v_worldDis = length(a_Position.xy + lnglatscale - u_cityCenter);\n  }\n\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  float lightWeight = calc_lighting(pos);\n  // v_Color = a_Color;\n  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);\n\n  setPickingColor(a_PickingColor);\n}\n',fragmentShader:'precision highp float;\nlayout(std140) uniform commonUniforms {\n  vec4 u_baseColor: [ 1.0, 0, 0, 1.0 ];\n  vec4 u_brightColor: [ 1.0, 0, 0, 1.0 ];\n  vec4 u_windowColor: [ 1.0, 0, 0, 1.0 ];\n  vec4 u_circleSweepColor;\n  vec2 u_cityCenter;\n  float u_circleSweep;\n  float u_cityMinSize;\n  float u_circleSweepSpeed;\n  float u_opacity: 1.0;\n  float u_near: 0;\n  float u_far: 1;\n  float u_time;\n};\nin vec4 v_Color;\nin vec2 v_texCoord;\nin float v_worldDis;\nout vec4 outputColor;\n\n#pragma include "picking"\n#pragma include "scene_uniforms"\n\nvec3 getWindowColor(float n, float hot, vec3 brightColor, vec3 darkColor) {\n    float s = step(hot, n);\n    vec3 color = mix(brightColor,vec3(0.9,0.9,1.0),n);\n\n    return mix(darkColor, color, s);\n}\nfloat random (vec2 st) {\n    return fract(sin(dot(st.xy, vec2(12.9898,78.233)))* 43758.5453123);\n}\n\nfloat LinearizeDepth()\n{\n    float z = gl_FragCoord.z * 2.0 - 1.0;\n    return (2.0 * u_near * u_far) / (u_far + u_near - z * (u_far - u_near));\n}\n\nvec3 fog(vec3 color, vec3 fogColor, float depth){\n    float fogFactor=clamp(depth,0.0,1.0);\n    vec3 output_color=mix(fogColor,color,fogFactor);\n    return output_color;\n}\n\nfloat sdRect(vec2 p, vec2 sz) {\n  vec2 d = abs(p) - sz;\n  float outside = length(max(d, 0.));\n  float inside = min(max(d.x, d.y), 0.);\n  return outside + inside;\n}\n\nvoid main() {\n  outputColor = v_Color;\n  vec3 baseColor = u_baseColor.xyz;\n  vec3 brightColor = u_brightColor.xyz;\n  vec3 windowColor = u_windowColor.xyz;\n  float targetColId = 5.;\n  float depth = 1.0 - LinearizeDepth() / u_far * u_Zoom;\n  vec3 fogColor = vec3(23.0/255.0,31.0/255.0,51.0/255.0);\n  if(v_texCoord.x < 0.) { //\u9876\u90E8\u989C\u8272\n       vec3 foggedColor = fog(baseColor.xyz + vec3(0.12*0.9,0.2*0.9,0.3*0.9),fogColor,depth);\n       outputColor = vec4( foggedColor, v_Color.w);\n  }else { // \u4FA7\u9762\u989C\u8272\n        vec2 st = v_texCoord;\n        vec2  UvScale = v_texCoord;\n        float tStep = min(0.08,max(0.05* (18.0-u_Zoom),0.02));\n        float tStart = 0.25 * tStep;\n        float tEnd = 0.75 * tStep;\n        float u = mod(UvScale.x, tStep);\n        float v = mod(UvScale.y, tStep);\n        float ux = floor(UvScale.x/tStep);\n        float uy = floor(UvScale.y/tStep);\n        float n = random(vec2(ux,uy));\n        float lightP = u_time;\n        float head = 1.0- step(0.005,st.y);\n        /*step3*/\n        // \u5C06\u7A97\u6237\u989C\u8272\u548C\u5899\u9762\u989C\u8272\u533A\u522B\u5F00\u6765\n        float sU = step(tStart, u) - step(tEnd, u);\n        float sV = step(tStart, v) - step(tEnd, v);\n        vec2 windowSize = vec2(abs(tEnd-tStart),abs(tEnd-tStart));\n        float dist = sdRect(vec2(u,v), windowSize);\n        float s = sU * sV;\n\n        float curColId = floor(UvScale.x / tStep);\n        float sCol = step(targetColId - 0.2, curColId) - step(targetColId + 0.2, curColId);\n\n        float mLightP = mod(lightP, 2.);\n        float sRow = step(mLightP - 0.2, st.y) - step(mLightP, st.y);\n        if(ux == targetColId){\n            n =0.;\n        }\n        float timeP = min(0.75, abs ( sin(u_time/3.0) ) );\n        float hot = smoothstep(1.0,0.0,timeP);\n        vec3 color = mix(baseColor, getWindowColor(n,hot,brightColor,windowColor), s);\n        //vec3 color = mix(baseColor, getWindowColor(n,hot,brightColor,windowColor), 1.0);\n        float sFinal = s * sCol * sRow;\n        color += mix(baseColor, brightColor, sFinal*n);\n        if (st.y<0.01){\n        color = baseColor;\n         }\n        if(head ==1.0) { // \u9876\u90E8\u4EAE\u7EBF\n            color = brightColor;\n        }\n        color = color * v_Color.rgb;\n\n        vec3 foggedColor = fog(color,fogColor,depth);\n\n        outputColor = vec4(foggedColor,1.0);\n  }\n\n\n  if(u_circleSweep > 0.0 && v_worldDis < u_cityMinSize) {\n    float r = fract(((v_worldDis/u_cityMinSize) - u_time * u_circleSweepSpeed) * 2.0);\n    outputColor.rgb += r * r * u_circleSweepColor.rgb;\n  }\n\n  outputColor.a *= u_opacity;\n  outputColor = filterColor(outputColor);\n}\n',triangulation:y.PolygonExtrudeTriangulation,depth:{enable:!0},defines:n.getDefines(),inject:n.getInject(),cull:{enable:!0,face:p.gl.BACK}}))];})();}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:p.AttributeType.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:p.gl.STATIC_DRAW,data:[],type:p.gl.FLOAT},size:3,update:(n,r,i,a,o)=>o}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:p.AttributeType.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:1,update:n=>{let{size:r=10}=n;return Array.isArray(r)?[r[0]]:[r];}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:p.AttributeType.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:2,update:(n,r,i)=>[i[3],i[4]]}});}}class b extends h.default{constructor(...n){super(...n),(0,f.default)(this,"type","CityBuildingLayer");}buildModels(){var n=this;return(0,u.default)(function*(){n.layerModel=new _(n),yield n.initLayerModels();})();}setLight(n){this.updateLayerConfig({time:n});}getModelType(){return"citybuilding";}}var x=i("df809dd2"),E=i("e4870cf0"),w=a._(E);class S extends v.default{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,POS:9});}getUninforms(){let n=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,w.default)((0,w.default)({},n.uniformsOption),r.uniformsOption);}getCommonUniformsInfo(){let{opacity:n,coverage:r,angle:i}=this.layer.getLayerConfig(),a={u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset],u_opacity:n||1,u_coverage:r||.9,u_angle:i||0};return this.getUniformsBufferInfo(a);}initModels(){var n=this;return(0,u.default)(function*(){return n.buildModels();})();}buildModels(){var n=this;return(0,u.default)(function*(){return n.initUniformsBuffer(),[(yield n.layer.buildLayerModel({moduleName:"heatmapGrid",vertexShader:'layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;\nlayout(location =  ATTRIBUTE_LOCATION_POS) in vec3 a_Pos;\n\nlayout(std140) uniform commonUniforms {\n    vec2 u_radius;\n    float u_opacity;\n    float u_coverage;\n    float u_angle;\n};\n\nout vec4 v_color;\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nvoid main() {\n  v_color = a_Color;\n  v_color.a *= u_opacity;\n\n  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));\n  vec2 offset = a_Position.xy * u_radius * rotationMatrix * u_coverage;\n\n  vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\n  vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));\n  gl_Position = project_common_position_to_clipspace(project_pos);\n\n  setPickingColor(a_PickingColor);\n}\n',fragmentShader:'in vec4 v_color;\n\n#pragma include "scene_uniforms"\n#pragma include "picking"\nout vec4 outputColor;\nvoid main() {\n  outputColor = v_color;\n  outputColor = filterColor(outputColor);\n}\n',defines:n.getDefines(),triangulation:y.HeatmapGridTriangulation,primitive:p.gl.TRIANGLES,depth:{enable:!1}}))];})();}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:p.AttributeType.Attribute,descriptor:{shaderLocation:this.attributeLocation.POS,name:"a_Pos",buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:3,update:n=>{let r=n.coordinates;return[r[0],r[1],0];}}});}}class T extends v.default{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,POS:10,NORMAL:11});}getUninforms(){let n=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,w.default)((0,w.default)({},n.uniformsOption),r.uniformsOption);}getCommonUniformsInfo(){let{opacity:n,coverage:r,angle:i}=this.layer.getLayerConfig(),a={u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset],u_opacity:n||1,u_coverage:r||.9,u_angle:i||0};return this.getUniformsBufferInfo(a);}initModels(){var n=this;return(0,u.default)(function*(){return n.buildModels();})();}buildModels(){var n=this;return(0,u.default)(function*(){return n.initUniformsBuffer(),[(yield n.layer.buildLayerModel({moduleName:"heatmapGrid3d",vertexShader:'layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;\nlayout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;\nlayout(location = ATTRIBUTE_LOCATION_POS) in vec3 a_Pos;\nlayout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;\n\nlayout(std140) uniform commonUniforms {\n  vec2 u_radius;\n  float u_opacity;\n  float u_coverage;\n  float u_angle;\n};\n\nout vec4 v_color;\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "light"\n#pragma include "picking"\n\nvoid main() {\n  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));\n  vec2 offset = vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage);\n\n  vec2 lnglat = unProjectFlat(a_Pos.xy + offset); // \u5B9E\u9645\u7684\u7ECF\u7EAC\u5EA6\n  vec4 project_pos = project_position(vec4(lnglat, a_Position.z * a_Size, 1.0));\n\n  float lightWeight = calc_lighting(project_pos);\n  v_color = vec4(a_Color.rgb * lightWeight, a_Color.w);\n\n  gl_Position = project_common_position_to_clipspace(project_pos);\n\n  setPickingColor(a_PickingColor);\n}\n',fragmentShader:'in vec4 v_color;\n\nlayout(std140) uniform commonUniforms {\n  vec2 u_radius;\n  float u_opacity;\n  float u_coverage;\n  float u_angle;\n};\n\n#pragma include "scene_uniforms"\n#pragma include "picking"\n\nout vec4 outputColor;\nvoid main() {\n  outputColor = v_color;\n  outputColor = filterColor(outputColor);\n}\n',defines:n.getDefines(),triangulation:y.PointExtrudeTriangulation,primitive:p.gl.TRIANGLES,depth:{enable:!0}}))];})();}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:p.AttributeType.Attribute,descriptor:{shaderLocation:this.attributeLocation.SIZE,name:"a_Size",buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:1,update:n=>{let{size:r}=n;return Array.isArray(r)?[r[0]]:[r];}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:p.AttributeType.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:p.gl.STATIC_DRAW,data:[],type:p.gl.FLOAT},size:3,update:(n,r,i,a,o)=>o}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:p.AttributeType.Attribute,descriptor:{name:"a_Pos",shaderLocation:this.attributeLocation.POS,buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:3,update:n=>{let r=n.coordinates;return[r[0],r[1],0];}}});}}var A=i("da755037"),C=o._(A);let{isEqual:O}=m.lodashUtil;class M extends v.default{constructor(...n){super(...n),(0,f.default)(this,"texture",void 0),(0,f.default)(this,"colorTexture",void 0),(0,f.default)(this,"heatmapFramerBuffer",void 0),(0,f.default)(this,"heatmapTexture",void 0),(0,f.default)(this,"intensityModel",void 0),(0,f.default)(this,"colorModel",void 0),(0,f.default)(this,"shapeType",void 0),(0,f.default)(this,"preRampColors",void 0),(0,f.default)(this,"colorModelUniformBuffer",[]),(0,f.default)(this,"heat3DModelUniformBuffer",[]);}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,UV:10,DIR:11});}prerender(){let{clear:n,useFramebuffer:r}=this.rendererService;r(this.heatmapFramerBuffer,()=>{n({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.heatmapFramerBuffer}),this.drawIntensityMode();});}render(n){let{rampColors:r}=this.layer.getLayerConfig();O(this.preRampColors,r)||this.updateColorTexture(),"heatmap"===this.shapeType?this.drawHeatMap(n):this.draw3DHeatMap(n);}getUninforms(){throw Error("Method not implemented.");}initModels(){var n=this;return(0,u.default)(function*(){var r;let{createFramebuffer:i,getViewportSize:a,createTexture2D:o}=n.rendererService,s=n.styleAttributeService.getLayerStyleAttribute("shape"),l=(null==s||null===(r=s.scale)||void 0===r?void 0:r.field)||"heatmap";n.shapeType=l,n.intensityModel=yield n.buildHeatMapIntensity(),n.colorModel="heatmap"===l?n.buildHeatmap():n.build3dHeatMap();let{width:u,height:c}=a();return n.heatmapTexture=o({width:Math.floor(u/4),height:Math.floor(c/4),wrapS:p.gl.CLAMP_TO_EDGE,wrapT:p.gl.CLAMP_TO_EDGE,min:p.gl.LINEAR,mag:p.gl.LINEAR,usage:p.TextureUsage.RENDER_TARGET}),n.heatmapFramerBuffer=i({color:n.heatmapTexture,depth:!0,width:Math.floor(u/4),height:Math.floor(c/4)}),n.updateColorTexture(),[n.intensityModel,n.colorModel];})();}buildModels(){var n=this;return(0,u.default)(function*(){return n.initModels();})();}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"dir",type:p.AttributeType.Attribute,descriptor:{name:"a_Dir",shaderLocation:this.attributeLocation.DIR,buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:2,update:(n,r,i)=>[i[3],i[4]]}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:p.AttributeType.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:1,update:n=>{let{size:r=1}=n;return[r];}}});}buildHeatMapIntensity(){var n=this;return(0,u.default)(function*(){return n.uniformBuffers=[n.rendererService.createBuffer({data:new Float32Array(4).fill(0),isUBO:!0})],n.layer.triangulation=y.HeatmapTriangulation,yield n.layer.buildLayerModel({moduleName:"heatmapIntensity",vertexShader:'layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;\nlayout(location = ATTRIBUTE_LOCATION_DIR) in vec2 a_Dir;\n\nlayout(std140) uniform commonUniforms {\n  float u_radius;\n  float u_intensity;\n  float u_common_uniforms_padding1;\n  float u_common_uniforms_padding2;\n};\n\nout vec2 v_extrude;\nout float v_weight;\n\n#define GAUSS_COEF (0.3989422804014327)\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  vec3 picking_color_placeholder = u_PickingColor;\n\n  v_weight = a_Size;\n  float ZERO = 1.0 / 255.0 / 16.0;\n  float extrude_x = a_Dir.x * 2.0 - 1.0;\n  float extrude_y = a_Dir.y * 2.0 - 1.0;\n  vec2 extrude_dir = normalize(vec2(extrude_x, extrude_y));\n  float S = sqrt(-2.0 * log(ZERO / a_Size / u_intensity / GAUSS_COEF)) / 2.5;\n  v_extrude = extrude_dir * S;\n\n  vec2 offset = project_pixel(v_extrude * u_radius);\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));\n\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));\n\n}\n',fragmentShader:"layout(std140) uniform commonUniforms {\n  float u_radius;\n  float u_intensity;\n  float u_common_uniforms_padding1;\n  float u_common_uniforms_padding2;\n};\n\nin vec2 v_extrude;\nin float v_weight;\nout vec4 outputColor;\n#define GAUSS_COEF  0.3989422804014327\n\nvoid main(){\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = v_weight * u_intensity * GAUSS_COEF * exp(d);\n    outputColor = vec4(val, 1., 1., 1.);\n}\n",triangulation:y.HeatmapTriangulation,defines:n.getDefines(),depth:{enable:!1},cull:{enable:!0,face:p.gl.FRONT}});})();}buildHeatmap(){this.shaderModuleService.registerModule("heatmapColor",{vs:'layout(location = 0) in vec3 a_Position;\nlayout(location = 10) in vec2 a_Uv;\n\nlayout(std140) uniform commonUniforms {\n  float u_opacity;\n  float u_common_uniforms_padding1;\n  float u_common_uniforms_padding2;\n  float u_common_uniforms_padding3;\n};\n\n#pragma include "scene_uniforms"\n\nout vec2 v_texCoord;\nvoid main() {\n  v_texCoord = a_Uv;\n  #ifdef VIEWPORT_ORIGIN_TL\n  v_texCoord.y = 1.0 - v_texCoord.y;\n  #endif\n\n  gl_Position = vec4(a_Position.xy, 0, 1.0);\n}\n',fs:'uniform sampler2D u_texture;        // \u70ED\u529B\u5F3A\u5EA6\u56FE\nuniform sampler2D u_colorTexture;   // \u6839\u636E\u5F3A\u5EA6\u5206\u5E03\u7684\u8272\u5E26\n\nlayout(std140) uniform commonUniforms {\n  float u_opacity;\n  float u_common_uniforms_padding1;\n  float u_common_uniforms_padding2;\n  float u_common_uniforms_padding3;\n};\nin vec2 v_texCoord;\nout vec4 outputColor;\n\n#pragma include "scene_uniforms"\n\nfloat getBlurIndusty() {\n    float vW = 2.0/ u_ViewportSize.x;\n    float vH = 2.0/ u_ViewportSize.y;\n    vec2 vUv = v_texCoord;\n    float i11 = texture(SAMPLER_2D(u_texture), vec2( vUv.x - 1.0 * vW, vUv.y + 1.0 * vH) ).r;\n    float i12 = texture(SAMPLER_2D(u_texture), vec2( vUv.x - 0.0 * vW, vUv.y + 1.0 * vH) ).r;\n    float i13 = texture(SAMPLER_2D(u_texture), vec2( vUv.x + 1.0 * vW, vUv.y + 1.0 * vH) ).r;\n\n    float i21 = texture(SAMPLER_2D(u_texture), vec2( vUv.x - 1.0 * vW, vUv.y) ).r;\n    float i22 = texture(SAMPLER_2D(u_texture), vec2( vUv.x , vUv.y) ).r;\n    float i23 = texture(SAMPLER_2D(u_texture), vec2( vUv.x + 1.0 * vW, vUv.y) ).r;\n\n    float i31 = texture(SAMPLER_2D(u_texture), vec2( vUv.x - 1.0 * vW, vUv.y-1.0*vH) ).r;\n    float i32 = texture(SAMPLER_2D(u_texture), vec2( vUv.x - 0.0 * vW, vUv.y-1.0*vH) ).r;\n    float i33 = texture(SAMPLER_2D(u_texture), vec2( vUv.x + 1.0 * vW, vUv.y-1.0*vH) ).r;\n\n    return(\n        i11 + \n        i12 + \n        i13 + \n        i21 + \n        i21 + \n        i22 + \n        i23 + \n        i31 + \n        i32 + \n        i33\n        )/9.0;\n}\n\n\nvoid main(){\n    // float intensity = texture(u_texture, v_texCoord).r;\n    float intensity = getBlurIndusty();\n    vec4 color = texture(SAMPLER_2D(u_colorTexture), vec2(intensity, 0.0));\n    outputColor = color;\n    outputColor.a = color.a * smoothstep(0.,0.1,intensity) * u_opacity;\n}\n'}),this.colorModelUniformBuffer=[this.rendererService.createBuffer({data:new Float32Array(4).fill(0),isUBO:!0})];let{vs:n,fs:r,uniforms:i}=this.shaderModuleService.getModule("heatmapColor"),{createAttribute:a,createElements:o,createBuffer:s,createModel:l}=this.rendererService;return l({vs:n,fs:r,uniformBuffers:[...this.colorModelUniformBuffer,...this.rendererService.uniformBuffers],attributes:{a_Position:a({shaderLocation:this.attributeLocation.POSITION,buffer:s({data:[-1,1,0,1,1,0,-1,-1,0,1,-1,0],type:p.gl.FLOAT}),size:3}),a_Uv:a({shaderLocation:this.attributeLocation.UV,buffer:s({data:[0,1,1,1,0,0,1,0],type:p.gl.FLOAT}),size:2})},uniforms:(0,w.default)({},i),depth:{enable:!1},elements:o({data:[0,2,1,2,3,1],type:p.gl.UNSIGNED_INT,count:6})});}build3dHeatMap(){let{getViewportSize:n}=this.rendererService,{width:r,height:i}=n(),a=function(n,r){let i=[],a=[],o=[],s=n+1,l=r+1,u=n/2,c=r/2;for(let i=0;i<l;i++){let l=i-c;for(let f=0;f<s;f++){let s=f-u;a.push(s/u,-l/c,0),o.push(f/n),o.push(1-i/r);}}for(let a=0;a<r;a++)for(let r=0;r<n;r++){let n=r+s*a,o=r+s*(a+1),l=r+1+s*(a+1),u=r+1+s*a;i.push(n,o,u),i.push(o,l,u);}return{vertices:a,indices:i,uvs:o};}(r/4,i/4);this.shaderModuleService.registerModule("heatmap3dColor",{vs:'layout(location = 0) in vec3 a_Position;\nlayout(location = 10) in vec2 a_Uv;\n\nlayout(std140) uniform commonUniforms {\n  mat4 u_ViewProjectionMatrixUncentered;\n  mat4 u_InverseViewProjectionMatrix;\n  float u_opacity;\n  float u_common_uniforms_padding1;\n  float u_common_uniforms_padding2;\n  float u_common_uniforms_padding3;\n};\n\nuniform sampler2D u_texture;\nuniform sampler2D u_colorTexture;\n\nout vec2 v_texCoord;\nout float v_intensity;\n\nvec2 toBezier(float t, vec2 P0, vec2 P1, vec2 P2, vec2 P3) {\n  float t2 = t * t;\n  float one_minus_t = 1.0 - t;\n  float one_minus_t2 = one_minus_t * one_minus_t;\n  return P0 * one_minus_t2 * one_minus_t +\n  P1 * 3.0 * t * one_minus_t2 +\n  P2 * 3.0 * t2 * one_minus_t +\n  P3 * t2 * t;\n}\nvec2 toBezier(float t, vec4 p) {\n  return toBezier(t, vec2(0.0, 0.0), vec2(p.x, p.y), vec2(p.z, p.w), vec2(1.0, 1.0));\n}\n\n#pragma include "projection"\n#pragma include "project"\n\nvoid main() {\n  v_texCoord = a_Uv;\n\n  vec2 pos = a_Uv * vec2(2.0) - vec2(1.0); // \u5C06\u539F\u672C 0 -> 1 \u7684 uv \u8F6C\u6362\u4E3A -1 -> 1 \u7684\u6807\u51C6\u5750\u6807\u7A7A\u95F4\uFF08NDC\uFF09\n\n  vec4 p1 = vec4(pos, 0.0, 1.0); // x/y \u5E73\u9762\u4E0A\u7684\u70B9\uFF08z == 0\uFF09\u53EF\u4EE5\u8BA4\u4E3A\u662F\u4E09\u7EF4\u4E0A\u7684\u70B9\u88AB\u6295\u5F71\u5230\u5E73\u9762\u540E\u7684\u70B9\n  vec4 p2 = vec4(pos, 1.0, 1.0); // \u5E73\u884C\u4E8Ex/y\u5E73\u9762\u3001z==1 \u7684\u5E73\u9762\u4E0A\u7684\u70B9\n\n  vec4 inverseP1 = u_InverseViewProjectionMatrix * p1; // \u6839\u636E\u89C6\u56FE\u6295\u5F71\u77E9\u9635\u7684\u9006\u77E9\u9635\u5E73\u9762\u4E0A\u7684\u53CD\u7B97\u51FA\u4E09\u7EF4\u7A7A\u95F4\u4E2D\u7684\u70B9\uFF08p1\u5E73\u9762\u4E0A\u7684\u70B9\uFF09\n  vec4 inverseP2 = u_InverseViewProjectionMatrix * p2;\n\n  inverseP1 = inverseP1 / inverseP1.w; // \u5F52\u4E00\u5316\u64CD\u4F5C\uFF08\u5F52\u4E00\u5316\u540E\u4E3A\u4E16\u754C\u5750\u6807\uFF09\n  inverseP2 = inverseP2 / inverseP2.w;\n\n  float zPos = (0.0 - inverseP1.z) / (inverseP2.z - inverseP1.z); // ??\n  vec4 position = inverseP1 + zPos * (inverseP2 - inverseP1);\n\n  vec4 b = vec4(0.5, 0.0, 1.0, 0.5);\n  float fh;\n\n  v_intensity = texture(SAMPLER_2D(u_texture), v_texCoord).r;\n  fh = toBezier(v_intensity, b).y;\n  gl_Position = u_ViewProjectionMatrixUncentered * vec4(position.xy, fh * project_pixel(50.0), 1.0);\n\n}\n',fs:"layout(std140) uniform commonUniforms {\n  mat4 u_ViewProjectionMatrixUncentered;\n  mat4 u_InverseViewProjectionMatrix;\n  float u_opacity;\n  float u_common_uniforms_padding1;\n  float u_common_uniforms_padding2;\n  float u_common_uniforms_padding3;\n};\n\nuniform sampler2D u_texture;\nuniform sampler2D u_colorTexture;\n\nin vec2 v_texCoord;\nin float v_intensity;\nout vec4 outputColor;\n\nvoid main(){\n   \n    float intensity = texture(SAMPLER_2D(u_texture), v_texCoord).r;\n    vec4 color = texture(SAMPLER_2D(u_colorTexture),vec2(intensity, 0));\n    outputColor = color;\n    // gl_FragColor.a = color.a * smoothstep(0.1,0.2,intensity)* u_opacity;\n   outputColor.a = color.a * smoothstep(0.,0.1,intensity) * u_opacity;\n}\n"}),this.heat3DModelUniformBuffer=[this.rendererService.createBuffer({data:new Float32Array(36).fill(0),isUBO:!0})];let{vs:o,fs:s,uniforms:l}=this.shaderModuleService.getModule("heatmap3dColor"),{createAttribute:u,createElements:c,createBuffer:f,createModel:d}=this.rendererService;return d({vs:o,fs:s,attributes:{a_Position:u({shaderLocation:this.attributeLocation.POSITION,buffer:f({data:a.vertices,type:p.gl.FLOAT}),size:3}),a_Uv:u({shaderLocation:this.attributeLocation.UV,buffer:f({data:a.uvs,type:p.gl.FLOAT}),size:2})},primitive:p.gl.TRIANGLES,uniformBuffers:[...this.heat3DModelUniformBuffer,...this.rendererService.uniformBuffers],uniforms:(0,w.default)({},l),depth:{enable:!0},blend:{enable:!0,func:{srcRGB:p.gl.SRC_ALPHA,srcAlpha:1,dstRGB:p.gl.ONE_MINUS_SRC_ALPHA,dstAlpha:1}},elements:c({data:a.indices,type:p.gl.UNSIGNED_INT,count:a.indices.length})});}drawIntensityMode(){var n;let{intensity:r=10,radius:i=5}=this.layer.getLayerConfig();this.uniformBuffers[0].subData({offset:0,data:[i,r]}),this.layerService.beforeRenderData(this.layer),this.layer.hooks.beforeRender.call(),null===(n=this.intensityModel)||void 0===n||n.draw({uniforms:{u_radius:i,u_intensity:r},blend:{enable:!0,func:{srcRGB:p.gl.ONE,srcAlpha:1,dstRGB:p.gl.ONE,dstAlpha:1}},stencil:{enable:!1,mask:255,func:{cmp:514,ref:1,mask:255}}}),this.layer.hooks.afterRender.call();}drawHeatMap(n){var r;let{opacity:i=1}=this.layer.getLayerConfig(),a={u_opacity:i,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer},o=[this.heatmapTexture,this.colorTexture];this.colorModelUniformBuffer[0].subData({offset:0,data:[i]}),null===(r=this.colorModel)||void 0===r||r.draw({uniforms:a,textures:o,blend:this.getBlend(),stencil:this.getStencil(n)});}draw3DHeatMap(n){var r;let{opacity:i=1}=this.layer.getLayerConfig(),a=C.create();C.invert(a,this.cameraService.getViewProjectionMatrixUncentered());let o={u_opacity:i,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer,u_ViewProjectionMatrixUncentered:this.cameraService.getViewProjectionMatrixUncentered(),u_InverseViewProjectionMatrix:[...a]};this.heat3DModelUniformBuffer[0].subData({offset:0,data:[...o.u_ViewProjectionMatrixUncentered,...o.u_InverseViewProjectionMatrix,i]});let s=[this.heatmapTexture,this.colorTexture];null===(r=this.colorModel)||void 0===r||r.draw({uniforms:o,textures:s,blend:{enable:!0,func:{srcRGB:p.gl.SRC_ALPHA,srcAlpha:1,dstRGB:p.gl.ONE_MINUS_SRC_ALPHA,dstAlpha:1}},stencil:this.getStencil(n)});}updateColorTexture(){let{createTexture2D:n}=this.rendererService;this.texture&&this.texture.destroy();let{rampColors:r}=this.layer.getLayerConfig(),i=(0,m.generateColorRamp)(r);this.colorTexture=n({data:i.data,usage:p.TextureUsage.SAMPLED,width:i.width,height:i.height,wrapS:p.gl.CLAMP_TO_EDGE,wrapT:p.gl.CLAMP_TO_EDGE,min:p.gl.NEAREST,mag:p.gl.NEAREST,flipY:!1,unorm:!0}),this.preRampColors=r;}}class R extends v.default{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,POS:9});}getUninforms(){let n=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,w.default)((0,w.default)({},n.uniformsOption),r.uniformsOption);}getCommonUniformsInfo(){let{opacity:n,coverage:r,angle:i}=this.layer.getLayerConfig(),a={u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset],u_opacity:n||1,u_coverage:r||.9,u_angle:i||0};return this.getUniformsBufferInfo(a);}initModels(){var n=this;return(0,u.default)(function*(){return n.buildModels();})();}buildModels(){var n=this;return(0,u.default)(function*(){return n.initUniformsBuffer(),[(yield n.layer.buildLayerModel({moduleName:"heatmapHexagon",vertexShader:'layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;\nlayout(location = ATTRIBUTE_LOCATION_POS) in vec3 a_Pos;\n\nlayout(std140) uniform commonUniforms {\n  vec2 u_radius;\n  float u_opacity;\n  float u_coverage;\n  float u_angle;\n};\n\nout vec4 v_color;\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nvoid main() {\n  v_color = a_Color;\n  v_color.a *= u_opacity;\n\n  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));\n  vec2 offset = vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage);\n  vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\n\n  vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));\n\n  setPickingColor(a_PickingColor);\n}\n',fragmentShader:'in vec4 v_color;\n\n#pragma include "picking"\nout vec4 outputColor;\nvoid main() {\n  outputColor = v_color;\n  outputColor = filterColor(outputColor);\n}\n',defines:n.getDefines(),triangulation:y.HeatmapGridTriangulation,depth:{enable:!1},primitive:p.gl.TRIANGLES}))];})();}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:p.AttributeType.Attribute,descriptor:{name:"a_Pos",shaderLocation:this.attributeLocation.POS,buffer:{usage:p.gl.DYNAMIC_DRAW,data:[],type:p.gl.FLOAT},size:3,update:n=>{let r=n.coordinates;return[r[0],r[1],0];}}});}}let P={heatmap:M,heatmap3d:M,grid:S,grid3d:T,hexagon:R};class k extends h.default{constructor(...n){super(...n),(0,f.default)(this,"type","HeatMapLayer");}buildModels(){var n=this;return(0,u.default)(function*(){let r=n.getModelType();n.layerModel=new P[r](n),yield n.initLayerModels();})();}prerender(){"heatmap"===this.getModelType()&&this.layerModel&&this.layerModel.prerender();}renderModels(n={}){return"heatmap"===this.getModelType()?this.layerModel&&this.layerModel.render(n):this.encodeDataLength<=0&&!this.forceRender||(this.hooks.beforeRender.call(),this.models.forEach(r=>r.draw({uniforms:this.layerModel.getUninforms(),blend:this.layerModel.getBlend(),stencil:this.layerModel.getStencil(n)})),this.hooks.afterRender.call()),this;}updateModelData(n){n.attributes&&n.elements?this.models[0].updateAttributesAndElements(n.attributes,n.elements):console.warn("data error");}getModelType(){var n;let r=this.styleAttributeService.getLayerStyleAttribute("shape"),{shape3d:i}=this.getLayerConfig(),a=this.getSource().data.type,o=(null==r||null===(n=r.scale)||void 0===n?void 0:n.field)||"heatmap";return"heatmap"===o||"heatmap3d"===o?"heatmap":"hexagon"===a?(null==i?void 0:i.indexOf(o))===-1?"hexagon":"grid3d":"grid"===a?(null==i?void 0:i.indexOf(o))===-1?"grid":"grid3d":"heatmap";}getLegend(n){if("heatmap"!==this.getModelType())return super.getLegend(n);{if("color"!==n)return{type:void 0,field:void 0,items:[]};let r=this.getLayerConfig().rampColors;return(0,x.rampColor2legend)(r,n);}}}var I=i("f653f760"),L=a._(I),N=i("6f3d386c"),D=a._(N),F=i("1c0d7fd1"),B=a._(F),j=i("04fd6645"),z=a._(j),U=i("d105ec89"),V=a._(U);class G{constructor({rendererService:n,layerService:r,parent:i}){(0,f.default)(this,"tileResource",new Map),(0,f.default)(this,"rendererService",void 0),(0,f.default)(this,"layerService",void 0),(0,f.default)(this,"parent",void 0),(0,f.default)(this,"layerTiles",[]),this.rendererService=n,this.layerService=r,this.parent=i;}get tiles(){return this.layerTiles;}hasTile(n){return this.layerTiles.some(r=>r.key===n);}addTile(n){this.layerTiles.push(n);}getTile(n){return this.layerTiles.find(r=>r.key===n);}getVisibleTileBylngLat(n){return this.layerTiles.find(r=>r.isLoaded&&r.visible&&r.lnglatInBounds(n));}removeTile(n){let r=this.layerTiles.findIndex(r=>r.key===n),i=this.layerTiles.splice(r,1);i[0]&&i[0].destroy();}updateTileVisible(n){let r=this.getTile(n.key);if(n.isVisible){if(n.parent){let i=this.isChildrenLoaded(n.parent);null==r||r.updateVisible(i);}else null==r||r.updateVisible(!0);}else if(n.parent){let i=this.isChildrenLoaded(n.parent);null==r||r.updateVisible(!i);}else null==r||r.updateVisible(!1);}isParentLoaded(n){let r=n.parent;if(!r)return!0;let i=this.getTile(null==r?void 0:r.key);return null!=i&&!!i.isLoaded;}isChildrenLoaded(n){let r=null==n?void 0:n.children;return 0===r.length||r.every(n=>{let r=this.getTile(null==n?void 0:n.key);return!r||(null==r?void 0:r.isLoaded)===!0;});}render(){var n=this;return(0,u.default)(function*(){var r;let i=n.getRenderLayers().map((r=(0,u.default)(function*(r){yield n.layerService.renderTileLayer(r);}),function(n){return r.apply(this,arguments);}));yield Promise.all(i);})();}getRenderLayers(){let n=this.layerTiles.filter(n=>n.visible&&n.isLoaded),r=[];return n.map(n=>r.push(...n.getLayers())),r;}getLayers(){let n=this.layerTiles.filter(n=>n.isLoaded),r=[];return n.map(n=>r.push(...n.getLayers())),r;}getTiles(){return this.layerTiles;}destroy(){this.layerTiles.forEach(n=>n.destroy()),this.tileResource.clear();}}var H=i("64787828"),W=o._(H),X=i("de5956fa"),q=a._(X),$=i("7f3dc882");class Y{getCombineFeature(n){let r=null,i=n[0];return n.map(n=>{let i=W.polygon(n.coordinates);if(null===r)r=i;else{var a,o,s,l,u;a=r,void 0===o&&(o={}),s=(0,$.getGeom)(a),l=(0,$.getGeom)(i),r=0===(u=q.default.union(s.coordinates,l.coordinates)).length?null:1===u.length?(0,W.polygon)(u[0],o.properties):(0,W.multiPolygon)(u,o.properties);}}),i&&(r.properties=(0,w.default)({},i)),r;}}let Z="select",K="active";class Q{constructor({layerService:n,tileLayerService:r,parent:i}){(0,f.default)(this,"layerService",void 0),(0,f.default)(this,"tileLayerService",void 0),(0,f.default)(this,"tileSourceService",void 0),(0,f.default)(this,"parent",void 0),(0,f.default)(this,"tilePickID",new Map),this.layerService=n,this.tileLayerService=r,this.parent=i,this.tileSourceService=new Y;}pickRender(n){let r=this.tileLayerService.getVisibleTileBylngLat(n.lngLat);if(r){let i=r.getMainLayer();null==i||i.layerPickService.pickRender(n);}}pick(n,r){var i=this;return(0,u.default)(function*(){let a=i.parent.getContainer().pickingService;if("RasterLayer"===n.type){let n=i.tileLayerService.getVisibleTileBylngLat(r.lngLat);if(n&&void 0!==n.getMainLayer()){let a=n.getMainLayer();return a.layerPickService.pickRasterLayer(a,r,i.parent);}return!1;}return i.pickRender(r),a.pickFromPickingFBO(n,r);})();}selectFeature(n){let[r,i,a]=n,o=this.color2PickId(r,i,a);this.tilePickID.set(Z,o),this.updateHighLight(r,i,a,Z);}highlightPickedFeature(n){let[r,i,a]=n,o=this.color2PickId(r,i,a);this.tilePickID.set(K,o),this.updateHighLight(r,i,a,K);}updateHighLight(n,r,i,a){this.tileLayerService.tiles.map(o=>{let s=o.getMainLayer();switch(a){case Z:null==s||s.hooks.beforeSelect.call([n,r,i]);break;case K:null==s||s.hooks.beforeHighlight.call([n,r,i]);}});}setPickState(){let n=this.tilePickID.get(Z),r=this.tilePickID.get(K);if(n){let[r,i,a]=this.pickId2Color(n);this.updateHighLight(r,i,a,Z);return;}if(r){let[n,i,a]=this.pickId2Color(r);this.updateHighLight(n,i,a,K);return;}}color2PickId(n,r,i){return(0,m.decodePickingColor)(new Uint8Array([n,r,i]));}pickId2Color(n){return(0,m.encodePickingColor)(n);}getFeatureById(n){let r=this.tileLayerService.getTiles().filter(n=>n.visible),i=[];return r.forEach(r=>{i.push(...r.getFeatureById(n));}),i;}pickRasterLayer(){return!1;}}var J=i("23b4cb91");let ee=["shape","color","size","style","animate","filter","rotate","scale","setBlend","setSelect","setActive","disableMask","enableMask","addMask","removeMask"],{debounce:et}=m.lodashUtil;class en{constructor(n){(0,f.default)(this,"parent",void 0),(0,f.default)(this,"tileLayerService",void 0),(0,f.default)(this,"mapService",void 0),(0,f.default)(this,"layerService",void 0),(0,f.default)(this,"rendererService",void 0),(0,f.default)(this,"pickingService",void 0),(0,f.default)(this,"tilePickService",void 0),(0,f.default)(this,"tilesetManager",void 0),(0,f.default)(this,"initedTileset",!1),(0,f.default)(this,"lastViewStates",void 0),(0,f.default)(this,"mapchange",()=>{var n;if(!1===this.parent.isVisible())return;let{latLonBounds:r,zoom:i}=this.getCurrentView();this.lastViewStates&&this.lastViewStates.zoom===i&&this.lastViewStates.latLonBounds.toString()===r.toString()||(this.lastViewStates={zoom:i,latLonBounds:r},null===(n=this.tilesetManager)||void 0===n||n.throttleUpdate(i,r));}),(0,f.default)(this,"viewchange",et(this.mapchange,24)),this.parent=n;let r=this.parent.getContainer();this.rendererService=r.rendererService,this.layerService=r.layerService,this.mapService=r.mapService,this.pickingService=r.pickingService,this.tileLayerService=new G({rendererService:this.rendererService,layerService:this.layerService,parent:n}),this.tilePickService=new Q({tileLayerService:this.tileLayerService,layerService:this.layerService,parent:n}),this.parent.setLayerPickService(this.tilePickService),this.proxy(n),this.initTileSetManager();}initTileSetManager(){var n;let r=this.parent.getSource();if(this.tilesetManager=r.tileset,this.initedTileset||(this.bindTilesetEvent(),this.initedTileset=!0),!1===this.parent.isVisible())return;let{latLonBounds:i,zoom:a}=this.getCurrentView();null===(n=this.tilesetManager)||void 0===n||n.update(a,i);}getCurrentView(){let n=this.mapService.getBounds();return{latLonBounds:[n[0][0],n[0][1],n[1][0],n[1][1]],zoom:this.mapService.getZoom()};}bindTilesetEvent(){this.tilesetManager.on("tile-loaded",n=>{}),this.tilesetManager.on("tile-unload",n=>{this.tileUnLoad(n);}),this.tilesetManager.on("tile-error",(n,r)=>{this.tileError(n);}),this.tilesetManager.on("tile-update",()=>{this.tileUpdate();}),this.mapService.on("zoomend",this.mapchange),this.mapService.on("moveend",this.viewchange);}render(){this.tileLayerService.render();}getLayers(){return this.tileLayerService.getLayers();}getTiles(){return this.tileLayerService.getTiles();}getTile(n){return this.tileLayerService.getTile(n);}tileLoaded(n){}tileError(n){console.warn("error:",n);}destroy(){var n;this.mapService.off("zoomend",this.mapchange),this.mapService.off("moveend",this.viewchange),null===(n=this.tilesetManager)||void 0===n||n.destroy(),this.tileLayerService.destroy();}reload(){var n;this.tilesetManager.clear();let{latLonBounds:r,zoom:i}=this.getCurrentView();null===(n=this.tilesetManager)||void 0===n||n.update(i,r);}tileUnLoad(n){this.tileLayerService.removeTile(n.key);}tileUpdate(){var n=this;return(0,u.default)(function*(){var r;if(!n.tilesetManager)return;let i=n.parent.getMinZoom(),a=n.parent.getMaxZoom(),o=n.tilesetManager.tiles.filter(n=>n.isLoaded).filter(n=>n.isVisibleChange).filter(n=>n.data).filter(n=>n.z>=i&&n.z<a);yield Promise.all(o.map((r=(0,u.default)(function*(r){if(n.tileLayerService.hasTile(r.key))n.tileLayerService.updateTileVisible(r),n.tilePickService.setPickState(),n.layerService.reRender();else{let i=new((0,J.getTileFactory)(n.parent))(r,n.parent);yield i.initTileLayer(),n.tilePickService.setPickState(),0!==i.getLayers().length&&(n.tileLayerService.addTile(i),n.tileLayerService.updateTileVisible(r),n.layerService.reRender());}}),function(n){return r.apply(this,arguments);}))),n.tilesetManager.isLoaded&&n.parent.emit("tiles-loaded",n.tilesetManager.currentTiles);})();}setPickState(n){}pickRender(n){this.tilePickService.pickRender(n);}selectFeature(n){this.tilePickService.selectFeature(n);}highlightPickedFeature(n){this.tilePickService.highlightPickedFeature(n);}proxy(n){ee.forEach(r=>{let i=n[r].bind(n);n[r]=(...a)=>(i(...a),this.getLayers().map(n=>{n[r](...a);}),"style"===r&&this.getTiles().forEach(n=>n.styleUpdate(...a)),n);});}}var er=i("7d31d91a"),ei=a._(er);s._(i("07cf43fc"),r);},b591bdf1:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{Tooltip:function(){return er;},findSeriesElement:function(){return ee;},findSingleElement:function(){return J;},maybeValue:function(){return K;},seriesTooltip:function(){return et;},tooltip:function(){return en;}});var a=i("777fffbe"),o=i("5e195043"),s=i("944abdfb"),l=a._(s),u=i("1f4e7f4b"),c=a._(u),f=i("867408b8"),d=a._(f),h=i("9841474e"),p=a._(h),m=i("7b424aab"),g=a._(m),v=i("d7948920"),y=a._(v),_=i("601eebff"),b=a._(_),x=i("d62e1c54"),E=a._(x),w=i("3862611d");function S(n){var r=document.createElement("div");r.innerHTML=n;var i=r.childNodes[0];return i&&r.contains(i)&&r.removeChild(i),i;}var T=i("47a6bde3"),A=i("920dd2bf"),C=i("a63b8d99"),O=function(n,r){if(null==r){n.innerHTML="";return;}n.replaceChildren?Array.isArray(r)?n.replaceChildren.apply(n,(0,w.__spreadArray)([],(0,w.__read)(r),!1)):n.replaceChildren(r):(n.innerHTML="",Array.isArray(r)?r.forEach(function(r){return n.appendChild(r);}):n.appendChild(r));};function M(n){return void 0===n&&(n=""),{CONTAINER:"".concat(n,"tooltip"),TITLE:"".concat(n,"tooltip-title"),LIST:"".concat(n,"tooltip-list"),LIST_ITEM:"".concat(n,"tooltip-list-item"),NAME:"".concat(n,"tooltip-list-item-name"),MARKER:"".concat(n,"tooltip-list-item-marker"),NAME_LABEL:"".concat(n,"tooltip-list-item-name-label"),VALUE:"".concat(n,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(n,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(n,"tooltip-crosshair-y")};}var R={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"},P=function(n){function r(r){var i,a,o,s,l,u=this,c=null===(l=null===(s=r.style)||void 0===s?void 0:s.template)||void 0===l?void 0:l.prefixCls,f=M(c);return(u=n.call(this,r,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(f.CONTAINER,'"></div>'),title:'<div class="'.concat(f.TITLE,'"></div>'),item:'<li class="'.concat(f.LIST_ITEM,'" data-index={index}>\n        <span class="').concat(f.NAME,'">\n          <span class="').concat(f.MARKER,'" style="background:{color}"></span>\n          <span class="').concat(f.NAME_LABEL,'" title="{name}">{name}</span>\n        </span>\n        <span class="').concat(f.VALUE,'" title="{value}">{value}</span>\n      </li>')},style:(void 0===(i=c)&&(i=""),o=M(i),(a={})[".".concat(o.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},a[".".concat(o.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},a[".".concat(o.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},a[".".concat(o.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},a[".".concat(o.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},a[".".concat(o.NAME)]={display:"flex","align-items":"center","max-width":"216px"},a[".".concat(o.NAME_LABEL)]=(0,w.__assign)({flex:1},R),a[".".concat(o.VALUE)]=(0,w.__assign)({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},R),a[".".concat(o.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},a[".".concat(o.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},a)})||this).timestamp=-1,u.prevCustomContentKey=u.attributes.contentKey,u.initShape(),u.render(u.attributes,u),u;}return(0,w.__extends)(r,n),Object.defineProperty(r.prototype,"HTMLTooltipElement",{get:function(){return this.element;},enumerable:!1,configurable:!0}),r.prototype.getContainer=function(){return this.element;},Object.defineProperty(r.prototype,"elementSize",{get:function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight};},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"HTMLTooltipItemsElements",{get:function(){var n=this.attributes,r=n.data,i=n.template;return r.map(function(n,r){var a,o=n.name,s=n.color,l=n.index,u=(0,w.__rest)(n,["name","color","index"]),c=(0,w.__assign)({name:void 0===o?"":o,color:void 0===s?"black":s,index:null!=l?l:r},u);return S((a=i.item)&&c?a.replace(/\\?\{([^{}]+)\}/g,function(n,r){return"\\"===n.charAt(0)?n.slice(1):void 0===c[r]?"":c[r];}):a);});},enumerable:!1,configurable:!0}),r.prototype.render=function(n,r){this.renderHTMLTooltipElement(),this.updatePosition();},r.prototype.destroy=function(){var r;null===(r=this.element)||void 0===r||r.remove(),n.prototype.destroy.call(this);},r.prototype.show=function(n,r){var i=this;if(void 0!==n&&void 0!==r){var a="hidden"===this.element.style.visibility,o=function(){i.attributes.x=null!=n?n:i.attributes.x,i.attributes.y=null!=r?r:i.attributes.y,i.updatePosition();};a?this.closeTransition(o):o();}this.element.style.visibility="visible";},r.prototype.hide=function(n,r){void 0===n&&(n=0),void 0===r&&(r=0),this.attributes.enterable&&this.isCursorEntered(n,r)||(this.element.style.visibility="hidden");},r.prototype.initShape=function(){var n=this.attributes.template;this.element=S(n.container),this.id&&this.element.setAttribute("id",this.id);},r.prototype.renderCustomContent=function(){if(void 0===this.prevCustomContentKey||this.prevCustomContentKey!==this.attributes.contentKey){this.prevCustomContentKey=this.attributes.contentKey;var n=this.attributes.content;n&&("string"==typeof n?this.element.innerHTML=n:O(this.element,n));}},r.prototype.renderHTMLTooltipElement=function(){var n,r,i=this.attributes,a=i.template,o=i.title,s=i.enterable,l=i.style,u=i.content,c=M(a.prefixCls),f=this.element;if(this.element.style.pointerEvents=s?"auto":"none",u)this.renderCustomContent();else{o?(f.innerHTML=a.title,f.getElementsByClassName(c.TITLE)[0].innerHTML=o):null===(r=null===(n=f.getElementsByClassName(c.TITLE))||void 0===n?void 0:n[0])||void 0===r||r.remove();var d=this.HTMLTooltipItemsElements,h=document.createElement("ul");h.className=c.LIST,O(h,d);var p=this.element.querySelector(".".concat(c.LIST));p?p.replaceWith(h):f.appendChild(h);}(0,C.applyStyleSheet)(f,l);},r.prototype.getRelativeOffsetFromCursor=function(n){var r=this.attributes,i=r.position,a=r.offset,o=(n||i).split("-"),s={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},l=this.elementSize,u=l.width,c=l.height,f=[-u/2,-c/2];return o.forEach(function(n){var r=(0,w.__read)(f,2),i=r[0],o=r[1],l=(0,w.__read)(s[n],2),d=l[0],h=l[1];f=[i+(u/2+a[0])*d,o+(c/2+a[1])*h];}),f;},r.prototype.setOffsetPosition=function(n){var r=(0,w.__read)(n,2),i=r[0],a=r[1],o=this.attributes,s=o.x,l=o.y,u=o.container,c=u.x,f=u.y;this.element.style.left="".concat(+(void 0===s?0:s)+c+i,"px"),this.element.style.top="".concat(+(void 0===l?0:l)+f+a,"px");},r.prototype.updatePosition=function(){var n=this.attributes.showDelay,r=Date.now();this.timestamp>0&&r-this.timestamp<(void 0===n?60:n)||(this.timestamp=r,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())));},r.prototype.autoPosition=function(n){var r=(0,w.__read)(n,2),i=r[0],a=r[1],o=this.attributes,s=o.x,l=o.y,u=o.bounding,c=o.position;if(!u)return[i,a];var f=this.element,d=f.offsetWidth,h=f.offsetHeight,p=(0,w.__read)([+s+i,+l+a],2),m=p[0],g=p[1],v={left:"right",right:"left",top:"bottom",bottom:"top"},y=u.x,_=u.y,b={left:m<y,right:m+d>y+u.width,top:g<_,bottom:g+h>_+u.height},x=[];c.split("-").forEach(function(n){b[n]?x.push(v[n]):x.push(n);});var E=x.join("-");return this.getRelativeOffsetFromCursor(E);},r.prototype.isCursorEntered=function(n,r){if(this.element){var i=this.element.getBoundingClientRect(),a=i.x,o=i.y,s=i.width,l=i.height;return new A.BBox(a,o,s,l).isPointIn(n,r);}return!1;},r.prototype.closeTransition=function(n){var r=this,i=this.element.style.transition;this.element.style.transition="none",n(),setTimeout(function(){r.element.style.transition=i;},10);},r.tag="tooltip",r;}(T.Component),k=i("f5373dff"),I=i("42fb15d0"),L=i("d70a5c58"),N=i("6048efd3"),D=i("7d5002fc"),F=i("87c560a4"),B=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};function j(n,r){var i;if(r)return"string"==typeof r?document.querySelector(r):r;let a=null===(i=n.ownerDocument)||void 0===i?void 0:i.defaultView;if(a)return a.getContextService().getDomElement().parentElement;}function z({root:n,data:r,x:i,y:a,render:o,event:s,single:l,position:u="right-bottom",enterable:c=!1,css:f,mount:d,bounding:h,offset:p}){let m=j(n,d),g=j(n),v=l?g:n,_=h||function(n){let{min:[r,i],max:[a,o]}=n.getRenderBounds();return{x:r,y:i,width:a-r,height:o-i};}(n),b=function(n,r){let i=n.getBoundingClientRect(),a=r.getBoundingClientRect();return{x:i.x-a.x,y:i.y-a.y};}(g,m),{tooltipElement:x=function(n,r,i,a,o,s,l,u={},c=[10,10]){let f=new P({className:"tooltip",style:{x:r,y:i,container:l,data:[],bounding:s,position:a,enterable:o,title:"",offset:c,template:{prefixCls:"g2-"},style:(0,y.default)({".g2-tooltip":{},".g2-tooltip-title":{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},u)}});return n.appendChild(f.HTMLTooltipElement),f;}(m,i,a,u,c,_,b,f,p)}=v,{items:E,title:w=""}=r;x.update(Object.assign({x:i,y:a,data:E,title:w,position:u,enterable:c,container:b},void 0!==o&&{content:o(s,{items:E,title:w})})),v.tooltipElement=x;}function U({root:n,single:r,emitter:i,nativeEvent:a=!0,event:o=null}){a&&i.emit("tooltip:hide",{nativeEvent:a});let s=j(n),{tooltipElement:l}=r?s:n;l&&l.hide(null==o?void 0:o.clientX,null==o?void 0:o.clientY),q(n),$(n),Y(n);}function V({root:n,single:r}){let i=j(n),a=r?i:n;if(!a)return;let{tooltipElement:o}=a;o&&(o.destroy(),a.tooltipElement=void 0),q(n),$(n),Y(n);}function G(n){let{value:r}=n;return Object.assign(Object.assign({},n),{value:void 0===r?"undefined":r});}function H(n){let r=n.getAttribute("fill"),i=n.getAttribute("stroke"),{__data__:a}=n,{color:o=r&&"transparent"!==r?r:i}=a;return o;}function W(n,r=n=>n){return Array.from(new Map(n.map(n=>[r(n),n])).values());}function X(n,r,i,a=n.map(n=>n.__data__),o={}){let s=n=>n instanceof Date?+n:n,l=W(a.map(n=>n.title),s).filter(k.defined),u=a.flatMap((a,s)=>{let l=n[s],{items:u=[],title:c}=a,f=u.filter(k.defined),d=void 0!==i?i:u.length<=1;return f.map(n=>{var{color:i=H(l)||o.color,name:s}=n,u=B(n,["color","name"]);let f=(0,k.groupNameOf)(r,a),h=!d||D.CALLBACK_ITEM_SYMBOL in u?s||f:f||s;return Object.assign(Object.assign({},u),{color:i,name:h||c});});}).map(G);return Object.assign(Object.assign({},l.length>0&&{title:l.join(",")}),{items:W(u,n=>`(${s(n.name)}, ${s(n.value)}, ${s(n.color)})`)});}function q(n){n.ruleY&&(n.ruleY.remove(),n.ruleY=void 0);}function $(n){n.ruleX&&(n.ruleX.remove(),n.ruleX=void 0);}function Y(n){n.markers&&(n.markers.forEach(n=>n.remove()),n.markers=[]);}function Z(n,r){return Array.from(n.values()).some(n=>{var i;return null===(i=n.interaction)||void 0===i?void 0:i[r];});}function K(n,r){return void 0===n?r:n;}function Q(n){let{title:r,items:i}=n;return 0===i.length&&void 0===r;}function J({root:n,event:r,elements:i,coordinate:a,scale:o,shared:s}){var l,u;let c=i.every(n=>"interval"===n.markType)&&!(0,I.isPolar)(a),f=o.x,d=o.series,h=null!==(u=null===(l=null==f?void 0:f.getBandWidth)||void 0===l?void 0:l.call(f))&&void 0!==u?u:0,m=d?n=>{let r=Math.round(1/d.valueBandWidth);return n.__data__.x+n.__data__.series*h+h/(2*r);}:n=>n.__data__.x+h/2;c&&i.sort((n,r)=>m(n)-m(r));let g=n=>{let{target:r}=n;return(0,F.maybeRoot)(r,n=>!!n.classList&&n.classList.includes("element"));};return(c?r=>{let o=(0,F.mousePosition)(n,r);if(!o)return;let[l]=a.invert(o),u=(0,(0,p.default)(m).center)(i,l),c=i[u];return!s&&i.find(n=>n!==c&&m(n)===m(c))?g(r):c;}:g)(r);}function ee({root:n,event:r,elements:i,coordinate:a,scale:o,startX:s,startY:u}){let f=(0,I.isTranspose)(a),d=[],h=[];for(let n of i){let{__data__:r}=n,{seriesX:i,title:a,items:o}=r;i?d.push(n):(a||o)&&h.push(n);}let m=h.length&&h.every(n=>"interval"===n.markType)&&!(0,I.isPolar)(a),v=n=>n.__data__.x,y=!!o.x.getBandWidth&&h.length>0;d.sort((n,r)=>{let i=f?0:1,a=n=>n.getBounds().min[i];return f?a(r)-a(n):a(n)-a(r);});let _=n=>{let r=f?1:0,{min:i,max:a}=n.getLocalBounds();return(0,l.default)([i[r],a[r]]);};m?i.sort((n,r)=>v(n)-v(r)):h.sort((n,r)=>{let[i,a]=_(n),[o,s]=_(r),l=(i+a)/2,u=(o+s)/2;return f?u-l:l-u;});let x=new Map(d.map(n=>{let{__data__:r}=n,{seriesX:i}=r,a=i.map((n,r)=>r);return[n,[(0,l.default)(a,n=>i[+n]),i]];})),{x:E}=o,w=(null==E?void 0:E.getBandWidth)?E.getBandWidth()/2:0,S=n=>{let[r]=a.invert(n);return r-w;},T=(n,r,i,a)=>{let{_x:o}=n,s=void 0!==o?E.map(o):S(r),u=a.filter(k.defined),[c,f]=(0,l.default)([u[0],u[u.length-1]]);if(!y&&(s<c||s>f)&&c!==f)return null;let d=(0,(0,p.default)(n=>a[+n]).center)(i,s);return i[d];},A=m?(n,r)=>{let i=(0,(0,p.default)(v).center)(r,S(n)),a=r[i];return(0,c.default)(r,v).get(v(a));}:(n,r)=>{let i=n[f?1:0],a=r.filter(n=>{let[r,a]=_(n);return i>=r&&i<=a;});if(!y||a.length>0)return a;let o=(0,(0,p.default)(n=>{let[r,i]=_(n);return(r+i)/2;}).center)(r,i);return[r[o]].filter(k.defined);},C=(n,r)=>{let{__data__:i}=n;return Object.fromEntries(Object.entries(i).filter(([n])=>n.startsWith("series")&&"series"!==n).map(([n,i])=>{let a=i[r];return[(0,b.default)(n.replace("series","")),a];}));},O=(0,F.mousePosition)(n,r);if(!O)return;let M=[O[0]-s,O[1]-u];if(!M)return;let R=A(M,h),P=[],L=[];for(let n of d){let[i,o]=x.get(n),s=T(r,M,i,o);if(null!==s){P.push(n);let r=C(n,s),{x:i,y:o}=r,l=a.map([(i||0)+w,o||0]);L.push([Object.assign(Object.assign({},r),{element:n}),l]);}}let N=Array.from(new Set(L.map(n=>n[0].x))),D=N[(0,g.default)(N,n=>Math.abs(n-S(M)))],B=L.filter(n=>n[0].x===D),j=[...B.map(n=>n[0]),...R.map(n=>n.__data__)];return{selectedElements:[...P,...R],selectedData:j,filteredSeriesData:B,abstractX:S};}function et(n,r){var{elements:i,sort:a,filter:s,scale:l,coordinate:u,crosshairs:c,crosshairsX:f,crosshairsY:h,render:p,groupName:m,emitter:v,wait:_=50,leading:b=!0,trailing:x=!1,startX:w=0,startY:S=0,body:T=!0,single:A=!0,position:C,enterable:O,mount:M,bounding:R,theme:P,offset:D,disableNative:j=!1,marker:G=!0,preserve:H=!1,style:W={},css:q={}}=r,$=B(r,["elements","sort","filter","scale","coordinate","crosshairs","crosshairsX","crosshairsY","render","groupName","emitter","wait","leading","trailing","startX","startY","body","single","position","enterable","mount","bounding","theme","offset","disableNative","marker","preserve","style","css"]);let Y=i(n),Z=(0,y.default)(W,$),K=(0,I.isPolar)(u),J=(0,I.isTranspose)(u),{innerWidth:et,innerHeight:en,width:er,height:ei,insetLeft:ea,insetTop:eo}=u.getOptions(),es=(0,E.default)(r=>{var i;let y=(0,F.mousePosition)(n,r);if(!y)return;let _=(0,F.bboxOf)(n),b=_.min[0],x=_.min[1],{selectedElements:E,selectedData:I,filteredSeriesData:j,abstractX:U}=ee({root:n,event:r,elements:Y,coordinate:u,scale:l,startX:w,startY:S}),V=X(E,l,m,I,P);if(a&&V.items.sort((n,r)=>a(n)-a(r)),s&&(V.items=V.items.filter(s)),0===E.length||Q(V)){el(r);return;}if(T&&z({root:n,data:V,x:y[0]+b,y:y[1]+x,render:p,event:r,single:A,position:C,enterable:O,mount:M,bounding:R,css:q,offset:D}),c||f||h){let r=(0,k.subObject)(Z,"crosshairs"),i=Object.assign(Object.assign({},r),(0,k.subObject)(Z,"crosshairsX")),a=Object.assign(Object.assign({},r),(0,k.subObject)(Z,"crosshairsY")),s=j.map(n=>n[1]);f&&function(n,r,i,a){var{plotWidth:s,plotHeight:l,mainWidth:u,mainHeight:c,startX:f,startY:d,transposed:h,polar:p,insetLeft:m,insetTop:v}=a;let y=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},B(a,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"])),_=((n,r)=>{if(1===r.length)return r[0];let i=r.map(r=>(0,L.dist)(r,n));return r[(0,g.default)(i,n=>n)];})(i,r);if(p){let[r,i,a]=(()=>{let n=f+m+u/2,r=d+v+c/2,i=(0,L.dist)([n,r],_);return[n,r,i];})(),s=n.ruleX||((r,i,a)=>{let s=new o.Circle({style:Object.assign({cx:r,cy:i,r:a},y)});return n.appendChild(s),s;})(r,i,a);s.style.cx=r,s.style.cy=i,s.style.r=a,n.ruleX=s;}else{let[r,i,a,u]=h?[f+_[0],f+_[0],d,d+l]:[f,f+s,_[1]+d,_[1]+d],c=n.ruleX||((r,i,a,s)=>{let l=new o.Line({style:Object.assign({x1:r,x2:i,y1:a,y2:s},y)});return n.appendChild(l),l;})(r,i,a,u);c.style.x1=r,c.style.x2=i,c.style.y1=a,c.style.y2=u,n.ruleX=c;}}(n,s,y,Object.assign(Object.assign({},i),{plotWidth:et,plotHeight:en,mainWidth:er,mainHeight:ei,insetLeft:ea,insetTop:eo,startX:w,startY:S,transposed:J,polar:K})),h&&function(n,r,i){var{plotWidth:a,plotHeight:s,mainWidth:l,mainHeight:u,startX:c,startY:f,transposed:h,polar:p,insetLeft:m,insetTop:g}=i;let v=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},B(i,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"])),y=r.map(n=>n[1]),_=r.map(n=>n[0]),b=(0,d.default)(y),x=(0,d.default)(_),[E,w,S,T]=(()=>{if(p){let n=Math.min(l,u)/2,r=c+m+l/2,i=f+g+u/2,a=(0,L.angle)((0,L.sub)([x,b],[r,i])),o=r+n*Math.cos(a),s=i+n*Math.sin(a);return[r,o,i,s];}return h?[c,c+a,b+f,b+f]:[x+c,x+c,f,f+s];})();if(_.length>0){let r=n.ruleY||(()=>{let r=new o.Line({style:Object.assign({x1:E,x2:w,y1:S,y2:T},v)});return n.appendChild(r),r;})();r.style.x1=E,r.style.x2=w,r.style.y1=S,r.style.y2=T,n.ruleY=r;}}(n,s,Object.assign(Object.assign({},a),{plotWidth:et,plotHeight:en,mainWidth:er,mainHeight:ei,insetLeft:ea,insetTop:eo,startX:w,startY:S,transposed:J,polar:K}));}G&&function(n,{data:r,style:i,theme:a}){n.markers&&n.markers.forEach(n=>n.remove());let{type:s=""}=i,l=r.filter(n=>{let[{x:r,y:i}]=n;return(0,k.defined)(r)&&(0,k.defined)(i);}).map(n=>{let[{color:r,element:l},u]=n,c=r||l.style.fill||l.style.stroke||a.color,f="hollow"===s?"transparent":c,d="hollow"===s?c:"#fff";return new o.Circle({className:"g2-tooltip-marker",style:Object.assign({cx:u[0],cy:u[1],fill:f,r:4,stroke:d,lineWidth:2,pointerEvents:"none"},i)});});for(let r of l)n.appendChild(r);n.markers=l;}(n,{data:j,style:(0,k.subObject)(Z,"marker"),theme:P});let H=null===(i=j[0])||void 0===i?void 0:i[0].x,W=null!=H?H:U(focus);v.emit("tooltip:show",Object.assign(Object.assign({},r),{nativeEvent:!0,data:Object.assign(Object.assign({},V),{data:{x:(0,N.invert)(l.x,W,!0)}})}));},_,{leading:b,trailing:x}),el=r=>{U({root:n,single:A,emitter:v,event:r});},eu=()=>{V({root:n,single:A});},ec=r=>{var i,{nativeEvent:a,data:o,offsetX:s,offsetY:c}=r,f=B(r,["nativeEvent","data","offsetX","offsetY"]);if(a)return;let d=null===(i=null==o?void 0:o.data)||void 0===i?void 0:i.x,h=l.x.map(d),[p,m]=u.map([h,.5]),g=n.getRenderBounds(),v=g.min[0],y=g.min[1];es(Object.assign(Object.assign({},f),{offsetX:void 0!==s?s:v+p,offsetY:void 0!==c?c:y+m,_x:d}));},ef=()=>{U({root:n,single:A,emitter:v,nativeEvent:!1});},ed=()=>{em(),eu();},eh=()=>{ep();},ep=()=>{j||(n.addEventListener("pointerdown",es),n.addEventListener("pointerenter",es),n.addEventListener("pointermove",es),n.addEventListener("pointerleave",r=>{(0,F.mousePosition)(n,r)||el(r);}),n.addEventListener("pointerup",el));},em=()=>{j||(n.removeEventListener("pointerdown",es),n.removeEventListener("pointerenter",es),n.removeEventListener("pointermove",es),n.removeEventListener("pointerleave",el),n.removeEventListener("pointerup",el));};return ep(),v.on("tooltip:show",ec),v.on("tooltip:hide",ef),v.on("tooltip:disable",ed),v.on("tooltip:enable",eh),()=>{em(),v.off("tooltip:show",ec),v.off("tooltip:hide",ef),v.off("tooltip:disable",ed),v.off("tooltip:enable",eh),H?U({root:n,single:A,emitter:v,nativeEvent:!1}):eu();};}function en(n,{elements:r,coordinate:i,scale:a,render:o,groupName:s,sort:l,filter:u,emitter:f,wait:d=50,leading:h=!0,trailing:p=!1,groupKey:m=n=>n,single:g=!0,position:v,enterable:y,datum:_,view:b,mount:x,bounding:w,theme:S,offset:T,shared:A=!1,body:C=!0,disableNative:O=!1,preserve:M=!1,css:R={}}){let P=r(n),I=(0,c.default)(P,m),L=(0,E.default)(r=>{let c=J({root:n,event:r,elements:P,coordinate:i,scale:a,shared:A});if(!c){U({root:n,single:g,emitter:f,event:r});return;}let d=m(c),h=I.get(d);if(!h)return;let p=1!==h.length||A?X(h,a,s,void 0,S):function(n){let{__data__:r}=n,{title:i,items:a=[]}=r,o=a.filter(k.defined).map(r=>{var{color:i=H(n)}=r;return Object.assign(Object.assign({},B(r,["color"])),{color:i});}).map(G);return Object.assign(Object.assign({},i&&{title:i}),{items:o});}(h[0]);if(l&&p.items.sort((n,r)=>l(n)-l(r)),u&&(p.items=p.items.filter(u)),Q(p)){U({root:n,single:g,emitter:f,event:r});return;}let{offsetX:_,offsetY:E}=r;C&&z({root:n,data:p,x:_,y:E,render:o,event:r,single:g,position:v,enterable:y,mount:x,bounding:w,css:R,offset:T}),f.emit("tooltip:show",Object.assign(Object.assign({},r),{nativeEvent:!0,data:Object.assign(Object.assign({},p),{data:(0,k.dataOf)(c,b)})}));},d,{leading:h,trailing:p}),N=r=>{U({root:n,single:g,emitter:f,event:r});},D=()=>{O||(n.addEventListener("pointerdown",L),n.addEventListener("pointermove",L),n.addEventListener("pointerleave",N),n.addEventListener("pointerup",N));},j=()=>{O||(n.removeEventListener("pointerdown",L),n.removeEventListener("pointermove",L),n.removeEventListener("pointerleave",N),n.removeEventListener("pointerup",N));},W=({nativeEvent:r,offsetX:i,offsetY:a,data:o})=>{if(r)return;let{data:s}=o,l=(0,F.selectElementByData)(P,s,_);if(!l)return;let{x:u,y:c,width:f,height:d}=l.getBBox(),h=n.getBBox();L({target:l,offsetX:void 0!==i?i+h.x:u+f/2,offsetY:void 0!==a?a+h.y:c+d/2});},q=({nativeEvent:r}={})=>{r||U({root:n,single:g,emitter:f,nativeEvent:!1});};return f.on("tooltip:show",W),f.on("tooltip:hide",q),f.on("tooltip:enable",()=>{D();}),f.on("tooltip:disable",()=>{j(),V({root:n,single:g});}),D(),()=>{j(),f.off("tooltip:show",W),f.off("tooltip:hide",q),M?U({root:n,single:g,emitter:f,nativeEvent:!1}):V({root:n,single:g});};}function er(n){let{shared:r,crosshairs:i,crosshairsX:a,crosshairsY:o,series:s,name:l,item:u=()=>({}),facet:c=!1}=n,f=B(n,["shared","crosshairs","crosshairsX","crosshairsY","series","name","item","facet"]);return(n,l,d)=>{let{container:h,view:p}=n,{scale:m,markState:g,coordinate:v,theme:y}=p,_=Z(g,"seriesTooltip"),b=Z(g,"crosshairs"),x=(0,F.selectPlotArea)(h),E=K(s,_),w=K(i,b);if(E&&Array.from(g.values()).some(n=>{var r;return(null===(r=n.interaction)||void 0===r?void 0:r.seriesTooltip)&&n.tooltip;})&&!c)return et(x,Object.assign(Object.assign({},f),{theme:y,elements:F.selectG2Elements,scale:m,coordinate:v,crosshairs:w,crosshairsX:K(K(a,i),!1),crosshairsY:K(o,w),item:u,emitter:d}));if(E&&c){let r=l.filter(r=>r!==n&&r.options.parentKey===n.options.key),s=(0,F.selectFacetG2Elements)(n,l),c=r[0].view.scale,h=x.getBounds(),p=h.min[0],m=h.min[1];return Object.assign(c,{facet:!0}),et(x.parentNode.parentNode,Object.assign(Object.assign({},f),{theme:y,elements:()=>s,scale:c,coordinate:v,crosshairs:K(i,b),crosshairsX:K(K(a,i),!1),crosshairsY:K(o,w),item:u,startX:p,startY:m,emitter:d}));}return en(x,Object.assign(Object.assign({},f),{datum:(0,F.createDatumof)(p),elements:F.selectG2Elements,scale:m,coordinate:v,groupKey:r?(0,F.createXKey)(p):void 0,item:u,emitter:d,view:p,theme:y,shared:r}));};}er.props={reapplyWhenUpdate:!0};},b5bf64b0:function(n,r,i){"use strict";function a(n,r){var i=new Date;return n=+n,r=+r,function(a){return i.setTime(n*(1-a)+r*a),i;};}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},b5f7c477:function(n,r,i){var a=i("231450c4")(i("6040b637"),"WeakMap");n.exports=a;},b60abbbd:function(n,r,i){var a=i("13850e1a"),o=i("6bc9e075"),s=i("8c723d25"),l=Math.max,u=Math.min;n.exports=function(n,r,i){var c,f,d,h,p,m,g=0,v=!1,y=!1,_=!0;if("function"!=typeof n)throw TypeError("Expected a function");function b(r){var i=c,a=f;return c=f=void 0,g=r,h=n.apply(a,i);}function x(n){var i=n-m,a=n-g;return void 0===m||i>=r||i<0||y&&a>=d;}function E(){var n,i,a,s=o();if(x(s))return w(s);p=setTimeout(E,(n=s-m,i=s-g,a=r-n,y?u(a,d-i):a));}function w(n){return(p=void 0,_&&c)?b(n):(c=f=void 0,h);}function S(){var n,i=o(),a=x(i);if(c=arguments,f=this,m=i,a){if(void 0===p)return g=n=m,p=setTimeout(E,r),v?b(n):h;if(y)return clearTimeout(p),p=setTimeout(E,r),b(m);}return void 0===p&&(p=setTimeout(E,r)),h;}return r=s(r)||0,a(i)&&(v=!!i.leading,d=(y="maxWait"in i)?l(s(i.maxWait)||0,r):d,_="trailing"in i?!!i.trailing:_),S.cancel=function(){void 0!==p&&clearTimeout(p),g=0,c=m=f=p=void 0;},S.flush=function(){return void 0===p?h:w(o());},S;};},b6d05578:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{SceneContext:function(){return o;},useSceneValue:function(){return s;}});var a=i("609f48be"),o=(0,a.createContext)({});function s(){return(0,a.useContext)(o);}},b78c66bd:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),r.flattenNames=void 0;var a=u(i("3301e887")),o=u(i("7d370577")),s=u(i("1b6a3e38")),l=u(i("a114d3c3"));function u(n){return n&&n.__esModule?n:{default:n};}var c=r.flattenNames=function n(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=[];return(0,l.default)(r,function(r){Array.isArray(r)?n(r).map(function(n){return i.push(n);}):(0,s.default)(r)?(0,o.default)(r,function(n,r){!0===n&&i.push(r),i.push(r+"-"+n);}):(0,a.default)(r)&&i.push(r);}),i;};r.default=c;},b7c8f320:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{TreeContext:function(){return o;},UnstableContext:function(){return s;}});var a=i("852bbaa9")._(i("609f48be")),o=a.createContext(null),s=a.createContext({});},b7c9e889:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{Title:function(){return v;},getBBox:function(){return m;},parsePosition:function(){return p;}});var a=i("3862611d"),o=i("47a6bde3"),s=i("920dd2bf"),l=i("fc81244b"),u=i("a602d54e"),c=i("1915def0"),f=i("b0ea517f"),d=i("a63b8d99"),h=(0,l.classNames)({text:"text"},"title");function p(n){return/\S+-\S+/g.test(n)?n.split("-").map(function(n){return n[0];}):n.length>2?[n[0]]:n.split("");}function m(n,r){var i=n.attributes,o=i.position,l=i.spacing,u=i.inset,f=i.text,d=n.getBBox(),h=r.getBBox(),m=p(o),g=(0,a.__read)((0,c.parseSeriesAttr)(f?l:0),4),v=g[0],y=g[1],_=g[2],b=g[3],x=(0,a.__read)((0,c.parseSeriesAttr)(u),4),E=x[0],w=x[1],S=x[2],T=x[3],A=(0,a.__read)([b+y,v+_],2),C=A[0],O=A[1],M=(0,a.__read)([T+w,E+S],2),R=M[0],P=M[1];if("l"===m[0])return new s.BBox(d.x,d.y,h.width+d.width+C+R,Math.max(h.height+P,d.height));if("t"===m[0])return new s.BBox(d.x,d.y,Math.max(h.width+R,d.width),h.height+d.height+O+P);var k=(0,a.__read)([r.attributes.width||h.width,r.attributes.height||h.height],2),I=k[0],L=k[1];return new s.BBox(h.x,h.y,I+d.width+C+R,L+d.height+O+P);}function g(n,r){var i=Object.entries(r).reduce(function(r,i){var o=(0,a.__read)(i,2),s=o[0],l=o[1];return n.node().attr(s)||(r[s]=l),r;},{});n.styles(i);}var v=function(n){function r(r){return n.call(this,r,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"})||this;}return(0,a.__extends)(r,n),r.prototype.getAvailableSpace=function(){var n=this.attributes,r=n.width,i=n.height,o=n.position,l=n.spacing,u=n.inset,f=this.querySelector(h.text.class);if(!f)return new s.BBox(0,0,+r,+i);var d=f.getBBox(),m=d.width,g=d.height,v=(0,a.__read)((0,c.parseSeriesAttr)(l),4),y=v[0],_=v[1],b=v[2],x=v[3],E=(0,a.__read)([0,0,+r,+i],4),w=E[0],S=E[1],T=E[2],A=E[3],C=p(o);if(C.includes("i"))return new s.BBox(w,S,T,A);C.forEach(function(n,o){var s,l;"t"===n&&(S=(s=(0,a.__read)(0===o?[g+b,+i-g-b]:[0,+i],2))[0],A=s[1]),"r"===n&&(T=(0,a.__read)([+r-m-x],1)[0]),"b"===n&&(A=(0,a.__read)([+i-g-y],1)[0]),"l"===n&&(w=(l=(0,a.__read)(0===o?[m+_,+r-m-_]:[0,+r],2))[0],T=l[1]);});var O=(0,a.__read)((0,c.parseSeriesAttr)(u),4),M=O[0],R=O[1],P=O[2],k=O[3],I=(0,a.__read)([k+R,M+P],2),L=I[0],N=I[1];return new s.BBox(w+k,S+M,T-L,A-N);},r.prototype.getBBox=function(){return this.title?this.title.getBBox():new s.BBox(0,0,0,0);},r.prototype.render=function(n,r){var i,o,s,l,c,m,v,y,_,b,x,E,w,S,T,A,C=this;n.width,n.height,n.position,n.spacing;var O=(0,a.__rest)(n,["width","height","position","spacing"]),M=(0,a.__read)((0,d.splitStyle)(O),1)[0],R=(c=n.width,m=n.height,v=n.position,_=(y=(0,a.__read)([+c/2,+m/2],2))[0],b=y[1],E=(x=(0,a.__read)([+_,+b,"center","middle"],4))[0],w=x[1],S=x[2],T=x[3],(A=p(v)).includes("l")&&(E=(i=(0,a.__read)([0,"start"],2))[0],S=i[1]),A.includes("r")&&(E=(o=(0,a.__read)([+c,"end"],2))[0],S=o[1]),A.includes("t")&&(w=(s=(0,a.__read)([0,"top"],2))[0],T=s[1]),A.includes("b")&&(w=(l=(0,a.__read)([+m,"bottom"],2))[0],T=l[1]),{x:E,y:w,textAlign:S,textBaseline:T}),P=R.x,k=R.y,I=R.textAlign,L=R.textBaseline;(0,u.ifShow)(!!O.text,(0,f.select)(r),function(n){C.title=n.maybeAppendByClassName(h.text,"text").styles(M).call(g,{x:P,y:k,textAlign:I,textBaseline:L}).node();});},r;}(o.Component);},b7fbe0e8:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return o;}});var a=i("777fffbe")._(i("62a7c4f2")),o=function(n,r){if(!(0,a.default)(n))return n;for(var i=[],o=0;o<n.length;o++){var s=n[o];r(s,o)&&i.push(s);}return i;};},b83c7a4d:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return e_;}});var a,o,s,l,u,c,f,d=i("777fffbe"),h=i("31e3f343"),p=d._(h),m=i("47334cff"),g=d._(m),v=i("c03e7baa"),y=d._(v);function _(n,r,i){(void 0===i||(0,y.default)(n[r],i))&&(void 0!==i||r in n)||(0,g.default)(n,r,i);}var b=function(n,r,i){for(var a=-1,o=Object(n),s=i(n),l=s.length;l--;){var u=s[++a];if(!1===r(o[u],u,o))break;}return n;},x=i("2cc7f81c"),E=d._(x),w="object"==typeof r&&r&&!r.nodeType&&r,S=w&&"object"==typeof n&&n&&!n.nodeType&&n,T=S&&S.exports===w?E.default.Buffer:void 0,A=T?T.allocUnsafe:void 0,C=i("ac0c5eff"),O=d._(C),M=i("b42f1d64"),R=d._(M),P=Object.create,k=function(){function n(){}return function(r){if(!(0,R.default)(r))return{};if(P)return P(r);n.prototype=r;var i=new n;return n.prototype=void 0,i;};}(),I=i("fdfa415f"),L=(0,d._(I).default)(Object.getPrototypeOf,Object),N=i("1f547793"),D=d._(N),F=i("0e2cd74b"),B=d._(F),j=i("82bfc804"),z=d._(j),U=i("e63fc6cd"),V=d._(U),G=i("6f0d7bd0"),H=d._(G),W=i("d0d233d5"),X=d._(W),q=i("3f3add3b"),$=d._(q),Y=i("480dd2d5"),Z=d._(Y),K=Object.prototype,Q=Function.prototype.toString,J=K.hasOwnProperty,ee=Q.call(Object),et=i("8f2efba6"),en=d._(et);function er(n,r){if(("constructor"!==r||"function"!=typeof n[r])&&"__proto__"!=r)return n[r];}var ei=Object.prototype.hasOwnProperty,ea=i("5b10c23d"),eo=d._(ea),es=Object.prototype.hasOwnProperty;function el(n){return(0,V.default)(n)?(0,eo.default)(n,!0):function(n){if(!(0,R.default)(n))return function(n){var r=[];if(null!=n)for(var i in Object(n))r.push(i);return r;}(n);var r=(0,D.default)(n),i=[];for(var a in n)"constructor"==a&&(r||!es.call(n,a))||i.push(a);return i;}(n);}var eu=i("95d6ddea"),ec=d._(eu),ef=Math.max,ed=i("e93984e8"),eh=d._(ed),ep=eh.default?function(n,r){return(0,eh.default)(n,"toString",{configurable:!0,enumerable:!1,value:function(){return r;},writable:!0});}:ec.default,em=Date.now,eg=(a=0,o=0,function(){var n=em(),r=16-(n-o);if(o=n,r>0){if(++a>=800)return arguments[0];}else a=0;return ep.apply(void 0,arguments);}),ev=i("5ab94ba3"),ey=d._(ev),e_=(s=function(n,r,i){!function n(r,i,a,o,s){r!==i&&b(i,function(l,u){if(s||(s=new p.default),(0,R.default)(l))!function(n,r,i,a,o,s,l){var u=er(n,i),c=er(r,i),f=l.get(c);if(f){_(n,i,f);return;}var d=s?s(u,c,i+"",n,r,l):void 0,h=void 0===d;if(h){var p,m,v=(0,z.default)(c),b=!v&&(0,X.default)(c),x=!v&&!b&&(0,en.default)(c);(d=c,v||b||x)?(0,z.default)(u)?d=u:(0,H.default)(u)&&(0,V.default)(u)?d=function(n,r){var i=-1,a=n.length;for(r||(r=Array(a));++i<a;)r[i]=n[i];return r;}(u):b?(h=!1,d=function(n,r){if(r)return n.slice();var i=n.length,a=A?A(i):new n.constructor(i);return n.copy(a),a;}(c,!0)):x?(h=!1,m=new(p=c.buffer).constructor(p.byteLength),new O.default(m).set(new O.default(p)),d=new c.constructor(m,c.byteOffset,c.length)):d=[]:function(n){if(!(0,H.default)(n)||"[object Object]"!=(0,Z.default)(n))return!1;var r=L(n);if(null===r)return!0;var i=J.call(r,"constructor")&&r.constructor;return"function"==typeof i&&i instanceof i&&Q.call(i)==ee;}(c)||(0,B.default)(c)?(d=u,(0,B.default)(u))?d=function(n,r,i,a){var o=!i;i||(i={});for(var s=-1,l=r.length;++s<l;){var u=r[s],c=void 0;void 0===c&&(c=n[u]),o?(0,g.default)(i,u,c):function(n,r,i){var a=n[r];ei.call(n,r)&&(0,y.default)(a,i)&&(void 0!==i||r in n)||(0,g.default)(n,r,i);}(i,u,c);}return i;}(u,el(u)):(!(0,R.default)(u)||(0,$.default)(u))&&(d="function"!=typeof c.constructor||(0,D.default)(c)?{}:k(L(c))):h=!1;}h&&(l.set(c,d),o(d,c,a,s,l),l.delete(c)),_(n,i,d);}(r,i,u,a,n,o,s);else{var c=o?o(er(r,u),l,u+"",r,i,s):void 0;void 0===c&&(c=l),_(r,u,c);}},el);}(n,r,i);},eg((u=l=function(n,r){var i=-1,a=r.length,o=a>1?r[a-1]:void 0,l=a>2?r[2]:void 0;for(o=s.length>3&&"function"==typeof o?(a--,o):void 0,l&&function(n,r,i){if(!(0,R.default)(i))return!1;var a=typeof r;return("number"==a?!!((0,V.default)(i)&&(0,ey.default)(r,i.length)):"string"==a&&r in i)&&(0,y.default)(i[r],n);}(r[0],r[1],l)&&(o=a<3?void 0:o,a=1),n=Object(n);++i<a;){var u=r[i];u&&s(n,u,i,o);}return n;},c=void 0,f=ec.default,c=ef(void 0===c?u.length-1:c,0),function(){for(var n=arguments,r=-1,i=ef(n.length-c,0),a=Array(i);++r<i;)a[r]=n[c+r];r=-1;for(var o=Array(c+1);++r<c;)o[r]=n[r];return o[c]=f(a),function(n,r,i){switch(i.length){case 0:return n.call(r);case 1:return n.call(r,i[0]);case 2:return n.call(r,i[0],i[1]);case 3:return n.call(r,i[0],i[1],i[2]);}return n.apply(r,i);}(u,this,o);}),l+""));},b88503dc:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"isAbsoluteArray",{enumerable:!0,get:function(){return o;}});var a=i("53def832");function o(n){return(0,a.isPathArray)(n)&&n.every(function(n){var r=n[0];return r===r.toUpperCase();});}},ba937aa1:function(n,r,i){function a(n,r){if(0!==n.length){o(n[0],r);for(var i=1;i<n.length;i++)o(n[i],!r);}}function o(n,r){for(var i=0,a=0,o=0,s=n.length,l=s-1;o<s;l=o++){var u=(n[o][0]-n[l][0])*(n[l][1]+n[o][1]),c=i+u;a+=Math.abs(i)>=Math.abs(u)?i-c+u:u-c+i,i=c;}i+a>=0!=!!r&&n.reverse();}n.exports=function n(r,i){var o,s=r&&r.type;if("FeatureCollection"===s)for(o=0;o<r.features.length;o++)n(r.features[o],i);else if("GeometryCollection"===s)for(o=0;o<r.geometries.length;o++)n(r.geometries[o],i);else if("Feature"===s)n(r.geometry,i);else if("Polygon"===s)a(r.coordinates,i);else if("MultiPolygon"===s)for(o=0;o<r.coordinates.length;o++)a(r.coordinates[o],i);return r;};},bbb27eba:function(n,r,i){"use strict";function a(n,r,i,a,o){let s=i||0,l=a||n.length,u=o||(n=>n);for(;s<l;){let i=Math.floor((s+l)/2);u(n[i])>r?l=i:s=i+1;}return s;}i.d(r,"__esModule",{value:!0}),i.d(r,"bisect",{enumerable:!0,get:function(){return a;}});},bbbf6464:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{Slider:function(){return Z;}});var a=i("777fffbe"),o=i("3862611d"),s=i("5e195043"),l=i("3715e357"),u=a._(l),c=i("7e9288b9"),f=i("47a6bde3"),d=i("45d14b4e"),h=i("f65342ee"),p=i("a602d54e"),m=i("1915def0"),g=i("b0ea517f"),v=i("a63b8d99"),y=i("880f07e8"),_=i("7da32405"),b=i("c2287686"),x=i("1daaa764"),E=a._(x),w=function(n){if("object"!=typeof n||null===n)return n;if((0,E.default)(n)){r=[];for(var r,i=0,a=n.length;i<a;i++)"object"==typeof n[i]&&null!=n[i]?r[i]=w(n[i]):r[i]=n[i];}else for(var o in r={},n)"object"==typeof n[o]&&null!=n[o]?r[o]=w(n[o]):r[o]=n[o];return r;},S=i("da5c7e2c"),T=a._(S),A=i("1f338b89"),C=a._(A),O=i("d7948920"),M=a._(O),R=i("ca2da9d1"),P=function(n){function r(r){var i=this,a=r.style,l=(0,o.__rest)(r,["style"]);return(i=n.call(this,(0,M.default)({},{type:"column"},(0,o.__assign)({style:a},l)))||this).columnsGroup=new s.Group({name:"columns"}),i.appendChild(i.columnsGroup),i.render(),i;}return(0,o.__extends)(r,n),r.prototype.render=function(){var n=this.attributes,r=n.columns,i=n.x,a=n.y;this.columnsGroup.style.transform="translate(".concat(i,", ").concat(a,")"),(0,g.select)(this.columnsGroup).selectAll(".column").data(r.flat()).join(function(n){return n.append("rect").attr("className","column").each(function(n){this.attr(n);});},function(n){return n.each(function(n){this.attr(n);});},function(n){return n.remove();});},r.prototype.update=function(n){this.attr((0,R.deepAssign)({},this.attributes,n)),this.render();},r.prototype.clear=function(){this.removeChildren();},r;}(s.DisplayObject),k=function(n){function r(r){var i=this,a=r.style,l=(0,o.__rest)(r,["style"]);return(i=n.call(this,(0,M.default)({},{type:"lines"},(0,o.__assign)({style:a},l)))||this).linesGroup=i.appendChild(new s.Group),i.areasGroup=i.appendChild(new s.Group),i.render(),i;}return(0,o.__extends)(r,n),r.prototype.render=function(){var n=this.attributes,r=n.lines,i=n.areas,a=n.x,o=n.y;this.style.transform="translate(".concat(a,", ").concat(o,")"),r&&this.renderLines(r),i&&this.renderAreas(i);},r.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren();},r.prototype.update=function(n){this.attr((0,R.deepAssign)({},this.attributes,n)),this.render();},r.prototype.renderLines=function(n){(0,g.select)(this.linesGroup).selectAll(".line").data(n).join(function(n){return n.append("path").attr("className","line").each(function(n){this.attr(n);});},function(n){return n.each(function(n){this.attr(n);});},function(n){return n.remove();});},r.prototype.renderAreas=function(n){(0,g.select)(this.linesGroup).selectAll(".area").data(n).join(function(n){return n.append("path").attr("className","area").each(function(n){this.attr(n);});},function(n){return n.each(function(n){this.style(n);});},function(n){return n.remove();});},r;}(s.DisplayObject),I=i("e93228d6"),L=a._(I),N=i("6210cecb");function D(n,r){void 0===r&&(r=!1);var i=r?n.length-1:0,a=n.map(function(n,r){return(0,o.__spreadArray)([r===i?"M":"L"],(0,o.__read)(n),!1);});return r?a.reverse():a;}function F(n,r){if(void 0===r&&(r=!1),n.length<=2)return D(n);for(var i=[],a=n.length,s=0;s<a;s+=1){var l=r?n[a-s-1]:n[s];(0,L.default)(l,i.slice(-2))||i.push.apply(i,(0,o.__spreadArray)([],(0,o.__read)(l),!1));}var u=function(n,r,i){void 0===r&&(r=!1),void 0===i&&(i=[[0,0],[1,1]]);for(var a,s,l,u=!!r,c=[],f=0,d=n.length;f<d;f+=2)c.push([n[f],n[f+1]]);for(var h=function(n,r,i,a){var s,l,u,c,f,d,h=[],p=!!a,m=[1/0,1/0],g=[-1/0,-1/0];if(p){m=(s=(0,o.__read)(a,2))[0],g=s[1];for(var v=0,y=n.length;v<y;v+=1){var _=n[v];m=(0,N.min)(m,_),g=(0,N.max)(g,_);}}for(var v=0,b=n.length;v<b;v+=1){var _=n[v];if(0!==v||i){if(v!==b-1||i){l=n[[v?v-1:b-1,v-1][i?0:1]],u=n[i?(v+1)%b:v+1];var x=[0,0];x=(0,N.sub)(u,l),x=(0,N.scale)(x,.4);var E=(0,N.distance)(_,l),w=(0,N.distance)(_,u),S=E+w;0!==S&&(E/=S,w/=S);var T=(0,N.scale)(x,-E),A=(0,N.scale)(x,w);f=(0,N.add)(_,T),c=(0,N.add)(_,A),c=(0,N.min)(c,(0,N.max)(u,_)),c=(0,N.max)(c,(0,N.min)(u,_)),T=(0,N.sub)(c,_),T=(0,N.scale)(T,-E/w),f=(0,N.add)(_,T),f=(0,N.min)(f,(0,N.max)(l,_)),f=(0,N.max)(f,(0,N.min)(l,_)),A=(0,N.sub)(_,f),A=(0,N.scale)(A,w/E),c=(0,N.add)(_,A),p&&(f=(0,N.max)(f,m),f=(0,N.min)(f,g),c=(0,N.max)(c,m),c=(0,N.min)(c,g)),h.push(d),h.push(f),d=c;}else f=_,h.push(d),h.push(f);}else d=_;}return i&&h.push(h.shift()),h;}(c,0,u,i),p=c.length,m=[],f=0;f<p-1;f+=1)a=h[2*f],s=h[2*f+1],l=c[f+1],m.push(["C",a[0],a[1],s[0],s[1],l[0],l[1]]);return u&&(a=h[p],s=h[p+1],l=(0,o.__read)(c,1)[0],m.push(["C",a[0],a[1],s[0],s[1],l[0],l[1]])),m;}(i,!1);return r?u.unshift((0,o.__spreadArray)(["M"],(0,o.__read)(n[a-1]),!1)):u.unshift((0,o.__spreadArray)(["M"],(0,o.__read)(n[0]),!1)),u;}function B(n,r,i){var a=w(n);return a.push(["L",r,i],["L",0,i],["Z"]),a;}var j=i("91419c49"),z=a._(j),U=function(n,r){if((0,E.default)(n)){for(var i,a=1/0,o=0;o<n.length;o++){var s=n[o],l=(0,T.default)(r)?r(s):s[r];l<a&&(i=s,a=l);}return i;}},V=i("c502fa9c"),G=a._(V),H=function(n,r){if((0,E.default)(n)){for(var i,a=-1/0,o=0;o<n.length;o++){var s=n[o],l=(0,T.default)(r)?r(s):s[r];l>a&&(i=s,a=l);}return i;}};function W(n){return 0===n.length?[0,0]:[(0,z.default)(U(n,function(n){return(0,z.default)(n)||0;})),(0,G.default)(H(n,function(n){return(0,G.default)(n)||0;}))];}function X(n){for(var r=w(n),i=r[0].length,a=(0,o.__read)([Array(i).fill(0),Array(i).fill(0)],2),s=a[0],l=a[1],u=0;u<r.length;u+=1)for(var c=r[u],f=0;f<i;f+=1)c[f]>=0?(c[f]+=s[f],s[f]=c[f]):(c[f]+=l[f],l[f]=c[f]);return r;}var q=function(n){function r(r){return n.call(this,r,{type:"line",x:0,y:0,width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this;}return(0,o.__extends)(r,n),Object.defineProperty(r.prototype,"rawData",{get:function(){var n=this.attributes.data;if(!n||(null==n?void 0:n.length)===0)return[[]];var r=w(n);return(0,C.default)(r[0])?[r]:r;},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"data",{get:function(){return this.attributes.isStack?X(this.rawData):this.rawData;},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"scales",{get:function(){return this.createScales(this.data);},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"baseline",{get:function(){var n=this.scales.y,r=(0,o.__read)(n.getOptions().domain||[0,0],2),i=r[0],a=r[1];return a<0?n.map(a):n.map(i<0?0:i);},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"containerShape",{get:function(){var n=this.attributes;return{width:n.width,height:n.height};},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"linesStyle",{get:function(){var n=this,r=this.attributes,i=r.type,a=r.isStack,s=r.smooth;if("line"!==i)throw Error("linesStyle can only be used in line type");var l=(0,v.subStyleProps)(this.attributes,"area"),c=(0,v.subStyleProps)(this.attributes,"line"),f=this.containerShape.width,d=this.data;if(0===d[0].length)return{lines:[],areas:[]};var h=this.scales,p=(_=(g={type:"line",x:h.x,y:h.y}).x,b=g.y,E=(x=(0,o.__read)(b.getOptions().range||[0,0],2))[0],(w=x[1])>E&&(w=(y=(0,o.__read)([E,w],2))[0],E=y[1]),d.map(function(n){return n.map(function(n,r){return[_.map(r),(0,u.default)(b.map(n),w,E)];});})),m=[];if(l){var g,y,_,b,x,E,w,S=this.baseline;m=a?s?function(n,r,i){for(var a=[],s=n.length-1;s>=0;s-=1){var l=n[s],u=F(l),c=void 0;if(0===s)c=B(u,r,i);else{var f=F(n[s-1],!0),d=l[0];f[0][0]="L",c=(0,o.__spreadArray)((0,o.__spreadArray)((0,o.__spreadArray)([],(0,o.__read)(u),!1),(0,o.__read)(f),!1),[(0,o.__spreadArray)(["M"],(0,o.__read)(d),!1),["Z"]],!1);}a.push(c);}return a;}(p,f,S):function(n,r,i){for(var a=[],s=n.length-1;s>=0;s-=1){var l=D(n[s]),u=void 0;if(0===s)u=B(l,r,i);else{var c=D(n[s-1],!0);c[0][0]="L",u=(0,o.__spreadArray)((0,o.__spreadArray)((0,o.__spreadArray)([],(0,o.__read)(l),!1),(0,o.__read)(c),!1),[["Z"]],!1);}a.push(u);}return a;}(p,f,S):p.map(function(n){return B(s?F(n):D(n),f,S);});}return{lines:p.map(function(r,i){return(0,o.__assign)({stroke:n.getColor(i),d:s?F(r):D(r)},c);}),areas:m.map(function(r,i){return(0,o.__assign)({d:r,fill:n.getColor(i)},l);})};},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"columnsStyle",{get:function(){var n=this,r=(0,v.subStyleProps)(this.attributes,"column"),i=this.attributes,a=i.isStack,s=i.type,l=i.scale;if("column"!==s)throw Error("columnsStyle can only be used in column type");var u=this.containerShape.height,c=this.rawData;if(!c)return{columns:[]};a&&(c=X(c));var f=this.createScales(c),d=f.x,h=f.y,p=(0,o.__read)(W(c),2),m=p[0],g=p[1],y=new b.Linear({domain:[0,g-(m>0?0:m)],range:[0,u*l]}),_=d.getBandWidth(),x=this.rawData;return{columns:c.map(function(i,s){return i.map(function(i,l){var u=_/c.length;return(0,o.__assign)((0,o.__assign)({fill:n.getColor(s)},r),a?{x:d.map(l),y:h.map(i),width:_,height:y.map(x[s][l])}:{x:d.map(l)+u*s,y:i>=0?h.map(i):h.map(0),width:u,height:y.map(Math.abs(i))});});})};},enumerable:!1,configurable:!0}),r.prototype.render=function(n,r){(0,g.maybeAppend)(r,".container","rect").attr("className","container").node();var i=n.type,a=n.x,s=n.y,l="spark".concat(i),u=(0,o.__assign)({x:a,y:s},"line"===i?this.linesStyle:this.columnsStyle);(0,g.select)(r).selectAll(".spark").data([i]).join(function(n){return n.append(function(n){return"line"===n?new k({className:l,style:u}):new P({className:l,style:u});}).attr("className","spark ".concat(l));},function(n){return n.update(u);},function(n){return n.remove();});},r.prototype.getColor=function(n){var r=this.attributes.color;return(0,E.default)(r)?r[n%r.length]:(0,T.default)(r)?r.call(null,n):r;},r.prototype.createScales=function(n){var r,i,a=this.attributes,s=a.type,l=a.scale,u=a.range,c=void 0===u?[]:u,f=a.spacing,d=this.containerShape,h=d.width,p=d.height,m=(0,o.__read)(W(n),2),g=m[0],v=m[1],y=new b.Linear({domain:[null!==(r=c[0])&&void 0!==r?r:g,null!==(i=c[1])&&void 0!==i?i:v],range:[p,p*(1-l)]});return"line"===s?{type:s,x:new b.Linear({domain:[0,n[0].length-1],range:[0,h]}),y:y}:{type:s,x:new _.Band({domain:n[0].map(function(n,r){return r;}),range:[0,h],paddingInner:f,paddingOuter:f/2,align:.5}),y:y};},r.tag="sparkline",r;}(f.Component),$=i("e77a4c2e"),Y=i("16d095ff"),Z=function(n){function r(r){var i=n.call(this,r,(0,o.__assign)((0,o.__assign)((0,o.__assign)({x:0,y:0,animate:{duration:100,fill:"both"},brushable:!0,formatter:function(n){return n.toString();},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},(0,v.superStyleProps)($.HANDLE_DEFAULT_CFG,"handle")),(0,v.superStyleProps)($.HANDLE_ICON_DEFAULT_CFG,"handleIcon")),(0,v.superStyleProps)($.HANDLE_LABEL_DEFAULT_CFG,"handleLabel")))||this;return i.range=[0,1],i.onDragStart=function(n){return function(r){r.stopPropagation(),i.target=n,i.prevPos=i.getOrientVal((0,h.getEventPos)(r));var a=i.availableSpace,o=a.x,s=a.y,l=i.getBBox(),u=l.x,c=l.y;i.selectionStartPos=i.getRatio(i.prevPos-i.getOrientVal([o,s])-i.getOrientVal([+u,+c])),i.selectionWidth=0,document.addEventListener("pointermove",i.onDragging),document.addEventListener("pointerup",i.onDragEnd);};},i.onDragging=function(n){var r=i.attributes,a=r.slidable,o=r.brushable,s=r.type;n.stopPropagation();var l=i.getOrientVal((0,h.getEventPos)(n)),u=l-i.prevPos;if(u){var c=i.getRatio(u);switch(i.target){case"start":a&&i.setValuesOffset(c);break;case"end":a&&i.setValuesOffset(0,c);break;case"selection":a&&i.setValuesOffset(c,c);break;case"track":if(!o)return;i.selectionWidth+=c,"range"===s?i.innerSetValues([i.selectionStartPos,i.selectionStartPos+i.selectionWidth].sort(),!0):i.innerSetValues([0,i.selectionStartPos+i.selectionWidth],!0);}i.prevPos=l;}},i.onDragEnd=function(){document.removeEventListener("pointermove",i.onDragging),document.removeEventListener("pointermove",i.onDragging),document.removeEventListener("pointerup",i.onDragEnd),i.target="",i.updateHandlesPosition(!1);},i.onValueChange=function(n){var r=i.attributes,a=r.onChange,o=r.type,l="range"===o?n:n[1],u="range"===o?i.getValues():i.getValues()[1],c=new s.CustomEvent("valuechange",{detail:{oldValue:l,value:u}});i.dispatchEvent(c),null==a||a(u);},i.selectionStartPos=0,i.selectionWidth=0,i.prevPos=0,i.target="",i;}return(0,o.__extends)(r,n),Object.defineProperty(r.prototype,"values",{get:function(){return this.attributes.values;},set:function(n){this.attributes.values=this.clampValues(n);},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"sparklineStyle",{get:function(){if("horizontal"!==this.attributes.orientation)return null;var n=(0,v.subStyleProps)(this.attributes,"sparkline");return(0,o.__assign)((0,o.__assign)({zIndex:0},this.availableSpace),n);},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"shape",{get:function(){var n=this.attributes,r=n.trackLength,i=n.trackSize,a=(0,o.__read)(this.getOrientVal([[r,i],[i,r]]),2);return{width:a[0],height:a[1]};},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"availableSpace",{get:function(){var n=this.attributes,r=(n.x,n.y,n.padding),i=(0,o.__read)((0,m.parseSeriesAttr)(r),4),a=i[0],s=i[1],l=i[2],u=i[3],c=this.shape;return{x:u,y:a,width:c.width-(u+s),height:c.height-(a+l)};},enumerable:!1,configurable:!0}),r.prototype.getValues=function(){return this.values;},r.prototype.setValues=function(n,r){void 0===n&&(n=[0,0]),void 0===r&&(r=!1),this.attributes.values=n;var i=!1!==r&&this.attributes.animate;this.updateSelectionArea(i),this.updateHandlesPosition(i);},r.prototype.updateSelectionArea=function(n){var r=this.calcSelectionArea();this.foregroundGroup.selectAll($.CLASS_NAMES.selection.class).each(function(i,a){(0,c.transition)(this,r[a],n);});},r.prototype.updateHandlesPosition=function(n){this.attributes.showHandle&&(this.startHandle&&(0,c.transition)(this.startHandle,this.getHandleStyle("start"),n),this.endHandle&&(0,c.transition)(this.endHandle,this.getHandleStyle("end"),n));},r.prototype.innerSetValues=function(n,r){void 0===n&&(n=[0,0]),void 0===r&&(r=!1);var i=this.values,a=this.clampValues(n);this.attributes.values=a,this.setValues(a),r&&this.onValueChange(i);},r.prototype.renderTrack=function(n){var r=this.attributes,i=r.x,a=r.y,s=(0,v.subStyleProps)(this.attributes,"track");this.trackShape=(0,g.select)(n).maybeAppendByClassName($.CLASS_NAMES.track,"rect").styles((0,o.__assign)((0,o.__assign)({x:i,y:a},this.shape),s));},r.prototype.renderBrushArea=function(n){var r=this.attributes,i=r.x,a=r.y,s=r.brushable;this.brushArea=(0,g.select)(n).maybeAppendByClassName($.CLASS_NAMES.brushArea,"rect").styles((0,o.__assign)({x:i,y:a,fill:"transparent",cursor:s?"crosshair":"default"},this.shape));},r.prototype.renderSparkline=function(n){var r=this,i=this.attributes,a=i.x,s=i.y,l=i.orientation,u=(0,g.select)(n).maybeAppendByClassName($.CLASS_NAMES.sparklineGroup,"g");(0,p.ifShow)("horizontal"===l,u,function(n){var i=(0,o.__assign)((0,o.__assign)({},r.sparklineStyle),{x:a,y:s});n.maybeAppendByClassName($.CLASS_NAMES.sparkline,function(){return new q({style:i});}).update(i);});},r.prototype.renderHandles=function(){var n,r=this,i=this.attributes,a=i.showHandle,o=i.type,s=this;null===(n=this.foregroundGroup)||void 0===n||n.selectAll($.CLASS_NAMES.handle.class).data((a?"range"===o?["start","end"]:["end"]:[]).map(function(n){return{type:n};}),function(n){return n.type;}).join(function(n){return n.append(function(n){var i=n.type;return new Y.Handle({style:r.getHandleStyle(i)});}).each(function(n){var r=n.type;this.attr("class","".concat($.CLASS_NAMES.handle.name," ").concat(r,"-handle")),s["".concat(r,"Handle")]=this,this.addEventListener("pointerdown",s.onDragStart(r));});},function(n){return n.each(function(n){var r=n.type;this.update(s.getHandleStyle(r));});},function(n){return n.each(function(n){var r=n.type;s["".concat(r,"Handle")]=void 0;}).remove();});},r.prototype.renderSelection=function(n){var r=this.attributes,i=r.x,a=r.y,s=r.type,l=r.selectionType;this.foregroundGroup=(0,g.select)(n).maybeAppendByClassName($.CLASS_NAMES.foreground,"g");var u=(0,v.subStyleProps)(this.attributes,"selection"),c=function(n){return n.style("visibility",function(n){return n.show?"visible":"hidden";}).style("cursor",function(n){return"select"===l?"grab":"invert"===l?"crosshair":"default";}).styles((0,o.__assign)((0,o.__assign)({},u),{transform:"translate(".concat(i,", ").concat(a,")")}));},f=this;this.foregroundGroup.selectAll($.CLASS_NAMES.selection.class).data("value"===s?[]:this.calcSelectionArea().map(function(n,r){return{style:(0,o.__assign)({},n),index:r,show:"select"===l?1===r:1!==r};}),function(n){return n.index;}).join(function(n){return n.append("rect").attr("className",$.CLASS_NAMES.selection.name).call(c).each(function(n,r){var i=this;1===r?(f.selectionShape=(0,g.select)(this),this.on("pointerdown",function(n){i.attr("cursor","grabbing"),f.onDragStart("selection")(n);}),f.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),f.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),f.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",function(){i.attr("cursor","grabbing");}),this.addEventListener("pointerup",function(){i.attr("cursor","pointer");}),this.addEventListener("pointerover",function(){i.attr("cursor","pointer");})):this.on("pointerdown",f.onDragStart("track"));});},function(n){return n.call(c);},function(n){return n.remove();}),this.updateSelectionArea(!1),this.renderHandles();},r.prototype.render=function(n,r){this.renderTrack(r),this.renderSparkline(r),this.renderBrushArea(r),this.renderSelection(r);},r.prototype.clampValues=function(n,r){void 0===r&&(r=4);var i,a=(0,o.__read)(this.range,2),s=a[0],l=a[1],c=(0,o.__read)(this.getValues().map(function(n){return(0,y.toPrecision)(n,r);}),2),f=c[0],d=c[1],h=Array.isArray(n)?n:[f,null!=n?n:d],p=(0,o.__read)((h||[f,d]).map(function(n){return(0,y.toPrecision)(n,r);}),2),m=p[0],g=p[1];if("value"===this.attributes.type)return[0,(0,u.default)(g,s,l)];m>g&&(m=(i=(0,o.__read)([g,m],2))[0],g=i[1]);var v=g-m;return v>l-s?[s,l]:m<s?f===s&&d===g?[s,g]:[s,v+s]:g>l?d===l&&f===m?[m,l]:[l-v,l]:[m,g];},r.prototype.calcSelectionArea=function(n){var r=(0,o.__read)(this.clampValues(n),2),i=r[0],a=r[1],s=this.availableSpace,l=s.x,u=s.y,c=s.width,f=s.height;return this.getOrientVal([[{y:u,height:f,x:l,width:i*c},{y:u,height:f,x:i*c+l,width:(a-i)*c},{y:u,height:f,x:a*c,width:(1-a)*c}],[{x:l,width:c,y:u,height:i*f},{x:l,width:c,y:i*f+u,height:(a-i)*f},{x:l,width:c,y:a*f,height:(1-a)*f}]]);},r.prototype.calcHandlePosition=function(n){var r=this.attributes.handleIconOffset,i=this.availableSpace,a=i.x,s=i.y,l=i.width,u=i.height,c=(0,o.__read)(this.clampValues(),2),f=c[0],d=c[1],h=("start"===n?f:d)*this.getOrientVal([l,u])+("start"===n?-r:r);return{x:a+this.getOrientVal([h,l/2]),y:s+this.getOrientVal([u/2,h])};},r.prototype.inferTextStyle=function(n){return"horizontal"===this.attributes.orientation?{}:"start"===n?{transformOrigin:"left center",transform:"rotate(90)",textAlign:"start"}:"end"===n?{transformOrigin:"right center",transform:"rotate(90)",textAlign:"end"}:{};},r.prototype.calcHandleText=function(n){var r,i=this.attributes,a=i.type,s=i.orientation,l=i.formatter,u=i.autoFitLabel,c=(0,v.subStyleProps)(this.attributes,"handle"),f=(0,v.subStyleProps)(c,"label"),h=c.spacing,p=this.getHandleSize(),m=this.clampValues(),g=l("start"===n?m[0]:m[1]),y=new d.Text({style:(0,o.__assign)((0,o.__assign)((0,o.__assign)({},f),this.inferTextStyle(n)),{text:g})}),_=y.getBBox(),b=_.width,x=_.height;if(y.destroy(),!u){if("value"===a)return{text:g,x:0,y:-x-h};var E=h+p+("horizontal"===s?b/2:0);return(r={text:g})["horizontal"===s?"x":"y"]="start"===n?-E:E,r;}var w=0,S=0,T=this.availableSpace,A=T.width,C=T.height,O=this.calcSelectionArea()[1],M=O.x,R=O.y,P=O.width,k=O.height,I=h+p;if("horizontal"===s){var L=I+b/2;w="start"===n?M-I-b>0?-L:L:A-M-P-I>b?L:-L;}else{var N=x+I;S="start"===n?R-p>x?-N:I:C-(R+k)-p>x?N:-I;}return{x:w,y:S,text:g};},r.prototype.getHandleLabelStyle=function(n){var r=(0,v.subStyleProps)(this.attributes,"handleLabel");return(0,o.__assign)((0,o.__assign)((0,o.__assign)({},r),this.calcHandleText(n)),this.inferTextStyle(n));},r.prototype.getHandleIconStyle=function(){var n=this.attributes.handleIconShape,r=(0,v.subStyleProps)(this.attributes,"handleIcon"),i=this.getOrientVal(["ew-resize","ns-resize"]),a=this.getHandleSize();return(0,o.__assign)({cursor:i,shape:n,size:a},r);},r.prototype.getHandleStyle=function(n){var r=this.attributes,i=r.x,a=r.y,s=r.showLabel,l=r.showLabelOnInteraction,u=r.orientation,c=this.calcHandlePosition(n),f=c.x,d=c.y,h=this.calcHandleText(n),p=s;return!s&&l&&(p=!!this.target),(0,o.__assign)((0,o.__assign)((0,o.__assign)({},(0,v.superStyleProps)(this.getHandleIconStyle(),"icon")),(0,v.superStyleProps)((0,o.__assign)((0,o.__assign)({},this.getHandleLabelStyle(n)),h),"label")),{transform:"translate(".concat(f+i,", ").concat(d+a,")"),orientation:u,showLabel:p,type:n,zIndex:3});},r.prototype.getHandleSize=function(){var n=this.attributes,r=n.handleIconSize,i=n.width,a=n.height;return r||Math.floor((this.getOrientVal([+a,+i])+4)/2.4);},r.prototype.getOrientVal=function(n){var r=(0,o.__read)(n,2),i=r[0],a=r[1];return"horizontal"===this.attributes.orientation?i:a;},r.prototype.setValuesOffset=function(n,r,i){void 0===r&&(r=0),void 0===i&&(i=!1);var a=this.attributes.type,s=(0,o.__read)(this.getValues(),2),l=[s[0]+("range"===a?n:0),s[1]+r].sort();i?this.setValues(l):this.innerSetValues(l,!0);},r.prototype.getRatio=function(n){var r=this.availableSpace,i=r.width,a=r.height;return n/this.getOrientVal([i,a]);},r.prototype.dispatchCustomEvent=function(n,r,i){var a=this;n.on(r,function(n){n.stopPropagation(),a.dispatchEvent(new s.CustomEvent(i,{detail:n}));});},r.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var n=this.brushArea;this.dispatchCustomEvent(n,"click","trackClick"),this.dispatchCustomEvent(n,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(n,"pointerleave","trackMouseleave"),n.on("pointerdown",this.onDragStart("track"));},r.prototype.onScroll=function(n){if(this.attributes.scrollable){var r=n.deltaX,i=n.deltaY,a=this.getRatio(i||r);this.setValuesOffset(a,a,!0);}},r.tag="slider",r;}(f.Component);},bc5006d6:function(n,r,i){"use strict";var a=i("016e8963");function o(n,r,i,a,o){this.properties={},this.extent=i,this.type=0,this._pbf=n,this._geometry=-1,this._keys=a,this._values=o,n.readFields(s,this,r);}function s(n,r,i){1==n?r.id=i.readVarint():2==n?function(n,r){for(var i=n.readVarint()+n.pos;n.pos<i;){var a=r._keys[n.readVarint()],o=r._values[n.readVarint()];r.properties[a]=o;}}(i,r):3==n?r.type=i.readVarint():4==n&&(r._geometry=i.pos);}n.exports=o,o.types=["Unknown","Point","LineString","Polygon"],o.prototype.loadGeometry=function(){var n=this._pbf;n.pos=this._geometry;for(var r,i=n.readVarint()+n.pos,o=1,s=0,l=0,u=0,c=[];n.pos<i;){if(s<=0){var f=n.readVarint();o=7&f,s=f>>3;}if(s--,1===o||2===o)l+=n.readSVarint(),u+=n.readSVarint(),1===o&&(r&&c.push(r),r=[]),r.push(new a(l,u));else if(7===o)r&&r.push(r[0].clone());else throw Error("unknown command "+o);}return r&&c.push(r),c;},o.prototype.bbox=function(){var n=this._pbf;n.pos=this._geometry;for(var r=n.readVarint()+n.pos,i=1,a=0,o=0,s=0,l=1/0,u=-1/0,c=1/0,f=-1/0;n.pos<r;){if(a<=0){var d=n.readVarint();i=7&d,a=d>>3;}if(a--,1===i||2===i)o+=n.readSVarint(),s+=n.readSVarint(),o<l&&(l=o),o>u&&(u=o),s<c&&(c=s),s>f&&(f=s);else if(7!==i)throw Error("unknown command "+i);}return[l,c,u,f];},o.prototype.toGeoJSON=function(n,r,i){var a,s,l=this.extent*Math.pow(2,i),u=this.extent*n,c=this.extent*r,f=this.loadGeometry(),d=o.types[this.type];function h(n){for(var r=0;r<n.length;r++){var i=n[r],a=180-(i.y+c)*360/l;n[r]=[(i.x+u)*360/l-180,360/Math.PI*Math.atan(Math.exp(a*Math.PI/180))-90];}}switch(this.type){case 1:var p=[];for(a=0;a<f.length;a++)p[a]=f[a][0];h(f=p);break;case 2:for(a=0;a<f.length;a++)h(f[a]);break;case 3:for(a=0,f=function(n){var r=n.length;if(r<=1)return[n];for(var i,a,o=[],s=0;s<r;s++){var l=function(n){for(var r,i,a=0,o=0,s=n.length,l=s-1;o<s;l=o++)r=n[o],a+=((i=n[l]).x-r.x)*(r.y+i.y);return a;}(n[s]);0!==l&&(void 0===a&&(a=l<0),a===l<0?(i&&o.push(i),i=[n[s]]):i.push(n[s]));}return i&&o.push(i),o;}(f);a<f.length;a++)for(s=0;s<f[a].length;s++)h(f[a][s]);}1===f.length?f=f[0]:d="Multi"+d;var m={type:"Feature",geometry:{type:d,coordinates:f},properties:this.properties};return"id"in this&&(m.id=this.id),m;};},bcebdfcc:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"ellipsisIt",{enumerable:!0,get:function(){return o;}});var a=i("e7513aab");function o(n,r,i){void 0===i&&(i="..."),(0,a.applyToText)(n,{wordWrap:!0,wordWrapWidth:r,maxLines:1,textOverflow:i});}},bd5c7bc0:function(n,r,i){var a=i("7b65a7d6"),o=i("007fa019"),s=i("9cbba6e7"),l=i("bbc15be8"),u=i("10d71b98");n.exports=function(n){return"function"==typeof n?n:null==n?s:"object"==typeof n?l(n)?o(n[0],n[1]):a(n):u(n);};},bd74704c:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{lru:function(){return o;}});var a=function(n){var r,i,a,o=n||1;function s(n,s){++r>o&&(a=i,l(1),++r),i[n]=s;}function l(n){r=0,i=Object.create(null),n||(a=Object.create(null));}return l(),{clear:l,has:function(n){return void 0!==i[n]||void 0!==a[n];},get:function(n){var r=i[n];return void 0!==r?r:void 0!==(r=a[n])?(s(n,r),r):void 0;},set:function(n,r){void 0!==i[n]?i[n]=r:s(n,r);}};};function o(n,r=(...n)=>`${n[0]}`,i=16){let s=a(i);return(...i)=>{let a=r(...i),o=s.get(a);return s.has(a)?s.get(a):(o=n(...i),s.set(a,o),o);};}a(3);},bdddc911:function(n,r,i){"use strict";function a(n,r,i,a,o,s){this.fontSize=n||24,this.buffer=void 0===r?3:r,this.cutoff=a||.25,this.fontFamily=o||"sans-serif",this.fontWeight=s||"normal",this.radius=i||8;var l=this.size=this.fontSize+2*this.buffer,u=l+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=l,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(u*u),this.gridInner=new Float64Array(u*u),this.f=new Float64Array(u),this.z=new Float64Array(u+1),this.v=new Uint16Array(u),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(l/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1));}function o(n,r,i,a,o,l){for(var u=0;u<r;u++)s(n,u,r,i,a,o,l);for(var c=0;c<i;c++)s(n,c*r,1,r,a,o,l);}function s(n,r,i,a,o,s,l){var u,c,f,d;for(u=0,s[0]=0,l[0]=-1e20,l[1]=1e20;u<a;u++)o[u]=n[r+u*i];for(u=1,c=0,f=0;u<a;u++){do d=s[c],f=(o[u]-o[d]+u*u-d*d)/(u-d)/2;while(f<=l[c]&&--c>-1)s[++c]=u,l[c]=f,l[c+1]=1e20;}for(u=0,c=0;u<a;u++){for(;l[c+1]<u;)c++;d=s[c],n[r+u*i]=o[d]+(u-d)*(u-d);}}n.exports=a,n.exports.default=a,a.prototype._draw=function(n,r){var i,a,s,l,u,c,f,d,h,p=this.ctx.measureText(n),m=p.width,g=2*this.buffer;r&&this.useMetrics?(u=Math.floor(p.actualBoundingBoxAscent),d=this.buffer+Math.ceil(p.actualBoundingBoxAscent),c=this.buffer,f=this.buffer,a=Math.min(this.size,Math.ceil(p.actualBoundingBoxRight-p.actualBoundingBoxLeft)),l=Math.min(this.size-c,Math.ceil(p.actualBoundingBoxAscent+p.actualBoundingBoxDescent)),i=a+g,s=l+g,this.ctx.textBaseline="alphabetic"):(i=a=this.size,s=l=this.size,u=19*this.fontSize/24,c=f=0,d=this.middle,this.ctx.textBaseline="middle"),a&&l&&(this.ctx.clearRect(f,c,a,l),this.ctx.fillText(n,this.buffer,d),h=this.ctx.getImageData(f,c,a,l));var v=new Uint8ClampedArray(i*s);return function(n,r,i,a,o,s,l){s.fill(1e20,0,r*i),l.fill(0,0,r*i);for(var u=(r-a)/2,c=0;c<o;c++)for(var f=0;f<a;f++){var d=(c+u)*r+f+u,h=n.data[4*(c*a+f)+3]/255;if(1===h)s[d]=0,l[d]=1e20;else if(0===h)s[d]=1e20,l[d]=0;else{var p=Math.max(0,.5-h),m=Math.max(0,h-.5);s[d]=p*p,l[d]=m*m;}}}(h,i,s,a,l,this.gridOuter,this.gridInner),o(this.gridOuter,i,s,this.f,this.v,this.z),o(this.gridInner,i,s,this.f,this.v,this.z),function(n,r,i,a,o,s,l){for(var u=0;u<r*i;u++){var c=Math.sqrt(a[u])-Math.sqrt(o[u]);n[u]=Math.round(255-255*(c/s+l));}}(v,i,s,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:v,metrics:{width:a,height:l,sdfWidth:i,sdfHeight:s,top:u,left:0,advance:m}};},a.prototype.draw=function(n){return this._draw(n,!1).data;},a.prototype.drawWithMetrics=function(n){return this._draw(n,!0);};},bea18af3:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return f;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("000ce906"),l=o._(i("609f48be")),u=a._(i("801e414d")),c=a._(i("c98516ca"));i("8e17111c");var f=function(n){var r=n.prefixCls,i=n.children,a=n.component,o=n.cellComponent,f=n.className,d=n.expanded,h=n.colSpan,p=n.isEmpty,m=n.stickyOffset,g=void 0===m?0:m,v=(0,s.useContext)(c.default,["scrollbarSize","fixHeader","fixColumn","componentWidth","horizonScroll"]),y=v.scrollbarSize,_=v.fixHeader,b=v.fixColumn,x=v.componentWidth,E=v.horizonScroll,w=i;return(p?E&&x:b)&&(w=l.createElement("div",{style:{width:x-g-(_&&!p?y:0),position:"sticky",left:g,overflow:"hidden"},className:"".concat(r,"-expanded-row-fixed")},w)),l.createElement(a,{className:f,style:{display:d?null:"none"}},l.createElement(u.default,{component:o,prefixCls:r,colSpan:h},w));};},bede8832:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"fieldAdapter",{enumerable:!0,get:function(){return o;}});var a=i("d8554caa");function o(n){switch(typeof n){case"function":return n;case"string":return function(r){return(0,a.get)(r,[n]);};default:return function(){return n;};}}},bf207cd8:function(n,r,i){"use strict";var a=Object.prototype.hasOwnProperty,o="~";function s(){}function l(n,r,i){this.fn=n,this.context=r,this.once=i||!1;}function u(n,r,i,a,s){if("function"!=typeof i)throw TypeError("The listener must be a function");var u=new l(i,a||n,s),c=o?o+r:r;return n._events[c]?n._events[c].fn?n._events[c]=[n._events[c],u]:n._events[c].push(u):(n._events[c]=u,n._eventsCount++),n;}function c(n,r){0==--n._eventsCount?n._events=new s:delete n._events[r];}function f(){this._events=new s,this._eventsCount=0;}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(o=!1)),f.prototype.eventNames=function(){var n,r,i=[];if(0===this._eventsCount)return i;for(r in n=this._events)a.call(n,r)&&i.push(o?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(n)):i;},f.prototype.listeners=function(n){var r=o?o+n:n,i=this._events[r];if(!i)return[];if(i.fn)return[i.fn];for(var a=0,s=i.length,l=Array(s);a<s;a++)l[a]=i[a].fn;return l;},f.prototype.listenerCount=function(n){var r=o?o+n:n,i=this._events[r];return i?i.fn?1:i.length:0;},f.prototype.emit=function(n,r,i,a,s,l){var u=o?o+n:n;if(!this._events[u])return!1;var c,f,d=this._events[u],h=arguments.length;if(d.fn){switch(d.once&&this.removeListener(n,d.fn,void 0,!0),h){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,r),!0;case 3:return d.fn.call(d.context,r,i),!0;case 4:return d.fn.call(d.context,r,i,a),!0;case 5:return d.fn.call(d.context,r,i,a,s),!0;case 6:return d.fn.call(d.context,r,i,a,s,l),!0;}for(f=1,c=Array(h-1);f<h;f++)c[f-1]=arguments[f];d.fn.apply(d.context,c);}else{var p,m=d.length;for(f=0;f<m;f++)switch(d[f].once&&this.removeListener(n,d[f].fn,void 0,!0),h){case 1:d[f].fn.call(d[f].context);break;case 2:d[f].fn.call(d[f].context,r);break;case 3:d[f].fn.call(d[f].context,r,i);break;case 4:d[f].fn.call(d[f].context,r,i,a);break;default:if(!c)for(p=1,c=Array(h-1);p<h;p++)c[p-1]=arguments[p];d[f].fn.apply(d[f].context,c);}}return!0;},f.prototype.on=function(n,r,i){return u(this,n,r,i,!1);},f.prototype.once=function(n,r,i){return u(this,n,r,i,!0);},f.prototype.removeListener=function(n,r,i,a){var s=o?o+n:n;if(!this._events[s])return this;if(!r)return c(this,s),this;var l=this._events[s];if(l.fn)l.fn!==r||a&&!l.once||i&&l.context!==i||c(this,s);else{for(var u=0,f=[],d=l.length;u<d;u++)(l[u].fn!==r||a&&!l[u].once||i&&l[u].context!==i)&&f.push(l[u]);f.length?this._events[s]=1===f.length?f[0]:f:c(this,s);}return this;},f.prototype.removeAllListeners=function(n){var r;return n?(r=o?o+n:n,this._events[r]&&c(this,r)):(this._events=new s,this._eventsCount=0),this;},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=o,f.EventEmitter=f,void 0!==n&&(n.exports=f);},bf5fe2c6:function(n,r,i){"use strict";var a;i.d(r,"__esModule",{value:!0}),i.d(r,"MapType",{enumerable:!0,get:function(){return o;}});let o=((a={}).GAODE="GAODE",a.MAPBOX="MAPBOX",a.DEFAULT="DEFAUlTMAP",a.SIMPLE="SIMPLE",a.GLOBEL="GLOBEL",a);},bf8df361:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return d;}});var a=i("777fffbe"),o=a._(i("e4870cf0")),s=i("000ce906"),l=a._(i("c98516ca")),u=i("d7f32850"),c=i("e313b0e4"),f=a._(i("064ecd09"));function d(n,r,i,a){var d,h=(0,s.useContext)(l.default,["prefixCls","fixedInfoList","flattenColumns","expandableType","expandRowByClick","onTriggerExpand","rowClassName","expandedRowClassName","indentSize","expandIcon","expandedRowRender","expandIconColumnIndex","expandedKeys","childrenColumnName","rowExpandable","onRow"]),p=h.flattenColumns,m=h.expandableType,g=h.expandedKeys,v=h.childrenColumnName,y=h.onTriggerExpand,_=h.rowExpandable,b=h.onRow,x=h.expandRowByClick,E=h.rowClassName,w="nest"===m,S="row"===m&&(!_||_(n)),T=S||w,A=g&&g.has(r),C=v&&n&&n[v],O=(0,c.useEvent)(y),M=null==b?void 0:b(n,i),R=null==M?void 0:M.onClick;"string"==typeof E?d=E:"function"==typeof E&&(d=E(n,i,a));var P=(0,u.getColumnsKey)(p);return(0,o.default)((0,o.default)({},h),{},{columnsKey:P,nestExpandable:w,expanded:A,hasNestChildren:C,record:n,onTriggerExpand:O,rowSupportExpand:S,expandable:T,rowProps:(0,o.default)((0,o.default)({},M),{},{className:(0,f.default)(d,null==M?void 0:M.className),onClick:function(r){x&&T&&y(n,r);for(var i=arguments.length,a=Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];null==R||R.apply(void 0,[r].concat(a));}})});}},bf98e12a:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return x;}});var a,o=i("777fffbe"),s=i("3f3add3b"),l=o._(s),u=i("2cc7f81c"),c=o._(u).default["__core-js_shared__"],f=(a=/[^.]+$/.exec(c&&c.keys&&c.keys.IE_PROTO||""))?"Symbol(src)_1."+a:"",d=i("b42f1d64"),h=o._(d),p=i("fa0f50e8"),m=o._(p),g=/^\[object .+?Constructor\]$/,v=Object.prototype,y=Function.prototype.toString,_=v.hasOwnProperty,b=RegExp("^"+y.call(_).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function x(n,r){var i=null==n?void 0:n[r];return(0,h.default)(i)&&(!f||!(f in i))&&((0,l.default)(i)?b:g).test((0,m.default)(i))?i:void 0;}},c03e7baa:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});var a=function(n,r){return n===r||n!=n&&r!=r;};},c0d77826:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return f;}});var a=i("777fffbe"),o=a._(i("9b84be4b")),s=i("553ee311"),l=a._(i("6654a076")),u=i("8970bd89"),c=i("07cf43fc");class f extends l.default{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,SHAPE:10,EXTRUDE:11});}getCommonUniformsInfo(){let{strokeOpacity:n=1,strokeWidth:r=0,blend:i,blur:a=0,raisingHeight:o=0,heightfixed:s=!1,unit:l="pixel"}=this.layer.getLayerConfig(),u=this.getAnimateUniforms().u_time;isNaN(u)&&(u=-1);let f={u_blur_height_fixed:[a,Number(o),Number(s)],u_stroke_width:r,u_additive:"additive"===i?1:0,u_stroke_opacity:n,u_size_unit:c.SizeUnitType[l],u_time:u,u_animate:this.getAnimateUniforms().u_animate};return this.getUniformsBufferInfo(f);}getAnimateUniforms(){let{animateOption:n={enable:!1}}=this.layer.getLayerConfig();return{u_animate:this.animateOption2Array(n),u_time:this.layer.getLayerAnimateTime()};}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),u.PointFillTriangulation);}initModels(){var n=this;return(0,o.default)(function*(){return n.buildModels();})();}buildModels(){var n=this;return(0,o.default)(function*(){let{frag:r,vert:i,type:a}=n.getShaders();return n.layer.triangulation=u.PointFillTriangulation,n.initUniformsBuffer(),[(yield n.layer.buildLayerModel({moduleName:a,vertexShader:i,fragmentShader:r,defines:n.getDefines(),inject:n.getInject(),triangulation:u.PointFillTriangulation,depth:{enable:!1}}))];})();}getShaders(){return{frag:"\nlayout(std140) uniform commonUniforms {\n  vec3 u_blur_height_fixed;\n  float u_stroke_width;\n  float u_additive;\n  float u_stroke_opacity;\n  float u_size_unit;\n  float u_time;\n  vec4 u_animate;\n};\n\nin vec4 v_color;\nin vec4 v_stroke;\nin vec4 v_data;\nin float v_radius;\n\n#pragma include \"scene_uniforms\"\n#pragma include \"sdf_2d\"\n#pragma include \"picking\"\n\nout vec4 outputColor;\n\nvoid main() {\n  int shape = int(floor(v_data.w + 0.5));\n  lowp float antialiasblur = v_data.z;\n  float r = v_radius / (v_radius + u_stroke_width);\n\n  float outer_df;\n  float inner_df;\n  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'\n  if (shape == 0) {\n    outer_df = sdCircle(v_data.xy, 1.0);\n    inner_df = sdCircle(v_data.xy, r);\n  } else if (shape == 1) {\n    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);\n    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);\n  } else if (shape == 2) {\n    outer_df = sdBox(v_data.xy, vec2(1.));\n    inner_df = sdBox(v_data.xy, vec2(r));\n  } else if (shape == 3) {\n    outer_df = sdPentagon(v_data.xy, 0.8);\n    inner_df = sdPentagon(v_data.xy, r * 0.8);\n  } else if (shape == 4) {\n    outer_df = sdHexagon(v_data.xy, 0.8);\n    inner_df = sdHexagon(v_data.xy, r * 0.8);\n  } else if (shape == 5) {\n    outer_df = sdOctogon(v_data.xy, 1.0);\n    inner_df = sdOctogon(v_data.xy, r);\n  } else if (shape == 6) {\n    outer_df = sdHexagram(v_data.xy, 0.52);\n    inner_df = sdHexagram(v_data.xy, r * 0.52);\n  } else if (shape == 7) {\n    outer_df = sdRhombus(v_data.xy, vec2(1.0));\n    inner_df = sdRhombus(v_data.xy, vec2(r));\n  } else if (shape == 8) {\n    outer_df = sdVesica(v_data.xy, 1.1, 0.8);\n    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);\n  }\n\n  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);\n\n  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(\n    antialiasblur,\n    0.0,\n    inner_df\n  );\n\n  float PI = 3.14159;\n  float N_RINGS = 3.0;\n  float FREQ = 1.0;\n\n  if(u_stroke_width < 0.01) {\n    outputColor = v_color;\n  } else {\n    outputColor = mix(v_color, v_stroke * u_stroke_opacity, color_t);\n  }\n  float intensity = 1.0;\n  if(u_time!=-1.0){\n    //wave\u76F8\u5173\u903B\u8F91\n    float d = length(v_data.xy);\n    if(d > 0.5) {\n      discard;\n    }\n    intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_animate.z - u_animate.y * u_time)), 0.0, 1.0);\n  }\n\n  if(u_additive > 0.0) {\n    outputColor *= opacity_t;\n    outputColor *= intensity;//wave\n    outputColor = filterColorAlpha(outputColor, outputColor.a);\n  } else {\n    outputColor.a *= opacity_t;\n    outputColor.a *= intensity;//wave \n    outputColor = filterColor(outputColor);\n  }\n   // \u4F5C\u4E3A mask \u6A21\u677F\u65F6\u9700\u8981\u4E22\u5F03\u900F\u660E\u7684\u50CF\u7D20\n  if(outputColor.a < 0.01) {\n    discard;\n  } \n}\n",vert:'layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;\nlayout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;\nlayout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;\nlayout(location = ATTRIBUTE_LOCATION_SHAPE) in float a_Shape;\nlayout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;\n\nlayout(std140) uniform commonUniforms {\n  vec3 u_blur_height_fixed;\n  float u_stroke_width;\n  float u_additive;\n  float u_stroke_opacity;\n  float u_size_unit;\n  float u_time;\n  vec4 u_animate;\n};\n\nout vec4 v_color;\nout vec4 v_stroke;\nout vec4 v_data;\nout float v_radius;\n\n#pragma include "projection"\n#pragma include "picking"\n#pragma include "rotation_2d"\n\nvoid main() {\n  // \u900F\u660E\u5EA6\u8BA1\u7B97\n   v_stroke = stroke;\n  vec3 extrude = a_Extrude;\n  float shape_type = a_Shape;\n  /*\n  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F\n  *  u_meter2coord \u5728\u7B49\u9762\u79EF\u5927\u5C0F\u7684\u65F6\u5019\u8BBE\u7F6E\u5355\u4F4D\n  */\n  float newSize = setPickingSize(a_Size);\n  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;\n\n\n\n  // unpack color(vec2)\n  v_color = vec4(a_Color.xyz, a_Color.w * opacity);\n\n  if(u_size_unit == 1.0) {\n    newSize = newSize  * u_PixelsPerMeter.z;\n  }\n\n   v_radius = newSize;\n\n  // anti-alias\n  //  float antialiased_blur = -max(u_blur, antialiasblur);\n  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur_height_fixed.x);\n\n  vec2 offset = (extrude.xy * (newSize + u_stroke_width) + u_offsets);\n\n  offset = project_pixel(offset);\n  offset = rotate_matrix(offset,rotation);\n\n  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F\n  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);\n\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0), a_Position64Low);\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));\n\n  float raisingHeight = u_blur_height_fixed.y;\n\n  if(u_blur_height_fixed.z < 1.0) { // false\n    raisingHeight = project_pixel(u_blur_height_fixed.y);\n  } else {\n     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n      raisingHeight = u_blur_height_fixed.y * mapboxZoomScale;\n    }\n  }\n\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));\n\n  setPickingColor(a_PickingColor);\n}\n',type:"pointFill"};}animateOption2Array(n){return[n.enable?0:1,n.speed||1,n.rings||3,0];}registerBuiltinAttributes(){let n=this.layer.getLayerConfig().shape2d;this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:s.AttributeType.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:s.gl.DYNAMIC_DRAW,data:[],type:s.gl.FLOAT},size:3,update:(n,r,i,a)=>{let o=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],s=a%4*3;return[o[s],o[s+1],o[s+2]];}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:s.AttributeType.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:s.gl.DYNAMIC_DRAW,data:[],type:s.gl.FLOAT},size:1,update:n=>{let{size:r=5}=n;return Array.isArray(r)?[r[0]]:[r];}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:s.AttributeType.Attribute,descriptor:{name:"a_Shape",shaderLocation:this.attributeLocation.SHAPE,buffer:{usage:s.gl.DYNAMIC_DRAW,data:[],type:s.gl.FLOAT},size:1,update:r=>{let{shape:i=2}=r;return[n.indexOf(i)];}}});}}},c0dbcf45:function(n,r,i){"use strict";var a=i("89a0cb41").default;Object.defineProperty(r,"__esModule",{value:!0}),r.getTwoToneColor=function(){var n=s.default.getTwoToneColors();return n.calculated?[n.primaryColor,n.secondaryColor]:n.primaryColor;},r.setTwoToneColor=function(n){var r=(0,l.normalizeTwoToneColors)(n),i=(0,o.default)(r,2),a=i[0],u=i[1];return s.default.setTwoToneColors({primaryColor:a,secondaryColor:u});};var o=a(i("73688796")),s=a(i("df272f3d")),l=i("2247dc85");},c165292c:function(n,r,i){"use strict";function a(n,r,i){i=i||2;var a,p,m,y,b,x,E,w=r&&r.length,S=w?r[0]*i:n.length,T=o(n,0,S,i,!0),A=[];if(!T||T.next===T.prev)return A;if(w&&(T=function(n,r,i,a){var u,d,h,p,m,y=[];for(u=0,d=r.length;u<d;u++)h=r[u]*a,p=u<d-1?r[u+1]*a:n.length,(m=o(n,h,p,a,!1))===m.next&&(m.steiner=!0),y.push(function(n){var r=n,i=n;do(r.x<i.x||r.x===i.x&&r.y<i.y)&&(i=r),r=r.next;while(r!==n)return i;}(m));for(y.sort(l),u=0;u<y.length;u++)i=function(n,r){var i=function(n,r){var i,a,o,s=r,l=n.x,u=n.y,d=-1/0;do{if(u<=s.y&&u>=s.next.y&&s.next.y!==s.y){var h=s.x+(u-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(h<=l&&h>d&&(d=h,o=s.x<s.next.x?s:s.next,h===l))return o;}s=s.next;}while(s!==r)if(!o)return null;var p,m=o,v=o.x,y=o.y,_=1/0;s=o;do l>=s.x&&s.x>=v&&l!==s.x&&c(u<y?l:d,u,v,y,u<y?d:l,u,s.x,s.y)&&(p=Math.abs(u-s.y)/(l-s.x),g(s,n)&&(p<_||p===_&&(s.x>o.x||s.x===o.x&&(i=o,a=s,0>f(i.prev,i,a.prev)&&0>f(a.next,i,i.next))))&&(o=s,_=p)),s=s.next;while(s!==m)return o;}(n,r);if(!i)return r;var a=v(i,n);return s(a,a.next),s(i,i.next);}(y[u],i);return i;}(n,r,T,i)),n.length>80*i){a=m=n[0],p=y=n[1];for(var C=i;C<S;C+=i)b=n[C],x=n[C+1],b<a&&(a=b),x<p&&(p=x),b>m&&(m=b),x>y&&(y=x);E=0!==(E=Math.max(m-a,y-p))?32767/E:0;}return function n(r,i,a,o,l,p,m){if(r){!m&&p&&function(n,r,i,a){var o=n;do 0===o.z&&(o.z=u(o.x,o.y,r,i,a)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==n)o.prevZ.nextZ=null,o.prevZ=null,function(n){var r,i,a,o,s,l,u,c,f=1;do{for(i=n,n=null,s=null,l=0;i;){for(l++,a=i,u=0,r=0;r<f&&(u++,a=a.nextZ);r++);for(c=f;u>0||c>0&&a;)0!==u&&(0===c||!a||i.z<=a.z)?(o=i,i=i.nextZ,u--):(o=a,a=a.nextZ,c--),s?s.nextZ=o:n=o,o.prevZ=s,s=o;i=a;}s.nextZ=null,f*=2;}while(l>1)}(o);}(r,o,l,p);for(var y,b,x=r;r.prev!==r.next;){if(y=r.prev,b=r.next,p?function(n,r,i,a){var o=n.prev,s=n.next;if(f(o,n,s)>=0)return!1;for(var l=o.x,d=n.x,h=s.x,p=o.y,m=n.y,g=s.y,v=l<d?l<h?l:h:d<h?d:h,y=p<m?p<g?p:g:m<g?m:g,_=l>d?l>h?l:h:d>h?d:h,b=p>m?p>g?p:g:m>g?m:g,x=u(v,y,r,i,a),E=u(_,b,r,i,a),w=n.prevZ,S=n.nextZ;w&&w.z>=x&&S&&S.z<=E;){if(w.x>=v&&w.x<=_&&w.y>=y&&w.y<=b&&w!==o&&w!==s&&c(l,p,d,m,h,g,w.x,w.y)&&f(w.prev,w,w.next)>=0||(w=w.prevZ,S.x>=v&&S.x<=_&&S.y>=y&&S.y<=b&&S!==o&&S!==s&&c(l,p,d,m,h,g,S.x,S.y)&&f(S.prev,S,S.next)>=0))return!1;S=S.nextZ;}for(;w&&w.z>=x;){if(w.x>=v&&w.x<=_&&w.y>=y&&w.y<=b&&w!==o&&w!==s&&c(l,p,d,m,h,g,w.x,w.y)&&f(w.prev,w,w.next)>=0)return!1;w=w.prevZ;}for(;S&&S.z<=E;){if(S.x>=v&&S.x<=_&&S.y>=y&&S.y<=b&&S!==o&&S!==s&&c(l,p,d,m,h,g,S.x,S.y)&&f(S.prev,S,S.next)>=0)return!1;S=S.nextZ;}return!0;}(r,o,l,p):function(n){var r=n.prev,i=n.next;if(f(r,n,i)>=0)return!1;for(var a=r.x,o=n.x,s=i.x,l=r.y,u=n.y,d=i.y,h=a<o?a<s?a:s:o<s?o:s,p=l<u?l<d?l:d:u<d?u:d,m=a>o?a>s?a:s:o>s?o:s,g=l>u?l>d?l:d:u>d?u:d,v=i.next;v!==r;){if(v.x>=h&&v.x<=m&&v.y>=p&&v.y<=g&&c(a,l,o,u,s,d,v.x,v.y)&&f(v.prev,v,v.next)>=0)return!1;v=v.next;}return!0;}(r)){i.push(y.i/a|0),i.push(r.i/a|0),i.push(b.i/a|0),_(r),r=b.next,x=b.next;continue;}if((r=b)===x){m?1===m?n(r=function(n,r,i){var a=n;do{var o=a.prev,l=a.next.next;!d(o,l)&&h(o,a,a.next,l)&&g(o,l)&&g(l,o)&&(r.push(o.i/i|0),r.push(a.i/i|0),r.push(l.i/i|0),_(a),_(a.next),a=n=l),a=a.next;}while(a!==n)return s(a);}(s(r),i,a),i,a,o,l,p,2):2===m&&function(r,i,a,o,l,u){var c=r;do{for(var p,m,y=c.next.next;y!==c.prev;){if(c.i!==y.i&&(p=c,m=y,p.next.i!==m.i&&p.prev.i!==m.i&&!function(n,r){var i=n;do{if(i.i!==n.i&&i.next.i!==n.i&&i.i!==r.i&&i.next.i!==r.i&&h(i,i.next,n,r))return!0;i=i.next;}while(i!==n)return!1;}(p,m)&&(g(p,m)&&g(m,p)&&function(n,r){var i=n,a=!1,o=(n.x+r.x)/2,s=(n.y+r.y)/2;do i.y>s!=i.next.y>s&&i.next.y!==i.y&&o<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(a=!a),i=i.next;while(i!==n)return a;}(p,m)&&(f(p.prev,p,m.prev)||f(p,m.prev,m))||d(p,m)&&f(p.prev,p,p.next)>0&&f(m.prev,m,m.next)>0))){var _=v(c,y);c=s(c,c.next),_=s(_,_.next),n(c,i,a,o,l,u,0),n(_,i,a,o,l,u,0);return;}y=y.next;}c=c.next;}while(c!==r)}(r,i,a,o,l,p):n(s(r),i,a,o,l,p,1);break;}}}}(T,A,i,a,p,E,0),A;}function o(n,r,i,a,o){var s,l;if(o===x(n,r,i,a)>0)for(s=r;s<i;s+=a)l=y(s,n[s],n[s+1],l);else for(s=i-a;s>=r;s-=a)l=y(s,n[s],n[s+1],l);return l&&d(l,l.next)&&(_(l),l=l.next),l;}function s(n,r){if(!n)return n;r||(r=n);var i,a=n;do if(i=!1,!a.steiner&&(d(a,a.next)||0===f(a.prev,a,a.next))){if(_(a),(a=r=a.prev)===a.next)break;i=!0;}else a=a.next;while(i||a!==r)return r;}function l(n,r){return n.x-r.x;}function u(n,r,i,a,o){return(n=((n=((n=((n=((n=(n-i)*o|0)|n<<8)&16711935)|n<<4)&252645135)|n<<2)&858993459)|n<<1)&1431655765)|(r=((r=((r=((r=((r=(r-a)*o|0)|r<<8)&16711935)|r<<4)&252645135)|r<<2)&858993459)|r<<1)&1431655765)<<1;}function c(n,r,i,a,o,s,l,u){return(o-l)*(r-u)>=(n-l)*(s-u)&&(n-l)*(a-u)>=(i-l)*(r-u)&&(i-l)*(s-u)>=(o-l)*(a-u);}function f(n,r,i){return(r.y-n.y)*(i.x-r.x)-(r.x-n.x)*(i.y-r.y);}function d(n,r){return n.x===r.x&&n.y===r.y;}function h(n,r,i,a){var o=m(f(n,r,i)),s=m(f(n,r,a)),l=m(f(i,a,n)),u=m(f(i,a,r));return!!(o!==s&&l!==u||0===o&&p(n,i,r)||0===s&&p(n,a,r)||0===l&&p(i,n,a)||0===u&&p(i,r,a));}function p(n,r,i){return r.x<=Math.max(n.x,i.x)&&r.x>=Math.min(n.x,i.x)&&r.y<=Math.max(n.y,i.y)&&r.y>=Math.min(n.y,i.y);}function m(n){return n>0?1:n<0?-1:0;}function g(n,r){return 0>f(n.prev,n,n.next)?f(n,r,n.next)>=0&&f(n,n.prev,r)>=0:0>f(n,r,n.prev)||0>f(n,n.next,r);}function v(n,r){var i=new b(n.i,n.x,n.y),a=new b(r.i,r.x,r.y),o=n.next,s=r.prev;return n.next=r,r.prev=n,i.next=o,o.prev=i,a.next=i,i.prev=a,s.next=a,a.prev=s,a;}function y(n,r,i,a){var o=new b(n,r,i);return a?(o.next=a.next,o.prev=a,a.next.prev=o,a.next=o):(o.prev=o,o.next=o),o;}function _(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ);}function b(n,r,i){this.i=n,this.x=r,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1;}function x(n,r,i,a){for(var o=0,s=r,l=i-a;s<i;s+=a)o+=(n[l]-n[s])*(n[s+1]+n[l+1]),l=s;return o;}n.exports=a,n.exports.default=a,a.deviation=function(n,r,i,a){var o=r&&r.length,s=o?r[0]*i:n.length,l=Math.abs(x(n,0,s,i));if(o)for(var u=0,c=r.length;u<c;u++){var f=r[u]*i,d=u<c-1?r[u+1]*i:n.length;l-=Math.abs(x(n,f,d,i));}var h=0;for(u=0;u<a.length;u+=3){var p=a[u]*i,m=a[u+1]*i,g=a[u+2]*i;h+=Math.abs((n[p]-n[g])*(n[m+1]-n[p+1])-(n[p]-n[m])*(n[g+1]-n[p+1]));}return 0===l&&0===h?0:Math.abs((h-l)/l);},a.flatten=function(n){for(var r=n[0][0].length,i={vertices:[],holes:[],dimensions:r},a=0,o=0;o<n.length;o++){for(var s=0;s<n[o].length;s++)for(var l=0;l<r;l++)i.vertices.push(n[o][s][l]);o>0&&(a+=n[o-1].length,i.holes.push(a));}return i;};},c187f726:function(n,r,i){"use strict";var a=i("b0af5eb7").forEach,o=i("013645fb"),s=i("0ac9c851"),l=i("805ebd2d"),u=i("1aa293eb"),c=i("10039389"),f=i("8204d5bc"),d=i("31280e27"),h=i("4ae84d66"),p=i("8a388190"),m=i("da92a9dc");function g(n){return Array.isArray(n)||void 0!==n.length;}function v(n){if(Array.isArray(n))return n;var r=[];return a(n,function(n){r.push(n);}),r;}function y(n){return n&&1===n.nodeType;}function _(n,r,i){var a=n[r];return null==a&&void 0!==i?i:a;}n.exports=function(n){if((n=n||{}).idHandler)r={get:function(r){return n.idHandler.get(r,!0);},set:n.idHandler.set};else{var r,i;r=u({idGenerator:l(),stateHandler:h});}var b=n.reporter;b||(b=c(!1===b));var x=_(n,"batchProcessor",d({reporter:b})),E={};E.callOnAdd=!!_(n,"callOnAdd",!0),E.debug=!!_(n,"debug",!1);var w=s(r),S=o({stateHandler:h}),T=_(n,"strategy","object"),A=_(n,"important",!1),C={reporter:b,batchProcessor:x,stateHandler:h,idHandler:r,important:A};if("scroll"===T&&(f.isLegacyOpera()?(b.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),T="object"):f.isIE(9)&&(b.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),T="object")),"scroll"===T)i=m(C);else if("object"===T)i=p(C);else throw Error("Invalid strategy name: "+T);var O={};return{listenTo:function(n,o,s){function l(n){a(w.get(n),function(r){r(n);});}function u(n,r,i){w.add(r,i),n&&i(r);}if(s||(s=o,o=n,n={}),!o)throw Error("At least one element required.");if(!s)throw Error("Listener required.");if(y(o))o=[o];else{if(!g(o))return b.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");o=v(o);}var c=0,f=_(n,"callOnAdd",E.callOnAdd),d=_(n,"onReady",function(){}),p=_(n,"debug",E.debug);a(o,function(n){h.getState(n)||(h.initState(n),r.set(n));var m=r.get(n);if(p&&b.log("Attaching listener to element",m,n),!S.isDetectable(n)){if(p&&b.log(m,"Not detectable."),S.isBusy(n)){p&&b.log(m,"System busy making it detectable"),u(f,n,s),O[m]=O[m]||[],O[m].push(function(){++c===o.length&&d();});return;}return p&&b.log(m,"Making detectable..."),S.markBusy(n,!0),i.makeDetectable({debug:p,important:A},n,function(n){if(p&&b.log(m,"onElementDetectable"),h.getState(n)){S.markAsDetectable(n),S.markBusy(n,!1),i.addListener(n,l),u(f,n,s);var r=h.getState(n);if(r&&r.startSize){var g=n.offsetWidth,v=n.offsetHeight;(r.startSize.width!==g||r.startSize.height!==v)&&l(n);}O[m]&&a(O[m],function(n){n();});}else p&&b.log(m,"Element uninstalled before being detectable.");delete O[m],++c===o.length&&d();});}p&&b.log(m,"Already detecable, adding listener."),u(f,n,s),c++;}),c===o.length&&d();},removeListener:w.removeListener,removeAllListeners:w.removeAllListeners,uninstall:function(n){if(!n)return b.error("At least one element is required.");if(y(n))n=[n];else{if(!g(n))return b.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");n=v(n);}a(n,function(n){w.removeAllListeners(n),i.uninstall(n),h.cleanState(n);});},initDocument:function(n){i.initDocument&&i.initDocument(n);}};};},c20ab062:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return R;}});var a=i("777fffbe"),o=i("bf98e12a"),s=a._(o),l=i("2cc7f81c"),u=a._(l),c=(0,s.default)(u.default,"DataView"),f=i("06753dad"),d=a._(f),h=(0,s.default)(u.default,"Promise"),p=(0,s.default)(u.default,"Set"),m=(0,s.default)(u.default,"WeakMap"),g=i("480dd2d5"),v=a._(g),y=i("fa0f50e8"),_=a._(y),b="[object Map]",x="[object Promise]",E="[object Set]",w="[object WeakMap]",S="[object DataView]",T=(0,_.default)(c),A=(0,_.default)(d.default),C=(0,_.default)(h),O=(0,_.default)(p),M=(0,_.default)(m),R=v.default;(c&&R(new c(new ArrayBuffer(1)))!=S||d.default&&R(new d.default)!=b||h&&R(h.resolve())!=x||p&&R(new p)!=E||m&&R(new m)!=w)&&(R=function(n){var r=(0,v.default)(n),i="[object Object]"==r?n.constructor:void 0,a=i?(0,_.default)(i):"";if(a)switch(a){case T:return S;case A:return b;case C:return x;case O:return E;case M:return w;}return r;});},c2287686:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"Linear",{enumerable:!0,get:function(){return u;}});var a=i("777fffbe")._(i("8704c632")),o=i("32f028e7"),s=i("8c0d48bf"),l=i("92d64018");class u extends o.Continuous{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:s.createInterpolateValue,tickMethod:l.d3Ticks,tickCount:5};}chooseTransforms(){return[a.default,a.default];}clone(){return new u(this.options);}}},c25722f9:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"Constant",{enumerable:!0,get:function(){return l;}});var a=i("777fffbe")._(i("1f338b89")),o=i("92d64018"),s=i("75aabd79");class l extends s.Base{getDefaultOptions(){return{range:[0],domain:[0,1],unknown:void 0,tickCount:5,tickMethod:o.d3Ticks};}map(n){let[r]=this.options.range;return void 0!==r?r:this.options.unknown;}invert(n){let[r]=this.options.range;return n===r&&void 0!==r?this.options.domain:[];}getTicks(){let{tickMethod:n,domain:r,tickCount:i}=this.options,[o,s]=r;return(0,a.default)(o)&&(0,a.default)(s)?n(o,s,i):[];}clone(){return new l(this.options);}}},c2731b3b:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{curveRadialLinear:function(){return a;},default:function(){return s;}});var a=s(i("777fffbe")._(i("352bae92")).default);function o(n){this._curve=n;}function s(n){function r(r){return new o(n(r));}return r._curve=n,r;}o.prototype={areaStart:function(){this._curve.areaStart();},areaEnd:function(){this._curve.areaEnd();},lineStart:function(){this._curve.lineStart();},lineEnd:function(){this._curve.lineEnd();},point:function(n,r){this._curve.point(r*Math.sin(n),-(r*Math.cos(n)));}};},c357370b:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{ChartLoading:function(){return b;},ErrorBoundary:function(){return E;},createNode:function(){return v;}});var a,o,s,l,u=i("852bbaa9"),c=i("609f48be"),f=u._(c),d=i("6b27451a"),h=i("792e90bc");this&&this.__awaiter,this&&this.__generator;var p=f.version||"",m="__rc_react_root__";try{parseInt(p.split(".")[0],10)>=18?o=d.createRoot:(s=h.render,h.unmountComponentAtNode);}catch(n){}var g=new Map;"undefined"!=typeof document&&g.set("tooltip",document.createElement("div"));var v=function(n,r){void 0===r&&(r=!1);var i,a,l=null;if(r)l=g.get("tooltip");else if(l=document.createElement("div"),null==n?void 0:n.key){var u=g.get(n.key);u?l=u:g.set(n.key,l);}return i=n,a=l,o?(a[m]||(a[m]=o(a)),a[m].render(i)):function(n,r){if(s)s(n,r);else throw Error("ReactDOM.render is not available in this React version");}(i,a),l;},y=this&&this.__assign||function(){return(y=Object.assign||function(n){for(var r,i=1,a=arguments.length;i<a;i++)for(var o in r=arguments[i])Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n;}).apply(this,arguments);},_=function(n,r){if(void 0===r&&(r={}),"undefined"==typeof document)return"loading";var i="";r&&Object.keys(r).forEach(function(n){i+="".concat(n,": ").concat(r[n],";\n");});var a=n.attachShadow({mode:"open"}),o=document.createElement("div"),s=document.createElement("style");s.innerHTML=".loading {\n    display: inline-block;\n    position: relative;\n    width: 80px;\n    height: 80px;\n  }\n  .loading div {\n    position: absolute;\n    top: 33px;\n    width: 13px;\n    height: 13px;\n    border-radius: 50%;\n    background: #ccc;\n    animation-timing-function: cubic-bezier(0, 1, 1, 0);\n    ".concat(i,"\n  }\n  .loading div:nth-child(1) {\n    left: 8px;\n    animation: loading1 0.6s infinite;\n  }\n  .loading div:nth-child(2) {\n    left: 8px;\n    animation: loading2 0.6s infinite;\n  }\n  .loading div:nth-child(3) {\n    left: 32px;\n    animation: loading2 0.6s infinite;\n  }\n  .loading div:nth-child(4) {\n    left: 56px;\n    animation: loading3 0.6s infinite;\n  }\n  @keyframes loading1 {\n    0% {\n      transform: scale(0);\n    }\n    100% {\n      transform: scale(1);\n    }\n  }\n  @keyframes loading3 {\n    0% {\n      transform: scale(1);\n    }\n    100% {\n      transform: scale(0);\n    }\n  }\n  @keyframes loading2 {\n    0% {\n      transform: translate(0, 0);\n    }\n    100% {\n      transform: translate(24px, 0);\n    }\n  }\n  "),o.classList.add("loading"),o.innerHTML="<div></div><div></div><div></div><div></div>",a.appendChild(s),a.appendChild(o);},b=function(n){var r=n.loadingTemplate,i=n.theme,a=n.loading,o=f.default.useRef(null),s="object"==typeof a?a:{},l=s.container,u=s.icon,c=void 0===u?{}:u;return f.default.useEffect(function(){!r&&o.current&&_(o.current,c);},[]),f.default.createElement("div",{className:"charts-loading-container",style:y({position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,background:"dark"===(void 0===i?"light":i)?"rgb(20, 20, 20)":"rgb(255, 255, 255)"},void 0===l?{}:l)},r||f.default.createElement("div",{ref:o}));},x=this&&this.__extends||(a=function(n,r){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,r){n.__proto__=r;}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);})(n,r);},function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n;}a(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i);}),E=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.state={hasError:!1},r.renderError=function(n){var i=r.props.errorTemplate;return"function"==typeof i?i(n):i||f.default.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",n.message);},r;}return x(r,n),r.getDerivedStateFromError=function(n){return{hasError:!0,error:n};},r.getDerivedStateFromProps=function(n,r){return r.children!==n.children?{children:n.children,hasError:!1,error:void 0}:null;},r.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):f.default.createElement(f.Fragment,null,this.props.children);},r;}(f.default.Component),w=i("d8554caa"),S=this&&this.__spreadArray||function(n,r,i){if(i||2==arguments.length)for(var a,o=0,s=r.length;o<s;o++)!a&&o in r||(a||(a=Array.prototype.slice.call(r,0,o)),a[o]=r[o]);return n.concat(a||Array.prototype.slice.call(r));};(0,w.memoize)(function(n,r){void 0===r&&(r={});var i=r.fontSize,a=r.fontFamily,o=r.fontWeight,s=r.fontStyle,u=r.fontVariant,c=(l||(l=document.createElement("canvas").getContext("2d")),l);return c.font=[s,o,u,"".concat(i,"px"),void 0===a?"sans-serif":a].join(" "),c.measureText((0,w.isString)(n)?n:"");},function(n,r){return void 0===r&&(r={}),S([n],(0,w.values)(r),!0).join("");});},c35e4cf6:function(n,r,i){var a=i("614a8116");n.exports=function(n,r){if(n){if("string"==typeof n)return a(n,r);var i=({}).toString.call(n).slice(8,-1);return"Object"===i&&n.constructor&&(i=n.constructor.name),"Map"===i||"Set"===i?Array.from(n):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(n,r):void 0;}},n.exports.__esModule=!0,n.exports.default=n.exports;},c3f5a38b:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),r.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};},c4157706:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return p;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("7cfeda15"),l=a._(s),u=i("609f48be"),c=o._(u),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},d=i("887aaf6c"),h=a._(d),p=c.forwardRef(function(n,r){return c.createElement(h.default,(0,l.default)({},n,{ref:r,icon:f}));});},c4368857:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{documentOf:function(){return eo;},useLibrary:function(){return ea;}});var a=i("777fffbe"),o=i("f5373dff"),s=i("39cdd665"),l=i("42fb15d0"),u=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let c=n=>{let{important:r={}}=n,i=u(n,["important"]);return a=>{let{theme:o,coordinate:u,scales:c}=a;return(0,s.LinearAxis)(Object.assign(Object.assign(Object.assign({},i),function(n){let r=n%(2*Math.PI);return r===Math.PI/2?{titleTransform:"translate(0, 50%)"}:r>-Math.PI/2&&r<Math.PI/2?{titleTransform:"translate(50%, 0)"}:r>Math.PI/2&&r<3*Math.PI/2?{titleTransform:"translate(-50%, 0)"}:{};}(n.orientation)),{important:Object.assign(Object.assign({},function(n,r,i,a){let{radar:o}=n,[s]=a,u=s.getOptions().name,[c,f]=(0,l.angleOf)(i),{axisRadar:d={}}=r;return Object.assign(Object.assign({},d),{grid:"position"===u,gridConnect:"line",gridControlAngles:Array(o.count).fill(0).map((n,r)=>(f-c)/o.count*r)});}(n,o,u,c)),r)}))(a);};};c.props=Object.assign(Object.assign({},s.LinearAxis.props),{defaultPosition:"center"});var f=i("2de3468c");let d=n=>(...r)=>(0,f.LegendContinuous)(Object.assign({},{block:!0},n))(...r);d.props=Object.assign(Object.assign({},f.LegendContinuous.props),{defaultPosition:"top",defaultOrientation:"horizontal"});var h=i("da9a34de");let p=n=>r=>{let{scales:i}=r,a=(0,h.scaleOf)(i,"size");return(0,f.LegendContinuous)(Object.assign({},{type:"size",data:a.getTicks().map((n,r)=>({value:n,label:String(n)}))},n))(r);};p.props=Object.assign(Object.assign({},f.LegendContinuous.props),{defaultPosition:"top",defaultOrientation:"horizontal"});let m=n=>p(Object.assign({},{block:!0},n));m.props=Object.assign(Object.assign({},f.LegendContinuous.props),{defaultPosition:"top",defaultOrientation:"horizontal"});var g=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let v=({static:n=!1}={})=>r=>{let{width:i,height:a,depth:o,paddingLeft:s,paddingRight:l,paddingTop:u,paddingBottom:c,padding:f,inset:d,insetLeft:h,insetTop:p,insetRight:m,insetBottom:v,margin:y,marginLeft:_,marginBottom:b,marginTop:x,marginRight:E,data:w,coordinate:S,theme:T,component:A,interaction:C,x:O,y:M,z:R,key:P,frame:k,labelTransform:I,parentKey:L,clip:N,viewStyle:D,title:F}=r,B=g(r,["width","height","depth","paddingLeft","paddingRight","paddingTop","paddingBottom","padding","inset","insetLeft","insetTop","insetRight","insetBottom","margin","marginLeft","marginBottom","marginTop","marginRight","data","coordinate","theme","component","interaction","x","y","z","key","frame","labelTransform","parentKey","clip","viewStyle","title"]);return[Object.assign(Object.assign({type:"standardView",x:O,y:M,z:R,key:P,width:i,height:a,depth:o,padding:f,paddingLeft:s,paddingRight:l,paddingTop:u,inset:d,insetLeft:h,insetTop:p,insetRight:m,insetBottom:v,paddingBottom:c,theme:T,coordinate:S,component:A,interaction:C,frame:k,labelTransform:I,margin:y,marginLeft:_,marginBottom:b,marginTop:x,marginRight:E,parentKey:L,clip:N,style:D},!n&&{title:F}),{marks:[Object.assign(Object.assign(Object.assign({},B),{key:`${P}-0`,data:w}),n&&{title:F})]})];};v.props={};var y=i("d7948920"),_=a._(y),b=i("715ff153"),x=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let E=()=>n=>{let{children:r}=n,i=x(n,["children"]);if(!Array.isArray(r))return[];let{data:a,scale:o={},axis:s={},legend:l={},encode:u={},transform:c=[]}=i,f=x(i,["data","scale","axis","legend","encode","transform"]),d=r.map(n=>{var{data:r,scale:i={},axis:f={},legend:d={},encode:h={},transform:p=[]}=n,m=x(n,["data","scale","axis","legend","encode","transform"]);return Object.assign({data:(0,b.mergeData)(r,a),scale:(0,_.default)({},o,i),encode:(0,_.default)({},u,h),transform:[...c,...p],axis:!!f&&!!s&&(0,_.default)({},s,f),legend:!!d&&!!l&&(0,_.default)({},l,d)},m);});return[Object.assign(Object.assign({},f),{marks:d,type:"standardView"})];};E.props={};var w=i("7d4c6398"),S=i("45669125"),T=i("abbe7005"),A=i("72baedf4"),C=i("cf1ac170"),O=a._(C),M=i("d70a5c58");function R(n,r,i,a){let o=r.length/2,s=r.slice(0,o),l=r.slice(o),u=(0,O.default)(s,(n,r)=>Math.abs(n[1]-l[r][1])),c=n=>[s[n][0],(s[n][1]+l[n][1])/2],f=c(u=Math.max(Math.min(u,o-2),1)),d=c(u-1),h=c(u+1),p=(0,M.angle)((0,M.sub)(h,d))/Math.PI*180;return{x:f[0],y:f[1],transform:`rotate(${p})`,textAlign:"center",textBaseline:"middle"};}function P(n,r,i,a){let{bounds:s}=i,[[l,u],[c,f]]=s,d=c-l,h=f-u;return(n=>{let{x:r,y:a}=n,s=(0,o.maybePercentage)(i.x,d),c=(0,o.maybePercentage)(i.y,h);return Object.assign(Object.assign({},n),{x:(s||r)+l,y:(c||a)+u});})("left"===n?{x:0,y:h/2,textAlign:"start",textBaseline:"middle"}:"right"===n?{x:d,y:h/2,textAlign:"end",textBaseline:"middle"}:"top"===n?{x:d/2,y:0,textAlign:"center",textBaseline:"top"}:"bottom"===n?{x:d/2,y:h,textAlign:"center",textBaseline:"bottom"}:"top-left"===n?{x:0,y:0,textAlign:"start",textBaseline:"top"}:"top-right"===n?{x:d,y:0,textAlign:"end",textBaseline:"top"}:"bottom-left"===n?{x:0,y:h,textAlign:"start",textBaseline:"bottom"}:"bottom-right"===n?{x:d,y:h,textAlign:"end",textBaseline:"bottom"}:{x:d/2,y:h/2,textAlign:"center",textBaseline:"middle"});}function k(n,r,i,a){let{y:o,y1:s,autoRotate:l,rotateToAlignArc:u}=i,c=a.getCenter(),{innerRadius:f,outerRadius:d,startAngle:h,endAngle:p}=(0,S.getArcObject)(a,r,[o,s]),m="inside"===n?(h+p)/2:p,g=L(m,l,u);return Object.assign(Object.assign({},(()=>{let[i,a]=r,[o,s]="inside"===n?I(c,m,f+(d-f)*.5):(0,M.mid)(i,a);return{x:o,y:s};})()),{textAlign:"inside"===n?"center":"start",textBaseline:"middle",rotate:g});}function I(n,r,i){return[n[0]+Math.sin(r)*i,n[1]-Math.cos(r)*i];}function L(n,r,i){if(!r)return 0;let a=i?0:0>Math.sin(n)?90:-90;return n/Math.PI*180+a;}function N(n){return void 0===n?null:n;}function D(n,r,i,a){let{bounds:o}=i,[s]=o;return{x:N(s[0]),y:N(s[1])};}function F(n,r,i,a){let{bounds:o}=i;return 1===o.length?D(n,r,i,a):((0,l.isRadial)(a)?k:(0,l.isCircular)(a)?function(n,r,i,a){let{y:o,y1:s,autoRotate:l,rotateToAlignArc:u,radius:c=.5,offset:f=0}=i,d=(0,S.getArcObject)(a,r,[o,s]),{startAngle:h,endAngle:p}=d,m=a.getCenter(),g=(h+p)/2,v=L(g,l,u),{innerRadius:y,outerRadius:_}=d,[b,x]=I(m,g,y+(_-y)*c+f);return Object.assign({x:b,y:x},{textAlign:"center",textBaseline:"middle",rotate:v});}:P)(n,r,i,a);}function B(n,r,i){let{innerRadius:a,outerRadius:o}=(0,S.getArcObject)(i,n,[r.y,r.y1]);return a+(o-a);}function j(n,r,i){let{startAngle:a,endAngle:o}=(0,S.getArcObject)(i,n,[r.y,r.y1]);return(a+o)/2;}function z(n,r,i,a){let{autoRotate:o,rotateToAlignArc:s,offset:u=0,connector:c=!0,connectorLength:f=u,connectorLength2:d=0,connectorDistance:h=0}=i,p=a.getCenter(),m=j(r,i,a),g=Math.sin(m)>0?1:-1,v=L(m,o,s),y={textAlign:g>0||(0,l.isRadial)(a)?"start":"end",textBaseline:"middle",rotate:v},_=B(r,i,a),[[b,x],[E,w],[S,T]]=function(n,r,i,a,o){let[s,l]=I(n,r,i),[u,c]=I(n,r,a);return[[s,l],[u,c],[u+(Math.sin(r)>0?1:-1)*o,c]];}(p,m,_,_+(c?f:u),c?d:0),A=c?+h*g:0,C=S+A;return Object.assign(Object.assign({x0:b,y0:x,x:S+A,y:T},y),{connector:c,connectorPoints:[[E-C,w-T],[S-C,T-T]]});}function U(n,r,i,a){let{bounds:o}=i;return 1===o.length?D(n,r,i,a):((0,l.isRadial)(a)?k:(0,l.isCircular)(a)?z:P)(n,r,i,a);}var V=i("944abdfb"),G=a._(V);function H(n,r={}){let{labelHeight:i=14,height:a}=r,o=(0,G.default)(n,n=>n.y),s=o.length,l=Array(s);for(let n=0;n<s;n++){let{y:r}=o[n];l[n]={y:r,y1:r+i,labels:[r]};}let u=!0;for(;u;){u=!1;for(let n=l.length-1;n>0;n--){let r=l[n],i=l[n-1];if(i.y1>r.y){u=!0,i.labels.push(...r.labels),l.splice(n,1),i.y1+=r.y1-r.y;let o=i.y1-i.y;i.y1=Math.max(Math.min(i.y1,a),o),i.y=i.y1-o;}}}let c=0;for(let n of l){let{y:r,labels:a}=n,s=r-i;for(let n of a){let r=o[c++],a=s+i-n;r.connectorPoints[0][1]-=a,r.y=s+i,s+=i;}}}function W(n,r){let i=(0,G.default)(n,n=>n.y),{height:a,labelHeight:o=14}=r,s=Math.ceil(a/o);if(i.length<=s)return H(i,r);let l=[];for(let n=0;n<i.length;n++)n<i.length-s?(i[n].opacity=0,i[n].connector=!1):l.push(i[n]);H(l,r);}var X=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let q=new WeakMap;function $(n,r,i,a,o,s){if(!(0,l.isCircular)(a))return{};if(q.has(r))return q.get(r);let u=s.map(n=>(function(n,r,i){let{connectorLength:a,connectorLength2:o,connectorDistance:s}=r,l=X(z("outside",n,r,i),[]),u=i.getCenter(),c=B(n,r,i),f=Math.sin(j(n,r,i))>0?1:-1,d=u[0]+(c+a+o+ +s)*f,{x:h}=l,p=d-h;return l.x+=p,l.connectorPoints[0][0]-=p,l;})(n,i,a)),{width:c,height:f}=a.getOptions(),d=u.filter(n=>n.x<c/2),h=u.filter(n=>n.x>=c/2),p=Object.assign(Object.assign({},o),{height:f});return W(d,p),W(h,p),u.forEach((n,r)=>q.set(s[r],n)),q.get(r);}var Y=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};function Z(n,r,i,a){if(!(0,l.isCircular)(a))return{};let{connectorLength:o,connectorLength2:s,connectorDistance:u}=i,c=Y(z("outside",r,i,a),[]),{x0:f,y0:d}=c,h=a.getCenter(),p=(0,l.getRadius)(a),m=(0,M.angleWithQuadrant)([f-h[0],d-h[1]]),g=Math.sin(m)>0?1:-1,[v,y]=I(h,m,p+o);return c.x=v+(s+u)*g,c.y=y,c;}var K={};i.e(K,{area:function(){return R;},bottom:function(){return F;},bottomLeft:function(){return F;},bottomRight:function(){return F;},inside:function(){return F;},left:function(){return F;},outside:function(){return U;},right:function(){return F;},spider:function(){return $;},surround:function(){return Z;},top:function(){return F;},topLeft:function(){return F;},topRight:function(){return F;}});var Q=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let J=(n,r)=>{let{coordinate:i,theme:a}=r,{render:o}=n;return(r,s,u,c)=>{let{text:f,x:d,y:h,transform:p="",transformOrigin:m,className:g=""}=s,v=Q(s,["text","x","y","transform","transformOrigin","className"]),y=function(n,r,i,a,o,s){let{position:u}=r,{render:c}=o,f=void 0!==u?u:(0,l.isCircular)(i)?"inside":(0,l.isTranspose)(i)?"right":"top",d=a[c?"htmlLabel":"inside"===f?"innerLabel":"label"],h=Object.assign({},d,r),p=K[(0,T.camelCase)(f)];if(!p)throw Error(`Unknown position: ${f}`);return Object.assign(Object.assign({},d),p(f,n,h,i,o,s));}(r,s,i,a,n,c),{rotate:_=0,transform:b=""}=y,x=Q(y,["rotate","transform"]);return(0,w.select)(new A.Advance).call(S.applyStyle,x).style("text",`${f}`).style("className",`${g} g2-label`).style("innerHTML",o?o(f,s.datum,s.index):void 0).style("labelTransform",`${b} rotate(${+_}) ${p}`.trim()).style("labelTransformOrigin",m).style("coordCenter",i.getCenter()).call(S.applyStyle,v).node();};};J.props={defaultMarker:"point"};var ee=i("49f29bec"),et=i("87c560a4");function en(n,r,i,a=n=>!0){return s=>{if(!a(s))return;i.emit(`plot:${n}`,s);let{target:l}=s;if(!l)return;let{className:u}=l;if("plot"===u)return;let c=(0,et.maybeRoot)(l,n=>"element"===n.className),f=(0,et.maybeRoot)(l,n=>"component"===n.className),d=(0,et.maybeRoot)(l,n=>"label"===n.className),h=c||f||d;if(!h)return;let{className:p,markType:m}=h,g=Object.assign(Object.assign({},s),{nativeEvent:!0});"element"===p?(g.data={data:(0,o.dataOf)(h,r)},i.emit(`element:${n}`,g),i.emit(`${m}:${n}`,g)):("label"===p?(g.data={data:h.attributes.datum},i.emit(`label:${n}`,g)):i.emit(`component:${n}`,g),i.emit(`${u}:${n}`,g));};}function er(){return(n,r,i)=>{let{container:a,view:o}=n,s=en(ee.ChartEvent.CLICK,o,i,n=>1===n.detail),l=en(ee.ChartEvent.DBLCLICK,o,i,n=>2===n.detail),u=en(ee.ChartEvent.POINTER_TAP,o,i),c=en(ee.ChartEvent.POINTER_DOWN,o,i),f=en(ee.ChartEvent.POINTER_UP,o,i),d=en(ee.ChartEvent.POINTER_OVER,o,i),h=en(ee.ChartEvent.POINTER_OUT,o,i),p=en(ee.ChartEvent.POINTER_MOVE,o,i),m=en(ee.ChartEvent.POINTER_ENTER,o,i),g=en(ee.ChartEvent.POINTER_LEAVE,o,i),v=en(ee.ChartEvent.POINTER_UPOUTSIDE,o,i),y=en(ee.ChartEvent.DRAG_START,o,i),_=en(ee.ChartEvent.DRAG,o,i),b=en(ee.ChartEvent.DRAG_END,o,i),x=en(ee.ChartEvent.DRAG_ENTER,o,i),E=en(ee.ChartEvent.DRAG_LEAVE,o,i),w=en(ee.ChartEvent.DRAG_OVER,o,i),S=en(ee.ChartEvent.DROP,o,i);return a.addEventListener("click",s),a.addEventListener("click",l),a.addEventListener("pointertap",u),a.addEventListener("pointerdown",c),a.addEventListener("pointerup",f),a.addEventListener("pointerover",d),a.addEventListener("pointerout",h),a.addEventListener("pointermove",p),a.addEventListener("pointerenter",m),a.addEventListener("pointerleave",g),a.addEventListener("pointerupoutside",v),a.addEventListener("dragstart",y),a.addEventListener("drag",_),a.addEventListener("dragend",b),a.addEventListener("dragenter",x),a.addEventListener("dragleave",E),a.addEventListener("dragover",w),a.addEventListener("drop",S),()=>{a.removeEventListener("click",s),a.removeEventListener("click",l),a.removeEventListener("pointertap",u),a.removeEventListener("pointerdown",c),a.removeEventListener("pointerup",f),a.removeEventListener("pointerover",d),a.removeEventListener("pointerout",h),a.removeEventListener("pointermove",p),a.removeEventListener("pointerenter",m),a.removeEventListener("pointerleave",g),a.removeEventListener("pointerupoutside",v),a.removeEventListener("dragstart",y),a.removeEventListener("drag",_),a.removeEventListener("dragend",b),a.removeEventListener("dragenter",x),a.removeEventListener("dragleave",E),a.removeEventListener("dragover",w),a.removeEventListener("drop",S);};};}er.props={reapplyWhenUpdate:!0};var ei=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};function ea(n,r){let i=Object.assign(Object.assign({},{"component.axisRadar":c,"component.axisLinear":s.LinearAxis,"component.axisArc":s.ArcAxis,"component.legendContinuousBlock":d,"component.legendContinuousBlockSize":m,"component.legendContinuousSize":p,"interaction.event":er,"composition.mark":v,"composition.view":E,"shape.label.label":J}),r),a=r=>{if("string"!=typeof r)return r;let a=`${n}.${r}`;return i[a]||(0,o.error)(`Unknown Component: ${a}`);};return[(n,r)=>{let{type:i}=n,s=ei(n,["type"]);i||(0,o.error)("Plot type is required!");let l=a(i);return null==l?void 0:l(s,r);},a];}function eo(n){let{canvas:r,group:i}=n;return(null==r?void 0:r.document)||(null==i?void 0:i.ownerDocument)||(0,o.error)("Cannot find library document");}},c502fa9c:function(n,r,i){"use strict";function a(n){if(!Array.isArray(n))return-1/0;var r=n.length;if(!r)return-1/0;for(var i=n[0],a=1;a<r;a++)i=Math.max(i,n[a]);return i;}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},c565fed6:function(n,r,i){n.exports=function(n,r){return null!=n&&r in Object(n);};},c62e4689:function(n,r,i){n.exports=function(n){return this.__data__.has(n);};},c7053f7d:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{Scene:function(){return eQ;}});var a=i("777fffbe"),o=i("d1751d7c"),s=i("8b24b58d");a._(s);var l=o._(i("df00ce18"),r),u=o._(i("553ee311"),r),c=o._(i("b55e4682"),r);o._(i("ff2c8414"),r);var f=i("97b08eac"),d=o._(i("9479dab9"),r),h=class{constructor(n,r){let{buffer:i,offset:a,stride:o,normalized:s,size:l,divisor:u,shaderLocation:c}=r;this.buffer=i,this.attribute={shaderLocation:c,buffer:i.get(),offset:a||0,stride:o||0,normalized:s||!1,divisor:u||0},l&&(this.attribute.size=l);}get(){return this.buffer;}updateBuffer(n){this.buffer.subData(n);}destroy(){this.buffer.destroy();}},p={[u.gl.FLOAT]:Float32Array,[u.gl.UNSIGNED_BYTE]:Uint8Array,[u.gl.SHORT]:Int16Array,[u.gl.UNSIGNED_SHORT]:Uint16Array,[u.gl.INT]:Int32Array,[u.gl.UNSIGNED_INT]:Uint32Array},m={[u.gl.POINTS]:f.PrimitiveTopology.POINTS,[u.gl.LINES]:f.PrimitiveTopology.LINES,[u.gl.LINE_LOOP]:f.PrimitiveTopology.LINES,[u.gl.LINE_STRIP]:f.PrimitiveTopology.LINE_STRIP,[u.gl.TRIANGLES]:f.PrimitiveTopology.TRIANGLES,[u.gl.TRIANGLE_FAN]:f.PrimitiveTopology.TRIANGLES,[u.gl.TRIANGLE_STRIP]:f.PrimitiveTopology.TRIANGLE_STRIP},g={1:f.Format.F32_R,2:f.Format.F32_RG,3:f.Format.F32_RGB,4:f.Format.F32_RGBA},v={[u.gl.STATIC_DRAW]:f.BufferFrequencyHint.STATIC,[u.gl.DYNAMIC_DRAW]:f.BufferFrequencyHint.DYNAMIC,[u.gl.STREAM_DRAW]:f.BufferFrequencyHint.DYNAMIC},y={[u.gl.REPEAT]:f.AddressMode.REPEAT,[u.gl.CLAMP_TO_EDGE]:f.AddressMode.CLAMP_TO_EDGE,[u.gl.MIRRORED_REPEAT]:f.AddressMode.MIRRORED_REPEAT},_={[u.gl.NEVER]:f.CompareFunction.NEVER,[u.gl.ALWAYS]:f.CompareFunction.ALWAYS,[u.gl.LESS]:f.CompareFunction.LESS,[u.gl.LEQUAL]:f.CompareFunction.LEQUAL,[u.gl.GREATER]:f.CompareFunction.GREATER,[u.gl.GEQUAL]:f.CompareFunction.GEQUAL,[u.gl.EQUAL]:f.CompareFunction.EQUAL,[u.gl.NOTEQUAL]:f.CompareFunction.NOTEQUAL},b={[u.gl.FRONT]:f.CullMode.FRONT,[u.gl.BACK]:f.CullMode.BACK},x={[u.gl.FUNC_ADD]:f.BlendMode.ADD,[u.gl.MIN_EXT]:f.BlendMode.MIN,[u.gl.MAX_EXT]:f.BlendMode.MAX,[u.gl.FUNC_SUBTRACT]:f.BlendMode.SUBSTRACT,[u.gl.FUNC_REVERSE_SUBTRACT]:f.BlendMode.REVERSE_SUBSTRACT},E={[u.gl.ZERO]:f.BlendFactor.ZERO,[u.gl.ONE]:f.BlendFactor.ONE,[u.gl.SRC_COLOR]:f.BlendFactor.SRC,[u.gl.ONE_MINUS_SRC_COLOR]:f.BlendFactor.ONE_MINUS_SRC,[u.gl.SRC_ALPHA]:f.BlendFactor.SRC_ALPHA,[u.gl.ONE_MINUS_SRC_ALPHA]:f.BlendFactor.ONE_MINUS_SRC_ALPHA,[u.gl.DST_COLOR]:f.BlendFactor.DST,[u.gl.ONE_MINUS_DST_COLOR]:f.BlendFactor.ONE_MINUS_DST,[u.gl.DST_ALPHA]:f.BlendFactor.DST_ALPHA,[u.gl.ONE_MINUS_DST_ALPHA]:f.BlendFactor.ONE_MINUS_DST_ALPHA,[u.gl.CONSTANT_COLOR]:f.BlendFactor.CONST,[u.gl.ONE_MINUS_CONSTANT_COLOR]:f.BlendFactor.ONE_MINUS_CONSTANT,[u.gl.CONSTANT_ALPHA]:f.BlendFactor.CONST,[u.gl.ONE_MINUS_CONSTANT_ALPHA]:f.BlendFactor.ONE_MINUS_CONSTANT,[u.gl.SRC_ALPHA_SATURATE]:f.BlendFactor.SRC_ALPHA_SATURATE},w={[u.gl.REPLACE]:f.StencilOp.REPLACE,[u.gl.KEEP]:f.StencilOp.KEEP,[u.gl.ZERO]:f.StencilOp.ZERO,[u.gl.INVERT]:f.StencilOp.INVERT,[u.gl.INCR]:f.StencilOp.INCREMENT_CLAMP,[u.gl.DECR]:f.StencilOp.DECREMENT_CLAMP,[u.gl.INCR_WRAP]:f.StencilOp.INCREMENT_WRAP,[u.gl.DECR_WRAP]:f.StencilOp.DECREMENT_WRAP},S={[u.gl.ALWAYS]:f.CompareFunction.ALWAYS,[u.gl.EQUAL]:f.CompareFunction.EQUAL,[u.gl.GEQUAL]:f.CompareFunction.GEQUAL,[u.gl.GREATER]:f.CompareFunction.GREATER,[u.gl.LEQUAL]:f.CompareFunction.LEQUAL,[u.gl.LESS]:f.CompareFunction.LESS,[u.gl.NEVER]:f.CompareFunction.NEVER,[u.gl.NOTEQUAL]:f.CompareFunction.NOTEQUAL},T={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function A(n){return Object.prototype.toString.call(n) in T;}var C=class{constructor(n,r){let i;this.isDestroyed=!1;let{data:a,usage:o,type:s,isUBO:l,label:c}=r;i=A(a)?a:new p[this.type||u.gl.FLOAT](a),this.type=s,this.size=i.byteLength,this.buffer=n.createBuffer({viewOrSize:i,usage:l?f.BufferUsage.UNIFORM:f.BufferUsage.VERTEX,hint:v[o||u.gl.STATIC_DRAW]}),c&&n.setResourceName(this.buffer,c);}get(){return this.buffer;}destroy(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0;}subData({data:n,offset:r}){let i;i=A(n)?n:new p[this.type||u.gl.FLOAT](n),this.buffer.setSubData(r,new Uint8Array(i.buffer));}};function O(n,r=0){return n+=r,n+=n<<10,(n+=n>>>6)>>>0;}function M(n){return n+=n<<3,n^=n>>>11,(n+=n<<15)>>>0;}function R(){return 0;}var P=class{constructor(){this.keys=[],this.values=[];}},k=class{constructor(n,r){this.keyEqualFunc=n,this.keyHashFunc=r,this.buckets=new Map;}findBucketIndex(n,r){for(let i=0;i<n.keys.length;i++)if(this.keyEqualFunc(r,n.keys[i]))return i;return -1;}findBucket(n){let r=this.keyHashFunc(n);return this.buckets.get(r);}get(n){let r=this.findBucket(n);if(void 0===r)return null;let i=this.findBucketIndex(r,n);return i<0?null:r.values[i];}add(n,r){let i=this.keyHashFunc(n);void 0===this.buckets.get(i)&&this.buckets.set(i,new P);let a=this.buckets.get(i);a.keys.push(n),a.values.push(r);}delete(n){let r=this.findBucket(n);if(void 0===r)return;let i=this.findBucketIndex(r,n);-1!==i&&(r.keys.splice(i,1),r.values.splice(i,1));}clear(){this.buckets.clear();}size(){let n=0;for(let r of this.buckets.values())n+=r.values.length;return n;}*values(){for(let n of this.buckets.values())for(let r=n.values.length-1;r>=0;r--)yield n.values[r];}};function I(n,r){return n=O(n,r.blendMode),n=O(n,r.blendSrcFactor),n=O(n,r.blendDstFactor);}function L(n){let r=0;r=O(0,n.program.id),null!==n.inputLayout&&(r=O(r,n.inputLayout.id)),r=function(n,r){var i,a,o,s,l,u,c,d,h,p,m;for(let i=0;i<r.attachmentsState.length;i++)h=I(h=n,(p=r.attachmentsState[i]).rgbBlendState),n=h=O(h=I(h,p.alphaBlendState),p.channelWriteMask);return n=O(n,(m=r.blendConstant||f.TransparentBlack).r<<24|m.g<<16|m.b<<8|m.a),n=O(n,r.depthCompare),n=O(n,r.depthWrite?1:0),n=O(n,null==(i=r.stencilFront)?void 0:i.compare),n=O(n,null==(a=r.stencilFront)?void 0:a.passOp),n=O(n,null==(o=r.stencilFront)?void 0:o.failOp),n=O(n,null==(s=r.stencilFront)?void 0:s.depthFailOp),n=O(n,null==(l=r.stencilBack)?void 0:l.compare),n=O(n,null==(u=r.stencilBack)?void 0:u.passOp),n=O(n,null==(c=r.stencilBack)?void 0:c.failOp),n=O(n,null==(d=r.stencilBack)?void 0:d.depthFailOp),n=O(n,r.stencilWrite?1:0),n=O(n,r.cullMode),n=O(n,r.frontFace?1:0),n=O(n,r.polygonOffset?1:0);}(r,n.megaStateDescriptor);for(let i=0;i<n.colorAttachmentFormats.length;i++)r=O(r,n.colorAttachmentFormats[i]||0);return M(r=O(r,n.depthStencilAttachmentFormat||0));}function N(n){let r=0;if(n.samplerBindings)for(let i=0;i<n.samplerBindings.length;i++){let a=n.samplerBindings[i];null!==a&&null!==a.texture&&(r=O(r,a.texture.id));}if(n.uniformBufferBindings)for(let i=0;i<n.uniformBufferBindings.length;i++){let a=n.uniformBufferBindings[i];null!==a&&null!==a.buffer&&(r=O(r,a.buffer.id),r=O(r,a.binding),r=O(r,a.offset),r=O(r,a.size));}if(n.storageBufferBindings)for(let i=0;i<n.storageBufferBindings.length;i++){let a=n.storageBufferBindings[i];null!==a&&null!==a.buffer&&(r=O(r,a.buffer.id),r=O(r,a.binding),r=O(r,a.offset),r=O(r,a.size));}if(n.storageTextureBindings)for(let i=0;i<n.storageTextureBindings.length;i++){let a=n.storageTextureBindings[i];null!==a&&null!==a.texture&&(r=O(r,a.texture.id),r=O(r,a.binding));}return M(r);}function D(n,r){var i,a,o,s;return(null==(i=n.vertex)?void 0:i.glsl)===(null==(a=r.vertex)?void 0:a.glsl)&&(null==(o=n.fragment)?void 0:o.glsl)===(null==(s=r.fragment)?void 0:s.glsl);}var F=class{constructor(n){this.device=n,this.bindingsCache=new k(f.bindingsDescriptorEquals,N),this.renderPipelinesCache=new k(f.renderPipelineDescriptorEquals,L),this.inputLayoutsCache=new k(f.inputLayoutDescriptorEquals,R),this.programCache=new k(D,R);}createBindings(n){var r;let i=this.bindingsCache.get(n);if(null===i){let a=(0,f.bindingsDescriptorCopy)(n);a.uniformBufferBindings=null==(r=a.uniformBufferBindings)?void 0:r.filter(({size:n})=>n&&n>0),i=this.device.createBindings(a),this.bindingsCache.add(a,i);}return i;}createRenderPipeline(n){let r=this.renderPipelinesCache.get(n);if(null===r){let i=(0,f.renderPipelineDescriptorCopy)(n);i.colorAttachmentFormats=i.colorAttachmentFormats.filter(n=>n),r=this.device.createRenderPipeline(i),this.renderPipelinesCache.add(i,r);}return r;}createInputLayout(n){n.vertexBufferDescriptors=n.vertexBufferDescriptors.filter(n=>!!n);let r=this.inputLayoutsCache.get(n);if(null===r){let i=(0,f.inputLayoutDescriptorCopy)(n);r=this.device.createInputLayout(i),this.inputLayoutsCache.add(i,r);}return r;}createProgram(n){let r=this.programCache.get(n);if(null===r){var i,a;let o={vertex:{glsl:null==(i=n.vertex)?void 0:i.glsl},fragment:{glsl:null==(a=n.fragment)?void 0:a.glsl}};r=this.device.createProgram(n),this.programCache.add(o,r);}return r;}destroy(){for(let n of this.bindingsCache.values())n.destroy();for(let n of this.renderPipelinesCache.values())n.destroy();for(let n of this.inputLayoutsCache.values())n.destroy();for(let n of this.programCache.values())n.destroy();this.bindingsCache.clear(),this.renderPipelinesCache.clear(),this.inputLayoutsCache.clear(),this.programCache.clear();}},B=class{constructor(n,r){let i;let{data:a,type:o,count:s=0}=r;i=A(a)?a:new p[this.type||u.gl.UNSIGNED_INT](a),this.type=o,this.count=s,this.indexBuffer=n.createBuffer({viewOrSize:i,usage:f.BufferUsage.INDEX});}get(){return this.indexBuffer;}subData({data:n}){let r;r=A(n)?n:new p[this.type||u.gl.UNSIGNED_INT](n),this.indexBuffer.setSubData(0,new Uint8Array(r.buffer));}destroy(){this.indexBuffer.destroy();}};function j(n){return!!(n&&n.texture);}var z=class{constructor(n,r){this.device=n,this.options=r,this.isDestroy=!1;let{wrapS:i=u.gl.CLAMP_TO_EDGE,wrapT:a=u.gl.CLAMP_TO_EDGE,aniso:o,mag:s=u.gl.NEAREST,min:l=u.gl.NEAREST}=r;this.createTexture(r),this.sampler=n.createSampler({addressModeU:y[i],addressModeV:y[a],minFilter:l===u.gl.NEAREST?f.FilterMode.POINT:f.FilterMode.BILINEAR,magFilter:s===u.gl.NEAREST?f.FilterMode.POINT:f.FilterMode.BILINEAR,mipmapFilter:f.MipmapFilterMode.NO_MIP,maxAnisotropy:o});}createTexture(n){let{type:r=u.gl.UNSIGNED_BYTE,width:i,height:a,flipY:o=!1,format:s=u.gl.RGBA,alignment:l=1,usage:c=u.TextureUsage.SAMPLED,unorm:d=!1,label:h}=n,{data:p}=n;this.width=i,this.height=a;let m=f.Format.U8_RGBA_RT;if(r===u.gl.UNSIGNED_BYTE&&s===u.gl.RGBA)m=d?f.Format.U8_RGBA_NORM:f.Format.U8_RGBA_RT;else if(r===u.gl.UNSIGNED_BYTE&&s===u.gl.LUMINANCE)m=f.Format.U8_LUMINANCE;else if(r===u.gl.FLOAT&&s===u.gl.LUMINANCE)m=f.Format.F32_LUMINANCE;else if(r===u.gl.FLOAT&&s===u.gl.RGB)"WebGPU"===this.device.queryVendorInfo().platformString?(p&&(p=function(n,r){let i=n.length,a=Math.ceil(i/3),o=i+a,s=new Float32Array(o);for(let r=0;r<o;r+=4)s[r]=n[r/4*3],s[r+1]=n[r/4*3+1],s[r+2]=n[r/4*3+2],s[r+3]=0;return s;}(p,0)),m=f.Format.F32_RGBA):m=f.Format.F32_RGB;else if(r===u.gl.FLOAT&&s===u.gl.RGBA)m=f.Format.F32_RGBA;else if(r===u.gl.FLOAT&&s===u.gl.RED)m=f.Format.F32_R;else throw Error(`create texture error, type: ${r}, format: ${s}`);this.texture=this.device.createTexture({format:m,width:i,height:a,usage:c===u.TextureUsage.SAMPLED?f.TextureUsage.SAMPLED:f.TextureUsage.RENDER_TARGET,pixelStore:{unpackFlipY:o,packAlignment:l},mipLevelCount:1}),h&&this.device.setResourceName(this.texture,h),p&&this.texture.setImageData([p]);}get(){return this.texture;}update(n){let{data:r}=n;this.texture.setImageData([r]);}bind(){}resize({width:n,height:r}){(this.width!==n||this.height!==r)&&this.destroy(),this.options.width=n,this.options.height=r,this.createTexture(this.options),this.isDestroy=!1;}getSize(){return[this.width,this.height];}destroy(){var n;this.isDestroy||this.texture.destroyed||null==(n=this.texture)||n.destroy(),this.isDestroy=!0;}},U=class{constructor(n,r){this.device=n,this.options=r,this.createColorRenderTarget(),this.createDepthRenderTarget();}createColorRenderTarget(n=!1){let{width:r,height:i,color:a}=this.options;a&&(j(a)?(n&&a.resize({width:r,height:i}),this.colorTexture=a.get(),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=a.width,this.height=a.height):r&&i&&(this.colorTexture=this.device.createTexture({format:f.Format.U8_RGBA_RT,usage:f.TextureUsage.RENDER_TARGET,width:r,height:i}),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=r,this.height=i));}createDepthRenderTarget(n=!1){let{width:r,height:i,depth:a}=this.options;a&&(j(a)?(n&&a.resize({width:r,height:i}),this.depthTexture=a.get(),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=a.width,this.height=a.height):r&&i&&(this.depthTexture=this.device.createTexture({format:f.Format.D24_S8,usage:f.TextureUsage.RENDER_TARGET,width:r,height:i}),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=r,this.height=i));}get(){return this.colorRenderTarget;}destroy(){var n,r;null==(n=this.colorRenderTarget)||n.destroy(),null==(r=this.depthRenderTarget)||r.destroy();}resize({width:n,height:r}){(this.width!==n||this.height!==r)&&(this.destroy(),this.colorTexture.destroyed=!0,this.depthTexture.destroyed=!0,this.options.width=n,this.options.height=r,this.createColorRenderTarget(!0),this.createDepthRenderTarget(!0));}},V=Object.defineProperty,G=Object.defineProperties,H=Object.getOwnPropertyDescriptors,W=Object.getOwnPropertySymbols,X=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable,$=(n,r,i)=>r in n?V(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i,Y=(n,r)=>{for(var i in r||(r={}))X.call(r,i)&&$(n,i,r[i]);if(W)for(var i of W(r))q.call(r,i)&&$(n,i,r[i]);return n;},Z=(n,r)=>G(n,H(r)),{isPlainObject:K,isTypedArray:Q,isNil:J}=d.lodashUtil,ee=class{constructor(n,r,i){this.device=n,this.options=r,this.service=i,this.destroyed=!1,this.uniforms={},this.vertexBuffers=[];let{vs:a,fs:o,attributes:s,uniforms:l,count:u,elements:c,diagnosticDerivativeUniformityEnabled:d}=r;this.options=r;let h=d?"":this.service.viewportOrigin===f.ViewportOrigin.UPPER_LEFT?"diagnostic(off,derivative_uniformity);":"";this.program=i.renderCache.createProgram({vertex:{glsl:a},fragment:{glsl:o,postprocess:n=>h+n}}),l&&(this.uniforms=this.extractUniforms(l));let p=[],m=0;Object.keys(s).forEach(n=>{let r=s[n],i=r.get();this.vertexBuffers.push(i.get());let{offset:a=0,stride:o=0,size:l=1,divisor:u=0,shaderLocation:c=0}=r.attribute;p.push({arrayStride:o||4*l,stepMode:f.VertexStepMode.VERTEX,attributes:[{format:g[l],shaderLocation:c,offset:a,divisor:u}]}),m=i.size/l;}),u||(this.options.count=m),c&&(this.indexBuffer=c.get());let v=i.renderCache.createInputLayout({vertexBufferDescriptors:p,indexBufferFormat:c?f.Format.U32_R:null,program:this.program});this.inputLayout=v,this.pipeline=this.createPipeline(r);}createPipeline(n,r){var i;let{primitive:a=u.gl.TRIANGLES,depth:o,cull:s,blend:l,stencil:c}=n,d=this.initDepthDrawParams({depth:o}),h=!!(d&&d.enable),p=this.initCullDrawParams({cull:s}),g=!!(p&&p.enable),v=this.getBlendDrawParams({blend:l}),y=!!(v&&v.enable),_=this.getStencilDrawParams({stencil:c}),b=!!(_&&_.enable),x=this.device.createRenderPipeline({inputLayout:this.inputLayout,program:this.program,topology:m[a],colorAttachmentFormats:[f.Format.U8_RGBA_RT],depthStencilAttachmentFormat:f.Format.D24_S8,megaStateDescriptor:{attachmentsState:[r?{channelWriteMask:f.ChannelWriteMask.ALL,rgbBlendState:{blendMode:f.BlendMode.ADD,blendSrcFactor:f.BlendFactor.ONE,blendDstFactor:f.BlendFactor.ZERO},alphaBlendState:{blendMode:f.BlendMode.ADD,blendSrcFactor:f.BlendFactor.ONE,blendDstFactor:f.BlendFactor.ZERO}}:{channelWriteMask:b&&_.opFront.zpass===f.StencilOp.REPLACE?f.ChannelWriteMask.NONE:f.ChannelWriteMask.ALL,rgbBlendState:{blendMode:y&&v.equation.rgb||f.BlendMode.ADD,blendSrcFactor:y&&v.func.srcRGB||f.BlendFactor.SRC_ALPHA,blendDstFactor:y&&v.func.dstRGB||f.BlendFactor.ONE_MINUS_SRC_ALPHA},alphaBlendState:{blendMode:y&&v.equation.alpha||f.BlendMode.ADD,blendSrcFactor:y&&v.func.srcAlpha||f.BlendFactor.ONE,blendDstFactor:y&&v.func.dstAlpha||f.BlendFactor.ONE}}],blendConstant:y?f.TransparentBlack:void 0,depthWrite:h,depthCompare:h&&d.func||f.CompareFunction.LESS,cullMode:g&&p.face||f.CullMode.NONE,stencilWrite:b,stencilFront:{compare:b?_.func.cmp:f.CompareFunction.ALWAYS,passOp:_.opFront.zpass,failOp:_.opFront.fail,depthFailOp:_.opFront.zfail,mask:_.opFront.mask},stencilBack:{compare:b?_.func.cmp:f.CompareFunction.ALWAYS,passOp:_.opBack.zpass,failOp:_.opBack.fail,depthFailOp:_.opBack.zfail,mask:_.opBack.mask}}});return b&&!J(null==(i=null==c?void 0:c.func)?void 0:i.ref)&&(x.stencilFuncReference=c.func.ref),x;}updateAttributesAndElements(){}updateAttributes(){}addUniforms(n){this.uniforms=Y(Y({},this.uniforms),this.extractUniforms(n));}draw(n,r){let i=Y(Y({},this.options),n),{count:a=0,instances:o,elements:s,uniforms:l={},uniformBuffers:u,textures:c}=i;this.uniforms=Y(Y({},this.uniforms),this.extractUniforms(l));let{renderPass:f,currentFramebuffer:d,width:h,height:p}=this.service;this.pipeline=this.createPipeline(i,r);let m=this.service.device,g=m.swapChainHeight;if(m.swapChainHeight=(null==d?void 0:d.height)||p,f.setViewport(0,0,(null==d?void 0:d.width)||h,(null==d?void 0:d.height)||p),m.swapChainHeight=g,f.setPipeline(this.pipeline),J(this.pipeline.stencilFuncReference)||f.setStencilReference(this.pipeline.stencilFuncReference),f.setVertexInput(this.inputLayout,this.vertexBuffers.map(n=>({buffer:n})),s?{buffer:this.indexBuffer,offset:0}:null),u&&(this.bindings=m.createBindings({pipeline:this.pipeline,uniformBufferBindings:u.map((n,r)=>({binding:r,buffer:n.get(),size:n.size})),samplerBindings:null==c?void 0:c.map(n=>({texture:n.texture,sampler:n.sampler}))})),this.bindings&&(f.setBindings(this.bindings),Object.keys(this.uniforms).forEach(n=>{let r=this.uniforms[n];r instanceof z?this.uniforms[n]=r.get():r instanceof U&&(this.uniforms[n]=r.get().texture);}),this.program.setUniformsLegacy(this.uniforms)),s){let n=s.count;0===n?f.draw(a,o):f.drawIndexed(n,o);}else f.draw(a,o);}destroy(){var n,r,i;null==(n=this.vertexBuffers)||n.forEach(n=>n.destroy()),null==(r=this.indexBuffer)||r.destroy(),null==(i=this.bindings)||i.destroy(),this.pipeline.destroy(),this.destroyed=!0;}initDepthDrawParams({depth:n}){if(n)return{enable:void 0===n.enable||!!n.enable,mask:void 0===n.mask||!!n.mask,func:_[n.func||u.gl.LESS],range:n.range||[0,1]};}getBlendDrawParams({blend:n}){let{enable:r,func:i,equation:a,color:o=[0,0,0,0]}=n||{};return{enable:!!r,func:{srcRGB:E[i&&i.srcRGB||u.gl.SRC_ALPHA],srcAlpha:E[i&&i.srcAlpha||u.gl.SRC_ALPHA],dstRGB:E[i&&i.dstRGB||u.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:E[i&&i.dstAlpha||u.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:x[a&&a.rgb||u.gl.FUNC_ADD],alpha:x[a&&a.alpha||u.gl.FUNC_ADD]},color:o};}getStencilDrawParams({stencil:n}){let{enable:r,mask:i=4294967295,func:a={cmp:u.gl.ALWAYS,ref:0,mask:4294967295},opFront:o={fail:u.gl.KEEP,zfail:u.gl.KEEP,zpass:u.gl.KEEP},opBack:s={fail:u.gl.KEEP,zfail:u.gl.KEEP,zpass:u.gl.KEEP}}=n||{};return{enable:!!r,mask:i,func:Z(Y({},a),{cmp:S[a.cmp]}),opFront:{fail:w[o.fail],zfail:w[o.zfail],zpass:w[o.zpass],mask:a.mask},opBack:{fail:w[s.fail],zfail:w[s.zfail],zpass:w[s.zpass],mask:a.mask}};}initCullDrawParams({cull:n}){if(n){let{enable:r,face:i=u.gl.BACK}=n;return{enable:!!r,face:b[i]};}}extractUniforms(n){let r={};return Object.keys(n).forEach(i=>{this.extractUniformsRecursively(i,n[i],r,"");}),r;}extractUniformsRecursively(n,r,i,a){if(null===r||"number"==typeof r||"boolean"==typeof r||Array.isArray(r)&&"number"==typeof r[0]||Q(r)||""===r||"resize"in r){i[`${a&&a+"."}${n}`]=r;return;}K(r)&&Object.keys(r).forEach(o=>{this.extractUniformsRecursively(o,r[o],i,`${a&&a+"."}${n}`);}),Array.isArray(r)&&r.forEach((r,o)=>{Object.keys(r).forEach(s=>{this.extractUniformsRecursively(s,r[s],i,`${a&&a+"."}${n}[${o}]`);});});}},et=(n,r,i)=>new Promise((a,o)=>{var s=n=>{try{u(i.next(n));}catch(n){o(n);}},l=n=>{try{u(i.throw(n));}catch(n){o(n);}},u=n=>n.done?a(n.value):Promise.resolve(n.value).then(s,l);u((i=i.apply(n,r)).next());}),{isUndefined:en}=d.lodashUtil,er=class{constructor(){this.uniformBuffers=[],this.queryVerdorInfo=()=>this.device.queryVendorInfo().platformString,this.createModel=n=>new ee(this.device,n,this),this.createAttribute=n=>new h(this.device,n),this.createBuffer=n=>new C(this.device,n),this.createElements=n=>new B(this.device,n),this.createTexture2D=n=>new z(this.device,n),this.createFramebuffer=n=>new U(this.device,n),this.useFramebuffer=(n,r)=>{this.currentFramebuffer=n,this.beginFrame(),r(),this.endFrame(),this.currentFramebuffer=null;},this.useFramebufferAsync=(n,r)=>et(this,null,function*(){this.currentFramebuffer=n,this.preRenderPass=this.renderPass,this.beginFrame(),yield r(),this.endFrame(),this.currentFramebuffer=null,this.renderPass=this.preRenderPass;}),this.clear=n=>{let{color:r,depth:i,stencil:a,framebuffer:o=null}=n;if(o)o.clearOptions={color:r,depth:i,stencil:a};else{let n=this.queryVerdorInfo();if("WebGL1"===n){let n=this.getGLContext();en(a)?en(i)||(n.clearDepth(i),n.clear(n.DEPTH_BUFFER_BIT)):(n.clearStencil(a),n.clear(n.STENCIL_BUFFER_BIT));}else if("WebGL2"===n){let n=this.getGLContext();en(a)?en(i)||n.clearBufferfv(n.DEPTH,0,[i]):n.clearBufferiv(n.STENCIL,0,[a]);}}},this.viewport=({width:n,height:r})=>{this.swapChain.configureSwapChain(n,r),this.createMainColorDepthRT(n,r),this.width=n,this.height=r;},this.readPixels=n=>{let{framebuffer:r,x:i,y:a,width:o,height:s}=n,l=this.device.createReadback(),u=r.colorTexture,c=l.readTextureSync(u,i,this.viewportOrigin===f.ViewportOrigin.LOWER_LEFT?a:this.height-a,o,s,new Uint8Array(o*s*4));if(this.viewportOrigin!==f.ViewportOrigin.LOWER_LEFT)for(let n=0;n<c.length;n+=4){let r=c[n];c[n]=c[n+2],c[n+2]=r;}return l.destroy(),c;},this.readPixelsAsync=n=>et(this,null,function*(){let{framebuffer:r,x:i,y:a,width:o,height:s}=n,l=this.device.createReadback(),u=r.colorTexture,c=yield l.readTexture(u,i,this.viewportOrigin===f.ViewportOrigin.LOWER_LEFT?a:this.height-a,o,s,new Uint8Array(o*s*4));if(this.viewportOrigin!==f.ViewportOrigin.LOWER_LEFT)for(let n=0;n<c.length;n+=4){let r=c[n];c[n]=c[n+2],c[n+2]=r;}return l.destroy(),c;}),this.getViewportSize=()=>({width:this.width,height:this.height}),this.getContainer=()=>{var n;return null==(n=this.canvas)?void 0:n.parentElement;},this.getCanvas=()=>this.canvas,this.getGLContext=()=>this.device.gl,this.destroy=()=>{var n;this.canvas=null,null==(n=this.uniformBuffers)||n.forEach(n=>{n.destroy();}),this.device.destroy(),this.renderCache.destroy();};}init(n,r){return et(this,null,function*(){let{enableWebGPU:i,shaderCompilerPath:a,antialias:o}=r;this.canvas=n;let s=i?new f.WebGPUDeviceContribution({shaderCompilerPath:a}):new f.WebGLDeviceContribution({targets:["webgl2","webgl1"],antialias:o,onContextLost(n){console.warn("context lost",n);},onContextCreationError(n){console.warn("context creation error",n);},onContextRestored(n){console.warn("context restored",n);}}),l=yield s.createSwapChain(n);l.configureSwapChain(n.width,n.height),this.device=l.getDevice(),this.swapChain=l,this.renderCache=new F(this.device),this.currentFramebuffer=null,this.viewportOrigin=this.device.queryVendorInfo().viewportOrigin;let u=this.device.gl;this.extensionObject={OES_texture_float:!("undefined"!=typeof WebGL2RenderingContext&&u instanceof WebGL2RenderingContext)&&(!u||2!==u._version)&&this.device.OES_texture_float},this.createMainColorDepthRT(n.width,n.height);});}createMainColorDepthRT(n,r){this.mainColorRT&&this.mainColorRT.destroy(),this.mainDepthRT&&this.mainDepthRT.destroy(),this.mainColorRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:f.Format.U8_RGBA_RT,width:n,height:r,usage:f.TextureUsage.RENDER_TARGET})),this.mainDepthRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:f.Format.D24_S8,width:n,height:r,usage:f.TextureUsage.RENDER_TARGET}));}beginFrame(){this.device.beginFrame();let{currentFramebuffer:n,swapChain:r,mainColorRT:i,mainDepthRT:a}=this,o=n?n.colorRenderTarget:i,s=n?null:r.getOnscreenTexture(),l=n?n.depthRenderTarget:a,{color:u=[0,0,0,0],depth:c=1,stencil:d=0}=(null==n?void 0:n.clearOptions)||{},h=o?(0,f.colorNewFromRGBA)(255*u[0],255*u[1],255*u[2],u[3]):f.TransparentBlack,p=this.device.createRenderPass({colorAttachment:[o],colorResolveTo:[s],colorClearColor:[h],colorStore:[!0],depthStencilAttachment:l,depthClearValue:l?c:void 0,stencilClearValue:l?d:void 0});this.renderPass=p;}endFrame(){this.device.submitPass(this.renderPass),this.device.endFrame();}getPointSizeRange(){let n=this.device.gl;return n.getParameter(n.ALIASED_POINT_SIZE_RANGE);}testExtension(n){return!!this.getGLContext().getExtension(n);}setState(){}setBaseState(){}setCustomLayerDefaults(){}setDirty(n){this.isDirty=n;}getDirty(){return this.isDirty;}},ei=i("84334417"),ea=a._(ei),eo=class{constructor(n,r){let{buffer:i,offset:a,stride:o,normalized:s,size:l,divisor:u}=r;this.buffer=i,this.attribute={buffer:i.get(),offset:a||0,stride:o||0,normalized:s||!1,divisor:u||0},l&&(this.attribute.size=l);}get(){return this.attribute;}updateBuffer(n){this.buffer.subData(n);}destroy(){this.buffer.destroy();}},es={[u.gl.POINTS]:"points",[u.gl.LINES]:"lines",[u.gl.LINE_LOOP]:"line loop",[u.gl.LINE_STRIP]:"line strip",[u.gl.TRIANGLES]:"triangles",[u.gl.TRIANGLE_FAN]:"triangle fan",[u.gl.TRIANGLE_STRIP]:"triangle strip"},el={[u.gl.STATIC_DRAW]:"static",[u.gl.DYNAMIC_DRAW]:"dynamic",[u.gl.STREAM_DRAW]:"stream"},eu={[u.gl.BYTE]:"int8",[u.gl.INT]:"int32",[u.gl.UNSIGNED_BYTE]:"uint8",[u.gl.UNSIGNED_SHORT]:"uint16",[u.gl.UNSIGNED_INT]:"uint32",[u.gl.FLOAT]:"float"},ec={[u.gl.ALPHA]:"alpha",[u.gl.LUMINANCE]:"luminance",[u.gl.LUMINANCE_ALPHA]:"luminance alpha",[u.gl.RGB]:"rgb",[u.gl.RGBA]:"rgba",[u.gl.RGBA4]:"rgba4",[u.gl.RGB5_A1]:"rgb5 a1",[u.gl.RGB565]:"rgb565",[u.gl.DEPTH_COMPONENT]:"depth",[u.gl.DEPTH_STENCIL]:"depth stencil"},ef={[u.gl.DONT_CARE]:"dont care",[u.gl.NICEST]:"nice",[u.gl.FASTEST]:"fast"},ed={[u.gl.NEAREST]:"nearest",[u.gl.LINEAR]:"linear",[u.gl.LINEAR_MIPMAP_LINEAR]:"mipmap",[u.gl.NEAREST_MIPMAP_LINEAR]:"nearest mipmap linear",[u.gl.LINEAR_MIPMAP_NEAREST]:"linear mipmap nearest",[u.gl.NEAREST_MIPMAP_NEAREST]:"nearest mipmap nearest"},eh={[u.gl.REPEAT]:"repeat",[u.gl.CLAMP_TO_EDGE]:"clamp",[u.gl.MIRRORED_REPEAT]:"mirror"},ep={[u.gl.NONE]:"none",[u.gl.BROWSER_DEFAULT_WEBGL]:"browser"},em={[u.gl.NEVER]:"never",[u.gl.ALWAYS]:"always",[u.gl.LESS]:"less",[u.gl.LEQUAL]:"lequal",[u.gl.GREATER]:"greater",[u.gl.GEQUAL]:"gequal",[u.gl.EQUAL]:"equal",[u.gl.NOTEQUAL]:"notequal"},eg={[u.gl.FUNC_ADD]:"add",[u.gl.MIN_EXT]:"min",[u.gl.MAX_EXT]:"max",[u.gl.FUNC_SUBTRACT]:"subtract",[u.gl.FUNC_REVERSE_SUBTRACT]:"reverse subtract"},ev={[u.gl.ZERO]:"zero",[u.gl.ONE]:"one",[u.gl.SRC_COLOR]:"src color",[u.gl.ONE_MINUS_SRC_COLOR]:"one minus src color",[u.gl.SRC_ALPHA]:"src alpha",[u.gl.ONE_MINUS_SRC_ALPHA]:"one minus src alpha",[u.gl.DST_COLOR]:"dst color",[u.gl.ONE_MINUS_DST_COLOR]:"one minus dst color",[u.gl.DST_ALPHA]:"dst alpha",[u.gl.ONE_MINUS_DST_ALPHA]:"one minus dst alpha",[u.gl.CONSTANT_COLOR]:"constant color",[u.gl.ONE_MINUS_CONSTANT_COLOR]:"one minus constant color",[u.gl.CONSTANT_ALPHA]:"constant alpha",[u.gl.ONE_MINUS_CONSTANT_ALPHA]:"one minus constant alpha",[u.gl.SRC_ALPHA_SATURATE]:"src alpha saturate"},ey={[u.gl.NEVER]:"never",[u.gl.ALWAYS]:"always",[u.gl.LESS]:"less",[u.gl.LEQUAL]:"lequal",[u.gl.GREATER]:"greater",[u.gl.GEQUAL]:"gequal",[u.gl.EQUAL]:"equal",[u.gl.NOTEQUAL]:"notequal"},e_={[u.gl.ZERO]:"zero",[u.gl.KEEP]:"keep",[u.gl.REPLACE]:"replace",[u.gl.INVERT]:"invert",[u.gl.INCR]:"increment",[u.gl.DECR]:"decrement",[u.gl.INCR_WRAP]:"increment wrap",[u.gl.DECR_WRAP]:"decrement wrap"},eb={[u.gl.FRONT]:"front",[u.gl.BACK]:"back"},ex=class{constructor(n,r){this.isDestroyed=!1;let{data:i,usage:a,type:o}=r;this.buffer=n.buffer({data:i,usage:el[a||u.gl.STATIC_DRAW],type:eu[o||u.gl.UNSIGNED_BYTE]});}get(){return this.buffer;}destroy(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0;}subData({data:n,offset:r}){this.buffer.subdata(n,r);}},eE=class{constructor(n,r){let{data:i,usage:a,type:o,count:s}=r;this.elements=n.elements({data:i,usage:el[a||u.gl.STATIC_DRAW],type:eu[o||u.gl.UNSIGNED_BYTE],count:s});}get(){return this.elements;}subData({data:n}){this.elements.subdata(n);}destroy(){}},ew=class{constructor(n,r){let{width:i,height:a,color:o,colors:s}=r,l={width:i,height:a};Array.isArray(s)&&(l.colors=s.map(n=>n.get())),o&&"boolean"!=typeof o&&(l.color=o.get()),this.framebuffer=n.framebuffer(l);}get(){return this.framebuffer;}destroy(){this.framebuffer.destroy();}resize({width:n,height:r}){this.framebuffer.resize(n,r);}},eS=Object.defineProperty,eT=Object.defineProperties,eA=Object.getOwnPropertyDescriptors,eC=Object.getOwnPropertySymbols,eO=Object.prototype.hasOwnProperty,eM=Object.prototype.propertyIsEnumerable,eR=(n,r,i)=>r in n?eS(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i,eP=(n,r)=>{for(var i in r||(r={}))eO.call(r,i)&&eR(n,i,r[i]);if(eC)for(var i of eC(r))eM.call(r,i)&&eR(n,i,r[i]);return n;},ek=(n,r)=>eT(n,eA(r)),{isPlainObject:eI,isTypedArray:eL}=d.lodashUtil,eN=class{constructor(n,r){this.destroyed=!1,this.uniforms={},this.reGl=n;let{vs:i,fs:a,attributes:o,uniforms:s,primitive:l,count:c,elements:d,depth:h,cull:p,instances:m}=r,g={platformString:"WebGL1",glslVersion:"#version 100",explicitBindingLocations:!1,separateSamplerTextures:!1,viewportOrigin:f.ViewportOrigin.LOWER_LEFT,clipSpaceNearZ:f.ClipSpaceNearZ.NEGATIVE_ONE,supportMRT:!1},v={};this.options=r,s&&(this.uniforms=this.extractUniforms(s),Object.keys(s).forEach(r=>{v[r]=n.prop(r);}));let y={};Object.keys(o).forEach(n=>{y[n]=o[n].get();});let _={attributes:y,frag:(0,u.removeDuplicateUniforms)((0,f.preprocessShader_GLSL)(g,"frag",a,null,!1)),uniforms:v,vert:(0,u.removeDuplicateUniforms)((0,f.preprocessShader_GLSL)(g,"vert",i,null,!1)),colorMask:n.prop("colorMask"),lineWidth:1,blend:{enable:n.prop("blend.enable"),func:n.prop("blend.func"),equation:n.prop("blend.equation"),color:n.prop("blend.color")},stencil:{enable:n.prop("stencil.enable"),mask:n.prop("stencil.mask"),func:n.prop("stencil.func"),opFront:n.prop("stencil.opFront"),opBack:n.prop("stencil.opBack")},primitive:es[void 0===l?u.gl.TRIANGLES:l]};m&&(_.instances=m),c?_.count=c:d&&(_.elements=d.get()),this.initDepthDrawParams({depth:h},_),this.initCullDrawParams({cull:p},_),this.drawCommand=n(_),this.drawParams=_;}updateAttributesAndElements(n,r){let i={};Object.keys(n).forEach(r=>{i[r]=n[r].get();}),this.drawParams.attributes=i,this.drawParams.elements=r.get(),this.drawCommand=this.reGl(this.drawParams);}updateAttributes(n){let r={};Object.keys(n).forEach(i=>{r[i]=n[i].get();}),this.drawParams.attributes=r,this.drawCommand=this.reGl(this.drawParams);}addUniforms(n){this.uniforms=eP(eP({},this.uniforms),this.extractUniforms(n));}draw(n,r){if(this.drawParams.attributes&&0===Object.keys(this.drawParams.attributes).length)return;let i=eP(eP({},this.uniforms),this.extractUniforms(n.uniforms||{})),a={};Object.keys(i).forEach(n=>{let r=typeof i[n];"boolean"===r||"number"===r||Array.isArray(i[n])||i[n].BYTES_PER_ELEMENT?a[n]=i[n]:a[n]=i[n].get();}),a.blend=r?this.getBlendDrawParams({blend:{enable:!1}}):this.getBlendDrawParams(n),a.stencil=this.getStencilDrawParams(n),a.colorMask=this.getColorMaskDrawParams(n,r),this.drawCommand(a);}destroy(){var n,r;null==(r=null==(n=this.drawParams)?void 0:n.elements)||r.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(n=>{null==n||n.destroy();}),this.destroyed=!0;}initDepthDrawParams({depth:n},r){n&&(r.depth={enable:void 0===n.enable||!!n.enable,mask:void 0===n.mask||!!n.mask,func:em[n.func||u.gl.LESS],range:n.range||[0,1]});}getBlendDrawParams({blend:n}){let{enable:r,func:i,equation:a,color:o=[0,0,0,0]}=n||{};return{enable:!!r,func:{srcRGB:ev[i&&i.srcRGB||u.gl.SRC_ALPHA],srcAlpha:ev[i&&i.srcAlpha||u.gl.SRC_ALPHA],dstRGB:ev[i&&i.dstRGB||u.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:ev[i&&i.dstAlpha||u.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:eg[a&&a.rgb||u.gl.FUNC_ADD],alpha:eg[a&&a.alpha||u.gl.FUNC_ADD]},color:o};}getStencilDrawParams({stencil:n}){let{enable:r,mask:i=-1,func:a={cmp:u.gl.ALWAYS,ref:0,mask:-1},opFront:o={fail:u.gl.KEEP,zfail:u.gl.KEEP,zpass:u.gl.KEEP},opBack:s={fail:u.gl.KEEP,zfail:u.gl.KEEP,zpass:u.gl.KEEP}}=n||{};return{enable:!!r,mask:i,func:ek(eP({},a),{cmp:ey[a.cmp]}),opFront:{fail:e_[o.fail],zfail:e_[o.zfail],zpass:e_[o.zpass]},opBack:{fail:e_[s.fail],zfail:e_[s.zfail],zpass:e_[s.zpass]}};}getColorMaskDrawParams({stencil:n},r){return(null==n?void 0:n.enable)&&n.opFront&&!r?[!1,!1,!1,!1]:[!0,!0,!0,!0];}initCullDrawParams({cull:n},r){if(n){let{enable:i,face:a=u.gl.BACK}=n;r.cull={enable:!!i,face:eb[a]};}}extractUniforms(n){let r={};return Object.keys(n).forEach(i=>{this.extractUniformsRecursively(i,n[i],r,"");}),r;}extractUniformsRecursively(n,r,i,a){if(null===r||"number"==typeof r||"boolean"==typeof r||Array.isArray(r)&&"number"==typeof r[0]||eL(r)||""===r||"resize"in r){i[`${a&&a+"."}${n}`]=r;return;}eI(r)&&Object.keys(r).forEach(o=>{this.extractUniformsRecursively(o,r[o],i,`${a&&a+"."}${n}`);}),Array.isArray(r)&&r.forEach((r,o)=>{Object.keys(r).forEach(s=>{this.extractUniformsRecursively(s,r[s],i,`${a&&a+"."}${n}[${o}]`);});});}},eD=class{constructor(n,r){this.isDestroy=!1;let{data:i,type:a=u.gl.UNSIGNED_BYTE,width:o,height:s,flipY:l=!1,format:c=u.gl.RGBA,mipmap:f=!1,wrapS:d=u.gl.CLAMP_TO_EDGE,wrapT:h=u.gl.CLAMP_TO_EDGE,aniso:p=0,alignment:m=1,premultiplyAlpha:g=!1,mag:v=u.gl.NEAREST,min:y=u.gl.NEAREST,colorSpace:_=u.gl.BROWSER_DEFAULT_WEBGL,x:b=0,y:x=0,copy:E=!1}=r;this.width=o,this.height=s;let w={width:o,height:s,type:eu[a],format:ec[c],wrapS:eh[d],wrapT:eh[h],mag:ed[v],min:ed[y],alignment:m,flipY:l,colorSpace:ep[_],premultiplyAlpha:g,aniso:p,x:b,y:x,copy:E};i&&(w.data=i),"number"==typeof f?w.mipmap=ef[f]:"boolean"==typeof f&&(w.mipmap=f),this.texture=n.texture(w);}get(){return this.texture;}update(n={}){this.texture(n);}bind(){this.texture._texture.bind();}resize({width:n,height:r}){this.texture.resize(n,r),this.width=n,this.height=r;}getSize(){return[this.width,this.height];}destroy(){var n;this.isDestroy||null==(n=this.texture)||n.destroy(),this.isDestroy=!0;}},eF=(n,r,i)=>new Promise((a,o)=>{var s=n=>{try{u(i.next(n));}catch(n){o(n);}},l=n=>{try{u(i.throw(n));}catch(n){o(n);}},u=n=>n.done?a(n.value):Promise.resolve(n.value).then(s,l);u((i=i.apply(n,r)).next());}),eB=class{constructor(){this.uniformBuffers=[],this.queryVerdorInfo=()=>"WebGL1",this.createModel=n=>new eN(this.gl,n),this.createAttribute=n=>new eo(this.gl,n),this.createBuffer=n=>new ex(this.gl,n),this.createElements=n=>new eE(this.gl,n),this.createTexture2D=n=>new eD(this.gl,n),this.createFramebuffer=n=>new ew(this.gl,n),this.useFramebuffer=(n,r)=>{this.gl({framebuffer:n?n.get():null})(r);},this.useFramebufferAsync=(n,r)=>eF(this,null,function*(){this.gl({framebuffer:n?n.get():null})(r);}),this.clear=n=>{var r;let{color:i,depth:a,stencil:o,framebuffer:s=null}=n,l={color:i,depth:a,stencil:o};l.framebuffer=null===s?s:s.get(),null==(r=this.gl)||r.clear(l);},this.viewport=({x:n,y:r,width:i,height:a})=>{this.gl._gl.viewport(n,r,i,a),this.width=i,this.height=a,this.gl._refresh();},this.readPixels=n=>{let{framebuffer:r,x:i,y:a,width:o,height:s}=n,l={x:i,y:a,width:o,height:s};return r&&(l.framebuffer=r.get()),this.gl.read(l);},this.readPixelsAsync=n=>eF(this,null,function*(){return this.readPixels(n);}),this.getViewportSize=()=>({width:this.gl._gl.drawingBufferWidth,height:this.gl._gl.drawingBufferHeight}),this.getContainer=()=>{var n;return null==(n=this.canvas)?void 0:n.parentElement;},this.getCanvas=()=>this.canvas,this.getGLContext=()=>this.gl._gl,this.destroy=()=>{var n,r,i;this.canvas=null,null==(i=null==(r=null==(n=this.gl)?void 0:n._gl)?void 0:r.getExtension("WEBGL_lose_context"))||i.loseContext(),this.gl.destroy(),this.gl=null;};}init(n,r,i){return eF(this,null,function*(){this.canvas=n,i?this.gl=i:this.gl=yield new Promise((n,i)=>{(0,ea.default)({canvas:this.canvas,attributes:{alpha:!0,antialias:r.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:r.preserveDrawingBuffer,stencil:r.stencil},extensions:["OES_element_index_uint","OES_standard_derivatives","ANGLE_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture","WEBGL_lose_context"],profile:!0,onDone:(r,a)=>{(r||!a)&&i(r),n(a);}});}),this.extensionObject={OES_texture_float:this.testExtension("OES_texture_float")};});}getPointSizeRange(){return this.gl._gl.getParameter(this.gl._gl.ALIASED_POINT_SIZE_RANGE);}testExtension(n){return!!this.getGLContext().getExtension(n);}setState(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!0,equation:"add"},framebuffer:null}),this.gl._refresh();}setBaseState(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh();}setCustomLayerDefaults(){let n=this.getGLContext();n.disable(n.CULL_FACE);}setDirty(n){this.isDirty=n;}getDirty(){return this.isDirty;}beginFrame(){}endFrame(){}},ej=i("93d97ebf"),ez=["selectstart","selecting","selectend"],eU=class extends ej.EventEmitter{constructor(n,r={}){super(),this.isEnable=!1,this.onDragStart=n=>{this.box.style.display="block",this.startEvent=this.endEvent=n,this.syncBoxBound(),this.emit("selectstart",this.getLngLatBox(),this.startEvent,this.endEvent);},this.onDragging=n=>{this.endEvent=n,this.syncBoxBound(),this.emit("selecting",this.getLngLatBox(),this.startEvent,this.endEvent);},this.onDragEnd=n=>{this.endEvent=n,this.box.style.display="none",this.emit("selectend",this.getLngLatBox(),this.startEvent,this.endEvent);},this.scene=n,this.options=r;}get container(){return this.scene.getMapService().getMarkerContainer();}enable(){if(this.isEnable)return;let{className:n}=this.options;if(this.scene.setMapStatus({dragEnable:!1}),this.container.style.cursor="crosshair",!this.box){let r=d.DOM.create("div",void 0,this.container);r.classList.add("l7-select-box"),n&&r.classList.add(n),r.style.display="none",this.box=r;}this.scene.on("dragstart",this.onDragStart),this.scene.on("dragging",this.onDragging),this.scene.on("dragend",this.onDragEnd),this.isEnable=!0;}disable(){this.isEnable&&(this.scene.setMapStatus({dragEnable:!0}),this.container.style.cursor="auto",this.scene.off("dragstart",this.onDragStart),this.scene.off("dragging",this.onDragging),this.scene.off("dragend",this.onDragEnd),this.isEnable=!1);}syncBoxBound(){let{x:n,y:r}=this.startEvent,{x:i,y:a}=this.endEvent,o=Math.min(n,i),s=Math.min(r,a),l=Math.abs(n-i),u=Math.abs(r-a);this.box.style.top=`${s}px`,this.box.style.left=`${o}px`,this.box.style.width=`${l}px`,this.box.style.height=`${u}px`;}getLngLatBox(){let{lngLat:{lng:n,lat:r}}=this.startEvent,{lngLat:{lng:i,lat:a}}=this.endEvent;return(0,d.getBBoxFromPoints)([[n,r],[i,a]]);}},eV=Object.defineProperty,eG=Object.defineProperties,eH=Object.getOwnPropertyDescriptors,eW=Object.getOwnPropertySymbols,eX=Object.prototype.hasOwnProperty,eq=Object.prototype.propertyIsEnumerable,e$=(n,r,i)=>r in n?eV(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i,eY=(n,r)=>{for(var i in r||(r={}))eX.call(r,i)&&e$(n,i,r[i]);if(eW)for(var i of eW(r))eq.call(r,i)&&e$(n,i,r[i]);return n;},eZ=(n,r)=>eG(n,eH(r)),eK=(n,r,i)=>new Promise((a,o)=>{var s=n=>{try{u(i.next(n));}catch(n){o(n);}},l=n=>{try{u(i.throw(n));}catch(n){o(n);}},u=n=>n.done?a(n.value):Promise.resolve(n.value).then(s,l);u((i=i.apply(n,r)).next());}),eQ=class{constructor(n){let{id:r,map:i,renderer:a="device"}=n,o=(0,u.createSceneContainer)();this.container=o,i.setContainer(o,r),"regl"===a?o.rendererService=new eB:o.rendererService=new er,this.sceneService=o.sceneService,this.mapService=o.mapService,this.iconService=o.iconService,this.fontService=o.fontService,this.controlService=o.controlService,this.layerService=o.layerService,this.debugService=o.debugService,this.debugService.setEnable(n.debug),this.markerService=o.markerService,this.interactionService=o.interactionService,this.popupService=o.popupService,this.boxSelect=new eU(this,{}),this.initComponent(r),this.sceneService.init(n),this.initControl();}get map(){return this.mapService.map;}get loaded(){return this.sceneService.loaded;}getServiceContainer(){return this.container;}getSize(){return this.mapService.getSize();}getMinZoom(){return this.mapService.getMinZoom();}getMaxZoom(){return this.mapService.getMaxZoom();}getType(){return this.mapService.getType();}getMapContainer(){return this.mapService.getMapContainer();}getMapCanvasContainer(){return this.mapService.getMapCanvasContainer();}getMapService(){return this.mapService;}getDebugService(){return this.debugService;}exportPng(n){return eK(this,null,function*(){return this.sceneService.exportPng(n);});}exportMap(n){return eK(this,null,function*(){return this.sceneService.exportPng(n);});}registerRenderService(n){this.sceneService.loaded?new n(this).init():this.on("loaded",()=>{new n(this).init();});}setBgColor(n){this.mapService.setBgColor(n);}addLayer(n){this.loaded?this.preAddLayer(n):this.once("loaded",()=>{this.preAddLayer(n);});}preAddLayer(n){let r=(0,u.createLayerContainer)(this.container);if(n.setContainer(r),this.sceneService.addLayer(n),n.inited){this.initTileLayer(n);let r=this.initMask(n);this.addMask(r,n.id);}else n.on("inited",()=>{this.initTileLayer(n);let r=this.initMask(n);this.addMask(r,n.id);});}initMask(n){let{mask:r,maskfence:i,maskColor:a="#000",maskOpacity:o=0}=n.getLayerConfig();if(r&&i)return new c.MaskLayer().source(i).shape("fill").style({color:a,opacity:o});}addMask(n,r){if(!n)return;let i=this.getLayer(r);if(i){let r=(0,u.createLayerContainer)(this.container);n.setContainer(r),i.addMaskLayer(n),this.sceneService.addMask(n);}else console.warn("parent layer not find!");}getPickedLayer(){return this.layerService.pickedLayerId;}getLayers(){return this.layerService.getLayers();}getLayer(n){return this.layerService.getLayer(n);}getLayerByName(n){return this.layerService.getLayerByName(n);}removeLayer(n,r){return eK(this,null,function*(){yield this.layerService.remove(n,r);});}removeAllLayer(){return eK(this,null,function*(){yield this.layerService.removeAllLayers();});}render(){this.sceneService.render();}setEnableRender(n){this.layerService.setEnableRender(n);}addIconFont(n,r){this.fontService.addIconFont(n,r);}addIconFonts(n){n.forEach(([n,r])=>{this.fontService.addIconFont(n,r);});}addFontFace(n,r){this.fontService.once("fontloaded",n=>{this.emit("fontloaded",n);}),this.fontService.addFontFace(n,r);}addImage(n,r){return eK(this,null,function*(){yield this.iconService.addImage(n,r);});}hasImage(n){return this.iconService.hasImage(n);}removeImage(n){this.iconService.removeImage(n);}addIconFontGlyphs(n,r){this.fontService.addIconGlyphs(r);}addControl(n){this.controlService.addControl(n,this.container);}removeControl(n){this.controlService.removeControl(n);}getControlByName(n){return this.controlService.getControlByName(n);}addMarker(n){this.markerService.addMarker(n);}addMarkerLayer(n){this.markerService.addMarkerLayer(n);}removeMarkerLayer(n){this.markerService.removeMarkerLayer(n);}removeAllMarkers(){this.markerService.removeAllMarkers();}removeAllMakers(){console.warn("removeAllMakers \u5DF2\u5E9F\u5F03\uFF0C\u8BF7\u4F7F\u7528 removeAllMarkers"),this.markerService.removeAllMarkers();}addPopup(n){this.popupService.addPopup(n);}removePopup(n){this.popupService.removePopup(n);}on(n,r){var i;ez.includes(n)?null==(i=this.boxSelect)||i.on(n,r):u.SceneEventList.includes(n)?this.sceneService.on(n,r):this.mapService.on(n,r);}once(n,r){var i;ez.includes(n)?null==(i=this.boxSelect)||i.once(n,r):u.SceneEventList.includes(n)?this.sceneService.once(n,r):this.mapService.once(n,r);}emit(n,r){-1===u.SceneEventList.indexOf(n)?this.mapService.on(n,r):this.sceneService.emit(n,r);}off(n,r){var i;ez.includes(n)?null==(i=this.boxSelect)||i.off(n,r):u.SceneEventList.includes(n)?this.sceneService.off(n,r):this.mapService.off(n,r);}getZoom(){return this.mapService.getZoom();}getCenter(n){return this.mapService.getCenter(n);}setCenter(n,r){return this.mapService.setCenter(n,r);}getPitch(){return this.mapService.getPitch();}setPitch(n){return this.mapService.setPitch(n);}getRotation(){return this.mapService.getRotation();}getBounds(){return this.mapService.getBounds();}setRotation(n){this.mapService.setRotation(n);}zoomIn(){this.mapService.zoomIn();}zoomOut(){this.mapService.zoomOut();}panTo(n){this.mapService.panTo(n);}panBy(n,r){this.mapService.panBy(n,r);}getContainer(){return this.mapService.getContainer();}setZoom(n){this.mapService.setZoom(n);}fitBounds(n,r){let{fitBoundsOptions:i,animate:a}=this.sceneService.getSceneConfig();this.mapService.fitBounds(n,r||eZ(eY({},i),{animate:a}));}setZoomAndCenter(n,r){this.mapService.setZoomAndCenter(n,r);}setMapStyle(n){this.mapService.setMapStyle(n);}setMapStatus(n){this.mapService.setMapStatus(n);}pixelToLngLat(n){return this.mapService.pixelToLngLat(n);}lngLatToPixel(n){return this.mapService.lngLatToPixel(n);}containerToLngLat(n){return this.mapService.containerToLngLat(n);}lngLatToContainer(n){return this.mapService.lngLatToContainer(n);}destroy(){this.sceneService.destroy();}registerPostProcessingPass(n){this.container.postProcessingPass.name=new n;}enableShaderPick(){this.layerService.enableShaderPick();}diasbleShaderPick(){this.layerService.disableShaderPick();}enableBoxSelect(n=!0){this.boxSelect.enable(),n&&this.boxSelect.once("selectend",()=>{this.disableBoxSelect();});}disableBoxSelect(){this.boxSelect.disable();}static addProtocol(n,r){d.SceneConifg.REGISTERED_PROTOCOLS[n]=r;}static removeProtocol(n){delete d.SceneConifg.REGISTERED_PROTOCOLS[n];}getProtocol(n){return d.SceneConifg.REGISTERED_PROTOCOLS[n];}startAnimate(){this.layerService.startAnimate();}stopAnimate(){this.layerService.stopAnimate();}getPointSizeRange(){return this.sceneService.getPointSizeRange();}initComponent(n){this.controlService.init({container:d.DOM.getContainer(n)},this.container),this.markerService.init(this.container),this.popupService.init(this.container);}initControl(){let{logoVisible:n,logoPosition:r}=this.sceneService.getSceneConfig();n&&this.addControl(new l.Logo({position:r}));}initTileLayer(n){n.getSource().isTile&&(n.tileLayer=new c.TileLayer(n));}};},c836c318:function(n,r,i){var a,o;a=this,o=function(){"use strict";var n="month",r="quarter";return function(i,a){var o=a.prototype;o.quarter=function(n){return this.$utils().u(n)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(n-1));};var s=o.add;o.add=function(i,a){return i=Number(i),this.$utils().p(a)===r?this.add(3*i,n):s.bind(this)(i,a);};var l=o.startOf;o.startOf=function(i,a){var o=this.$utils(),s=!!o.u(a)||a;if(o.p(i)===r){var u=this.quarter()-1;return s?this.month(3*u).startOf(n).startOf("day"):this.month(3*u+2).endOf(n).endOf("day");}return l.bind(this)(i,a);};};},"object"==typeof r&&void 0!==n?n.exports=o():"function"==typeof define&&define.amd?define(o):(a="undefined"!=typeof globalThis?globalThis:a||self).dayjs_plugin_quarterOfYear=o();},c97a579d:function(n,r,i){"use strict";var a=n.exports;n.exports.isNumber=function(n){return"number"==typeof n;},n.exports.findMin=function(n){if(0===n.length)return 1/0;for(var r=n[0],i=1;i<n.length;i++)r=Math.min(r,n[i]);return r;},n.exports.findMax=function(n){if(0===n.length)return-1/0;for(var r=n[0],i=1;i<n.length;i++)r=Math.max(r,n[i]);return r;},n.exports.findMinMulti=function(n){for(var r=a.findMin(n[0]),i=1;i<n.length;i++)r=Math.min(r,a.findMin(n[i]));return r;},n.exports.findMaxMulti=function(n){for(var r=a.findMax(n[0]),i=1;i<n.length;i++)r=Math.max(r,a.findMax(n[i]));return r;},n.exports.inside=function(n,r,i){return n<=i&&i<=r;};},c98516ca:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return c;},makeImmutable:function(){return s;},responseImmutable:function(){return l;},useImmutableMark:function(){return u;}});var a=i("000ce906"),o=(0,a.createImmutable)(),s=o.makeImmutable,l=o.responseImmutable,u=o.useImmutableMark,c=(0,a.createContext)();},c9af844f:function(n,r,i){var a=i("215bed1c");n.exports=function(n,r){var i=r?a(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength);};},ca2da9d1:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"deepAssign",{enumerable:!0,get:function(){return c;}});var a=i("777fffbe"),o=i("3862611d"),s=a._(i("e9b37d7e")),l=a._(i("1daaa764")),u=function(n,r,i,a){void 0===i&&(i=0),void 0===a&&(a=5),Object.entries(r).forEach(function(c){var f=(0,o.__read)(c,2),d=f[0],h=f[1];Object.prototype.hasOwnProperty.call(r,d)&&(h?(0,s.default)(h)?((0,s.default)(n[d])||(n[d]={}),i<a?u(n[d],h,i+1,a):n[d]=r[d]):(0,l.default)(h)?(n[d]=[],n[d]=n[d].concat(h)):n[d]=h:n[d]=h);});},c=function(n){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];for(var a=0;a<r.length;a+=1)u(n,r[a]);return n;};},ca53fc7e:function(n,r,i){var a=i("40c8a0ce"),o=i("3cd6a52e");n.exports=function n(r,i,s,l,u){return r===i||(null!=r&&null!=i&&(o(r)||o(i))?a(r,i,s,l,n,u):r!=r&&i!=i);};},ca54935a:function(n,r,i){var a=i("4600e9c8");n.exports=function(n,r){return!!(null==n?0:n.length)&&a(n,r,0)>-1;};},ca69744f:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{coordEach:function(){return function n(r,i,a){if(null!==r)for(var o,s,l,u,c,f,d,h,p=0,m=0,g=r.type,v="FeatureCollection"===g,y="Feature"===g,_=v?r.features.length:1,b=0;b<_;b++){c=(h=!!(d=v?r.features[b].geometry:y?r.geometry:r)&&"GeometryCollection"===d.type)?d.geometries.length:1;for(var x=0;x<c;x++){var E=0,w=0;if(null!==(u=h?d.geometries[x]:d)){f=u.coordinates;var S=u.type;switch(p=a&&("Polygon"===S||"MultiPolygon"===S)?1:0,S){case null:break;case"Point":if(!1===i(f,m,b,E,w))return!1;m++,E++;break;case"LineString":case"MultiPoint":for(o=0;o<f.length;o++){if(!1===i(f[o],m,b,E,w))return!1;m++,"MultiPoint"===S&&E++;}"LineString"===S&&E++;break;case"Polygon":case"MultiLineString":for(o=0;o<f.length;o++){for(s=0;s<f[o].length-p;s++){if(!1===i(f[o][s],m,b,E,w))return!1;m++;}"MultiLineString"===S&&E++,"Polygon"===S&&w++;}"Polygon"===S&&E++;break;case"MultiPolygon":for(o=0;o<f.length;o++){for(s=0,w=0;s<f[o].length;s++){for(l=0;l<f[o][s].length-p;l++){if(!1===i(f[o][s][l],m,b,E,w))return!1;m++;}w++;}E++;}break;case"GeometryCollection":for(o=0;o<u.geometries.length;o++)if(!1===n(u.geometries[o],i,a))return!1;break;default:throw Error("Unknown Geometry Type");}}}}};},flattenEach:function(){return o;}});var a=i("64787828");function o(n,r){!function(n,r){var i,a,o,s,l,u,c,f,d,h,p=0,m="FeatureCollection"===n.type,g="Feature"===n.type,v=m?n.features.length:1;for(i=0;i<v;i++){for(o=0,u=m?n.features[i].geometry:g?n.geometry:n,f=m?n.features[i].properties:g?n.properties:{},d=m?n.features[i].bbox:g?n.bbox:void 0,h=m?n.features[i].id:g?n.id:void 0,l=(c=!!u&&"GeometryCollection"===u.type)?u.geometries.length:1;o<l;o++){if(null===(s=c?u.geometries[o]:u)){if(!1===r(null,p,f,d,h))return!1;continue;}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===r(s,p,f,d,h))return!1;break;case"GeometryCollection":for(a=0;a<s.geometries.length;a++)if(!1===r(s.geometries[a],p,f,d,h))return!1;break;default:throw Error("Unknown Geometry Type");}}p++;}}(n,function(n,i,o,s,l){var u,c=null===n?null:n.type;switch(c){case null:case"Point":case"LineString":case"Polygon":if(!1===r((0,a.feature)(n,o,{bbox:s,id:l}),i,0))return!1;return;}switch(c){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon";}for(var f=0;f<n.coordinates.length;f++){var d={type:u,coordinates:n.coordinates[f]};if(!1===r((0,a.feature)(d,o),i,f))return!1;}});}},cbc6046a:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"Threshold",{enumerable:!0,get:function(){return l;}});var a=i("75aabd79"),o=i("bbb27eba"),s=i("d2953067");class l extends a.Base{getDefaultOptions(){return{domain:[.5],range:[0,1]};}constructor(n){super(n);}map(n){if(!(0,s.isValid)(n))return this.options.unknown;let r=(0,o.bisect)(this.thresholds,n,0,this.n);return this.options.range[r];}invert(n){let{range:r}=this.options,i=r.indexOf(n),a=this.thresholds;return[a[i-1],a[i]];}clone(){return new l(this.options);}rescale(){let{domain:n,range:r}=this.options;this.n=Math.min(n.length,r.length-1),this.thresholds=n;}}},cbd0341d:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{MultipleOfFourNumber:function(){return l;},getPolygonSurfaceIndices:function(){return u;}});var a=i("777fffbe"),o=i("9479dab9"),s=a._(i("c165292c"));function l(n){return Math.max(4*Math.ceil(n/4),4);}function u(n,r,i,a=!0){let l=3===i;if(a){n=n.slice();let r=[];for(let a=0;a<n.length;a+=i){r[0]=n[a],r[1]=n[a+1],l&&(r[2]=n[a+2]);let i=(0,o.lngLatToMeters)(r,!0,{enable:!1,decimal:1});n[a]=i[0],n[a+1]=i[1],l&&(n[a+2]=i[2]);}}return(0,s.default)(n,r,i);}},cbdb7ce4:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return a;}});function a(n,r){let i=function(n,r){let i,a=0,o=0,s=0;if(void 0===r)for(let r of n)null!=r&&(r=+r)>=r&&(i=r-o,o+=i/++a,s+=i*(r-o));else{let l=-1;for(let u of n)null!=(u=r(u,++l,n))&&(u=+u)>=u&&(i=u-o,o+=i/++a,s+=i*(u-o));}if(a>1)return s/(a-1);}(n,r);return i?Math.sqrt(i):i;}},cbed5754:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{bandWidth:function(){return w;},baseAnnotationChannels:function(){return b;},baseChannels:function(){return m;},baseGeometryChannels:function(){return g;},basePostInference:function(){return E;},basePreInference:function(){return x;},createBandOffset:function(){return S;},field:function(){return C;},initializeData:function(){return M;},p:function(){return T;},tooltip1d:function(){return y;},tooltip2d:function(){return v;},tooltipXd:function(){return _;},valueof:function(){return O;},visualMark:function(){return A;}});var a=i("777fffbe"),o=i("d7948920"),s=a._(o),l=i("3cfe57c6"),u=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let c=()=>(n,r)=>{let{encode:i}=r,{key:a}=i,o=u(i,["key"]);if(void 0!==a)return[n,r];let c=Object.values(o).map(({value:n})=>n),f=n.map(n=>c.filter(Array.isArray).map(r=>r[n]).join("-"));return[n,(0,s.default)({},r,{encode:{key:(0,l.column)(f)}})];};c.props={};var f=i("f5373dff");function d(n){return Math.abs(n)>10?String(n):n.toString().padStart(2,"0");}let h=(n={})=>{let{channel:r="x"}=n;return(n,i)=>{let{encode:a}=i,{tooltip:o}=i;if((0,f.isUnset)(o))return[n,i];let{title:u}=o;if(void 0!==u)return[n,i];let c=Object.keys(a).filter(n=>n.startsWith(r)).filter(n=>!a[n].inferred).map(n=>(0,l.columnOf)(a,n)).filter(([n])=>n).map(n=>n[0]);if(0===c.length)return[n,i];let h=[];for(let r of n)h[r]={value:c.map(n=>n[r]instanceof Date?function(n){let r=n.getFullYear(),i=d(n.getMonth()+1),a=d(n.getDate()),o=`${r}-${i}-${a}`,s=n.getHours(),l=n.getMinutes(),u=n.getSeconds();return s||l||u?`${o} ${d(s)}:${d(l)}:${d(u)}`:o;}(n[r]):n[r]).join(", ")};return[n,(0,s.default)({},i,{tooltip:{title:h}})];};};h.props={};let p=n=>{let{channel:r}=n;return(n,i)=>{let{encode:a,tooltip:o}=i;if((0,f.isUnset)(o))return[n,i];let{items:l=[]}=o;if(!l||l.length>0)return[n,i];let u=(Array.isArray(r)?r:[r]).flatMap(n=>Object.keys(a).filter(r=>r.startsWith(n)).map(n=>{let{field:r,value:i,inferred:o=!1,aggregate:s}=a[n];return o?null:s&&i?{channel:n}:r?{field:r}:i?{channel:n}:null;}).filter(n=>null!==n));return[n,(0,s.default)({},i,{tooltip:{items:u}})];};};function m(n={}){let{shapes:r}=n;return[{name:"color"},{name:"opacity"},{name:"shape",range:r},{name:"enterType"},{name:"enterDelay",scaleKey:"enter"},{name:"enterDuration",scaleKey:"enter"},{name:"enterEasing"},{name:"key",scale:"identity"},{name:"groupKey",scale:"identity"},{name:"label",scale:"identity"}];}function g(n={}){return[...m(n),{name:"title",scale:"identity"}];}function v(){return[{type:h,channel:"color"},{type:p,channel:["x","y"]}];}function y(){return[{type:h,channel:"x"},{type:p,channel:["y"]}];}function _(){return[{type:h,channel:"color"},{type:p,channel:["position"]}];}function b(n={}){return m(n);}function x(){return[{type:c}];}function E(){return[];}function w(n,r){return n.getBandWidth(n.invert(r));}function S(n,r,i={}){let{x:a,y:o,series:s}=r,{x:l,y:u,series:c}=n,{style:{bandOffset:f=c?0:.5,bandOffsetX:d=f,bandOffsetY:h=f}={}}=i,p=!!(null==l?void 0:l.getBandWidth),m=!!(null==u?void 0:u.getBandWidth),g=!!(null==c?void 0:c.getBandWidth);return p||m?(n,r)=>{let i=p?w(l,a[r]):0,f=m?w(u,o[r]):0,v=g&&s?(w(c,s[r])/2+ +s[r])*i:0,[y,_]=n;return[y+d*i+v,_+h*f];}:n=>n;}function T(n){return parseFloat(n)/100;}function A(n,r,i,a){let{x:o,y:s}=i,{innerWidth:l,innerHeight:u}=a.getOptions(),c=Array.from(n,n=>{let r=o[n],i=s[n];return[["string"==typeof r?T(r)*l:+r,"string"==typeof i?T(i)*u:+i]];});return[n,c];}function C(n){return"function"==typeof n?n:r=>r[n];}function O(n,r){return Array.from(n,C(r));}function M(n,r){let{source:i=n=>n.source,target:a=n=>n.target,value:o=n=>n.value}=r,{links:s,nodes:l}=n,u=O(s,i),c=O(s,a),f=O(s,o);return{links:s.map((n,r)=>({target:c[r],source:u[r],value:f[r]})),nodes:l||Array.from(new Set([...u,...c]),n=>({key:n}))};}p.props={};},ccdb6272:function(n,r,i){var a=i("8e66fe3e");n.exports=function(n){var r=a(n,function(n){return 500===i.size&&i.clear(),n;}),i=r.cache;return r;};},cd1e34ba:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"BaseForm",{enumerable:!0,get:function(){return $;}});var a=i("777fffbe"),o=i("852bbaa9"),s=a._(i("ee64167d")),l=a._(i("a854094b")),u=a._(i("e4870cf0")),c=a._(i("23934e00")),f=a._(i("9b84be4b")),d=a._(i("f1020fa4")),h=a._(i("613f75ca")),p=i("64681837"),m=i("4701d2de"),g=i("39eeb25c"),v=i("1e1294ad"),y=i("4e8d0e83"),_=i("58fbde6a"),b=i("e9a2c4e6"),x=i("bf00cf91"),E=i("c5499b8c"),w=i("a816be8d"),S=i("865cc100"),T=i("a3273044"),A=i("68e59ab8"),C=a._(i("a5a99096")),O=a._(i("f34e933b")),M=a._(i("e68da947")),R=a._(i("064ecd09")),P=a._(i("ddaa0afd")),k=a._(i("dfe6c97a")),I=a._(i("dd8ccb36")),L=i("a275200c"),N=o._(i("609f48be")),D=a._(i("2faf3d77")),F=a._(i("22e5bac1")),B=i("11bba482"),j=i("02a23b09"),z=i("a6284f72"),U=i("dac8af92"),V=["children","contentRender","submitter","fieldProps","formItemProps","groupProps","transformKey","formRef","onInit","form","loading","formComponentType","extraUrlParams","syncToUrl","onUrlSearchChange","onReset","omitNil","isKeyPressSubmit","autoFocusFirstInput","grid","rowProps","colProps"],G=["extraUrlParams","syncToUrl","isKeyPressSubmit","syncToUrlAsImportant","syncToInitialValues","children","contentRender","submitter","fieldProps","proFieldProps","formItemProps","groupProps","dateFormatter","formRef","onInit","form","formComponentType","onReset","grid","rowProps","colProps","omitNil","request","params","initialValues","formKey","readonly","onLoadingChange","loading"],H=function(n,r,i){return!0===n?r:(0,_.runFunction)(n,r,i);},W=function(n){return!n||Array.isArray(n)?n:[n];};function X(n){var r,i=n.children,a=n.contentRender,o=n.submitter,s=(n.fieldProps,n.formItemProps,n.groupProps,n.transformKey),p=n.formRef,g=n.onInit,y=n.form,_=n.loading,b=(n.formComponentType,n.extraUrlParams),x=void 0===b?{}:b,E=n.syncToUrl,T=n.onUrlSearchChange,A=n.onReset,M=n.omitNil,R=void 0===M||M,P=(n.isKeyPressSubmit,n.autoFocusFirstInput),D=void 0===P||P,B=n.grid,z=n.rowProps,G=n.colProps,X=(0,h.default)(n,V),q=O.default.useFormInstance(),$=((null===C.default||void 0===C.default||null===(r=C.default.useConfig)||void 0===r?void 0:r.call(C.default))||{componentSize:"middle"}).componentSize,Y=(0,N.useRef)(y||q),Z=(0,j.useGridHelpers)({grid:B,rowProps:z}).RowWrapper,K=(0,S.useRefFunction)(function(){return q;}),Q=(0,N.useMemo)(function(){var n;return{getFieldsFormatValue:function(n){var r;return s(null===(r=K())||void 0===r?void 0:r.getFieldsValue(n),R);},getFieldFormatValue:function(){var n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=W(r);if(!i)throw Error("nameList is require");var a=null===(n=K())||void 0===n?void 0:n.getFieldValue(i),o=i?(0,I.default)({},i,a):a,l=(0,d.default)(i);return l.shift(),(0,k.default)(s(o,R,l),i);},getFieldFormatValueObject:function(n){var r,i=W(n),a=null===(r=K())||void 0===r?void 0:r.getFieldValue(i);return s(i?(0,I.default)({},i,a):a,R,i);},validateFieldsReturnFormatValue:(n=(0,f.default)((0,c.default)().mark(function n(r){var i,a;return(0,c.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(!Array.isArray(r)&&r)){n.next=2;break;}throw Error("nameList must be array");case 2:return n.next=4,null===(i=K())||void 0===i?void 0:i.validateFields(r);case 4:return a=s(n.sent,R),n.abrupt("return",a||{});case 7:case"end":return n.stop();}},n);})),function(r){return n.apply(this,arguments);})};},[R,s]),J=(0,N.useMemo)(function(){return N.default.Children.toArray(i).map(function(n,r){return 0===r&&N.default.isValidElement(n)&&D?N.default.cloneElement(n,(0,u.default)((0,u.default)({},n.props),{},{autoFocus:D})):n;});},[D,i]),ee=(0,N.useMemo)(function(){return"boolean"!=typeof o&&o?o:{};},[o]),et=(0,N.useMemo)(function(){if(!1!==o)return(0,U.jsx)(F.default,(0,u.default)((0,u.default)({},ee),{},{onReset:function(){var n,r,i,a=s(null===(n=Y.current)||void 0===n?void 0:n.getFieldsValue(),R);null==ee||null===(r=ee.onReset)||void 0===r||r.call(ee,a),null==A||A(a),E&&T(H(E,Object.keys(s(null===(i=Y.current)||void 0===i?void 0:i.getFieldsValue(),!1)).reduce(function(n,r){return(0,u.default)((0,u.default)({},n),{},(0,l.default)({},r,a[r]||void 0));},x)||{},"set"));},submitButtonProps:(0,u.default)({loading:_},ee.submitButtonProps)}),"submitter");},[o,ee,_,s,R,A,E,x,T]),en=(0,N.useMemo)(function(){var n=B?(0,U.jsx)(Z,{children:J}):J;return a?a(n,et,Y.current):n;},[B,Z,J,a,et]),er=(0,w.usePrevious)(n.initialValues);return(0,N.useEffect)(function(){if(!E&&n.initialValues&&er&&!X.request){var r=(0,v.isDeepEqualReact)(n.initialValues,er);(0,L.noteOnce)(r,"initialValues \u53EA\u5728 form \u521D\u59CB\u5316\u65F6\u751F\u6548\uFF0C\u5982\u679C\u4F60\u9700\u8981\u5F02\u6B65\u52A0\u8F7D\u63A8\u8350\u4F7F\u7528 request\uFF0C\u6216\u8005 initialValues ? <Form/> : null "),(0,L.noteOnce)(r,"The initialValues only take effect when the form is initialized, if you need to load asynchronously recommended request, or the initialValues ? <Form/> : null ");}},[n.initialValues]),(0,N.useImperativeHandle)(p,function(){return(0,u.default)((0,u.default)({},Y.current),Q);},[Q,Y.current]),(0,N.useEffect)(function(){var n,r,i=s(null===(n=Y.current)||void 0===n||null===(r=n.getFieldsValue)||void 0===r?void 0:r.call(n,!0),R);null==g||g(i,(0,u.default)((0,u.default)({},Y.current),Q));},[]),(0,U.jsx)(m.ProFormContext.Provider,{value:(0,u.default)((0,u.default)({},Q),{},{formRef:Y}),children:(0,U.jsx)(C.default,{componentSize:X.size||$,children:(0,U.jsxs)(j.GridContext.Provider,{value:{grid:B,colProps:G},children:[!1!==X.component&&(0,U.jsx)("input",{type:"text",style:{display:"none"}}),en]})})});}var q=0;function $(n){var r=n.extraUrlParams,i=void 0===r?{}:r,a=n.syncToUrl,o=n.isKeyPressSubmit,d=n.syncToUrlAsImportant,m=n.syncToInitialValues,v=void 0===m||m,_=(n.children,n.contentRender,n.submitter,n.fieldProps),w=n.proFieldProps,k=n.formItemProps,L=n.groupProps,F=n.dateFormatter,j=void 0===F?"string":F,V=n.formRef,W=(n.onInit,n.form),$=n.formComponentType,Y=(n.onReset,n.grid,n.rowProps,n.colProps,n.omitNil),Z=void 0===Y||Y,K=n.request,Q=n.params,J=n.initialValues,ee=n.formKey,et=void 0===ee?q:ee,en=(n.readonly,n.onLoadingChange),er=n.loading,ei=(0,h.default)(n,G),ea=(0,N.useRef)({}),eo=(0,E.useMountMergeState)(!1,{onChange:en,value:er}),es=(0,s.default)(eo,2),el=es[0],eu=es[1],ec=(0,A.useUrlSearchParams)({},{disabled:!a}),ef=(0,s.default)(ec,2),ed=ef[0],eh=ef[1],ep=(0,N.useRef)((0,y.nanoid)());(0,N.useEffect)(function(){q+=0;},[]);var em=(0,x.useFetchData)({request:K,params:Q,proFieldKey:et}),eg=(0,s.default)(em,1)[0],ev=(0,(0,N.useContext)(C.default.ConfigContext).getPrefixCls)("pro-form"),ey=(0,T.useStyle)("ProForm",function(n){return(0,l.default)({},".".concat(ev),(0,l.default)({},"> div:not(".concat(n.proComponentsCls,"-form-light-filter)"),{".pro-field":{maxWidth:"100%","@media screen and (max-width: 575px)":{maxWidth:"calc(93vw - 48px)"},"&-xs":{width:104},"&-s":{width:216},"&-sm":{width:216},"&-m":{width:328},"&-md":{width:328},"&-l":{width:440},"&-lg":{width:440},"&-xl":{width:552}}}));}),e_=ey.wrapSSR,eb=ey.hashId,ex=(0,N.useState)(function(){return a?H(a,ed,"get"):{};}),eE=(0,s.default)(ex,2),ew=eE[0],eS=eE[1],eT=(0,N.useRef)({}),eA=(0,N.useRef)({}),eC=(0,S.useRefFunction)(function(n,r,i){return(0,b.transformKeySubmitValue)((0,g.conversionMomentValue)(n,j,eA.current,r,i),eT.current,r);});(0,N.useEffect)(function(){v||eS({});},[v]);var eO=(0,S.useRefFunction)(function(){return(0,u.default)((0,u.default)({},ed),i);});(0,N.useEffect)(function(){a&&eh(H(a,eO(),"set"));},[i,eO,a]);var eM=(0,N.useMemo)(function(){if("undefined"!=typeof window&&$&&["DrawerForm"].includes($))return function(n){return n.parentNode||document.body;};},[$]),eR=(0,S.useRefFunction)((0,f.default)((0,c.default)().mark(function n(){var r,o,s,f,d,h,p;return(0,c.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(ei.onFinish){n.next=2;break;}return n.abrupt("return");case 2:if(!el){n.next=4;break;}return n.abrupt("return");case 4:return n.prev=4,s=null==ea||null===(r=ea.current)||void 0===r||null===(o=r.getFieldsFormatValue)||void 0===o?void 0:o.call(r),(f=ei.onFinish(s))instanceof Promise&&eu(!0),n.next=10,f;case 10:a&&(p=Object.keys(null==ea||null===(d=ea.current)||void 0===d||null===(h=d.getFieldsFormatValue)||void 0===h?void 0:h.call(d,void 0,!1)).reduce(function(n,r){var i;return(0,u.default)((0,u.default)({},n),{},(0,l.default)({},r,null!==(i=s[r])&&void 0!==i?i:void 0));},i),Object.keys(ed).forEach(function(n){!1===p[n]||0===p[n]||p[n]||(p[n]=void 0);}),eh(H(a,p,"set"))),eu(!1),n.next=18;break;case 14:n.prev=14,n.t0=n.catch(4),console.log(n.t0),eu(!1);case 18:case"end":return n.stop();}},n,null,[[4,14]]);})));return((0,N.useImperativeHandle)(V,function(){return ea.current;},[!eg]),!eg&&n.request)?(0,U.jsx)("div",{style:{paddingTop:50,paddingBottom:50,textAlign:"center"},children:(0,U.jsx)(M.default,{})}):e_((0,U.jsx)(z.EditOrReadOnlyContext.Provider,{value:{mode:n.readonly?"read":"edit"},children:(0,U.jsx)(p.ProConfigProvider,{needDeps:!0,children:(0,U.jsx)(D.default.Provider,{value:{formRef:ea,fieldProps:_,proFieldProps:w,formItemProps:k,groupProps:L,formComponentType:$,getPopupContainer:eM,formKey:ep.current,setFieldValueType:function(n,r){var i=r.valueType,a=r.dateFormat,o=r.transform;Array.isArray(n)&&(eT.current=(0,I.default)(eT.current,n,o),eA.current=(0,I.default)(eA.current,n,{valueType:void 0===i?"text":i,dateFormat:a}));}},children:(0,U.jsx)(B.FormListContext.Provider,{value:{},children:(0,U.jsx)(O.default,(0,u.default)((0,u.default)({onKeyPress:function(n){if(o&&"Enter"===n.key){var r;null===(r=ea.current)||void 0===r||r.submit();}},autoComplete:"off",form:W},(0,P.default)(ei,["ref","labelWidth","autoFocusFirstInput"])),{},{ref:function(n){ea.current&&(ea.current.nativeElement=null==n?void 0:n.nativeElement);},initialValues:void 0!==d&&d?(0,u.default)((0,u.default)((0,u.default)({},J),eg),ew):(0,u.default)((0,u.default)((0,u.default)({},ew),J),eg),onValuesChange:function(n,r){var i;null==ei||null===(i=ei.onValuesChange)||void 0===i||i.call(ei,eC(n,!!Z),eC(r,!!Z));},className:(0,R.default)(n.className,ev,eb),onFinish:eR,children:(0,U.jsx)(X,(0,u.default)((0,u.default)({transformKey:eC,autoComplete:"off",loading:el,onUrlSearchChange:eh},n),{},{formRef:ea,initialValues:(0,u.default)((0,u.default)({},J),eg)}))}))})})})}));}},cd3e165a:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),r.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"};},ceab2f6b:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{getSafetySelections:function(){return f;},getStepValueByValue:function(){return s;},hiddenHandle:function(){return l;},horizontalHandle:function(){return c;},ifHorizontal:function(){return d;},verticalHandle:function(){return u;}});var a=i("3862611d"),o=i("0381584d");function s(n,r,i){var a=Math.round((n-i)/r);return i+a*r;}function l(n,r,i){var a=1.4*i;return[["M",n-i,r-a],["L",n+i,r-a],["L",n+i,r+a],["L",n-i,r+a],["Z"]];}function u(n,r,i){var a=1.4*i,o=i/2,s=i/6,l=n+.4*a;return[["M",n,r],["L",l,r+o],["L",n+a,r+o],["L",n+a,r-o],["L",l,r-o],["Z"],["M",l,r+s],["L",n+a-2,r+s],["M",l,r-s],["L",n+a-2,r-s]];}function c(n,r,i){var a=1.4*i,o=i/2,s=i/6,l=r+.4*a;return[["M",n,r],["L",n-o,l],["L",n-o,r+a],["L",n+o,r+a],["L",n+o,l],["Z"],["M",n-s,l],["L",n-s,r+a-2],["M",n+s,l],["L",n+s,r+a-2]];}function f(n,r,i,o){void 0===o&&(o=4);var s,l=(0,a.__read)(n,2),u=l[0],c=l[1],f=(0,a.__read)(r,2),d=f[0],h=f[1],p=(0,a.__read)(i,2),m=p[0],g=p[1],v=(0,a.__read)([d,h],2),y=v[0],_=v[1],b=_-y;return(y>_&&(y=(s=(0,a.__read)([_,y],2))[0],_=s[1]),b>c-u)?[u,c]:y<u?m===u&&g===_?[u,_]:[u,b+u]:_>c?g===c&&m===y?[y,c]:[c-b,c]:[y,_];}function d(n,r,i){return void 0===n&&(n="horizontal"),"horizontal"===n?r:i;}o.Marker.registerSymbol("hiddenHandle",l),o.Marker.registerSymbol("verticalHandle",u),o.Marker.registerSymbol("horizontalHandle",c);},cebf455b:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"Quantize",{enumerable:!0,get:function(){return l;}});var a=i("cbc6046a"),o=i("d740e8f4"),s=i("73ee4a11");class l extends a.Threshold{getDefaultOptions(){return{domain:[0,1],range:[.5],nice:!1,tickCount:5,tickMethod:o.wilkinsonExtended};}constructor(n){super(n);}nice(){let{nice:n}=this.options;if(n){let[n,r,i]=this.getTickMethodOptions();this.options.domain=(0,s.d3LinearNice)(n,r,i);}}getTicks(){let{tickMethod:n}=this.options,[r,i,a]=this.getTickMethodOptions();return n(r,i,a);}getTickMethodOptions(){let{domain:n,tickCount:r}=this.options;return[n[0],n[n.length-1],r];}rescale(){this.nice();let{range:n,domain:r}=this.options,[i,a]=r;this.n=n.length-1,this.thresholds=Array(this.n);for(let n=0;n<this.n;n+=1)this.thresholds[n]=((n+1)*a-(n-this.n)*i)/(this.n+1);}invert(n){let[r,i]=super.invert(n),[a,o]=this.options.domain;return void 0===r&&void 0===i?[r,i]:[r||a,i||o];}getThresholds(){return this.thresholds;}clone(){return new l(this.options);}}},cf1ac170:function(n,r,i){"use strict";function a(n,r){let i;let a=-1,o=-1;if(void 0===r)for(let r of n)++o,null!=r&&(i<r||void 0===i&&r>=r)&&(i=r,a=o);else for(let s of n)null!=(s=r(s,++o,n))&&(i<s||void 0===i&&s>=s)&&(i=s,a=o);return a;}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},cf23b094:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),r.active=void 0;var a,o=Object.assign||function(n){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a]);}return n;},s=(a=i("609f48be"))&&a.__esModule?a:{default:a};function l(n,r){if(!n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&("object"==typeof r||"function"==typeof r)?r:n;}var u=r.active=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(i){function a(){!function(n,r){if(!(n instanceof r))throw TypeError("Cannot call a class as a function");}(this,a);for(var i,u,c,f=arguments.length,d=Array(f),h=0;h<f;h++)d[h]=arguments[h];return u=c=l(this,(i=a.__proto__||Object.getPrototypeOf(a)).call.apply(i,[this].concat(d))),c.state={active:!1},c.handleMouseDown=function(){return c.setState({active:!0});},c.handleMouseUp=function(){return c.setState({active:!1});},c.render=function(){return s.default.createElement(r,{onMouseDown:c.handleMouseDown,onMouseUp:c.handleMouseUp},s.default.createElement(n,o({},c.props,c.state)));},l(c,u);}return!function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Super expression must either be null or a function, not "+typeof r);n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(n,r):n.__proto__=r);}(a,i),a;}(s.default.Component);};r.default=u;},cf4f8679:function(n,r,i){"use strict";var a=Object.prototype.hasOwnProperty,o="~";function s(){}function l(n,r,i){this.fn=n,this.context=r,this.once=i||!1;}function u(n,r,i,a,s){if("function"!=typeof i)throw TypeError("The listener must be a function");var u=new l(i,a||n,s),c=o?o+r:r;return n._events[c]?n._events[c].fn?n._events[c]=[n._events[c],u]:n._events[c].push(u):(n._events[c]=u,n._eventsCount++),n;}function c(n,r){0==--n._eventsCount?n._events=new s:delete n._events[r];}function f(){this._events=new s,this._eventsCount=0;}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(o=!1)),f.prototype.eventNames=function(){var n,r,i=[];if(0===this._eventsCount)return i;for(r in n=this._events)a.call(n,r)&&i.push(o?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(n)):i;},f.prototype.listeners=function(n){var r=o?o+n:n,i=this._events[r];if(!i)return[];if(i.fn)return[i.fn];for(var a=0,s=i.length,l=Array(s);a<s;a++)l[a]=i[a].fn;return l;},f.prototype.listenerCount=function(n){var r=o?o+n:n,i=this._events[r];return i?i.fn?1:i.length:0;},f.prototype.emit=function(n,r,i,a,s,l){var u=o?o+n:n;if(!this._events[u])return!1;var c,f,d=this._events[u],h=arguments.length;if(d.fn){switch(d.once&&this.removeListener(n,d.fn,void 0,!0),h){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,r),!0;case 3:return d.fn.call(d.context,r,i),!0;case 4:return d.fn.call(d.context,r,i,a),!0;case 5:return d.fn.call(d.context,r,i,a,s),!0;case 6:return d.fn.call(d.context,r,i,a,s,l),!0;}for(f=1,c=Array(h-1);f<h;f++)c[f-1]=arguments[f];d.fn.apply(d.context,c);}else{var p,m=d.length;for(f=0;f<m;f++)switch(d[f].once&&this.removeListener(n,d[f].fn,void 0,!0),h){case 1:d[f].fn.call(d[f].context);break;case 2:d[f].fn.call(d[f].context,r);break;case 3:d[f].fn.call(d[f].context,r,i);break;case 4:d[f].fn.call(d[f].context,r,i,a);break;default:if(!c)for(p=1,c=Array(h-1);p<h;p++)c[p-1]=arguments[p];d[f].fn.apply(d[f].context,c);}}return!0;},f.prototype.on=function(n,r,i){return u(this,n,r,i,!1);},f.prototype.once=function(n,r,i){return u(this,n,r,i,!0);},f.prototype.removeListener=function(n,r,i,a){var s=o?o+n:n;if(!this._events[s])return this;if(!r)return c(this,s),this;var l=this._events[s];if(l.fn)l.fn!==r||a&&!l.once||i&&l.context!==i||c(this,s);else{for(var u=0,f=[],d=l.length;u<d;u++)(l[u].fn!==r||a&&!l[u].once||i&&l[u].context!==i)&&f.push(l[u]);f.length?this._events[s]=1===f.length?f[0]:f:c(this,s);}return this;},f.prototype.removeAllListeners=function(n){var r;return n?(r=o?o+n:n,this._events[r]&&c(this,r)):(this._events=new s,this._eventsCount=0),this;},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=o,f.EventEmitter=f,void 0!==n&&(n.exports=f);},cfce14bf:function(n,r,i){"use strict";function a(n,r){return Object.entries(n).reduce((i,[a,o])=>(i[a]=r(o,a,n),i),{});}function o(n){return n.map((n,r)=>r);}function s(n){return n[0];}function l(n){return n[n.length-1];}function u(n){return Array.from(new Set(n));}function c(n,r){let i=[[],[]];return n.forEach(n=>{i[r(n)?0:1].push(n);}),i;}function f(n){if(1===n.length)return[n];let r=[];for(let i=1;i<=n.length;i++)r.push(...function n(r,i=r.length){if(1===i)return r.map(n=>[n]);let a=[];for(let o=0;o<r.length;o++)n(r.slice(o+1),i-1).forEach(n=>{a.push([r[o],...n]);});return a;}(n,i));return r;}i.d(r,"__esModule",{value:!0}),i.e(r,{combine:function(){return f;},divide:function(){return c;},firstOf:function(){return s;},indexOf:function(){return o;},lastOf:function(){return l;},mapObject:function(){return a;},unique:function(){return u;}});},d0075e4a:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{library:function(){return o;},register:function(){return s;}});var a=i("66659c9e");let o={};function s(n,r){n.startsWith("symbol.")?(0,a.registerSymbol)(n.split(".").pop(),r):Object.assign(o,{[n]:r});}},d03c096f:function(n,r,i){function a(r){return n.exports=a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n;}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n;},n.exports.__esModule=!0,n.exports.default=n.exports,a(r);}n.exports=a,n.exports.__esModule=!0,n.exports.default=n.exports;},d0572d97:function(n,r,i){"use strict";function a(n){return"string"==typeof n;}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},d09f5ae7:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),r.default=function(n,r){var i={},a=function(n){var r=!(arguments.length>1)||void 0===arguments[1]||arguments[1];i[n]=r;};return 0===n&&a("first-child"),n===r-1&&a("last-child"),(0===n||n%2==0)&&a("even"),1===Math.abs(n%2)&&a("odd"),a("nth-child",n),i;};},d09fdf20:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"withPath",{enumerable:!0,get:function(){return o;}});var a=i("af0c43b0");function o(n){let r=3;return n.digits=function(i){if(!arguments.length)return r;if(null==i)r=null;else{let n=Math.floor(i);if(!(n>=0))throw RangeError(`invalid digits: ${i}`);r=n;}return n;},()=>new a.Path(r);}},d0d233d5:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return f;}});var a=i("777fffbe"),o=i("2cc7f81c"),s=a._(o),l="object"==typeof r&&r&&!r.nodeType&&r,u=l&&"object"==typeof n&&n&&!n.nodeType&&n,c=u&&u.exports===l?s.default.Buffer:void 0,f=(c?c.isBuffer:void 0)||function(){return!1;};},d105a374:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{convertDataToEntities:function(){return E;},convertNodePropsToEventData:function(){return S;},convertTreeToData:function(){return _;},fillFieldNames:function(){return y;},flattenTreeData:function(){return b;},getKey:function(){return v;},getPosition:function(){return m;},getTreeNodeProps:function(){return w;},isTreeNode:function(){return g;},traverseDataNodes:function(){return x;}});var a=i("777fffbe"),o=a._(i("99c0cd4c")),s=a._(i("f1020fa4")),l=a._(i("e4870cf0")),u=a._(i("613f75ca")),c=a._(i("f3efd1e9")),f=a._(i("ddaa0afd")),d=a._(i("a275200c")),h=a._(i("07aa9410")),p=["children"];function m(n,r){return"".concat(n,"-").concat(r);}function g(n){return n&&n.type&&n.type.isTreeNode;}function v(n,r){return null!=n?n:r;}function y(n){var r=n||{},i=r.title,a=r._title,o=r.key,s=r.children,l=i||"title";return{title:l,_title:a||[l],key:o||"key",children:s||"children"};}function _(n){return function n(r){return(0,c.default)(r).map(function(r){if(!g(r))return(0,d.default)(!r,"Tree/TreeNode can only accept TreeNode as children."),null;var i=r.key,a=r.props,o=a.children,s=(0,u.default)(a,p),c=(0,l.default)({key:i},s),f=n(o);return f.length&&(c.children=f),c;}).filter(function(n){return n;});}(n);}function b(n,r,i){var a=y(i),o=a._title,l=a.key,u=a.children,c=new Set(!0===r?[]:r),d=[];return!function n(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return i.map(function(h,p){for(var g,y=m(a?a.pos:"0",p),_=v(h[l],y),b=0;b<o.length;b+=1){var x=o[b];if(void 0!==h[x]){g=h[x];break;}}var E=Object.assign((0,f.default)(h,[].concat((0,s.default)(o),[l,u])),{title:g,key:_,parent:a,pos:y,children:null,data:h,isStart:[].concat((0,s.default)(a?a.isStart:[]),[0===p]),isEnd:[].concat((0,s.default)(a?a.isEnd:[]),[p===i.length-1])});return d.push(E),!0===r||c.has(_)?E.children=n(h[u]||[],E):E.children=[],E;});}(n),d;}function x(n,r,i){var a,l=("object"===(0,o.default)(i)?i:{externalGetKey:i})||{},u=l.childrenPropName,c=l.externalGetKey,f=y(l.fieldNames),d=f.key,h=f.children,p=u||h;c?"string"==typeof c?a=function(n){return n[c];}:"function"==typeof c&&(a=function(n){return c(n);}):a=function(n,r){return v(n[d],r);},function i(o,l,u,c){var f=o?o[p]:n,d=o?m(u.pos,l):"0",h=o?[].concat((0,s.default)(c),[o]):[];if(o){var g=a(o,d);r({node:o,index:l,pos:d,key:g,parentPos:u.node?u.pos:null,level:u.level+1,nodes:h});}f&&f.forEach(function(n,r){i(n,r,{node:o,pos:d,level:u?u.level+1:-1},h);});}(null);}function E(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.initWrapper,a=r.processEntity,o=r.onProcessFinished,s=r.externalGetKey,l=r.childrenPropName,u=r.fieldNames,c=arguments.length>2?arguments[2]:void 0,f={},d={},h={posEntities:f,keyEntities:d};return i&&(h=i(h)||h),x(n,function(n){var r=n.node,i=n.index,o=n.pos,s=n.key,l=n.parentPos,u=n.level,c={node:r,nodes:n.nodes,index:i,key:s,pos:o,level:u},p=v(s,o);f[o]=c,d[p]=c,c.parent=f[l],c.parent&&(c.parent.children=c.parent.children||[],c.parent.children.push(c)),a&&a(c,h);},{externalGetKey:s||c,childrenPropName:l,fieldNames:u}),o&&o(h),h;}function w(n,r){var i=r.expandedKeys,a=r.selectedKeys,o=r.loadedKeys,s=r.loadingKeys,l=r.checkedKeys,u=r.halfCheckedKeys,c=r.dragOverNodeKey,f=r.dropPosition,d=r.keyEntities,p=(0,h.default)(d,n);return{eventKey:n,expanded:-1!==i.indexOf(n),selected:-1!==a.indexOf(n),loaded:-1!==o.indexOf(n),loading:-1!==s.indexOf(n),checked:-1!==l.indexOf(n),halfChecked:-1!==u.indexOf(n),pos:String(p?p.pos:""),dragOver:c===n&&0===f,dragOverGapTop:c===n&&-1===f,dragOverGapBottom:c===n&&1===f};}function S(n){var r=n.data,i=n.expanded,a=n.selected,o=n.checked,s=n.loaded,u=n.loading,c=n.halfChecked,f=n.dragOver,h=n.dragOverGapTop,p=n.dragOverGapBottom,m=n.pos,g=n.active,v=n.eventKey,y=(0,l.default)((0,l.default)({},r),{},{expanded:i,selected:a,checked:o,loaded:s,loading:u,halfChecked:c,dragOver:f,dragOverGapTop:h,dragOverGapBottom:p,pos:m,active:g,key:v});return"props"in y||Object.defineProperty(y,"props",{get:function(){return(0,d.default)(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),n;}}),y;}},d105ec89:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return O;}});var a=i("777fffbe"),o=i("9b84be4b"),s=a._(o),l=i("a854094b"),u=a._(l),c=i("e333157c"),f=a._(c),d=i("df809dd2"),h=i("e4870cf0"),p=a._(h),m=i("553ee311"),g=i("9479dab9"),v=i("6654a076"),y=a._(v),_=i("8970bd89");class b extends y.default{constructor(...n){super(...n),(0,u.default)(this,"texture",void 0),(0,u.default)(this,"colorTexture",void 0);}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9});}getUninforms(){let n=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,p.default)((0,p.default)({},n.uniformsOption),r.uniformsOption);}getCommonUniformsInfo(){let{opacity:n=1,clampLow:r=!0,clampHigh:i=!0,noDataValue:a=-9999999,domain:o,rampColors:s}=this.layer.getLayerConfig(),l=o||(0,g.getDefaultDomain)(s);this.colorTexture=this.layer.textureService.getColorTexture(s,l);let u={u_domain:l,u_opacity:n||1,u_noDataValue:a,u_clampLow:r?1:0,u_clampHigh:(void 0!==i?i:r)?1:0,u_rasterTexture:this.texture,u_colorTexture:this.colorTexture};return this.textures=[this.texture,this.colorTexture],this.getUniformsBufferInfo(u);}getRasterData(n){return(0,s.default)(function*(){if(Array.isArray(n.data))return{data:n.data,width:n.width,height:n.height};{let{rasterData:r,width:i,height:a}=yield n.data;return{data:Array.from(r),width:i,height:a};}})();}initModels(){var n=this;return(0,s.default)(function*(){return n.buildModels();})();}buildModels(){var n=this;return(0,s.default)(function*(){n.initUniformsBuffer();let r=n.layer.getSource(),{createTexture2D:i,queryVerdorInfo:a}=n.rendererService,o=r.data.dataArray[0],{data:s,width:l,height:u}=yield n.getRasterData(o);return n.texture=i({data:new Float32Array(s),width:l,height:u,format:"WebGL1"===a()?m.gl.LUMINANCE:m.gl.RED,type:m.gl.FLOAT,alignment:1}),[(yield n.layer.buildLayerModel({moduleName:"rasterImageData",vertexShader:'layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;\nlayout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;\n\nlayout(std140) uniform commonUniforms {\n  vec2 u_domain;\n  float u_opacity;\n  float u_noDataValue;\n  float u_clampLow;\n  float u_clampHigh;\n};\n\nout vec2 v_texCoord;\n\n#pragma include "projection"\n\nvoid main() {\n  v_texCoord = a_Uv;\n  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));\n}\n',fragmentShader:"layout(std140) uniform commonUniforms {\n  vec2 u_domain;\n  float u_opacity;\n  float u_noDataValue;\n  float u_clampLow;\n  float u_clampHigh;\n};\n\nuniform sampler2D u_rasterTexture;\nuniform sampler2D u_colorTexture;\n\nin vec2 v_texCoord;\n\nbool isnan_emu(float x) { return (x > 0.0 || x < 0.0) ? x != x : x != 0.0; }\n\nout vec4 outputColor;\n\nvoid main() {\n  // Can use any component here since u_rasterTexture is under luminance format.\n  float value = texture(SAMPLER_2D(u_rasterTexture), vec2(v_texCoord.x, v_texCoord.y)).r;\n  if (value == u_noDataValue || isnan_emu(value)) {\n    discard;\n  } else if ((u_clampLow < 0.5 && value < u_domain[0]) || (u_clampHigh < 0.5 && value > u_domain[1])) {\n    discard;\n  } else {\n    float normalisedValue =(value - u_domain[0]) / (u_domain[1] - u_domain[0]);\n    vec4 color = texture(SAMPLER_2D(u_colorTexture), vec2(normalisedValue, 0));\n    \n    outputColor = color;\n    outputColor.a = outputColor.a * u_opacity ;\n    if (outputColor.a < 0.01)\n      discard;\n  }\n}\n",defines:n.getDefines(),triangulation:_.RasterImageTriangulation,primitive:m.gl.TRIANGLES,depth:{enable:!1},pickingEnabled:!1}))];})();}clearModels(){var n,r;null===(n=this.texture)||void 0===n||n.destroy(),null===(r=this.colorTexture)||void 0===r||r.destroy();}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:m.AttributeType.Attribute,descriptor:{shaderLocation:this.attributeLocation.UV,name:"a_Uv",buffer:{usage:m.gl.DYNAMIC_DRAW,data:[],type:m.gl.FLOAT},size:2,update:(n,r,i)=>[i[3],i[4]]}});}}var x=i("613f75ca"),E=a._(x);let w=["data"],S=["rasterData"];class T extends y.default{constructor(...n){super(...n),(0,u.default)(this,"texture",void 0),(0,u.default)(this,"dataOption",{});}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9});}getUninforms(){let n=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,p.default)((0,p.default)({},n.uniformsOption),r.uniformsOption);}getCommonUniformsInfo(){let{opacity:n=1,noDataValue:r=0}=this.layer.getLayerConfig(),{rMinMax:i=[0,255],gMinMax:a=[0,255],bMinMax:o=[0,255]}=this.dataOption,s={u_rminmax:i,u_gminmax:a,u_bminmax:o,u_opacity:n||1,u_noDataValue:r,u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(s);}getRasterData(n){var r=this;return(0,s.default)(function*(){if(Array.isArray(n.data)){let{data:i}=n,a=(0,E.default)(n,w);return r.dataOption=a,(0,p.default)({data:i},a);}let i=yield n.data,{rasterData:a}=i,o=(0,E.default)(i,S);return(r.dataOption=o,Array.isArray(a))?(0,p.default)({data:a},o):(0,p.default)({data:Array.from(a)},o);})();}initModels(){var n=this;return(0,s.default)(function*(){n.initUniformsBuffer();let r=n.layer.getSource(),{createTexture2D:i}=n.rendererService,a=r.data.dataArray[0],{data:o,width:s,height:l}=yield n.getRasterData(a);return n.texture=i({data:new Float32Array(o),width:s,height:l,format:m.gl.RGB,type:m.gl.FLOAT}),[(yield n.layer.buildLayerModel({moduleName:"rasterImageDataRGBA",vertexShader:'layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;\nlayout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;\n\nlayout(std140) uniform commonUniforms {\n  vec2 u_rminmax;\n  vec2 u_gminmax;\n  vec2 u_bminmax;\n  float u_opacity;\n  float u_noDataValue;\n};\n\nout vec2 v_texCoord;\n\n#pragma include "projection"\n\nvoid main() {\n  v_texCoord = a_Uv;\n  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));\n}\n',fragmentShader:"uniform sampler2D u_texture;\nlayout(std140) uniform commonUniforms {\n vec2 u_rminmax;\n vec2 u_gminmax;\n vec2 u_bminmax;\n float u_opacity;\n float u_noDataValue;\n};\n\nin vec2 v_texCoord;\n\nout vec4 outputColor;\n\nvoid main() {\n\n  vec3 rgb = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y)).rgb;\n\n  if(rgb == vec3(u_noDataValue)) {\n    outputColor = vec4(0.0, 0, 0, 0.0);\n  } else {\n    outputColor = vec4(rgb.r / (u_rminmax.y -u_rminmax.x), rgb.g /(u_gminmax.y -u_gminmax.x), rgb.b/ (u_bminmax.y - u_bminmax.x), u_opacity);\n  }\n\n  if(outputColor.a < 0.01)\n    discard;\n \n}",defines:n.getDefines(),triangulation:_.RasterImageTriangulation,primitive:m.gl.TRIANGLES,depth:{enable:!1},pickingEnabled:!1}))];})();}buildModels(){var n=this;return(0,s.default)(function*(){return n.initModels();})();}clearModels(){var n;null===(n=this.texture)||void 0===n||n.destroy();}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:m.AttributeType.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:m.gl.DYNAMIC_DRAW,data:[],type:m.gl.FLOAT},size:2,update:(n,r,i)=>[i[3],i[4]]}});}}class A extends y.default{constructor(...n){super(...n),(0,u.default)(this,"texture",void 0);}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9});}getCommonUniformsInfo(){let{opacity:n,clampLow:r=!0,clampHigh:i=!0,noDataValue:a=-9999999,domain:o,rampColors:s,colorTexture:l,rScaler:u=6553.6,gScaler:c=25.6,bScaler:f=.1,offset:d=1e4}=this.layer.getLayerConfig(),h=o||(0,g.getDefaultDomain)(s),p=l;l?this.layer.textureService.setColorTexture(l,s,h):p=this.layer.textureService.getColorTexture(s,h);let m={u_unpack:[u,c,f,d],u_domain:h,u_opacity:n||1,u_noDataValue:a,u_clampLow:r,u_clampHigh:void 0!==i?i:r,u_texture:this.texture,u_colorTexture:p};return this.textures=[this.texture,p],this.getUniformsBufferInfo(m);}initModels(){var n=this;return(0,s.default)(function*(){n.initUniformsBuffer();let r=n.layer.getSource(),{createTexture2D:i}=n.rendererService,a=yield r.data.images;return n.texture=i({data:a[0],width:a[0].width,height:a[0].height,min:m.gl.LINEAR,mag:m.gl.LINEAR}),[(yield n.layer.buildLayerModel({moduleName:"RasterTileDataImage",vertexShader:'layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;\n\nlayout(std140) uniform commonUniforms {\n  vec4 u_unpack;\n  vec2 u_domain;\n  float u_opacity;\n  float u_noDataValue;\n  float u_clampLow;\n  float u_clampHigh;\n};\nout vec2 v_texCoord;\n#pragma include "projection"\n\nvoid main() {\n  v_texCoord = a_Uv;\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));\n}\n',fragmentShader:"uniform sampler2D u_texture;\nuniform sampler2D u_colorTexture;\n\nlayout(std140) uniform commonUniforms {\n vec4 u_unpack;\n vec2 u_domain;\n float u_opacity;\n float u_noDataValue;\n float u_clampLow;\n float u_clampHigh;\n};\n\nin vec2 v_texCoord;\nout vec4 outputColor;\n\n\nfloat getElevation(vec2 coord, float bias) {\n    // Convert encoded elevation value to meters\n    vec4 data =  texture(SAMPLER_2D(u_texture), coord,bias) * 255.0;\n    data.a = -1.0;\n    return dot(data, u_unpack);\n}\n\nvec4 getColor(float value) {\n   float normalisedValue =(value- u_domain[0]) / (u_domain[1] - u_domain[0]);\n    vec2 coord = vec2(normalisedValue, 0);\n    return  texture(SAMPLER_2D(u_colorTexture), coord);\n}\n\nvoid main() {\n  float value = getElevation(v_texCoord,0.0);\n  if (value == u_noDataValue) {\n    outputColor = vec4(0.0, 0, 0, 0.0);\n  } else if ((u_clampLow < 0.5 && value < u_domain[0]) || (u_clampHigh < 0.5 && value > u_domain[1])) {\n     outputColor = vec4(0.0, 0, 0, 0.0);\n  } else {\n   \n    outputColor = getColor(value);\n    outputColor.a =  outputColor.a * u_opacity ;\n      if(outputColor.a < 0.01)\n      discard;\n  }\n}\n",defines:n.getDefines(),triangulation:_.RasterImageTriangulation,primitive:m.gl.TRIANGLES,depth:{enable:!1}}))];})();}clearModels(){var n;null===(n=this.texture)||void 0===n||n.destroy();}buildModels(){var n=this;return(0,s.default)(function*(){return n.initModels();})();}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:m.AttributeType.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:m.gl.DYNAMIC_DRAW,data:[],type:m.gl.FLOAT},size:2,update:(n,r,i)=>[i[3],i[4]]}});}}let C={raster:b,rasterRgb:T,raster3d:b,rasterTerrainRgb:A};class O extends f.default{constructor(...n){super(...n),(0,u.default)(this,"type","RasterLayer");}buildModels(){var n=this;return(0,s.default)(function*(){let r=n.getModelType();n.layerModel=new C[r](n),yield n.initLayerModels();})();}getDefaultConfig(){return({raster:{},rasterRgb:{},raster3d:{},rasterTerrainRgb:{}})[this.getModelType()];}getModelType(){switch(this.layerSource.getParserType()){case"raster":case"ndi":default:return"raster";case"rasterRgb":case"rgb":return"rasterRgb";case"image":return"rasterTerrainRgb";}}getLegend(n){if("color"!==n)return{type:void 0,field:void 0,items:[]};let r=this.getLayerConfig().rampColors;return(0,d.rampColor2legend)(r,n);}}},d11b5d35:function(n,r,i){var a=i("6cf76861"),o=i("29762c9a"),s=i("5f10f03a"),l=s&&s.isMap,u=l?o(l):a;n.exports=u;},d2953067:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{isValid:function(){return l;}});var a=i("777fffbe"),o=i("6aaf503e"),s=a._(o);function l(n){return!(0,s.default)(n)&&null!==n&&!Number.isNaN(n);}},d2a6da1b:function(n,r,i){"use strict";var a,o;i.d(r,"__esModule",{value:!0}),i.e(r,{ShapeType2D:function(){return l;},ShapeType3D:function(){return s;},circle:function(){return c;},geometryShape:function(){return m;},hexagon:function(){return h;},pentagon:function(){return p;},polygonPath:function(){return u;},square:function(){return f;},triangle:function(){return d;}});let s=((a={}).CYLINDER="cylinder",a.SQUARECOLUMN="squareColumn",a.TRIANGLECOLUMN="triangleColumn",a.HEXAGONCOLUMN="hexagonColumn",a.PENTAGONCOLUMN="pentagonColumn",a),l=((o={}).CIRCLE="circle",o.SQUARE="square",o.TRIANGLE="triangle",o.HEXAGON="hexagon",o.PENTAGON="pentagon",o);function u(n,r=0){let i=2*Math.PI/n,a=[];for(let o=0;o<n;o++)a.push(i*o+r*Math.PI/12);return a.map(n=>[Math.sin(n+Math.PI/4),Math.cos(n+Math.PI/4),0]);}function c(){return u(30);}function f(){return u(4);}function d(){return u(3);}function h(){return u(6,1);}function p(){return u(5);}let m={[l.CIRCLE]:c,[l.HEXAGON]:h,[l.TRIANGLE]:d,[l.SQUARE]:f,[l.PENTAGON]:p,[s.CYLINDER]:c,[s.HEXAGONCOLUMN]:h,[s.TRIANGLECOLUMN]:d,[s.SQUARECOLUMN]:f,[s.PENTAGONCOLUMN]:p};},d31ae15f:function(n,r,i){var a=i("7f46ba64")(Object.keys,Object);n.exports=a;},d32b8c24:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{cartesian:function(){return s;},cartesianAddInPlace:function(){return c;},cartesianCross:function(){return u;},cartesianDot:function(){return l;},cartesianNormalizeInPlace:function(){return d;},cartesianScale:function(){return f;},spherical:function(){return o;}});var a=i("27ee04b2");function o(n){return[(0,a.atan2)(n[1],n[0]),(0,a.asin)(n[2])];}function s(n){var r=n[0],i=n[1],o=(0,a.cos)(i);return[o*(0,a.cos)(r),o*(0,a.sin)(r),(0,a.sin)(i)];}function l(n,r){return n[0]*r[0]+n[1]*r[1]+n[2]*r[2];}function u(n,r){return[n[1]*r[2]-n[2]*r[1],n[2]*r[0]-n[0]*r[2],n[0]*r[1]-n[1]*r[0]];}function c(n,r){n[0]+=r[0],n[1]+=r[1],n[2]+=r[2];}function f(n,r){return[n[0]*r,n[1]*r,n[2]*r];}function d(n){var r=(0,a.sqrt)(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=r,n[1]/=r,n[2]/=r;}},d41bee1f:function(n,r,i){"use strict";var a;i.d(r,"__esModule",{value:!0}),i.d(r,"PassType",{enumerable:!0,get:function(){return o;}});let o=((a={}).Normal="normal",a.PostProcessing="post-processing",a);},d4ba3080:function(n,r,i){"use strict";function a(n){return"number"==typeof n;}function o(n){return n-Math.fround(n);}i.d(r,"__esModule",{value:!0}),i.e(r,{fp64LowPart:function(){return o;},isNumber:function(){return a;}});},d4c76e17:function(n,r,i){"use strict";function a(n,r,i,a,o){var s=n*n,l=s*n;return((1-3*n+3*s-l)*r+(4-6*s+3*l)*i+(1+3*n+3*s-3*l)*a+l*o)/6;}function o(n){var r=n.length-1;return function(i){var o=i<=0?i=0:i>=1?(i=1,r-1):Math.floor(i*r),s=n[o],l=n[o+1],u=o>0?n[o-1]:2*s-l,c=o<r-1?n[o+2]:2*l-s;return a((i-o/r)*r,u,s,l,c);};}i.d(r,"__esModule",{value:!0}),i.e(r,{basis:function(){return a;},default:function(){return o;}});},d555ff08:function(n,r,i){"use strict";var a=Object.prototype.hasOwnProperty,o="~";function s(){}function l(n,r,i){this.fn=n,this.context=r,this.once=i||!1;}function u(n,r,i,a,s){if("function"!=typeof i)throw TypeError("The listener must be a function");var u=new l(i,a||n,s),c=o?o+r:r;return n._events[c]?n._events[c].fn?n._events[c]=[n._events[c],u]:n._events[c].push(u):(n._events[c]=u,n._eventsCount++),n;}function c(n,r){0==--n._eventsCount?n._events=new s:delete n._events[r];}function f(){this._events=new s,this._eventsCount=0;}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(o=!1)),f.prototype.eventNames=function(){var n,r,i=[];if(0===this._eventsCount)return i;for(r in n=this._events)a.call(n,r)&&i.push(o?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(n)):i;},f.prototype.listeners=function(n){var r=o?o+n:n,i=this._events[r];if(!i)return[];if(i.fn)return[i.fn];for(var a=0,s=i.length,l=Array(s);a<s;a++)l[a]=i[a].fn;return l;},f.prototype.listenerCount=function(n){var r=o?o+n:n,i=this._events[r];return i?i.fn?1:i.length:0;},f.prototype.emit=function(n,r,i,a,s,l){var u=o?o+n:n;if(!this._events[u])return!1;var c,f,d=this._events[u],h=arguments.length;if(d.fn){switch(d.once&&this.removeListener(n,d.fn,void 0,!0),h){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,r),!0;case 3:return d.fn.call(d.context,r,i),!0;case 4:return d.fn.call(d.context,r,i,a),!0;case 5:return d.fn.call(d.context,r,i,a,s),!0;case 6:return d.fn.call(d.context,r,i,a,s,l),!0;}for(f=1,c=Array(h-1);f<h;f++)c[f-1]=arguments[f];d.fn.apply(d.context,c);}else{var p,m=d.length;for(f=0;f<m;f++)switch(d[f].once&&this.removeListener(n,d[f].fn,void 0,!0),h){case 1:d[f].fn.call(d[f].context);break;case 2:d[f].fn.call(d[f].context,r);break;case 3:d[f].fn.call(d[f].context,r,i);break;case 4:d[f].fn.call(d[f].context,r,i,a);break;default:if(!c)for(p=1,c=Array(h-1);p<h;p++)c[p-1]=arguments[p];d[f].fn.apply(d[f].context,c);}}return!0;},f.prototype.on=function(n,r,i){return u(this,n,r,i,!1);},f.prototype.once=function(n,r,i){return u(this,n,r,i,!0);},f.prototype.removeListener=function(n,r,i,a){var s=o?o+n:n;if(!this._events[s])return this;if(!r)return c(this,s),this;var l=this._events[s];if(l.fn)l.fn!==r||a&&!l.once||i&&l.context!==i||c(this,s);else{for(var u=0,f=[],d=l.length;u<d;u++)(l[u].fn!==r||a&&!l[u].once||i&&l[u].context!==i)&&f.push(l[u]);f.length?this._events[s]=1===f.length?f[0]:f:c(this,s);}return this;},f.prototype.removeAllListeners=function(n){var r;return n?(r=o?o+n:n,this._events[r]&&c(this,r)):(this._events=new s,this._eventsCount=0),this;},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=o,f.EventEmitter=f,void 0!==n&&(n.exports=f);},d558e98a:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{AABB:function(){return tl;},AbstractRenderer:function(){return tt;},AbstractRendererPlugin:function(){return te;},CSS:function(){return a2;},Camera:function(){return tN;},CameraType:function(){return tP;},Canvas:function(){return oa;},CanvasEvent:function(){return a9;},Circle:function(){return aD;},CustomElement:function(){return aB;},CustomEvent:function(){return i$;},DisplayObject:function(){return aN;},ERROR_MSG_METHOD_NOT_IMPLEMENTED:function(){return tp;},ElementEvent:function(){return i4;},Ellipse:function(){return aj;},FederatedEvent:function(){return iH;},GradientType:function(){return nb;},Group:function(){return az;},HTML:function(){return aV;},Image:function(){return aG;},Line:function(){return aW;},MutationEvent:function(){return i5;},Node:function(){return iK;},OffscreenCanvasCreator:function(){return iJ;},Path:function(){return aq;},Point:function(){return td;},Polygon:function(){return aY;},Polyline:function(){return aK;},PropertySyntax:function(){return tj;},Rect:function(){return aQ;},RenderReason:function(){return i0;},Shape:function(){return e7;},Text:function(){return a0;},UnitType:function(){return nl;},computeLinearGradient:function(){return nD;},computeRadialGradient:function(){return nF;},convertToPath:function(){return rp;},createVec3:function(){return ty;},deg2rad:function(){return tb;},findClosestClipPathTarget:function(){return r9;},getAngle:function(){return tg;},getOrCalculatePathTotalLength:function(){return rr;},isCSSRGB:function(){return nq;},isDisplayObject:function(){return aR;},isFillOrStrokeAffected:function(){return io;},isPattern:function(){return nX;},parseColor:function(){return n$;},parseTransform:function(){return rT;},parsedTransformToMat4:function(){return iP;},propertyMetadataCache:function(){return rz;},runtime:function(){return aE;},setDOMSize:function(){return ie;}});var a,o,s,l,u,c,f,d,h,p,m,g,v,y,_,b,x,E,w,S,T,A,C,O,M,R,P=i("777fffbe"),k=i("852bbaa9"),I=i("f5124c7f"),L=i("e4870cf0"),N=P._(L),D=i("8bbe4f57"),F=P._(D),B=i("85158032"),j=P._(B),z=i("f1020fa4"),U=P._(z),V=i("60824e0d"),G=P._(V),H=i("fbe36db6"),W=P._(H),X=i("ee64167d"),q=P._(X),$=i("ffac7795"),Y=P._($),Z=i("377bcc16"),K=k._(Z),Q=i("26429605"),J=k._(Q),ee=i("da755037"),et=k._(ee),en=i("7242d2f8"),er=k._(en),ei=i("58eaf31b"),ea=k._(ei),eo=i("d6f42022"),es=k._(eo),el=i("1f338b89"),eu=P._(el),ec=i("3f92e064"),ef=i("d0572d97"),ed=P._(ef),eh=i("83684c30"),ep=P._(eh),em=i("3715e357"),eg=P._(em),ev=i("3862611d"),ey=i("eb06400d"),e_=i("aab2678b");function eb(n,r,i,a,o){var s=(0,ec.distanceSquareRoot)([n,r],[i,a]),l={x:0,y:0};if("number"==typeof o){if(o<=0)l={x:n,y:r};else if(o>=s)l={x:i,y:a};else{var u=(0,e_.midPoint)([n,r],[i,a],o/s);l={x:u[0],y:u[1]};}}return{length:s,point:l,min:{x:Math.min(n,i),y:Math.min(r,a)},max:{x:Math.max(n,i),y:Math.max(r,a)}};}function ex(n,r){var i=n.x,a=n.y,o=r.x,s=r.y,l=Math.sqrt((Math.pow(i,2)+Math.pow(a,2))*(Math.pow(o,2)+Math.pow(s,2)));return(i*s-a*o<0?-1:1)*Math.acos((i*o+a*s)/l);}function eE(n,r,i,a,o,s,l,u,c,f){var d,h=f.bbox,p=void 0===h||h,m=f.length,g=void 0===m||m,v=f.sampleSize,y=void 0===v?10:v,_="number"==typeof c,b=n,x=r,E=0,w=[b,x,0],S=[b,x],T={x:0,y:0},A=[{x:b,y:x}];_&&c<=0&&(T={x:b,y:x});for(var C=0;C<=y;C+=1){if(b=(d=function(n,r,i,a,o,s,l,u,c){var f=1-c;return{x:Math.pow(f,3)*n+3*Math.pow(f,2)*c*i+3*f*Math.pow(c,2)*o+Math.pow(c,3)*l,y:Math.pow(f,3)*r+3*Math.pow(f,2)*c*a+3*f*Math.pow(c,2)*s+Math.pow(c,3)*u};}(n,r,i,a,o,s,l,u,C/y)).x,x=d.y,p&&A.push({x:b,y:x}),g&&(E+=(0,ec.distanceSquareRoot)(S,[b,x])),S=[b,x],_&&E>=c&&c>w[2]){var O=(E-c)/(E-w[2]);T={x:S[0]*(1-O)+w[0]*O,y:S[1]*(1-O)+w[1]*O};}w=[b,x,E];}return _&&c>=E&&(T={x:l,y:u}),{length:E,point:T,min:{x:Math.min.apply(null,A.map(function(n){return n.x;})),y:Math.min.apply(null,A.map(function(n){return n.y;}))},max:{x:Math.max.apply(null,A.map(function(n){return n.x;})),y:Math.max.apply(null,A.map(function(n){return n.y;}))}};}function ew(n,r,i){for(var a,o,s,l,u,c,f,d,h,p=(0,ey.normalizePath)(n),m="number"==typeof r,g=[],v=0,y=0,_=0,b=0,x=[],E=[],w=0,S={x:0,y:0},T=S,A=S,C=S,O=0,M=0,R=p.length;M<R;M+=1)g=(f="M"===(d=(h=p[M])[0]))?g:[v,y].concat(h.slice(1)),f?(T=S={x:_=h[1],y:b=h[2]},w=0,m&&r<.001&&(C=S)):"L"===d?(w=(a=eb(g[0],g[1],g[2],g[3],(r||0)-O)).length,S=a.min,T=a.max,A=a.point):"A"===d?(w=(o=function(n,r,i,a,o,s,l,u,c,f,d){var h,p=d.bbox,m=void 0===p||p,g=d.length,v=void 0===g||g,y=d.sampleSize,_=void 0===y?30:y,b="number"==typeof f,x=n,E=r,w=0,S=[x,E,0],T=[x,E],A={x:0,y:0},C=[{x:x,y:E}];b&&f<=0&&(A={x:x,y:E});for(var O=0;O<=_;O+=1){if(x=(h=function(n,r,i,a,o,s,l,u,c,f){var d=Math.abs,h=Math.sin,p=Math.cos,m=Math.sqrt,g=Math.PI,v=d(i),y=d(a),_=g/180*((o%360+360)%360);if(n===u&&r===c)return{x:n,y:r};if(0===v||0===y)return eb(n,r,u,c,f).point;var b=(n-u)/2,x=(r-c)/2,E={x:p(_)*b+h(_)*x,y:-h(_)*b+p(_)*x},w=Math.pow(E.x,2)/Math.pow(v,2)+Math.pow(E.y,2)/Math.pow(y,2);w>1&&(v*=m(w),y*=m(w));var S=(Math.pow(v,2)*Math.pow(y,2)-Math.pow(v,2)*Math.pow(E.y,2)-Math.pow(y,2)*Math.pow(E.x,2))/(Math.pow(v,2)*Math.pow(E.y,2)+Math.pow(y,2)*Math.pow(E.x,2)),T=(s!==l?1:-1)*m(S=S<0?0:S),A={x:T*(v*E.y/y),y:T*(-(y*E.x)/v)},C={x:p(_)*A.x-h(_)*A.y+(n+u)/2,y:h(_)*A.x+p(_)*A.y+(r+c)/2},O={x:(E.x-A.x)/v,y:(E.y-A.y)/y},M=ex({x:1,y:0},O),R=ex(O,{x:(-E.x-A.x)/v,y:(-E.y-A.y)/y});!l&&R>0?R-=2*g:l&&R<0&&(R+=2*g);var P=M+(R%=2*g)*f,k=v*p(P),I=y*h(P);return{x:p(_)*k-h(_)*I+C.x,y:h(_)*k+p(_)*I+C.y};}(n,r,i,a,o,s,l,u,c,O/_)).x,E=h.y,m&&C.push({x:x,y:E}),v&&(w+=(0,ec.distanceSquareRoot)(T,[x,E])),T=[x,E],b&&w>=f&&f>S[2]){var M=(w-f)/(w-S[2]);A={x:T[0]*(1-M)+S[0]*M,y:T[1]*(1-M)+S[1]*M};}S=[x,E,w];}return b&&f>=w&&(A={x:u,y:c}),{length:w,point:A,min:{x:Math.min.apply(null,C.map(function(n){return n.x;})),y:Math.min.apply(null,C.map(function(n){return n.y;}))},max:{x:Math.max.apply(null,C.map(function(n){return n.x;})),y:Math.max.apply(null,C.map(function(n){return n.y;}))}};}(g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],g[8],(r||0)-O,i||{})).length,S=o.min,T=o.max,A=o.point):"C"===d?(w=(s=eE(g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],(r||0)-O,i||{})).length,S=s.min,T=s.max,A=s.point):"Q"===d?(w=(l=function(n,r,i,a,o,s,l,u){var c,f=u.bbox,d=void 0===f||f,h=u.length,p=void 0===h||h,m=u.sampleSize,g=void 0===m?10:m,v="number"==typeof l,y=n,_=r,b=0,x=[y,_,0],E=[y,_],w={x:0,y:0},S=[{x:y,y:_}];v&&l<=0&&(w={x:y,y:_});for(var T=0;T<=g;T+=1){if(y=(c=function(n,r,i,a,o,s,l){var u=1-l;return{x:Math.pow(u,2)*n+2*u*l*i+Math.pow(l,2)*o,y:Math.pow(u,2)*r+2*u*l*a+Math.pow(l,2)*s};}(n,r,i,a,o,s,T/g)).x,_=c.y,d&&S.push({x:y,y:_}),p&&(b+=(0,ec.distanceSquareRoot)(E,[y,_])),E=[y,_],v&&b>=l&&l>x[2]){var A=(b-l)/(b-x[2]);w={x:E[0]*(1-A)+x[0]*A,y:E[1]*(1-A)+x[1]*A};}x=[y,_,b];}return v&&l>=b&&(w={x:o,y:s}),{length:b,point:w,min:{x:Math.min.apply(null,S.map(function(n){return n.x;})),y:Math.min.apply(null,S.map(function(n){return n.y;}))},max:{x:Math.max.apply(null,S.map(function(n){return n.x;})),y:Math.max.apply(null,S.map(function(n){return n.y;}))}};}(g[0],g[1],g[2],g[3],g[4],g[5],(r||0)-O,i||{})).length,S=l.min,T=l.max,A=l.point):"Z"===d&&(w=(u=eb((g=[v,y,_,b])[0],g[1],g[2],g[3],(r||0)-O)).length,S=u.min,T=u.max,A=u.point),m&&O<r&&O+w>=r&&(C=A),E.push(T),x.push(S),O+=w,v=(c="Z"!==d?h.slice(-2):[_,b])[0],y=c[1];return m&&r>=O&&(C={x:v,y:y}),{length:O,point:C,min:{x:Math.min.apply(null,x.map(function(n){return n.x;})),y:Math.min.apply(null,x.map(function(n){return n.y;}))},max:{x:Math.max.apply(null,E.map(function(n){return n.x;})),y:Math.max.apply(null,E.map(function(n){return n.y;}))}};}var eS=i("91419c49"),eT=P._(eS),eA=i("c502fa9c"),eC=P._(eA),eO=i("47de8308"),eM=P._(eO),eR=function(n,r){return(n%r+r)%r;},eP=i("adb75670");function ek(n){return n.map(function(n,r,i){var a,o,s,l,u,c,f,d,h,p,m,g,v=r&&i[r-1].slice(-2).concat(n.slice(1)),y=r?eE(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],{bbox:!1}).length:0;return g=r?y?(void 0===a&&(a=.5),o=v.slice(0,2),s=v.slice(2,4),l=v.slice(4,6),u=v.slice(6,8),c=(0,e_.midPoint)(o,s,a),f=(0,e_.midPoint)(s,l,a),d=(0,e_.midPoint)(l,u,a),h=(0,e_.midPoint)(c,f,a),p=(0,e_.midPoint)(f,d,a),m=(0,e_.midPoint)(h,p,a),[["C"].concat(c,h,m),["C"].concat(p,d,u)]):[n,n]:[n],{s:n,ss:g,l:y};});}function eI(n){var r,i,a;return r=0,i=0,a=0,(0,eP.path2Curve)(n).map(function(n){if("M"===n[0])return r=n[1],i=n[2],0;var o,s,l,u=n.slice(1),c=u[0],f=u[1],d=u[2],h=u[3],p=u[4],m=u[5];return s=r,a=3*((m-(l=i))*(c+d)-(p-s)*(f+h)+f*(s-d)-c*(l-h)+m*(d+s/3)-p*(h+l/3))/20,r=(o=n.slice(-2))[0],i=o[1],a;}).reduce(function(n,r){return n+r;},0)>=0;}var eL=i("6aaf503e"),eN=P._(eL),eD=i("1daaa764"),eF=P._(eD),eB=i("06c64a8e"),ej=P._(eB),ez=function(n){return(0,ej.default)(n,"Boolean");},eU=i("da5c7e2c"),eV=P._(eU),eG=i("428badac"),eH=P._(eG),eW=i("a854094b"),eX=P._(eW),eq=i("b5a3bb33"),e$=P._(eq);function eY(){return(eY="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(n,r,i){var a=function(n,r){for(;!({}).hasOwnProperty.call(n,r)&&null!==(n=(0,e$.default)(n)););return n;}(n,r);if(a){var o=Object.getOwnPropertyDescriptor(a,r);return o.get?o.get.call(arguments.length<3?n:i):o.value;}}).apply(null,arguments);}function eZ(n,r,i,a){var o=eY((0,e$.default)(1&a?n.prototype:n),r,i);return 2&a&&"function"==typeof o?function(n){return o.apply(i,n);}:o;}var eK=i("ac23d12b"),eQ=i("23934e00"),eJ=P._(eQ),e0=i("9b84be4b"),e1=P._(e0),e2=i("8a2c7d78"),e3=P._(e2),e4=i("613f75ca"),e5=P._(e4),e6=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==I||"undefined"!=typeof self&&self,{exports:{}});a=function(){function n(n,r,i){var a=n[r];n[r]=n[i],n[i]=a;}function r(n,r){return n<r?-1:n>r?1:0;}var i=function(n){void 0===n&&(n=9),this._maxEntries=Math.max(4,n),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear();};function a(n,r){o(n,0,n.children.length,r,n);}function o(n,r,i,a,o){o||(o=p(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var l=r;l<i;l++){var u=n.children[l];s(o,n.leaf?a(u):u);}return o;}function s(n,r){return n.minX=Math.min(n.minX,r.minX),n.minY=Math.min(n.minY,r.minY),n.maxX=Math.max(n.maxX,r.maxX),n.maxY=Math.max(n.maxY,r.maxY),n;}function l(n,r){return n.minX-r.minX;}function u(n,r){return n.minY-r.minY;}function c(n){return(n.maxX-n.minX)*(n.maxY-n.minY);}function f(n){return n.maxX-n.minX+(n.maxY-n.minY);}function d(n,r){return n.minX<=r.minX&&n.minY<=r.minY&&r.maxX<=n.maxX&&r.maxY<=n.maxY;}function h(n,r){return r.minX<=n.maxX&&r.minY<=n.maxY&&r.maxX>=n.minX&&r.maxY>=n.minY;}function p(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};}function m(i,a,o,s,l){for(var u=[a,o];u.length;)if(!((o=u.pop())-(a=u.pop())<=s)){var c=a+Math.ceil((o-a)/s/2)*s;(function r(i,a,o,s,l){for(;s>o;){if(s-o>600){var u=s-o+1,c=a-o+1,f=Math.log(u),d=.5*Math.exp(2*f/3),h=.5*Math.sqrt(f*d*(u-d)/u)*(c-u/2<0?-1:1),p=Math.max(o,Math.floor(a-c*d/u+h)),m=Math.min(s,Math.floor(a+(u-c)*d/u+h));r(i,a,p,m,l);}var g=i[a],v=o,y=s;for(n(i,o,a),l(i[s],g)>0&&n(i,o,s);v<y;){for(n(i,v,y),v++,y--;0>l(i[v],g);)v++;for(;l(i[y],g)>0;)y--;}0===l(i[o],g)?n(i,o,y):n(i,++y,s),y<=a&&(o=y+1),a<=y&&(s=y-1);}})(i,c,a||0,o||i.length-1,l||r),u.push(a,c,c,o);}}return i.prototype.all=function(){return this._all(this.data,[]);},i.prototype.search=function(n){var r=this.data,i=[];if(!h(n,r))return i;for(var a=this.toBBox,o=[];r;){for(var s=0;s<r.children.length;s++){var l=r.children[s],u=r.leaf?a(l):l;h(n,u)&&(r.leaf?i.push(l):d(n,u)?this._all(l,i):o.push(l));}r=o.pop();}return i;},i.prototype.collides=function(n){var r=this.data;if(!h(n,r))return!1;for(var i=[];r;){for(var a=0;a<r.children.length;a++){var o=r.children[a],s=r.leaf?this.toBBox(o):o;if(h(n,s)){if(r.leaf||d(n,s))return!0;i.push(o);}}r=i.pop();}return!1;},i.prototype.load=function(n){if(!(n&&n.length))return this;if(n.length<this._minEntries){for(var r=0;r<n.length;r++)this.insert(n[r]);return this;}var i=this._build(n.slice(),0,n.length-1,0);if(this.data.children.length){if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var a=this.data;this.data=i,i=a;}this._insert(i,this.data.height-i.height-1,!0);}}else this.data=i;return this;},i.prototype.insert=function(n){return n&&this._insert(n,this.data.height-1),this;},i.prototype.clear=function(){return this.data=p([]),this;},i.prototype.remove=function(n,r){if(!n)return this;for(var i,a,o,s=this.data,l=this.toBBox(n),u=[],c=[];s||u.length;){if(s||(s=u.pop(),a=u[u.length-1],i=c.pop(),o=!0),s.leaf){var f=function(n,r,i){if(!i)return r.indexOf(n);for(var a=0;a<r.length;a++)if(i(n,r[a]))return a;return -1;}(n,s.children,r);if(-1!==f){s.children.splice(f,1),u.push(s),this._condense(u);break;}}!o&&!s.leaf&&d(s,l)?(u.push(s),c.push(i),i=0,a=s,s=s.children[0]):a?(i++,s=a.children[i],o=!1):s=null;}return this;},i.prototype.toBBox=function(n){return n;},i.prototype.compareMinX=function(n,r){return n.minX-r.minX;},i.prototype.compareMinY=function(n,r){return n.minY-r.minY;},i.prototype.toJSON=function(){return this.data;},i.prototype.fromJSON=function(n){return this.data=n,this;},i.prototype._all=function(n,r){for(var i=[];n;)n.leaf?r.push.apply(r,n.children):i.push.apply(i,n.children),n=i.pop();return r;},i.prototype._build=function(n,r,i,o){var s,l=i-r+1,u=this._maxEntries;if(l<=u)return a(s=p(n.slice(r,i+1)),this.toBBox),s;o||(o=Math.ceil(Math.log(l)/Math.log(u)),u=Math.ceil(l/Math.pow(u,o-1))),(s=p([])).leaf=!1,s.height=o;var c=Math.ceil(l/u),f=c*Math.ceil(Math.sqrt(u));m(n,r,i,f,this.compareMinX);for(var d=r;d<=i;d+=f){var h=Math.min(d+f-1,i);m(n,d,h,c,this.compareMinY);for(var g=d;g<=h;g+=c){var v=Math.min(g+c-1,h);s.children.push(this._build(n,g,v,o-1));}}return a(s,this.toBBox),s;},i.prototype._chooseSubtree=function(n,r,i,a){for(;a.push(r),!r.leaf&&a.length-1!==i;){for(var o=1/0,s=1/0,l=void 0,u=0;u<r.children.length;u++){var f=r.children[u],d=c(f),h=(Math.max(f.maxX,n.maxX)-Math.min(f.minX,n.minX))*(Math.max(f.maxY,n.maxY)-Math.min(f.minY,n.minY))-d;h<s?(s=h,o=d<o?d:o,l=f):h===s&&d<o&&(o=d,l=f);}r=l||r.children[0];}return r;},i.prototype._insert=function(n,r,i){var a=i?n:this.toBBox(n),o=[],l=this._chooseSubtree(a,this.data,r,o);for(l.children.push(n),s(l,a);r>=0;)if(o[r].children.length>this._maxEntries)this._split(o,r),r--;else break;this._adjustParentBBoxes(a,o,r);},i.prototype._split=function(n,r){var i=n[r],o=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,o);var l=this._chooseSplitIndex(i,s,o),u=p(i.children.splice(l,i.children.length-l));u.height=i.height,u.leaf=i.leaf,a(i,this.toBBox),a(u,this.toBBox),r?n[r-1].children.push(u):this._splitRoot(i,u);},i.prototype._splitRoot=function(n,r){this.data=p([n,r]),this.data.height=n.height+1,this.data.leaf=!1,a(this.data,this.toBBox);},i.prototype._chooseSplitIndex=function(n,r,i){for(var a,s=1/0,l=1/0,u=r;u<=i-r;u++){var f=o(n,0,u,this.toBBox),d=o(n,u,i,this.toBBox),h=function(n,r){var i=Math.max(n.minX,r.minX),a=Math.max(n.minY,r.minY);return Math.max(0,Math.min(n.maxX,r.maxX)-i)*Math.max(0,Math.min(n.maxY,r.maxY)-a);}(f,d),p=c(f)+c(d);h<s?(s=h,a=u,l=p<l?p:l):h===s&&p<l&&(l=p,a=u);}return a||i-r;},i.prototype._chooseSplitAxis=function(n,r,i){var a=n.leaf?this.compareMinX:l,o=n.leaf?this.compareMinY:u;this._allDistMargin(n,r,i,a)<this._allDistMargin(n,r,i,o)&&n.children.sort(a);},i.prototype._allDistMargin=function(n,r,i,a){n.children.sort(a);for(var l=this.toBBox,u=o(n,0,r,l),c=o(n,i-r,i,l),d=f(u)+f(c),h=r;h<i-r;h++){var p=n.children[h];s(u,n.leaf?l(p):p),d+=f(u);}for(var m=i-r-1;m>=r;m--){var g=n.children[m];s(c,n.leaf?l(g):g),d+=f(c);}return d;},i.prototype._adjustParentBBoxes=function(n,r,i){for(var a=i;a>=0;a--)s(r[a],n);},i.prototype._condense=function(n){for(var r=n.length-1,i=void 0;r>=0;r--)0===n[r].children.length?r>0?(i=n[r-1].children).splice(i.indexOf(n[r]),1):this.clear():a(n[r],this.toBBox);},i;},e6.exports=a();var e8=e6.exports,e7=((o={}).GROUP="g",o.FRAGMENT="fragment",o.CIRCLE="circle",o.ELLIPSE="ellipse",o.IMAGE="image",o.RECT="rect",o.LINE="line",o.POLYLINE="polyline",o.POLYGON="polygon",o.TEXT="text",o.PATH="path",o.HTML="html",o.MESH="mesh",o),e9=((s={})[s.ZERO=0]="ZERO",s[s.NEGATIVE_ONE=1]="NEGATIVE_ONE",s),te=(0,j.default)(function n(){(0,F.default)(this,n),this.plugins=[];},[{key:"addRenderingPlugin",value:function(n){this.plugins.push(n),this.context.renderingPlugins.push(n);}},{key:"removeAllRenderingPlugins",value:function(){var n=this;this.plugins.forEach(function(r){var i=n.context.renderingPlugins.indexOf(r);i>=0&&n.context.renderingPlugins.splice(i,1);});}}]),tt=(0,j.default)(function n(r){(0,F.default)(this,n),this.clipSpaceNearZ=e9.NEGATIVE_ONE,this.plugins=[],this.config=(0,N.default)({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0,enableRenderingOptimization:!1},r);},[{key:"registerPlugin",value:function(n){-1===this.plugins.findIndex(function(r){return r===n;})&&this.plugins.push(n);}},{key:"unregisterPlugin",value:function(n){var r=this.plugins.findIndex(function(r){return r===n;});r>-1&&this.plugins.splice(r,1);}},{key:"getPlugins",value:function(){return this.plugins;}},{key:"getPlugin",value:function(n){return this.plugins.find(function(r){return r.name===n;});}},{key:"getConfig",value:function(){return this.config;}},{key:"setConfig",value:function(n){Object.assign(this.config,n);}}]),tn=K.add,tr=K.copy,ti=K.max,ta=K.min,to=K.scale,ts=K.sub,tl=function(){function n(){(0,F.default)(this,n),this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0];}return(0,j.default)(n,[{key:"update",value:function(n,r){tr(this.center,n),tr(this.halfExtents,r),ts(this.min,this.center,this.halfExtents),tn(this.max,this.center,this.halfExtents);}},{key:"setMinMax",value:function(n,r){tn(this.center,r,n),to(this.center,this.center,.5),ts(this.halfExtents,r,n),to(this.halfExtents,this.halfExtents,.5),tr(this.min,n),tr(this.max,r);}},{key:"getMin",value:function(){return this.min;}},{key:"getMax",value:function(){return this.max;}},{key:"add",value:function(r){if(!n.isEmpty(r)){if(n.isEmpty(this)){this.setMinMax(r.getMin(),r.getMax());return;}var i=this.center,a=i[0],o=i[1],s=i[2],l=this.halfExtents,u=l[0],c=l[1],f=l[2],d=a-u,h=a+u,p=o-c,m=o+c,g=s-f,v=s+f,y=r.center,_=y[0],b=y[1],x=y[2],E=r.halfExtents,w=E[0],S=E[1],T=E[2],A=_-w,C=_+w,O=b-S,M=b+S,R=x-T,P=x+T;A<d&&(d=A),C>h&&(h=C),O<p&&(p=O),M>m&&(m=M),R<g&&(g=R),P>v&&(v=P),i[0]=(d+h)*.5,i[1]=(p+m)*.5,i[2]=(g+v)*.5,l[0]=(h-d)*.5,l[1]=(m-p)*.5,l[2]=(v-g)*.5,this.min[0]=d,this.min[1]=p,this.min[2]=g,this.max[0]=h,this.max[1]=m,this.max[2]=v;}}},{key:"setFromTransformedAABB",value:function(n,r){var i=this.center,a=this.halfExtents,o=n.center,s=n.halfExtents,l=r[0],u=r[4],c=r[8],f=r[1],d=r[5],h=r[9],p=r[2],m=r[6],g=r[10],v=Math.abs(l),y=Math.abs(u),_=Math.abs(c),b=Math.abs(f),x=Math.abs(d),E=Math.abs(h),w=Math.abs(p),S=Math.abs(m),T=Math.abs(g);i[0]=r[12]+l*o[0]+u*o[1]+c*o[2],i[1]=r[13]+f*o[0]+d*o[1]+h*o[2],i[2]=r[14]+p*o[0]+m*o[1]+g*o[2],a[0]=v*s[0]+y*s[1]+_*s[2],a[1]=b*s[0]+x*s[1]+E*s[2],a[2]=w*s[0]+S*s[1]+T*s[2],ts(this.min,i,a),tn(this.max,i,a);}},{key:"intersects",value:function(n){var r=this.getMax(),i=this.getMin(),a=n.getMax(),o=n.getMin();return i[0]<=a[0]&&r[0]>=o[0]&&i[1]<=a[1]&&r[1]>=o[1]&&i[2]<=a[2]&&r[2]>=o[2];}},{key:"intersection",value:function(r){if(!this.intersects(r))return null;var i=new n,a=ti([0,0,0],this.getMin(),r.getMin()),o=ta([0,0,0],this.getMax(),r.getMax());return i.setMinMax(a,o),i;}},{key:"getNegativeFarPoint",value:function(n){return 273===n.pnVertexFlag?tr([0,0,0],this.min):272===n.pnVertexFlag?[this.min[0],this.min[1],this.max[2]]:257===n.pnVertexFlag?[this.min[0],this.max[1],this.min[2]]:256===n.pnVertexFlag?[this.min[0],this.max[1],this.max[2]]:17===n.pnVertexFlag?[this.max[0],this.min[1],this.min[2]]:16===n.pnVertexFlag?[this.max[0],this.min[1],this.max[2]]:1===n.pnVertexFlag?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]];}},{key:"getPositiveFarPoint",value:function(n){return 273===n.pnVertexFlag?tr([0,0,0],this.max):272===n.pnVertexFlag?[this.max[0],this.max[1],this.min[2]]:257===n.pnVertexFlag?[this.max[0],this.min[1],this.max[2]]:256===n.pnVertexFlag?[this.max[0],this.min[1],this.min[2]]:17===n.pnVertexFlag?[this.min[0],this.max[1],this.max[2]]:16===n.pnVertexFlag?[this.min[0],this.max[1],this.min[2]]:1===n.pnVertexFlag?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]];}}],[{key:"isEmpty",value:function(n){return!n||0===n.halfExtents[0]&&0===n.halfExtents[1]&&0===n.halfExtents[2];}}]);}(),tu=(0,j.default)(function n(r,i){(0,F.default)(this,n),this.distance=r||0,this.normal=i||K.fromValues(0,1,0),this.updatePNVertexFlag();},[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0);}},{key:"distanceToPoint",value:function(n){return K.dot(n,this.normal)-this.distance;}},{key:"normalize",value:function(){var n=1/K.len(this.normal);K.scale(this.normal,this.normal,n),this.distance*=n;}},{key:"intersectsLine",value:function(n,r,i){var a=this.distanceToPoint(n),o=a/(a-this.distanceToPoint(r)),s=o>=0&&o<=1;return s&&i&&K.lerp(i,n,r,o),s;}}]),tc=((l={})[l.OUTSIDE=4294967295]="OUTSIDE",l[l.INSIDE=0]="INSIDE",l[l.INDETERMINATE=2147483647]="INDETERMINATE",l),tf=(0,j.default)(function n(r){if((0,F.default)(this,n),this.planes=[],r)this.planes=r;else for(var i=0;i<6;i++)this.planes.push(new tu);},[{key:"extractFromVPMatrix",value:function(n){var r=(0,q.default)(n,16),i=r[0],a=r[1],o=r[2],s=r[3],l=r[4],u=r[5],c=r[6],f=r[7],d=r[8],h=r[9],p=r[10],m=r[11],g=r[12],v=r[13],y=r[14],_=r[15];K.set(this.planes[0].normal,s-i,f-l,m-d),this.planes[0].distance=_-g,K.set(this.planes[1].normal,s+i,f+l,m+d),this.planes[1].distance=_+g,K.set(this.planes[2].normal,s+a,f+u,m+h),this.planes[2].distance=_+v,K.set(this.planes[3].normal,s-a,f-u,m-h),this.planes[3].distance=_-v,K.set(this.planes[4].normal,s-o,f-c,m-p),this.planes[4].distance=_-y,K.set(this.planes[5].normal,s+o,f+c,m+p),this.planes[5].distance=_+y,this.planes.forEach(function(n){n.normalize(),n.updatePNVertexFlag();});}}]),td=function(){function n(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,F.default)(this,n),this.x=0,this.y=0,this.x=r,this.y=i;}return(0,j.default)(n,[{key:"clone",value:function(){return new n(this.x,this.y);}},{key:"copyFrom",value:function(n){this.x=n.x,this.y=n.y;}}]);}(),th=function(){function n(r,i,a,o){(0,F.default)(this,n),this.x=r,this.y=i,this.width=a,this.height=o,this.left=r,this.right=r+a,this.top=i,this.bottom=i+o;}return(0,j.default)(n,[{key:"toJSON",value:function(){}}],[{key:"fromRect",value:function(r){return new n(r.x,r.y,r.width,r.height);}},{key:"applyTransform",value:function(r,i){var a=J.fromValues(r.x,r.y,0,1),o=J.fromValues(r.x+r.width,r.y,0,1),s=J.fromValues(r.x,r.y+r.height,0,1),l=J.fromValues(r.x+r.width,r.y+r.height,0,1),u=J.create(),c=J.create(),f=J.create(),d=J.create();J.transformMat4(u,a,i),J.transformMat4(c,o,i),J.transformMat4(f,s,i),J.transformMat4(d,l,i);var h=Math.min(u[0],c[0],f[0],d[0]),p=Math.min(u[1],c[1],f[1],d[1]),m=Math.max(u[0],c[0],f[0],d[0]),g=Math.max(u[1],c[1],f[1],d[1]);return n.fromRect({x:h,y:p,width:m-h,height:g-p});}}]);}(),tp="Method not implemented.",tm="Use document.documentElement instead.";function tg(n){return void 0===n?0:n>360||n<-360?n%360:n;}var tv=K.create();function ty(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return Array.isArray(n)&&3===n.length?a?K.clone(n):K.copy(tv,n):(0,eu.default)(n)?a?K.fromValues(n,r,i):K.set(tv,n,r,i):a?K.fromValues(n[0],n[1]||r,n[2]||i):K.set(tv,n[0],n[1]||r,n[2]||i);}var t_=Math.PI/180;function tb(n){return n*t_;}var tx=180/Math.PI,tE=Math.PI/2;function tw(n,r){var i,a,o,s,l,u,c,f,d,h,p,m,g,v,y,_,b;return 16===r.length?(o=et.getScaling(K.create(),r),l=(s=(0,q.default)(o,3))[0],u=s[1],c=s[2],(f=Math.asin(-r[2]/l))<tE?f>-tE?(i=Math.atan2(r[6]/u,r[10]/c),a=Math.atan2(r[1]/l,r[0]/l)):(a=0,i=-Math.atan2(r[4]/u,r[5]/u)):(a=0,i=Math.atan2(r[4]/u,r[5]/u)),n[0]=i,n[1]=f,n[2]=a):(d=r[0],h=r[1],p=r[2],m=r[3],_=d*d+(g=h*h)+(v=p*p)+(y=m*m),(b=d*m-h*p)>.499995*_?(n[0]=tE,n[1]=2*Math.atan2(h,d),n[2]=0):b<-.499995*_?(n[0]=-tE,n[1]=2*Math.atan2(h,d),n[2]=0):(n[0]=Math.asin(2*(d*p-m*h)),n[1]=Math.atan2(2*(d*m+h*p),1-2*(v+y)),n[2]=Math.atan2(2*(d*h+p*m),1-2*(g+v)))),n;}function tS(n){var r=n[0],i=n[1],a=n[3],o=n[4],s=Math.sqrt(r*r+i*i),l=Math.sqrt(a*a+o*o);if(r*o-i*a<0&&(r<o?s=-s:l=-l),s){var u=1/s;r*=u,i*=u;}if(l){var c=1/l;a*=c,o*=c;}var f=Math.atan2(i,r)*tx;return[n[6],n[7],s,l,f];}var tT=et.create(),tA=et.create(),tC=J.create(),tO=[K.create(),K.create(),K.create()],tM=K.create();function tR(n,r,i,a,o){n[0]=r[0]*a+i[0]*o,n[1]=r[1]*a+i[1]*o,n[2]=r[2]*a+i[2]*o;}var tP=((u={})[u.ORBITING=0]="ORBITING",u[u.EXPLORING=1]="EXPLORING",u[u.TRACKING=2]="TRACKING",u),tk=((c={})[c.DEFAULT=0]="DEFAULT",c[c.ROTATIONAL=1]="ROTATIONAL",c[c.TRANSLATIONAL=2]="TRANSLATIONAL",c[c.CINEMATIC=3]="CINEMATIC",c),tI=((f={})[f.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",f[f.PERSPECTIVE=1]="PERSPECTIVE",f),tL={UPDATED:"updated"},tN=(0,j.default)(function n(){(0,F.default)(this,n),this.clipSpaceNearZ=e9.NEGATIVE_ONE,this.eventEmitter=new Y.default,this.matrix=et.create(),this.right=K.fromValues(1,0,0),this.up=K.fromValues(0,1,0),this.forward=K.fromValues(0,0,1),this.position=K.fromValues(0,0,1),this.focalPoint=K.fromValues(0,0,0),this.distanceVector=K.fromValues(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=et.create(),this.projectionMatrixInverse=et.create(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=tP.EXPLORING,this.trackingMode=tk.DEFAULT,this.projectionMode=tI.PERSPECTIVE,this.frustum=new tf,this.orthoMatrix=et.create();},[{key:"isOrtho",value:function(){return this.projectionMode===tI.ORTHOGRAPHIC;}},{key:"getProjectionMode",value:function(){return this.projectionMode;}},{key:"getPerspective",value:function(){return this.jitteredProjectionMatrix||this.projectionMatrix;}},{key:"getPerspectiveInverse",value:function(){return this.projectionMatrixInverse;}},{key:"getFrustum",value:function(){return this.frustum;}},{key:"getPosition",value:function(){return this.position;}},{key:"getFocalPoint",value:function(){return this.focalPoint;}},{key:"getDollyingStep",value:function(){return this.dollyingStep;}},{key:"getNear",value:function(){return this.near;}},{key:"getFar",value:function(){return this.far;}},{key:"getZoom",value:function(){return this.zoom;}},{key:"getOrthoMatrix",value:function(){return this.orthoMatrix;}},{key:"getView",value:function(){return this.view;}},{key:"setEnableUpdate",value:function(n){this.enableUpdate=n;}},{key:"setType",value:function(n,r){return this.type=n,this.type===tP.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===tP.TRACKING&&void 0!==r&&this.setTrackingMode(r),this;}},{key:"setProjectionMode",value:function(n){return this.projectionMode=n,this;}},{key:"setTrackingMode",value:function(n){if(this.type!==tP.TRACKING)throw Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=n,this;}},{key:"setWorldRotation",value:function(n){return this.rotateWorld=n,this._getAngles(),this;}},{key:"getViewTransform",value:function(){return et.invert(et.create(),this.matrix);}},{key:"getWorldTransform",value:function(){return this.matrix;}},{key:"jitterProjectionMatrix",value:function(n,r){var i=et.fromTranslation(et.create(),[n,r,0]);this.jitteredProjectionMatrix=et.multiply(et.create(),i,this.projectionMatrix);}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0;}},{key:"setMatrix",value:function(n){return this.matrix=n,this._update(),this;}},{key:"setProjectionMatrix",value:function(n){this.projectionMatrix=n;}},{key:"setFov",value:function(n){return this.setPerspective(this.near,this.far,n,this.aspect),this;}},{key:"setAspect",value:function(n){return this.setPerspective(this.near,this.far,this.fov,n),this;}},{key:"setNear",value:function(n){return this.projectionMode===tI.PERSPECTIVE?this.setPerspective(n,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,n,this.far),this;}},{key:"setFar",value:function(n){return this.projectionMode===tI.PERSPECTIVE?this.setPerspective(this.near,n,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,n),this;}},{key:"setViewOffset",value:function(n,r,i,a,o,s){return this.aspect=n/r,void 0===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=n,this.view.fullHeight=r,this.view.offsetX=i,this.view.offsetY=a,this.view.width=o,this.view.height=s,this.projectionMode===tI.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this;}},{key:"clearViewOffset",value:function(){return void 0!==this.view&&(this.view.enabled=!1),this.projectionMode===tI.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this;}},{key:"setZoom",value:function(n){return this.zoom=n,this.projectionMode===tI.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===tI.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this;}},{key:"setZoomByViewportPoint",value:function(n,r){var i=this.canvas.viewport2Canvas({x:r[0],y:r[1]}),a=i.x,o=i.y,s=this.roll;this.rotate(0,0,-s),this.setPosition(a,o),this.setFocalPoint(a,o),this.setZoom(n),this.rotate(0,0,s);var l=this.canvas.viewport2Canvas({x:r[0],y:r[1]}),u=l.x,c=l.y,f=K.fromValues(u-a,c-o,0),d=K.dot(f,this.right)/K.length(this.right),h=K.dot(f,this.up)/K.length(this.up),p=this.getPosition(),m=(0,q.default)(p,2),g=m[0],v=m[1],y=this.getFocalPoint(),_=(0,q.default)(y,2),b=_[0],x=_[1];return this.setPosition(g-d,v-h),this.setFocalPoint(b-d,x-h),this;}},{key:"setPerspective",value:function(n,r,i,a){this.projectionMode=tI.PERSPECTIVE,this.fov=i,this.near=n,this.far=r,this.aspect=a;var o,s=this.near*Math.tan(.5*this.fov*t_)/this.zoom,l=2*s,u=this.aspect*l,c=-.5*u;if(null!==(o=this.view)&&void 0!==o&&o.enabled){var f=this.view.fullWidth,d=this.view.fullHeight;c+=this.view.offsetX*u/f,s-=this.view.offsetY*l/d,u*=this.view.width/f,l*=this.view.height/d;}return!function(n,r,i,a,o,s,l){var u,c,f=arguments.length>7&&void 0!==arguments[7]&&arguments[7],d=2*s,h=i-r,p=a-o,m=l-s,g=l*s;f?(u=-l/m,c=-g/m):(u=-(l+s)/m,c=-2*g/m),n[0]=d/h,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=d/p,n[6]=0,n[7]=0,n[8]=(i+r)/h,n[9]=(a+o)/p,n[10]=u,n[11]=-1,n[12]=0,n[13]=0,n[14]=c,n[15]=0;}(this.projectionMatrix,c,c+u,s-l,s,n,this.far,this.clipSpaceNearZ===e9.ZERO),et.invert(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this;}},{key:"setOrthographic",value:function(n,r,i,a,o,s){this.projectionMode=tI.ORTHOGRAPHIC,this.rright=r,this.left=n,this.top=i,this.bottom=a,this.near=o,this.far=s;var l,u=(this.rright-this.left)/(2*this.zoom),c=(this.top-this.bottom)/(2*this.zoom),f=(this.rright+this.left)/2,d=(this.top+this.bottom)/2,h=f-u,p=f+u,m=d+c,g=d-c;if(null!==(l=this.view)&&void 0!==l&&l.enabled){var v=(this.rright-this.left)/this.view.fullWidth/this.zoom,y=(this.top-this.bottom)/this.view.fullHeight/this.zoom;h+=v*this.view.offsetX,p=h+v*this.view.width,m-=y*this.view.offsetY,g=m-y*this.view.height;}return this.clipSpaceNearZ===e9.NEGATIVE_ONE?et.ortho(this.projectionMatrix,h,p,m,g,o,s):et.orthoZO(this.projectionMatrix,h,p,m,g,o,s),et.invert(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this;}},{key:"setPosition",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.position[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.position[2],a=ty(n,r,i);return this._setPosition(a),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this;}},{key:"setFocalPoint",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.focalPoint[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.focalPoint[2],a=K.fromValues(0,1,0);if(this.focalPoint=ty(n,r,i),this.trackingMode===tk.CINEMATIC){var o=K.subtract(K.create(),this.focalPoint,this.position);n=o[0],r=o[1],i=o[2];var s=Math.asin(r/K.length(o))*tx,l=90+Math.atan2(i,n)*tx,u=et.create();et.rotateY(u,u,l*t_),et.rotateX(u,u,s*t_),a=K.transformMat4(K.create(),[0,1,0],u);}return et.invert(this.matrix,et.lookAt(et.create(),this.position,this.focalPoint,a)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this;}},{key:"getDistance",value:function(){return this.distance;}},{key:"getDistanceVector",value:function(){return this.distanceVector;}},{key:"setDistance",value:function(n){if(this.distance===n||n<0)return this;this.distance=n,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var r=K.create();n=this.distance;var i=this.forward,a=this.focalPoint;return r[0]=n*i[0]+a[0],r[1]=n*i[1]+a[1],r[2]=n*i[2]+a[2],this._setPosition(r),this.triggerUpdate(),this;}},{key:"setMaxDistance",value:function(n){return this.maxDistance=n,this;}},{key:"setMinDistance",value:function(n){return this.minDistance=n,this;}},{key:"setAzimuth",value:function(n){return this.azimuth=tg(n),this.computeMatrix(),this._getAxes(),this.type===tP.ORBITING||this.type===tP.EXPLORING?this._getPosition():this.type===tP.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this;}},{key:"getAzimuth",value:function(){return this.azimuth;}},{key:"setElevation",value:function(n){return this.elevation=tg(n),this.computeMatrix(),this._getAxes(),this.type===tP.ORBITING||this.type===tP.EXPLORING?this._getPosition():this.type===tP.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this;}},{key:"getElevation",value:function(){return this.elevation;}},{key:"setRoll",value:function(n){return this.roll=tg(n),this.computeMatrix(),this._getAxes(),this.type===tP.ORBITING||this.type===tP.EXPLORING?this._getPosition():this.type===tP.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this;}},{key:"getRoll",value:function(){return this.roll;}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate();}},{key:"computeMatrix",value:function(){var n=ea.setAxisAngle(ea.create(),[0,0,1],this.roll*t_);et.identity(this.matrix);var r=ea.setAxisAngle(ea.create(),[1,0,0],(this.rotateWorld&&this.type!==tP.TRACKING||this.type===tP.TRACKING?1:-1)*this.elevation*t_),i=ea.setAxisAngle(ea.create(),[0,1,0],(this.rotateWorld&&this.type!==tP.TRACKING||this.type===tP.TRACKING?1:-1)*this.azimuth*t_),a=ea.multiply(ea.create(),i,r);a=ea.multiply(ea.create(),a,n);var o=et.fromQuat(et.create(),a);this.type===tP.ORBITING||this.type===tP.EXPLORING?(et.translate(this.matrix,this.matrix,this.focalPoint),et.multiply(this.matrix,this.matrix,o),et.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===tP.TRACKING&&(et.translate(this.matrix,this.matrix,this.position),et.multiply(this.matrix,this.matrix,o));}},{key:"_setPosition",value:function(n,r,i){this.position=ty(n,r,i);var a=this.matrix;a[12]=this.position[0],a[13]=this.position[1],a[14]=this.position[2],a[15]=1,this._getOrthoMatrix();}},{key:"_getAxes",value:function(){K.copy(this.right,ty(J.transformMat4(J.create(),[1,0,0,0],this.matrix))),K.copy(this.up,ty(J.transformMat4(J.create(),[0,1,0,0],this.matrix))),K.copy(this.forward,ty(J.transformMat4(J.create(),[0,0,1,0],this.matrix))),K.normalize(this.right,this.right),K.normalize(this.up,this.up),K.normalize(this.forward,this.forward);}},{key:"_getAngles",value:function(){var n=this.distanceVector[0],r=this.distanceVector[1],i=this.distanceVector[2],a=K.length(this.distanceVector);if(0===a){this.elevation=0,this.azimuth=0;return;}this.type===tP.TRACKING?(this.elevation=Math.asin(r/a)*tx,this.azimuth=Math.atan2(-n,-i)*tx):this.rotateWorld?(this.elevation=Math.asin(r/a)*tx,this.azimuth=Math.atan2(-n,-i)*tx):(this.elevation=-(Math.asin(r/a)*tx),this.azimuth=-(Math.atan2(-n,-i)*tx));}},{key:"_getPosition",value:function(){K.copy(this.position,ty(J.transformMat4(J.create(),[0,0,0,1],this.matrix))),this._getDistance();}},{key:"_getFocalPoint",value:function(){K.transformMat3(this.distanceVector,[0,0,-this.distance],er.fromMat4(er.create(),this.matrix)),K.add(this.focalPoint,this.position,this.distanceVector),this._getDistance();}},{key:"_getDistance",value:function(){this.distanceVector=K.subtract(K.create(),this.focalPoint,this.position),this.distance=K.length(this.distanceVector),this.dollyingStep=this.distance/100;}},{key:"_getOrthoMatrix",value:function(){if(this.projectionMode===tI.ORTHOGRAPHIC){var n=this.position,r=ea.setAxisAngle(ea.create(),[0,0,1],-this.roll*Math.PI/180);et.fromRotationTranslationScaleOrigin(this.orthoMatrix,r,K.fromValues((this.rright-this.left)/2-n[0],(this.top-this.bottom)/2-n[1],0),K.fromValues(this.zoom,this.zoom,1),n);}}},{key:"triggerUpdate",value:function(){if(this.enableUpdate){var n=this.getViewTransform(),r=et.multiply(et.create(),this.getPerspective(),n);this.getFrustum().extractFromVPMatrix(r),this.eventEmitter.emit(tL.UPDATED);}}},{key:"rotate",value:function(n,r,i){throw Error(tp);}},{key:"pan",value:function(n,r){throw Error(tp);}},{key:"dolly",value:function(n){throw Error(tp);}},{key:"createLandmark",value:function(n,r){throw Error(tp);}},{key:"gotoLandmark",value:function(n,r){throw Error(tp);}},{key:"cancelLandmarkAnimation",value:function(){throw Error(tp);}}]),tD=((d={})[d.Standard=0]="Standard",d),tF=((h={})[h.ADDED=0]="ADDED",h[h.REMOVED=1]="REMOVED",h[h.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED",h),tB={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new th(0,0,0,0)},tj=((p={}).COORDINATE="<coordinate>",p.COLOR="<color>",p.PAINT="<paint>",p.NUMBER="<number>",p.ANGLE="<angle>",p.OPACITY_VALUE="<opacity-value>",p.SHADOW_BLUR="<shadow-blur>",p.LENGTH="<length>",p.PERCENTAGE="<percentage>",p.LENGTH_PERCENTAGE="<length> | <percentage>",p.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",p.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",p.LIST_OF_POINTS="<list-of-points>",p.PATH="<path>",p.FILTER="<filter>",p.Z_INDEX="<z-index>",p.OFFSET_DISTANCE="<offset-distance>",p.DEFINED_PATH="<defined-path>",p.MARKER="<marker>",p.TRANSFORM="<transform>",p.TRANSFORM_ORIGIN="<transform-origin>",p.TEXT="<text>",p.TEXT_TRANSFORM="<text-transform>",p);function tz(n,r,i){n.prototype=r.prototype=i,i.constructor=n;}function tU(n,r){var i=Object.create(n.prototype);for(var a in r)i[a]=r[a];return i;}function tV(){}var tG="\\s*([+-]?\\d+)\\s*",tH="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",tW="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tX=/^#([0-9a-f]{3,8})$/,tq=RegExp(`^rgb\\(${tG},${tG},${tG}\\)$`),t$=RegExp(`^rgb\\(${tW},${tW},${tW}\\)$`),tY=RegExp(`^rgba\\(${tG},${tG},${tG},${tH}\\)$`),tZ=RegExp(`^rgba\\(${tW},${tW},${tW},${tH}\\)$`),tK=RegExp(`^hsl\\(${tH},${tW},${tW}\\)$`),tQ=RegExp(`^hsla\\(${tH},${tW},${tW},${tH}\\)$`),tJ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function t0(){return this.rgb().formatHex();}function t1(){return this.rgb().formatRgb();}function t2(n){var r,i;return n=(n+"").trim().toLowerCase(),(r=tX.exec(n))?(i=r[1].length,r=parseInt(r[1],16),6===i?t3(r):3===i?new t5(r>>8&15|r>>4&240,r>>4&15|240&r,(15&r)<<4|15&r,1):8===i?t4(r>>24&255,r>>16&255,r>>8&255,(255&r)/255):4===i?t4(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|240&r,((15&r)<<4|15&r)/255):null):(r=tq.exec(n))?new t5(r[1],r[2],r[3],1):(r=t$.exec(n))?new t5(255*r[1]/100,255*r[2]/100,255*r[3]/100,1):(r=tY.exec(n))?t4(r[1],r[2],r[3],r[4]):(r=tZ.exec(n))?t4(255*r[1]/100,255*r[2]/100,255*r[3]/100,r[4]):(r=tK.exec(n))?nt(r[1],r[2]/100,r[3]/100,1):(r=tQ.exec(n))?nt(r[1],r[2]/100,r[3]/100,r[4]):tJ.hasOwnProperty(n)?t3(tJ[n]):"transparent"===n?new t5(NaN,NaN,NaN,0):null;}function t3(n){return new t5(n>>16&255,n>>8&255,255&n,1);}function t4(n,r,i,a){return a<=0&&(n=r=i=NaN),new t5(n,r,i,a);}function t5(n,r,i,a){this.r=+n,this.g=+r,this.b=+i,this.opacity=+a;}function t6(){return`#${ne(this.r)}${ne(this.g)}${ne(this.b)}`;}function t8(){let n=t7(this.opacity);return`${1===n?"rgb(":"rgba("}${t9(this.r)}, ${t9(this.g)}, ${t9(this.b)}${1===n?")":`, ${n})`}`;}function t7(n){return isNaN(n)?1:Math.max(0,Math.min(1,n));}function t9(n){return Math.max(0,Math.min(255,Math.round(n)||0));}function ne(n){return((n=t9(n))<16?"0":"")+n.toString(16);}function nt(n,r,i,a){return a<=0?n=r=i=NaN:i<=0||i>=1?n=r=NaN:r<=0&&(n=NaN),new nr(n,r,i,a);}function nn(n){if(n instanceof nr)return new nr(n.h,n.s,n.l,n.opacity);if(n instanceof tV||(n=t2(n)),!n)return new nr;if(n instanceof nr)return n;var r=(n=n.rgb()).r/255,i=n.g/255,a=n.b/255,o=Math.min(r,i,a),s=Math.max(r,i,a),l=NaN,u=s-o,c=(s+o)/2;return u?(l=r===s?(i-a)/u+(i<a)*6:i===s?(a-r)/u+2:(r-i)/u+4,u/=c<.5?s+o:2-s-o,l*=60):u=c>0&&c<1?0:l,new nr(l,u,c,n.opacity);}function nr(n,r,i,a){this.h=+n,this.s=+r,this.l=+i,this.opacity=+a;}function ni(n){return(n=(n||0)%360)<0?n+360:n;}function na(n){return Math.max(0,Math.min(1,n||0));}function no(n,r,i){return(n<60?r+(i-r)*n/60:n<180?i:n<240?r+(i-r)*(240-n)/60:r)*255;}function ns(n,r){if("function"!=typeof n||null!=r&&"function"!=typeof r)throw TypeError("Expected a function");var i=function(){for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];var l=r?r.apply(this,o):o[0],u=i.cache;if(u.has(l))return u.get(l);var c=n.apply(this,o);return i.cache=u.set(l,c)||u,c;};return i.cache=new(ns.Cache||Map),ns.cacheList.push(i.cache),i;}tz(tV,t2,{copy(n){return Object.assign(new this.constructor,this,n);},displayable(){return this.rgb().displayable();},hex:t0,formatHex:t0,formatHex8:function(){return this.rgb().formatHex8();},formatHsl:function(){return nn(this).formatHsl();},formatRgb:t1,toString:t1}),tz(t5,function(n,r,i,a){var o;return 1==arguments.length?((o=n)instanceof tV||(o=t2(o)),o)?new t5((o=o.rgb()).r,o.g,o.b,o.opacity):new t5:new t5(n,r,i,null==a?1:a);},tU(tV,{brighter(n){return n=null==n?1.4285714285714286:Math.pow(1.4285714285714286,n),new t5(this.r*n,this.g*n,this.b*n,this.opacity);},darker(n){return n=null==n?.7:Math.pow(.7,n),new t5(this.r*n,this.g*n,this.b*n,this.opacity);},rgb(){return this;},clamp(){return new t5(t9(this.r),t9(this.g),t9(this.b),t7(this.opacity));},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1;},hex:t6,formatHex:t6,formatHex8:function(){return`#${ne(this.r)}${ne(this.g)}${ne(this.b)}${ne((isNaN(this.opacity)?1:this.opacity)*255)}`;},formatRgb:t8,toString:t8})),tz(nr,function(n,r,i,a){return 1==arguments.length?nn(n):new nr(n,r,i,null==a?1:a);},tU(tV,{brighter(n){return n=null==n?1.4285714285714286:Math.pow(1.4285714285714286,n),new nr(this.h,this.s,this.l*n,this.opacity);},darker(n){return n=null==n?.7:Math.pow(.7,n),new nr(this.h,this.s,this.l*n,this.opacity);},rgb(){var n=this.h%360+(this.h<0)*360,r=isNaN(n)||isNaN(this.s)?0:this.s,i=this.l,a=i+(i<.5?i:1-i)*r,o=2*i-a;return new t5(no(n>=240?n-240:n+120,o,a),no(n,o,a),no(n<120?n+240:n-120,o,a),this.opacity);},clamp(){return new nr(ni(this.h),na(this.s),na(this.l),t7(this.opacity));},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1;},formatHsl(){let n=t7(this.opacity);return`${1===n?"hsl(":"hsla("}${ni(this.h)}, ${100*na(this.s)}%, ${100*na(this.l)}%${1===n?")":`, ${n})`}`;}})),ns.Cache=Map,ns.cacheList=[],ns.clearCache=function(){ns.cacheList.forEach(function(n){return n.clear();});};var nl=((m={})[m.kUnknown=0]="kUnknown",m[m.kNumber=1]="kNumber",m[m.kPercentage=2]="kPercentage",m[m.kEms=3]="kEms",m[m.kPixels=4]="kPixels",m[m.kRems=5]="kRems",m[m.kDegrees=6]="kDegrees",m[m.kRadians=7]="kRadians",m[m.kGradians=8]="kGradians",m[m.kTurns=9]="kTurns",m[m.kMilliseconds=10]="kMilliseconds",m[m.kSeconds=11]="kSeconds",m[m.kInteger=12]="kInteger",m),nu=((g={})[g.kUNumber=0]="kUNumber",g[g.kUPercent=1]="kUPercent",g[g.kULength=2]="kULength",g[g.kUAngle=3]="kUAngle",g[g.kUTime=4]="kUTime",g[g.kUOther=5]="kUOther",g),nc=((v={})[v.kYes=0]="kYes",v[v.kNo=1]="kNo",v),nf=((y={})[y.kYes=0]="kYes",y[y.kNo=1]="kNo",y),nd=[{name:"em",unit_type:nl.kEms},{name:"px",unit_type:nl.kPixels},{name:"deg",unit_type:nl.kDegrees},{name:"rad",unit_type:nl.kRadians},{name:"grad",unit_type:nl.kGradians},{name:"ms",unit_type:nl.kMilliseconds},{name:"s",unit_type:nl.kSeconds},{name:"rem",unit_type:nl.kRems},{name:"turn",unit_type:nl.kTurns}],nh=((_={})[_.kUnknownType=0]="kUnknownType",_[_.kUnparsedType=1]="kUnparsedType",_[_.kKeywordType=2]="kKeywordType",_[_.kUnitType=3]="kUnitType",_[_.kSumType=4]="kSumType",_[_.kProductType=5]="kProductType",_[_.kNegateType=6]="kNegateType",_[_.kInvertType=7]="kInvertType",_[_.kMinType=8]="kMinType",_[_.kMaxType=9]="kMaxType",_[_.kClampType=10]="kClampType",_[_.kTransformType=11]="kTransformType",_[_.kPositionType=12]="kPositionType",_[_.kURLImageType=13]="kURLImageType",_[_.kColorType=14]="kColorType",_[_.kUnsupportedColorType=15]="kUnsupportedColorType",_),np=function(n){switch(n){case nl.kNumber:case nl.kInteger:return nu.kUNumber;case nl.kPercentage:return nu.kUPercent;case nl.kPixels:return nu.kULength;case nl.kMilliseconds:case nl.kSeconds:return nu.kUTime;case nl.kDegrees:case nl.kRadians:case nl.kGradians:case nl.kTurns:return nu.kUAngle;default:return nu.kUOther;}},nm=function(n){switch(n){case nu.kUNumber:return nl.kNumber;case nu.kULength:return nl.kPixels;case nu.kUPercent:return nl.kPercentage;case nu.kUTime:return nl.kSeconds;case nu.kUAngle:return nl.kDegrees;default:return nl.kUnknown;}},ng=function(n){var r=1;switch(n){case nl.kPixels:case nl.kDegrees:case nl.kSeconds:break;case nl.kMilliseconds:r=.001;break;case nl.kRadians:r=180/Math.PI;break;case nl.kGradians:r=.9;break;case nl.kTurns:r=360;}return r;},nv=function(n){switch(n){case nl.kNumber:case nl.kInteger:break;case nl.kPercentage:return"%";case nl.kEms:return"em";case nl.kRems:return"rem";case nl.kPixels:return"px";case nl.kDegrees:return"deg";case nl.kRadians:return"rad";case nl.kGradians:return"grad";case nl.kMilliseconds:return"ms";case nl.kSeconds:return"s";case nl.kTurns:return"turn";}return"";},ny=(0,j.default)(function n(){(0,F.default)(this,n);},[{key:"toString",value:function(){return this.buildCSSText(nc.kNo,nf.kNo,"");}},{key:"isNumericValue",value:function(){return this.getType()>=nh.kUnitType&&this.getType()<=nh.kClampType;}}],[{key:"isAngle",value:function(n){return n===nl.kDegrees||n===nl.kRadians||n===nl.kGradians||n===nl.kTurns;}},{key:"isLength",value:function(n){return n>=nl.kEms&&n<nl.kDegrees;}},{key:"isRelativeUnit",value:function(n){return n===nl.kPercentage||n===nl.kEms||n===nl.kRems;}},{key:"isTime",value:function(n){return n===nl.kSeconds||n===nl.kMilliseconds;}}]),n_=function(n){function r(n){var i;return(0,F.default)(this,r),(i=(0,G.default)(this,r)).colorSpace=n,i;}return(0,W.default)(r,n),(0,j.default)(r,[{key:"getType",value:function(){return nh.kColorType;}},{key:"to",value:function(n){return this;}}]);}(ny),nb=((b={})[b.Constant=0]="Constant",b[b.LinearGradient=1]="LinearGradient",b[b.RadialGradient=2]="RadialGradient",b),nx=function(n){function r(n,i){var a;return(0,F.default)(this,r),(a=(0,G.default)(this,r)).type=n,a.value=i,a;}return(0,W.default)(r,n),(0,j.default)(r,[{key:"clone",value:function(){return new r(this.type,this.value);}},{key:"buildCSSText",value:function(n,r,i){return i;}},{key:"getType",value:function(){return nh.kColorType;}}]);}(ny),nE=function(n){function r(n){var i;return(0,F.default)(this,r),(i=(0,G.default)(this,r)).value=n,i;}return(0,W.default)(r,n),(0,j.default)(r,[{key:"clone",value:function(){return new r(this.value);}},{key:"getType",value:function(){return nh.kKeywordType;}},{key:"buildCSSText",value:function(n,r,i){return i+this.value;}}]);}(ny),nw=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(Number.isFinite(n)?"NaN":n>0?"infinity":"-infinity")+r;},nS=function(n){return nm(np(n));},nT=function(n){function r(n){var i,a,o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nl.kNumber;return(0,F.default)(this,r),a=(0,G.default)(this,r),o="string"==typeof s?(i=s)?"number"===i?nl.kNumber:"percent"===i||"%"===i?nl.kPercentage:nd.find(function(n){return n.name===i;}).unit_type:nl.kUnknown:s,a.unit=o,a.value=n,a;}return(0,W.default)(r,n),(0,j.default)(r,[{key:"clone",value:function(){return new r(this.value,this.unit);}},{key:"equals",value:function(n){return this.value===n.value&&this.unit===n.unit;}},{key:"getType",value:function(){return nh.kUnitType;}},{key:"convertTo",value:function(n){if(this.unit===n)return new r(this.value,this.unit);var i=nS(this.unit);if(i!==nS(n)||i===nl.kUnknown)return null;var a=ng(this.unit)/ng(n);return new r(this.value*a,n);}},{key:"buildCSSText",value:function(n,r,i){var a;switch(this.unit){case nl.kUnknown:break;case nl.kInteger:a=Number(this.value).toFixed(0);break;case nl.kNumber:case nl.kPercentage:case nl.kEms:case nl.kRems:case nl.kPixels:case nl.kDegrees:case nl.kRadians:case nl.kGradians:case nl.kMilliseconds:case nl.kSeconds:case nl.kTurns:var o=this.value,s=nv(this.unit);if(o<-999999||o>999999){var l=nv(this.unit);a=!Number.isFinite(o)||Number.isNaN(o)?nw(o,l):o+(l||"");}else a="".concat(o).concat(s);}return i+a;}}]);}(ny),nA=new nT(0,"px");new nT(1,"px");var nC=new nT(0,"deg"),nO=function(n){function r(n,i,a){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,l=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,F.default)(this,r),(o=(0,G.default)(this,r,["rgb"])).r=n,o.g=i,o.b=a,o.alpha=s,o.isNone=l,o;}return(0,W.default)(r,n),(0,j.default)(r,[{key:"clone",value:function(){return new r(this.r,this.g,this.b,this.alpha);}},{key:"buildCSSText",value:function(n,r,i){return"".concat(i,"rgba(").concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")");}}]);}(n_),nM=new nE("unset"),nR={"":nM,unset:nM,initial:new nE("initial"),inherit:new nE("inherit")},nP=new nO(0,0,0,0,!0),nk=new nO(0,0,0,0),nI=ns(function(n,r,i,a){return new nO(n,r,i,a);},function(n,r,i,a){return"rgba(".concat(n,",").concat(r,",").concat(i,",").concat(a,")");}),nL=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nl.kNumber;return new nT(n,r);};new nT(50,"%");var nN=function(){var n={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},r="";function i(n){throw Error("".concat(r,": ").concat(n));}function a(){return o("linear-gradient",n.linearGradient,l)||o("repeating-linear-gradient",n.repeatingLinearGradient,l)||o("radial-gradient",n.radialGradient,u)||o("repeating-radial-gradient",n.repeatingRadialGradient,u)||o("conic-gradient",n.conicGradient,u);}function o(r,a,o){return s(a,function(a){var s=o();return s&&!b(n.comma)&&i("Missing comma before color stops"),{type:r,orientation:s,colorStops:p(m)};});}function s(r,a){var o=b(r);if(o){b(n.startCall)||i("Missing (");var s=a(o);return b(n.endCall)||i("Missing )"),s;}}function l(){return _("directional",n.sideOrCorner,1)||_("angular",n.angleValue,1);}function u(){var i,a,o=c();return o&&((i=[]).push(o),a=r,b(n.comma)&&((o=c())?i.push(o):r=a)),i;}function c(){var n,r,i=((n=_("shape",/^(circle)/i,0))&&(n.style=y()||f()),n||((r=_("shape",/^(ellipse)/i,0))&&(r.style=v()||f()),r));if(i)i.at=d();else{var a=f();if(a){i=a;var o=d();o&&(i.at=o);}else{var s=h();s&&(i={type:"default-radial",at:s});}}return i;}function f(){return _("extent-keyword",n.extentKeywords,1);}function d(){if(_("position",/^at/,0)){var n=h();return n||i("Missing positioning value"),n;}}function h(){var n={x:v(),y:v()};if(n.x||n.y)return{type:"position",value:n};}function p(r){var a=r(),o=[];if(a)for(o.push(a);b(n.comma);)(a=r())?o.push(a):i("One extra comma");return o;}function m(){var r=_("hex",n.hexColor,1)||s(n.rgbaColor,function(){return{type:"rgba",value:p(g)};})||s(n.rgbColor,function(){return{type:"rgb",value:p(g)};})||_("literal",n.literalColor,0);return r||i("Expected color definition"),r.length=v(),r;}function g(){return b(n.number)[1];}function v(){return _("%",n.percentageValue,1)||_("position-keyword",n.positionKeywords,1)||y();}function y(){return _("px",n.pixelValue,1)||_("em",n.emValue,1);}function _(n,r,i){var a=b(r);if(a)return{type:n,value:a[i]};}function b(n){var i=/^[\n\r\t\s]+/.exec(r);i&&x(i[0].length);var a=n.exec(r);return a&&x(a[0].length),a;}function x(n){r=r.substring(n);}return function(n){var o;return r=n,o=p(a),r.length>0&&i("Invalid input not EOF"),o;};}();function nD(n,r,i,a){var o=a.value*t_,s=0+r/2,l=0+i/2,u=Math.abs(r*Math.cos(o))+Math.abs(i*Math.sin(o));return{x1:n[0]+s-Math.cos(o)*u/2,y1:n[1]+l-Math.sin(o)*u/2,x2:n[0]+s+Math.cos(o)*u/2,y2:n[1]+l+Math.sin(o)*u/2};}function nF(n,r,i,a,o,s){var l=a.value,u=o.value;a.unit===nl.kPercentage&&(l=a.value/100*r),o.unit===nl.kPercentage&&(u=o.value/100*i);var c=Math.max((0,ec.distanceSquareRoot)([0,0],[l,u]),(0,ec.distanceSquareRoot)([0,i],[l,u]),(0,ec.distanceSquareRoot)([r,i],[l,u]),(0,ec.distanceSquareRoot)([r,0],[l,u]));return s&&(s instanceof nT?c=s.value:s instanceof nE&&("closest-side"===s.value?c=Math.min(l,r-l,u,i-u):"farthest-side"===s.value?c=Math.max(l,r-l,u,i-u):"closest-corner"===s.value&&(c=Math.min((0,ec.distanceSquareRoot)([0,0],[l,u]),(0,ec.distanceSquareRoot)([0,i],[l,u]),(0,ec.distanceSquareRoot)([r,i],[l,u]),(0,ec.distanceSquareRoot)([r,0],[l,u]))))),{x:l+n[0],y:u+n[1],r:c};}var nB=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,nj=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,nz=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,nU=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,nV={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},nG=ns(function(n){return nL("angular"===n.type?Number(n.value):nV[n.value]||0,"deg");}),nH=ns(function(n){var r=50,i=50,a="%",o="%";if((null==n?void 0:n.type)==="position"){var s=n.value,l=s.x,u=s.y;(null==l?void 0:l.type)==="position-keyword"&&("left"===l.value?r=0:"center"===l.value?r=50:"right"===l.value?r=100:"top"===l.value?i=0:"bottom"===l.value&&(i=100)),(null==u?void 0:u.type)==="position-keyword"&&("left"===u.value?r=0:"center"===u.value?i=50:"right"===u.value?r=100:"top"===u.value?i=0:"bottom"===u.value&&(i=100)),((null==l?void 0:l.type)==="px"||(null==l?void 0:l.type)==="%"||(null==l?void 0:l.type)==="em")&&(a=null==l?void 0:l.type,r=Number(l.value)),((null==u?void 0:u.type)==="px"||(null==u?void 0:u.type)==="%"||(null==u?void 0:u.type)==="em")&&(o=null==u?void 0:u.type,i=Number(u.value));}return{cx:nL(r,a),cy:nL(i,o)};}),nW=ns(function(n){if(n.indexOf("linear")>-1||n.indexOf("radial")>-1)return nN(n).map(function(n){var r=n.type,i=n.orientation,a=n.colorStops;!function(n){var r=n.length;n[r-1].length=null!==(s=n[r-1].length)&&void 0!==s?s:{type:"%",value:"100"},r>1&&(n[0].length=null!==(l=n[0].length)&&void 0!==l?l:{type:"%",value:"0"});for(var i=0,a=Number(n[0].length.value),o=1;o<r;o++){var s,l,u,c=null===(u=n[o].length)||void 0===u?void 0:u.value;if(!(0,ep.default)(c)&&!(0,ep.default)(a)){for(var f=1;f<o-i;f++)n[i+f].length={type:"%",value:"".concat(a+(Number(c)-a)*f/(o-i))};i=o,a=Number(c);}}}(a);var o=a.map(function(n){var r,i;return{offset:nL(Number(n.length.value),"%"),color:(r=n.type,i=n.value,"hex"===r?"#".concat(i):"literal"===r?i:"rgb"===r?"rgb(".concat(i.join(","),")"):"rgba(".concat(i.join(","),")"))};});if("linear-gradient"===r)return new nx(nb.LinearGradient,{angle:i?nG(i):nC,steps:o});if("radial-gradient"===r&&(i||(i=[{type:"shape",value:"circle"}]),"shape"===i[0].type&&"circle"===i[0].value)){var s,l=nH(i[0].at),u=l.cx,c=l.cy;if(i[0].style){var f=i[0].style,d=f.type,h=f.value;"extent-keyword"===d?(nR[h]||(nR[h]=new nE(h)),s=nR[h]):s=nL(h,d);}return new nx(nb.RadialGradient,{cx:u,cy:c,size:s,steps:o});}});var r=n[0];if("("===n[1]||"("===n[2]){if("l"===r){var i=nB.exec(n);if(i){var a,o=(null===(a=i[2].match(nU))||void 0===a?void 0:a.map(function(n){return n.split(":");}))||[];return[new nx(nb.LinearGradient,{angle:nL(parseFloat(i[1]),"deg"),steps:o.map(function(n){var r=(0,q.default)(n,2),i=r[0],a=r[1];return{offset:nL(100*Number(i),"%"),color:a};})})];}}else if("r"===r){var s=function(n){var r=nj.exec(n);if(r){var i,a=(null===(i=r[4].match(nU))||void 0===i?void 0:i.map(function(n){return n.split(":");}))||[];return{cx:nL(50,"%"),cy:nL(50,"%"),steps:a.map(function(n){var r=(0,q.default)(n,2),i=r[0],a=r[1];return{offset:nL(100*Number(i),"%"),color:a};})};}return null;}(n);if(s){if(!(0,ed.default)(s))return[new nx(nb.RadialGradient,s)];n=s;}}else if("p"===r)return function(n){var r=nz.exec(n);if(r){var i=r[1],a=r[2];switch(i){case"a":i="repeat";break;case"x":i="repeat-x";break;case"y":i="repeat-y";break;default:i="no-repeat";}return{image:a,repetition:i};}return null;}(n);}});function nX(n){return n&&!!n.image;}function nq(n){return n&&!(0,ep.default)(n.r)&&!(0,ep.default)(n.g)&&!(0,ep.default)(n.b);}var n$=ns(function(n){if(nX(n))return(0,N.default)({repetition:"repeat"},n);if((0,ep.default)(n)&&(n=""),"transparent"===n)return nk;if("currentColor"===n)n="black";else if("none"===n)return nP;var r=nW(n);if(r)return r;var i=t2(n),a=[0,0,0,0];return null!==i&&(a[0]=i.r||0,a[1]=i.g||0,a[2]=i.b||0,a[3]=i.opacity),nI.apply(void 0,a);});function nY(n,r){if(nq(n)&&nq(r))return[[Number(n.r),Number(n.g),Number(n.b),Number(n.alpha)],[Number(r.r),Number(r.g),Number(r.b),Number(r.alpha)],function(n){var r=n.slice();if(r[3])for(var i=0;i<3;i++)r[i]=Math.round((0,eg.default)(r[i],0,255));return r[3]=(0,eg.default)(r[3],0,1),"rgba(".concat(r.join(","),")");}];}function nZ(n,r){if((0,ep.default)(r))return nL(0,"px");if(isFinite(Number(r="".concat(r).trim().toLowerCase()))){if("px".search(n)>=0)return nL(Number(r),"px");if("deg".search(n)>=0)return nL(Number(r),"deg");}var i=[];r=r.replace(n,function(n){return i.push(n),"U".concat(n);});var a="U(".concat(n.source,")");return i.map(function(n){return nL(Number(r.replace(RegExp("U".concat(n),"g"),"").replace(RegExp(a,"g"),"*0")),n);})[0];}var nK=function(n){return nZ(/px/g,n);},nQ=ns(nK);ns(function(n){return nZ(RegExp("%","g"),n);});var nJ=function(n){return(0,eu.default)(n)||isFinite(Number(n))?nL(Number(n)||0,"px"):nZ(RegExp("px|%|em|rem","g"),n);},n0=ns(nJ),n1=function(n){return nZ(RegExp("deg|rad|grad|turn","g"),n);},n2=ns(n1);function n3(n){var r=0;return n.unit===nl.kDegrees?r=n.value:n.unit===nl.kRadians?r=Number(n.value)*tx:n.unit===nl.kTurns?r=360*Number(n.value):n.value&&(r=n.value),r;}function n4(n,r){var i;return(Array.isArray(n)?i=n.map(function(n){return Number(n);}):(0,ed.default)(n)?i=n.split(" ").map(function(n){return Number(n);}):(0,eu.default)(n)&&(i=[n]),2===r)?1===i.length?[i[0],i[0]]:[i[0],i[1]]:4===r?1===i.length?[i[0],i[0],i[0],i[0]]:2===i.length?[i[0],i[1],i[0],i[1]]:3===i.length?[i[0],i[1],i[2],i[1]]:[i[0],i[1],i[2],i[3]]:"even"===r&&i.length%2==1?[].concat((0,U.default)(i),(0,U.default)(i)):i;}function n5(n,r,i){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(n.unit===nl.kPixels)return Number(n.value);if(n.unit===nl.kPercentage&&i){var o=i.nodeName===e7.GROUP?i.getLocalBounds():i.getGeometryBounds();return(a?o.min[r]:0)+n.value/100*o.halfExtents[r]*2;}return 0;}var n6=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function n8(n){return n.toString();}var n7=function(n){return"number"==typeof n?nL(n):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(n)?nL(Number(n)):nL(0);},n9=ns(n7);function re(n,r){return[n,r,n8];}function rt(n,r){return function(i,a){return[i,a,function(i){return n8((0,eg.default)(i,n,r));}];};}function rn(n,r){if(n.length===r.length)return[n,r,function(n){return n;}];}function rr(n){return 0===n.parsedStyle.d.totalLength&&(n.parsedStyle.d.totalLength=ew(n.parsedStyle.d.absolutePath,void 0,(0,ev.__assign)((0,ev.__assign)({},void 0),{bbox:!1,length:!0})).length),n.parsedStyle.d.totalLength;}function ri(n,r){return n[0]===r[0]&&n[1]===r[1];}function ra(n,r){var i=n.prePoint,a=n.currentPoint,o=n.nextPoint,s=Math.pow(a[0]-i[0],2)+Math.pow(a[1]-i[1],2),l=Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2),u=Math.acos((s+l-(Math.pow(i[0]-o[0],2)+Math.pow(i[1]-o[1],2)))/(2*Math.sqrt(s)*Math.sqrt(l)));if(!u||0===Math.sin(u)||(0,eM.default)(u,0))return{xExtra:0,yExtra:0};var c=Math.abs(Math.atan2(o[1]-a[1],o[0]-a[0])),f=Math.abs(Math.atan2(o[0]-a[0],o[1]-a[1]));return{xExtra:r/2*(1/Math.sin(u/2))*Math.cos(u/2-(c=c>Math.PI/2?Math.PI-c:c))-r/2||0,yExtra:r/2*(1/Math.sin(u/2))*Math.cos((f=f>Math.PI/2?Math.PI-f:f)-u/2)-r/2||0};}function ro(n,r){return[r[0]+(r[0]-n[0]),r[1]+(r[1]-n[1])];}ns(function(n){return(0,ed.default)(n)?n.split(" ").map(n9):n.map(n9);});var rs=function(n,r){var i=n.x*r.x+n.y*r.y,a=Math.sqrt((Math.pow(n.x,2)+Math.pow(n.y,2))*(Math.pow(r.x,2)+Math.pow(r.y,2)));return(n.x*r.y-n.y*r.x<0?-1:1)*Math.acos(i/a);},rl=function(n,r,i,a,o,s,l,u){r=Math.abs(r),i=Math.abs(i);var c=(a=eR(a,360))*t_;if(n.x===l.x&&n.y===l.y)return{x:n.x,y:n.y,ellipticalArcAngle:0};if(0===r||0===i)return{x:0,y:0,ellipticalArcAngle:0};var f=(n.x-l.x)/2,d=(n.y-l.y)/2,h={x:Math.cos(c)*f+Math.sin(c)*d,y:-Math.sin(c)*f+Math.cos(c)*d},p=Math.pow(h.x,2)/Math.pow(r,2)+Math.pow(h.y,2)/Math.pow(i,2);p>1&&(r*=Math.sqrt(p),i*=Math.sqrt(p));var m=(Math.pow(r,2)*Math.pow(i,2)-Math.pow(r,2)*Math.pow(h.y,2)-Math.pow(i,2)*Math.pow(h.x,2))/(Math.pow(r,2)*Math.pow(h.y,2)+Math.pow(i,2)*Math.pow(h.x,2)),g=(o!==s?1:-1)*Math.sqrt(m=m<0?0:m),v={x:g*(r*h.y/i),y:g*(-(i*h.x)/r)},y={x:Math.cos(c)*v.x-Math.sin(c)*v.y+(n.x+l.x)/2,y:Math.sin(c)*v.x+Math.cos(c)*v.y+(n.y+l.y)/2},_={x:(h.x-v.x)/r,y:(h.y-v.y)/i},b=rs({x:1,y:0},_),x=rs(_,{x:(-h.x-v.x)/r,y:(-h.y-v.y)/i});!s&&x>0?x-=2*Math.PI:s&&x<0&&(x+=2*Math.PI);var E=b+(x%=2*Math.PI)*u,w=r*Math.cos(E),S=i*Math.sin(E);return{x:Math.cos(c)*w-Math.sin(c)*S+y.x,y:Math.sin(c)*w+Math.cos(c)*S+y.y,ellipticalArcStartAngle:b,ellipticalArcEndAngle:b+x,ellipticalArcAngle:E,ellipticalArcCenter:y,resultantRx:r,resultantRy:i};};function ru(n,r){var i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a=n.arcParams,o=a.rx,s=void 0===o?0:o,l=a.ry,u=void 0===l?0:l,c=a.xRotation,f=a.arcFlag,d=a.sweepFlag,h=rl({x:n.prePoint[0],y:n.prePoint[1]},s,u,c,!!f,!!d,{x:n.currentPoint[0],y:n.currentPoint[1]},r),p=rl({x:n.prePoint[0],y:n.prePoint[1]},s,u,c,!!f,!!d,{x:n.currentPoint[0],y:n.currentPoint[1]},i?r+.005:r-.005),m=p.x-h.x,g=p.y-h.y,v=Math.sqrt(m*m+g*g);return{x:-m/v,y:-g/v};}function rc(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1]);}function rf(n,r){return rc(n)*rc(r)?(n[0]*r[0]+n[1]*r[1])/(rc(n)*rc(r)):1;}function rd(n,r){return(n[0]*r[1]<n[1]*r[0]?-1:1)*Math.acos(rf(n,r));}function rh(n,r,i,a){var o=(-1+Math.sqrt(2))/3*4,s=n*o,l=r*o,u=i-n,c=i+n,f=a-r,d=a+r;return[["M",u,a],["C",u,a-l,i-s,f,i,f],["C",i+s,f,c,a-l,c,a],["C",c,a+l,i+s,d,i,d],["C",i-s,d,u,a+l,u,a],["Z"]];}function rp(n){var r,i,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.getLocalTransform(),s=[];switch(n.nodeName){case e7.LINE:var l=n.parsedStyle,u=l.x1,c=l.y1,f=l.x2,d=l.y2;s=[["M",void 0===u?0:u,void 0===c?0:c],["L",void 0===f?0:f,void 0===d?0:d]];break;case e7.CIRCLE:var h=n.parsedStyle,p=h.r,m=void 0===p?0:p,g=h.cx,v=h.cy;s=rh(m,m,void 0===g?0:g,void 0===v?0:v);break;case e7.ELLIPSE:var y=n.parsedStyle,_=y.rx,b=y.ry,x=y.cx,E=y.cy;s=rh(void 0===_?0:_,void 0===b?0:b,void 0===x?0:x,void 0===E?0:E);break;case e7.POLYLINE:case e7.POLYGON:r=n.parsedStyle.points.points,i=n.nodeName===e7.POLYGON,a=r.map(function(n,r){return[0===r?"M":"L",n[0],n[1]];}),i&&a.push(["Z"]),s=a;break;case e7.RECT:var w=n.parsedStyle,S=w.width,T=void 0===S?0:S,A=w.height,C=void 0===A?0:A,O=w.x,M=w.y,R=w.radius;s=function(n,r,i,a,o){if(o){var s=(0,q.default)(o,4),l=s[0],u=s[1],c=s[2],f=s[3],d=n>0?1:-1,h=r>0?1:-1,p=d+h!==0?1:0;return[["M",d*l+i,a],["L",n-d*u+i,a],u?["A",u,u,0,0,p,n+i,h*u+a]:null,["L",n+i,r-h*c+a],c?["A",c,c,0,0,p,n+i-d*c,r+a]:null,["L",i+d*f,r+a],f?["A",f,f,0,0,p,i,r+a-h*f]:null,["L",i,h*l+a],l?["A",l,l,0,0,p,d*l+i,a]:null,["Z"]].filter(function(n){return n;});}return[["M",i,a],["L",i+n,a],["L",i+n,a+r],["L",i,a+r],["Z"]];}(T,C,void 0===O?0:O,void 0===M?0:M,R&&R.some(function(n){return 0!==n;})&&R.map(function(n){return(0,eg.default)(n,0,Math.min(Math.abs(T)/2,Math.abs(C)/2));}));break;case e7.PATH:var P=n.parsedStyle.d.absolutePath;s=(0,U.default)(P);}if(s.length)return s.reduce(function(n,r){var i="";if("M"===r[0]||"L"===r[0]){var a=K.fromValues(r[1],r[2],0);o&&K.transformMat4(a,a,o),i="".concat(r[0]).concat(a[0],",").concat(a[1]);}else if("Z"===r[0])i=r[0];else if("C"===r[0]){var s=K.fromValues(r[1],r[2],0),l=K.fromValues(r[3],r[4],0),u=K.fromValues(r[5],r[6],0);o&&(K.transformMat4(s,s,o),K.transformMat4(l,l,o),K.transformMat4(u,u,o)),i="".concat(r[0]).concat(s[0],",").concat(s[1],",").concat(l[0],",").concat(l[1],",").concat(u[0],",").concat(u[1]);}else if("A"===r[0]){var c=K.fromValues(r[6],r[7],0);o&&K.transformMat4(c,c,o),i="".concat(r[0]).concat(r[1],",").concat(r[2],",").concat(r[3],",").concat(r[4],",").concat(r[5],",").concat(c[0],",").concat(c[1]);}else if("Q"===r[0]){var f=K.fromValues(r[1],r[2],0),d=K.fromValues(r[3],r[4],0);o&&(K.transformMat4(f,f,o),K.transformMat4(d,d,o)),i="".concat(r[0]).concat(r[1],",").concat(r[2],",").concat(r[3],",").concat(r[4],"}");}return n+i;},"");}var rm=function(n){if(""===n||Array.isArray(n)&&0===n.length)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};try{r=(0,ey.normalizePath)(n);}catch(i){r=(0,ey.normalizePath)(""),console.error("[g]: Invalid SVG Path definition: ".concat(n));}!function(n){for(var r=0;r<n.length;r++){var i=n[r-1],a=n[r];if("M"===a[0]&&i){var o=i[0],s=[a[1],a[2]],l=void 0;"L"===o||"M"===o?l=[i[1],i[2]]:("C"===o||"A"===o||"Q"===o)&&(l=[i[i.length-2],i[i.length-1]]),l&&ri(s,l)&&(n.splice(r,1),r--);}}}(r);var r,i=function(n){for(var r=!1,i=n.length,a=0;a<i;a++){var o=n[a][0];if("C"===o||"A"===o||"Q"===o){r=!0;break;}}return r;}(r),a=function(n){for(var r=[],i=[],a=[],o=0;o<n.length;o++){var s=n[o],l=s[0];"M"===l?(a.length&&(i.push(a),a=[]),a.push([s[1],s[2]])):"Z"===l?a.length&&(r.push(a),a=[]):a.push([s[1],s[2]]);}return a.length>0&&i.push(a),{polygons:r,polylines:i};}(r),o=a.polygons,s=a.polylines,l=function(n){for(var r=[],i=null,a=null,o=null,s=0,l=n.length,u=0;u<l;u++){var c=n[u];a=n[u+1];var f=c[0],d={command:f,prePoint:i,params:c,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(f){case"M":o=[c[1],c[2]],s=u;break;case"A":var h=function(n,r){var i=r[1],a=r[2],o=eR(r[3]*t_,2*Math.PI),s=r[4],l=r[5],u=n[0],c=n[1],f=r[6],d=r[7],h=Math.cos(o)*(u-f)/2+Math.sin(o)*(c-d)/2,p=-1*Math.sin(o)*(u-f)/2+Math.cos(o)*(c-d)/2,m=h*h/(i*i)+p*p/(a*a);m>1&&(i*=Math.sqrt(m),a*=Math.sqrt(m));var g=i*i*(p*p)+a*a*(h*h),v=g?Math.sqrt((i*i*(a*a)-g)/g):1;s===l&&(v*=-1),isNaN(v)&&(v=0);var y=a?v*i*p/a:0,_=i?-(v*a)*h/i:0,b=(u+f)/2+Math.cos(o)*y-Math.sin(o)*_,x=(c+d)/2+Math.sin(o)*y+Math.cos(o)*_,E=[(h-y)/i,(p-_)/a],w=[(-1*h-y)/i,(-1*p-_)/a],S=rd([1,0],E),T=rd(E,w);return -1>=rf(E,w)&&(T=Math.PI),rf(E,w)>=1&&(T=0),0===l&&T>0&&(T-=2*Math.PI),1===l&&T<0&&(T+=2*Math.PI),{cx:b,cy:x,rx:ri(n,[f,d])?0:i,ry:ri(n,[f,d])?0:a,startAngle:S,endAngle:S+T,xRotation:o,arcFlag:s,sweepFlag:l};}(i,c);d.arcParams=h;}if("Z"===f)i=o,a=n[s+1];else{var p=c.length;i=[c[p-2],c[p-1]];}a&&"Z"===a[0]&&(a=n[s],r[s]&&(r[s].prePoint=i)),d.currentPoint=i,r[s]&&ri(i,r[s].currentPoint)&&(r[s].prePoint=d.prePoint);var m=a?[a[a.length-2],a[a.length-1]]:null;d.nextPoint=m;var g=d.prePoint;if(["L","H","V"].includes(f))d.startTangent=[g[0]-i[0],g[1]-i[1]],d.endTangent=[i[0]-g[0],i[1]-g[1]];else if("Q"===f){var v=[c[1],c[2]];d.startTangent=[g[0]-v[0],g[1]-v[1]],d.endTangent=[i[0]-v[0],i[1]-v[1]];}else if("T"===f){var y=r[u-1],_=ro(y.currentPoint,g);"Q"===y.command?(d.command="Q",d.startTangent=[g[0]-_[0],g[1]-_[1]],d.endTangent=[i[0]-_[0],i[1]-_[1]]):(d.command="TL",d.startTangent=[g[0]-i[0],g[1]-i[1]],d.endTangent=[i[0]-g[0],i[1]-g[1]]);}else if("C"===f){var b=[c[1],c[2]],x=[c[3],c[4]];d.startTangent=[g[0]-b[0],g[1]-b[1]],d.endTangent=[i[0]-x[0],i[1]-x[1]],0===d.startTangent[0]&&0===d.startTangent[1]&&(d.startTangent=[b[0]-x[0],b[1]-x[1]]),0===d.endTangent[0]&&0===d.endTangent[1]&&(d.endTangent=[x[0]-b[0],x[1]-b[1]]);}else if("S"===f){var E=r[u-1],w=ro(E.currentPoint,g),S=[c[1],c[2]];"C"===E.command?(d.command="C",d.startTangent=[g[0]-w[0],g[1]-w[1]]):(d.command="SQ",d.startTangent=[g[0]-S[0],g[1]-S[1]]),d.endTangent=[i[0]-S[0],i[1]-S[1]];}else if("A"===f){var T=ru(d,0),A=T.x,C=T.y,O=ru(d,1,!1),M=O.x,R=O.y;d.startTangent=[A,C],d.endTangent=[M,R];}r.push(d);}return r;}(r),u=function(n,r){for(var i=[],a=[],o=[],s=0;s<n.length;s++){var l=n[s],u=l.currentPoint,c=l.params,f=l.prePoint,d=void 0;switch(l.command){case"Q":d=(0,eK.quadBox)(f[0],f[1],c[1],c[2],c[3],c[4]);break;case"C":d=(0,eK.cubicBox)(f[0],f[1],c[1],c[2],c[3],c[4],c[5],c[6]);break;case"A":var h=l.arcParams;d=(0,eK.arcBox)(h.cx,h.cy,h.rx,h.ry,h.xRotation,h.startAngle,h.endAngle);break;default:i.push(u[0]),a.push(u[1]);}d&&(l.box=d,i.push(d.x,d.x+d.width),a.push(d.y,d.y+d.height));}i=i.filter(function(n){return!Number.isNaN(n)&&n!==1/0&&n!==-1/0;}),a=a.filter(function(n){return!Number.isNaN(n)&&n!==1/0&&n!==-1/0;});var p=(0,eT.default)(i),m=(0,eT.default)(a),g=(0,eC.default)(i),v=(0,eC.default)(a);if(0===o.length)return{x:p,y:m,width:g-p,height:v-m};for(var y=0;y<o.length;y++){var _=o[y],b=_.currentPoint;b[0]===p?p-=ra(_,0).xExtra:b[0]===g&&(g+=ra(_,0).xExtra),b[1]===m?m-=ra(_,r).yExtra:b[1]===v&&(v+=ra(_,r).yExtra);}return{x:p,y:m,width:g-p,height:v-m};}(l,0),c=u.x,f=u.y,d=u.width,h=u.height;return{absolutePath:r,hasArc:i,segments:l,polygons:o,polylines:s,totalLength:0,rect:{x:Number.isFinite(c)?c:0,y:Number.isFinite(f)?f:0,width:Number.isFinite(d)?d:0,height:Number.isFinite(h)?h:0}};},rg=ns(rm);function rv(n){return(0,ed.default)(n)?rg(n):rm(n);}function ry(n,r,i){var a,o,s,l,u,c,f,d,h,p=n.curve,m=r.curve;p&&0!==p.length||(p=(0,eP.path2Curve)(n.absolutePath,!1),n.curve=p),m&&0!==m.length||(m=(0,eP.path2Curve)(r.absolutePath,!1),r.curve=m);var g=[p,m];p.length!==m.length&&(g=function n(r,i,a,o){if(void 0===o&&(o=0),o>50)return console.warn("Maximum recursion depth reached in equalizeSegments"),[r,i];var s=ek(r),l=ek(i),u=s.length,c=l.length,f=s.filter(function(n){return n.l;}).length,d=l.filter(function(n){return n.l;}).length,h=s.filter(function(n){return n.l;}).reduce(function(n,r){return n+r.l;},0)/f||0,p=l.filter(function(n){return n.l;}).reduce(function(n,r){return n+r.l;},0)/d||0,m=a||Math.max(u,c),g=[h,p],v=[m-u,m-c],y=0,_=[s,l].map(function(n,r){return n.l===m?n.map(function(n){return n.s;}):n.map(function(n,i){return y=i&&v[r]&&n.l>=g[r],v[r]-=y?1:0,y?n.ss:[n.s];}).flat();});return _[0].length===_[1].length?_:n(_[0],_[1],m,o+1);}(p,m));var v=eI(g[0])!==eI(g[1])?[["M"].concat((o=(a=g[0]).slice(1).map(function(n,r,i){return r?i[r-1].slice(-2).concat(n.slice(1)):a[0].slice(1).concat(n.slice(1));}).map(function(n){return n.map(function(r,i){return n[n.length-i-2*(1-i%2)];});}).reverse())[0].slice(0,2))].concat(o.map(function(n){return["C"].concat(n.slice(2));})):g[0].map(function(n){return Array.isArray(n)?[].concat(n):n;});return[v,(l=(s=g[1]).length-1,u=[],c=0,(d=(f=s.length)-1,h=s.map(function(n,r){return s.map(function(n,i){var a=r+i;return 0===i||s[a]&&"M"===s[a][0]?["M"].concat(s[a].slice(-2)):(a>=f&&(a-=d),s[a]);});})).forEach(function(n,r){s.slice(1).forEach(function(n,i){c+=(0,ec.distanceSquareRoot)(s[(r+i)%l].slice(-2),v[i%l].slice(-2));}),u[r]=c,c=0;}),h[u.indexOf(Math.min.apply(null,u))]),function(n){return n;}];}function r_(n,r){return[n.points,r.points,function(n){return n;}];}var rb=/\s*(\w+)\(([^)]*)\)/g;function rx(n){return function(r){var i=0;return n.map(function(n){return null===n?r[i++]:n;});};}function rE(n){return n;}var rw={matrix:["NNNNNN",[null,null,0,0,null,null,0,0,0,0,1,0,null,null,0,1],rE],matrix3d:["NNNNNNNNNNNNNNNN",rE],rotate:["A"],rotateX:["A"],rotateY:["A"],rotateZ:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",rx([null,null,new nT(1)]),rE],scaleX:["N",rx([null,new nT(1),new nT(1)]),rx([null,new nT(1)])],scaleY:["N",rx([new nT(1),null,new nT(1)]),rx([new nT(1),null])],scaleZ:["N",rx([new nT(1),new nT(1),null])],scale3d:["NNN",rE],skew:["Aa",null,rE],skewX:["A",null,rx([null,nC])],skewY:["A",null,rx([nC,null])],translate:["Tt",rx([null,null,nA]),rE],translateX:["T",rx([null,nA,nA]),rx([null,nA])],translateY:["T",rx([nA,null,nA]),rx([nA,null])],translateZ:["L",rx([nA,nA,null])],translate3d:["TTL",rE]};function rS(n){for(var r=[],i=n.length,a=0;a<i;a++){var o=n[a],s=o[0],l=o.slice(1);if("translate"===s||"skew"===s?1===l.length&&l.push(0):"scale"===s&&1===l.length&&l.push(l[0]),!rw[s])return[];var u=l.map(function(n){return nL(n);});r.push({t:s,d:u});}return r;}function rT(n){if(Array.isArray(n))return rS(n);if("none"===(n=(n||"none").trim()))return[];var r,i=[],a=0;for(rb.lastIndex=0;(r=rb.exec(n))&&r.index===a;){a=r.index+r[0].length;var o=r[1],s=rw[o];if(!s)break;var l=r[2].split(","),u=s[0];if(u.length<l.length)break;for(var c=[],f=0;f<u.length;f++){var d=l[f],h=u[f],p=void 0;if(void 0===(p=d?({A:function(n){return"0"===n.trim()?nC:n2(n);},N:n9,T:n0,L:nQ})[h.toUpperCase()](d):({a:nC,n:c[0],t:nA})[h]))return[];c.push(p);}if(i.push({t:o,d:c}),rb.lastIndex===n.length)return i;}return[];}function rA(n){if(Array.isArray(n))return rS(n);if("none"===(n=(n||"none").trim()))return[];var r,i=[],a=0;for(rb.lastIndex=0;(r=rb.exec(n))&&r.index===a;){a=r.index+r[0].length;var o=r[1],s=rw[o];if(!s)break;var l=r[2].split(","),u=s[0];if(u.length<l.length)break;for(var c=[],f=0;f<u.length;f++){var d=l[f],h=u[f],p=void 0;if(void 0===(p=d?({A:function(n){return"0"===n.trim()?nC:n1(n);},N:n7,T:nJ,L:nK})[h.toUpperCase()](d):({a:nC,n:c[0],t:nA})[h]))return[];c.push(p);}if(i.push({t:o,d:c}),rb.lastIndex===n.length)return i;}return[];}function rC(n){switch(n.t){case"rotateX":return[1,0,0,0,0,Math.cos(o=n3(n.d[0])*t_),Math.sin(o),0,0,-Math.sin(o),Math.cos(o),0,0,0,0,1];case"rotateY":return[Math.cos(o=n3(n.d[0])*t_),0,-Math.sin(o),0,0,1,0,0,Math.sin(o),0,Math.cos(o),0,0,0,0,1];case"rotate":case"rotateZ":return[Math.cos(o=n3(n.d[0])*t_),Math.sin(o),0,0,-Math.sin(o),Math.cos(o),0,0,0,0,1,0,0,0,0,1];case"rotate3d":r=n.d[0].value,i=n.d[1].value,a=n.d[2].value,o=n3(n.d[3])*t_;var r,i,a,o,s=r*r+i*i+a*a;if(0===s)r=1,i=0,a=0;else if(1!==s){var l=Math.sqrt(s);r/=l,i/=l,a/=l;}var u=Math.sin(o/2),c=u*Math.cos(o/2),f=u*u;return[1-2*(i*i+a*a)*f,2*(r*i*f+a*c),2*(r*a*f-i*c),0,2*(r*i*f-a*c),1-2*(r*r+a*a)*f,2*(i*a*f+r*c),0,2*(r*a*f+i*c),2*(i*a*f-r*c),1-2*(r*r+i*i)*f,0,0,0,0,1];case"scale":return[n.d[0].value,0,0,0,0,n.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scaleX":return[n.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaleY":return[1,0,0,0,0,n.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scaleZ":return[1,0,0,0,0,1,0,0,0,0,n.d[0].value,0,0,0,0,1];case"scale3d":return[n.d[0].value,0,0,0,0,n.d[1].value,0,0,0,0,n.d[2].value,0,0,0,0,1];case"skew":var d=n3(n.d[0])*t_;return[1,Math.tan(n3(n.d[1])*t_),0,0,Math.tan(d),1,0,0,0,0,1,0,0,0,0,1];case"skewX":return[1,0,0,0,Math.tan(o=n3(n.d[0])*t_),1,0,0,0,0,1,0,0,0,0,1];case"skewY":return[1,Math.tan(o=n3(n.d[0])*t_),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return[1,0,0,0,0,1,0,0,0,0,1,0,r=n5(n.d[0],0,null)||0,i=n5(n.d[1],0,null)||0,0,1];case"translateX":return[1,0,0,0,0,1,0,0,0,0,1,0,r=n5(n.d[0],0,null)||0,0,0,1];case"translateY":return[1,0,0,0,0,1,0,0,0,0,1,0,0,i=n5(n.d[0],0,null)||0,0,1];case"translateZ":return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,a=n5(n.d[0],0,null)||0,1];case"translate3d":return[1,0,0,0,0,1,0,0,0,0,1,0,r=n5(n.d[0],0,null)||0,i=n5(n.d[1],0,null)||0,a=n5(n.d[2],0,null)||0,1];case"perspective":var h=n5(n.d[0],0,null)||0;return[1,0,0,0,0,1,0,0,0,0,1,h?-1/h:0,0,0,0,1];case"matrix":return[n.d[0].value,n.d[1].value,0,0,n.d[2].value,n.d[3].value,0,0,0,0,1,0,n.d[4].value,n.d[5].value,0,1];case"matrix3d":return n.d.map(function(n){return n.value;});}}function rO(n,r){return[n[0]*r[0]+n[4]*r[1]+n[8]*r[2]+n[12]*r[3],n[1]*r[0]+n[5]*r[1]+n[9]*r[2]+n[13]*r[3],n[2]*r[0]+n[6]*r[1]+n[10]*r[2]+n[14]*r[3],n[3]*r[0]+n[7]*r[1]+n[11]*r[2]+n[15]*r[3],n[0]*r[4]+n[4]*r[5]+n[8]*r[6]+n[12]*r[7],n[1]*r[4]+n[5]*r[5]+n[9]*r[6]+n[13]*r[7],n[2]*r[4]+n[6]*r[5]+n[10]*r[6]+n[14]*r[7],n[3]*r[4]+n[7]*r[5]+n[11]*r[6]+n[15]*r[7],n[0]*r[8]+n[4]*r[9]+n[8]*r[10]+n[12]*r[11],n[1]*r[8]+n[5]*r[9]+n[9]*r[10]+n[13]*r[11],n[2]*r[8]+n[6]*r[9]+n[10]*r[10]+n[14]*r[11],n[3]*r[8]+n[7]*r[9]+n[11]*r[10]+n[15]*r[11],n[0]*r[12]+n[4]*r[13]+n[8]*r[14]+n[12]*r[15],n[1]*r[12]+n[5]*r[13]+n[9]*r[14]+n[13]*r[15],n[2]*r[12]+n[6]*r[13]+n[10]*r[14]+n[14]*r[15],n[3]*r[12]+n[7]*r[13]+n[11]*r[14]+n[15]*r[15]];}function rM(n){var r=[0,0,0],i=[1,1,1],a=[0,0,0],o=[0,0,0,1],s=[0,0,0,1];return!function(n,r,i,a,o,s){if(!(!function(n,r){var i=r[15];if(0===i)return!1;for(var a=1/i,o=0;o<16;o++)n[o]=r[o]*a;return!0;}(tT,n)||(et.copy(tA,tT),tA[3]=0,tA[7]=0,tA[11]=0,tA[15]=1,1e-8>Math.abs(et.determinant(tA))))){var l=tT[3],u=tT[7],c=tT[11],f=tT[12],d=tT[13],h=tT[14],p=tT[15];if(0!==l||0!==u||0!==c){if(tC[0]=l,tC[1]=u,tC[2]=c,tC[3]=p,!et.invert(tA,tA))return;et.transpose(tA,tA),J.transformMat4(o,tC,tA);}else o[0]=o[1]=o[2]=0,o[3]=1;if(r[0]=f,r[1]=d,r[2]=h,tO[0][0]=tT[0],tO[0][1]=tT[1],tO[0][2]=tT[2],tO[1][0]=tT[4],tO[1][1]=tT[5],tO[1][2]=tT[6],tO[2][0]=tT[8],tO[2][1]=tT[9],tO[2][2]=tT[10],i[0]=K.length(tO[0]),K.normalize(tO[0],tO[0]),a[0]=K.dot(tO[0],tO[1]),tR(tO[1],tO[1],tO[0],1,-a[0]),i[1]=K.length(tO[1]),K.normalize(tO[1],tO[1]),a[0]/=i[1],a[1]=K.dot(tO[0],tO[2]),tR(tO[2],tO[2],tO[0],1,-a[1]),a[2]=K.dot(tO[1],tO[2]),tR(tO[2],tO[2],tO[1],1,-a[2]),i[2]=K.length(tO[2]),K.normalize(tO[2],tO[2]),a[1]/=i[2],a[2]/=i[2],K.cross(tM,tO[1],tO[2]),0>K.dot(tO[0],tM))for(var m=0;m<3;m++)i[m]*=-1,tO[m][0]*=-1,tO[m][1]*=-1,tO[m][2]*=-1;s[0]=.5*Math.sqrt(Math.max(1+tO[0][0]-tO[1][1]-tO[2][2],0)),s[1]=.5*Math.sqrt(Math.max(1-tO[0][0]+tO[1][1]-tO[2][2],0)),s[2]=.5*Math.sqrt(Math.max(1-tO[0][0]-tO[1][1]+tO[2][2],0)),s[3]=.5*Math.sqrt(Math.max(1+tO[0][0]+tO[1][1]+tO[2][2],0)),tO[2][1]>tO[1][2]&&(s[0]=-s[0]),tO[0][2]>tO[2][0]&&(s[1]=-s[1]),tO[1][0]>tO[0][1]&&(s[2]=-s[2]);}}(0===n.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:n.map(rC).reduce(rO),r,i,a,o,s),[[r,i,a,s,o]];}var rR=function(){function n(n,r){for(var i=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],a=0;a<4;a++)for(var o=0;o<4;o++)for(var s=0;s<4;s++)i[a][o]+=r[a][s]*n[s][o];return i;}return function(r,i,a,o,s){for(var l,u=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],c=0;c<4;c++)u[c][3]=s[c];for(var f=0;f<3;f++)for(var d=0;d<3;d++)u[3][f]+=r[d]*u[d][f];var h=o[0],p=o[1],m=o[2],g=o[3],v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];v[0][0]=1-2*(p*p+m*m),v[0][1]=2*(h*p-m*g),v[0][2]=2*(h*m+p*g),v[1][0]=2*(h*p+m*g),v[1][1]=1-2*(h*h+m*m),v[1][2]=2*(p*m-h*g),v[2][0]=2*(h*m-p*g),v[2][1]=2*(p*m+h*g),v[2][2]=1-2*(h*h+p*p),u=n(u,v);var y=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];a[2]&&(y[2][1]=a[2],u=n(u,y)),a[1]&&(y[2][1]=0,y[2][0]=a[0],u=n(u,y)),a[0]&&(y[2][0]=0,y[1][0]=a[0],u=n(u,y));for(var _=0;_<3;_++)for(var b=0;b<3;b++)u[_][b]*=i[_];return 0===(l=u)[0][2]&&0===l[0][3]&&0===l[1][2]&&0===l[1][3]&&0===l[2][0]&&0===l[2][1]&&1===l[2][2]&&0===l[2][3]&&0===l[3][2]&&1===l[3][3]?[u[0][0],u[0][1],u[1][0],u[1][1],u[3][0],u[3][1]]:u[0].concat(u[1],u[2],u[3]);};}();function rP(n){return n.toFixed(6).replace(".000000","");}function rk(n,r){var i,a;return(n.decompositionPair!==r&&(n.decompositionPair=r,i=rM(n)),r.decompositionPair!==n&&(r.decompositionPair=n,a=rM(r)),null===i[0]||null===a[0])?[[!1],[!0],function(i){return i?r[0].d:n[0].d;}]:(i[0].push(0),a[0].push(1),[i,a,function(n){var r=function(n,r,i){var a=function(n,r){for(var i=0,a=0;a<n.length;a++)i+=n[a]*r[a];return i;}(n,r);a=(0,eg.default)(a,-1,1);var o=[];if(1===a)o=n;else for(var s=Math.acos(a),l=1*Math.sin(i*s)/Math.sqrt(1-a*a),u=0;u<4;u++)o.push(n[u]*(Math.cos(i*s)-a*l)+r[u]*l);return o;}(i[0][3],a[0][3],n[5]);return rR(n[0],n[1],n[2],r,n[4]).map(rP).join(",");}]);}function rI(n){return n.replace(/[XY]/,"");}function rL(n){return n.replace(/(X|Y|Z|3d)?$/,"3d");}function rN(n,r,i){var a=!1;if(!n.length||!r.length){n.length||(a=!0,n=r,r=[]);for(var o=0;o<n.length;o++)!function(){var i=n[o],a=i.t,s=i.d,l="scale"===a.substring(0,5)?1:0;r.push({t:a,d:s.map(function(n){return"number"==typeof n?nL(l):nL(l,n.unit);})});}();}var s=[],l=[],u=[];if(n.length!==r.length){var c=rk(n,r);s=[c[0]],l=[c[1]],u=[["matrix",[c[2]]]];}else for(var f=0;f<n.length;f++){var d=n[f].t,h=r[f].t,p=n[f].d,m=r[f].d,g=rw[d],v=rw[h],y=void 0;if("perspective"===d&&"perspective"===h||("matrix"===d||"matrix3d"===d)&&("matrix"===h||"matrix3d"===h)){var _=rk([n[f]],[r[f]]);s.push(_[0]),l.push(_[1]),u.push(["matrix",[_[2]]]);continue;}if(d===h)y=d;else if(g[2]&&v[2]&&rI(d)===rI(h))y=rI(d),p=g[2](p),m=v[2](m);else if(g[1]&&v[1]&&rL(d)===rL(h))y=rL(d),p=g[1](p),m=v[1](m);else{var b=rk(n,r);s=[b[0]],l=[b[1]],u=[["matrix",[b[2]]]];break;}for(var x=[],E=[],w=[],S=0;S<p.length;S++){var T=function(n,r,i,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s="",l=n.value||0,u=r.value||0,c=nS(n.unit),f=n.convertTo(c),d=r.convertTo(c);return f&&d?(l=f.value,u=d.value,s=nv(n.unit)):(nT.isLength(n.unit)||nT.isLength(r.unit))&&(l=n5(n,o,i),u=n5(r,o,i),s="px"),[l,u,function(n){return a&&(n=Math.max(n,0)),n+s;}];}(p[S],m[S],i,!1,S);x[S]=T[0],E[S]=T[1],w.push(T[2]);}s.push(x),l.push(E),u.push([y,w]);}if(a){var A=s;s=l,l=A;}return[s,l,function(n){return n.map(function(n,r){var i=n.map(function(n,i){return u[r][1][i](n);}).join(",");return"matrix"===u[r][0]&&16===i.split(",").length&&(u[r][0]="matrix3d"),"matrix3d"===u[r][0]&&6===i.split(",").length&&(u[r][0]="matrix"),"".concat(u[r][0],"(").concat(i,")");}).join(" ");}];}var rD=ns(function(n){if((0,ed.default)(n)){if("text-anchor"===n)return[nL(0,"px"),nL(0,"px")];var r=n.split(" ");return(1===r.length&&("top"===r[0]||"bottom"===r[0]?(r[1]=r[0],r[0]="center"):r[1]="center"),2!==r.length)?null:[n0(rF(r[0])),n0(rF(r[1]))];}return[nL(n[0]||0,"px"),nL(n[1]||0,"px")];});function rF(n){return"center"===n?"50%":"left"===n||"top"===n?"0%":"right"===n||"bottom"===n?"100%":n;}var rB=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:tj.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:tj.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:tj.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:tj.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:tj.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:tj.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:tj.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:tj.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:tj.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:tj.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:tj.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:tj.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:tj.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:tj.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:tj.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:tj.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:tj.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:tj.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:tj.FILTER},{n:"clipPath",syntax:tj.DEFINED_PATH},{n:"textPath",syntax:tj.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:tj.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:tj.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:tj.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:tj.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:tj.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:tj.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:tj.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:tj.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:tj.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:tj.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:tj.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:tj.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:tj.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:tj.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:tj.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:tj.COORDINATE},{n:"y1",int:!0,l:!0,syntax:tj.COORDINATE},{n:"z1",int:!0,l:!0,syntax:tj.COORDINATE},{n:"x2",int:!0,l:!0,syntax:tj.COORDINATE},{n:"y2",int:!0,l:!0,syntax:tj.COORDINATE},{n:"z2",int:!0,l:!0,syntax:tj.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:tj.PATH,p:50},{n:"points",int:!0,l:!0,syntax:tj.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:tj.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:tj.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:tj.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:tj.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:tj.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:tj.NUMBER,d:function(n){return n===e7.PATH||n===e7.POLYGON||n===e7.POLYLINE?"4":"10";}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:tj.MARKER},{n:"markerEnd",syntax:tj.MARKER},{n:"markerMid",syntax:tj.MARKER},{n:"markerStartOffset",syntax:tj.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:tj.LENGTH,l:!0,int:!0,d:"0"}],rj=new Set(rB.filter(function(n){return!!n.l;}).map(function(n){return n.n;})),rz={},rU=(0,j.default)(function n(r){var i=this;(0,F.default)(this,n),this.runtime=r,rB.forEach(function(n){i.registerMetadata(n);});},[{key:"registerMetadata",value:function(n){[n.n].concat((0,U.default)(n.a||[])).forEach(function(r){rz[r]=n;});}},{key:"getPropertySyntax",value:function(n){return this.runtime.CSSPropertySyntaxFactory[n];}},{key:"processProperties",value:function(n,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[],memoize:!0};Object.assign(n.attributes,r);var o=n.parsedStyle.clipPath,s=n.parsedStyle.offsetPath;!function(n,r){var i=rV(n);for(var a in r)i.has(a)&&(n.parsedStyle[a]=r[a]);}(n,r);var l=!!a.forceUpdateGeometry;if(!l){for(var u in r)if(rj.has(u)){l=!0;break;}}var c=rV(n);c.has("fill")&&r.fill&&(n.parsedStyle.fill=n$(r.fill)),c.has("stroke")&&r.stroke&&(n.parsedStyle.stroke=n$(r.stroke)),c.has("shadowColor")&&r.shadowColor&&(n.parsedStyle.shadowColor=n$(r.shadowColor)),c.has("filter")&&r.filter&&(n.parsedStyle.filter=function(){var n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("none"===(r=r.toLowerCase().trim()))return[];for(var i=/\s*([\w-]+)\(([^)]*)\)/g,a=[],o=0;(n=i.exec(r))&&n.index===o;)if(o=n.index+n[0].length,n6.indexOf(n[1])>-1&&a.push({name:n[1],params:n[2].split(" ").map(function(n){return nZ(/deg|rad|grad|turn|px|%/g,n)||n$(n);})}),i.lastIndex===r.length)return a;return[];}(r.filter)),c.has("radius")&&!(0,ep.default)(r.radius)&&(n.parsedStyle.radius=n4(r.radius,4)),c.has("lineDash")&&!(0,ep.default)(r.lineDash)&&(n.parsedStyle.lineDash=n4(r.lineDash,"even")),c.has("points")&&r.points&&(n.parsedStyle.points=(i=r.points,{points:(0,ed.default)(i)?i.split(" ").map(function(n){var r=n.split(","),i=(0,q.default)(r,2),a=i[0],o=i[1];return[Number(a),Number(o)];}):i,totalLength:0,segments:[]})),c.has("d")&&""===r.d&&(n.parsedStyle.d=(0,N.default)({},tB)),c.has("d")&&r.d&&(n.parsedStyle.d=rv(r.d)),c.has("textTransform")&&r.textTransform&&this.runtime.CSSPropertySyntaxFactory[tj.TEXT_TRANSFORM].calculator(null,null,{value:r.textTransform},n,null),c.has("clipPath")&&!(0,eN.default)(r.clipPath)&&this.runtime.CSSPropertySyntaxFactory[tj.DEFINED_PATH].calculator("clipPath",o,r.clipPath,n,this.runtime),c.has("offsetPath")&&r.offsetPath&&this.runtime.CSSPropertySyntaxFactory[tj.DEFINED_PATH].calculator("offsetPath",s,r.offsetPath,n,this.runtime),c.has("transform")&&r.transform&&(n.parsedStyle.transform=rT(r.transform)),c.has("transformOrigin")&&r.transformOrigin&&(n.parsedStyle.transformOrigin=rD(r.transformOrigin)),c.has("markerStart")&&r.markerStart&&(n.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory[tj.MARKER].calculator(null,r.markerStart,r.markerStart,null,null)),c.has("markerEnd")&&r.markerEnd&&(n.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory[tj.MARKER].calculator(null,r.markerEnd,r.markerEnd,null,null)),c.has("markerMid")&&r.markerMid&&(n.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory[tj.MARKER].calculator("",r.markerMid,r.markerMid,null,null)),c.has("zIndex")&&!(0,ep.default)(r.zIndex)&&this.runtime.CSSPropertySyntaxFactory[tj.Z_INDEX].postProcessor(n),c.has("offsetDistance")&&!(0,ep.default)(r.offsetDistance)&&this.runtime.CSSPropertySyntaxFactory[tj.OFFSET_DISTANCE].postProcessor(n),c.has("transform")&&r.transform&&this.runtime.CSSPropertySyntaxFactory[tj.TRANSFORM].postProcessor(n),c.has("transformOrigin")&&r.transformOrigin&&this.runtime.CSSPropertySyntaxFactory[tj.TRANSFORM_ORIGIN].postProcessor(n),l&&(n.geometry.dirty=!0,n.renderable.boundsDirty=!0,n.renderable.renderBoundsDirty=!0,a.forceUpdateGeometry||this.runtime.sceneGraphService.dirtifyToRoot(n));}},{key:"updateGeometry",value:function(n){var r=n.nodeName,i=this.runtime.geometryUpdaterFactory[r];if(i){var a=n.geometry;a.contentBounds||(a.contentBounds=new tl),a.renderBounds||(a.renderBounds=new tl);var o=n.parsedStyle,s=i.update(o,n),l=s.cx,u=s.cy,c=s.cz,f=s.hwidth,d=void 0===f?0:f,h=s.hheight,p=void 0===h?0:h,m=s.hdepth,g=[Math.abs(d),Math.abs(p),void 0===m?0:m],v=o.stroke,y=o.lineWidth,_=o.increasedLineWidthForHitTesting,b=o.shadowType,x=void 0===b?"outer":b,E=o.shadowColor,w=o.filter,S=o.transformOrigin,T=[void 0===l?0:l,void 0===u?0:u,void 0===c?0:c];a.contentBounds.update(T,g);var A=r===e7.POLYLINE||r===e7.POLYGON||r===e7.PATH?Math.SQRT2:.5;if(v&&!v.isNone){var C=(((void 0===y?1:y)||0)+((void 0===_?0:_)||0))*A;g[0]+=C,g[1]+=C;}if(a.renderBounds.update(T,g),E&&x&&"inner"!==x){var O=a.renderBounds,M=O.min,R=O.max,P=o.shadowBlur,k=o.shadowOffsetX,I=o.shadowOffsetY,L=P||0,N=k||0,D=I||0,F=M[0]-L+N,B=R[0]+L+N,j=M[1]-L+D,z=R[1]+L+D;M[0]=Math.min(M[0],F),R[0]=Math.max(R[0],B),M[1]=Math.min(M[1],j),R[1]=Math.max(R[1],z),a.renderBounds.setMinMax(M,R);}(void 0===w?[]:w).forEach(function(n){var r=n.name,i=n.params;if("blur"===r){var o=i[0].value;a.renderBounds.update(a.renderBounds.center,K.add(a.renderBounds.halfExtents,a.renderBounds.halfExtents,[o,o,0]));}else if("drop-shadow"===r){var s=i[0].value,l=i[1].value,u=i[2].value,c=a.renderBounds,f=c.min,d=c.max,h=f[0]-u+s,p=d[0]+u+s,m=f[1]-u+l,g=d[1]+u+l;f[0]=Math.min(f[0],h),d[0]=Math.max(d[0],p),f[1]=Math.min(f[1],m),d[1]=Math.max(d[1],g),a.renderBounds.setMinMax(f,d);}}),n.geometry.dirty=!1;var U=p<0,V=(d<0?-1:1)*(S?n5(S[0],0,n,!0):0),G=(U?-1:1)*(S?n5(S[1],1,n,!0):0);(V||G)&&n.setOrigin(V,G);}}},{key:"updateSizeAttenuation",value:function(n,r){n.style.isSizeAttenuation?(n.style.rawLineWidth||(n.style.rawLineWidth=n.style.lineWidth),n.style.lineWidth=(n.style.rawLineWidth||1)/r,n.nodeName===e7.CIRCLE&&(n.style.rawR||(n.style.rawR=n.style.r),n.style.r=(n.style.rawR||1)/r)):(n.style.rawLineWidth&&(n.style.lineWidth=n.style.rawLineWidth,delete n.style.rawLineWidth),n.nodeName===e7.CIRCLE&&n.style.rawR&&(n.style.r=n.style.rawR,delete n.style.rawR));}}]);function rV(n){return n.constructor.PARSED_STYLE_LIST;}var rG=(0,j.default)(function n(){(0,F.default)(this,n),this.mixer=re;},[{key:"calculator",value:function(n,r,i,a){return n3(i);}}]),rH=(0,j.default)(function n(){(0,F.default)(this,n);},[{key:"calculator",value:function(n,r,i,a,o){return i instanceof nE&&(i=null),o.sceneGraphService.updateDisplayObjectDependency(n,r,i,a),"clipPath"===n&&a.forEach(function(n){0===n.childNodes.length&&o.sceneGraphService.dirtifyToRoot(n);}),i;}}]),rW=(0,j.default)(function n(){(0,F.default)(this,n),this.parser=n$,this.mixer=nY;},[{key:"calculator",value:function(n,r,i,a){return i instanceof nE?"none"===i.value?nP:nk:i;}}]),rX=(0,j.default)(function n(){(0,F.default)(this,n);},[{key:"calculator",value:function(n,r,i){return i instanceof nE?[]:i;}}]);function rq(n){var r=n.parsedStyle.fontSize;return(0,ep.default)(r)?null:r;}var r$=(0,j.default)(function n(){(0,F.default)(this,n),this.mixer=re;},[{key:"calculator",value:function(n,r,i,a,o){if((0,eu.default)(i))return i;if(!nT.isRelativeUnit(i.unit))return i.value;if(i.unit===nl.kPercentage)return 0;if(i.unit===nl.kEms){if(a.parentNode){var s,l=rq(a.parentNode);if(l)return l*i.value;}return 0;}if(i.unit===nl.kRems){if(null!=a&&null!==(s=a.ownerDocument)&&void 0!==s&&s.documentElement){var u=rq(a.ownerDocument.documentElement);if(u)return u*i.value;}return 0;}}}]),rY=(0,j.default)(function n(){(0,F.default)(this,n),this.mixer=rn;},[{key:"calculator",value:function(n,r,i){return i.map(function(n){return n.value;});}}]),rZ=(0,j.default)(function n(){(0,F.default)(this,n),this.mixer=rn;},[{key:"calculator",value:function(n,r,i){return i.map(function(n){return n.value;});}}]),rK=(0,j.default)(function n(){(0,F.default)(this,n);},[{key:"calculator",value:function(n,r,i,a){i instanceof nE&&(i=null);var o,s=null===(o=i)||void 0===o?void 0:o.cloneNode(!0);return s&&(s.style.isMarker=!0),s;}}]),rQ=(0,j.default)(function n(){(0,F.default)(this,n),this.mixer=re;},[{key:"calculator",value:function(n,r,i){return i.value;}}]),rJ=(0,j.default)(function n(){(0,F.default)(this,n),this.mixer=rt(0,1);},[{key:"calculator",value:function(n,r,i){return i.value;}},{key:"postProcessor",value:function(n){var r=n.parsedStyle,i=r.offsetPath,a=r.offsetDistance;if(i){var o=i.nodeName;if(o===e7.LINE||o===e7.PATH||o===e7.POLYLINE){var s=i.getPoint(a);s&&n.setLocalPosition(s.x,s.y);}}}}]),r0=(0,j.default)(function n(){(0,F.default)(this,n),this.mixer=rt(0,1);},[{key:"calculator",value:function(n,r,i){return i.value;}}]),r1=(0,j.default)(function n(){(0,F.default)(this,n),this.parser=rv,this.mixer=ry;},[{key:"calculator",value:function(n,r,i){return i instanceof nE&&"unset"===i.value?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new th(0,0,0,0)}:i;}}]),r2=(0,j.default)(function n(){(0,F.default)(this,n),this.mixer=r_;}),r3=function(n){function r(){var n;(0,F.default)(this,r);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=(0,G.default)(this,r,[].concat(a))).mixer=rt(0,1/0),n;}return(0,W.default)(r,n),(0,j.default)(r);}(r$),r4=(0,j.default)(function n(){(0,F.default)(this,n);},[{key:"calculator",value:function(n,r,i,a){return i instanceof nE?"unset"===i.value?"":i.value:"".concat(i);}},{key:"postProcessor",value:function(n){n.nodeValue="".concat(n.parsedStyle.text)||"";}}]),r5=(0,j.default)(function n(){(0,F.default)(this,n);},[{key:"calculator",value:function(n,r,i,a){var o=a.getAttribute("text");if(o){var s=o;"capitalize"===i.value?s=o.charAt(0).toUpperCase()+o.slice(1):"lowercase"===i.value?s=o.toLowerCase():"uppercase"===i.value&&(s=o.toUpperCase()),a.parsedStyle.text=s;}return i.value;}}]),r6=new WeakMap,r8="undefined"!=typeof window&&void 0!==window.document;function r7(n,r){var i=Number(n.parsedStyle.zIndex||0),a=Number(r.parsedStyle.zIndex||0);if(i===a){var o=n.parentNode;if(o){var s=o.childNodes||[];return s.indexOf(n)-s.indexOf(r);}}return i-a;}function r9(n){var r,i=n;do{if(null===(r=i.parsedStyle)||void 0===r?void 0:r.clipPath)return i;i=i.parentElement;}while(null!==i)return null;}function ie(n,r,i){r8&&n.style&&(n.style.width=r+"px",n.style.height=i+"px");}function it(n,r){if(r8)return document.defaultView.getComputedStyle(n,null).getPropertyValue(r);}var ir={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},ii="object"==typeof performance&&performance.now?performance:Date;function ia(n){return n.nodeName===e7.FRAGMENT||n.getRootNode().nodeName===e7.FRAGMENT;}function io(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auto",r=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,a=!1,o=!1,s=!!r&&!r.isNone,l=!!i&&!i.isNone;return"visiblepainted"===n||"painted"===n||"auto"===n?(a=s,o=l):"visiblefill"===n||"fill"===n?a=!0:"visiblestroke"===n||"stroke"===n?o=!0:("visible"===n||"all"===n)&&(a=!0,o=!0),[a,o];}var is=1,il="object"==typeof self&&self.self===self?self:"object"==typeof I&&I.global===I?I:{},iu=Date.now(),ic={},id=Date.now(),ih=function(n){if("function"!=typeof n)throw TypeError("".concat(n," is not a function"));var r=Date.now(),i=r-id,a=is++;return ic[a]=n,Object.keys(ic).length>1||setTimeout(function(){id=r;var n=ic;ic={},Object.keys(n).forEach(function(r){return n[r](il.performance&&"function"==typeof il.performance.now?il.performance.now():Date.now()-iu);});},i>16?0:16-i),a;},ip=function(n){return"string"!=typeof n?ih:""===n?il.requestAnimationFrame:il["".concat(n,"RequestAnimationFrame")];},im=function(n,r){for(var i=0;void 0!==n[i];){if(r(n[i]))return n[i];i+=1;}}(["","webkit","moz","ms","o"],function(n){return!!ip(n);}),ig=ip(im),iv="string"!=typeof im?function(n){delete ic[n];}:""===im?il.cancelAnimationFrame:il["".concat(im,"CancelAnimationFrame")]||il["".concat(im,"CancelRequestAnimationFrame")];il.requestAnimationFrame=ig,il.cancelAnimationFrame=iv;var iy=(0,j.default)(function n(){(0,F.default)(this,n),this.callbacks=[];},[{key:"getCallbacksNum",value:function(){return this.callbacks.length;}},{key:"tapPromise",value:function(n,r){this.callbacks.push(r);}},{key:"promise",value:function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return Promise.all(this.callbacks.map(function(n){return n.apply(void 0,r);}));}}]),i_=(0,j.default)(function n(){(0,F.default)(this,n),this.callbacks=[];},[{key:"tapPromise",value:function(n,r){this.callbacks.push(r);}},{key:"promise",value:(x=(0,e1.default)((0,eJ.default)().mark(function n(){var r,i,a,o,s=arguments;return(0,eJ.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.callbacks.length){n.next=14;break;}return n.next=3,(r=this.callbacks)[0].apply(r,s);case 3:i=n.sent,a=0;case 5:if(!(a<this.callbacks.length-1)){n.next=13;break;}return o=this.callbacks[a],n.next=9,o(i);case 9:i=n.sent;case 10:a++,n.next=5;break;case 13:return n.abrupt("return",i);case 14:return n.abrupt("return",null);case 15:case"end":return n.stop();}},n,this);})),function(){return x.apply(this,arguments);})}]),ib=(0,j.default)(function n(){(0,F.default)(this,n),this.callbacks=[];},[{key:"tap",value:function(n,r){this.callbacks.push(r);}},{key:"call",value:function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=arguments;this.callbacks.forEach(function(n){n.apply(void 0,a);});}}]),ix=(0,j.default)(function n(){(0,F.default)(this,n),this.callbacks=[];},[{key:"tap",value:function(n,r){this.callbacks.push(r);}},{key:"call",value:function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];if(this.callbacks.length){for(var a=arguments,o=this.callbacks[0].apply(void 0,a),s=0;s<this.callbacks.length-1;s++)o=(0,this.callbacks[s])(o);return o;}return null;}}]),iE=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],iw=/([\"\'])[^\'\"]+\1/;function iS(n,r,i){return et.identity(n),n[4]=Math.tan(r),n[1]=Math.tan(i),n;}var iT=et.create(),iA=et.create(),iC={scale:function(n){et.fromScaling(iT,[n[0].value,n[1].value,1]);},scaleX:function(n){et.fromScaling(iT,[n[0].value,1,1]);},scaleY:function(n){et.fromScaling(iT,[1,n[0].value,1]);},scaleZ:function(n){et.fromScaling(iT,[1,1,n[0].value]);},scale3d:function(n){et.fromScaling(iT,[n[0].value,n[1].value,n[2].value]);},translate:function(n){et.fromTranslation(iT,[n[0].value,n[1].value,0]);},translateX:function(n){et.fromTranslation(iT,[n[0].value,0,0]);},translateY:function(n){et.fromTranslation(iT,[0,n[0].value,0]);},translateZ:function(n){et.fromTranslation(iT,[0,0,n[0].value]);},translate3d:function(n){et.fromTranslation(iT,[n[0].value,n[1].value,n[2].value]);},rotate:function(n){et.fromZRotation(iT,n3(n[0])*t_);},rotateX:function(n){et.fromXRotation(iT,n3(n[0])*t_);},rotateY:function(n){et.fromYRotation(iT,n3(n[0])*t_);},rotateZ:function(n){et.fromZRotation(iT,n3(n[0])*t_);},rotate3d:function(n){et.fromRotation(iT,n3(n[3])*t_,[n[0].value,n[1].value,n[2].value]);},skew:function(n){iS(iT,n[0].value*t_,n[1].value*t_);},skewX:function(n){iS(iT,n[0].value*t_,0);},skewY:function(n){iS(iT,0,n[0].value*t_);},matrix:function(n){et.set(iT,n[0].value,n[1].value,0,0,n[2].value,n[3].value,0,0,0,0,1,0,n[4].value,n[5].value,0,1);},matrix3d:function(n){et.set.apply(et,[iT].concat((0,U.default)(n.map(function(n){return n.value;}))));}},iO=K.fromValues(1,1,1),iM=K.create(),iR={translate:function(n,r){aE.sceneGraphService.setLocalScale(n,iO,!1),aE.sceneGraphService.setLocalEulerAngles(n,iM,void 0,void 0,!1),aE.sceneGraphService.setLocalPosition(n,[r[0].value,r[1].value,0],!1),aE.sceneGraphService.dirtifyLocal(n,n.transformable);}};function iP(n,r){if(n.length){if(1===n.length&&iR[n[0].t]){iR[n[0].t](r,n[0].d);return;}for(var i=et.identity(iA),a=0;a<n.length;a++){var o=n[a],s=o.t,l=o.d,u=iC[s];u&&(u(l),et.mul(i,i,iT));}r.setLocalTransform(i);}else r.resetLocalTransform();return r.getLocalTransform();}var ik=(0,j.default)(function n(){(0,F.default)(this,n),this.parser=rA,this.mixer=rN;},[{key:"calculator",value:function(n,r,i,a){return i instanceof nE?[]:i;}},{key:"postProcessor",value:function(n){iP(n.parsedStyle.transform,n);}}]),iI=(0,j.default)(function n(){(0,F.default)(this,n);},[{key:"postProcessor",value:function(n){var r=n.parsedStyle.transformOrigin;r[0].unit===nl.kPixels&&r[1].unit===nl.kPixels?n.setOrigin(r[0].value,r[1].value):n.getGeometryBounds();}}]),iL=(0,j.default)(function n(){(0,F.default)(this,n);},[{key:"calculator",value:function(n,r,i,a){return i.value;}},{key:"postProcessor",value:function(n){if(n.parentNode){var r=n.parentNode,i=r.renderable,a=r.sortable;i&&(i.dirty=!0),a&&(a.dirty=!0,a.dirtyReason=tF.Z_INDEX_CHANGED);}}}]),iN=(0,j.default)(function n(){(0,F.default)(this,n);},[{key:"update",value:function(n,r){var i=n.cx,a=n.cy,o=n.r,s=void 0===o?0:o;return{cx:void 0===i?0:i,cy:void 0===a?0:a,hwidth:s,hheight:s};}}]),iD=(0,j.default)(function n(){(0,F.default)(this,n);},[{key:"update",value:function(n,r){var i=n.cx,a=n.cy,o=n.rx,s=n.ry;return{cx:void 0===i?0:i,cy:void 0===a?0:a,hwidth:void 0===o?0:o,hheight:void 0===s?0:s};}}]),iF=(0,j.default)(function n(){(0,F.default)(this,n);},[{key:"update",value:function(n){var r=n.x1,i=n.y1,a=n.x2,o=n.y2,s=Math.min(r,a),l=Math.min(i,o),u=(Math.max(r,a)-s)/2,c=(Math.max(i,o)-l)/2;return{cx:s+u,cy:l+c,hwidth:u,hheight:c};}}]),iB=(0,j.default)(function n(){(0,F.default)(this,n);},[{key:"update",value:function(n){var r=n.d.rect,i=r.x,a=r.y,o=r.width,s=r.height,l=o/2,u=s/2;return{cx:i+l,cy:a+u,hwidth:l,hheight:u};}}]),ij=(0,j.default)(function n(){(0,F.default)(this,n);},[{key:"update",value:function(n){if(n.points&&(0,eF.default)(n.points.points)){var r=n.points.points,i=Math.min.apply(Math,(0,U.default)(r.map(function(n){return n[0];}))),a=Math.max.apply(Math,(0,U.default)(r.map(function(n){return n[0];}))),o=Math.min.apply(Math,(0,U.default)(r.map(function(n){return n[1];}))),s=Math.max.apply(Math,(0,U.default)(r.map(function(n){return n[1];}))),l=(a-i)/2,u=(s-o)/2;return{cx:i+l,cy:o+u,hwidth:l,hheight:u};}return{cx:0,cy:0,hwidth:0,hheight:0};}}]),iz=(0,j.default)(function n(){(0,F.default)(this,n);},[{key:"update",value:function(n,r){var i=n.x,a=n.y,o=n.src,s=n.width,l=n.height,u=void 0===s?0:s,c=void 0===l?0:l;return!o||(0,ed.default)(o)||(u||(u=o.width,n.width=u),c||(c=o.height,n.height=c)),{cx:(void 0===i?0:i)+u/2,cy:(void 0===a?0:a)+c/2,hwidth:u/2,hheight:c/2};}}]),iU=(0,j.default)(function n(r){(0,F.default)(this,n),this.globalRuntime=r;},[{key:"isReadyToMeasure",value:function(n,r){return n.text;}},{key:"update",value:function(n,r){var i,a=n.text,o=n.textAlign,s=void 0===o?"start":o,l=n.lineWidth,u=void 0===l?1:l,c=n.textBaseline,f=void 0===c?"alphabetic":c,d=n.dx,h=void 0===d?0:d,p=n.dy,m=void 0===p?0:p,g=n.x,v=n.y;if(!this.isReadyToMeasure(n,r))return n.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var y=((null==r||null===(i=r.ownerDocument)||void 0===i||null===(i=i.defaultView)||void 0===i?void 0:i.getConfig())||{}).offscreenCanvas,_=this.globalRuntime.textService.measureText(a,n,y);n.metrics=_;var b=_.width,x=_.height,E=b/2,w=x/2,S=(void 0===g?0:g)+E;"center"===s||"middle"===s?S+=u/2-E:("right"===s||"end"===s)&&(S+=u-2*E);var T=(void 0===v?0:v)-w;return"middle"===f?T+=w:"top"===f||"hanging"===f?T+=2*w:"alphabetic"===f||("bottom"===f||"ideographic"===f)&&(T+=0),h&&(S+=h),m&&(T+=m),{cx:S,cy:T,hwidth:E,hheight:w};}}]),iV=(0,j.default)(function n(){(0,F.default)(this,n);},[{key:"update",value:function(n,r){return{cx:0,cy:0,hwidth:0,hheight:0};}}]),iG=(0,j.default)(function n(){(0,F.default)(this,n);},[{key:"update",value:function(n,r){var i=n.x,a=n.y,o=n.width,s=void 0===o?0:o,l=n.height,u=void 0===l?0:l;return{cx:(void 0===i?0:i)+s/2,cy:(void 0===a?0:a)+u/2,hwidth:s/2,hheight:u/2};}}]),iH=(0,j.default)(function n(r){(0,F.default)(this,n),this.eventPhase=n.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new td,this.page=new td,this.canvas=new td,this.viewport=new td,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=r;},[{key:"name",get:function(){return this.type;}},{key:"layerX",get:function(){return this.layer.x;}},{key:"layerY",get:function(){return this.layer.y;}},{key:"pageX",get:function(){return this.page.x;}},{key:"pageY",get:function(){return this.page.y;}},{key:"x",get:function(){return this.canvas.x;}},{key:"y",get:function(){return this.canvas.y;}},{key:"canvasX",get:function(){return this.canvas.x;}},{key:"canvasY",get:function(){return this.canvas.y;}},{key:"viewportX",get:function(){return this.viewport.x;}},{key:"viewportY",get:function(){return this.viewport.y;}},{key:"composedPath",value:function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path;}},{key:"propagationPath",get:function(){return this.composedPath();}},{key:"preventDefault",value:function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0;}},{key:"stopImmediatePropagation",value:function(){this.propagationImmediatelyStopped=!0;}},{key:"stopPropagation",value:function(){this.propagationStopped=!0;}},{key:"initEvent",value:function(){}},{key:"initUIEvent",value:function(){}},{key:"clone",value:function(){throw Error(tp);}}]),iW=function(n){function r(){var n;(0,F.default)(this,r);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=(0,G.default)(this,r,[].concat(a))).client=new td,n.movement=new td,n.offset=new td,n.global=new td,n.screen=new td,n;}return(0,W.default)(r,n),(0,j.default)(r,[{key:"clientX",get:function(){return this.client.x;}},{key:"clientY",get:function(){return this.client.y;}},{key:"movementX",get:function(){return this.movement.x;}},{key:"movementY",get:function(){return this.movement.y;}},{key:"offsetX",get:function(){return this.offset.x;}},{key:"offsetY",get:function(){return this.offset.y;}},{key:"globalX",get:function(){return this.global.x;}},{key:"globalY",get:function(){return this.global.y;}},{key:"screenX",get:function(){return this.screen.x;}},{key:"screenY",get:function(){return this.screen.y;}},{key:"getModifierState",value:function(n){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(n);}},{key:"initMouseEvent",value:function(){throw Error(tp);}}]);}(iH),iX=function(n){function r(){var n;(0,F.default)(this,r);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=(0,G.default)(this,r,[].concat(a))).width=0,n.height=0,n.isPrimary=!1,n;}return(0,W.default)(r,n),(0,j.default)(r,[{key:"getCoalescedEvents",value:function(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[];}},{key:"getPredictedEvents",value:function(){throw Error("getPredictedEvents is not supported!");}},{key:"clone",value:function(){return this.manager.clonePointerEvent(this);}}]);}(iW),iq=function(n){function r(){return(0,F.default)(this,r),(0,G.default)(this,r,arguments);}return(0,W.default)(r,n),(0,j.default)(r,[{key:"clone",value:function(){return this.manager.cloneWheelEvent(this);}}]);}(iW),i$=function(n){function r(n,i){var a;return(0,F.default)(this,r),(a=(0,G.default)(this,r,[null])).type=n,a.detail=i,Object.assign(a,i),a;}return(0,W.default)(r,n),(0,j.default)(r);}(iH),iY=new WeakMap,iZ=(0,j.default)(function n(){(0,F.default)(this,n),this.emitter=new Y.default;},[{key:"on",value:function(n,r,i){return this.addEventListener(n,r,i),this;}},{key:"addEventListener",value:function(n,r,i){var a=!1,o=!1;if(ez(i))a=i;else if(i){var s=i.capture;a=void 0!==s&&s;var l=i.once;o=void 0!==l&&l;}a&&(n+="capture"),r=(0,eV.default)(r)?r:r.handleEvent;var u=(0,eV.default)(r)?void 0:r;return o?this.emitter.once(n,r,u):this.emitter.on(n,r,u),this;}},{key:"off",value:function(n,r,i){return n?this.removeEventListener(n,r,i):this.removeAllEventListeners(),this;}},{key:"removeAllEventListeners",value:function(){var n;null===(n=this.emitter)||void 0===n||n.removeAllListeners();}},{key:"removeEventListener",value:function(n,r,i){if(!this.emitter)return this;(ez(i)?i:null==i?void 0:i.capture)&&(n+="capture"),r=(0,eV.default)(r)?r:null===(a=r)||void 0===a?void 0:a.handleEvent;var a,o=(0,eV.default)(r)?void 0:r;return this.emitter.off(n,r,o),this;}},{key:"emit",value:function(n,r){this.dispatchEvent(new i$(n,r));}},{key:"dispatchEvent",value:function(n){var r,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=iY.get(this);if(!a&&(a=this.document?this:this.defaultView?this.defaultView:null===(r=this.ownerDocument)||void 0===r?void 0:r.defaultView)&&iY.set(this,a),a){if(n.manager=a.getEventService(),!n.manager)return!1;n.defaultPrevented=!1,n.path?n.path.length=0:n.page=[],i||(n.target=this),n.manager.dispatchEvent(n,n.type,i);}else this.emitter.emit(n.type,n);return!n.defaultPrevented;}}]),iK=function(n){function r(){var n;(0,F.default)(this,r);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=(0,G.default)(this,r,[].concat(a))).shadow=!1,n.ownerDocument=null,n.isConnected=!1,n.baseURI="",n.childNodes=[],n.nodeType=0,n.nodeName="",n.nodeValue=null,n.parentNode=null,n;}return(0,W.default)(r,n),(0,j.default)(r,[{key:"textContent",get:function(){var n="";this.nodeName===e7.TEXT&&(n+=this.style.text);var r,i=(0,e3.default)(this.childNodes);try{for(i.s();!(r=i.n()).done;){var a=r.value;a.nodeName===e7.TEXT?n+=a.nodeValue:n+=a.textContent;}}catch(n){i.e(n);}finally{i.f();}return n;},set:function(n){var r=this;this.childNodes.slice().forEach(function(n){r.removeChild(n);}),this.nodeName===e7.TEXT&&(this.style.text="".concat(n));}},{key:"getRootNode",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.parentNode?this.parentNode.getRootNode(n):n.composed&&this.host?this.host.getRootNode(n):this;}},{key:"hasChildNodes",value:function(){return this.childNodes.length>0;}},{key:"isDefaultNamespace",value:function(n){throw Error(tp);}},{key:"lookupNamespaceURI",value:function(n){throw Error(tp);}},{key:"lookupPrefix",value:function(n){throw Error(tp);}},{key:"normalize",value:function(){throw Error(tp);}},{key:"isEqualNode",value:function(n){return this===n;}},{key:"isSameNode",value:function(n){return this.isEqualNode(n);}},{key:"parent",get:function(){return this.parentNode;}},{key:"parentElement",get:function(){return null;}},{key:"nextSibling",get:function(){return null;}},{key:"previousSibling",get:function(){return null;}},{key:"firstChild",get:function(){return this.childNodes.length>0?this.childNodes[0]:null;}},{key:"lastChild",get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null;}},{key:"compareDocumentPosition",value:function(n){if(n===this)return 0;for(var i,a=n,o=this,s=[a],l=[o];null!==(i=a.parentNode)&&void 0!==i?i:o.parentNode;)a=a.parentNode?(s.push(a.parentNode),a.parentNode):a,o=o.parentNode?(l.push(o.parentNode),o.parentNode):o;if(a!==o)return r.DOCUMENT_POSITION_DISCONNECTED|r.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|r.DOCUMENT_POSITION_PRECEDING;var u=s.length>l.length?s:l,c=u===s?l:s;if(u[u.length-c.length]===c[0])return u===s?r.DOCUMENT_POSITION_CONTAINED_BY|r.DOCUMENT_POSITION_FOLLOWING:r.DOCUMENT_POSITION_CONTAINS|r.DOCUMENT_POSITION_PRECEDING;for(var f=u.length-c.length,d=c.length-1;d>=0;d--){var h=c[d],p=u[f+d];if(p!==h){var m=h.parentNode.childNodes;if(m.indexOf(h)<m.indexOf(p)){if(c===s)return r.DOCUMENT_POSITION_PRECEDING;return r.DOCUMENT_POSITION_FOLLOWING;}if(u===s)return r.DOCUMENT_POSITION_PRECEDING;break;}}return r.DOCUMENT_POSITION_FOLLOWING;}},{key:"contain",value:function(n){return this.contains(n);}},{key:"contains",value:function(n){for(var r=n;r&&this!==r;)r=r.parentNode;return!!r;}},{key:"getAncestor",value:function(n){for(var r=this;n>0&&r;)r=r.parentNode,n--;return r;}},{key:"forEach",value:function(n){for(var r=[this];r.length>0;){var i=r.pop();if(!1===n(i))break;for(var a=i.childNodes.length-1;a>=0;a--)r.push(i.childNodes[a]);}}}],[{key:"isNode",value:function(n){return!!n.childNodes;}}]);}(iZ);iK.DOCUMENT_POSITION_DISCONNECTED=1,iK.DOCUMENT_POSITION_PRECEDING=2,iK.DOCUMENT_POSITION_FOLLOWING=4,iK.DOCUMENT_POSITION_CONTAINS=8,iK.DOCUMENT_POSITION_CONTAINED_BY=16,iK.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32;var iQ=(0,j.default)(function n(r,i){var a=this;(0,F.default)(this,n),this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=et.create(),this.tmpVec3=K.create(),this.onPointerDown=function(n){var r=a.createPointerEvent(n);if(a.dispatchEvent(r,"pointerdown"),"touch"===r.pointerType)a.dispatchEvent(r,"touchstart");else if("mouse"===r.pointerType||"pen"===r.pointerType){var i=2===r.button;a.dispatchEvent(r,i?"rightdown":"mousedown");}a.trackingData(n.pointerId).pressTargetsByButton[n.button]=r.composedPath(),a.freeEvent(r);},this.onPointerUp=function(n){var r=ii.now(),i=a.createPointerEvent(n,void 0,void 0,a.context.config.alwaysTriggerPointerEventOnCanvas?a.rootTarget:void 0);if(a.dispatchEvent(i,"pointerup"),"touch"===i.pointerType)a.dispatchEvent(i,"touchend");else if("mouse"===i.pointerType||"pen"===i.pointerType){var o=2===i.button;a.dispatchEvent(i,o?"rightup":"mouseup");}var s=a.trackingData(n.pointerId),l=a.findMountedTarget(s.pressTargetsByButton[n.button]),u=l;if(l&&!i.composedPath().includes(l)){for(var c=l;c&&!i.composedPath().includes(c);){if(i.currentTarget=c,a.notifyTarget(i,"pointerupoutside"),"touch"===i.pointerType)a.notifyTarget(i,"touchendoutside");else if("mouse"===i.pointerType||"pen"===i.pointerType){var f=2===i.button;a.notifyTarget(i,f?"rightupoutside":"mouseupoutside");}iK.isNode(c)&&(c=c.parentNode);}delete s.pressTargetsByButton[n.button],u=c;}if(u){var d,h=a.clonePointerEvent(i,"click");h.target=u,h.path=[],s.clicksByButton[n.button]||(s.clicksByButton[n.button]={clickCount:0,target:h.target,timeStamp:r});var p=a.context.renderingContext.root.ownerDocument.defaultView,m=s.clicksByButton[n.button];m.target===h.target&&r-m.timeStamp<p.getConfig().dblClickSpeed?++m.clickCount:m.clickCount=1,m.target=h.target,m.timeStamp=r,h.detail=m.clickCount,null!==(d=i.detail)&&void 0!==d&&d.preventClick||(a.context.config.useNativeClickEvent||"mouse"!==h.pointerType&&"touch"!==h.pointerType||a.dispatchEvent(h,"click"),a.dispatchEvent(h,"pointertap")),a.freeEvent(h);}a.freeEvent(i);},this.onPointerMove=function(n){var r=a.createPointerEvent(n,void 0,void 0,a.context.config.alwaysTriggerPointerEventOnCanvas?a.rootTarget:void 0),i="mouse"===r.pointerType||"pen"===r.pointerType,o=a.trackingData(n.pointerId),s=a.findMountedTarget(o.overTargets);if(o.overTargets&&s!==r.target){var l="mousemove"===n.type?"mouseout":"pointerout",u=a.createPointerEvent(n,l,s||void 0);if(a.dispatchEvent(u,"pointerout"),i&&a.dispatchEvent(u,"mouseout"),!r.composedPath().includes(s)){var c=a.createPointerEvent(n,"pointerleave",s||void 0);for(c.eventPhase=c.AT_TARGET;c.target&&!r.composedPath().includes(c.target);)c.currentTarget=c.target,a.notifyTarget(c),i&&a.notifyTarget(c,"mouseleave"),iK.isNode(c.target)&&(c.target=c.target.parentNode);a.freeEvent(c);}a.freeEvent(u);}if(s!==r.target){var f="mousemove"===n.type?"mouseover":"pointerover",d=a.clonePointerEvent(r,f);a.dispatchEvent(d,"pointerover"),i&&a.dispatchEvent(d,"mouseover");for(var h=s&&iK.isNode(s)&&s.parentNode;h&&h!==(iK.isNode(a.rootTarget)&&a.rootTarget.parentNode)&&h!==r.target;)h=h.parentNode;if(!h||h===(iK.isNode(a.rootTarget)&&a.rootTarget.parentNode)){var p=a.clonePointerEvent(r,"pointerenter");for(p.eventPhase=p.AT_TARGET;p.target&&p.target!==s&&p.target!==(iK.isNode(a.rootTarget)&&a.rootTarget.parentNode);)p.currentTarget=p.target,a.notifyTarget(p),i&&a.notifyTarget(p,"mouseenter"),iK.isNode(p.target)&&(p.target=p.target.parentNode);a.freeEvent(p);}a.freeEvent(d);}a.dispatchEvent(r,"pointermove"),"touch"===r.pointerType&&a.dispatchEvent(r,"touchmove"),i&&(a.dispatchEvent(r,"mousemove"),a.cursor=a.getCursor(r.target)),o.overTargets=r.composedPath(),a.freeEvent(r);},this.onPointerOut=function(n){var r=a.trackingData(n.pointerId);if(r.overTargets){var i="mouse"===n.pointerType||"pen"===n.pointerType,o=a.findMountedTarget(r.overTargets),s=a.createPointerEvent(n,"pointerout",o||void 0);a.dispatchEvent(s),i&&a.dispatchEvent(s,"mouseout");var l=a.createPointerEvent(n,"pointerleave",o||void 0);for(l.eventPhase=l.AT_TARGET;l.target&&l.target!==(iK.isNode(a.rootTarget)&&a.rootTarget.parentNode);)l.currentTarget=l.target,a.notifyTarget(l),i&&a.notifyTarget(l,"mouseleave"),iK.isNode(l.target)&&(l.target=l.target.parentNode);r.overTargets=null,a.freeEvent(s),a.freeEvent(l);}a.cursor=null;},this.onPointerOver=function(n){var r=a.trackingData(n.pointerId),i=a.createPointerEvent(n),o="mouse"===i.pointerType||"pen"===i.pointerType;a.dispatchEvent(i,"pointerover"),o&&a.dispatchEvent(i,"mouseover"),"mouse"===i.pointerType&&(a.cursor=a.getCursor(i.target));var s=a.clonePointerEvent(i,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==(iK.isNode(a.rootTarget)&&a.rootTarget.parentNode);)s.currentTarget=s.target,a.notifyTarget(s),o&&a.notifyTarget(s,"mouseenter"),iK.isNode(s.target)&&(s.target=s.target.parentNode);r.overTargets=i.composedPath(),a.freeEvent(i),a.freeEvent(s);},this.onPointerUpOutside=function(n){var r=a.trackingData(n.pointerId),i=a.findMountedTarget(r.pressTargetsByButton[n.button]),o=a.createPointerEvent(n);if(i){for(var s=i;s;)o.currentTarget=s,a.notifyTarget(o,"pointerupoutside"),"touch"===o.pointerType||("mouse"===o.pointerType||"pen"===o.pointerType)&&a.notifyTarget(o,2===o.button?"rightupoutside":"mouseupoutside"),iK.isNode(s)&&(s=s.parentNode);delete r.pressTargetsByButton[n.button];}a.freeEvent(o);},this.onWheel=function(n){var r=a.createWheelEvent(n);a.dispatchEvent(r),a.freeEvent(r);},this.onClick=function(n){if(a.context.config.useNativeClickEvent){var r=a.createPointerEvent(n);a.dispatchEvent(r),a.freeEvent(r);}},this.onPointerCancel=function(n){var r=a.createPointerEvent(n,void 0,void 0,a.context.config.alwaysTriggerPointerEventOnCanvas?a.rootTarget:void 0);a.dispatchEvent(r),a.freeEvent(r);},this.globalRuntime=r,this.context=i;},[{key:"init",value:function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick);}},{key:"destroy",value:function(){this.mappingTable={},this.mappingState={},this.eventPool.clear();}},{key:"getScale",value:function(){var n=this.context.contextService.getBoundingClientRect(),r=1,i=1,a=this.context.contextService.getDomElement();if(a&&n){var o=a.offsetWidth,s=a.offsetHeight;o&&s&&(r=n.width/o,i=n.height/s);}return{scaleX:r,scaleY:i,bbox:n};}},{key:"client2Viewport",value:function(n){var r=this.getScale(),i=r.scaleX,a=r.scaleY,o=r.bbox;return new td((n.x-((null==o?void 0:o.left)||0))/i,(n.y-((null==o?void 0:o.top)||0))/a);}},{key:"viewport2Client",value:function(n){var r=this.getScale(),i=r.scaleX,a=r.scaleY,o=r.bbox;return new td((n.x+((null==o?void 0:o.left)||0))*i,(n.y+((null==o?void 0:o.top)||0))*a);}},{key:"viewport2Canvas",value:function(n){var r=n.x,i=n.y,a=this.rootTarget.defaultView.getCamera(),o=this.context.config,s=o.width,l=o.height,u=a.getPerspectiveInverse(),c=a.getWorldTransform(),f=et.multiply(this.tmpMatrix,c,u),d=K.set(this.tmpVec3,r/s*2-1,(1-i/l)*2-1,0);return K.transformMat4(d,d,f),new td(d[0],d[1]);}},{key:"canvas2Viewport",value:function(n){var r=this.rootTarget.defaultView.getCamera(),i=r.getPerspective(),a=r.getViewTransform(),o=et.multiply(this.tmpMatrix,i,a),s=K.set(this.tmpVec3,n.x,n.y,0);K.transformMat4(this.tmpVec3,this.tmpVec3,o);var l=this.context.config,u=l.width,c=l.height;return new td((s[0]+1)/2*u,(1-(s[1]+1)/2)*c);}},{key:"setPickHandler",value:function(n){this.pickHandler=n;}},{key:"addEventMapping",value:function(n,r){this.mappingTable[n]||(this.mappingTable[n]=[]),this.mappingTable[n].push({fn:r,priority:0}),this.mappingTable[n].sort(function(n,r){return n.priority-r.priority;});}},{key:"mapEvent",value:function(n){if(this.rootTarget){var r=this.mappingTable[n.type];if(r)for(var i=0,a=r.length;i<a;i++)r[i].fn(n);else console.warn("[EventService]: Event mapping not defined for ".concat(n.type));}}},{key:"dispatchEvent",value:function(n,r,i){if(i){n.eventPhase=n.AT_TARGET;var a=this.rootTarget.defaultView||null;n.currentTarget=a,this.notifyListeners(n,r);}else n.propagationStopped=!1,n.propagationImmediatelyStopped=!1,this.propagate(n,r);}},{key:"propagate",value:function(n,r){if(n.target){var i=n.composedPath();n.eventPhase=n.CAPTURING_PHASE;for(var a=i.length-1;a>=1;a--)if(n.currentTarget=i[a],this.notifyTarget(n,r),n.propagationStopped||n.propagationImmediatelyStopped)return;if(n.eventPhase=n.AT_TARGET,n.currentTarget=n.target,this.notifyTarget(n,r),!n.propagationStopped&&!n.propagationImmediatelyStopped){var o=i.indexOf(n.currentTarget);n.eventPhase=n.BUBBLING_PHASE;for(var s=o+1;s<i.length;s++)if(n.currentTarget=i[s],this.notifyTarget(n,r),n.propagationStopped||n.propagationImmediatelyStopped)return;}}}},{key:"propagationPath",value:function(n){var r=[n],i=this.rootTarget.defaultView||null;if(i&&i===n)return r.unshift(i.document),r;for(var a=0;a<2048&&n!==this.rootTarget;a++)iK.isNode(n)&&n.parentNode&&(r.push(n.parentNode),n=n.parentNode);return i&&r.push(i),r;}},{key:"hitTest",value:function(n){var r=n.viewportX,i=n.viewportY,a=this.context.config,o=a.width,s=a.height,l=a.disableHitTesting;return r<0||i<0||r>o||i>s?null:!l&&this.pickHandler(n)||this.rootTarget||null;}},{key:"isNativeEventFromCanvas",value:function(n,r){var i,a=null==r?void 0:r.target;if(null!==(i=a)&&void 0!==i&&i.shadowRoot&&(a=r.composedPath()[0]),a){if(a===n)return!0;if(n&&n.contains)return n.contains(a);}return null!=r&&!!r.composedPath&&r.composedPath().indexOf(n)>-1;}},{key:"getExistedHTML",value:function(n){if(n.nativeEvent.composedPath)for(var r=0,i=n.nativeEvent.composedPath();r<i.length;r++){var a=i[r],o=this.nativeHTMLMap.get(a);if(o)return o;}return null;}},{key:"pickTarget",value:function(n){return this.hitTest({clientX:n.clientX,clientY:n.clientY,viewportX:n.viewportX,viewportY:n.viewportY,x:n.canvasX,y:n.canvasY});}},{key:"createPointerEvent",value:function(n,r,i,a){var o=this.allocateEvent(iX);this.copyPointerData(n,o),this.copyMouseData(n,o),this.copyData(n,o),o.nativeEvent=n.nativeEvent,o.originalEvent=n;var s=this.getExistedHTML(o),l=this.context.contextService.getDomElement();return o.target=null!=i?i:s||this.isNativeEventFromCanvas(l,o.nativeEvent)&&this.pickTarget(o)||a,"string"==typeof r&&(o.type=r),o;}},{key:"createWheelEvent",value:function(n){var r=this.allocateEvent(iq);this.copyWheelData(n,r),this.copyMouseData(n,r),this.copyData(n,r),r.nativeEvent=n.nativeEvent,r.originalEvent=n;var i=this.getExistedHTML(r),a=this.context.contextService.getDomElement();return r.target=i||this.isNativeEventFromCanvas(a,r.nativeEvent)&&this.pickTarget(r),r;}},{key:"trackingData",value:function(n){return this.mappingState.trackingData[n]||(this.mappingState.trackingData[n]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[n];}},{key:"cloneWheelEvent",value:function(n){var r=this.allocateEvent(iq);return r.nativeEvent=n.nativeEvent,r.originalEvent=n.originalEvent,this.copyWheelData(n,r),this.copyMouseData(n,r),this.copyData(n,r),r.target=n.target,r.path=n.composedPath().slice(),r.type=n.type,r;}},{key:"clonePointerEvent",value:function(n,r){var i=this.allocateEvent(iX);return i.nativeEvent=n.nativeEvent,i.originalEvent=n.originalEvent,this.copyPointerData(n,i),this.copyMouseData(n,i),this.copyData(n,i),i.target=n.target,i.path=n.composedPath().slice(),i.type=null!=r?r:i.type,i;}},{key:"copyPointerData",value:function(n,r){r.pointerId=n.pointerId,r.width=n.width,r.height=n.height,r.isPrimary=n.isPrimary,r.pointerType=n.pointerType,r.pressure=n.pressure,r.tangentialPressure=n.tangentialPressure,r.tiltX=n.tiltX,r.tiltY=n.tiltY,r.twist=n.twist;}},{key:"copyMouseData",value:function(n,r){r.altKey=n.altKey,r.button=n.button,r.buttons=n.buttons,r.ctrlKey=n.ctrlKey,r.metaKey=n.metaKey,r.shiftKey=n.shiftKey,r.client.copyFrom(n.client),r.movement.copyFrom(n.movement),r.canvas.copyFrom(n.canvas),r.screen.copyFrom(n.screen),r.global.copyFrom(n.global),r.offset.copyFrom(n.offset);}},{key:"copyWheelData",value:function(n,r){r.deltaMode=n.deltaMode,r.deltaX=n.deltaX,r.deltaY=n.deltaY,r.deltaZ=n.deltaZ;}},{key:"copyData",value:function(n,r){r.isTrusted=n.isTrusted,r.timeStamp=ii.now(),r.type=n.type,r.detail=n.detail,r.view=n.view,r.page.copyFrom(n.page),r.viewport.copyFrom(n.viewport);}},{key:"allocateEvent",value:function(n){this.eventPool.has(n)||this.eventPool.set(n,[]);var r=this.eventPool.get(n).pop()||new n(this);return r.eventPhase=r.NONE,r.currentTarget=null,r.path=[],r.target=null,r;}},{key:"freeEvent",value:function(n){if(n.manager!==this)throw Error("It is illegal to free an event not managed by this EventBoundary!");var r=n.constructor;this.eventPool.has(r)||this.eventPool.set(r,[]),this.eventPool.get(r).push(n);}},{key:"notifyTarget",value:function(n,r){r=null!=r?r:n.type;var i=n.eventPhase===n.CAPTURING_PHASE||n.eventPhase===n.AT_TARGET?"".concat(r,"capture"):r;this.notifyListeners(n,i),n.eventPhase===n.AT_TARGET&&this.notifyListeners(n,r);}},{key:"notifyListeners",value:function(n,r){var i=n.currentTarget.emitter,a=i._events[r];if(a){if("fn"in a)a.once&&i.removeListener(r,a.fn,void 0,!0),a.fn.call(n.currentTarget||a.context,n);else for(var o=0;o<a.length&&!n.propagationImmediatelyStopped;o++)a[o].once&&i.removeListener(r,a[o].fn,void 0,!0),a[o].fn.call(n.currentTarget||a[o].context,n);}}},{key:"findMountedTarget",value:function(n){if(!n)return null;for(var r=n[n.length-1],i=n.length-2;i>=0;i--){var a=n[i];if(a===this.rootTarget||iK.isNode(a)&&a.parentNode===r)r=n[i];else break;}return r;}},{key:"getCursor",value:function(n){for(var r=n;r;){var i=!!r.getAttribute&&r.getAttribute("cursor");if(i)return i;r=iK.isNode(r)&&r.parentNode;}}}]),iJ=(0,j.default)(function n(){(0,F.default)(this,n);},[{key:"getOrCreateCanvas",value:function(n,r){if(this.canvas)return this.canvas;if(n||aE.offscreenCanvas)this.canvas=n||aE.offscreenCanvas,this.context=this.canvas.getContext("2d",(0,N.default)({willReadFrequently:!0},r));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",(0,N.default)({willReadFrequently:!0},r)),this.context&&this.context.measureText||(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"));}catch(n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",(0,N.default)({willReadFrequently:!0},r));}return this.canvas.width=10,this.canvas.height=10,this.canvas;}},{key:"getOrCreateContext",value:function(n,r){return this.context||this.getOrCreateCanvas(n,r),this.context;}}],[{key:"createCanvas",value:function(){try{return new window.OffscreenCanvas(0,0);}catch(n){}try{return document.createElement("canvas");}catch(n){}return null;}}]),i0=((E={})[E.CAMERA_CHANGED=0]="CAMERA_CHANGED",E[E.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",E[E.NONE=2]="NONE",E),i1=(0,j.default)(function n(r,i){(0,F.default)(this,n),this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new ib,initAsync:new iy,dirtycheck:new ix,cull:new ix,beginFrame:new ib,beforeRender:new ib,render:new ib,afterRender:new ib,endFrame:new ib,destroy:new ib,pick:new i_,pickSync:new ix,pointerDown:new ib,pointerUp:new ib,pointerMove:new ib,pointerOut:new ib,pointerOver:new ib,pointerWheel:new ib,pointerCancel:new ib,click:new ib},this.globalRuntime=r,this.context=i;},[{key:"init",value:function(n){var r=this,i=(0,N.default)((0,N.default)({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(n){n.apply(i,r.globalRuntime);}),this.hooks.init.call(),0===this.hooks.initAsync.getCallbacksNum()?(this.inited=!0,n()):this.hooks.initAsync.promise().then(function(){r.inited=!0,n();}).catch(function(n){});}},{key:"getStats",value:function(){return this.stats;}},{key:"disableDirtyRectangleRendering",value:function(){return!this.context.config.renderer.getConfig().enableDirtyRectangleRendering||this.context.renderingContext.renderReasons.has(i0.CAMERA_CHANGED);}},{key:"render",value:function(n,r,i){var a=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var o=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(o.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),o.renderReasons.size&&this.inited){o.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var s=1===o.renderReasons.size&&o.renderReasons.has(i0.CAMERA_CHANGED),l=!n.disableRenderHooks||!(n.disableRenderHooks&&s);l&&this.renderDisplayObject(o.root,n,o),this.hooks.beginFrame.call(r),l&&o.renderListCurrentFrame.forEach(function(n){a.hooks.beforeRender.call(n),a.hooks.render.call(n),a.hooks.afterRender.call(n);}),this.hooks.endFrame.call(r),o.renderListCurrentFrame=[],o.renderReasons.clear(),i();}}},{key:"renderDisplayObject",value:function(n,r,i){for(var a=this,o=r.renderer.getConfig(),s=o.enableDirtyCheck,l=o.enableCulling,u=[n];u.length>0;){var c,f=u.pop();!function(n){var r=n.renderable,o=n.sortable,u=s?r.dirty||i.dirtyRectangleRenderingDisabled?n:null:n;if(u){var c=l?a.hooks.cull.call(u,a.context.camera):u;c&&(a.stats.rendered+=1,i.renderListCurrentFrame.push(c));}r.dirty=!1,o.renderOrder=a.zIndexCounter,a.zIndexCounter+=1,a.stats.total+=1,o.dirty&&(a.sort(n,o),o.dirty=!1,o.dirtyChildren=[],o.dirtyReason=void 0);}(f);for(var d=(null===(c=f.sortable)||void 0===c||null===(c=c.sorted)||void 0===c?void 0:c.length)>0?f.sortable.sorted:f.childNodes,h=d.length-1;h>=0;h--)u.push(d[h]);}}},{key:"sort",value:function(n,r){var i,a;(null==r||null===(i=r.sorted)||void 0===i?void 0:i.length)>0&&r.dirtyReason!==tF.Z_INDEX_CHANGED?r.dirtyChildren.forEach(function(i){var a=r.sorted.indexOf(i);if(a>-1&&r.sorted.splice(a,1),n.childNodes.indexOf(i)>-1){if(0===r.sorted.length)r.sorted.push(i);else{var o=function(n,r){for(var i=0,a=n.length;i<a;){var o=i+a>>>1;0>r7(n[o],r)?i=o+1:a=o;}return i;}(r.sorted,i);r.sorted.splice(o,0,i);}}}):r.sorted=n.childNodes.slice().sort(r7),(null===(a=r.sorted)||void 0===a?void 0:a.length)>0&&0===n.childNodes.filter(function(n){return n.parsedStyle.zIndex;}).length&&(r.sorted=[]);}},{key:"destroy",value:function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents();}},{key:"dirtify",value:function(){this.context.renderingContext.renderReasons.add(i0.DISPLAY_OBJECT_CHANGED);}}]),i2=/\[\s*(.*)=(.*)\s*\]/,i3=(0,j.default)(function n(){(0,F.default)(this,n);},[{key:"selectOne",value:function(n,r){var i=this;if(n.startsWith("."))return r.find(function(r){return((null==r?void 0:r.classList)||[]).indexOf(i.getIdOrClassname(n))>-1;});if(n.startsWith("#"))return r.find(function(r){return r.id===i.getIdOrClassname(n);});if(n.startsWith("[")){var a=this.getAttribute(n),o=a.name,s=a.value;return o?r.find(function(n){return r!==n&&("name"===o?n.name===s:i.attributeToString(n,o)===s);}):null;}return r.find(function(i){return r!==i&&i.nodeName===n;});}},{key:"selectAll",value:function(n,r){var i=this;if(n.startsWith("."))return r.findAll(function(a){return r!==a&&((null==a?void 0:a.classList)||[]).indexOf(i.getIdOrClassname(n))>-1;});if(n.startsWith("#"))return r.findAll(function(a){return r!==a&&a.id===i.getIdOrClassname(n);});if(n.startsWith("[")){var a=this.getAttribute(n),o=a.name,s=a.value;return o?r.findAll(function(n){return r!==n&&("name"===o?n.name===s:i.attributeToString(n,o)===s);}):[];}return r.findAll(function(i){return r!==i&&i.nodeName===n;});}},{key:"is",value:function(n,r){if(n.startsWith("."))return r.className===this.getIdOrClassname(n);if(n.startsWith("#"))return r.id===this.getIdOrClassname(n);if(n.startsWith("[")){var i=this.getAttribute(n),a=i.name,o=i.value;return"name"===a?r.name===o:this.attributeToString(r,a)===o;}return r.nodeName===n;}},{key:"getIdOrClassname",value:function(n){return n.substring(1);}},{key:"getAttribute",value:function(n){var r=n.match(i2),i="",a="";return r&&r.length>2&&(i=r[1].replace(/"/g,""),a=r[2].replace(/"/g,"")),{name:i,value:a};}},{key:"attributeToString",value:function(n,r){if(!n.getAttribute)return"";var i=n.getAttribute(r);return(0,ep.default)(i)?"":i.toString?i.toString():"";}}]),i4=((w={}).ATTR_MODIFIED="DOMAttrModified",w.INSERTED="DOMNodeInserted",w.MOUNTED="DOMNodeInsertedIntoDocument",w.REMOVED="removed",w.UNMOUNTED="DOMNodeRemovedFromDocument",w.REPARENT="reparent",w.DESTROY="destroy",w.BOUNDS_CHANGED="bounds-changed",w.CULLED="culled",w),i5=function(n){function r(n,i,a,o,s,l,u,c){var f;return(0,F.default)(this,r),(f=(0,G.default)(this,r,[null])).relatedNode=i,f.prevValue=a,f.newValue=o,f.attrName=s,f.attrChange=l,f.prevParsedValue=u,f.newParsedValue=c,f.type=n,f;}return(0,W.default)(r,n),(0,j.default)(r);}(iH);function i6(n){var r=n.renderable;r&&(r.renderBoundsDirty=!0,r.boundsDirty=!0);}i5.ADDITION=2,i5.MODIFICATION=1,i5.REMOVAL=3;var i8=new i5(i4.REPARENT,null,"","","",0,"",""),i7=es.create(),i9=K.create(),ae=K.fromValues(1,1,1),at=et.create(),an=es.create(),ar=K.create(),ai=et.create(),aa=ea.create(),ao=K.create(),as=ea.create(),al=K.create(),au=K.create(),ac=K.create(),af=et.create(),ad=ea.create(),ah=ea.create(),ap=ea.create(),am={affectChildren:!0},ag=(0,j.default)(function n(r){(0,F.default)(this,n),this.pendingEvents=new Map,this.boundsChangedEvent=new i$(i4.BOUNDS_CHANGED),this.displayObjectDependencyMap=new WeakMap,this.runtime=r;},[{key:"matches",value:function(n,r){return this.runtime.sceneGraphSelector.is(n,r);}},{key:"querySelector",value:function(n,r){return this.runtime.sceneGraphSelector.selectOne(n,r);}},{key:"querySelectorAll",value:function(n,r){return this.runtime.sceneGraphSelector.selectAll(n,r);}},{key:"attach",value:function(n,r,i){var a,o=!1;n.parentNode&&(o=n.parentNode!==r,this.detach(n));var s=n.nodeName===e7.FRAGMENT,l=ia(r);n.parentNode=r;var u=s?n.childNodes:[n];(0,eu.default)(i)?u.forEach(function(n){r.childNodes.splice(i,0,n),n.parentNode=r;}):u.forEach(function(n){r.childNodes.push(n),n.parentNode=r;});var c=r.sortable;if((null!=c&&null!==(a=c.sorted)&&void 0!==a&&a.length||c.dirty||n.parsedStyle.zIndex)&&(-1===c.dirtyChildren.indexOf(n)&&c.dirtyChildren.push(n),c.dirty=!0,c.dirtyReason=tF.ADDED),!l){if(s)this.dirtifyFragment(n);else{var f=n.transformable;f&&this.dirtifyWorld(n,f);}o&&n.dispatchEvent(i8);}}},{key:"detach",value:function(n){if(n.parentNode){var r,i,a=n.transformable,o=n.parentNode.sortable;(null!=o&&null!==(r=o.sorted)&&void 0!==r&&r.length||null!==(i=n.style)&&void 0!==i&&i.zIndex)&&(-1===o.dirtyChildren.indexOf(n)&&o.dirtyChildren.push(n),o.dirty=!0,o.dirtyReason=tF.REMOVED);var s=n.parentNode.childNodes.indexOf(n);s>-1&&n.parentNode.childNodes.splice(s,1),a&&this.dirtifyWorld(n,a),n.parentNode=null;}}},{key:"getOrigin",value:function(n){return n.getGeometryBounds(),n.transformable.origin;}},{key:"setOrigin",value:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof r&&(r=[r,i,a]);var o=n.transformable;if(r[0]!==o.origin[0]||r[1]!==o.origin[1]||r[2]!==o.origin[2]){var s=o.origin;s[0]=r[0],s[1]=r[1],s[2]=r[2]||0,this.dirtifyLocal(n,o);}}},{key:"rotate",value:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof r&&(r=K.fromValues(r,i,a));var o=n.transformable;if(null!==n.parentNode&&n.parentNode.transformable){ea.fromEuler(aa,r[0],r[1],r[2]);var s=this.getRotation(n),l=this.getRotation(n.parentNode);ea.copy(ap,l),ea.invert(ap,ap),ea.multiply(aa,ap,aa),ea.multiply(o.localRotation,aa,s),ea.normalize(o.localRotation,o.localRotation),this.dirtifyLocal(n,o);}else this.rotateLocal(n,r);}},{key:"rotateLocal",value:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof r&&(r=K.fromValues(r,i,a));var o=n.transformable;ea.fromEuler(ah,r[0],r[1],r[2]),ea.mul(o.localRotation,o.localRotation,ah),this.dirtifyLocal(n,o);}},{key:"setEulerAngles",value:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof r&&(r=K.fromValues(r,i,a));var o=n.transformable;if(null!==n.parentNode&&n.parentNode.transformable){ea.fromEuler(o.localRotation,r[0],r[1],r[2]);var s=this.getRotation(n.parentNode);ea.copy(ad,ea.invert(aa,s)),ea.mul(o.localRotation,o.localRotation,ad),this.dirtifyLocal(n,o);}else this.setLocalEulerAngles(n,r);}},{key:"setLocalEulerAngles",value:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=!(arguments.length>4)||void 0===arguments[4]||arguments[4];"number"==typeof r&&(r=K.fromValues(r,i,a));var s=n.transformable;ea.fromEuler(s.localRotation,r[0],r[1],r[2]),o&&this.dirtifyLocal(n,s);}},{key:"translateLocal",value:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof r&&(r=K.fromValues(r,i,a));var o=n.transformable;K.equals(r,i9)||(K.transformQuat(r,r,o.localRotation),K.add(o.localPosition,o.localPosition,r),this.dirtifyLocal(n,o));}},{key:"setPosition",value:function(n,r){var i,a=n.transformable;if(ac[0]=r[0],ac[1]=r[1],ac[2]=null!==(i=r[2])&&void 0!==i?i:0,!K.equals(this.getPosition(n),ac)){if(K.copy(a.position,ac),null!==n.parentNode&&n.parentNode.transformable){var o=n.parentNode.transformable;et.copy(af,o.worldTransform),et.invert(af,af),K.transformMat4(a.localPosition,ac,af);}else K.copy(a.localPosition,ac);this.dirtifyLocal(n,a);}}},{key:"setLocalPosition",value:function(n,r){var i,a=!(arguments.length>2)||void 0===arguments[2]||arguments[2],o=n.transformable;au[0]=r[0],au[1]=r[1],au[2]=null!==(i=r[2])&&void 0!==i?i:0,!K.equals(o.localPosition,au)&&(K.copy(o.localPosition,au),a&&this.dirtifyLocal(n,o));}},{key:"scaleLocal",value:function(n,r){var i,a=n.transformable;K.multiply(a.localScale,a.localScale,K.set(ar,r[0],r[1],null!==(i=r[2])&&void 0!==i?i:1)),this.dirtifyLocal(n,a);}},{key:"setLocalScale",value:function(n,r){var i,a=!(arguments.length>2)||void 0===arguments[2]||arguments[2],o=n.transformable;K.set(ar,r[0],r[1],null!==(i=r[2])&&void 0!==i?i:o.localScale[2]),!K.equals(ar,o.localScale)&&(K.copy(o.localScale,ar),a&&this.dirtifyLocal(n,o));}},{key:"translate",value:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof r&&(r=K.set(ar,r,i,a)),K.equals(r,i9)||(K.add(ar,this.getPosition(n),r),this.setPosition(n,ar));}},{key:"setRotation",value:function(n,r,i,a,o){var s=n.transformable;if("number"==typeof r&&(r=ea.fromValues(r,i,a,o)),null!==n.parentNode&&n.parentNode.transformable){var l=this.getRotation(n.parentNode);ea.copy(aa,l),ea.invert(aa,aa),ea.multiply(s.localRotation,aa,r),ea.normalize(s.localRotation,s.localRotation),this.dirtifyLocal(n,s);}else this.setLocalRotation(n,r);}},{key:"setLocalRotation",value:function(n,r,i,a,o){var s=!(arguments.length>5)||void 0===arguments[5]||arguments[5];"number"==typeof r&&(r=ea.set(aa,r,i,a,o));var l=n.transformable;ea.copy(l.localRotation,r),s&&this.dirtifyLocal(n,l);}},{key:"setLocalSkew",value:function(n,r,i){var a=!(arguments.length>3)||void 0===arguments[3]||arguments[3];"number"==typeof r&&(r=es.set(an,r,i));var o=n.transformable;es.copy(o.localSkew,r),a&&this.dirtifyLocal(n,o);}},{key:"dirtifyLocal",value:function(n,r){ia(n)||r.localDirtyFlag||(r.localDirtyFlag=!0,r.dirtyFlag||this.dirtifyWorld(n,r));}},{key:"dirtifyWorld",value:function(n,r){r.dirtyFlag||this.unfreezeParentToRoot(n),this.dirtifyWorldInternal(n,r),this.dirtifyToRoot(n,!0);}},{key:"dirtifyFragment",value:function(n){var r=n.transformable;r&&(r.frozen=!1,r.dirtyFlag=!0,r.localDirtyFlag=!0);var i=n.renderable;i&&(i.renderBoundsDirty=!0,i.boundsDirty=!0,i.dirty=!0);for(var a=n.childNodes.length,o=0;o<a;o++)this.dirtifyFragment(n.childNodes[o]);n.nodeName===e7.FRAGMENT&&this.pendingEvents.set(n,!1);}},{key:"triggerPendingEvents",value:function(){var n=this,r=new Set,i=function(i,a){!i.isConnected||r.has(i)||i.nodeName===e7.FRAGMENT||(n.boundsChangedEvent.detail=a,n.boundsChangedEvent.target=i,i.isMutationObserved?i.dispatchEvent(n.boundsChangedEvent):i.ownerDocument.defaultView.dispatchEvent(n.boundsChangedEvent,!0),r.add(i));};this.pendingEvents.forEach(function(n,r){r.nodeName!==e7.FRAGMENT&&(am.affectChildren=n,n?r.forEach(function(n){i(n,am);}):i(r,am));}),r.clear(),this.clearPendingEvents();}},{key:"clearPendingEvents",value:function(){this.pendingEvents.clear();}},{key:"dirtifyToRoot",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=n;for(i.renderable&&(i.renderable.dirty=!0);i;)i6(i),i=i.parentNode;r&&n.forEach(function(n){i6(n);}),this.informDependentDisplayObjects(n),this.pendingEvents.set(n,r);}},{key:"updateDisplayObjectDependency",value:function(n,r,i,a){if(r&&r!==i){var o=this.displayObjectDependencyMap.get(r);if(o&&o[n]){var s=o[n].indexOf(a);o[n].splice(s,1);}}if(i){var l=this.displayObjectDependencyMap.get(i);l||(this.displayObjectDependencyMap.set(i,{}),l=this.displayObjectDependencyMap.get(i)),l[n]||(l[n]=[]),l[n].push(a);}}},{key:"informDependentDisplayObjects",value:function(n){var r=this,i=this.displayObjectDependencyMap.get(n);i&&Object.keys(i).forEach(function(n){i[n].forEach(function(i){r.dirtifyToRoot(i,!0),i.dispatchEvent(new i5(i4.ATTR_MODIFIED,i,r,r,n,i5.MODIFICATION,r,r)),i.isCustomElement&&i.isConnected&&i.attributeChangedCallback&&i.attributeChangedCallback(n,r,r);});});}},{key:"getPosition",value:function(n){var r=n.transformable;return et.getTranslation(r.position,this.getWorldTransform(n,r));}},{key:"getRotation",value:function(n){var r=n.transformable;return et.getRotation(r.rotation,this.getWorldTransform(n,r));}},{key:"getScale",value:function(n){var r=n.transformable;return et.getScaling(r.scaling,this.getWorldTransform(n,r));}},{key:"getWorldTransform",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.transformable;return(r.localDirtyFlag||r.dirtyFlag)&&(n.parentNode&&n.parentNode.transformable&&this.getWorldTransform(n.parentNode),this.sync(n,r)),r.worldTransform;}},{key:"getLocalPosition",value:function(n){return n.transformable.localPosition;}},{key:"getLocalRotation",value:function(n){return n.transformable.localRotation;}},{key:"getLocalScale",value:function(n){return n.transformable.localScale;}},{key:"getLocalSkew",value:function(n){return n.transformable.localSkew;}},{key:"calcLocalTransform",value:function(n){if(0!==n.localSkew[0]||0!==n.localSkew[1]){et.fromRotationTranslationScaleOrigin(n.localTransform,n.localRotation,n.localPosition,K.fromValues(1,1,1),n.origin),(0!==n.localSkew[0]||0!==n.localSkew[1])&&(et.identity(ai),ai[4]=Math.tan(n.localSkew[0]),ai[1]=Math.tan(n.localSkew[1]),et.multiply(n.localTransform,n.localTransform,ai));var r=et.fromRotationTranslationScaleOrigin(ai,ea.set(aa,0,0,0,1),K.set(ar,1,1,1),n.localScale,n.origin);et.multiply(n.localTransform,n.localTransform,r);}else{var i=n.localTransform,a=n.localPosition,o=n.localRotation,s=n.localScale,l=n.origin,u=0!==a[0]||0!==a[1]||0!==a[2],c=1!==o[3]||0!==o[0]||0!==o[1]||0!==o[2],f=1!==s[0]||1!==s[1]||1!==s[2],d=0!==l[0]||0!==l[1]||0!==l[2];c||f||d?et.fromRotationTranslationScaleOrigin(i,o,a,s,l):u?et.fromTranslation(i,a):et.identity(i);}}},{key:"getLocalTransform",value:function(n){var r=n.transformable;return r.localDirtyFlag&&(this.calcLocalTransform(r),r.localDirtyFlag=!1),r.localTransform;}},{key:"setLocalTransform",value:function(n,r){var i=et.getTranslation(ao,r),a=et.getRotation(as,r),o=et.getScaling(al,r);this.setLocalScale(n,o,!1),this.setLocalPosition(n,i,!1),this.setLocalRotation(n,a,void 0,void 0,void 0,!1),this.dirtifyLocal(n,n.transformable);}},{key:"resetLocalTransform",value:function(n){this.setLocalScale(n,ae,!1),this.setLocalPosition(n,i9,!1),this.setLocalEulerAngles(n,i9,void 0,void 0,!1),this.setLocalSkew(n,i7,void 0,!1),this.dirtifyLocal(n,n.transformable);}},{key:"getTransformedGeometryBounds",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0,a=this.getGeometryBounds(n,r);if(!tl.isEmpty(a)){var o=i||new tl;return o.setFromTransformedAABB(a,this.getWorldTransform(n)),o;}return null;}},{key:"getGeometryBounds",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=n.geometry;return i.dirty&&aE.styleValueRegistry.updateGeometry(n),(r?i.renderBounds:i.contentBounds||null)||new tl;}},{key:"getBounds",value:function(n){var r=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=n.renderable;if(!a.boundsDirty&&!i&&a.bounds)return a.bounds;if(!a.renderBoundsDirty&&i&&a.renderBounds)return a.renderBounds;var o=i?a.renderBounds:a.bounds,s=this.getTransformedGeometryBounds(n,i,o);if(n.childNodes.forEach(function(n){var a=r.getBounds(n,i);a&&(s?s.add(a):(s=o||new tl).update(a.center,a.halfExtents));}),s||(s=new tl),i){var l=r9(n);if(l){var u=l.parsedStyle.clipPath.getBounds(i);s?u&&(s=u.intersection(s)):s.update(u.center,u.halfExtents);}}return i?(a.renderBounds=s,a.renderBoundsDirty=!1):(a.bounds=s,a.boundsDirty=!1),s;}},{key:"getLocalBounds",value:function(n){if(n.parentNode){var r=at;n.parentNode.transformable&&(r=et.invert(ai,this.getWorldTransform(n.parentNode)));var i=this.getBounds(n);if(!tl.isEmpty(i)){var a=new tl;return a.setFromTransformedAABB(i,r),a;}}return this.getBounds(n);}},{key:"getBoundingClientRect",value:function(n){var r,i,a=this.getGeometryBounds(n);tl.isEmpty(a)||(i=new tl).setFromTransformedAABB(a,this.getWorldTransform(n));var o=null===(r=n.ownerDocument)||void 0===r||null===(r=r.defaultView)||void 0===r?void 0:r.getContextService().getBoundingClientRect();if(i){var s=i.getMin(),l=(0,q.default)(s,2),u=l[0],c=l[1],f=i.getMax(),d=(0,q.default)(f,2),h=d[0],p=d[1];return new th(u+((null==o?void 0:o.left)||0),c+((null==o?void 0:o.top)||0),h-u,p-c);}return new th((null==o?void 0:o.left)||0,(null==o?void 0:o.top)||0,0,0);}},{key:"dirtifyWorldInternal",value:function(n,r){var i=this;if(!r.dirtyFlag){r.dirtyFlag=!0,r.frozen=!1,n.childNodes.forEach(function(n){var r=n.transformable;r.dirtyFlag||i.dirtifyWorldInternal(n,r);});var a=n.renderable;a&&(a.renderBoundsDirty=!0,a.boundsDirty=!0,a.dirty=!0);}}},{key:"syncHierarchy",value:function(n){var r=n.transformable;if(!r.frozen){r.frozen=!0,(r.localDirtyFlag||r.dirtyFlag)&&this.sync(n,r);for(var i=n.childNodes,a=0;a<i.length;a++)this.syncHierarchy(i[a]);}}},{key:"sync",value:function(n,r){if(r.localDirtyFlag&&(this.calcLocalTransform(r),r.localDirtyFlag=!1),r.dirtyFlag){var i=n.parentNode,a=i&&i.transformable;null!==i&&a?et.multiply(r.worldTransform,a.worldTransform,r.localTransform):et.copy(r.worldTransform,r.localTransform),r.dirtyFlag=!1;}}},{key:"unfreezeParentToRoot",value:function(n){for(var r=n.parentNode;r;){var i=r.transformable;i&&(i.frozen=!1),r=r.parentNode;}}}]),av={MetricsString:"|\xc9q\xc5",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},ay=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,a_=new RegExp("".concat(/[!%),.:;?\]}'""]/.source,"|").concat(/[!),.:;?\]}'""]/.source,"|").concat(/[)\]'"?!:;,.]/.source,"|").concat(/[!%),.:;?\]}'"]/.source)),ab=new RegExp("".concat(/[$('"]/.source,"|").concat(/[([{'"]/.source,"|").concat(/[(['"...]/.source,"|").concat(/[$([{'"#]/.source)),ax=(0,j.default)(function n(r){var i=this;(0,F.default)(this,n),this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(n,r){return!i.isBreakingSpace(r)&&!!(n&&(ab.exec(r)||a_.exec(n)));},this.trimByKinsokuShorui=function(n){var r=(0,U.default)(n),i=r[r.length-2];if(!i)return n;var a=i[i.length-1];return r[r.length-2]=i.slice(0,-1),r[r.length-1]=a+r[r.length-1],r;},this.runtime=r;},[{key:"measureFont",value:function(n,r){if(this.fontMetricsCache[n])return this.fontMetricsCache[n];var i={ascent:0,descent:0,fontSize:0},a=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(r),o=this.runtime.offscreenCanvasCreator.getOrCreateContext(r,{willReadFrequently:!0});o.font=n;var s=av.MetricsString+av.BaselineSymbol,l=Math.ceil(o.measureText(s).width),u=Math.ceil(o.measureText(av.BaselineSymbol).width),c=av.HeightMultiplier*u;u=u*av.BaselineMultiplier|0,a.width=l,a.height=c,o.fillStyle="#f00",o.fillRect(0,0,l,c),o.font=n,o.textBaseline="alphabetic",o.fillStyle="#000",o.fillText(s,0,u);var f=o.getImageData(0,0,l||1,c||1).data,d=f.length,h=4*l,p=0,m=0,g=!1;for(p=0;p<u;++p){for(var v=0;v<h;v+=4)if(255!==f[m+v]){g=!0;break;}if(g)break;m+=h;}for(i.ascent=u-p,m=d-h,g=!1,p=c;p>u;--p){for(var y=0;y<h;y+=4)if(255!==f[m+y]){g=!0;break;}if(g)break;m-=h;}return i.descent=p-u,i.fontSize=i.ascent+i.descent,this.fontMetricsCache[n]=i,i;}},{key:"measureText",value:function(n,r,i){var a=r.fontSize,o=void 0===a?16:a,s=r.wordWrap,l=r.lineHeight,u=r.lineWidth,c=void 0===u?1:u,f=r.textBaseline,d=void 0===f?"alphabetic":f,h=r.textAlign,p=void 0===h?"start":h,m=r.letterSpacing,g=void 0===m?0:m,v=r.textPath;r.textPathSide,r.textPathStartOffset;var y=r.leading,_=void 0===y?0:y,b=function(n){for(var r=n.fontSize,i=void 0===r?16:r,a=n.fontFamily,o=n.fontStyle,s=n.fontVariant,l=n.fontWeight,u=(0,eu.default)(i)&&"".concat(i,"px")||"16px",c=(void 0===a?"sans-serif":a).split(","),f=c.length-1;f>=0;f--){var d=c[f].trim();!iw.test(d)&&0>iE.indexOf(d)&&(d='"'.concat(d,'"')),c[f]=d;}return"".concat(void 0===o?"normal":o," ").concat(void 0===s?"normal":s," ").concat(void 0===l?"normal":l," ").concat(u," ").concat(c.join(","));}(r),x=this.measureFont(b,i);0===x.fontSize&&(x.fontSize=o,x.ascent=o);var E=this.runtime.offscreenCanvasCreator.getOrCreateContext(i);E.font=b,r.isOverflowing=!1;var w=(void 0!==s&&s?this.wordWrap(n,r,i):n).split(/(?:\r\n|\r|\n)/),S=Array(w.length),T=0;if(v){v.getTotalLength();for(var A=0;A<w.length;A++)E.measureText(w[A]).width,w[A].length;}else{for(var C=0;C<w.length;C++){var O=E.measureText(w[C]).width+(w[C].length-1)*g;S[C]=O,T=Math.max(T,O);}var M=T+c,R=l||x.fontSize+c,P=Math.max(R,x.fontSize+c)+(w.length-1)*(R+_);R+=_;var k=0;return"middle"===d?k=-P/2:"bottom"===d||"alphabetic"===d||"ideographic"===d?k=-P:("top"===d||"hanging"===d)&&(k=0),{font:b,width:M,height:P,lines:w,lineWidths:S,lineHeight:R,maxLineWidth:T,fontProperties:x,lineMetrics:S.map(function(n,r){var i=0;return"center"===p||"middle"===p?i-=n/2:("right"===p||"end"===p)&&(i-=n),new th(i-c/2,k+r*R,n+c,R);})};}}},{key:"wordWrap",value:function(n,r,i){var a=this,o=this,s=r.wordWrapWidth,l=r.letterSpacing,u=void 0===l?0:l,c=r.maxLines,f=void 0===c?1/0:c,d=r.textOverflow,h=this.runtime.offscreenCanvasCreator.getOrCreateContext(i),p=(void 0===s?0:s)+u,m="";"ellipsis"===d?m="...":d&&"clip"!==d&&(m=d);var g=Array.from(n),v=[],y=0,_=0,b=-1,x={},E=function(n){return a.getFromCache(n,u,x,h);},w=E(m);function S(n,r,i,a){for(;E(n)<a&&r<g.length-1&&!o.isNewline(g[r+1]);)r+=1,n+=g[r];for(;E(n)>a&&r>=i;)r-=1,n=n.slice(0,-1);return{lineTxt:n,txtLastCharIndex:r};}function T(n,r){if(!(w<=0)&&!(w>p)){if(!v[n]){v[n]=m;return;}var i=S(v[n],r,b+1,p-w);v[n]=i.lineTxt+m;}}for(var A=0;A<g.length;A++){var C=g[A],O=g[A-1],M=g[A+1],R=E(C);if(this.isNewline(C)){if(y+1>=f){r.isOverflowing=!0,A<g.length-1&&T(y,A-1);break;}b=A-1,_=0,v[y+=1]="";continue;}if(_>0&&_+R>p){var P=S(v[y],A-1,b+1,p);if(P.txtLastCharIndex!==A-1){if(v[y]=P.lineTxt,P.txtLastCharIndex===g.length-1)break;C=g[A=P.txtLastCharIndex+1],O=g[A-1],M=g[A+1],R=E(C);}if(y+1>=f){r.isOverflowing=!0,T(y,A-1);break;}if(b=A-1,_=0,v[y+=1]="",this.isBreakingSpace(C))continue;this.canBreakInLastChar(C)||(v=this.trimToBreakable(v),_=this.sumTextWidthByCache(v[y]||"",E)),this.shouldBreakByKinsokuShorui(C,M)&&(v=this.trimByKinsokuShorui(v),_+=E(O||""));}_+=R,v[y]=(v[y]||"")+C;}return v.join("\n");}},{key:"isBreakingSpace",value:function(n){return"string"==typeof n&&av.BreakingSpaces.indexOf(n.charCodeAt(0))>=0;}},{key:"isNewline",value:function(n){return"string"==typeof n&&av.Newlines.indexOf(n.charCodeAt(0))>=0;}},{key:"trimToBreakable",value:function(n){var r=(0,U.default)(n),i=r[r.length-2],a=this.findBreakableIndex(i);if(-1===a||!i)return r;var o=i.slice(a,a+1),s=this.isBreakingSpace(o);return r[r.length-1]+=i.slice(a+1,i.length),r[r.length-2]=i.slice(0,a+(s?0:1)),r;}},{key:"canBreakInLastChar",value:function(n){return!(n&&ay.test(n));}},{key:"sumTextWidthByCache",value:function(n,r){return n.split("").reduce(function(n,i){return n+r(i);},0);}},{key:"findBreakableIndex",value:function(n){for(var r=n.length-1;r>=0;r--)if(!ay.test(n[r]))return r;return -1;}},{key:"getFromCache",value:function(n,r,i,a){var o=i[n];if("number"!=typeof o){var s=n.length*r;o=a.measureText(n).width+s,i[n]=o;}return o;}}]),aE={},aw=(T=new iz,A=new ij,S={},(0,eX.default)((0,eX.default)((0,eX.default)((0,eX.default)((0,eX.default)((0,eX.default)((0,eX.default)((0,eX.default)((0,eX.default)((0,eX.default)(S,e7.FRAGMENT,null),e7.CIRCLE,new iN),e7.ELLIPSE,new iD),e7.RECT,T),e7.IMAGE,T),e7.GROUP,new iV),e7.LINE,new iF),e7.TEXT,new iU(aE)),e7.POLYLINE,A),e7.POLYGON,A),(0,eX.default)((0,eX.default)((0,eX.default)(S,e7.PATH,new iB),e7.HTML,new iG),e7.MESH,null)),aS=(O=new rW,M=new r$,C={},(0,eX.default)((0,eX.default)((0,eX.default)((0,eX.default)((0,eX.default)((0,eX.default)((0,eX.default)((0,eX.default)((0,eX.default)((0,eX.default)(C,tj.PERCENTAGE,null),tj.NUMBER,new rQ),tj.ANGLE,new rG),tj.DEFINED_PATH,new rH),tj.PAINT,O),tj.COLOR,O),tj.FILTER,new rX),tj.LENGTH,M),tj.LENGTH_PERCENTAGE,M),tj.LENGTH_PERCENTAGE_12,new rY),(0,eX.default)((0,eX.default)((0,eX.default)((0,eX.default)((0,eX.default)((0,eX.default)((0,eX.default)((0,eX.default)((0,eX.default)((0,eX.default)(C,tj.LENGTH_PERCENTAGE_14,new rZ),tj.COORDINATE,new r$),tj.OFFSET_DISTANCE,new rJ),tj.OPACITY_VALUE,new r0),tj.PATH,new r1),tj.LIST_OF_POINTS,new r2),tj.SHADOW_BLUR,new r3),tj.TEXT,new r4),tj.TEXT_TRANSFORM,new r5),tj.TRANSFORM,new ik),(0,eX.default)((0,eX.default)((0,eX.default)(C,tj.TRANSFORM_ORIGIN,new iI),tj.Z_INDEX,new iL),tj.MARKER,new rK));aE.CameraContribution=tN,aE.AnimationTimeline=null,aE.EasingFunction=null,aE.offscreenCanvasCreator=new iJ,aE.sceneGraphSelector=new i3,aE.sceneGraphService=new ag(aE),aE.textService=new ax(aE),aE.geometryUpdaterFactory=aw,aE.CSSPropertySyntaxFactory=aS,aE.styleValueRegistry=new rU(aE),aE.layoutRegistry=null,aE.globalThis="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==I?I:{},aE.enableStyleSyntax=!0,aE.enableSizeAttenuation=!1;var aT=0,aA=new i5(i4.INSERTED,null,"","","",0,"",""),aC=new i5(i4.REMOVED,null,"","","",0,"",""),aO=new i$(i4.DESTROY),aM=function(n){function r(){var n;(0,F.default)(this,r);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=(0,G.default)(this,r,[].concat(a))).entity=aT++,n.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},n.cullable={strategy:tD.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},n.transformable={dirtyFlag:!1,localDirtyFlag:!1,frozen:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},n.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},n.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},n.rBushNode={aabb:void 0},n.namespaceURI="g",n.scrollLeft=0,n.scrollTop=0,n.clientTop=0,n.clientLeft=0,n.destroyed=!1,n.style={},n.computedStyle={},n.parsedStyle={},n.attributes={},n;}return(0,W.default)(r,n),(0,j.default)(r,[{key:"className",get:function(){return this.getAttribute("class")||"";},set:function(n){this.setAttribute("class",n);}},{key:"classList",get:function(){return this.className.split(" ").filter(function(n){return""!==n;});}},{key:"tagName",get:function(){return this.nodeName;}},{key:"children",get:function(){return this.childNodes;}},{key:"childElementCount",get:function(){return this.childNodes.length;}},{key:"firstElementChild",get:function(){return this.firstChild;}},{key:"lastElementChild",get:function(){return this.lastChild;}},{key:"parentElement",get:function(){return this.parentNode;}},{key:"nextSibling",get:function(){if(this.parentNode){var n=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[n+1]||null;}return null;}},{key:"previousSibling",get:function(){if(this.parentNode){var n=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[n-1]||null;}return null;}},{key:"cloneNode",value:function(n){throw Error(tp);}},{key:"appendChild",value:function(n,r){var i;if(n.destroyed)throw Error("Cannot append a destroyed element.");return aE.sceneGraphService.attach(n,this,r),null!==(i=this.ownerDocument)&&void 0!==i&&i.defaultView&&(ia(this)||n.nodeName!==e7.FRAGMENT?this.ownerDocument.defaultView.mountChildren(n):this.ownerDocument.defaultView.mountFragment(n)),this.isMutationObserved&&(aA.relatedNode=this,n.dispatchEvent(aA)),n;}},{key:"insertBefore",value:function(n,r){if(r){n.parentElement&&n.parentElement.removeChild(n);var i=this.childNodes.indexOf(r);-1===i?this.appendChild(n):this.appendChild(n,i);}else this.appendChild(n);return n;}},{key:"replaceChild",value:function(n,r){var i=this.childNodes.indexOf(r);return this.removeChild(r),this.appendChild(n,i),r;}},{key:"removeChild",value:function(n){var r;return aC.relatedNode=this,n.dispatchEvent(aC),null!==(r=n.ownerDocument)&&void 0!==r&&r.defaultView&&n.ownerDocument.defaultView.unmountChildren(n),aE.sceneGraphService.detach(n),n;}},{key:"removeChildren",value:function(){for(var n=this.childNodes.length-1;n>=0;n--){var r=this.childNodes[n];this.removeChild(r);}}},{key:"destroyChildren",value:function(){for(var n=this.childNodes.length-1;n>=0;n--){var r=this.childNodes[n];r.childNodes.length>0&&r.destroyChildren(),r.destroy();}}},{key:"matches",value:function(n){return aE.sceneGraphService.matches(n,this);}},{key:"getElementById",value:function(n){return aE.sceneGraphService.querySelector("#".concat(n),this);}},{key:"getElementsByName",value:function(n){return aE.sceneGraphService.querySelectorAll('[name="'.concat(n,'"]'),this);}},{key:"getElementsByClassName",value:function(n){return aE.sceneGraphService.querySelectorAll(".".concat(n),this);}},{key:"getElementsByTagName",value:function(n){return aE.sceneGraphService.querySelectorAll(n,this);}},{key:"querySelector",value:function(n){return aE.sceneGraphService.querySelector(n,this);}},{key:"querySelectorAll",value:function(n){return aE.sceneGraphService.querySelectorAll(n,this);}},{key:"closest",value:function(n){var r=this;do{if(aE.sceneGraphService.matches(n,r))return r;r=r.parentElement;}while(null!==r)return null;}},{key:"find",value:function(n){var r=this,i=null;return this.forEach(function(a){return!(a!==r&&n(a))||(i=a,!1);}),i;}},{key:"findAll",value:function(n){var r=this,i=[];return this.forEach(function(a){a!==r&&n(a)&&i.push(a);}),i;}},{key:"after",value:function(){var n=this;if(this.parentNode){for(var r=this.parentNode.childNodes.indexOf(this),i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];a.forEach(function(i,a){var o;return null===(o=n.parentNode)||void 0===o?void 0:o.appendChild(i,r+a+1);});}}},{key:"before",value:function(){if(this.parentNode){for(var n=this.parentNode.childNodes.indexOf(this),r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=i[0],s=i.slice(1);this.parentNode.appendChild(o,n),o.after.apply(o,(0,U.default)(s));}}},{key:"replaceWith",value:function(){this.after.apply(this,arguments),this.remove();}},{key:"append",value:function(){for(var n=this,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];i.forEach(function(r){return n.appendChild(r);});}},{key:"prepend",value:function(){for(var n=this,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];i.forEach(function(r,i){return n.appendChild(r,i);});}},{key:"replaceChildren",value:function(){for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,arguments);}},{key:"remove",value:function(){return this.parentNode?this.parentNode.removeChild(this):this;}},{key:"destroy",value:function(){this.destroyChildren(),this.dispatchEvent(aO),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0;}},{key:"getGeometryBounds",value:function(){return aE.sceneGraphService.getGeometryBounds(this);}},{key:"getRenderBounds",value:function(){return aE.sceneGraphService.getBounds(this,!0);}},{key:"getBounds",value:function(){return aE.sceneGraphService.getBounds(this);}},{key:"getLocalBounds",value:function(){return aE.sceneGraphService.getLocalBounds(this);}},{key:"getBoundingClientRect",value:function(){return aE.sceneGraphService.getBoundingClientRect(this);}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()];}},{key:"computedStyleMap",value:function(){return new Map(Object.entries(this.computedStyle));}},{key:"getAttributeNames",value:function(){return Object.keys(this.attributes);}},{key:"getAttribute",value:function(n){if("symbol"!=typeof n)return this.attributes[n];}},{key:"hasAttribute",value:function(n){return this.getAttributeNames().includes(n);}},{key:"hasAttributes",value:function(){return!!this.getAttributeNames().length;}},{key:"removeAttribute",value:function(n){this.setAttribute(n,null),delete this.attributes[n];}},{key:"setAttribute",value:function(n,r,i,a){this.attributes[n]=r;}},{key:"getAttributeNS",value:function(n,r){throw Error(tp);}},{key:"getAttributeNode",value:function(n){throw Error(tp);}},{key:"getAttributeNodeNS",value:function(n,r){throw Error(tp);}},{key:"hasAttributeNS",value:function(n,r){throw Error(tp);}},{key:"removeAttributeNS",value:function(n,r){throw Error(tp);}},{key:"removeAttributeNode",value:function(n){throw Error(tp);}},{key:"setAttributeNS",value:function(n,r,i){throw Error(tp);}},{key:"setAttributeNode",value:function(n){throw Error(tp);}},{key:"setAttributeNodeNS",value:function(n){throw Error(tp);}},{key:"toggleAttribute",value:function(n,r){throw Error(tp);}}]);}(iK);function aR(n){return!!(null!=n&&n.nodeName);}var aP=aE.globalThis.Proxy?aE.globalThis.Proxy:function(){},ak=new i5(i4.ATTR_MODIFIED,null,null,null,null,i5.MODIFICATION,null,null),aI=K.create(),aL=ea.create(),aN=function(n){function r(n){var i;return(0,F.default)(this,r),(i=(0,G.default)(this,r)).isCustomElement=!1,i.isMutationObserved=!1,i.activeAnimations=[],i.config=n,i.id=n.id||"",i.name=n.name||"",(n.className||n.class)&&(i.className=n.className||n.class),i.nodeName=n.type||e7.GROUP,n.initialParsedStyle&&Object.assign(i.parsedStyle,n.initialParsedStyle),i.initAttributes(n.style),aE.enableStyleSyntax&&(i.style=new aP({setProperty:function(n,r){i.setAttribute(n,r);},getPropertyValue:function(n){return i.getAttribute(n);},removeProperty:function(n){i.removeAttribute(n);},item:function(){return"";}},{get:function(n,r){return void 0!==n[r]?n[r]:i.getAttribute(r);},set:function(n,r,a){return i.setAttribute(r,a),!0;}})),i;}return(0,W.default)(r,n),(0,j.default)(r,[{key:"destroy",value:function(){eZ(r,"destroy",this,3)([]),this.getAnimations().forEach(function(n){n.cancel();});}},{key:"cloneNode",value:function(n,r){var i=(0,N.default)({},this.attributes);for(var a in i){var o=i[a];aR(o)&&"clipPath"!==a&&"offsetPath"!==a&&"textPath"!==a&&(i[a]=o.cloneNode(n)),r&&(i[a]=r(a,o));}var s=new this.constructor((0,N.default)((0,N.default)({},this.config),{},{style:i}));return s.setLocalTransform(this.getLocalTransform()),n&&this.children.forEach(function(r){if(!r.style.isMarker){var i=r.cloneNode(n);s.appendChild(i);}}),s;}},{key:"initAttributes",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};aE.styleValueRegistry.processProperties(this,n,{forceUpdateGeometry:!0}),this.renderable.dirty=!0;}},{key:"setAttribute",value:function(n,i){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=!(arguments.length>3)||void 0===arguments[3]||arguments[3];!(0,eN.default)(i)&&(a||i!==this.attributes[n])&&(this.internalSetAttribute(n,i,{memoize:o}),eZ(r,"setAttribute",this,3)([n,i]));}},{key:"internalSetAttribute",value:function(n,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.renderable,s=this.attributes[n],l=this.parsedStyle[n];aE.styleValueRegistry.processProperties(this,(0,eX.default)({},n,r),a),o.dirty=!0;var u=this.parsedStyle[n];this.isConnected&&(ak.relatedNode=this,ak.prevValue=s,ak.newValue=r,ak.attrName=n,ak.prevParsedValue=l,ak.newParsedValue=u,this.isMutationObserved?this.dispatchEvent(ak):(ak.target=this,this.ownerDocument.defaultView.dispatchEvent(ak,!0))),(this.isCustomElement&&this.isConnected||!this.isCustomElement)&&(null===(i=this.attributeChangedCallback)||void 0===i||i.call(this,n,s,r,l,u));}},{key:"getBBox",value:function(){var n=this.getBounds(),r=n.getMin(),i=(0,q.default)(r,2),a=i[0],o=i[1],s=n.getMax(),l=(0,q.default)(s,2);return new th(a,o,l[0]-a,l[1]-o);}},{key:"setOrigin",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return aE.sceneGraphService.setOrigin(this,ty(n,r,i,!1)),this;}},{key:"getOrigin",value:function(){return aE.sceneGraphService.getOrigin(this);}},{key:"setPosition",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return aE.sceneGraphService.setPosition(this,ty(n,r,i,!1)),this;}},{key:"setLocalPosition",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return aE.sceneGraphService.setLocalPosition(this,ty(n,r,i,!1)),this;}},{key:"translate",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return aE.sceneGraphService.translate(this,ty(n,r,i,!1)),this;}},{key:"translateLocal",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return aE.sceneGraphService.translateLocal(this,ty(n,r,i,!1)),this;}},{key:"getPosition",value:function(){return aE.sceneGraphService.getPosition(this);}},{key:"getLocalPosition",value:function(){return aE.sceneGraphService.getLocalPosition(this);}},{key:"scale",value:function(n,r,i){return this.scaleLocal(n,r,i);}},{key:"scaleLocal",value:function(n,r,i){return"number"==typeof n&&(r=r||n,i=i||n,n=ty(n,r,i,!1)),aE.sceneGraphService.scaleLocal(this,n),this;}},{key:"setLocalScale",value:function(n,r,i){return"number"==typeof n&&(r=r||n,i=i||n,n=ty(n,r,i,!1)),aE.sceneGraphService.setLocalScale(this,n),this;}},{key:"getLocalScale",value:function(){return aE.sceneGraphService.getLocalScale(this);}},{key:"getScale",value:function(){return aE.sceneGraphService.getScale(this);}},{key:"getEulerAngles",value:function(){var n=tw(aI,aE.sceneGraphService.getWorldTransform(this));return(0,q.default)(n,3)[2]*tx;}},{key:"getLocalEulerAngles",value:function(){var n=tw(aI,aE.sceneGraphService.getLocalRotation(this));return(0,q.default)(n,3)[2]*tx;}},{key:"setEulerAngles",value:function(n){return aE.sceneGraphService.setEulerAngles(this,0,0,n),this;}},{key:"setLocalEulerAngles",value:function(n){return aE.sceneGraphService.setLocalEulerAngles(this,0,0,n),this;}},{key:"rotateLocal",value:function(n,r,i){return(0,ep.default)(r)&&(0,ep.default)(i)?aE.sceneGraphService.rotateLocal(this,0,0,n):aE.sceneGraphService.rotateLocal(this,n,r,i),this;}},{key:"rotate",value:function(n,r,i){return(0,ep.default)(r)&&(0,ep.default)(i)?aE.sceneGraphService.rotate(this,0,0,n):aE.sceneGraphService.rotate(this,n,r,i),this;}},{key:"setRotation",value:function(n,r,i,a){return aE.sceneGraphService.setRotation(this,n,r,i,a),this;}},{key:"setLocalRotation",value:function(n,r,i,a){return aE.sceneGraphService.setLocalRotation(this,n,r,i,a),this;}},{key:"setLocalSkew",value:function(n,r){return aE.sceneGraphService.setLocalSkew(this,n,r),this;}},{key:"getRotation",value:function(){return aE.sceneGraphService.getRotation(this);}},{key:"getLocalRotation",value:function(){return aE.sceneGraphService.getLocalRotation(this);}},{key:"getLocalSkew",value:function(){return aE.sceneGraphService.getLocalSkew(this);}},{key:"getLocalTransform",value:function(){return aE.sceneGraphService.getLocalTransform(this);}},{key:"getWorldTransform",value:function(){return aE.sceneGraphService.getWorldTransform(this);}},{key:"setLocalTransform",value:function(n){return aE.sceneGraphService.setLocalTransform(this,n),this;}},{key:"resetLocalTransform",value:function(){aE.sceneGraphService.resetLocalTransform(this);}},{key:"getAnimations",value:function(){return this.activeAnimations;}},{key:"animate",value:function(n,r){var i,a=null===(i=this.ownerDocument)||void 0===i?void 0:i.timeline;return a?a.play(this,n,r):null;}},{key:"isVisible",value:function(){var n;return(null===(n=this.parsedStyle)||void 0===n?void 0:n.visibility)!=="hidden";}},{key:"interactive",get:function(){return this.isInteractive();},set:function(n){this.style.pointerEvents=n?"auto":"none";}},{key:"isInteractive",value:function(){var n;return(null===(n=this.parsedStyle)||void 0===n?void 0:n.pointerEvents)!=="none";}},{key:"isCulled",value:function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible);}},{key:"toFront",value:function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,(0,U.default)(this.parentNode.children.map(function(n){return Number(n.style.zIndex);})))+1),this;}},{key:"toBack",value:function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,(0,U.default)(this.parentNode.children.map(function(n){return Number(n.style.zIndex);})))-1),this;}},{key:"getConfig",value:function(){return this.config;}},{key:"attr",value:function(){for(var n=this,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=i[0],s=i[1];return o?(0,eH.default)(o)?(Object.keys(o).forEach(function(r){n.setAttribute(r,o[r]);}),this):2===i.length?(this.setAttribute(o,s),this):this.attributes[o]:this.attributes;}},{key:"getMatrix",value:function(n){var r,i,a,o=n||this.getWorldTransform(),s=et.getTranslation(aI,o),l=(0,q.default)(s,2),u=l[0],c=l[1],f=et.getScaling(aI,o),d=(0,q.default)(f,2),h=d[0],p=d[1],m=tw(aI,et.getRotation(aL,o)),g=(0,q.default)(m,3),v=g[0],y=g[2];return i=Math.cos(r=v||y),a=Math.sin(r),er.fromValues(h*i,p*a,0,-h*a,p*i,0,u,c,1);}},{key:"getLocalMatrix",value:function(){return this.getMatrix(this.getLocalTransform());}},{key:"setMatrix",value:function(n){var r=tS(n),i=(0,q.default)(r,5),a=i[0],o=i[1],s=i[2],l=i[3],u=i[4];this.setEulerAngles(u).setPosition(a,o).setLocalScale(s,l);}},{key:"setLocalMatrix",value:function(n){var r=tS(n),i=(0,q.default)(r,5),a=i[0],o=i[1],s=i[2],l=i[3],u=i[4];this.setLocalEulerAngles(u).setLocalPosition(a,o).setLocalScale(s,l);}},{key:"show",value:function(){this.forEach(function(n){n.style.visibility="visible";});}},{key:"hide",value:function(){this.forEach(function(n){n.style.visibility="hidden";});}},{key:"getCount",value:function(){return this.childElementCount;}},{key:"getParent",value:function(){return this.parentElement;}},{key:"getChildren",value:function(){return this.children;}},{key:"getFirst",value:function(){return this.firstElementChild;}},{key:"getLast",value:function(){return this.lastElementChild;}},{key:"getChildByIndex",value:function(n){return this.children[n]||null;}},{key:"add",value:function(n,r){return this.appendChild(n,r);}},{key:"set",value:function(n,r){this.config[n]=r;}},{key:"get",value:function(n){return this.config[n];}},{key:"moveTo",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.setPosition(n,r,i),this;}},{key:"move",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.setPosition(n,r,i),this;}},{key:"setZIndex",value:function(n){return this.style.zIndex=n,this;}}]);}(aM);aN.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","display","draggable","droppable","fill","fillOpacity","fillRule","filter","increasedLineWidthForHitTesting","lineCap","lineDash","lineDashOffset","lineJoin","lineWidth","miterLimit","hitArea","offsetDistance","offsetPath","offsetX","offsetY","opacity","pointerEvents","shadowColor","shadowType","shadowBlur","shadowOffsetX","shadowOffsetY","stroke","strokeOpacity","strokeWidth","strokeLinecap","strokeLineJoin","strokeDasharray","strokeDashoffset","transform","transformOrigin","textTransform","visibility","zIndex"]);var aD=function(n){function r(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,F.default)(this,r),(0,G.default)(this,r,[(0,N.default)({type:e7.CIRCLE},n)]);}return(0,W.default)(r,n),(0,j.default)(r);}(aN);aD.PARSED_STYLE_LIST=new Set([].concat((0,U.default)(aN.PARSED_STYLE_LIST),["cx","cy","cz","r","isBillboard","isSizeAttenuation"]));var aF=["style"],aB=function(n){function r(){var n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.style,o=(0,e5.default)(i,aF);return(0,F.default)(this,r),(n=(0,G.default)(this,r,[(0,N.default)({style:a},o)])).isCustomElement=!0,n;}return(0,W.default)(r,n),(0,j.default)(r);}(aN);aB.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var aj=function(n){function r(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,F.default)(this,r),(0,G.default)(this,r,[(0,N.default)({type:e7.ELLIPSE},n)]);}return(0,W.default)(r,n),(0,j.default)(r);}(aN);aj.PARSED_STYLE_LIST=new Set([].concat((0,U.default)(aN.PARSED_STYLE_LIST),["cx","cy","cz","rx","ry","isBillboard","isSizeAttenuation"])),function(n){function r(){return(0,F.default)(this,r),(0,G.default)(this,r,[{type:e7.FRAGMENT}]);}return(0,W.default)(r,n),(0,j.default)(r);}(aN).PARSED_STYLE_LIST=new Set(["class","className"]);var az=function(n){function r(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,F.default)(this,r),(0,G.default)(this,r,[(0,N.default)({type:e7.GROUP},n)]);}return(0,W.default)(r,n),(0,j.default)(r);}(aN);az.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var aU=["style"],aV=function(n){function r(){var n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.style,o=(0,e5.default)(i,aU);return(0,F.default)(this,r),(n=(0,G.default)(this,r,[(0,N.default)({type:e7.HTML,style:a},o)])).cullable.enable=!1,n;}return(0,W.default)(r,n),(0,j.default)(r,[{key:"getDomElement",value:function(){return this.parsedStyle.$el;}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()];}},{key:"getLocalBounds",value:function(){if(this.parentNode){var n=et.invert(et.create(),this.parentNode.getWorldTransform()),r=this.getBounds();if(!tl.isEmpty(r)){var i=new tl;return i.setFromTransformedAABB(r,n),i;}}return this.getBounds();}}]);}(aN);aV.PARSED_STYLE_LIST=new Set([].concat((0,U.default)(aN.PARSED_STYLE_LIST),["x","y","$el","innerHTML","width","height"]));var aG=function(n){function r(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,F.default)(this,r),(0,G.default)(this,r,[(0,N.default)({type:e7.IMAGE},n)]);}return(0,W.default)(r,n),(0,j.default)(r);}(aN);aG.PARSED_STYLE_LIST=new Set([].concat((0,U.default)(aN.PARSED_STYLE_LIST),["x","y","z","src","width","height","isBillboard","billboardRotation","isSizeAttenuation","keepAspectRatio"]));var aH=["style"],aW=function(n){function r(){var n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.style,o=(0,e5.default)(i,aH);(0,F.default)(this,r),(n=(0,G.default)(this,r,[(0,N.default)({type:e7.LINE,style:(0,N.default)({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},a)},o)])).markerStartAngle=0,n.markerEndAngle=0;var s=n.parsedStyle,l=s.markerStart,u=s.markerEnd;return l&&aR(l)&&(n.markerStartAngle=l.getLocalEulerAngles(),n.appendChild(l)),u&&aR(u)&&(n.markerEndAngle=u.getLocalEulerAngles(),n.appendChild(u)),n.transformMarker(!0),n.transformMarker(!1),n;}return(0,W.default)(r,n),(0,j.default)(r,[{key:"attributeChangedCallback",value:function(n,r,i,a,o){"x1"===n||"y1"===n||"x2"===n||"y2"===n||"markerStartOffset"===n||"markerEndOffset"===n?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===n?(a&&aR(a)&&(this.markerStartAngle=0,a.remove()),o&&aR(o)&&(this.markerStartAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!0))):"markerEnd"===n&&(a&&aR(a)&&(this.markerEndAngle=0,a.remove()),o&&aR(o)&&(this.markerEndAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!1)));}},{key:"transformMarker",value:function(n){var r,i,a,o,s,l,u=this.parsedStyle,c=u.markerStart,f=u.markerEnd,d=u.markerStartOffset,h=u.markerEndOffset,p=u.x1,m=u.x2,g=u.y1,v=u.y2,y=n?c:f;if(y&&aR(y)){var _=0;n?(a=p,o=g,r=m-p,i=v-g,s=d||0,l=this.markerStartAngle):(a=m,o=v,r=p-m,i=g-v,s=h||0,l=this.markerEndAngle),_=Math.atan2(i,r),y.setLocalEulerAngles(180*_/Math.PI+l),y.setLocalPosition(a+Math.cos(_)*s,o+Math.sin(_)*s);}}},{key:"getPoint",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.parsedStyle,a=i.x1,o=i.y1,s=i.x2,l=i.y2,u=(0,eK.linePointAt)(a,o,s,l,n),c=u.x,f=u.y,d=K.transformMat4(K.create(),K.fromValues(c,f,0),r?this.getWorldTransform():this.getLocalTransform());return new td(d[0],d[1]);}},{key:"getPointAtLength",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPoint(n/this.getTotalLength(),r);}},{key:"getTotalLength",value:function(){var n=this.parsedStyle,r=n.x1,i=n.y1,a=n.x2,o=n.y2;return(0,eK.lineLength)(r,i,a,o);}}]);}(aN);aW.PARSED_STYLE_LIST=new Set([].concat((0,U.default)(aN.PARSED_STYLE_LIST),["x1","y1","x2","y2","z1","z2","isBillboard","isSizeAttenuation","markerStart","markerEnd","markerStartOffset","markerEndOffset"]));var aX=["style"],aq=function(n){function r(){var n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.style,o=(0,e5.default)(i,aX);(0,F.default)(this,r),(n=(0,G.default)(this,r,[(0,N.default)({type:e7.PATH,style:a,initialParsedStyle:{miterLimit:4,d:(0,N.default)({},tB)}},o)])).markerStartAngle=0,n.markerEndAngle=0,n.markerMidList=[];var s=n.parsedStyle,l=s.markerStart,u=s.markerEnd,c=s.markerMid;return l&&aR(l)&&(n.markerStartAngle=l.getLocalEulerAngles(),n.appendChild(l)),c&&aR(c)&&n.placeMarkerMid(c),u&&aR(u)&&(n.markerEndAngle=u.getLocalEulerAngles(),n.appendChild(u)),n.transformMarker(!0),n.transformMarker(!1),n;}return(0,W.default)(r,n),(0,j.default)(r,[{key:"attributeChangedCallback",value:function(n,r,i,a,o){"d"===n?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):"markerStartOffset"===n||"markerEndOffset"===n?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===n?(a&&aR(a)&&(this.markerStartAngle=0,a.remove()),o&&aR(o)&&(this.markerStartAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!0))):"markerEnd"===n?(a&&aR(a)&&(this.markerEndAngle=0,a.remove()),o&&aR(o)&&(this.markerEndAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!1))):"markerMid"===n&&this.placeMarkerMid(o);}},{key:"transformMarker",value:function(n){var r,i,a,o,s,l,u=this.parsedStyle,c=u.markerStart,f=u.markerEnd,d=u.markerStartOffset,h=u.markerEndOffset,p=n?c:f;if(p&&aR(p)){var m=0;if(n){var g=this.getStartTangent(),v=(0,q.default)(g,2),y=v[0],_=v[1];a=_[0],o=_[1],r=y[0]-_[0],i=y[1]-_[1],s=d||0,l=this.markerStartAngle;}else{var b=this.getEndTangent(),x=(0,q.default)(b,2),E=x[0],w=x[1];a=w[0],o=w[1],r=E[0]-w[0],i=E[1]-w[1],s=h||0,l=this.markerEndAngle;}m=Math.atan2(i,r),p.setLocalEulerAngles(180*m/Math.PI+l),p.setLocalPosition(a+Math.cos(m)*s,o+Math.sin(m)*s);}}},{key:"placeMarkerMid",value:function(n){var r=this.parsedStyle.d.segments;if(this.markerMidList.forEach(function(n){n.remove();}),n&&aR(n))for(var i=1;i<r.length-1;i++){var a=(0,q.default)(r[i].currentPoint,2),o=a[0],s=a[1],l=1===i?n:n.cloneNode(!0);this.markerMidList.push(l),this.appendChild(l),l.setLocalPosition(o,s);}}},{key:"getTotalLength",value:function(){return rr(this);}},{key:"getPointAtLength",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=ew(this.parsedStyle.d.absolutePath,n,(0,ev.__assign)((0,ev.__assign)({},void 0),{bbox:!1,length:!0})).point,a=i.x,o=i.y,s=K.transformMat4(K.create(),K.fromValues(a,o,0),r?this.getWorldTransform():this.getLocalTransform());return new td(s[0],s[1]);}},{key:"getPoint",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPointAtLength(n*rr(this),r);}},{key:"getStartTangent",value:function(){var n=this.parsedStyle.d.segments,r=[];if(n.length>1){var i=n[0].currentPoint,a=n[1].currentPoint,o=n[1].startTangent;r=[],o?r.push([i[0]-o[0],i[1]-o[1]]):r.push([a[0],a[1]]),r.push([i[0],i[1]]);}return r;}},{key:"getEndTangent",value:function(){var n=this.parsedStyle.d.segments,r=n.length,i=[];if(r>1){var a=n[r-2].currentPoint,o=n[r-1].currentPoint,s=n[r-1].endTangent;i=[],s?i.push([o[0]-s[0],o[1]-s[1]]):i.push([a[0],a[1]]),i.push([o[0],o[1]]);}return i;}}]);}(aN);aq.PARSED_STYLE_LIST=new Set([].concat((0,U.default)(aN.PARSED_STYLE_LIST),["d","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard","isSizeAttenuation"]));var a$=["style"],aY=function(n){function r(){var n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.style,o=(0,e5.default)(i,a$);(0,F.default)(this,r),(n=(0,G.default)(this,r,[(0,N.default)({type:e7.POLYGON,style:a,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},o)])).markerStartAngle=0,n.markerEndAngle=0,n.markerMidList=[];var s=n.parsedStyle,l=s.markerStart,u=s.markerEnd,c=s.markerMid;return l&&aR(l)&&(n.markerStartAngle=l.getLocalEulerAngles(),n.appendChild(l)),c&&aR(c)&&n.placeMarkerMid(c),u&&aR(u)&&(n.markerEndAngle=u.getLocalEulerAngles(),n.appendChild(u)),n.transformMarker(!0),n.transformMarker(!1),n;}return(0,W.default)(r,n),(0,j.default)(r,[{key:"attributeChangedCallback",value:function(n,r,i,a,o){"points"===n?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):"markerStartOffset"===n||"markerEndOffset"===n?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===n?(a&&aR(a)&&(this.markerStartAngle=0,a.remove()),o&&aR(o)&&(this.markerStartAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!0))):"markerEnd"===n?(a&&aR(a)&&(this.markerEndAngle=0,a.remove()),o&&aR(o)&&(this.markerEndAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!1))):"markerMid"===n&&this.placeMarkerMid(o);}},{key:"transformMarker",value:function(n){var r,i,a,o,s,l,u=this.parsedStyle,c=u.markerStart,f=u.markerEnd,d=u.markerStartOffset,h=u.markerEndOffset,p=(u.points||{}).points,m=n?c:f;if(m&&aR(m)&&p){var g=0;if(a=p[0][0],o=p[0][1],n)r=p[1][0]-p[0][0],i=p[1][1]-p[0][1],s=d||0,l=this.markerStartAngle;else{var v=p.length;this.parsedStyle.isClosed?(r=p[v-1][0]-p[0][0],i=p[v-1][1]-p[0][1]):(a=p[v-1][0],o=p[v-1][1],r=p[v-2][0]-p[v-1][0],i=p[v-2][1]-p[v-1][1]),s=h||0,l=this.markerEndAngle;}g=Math.atan2(i,r),m.setLocalEulerAngles(180*g/Math.PI+l),m.setLocalPosition(a+Math.cos(g)*s,o+Math.sin(g)*s);}}},{key:"placeMarkerMid",value:function(n){var r=(this.parsedStyle.points||{}).points;if(this.markerMidList.forEach(function(n){n.remove();}),this.markerMidList=[],n&&aR(n)&&r)for(var i=1;i<(this.parsedStyle.isClosed?r.length:r.length-1);i++){var a=r[i][0],o=r[i][1],s=1===i?n:n.cloneNode(!0);this.markerMidList.push(s),this.appendChild(s),s.setLocalPosition(a,o);}}}]);}(aN);aY.PARSED_STYLE_LIST=new Set([].concat((0,U.default)(aN.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isClosed","isBillboard","isSizeAttenuation"]));var aZ=["style"],aK=function(n){function r(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.style,a=(0,e5.default)(n,aZ);return(0,F.default)(this,r),(0,G.default)(this,r,[(0,N.default)({type:e7.POLYLINE,style:i,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},a)]);}return(0,W.default)(r,n),(0,j.default)(r,[{key:"getTotalLength",value:function(){return 0===this.parsedStyle.points.totalLength&&(this.parsedStyle.points.totalLength=(0,eK.polylineLength)(this.parsedStyle.points.points)),this.parsedStyle.points.totalLength;}},{key:"getPointAtLength",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPoint(n/this.getTotalLength(),r);}},{key:"getPoint",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.parsedStyle.points.points;if(0===this.parsedStyle.points.segments.length){var a,o,s=[],l=0,u=this.getTotalLength();i.forEach(function(n,r){i[r+1]&&((a=[0,0])[0]=l/u,o=(0,eK.lineLength)(n[0],n[1],i[r+1][0],i[r+1][1]),l+=o,a[1]=l/u,s.push(a));}),this.parsedStyle.points.segments=s;}var c=0,f=0;this.parsedStyle.points.segments.forEach(function(r,i){n>=r[0]&&n<=r[1]&&(c=(n-r[0])/(r[1]-r[0]),f=i);});var d=(0,eK.linePointAt)(i[f][0],i[f][1],i[f+1][0],i[f+1][1],c),h=d.x,p=d.y,m=K.transformMat4(K.create(),K.fromValues(h,p,0),r?this.getWorldTransform():this.getLocalTransform());return new td(m[0],m[1]);}},{key:"getStartTangent",value:function(){var n=this.parsedStyle.points.points,r=[];return r.push([n[1][0],n[1][1]]),r.push([n[0][0],n[0][1]]),r;}},{key:"getEndTangent",value:function(){var n=this.parsedStyle.points.points,r=n.length-1,i=[];return i.push([n[r-1][0],n[r-1][1]]),i.push([n[r][0],n[r][1]]),i;}}]);}(aY);aK.PARSED_STYLE_LIST=new Set([].concat((0,U.default)(aY.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard"]));var aQ=function(n){function r(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,F.default)(this,r),(0,G.default)(this,r,[(0,N.default)({type:e7.RECT},n)]);}return(0,W.default)(r,n),(0,j.default)(r);}(aN);aQ.PARSED_STYLE_LIST=new Set([].concat((0,U.default)(aN.PARSED_STYLE_LIST),["x","y","z","width","height","isBillboard","isSizeAttenuation","radius"]));var aJ=["style"],a0=function(n){function r(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.style,a=(0,e5.default)(n,aJ);return(0,F.default)(this,r),(0,G.default)(this,r,[(0,N.default)({type:e7.TEXT,style:(0,N.default)({fill:"black"},i)},a)]);}return(0,W.default)(r,n),(0,j.default)(r,[{key:"getComputedTextLength",value:function(){var n;return this.getGeometryBounds(),(null===(n=this.parsedStyle.metrics)||void 0===n?void 0:n.maxLineWidth)||0;}},{key:"getLineBoundingRects",value:function(){var n;return this.getGeometryBounds(),(null===(n=this.parsedStyle.metrics)||void 0===n?void 0:n.lineMetrics)||[];}},{key:"isOverflowing",value:function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing;}}]);}(aN);a0.PARSED_STYLE_LIST=new Set([].concat((0,U.default)(aN.PARSED_STYLE_LIST),["x","y","z","isBillboard","billboardRotation","isSizeAttenuation","text","textAlign","textBaseline","fontStyle","fontSize","fontFamily","fontWeight","fontVariant","lineHeight","letterSpacing","leading","wordWrap","wordWrapWidth","maxLines","textOverflow","isOverflowing","textPath","textDecorationLine","textDecorationColor","textDecorationStyle","textPathSide","textPathStartOffset","metrics","dx","dy"]));var a1=(0,j.default)(function n(){(0,F.default)(this,n),this.registry={},this.define(e7.CIRCLE,aD),this.define(e7.ELLIPSE,aj),this.define(e7.RECT,aQ),this.define(e7.IMAGE,aG),this.define(e7.LINE,aW),this.define(e7.GROUP,az),this.define(e7.PATH,aq),this.define(e7.POLYGON,aY),this.define(e7.POLYLINE,aK),this.define(e7.TEXT,a0),this.define(e7.HTML,aV);},[{key:"define",value:function(n,r){this.registry[n]=r;}},{key:"get",value:function(n){return this.registry[n];}}]),a2={number:function(n){return new nT(n);},percent:function(n){return new nT(n,"%");},px:function(n){return new nT(n,"px");},em:function(n){return new nT(n,"em");},rem:function(n){return new nT(n,"rem");},deg:function(n){return new nT(n,"deg");},grad:function(n){return new nT(n,"grad");},rad:function(n){return new nT(n,"rad");},turn:function(n){return new nT(n,"turn");},s:function(n){return new nT(n,"s");},ms:function(n){return new nT(n,"ms");},registerProperty:function(n){var r=n.name,i=n.inherits,a=n.interpolable,o=n.initialValue,s=n.syntax;aE.styleValueRegistry.registerMetadata({n:r,inh:i,int:a,d:o,syntax:s});},registerLayout:function(n,r){aE.layoutRegistry.registerLayout(n,r);}},a3=function(n){var r,i;function a(){(0,F.default)(this,a),(n=(0,G.default)(this,a)).defaultView=null,n.ownerDocument=null,n.nodeName="document";try{n.timeline=new aE.AnimationTimeline(n);}catch(n){}var n,r={};return rB.forEach(function(n){var i=n.n,a=n.inh,o=n.d;a&&o&&(r[i]=(0,eV.default)(o)?o(e7.GROUP):o);}),n.documentElement=new az({id:"g-root",style:r}),n.documentElement.ownerDocument=n,n.documentElement.parentNode=n,n.childNodes=[n.documentElement],n;}return(0,W.default)(a,n),(0,j.default)(a,[{key:"children",get:function(){return this.childNodes;}},{key:"childElementCount",get:function(){return this.childNodes.length;}},{key:"firstElementChild",get:function(){return this.firstChild;}},{key:"lastElementChild",get:function(){return this.lastChild;}},{key:"createElement",value:function(n,r){if("svg"===n)return this.documentElement;var i=this.defaultView.customElements.get(n);i||(console.warn("Unsupported tagName: ",n),i="tspan"===n?a0:az);var a=new i(r);return a.ownerDocument=this,a;}},{key:"createElementNS",value:function(n,r,i){return this.createElement(r,i);}},{key:"cloneNode",value:function(n){throw Error(tp);}},{key:"destroy",value:function(){try{this.documentElement.destroyChildren(),this.timeline.destroy();}catch(n){}}},{key:"elementsFromBBox",value:function(n,r,i,a){var o=this.defaultView.context.rBushRoot.search({minX:n,minY:r,maxX:i,maxY:a}),s=[];return o.forEach(function(n){var r=n.displayObject,i=r.parsedStyle.pointerEvents,a=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(void 0===i?"auto":i);(!a||a&&r.isVisible())&&!r.isCulled()&&r.isInteractive()&&s.push(r);}),s.sort(function(n,r){return r.sortable.renderOrder-n.sortable.renderOrder;}),s;}},{key:"elementFromPointSync",value:function(n,r){var i=this.defaultView.canvas2Viewport({x:n,y:r}),a=i.x,o=i.y,s=this.defaultView.getConfig(),l=s.width,u=s.height;if(a<0||o<0||a>l||o>u)return null;var c=this.defaultView.viewport2Client({x:a,y:o}),f=c.x,d=c.y,h=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:n,y:r,viewportX:a,viewportY:o,clientX:f,clientY:d},picked:[]}).picked;return h&&h[0]||this.documentElement;}},{key:"elementFromPoint",value:(r=(0,e1.default)((0,eJ.default)().mark(function n(r,i){var a,o,s,l,u,c,f,d,h,p;return(0,eJ.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(o=(a=this.defaultView.canvas2Viewport({x:r,y:i})).x,s=a.y,u=(l=this.defaultView.getConfig()).width,c=l.height,!(o<0||s<0||o>u||s>c)){n.next=4;break;}return n.abrupt("return",null);case 4:return d=(f=this.defaultView.viewport2Client({x:o,y:s})).x,h=f.y,n.next=7,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:r,y:i,viewportX:o,viewportY:s,clientX:d,clientY:h},picked:[]});case 7:return p=n.sent.picked,n.abrupt("return",p&&p[0]||this.documentElement);case 10:case"end":return n.stop();}},n,this);})),function(n,i){return r.apply(this,arguments);})},{key:"elementsFromPointSync",value:function(n,r){var i=this.defaultView.canvas2Viewport({x:n,y:r}),a=i.x,o=i.y,s=this.defaultView.getConfig(),l=s.width,u=s.height;if(a<0||o<0||a>l||o>u)return[];var c=this.defaultView.viewport2Client({x:a,y:o}),f=c.x,d=c.y,h=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:n,y:r,viewportX:a,viewportY:o,clientX:f,clientY:d},picked:[]}).picked;return h[h.length-1]!==this.documentElement&&h.push(this.documentElement),h;}},{key:"elementsFromPoint",value:(i=(0,e1.default)((0,eJ.default)().mark(function n(r,i){var a,o,s,l,u,c,f,d,h,p;return(0,eJ.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(o=(a=this.defaultView.canvas2Viewport({x:r,y:i})).x,s=a.y,u=(l=this.defaultView.getConfig()).width,c=l.height,!(o<0||s<0||o>u||s>c)){n.next=4;break;}return n.abrupt("return",[]);case 4:return d=(f=this.defaultView.viewport2Client({x:o,y:s})).x,h=f.y,n.next=7,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:r,y:i,viewportX:o,viewportY:s,clientX:d,clientY:h},picked:[]});case 7:return(p=n.sent.picked)[p.length-1]!==this.documentElement&&p.push(this.documentElement),n.abrupt("return",p);case 11:case"end":return n.stop();}},n,this);})),function(n,r){return i.apply(this,arguments);})},{key:"appendChild",value:function(n,r){throw Error(tm);}},{key:"insertBefore",value:function(n,r){throw Error(tm);}},{key:"removeChild",value:function(n,r){throw Error(tm);}},{key:"replaceChild",value:function(n,r,i){throw Error(tm);}},{key:"append",value:function(){throw Error(tm);}},{key:"prepend",value:function(){throw Error(tm);}},{key:"getElementById",value:function(n){return this.documentElement.getElementById(n);}},{key:"getElementsByName",value:function(n){return this.documentElement.getElementsByName(n);}},{key:"getElementsByTagName",value:function(n){return this.documentElement.getElementsByTagName(n);}},{key:"getElementsByClassName",value:function(n){return this.documentElement.getElementsByClassName(n);}},{key:"querySelector",value:function(n){return this.documentElement.querySelector(n);}},{key:"querySelectorAll",value:function(n){return this.documentElement.querySelectorAll(n);}},{key:"find",value:function(n){return this.documentElement.find(n);}},{key:"findAll",value:function(n){return this.documentElement.findAll(n);}}]);}(iK),a4=function(){function n(r){(0,F.default)(this,n),this.strategies=r;}return(0,j.default)(n,[{key:"apply",value:function(r){var i=r.camera,a=r.renderingService,o=r.renderingContext,s=this.strategies;a.hooks.cull.tap(n.tag,function(n){if(n){var r=n.cullable;return(0===s.length?r.visible=o.unculledEntities.indexOf(n.entity)>-1:r.visible=s.every(function(r){return r.isVisible(i,n);}),!n.isCulled()&&n.isVisible())?n:(n.dispatchEvent(new i$(i4.CULLED)),null);}return n;}),a.hooks.afterRender.tap(n.tag,function(n){n.cullable.visibilityPlaneMask=-1;});}}]);}();a4.tag="Culling";var a5=function(){function n(){var r=this;(0,F.default)(this,n),this.autoPreventDefault=!1,this.rootPointerEvent=new iX(null),this.rootWheelEvent=new iq(null),this.onPointerMove=function(n){var i=null===(a=r.context.renderingContext.root)||void 0===a||null===(a=a.ownerDocument)||void 0===a?void 0:a.defaultView;if(!i.supportsTouchEvents||"touch"!==n.pointerType){var a,o,s=r.normalizeToPointerEvent(n,i),l=(0,e3.default)(s);try{for(l.s();!(o=l.n()).done;){var u=o.value,c=r.bootstrapEvent(r.rootPointerEvent,u,i,n);r.context.eventService.mapEvent(c);}}catch(n){l.e(n);}finally{l.f();}r.setCursor(r.context.eventService.cursor);}},this.onClick=function(n){var i,a,o=null===(i=r.context.renderingContext.root)||void 0===i||null===(i=i.ownerDocument)||void 0===i?void 0:i.defaultView,s=r.normalizeToPointerEvent(n,o),l=(0,e3.default)(s);try{for(l.s();!(a=l.n()).done;){var u=a.value,c=r.bootstrapEvent(r.rootPointerEvent,u,o,n);r.context.eventService.mapEvent(c);}}catch(n){l.e(n);}finally{l.f();}r.setCursor(r.context.eventService.cursor);};}return(0,j.default)(n,[{key:"apply",value:function(r){var i=this;this.context=r;var a=r.renderingService,o=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(n){return i.context.renderingService.hooks.pickSync.call({position:n,picked:[],topmost:!0}).picked[0]||null;}),a.hooks.pointerWheel.tap(n.tag,function(n){var r=i.normalizeWheelEvent(n);i.context.eventService.mapEvent(r);}),a.hooks.pointerDown.tap(n.tag,function(n){if(!o.supportsTouchEvents||"touch"!==n.pointerType){var r=i.normalizeToPointerEvent(n,o);i.autoPreventDefault&&r[0].isNormalized&&(n.cancelable||!("cancelable"in n))&&n.preventDefault();var a,s=(0,e3.default)(r);try{for(s.s();!(a=s.n()).done;){var l=a.value,u=i.bootstrapEvent(i.rootPointerEvent,l,o,n);i.context.eventService.mapEvent(u);}}catch(n){s.e(n);}finally{s.f();}i.setCursor(i.context.eventService.cursor);}}),a.hooks.pointerUp.tap(n.tag,function(n){if(!o.supportsTouchEvents||"touch"!==n.pointerType){var r,a=i.context.contextService.getDomElement(),s=i.context.eventService.isNativeEventFromCanvas(a,n)?"":"outside",l=i.normalizeToPointerEvent(n,o),u=(0,e3.default)(l);try{for(u.s();!(r=u.n()).done;){var c=r.value,f=i.bootstrapEvent(i.rootPointerEvent,c,o,n);f.type+=s,i.context.eventService.mapEvent(f);}}catch(n){u.e(n);}finally{u.f();}i.setCursor(i.context.eventService.cursor);}}),a.hooks.pointerMove.tap(n.tag,this.onPointerMove),a.hooks.pointerOver.tap(n.tag,this.onPointerMove),a.hooks.pointerOut.tap(n.tag,this.onPointerMove),a.hooks.click.tap(n.tag,this.onClick),a.hooks.pointerCancel.tap(n.tag,function(n){var r,a=i.normalizeToPointerEvent(n,o),s=(0,e3.default)(a);try{for(s.s();!(r=s.n()).done;){var l=r.value,u=i.bootstrapEvent(i.rootPointerEvent,l,o,n);i.context.eventService.mapEvent(u);}}catch(n){s.e(n);}finally{s.f();}i.setCursor(i.context.eventService.cursor);});}},{key:"bootstrapEvent",value:function(n,r,i,a){n.view=i,n.originalEvent=null,n.nativeEvent=a,n.pointerId=r.pointerId,n.width=r.width,n.height=r.height,n.isPrimary=r.isPrimary,n.pointerType=r.pointerType,n.pressure=r.pressure,n.tangentialPressure=r.tangentialPressure,n.tiltX=r.tiltX,n.tiltY=r.tiltY,n.twist=r.twist,this.transferMouseData(n,r);var o=this.context.eventService.client2Viewport({x:r.clientX,y:r.clientY}),s=o.x,l=o.y;n.viewport.x=s,n.viewport.y=l;var u=this.context.eventService.viewport2Canvas(n.viewport),c=u.x,f=u.y;return n.canvas.x=c,n.canvas.y=f,n.global.copyFrom(n.canvas),n.offset.copyFrom(n.canvas),n.isTrusted=a.isTrusted,"pointerleave"===n.type&&(n.type="pointerout"),n.type.startsWith("mouse")&&(n.type=n.type.replace("mouse","pointer")),n.type.startsWith("touch")&&(n.type=ir[n.type]||n.type),n;}},{key:"normalizeWheelEvent",value:function(n){var r=this.rootWheelEvent;this.transferMouseData(r,n),r.deltaMode=n.deltaMode,r.deltaX=n.deltaX,r.deltaY=n.deltaY,r.deltaZ=n.deltaZ;var i=this.context.eventService.client2Viewport({x:n.clientX,y:n.clientY}),a=i.x,o=i.y;r.viewport.x=a,r.viewport.y=o;var s=this.context.eventService.viewport2Canvas(r.viewport),l=s.x,u=s.y;return r.canvas.x=l,r.canvas.y=u,r.global.copyFrom(r.canvas),r.offset.copyFrom(r.canvas),r.nativeEvent=n,r.type=n.type,r;}},{key:"transferMouseData",value:function(n,r){n.isTrusted=r.isTrusted,n.srcElement=r.srcElement,n.timeStamp=ii.now(),n.type=r.type,n.altKey=r.altKey,n.metaKey=r.metaKey,n.shiftKey=r.shiftKey,n.ctrlKey=r.ctrlKey,n.button=r.button,n.buttons=r.buttons,n.client.x=r.clientX,n.client.y=r.clientY,n.movement.x=r.movementX,n.movement.y=r.movementY,n.page.x=r.pageX,n.page.y=r.pageY,n.screen.x=r.screenX,n.screen.y=r.screenY,n.relatedTarget=null;}},{key:"setCursor",value:function(n){this.context.contextService.applyCursorStyle(n||this.context.config.cursor||"default");}},{key:"normalizeToPointerEvent",value:function(n,r){var i=[];if(r.isTouchEvent(n))for(var a=0;a<n.changedTouches.length;a++){var o=n.changedTouches[a];(0,eN.default)(o.button)&&(o.button=0),(0,eN.default)(o.buttons)&&(o.buttons=1),(0,eN.default)(o.isPrimary)&&(o.isPrimary=1===n.touches.length&&"touchstart"===n.type),(0,eN.default)(o.width)&&(o.width=o.radiusX||1),(0,eN.default)(o.height)&&(o.height=o.radiusY||1),(0,eN.default)(o.tiltX)&&(o.tiltX=0),(0,eN.default)(o.tiltY)&&(o.tiltY=0),(0,eN.default)(o.pointerType)&&(o.pointerType="touch"),(0,eN.default)(o.pointerId)&&(o.pointerId=o.identifier||0),(0,eN.default)(o.pressure)&&(o.pressure=o.force||.5),(0,eN.default)(o.twist)&&(o.twist=0),(0,eN.default)(o.tangentialPressure)&&(o.tangentialPressure=0),o.isNormalized=!0,o.type=n.type,i.push(o);}else r.isMouseEvent(n)&&((0,eN.default)(n.isPrimary)&&(n.isPrimary=!0),(0,eN.default)(n.width)&&(n.width=1),(0,eN.default)(n.height)&&(n.height=1),(0,eN.default)(n.tiltX)&&(n.tiltX=0),(0,eN.default)(n.tiltY)&&(n.tiltY=0),(0,eN.default)(n.pointerType)&&(n.pointerType="mouse"),(0,eN.default)(n.pointerId)&&(n.pointerId=1),(0,eN.default)(n.pressure)&&(n.pressure=.5),(0,eN.default)(n.twist)&&(n.twist=0),(0,eN.default)(n.tangentialPressure)&&(n.tangentialPressure=0),n.isNormalized=!0),i.push(n);return i;}}]);}();a5.tag="Event";var a6=[e7.CIRCLE,e7.ELLIPSE,e7.IMAGE,e7.RECT,e7.LINE,e7.POLYLINE,e7.POLYGON,e7.TEXT,e7.PATH,e7.HTML],a8=(0,j.default)(function n(){(0,F.default)(this,n);},[{key:"isVisible",value:function(n,r){var i,a=r.cullable;if(!a.enable)return!0;var o=r.getRenderBounds();if(tl.isEmpty(o))return!1;var s=n.getFrustum(),l=null===(i=r.parentNode)||void 0===i||null===(i=i.cullable)||void 0===i?void 0:i.visibilityPlaneMask;return a.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(r,o,l||tc.INDETERMINATE,s.planes),a.visible=a.visibilityPlaneMask!==tc.OUTSIDE,a.visible;}},{key:"computeVisibilityWithPlaneMask",value:function(n,r,i,a){if(i===tc.OUTSIDE||i===tc.INSIDE)return i;for(var o=tc.INSIDE,s=a6.indexOf(n.nodeName)>-1,l=0,u=a.length;l<u;++l){var c=1<<l;if((i&c)!=0&&(!s||4!==l&&5!==l)){var f=a[l],d=f.normal,h=f.distance;if(K.dot(d,r.getPositiveFarPoint(a[l]))+h<0)return tc.OUTSIDE;K.dot(d,r.getNegativeFarPoint(a[l]))+h<0&&(o|=c);}}return o;}}]),a7=function(){function n(){(0,F.default)(this,n),this.syncTasks=new Map,this.isFirstTimeRendering=!0,this.syncing=!1,this.isFirstTimeRenderingFinished=!1;}return(0,j.default)(n,[{key:"apply",value:function(r){var i,a=this,o=r.renderingService,s=r.renderingContext,l=r.rBushRoot,u=s.root.ownerDocument.defaultView;this.rBush=l;var c=function(n){n.target.renderable.dirty=!0,o.dirtify();},f=function(n){a.syncTasks.set(n.target,n.detail.affectChildren),o.dirtify();},d=function(n){var r=n.target;aE.enableSizeAttenuation&&aE.styleValueRegistry.updateSizeAttenuation(r,u.getCamera().getZoom());},h=function(n){var r=n.target,i=r.rBushNode;i.aabb&&a.rBush.remove(i.aabb),a.syncTasks.delete(r),aE.sceneGraphService.dirtifyToRoot(r),o.dirtify();};o.hooks.init.tap(n.tag,function(){u.addEventListener(i4.MOUNTED,d),u.addEventListener(i4.UNMOUNTED,h),u.addEventListener(i4.ATTR_MODIFIED,c),u.addEventListener(i4.BOUNDS_CHANGED,f);}),o.hooks.destroy.tap(n.tag,function(){u.removeEventListener(i4.MOUNTED,d),u.removeEventListener(i4.UNMOUNTED,h),u.removeEventListener(i4.ATTR_MODIFIED,c),u.removeEventListener(i4.BOUNDS_CHANGED,f),a.syncTasks.clear();});var p=null!==(i=aE.globalThis.requestIdleCallback)&&void 0!==i?i:ig.bind(aE.globalThis);o.hooks.endFrame.tap(n.tag,function(){a.isFirstTimeRendering?(a.isFirstTimeRendering=!1,a.syncing=!0,p(function(){a.syncRTree(!0),a.isFirstTimeRenderingFinished=!0;})):a.syncRTree();});}},{key:"syncNode",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n.isConnected){var i=n.rBushNode;i.aabb&&this.rBush.remove(i.aabb);var a=n.getRenderBounds();if(a){var o=n.renderable;r&&(o.dirtyRenderBounds||(o.dirtyRenderBounds=new tl),o.dirtyRenderBounds.update(a.center,a.halfExtents));var s=a.getMin(),l=(0,q.default)(s,2),u=l[0],c=l[1],f=a.getMax(),d=(0,q.default)(f,2),h=d[0],p=d[1];i.aabb||(i.aabb={}),i.aabb.displayObject=n,i.aabb.minX=u,i.aabb.minY=c,i.aabb.maxX=h,i.aabb.maxY=p;}if(i.aabb&&!isNaN(i.aabb.maxX)&&!isNaN(i.aabb.maxX)&&!isNaN(i.aabb.minX)&&!isNaN(i.aabb.minY))return i.aabb;}}},{key:"syncRTree",value:function(){var n=this,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(r||!this.syncing&&0!==this.syncTasks.size){this.syncing=!0;var i=[],a=new Set,o=function(o){if(!a.has(o)&&o.renderable){var s=n.syncNode(o,r);s&&(i.push(s),a.add(o));}};this.syncTasks.forEach(function(n,r){n&&r.forEach(o);for(var i=r;i;)o(i),i=i.parentElement;}),this.rBush.load(i),i.length=0,this.syncing=!1;}}}]);}();a7.tag="Prepare";var a9=((R={}).READY="ready",R.BEFORE_RENDER="beforerender",R.RERENDER="rerender",R.AFTER_RENDER="afterrender",R.BEFORE_DESTROY="beforedestroy",R.AFTER_DESTROY="afterdestroy",R.RESIZE="resize",R.DIRTY_RECTANGLE="dirtyrectangle",R.RENDERER_CHANGED="rendererchanged",R),oe=new i$(i4.MOUNTED),ot=new i$(i4.UNMOUNTED),on=new i$(a9.BEFORE_RENDER),or=new i$(a9.RERENDER),oi=new i$(a9.AFTER_RENDER),oa=function(n){function r(n){(0,F.default)(this,r),(o=(0,G.default)(this,r)).Element=aN,o.inited=!1,o.context={};var i,a,o,s=n.container,l=n.canvas,u=n.renderer,c=n.width,f=n.height,d=n.background,h=n.cursor,p=n.supportsMutipleCanvasesInOneContainer,m=n.cleanUpOnDestroy,g=void 0===m||m,v=n.offscreenCanvas,y=n.devicePixelRatio,_=n.requestAnimationFrame,b=n.cancelAnimationFrame,x=n.createImage,E=n.supportsTouchEvents,w=n.supportsPointerEvents,S=n.isTouchEvent,T=n.isMouseEvent,A=n.dblClickSpeed,C=c,O=f,M=y||r8&&window.devicePixelRatio||1;return M=M>=1?Math.ceil(M):1,l&&(C=c||("auto"===(i=it(l,"width"))?l.offsetWidth:parseFloat(i))||l.width/M,O=f||("auto"===(a=it(l,"height"))?l.offsetHeight:parseFloat(a))||l.height/M),o.customElements=new a1,o.devicePixelRatio=M,o.requestAnimationFrame=null!=_?_:ig.bind(aE.globalThis),o.cancelAnimationFrame=null!=b?b:iv.bind(aE.globalThis),o.supportsTouchEvents=null!=E?E:"ontouchstart"in aE.globalThis,o.supportsPointerEvents=null!=w?w:!!aE.globalThis.PointerEvent,o.isTouchEvent=null!=S?S:function(n){return o.supportsTouchEvents&&n instanceof aE.globalThis.TouchEvent;},o.isMouseEvent=null!=T?T:function(n){return!aE.globalThis.MouseEvent||n instanceof aE.globalThis.MouseEvent&&(!o.supportsPointerEvents||!(n instanceof aE.globalThis.PointerEvent));},v&&(aE.offscreenCanvas=v),o.document=new a3,o.document.defaultView=o,p||function(n,r,i){if(n){var a="string"==typeof n?document.getElementById(n):n;r6.has(a)&&r6.get(a).destroy(i),r6.set(a,r);}}(s,o,g),o.initRenderingContext((0,N.default)((0,N.default)({},n),{},{width:C,height:O,background:null!=d?d:"transparent",cursor:null!=h?h:"default",cleanUpOnDestroy:g,devicePixelRatio:M,requestAnimationFrame:o.requestAnimationFrame,cancelAnimationFrame:o.cancelAnimationFrame,supportsTouchEvents:o.supportsTouchEvents,supportsPointerEvents:o.supportsPointerEvents,isTouchEvent:o.isTouchEvent,isMouseEvent:o.isMouseEvent,dblClickSpeed:null!=A?A:200,createImage:null!=x?x:function(){return new window.Image;}})),o.initDefaultCamera(C,O,u.clipSpaceNearZ),o.initRenderer(u,!0),o;}return(0,W.default)(r,n),(0,j.default)(r,[{key:"initRenderingContext",value:function(n){this.context.config=n,this.context.renderingContext={root:this.document.documentElement,renderListCurrentFrame:[],unculledEntities:[],renderReasons:new Set,force:!1,dirty:!1};}},{key:"initDefaultCamera",value:function(n,r,i){var a=this,o=new aE.CameraContribution;o.clipSpaceNearZ=i,o.setType(tP.EXPLORING,tk.DEFAULT).setPosition(n/2,r/2,500).setFocalPoint(n/2,r/2,0).setOrthographic(-(n/2),n/2,r/2,-(r/2),.1,1e3),o.canvas=this,o.eventEmitter.on(tL.UPDATED,function(){a.context.renderingContext.renderReasons.add(i0.CAMERA_CHANGED),aE.enableSizeAttenuation&&a.getConfig().renderer.getConfig().enableSizeAttenuation&&a.updateSizeAttenuation();}),this.context.camera=o;}},{key:"updateSizeAttenuation",value:function(){var n=this.getCamera().getZoom();this.document.documentElement.forEach(function(r){aE.styleValueRegistry.updateSizeAttenuation(r,n);});}},{key:"getConfig",value:function(){return this.context.config;}},{key:"getRoot",value:function(){return this.document.documentElement;}},{key:"getCamera",value:function(){return this.context.camera;}},{key:"getContextService",value:function(){return this.context.contextService;}},{key:"getEventService",value:function(){return this.context.eventService;}},{key:"getRenderingService",value:function(){return this.context.renderingService;}},{key:"getRenderingContext",value:function(){return this.context.renderingContext;}},{key:"getStats",value:function(){return this.getRenderingService().getStats();}},{key:"ready",get:function(){var n=this;return!this.readyPromise&&(this.readyPromise=new Promise(function(r){n.resolveReadyPromise=function(){r(n);};}),this.inited&&this.resolveReadyPromise()),this.readyPromise;}},{key:"destroy",value:function(){var n=!(arguments.length>0)||void 0===arguments[0]||arguments[0],r=arguments.length>1?arguments[1]:void 0;ns.clearCache(),r||this.dispatchEvent(new i$(a9.BEFORE_DESTROY)),this.frameId&&this.cancelAnimationFrame(this.frameId);var i=this.getRoot();n&&(this.unmountChildren(i),this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),this.context.rBushRoot&&this.context.rBushRoot.clear(),r||this.dispatchEvent(new i$(a9.AFTER_DESTROY));var a=function(n){n.currentTarget=null,n.manager=null,n.target=null,n.relatedNode=null;};a(oe),a(ot),a(on),a(or),a(oi),a(ak),a(aA),a(aC),a(aO);}},{key:"changeSize",value:function(n,r){this.resize(n,r);}},{key:"resize",value:function(n,r){var i=this.context.config;i.width=n,i.height=r,this.getContextService().resize(n,r);var a=this.context.camera,o=a.getProjectionMode();a.setPosition(n/2,r/2,500).setFocalPoint(n/2,r/2,0),o===tI.ORTHOGRAPHIC?a.setOrthographic(-(n/2),n/2,r/2,-(r/2),a.getNear(),a.getFar()):a.setAspect(n/r),this.dispatchEvent(new i$(a9.RESIZE,{width:n,height:r}));}},{key:"appendChild",value:function(n,r){return this.document.documentElement.appendChild(n,r);}},{key:"insertBefore",value:function(n,r){return this.document.documentElement.insertBefore(n,r);}},{key:"removeChild",value:function(n){return this.document.documentElement.removeChild(n);}},{key:"removeChildren",value:function(){this.document.documentElement.removeChildren();}},{key:"destroyChildren",value:function(){this.document.documentElement.destroyChildren();}},{key:"render",value:function(n){var r=this;n&&(on.detail=n,oi.detail=n),this.dispatchEvent(on),this.getRenderingService().render(this.getConfig(),n,function(){r.dispatchEvent(or);}),this.dispatchEvent(oi);}},{key:"run",value:function(){var n=this,r=function(i,a){n.render(a),n.frameId=n.requestAnimationFrame(r);};r();}},{key:"initRenderer",value:function(n){var r=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!n)throw Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new e8,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new a5,new a7,new a4([new a8])),this.loadRendererContainerModule(n),this.context.contextService=new this.context.ContextService((0,N.default)((0,N.default)({},aE),this.context)),this.context.renderingService=new i1(aE,this.context),this.context.eventService=new iQ(aE,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(n,i,!0)):this.context.contextService.initAsync().then(function(){r.initRenderingService(n,i);}).catch(function(n){console.error(n);});}},{key:"initRenderingService",value:function(n){var r=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.context.renderingService.init(function(){r.inited=!0,i?a?r.requestAnimationFrame(function(){r.dispatchEvent(new i$(a9.READY));}):r.dispatchEvent(new i$(a9.READY)):r.dispatchEvent(new i$(a9.RENDERER_CHANGED)),r.readyPromise&&r.resolveReadyPromise(),i||r.getRoot().forEach(function(n){var r=n.renderable;r&&(r.renderBoundsDirty=!0,r.boundsDirty=!0,r.dirty=!0);}),r.mountChildren(r.getRoot()),n.getConfig().enableAutoRendering&&r.run();});}},{key:"loadRendererContainerModule",value:function(n){var r=this;n.getPlugins().forEach(function(n){n.context=r.context,n.init(aE);});}},{key:"setRenderer",value:function(n){var r=this.getConfig();if(r.renderer!==n){var i=r.renderer;r.renderer=n,this.destroy(!1,!0),(0,U.default)((null==i?void 0:i.getPlugins())||[]).reverse().forEach(function(n){n.destroy(aE);}),this.initRenderer(n);}}},{key:"setCursor",value:function(n){this.getConfig().cursor=n,this.getContextService().applyCursorStyle(n);}},{key:"unmountChildren",value:function(n){var r=this;n.childNodes.forEach(function(n){r.unmountChildren(n);}),this.inited&&(n.isMutationObserved?n.dispatchEvent(ot):(ot.target=n,this.dispatchEvent(ot,!0)),n!==this.document.documentElement&&(n.ownerDocument=null),n.isConnected=!1),n.isCustomElement&&n.disconnectedCallback&&n.disconnectedCallback();}},{key:"mountChildren",value:function(n){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ia(n);this.inited?n.isConnected||(n.ownerDocument=this.document,n.isConnected=!0,i||(n.isMutationObserved?n.dispatchEvent(oe):(oe.target=n,this.dispatchEvent(oe,!0)))):console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",n.nodeName),n.childNodes.forEach(function(n){r.mountChildren(n,i);}),n.isCustomElement&&n.connectedCallback&&n.connectedCallback();}},{key:"mountFragment",value:function(n){this.mountChildren(n,!1);}},{key:"client2Viewport",value:function(n){return this.getEventService().client2Viewport(n);}},{key:"viewport2Client",value:function(n){return this.getEventService().viewport2Client(n);}},{key:"viewport2Canvas",value:function(n){return this.getEventService().viewport2Canvas(n);}},{key:"canvas2Viewport",value:function(n){return this.getEventService().canvas2Viewport(n);}},{key:"getPointByClient",value:function(n,r){return this.client2Viewport({x:n,y:r});}},{key:"getClientByPoint",value:function(n,r){return this.viewport2Client({x:n,y:r});}}]);}(iZ);},d6067cfe:function(n,r,i){var a=i("edf69913"),o=a?a.prototype:void 0,s=o?o.valueOf:void 0;n.exports=function(n){return s?Object(s.call(n)):{};};},d61866bb:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{HeatmapLayer:function(){return D;},MapboxScene:function(){return g;},PointLayer:function(){return N;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("d1751d7c")._(i("b6d05578"),r),l=i("c7053f7d"),u=i("ff2c8414"),c=i("609f48be"),f=o._(c);function d(n){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n;}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n;})(n);}function h(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable;})),i.push.apply(i,a);}return i;}function p(n){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?h(Object(i),!0).forEach(function(r){var a,o;a=r,o=i[r],(a=function(n){var r=function(n,r){if("object"!==d(n)||null===n)return n;var i=n[Symbol.toPrimitive];if(void 0!==i){var a=i.call(n,r||"default");if("object"!==d(a))return a;throw TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(n);}(n,"string");return"symbol"===d(r)?r:String(r);}(a))in n?Object.defineProperty(n,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[a]=o;}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(i,r));});}return n;}function m(n,r){(null==r||r>n.length)&&(r=n.length);for(var i=0,a=Array(r);i<r;i++)a[i]=n[i];return a;}var g=f.default.memo(function(n){var r,i=n.style,a=n.className,o=n.map,c=n.option,d=n.onSceneLoaded,h=(0,f.createRef)(),g=function(n){if(Array.isArray(n))return n;}(r=(0,f.useState)())||function(n,r){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=i){var a,o,s,l,u=[],c=!0,f=!1;try{for(s=(i=i.call(n)).next;!(c=(a=s.call(i)).done)&&(u.push(a.value),2!==u.length);c=!0);}catch(n){f=!0,o=n;}finally{try{if(!c&&null!=i.return&&(l=i.return(),Object(l)!==l))return;}finally{if(f)throw o;}}return u;}}(r,2)||function(n,r){if(n){if("string"==typeof n)return m(n,2);var i=Object.prototype.toString.call(n).slice(8,-1);if("Object"===i&&n.constructor&&(i=n.constructor.name),"Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return m(n,2);}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}(),v=g[0],y=g[1];return(0,f.useEffect)(function(){var n=new l.Scene(p(p({id:h.current},c),{},{map:new u.Mapbox(o)}));return n.on("loaded",function(){y(n),d&&d(n);}),function(){n.destroy();};},[]),(0,f.useEffect)(function(){v&&o.style&&v.setMapStyle(o.style);},[JSON.stringify(o.style)]),(0,f.useEffect)(function(){v&&o.zoom&&v.setZoom(o.zoom);},[o.zoom]),(0,f.useEffect)(function(){v&&o.center&&v.setCenter(o.center);},[JSON.stringify(o.center)]),(0,f.useEffect)(function(){v&&void 0!==o.pitch&&v.setPitch(o.pitch||0);},[o.pitch]),(0,f.useEffect)(function(){v&&o.rotation&&v.setRotation(o.rotation);},[o.rotation]),f.default.createElement(s.SceneContext.Provider,{value:v},(0,f.createElement)("div",{ref:h,style:i,className:a},v&&n.children));});i("792e90bc"),f.useEffect,f.useState;var v=(0,f.createContext)({}),y=i("23ec6b43"),_=a._(y),b=f.memo(function(n){var r=n.layer,i=n.active;return r.active(i.option),null;},_.default),x=f.memo(function(n){var r=n.layer,i=n.animate;return r.animate(i),null;},_.default),E=f.memo(function(n){var r=n.layer,i=n.color;return i.field?r.color(i.field,i.values):r.color(i.values),null;},_.default),w=f.memo(function(n){var r=n.layer,i=n.filter;return i.field&&r.filter(i.field,i.values),null;},_.default),S=f.memo(function(n){var r=n.layer,i=n.scale;return r.scale(i.values),null;},_.default),T=f.memo(function(n){var r=n.layer,i=n.select;return r.select(i.option),null;},_.default),A=f.memo(function(n){var r=n.layer,i=n.shape;return i.field?r.shape(i.field,i.values):r.shape(i.values),null;},_.default),C=f.memo(function(n){var r=n.layer,i=n.size;return i.field?r.size(i.field,i.values):r.size(i.values),null;},_.default),O=["data"],M=f.memo(function(n){var r=n.layer,i=n.source,a=i.data,o=function(n,r){if(null==n)return{};var i,a,o=function(n,r){if(null==n)return{};var i,a,o={},s=Object.keys(n);for(a=0;a<s.length;a++)i=s[a],r.indexOf(i)>=0||(o[i]=n[i]);return o;}(n,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(a=0;a<s.length;a++)i=s[a],!(r.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(o[i]=n[i]);}return o;}(i,O);return r.inited?r.setData(a,o):r.source(a,o),o.autoFit&&r.fitBounds(o&&o.fitBoundsOptions),null;},_.default);f.useEffect;var R=f.memo(function(n){var r=n.layer,i=n.style;return r.style(i),null;},_.default);function P(n,r){(null==r||r>n.length)&&(r=n.length);for(var i=0,a=Array(r);i<r;i++)a[i]=n[i];return a;}var k=f.useEffect,I=f.useState;function L(n,r){var i,a=r.source,o=r.color,u=r.shape,c=r.style,d=r.size,h=r.scale,p=r.active,m=r.select,g=r.filter,y=r.animate,_=r.options,O=r.onLayerLoaded,L=(0,s.useSceneValue)(),N=(function(n){if(Array.isArray(n))return n;}(i=I(function(){var r;switch(n){case"polygonLayer":default:r=new l.PolygonLayer(_);break;case"lineLayer":r=new l.LineLayer(_);break;case"pointLayer":r=new l.PointLayer(_);break;case"heatmapLayer":r=new l.HeatmapLayer(_);break;case"rasterLayer":r=new l.RasterLayer(_);break;case"imageLayer":r=new l.ImageLayer(_);break;case"citybuildingLayer":r=new l.CityBuildingLayer(_);}return r.on("inited",function(){O&&O(r,L);}),r;}))||function(n,r){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=i){var a,o,s,l,u=[],c=!0,f=!1;try{for(s=(i=i.call(n)).next;!(c=(a=s.call(i)).done)&&(u.push(a.value),1!==u.length);c=!0);}catch(n){f=!0,o=n;}finally{try{if(!c&&null!=i.return&&(l=i.return(),Object(l)!==l))return;}finally{if(f)throw o;}}return u;}}(i,1)||function(n,r){if(n){if("string"==typeof n)return P(n,1);var i=Object.prototype.toString.call(n).slice(8,-1);if("Object"===i&&n.constructor&&(i=n.constructor.name),"Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return P(n,1);}}(i,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}())[0];return k(function(){return L.addLayer(N),function(){L.removeLayer(N);};},[]),k(function(){N.inited&&_&&N.updateLayerConfig(_);},[null==_?void 0:_.minZoom,null==_?void 0:_.maxZoom,null==_?void 0:_.visible]),k(function(){N.inited&&(null==_?void 0:_.zIndex)&&N.setIndex(_.zIndex);},[null==_?void 0:_.zIndex]),k(function(){N.inited&&(null==_?void 0:_.blend)&&N.setBlend(_.blend);},[null==_?void 0:_.blend]),k(function(){L.render();}),f.createElement(v.Provider,{value:N},f.createElement(M,{layer:N,source:a}),h&&f.createElement(S,{layer:N,scale:h}),o&&f.createElement(E,{layer:N,color:o}),d&&f.createElement(C,{layer:N,size:d}),u&&f.createElement(A,{layer:N,shape:u}),c&&f.createElement(R,{layer:N,style:c}),p&&f.createElement(b,{layer:N,active:p}),m&&f.createElement(T,{layer:N,select:m}),g&&f.createElement(w,{layer:N,filter:g}),y&&f.createElement(x,{layer:N,animate:y}),r.children);}var N=f.memo(function(n){return L("pointLayer",n);}),D=f.memo(function(n){return L("heatmapLayer",n);});f.useEffect;f.PureComponent,f.PureComponent,f.useEffect,f.useEffect;},d62e1c54:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});var a=function(n,r,i){var a,o,s,l,u=0;i||(i={});var c=function(){u=!1===i.leading?0:Date.now(),a=null,l=n.apply(o,s),a||(o=s=null);},f=function(){var f=Date.now();u||!1!==i.leading||(u=f);var d=r-(f-u);return o=this,s=arguments,d<=0||d>r?(a&&(clearTimeout(a),a=null),u=f,l=n.apply(o,s),a||(o=s=null)):a||!1===i.trailing||(a=setTimeout(c,d)),l;};return f.cancel=function(){clearTimeout(a),u=0,a=o=s=null;},f;};},d6938bdb:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return o;}});var a=i("777fffbe")._(i("83684c30")),o=function(n){return(0,a.default)(n)?"":n.toString();};},d6a4ea8a:function(n,r,i){var a=i("d91aaf3b"),o=i("3cd6a52e");n.exports=function(n){return!0===n||!1===n||o(n)&&"[object Boolean]"==a(n);};},d6f42022:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{add:function(){return f;},copy:function(){return u;},create:function(){return s;},dot:function(){return m;},exactEquals:function(){return v;},forEach:function(){return _;},fromValues:function(){return l;},lerp:function(){return g;},negate:function(){return h;},normalize:function(){return p;},set:function(){return c;},sub:function(){return y;},subtract:function(){return d;}});var a,o=i("852bbaa9")._(i("1cf5f081"));function s(){var n=new o.ARRAY_TYPE(2);return o.ARRAY_TYPE!=Float32Array&&(n[0]=0,n[1]=0),n;}function l(n,r){var i=new o.ARRAY_TYPE(2);return i[0]=n,i[1]=r,i;}function u(n,r){return n[0]=r[0],n[1]=r[1],n;}function c(n,r,i){return n[0]=r,n[1]=i,n;}function f(n,r,i){return n[0]=r[0]+i[0],n[1]=r[1]+i[1],n;}function d(n,r,i){return n[0]=r[0]-i[0],n[1]=r[1]-i[1],n;}function h(n,r){return n[0]=-r[0],n[1]=-r[1],n;}function p(n,r){var i=r[0],a=r[1],o=i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),n[0]=r[0]*o,n[1]=r[1]*o,n;}function m(n,r){return n[0]*r[0]+n[1]*r[1];}function g(n,r,i,a){var o=r[0],s=r[1];return n[0]=o+a*(i[0]-o),n[1]=s+a*(i[1]-s),n;}function v(n,r){return n[0]===r[0]&&n[1]===r[1];}var y=d,_=(a=s(),function(n,r,i,o,s,l){var u,c;for(r||(r=2),i||(i=0),c=o?Math.min(o*r+i,n.length):n.length,u=i;u<c;u+=r)a[0]=n[u],a[1]=n[u+1],s(a,a,l),n[u]=a[0],n[u+1]=a[1];return n;});},d70a5c58:function(n,r,i){"use strict";function a([n,r],[i,a]){return[n-i,r-a];}function o([n,r],[i,a]){return[n+i,r+a];}function s([n,r],[i,a]){return Math.sqrt(Math.pow(n-i,2)+Math.pow(r-a,2));}function l([n,r]){return Math.atan2(r,n);}function u([n,r]){return l([n,r])+Math.PI/2;}function c(n,r){let i=l(n),a=l(r);return i<a?a-i:2*Math.PI-(i-a);}function f(n){let r=1/0,i=-1/0,a=1/0,o=-1/0;for(let[s,l]of n)r=Math.min(s,r),i=Math.max(s,i),a=Math.min(l,a),o=Math.max(l,o);let s=i-r,l=o-a;return[r,a,s,l];}function d([n,r],[i,a]){return[(n+i)/2,(r+a)/2];}i.d(r,"__esModule",{value:!0}),i.e(r,{add:function(){return o;},angle:function(){return l;},angleBetween:function(){return c;},angleWithQuadrant:function(){return u;},calcBBox:function(){return f;},dist:function(){return s;},mid:function(){return d;},sub:function(){return a;}});},d740e8f4:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{DEFAULT_Q:function(){return d;},wilkinsonExtended:function(){return p;}});var a=i("777fffbe"),o=i("62a7c4f2"),s=a._(o),l=function(n,r){if(!(0,s.default)(n))return -1;var i=Array.prototype.indexOf;if(i)return i.call(n,r);for(var a=-1,o=0;o<n.length;o++)if(n[o]===r){a=o;break;}return a;},u=i("1f9d5621"),c=a._(u);function f(n){return 1e-14>Math.abs(n)?n:parseFloat(n.toFixed(14));}let d=[1,5,2,2.5,4,3],h=100*Number.EPSILON,p=(n,r,i=5,a=!0,o=d,s=[.25,.2,.5,.05])=>{let u=i<0?0:Math.round(i);if(Number.isNaN(n)||Number.isNaN(r)||"number"!=typeof n||"number"!=typeof r||!u)return[];if(r-n<1e-15||1===u)return[n];let p={score:-2,lmin:0,lmax:0,lstep:0},m=1;for(;m<1/0;){for(let i=0;i<o.length;i+=1){let f=o[i],d=function(n,r,i){let a=(0,c.default)(r);return 1-l(r,n)/(a-1)-i+1;}(f,o,m);if(s[0]*d+s[1]+s[2]+s[3]<p.score){m=1/0;break;}let v=2;for(;v<1/0;){var g;let i=(g=v)>=u?2-(g-1)/(u-1):1;if(s[0]*d+s[1]+s[2]*i+s[3]<p.score)break;let y=Math.ceil(Math.log10((r-n)/(v+1)/m/f));for(;y<1/0;){let g=m*f*10**y,_=function(n,r,i){let a=r-n;return i>a?1-((i-a)/2)**2/(.1*a)**2:1;}(n,r,g*(v-1));if(s[0]*d+s[1]*_+s[2]*i+s[3]<p.score)break;let b=Math.floor(r/g)*m-(v-1)*m,x=Math.ceil(n/g)*m;if(b<=x){let i=x-b;for(let d=0;d<=i;d+=1){let i=g/m*(b+d),y=i+g*(v-1),_=function(n,r,i,a,o,s){let u=(0,c.default)(r),f=l(r,n),d=0,p=(a%s+s)%s;return(p<h||s-p<h)&&a<=0&&o>=0&&(d=1),1-f/(u-1)-i+d;}(f,o,m,i,y,g),x=1-.5*((r-y)**2+(n-i)**2)/(.1*(r-n))**2,E=function(n,r,i,a,o,s){let l=(n-1)/(s-o),u=(r-1)/(Math.max(s,a)-Math.min(i,o));return 2-Math.max(l/u,u/l);}(v,u,n,r,i,y),w=s[0]*_+s[1]*x+s[2]*E+1*s[3];w>p.score&&(!a||i<=n&&y>=r)&&(p.lmin=i,p.lmax=y,p.lstep=g,p.score=w);}}y+=1;}v+=1;}}m+=1;}let v=f(p.lmax),y=f(p.lmin),_=f(p.lstep),b=Math.floor(Math.round((v-y)/_*1e12)/1e12)+1,x=Array(b);x[0]=f(y);for(let n=1;n<b;n+=1)x[n]=f(x[n-1]+_);return x;};},d7948920:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return l;}});var a=i("777fffbe"),o=a._(i("1daaa764")),s=a._(i("e9b37d7e")),l=function(n){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];for(var a=0;a<r.length;a+=1)!function n(r,i,a,l){for(var u in a=a||0,l=l||5,i)if(function(n,r){if(Object.hasOwn)return Object.hasOwn(n,r);if(null==n)throw TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(n),r);}(i,u)){var c=i[u];null!==c&&(0,s.default)(c)?((0,s.default)(r[u])||(r[u]={}),a<l?n(r[u],c,a+1,l):r[u]=i[u]):(0,o.default)(c)?(r[u]=[],r[u]=r[u].concat(c)):void 0!==c&&(r[u]=c);}}(n,r[a]);return n;};},d7f32850:function(n,r,i){"use strict";function a(n){var r=[],i={};return n.forEach(function(n){for(var a=n||{},o=a.key,s=a.dataIndex,l=o||(null==s?[]:Array.isArray(s)?s:[s]).join("-")||"RC_TABLE_KEY";i[l];)l="".concat(l,"_next");i[l]=!0,r.push(l);}),r;}function o(n){return null!=n;}function s(n){return"number"==typeof n&&!Number.isNaN(n);}i.d(r,"__esModule",{value:!0}),i.e(r,{getColumnsKey:function(){return a;},validNumberValue:function(){return s;},validateValue:function(){return o;}});},d8554caa:function(n,r,i){let a=i("f5124c7f");(function(){var i,o="Expected a function",s="__lodash_hash_undefined__",l="__lodash_placeholder__",u=1/0,c=0/0,f=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],d="[object Arguments]",h="[object Array]",p="[object Boolean]",m="[object Date]",g="[object Error]",v="[object Function]",y="[object GeneratorFunction]",_="[object Map]",b="[object Number]",x="[object Object]",E="[object Promise]",w="[object RegExp]",S="[object Set]",T="[object String]",A="[object Symbol]",C="[object WeakMap]",O="[object ArrayBuffer]",M="[object DataView]",R="[object Float32Array]",P="[object Float64Array]",k="[object Int8Array]",I="[object Int16Array]",L="[object Int32Array]",N="[object Uint8Array]",D="[object Uint8ClampedArray]",F="[object Uint16Array]",B="[object Uint32Array]",j=/\b__p \+= '';/g,z=/\b(__p \+=) '' \+/g,U=/(__e\(.*?\)|\b__t\)) \+\n'';/g,V=/&(?:amp|lt|gt|quot|#39);/g,G=/[&<>"']/g,H=RegExp(V.source),W=RegExp(G.source),X=/<%-([\s\S]+?)%>/g,q=/<%([\s\S]+?)%>/g,$=/<%=([\s\S]+?)%>/g,Y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Z=/^\w*$/,K=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Q=/[\\^$.*+?()[\]{}|]/g,J=RegExp(Q.source),ee=/^\s+/,et=/\s/,en=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,er=/\{\n\/\* \[wrapped with (.+)\] \*/,ei=/,? & /,ea=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,eo=/[()=,{}\[\]\/\s]/,es=/\\(\\)?/g,el=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,eu=/\w*$/,ec=/^[-+]0x[0-9a-f]+$/i,ef=/^0b[01]+$/i,ed=/^\[object .+?Constructor\]$/,eh=/^0o[0-7]+$/i,ep=/^(?:0|[1-9]\d*)$/,em=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,eg=/($^)/,ev=/['\n\r\u2028\u2029\\]/g,ey="\ud800-\udfff",e_="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",eb="\\u2700-\\u27bf",ex="a-z\\xdf-\\xf6\\xf8-\\xff",eE="A-Z\\xc0-\\xd6\\xd8-\\xde",ew="\\ufe0e\\ufe0f",eS="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",eT="['\u2019]",eA="["+eS+"]",eC="["+e_+"]",eO="["+ex+"]",eM="[^"+ey+eS+"\\d+"+eb+ex+eE+"]",eR="\ud83c[\udffb-\udfff]",eP="[^"+ey+"]",ek="(?:\ud83c[\udde6-\uddff]){2}",eI="[\ud800-\udbff][\udc00-\udfff]",eL="["+eE+"]",eN="\\u200d",eD="(?:"+eO+"|"+eM+")",eF="(?:"+eL+"|"+eM+")",eB="(?:"+eT+"(?:d|ll|m|re|s|t|ve))?",ej="(?:"+eT+"(?:D|LL|M|RE|S|T|VE))?",ez="(?:"+eC+"|"+eR+")?",eU="["+ew+"]?",eV="(?:"+eN+"(?:"+[eP,ek,eI].join("|")+")"+eU+ez+")*",eG=eU+ez+eV,eH="(?:"+["["+eb+"]",ek,eI].join("|")+")"+eG,eW="(?:"+[eP+eC+"?",eC,ek,eI,"["+ey+"]"].join("|")+")",eX=RegExp(eT,"g"),eq=RegExp(eC,"g"),e$=RegExp(eR+"(?="+eR+")|"+eW+eG,"g"),eY=RegExp([eL+"?"+eO+"+"+eB+"(?="+[eA,eL,"$"].join("|")+")",eF+"+"+ej+"(?="+[eA,eL+eD,"$"].join("|")+")",eL+"?"+eD+"+"+eB,eL+"+"+ej,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",eH].join("|"),"g"),eZ=RegExp("["+eN+ey+e_+ew+"]"),eK=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,eQ=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],eJ=-1,e0={};e0[R]=e0[P]=e0[k]=e0[I]=e0[L]=e0[N]=e0[D]=e0[F]=e0[B]=!0,e0[d]=e0[h]=e0[O]=e0[p]=e0[M]=e0[m]=e0[g]=e0[v]=e0[_]=e0[b]=e0[x]=e0[w]=e0[S]=e0[T]=e0[C]=!1;var e1={};e1[d]=e1[h]=e1[O]=e1[M]=e1[p]=e1[m]=e1[R]=e1[P]=e1[k]=e1[I]=e1[L]=e1[_]=e1[b]=e1[x]=e1[w]=e1[S]=e1[T]=e1[A]=e1[N]=e1[D]=e1[F]=e1[B]=!0,e1[g]=e1[v]=e1[C]=!1;var e2={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},e3=parseFloat,e4=parseInt,e5="object"==typeof a&&a&&a.Object===Object&&a,e6="object"==typeof self&&self&&self.Object===Object&&self,e8=e5||e6||Function("return this")(),e7="object"==typeof r&&r&&!r.nodeType&&r,e9=e7&&"object"==typeof n&&n&&!n.nodeType&&n,te=e9&&e9.exports===e7,tt=te&&e5.process,tn=function(){try{var n=e9&&e9.require&&e9.require("util").types;if(n)return n;return tt&&tt.binding&&tt.binding("util");}catch(n){}}(),tr=tn&&tn.isArrayBuffer,ti=tn&&tn.isDate,ta=tn&&tn.isMap,to=tn&&tn.isRegExp,ts=tn&&tn.isSet,tl=tn&&tn.isTypedArray;function tu(n,r,i){switch(i.length){case 0:return n.call(r);case 1:return n.call(r,i[0]);case 2:return n.call(r,i[0],i[1]);case 3:return n.call(r,i[0],i[1],i[2]);}return n.apply(r,i);}function tc(n,r,i,a){for(var o=-1,s=null==n?0:n.length;++o<s;){var l=n[o];r(a,l,i(l),n);}return a;}function tf(n,r){for(var i=-1,a=null==n?0:n.length;++i<a&&!1!==r(n[i],i,n););return n;}function td(n,r){for(var i=-1,a=null==n?0:n.length;++i<a;)if(!r(n[i],i,n))return!1;return!0;}function th(n,r){for(var i=-1,a=null==n?0:n.length,o=0,s=[];++i<a;){var l=n[i];r(l,i,n)&&(s[o++]=l);}return s;}function tp(n,r){return!!(null==n?0:n.length)&&tS(n,r,0)>-1;}function tm(n,r,i){for(var a=-1,o=null==n?0:n.length;++a<o;)if(i(r,n[a]))return!0;return!1;}function tg(n,r){for(var i=-1,a=null==n?0:n.length,o=Array(a);++i<a;)o[i]=r(n[i],i,n);return o;}function tv(n,r){for(var i=-1,a=r.length,o=n.length;++i<a;)n[o+i]=r[i];return n;}function ty(n,r,i,a){var o=-1,s=null==n?0:n.length;for(a&&s&&(i=n[++o]);++o<s;)i=r(i,n[o],o,n);return i;}function t_(n,r,i,a){var o=null==n?0:n.length;for(a&&o&&(i=n[--o]);o--;)i=r(i,n[o],o,n);return i;}function tb(n,r){for(var i=-1,a=null==n?0:n.length;++i<a;)if(r(n[i],i,n))return!0;return!1;}var tx=tO("length");function tE(n,r,i){var a;return i(n,function(n,i,o){if(r(n,i,o))return a=i,!1;}),a;}function tw(n,r,i,a){for(var o=n.length,s=i+(a?1:-1);a?s--:++s<o;)if(r(n[s],s,n))return s;return -1;}function tS(n,r,i){return r==r?function(n,r,i){for(var a=i-1,o=n.length;++a<o;)if(n[a]===r)return a;return -1;}(n,r,i):tw(n,tA,i);}function tT(n,r,i,a){for(var o=i-1,s=n.length;++o<s;)if(a(n[o],r))return o;return -1;}function tA(n){return n!=n;}function tC(n,r){var i=null==n?0:n.length;return i?tP(n,r)/i:c;}function tO(n){return function(r){return null==r?i:r[n];};}function tM(n){return function(r){return null==n?i:n[r];};}function tR(n,r,i,a,o){return o(n,function(n,o,s){i=a?(a=!1,n):r(i,n,o,s);}),i;}function tP(n,r){for(var a,o=-1,s=n.length;++o<s;){var l=r(n[o]);i!==l&&(a=i===a?l:a+l);}return a;}function tk(n,r){for(var i=-1,a=Array(n);++i<n;)a[i]=r(i);return a;}function tI(n){return n?n.slice(0,tY(n)+1).replace(ee,""):n;}function tL(n){return function(r){return n(r);};}function tN(n,r){return tg(r,function(r){return n[r];});}function tD(n,r){return n.has(r);}function tF(n,r){for(var i=-1,a=n.length;++i<a&&tS(r,n[i],0)>-1;);return i;}function tB(n,r){for(var i=n.length;i--&&tS(r,n[i],0)>-1;);return i;}var tj=tM({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"}),tz=tM({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function tU(n){return"\\"+e2[n];}function tV(n){return eZ.test(n);}function tG(n){var r=-1,i=Array(n.size);return n.forEach(function(n,a){i[++r]=[a,n];}),i;}function tH(n,r){return function(i){return n(r(i));};}function tW(n,r){for(var i=-1,a=n.length,o=0,s=[];++i<a;){var u=n[i];(u===r||u===l)&&(n[i]=l,s[o++]=i);}return s;}function tX(n){var r=-1,i=Array(n.size);return n.forEach(function(n){i[++r]=n;}),i;}function tq(n){return tV(n)?function(n){for(var r=e$.lastIndex=0;e$.test(n);)++r;return r;}(n):tx(n);}function t$(n){return tV(n)?n.match(e$)||[]:n.split("");}function tY(n){for(var r=n.length;r--&&et.test(n.charAt(r)););return r;}var tZ=tM({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),tK=function n(r){var a,et,ey,e_,eb=(r=null==r?e8:tK.defaults(e8.Object(),r,tK.pick(e8,eQ))).Array,ex=r.Date,eE=r.Error,ew=r.Function,eS=r.Math,eT=r.Object,eA=r.RegExp,eC=r.String,eO=r.TypeError,eM=eb.prototype,eR=ew.prototype,eP=eT.prototype,ek=r["__core-js_shared__"],eI=eR.toString,eL=eP.hasOwnProperty,eN=0,eD=(a=/[^.]+$/.exec(ek&&ek.keys&&ek.keys.IE_PROTO||""))?"Symbol(src)_1."+a:"",eF=eP.toString,eB=eI.call(eT),ej=e8._,ez=eA("^"+eI.call(eL).replace(Q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),eU=te?r.Buffer:i,eV=r.Symbol,eG=r.Uint8Array,eH=eU?eU.allocUnsafe:i,eW=tH(eT.getPrototypeOf,eT),e$=eT.create,eZ=eP.propertyIsEnumerable,e2=eM.splice,e5=eV?eV.isConcatSpreadable:i,e6=eV?eV.iterator:i,e7=eV?eV.toStringTag:i,e9=function(){try{var n=ig(eT,"defineProperty");return n({},"",{}),n;}catch(n){}}(),tt=r.clearTimeout!==e8.clearTimeout&&r.clearTimeout,tn=ex&&ex.now!==e8.Date.now&&ex.now,tx=r.setTimeout!==e8.setTimeout&&r.setTimeout,tM=eS.ceil,tQ=eS.floor,tJ=eT.getOwnPropertySymbols,t0=eU?eU.isBuffer:i,t1=r.isFinite,t2=eM.join,t3=tH(eT.keys,eT),t4=eS.max,t5=eS.min,t6=ex.now,t8=r.parseInt,t7=eS.random,t9=eM.reverse,ne=ig(r,"DataView"),nt=ig(r,"Map"),nn=ig(r,"Promise"),nr=ig(r,"Set"),ni=ig(r,"WeakMap"),na=ig(eT,"create"),no=ni&&new ni,ns={},nl=iU(ne),nu=iU(nt),nc=iU(nn),nf=iU(nr),nd=iU(ni),nh=eV?eV.prototype:i,np=nh?nh.valueOf:i,nm=nh?nh.toString:i;function ng(n){if(a$(n)&&!aF(n)&&!(n instanceof nb)){if(n instanceof n_)return n;if(eL.call(n,"__wrapped__"))return iV(n);}return new n_(n);}var nv=function(){function n(){}return function(r){if(!aq(r))return{};if(e$)return e$(r);n.prototype=r;var a=new n;return n.prototype=i,a;};}();function ny(){}function n_(n,r){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=i;}function nb(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[];}function nx(n){var r=-1,i=null==n?0:n.length;for(this.clear();++r<i;){var a=n[r];this.set(a[0],a[1]);}}function nE(n){var r=-1,i=null==n?0:n.length;for(this.clear();++r<i;){var a=n[r];this.set(a[0],a[1]);}}function nw(n){var r=-1,i=null==n?0:n.length;for(this.clear();++r<i;){var a=n[r];this.set(a[0],a[1]);}}function nS(n){var r=-1,i=null==n?0:n.length;for(this.__data__=new nw;++r<i;)this.add(n[r]);}function nT(n){var r=this.__data__=new nE(n);this.size=r.size;}function nA(n,r){var i=aF(n),a=!i&&aD(n),o=!i&&!a&&aU(n),s=!i&&!a&&!o&&a2(n),l=i||a||o||s,u=l?tk(n.length,eC):[],c=u.length;for(var f in n)(r||eL.call(n,f))&&!(l&&("length"==f||o&&("offset"==f||"parent"==f)||s&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||iw(f,c)))&&u.push(f);return u;}function nC(n){var r=n.length;return r?n[rf(0,r-1)]:i;}function nO(n,r,a){(i===a||aI(n[r],a))&&(i!==a||r in n)||nI(n,r,a);}function nM(n,r,a){var o=n[r];eL.call(n,r)&&aI(o,a)&&(i!==a||r in n)||nI(n,r,a);}function nR(n,r){for(var i=n.length;i--;)if(aI(n[i][0],r))return i;return -1;}function nP(n,r,i,a){return nz(n,function(n,o,s){r(a,n,i(n),s);}),a;}function nk(n,r){return n&&rG(r,op(r),n);}function nI(n,r,i){"__proto__"==r&&e9?e9(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i;}function nL(n,r){for(var a=-1,o=r.length,s=eb(o),l=null==n;++a<o;)s[a]=l?i:ou(n,r[a]);return s;}function nN(n,r,a){return n==n&&(i!==a&&(n=n<=a?n:a),i!==r&&(n=n>=r?n:r)),n;}function nD(n,r,a,o,s,l){var u,c=1&r,f=2&r,h=4&r;if(a&&(u=s?a(n,o,s,l):a(n)),i!==u)return u;if(!aq(n))return n;var g=aF(n);if(g){if(E=n.length,C=new n.constructor(E),E&&"string"==typeof n[0]&&eL.call(n,"index")&&(C.index=n.index,C.input=n.input),u=C,!c)return rV(n,u);}else{var E,C,j,z,U,V=i_(n),G=V==v||V==y;if(aU(n))return rD(n,c);if(V==x||V==d||G&&!s){if(u=f||G?{}:ix(n),!c)return f?(j=(U=u)&&rG(n,om(n),U),rG(n,iy(n),j)):(z=nk(u,n),rG(n,iv(n),z));}else{if(!e1[V])return s?n:{};u=function(n,r,i){var a,o,s=n.constructor;switch(r){case O:return rF(n);case p:case m:return new s(+n);case M:return a=i?rF(n.buffer):n.buffer,new n.constructor(a,n.byteOffset,n.byteLength);case R:case P:case k:case I:case L:case N:case D:case F:case B:return rB(n,i);case _:return new s;case b:case T:return new s(n);case w:return(o=new n.constructor(n.source,eu.exec(n))).lastIndex=n.lastIndex,o;case S:return new s;case A:return np?eT(np.call(n)):{};}}(n,V,c);}}l||(l=new nT);var H=l.get(n);if(H)return H;l.set(n,u),aJ(n)?n.forEach(function(i){u.add(nD(i,r,a,i,n,l));}):aY(n)&&n.forEach(function(i,o){u.set(o,nD(i,r,a,o,n,l));});var W=h?f?il:is:f?om:op,X=g?i:W(n);return tf(X||n,function(i,o){X&&(i=n[o=i]),nM(u,o,nD(i,r,a,o,n,l));}),u;}function nF(n,r,a){var o=a.length;if(null==n)return!o;for(n=eT(n);o--;){var s=a[o],l=r[s],u=n[s];if(i===u&&!(s in n)||!l(u))return!1;}return!0;}function nB(n,r,a){if("function"!=typeof n)throw new eO(o);return iL(function(){n.apply(i,a);},r);}function nj(n,r,i,a){var o=-1,s=tp,l=!0,u=n.length,c=[],f=r.length;if(!u)return c;i&&(r=tg(r,tL(i))),a?(s=tm,l=!1):r.length>=200&&(s=tD,l=!1,r=new nS(r));e:for(;++o<u;){var d=n[o],h=null==i?d:i(d);if(d=a||0!==d?d:0,l&&h==h){for(var p=f;p--;)if(r[p]===h)continue e;c.push(d);}else s(r,h,a)||c.push(d);}return c;}ng.templateSettings={escape:X,evaluate:q,interpolate:$,variable:"",imports:{_:ng}},ng.prototype=ny.prototype,ng.prototype.constructor=ng,n_.prototype=nv(ny.prototype),n_.prototype.constructor=n_,nb.prototype=nv(ny.prototype),nb.prototype.constructor=nb,nx.prototype.clear=function(){this.__data__=na?na(null):{},this.size=0;},nx.prototype.delete=function(n){var r=this.has(n)&&delete this.__data__[n];return this.size-=r?1:0,r;},nx.prototype.get=function(n){var r=this.__data__;if(na){var a=r[n];return a===s?i:a;}return eL.call(r,n)?r[n]:i;},nx.prototype.has=function(n){var r=this.__data__;return na?r[n]!==i:eL.call(r,n);},nx.prototype.set=function(n,r){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=na&&i===r?s:r,this;},nE.prototype.clear=function(){this.__data__=[],this.size=0;},nE.prototype.delete=function(n){var r=this.__data__,i=nR(r,n);return!(i<0)&&(i==r.length-1?r.pop():e2.call(r,i,1),--this.size,!0);},nE.prototype.get=function(n){var r=this.__data__,a=nR(r,n);return a<0?i:r[a][1];},nE.prototype.has=function(n){return nR(this.__data__,n)>-1;},nE.prototype.set=function(n,r){var i=this.__data__,a=nR(i,n);return a<0?(++this.size,i.push([n,r])):i[a][1]=r,this;},nw.prototype.clear=function(){this.size=0,this.__data__={hash:new nx,map:new(nt||nE),string:new nx};},nw.prototype.delete=function(n){var r=ip(this,n).delete(n);return this.size-=r?1:0,r;},nw.prototype.get=function(n){return ip(this,n).get(n);},nw.prototype.has=function(n){return ip(this,n).has(n);},nw.prototype.set=function(n,r){var i=ip(this,n),a=i.size;return i.set(n,r),this.size+=i.size==a?0:1,this;},nS.prototype.add=nS.prototype.push=function(n){return this.__data__.set(n,s),this;},nS.prototype.has=function(n){return this.__data__.has(n);},nT.prototype.clear=function(){this.__data__=new nE,this.size=0;},nT.prototype.delete=function(n){var r=this.__data__,i=r.delete(n);return this.size=r.size,i;},nT.prototype.get=function(n){return this.__data__.get(n);},nT.prototype.has=function(n){return this.__data__.has(n);},nT.prototype.set=function(n,r){var i=this.__data__;if(i instanceof nE){var a=i.__data__;if(!nt||a.length<199)return a.push([n,r]),this.size=++i.size,this;i=this.__data__=new nw(a);}return i.set(n,r),this.size=i.size,this;};var nz=rX(n$),nU=rX(nY,!0);function nV(n,r){var i=!0;return nz(n,function(n,a,o){return i=!!r(n,a,o);}),i;}function nG(n,r,a){for(var o=-1,s=n.length;++o<s;){var l=n[o],u=r(l);if(null!=u&&(i===c?u==u&&!a1(u):a(u,c)))var c=u,f=l;}return f;}function nH(n,r){var i=[];return nz(n,function(n,a,o){r(n,a,o)&&i.push(n);}),i;}function nW(n,r,i,a,o){var s=-1,l=n.length;for(i||(i=iE),o||(o=[]);++s<l;){var u=n[s];r>0&&i(u)?r>1?nW(u,r-1,i,a,o):tv(o,u):a||(o[o.length]=u);}return o;}var nX=rq(),nq=rq(!0);function n$(n,r){return n&&nX(n,r,op);}function nY(n,r){return n&&nq(n,r,op);}function nZ(n,r){return th(r,function(r){return aH(n[r]);});}function nK(n,r){r=rI(r,n);for(var a=0,o=r.length;null!=n&&a<o;)n=n[iz(r[a++])];return a&&a==o?n:i;}function nQ(n,r,i){var a=r(n);return aF(n)?a:tv(a,i(n));}function nJ(n){return null==n?i===n?"[object Undefined]":"[object Null]":e7&&e7 in eT(n)?function(n){var r=eL.call(n,e7),a=n[e7];try{n[e7]=i;var o=!0;}catch(n){}var s=eF.call(n);return o&&(r?n[e7]=a:delete n[e7]),s;}(n):eF.call(n);}function n0(n,r){return n>r;}function n1(n,r){return null!=n&&eL.call(n,r);}function n2(n,r){return null!=n&&r in eT(n);}function n3(n,r,a){for(var o=a?tm:tp,s=n[0].length,l=n.length,u=l,c=eb(l),f=1/0,d=[];u--;){var h=n[u];u&&r&&(h=tg(h,tL(r))),f=t5(h.length,f),c[u]=!a&&(r||s>=120&&h.length>=120)?new nS(u&&h):i;}h=n[0];var p=-1,m=c[0];e:for(;++p<s&&d.length<f;){var g=h[p],v=r?r(g):g;if(g=a||0!==g?g:0,!(m?tD(m,v):o(d,v,a))){for(u=l;--u;){var y=c[u];if(!(y?tD(y,v):o(n[u],v,a)))continue e;}m&&m.push(v),d.push(g);}}return d;}function n4(n,r,a){r=rI(r,n);var o=null==(n=iP(n,r))?n:n[iz(iJ(r))];return null==o?i:tu(o,n,a);}function n5(n){return a$(n)&&nJ(n)==d;}function n6(n,r,a,o,s){return n===r||(null!=n&&null!=r&&(a$(n)||a$(r))?function(n,r,a,o,s,l){var u=aF(n),c=aF(r),f=u?h:i_(n),v=c?h:i_(r);f=f==d?x:f,v=v==d?x:v;var y=f==x,E=v==x,C=f==v;if(C&&aU(n)){if(!aU(r))return!1;u=!0,y=!1;}if(C&&!y)return l||(l=new nT),u||a2(n)?ia(n,r,a,o,s,l):function(n,r,i,a,o,s,l){switch(i){case M:if(n.byteLength!=r.byteLength||n.byteOffset!=r.byteOffset)break;n=n.buffer,r=r.buffer;case O:if(n.byteLength!=r.byteLength||!s(new eG(n),new eG(r)))break;return!0;case p:case m:case b:return aI(+n,+r);case g:return n.name==r.name&&n.message==r.message;case w:case T:return n==r+"";case _:var u=tG;case S:var c=1&a;if(u||(u=tX),n.size!=r.size&&!c)break;var f=l.get(n);if(f)return f==r;a|=2,l.set(n,r);var d=ia(u(n),u(r),a,o,s,l);return l.delete(n),d;case A:if(np)return np.call(n)==np.call(r);}return!1;}(n,r,f,a,o,s,l);if(!(1&a)){var R=y&&eL.call(n,"__wrapped__"),P=E&&eL.call(r,"__wrapped__");if(R||P){var k=R?n.value():n,I=P?r.value():r;return l||(l=new nT),s(k,I,a,o,l);}}return!!C&&(l||(l=new nT),function(n,r,a,o,s,l){var u=1&a,c=is(n),f=c.length;if(f!=is(r).length&&!u)return!1;for(var d=f;d--;){var h=c[d];if(!(u?h in r:eL.call(r,h)))return!1;}var p=l.get(n),m=l.get(r);if(p&&m)return p==r&&m==n;var g=!0;l.set(n,r),l.set(r,n);for(var v=u;++d<f;){var y=n[h=c[d]],_=r[h];if(o)var b=u?o(_,y,h,r,n,l):o(y,_,h,n,r,l);if(!(i===b?y===_||s(y,_,a,o,l):b)){g=!1;break;}v||(v="constructor"==h);}if(g&&!v){var x=n.constructor,E=r.constructor;x!=E&&"constructor"in n&&"constructor"in r&&!("function"==typeof x&&x instanceof x&&"function"==typeof E&&E instanceof E)&&(g=!1);}return l.delete(n),l.delete(r),g;}(n,r,a,o,s,l));}(n,r,a,o,n6,s):n!=n&&r!=r);}function n8(n,r,a,o){var s=a.length,l=s,u=!o;if(null==n)return!l;for(n=eT(n);s--;){var c=a[s];if(u&&c[2]?c[1]!==n[c[0]]:!(c[0]in n))return!1;}for(;++s<l;){var f=(c=a[s])[0],d=n[f],h=c[1];if(u&&c[2]){if(i===d&&!(f in n))return!1;}else{var p=new nT;if(o)var m=o(d,h,f,n,r,p);if(!(i===m?n6(h,d,3,o,p):m))return!1;}}return!0;}function n7(n){return!(!aq(n)||eD&&eD in n)&&(aH(n)?ez:ed).test(iU(n));}function n9(n){return"function"==typeof n?n:null==n?oz:"object"==typeof n?aF(n)?ri(n[0],n[1]):rr(n):oY(n);}function re(n){if(!iO(n))return t3(n);var r=[];for(var i in eT(n))eL.call(n,i)&&"constructor"!=i&&r.push(i);return r;}function rt(n,r){return n<r;}function rn(n,r){var i=-1,a=aj(n)?eb(n.length):[];return nz(n,function(n,o,s){a[++i]=r(n,o,s);}),a;}function rr(n){var r=im(n);return 1==r.length&&r[0][2]?iM(r[0][0],r[0][1]):function(i){return i===n||n8(i,n,r);};}function ri(n,r){var a;return iT(n)&&(a=r)==a&&!aq(a)?iM(iz(n),r):function(a){var o=ou(a,n);return i===o&&o===r?oc(a,n):n6(r,o,3);};}function ra(n,r,a,o,s){n!==r&&nX(r,function(l,u){if(s||(s=new nT),aq(l))!function(n,r,a,o,s,l,u){var c=ik(n,a),f=ik(r,a),d=u.get(f);if(d){nO(n,a,d);return;}var h=l?l(c,f,a+"",n,r,u):i,p=i===h;if(p){var m=aF(f),g=!m&&aU(f),v=!m&&!g&&a2(f);h=f,m||g||v?aF(c)?h=c:az(c)?h=rV(c):g?(p=!1,h=rD(f,!0)):v?(p=!1,h=rB(f,!0)):h=[]:aK(f)||aD(f)?(h=c,aD(c)?h=oe(c):(!aq(c)||aH(c))&&(h=ix(f))):p=!1;}p&&(u.set(f,h),s(h,f,o,l,u),u.delete(f)),nO(n,a,h);}(n,r,u,a,ra,o,s);else{var c=o?o(ik(n,u),l,u+"",n,r,s):i;i===c&&(c=l),nO(n,u,c);}},om);}function ro(n,r){var a=n.length;if(a)return iw(r+=r<0?a:0,a)?n[r]:i;}function rs(n,r,i){r=r.length?tg(r,function(n){return aF(n)?function(r){return nK(r,1===n.length?n[0]:n);}:n;}):[oz];var a=-1;return r=tg(r,tL(ih())),function(n,r){var i=n.length;for(n.sort(r);i--;)n[i]=n[i].value;return n;}(rn(n,function(n,i,o){return{criteria:tg(r,function(r){return r(n);}),index:++a,value:n};}),function(n,r){return function(n,r,i){for(var a=-1,o=n.criteria,s=r.criteria,l=o.length,u=i.length;++a<l;){var c=rj(o[a],s[a]);if(c){if(a>=u)return c;return c*("desc"==i[a]?-1:1);}}return n.index-r.index;}(n,r,i);});}function rl(n,r,i){for(var a=-1,o=r.length,s={};++a<o;){var l=r[a],u=nK(n,l);i(u,l)&&rp(s,rI(l,n),u);}return s;}function ru(n,r,i,a){var o=a?tT:tS,s=-1,l=r.length,u=n;for(n===r&&(r=rV(r)),i&&(u=tg(n,tL(i)));++s<l;)for(var c=0,f=r[s],d=i?i(f):f;(c=o(u,d,c,a))>-1;)u!==n&&e2.call(u,c,1),e2.call(n,c,1);return n;}function rc(n,r){for(var i=n?r.length:0,a=i-1;i--;){var o=r[i];if(i==a||o!==s){var s=o;iw(o)?e2.call(n,o,1):rT(n,o);}}return n;}function rf(n,r){return n+tQ(t7()*(r-n+1));}function rd(n,r){var i="";if(!n||r<1||r>9007199254740991)return i;do r%2&&(i+=n),(r=tQ(r/2))&&(n+=n);while(r)return i;}function rh(n,r){return iN(iR(n,r,oz),n+"");}function rp(n,r,a,o){if(!aq(n))return n;r=rI(r,n);for(var s=-1,l=r.length,u=l-1,c=n;null!=c&&++s<l;){var f=iz(r[s]),d=a;if("__proto__"===f||"constructor"===f||"prototype"===f)break;if(s!=u){var h=c[f];d=o?o(h,f,c):i,i===d&&(d=aq(h)?h:iw(r[s+1])?[]:{});}nM(c,f,d),c=c[f];}return n;}var rm=no?function(n,r){return no.set(n,r),n;}:oz,rg=e9?function(n,r){return e9(n,"toString",{configurable:!0,enumerable:!1,value:oF(r),writable:!0});}:oz;function rv(n,r,i){var a=-1,o=n.length;r<0&&(r=-r>o?0:o+r),(i=i>o?o:i)<0&&(i+=o),o=r>i?0:i-r>>>0,r>>>=0;for(var s=eb(o);++a<o;)s[a]=n[a+r];return s;}function ry(n,r){var i;return nz(n,function(n,a,o){return!(i=r(n,a,o));}),!!i;}function r_(n,r,i){var a=0,o=null==n?a:n.length;if("number"==typeof r&&r==r&&o<=2147483647){for(;a<o;){var s=a+o>>>1,l=n[s];null!==l&&!a1(l)&&(i?l<=r:l<r)?a=s+1:o=s;}return o;}return rb(n,r,oz,i);}function rb(n,r,a,o){var s=0,l=null==n?0:n.length;if(0===l)return 0;for(var u=(r=a(r))!=r,c=null===r,f=a1(r),d=i===r;s<l;){var h=tQ((s+l)/2),p=a(n[h]),m=i!==p,g=null===p,v=p==p,y=a1(p);if(u)var _=o||v;else _=d?v&&(o||m):c?v&&m&&(o||!g):f?v&&m&&!g&&(o||!y):!g&&!y&&(o?p<=r:p<r);_?s=h+1:l=h;}return t5(l,4294967294);}function rx(n,r){for(var i=-1,a=n.length,o=0,s=[];++i<a;){var l=n[i],u=r?r(l):l;if(!i||!aI(u,c)){var c=u;s[o++]=0===l?0:l;}}return s;}function rE(n){return"number"==typeof n?n:a1(n)?c:+n;}function rw(n){if("string"==typeof n)return n;if(aF(n))return tg(n,rw)+"";if(a1(n))return nm?nm.call(n):"";var r=n+"";return"0"==r&&1/n==-u?"-0":r;}function rS(n,r,i){var a=-1,o=tp,s=n.length,l=!0,u=[],c=u;if(i)l=!1,o=tm;else if(s>=200){var f=r?null:r7(n);if(f)return tX(f);l=!1,o=tD,c=new nS;}else c=r?[]:u;e:for(;++a<s;){var d=n[a],h=r?r(d):d;if(d=i||0!==d?d:0,l&&h==h){for(var p=c.length;p--;)if(c[p]===h)continue e;r&&c.push(h),u.push(d);}else o(c,h,i)||(c!==u&&c.push(h),u.push(d));}return u;}function rT(n,r){return r=rI(r,n),null==(n=iP(n,r))||delete n[iz(iJ(r))];}function rA(n,r,i,a){return rp(n,r,i(nK(n,r)),a);}function rC(n,r,i,a){for(var o=n.length,s=a?o:-1;(a?s--:++s<o)&&r(n[s],s,n););return i?rv(n,a?0:s,a?s+1:o):rv(n,a?s+1:0,a?o:s);}function rO(n,r){var i=n;return i instanceof nb&&(i=i.value()),ty(r,function(n,r){return r.func.apply(r.thisArg,tv([n],r.args));},i);}function rM(n,r,i){var a=n.length;if(a<2)return a?rS(n[0]):[];for(var o=-1,s=eb(a);++o<a;)for(var l=n[o],u=-1;++u<a;)u!=o&&(s[o]=nj(s[o]||l,n[u],r,i));return rS(nW(s,1),r,i);}function rR(n,r,a){for(var o=-1,s=n.length,l=r.length,u={};++o<s;){var c=o<l?r[o]:i;a(u,n[o],c);}return u;}function rP(n){return az(n)?n:[];}function rk(n){return"function"==typeof n?n:oz;}function rI(n,r){return aF(n)?n:iT(n,r)?[n]:ij(ot(n));}function rL(n,r,a){var o=n.length;return a=i===a?o:a,!r&&a>=o?n:rv(n,r,a);}var rN=tt||function(n){return e8.clearTimeout(n);};function rD(n,r){if(r)return n.slice();var i=n.length,a=eH?eH(i):new n.constructor(i);return n.copy(a),a;}function rF(n){var r=new n.constructor(n.byteLength);return new eG(r).set(new eG(n)),r;}function rB(n,r){var i=r?rF(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length);}function rj(n,r){if(n!==r){var a=i!==n,o=null===n,s=n==n,l=a1(n),u=i!==r,c=null===r,f=r==r,d=a1(r);if(!c&&!d&&!l&&n>r||l&&u&&f&&!c&&!d||o&&u&&f||!a&&f||!s)return 1;if(!o&&!l&&!d&&n<r||d&&a&&s&&!o&&!l||c&&a&&s||!u&&s||!f)return -1;}return 0;}function rz(n,r,i,a){for(var o=-1,s=n.length,l=i.length,u=-1,c=r.length,f=t4(s-l,0),d=eb(c+f),h=!a;++u<c;)d[u]=r[u];for(;++o<l;)(h||o<s)&&(d[i[o]]=n[o]);for(;f--;)d[u++]=n[o++];return d;}function rU(n,r,i,a){for(var o=-1,s=n.length,l=-1,u=i.length,c=-1,f=r.length,d=t4(s-u,0),h=eb(d+f),p=!a;++o<d;)h[o]=n[o];for(var m=o;++c<f;)h[m+c]=r[c];for(;++l<u;)(p||o<s)&&(h[m+i[l]]=n[o++]);return h;}function rV(n,r){var i=-1,a=n.length;for(r||(r=eb(a));++i<a;)r[i]=n[i];return r;}function rG(n,r,a,o){var s=!a;a||(a={});for(var l=-1,u=r.length;++l<u;){var c=r[l],f=o?o(a[c],n[c],c,a,n):i;i===f&&(f=n[c]),s?nI(a,c,f):nM(a,c,f);}return a;}function rH(n,r){return function(i,a){var o=aF(i)?tc:nP,s=r?r():{};return o(i,n,ih(a,2),s);};}function rW(n){return rh(function(r,a){var o=-1,s=a.length,l=s>1?a[s-1]:i,u=s>2?a[2]:i;for(l=n.length>3&&"function"==typeof l?(s--,l):i,u&&iS(a[0],a[1],u)&&(l=s<3?i:l,s=1),r=eT(r);++o<s;){var c=a[o];c&&n(r,c,o,l);}return r;});}function rX(n,r){return function(i,a){if(null==i)return i;if(!aj(i))return n(i,a);for(var o=i.length,s=r?o:-1,l=eT(i);(r?s--:++s<o)&&!1!==a(l[s],s,l););return i;};}function rq(n){return function(r,i,a){for(var o=-1,s=eT(r),l=a(r),u=l.length;u--;){var c=l[n?u:++o];if(!1===i(s[c],c,s))break;}return r;};}function r$(n){return function(r){var a=tV(r=ot(r))?t$(r):i,o=a?a[0]:r.charAt(0),s=a?rL(a,1).join(""):r.slice(1);return o[n]()+s;};}function rY(n){return function(r){return ty(oL(oA(r).replace(eX,"")),n,"");};}function rZ(n){return function(){var r=arguments;switch(r.length){case 0:return new n;case 1:return new n(r[0]);case 2:return new n(r[0],r[1]);case 3:return new n(r[0],r[1],r[2]);case 4:return new n(r[0],r[1],r[2],r[3]);case 5:return new n(r[0],r[1],r[2],r[3],r[4]);case 6:return new n(r[0],r[1],r[2],r[3],r[4],r[5]);case 7:return new n(r[0],r[1],r[2],r[3],r[4],r[5],r[6]);}var i=nv(n.prototype),a=n.apply(i,r);return aq(a)?a:i;};}function rK(n){return function(r,a,o){var s=eT(r);if(!aj(r)){var l=ih(a,3);r=op(r),a=function(n){return l(s[n],n,s);};}var u=n(r,a,o);return u>-1?s[l?r[u]:u]:i;};}function rQ(n){return io(function(r){var a=r.length,s=a,l=n_.prototype.thru;for(n&&r.reverse();s--;){var u=r[s];if("function"!=typeof u)throw new eO(o);if(l&&!c&&"wrapper"==ic(u))var c=new n_([],!0);}for(s=c?s:a;++s<a;){var f=ic(u=r[s]),d="wrapper"==f?iu(u):i;c=d&&iA(d[0])&&424==d[1]&&!d[4].length&&1==d[9]?c[ic(d[0])].apply(c,d[3]):1==u.length&&iA(u)?c[f]():c.thru(u);}return function(){var n=arguments,i=n[0];if(c&&1==n.length&&aF(i))return c.plant(i).value();for(var o=0,s=a?r[o].apply(this,n):i;++o<a;)s=r[o].call(this,s);return s;};});}function rJ(n,r,a,o,s,l,u,c,f,d){var h=128&r,p=1&r,m=2&r,g=24&r,v=512&r,y=m?i:rZ(n);return function _(){for(var b=arguments.length,x=eb(b),E=b;E--;)x[E]=arguments[E];if(g)var w=id(_),S=function(n,r){for(var i=n.length,a=0;i--;)n[i]===r&&++a;return a;}(x,w);if(o&&(x=rz(x,o,s,g)),l&&(x=rU(x,l,u,g)),b-=S,g&&b<d){var T=tW(x,w);return r6(n,r,rJ,_.placeholder,a,x,T,c,f,d-b);}var A=p?a:this,C=m?A[n]:n;return b=x.length,c?x=function(n,r){for(var a=n.length,o=t5(r.length,a),s=rV(n);o--;){var l=r[o];n[o]=iw(l,a)?s[l]:i;}return n;}(x,c):v&&b>1&&x.reverse(),h&&f<b&&(x.length=f),this&&this!==e8&&this instanceof _&&(C=y||rZ(C)),C.apply(A,x);};}function r0(n,r){return function(i,a){var o,s;return o=r(a),s={},n$(i,function(r,i,a){n(s,o(r),i,a);}),s;};}function r1(n,r){return function(a,o){var s;if(i===a&&i===o)return r;if(i!==a&&(s=a),i!==o){if(i===s)return o;"string"==typeof a||"string"==typeof o?(a=rw(a),o=rw(o)):(a=rE(a),o=rE(o)),s=n(a,o);}return s;};}function r2(n){return io(function(r){return r=tg(r,tL(ih())),rh(function(i){var a=this;return n(r,function(n){return tu(n,a,i);});});});}function r3(n,r){var a=(r=i===r?" ":rw(r)).length;if(a<2)return a?rd(r,n):r;var o=rd(r,tM(n/tq(r)));return tV(r)?rL(t$(o),0,n).join(""):o.slice(0,n);}function r4(n){return function(r,a,o){return o&&"number"!=typeof o&&iS(r,a,o)&&(a=o=i),r=a6(r),i===a?(a=r,r=0):a=a6(a),o=i===o?r<a?1:-1:a6(o),function(n,r,i,a){for(var o=-1,s=t4(tM((r-n)/(i||1)),0),l=eb(s);s--;)l[a?s:++o]=n,n+=i;return l;}(r,a,o,n);};}function r5(n){return function(r,i){return"string"==typeof r&&"string"==typeof i||(r=a9(r),i=a9(i)),n(r,i);};}function r6(n,r,a,o,s,l,u,c,f,d){var h=8&r,p=h?u:i,m=h?i:u,g=h?l:i,v=h?i:l;r|=h?32:64,4&(r&=~(h?64:32))||(r&=-4);var y=[n,r,s,g,p,v,m,c,f,d],_=a.apply(i,y);return iA(n)&&iI(_,y),_.placeholder=o,iD(_,n,r);}function r8(n){var r=eS[n];return function(n,i){if(n=a9(n),(i=null==i?0:t5(a8(i),292))&&t1(n)){var a=(ot(n)+"e").split("e");return+((a=(ot(r(a[0]+"e"+(+a[1]+i)))+"e").split("e"))[0]+"e"+(+a[1]-i));}return r(n);};}var r7=nr&&1/tX(new nr([,-0]))[1]==u?function(n){return new nr(n);}:oW;function r9(n){return function(r){var i,a,o=i_(r);return o==_?tG(r):o==S?(i=-1,a=Array(r.size),r.forEach(function(n){a[++i]=[n,n];}),a):tg(n(r),function(n){return[n,r[n]];});};}function ie(n,r,a,s,u,c,f,d){var h=2&r;if(!h&&"function"!=typeof n)throw new eO(o);var p=s?s.length:0;if(p||(r&=-97,s=u=i),f=i===f?f:t4(a8(f),0),d=i===d?d:a8(d),p-=u?u.length:0,64&r){var m=s,g=u;s=u=i;}var v=h?i:iu(n),y=[n,r,a,s,u,m,g,c,f,d];if(v&&function(n,r){var i=n[1],a=r[1],o=i|a,s=o<131,u=128==a&&8==i||128==a&&256==i&&n[7].length<=r[8]||384==a&&r[7].length<=r[8]&&8==i;if(s||u){1&a&&(n[2]=r[2],o|=1&i?0:4);var c=r[3];if(c){var f=n[3];n[3]=f?rz(f,c,r[4]):c,n[4]=f?tW(n[3],l):r[4];}(c=r[5])&&(f=n[5],n[5]=f?rU(f,c,r[6]):c,n[6]=f?tW(n[5],l):r[6]),(c=r[7])&&(n[7]=c),128&a&&(n[8]=null==n[8]?r[8]:t5(n[8],r[8])),null==n[9]&&(n[9]=r[9]),n[0]=r[0],n[1]=o;}}(y,v),n=y[0],r=y[1],a=y[2],s=y[3],u=y[4],(d=y[9]=y[9]===i?h?0:n.length:t4(y[9]-p,0))||!(24&r)||(r&=-25),r&&1!=r)8==r||16==r?(_=n,b=r,x=d,E=rZ(_),L=function n(){for(var r=arguments.length,a=eb(r),o=r,s=id(n);o--;)a[o]=arguments[o];var l=r<3&&a[0]!==s&&a[r-1]!==s?[]:tW(a,s);return(r-=l.length)<x?r6(_,b,rJ,n.placeholder,i,a,l,i,i,x-r):tu(this&&this!==e8&&this instanceof n?E:_,this,a);}):32!=r&&33!=r||u.length?L=rJ.apply(i,y):(w=n,S=r,T=a,A=s,C=1&S,O=rZ(w),L=function n(){for(var r=-1,i=arguments.length,a=-1,o=A.length,s=eb(o+i),l=this&&this!==e8&&this instanceof n?O:w;++a<o;)s[a]=A[a];for(;i--;)s[a++]=arguments[++r];return tu(l,C?T:this,s);});else var _,b,x,E,w,S,T,A,C,O,M,R,P,k,I,L=(M=n,R=r,P=a,k=1&R,I=rZ(M),function n(){return(this&&this!==e8&&this instanceof n?I:M).apply(k?P:this,arguments);});return iD((v?rm:iI)(L,y),n,r);}function it(n,r,a,o){return i===n||aI(n,eP[a])&&!eL.call(o,a)?r:n;}function ir(n,r,a,o,s,l){return aq(n)&&aq(r)&&(l.set(r,n),ra(n,r,i,ir,l),l.delete(r)),n;}function ii(n){return aK(n)?i:n;}function ia(n,r,a,o,s,l){var u=1&a,c=n.length,f=r.length;if(c!=f&&!(u&&f>c))return!1;var d=l.get(n),h=l.get(r);if(d&&h)return d==r&&h==n;var p=-1,m=!0,g=2&a?new nS:i;for(l.set(n,r),l.set(r,n);++p<c;){var v=n[p],y=r[p];if(o)var _=u?o(y,v,p,r,n,l):o(v,y,p,n,r,l);if(i!==_){if(_)continue;m=!1;break;}if(g){if(!tb(r,function(n,r){if(!tD(g,r)&&(v===n||s(v,n,a,o,l)))return g.push(r);})){m=!1;break;}}else if(!(v===y||s(v,y,a,o,l))){m=!1;break;}}return l.delete(n),l.delete(r),m;}function io(n){return iN(iR(n,i,i$),n+"");}function is(n){return nQ(n,op,iv);}function il(n){return nQ(n,om,iy);}var iu=no?function(n){return no.get(n);}:oW;function ic(n){for(var r=n.name+"",i=ns[r],a=eL.call(ns,r)?i.length:0;a--;){var o=i[a],s=o.func;if(null==s||s==n)return o.name;}return r;}function id(n){return(eL.call(ng,"placeholder")?ng:n).placeholder;}function ih(){var n=ng.iteratee||oU;return n=n===oU?n9:n,arguments.length?n(arguments[0],arguments[1]):n;}function ip(n,r){var i,a=n.__data__;return("string"==(i=typeof r)||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==r:null===r)?a["string"==typeof r?"string":"hash"]:a.map;}function im(n){for(var r=op(n),i=r.length;i--;){var a=r[i],o=n[a];r[i]=[a,o,o==o&&!aq(o)];}return r;}function ig(n,r){var a=null==n?i:n[r];return n7(a)?a:i;}var iv=tJ?function(n){return null==n?[]:th(tJ(n=eT(n)),function(r){return eZ.call(n,r);});}:oQ,iy=tJ?function(n){for(var r=[];n;)tv(r,iv(n)),n=eW(n);return r;}:oQ,i_=nJ;function ib(n,r,i){r=rI(r,n);for(var a=-1,o=r.length,s=!1;++a<o;){var l=iz(r[a]);if(!(s=null!=n&&i(n,l)))break;n=n[l];}return s||++a!=o?s:!!(o=null==n?0:n.length)&&aX(o)&&iw(l,o)&&(aF(n)||aD(n));}function ix(n){return"function"!=typeof n.constructor||iO(n)?{}:nv(eW(n));}function iE(n){return aF(n)||aD(n)||!!(e5&&n&&n[e5]);}function iw(n,r){var i=typeof n;return!!(r=null==r?9007199254740991:r)&&("number"==i||"symbol"!=i&&ep.test(n))&&n>-1&&n%1==0&&n<r;}function iS(n,r,i){if(!aq(i))return!1;var a=typeof r;return("number"==a?!!(aj(i)&&iw(r,i.length)):"string"==a&&r in i)&&aI(i[r],n);}function iT(n,r){if(aF(n))return!1;var i=typeof n;return!!("number"==i||"symbol"==i||"boolean"==i||null==n||a1(n))||Z.test(n)||!Y.test(n)||null!=r&&n in eT(r);}function iA(n){var r=ic(n),i=ng[r];if("function"!=typeof i||!(r in nb.prototype))return!1;if(n===i)return!0;var a=iu(i);return!!a&&n===a[0];}(ne&&i_(new ne(new ArrayBuffer(1)))!=M||nt&&i_(new nt)!=_||nn&&i_(nn.resolve())!=E||nr&&i_(new nr)!=S||ni&&i_(new ni)!=C)&&(i_=function(n){var r=nJ(n),a=r==x?n.constructor:i,o=a?iU(a):"";if(o)switch(o){case nl:return M;case nu:return _;case nc:return E;case nf:return S;case nd:return C;}return r;});var iC=ek?aH:oJ;function iO(n){var r=n&&n.constructor;return n===("function"==typeof r&&r.prototype||eP);}function iM(n,r){return function(a){return null!=a&&a[n]===r&&(i!==r||n in eT(a));};}function iR(n,r,a){return r=t4(i===r?n.length-1:r,0),function(){for(var i=arguments,o=-1,s=t4(i.length-r,0),l=eb(s);++o<s;)l[o]=i[r+o];o=-1;for(var u=eb(r+1);++o<r;)u[o]=i[o];return u[r]=a(l),tu(n,this,u);};}function iP(n,r){return r.length<2?n:nK(n,rv(r,0,-1));}function ik(n,r){if(("constructor"!==r||"function"!=typeof n[r])&&"__proto__"!=r)return n[r];}var iI=iF(rm),iL=tx||function(n,r){return e8.setTimeout(n,r);},iN=iF(rg);function iD(n,r,i){var a,o,s=r+"";return iN(n,function(n,r){var i=r.length;if(!i)return n;var a=i-1;return r[a]=(i>1?"& ":"")+r[a],r=r.join(i>2?", ":" "),n.replace(en,"{\n/* [wrapped with "+r+"] */\n");}(s,(a=(o=s.match(er))?o[1].split(ei):[],tf(f,function(n){var r="_."+n[0];i&n[1]&&!tp(a,r)&&a.push(r);}),a.sort())));}function iF(n){var r=0,a=0;return function(){var o=t6(),s=16-(o-a);if(a=o,s>0){if(++r>=800)return arguments[0];}else r=0;return n.apply(i,arguments);};}function iB(n,r){var a=-1,o=n.length,s=o-1;for(r=i===r?o:r;++a<r;){var l=rf(a,s),u=n[l];n[l]=n[a],n[a]=u;}return n.length=r,n;}var ij=(ey=(et=aC(function(n){var r=[];return 46===n.charCodeAt(0)&&r.push(""),n.replace(K,function(n,i,a,o){r.push(a?o.replace(es,"$1"):i||n);}),r;},function(n){return 500===ey.size&&ey.clear(),n;})).cache,et);function iz(n){if("string"==typeof n||a1(n))return n;var r=n+"";return"0"==r&&1/n==-u?"-0":r;}function iU(n){if(null!=n){try{return eI.call(n);}catch(n){}try{return n+"";}catch(n){}}return"";}function iV(n){if(n instanceof nb)return n.clone();var r=new n_(n.__wrapped__,n.__chain__);return r.__actions__=rV(n.__actions__),r.__index__=n.__index__,r.__values__=n.__values__,r;}var iG=rh(function(n,r){return az(n)?nj(n,nW(r,1,az,!0)):[];}),iH=rh(function(n,r){var a=iJ(r);return az(a)&&(a=i),az(n)?nj(n,nW(r,1,az,!0),ih(a,2)):[];}),iW=rh(function(n,r){var a=iJ(r);return az(a)&&(a=i),az(n)?nj(n,nW(r,1,az,!0),i,a):[];});function iX(n,r,i){var a=null==n?0:n.length;if(!a)return -1;var o=null==i?0:a8(i);return o<0&&(o=t4(a+o,0)),tw(n,ih(r,3),o);}function iq(n,r,a){var o=null==n?0:n.length;if(!o)return -1;var s=o-1;return i!==a&&(s=a8(a),s=a<0?t4(o+s,0):t5(s,o-1)),tw(n,ih(r,3),s,!0);}function i$(n){return(null==n?0:n.length)?nW(n,1):[];}function iY(n){return n&&n.length?n[0]:i;}var iZ=rh(function(n){var r=tg(n,rP);return r.length&&r[0]===n[0]?n3(r):[];}),iK=rh(function(n){var r=iJ(n),a=tg(n,rP);return r===iJ(a)?r=i:a.pop(),a.length&&a[0]===n[0]?n3(a,ih(r,2)):[];}),iQ=rh(function(n){var r=iJ(n),a=tg(n,rP);return(r="function"==typeof r?r:i)&&a.pop(),a.length&&a[0]===n[0]?n3(a,i,r):[];});function iJ(n){var r=null==n?0:n.length;return r?n[r-1]:i;}var i0=rh(i1);function i1(n,r){return n&&n.length&&r&&r.length?ru(n,r):n;}var i2=io(function(n,r){var i=null==n?0:n.length,a=nL(n,r);return rc(n,tg(r,function(n){return iw(n,i)?+n:n;}).sort(rj)),a;});function i3(n){return null==n?n:t9.call(n);}var i4=rh(function(n){return rS(nW(n,1,az,!0));}),i5=rh(function(n){var r=iJ(n);return az(r)&&(r=i),rS(nW(n,1,az,!0),ih(r,2));}),i6=rh(function(n){var r=iJ(n);return r="function"==typeof r?r:i,rS(nW(n,1,az,!0),i,r);});function i8(n){if(!(n&&n.length))return[];var r=0;return n=th(n,function(n){if(az(n))return r=t4(n.length,r),!0;}),tk(r,function(r){return tg(n,tO(r));});}function i7(n,r){if(!(n&&n.length))return[];var a=i8(n);return null==r?a:tg(a,function(n){return tu(r,i,n);});}var i9=rh(function(n,r){return az(n)?nj(n,r):[];}),ae=rh(function(n){return rM(th(n,az));}),at=rh(function(n){var r=iJ(n);return az(r)&&(r=i),rM(th(n,az),ih(r,2));}),an=rh(function(n){var r=iJ(n);return r="function"==typeof r?r:i,rM(th(n,az),i,r);}),ar=rh(i8),ai=rh(function(n){var r=n.length,a=r>1?n[r-1]:i;return a="function"==typeof a?(n.pop(),a):i,i7(n,a);});function aa(n){var r=ng(n);return r.__chain__=!0,r;}function ao(n,r){return r(n);}var as=io(function(n){var r=n.length,a=r?n[0]:0,o=this.__wrapped__,s=function(r){return nL(r,n);};return!(r>1)&&!this.__actions__.length&&o instanceof nb&&iw(a)?((o=o.slice(a,+a+(r?1:0))).__actions__.push({func:ao,args:[s],thisArg:i}),new n_(o,this.__chain__).thru(function(n){return r&&!n.length&&n.push(i),n;})):this.thru(s);}),al=rH(function(n,r,i){eL.call(n,i)?++n[i]:nI(n,i,1);}),au=rK(iX),ac=rK(iq);function af(n,r){return(aF(n)?tf:nz)(n,ih(r,3));}function ad(n,r){return(aF(n)?function(n,r){for(var i=null==n?0:n.length;i--&&!1!==r(n[i],i,n););return n;}:nU)(n,ih(r,3));}var ah=rH(function(n,r,i){eL.call(n,i)?n[i].push(r):nI(n,i,[r]);}),ap=rh(function(n,r,i){var a=-1,o="function"==typeof r,s=aj(n)?eb(n.length):[];return nz(n,function(n){s[++a]=o?tu(r,n,i):n4(n,r,i);}),s;}),am=rH(function(n,r,i){nI(n,i,r);});function ag(n,r){return(aF(n)?tg:rn)(n,ih(r,3));}var av=rH(function(n,r,i){n[i?0:1].push(r);},function(){return[[],[]];}),ay=rh(function(n,r){if(null==n)return[];var i=r.length;return i>1&&iS(n,r[0],r[1])?r=[]:i>2&&iS(r[0],r[1],r[2])&&(r=[r[0]]),rs(n,nW(r,1),[]);}),a_=tn||function(){return e8.Date.now();};function ab(n,r,a){return r=a?i:r,r=n&&null==r?n.length:r,ie(n,128,i,i,i,i,r);}function ax(n,r){var a;if("function"!=typeof r)throw new eO(o);return n=a8(n),function(){return--n>0&&(a=r.apply(this,arguments)),n<=1&&(r=i),a;};}var aE=rh(function(n,r,i){var a=1;if(i.length){var o=tW(i,id(aE));a|=32;}return ie(n,a,r,i,o);}),aw=rh(function(n,r,i){var a=3;if(i.length){var o=tW(i,id(aw));a|=32;}return ie(r,a,n,i,o);});function aS(n,r,a){var s,l,u,c,f,d,h=0,p=!1,m=!1,g=!0;if("function"!=typeof n)throw new eO(o);function v(r){var a=s,o=l;return s=l=i,h=r,c=n.apply(o,a);}function y(n){var a=n-d,o=n-h;return i===d||a>=r||a<0||m&&o>=u;}function _(){var n,i,a,o=a_();if(y(o))return b(o);f=iL(_,(n=o-d,i=o-h,a=r-n,m?t5(a,u-i):a));}function b(n){return(f=i,g&&s)?v(n):(s=l=i,c);}function x(){var n,a=a_(),o=y(a);if(s=arguments,l=this,d=a,o){if(i===f)return h=n=d,f=iL(_,r),p?v(n):c;if(m)return rN(f),f=iL(_,r),v(d);}return i===f&&(f=iL(_,r)),c;}return r=a9(r)||0,aq(a)&&(p=!!a.leading,u=(m="maxWait"in a)?t4(a9(a.maxWait)||0,r):u,g="trailing"in a?!!a.trailing:g),x.cancel=function(){i!==f&&rN(f),h=0,s=d=l=f=i;},x.flush=function(){return i===f?c:b(a_());},x;}var aT=rh(function(n,r){return nB(n,1,r);}),aA=rh(function(n,r,i){return nB(n,a9(r)||0,i);});function aC(n,r){if("function"!=typeof n||null!=r&&"function"!=typeof r)throw new eO(o);var i=function(){var a=arguments,o=r?r.apply(this,a):a[0],s=i.cache;if(s.has(o))return s.get(o);var l=n.apply(this,a);return i.cache=s.set(o,l)||s,l;};return i.cache=new(aC.Cache||nw),i;}function aO(n){if("function"!=typeof n)throw new eO(o);return function(){var r=arguments;switch(r.length){case 0:return!n.call(this);case 1:return!n.call(this,r[0]);case 2:return!n.call(this,r[0],r[1]);case 3:return!n.call(this,r[0],r[1],r[2]);}return!n.apply(this,r);};}aC.Cache=nw;var aM=rh(function(n,r){var i=(r=1==r.length&&aF(r[0])?tg(r[0],tL(ih())):tg(nW(r,1),tL(ih()))).length;return rh(function(a){for(var o=-1,s=t5(a.length,i);++o<s;)a[o]=r[o].call(this,a[o]);return tu(n,this,a);});}),aR=rh(function(n,r){var a=tW(r,id(aR));return ie(n,32,i,r,a);}),aP=rh(function(n,r){var a=tW(r,id(aP));return ie(n,64,i,r,a);}),ak=io(function(n,r){return ie(n,256,i,i,i,r);});function aI(n,r){return n===r||n!=n&&r!=r;}var aL=r5(n0),aN=r5(function(n,r){return n>=r;}),aD=n5(function(){return arguments;}())?n5:function(n){return a$(n)&&eL.call(n,"callee")&&!eZ.call(n,"callee");},aF=eb.isArray,aB=tr?tL(tr):function(n){return a$(n)&&nJ(n)==O;};function aj(n){return null!=n&&aX(n.length)&&!aH(n);}function az(n){return a$(n)&&aj(n);}var aU=t0||oJ,aV=ti?tL(ti):function(n){return a$(n)&&nJ(n)==m;};function aG(n){if(!a$(n))return!1;var r=nJ(n);return r==g||"[object DOMException]"==r||"string"==typeof n.message&&"string"==typeof n.name&&!aK(n);}function aH(n){if(!aq(n))return!1;var r=nJ(n);return r==v||r==y||"[object AsyncFunction]"==r||"[object Proxy]"==r;}function aW(n){return"number"==typeof n&&n==a8(n);}function aX(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991;}function aq(n){var r=typeof n;return null!=n&&("object"==r||"function"==r);}function a$(n){return null!=n&&"object"==typeof n;}var aY=ta?tL(ta):function(n){return a$(n)&&i_(n)==_;};function aZ(n){return"number"==typeof n||a$(n)&&nJ(n)==b;}function aK(n){if(!a$(n)||nJ(n)!=x)return!1;var r=eW(n);if(null===r)return!0;var i=eL.call(r,"constructor")&&r.constructor;return"function"==typeof i&&i instanceof i&&eI.call(i)==eB;}var aQ=to?tL(to):function(n){return a$(n)&&nJ(n)==w;},aJ=ts?tL(ts):function(n){return a$(n)&&i_(n)==S;};function a0(n){return"string"==typeof n||!aF(n)&&a$(n)&&nJ(n)==T;}function a1(n){return"symbol"==typeof n||a$(n)&&nJ(n)==A;}var a2=tl?tL(tl):function(n){return a$(n)&&aX(n.length)&&!!e0[nJ(n)];},a3=r5(rt),a4=r5(function(n,r){return n<=r;});function a5(n){if(!n)return[];if(aj(n))return a0(n)?t$(n):rV(n);if(e6&&n[e6])return function(n){for(var r,i=[];!(r=n.next()).done;)i.push(r.value);return i;}(n[e6]());var r=i_(n);return(r==_?tG:r==S?tX:ow)(n);}function a6(n){return n?(n=a9(n))===u||n===-u?(n<0?-1:1)*17976931348623157e292:n==n?n:0:0===n?n:0;}function a8(n){var r=a6(n),i=r%1;return r==r?i?r-i:r:0;}function a7(n){return n?nN(a8(n),0,4294967295):0;}function a9(n){if("number"==typeof n)return n;if(a1(n))return c;if(aq(n)){var r="function"==typeof n.valueOf?n.valueOf():n;n=aq(r)?r+"":r;}if("string"!=typeof n)return 0===n?n:+n;n=tI(n);var i=ef.test(n);return i||eh.test(n)?e4(n.slice(2),i?2:8):ec.test(n)?c:+n;}function oe(n){return rG(n,om(n));}function ot(n){return null==n?"":rw(n);}var on=rW(function(n,r){if(iO(r)||aj(r)){rG(r,op(r),n);return;}for(var i in r)eL.call(r,i)&&nM(n,i,r[i]);}),or=rW(function(n,r){rG(r,om(r),n);}),oi=rW(function(n,r,i,a){rG(r,om(r),n,a);}),oa=rW(function(n,r,i,a){rG(r,op(r),n,a);}),oo=io(nL),os=rh(function(n,r){n=eT(n);var a=-1,o=r.length,s=o>2?r[2]:i;for(s&&iS(r[0],r[1],s)&&(o=1);++a<o;)for(var l=r[a],u=om(l),c=-1,f=u.length;++c<f;){var d=u[c],h=n[d];(i===h||aI(h,eP[d])&&!eL.call(n,d))&&(n[d]=l[d]);}return n;}),ol=rh(function(n){return n.push(i,ir),tu(ov,i,n);});function ou(n,r,a){var o=null==n?i:nK(n,r);return i===o?a:o;}function oc(n,r){return null!=n&&ib(n,r,n2);}var of=r0(function(n,r,i){null!=r&&"function"!=typeof r.toString&&(r=eF.call(r)),n[r]=i;},oF(oz)),od=r0(function(n,r,i){null!=r&&"function"!=typeof r.toString&&(r=eF.call(r)),eL.call(n,r)?n[r].push(i):n[r]=[i];},ih),oh=rh(n4);function op(n){return aj(n)?nA(n):re(n);}function om(n){return aj(n)?nA(n,!0):function(n){if(!aq(n))return function(n){var r=[];if(null!=n)for(var i in eT(n))r.push(i);return r;}(n);var r=iO(n),i=[];for(var a in n)"constructor"==a&&(r||!eL.call(n,a))||i.push(a);return i;}(n);}var og=rW(function(n,r,i){ra(n,r,i);}),ov=rW(function(n,r,i,a){ra(n,r,i,a);}),oy=io(function(n,r){var i={};if(null==n)return i;var a=!1;r=tg(r,function(r){return r=rI(r,n),a||(a=r.length>1),r;}),rG(n,il(n),i),a&&(i=nD(i,7,ii));for(var o=r.length;o--;)rT(i,r[o]);return i;}),o_=io(function(n,r){return null==n?{}:rl(n,r,function(r,i){return oc(n,i);});});function ob(n,r){if(null==n)return{};var i=tg(il(n),function(n){return[n];});return r=ih(r),rl(n,i,function(n,i){return r(n,i[0]);});}var ox=r9(op),oE=r9(om);function ow(n){return null==n?[]:tN(n,op(n));}var oS=rY(function(n,r,i){return r=r.toLowerCase(),n+(i?oT(r):r);});function oT(n){return oI(ot(n).toLowerCase());}function oA(n){return(n=ot(n))&&n.replace(em,tj).replace(eq,"");}var oC=rY(function(n,r,i){return n+(i?"-":"")+r.toLowerCase();}),oO=rY(function(n,r,i){return n+(i?" ":"")+r.toLowerCase();}),oM=r$("toLowerCase"),oR=rY(function(n,r,i){return n+(i?"_":"")+r.toLowerCase();}),oP=rY(function(n,r,i){return n+(i?" ":"")+oI(r);}),ok=rY(function(n,r,i){return n+(i?" ":"")+r.toUpperCase();}),oI=r$("toUpperCase");function oL(n,r,a){if(n=ot(n),r=a?i:r,i===r){var o;return(o=n,eK.test(o))?n.match(eY)||[]:n.match(ea)||[];}return n.match(r)||[];}var oN=rh(function(n,r){try{return tu(n,i,r);}catch(n){return aG(n)?n:new eE(n);}}),oD=io(function(n,r){return tf(r,function(r){nI(n,r=iz(r),aE(n[r],n));}),n;});function oF(n){return function(){return n;};}var oB=rQ(),oj=rQ(!0);function oz(n){return n;}function oU(n){return n9("function"==typeof n?n:nD(n,1));}var oV=rh(function(n,r){return function(i){return n4(i,n,r);};}),oG=rh(function(n,r){return function(i){return n4(n,i,r);};});function oH(n,r,i){var a=op(r),o=nZ(r,a);null!=i||aq(r)&&(o.length||!a.length)||(i=r,r=n,n=this,o=nZ(r,op(r)));var s=!(aq(i)&&"chain"in i)||!!i.chain,l=aH(n);return tf(o,function(i){var a=r[i];n[i]=a,l&&(n.prototype[i]=function(){var r=this.__chain__;if(s||r){var i=n(this.__wrapped__);return(i.__actions__=rV(this.__actions__)).push({func:a,args:arguments,thisArg:n}),i.__chain__=r,i;}return a.apply(n,tv([this.value()],arguments));});}),n;}function oW(){}var oX=r2(tg),oq=r2(td),o$=r2(tb);function oY(n){return iT(n)?tO(iz(n)):function(r){return nK(r,n);};}var oZ=r4(),oK=r4(!0);function oQ(){return[];}function oJ(){return!1;}var o0=r1(function(n,r){return n+r;},0),o1=r8("ceil"),o2=r1(function(n,r){return n/r;},1),o3=r8("floor"),o4=r1(function(n,r){return n*r;},1),o5=r8("round"),o6=r1(function(n,r){return n-r;},0);return ng.after=function(n,r){if("function"!=typeof r)throw new eO(o);return n=a8(n),function(){if(--n<1)return r.apply(this,arguments);};},ng.ary=ab,ng.assign=on,ng.assignIn=or,ng.assignInWith=oi,ng.assignWith=oa,ng.at=oo,ng.before=ax,ng.bind=aE,ng.bindAll=oD,ng.bindKey=aw,ng.castArray=function(){if(!arguments.length)return[];var n=arguments[0];return aF(n)?n:[n];},ng.chain=aa,ng.chunk=function(n,r,a){r=(a?iS(n,r,a):i===r)?1:t4(a8(r),0);var o=null==n?0:n.length;if(!o||r<1)return[];for(var s=0,l=0,u=eb(tM(o/r));s<o;)u[l++]=rv(n,s,s+=r);return u;},ng.compact=function(n){for(var r=-1,i=null==n?0:n.length,a=0,o=[];++r<i;){var s=n[r];s&&(o[a++]=s);}return o;},ng.concat=function(){var n=arguments.length;if(!n)return[];for(var r=eb(n-1),i=arguments[0],a=n;a--;)r[a-1]=arguments[a];return tv(aF(i)?rV(i):[i],nW(r,1));},ng.cond=function(n){var r=null==n?0:n.length,i=ih();return n=r?tg(n,function(n){if("function"!=typeof n[1])throw new eO(o);return[i(n[0]),n[1]];}):[],rh(function(i){for(var a=-1;++a<r;){var o=n[a];if(tu(o[0],this,i))return tu(o[1],this,i);}});},ng.conforms=function(n){var r,i;return i=op(r=nD(n,1)),function(n){return nF(n,r,i);};},ng.constant=oF,ng.countBy=al,ng.create=function(n,r){var i=nv(n);return null==r?i:nk(i,r);},ng.curry=function n(r,a,o){a=o?i:a;var s=ie(r,8,i,i,i,i,i,a);return s.placeholder=n.placeholder,s;},ng.curryRight=function n(r,a,o){a=o?i:a;var s=ie(r,16,i,i,i,i,i,a);return s.placeholder=n.placeholder,s;},ng.debounce=aS,ng.defaults=os,ng.defaultsDeep=ol,ng.defer=aT,ng.delay=aA,ng.difference=iG,ng.differenceBy=iH,ng.differenceWith=iW,ng.drop=function(n,r,a){var o=null==n?0:n.length;return o?rv(n,(r=a||i===r?1:a8(r))<0?0:r,o):[];},ng.dropRight=function(n,r,a){var o=null==n?0:n.length;return o?rv(n,0,(r=o-(r=a||i===r?1:a8(r)))<0?0:r):[];},ng.dropRightWhile=function(n,r){return n&&n.length?rC(n,ih(r,3),!0,!0):[];},ng.dropWhile=function(n,r){return n&&n.length?rC(n,ih(r,3),!0):[];},ng.fill=function(n,r,a,o){var s=null==n?0:n.length;return s?(a&&"number"!=typeof a&&iS(n,r,a)&&(a=0,o=s),function(n,r,a,o){var s=n.length;for((a=a8(a))<0&&(a=-a>s?0:s+a),(o=i===o||o>s?s:a8(o))<0&&(o+=s),o=a>o?0:a7(o);a<o;)n[a++]=r;return n;}(n,r,a,o)):[];},ng.filter=function(n,r){return(aF(n)?th:nH)(n,ih(r,3));},ng.flatMap=function(n,r){return nW(ag(n,r),1);},ng.flatMapDeep=function(n,r){return nW(ag(n,r),u);},ng.flatMapDepth=function(n,r,a){return a=i===a?1:a8(a),nW(ag(n,r),a);},ng.flatten=i$,ng.flattenDeep=function(n){return(null==n?0:n.length)?nW(n,u):[];},ng.flattenDepth=function(n,r){return(null==n?0:n.length)?nW(n,r=i===r?1:a8(r)):[];},ng.flip=function(n){return ie(n,512);},ng.flow=oB,ng.flowRight=oj,ng.fromPairs=function(n){for(var r=-1,i=null==n?0:n.length,a={};++r<i;){var o=n[r];a[o[0]]=o[1];}return a;},ng.functions=function(n){return null==n?[]:nZ(n,op(n));},ng.functionsIn=function(n){return null==n?[]:nZ(n,om(n));},ng.groupBy=ah,ng.initial=function(n){return(null==n?0:n.length)?rv(n,0,-1):[];},ng.intersection=iZ,ng.intersectionBy=iK,ng.intersectionWith=iQ,ng.invert=of,ng.invertBy=od,ng.invokeMap=ap,ng.iteratee=oU,ng.keyBy=am,ng.keys=op,ng.keysIn=om,ng.map=ag,ng.mapKeys=function(n,r){var i={};return r=ih(r,3),n$(n,function(n,a,o){nI(i,r(n,a,o),n);}),i;},ng.mapValues=function(n,r){var i={};return r=ih(r,3),n$(n,function(n,a,o){nI(i,a,r(n,a,o));}),i;},ng.matches=function(n){return rr(nD(n,1));},ng.matchesProperty=function(n,r){return ri(n,nD(r,1));},ng.memoize=aC,ng.merge=og,ng.mergeWith=ov,ng.method=oV,ng.methodOf=oG,ng.mixin=oH,ng.negate=aO,ng.nthArg=function(n){return n=a8(n),rh(function(r){return ro(r,n);});},ng.omit=oy,ng.omitBy=function(n,r){return ob(n,aO(ih(r)));},ng.once=function(n){return ax(2,n);},ng.orderBy=function(n,r,a,o){return null==n?[]:(aF(r)||(r=null==r?[]:[r]),aF(a=o?i:a)||(a=null==a?[]:[a]),rs(n,r,a));},ng.over=oX,ng.overArgs=aM,ng.overEvery=oq,ng.overSome=o$,ng.partial=aR,ng.partialRight=aP,ng.partition=av,ng.pick=o_,ng.pickBy=ob,ng.property=oY,ng.propertyOf=function(n){return function(r){return null==n?i:nK(n,r);};},ng.pull=i0,ng.pullAll=i1,ng.pullAllBy=function(n,r,i){return n&&n.length&&r&&r.length?ru(n,r,ih(i,2)):n;},ng.pullAllWith=function(n,r,a){return n&&n.length&&r&&r.length?ru(n,r,i,a):n;},ng.pullAt=i2,ng.range=oZ,ng.rangeRight=oK,ng.rearg=ak,ng.reject=function(n,r){return(aF(n)?th:nH)(n,aO(ih(r,3)));},ng.remove=function(n,r){var i=[];if(!(n&&n.length))return i;var a=-1,o=[],s=n.length;for(r=ih(r,3);++a<s;){var l=n[a];r(l,a,n)&&(i.push(l),o.push(a));}return rc(n,o),i;},ng.rest=function(n,r){if("function"!=typeof n)throw new eO(o);return rh(n,r=i===r?r:a8(r));},ng.reverse=i3,ng.sampleSize=function(n,r,a){return r=(a?iS(n,r,a):i===r)?1:a8(r),(aF(n)?function(n,r){return iB(rV(n),nN(r,0,n.length));}:function(n,r){var i=ow(n);return iB(i,nN(r,0,i.length));})(n,r);},ng.set=function(n,r,i){return null==n?n:rp(n,r,i);},ng.setWith=function(n,r,a,o){return o="function"==typeof o?o:i,null==n?n:rp(n,r,a,o);},ng.shuffle=function(n){return(aF(n)?function(n){return iB(rV(n));}:function(n){return iB(ow(n));})(n);},ng.slice=function(n,r,a){var o=null==n?0:n.length;return o?(a&&"number"!=typeof a&&iS(n,r,a)?(r=0,a=o):(r=null==r?0:a8(r),a=i===a?o:a8(a)),rv(n,r,a)):[];},ng.sortBy=ay,ng.sortedUniq=function(n){return n&&n.length?rx(n):[];},ng.sortedUniqBy=function(n,r){return n&&n.length?rx(n,ih(r,2)):[];},ng.split=function(n,r,a){return(a&&"number"!=typeof a&&iS(n,r,a)&&(r=a=i),a=i===a?4294967295:a>>>0)?(n=ot(n))&&("string"==typeof r||null!=r&&!aQ(r))&&!(r=rw(r))&&tV(n)?rL(t$(n),0,a):n.split(r,a):[];},ng.spread=function(n,r){if("function"!=typeof n)throw new eO(o);return r=null==r?0:t4(a8(r),0),rh(function(i){var a=i[r],o=rL(i,0,r);return a&&tv(o,a),tu(n,this,o);});},ng.tail=function(n){var r=null==n?0:n.length;return r?rv(n,1,r):[];},ng.take=function(n,r,a){return n&&n.length?rv(n,0,(r=a||i===r?1:a8(r))<0?0:r):[];},ng.takeRight=function(n,r,a){var o=null==n?0:n.length;return o?rv(n,(r=o-(r=a||i===r?1:a8(r)))<0?0:r,o):[];},ng.takeRightWhile=function(n,r){return n&&n.length?rC(n,ih(r,3),!1,!0):[];},ng.takeWhile=function(n,r){return n&&n.length?rC(n,ih(r,3)):[];},ng.tap=function(n,r){return r(n),n;},ng.throttle=function(n,r,i){var a=!0,s=!0;if("function"!=typeof n)throw new eO(o);return aq(i)&&(a="leading"in i?!!i.leading:a,s="trailing"in i?!!i.trailing:s),aS(n,r,{leading:a,maxWait:r,trailing:s});},ng.thru=ao,ng.toArray=a5,ng.toPairs=ox,ng.toPairsIn=oE,ng.toPath=function(n){return aF(n)?tg(n,iz):a1(n)?[n]:rV(ij(ot(n)));},ng.toPlainObject=oe,ng.transform=function(n,r,i){var a=aF(n),o=a||aU(n)||a2(n);if(r=ih(r,4),null==i){var s=n&&n.constructor;i=o?a?new s:[]:aq(n)&&aH(s)?nv(eW(n)):{};}return(o?tf:n$)(n,function(n,a,o){return r(i,n,a,o);}),i;},ng.unary=function(n){return ab(n,1);},ng.union=i4,ng.unionBy=i5,ng.unionWith=i6,ng.uniq=function(n){return n&&n.length?rS(n):[];},ng.uniqBy=function(n,r){return n&&n.length?rS(n,ih(r,2)):[];},ng.uniqWith=function(n,r){return r="function"==typeof r?r:i,n&&n.length?rS(n,i,r):[];},ng.unset=function(n,r){return null==n||rT(n,r);},ng.unzip=i8,ng.unzipWith=i7,ng.update=function(n,r,i){return null==n?n:rA(n,r,rk(i));},ng.updateWith=function(n,r,a,o){return o="function"==typeof o?o:i,null==n?n:rA(n,r,rk(a),o);},ng.values=ow,ng.valuesIn=function(n){return null==n?[]:tN(n,om(n));},ng.without=i9,ng.words=oL,ng.wrap=function(n,r){return aR(rk(r),n);},ng.xor=ae,ng.xorBy=at,ng.xorWith=an,ng.zip=ar,ng.zipObject=function(n,r){return rR(n||[],r||[],nM);},ng.zipObjectDeep=function(n,r){return rR(n||[],r||[],rp);},ng.zipWith=ai,ng.entries=ox,ng.entriesIn=oE,ng.extend=or,ng.extendWith=oi,oH(ng,ng),ng.add=o0,ng.attempt=oN,ng.camelCase=oS,ng.capitalize=oT,ng.ceil=o1,ng.clamp=function(n,r,a){return i===a&&(a=r,r=i),i!==a&&(a=(a=a9(a))==a?a:0),i!==r&&(r=(r=a9(r))==r?r:0),nN(a9(n),r,a);},ng.clone=function(n){return nD(n,4);},ng.cloneDeep=function(n){return nD(n,5);},ng.cloneDeepWith=function(n,r){return nD(n,5,r="function"==typeof r?r:i);},ng.cloneWith=function(n,r){return nD(n,4,r="function"==typeof r?r:i);},ng.conformsTo=function(n,r){return null==r||nF(n,r,op(r));},ng.deburr=oA,ng.defaultTo=function(n,r){return null==n||n!=n?r:n;},ng.divide=o2,ng.endsWith=function(n,r,a){n=ot(n),r=rw(r);var o=n.length,s=a=i===a?o:nN(a8(a),0,o);return(a-=r.length)>=0&&n.slice(a,s)==r;},ng.eq=aI,ng.escape=function(n){return(n=ot(n))&&W.test(n)?n.replace(G,tz):n;},ng.escapeRegExp=function(n){return(n=ot(n))&&J.test(n)?n.replace(Q,"\\$&"):n;},ng.every=function(n,r,a){var o=aF(n)?td:nV;return a&&iS(n,r,a)&&(r=i),o(n,ih(r,3));},ng.find=au,ng.findIndex=iX,ng.findKey=function(n,r){return tE(n,ih(r,3),n$);},ng.findLast=ac,ng.findLastIndex=iq,ng.findLastKey=function(n,r){return tE(n,ih(r,3),nY);},ng.floor=o3,ng.forEach=af,ng.forEachRight=ad,ng.forIn=function(n,r){return null==n?n:nX(n,ih(r,3),om);},ng.forInRight=function(n,r){return null==n?n:nq(n,ih(r,3),om);},ng.forOwn=function(n,r){return n&&n$(n,ih(r,3));},ng.forOwnRight=function(n,r){return n&&nY(n,ih(r,3));},ng.get=ou,ng.gt=aL,ng.gte=aN,ng.has=function(n,r){return null!=n&&ib(n,r,n1);},ng.hasIn=oc,ng.head=iY,ng.identity=oz,ng.includes=function(n,r,i,a){n=aj(n)?n:ow(n),i=i&&!a?a8(i):0;var o=n.length;return i<0&&(i=t4(o+i,0)),a0(n)?i<=o&&n.indexOf(r,i)>-1:!!o&&tS(n,r,i)>-1;},ng.indexOf=function(n,r,i){var a=null==n?0:n.length;if(!a)return -1;var o=null==i?0:a8(i);return o<0&&(o=t4(a+o,0)),tS(n,r,o);},ng.inRange=function(n,r,a){var o,s,l;return r=a6(r),i===a?(a=r,r=0):a=a6(a),(o=n=a9(n))>=t5(s=r,l=a)&&o<t4(s,l);},ng.invoke=oh,ng.isArguments=aD,ng.isArray=aF,ng.isArrayBuffer=aB,ng.isArrayLike=aj,ng.isArrayLikeObject=az,ng.isBoolean=function(n){return!0===n||!1===n||a$(n)&&nJ(n)==p;},ng.isBuffer=aU,ng.isDate=aV,ng.isElement=function(n){return a$(n)&&1===n.nodeType&&!aK(n);},ng.isEmpty=function(n){if(null==n)return!0;if(aj(n)&&(aF(n)||"string"==typeof n||"function"==typeof n.splice||aU(n)||a2(n)||aD(n)))return!n.length;var r=i_(n);if(r==_||r==S)return!n.size;if(iO(n))return!re(n).length;for(var i in n)if(eL.call(n,i))return!1;return!0;},ng.isEqual=function(n,r){return n6(n,r);},ng.isEqualWith=function(n,r,a){var o=(a="function"==typeof a?a:i)?a(n,r):i;return i===o?n6(n,r,i,a):!!o;},ng.isError=aG,ng.isFinite=function(n){return"number"==typeof n&&t1(n);},ng.isFunction=aH,ng.isInteger=aW,ng.isLength=aX,ng.isMap=aY,ng.isMatch=function(n,r){return n===r||n8(n,r,im(r));},ng.isMatchWith=function(n,r,a){return a="function"==typeof a?a:i,n8(n,r,im(r),a);},ng.isNaN=function(n){return aZ(n)&&n!=+n;},ng.isNative=function(n){if(iC(n))throw new eE("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return n7(n);},ng.isNil=function(n){return null==n;},ng.isNull=function(n){return null===n;},ng.isNumber=aZ,ng.isObject=aq,ng.isObjectLike=a$,ng.isPlainObject=aK,ng.isRegExp=aQ,ng.isSafeInteger=function(n){return aW(n)&&n>=-9007199254740991&&n<=9007199254740991;},ng.isSet=aJ,ng.isString=a0,ng.isSymbol=a1,ng.isTypedArray=a2,ng.isUndefined=function(n){return i===n;},ng.isWeakMap=function(n){return a$(n)&&i_(n)==C;},ng.isWeakSet=function(n){return a$(n)&&"[object WeakSet]"==nJ(n);},ng.join=function(n,r){return null==n?"":t2.call(n,r);},ng.kebabCase=oC,ng.last=iJ,ng.lastIndexOf=function(n,r,a){var o=null==n?0:n.length;if(!o)return -1;var s=o;return i!==a&&(s=(s=a8(a))<0?t4(o+s,0):t5(s,o-1)),r==r?function(n,r,i){for(var a=i+1;a--&&n[a]!==r;);return a;}(n,r,s):tw(n,tA,s,!0);},ng.lowerCase=oO,ng.lowerFirst=oM,ng.lt=a3,ng.lte=a4,ng.max=function(n){return n&&n.length?nG(n,oz,n0):i;},ng.maxBy=function(n,r){return n&&n.length?nG(n,ih(r,2),n0):i;},ng.mean=function(n){return tC(n,oz);},ng.meanBy=function(n,r){return tC(n,ih(r,2));},ng.min=function(n){return n&&n.length?nG(n,oz,rt):i;},ng.minBy=function(n,r){return n&&n.length?nG(n,ih(r,2),rt):i;},ng.stubArray=oQ,ng.stubFalse=oJ,ng.stubObject=function(){return{};},ng.stubString=function(){return"";},ng.stubTrue=function(){return!0;},ng.multiply=o4,ng.nth=function(n,r){return n&&n.length?ro(n,a8(r)):i;},ng.noConflict=function(){return e8._===this&&(e8._=ej),this;},ng.noop=oW,ng.now=a_,ng.pad=function(n,r,i){n=ot(n);var a=(r=a8(r))?tq(n):0;if(!r||a>=r)return n;var o=(r-a)/2;return r3(tQ(o),i)+n+r3(tM(o),i);},ng.padEnd=function(n,r,i){n=ot(n);var a=(r=a8(r))?tq(n):0;return r&&a<r?n+r3(r-a,i):n;},ng.padStart=function(n,r,i){n=ot(n);var a=(r=a8(r))?tq(n):0;return r&&a<r?r3(r-a,i)+n:n;},ng.parseInt=function(n,r,i){return i||null==r?r=0:r&&(r=+r),t8(ot(n).replace(ee,""),r||0);},ng.random=function(n,r,a){if(a&&"boolean"!=typeof a&&iS(n,r,a)&&(r=a=i),i===a&&("boolean"==typeof r?(a=r,r=i):"boolean"==typeof n&&(a=n,n=i)),i===n&&i===r?(n=0,r=1):(n=a6(n),i===r?(r=n,n=0):r=a6(r)),n>r){var o=n;n=r,r=o;}if(a||n%1||r%1){var s=t7();return t5(n+s*(r-n+e3("1e-"+((s+"").length-1))),r);}return rf(n,r);},ng.reduce=function(n,r,i){var a=aF(n)?ty:tR,o=arguments.length<3;return a(n,ih(r,4),i,o,nz);},ng.reduceRight=function(n,r,i){var a=aF(n)?t_:tR,o=arguments.length<3;return a(n,ih(r,4),i,o,nU);},ng.repeat=function(n,r,a){return r=(a?iS(n,r,a):i===r)?1:a8(r),rd(ot(n),r);},ng.replace=function(){var n=arguments,r=ot(n[0]);return n.length<3?r:r.replace(n[1],n[2]);},ng.result=function(n,r,a){r=rI(r,n);var o=-1,s=r.length;for(s||(s=1,n=i);++o<s;){var l=null==n?i:n[iz(r[o])];i===l&&(o=s,l=a),n=aH(l)?l.call(n):l;}return n;},ng.round=o5,ng.runInContext=n,ng.sample=function(n){return(aF(n)?nC:function(n){return nC(ow(n));})(n);},ng.size=function(n){if(null==n)return 0;if(aj(n))return a0(n)?tq(n):n.length;var r=i_(n);return r==_||r==S?n.size:re(n).length;},ng.snakeCase=oR,ng.some=function(n,r,a){var o=aF(n)?tb:ry;return a&&iS(n,r,a)&&(r=i),o(n,ih(r,3));},ng.sortedIndex=function(n,r){return r_(n,r);},ng.sortedIndexBy=function(n,r,i){return rb(n,r,ih(i,2));},ng.sortedIndexOf=function(n,r){var i=null==n?0:n.length;if(i){var a=r_(n,r);if(a<i&&aI(n[a],r))return a;}return -1;},ng.sortedLastIndex=function(n,r){return r_(n,r,!0);},ng.sortedLastIndexBy=function(n,r,i){return rb(n,r,ih(i,2),!0);},ng.sortedLastIndexOf=function(n,r){if(null==n?0:n.length){var i=r_(n,r,!0)-1;if(aI(n[i],r))return i;}return -1;},ng.startCase=oP,ng.startsWith=function(n,r,i){return n=ot(n),i=null==i?0:nN(a8(i),0,n.length),r=rw(r),n.slice(i,i+r.length)==r;},ng.subtract=o6,ng.sum=function(n){return n&&n.length?tP(n,oz):0;},ng.sumBy=function(n,r){return n&&n.length?tP(n,ih(r,2)):0;},ng.template=function(n,r,a){var o=ng.templateSettings;a&&iS(n,r,a)&&(r=i),n=ot(n),r=oi({},r,o,it);var s,l,u=oi({},r.imports,o.imports,it),c=op(u),f=tN(u,c),d=0,h=r.interpolate||eg,p="__p += '",m=eA((r.escape||eg).source+"|"+h.source+"|"+(h===$?el:eg).source+"|"+(r.evaluate||eg).source+"|$","g"),g="//# sourceURL="+(eL.call(r,"sourceURL")?(r.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++eJ+"]")+"\n";n.replace(m,function(r,i,a,o,u,c){return a||(a=o),p+=n.slice(d,c).replace(ev,tU),i&&(s=!0,p+="' +\n__e("+i+") +\n'"),u&&(l=!0,p+="';\n"+u+";\n__p += '"),a&&(p+="' +\n((__t = ("+a+")) == null ? '' : __t) +\n'"),d=c+r.length,r;}),p+="';\n";var v=eL.call(r,"variable")&&r.variable;if(v){if(eo.test(v))throw new eE("Invalid `variable` option passed into `_.template`");}else p="with (obj) {\n"+p+"\n}\n";p=(l?p.replace(j,""):p).replace(z,"$1").replace(U,"$1;"),p="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(l?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var y=oN(function(){return ew(c,g+"return "+p).apply(i,f);});if(y.source=p,aG(y))throw y;return y;},ng.times=function(n,r){if((n=a8(n))<1||n>9007199254740991)return[];var i=4294967295,a=t5(n,4294967295);r=ih(r),n-=4294967295;for(var o=tk(a,r);++i<n;)r(i);return o;},ng.toFinite=a6,ng.toInteger=a8,ng.toLength=a7,ng.toLower=function(n){return ot(n).toLowerCase();},ng.toNumber=a9,ng.toSafeInteger=function(n){return n?nN(a8(n),-9007199254740991,9007199254740991):0===n?n:0;},ng.toString=ot,ng.toUpper=function(n){return ot(n).toUpperCase();},ng.trim=function(n,r,a){if((n=ot(n))&&(a||i===r))return tI(n);if(!n||!(r=rw(r)))return n;var o=t$(n),s=t$(r),l=tF(o,s),u=tB(o,s)+1;return rL(o,l,u).join("");},ng.trimEnd=function(n,r,a){if((n=ot(n))&&(a||i===r))return n.slice(0,tY(n)+1);if(!n||!(r=rw(r)))return n;var o=t$(n),s=tB(o,t$(r))+1;return rL(o,0,s).join("");},ng.trimStart=function(n,r,a){if((n=ot(n))&&(a||i===r))return n.replace(ee,"");if(!n||!(r=rw(r)))return n;var o=t$(n),s=tF(o,t$(r));return rL(o,s).join("");},ng.truncate=function(n,r){var a=30,o="...";if(aq(r)){var s="separator"in r?r.separator:s;a="length"in r?a8(r.length):a,o="omission"in r?rw(r.omission):o;}var l=(n=ot(n)).length;if(tV(n)){var u=t$(n);l=u.length;}if(a>=l)return n;var c=a-tq(o);if(c<1)return o;var f=u?rL(u,0,c).join(""):n.slice(0,c);if(i===s)return f+o;if(u&&(c+=f.length-c),aQ(s)){if(n.slice(c).search(s)){var d,h=f;for(s.global||(s=eA(s.source,ot(eu.exec(s))+"g")),s.lastIndex=0;d=s.exec(h);)var p=d.index;f=f.slice(0,i===p?c:p);}}else if(n.indexOf(rw(s),c)!=c){var m=f.lastIndexOf(s);m>-1&&(f=f.slice(0,m));}return f+o;},ng.unescape=function(n){return(n=ot(n))&&H.test(n)?n.replace(V,tZ):n;},ng.uniqueId=function(n){var r=++eN;return ot(n)+r;},ng.upperCase=ok,ng.upperFirst=oI,ng.each=af,ng.eachRight=ad,ng.first=iY,oH(ng,(e_={},n$(ng,function(n,r){eL.call(ng.prototype,r)||(e_[r]=n);}),e_),{chain:!1}),ng.VERSION="4.17.21",tf(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){ng[n].placeholder=ng;}),tf(["drop","take"],function(n,r){nb.prototype[n]=function(a){a=i===a?1:t4(a8(a),0);var o=this.__filtered__&&!r?new nb(this):this.clone();return o.__filtered__?o.__takeCount__=t5(a,o.__takeCount__):o.__views__.push({size:t5(a,4294967295),type:n+(o.__dir__<0?"Right":"")}),o;},nb.prototype[n+"Right"]=function(r){return this.reverse()[n](r).reverse();};}),tf(["filter","map","takeWhile"],function(n,r){var i=r+1,a=1==i||3==i;nb.prototype[n]=function(n){var r=this.clone();return r.__iteratees__.push({iteratee:ih(n,3),type:i}),r.__filtered__=r.__filtered__||a,r;};}),tf(["head","last"],function(n,r){var i="take"+(r?"Right":"");nb.prototype[n]=function(){return this[i](1).value()[0];};}),tf(["initial","tail"],function(n,r){var i="drop"+(r?"":"Right");nb.prototype[n]=function(){return this.__filtered__?new nb(this):this[i](1);};}),nb.prototype.compact=function(){return this.filter(oz);},nb.prototype.find=function(n){return this.filter(n).head();},nb.prototype.findLast=function(n){return this.reverse().find(n);},nb.prototype.invokeMap=rh(function(n,r){return"function"==typeof n?new nb(this):this.map(function(i){return n4(i,n,r);});}),nb.prototype.reject=function(n){return this.filter(aO(ih(n)));},nb.prototype.slice=function(n,r){n=a8(n);var a=this;return a.__filtered__&&(n>0||r<0)?new nb(a):(n<0?a=a.takeRight(-n):n&&(a=a.drop(n)),i!==r&&(a=(r=a8(r))<0?a.dropRight(-r):a.take(r-n)),a);},nb.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse();},nb.prototype.toArray=function(){return this.take(4294967295);},n$(nb.prototype,function(n,r){var a=/^(?:filter|find|map|reject)|While$/.test(r),o=/^(?:head|last)$/.test(r),s=ng[o?"take"+("last"==r?"Right":""):r],l=o||/^find/.test(r);s&&(ng.prototype[r]=function(){var r=this.__wrapped__,u=o?[1]:arguments,c=r instanceof nb,f=u[0],d=c||aF(r),h=function(n){var r=s.apply(ng,tv([n],u));return o&&p?r[0]:r;};d&&a&&"function"==typeof f&&1!=f.length&&(c=d=!1);var p=this.__chain__,m=!!this.__actions__.length,g=l&&!p,v=c&&!m;if(!l&&d){r=v?r:new nb(this);var y=n.apply(r,u);return y.__actions__.push({func:ao,args:[h],thisArg:i}),new n_(y,p);}return g&&v?n.apply(this,u):(y=this.thru(h),g?o?y.value()[0]:y.value():y);});}),tf(["pop","push","shift","sort","splice","unshift"],function(n){var r=eM[n],i=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",a=/^(?:pop|shift)$/.test(n);ng.prototype[n]=function(){var n=arguments;if(a&&!this.__chain__){var o=this.value();return r.apply(aF(o)?o:[],n);}return this[i](function(i){return r.apply(aF(i)?i:[],n);});};}),n$(nb.prototype,function(n,r){var i=ng[r];if(i){var a=i.name+"";eL.call(ns,a)||(ns[a]=[]),ns[a].push({name:r,func:i});}}),ns[rJ(i,2).name]=[{name:"wrapper",func:i}],nb.prototype.clone=function(){var n=new nb(this.__wrapped__);return n.__actions__=rV(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=rV(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=rV(this.__views__),n;},nb.prototype.reverse=function(){if(this.__filtered__){var n=new nb(this);n.__dir__=-1,n.__filtered__=!0;}else n=this.clone(),n.__dir__*=-1;return n;},nb.prototype.value=function(){var n=this.__wrapped__.value(),r=this.__dir__,i=aF(n),a=r<0,o=i?n.length:0,s=function(n,r,i){for(var a=-1,o=i.length;++a<o;){var s=i[a],l=s.size;switch(s.type){case"drop":n+=l;break;case"dropRight":r-=l;break;case"take":r=t5(r,n+l);break;case"takeRight":n=t4(n,r-l);}}return{start:n,end:r};}(0,o,this.__views__),l=s.start,u=s.end,c=u-l,f=a?u:l-1,d=this.__iteratees__,h=d.length,p=0,m=t5(c,this.__takeCount__);if(!i||!a&&o==c&&m==c)return rO(n,this.__actions__);var g=[];e:for(;c--&&p<m;){for(var v=-1,y=n[f+=r];++v<h;){var _=d[v],b=_.iteratee,x=_.type,E=b(y);if(2==x)y=E;else if(!E){if(1==x)continue e;break e;}}g[p++]=y;}return g;},ng.prototype.at=as,ng.prototype.chain=function(){return aa(this);},ng.prototype.commit=function(){return new n_(this.value(),this.__chain__);},ng.prototype.next=function(){this.__values__===i&&(this.__values__=a5(this.value()));var n=this.__index__>=this.__values__.length,r=n?i:this.__values__[this.__index__++];return{done:n,value:r};},ng.prototype.plant=function(n){for(var r,a=this;a instanceof ny;){var o=iV(a);o.__index__=0,o.__values__=i,r?s.__wrapped__=o:r=o;var s=o;a=a.__wrapped__;}return s.__wrapped__=n,r;},ng.prototype.reverse=function(){var n=this.__wrapped__;if(n instanceof nb){var r=n;return this.__actions__.length&&(r=new nb(this)),(r=r.reverse()).__actions__.push({func:ao,args:[i3],thisArg:i}),new n_(r,this.__chain__);}return this.thru(i3);},ng.prototype.toJSON=ng.prototype.valueOf=ng.prototype.value=function(){return rO(this.__wrapped__,this.__actions__);},ng.prototype.first=ng.prototype.head,e6&&(ng.prototype[e6]=function(){return this;}),ng;}();e9?((e9.exports=tK)._=tK,e7._=tK):e8._=tK;}).call(this);},d8cea4a1:function(n,r,i){"use strict";function a(n,r){let i;if(void 0===r)for(let r of n)null!=r&&(i>r||void 0===i&&r>=r)&&(i=r);else{let a=-1;for(let o of n)null!=(o=r(o,++a,n))&&(i>o||void 0===i&&o>=o)&&(i=o);}return i;}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},da176c76:function(n,r,i){var a=/\s/;n.exports=function(n){for(var r=n.length;r--&&a.test(n.charAt(r)););return r;};},da5c7e2c:function(n,r,i){"use strict";function a(n){return"function"==typeof n;}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},da74b122:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return R;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("a854094b"),l=a._(s),u=i("ee64167d"),c=a._(u),f=i("e4870cf0"),d=a._(f),h=i("23d1e047"),p=a._(h),m=i("9bab38e5"),g=i("c5499b8c"),v=i("a5a99096"),y=a._(v),_=i("8f0ec5f3"),b=a._(_),x=i("064ecd09"),E=a._(x),w=i("609f48be"),S=o._(w),T=i("2faf3d77"),A=a._(T),C=i("02a23b09"),O=i("a3273044"),M=i("dac8af92"),R=S.default.forwardRef(function(n,r){var i=S.default.useContext(A.default).groupProps,a=(0,d.default)((0,d.default)({},i),n),o=a.children,s=a.collapsible,u=a.defaultCollapsed,f=a.style,h=a.labelLayout,v=a.title,_=void 0===v?n.label:v,x=a.tooltip,w=a.align,T=void 0===w?"start":w,R=a.direction,P=a.size,k=void 0===P?32:P,I=a.titleStyle,L=a.titleRender,N=a.spaceProps,D=a.extra,F=a.autoFocus,B=(0,g.useMountMergeState)(function(){return u||!1;},{value:n.collapsed,onChange:n.onCollapse}),j=(0,c.default)(B,2),z=j[0],U=j[1],V=(0,S.useContext)(y.default.ConfigContext).getPrefixCls,G=(0,C.useGridHelpers)(n),H=G.ColWrapper,W=G.RowWrapper,X=V("pro-form-group"),q=(0,O.useStyle)("ProFormGroup",function(n){var r;return[(r=(0,d.default)((0,d.default)({},n),{},{componentCls:".".concat(X)}),(0,l.default)({},r.componentCls,{"&-title":{marginBlockEnd:r.marginXL,fontWeight:"bold"},"&-container":(0,l.default)({flexWrap:"wrap",maxWidth:"100%"},"> div".concat(r.antCls,"-space-item"),{maxWidth:"100%"}),"&-twoLine":(0,l.default)((0,l.default)((0,l.default)((0,l.default)({display:"block",width:"100%"},"".concat(r.componentCls,"-title"),{width:"100%",margin:"8px 0"}),"".concat(r.componentCls,"-container"),{paddingInlineStart:16}),"".concat(r.antCls,"-space-item,").concat(r.antCls,"-form-item"),{width:"100%"}),"".concat(r.antCls,"-form-item"),{"&-control":{display:"flex",alignItems:"center",justifyContent:"flex-end","&-input":{alignItems:"center",justifyContent:"flex-end","&-content":{flex:"none"}}}})}))];}),$=q.wrapSSR,Y=q.hashId,Z=s&&(0,M.jsx)(p.default,{style:{marginInlineEnd:8},rotate:z?void 0:90}),K=(0,M.jsx)(m.LabelIconTip,{label:Z?(0,M.jsxs)("div",{children:[Z,_]}):_,tooltip:x}),Q=(0,S.useCallback)(function(n){var r=n.children;return(0,M.jsx)(b.default,(0,d.default)((0,d.default)({},N),{},{className:(0,E.default)("".concat(X,"-container ").concat(Y),null==N?void 0:N.className),size:k,align:T,direction:R,style:(0,d.default)({rowGap:0},null==N?void 0:N.style),children:r}));},[T,X,R,Y,k,N]),J=L?L(K,n):K,ee=(0,S.useMemo)(function(){var n=[],r=S.default.Children.toArray(o).map(function(r,i){var a;return S.default.isValidElement(r)&&null!=r&&null!==(a=r.props)&&void 0!==a&&a.hidden?(n.push(r),null):0===i&&S.default.isValidElement(r)&&F?S.default.cloneElement(r,(0,d.default)((0,d.default)({},r.props),{},{autoFocus:F})):r;});return[(0,M.jsx)(W,{Wrapper:Q,children:r},"children"),n.length>0?(0,M.jsx)("div",{style:{display:"none"},children:n}):null];},[o,W,Q,F]),et=(0,c.default)(ee,2),en=et[0],er=et[1];return $((0,M.jsx)(H,{children:(0,M.jsxs)("div",{className:(0,E.default)(X,Y,(0,l.default)({},"".concat(X,"-twoLine"),"twoLine"===h)),style:f,ref:r,children:[er,(_||x||D)&&(0,M.jsx)("div",{className:"".concat(X,"-title ").concat(Y).trim(),style:I,onClick:function(){U(!z);},children:D?(0,M.jsxs)("div",{style:{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between"},children:[J,(0,M.jsx)("span",{onClick:function(n){return n.stopPropagation();},children:D})]}):J}),(0,M.jsx)("div",{style:{display:s&&z?"none":void 0},children:en})]})}));});R.displayName="ProForm-Group";},da755037:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{add:function(){return Y;},adjoint:function(){return p;},clone:function(){return s;},copy:function(){return l;},create:function(){return o;},determinant:function(){return m;},equals:function(){return ee;},exactEquals:function(){return J;},frob:function(){return $;},fromQuat:function(){return D;},fromQuat2:function(){return R;},fromRotation:function(){return T;},fromRotationTranslation:function(){return M;},fromRotationTranslationScale:function(){return L;},fromRotationTranslationScaleOrigin:function(){return N;},fromScaling:function(){return S;},fromTranslation:function(){return w;},fromValues:function(){return u;},fromXRotation:function(){return A;},fromYRotation:function(){return C;},fromZRotation:function(){return O;},frustum:function(){return F;},getRotation:function(){return I;},getScaling:function(){return k;},getTranslation:function(){return P;},identity:function(){return f;},invert:function(){return h;},lookAt:function(){return W;},mul:function(){return et;},multiply:function(){return g;},multiplyScalar:function(){return K;},multiplyScalarAndAdd:function(){return Q;},ortho:function(){return G;},orthoNO:function(){return V;},orthoZO:function(){return H;},perspective:function(){return j;},perspectiveFromFieldOfView:function(){return U;},perspectiveNO:function(){return B;},perspectiveZO:function(){return z;},rotate:function(){return _;},rotateX:function(){return b;},rotateY:function(){return x;},rotateZ:function(){return E;},scale:function(){return y;},set:function(){return c;},str:function(){return q;},sub:function(){return en;},subtract:function(){return Z;},targetTo:function(){return X;},translate:function(){return v;},transpose:function(){return d;}});var a=i("852bbaa9")._(i("1cf5f081"));function o(){var n=new a.ARRAY_TYPE(16);return a.ARRAY_TYPE!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n;}function s(n){var r=new a.ARRAY_TYPE(16);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r;}function l(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],n;}function u(n,r,i,o,s,l,u,c,f,d,h,p,m,g,v,y){var _=new a.ARRAY_TYPE(16);return _[0]=n,_[1]=r,_[2]=i,_[3]=o,_[4]=s,_[5]=l,_[6]=u,_[7]=c,_[8]=f,_[9]=d,_[10]=h,_[11]=p,_[12]=m,_[13]=g,_[14]=v,_[15]=y,_;}function c(n,r,i,a,o,s,l,u,c,f,d,h,p,m,g,v,y){return n[0]=r,n[1]=i,n[2]=a,n[3]=o,n[4]=s,n[5]=l,n[6]=u,n[7]=c,n[8]=f,n[9]=d,n[10]=h,n[11]=p,n[12]=m,n[13]=g,n[14]=v,n[15]=y,n;}function f(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n;}function d(n,r){if(n===r){var i=r[1],a=r[2],o=r[3],s=r[6],l=r[7],u=r[11];n[1]=r[4],n[2]=r[8],n[3]=r[12],n[4]=i,n[6]=r[9],n[7]=r[13],n[8]=a,n[9]=s,n[11]=r[14],n[12]=o,n[13]=l,n[14]=u;}else n[0]=r[0],n[1]=r[4],n[2]=r[8],n[3]=r[12],n[4]=r[1],n[5]=r[5],n[6]=r[9],n[7]=r[13],n[8]=r[2],n[9]=r[6],n[10]=r[10],n[11]=r[14],n[12]=r[3],n[13]=r[7],n[14]=r[11],n[15]=r[15];return n;}function h(n,r){var i=r[0],a=r[1],o=r[2],s=r[3],l=r[4],u=r[5],c=r[6],f=r[7],d=r[8],h=r[9],p=r[10],m=r[11],g=r[12],v=r[13],y=r[14],_=r[15],b=i*u-a*l,x=i*c-o*l,E=i*f-s*l,w=a*c-o*u,S=a*f-s*u,T=o*f-s*c,A=d*v-h*g,C=d*y-p*g,O=d*_-m*g,M=h*y-p*v,R=h*_-m*v,P=p*_-m*y,k=b*P-x*R+E*M+w*O-S*C+T*A;return k?(k=1/k,n[0]=(u*P-c*R+f*M)*k,n[1]=(o*R-a*P-s*M)*k,n[2]=(v*T-y*S+_*w)*k,n[3]=(p*S-h*T-m*w)*k,n[4]=(c*O-l*P-f*C)*k,n[5]=(i*P-o*O+s*C)*k,n[6]=(y*E-g*T-_*x)*k,n[7]=(d*T-p*E+m*x)*k,n[8]=(l*R-u*O+f*A)*k,n[9]=(a*O-i*R-s*A)*k,n[10]=(g*S-v*E+_*b)*k,n[11]=(h*E-d*S-m*b)*k,n[12]=(u*C-l*M-c*A)*k,n[13]=(i*M-a*C+o*A)*k,n[14]=(v*x-g*w-y*b)*k,n[15]=(d*w-h*x+p*b)*k,n):null;}function p(n,r){var i=r[0],a=r[1],o=r[2],s=r[3],l=r[4],u=r[5],c=r[6],f=r[7],d=r[8],h=r[9],p=r[10],m=r[11],g=r[12],v=r[13],y=r[14],_=r[15];return n[0]=u*(p*_-m*y)-h*(c*_-f*y)+v*(c*m-f*p),n[1]=-(a*(p*_-m*y)-h*(o*_-s*y)+v*(o*m-s*p)),n[2]=a*(c*_-f*y)-u*(o*_-s*y)+v*(o*f-s*c),n[3]=-(a*(c*m-f*p)-u*(o*m-s*p)+h*(o*f-s*c)),n[4]=-(l*(p*_-m*y)-d*(c*_-f*y)+g*(c*m-f*p)),n[5]=i*(p*_-m*y)-d*(o*_-s*y)+g*(o*m-s*p),n[6]=-(i*(c*_-f*y)-l*(o*_-s*y)+g*(o*f-s*c)),n[7]=i*(c*m-f*p)-l*(o*m-s*p)+d*(o*f-s*c),n[8]=l*(h*_-m*v)-d*(u*_-f*v)+g*(u*m-f*h),n[9]=-(i*(h*_-m*v)-d*(a*_-s*v)+g*(a*m-s*h)),n[10]=i*(u*_-f*v)-l*(a*_-s*v)+g*(a*f-s*u),n[11]=-(i*(u*m-f*h)-l*(a*m-s*h)+d*(a*f-s*u)),n[12]=-(l*(h*y-p*v)-d*(u*y-c*v)+g*(u*p-c*h)),n[13]=i*(h*y-p*v)-d*(a*y-o*v)+g*(a*p-o*h),n[14]=-(i*(u*y-c*v)-l*(a*y-o*v)+g*(a*c-o*u)),n[15]=i*(u*p-c*h)-l*(a*p-o*h)+d*(a*c-o*u),n;}function m(n){var r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=n[5],u=n[6],c=n[7],f=n[8],d=n[9],h=n[10],p=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return(r*l-i*s)*(h*y-p*v)-(r*u-a*s)*(d*y-p*g)+(r*c-o*s)*(d*v-h*g)+(i*u-a*l)*(f*y-p*m)-(i*c-o*l)*(f*v-h*m)+(a*c-o*u)*(f*g-d*m);}function g(n,r,i){var a=r[0],o=r[1],s=r[2],l=r[3],u=r[4],c=r[5],f=r[6],d=r[7],h=r[8],p=r[9],m=r[10],g=r[11],v=r[12],y=r[13],_=r[14],b=r[15],x=i[0],E=i[1],w=i[2],S=i[3];return n[0]=x*a+E*u+w*h+S*v,n[1]=x*o+E*c+w*p+S*y,n[2]=x*s+E*f+w*m+S*_,n[3]=x*l+E*d+w*g+S*b,x=i[4],E=i[5],w=i[6],S=i[7],n[4]=x*a+E*u+w*h+S*v,n[5]=x*o+E*c+w*p+S*y,n[6]=x*s+E*f+w*m+S*_,n[7]=x*l+E*d+w*g+S*b,x=i[8],E=i[9],w=i[10],S=i[11],n[8]=x*a+E*u+w*h+S*v,n[9]=x*o+E*c+w*p+S*y,n[10]=x*s+E*f+w*m+S*_,n[11]=x*l+E*d+w*g+S*b,x=i[12],E=i[13],w=i[14],S=i[15],n[12]=x*a+E*u+w*h+S*v,n[13]=x*o+E*c+w*p+S*y,n[14]=x*s+E*f+w*m+S*_,n[15]=x*l+E*d+w*g+S*b,n;}function v(n,r,i){var a,o,s,l,u,c,f,d,h,p,m,g,v=i[0],y=i[1],_=i[2];return r===n?(n[12]=r[0]*v+r[4]*y+r[8]*_+r[12],n[13]=r[1]*v+r[5]*y+r[9]*_+r[13],n[14]=r[2]*v+r[6]*y+r[10]*_+r[14],n[15]=r[3]*v+r[7]*y+r[11]*_+r[15]):(a=r[0],o=r[1],s=r[2],l=r[3],u=r[4],c=r[5],f=r[6],d=r[7],h=r[8],p=r[9],m=r[10],g=r[11],n[0]=a,n[1]=o,n[2]=s,n[3]=l,n[4]=u,n[5]=c,n[6]=f,n[7]=d,n[8]=h,n[9]=p,n[10]=m,n[11]=g,n[12]=a*v+u*y+h*_+r[12],n[13]=o*v+c*y+p*_+r[13],n[14]=s*v+f*y+m*_+r[14],n[15]=l*v+d*y+g*_+r[15]),n;}function y(n,r,i){var a=i[0],o=i[1],s=i[2];return n[0]=r[0]*a,n[1]=r[1]*a,n[2]=r[2]*a,n[3]=r[3]*a,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=r[7]*o,n[8]=r[8]*s,n[9]=r[9]*s,n[10]=r[10]*s,n[11]=r[11]*s,n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],n;}function _(n,r,i,o){var s,l,u,c,f,d,h,p,m,g,v,y,_,b,x,E,w,S,T,A,C,O,M,R,P=o[0],k=o[1],I=o[2],L=Math.hypot(P,k,I);return L<a.EPSILON?null:(P*=L=1/L,k*=L,I*=L,s=Math.sin(i),u=1-(l=Math.cos(i)),c=r[0],f=r[1],d=r[2],h=r[3],p=r[4],m=r[5],g=r[6],v=r[7],y=r[8],_=r[9],b=r[10],x=r[11],E=P*P*u+l,w=k*P*u+I*s,S=I*P*u-k*s,T=P*k*u-I*s,A=k*k*u+l,C=I*k*u+P*s,O=P*I*u+k*s,M=k*I*u-P*s,R=I*I*u+l,n[0]=c*E+p*w+y*S,n[1]=f*E+m*w+_*S,n[2]=d*E+g*w+b*S,n[3]=h*E+v*w+x*S,n[4]=c*T+p*A+y*C,n[5]=f*T+m*A+_*C,n[6]=d*T+g*A+b*C,n[7]=h*T+v*A+x*C,n[8]=c*O+p*M+y*R,n[9]=f*O+m*M+_*R,n[10]=d*O+g*M+b*R,n[11]=h*O+v*M+x*R,r!==n&&(n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n);}function b(n,r,i){var a=Math.sin(i),o=Math.cos(i),s=r[4],l=r[5],u=r[6],c=r[7],f=r[8],d=r[9],h=r[10],p=r[11];return r!==n&&(n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n[4]=s*o+f*a,n[5]=l*o+d*a,n[6]=u*o+h*a,n[7]=c*o+p*a,n[8]=f*o-s*a,n[9]=d*o-l*a,n[10]=h*o-u*a,n[11]=p*o-c*a,n;}function x(n,r,i){var a=Math.sin(i),o=Math.cos(i),s=r[0],l=r[1],u=r[2],c=r[3],f=r[8],d=r[9],h=r[10],p=r[11];return r!==n&&(n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n[0]=s*o-f*a,n[1]=l*o-d*a,n[2]=u*o-h*a,n[3]=c*o-p*a,n[8]=s*a+f*o,n[9]=l*a+d*o,n[10]=u*a+h*o,n[11]=c*a+p*o,n;}function E(n,r,i){var a=Math.sin(i),o=Math.cos(i),s=r[0],l=r[1],u=r[2],c=r[3],f=r[4],d=r[5],h=r[6],p=r[7];return r!==n&&(n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n[0]=s*o+f*a,n[1]=l*o+d*a,n[2]=u*o+h*a,n[3]=c*o+p*a,n[4]=f*o-s*a,n[5]=d*o-l*a,n[6]=h*o-u*a,n[7]=p*o-c*a,n;}function w(n,r){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n;}function S(n,r){return n[0]=r[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=r[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=r[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n;}function T(n,r,i){var o,s,l,u=i[0],c=i[1],f=i[2],d=Math.hypot(u,c,f);return d<a.EPSILON?null:(u*=d=1/d,c*=d,f*=d,o=Math.sin(r),l=1-(s=Math.cos(r)),n[0]=u*u*l+s,n[1]=c*u*l+f*o,n[2]=f*u*l-c*o,n[3]=0,n[4]=u*c*l-f*o,n[5]=c*c*l+s,n[6]=f*c*l+u*o,n[7]=0,n[8]=u*f*l+c*o,n[9]=c*f*l-u*o,n[10]=f*f*l+s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n);}function A(n,r){var i=Math.sin(r),a=Math.cos(r);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=a,n[6]=i,n[7]=0,n[8]=0,n[9]=-i,n[10]=a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n;}function C(n,r){var i=Math.sin(r),a=Math.cos(r);return n[0]=a,n[1]=0,n[2]=-i,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=i,n[9]=0,n[10]=a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n;}function O(n,r){var i=Math.sin(r),a=Math.cos(r);return n[0]=a,n[1]=i,n[2]=0,n[3]=0,n[4]=-i,n[5]=a,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n;}function M(n,r,i){var a=r[0],o=r[1],s=r[2],l=r[3],u=a+a,c=o+o,f=s+s,d=a*u,h=a*c,p=a*f,m=o*c,g=o*f,v=s*f,y=l*u,_=l*c,b=l*f;return n[0]=1-(m+v),n[1]=h+b,n[2]=p-_,n[3]=0,n[4]=h-b,n[5]=1-(d+v),n[6]=g+y,n[7]=0,n[8]=p+_,n[9]=g-y,n[10]=1-(d+m),n[11]=0,n[12]=i[0],n[13]=i[1],n[14]=i[2],n[15]=1,n;}function R(n,r){var i=new a.ARRAY_TYPE(3),o=-r[0],s=-r[1],l=-r[2],u=r[3],c=r[4],f=r[5],d=r[6],h=r[7],p=o*o+s*s+l*l+u*u;return p>0?(i[0]=(c*u+h*o+f*l-d*s)*2/p,i[1]=(f*u+h*s+d*o-c*l)*2/p,i[2]=(d*u+h*l+c*s-f*o)*2/p):(i[0]=(c*u+h*o+f*l-d*s)*2,i[1]=(f*u+h*s+d*o-c*l)*2,i[2]=(d*u+h*l+c*s-f*o)*2),M(n,r,i),n;}function P(n,r){return n[0]=r[12],n[1]=r[13],n[2]=r[14],n;}function k(n,r){var i=r[0],a=r[1],o=r[2],s=r[4],l=r[5],u=r[6],c=r[8],f=r[9],d=r[10];return n[0]=Math.hypot(i,a,o),n[1]=Math.hypot(s,l,u),n[2]=Math.hypot(c,f,d),n;}function I(n,r){var i=new a.ARRAY_TYPE(3);k(i,r);var o=1/i[0],s=1/i[1],l=1/i[2],u=r[0]*o,c=r[1]*s,f=r[2]*l,d=r[4]*o,h=r[5]*s,p=r[6]*l,m=r[8]*o,g=r[9]*s,v=r[10]*l,y=u+h+v,_=0;return y>0?(_=2*Math.sqrt(y+1),n[3]=.25*_,n[0]=(p-g)/_,n[1]=(m-f)/_,n[2]=(c-d)/_):u>h&&u>v?(_=2*Math.sqrt(1+u-h-v),n[3]=(p-g)/_,n[0]=.25*_,n[1]=(c+d)/_,n[2]=(m+f)/_):h>v?(_=2*Math.sqrt(1+h-u-v),n[3]=(m-f)/_,n[0]=(c+d)/_,n[1]=.25*_,n[2]=(p+g)/_):(_=2*Math.sqrt(1+v-u-h),n[3]=(c-d)/_,n[0]=(m+f)/_,n[1]=(p+g)/_,n[2]=.25*_),n;}function L(n,r,i,a){var o=r[0],s=r[1],l=r[2],u=r[3],c=o+o,f=s+s,d=l+l,h=o*c,p=o*f,m=o*d,g=s*f,v=s*d,y=l*d,_=u*c,b=u*f,x=u*d,E=a[0],w=a[1],S=a[2];return n[0]=(1-(g+y))*E,n[1]=(p+x)*E,n[2]=(m-b)*E,n[3]=0,n[4]=(p-x)*w,n[5]=(1-(h+y))*w,n[6]=(v+_)*w,n[7]=0,n[8]=(m+b)*S,n[9]=(v-_)*S,n[10]=(1-(h+g))*S,n[11]=0,n[12]=i[0],n[13]=i[1],n[14]=i[2],n[15]=1,n;}function N(n,r,i,a,o){var s=r[0],l=r[1],u=r[2],c=r[3],f=s+s,d=l+l,h=u+u,p=s*f,m=s*d,g=s*h,v=l*d,y=l*h,_=u*h,b=c*f,x=c*d,E=c*h,w=a[0],S=a[1],T=a[2],A=o[0],C=o[1],O=o[2],M=(1-(v+_))*w,R=(m+E)*w,P=(g-x)*w,k=(m-E)*S,I=(1-(p+_))*S,L=(y+b)*S,N=(g+x)*T,D=(y-b)*T,F=(1-(p+v))*T;return n[0]=M,n[1]=R,n[2]=P,n[3]=0,n[4]=k,n[5]=I,n[6]=L,n[7]=0,n[8]=N,n[9]=D,n[10]=F,n[11]=0,n[12]=i[0]+A-(M*A+k*C+N*O),n[13]=i[1]+C-(R*A+I*C+D*O),n[14]=i[2]+O-(P*A+L*C+F*O),n[15]=1,n;}function D(n,r){var i=r[0],a=r[1],o=r[2],s=r[3],l=i+i,u=a+a,c=o+o,f=i*l,d=a*l,h=a*u,p=o*l,m=o*u,g=o*c,v=s*l,y=s*u,_=s*c;return n[0]=1-h-g,n[1]=d+_,n[2]=p-y,n[3]=0,n[4]=d-_,n[5]=1-f-g,n[6]=m+v,n[7]=0,n[8]=p+y,n[9]=m-v,n[10]=1-f-h,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n;}function F(n,r,i,a,o,s,l){var u=1/(i-r),c=1/(o-a),f=1/(s-l);return n[0]=2*s*u,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2*s*c,n[6]=0,n[7]=0,n[8]=(i+r)*u,n[9]=(o+a)*c,n[10]=(l+s)*f,n[11]=-1,n[12]=0,n[13]=0,n[14]=l*s*2*f,n[15]=0,n;}function B(n,r,i,a,o){var s,l=1/Math.tan(r/2);return n[0]=l/i,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=l,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,null!=o&&o!==1/0?(s=1/(a-o),n[10]=(o+a)*s,n[14]=2*o*a*s):(n[10]=-1,n[14]=-2*a),n;}var j=B;function z(n,r,i,a,o){var s,l=1/Math.tan(r/2);return n[0]=l/i,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=l,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,null!=o&&o!==1/0?(s=1/(a-o),n[10]=o*s,n[14]=o*a*s):(n[10]=-1,n[14]=-a),n;}function U(n,r,i,a){var o=Math.tan(r.upDegrees*Math.PI/180),s=Math.tan(r.downDegrees*Math.PI/180),l=Math.tan(r.leftDegrees*Math.PI/180),u=Math.tan(r.rightDegrees*Math.PI/180),c=2/(l+u),f=2/(o+s);return n[0]=c,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=f,n[6]=0,n[7]=0,n[8]=-((l-u)*c*.5),n[9]=(o-s)*f*.5,n[10]=a/(i-a),n[11]=-1,n[12]=0,n[13]=0,n[14]=a*i/(i-a),n[15]=0,n;}function V(n,r,i,a,o,s,l){var u=1/(r-i),c=1/(a-o),f=1/(s-l);return n[0]=-2*u,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*c,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*f,n[11]=0,n[12]=(r+i)*u,n[13]=(o+a)*c,n[14]=(l+s)*f,n[15]=1,n;}var G=V;function H(n,r,i,a,o,s,l){var u=1/(r-i),c=1/(a-o),f=1/(s-l);return n[0]=-2*u,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*c,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=f,n[11]=0,n[12]=(r+i)*u,n[13]=(o+a)*c,n[14]=s*f,n[15]=1,n;}function W(n,r,i,o){var s,l,u,c,d,h,p,m,g,v,y=r[0],_=r[1],b=r[2],x=o[0],E=o[1],w=o[2],S=i[0],T=i[1],A=i[2];return Math.abs(y-S)<a.EPSILON&&Math.abs(_-T)<a.EPSILON&&Math.abs(b-A)<a.EPSILON?f(n):(v=1/Math.hypot(p=y-S,m=_-T,g=b-A),p*=v,m*=v,g*=v,(v=Math.hypot(s=E*g-w*m,l=w*p-x*g,u=x*m-E*p))?(s*=v=1/v,l*=v,u*=v):(s=0,l=0,u=0),(v=Math.hypot(c=m*u-g*l,d=g*s-p*u,h=p*l-m*s))?(c*=v=1/v,d*=v,h*=v):(c=0,d=0,h=0),n[0]=s,n[1]=c,n[2]=p,n[3]=0,n[4]=l,n[5]=d,n[6]=m,n[7]=0,n[8]=u,n[9]=h,n[10]=g,n[11]=0,n[12]=-(s*y+l*_+u*b),n[13]=-(c*y+d*_+h*b),n[14]=-(p*y+m*_+g*b),n[15]=1,n);}function X(n,r,i,a){var o=r[0],s=r[1],l=r[2],u=a[0],c=a[1],f=a[2],d=o-i[0],h=s-i[1],p=l-i[2],m=d*d+h*h+p*p;m>0&&(d*=m=1/Math.sqrt(m),h*=m,p*=m);var g=c*p-f*h,v=f*d-u*p,y=u*h-c*d;return(m=g*g+v*v+y*y)>0&&(g*=m=1/Math.sqrt(m),v*=m,y*=m),n[0]=g,n[1]=v,n[2]=y,n[3]=0,n[4]=h*y-p*v,n[5]=p*g-d*y,n[6]=d*v-h*g,n[7]=0,n[8]=d,n[9]=h,n[10]=p,n[11]=0,n[12]=o,n[13]=s,n[14]=l,n[15]=1,n;}function q(n){return"mat4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+", "+n[8]+", "+n[9]+", "+n[10]+", "+n[11]+", "+n[12]+", "+n[13]+", "+n[14]+", "+n[15]+")";}function $(n){return Math.hypot(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15]);}function Y(n,r,i){return n[0]=r[0]+i[0],n[1]=r[1]+i[1],n[2]=r[2]+i[2],n[3]=r[3]+i[3],n[4]=r[4]+i[4],n[5]=r[5]+i[5],n[6]=r[6]+i[6],n[7]=r[7]+i[7],n[8]=r[8]+i[8],n[9]=r[9]+i[9],n[10]=r[10]+i[10],n[11]=r[11]+i[11],n[12]=r[12]+i[12],n[13]=r[13]+i[13],n[14]=r[14]+i[14],n[15]=r[15]+i[15],n;}function Z(n,r,i){return n[0]=r[0]-i[0],n[1]=r[1]-i[1],n[2]=r[2]-i[2],n[3]=r[3]-i[3],n[4]=r[4]-i[4],n[5]=r[5]-i[5],n[6]=r[6]-i[6],n[7]=r[7]-i[7],n[8]=r[8]-i[8],n[9]=r[9]-i[9],n[10]=r[10]-i[10],n[11]=r[11]-i[11],n[12]=r[12]-i[12],n[13]=r[13]-i[13],n[14]=r[14]-i[14],n[15]=r[15]-i[15],n;}function K(n,r,i){return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=r[3]*i,n[4]=r[4]*i,n[5]=r[5]*i,n[6]=r[6]*i,n[7]=r[7]*i,n[8]=r[8]*i,n[9]=r[9]*i,n[10]=r[10]*i,n[11]=r[11]*i,n[12]=r[12]*i,n[13]=r[13]*i,n[14]=r[14]*i,n[15]=r[15]*i,n;}function Q(n,r,i,a){return n[0]=r[0]+i[0]*a,n[1]=r[1]+i[1]*a,n[2]=r[2]+i[2]*a,n[3]=r[3]+i[3]*a,n[4]=r[4]+i[4]*a,n[5]=r[5]+i[5]*a,n[6]=r[6]+i[6]*a,n[7]=r[7]+i[7]*a,n[8]=r[8]+i[8]*a,n[9]=r[9]+i[9]*a,n[10]=r[10]+i[10]*a,n[11]=r[11]+i[11]*a,n[12]=r[12]+i[12]*a,n[13]=r[13]+i[13]*a,n[14]=r[14]+i[14]*a,n[15]=r[15]+i[15]*a,n;}function J(n,r){return n[0]===r[0]&&n[1]===r[1]&&n[2]===r[2]&&n[3]===r[3]&&n[4]===r[4]&&n[5]===r[5]&&n[6]===r[6]&&n[7]===r[7]&&n[8]===r[8]&&n[9]===r[9]&&n[10]===r[10]&&n[11]===r[11]&&n[12]===r[12]&&n[13]===r[13]&&n[14]===r[14]&&n[15]===r[15];}function ee(n,r){var i=n[0],o=n[1],s=n[2],l=n[3],u=n[4],c=n[5],f=n[6],d=n[7],h=n[8],p=n[9],m=n[10],g=n[11],v=n[12],y=n[13],_=n[14],b=n[15],x=r[0],E=r[1],w=r[2],S=r[3],T=r[4],A=r[5],C=r[6],O=r[7],M=r[8],R=r[9],P=r[10],k=r[11],I=r[12],L=r[13],N=r[14],D=r[15];return Math.abs(i-x)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(o-E)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(s-w)<=a.EPSILON*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(l-S)<=a.EPSILON*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(u-T)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(c-A)<=a.EPSILON*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(f-C)<=a.EPSILON*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(d-O)<=a.EPSILON*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(h-M)<=a.EPSILON*Math.max(1,Math.abs(h),Math.abs(M))&&Math.abs(p-R)<=a.EPSILON*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(m-P)<=a.EPSILON*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(g-k)<=a.EPSILON*Math.max(1,Math.abs(g),Math.abs(k))&&Math.abs(v-I)<=a.EPSILON*Math.max(1,Math.abs(v),Math.abs(I))&&Math.abs(y-L)<=a.EPSILON*Math.max(1,Math.abs(y),Math.abs(L))&&Math.abs(_-N)<=a.EPSILON*Math.max(1,Math.abs(_),Math.abs(N))&&Math.abs(b-D)<=a.EPSILON*Math.max(1,Math.abs(b),Math.abs(D));}var et=g,en=Z;},da8e1cea:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return o;}});var a=i("777fffbe")._(i("d0572d97")),o=function(n,r,i){for(var o=0,s=(0,a.default)(r)?r.split("."):r;n&&o<s.length;)n=n[s[o++]];return void 0===n||o<s.length?i:n;};},da92a9dc:function(n,r,i){"use strict";var a=i("b0af5eb7").forEach;n.exports=function(n){var r,i,o,s,l=(n=n||{}).reporter,u=n.batchProcessor,c=n.stateHandler.getState;n.stateHandler.hasState;var f=n.idHandler;if(!u)throw Error("Missing required dependency: batchProcessor");if(!l)throw Error("Missing required dependency: reporter.");var d=((r=document.createElement("div")).style.cssText=m(["position: absolute","width: 1000px","height: 1000px","visibility: hidden","margin: 0","padding: 0"]),(i=document.createElement("div")).style.cssText=m(["position: absolute","width: 500px","height: 500px","overflow: scroll","visibility: none","top: -1500px","left: -1500px","visibility: hidden","margin: 0","padding: 0"]),i.appendChild(r),document.body.insertBefore(i,document.body.firstChild),o=500-i.clientWidth,s=500-i.clientHeight,document.body.removeChild(i),{width:o,height:s}),h="erd_scroll_detection_container";function p(n){!function(n,r,i){if(!n.getElementById(r)){var a,o,s,l=i+"_animation",u="/* Created by the element-resize-detector library. */\n";u+="."+i+" > div::-webkit-scrollbar { "+m(["display: none"])+" }\n\n"+("."+i+"_animation_active { ")+m(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+l,"animation-name: "+l])+" }\n@-webkit-keyframes "+l+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }\n@keyframes "+l+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",a=u,o=o||function(r){n.head.appendChild(r);},(s=n.createElement("style")).innerHTML=a,s.id=r,o(s);}}(n,"erd_scroll_detection_scrollbar_style",h);}function m(r){var i=n.important?" !important; ":"; ";return(r.join(i)+i).trim();}function g(n,r,i){if(n.addEventListener)n.addEventListener(r,i);else{if(!n.attachEvent)return l.error("[scroll] Don't know how to add event listeners.");n.attachEvent("on"+r,i);}}function v(n,r,i){if(n.removeEventListener)n.removeEventListener(r,i);else{if(!n.detachEvent)return l.error("[scroll] Don't know how to remove event listeners.");n.detachEvent("on"+r,i);}}function y(n){return c(n).container.childNodes[0].childNodes[0].childNodes[0];}function _(n){return c(n).container.childNodes[0].childNodes[0].childNodes[1];}return p(window.document),{makeDetectable:function(n,r,i){var o,s,p;function v(){if(n.debug){var i=Array.prototype.slice.call(arguments);if(i.unshift(f.get(r),"Scroll: "),l.log.apply)l.log.apply(null,i);else for(var a=0;a<i.length;a++)l.log(i[a]);}}function b(n){var r=c(n).container.childNodes[0],i=window.getComputedStyle(r);return!i.width||-1===i.width.indexOf("px");}function x(){var n=window.getComputedStyle(r),i={};return i.position=n.position,i.width=r.offsetWidth,i.height=r.offsetHeight,i.top=n.top,i.right=n.right,i.bottom=n.bottom,i.left=n.left,i.widthCSS=n.width,i.heightCSS=n.height,i;}function E(){if(v("storeStyle invoked."),!c(r)){v("Aborting because element has been uninstalled");return;}var n=x();c(r).style=n;}function w(n,r,i){c(n).lastWidth=r,c(n).lastHeight=i;}function S(){return 2*d.width+1;}function T(){return 2*d.height+1;}function A(n,r,i){var a=y(n),o=_(n),s=r+10+S(),l=i+10+T(),u=2*r+S(),c=2*i+T();a.scrollLeft=s,a.scrollTop=l,o.scrollLeft=u,o.scrollTop=c;}function C(){var n=c(r).container;if(!n){(n=document.createElement("div")).className=h,n.style.cssText=m(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),c(r).container=n,i=n,i.className+=" "+h+"_animation_active",r.appendChild(n);var i,a=function(){c(r).onRendered&&c(r).onRendered();};g(n,"animationstart",a),c(r).onAnimationStart=a;}return n;}function O(){if(v("Injecting elements"),!c(r)){v("Aborting because element has been uninstalled");return;}!function(){var i=c(r).style;if("static"===i.position){r.style.setProperty("position","relative",n.important?"important":"");var a=function(n,r,i,a){var o=i[a];"auto"!==o&&"0"!==o.replace(/[^-\d\.]/g,"")&&(n.warn("An element that is positioned static has style."+a+"="+o+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+a+" will be set to 0. Element: ",r),r.style[a]=0);};a(l,r,i,"top"),a(l,r,i,"right"),a(l,r,i,"bottom"),a(l,r,i,"left");}}();var i,a,o,s,u=c(r).container;u||(u=C());var f=d.width,p=d.height,y=m(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),_=m(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat((i=-(1+f),a=-(1+p),o=-p,["left: "+(i=i?i+"px":"0"),"top: "+(a=a?a+"px":"0"),"right: "+(s=(s=-f)?s+"px":"0"),"bottom: "+(o=o?o+"px":"0")]))),b=m(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),x=m(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),E=m(["position: absolute","left: 0","top: 0"]),w=m(["position: absolute","width: 200%","height: 200%"]),S=document.createElement("div"),T=document.createElement("div"),A=document.createElement("div"),O=document.createElement("div"),M=document.createElement("div"),R=document.createElement("div");function P(){var n=c(r);n&&n.onExpand?n.onExpand():v("Aborting expand scroll handler: element has been uninstalled");}function k(){var n=c(r);n&&n.onShrink?n.onShrink():v("Aborting shrink scroll handler: element has been uninstalled");}S.dir="ltr",S.style.cssText=y,S.className=h,T.className=h,T.style.cssText=_,A.style.cssText=b,O.style.cssText=E,M.style.cssText=x,R.style.cssText=w,A.appendChild(O),M.appendChild(R),T.appendChild(A),T.appendChild(M),S.appendChild(T),u.appendChild(S),g(A,"scroll",P),g(M,"scroll",k),c(r).onExpandScroll=P,c(r).onShrinkScroll=k;}function M(){function i(r,i,a){var o=y(r).childNodes[0],s=i+10+S(),l=a+10+T();o.style.setProperty("width",s+"px",n.important?"important":""),o.style.setProperty("height",l+"px",n.important?"important":"");}function o(a){var o=r.offsetWidth,d=r.offsetHeight,h=o!==c(r).lastWidth||d!==c(r).lastHeight;v("Storing current size",o,d),w(r,o,d),u.add(0,function(){if(h){if(!c(r)){v("Aborting because element has been uninstalled");return;}if(!s()){v("Aborting because element container has not been initialized");return;}if(n.debug){var a=r.offsetWidth,u=r.offsetHeight;(a!==o||u!==d)&&l.warn(f.get(r),"Scroll: Size changed before updating detector elements.");}i(r,o,d);}}),u.add(1,function(){if(!c(r)){v("Aborting because element has been uninstalled");return;}if(!s()){v("Aborting because element container has not been initialized");return;}A(r,o,d);}),h&&a&&u.add(2,function(){if(!c(r)){v("Aborting because element has been uninstalled");return;}if(!s()){v("Aborting because element container has not been initialized");return;}a();});}function s(){return!!c(r).container;}function d(){v("notifyListenersIfNeeded invoked");var n=c(r);return void 0===c(r).lastNotifiedWidth&&n.lastWidth===n.startSize.width&&n.lastHeight===n.startSize.height?v("Not notifying: Size is the same as the start size, and there has been no notification yet."):n.lastWidth===n.lastNotifiedWidth&&n.lastHeight===n.lastNotifiedHeight?v("Not notifying: Size already notified"):void(v("Current size not notified, notifying..."),n.lastNotifiedWidth=n.lastWidth,n.lastNotifiedHeight=n.lastHeight,a(c(r).listeners,function(n){n(r);}));}function h(){if(v("Scroll detected."),b(r)){v("Scroll event fired while unrendered. Ignoring...");return;}o(d);}if(v("registerListenersAndPositionElements invoked."),!c(r)){v("Aborting because element has been uninstalled");return;}c(r).onRendered=function(){if(v("startanimation triggered."),b(r)){v("Ignoring since element is still unrendered...");return;}v("Element rendered.");var n=y(r),i=_(r);(0===n.scrollLeft||0===n.scrollTop||0===i.scrollLeft||0===i.scrollTop)&&(v("Scrollbars out of sync. Updating detector elements..."),o(d));},c(r).onExpand=h,c(r).onShrink=h;var p=c(r).style;i(r,p.width,p.height);}function R(){if(v("finalizeDomMutation invoked."),!c(r)){v("Aborting because element has been uninstalled");return;}var n=c(r).style;w(r,n.width,n.height),A(r,n.width,n.height);}function P(){i(r);}function k(){var n;v("Installing..."),c(r).listeners=[],n=x(),c(r).startSize={width:n.width,height:n.height},v("Element start size",c(r).startSize),u.add(0,E),u.add(1,O),u.add(2,M),u.add(3,R),u.add(4,P);}i||(i=r,r=n,n=null),n=n||{},(v("Making detectable..."),(p=(s=o=r).getRootNode&&s.getRootNode().contains(s),(s===s.ownerDocument.body||s.ownerDocument.body.contains(s)||p)&&null!==window.getComputedStyle(o))?1:0)?k():(v("Element is detached"),C(),v("Waiting until element is attached..."),c(r).onRendered=function(){v("Element is now attached"),k();});},addListener:function(n,r){if(!c(n).listeners.push)throw Error("Cannot add listener to an element that is not detectable.");c(n).listeners.push(r);},uninstall:function(n){var r=c(n);r&&(r.onExpandScroll&&v(y(n),"scroll",r.onExpandScroll),r.onShrinkScroll&&v(_(n),"scroll",r.onShrinkScroll),r.onAnimationStart&&v(r.container,"animationstart",r.onAnimationStart),r.container&&n.removeChild(r.container));},initDocument:p};};},da9a34de:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{G2Layout:function(){return T;},LegendCategoryLayout:function(){return A;},adaptor:function(){return k;},createComponent:function(){return x;},domainOf:function(){return P;},inferComponentLayout:function(){return S;},inferComponentShape:function(){return R;},isHorizontal:function(){return O;},isVertical:function(){return M;},maybeAppend:function(){return E;},scaleOf:function(){return C;},titleContent:function(){return w;}});var a=i("777fffbe"),o=i("5e195043"),s=i("3862611d"),l=i("920dd2bf");function u(n){for(var r=1/0,i=1/0,a=-1/0,o=-1/0,u=0;u<n.length;u++){var c=n[u],f=c.x,d=c.y,h=c.width,p=c.height,m=(0,s.__read)([f+h,d+p],2),g=m[0],v=m[1];f<r&&(r=f),d<i&&(i=d),g>a&&(a=g),v>o&&(o=v);}return new l.BBox(r,i,a-r,o-i);}var c=function(n,r,i){var a=n.width,o=n.height,c=i.flexDirection,f=void 0===c?"row":c,d=(i.flexWrap,i.justifyContent),h=void 0===d?"flex-start":d,p=(i.alignContent,i.alignItems),m=void 0===p?"flex-start":p,g="row"===f,v="row"===f||"column"===f,y=g?v?[1,0]:[-1,0]:v?[0,1]:[0,-1],_=(0,s.__read)([0,0],2),b=_[0],x=_[1],E=r.map(function(n){var r,i=n.width,a=n.height,o=(0,s.__read)([b,x],2),u=o[0],c=o[1];return b=(r=(0,s.__read)([b+i*y[0],x+a*y[1]],2))[0],x=r[1],new l.BBox(u,c,i,a);}),w=u(E),S={"flex-start":0,"flex-end":g?a-w.width:o-w.height,center:g?(a-w.width)/2:(o-w.height)/2},T=E.map(function(n){var r=n.x,i=n.y,a=l.BBox.fromRect(n);return a.x=g?r+S[h]:r,a.y=g?i:i+S[h],a;});u(T);var A=function(n){var r=(0,s.__read)(g?["height",o]:["width",a],2),i=r[0],l=r[1];switch(m){case"flex-start":default:return 0;case"flex-end":return l-n[i];case"center":return l/2-n[i]/2;}};return T.map(function(n){var r=n.x,i=n.y,a=l.BBox.fromRect(n);return a.x=g?r:r+A(a),a.y=g?i+A(a):i,a;}).map(function(r){var i,a,o=l.BBox.fromRect(r);return o.x+=null!==(i=n.x)&&void 0!==i?i:0,o.y+=null!==(a=n.y)&&void 0!==a?a:0,o;});},f=function(n,r,i){return[];},d=function(n,r,i){if(0===r.length)return[];var a={flex:c,grid:f},o=i.display in a?a[i.display]:null;return(null==o?void 0:o.call(null,n,r,i))||[];},h=i("1915def0"),p=function(n){function r(r){var i=n.call(this,r)||this;i.layoutEvents=[o.ElementEvent.BOUNDS_CHANGED,o.ElementEvent.INSERTED,o.ElementEvent.REMOVED],i.$margin=(0,h.parseSeriesAttr)(0),i.$padding=(0,h.parseSeriesAttr)(0);var a=r.style||{},s=a.margin,l=a.padding;return i.margin=void 0===s?0:s,i.padding=void 0===l?0:l,i.isMutationObserved=!0,i.bindEvents(),i;}return(0,s.__extends)(r,n),Object.defineProperty(r.prototype,"margin",{get:function(){return this.$margin;},set:function(n){this.$margin=(0,h.parseSeriesAttr)(n);},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"padding",{get:function(){return this.$padding;},set:function(n){this.$padding=(0,h.parseSeriesAttr)(n);},enumerable:!1,configurable:!0}),r.prototype.getBBox=function(){var n=this.attributes,r=n.x,i=n.y,a=n.width,o=n.height,u=(0,s.__read)(this.$margin,4),c=u[0],f=u[1],d=u[2],h=u[3];return new l.BBox((void 0===r?0:r)-h,(void 0===i?0:i)-c,a+h+f,o+c+d);},r.prototype.appendChild=function(r,i){return r.isMutationObserved=!0,n.prototype.appendChild.call(this,r,i),r;},r.prototype.getAvailableSpace=function(){var n=this.attributes,r=n.width,i=n.height,a=(0,s.__read)(this.$padding,4),o=a[0],u=a[1],c=a[2],f=a[3],d=(0,s.__read)(this.$margin,4),h=d[0],p=d[3];return new l.BBox(f+p,o+h,r-f-u,i-o-c);},r.prototype.layout=function(){if(this.attributes.display&&this.isConnected&&!this.children.some(function(n){return!n.isConnected;}))try{var n=this.attributes,r=n.x,i=n.y;this.style.transform="translate(".concat(r,", ").concat(i,")");var a=d(this.getAvailableSpace(),this.children.map(function(n){return n.getBBox();}),this.attributes);this.children.forEach(function(n,r){var i=a[r],o=i.x,s=i.y;n.style.transform="translate(".concat(o,", ").concat(s,")");});}catch(n){}},r.prototype.bindEvents=function(){var n=this;this.layoutEvents.forEach(function(r){n.addEventListener(r,function(r){r.target&&(r.target.isMutationObserved=!0,n.layout());});});},r.prototype.attributeChangedCallback=function(n,r,i){"margin"===n?this.margin=i:"padding"===n&&(this.padding=i),this.layout();},r;}(o.Group),m=i("d7948920"),g=a._(m),v=i("7cf6ebc4"),y=a._(v),_=i("7d4c6398"),b=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};function x(n){return class extends o.CustomElement{constructor(r){super(r),this.descriptor=n;}connectedCallback(){var n,r;null===(r=(n=this.descriptor).render)||void 0===r||r.call(n,this.attributes,this);}update(n={}){var r,i;this.attr((0,g.default)({},this.attributes,n)),null===(i=(r=this.descriptor).render)||void 0===i||i.call(r,this.attributes,this);}};}function E(n,r,i){return n.querySelector(r)?(0,_.select)(n).select(r):(0,_.select)(n).append(i);}function w(n){return Array.isArray(n)?n.join(", "):`${n||""}`;}function S(n,r){let{flexDirection:i,justifyContent:a,alignItems:o}={display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},s={top:["row","flex-start","center"],bottom:["row","flex-start","center"],left:["column","flex-start","center"],right:["column","flex-start","center"],center:["column","center","center"]};return n in s&&([i,a,o]=s[n]),Object.assign({display:"flex",flexDirection:i,justifyContent:a,alignItems:o},r);}class T extends p{get child(){var n;return null===(n=this.children)||void 0===n?void 0:n[0];}update(n){var r;this.attr(n);let{subOptions:i}=n;null===(r=this.child)||void 0===r||r.update(i);}}class A extends T{update(n){var r;let{subOptions:i}=n;this.attr(n),null===(r=this.child)||void 0===r||r.update(i);}}function C(n,r){var i;return null===(i=n.filter(n=>n.getOptions().name===r))||void 0===i?void 0:i[0];}function O(n){return"horizontal"===n||0===n;}function M(n){return"vertical"===n||n===-Math.PI/2;}function R(n,r,i){let{bbox:a}=n,{position:o="top",size:s,length:l}=r,u=["top","bottom","center"].includes(o),[c,f]=u?[a.height,a.width]:[a.width,a.height],{defaultSize:d,defaultLength:h}=i.props,p=s||d||c,m=l||h||f,[g,v]=u?[m,p]:[p,m];return{orientation:u?"horizontal":"vertical",width:g,height:v,size:p,length:m};}function P(n){return n.find(n=>n.getOptions().domain.length>0).getOptions().domain;}function k(n){let r=["arrow","crosshairs","grid","handle","handleLabel","indicator","label","line","tick","tip","title","trunc"],{style:i}=n,a=b(n,["style"]),o={};return Object.entries(a).forEach(([n,i])=>{r.includes(n)?o[`show${(0,y.default)(n)}`]=i:o[n]=i;}),Object.assign(Object.assign({},o),i);}},dad3ccb8:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return p;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("7cfeda15"),l=a._(s),u=i("609f48be"),c=o._(u),f={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"outlined"},d=i("887aaf6c"),h=a._(d),p=c.forwardRef(function(n,r){return c.createElement(h.default,(0,l.default)({},n,{ref:r,icon:f}));});},dad3db86:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{LoginForm:function(){return S;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("e4870cf0"),l=a._(s),u=i("613f75ca"),c=a._(u),f=i("64681837"),d=i("a5a99096"),h=a._(d),p=i("064ecd09"),m=a._(p),g=i("609f48be"),v=o._(g),y=i("2e660475"),_=i("a854094b"),b=a._(_),x=i("a3273044"),E=i("dac8af92"),w=["logo","message","contentStyle","title","subTitle","actions","children","containerStyle","otherStyle"];function S(n){var r,i=n.logo,a=n.message,o=n.contentStyle,s=n.title,u=n.subTitle,d=n.actions,p=n.children,g=n.containerStyle,_=n.otherStyle,S=(0,c.default)(n,w),T=(0,f.useIntl)(),A=!1!==S.submitter&&(0,l.default)((0,l.default)({searchConfig:{submitText:T.getMessage("loginForm.submitText","\u767B\u5F55")}},S.submitter),{},{submitButtonProps:(0,l.default)({size:"large",style:{width:"100%"}},null===(r=S.submitter)||void 0===r?void 0:r.submitButtonProps),render:function(n,r){var i,a,o,s=r.pop();return"function"==typeof(null==S||null===(i=S.submitter)||void 0===i?void 0:i.render)?null==S||null===(a=S.submitter)||void 0===a||null===(o=a.render)||void 0===o?void 0:o.call(a,n,r):s;}}),C=(0,v.useContext)(h.default.ConfigContext).getPrefixCls("pro-form-login"),O=(0,x.useStyle)("LoginForm",function(n){var r;return[(r=(0,l.default)((0,l.default)({},n),{},{componentCls:".".concat(C)}),(0,b.default)((0,b.default)({},r.componentCls,{"&-container":{display:"flex",flex:"1",flexDirection:"column",height:"100%",paddingInline:32,paddingBlock:24,overflow:"auto",background:"inherit"},"&-top":{textAlign:"center"},"&-header":{display:"flex",alignItems:"center",justifyContent:"center",height:"44px",lineHeight:"44px",a:{textDecoration:"none"}},"&-title":{position:"relative",insetBlockStart:"2px",color:"@heading-color",fontWeight:"600",fontSize:"33px"},"&-logo":{width:"44px",height:"44px",marginInlineEnd:"16px",verticalAlign:"top",img:{width:"100%"}},"&-desc":{marginBlockStart:"12px",marginBlockEnd:"40px",color:r.colorTextSecondary,fontSize:r.fontSize},"&-main":{minWidth:"328px",maxWidth:"580px",margin:"0 auto","&-other":{marginBlockStart:"24px",lineHeight:"22px",textAlign:"start"}}}),"@media (min-width: @screen-md-min)",(0,b.default)({},"".concat(r.componentCls,"-container"),{paddingInline:0,paddingBlockStart:32,paddingBlockEnd:24,backgroundRepeat:"no-repeat",backgroundPosition:"center 110px",backgroundSize:"100%"})))];}),M=O.wrapSSR,R=O.hashId,P=function(n){return"".concat(C,"-").concat(n," ").concat(R);},k=(0,v.useMemo)(function(){return i?"string"==typeof i?(0,E.jsx)("img",{src:i}):i:null;},[i]);return M((0,E.jsxs)("div",{className:(0,m.default)(P("container"),R),style:g,children:[(0,E.jsxs)("div",{className:"".concat(P("top")," ").concat(R).trim(),children:[s||k?(0,E.jsxs)("div",{className:"".concat(P("header")),children:[k?(0,E.jsx)("span",{className:P("logo"),children:k}):null,s?(0,E.jsx)("span",{className:P("title"),children:s}):null]}):null,u?(0,E.jsx)("div",{className:P("desc"),children:u}):null]}),(0,E.jsxs)("div",{className:P("main"),style:(0,l.default)({width:328},o),children:[(0,E.jsxs)(y.ProForm,(0,l.default)((0,l.default)({isKeyPressSubmit:!0},S),{},{submitter:A,children:[a,p]})),d?(0,E.jsx)("div",{className:P("main-other"),style:_,children:d}):null]})]}));}},db1de58d:function(n,r,i){n.exports.VectorTile=i("4f59a17d"),n.exports.VectorTileFeature=i("bc5006d6"),n.exports.VectorTileLayer=i("7070677b");},dcb862b4:function(n,r,i){n.exports=function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");},n.exports.__esModule=!0,n.exports.default=n.exports;},dd1e4719:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{transformOptions:function(){return d;}});var a=i("2cb3cf04"),o=this&&this.__spreadArray||function(n,r,i){if(i||2==arguments.length)for(var a,o=0,s=r.length;o<s;o++)!a&&o in r||(a||(a=Array.prototype.slice.call(r,0,o)),a[o]=r[o]);return n.concat(a||Array.prototype.slice.call(r));},s=function(n){var r=n.children,i=Object.keys(a.TRANSFORM_OPTION_KEY).concat(a.CONFIG_SHAPE.map(function(n){return n.key;}));return i.forEach(function(r){delete n[r];}),(void 0===r?[]:r).forEach(function(n){Object.keys(n).forEach(function(r){i.includes(r)&&delete n[r];});}),Object.keys(n).forEach(function(r){o(o([],a.VIEW_OPTIONS,!0),a.ANNOTATION_LIST.map(function(n){return n.key;}),!0).includes(r)||delete n[r];}),n;},l=i("d8554caa"),u=function(n){var r=n.options,i=r.children;return(void 0===i?[]:i).forEach(function(n){Object.keys(n).forEach(function(r){(0,l.isArray)(n[r])&&"data"!==r&&(n[r]=n[r].filter(function(n){return!n[a.TRANSFORM_SIGN];}));});}),r;},c=i("ae17acd2"),f=this&&this.__assign||function(){return(f=Object.assign||function(n){for(var r,i=1,a=arguments.length;i<a;i++)for(var o in r=arguments[i])Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n;}).apply(this,arguments);},d=function(n){var r=u(n),i=r.children,o=void 0===i?[]:i,d=(0,l.omit)(r,[].concat(a.VIEW_OPTIONS,a.CONFIG_SHAPE.map(function(n){return n.key;}))),h=function(n){var r;return null===(r=a.SPECIAL_OPTIONS.find(function(r){return r.key===n;}))||void 0===r?void 0:r.callback;},p=function(n,r,i){var a=h(r);a?a(n,r,i):n[r]=(0,c.mergeWithArrayCoverage)({},n[r],i);},m=function(n){Object.keys(n).forEach(function(r){if(n[r]){var i=a.CONFIG_SHAPE.find(function(n){return n.key===r;});if(i){var s=i.type,u=i.extendedProperties,d=i.defaultShapeConfig;if(s){var h=n[r].tooltip;o.push(g((0,c.mergeWithArrayCoverage)({},(0,l.pick)(n,u),void 0===d?{}:d,{type:s},n[r],{tooltip:!!h&&h})));}else(0,l.isArray)(n[r])&&n[r].forEach(function(n){o.push(g(f({data:[],tooltip:!1},n)));});}}});},g=function(n){return m(n),Object.keys(a.TRANSFORM_OPTION_KEY).forEach(function(r){var i=a.TRANSFORM_OPTION_KEY[r];if(!(0,l.isUndefined)(n[r])){if((0,l.isObject)(i)){var o=i.value,s=i.target,u=o(n[r]);p(n,s,u);}else(0,l.set)(n,i,n[r]);}}),n;};return o.forEach(function(n){var r=(0,c.mergeWithArrayCoverage)({},d,n);g((0,c.mergeWithArrayCoverage)(n,r));}),m(r),s(r),n;};},de4cb180:function(n,r,i){var a;a=function(){var n,r,i,a,o,s={},l={},u={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},c={currentLocale:u.currentLocale,zeroFormat:u.zeroFormat,nullFormat:u.nullFormat,defaultFormat:u.defaultFormat,scalePercentBy100:u.scalePercentBy100};function f(n,r){this._input=n,this._value=r;}return(a=function(n){var r,i,l,u;if(a.isNumeral(n))r=n.value();else if(0===n||void 0===n)r=0;else if(null===n||o.isNaN(n))r=null;else if("string"==typeof n){if(c.zeroFormat&&n===c.zeroFormat)r=0;else if(c.nullFormat&&n===c.nullFormat||!n.replace(/[^0-9]+/g,"").length)r=null;else{for(i in s)if((u="function"==typeof s[i].regexps.unformat?s[i].regexps.unformat():s[i].regexps.unformat)&&n.match(u)){l=s[i].unformat;break;}r=(l=l||a._.stringToNumber)(n);}}else r=Number(n)||null;return new f(n,r);}).version="2.0.6",a.isNumeral=function(n){return n instanceof f;},a._=o={numberToFormat:function(n,r,i){var o,s,u,c,f,d,h,p=l[a.options.currentLocale],m=!1,g=!1,v=0,y="",_="",b=!1;if(s=Math.abs(n=n||0),a._.includes(r,"(")?(m=!0,r=r.replace(/[\(|\)]/g,"")):(a._.includes(r,"+")||a._.includes(r,"-"))&&(f=a._.includes(r,"+")?r.indexOf("+"):n<0?r.indexOf("-"):-1,r=r.replace(/[\+|\-]/g,"")),a._.includes(r,"a")&&(o=!!(o=r.match(/a(k|m|b|t)?/))&&o[1],a._.includes(r," a")&&(y=" "),r=r.replace(RegExp(y+"a[kmbt]?"),""),s>=1e12&&!o||"t"===o?(y+=p.abbreviations.trillion,n/=1e12):s<1e12&&s>=1e9&&!o||"b"===o?(y+=p.abbreviations.billion,n/=1e9):s<1e9&&s>=1e6&&!o||"m"===o?(y+=p.abbreviations.million,n/=1e6):(s<1e6&&s>=1e3&&!o||"k"===o)&&(y+=p.abbreviations.thousand,n/=1e3)),a._.includes(r,"[.]")&&(g=!0,r=r.replace("[.]",".")),u=n.toString().split(".")[0],c=r.split(".")[1],d=r.indexOf(","),v=(r.split(".")[0].split(",")[0].match(/0/g)||[]).length,c?(a._.includes(c,"[")?(c=(c=c.replace("]","")).split("["),_=a._.toFixed(n,c[0].length+c[1].length,i,c[1].length)):_=a._.toFixed(n,c.length,i),u=_.split(".")[0],_=a._.includes(_,".")?p.delimiters.decimal+_.split(".")[1]:"",g&&0===Number(_.slice(1))&&(_="")):u=a._.toFixed(n,0,i),y&&!o&&Number(u)>=1e3&&y!==p.abbreviations.trillion)switch(u=String(Number(u)/1e3),y){case p.abbreviations.thousand:y=p.abbreviations.million;break;case p.abbreviations.million:y=p.abbreviations.billion;break;case p.abbreviations.billion:y=p.abbreviations.trillion;}if(a._.includes(u,"-")&&(u=u.slice(1),b=!0),u.length<v)for(var x=v-u.length;x>0;x--)u="0"+u;return d>-1&&(u=u.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+p.delimiters.thousands)),0===r.indexOf(".")&&(u=""),h=u+_+(y||""),m?h=(m&&b?"(":"")+h+(m&&b?")":""):f>=0?h=0===f?(b?"-":"+")+h:h+(b?"-":"+"):b&&(h="-"+h),h;},stringToNumber:function(n){var r,i,a,o=l[c.currentLocale],s=n,u={thousand:3,million:6,billion:9,trillion:12};if(c.zeroFormat&&n===c.zeroFormat)i=0;else if(c.nullFormat&&n===c.nullFormat||!n.replace(/[^0-9]+/g,"").length)i=null;else{for(r in i=1,"."!==o.delimiters.decimal&&(n=n.replace(/\./g,"").replace(o.delimiters.decimal,".")),u)if(a=RegExp("[^a-zA-Z]"+o.abbreviations[r]+"(?:\\)|(\\"+o.currency.symbol+")?(?:\\))?)?$"),s.match(a)){i*=Math.pow(10,u[r]);break;}i*=((n.split("-").length+Math.min(n.split("(").length-1,n.split(")").length-1))%2?1:-1)*Number(n=n.replace(/[^0-9\.]+/g,""));}return i;},isNaN:function(n){return"number"==typeof n&&isNaN(n);},includes:function(n,r){return -1!==n.indexOf(r);},insert:function(n,r,i){return n.slice(0,i)+r+n.slice(i);},reduce:function(n,r){if(this===null)throw TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof r)throw TypeError(r+" is not a function");var i,a=Object(n),o=a.length>>>0,s=0;if(3==arguments.length)i=arguments[2];else{for(;s<o&&!(s in a);)s++;if(s>=o)throw TypeError("Reduce of empty array with no initial value");i=a[s++];}for(;s<o;s++)s in a&&(i=r(i,a[s],s,a));return i;},multiplier:function(n){var r=n.toString().split(".");return r.length<2?1:Math.pow(10,r[1].length);},correctionFactor:function(){var n=Array.prototype.slice.call(arguments);return n.reduce(function(n,r){var i=o.multiplier(r);return n>i?n:i;},1);},toFixed:function(n,r,i,a){var o,s,l,u,c=n.toString().split("."),f=r-(a||0);return l=Math.pow(10,o=2===c.length?Math.min(Math.max(c[1].length,f),r):f),u=(i(n+"e+"+o)/l).toFixed(o),a>r-o&&(s=RegExp("\\.?0{1,"+(a-(r-o))+"}$"),u=u.replace(s,"")),u;}},a.options=c,a.formats=s,a.locales=l,a.locale=function(n){return n&&(c.currentLocale=n.toLowerCase()),c.currentLocale;},a.localeData=function(n){if(!n)return l[c.currentLocale];if(!l[n=n.toLowerCase()])throw Error("Unknown locale : "+n);return l[n];},a.reset=function(){for(var n in u)c[n]=u[n];},a.zeroFormat=function(n){c.zeroFormat="string"==typeof n?n:null;},a.nullFormat=function(n){c.nullFormat="string"==typeof n?n:null;},a.defaultFormat=function(n){c.defaultFormat="string"==typeof n?n:"0.0";},a.register=function(n,r,i){if(r=r.toLowerCase(),this[n+"s"][r])throw TypeError(r+" "+n+" already registered.");return this[n+"s"][r]=i,i;},a.validate=function(n,r){var i,o,s,l,u,c,f,d;if("string"!=typeof n&&(n+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",n)),(n=n.trim()).match(/^\d+$/))return!0;if(""===n)return!1;try{f=a.localeData(r);}catch(n){f=a.localeData(a.locale());}return s=f.currency.symbol,u=f.abbreviations,i=f.delimiters.decimal,o="."===f.delimiters.thousands?"\\.":f.delimiters.thousands,(null===(d=n.match(/^[^\d]+/))||(n=n.substr(1),d[0]===s))&&(null===(d=n.match(/[^\d]+$/))||(n=n.slice(0,-1),d[0]===u.thousand||d[0]===u.million||d[0]===u.billion||d[0]===u.trillion))&&(c=RegExp(o+"{2}"),!n.match(/[^\d.,]/g)&&!((l=n.split(i)).length>2)&&(l.length<2?!!l[0].match(/^\d+.*\d$/)&&!l[0].match(c):1===l[0].length?!!l[0].match(/^\d+$/)&&!l[0].match(c)&&!!l[1].match(/^\d+$/):!!l[0].match(/^\d+.*\d$/)&&!l[0].match(c)&&!!l[1].match(/^\d+$/)));},a.fn=f.prototype={clone:function(){return a(this);},format:function(n,r){var i,o,l,u=this._value,f=n||c.defaultFormat;if(r=r||Math.round,0===u&&null!==c.zeroFormat)o=c.zeroFormat;else if(null===u&&null!==c.nullFormat)o=c.nullFormat;else{for(i in s)if(f.match(s[i].regexps.format)){l=s[i].format;break;}o=(l=l||a._.numberToFormat)(u,f,r);}return o;},value:function(){return this._value;},input:function(){return this._input;},set:function(n){return this._value=Number(n),this;},add:function(n){var r=o.correctionFactor.call(null,this._value,n);return this._value=o.reduce([this._value,n],function(n,i,a,o){return n+Math.round(r*i);},0)/r,this;},subtract:function(n){var r=o.correctionFactor.call(null,this._value,n);return this._value=o.reduce([n],function(n,i,a,o){return n-Math.round(r*i);},Math.round(this._value*r))/r,this;},multiply:function(n){return this._value=o.reduce([this._value,n],function(n,r,i,a){var s=o.correctionFactor(n,r);return Math.round(n*s)*Math.round(r*s)/Math.round(s*s);},1),this;},divide:function(n){return this._value=o.reduce([this._value,n],function(n,r,i,a){var s=o.correctionFactor(n,r);return Math.round(n*s)/Math.round(r*s);}),this;},difference:function(n){return Math.abs(a(this._value).subtract(n).value());}},a.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(n){var r=n%10;return 1==~~(n%100/10)?"th":1===r?"st":2===r?"nd":3===r?"rd":"th";},currency:{symbol:"$"}}),a.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(n,r,i){var o,s=a._.includes(r," BPS")?" ":"";return n*=1e4,r=r.replace(/\s?BPS/,""),o=a._.numberToFormat(n,r,i),a._.includes(o,")")?((o=o.split("")).splice(-1,0,s+"BPS"),o=o.join("")):o=o+s+"BPS",o;},unformat:function(n){return+(1e-4*a._.stringToNumber(n)).toFixed(15);}}),r={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},i="("+(i=(n={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}).suffixes.concat(r.suffixes.filter(function(r){return 0>n.suffixes.indexOf(r);})).join("|")).replace("B","B(?!PS)")+")",a.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(i)},format:function(i,o,s){var l,u,c,f=a._.includes(o,"ib")?r:n,d=a._.includes(o," b")||a._.includes(o," ib")?" ":"";for(l=0,o=o.replace(/\s?i?b/,"");l<=f.suffixes.length;l++)if(u=Math.pow(f.base,l),c=Math.pow(f.base,l+1),null===i||0===i||i>=u&&i<c){d+=f.suffixes[l],u>0&&(i/=u);break;}return a._.numberToFormat(i,o,s)+d;},unformat:function(i){var o,s,l=a._.stringToNumber(i);if(l){for(o=n.suffixes.length-1;o>=0;o--){if(a._.includes(i,n.suffixes[o])){s=Math.pow(n.base,o);break;}if(a._.includes(i,r.suffixes[o])){s=Math.pow(r.base,o);break;}}l*=s||1;}return l;}}),a.register("format","currency",{regexps:{format:/(\$)/},format:function(n,r,i){var o,s,l=a.locales[a.options.currentLocale],u={before:r.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:r.match(/([\+|\-|\)|\s|\$]*)$/)[0]};for(r=r.replace(/\s?\$\s?/,""),o=a._.numberToFormat(n,r,i),n>=0?(u.before=u.before.replace(/[\-\(]/,""),u.after=u.after.replace(/[\-\)]/,"")):!(n<0)||a._.includes(u.before,"-")||a._.includes(u.before,"(")||(u.before="-"+u.before),s=0;s<u.before.length;s++)switch(u.before[s]){case"$":o=a._.insert(o,l.currency.symbol,s);break;case" ":o=a._.insert(o," ",s+l.currency.symbol.length-1);}for(s=u.after.length-1;s>=0;s--)switch(u.after[s]){case"$":o=s===u.after.length-1?o+l.currency.symbol:a._.insert(o,l.currency.symbol,-(u.after.length-(1+s)));break;case" ":o=s===u.after.length-1?o+" ":a._.insert(o," ",-(u.after.length-(1+s)+l.currency.symbol.length-1));}return o;}}),a.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(n,r,i){var o=("number"!=typeof n||a._.isNaN(n)?"0e+0":n.toExponential()).split("e");return r=r.replace(/e[\+|\-]{1}0/,""),a._.numberToFormat(Number(o[0]),r,i)+"e"+o[1];},unformat:function(n){var r=a._.includes(n,"e+")?n.split("e+"):n.split("e-"),i=Number(r[0]),o=Number(r[1]);return o=a._.includes(n,"e-")?o*=-1:o,a._.reduce([i,Math.pow(10,o)],function(n,r,i,o){var s=a._.correctionFactor(n,r);return n*s*(r*s)/(s*s);},1);}}),a.register("format","ordinal",{regexps:{format:/(o)/},format:function(n,r,i){var o=a.locales[a.options.currentLocale],s=a._.includes(r," o")?" ":"";return r=r.replace(/\s?o/,""),s+=o.ordinal(n),a._.numberToFormat(n,r,i)+s;}}),a.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(n,r,i){var o,s=a._.includes(r," %")?" ":"";return a.options.scalePercentBy100&&(n*=100),r=r.replace(/\s?\%/,""),o=a._.numberToFormat(n,r,i),a._.includes(o,")")?((o=o.split("")).splice(-1,0,s+"%"),o=o.join("")):o=o+s+"%",o;},unformat:function(n){var r=a._.stringToNumber(n);return a.options.scalePercentBy100?.01*r:r;}}),a.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(n,r,i){var a=Math.floor(n/60/60),o=Math.floor((n-3600*a)/60),s=Math.round(n-3600*a-60*o);return a+":"+(o<10?"0"+o:o)+":"+(s<10?"0"+s:s);},unformat:function(n){var r=n.split(":"),i=0;return 3===r.length?i+=3600*Number(r[0])+60*Number(r[1])+Number(r[2]):2===r.length&&(i+=60*Number(r[0])+Number(r[1])),Number(i);}}),a;},"object"==typeof n&&n.exports?n.exports=a():this.numeral=a();},de5956fa:function(n,r,i){var a,o;let s=i("1054d627");a=this,o=function(){"use strict";var n=function(n,r){this.next=null,this.key=n,this.data=r,this.left=null,this.right=null;};function r(n,r){return n>r?1:n<r?-1:0;}function i(r,i,a){for(var o=new n(null,null),s=o,l=o;;){var u=a(r,i.key);if(u<0){if(null===i.left)break;if(0>a(r,i.left.key)){var c=i.left;if(i.left=c.right,c.right=i,null===(i=c).left)break;}l.left=i,l=i,i=i.left;}else if(u>0){if(null===i.right)break;if(a(r,i.right.key)>0){var c=i.right;if(i.right=c.left,c.left=i,null===(i=c).right)break;}s.right=i,s=i,i=i.right;}else break;}return s.right=i.left,l.left=i.right,i.left=o.right,i.right=o.left,i;}function a(r,a,o,s){var l=new n(r,a);if(null===o)return l.left=l.right=null,l;o=i(r,o,s);var u=s(r,o.key);return u<0?(l.left=o.left,l.right=o,o.left=null):u>=0&&(l.right=o.right,l.left=o,o.right=null),l;}function o(n,r,a){var o=null,s=null;if(r){r=i(n,r,a);var l=a(r.key,n);0===l?(o=r.left,s=r.right):l<0?(s=r.right,r.right=null,o=r):(o=r.left,r.left=null,s=r);}return{left:o,right:s};}var l=function(){function s(n){void 0===n&&(n=r),this._root=null,this._size=0,this._comparator=n;}return s.prototype.insert=function(n,r){return this._size++,this._root=a(n,r,this._root,this._comparator);},s.prototype.add=function(r,a){var o=new n(r,a);null===this._root&&(o.left=o.right=null,this._size++,this._root=o);var s=this._comparator,l=i(r,this._root,s),u=s(r,l.key);return 0===u?this._root=l:(u<0?(o.left=l.left,o.right=l,l.left=null):u>0&&(o.right=l.right,o.left=l,l.right=null),this._size++,this._root=o),this._root;},s.prototype.remove=function(n){this._root=this._remove(n,this._root,this._comparator);},s.prototype._remove=function(n,r,a){var o;return null===r?null:(r=i(n,r,a),0===a(n,r.key))?(null===r.left?o=r.right:(o=i(n,r.left,a)).right=r.right,this._size--,o):r;},s.prototype.pop=function(){var n=this._root;if(n){for(;n.left;)n=n.left;return this._root=i(n.key,this._root,this._comparator),this._root=this._remove(n.key,this._root,this._comparator),{key:n.key,data:n.data};}return null;},s.prototype.findStatic=function(n){for(var r=this._root,i=this._comparator;r;){var a=i(n,r.key);if(0===a)return r;r=a<0?r.left:r.right;}return null;},s.prototype.find=function(n){return this._root&&(this._root=i(n,this._root,this._comparator),0!==this._comparator(n,this._root.key))?null:this._root;},s.prototype.contains=function(n){for(var r=this._root,i=this._comparator;r;){var a=i(n,r.key);if(0===a)return!0;r=a<0?r.left:r.right;}return!1;},s.prototype.forEach=function(n,r){for(var i=this._root,a=[],o=!1;!o;)null!==i?(a.push(i),i=i.left):0!==a.length?(i=a.pop(),n.call(r,i),i=i.right):o=!0;return this;},s.prototype.range=function(n,r,i,a){for(var o=[],s=this._comparator,l=this._root;0!==o.length||l;)if(l)o.push(l),l=l.left;else{if(s((l=o.pop()).key,r)>0)break;if(s(l.key,n)>=0&&i.call(a,l))return this;l=l.right;}return this;},s.prototype.keys=function(){var n=[];return this.forEach(function(r){var i=r.key;return n.push(i);}),n;},s.prototype.values=function(){var n=[];return this.forEach(function(r){var i=r.data;return n.push(i);}),n;},s.prototype.min=function(){return this._root?this.minNode(this._root).key:null;},s.prototype.max=function(){return this._root?this.maxNode(this._root).key:null;},s.prototype.minNode=function(n){if(void 0===n&&(n=this._root),n)for(;n.left;)n=n.left;return n;},s.prototype.maxNode=function(n){if(void 0===n&&(n=this._root),n)for(;n.right;)n=n.right;return n;},s.prototype.at=function(n){for(var r=this._root,i=!1,a=0,o=[];!i;)if(r)o.push(r),r=r.left;else if(o.length>0){if(r=o.pop(),a===n)return r;a++,r=r.right;}else i=!0;return null;},s.prototype.next=function(n){var r=this._root,i=null;if(n.right){for(i=n.right;i.left;)i=i.left;return i;}for(var a=this._comparator;r;){var o=a(n.key,r.key);if(0===o)break;o<0?(i=r,r=r.left):r=r.right;}return i;},s.prototype.prev=function(n){var r=this._root,i=null;if(null!==n.left){for(i=n.left;i.right;)i=i.right;return i;}for(var a=this._comparator;r;){var o=a(n.key,r.key);if(0===o)break;o<0?r=r.left:(i=r,r=r.right);}return i;},s.prototype.clear=function(){return this._root=null,this._size=0,this;},s.prototype.toList=function(){return function(r){for(var i=r,a=[],o=!1,s=new n(null,null),l=s;!o;)i?(a.push(i),i=i.left):a.length>0?i=(i=l=l.next=a.pop()).right:o=!0;return l.next=null,s.next;}(this._root);},s.prototype.load=function(r,i,a){void 0===i&&(i=[]),void 0===a&&(a=!1);var o=r.length,s=this._comparator;if(a&&function n(r,i,a,o,s){if(!(a>=o)){for(var l=r[a+o>>1],u=a-1,c=o+1;;){do u++;while(0>s(r[u],l))do c--;while(s(r[c],l)>0)if(u>=c)break;var f=r[u];r[u]=r[c],r[c]=f,f=i[u],i[u]=i[c],i[c]=f;}n(r,i,a,c,s),n(r,i,c+1,o,s);}}(r,i,0,o-1,s),null===this._root)this._root=function r(i,a,o,s){var l=s-o;if(l>0){var u=o+Math.floor(l/2),c=new n(i[u],a[u]);return c.left=r(i,a,o,u),c.right=r(i,a,u+1,s),c;}return null;}(r,i,0,o),this._size=o;else{var l=function(r,i,a){for(var o=new n(null,null),s=o,l=r,u=i;null!==l&&null!==u;)0>a(l.key,u.key)?(s.next=l,l=l.next):(s.next=u,u=u.next),s=s.next;return null!==l?s.next=l:null!==u&&(s.next=u),o.next;}(this.toList(),function(r,i){for(var a=new n(null,null),o=a,s=0;s<r.length;s++)o=o.next=new n(r[s],i[s]);return o.next=null,a.next;}(r,i),s);o=this._size+o,this._root=function n(r,i,a){var o=a-i;if(o>0){var s=i+Math.floor(o/2),l=n(r,i,s),u=r.head;return u.left=l,r.head=r.head.next,u.right=n(r,s+1,a),u;}return null;}({head:l},0,o);}return this;},s.prototype.isEmpty=function(){return null===this._root;},Object.defineProperty(s.prototype,"size",{get:function(){return this._size;},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"root",{get:function(){return this._root;},enumerable:!0,configurable:!0}),s.prototype.toString=function(n){void 0===n&&(n=function(n){return String(n.key);});var r=[];return function n(r,i,a,o,s){if(r){o(""+i+(a?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+s(r)+"\n");var l=i+(a?"    ":"\u2502   ");r.left&&n(r.left,l,!1,o,s),r.right&&n(r.right,l,!0,o,s);}}(this._root,"",!0,function(n){return r.push(n);},n),r.join("");},s.prototype.update=function(n,r,s){var l,u,c=this._comparator,f=o(n,this._root,c),d=f.left,h=f.right;0>c(n,r)?h=a(r,s,h,c):d=a(r,s,d,c),this._root=(l=d,null===(u=h)?l:(null===l||((u=i(l.key,u,c)).left=l),u));},s.prototype.split=function(n){return o(n,this._root,this._comparator);},s.prototype[Symbol.iterator]=function(){var n,r,i;return function(n,r){var i,a,o,s,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1];},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this;}),s;function u(s){return function(u){return function(s){if(i)throw TypeError("Generator is already executing.");for(;l;)try{if(i=1,a&&(o=2&s[0]?a.return:s[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,s[1])).done)return o;switch(a=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return l.label++,{value:s[1],done:!1};case 5:l.label++,a=s[1],s=[0];continue;case 7:s=l.ops.pop(),l.trys.pop();continue;default:if(!(o=(o=l.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){l=0;continue;}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){l.label=s[1];break;}if(6===s[0]&&l.label<o[1]){l.label=o[1],o=s;break;}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(s);break;}o[2]&&l.ops.pop(),l.trys.pop();continue;}s=r.call(n,l);}catch(n){s=[6,n],a=0;}finally{i=o=0;}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0};}([s,u]);};}}(this,function(a){switch(a.label){case 0:n=this._root,r=[],i=!1,a.label=1;case 1:if(i)return[3,6];if(!(null!==n))return[3,2];return r.push(n),n=n.left,[3,5];case 2:if(!(0!==r.length))return[3,4];return[4,n=r.pop()];case 3:return a.sent(),n=n.right,[3,5];case 4:i=!0,a.label=5;case 5:return[3,1];case 6:return[2];}});},s;}();let u=(n,r)=>n.ll.x<=r.x&&r.x<=n.ur.x&&n.ll.y<=r.y&&r.y<=n.ur.y,c=(n,r)=>{if(r.ur.x<n.ll.x||n.ur.x<r.ll.x||r.ur.y<n.ll.y||n.ur.y<r.ll.y)return null;let i=n.ll.x<r.ll.x?r.ll.x:n.ll.x,a=n.ur.x<r.ur.x?n.ur.x:r.ur.x;return{ll:{x:i,y:n.ll.y<r.ll.y?r.ll.y:n.ll.y},ur:{x:a,y:n.ur.y<r.ur.y?n.ur.y:r.ur.y}};},f=Number.EPSILON;void 0===f&&(f=2220446049250313e-31);let d=f*f,h=(n,r)=>{if(-f<n&&n<f&&-f<r&&r<f)return 0;let i=n-r;return i*i<d*n*r?0:n<r?-1:1;};class p{constructor(){this.tree=new l,this.round(0);}round(n){let r=this.tree.add(n),i=this.tree.prev(r);if(null!==i&&0===h(r.key,i.key))return this.tree.remove(n),i.key;let a=this.tree.next(r);return null!==a&&0===h(r.key,a.key)?(this.tree.remove(n),a.key):n;}}let m=new class{constructor(){this.reset();}reset(){this.xRounder=new p,this.yRounder=new p;}round(n,r){return{x:this.xRounder.round(n),y:this.yRounder.round(r)};}},g=(3+8881784197001252e-31)*11102230246251565e-32;function v(n,r,i,a,o){let s,l,u,c;let f=r[0],d=a[0],h=0,p=0;d>f==d>-f?(s=f,f=r[++h]):(s=d,d=a[++p]);let m=0;if(h<n&&p<i)for(d>f==d>-f?(l=f+s,u=s-(l-f),f=r[++h]):(l=d+s,u=s-(l-d),d=a[++p]),s=l,0!==u&&(o[m++]=u);h<n&&p<i;)d>f==d>-f?(c=(l=s+f)-s,u=s-(l-c)+(f-c),f=r[++h]):(c=(l=s+d)-s,u=s-(l-c)+(d-c),d=a[++p]),s=l,0!==u&&(o[m++]=u);for(;h<n;)c=(l=s+f)-s,u=s-(l-c)+(f-c),f=r[++h],s=l,0!==u&&(o[m++]=u);for(;p<i;)c=(l=s+d)-s,u=s-(l-c)+(d-c),d=a[++p],s=l,0!==u&&(o[m++]=u);return(0!==s||0===m)&&(o[m++]=s),m;}function y(n){return new Float64Array(n);}let _=(3+17763568394002505e-31)*11102230246251565e-32,b=(2+13322676295501878e-31)*11102230246251565e-32,x=(9+7105427357601002e-30)*11102230246251565e-32*11102230246251565e-32,E=y(4),w=y(8),S=y(12),T=y(16),A=y(4),C=(n,r)=>n.x*r.y-n.y*r.x,O=(n,r)=>n.x*r.x+n.y*r.y,M=(n,r,i)=>{let a=function(n,r,i,a,o,s){let l=(r-s)*(i-o),u=(n-o)*(a-s),c=l-u,f=Math.abs(l+u);return Math.abs(c)>=_*f?c:-function(n,r,i,a,o,s,l){let u,c,f,d,h,p,m,y,_,C,O,M,R,P,k,I,L,N;let D=n-o,F=i-o,B=r-s,j=a-s;P=D*j,m=(p=134217729*D)-(p-D),y=D-m,_=(p=134217729*j)-(p-j),k=y*(C=j-_)-(P-m*_-y*_-m*C),I=B*F,m=(p=134217729*B)-(p-B),y=B-m,_=(p=134217729*F)-(p-F),O=k-(L=y*(C=F-_)-(I-m*_-y*_-m*C)),h=k-O,E[0]=k-(O+h)+(h-L),h=(M=P+O)-P,O=(R=P-(M-h)+(O-h))-I,h=R-O,E[1]=R-(O+h)+(h-I),h=(N=M+O)-M,E[2]=M-(N-h)+(O-h),E[3]=N;let z=function(n,r){let i=r[0];for(let n=1;n<4;n++)i+=r[n];return i;}(0,E),U=b*l;if(z>=U||-z>=U||(h=n-D,u=n-(D+h)+(h-o),h=i-F,f=i-(F+h)+(h-o),h=r-B,c=r-(B+h)+(h-s),h=a-j,d=a-(j+h)+(h-s),0===u&&0===c&&0===f&&0===d)||(U=x*l+g*Math.abs(z),(z+=D*d+j*u-(B*f+F*c))>=U||-z>=U))return z;P=u*j,m=(p=134217729*u)-(p-u),y=u-m,_=(p=134217729*j)-(p-j),k=y*(C=j-_)-(P-m*_-y*_-m*C),I=c*F,m=(p=134217729*c)-(p-c),y=c-m,_=(p=134217729*F)-(p-F),O=k-(L=y*(C=F-_)-(I-m*_-y*_-m*C)),h=k-O,A[0]=k-(O+h)+(h-L),h=(M=P+O)-P,O=(R=P-(M-h)+(O-h))-I,h=R-O,A[1]=R-(O+h)+(h-I),h=(N=M+O)-M,A[2]=M-(N-h)+(O-h),A[3]=N;let V=v(4,E,4,A,w);P=D*d,m=(p=134217729*D)-(p-D),y=D-m,_=(p=134217729*d)-(p-d),k=y*(C=d-_)-(P-m*_-y*_-m*C),I=B*f,m=(p=134217729*B)-(p-B),y=B-m,_=(p=134217729*f)-(p-f),O=k-(L=y*(C=f-_)-(I-m*_-y*_-m*C)),h=k-O,A[0]=k-(O+h)+(h-L),h=(M=P+O)-P,O=(R=P-(M-h)+(O-h))-I,h=R-O,A[1]=R-(O+h)+(h-I),h=(N=M+O)-M,A[2]=M-(N-h)+(O-h),A[3]=N;let G=v(V,w,4,A,S);P=u*d,m=(p=134217729*u)-(p-u),y=u-m,_=(p=134217729*d)-(p-d),k=y*(C=d-_)-(P-m*_-y*_-m*C),I=c*f,m=(p=134217729*c)-(p-c),y=c-m,_=(p=134217729*f)-(p-f),O=k-(L=y*(C=f-_)-(I-m*_-y*_-m*C)),h=k-O,A[0]=k-(O+h)+(h-L),h=(M=P+O)-P,O=(R=P-(M-h)+(O-h))-I,h=R-O,A[1]=R-(O+h)+(h-I),h=(N=M+O)-M,A[2]=M-(N-h)+(O-h),A[3]=N;let H=v(G,S,4,A,T);return T[H-1];}(n,r,i,a,o,s,f);}(n.x,n.y,r.x,r.y,i.x,i.y);return a>0?-1:a<0?1:0;},R=n=>Math.sqrt(O(n,n)),P=(n,r,i)=>{let a={x:r.x-n.x,y:r.y-n.y},o={x:i.x-n.x,y:i.y-n.y};return C(o,a)/R(o)/R(a);},k=(n,r,i)=>{let a={x:r.x-n.x,y:r.y-n.y},o={x:i.x-n.x,y:i.y-n.y};return O(o,a)/R(o)/R(a);},I=(n,r,i)=>0===r.y?null:{x:n.x+r.x/r.y*(i-n.y),y:i},L=(n,r,i)=>0===r.x?null:{x:i,y:n.y+r.y/r.x*(i-n.x)},N=(n,r,i,a)=>{if(0===r.x)return L(i,a,n.x);if(0===a.x)return L(n,r,i.x);if(0===r.y)return I(i,a,n.y);if(0===a.y)return I(n,r,i.y);let o=C(r,a);if(0==o)return null;let s={x:i.x-n.x,y:i.y-n.y},l=C(s,r)/o,u=C(s,a)/o,c=n.x+u*r.x,f=i.x+l*a.x;return{x:(c+f)/2,y:(n.y+u*r.y+(i.y+l*a.y))/2};};class D{static compare(n,r){let i=D.comparePoints(n.point,r.point);return 0!==i?i:(n.point!==r.point&&n.link(r),n.isLeft!==r.isLeft)?n.isLeft?1:-1:B.compare(n.segment,r.segment);}static comparePoints(n,r){return n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0;}constructor(n,r){void 0===n.events?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=r;}link(n){if(n.point===this.point)throw Error("Tried to link already linked events");let r=n.point.events;for(let n=0,i=r.length;n<i;n++){let i=r[n];this.point.events.push(i),i.point=this.point;}this.checkForConsuming();}checkForConsuming(){let n=this.point.events.length;for(let r=0;r<n;r++){let i=this.point.events[r];if(void 0===i.segment.consumedBy)for(let a=r+1;a<n;a++){let n=this.point.events[a];void 0===n.consumedBy&&i.otherSE.point.events===n.otherSE.point.events&&i.segment.consume(n.segment);}}}getAvailableLinkedEvents(){let n=[];for(let r=0,i=this.point.events.length;r<i;r++){let i=this.point.events[r];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&n.push(i);}return n;}getLeftmostComparator(n){let r=new Map,i=i=>{let a=i.otherSE;r.set(i,{sine:P(this.point,n.point,a.point),cosine:k(this.point,n.point,a.point)});};return(n,a)=>{r.has(n)||i(n),r.has(a)||i(a);let{sine:o,cosine:s}=r.get(n),{sine:l,cosine:u}=r.get(a);return o>=0&&l>=0?s<u?1:s>u?-1:0:o<0&&l<0?s<u?-1:s>u?1:0:l<o?-1:l>o?1:0;};}}let F=0;class B{static compare(n,r){let i=n.leftSE.point.x,a=r.leftSE.point.x,o=n.rightSE.point.x,s=r.rightSE.point.x;if(s<i)return 1;if(o<a)return -1;let l=n.leftSE.point.y,u=r.leftSE.point.y,c=n.rightSE.point.y,f=r.rightSE.point.y;if(i<a){if(u<l&&u<c)return 1;if(u>l&&u>c)return -1;let i=n.comparePoint(r.leftSE.point);if(i<0)return 1;if(i>0)return -1;let a=r.comparePoint(n.rightSE.point);return 0!==a?a:-1;}if(i>a){if(l<u&&l<f)return -1;if(l>u&&l>f)return 1;let i=r.comparePoint(n.leftSE.point);if(0!==i)return i;let a=n.comparePoint(r.rightSE.point);return a<0?1:a>0?-1:1;}if(l<u)return -1;if(l>u)return 1;if(o<s){let i=r.comparePoint(n.rightSE.point);if(0!==i)return i;}if(o>s){let i=n.comparePoint(r.rightSE.point);if(i<0)return 1;if(i>0)return -1;}if(o!==s){let n=c-l,r=o-i,d=f-u,h=s-a;if(n>r&&d<h)return 1;if(n<r&&d>h)return -1;}return o>s?1:o<s||c<f?-1:c>f?1:n.id<r.id?-1:n.id>r.id?1:0;}constructor(n,r,i,a){this.id=++F,this.leftSE=n,n.segment=this,n.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=n,this.rings=i,this.windings=a;}static fromRing(n,r,i){let a,o,s;let l=D.comparePoints(n,r);if(l<0)a=n,o=r,s=1;else if(l>0)a=r,o=n,s=-1;else throw Error(`Tried to create degenerate segment at [${n.x}, ${n.y}]`);return new B(new D(a,!0),new D(o,!1),[i],[s]);}replaceRightSE(n){this.rightSE=n,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE;}bbox(){let n=this.leftSE.point.y,r=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:n<r?n:r},ur:{x:this.rightSE.point.x,y:n>r?n:r}};}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y};}isAnEndpoint(n){return n.x===this.leftSE.point.x&&n.y===this.leftSE.point.y||n.x===this.rightSE.point.x&&n.y===this.rightSE.point.y;}comparePoint(n){if(this.isAnEndpoint(n))return 0;let r=this.leftSE.point,i=this.rightSE.point,a=this.vector();if(r.x===i.x)return n.x===r.x?0:n.x<r.x?1:-1;let o=(n.y-r.y)/a.y,s=r.x+o*a.x;if(n.x===s)return 0;let l=(n.x-r.x)/a.x,u=r.y+l*a.y;return n.y===u?0:n.y<u?-1:1;}getIntersection(n){let r=this.bbox(),i=n.bbox(),a=c(r,i);if(null===a)return null;let o=this.leftSE.point,s=this.rightSE.point,l=n.leftSE.point,f=n.rightSE.point,d=u(r,l)&&0===this.comparePoint(l),h=u(i,o)&&0===n.comparePoint(o),p=u(r,f)&&0===this.comparePoint(f),g=u(i,s)&&0===n.comparePoint(s);if(h&&d)return g&&!p?s:!g&&p?f:null;if(h)return p&&o.x===f.x&&o.y===f.y?null:o;if(d)return g&&s.x===l.x&&s.y===l.y?null:l;if(g&&p)return null;if(g)return s;if(p)return f;let v=N(o,this.vector(),l,n.vector());return null!==v&&u(a,v)?m.round(v.x,v.y):null;}split(n){let r=[],i=void 0!==n.events,a=new D(n,!0),o=new D(n,!1),s=this.rightSE;this.replaceRightSE(o),r.push(o),r.push(a);let l=new B(a,s,this.rings.slice(),this.windings.slice());return D.comparePoints(l.leftSE.point,l.rightSE.point)>0&&l.swapEvents(),D.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),i&&(a.checkForConsuming(),o.checkForConsuming()),r;}swapEvents(){let n=this.rightSE;this.rightSE=this.leftSE,this.leftSE=n,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let n=0,r=this.windings.length;n<r;n++)this.windings[n]*=-1;}consume(n){let r=this,i=n;for(;r.consumedBy;)r=r.consumedBy;for(;i.consumedBy;)i=i.consumedBy;let a=B.compare(r,i);if(0!==a){if(a>0||r.prev===i){let n=r;r=i,i=n;}for(let n=0,a=i.rings.length;n<a;n++){let a=i.rings[n],o=i.windings[n],s=r.rings.indexOf(a);-1===s?(r.rings.push(a),r.windings.push(o)):r.windings[s]+=o;}i.rings=null,i.windings=null,i.consumedBy=r,i.leftSE.consumedBy=r.leftSE,i.rightSE.consumedBy=r.rightSE;}}prevInResult(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult;}beforeState(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){let n=this.prev.consumedBy||this.prev;this._beforeState=n.afterState();}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState;}afterState(){if(void 0!==this._afterState)return this._afterState;let n=this.beforeState();this._afterState={rings:n.rings.slice(0),windings:n.windings.slice(0),multiPolys:[]};let r=this._afterState.rings,i=this._afterState.windings,a=this._afterState.multiPolys;for(let n=0,a=this.rings.length;n<a;n++){let a=this.rings[n],o=this.windings[n],s=r.indexOf(a);-1===s?(r.push(a),i.push(o)):i[s]+=o;}let o=[],s=[];for(let n=0,a=r.length;n<a;n++){if(0===i[n])continue;let a=r[n],l=a.poly;if(-1===s.indexOf(l)){if(a.isExterior)o.push(l);else{-1===s.indexOf(l)&&s.push(l);let n=o.indexOf(a.poly);-1!==n&&o.splice(n,1);}}}for(let n=0,r=o.length;n<r;n++){let r=o[n].multiPoly;-1===a.indexOf(r)&&a.push(r);}return this._afterState;}isInResult(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;let n=this.beforeState().multiPolys,r=this.afterState().multiPolys;switch($.type){case"union":{let i=0===n.length,a=0===r.length;this._isInResult=i!==a;break;}case"intersection":{let i,a;n.length<r.length?(i=n.length,a=r.length):(i=r.length,a=n.length),this._isInResult=a===$.numMultiPolys&&i<a;break;}case"xor":{let i=Math.abs(n.length-r.length);this._isInResult=i%2==1;break;}case"difference":this._isInResult=(1===n.length&&n[0].isSubject)!==(1===r.length&&r[0].isSubject);break;default:throw Error(`Unrecognized operation type found ${$.type}`);}return this._isInResult;}}class j{constructor(n,r,i){if(!Array.isArray(n)||0===n.length||(this.poly=r,this.isExterior=i,this.segments=[],"number"!=typeof n[0][0]||"number"!=typeof n[0][1]))throw Error("Input geometry is not a valid Polygon or MultiPolygon");let a=m.round(n[0][0],n[0][1]);this.bbox={ll:{x:a.x,y:a.y},ur:{x:a.x,y:a.y}};let o=a;for(let r=1,i=n.length;r<i;r++){if("number"!=typeof n[r][0]||"number"!=typeof n[r][1])throw Error("Input geometry is not a valid Polygon or MultiPolygon");let i=m.round(n[r][0],n[r][1]);(i.x!==o.x||i.y!==o.y)&&(this.segments.push(B.fromRing(o,i,this)),i.x<this.bbox.ll.x&&(this.bbox.ll.x=i.x),i.y<this.bbox.ll.y&&(this.bbox.ll.y=i.y),i.x>this.bbox.ur.x&&(this.bbox.ur.x=i.x),i.y>this.bbox.ur.y&&(this.bbox.ur.y=i.y),o=i);}(a.x!==o.x||a.y!==o.y)&&this.segments.push(B.fromRing(o,a,this));}getSweepEvents(){let n=[];for(let r=0,i=this.segments.length;r<i;r++){let i=this.segments[r];n.push(i.leftSE),n.push(i.rightSE);}return n;}}class z{constructor(n,r){if(!Array.isArray(n))throw Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new j(n[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let r=1,i=n.length;r<i;r++){let i=new j(n[r],this,!1);i.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=i.bbox.ur.y),this.interiorRings.push(i);}this.multiPoly=r;}getSweepEvents(){let n=this.exteriorRing.getSweepEvents();for(let r=0,i=this.interiorRings.length;r<i;r++){let i=this.interiorRings[r].getSweepEvents();for(let r=0,a=i.length;r<a;r++)n.push(i[r]);}return n;}}class U{constructor(n,r){if(!Array.isArray(n))throw Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof n[0][0][0]&&(n=[n]);}catch(n){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let r=0,i=n.length;r<i;r++){let i=new z(n[r],this);i.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=i.bbox.ur.y),this.polys.push(i);}this.isSubject=r;}getSweepEvents(){let n=[];for(let r=0,i=this.polys.length;r<i;r++){let i=this.polys[r].getSweepEvents();for(let r=0,a=i.length;r<a;r++)n.push(i[r]);}return n;}}class V{static factory(n){let r=[];for(let i=0,a=n.length;i<a;i++){let a=n[i];if(!a.isInResult()||a.ringOut)continue;let o=null,s=a.leftSE,l=a.rightSE,u=[s],c=s.point,f=[];for(;o=s,s=l,u.push(s),s.point!==c;)for(;;){let n=s.getAvailableLinkedEvents();if(0===n.length){let n=u[0].point,r=u[u.length-1].point;throw Error(`Unable to complete output ring starting at [${n.x}, ${n.y}]. Last matching segment found ends at [${r.x}, ${r.y}].`);}if(1===n.length){l=n[0].otherSE;break;}let i=null;for(let n=0,r=f.length;n<r;n++)if(f[n].point===s.point){i=n;break;}if(null!==i){let n=f.splice(i)[0],a=u.splice(n.index);a.unshift(a[0].otherSE),r.push(new V(a.reverse()));continue;}f.push({index:u.length,point:s.point});let a=s.getLeftmostComparator(o);l=n.sort(a)[0].otherSE;break;}r.push(new V(u));}return r;}constructor(n){this.events=n;for(let r=0,i=n.length;r<i;r++)n[r].segment.ringOut=this;this.poly=null;}getGeom(){let n=this.events[0].point,r=[n];for(let i=1,a=this.events.length-1;i<a;i++){let a=this.events[i].point;0!==M(a,n,this.events[i+1].point)&&(r.push(a),n=a);}if(1===r.length)return null;0===M(r[0],n,r[1])&&r.shift(),r.push(r[0]);let i=this.isExteriorRing()?1:-1,a=this.isExteriorRing()?0:r.length-1,o=this.isExteriorRing()?r.length:-1,s=[];for(let n=a;n!=o;n+=i)s.push([r[n].x,r[n].y]);return s;}isExteriorRing(){if(void 0===this._isExteriorRing){let n=this.enclosingRing();this._isExteriorRing=!n||!n.isExteriorRing();}return this._isExteriorRing;}enclosingRing(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing;}_calcEnclosingRing(){let n=this.events[0];for(let r=1,i=this.events.length;r<i;r++){let i=this.events[r];D.compare(n,i)>0&&(n=i);}let r=n.segment.prevInResult(),i=r?r.prevInResult():null;for(;;){if(!r)return null;if(!i)return r.ringOut;if(i.ringOut!==r.ringOut){if(i.ringOut.enclosingRing()!==r.ringOut)return r.ringOut;return r.ringOut.enclosingRing();}i=(r=i.prevInResult())?r.prevInResult():null;}}}class G{constructor(n){this.exteriorRing=n,n.poly=this,this.interiorRings=[];}addInterior(n){this.interiorRings.push(n),n.poly=this;}getGeom(){let n=[this.exteriorRing.getGeom()];if(null===n[0])return null;for(let r=0,i=this.interiorRings.length;r<i;r++){let i=this.interiorRings[r].getGeom();null!==i&&n.push(i);}return n;}}class H{constructor(n){this.rings=n,this.polys=this._composePolys(n);}getGeom(){let n=[];for(let r=0,i=this.polys.length;r<i;r++){let i=this.polys[r].getGeom();null!==i&&n.push(i);}return n;}_composePolys(n){let r=[];for(let i=0,a=n.length;i<a;i++){let a=n[i];if(!a.poly){if(a.isExteriorRing())r.push(new G(a));else{let n=a.enclosingRing();n.poly||r.push(new G(n)),n.poly.addInterior(a);}}}return r;}}class W{constructor(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B.compare;this.queue=n,this.tree=new l(r),this.segments=[];}process(n){let r,i;let a=n.segment,o=[];if(n.consumedBy)return n.isLeft?this.queue.remove(n.otherSE):this.tree.remove(a),o;let s=n.isLeft?this.tree.add(a):this.tree.find(a);if(!s)throw Error(`Unable to find segment #${a.id} [${a.leftSE.point.x}, ${a.leftSE.point.y}] -> [${a.rightSE.point.x}, ${a.rightSE.point.y}] in SweepLine tree.`);let l=s,u=s;for(;void 0===r;)null===(l=this.tree.prev(l))?r=null:void 0===l.key.consumedBy&&(r=l.key);for(;void 0===i;)null===(u=this.tree.next(u))?i=null:void 0===u.key.consumedBy&&(i=u.key);if(n.isLeft){let s=null;if(r){let n=r.getIntersection(a);if(null!==n&&(a.isAnEndpoint(n)||(s=n),!r.isAnEndpoint(n))){let i=this._splitSafely(r,n);for(let n=0,r=i.length;n<r;n++)o.push(i[n]);}}let l=null;if(i){let n=i.getIntersection(a);if(null!==n&&(a.isAnEndpoint(n)||(l=n),!i.isAnEndpoint(n))){let r=this._splitSafely(i,n);for(let n=0,i=r.length;n<i;n++)o.push(r[n]);}}if(null!==s||null!==l){let n=null;n=null===s?l:null===l?s:0>=D.comparePoints(s,l)?s:l,this.queue.remove(a.rightSE),o.push(a.rightSE);let r=a.split(n);for(let n=0,i=r.length;n<i;n++)o.push(r[n]);}o.length>0?(this.tree.remove(a),o.push(n)):(this.segments.push(a),a.prev=r);}else{if(r&&i){let n=r.getIntersection(i);if(null!==n){if(!r.isAnEndpoint(n)){let i=this._splitSafely(r,n);for(let n=0,r=i.length;n<r;n++)o.push(i[n]);}if(!i.isAnEndpoint(n)){let r=this._splitSafely(i,n);for(let n=0,i=r.length;n<i;n++)o.push(r[n]);}}}this.tree.remove(a);}return o;}_splitSafely(n,r){this.tree.remove(n);let i=n.rightSE;this.queue.remove(i);let a=n.split(r);return a.push(i),void 0===n.consumedBy&&this.tree.add(n),a;}}let X=void 0!==s&&s.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,q=void 0!==s&&s.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,$=new class{run(n,r,i){$.type=n,m.reset();let a=[new U(r,!0)];for(let n=0,r=i.length;n<r;n++)a.push(new U(i[n],!1));if($.numMultiPolys=a.length,"difference"===$.type){let n=a[0],r=1;for(;r<a.length;)null!==c(a[r].bbox,n.bbox)?r++:a.splice(r,1);}if("intersection"===$.type)for(let n=0,r=a.length;n<r;n++){let r=a[n];for(let i=n+1,o=a.length;i<o;i++)if(null===c(r.bbox,a[i].bbox))return[];}let o=new l(D.compare);for(let n=0,r=a.length;n<r;n++){let r=a[n].getSweepEvents();for(let n=0,i=r.length;n<i;n++)if(o.insert(r[n]),o.size>X)throw Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).");}let s=new W(o),u=o.size,f=o.pop();for(;f;){let n=f.key;if(o.size===u){let r=n.segment;throw Error(`Unable to pop() ${n.isLeft?"left":"right"} SweepEvent [${n.point.x}, ${n.point.y}] from segment #${r.id} [${r.leftSE.point.x}, ${r.leftSE.point.y}] -> [${r.rightSE.point.x}, ${r.rightSE.point.y}] from queue.`);}if(o.size>X)throw Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(s.segments.length>q)throw Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");let r=s.process(n);for(let n=0,i=r.length;n<i;n++){let i=r[n];void 0===i.consumedBy&&o.insert(i);}u=o.size,f=o.pop();}return m.reset(),new H(V.factory(s.segments)).getGeom();}};return{union:function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return $.run("union",n,i);},intersection:function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return $.run("intersection",n,i);},xor:function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return $.run("xor",n,i);},difference:function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return $.run("difference",n,i);}};},"object"==typeof r&&void 0!==n?n.exports=o():(a="undefined"!=typeof globalThis?globalThis:a||self).polygonClipping=o();},df00ce18:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{Control:function(){return y;},Logo:function(){return C;},Marker:function(){return m;},Popup:function(){return O;},PositionType:function(){return v.PositionType;}});var a,o=i("777fffbe"),s=i("852bbaa9"),l=i("e4870cf0"),u=o._(l),c=i("a854094b"),f=o._(c),d=i("9479dab9"),h=i("a13e65f7"),p=s._(h);class m extends p.EventEmitter{getMarkerLayerContainerSize(){}constructor(n){super(),(0,f.default)(this,"markerOption",void 0),(0,f.default)(this,"popup",void 0),(0,f.default)(this,"mapsService",void 0),(0,f.default)(this,"lngLat",void 0),(0,f.default)(this,"scene",void 0),(0,f.default)(this,"added",!1),(0,f.default)(this,"preLngLat",{lng:0,lat:0}),(0,f.default)(this,"onMarkerDragStart",n=>{let r=this.mapsService.getContainer();if(!r)return;this.mapsService.setMapStatus({dragEnable:!1,zoomEnable:!1});let{left:i,top:a}=r.getClientRects()[0],{x:o,y:s}=n;this.preLngLat=this.mapsService.containerToLngLat([o-i,s-a]),this.mapsService.on("mousemove",this.onMarkerDragMove),document.addEventListener("mouseup",this.onMarkerDragEnd),this.emit("dragstart",this.lngLat);}),(0,f.default)(this,"onMarkerDragMove",n=>{let r=n.lngLat||n.lnglat,{lng:i,lat:a}=this.preLngLat,{lng:o,lat:s}=r,l={lng:this.lngLat.lng+o-i,lat:this.lngLat.lat+s-a};this.setLnglat(l),this.preLngLat=r,this.emit("dragging",l);}),(0,f.default)(this,"onMarkerDragEnd",()=>{this.mapsService.setMapStatus({dragEnable:!0,zoomEnable:!0}),this.mapsService.off("mousemove",this.onMarkerDragMove),document.removeEventListener("mouseup",this.onMarkerDragEnd),this.emit("dragend",this.lngLat);}),(0,f.default)(this,"eventHandle",n=>{this.polyfillEvent(n),this.emit(n.type,{target:n,data:this.markerOption.extData,lngLat:this.lngLat});}),(0,f.default)(this,"touchStartTime",void 0),this.markerOption=(0,u.default)((0,u.default)({},this.getDefault()),n),(0,d.bindAll)(["update","onMove","onMapClick","updatePositionWhenZoom"],this),this.init();}getDefault(){return{element:void 0,anchor:d.anchorType.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1,overflowHide:!0};}addTo(n){this.scene=n,this.mapsService=n.mapService;let{element:r}=this.markerOption;return this.mapsService.getMarkerContainer().appendChild(r),this.registerMarkerEvent(r),this.mapsService.on("camerachange",this.update),this.update(),this.updateDraggable(),this.added=!0,this.emit("added"),this;}remove(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update),this.mapsService.off("camerachange",this.update)),this.unRegisterMarkerEvent(),this.removeAllListeners();let{element:n}=this.markerOption;return n&&d.DOM.remove(n),this.popup&&this.popup.remove(),this;}setLnglat(n){return this.lngLat=n,Array.isArray(n)&&(this.lngLat={lng:n[0],lat:n[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this;}getLnglat(){return this.lngLat;}getElement(){return this.markerOption.element;}setElement(n){if(!this.added)return this.once("added",()=>{this.setElement(n);}),this;let{element:r}=this.markerOption;return r&&d.DOM.remove(r),this.markerOption.element=n,this.init(),this.mapsService.getMarkerContainer().appendChild(n),this.registerMarkerEvent(n),this.updateDraggable(),this.update(),this;}openPopup(){if(!this.added)return this.once("added",()=>{this.openPopup();}),this;let n=this.popup;return n&&(n.isOpen()||n.addTo(this.scene)),this;}closePopup(){this.added||this.once("added",()=>{this.closePopup();});let n=this.popup;return n&&n.remove(),this;}setPopup(n){return this.popup=n,this.lngLat&&this.popup.setLnglat(this.lngLat),this;}togglePopup(){let n=this.popup;return n&&(n.isOpen()?n.remove():n.addTo(this.scene)),this;}getPopup(){return this.popup;}getOffset(){return this.markerOption.offsets;}setDraggable(n){this.markerOption.draggable=n,this.updateDraggable();}getDraggable(){return this.markerOption.draggable;}getExtData(){return this.markerOption.extData;}setExtData(n){this.markerOption.extData=n;}update(){if(!this.mapsService)return;let{element:n,anchor:r}=this.markerOption;this.updatePosition(),d.DOM.setTransform(n,`${d.anchorTranslate[r]}`);}updatePositionWhenZoom(n){if(!this.mapsService)return;let{element:r,offsets:i}=this.markerOption,{lng:a,lat:o}=this.lngLat;if(r){r.style.display="block",r.style.whiteSpace="nowrap";let{containerHeight:s,containerWidth:l,bounds:u}=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize();if(!u)return;let c=n.map,f=n.center,d=n.zoom,h=c.DE(this.lngLat,d,f);if(h.x=Math.round(h.x+i[0]),h.y=Math.round(h.y-i[1]),Math.abs(u[0][0])>180||Math.abs(u[1][0])>180){if(h.x>l){let n=this.mapsService.lngLatToContainer([a-360,o]);h.x=n.x;}if(h.x<0){let n=this.mapsService.lngLatToContainer([a+360,o]);h.x=n.x;}}(h.x>l||h.x<0||h.y>s||h.y<0)&&(r.style.display="none"),r.style.left=h.x+"px",r.style.top=h.y+"px",r.style.transition="left 0.25s cubic-bezier(0,0,0.25,1), top 0.25s cubic-bezier(0,0,0.25,1)";}}onMapClick(n){let{element:r}=this.markerOption;this.popup&&r&&this.togglePopup();}getCurrentContainerSize(){let n=this.mapsService.getContainer();return{containerHeight:(null==n?void 0:n.scrollHeight)||0,containerWidth:(null==n?void 0:n.scrollWidth)||0,bounds:this.mapsService.getBounds()};}updateDraggable(){let{element:n}=this.markerOption;null==n||n.removeEventListener("mousedown",this.onMarkerDragStart),this.mapsService.off("mousemove",this.onMarkerDragMove),document.removeEventListener("mouseup",this.onMarkerDragEnd),this.markerOption.draggable&&(null==n||n.addEventListener("mousedown",this.onMarkerDragStart));}updatePosition(){if(!this.mapsService)return;let{element:n,offsets:r}=this.markerOption,{lng:i,lat:a}=this.lngLat,o=this.mapsService.lngLatToContainer([i,a]);if(n){n.style.display="block",n.style.whiteSpace="nowrap";let{containerHeight:s,containerWidth:l,bounds:u}=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize();if(!u)return;if(Math.abs(u[0][0])>180||Math.abs(u[1][0])>180){if(o.x>l){let n=this.mapsService.lngLatToContainer([i-360,a]);o.x=n.x;}if(o.x<0){let n=this.mapsService.lngLatToContainer([i+360,a]);o.x=n.x;}}this.markerOption.overflowHide&&(o.x>l||o.x<0||o.y>s||o.y<0)&&(n.style.display="none"),n.style.left=o.x+r[0]+"px",n.style.top=o.y-r[1]+"px";}}init(){let{element:n}=this.markerOption,{color:r,anchor:i}=this.markerOption;if(!n){n=d.DOM.create("div"),this.markerOption.element=n;let i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttributeNS(null,"display","block"),i.setAttributeNS(null,"height","48px"),i.setAttributeNS(null,"width","48px"),i.setAttributeNS(null,"viewBox","0 0 1024 1024");let a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),a.setAttributeNS(null,"fill",r),i.appendChild(a),n.appendChild(i);}d.DOM.addClass(n,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach(r=>{var i,a;let o=(null===(i=this.markerOption)||void 0===i?void 0:i.style)&&(null===(a=this.markerOption)||void 0===a?void 0:a.style[r]);n&&(n.style[r]=o);}),(0,d.applyAnchorClass)(n,i,"marker");}registerMarkerEvent(n){n.addEventListener("click",this.onMapClick),n.addEventListener("mousemove",this.eventHandle),n.addEventListener("click",this.eventHandle),n.addEventListener("mousedown",this.eventHandle),n.addEventListener("mouseup",this.eventHandle),n.addEventListener("dblclick",this.eventHandle),n.addEventListener("contextmenu",this.eventHandle),n.addEventListener("mouseover",this.eventHandle),n.addEventListener("mouseout",this.eventHandle),n.addEventListener("touchstart",this.eventHandle),n.addEventListener("touchend",this.eventHandle);}unRegisterMarkerEvent(){let n=this.getElement();n.removeEventListener("click",this.onMapClick),n.removeEventListener("mousemove",this.eventHandle),n.removeEventListener("click",this.eventHandle),n.removeEventListener("mousedown",this.eventHandle),n.removeEventListener("mouseup",this.eventHandle),n.removeEventListener("dblclick",this.eventHandle),n.removeEventListener("contextmenu",this.eventHandle),n.removeEventListener("mouseover",this.eventHandle),n.removeEventListener("mouseout",this.eventHandle),n.removeEventListener("touchstart",this.eventHandle),n.removeEventListener("touchend",this.eventHandle);}polyfillEvent(n){this.mapsService&&"amap"===this.mapsService.getType()&&!(0,d.isPC)()&&("touchstart"===n.type&&(this.touchStartTime=Date.now()),"touchend"===n.type&&Date.now()-this.touchStartTime<300&&this.emit("click",{target:n,data:this.markerOption.extData,lngLat:this.lngLat}));}addDragHandler(n){return null;}onUp(n){throw Error("Method not implemented.");}}var g=i("00ab32b8");o._(g),i("08eace5d");var v=i("553ee311");class y extends p.default{constructor(n){super(),(0,f.default)(this,"controlOption",void 0),(0,f.default)(this,"container",void 0),(0,f.default)(this,"isShow",void 0),(0,f.default)(this,"sceneContainer",void 0),(0,f.default)(this,"scene",void 0),(0,f.default)(this,"mapsService",void 0),(0,f.default)(this,"renderService",void 0),(0,f.default)(this,"layerService",void 0),(0,f.default)(this,"controlService",void 0),(0,f.default)(this,"configService",void 0),y.controlCount++,this.controlOption=(0,u.default)((0,u.default)({},this.getDefault(n)),n||{});}getOptions(){return this.controlOption;}setOptions(n){let r=this.getDefault(n);Object.entries(n).forEach(([i,a])=>{void 0===a&&(n[i]=r[i]);}),"position"in n&&this.setPosition(n.position),"className"in n&&this.setClassName(n.className),"style"in n&&this.setStyle(n.style),this.controlOption=(0,u.default)((0,u.default)({},this.controlOption),n);}addTo(n){this.mapsService=n.mapService,this.renderService=n.rendererService,this.layerService=n.layerService,this.controlService=n.controlService,this.configService=n.globalConfigService,this.scene=n.sceneService,this.sceneContainer=n,this.isShow=!0,this.container=this.onAdd(),d.DOM.addClass(this.container,"l7-control");let{className:r,style:i}=this.controlOption;return r&&this.setClassName(r),i&&this.setStyle(i),this.insertContainer(),this.emit("add",this),this;}remove(){if(!this.mapsService)return this;d.DOM.remove(this.container),this.onRemove(),this.emit("remove",this);}onAdd(){return d.DOM.create("div");}onRemove(){}show(){let n=this.container;d.DOM.removeClass(n,"l7-control--hide"),this.isShow=!0,this.emit("show",this);}hide(){let n=this.container;d.DOM.addClass(n,"l7-control--hide"),this.isShow=!1,this.emit("hide",this);}getDefault(n){return{position:v.PositionType.TOPRIGHT,name:`${y.controlCount}`};}getContainer(){return this.container;}getIsShow(){return this.isShow;}_refocusOnMap(n){if(this.mapsService&&n&&n.screenX>0&&n.screenY>0){let n=this.mapsService.getContainer();null!==n&&n.focus();}}setPosition(n=v.PositionType.TOPLEFT){let r=this.controlService;return r&&r.removeControl(this),this.controlOption.position=n,r&&r.addControl(this,this.sceneContainer),this;}setClassName(n){let r=this.container,{className:i}=this.controlOption;i&&d.DOM.removeClass(r,i),n&&d.DOM.addClass(r,n);}setStyle(n){let r=this.container;n?r.setAttribute("style",n):r.removeAttribute("style");}insertContainer(){let n=this.controlOption.position,r=this.container;if(n instanceof Element)n.appendChild(r);else{let i=this.controlService.controlCorners[n];["bottomleft","bottomright","righttop","rightbottom"].includes(n)?i.insertBefore(r,i.firstChild):i.appendChild(r);}}checkUpdateOption(n,r){return r.some(r=>r in n);}}(0,f.default)(y,"controlCount",0);class _ extends p.EventEmitter{get buttonRect(){return this.button.getBoundingClientRect();}constructor(n,r){super(),(0,f.default)(this,"popperDOM",void 0),(0,f.default)(this,"contentDOM",void 0),(0,f.default)(this,"button",void 0),(0,f.default)(this,"option",void 0),(0,f.default)(this,"isShow",!1),(0,f.default)(this,"content",void 0),(0,f.default)(this,"timeout",null),(0,f.default)(this,"show",()=>(this.isShow||!this.contentDOM.innerHTML||(this.resetPopperPosition(),d.DOM.removeClass(this.popperDOM,"l7-popper-hide"),this.isShow=!0,this.option.unique&&_.conflictPopperList.forEach(n=>{n!==this&&n.isShow&&n.hide();}),this.emit("show"),window.addEventListener("pointerdown",this.onPopperUnClick)),this)),(0,f.default)(this,"hide",()=>(this.isShow&&(d.DOM.addClass(this.popperDOM,"l7-popper-hide"),this.isShow=!1,this.emit("hide"),window.removeEventListener("pointerdown",this.onPopperUnClick)),this)),(0,f.default)(this,"setHideTimeout",()=>{this.timeout||(this.timeout=window.setTimeout(()=>{this.isShow&&(this.hide(),this.timeout=null);},300));}),(0,f.default)(this,"clearHideTimeout",()=>{this.timeout&&(window.clearTimeout(this.timeout),this.timeout=null);}),(0,f.default)(this,"onBtnClick",()=>{this.isShow?this.hide():this.show();}),(0,f.default)(this,"onPopperUnClick",n=>{d.DOM.findParentElement(n.target,[".l7-button-control",".l7-popper-content"])||this.hide();}),(0,f.default)(this,"onBtnMouseLeave",()=>{this.setHideTimeout();}),(0,f.default)(this,"onBtnMouseMove",()=>{this.clearHideTimeout(),this.isShow||this.show();}),this.button=n,this.option=r,this.init(),r.unique&&_.conflictPopperList.push(this);}getPopperDOM(){return this.popperDOM;}getIsShow(){return this.isShow;}getContent(){return this.content;}setContent(n){"string"==typeof n?this.contentDOM.innerHTML=n:n instanceof HTMLElement&&(d.DOM.clearChildren(this.contentDOM),this.contentDOM.appendChild(n)),this.content=n;}init(){let{trigger:n}=this.option;this.popperDOM=this.createPopper(),"click"===n?this.button.addEventListener("click",this.onBtnClick):(this.button.addEventListener("mousemove",this.onBtnMouseMove),this.button.addEventListener("mouseleave",this.onBtnMouseLeave),this.popperDOM.addEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.addEventListener("mouseleave",this.onBtnMouseLeave));}destroy(){this.button.removeEventListener("click",this.onBtnClick),this.button.removeEventListener("mousemove",this.onBtnMouseMove),this.button.removeEventListener("mousemove",this.onBtnMouseLeave),this.popperDOM.removeEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.removeEventListener("mouseleave",this.onBtnMouseLeave),d.DOM.remove(this.popperDOM);}resetPopperPosition(){let n={},{container:r,offset:i=[0,0],placement:a}=this.option,[o,s]=i,l=this.button.getBoundingClientRect(),u=r.getBoundingClientRect(),{left:c,right:f,top:h,bottom:p}=d.DOM.getDiffRect(l,u),m=!1,g=!1;/^(left|right)/.test(a)?(a.includes("left")?n.right=`${l.width+f}px`:a.includes("right")&&(n.left=`${l.width+c}px`),a.includes("start")?n.top=`${h}px`:a.includes("end")?n.bottom=`${p}px`:(n.top=`${h+l.height/2}px`,g=!0,n.transform=`translate(${o}px, calc(${s}px - 50%))`)):/^(top|bottom)/.test(a)&&(a.includes("top")?n.bottom=`${l.height+p}px`:a.includes("bottom")&&(n.top=`${l.height+h}px`),a.includes("start")?n.left=`${c}px`:a.includes("end")?n.right=`${f}px`:(n.left=`${c+l.width/2}px`,m=!0,n.transform=`translate(calc(${o}px - 50%), ${s}px)`)),n.transform=`translate(calc(${o}px - ${m?"50%":"0%"}), calc(${s}px - ${g?"50%":"0%"})`;let v=a.split("-");v.length&&d.DOM.addClass(this.popperDOM,v.map(n=>`l7-popper-${n}`).join(" ")),d.DOM.addStyle(this.popperDOM,d.DOM.css2Style(n));}createPopper(){let{container:n,className:r="",content:i}=this.option,a=d.DOM.create("div",`l7-popper l7-popper-hide ${r}`),o=d.DOM.create("div","l7-popper-content"),s=d.DOM.create("div","l7-popper-arrow");return a.appendChild(o),a.appendChild(s),n.appendChild(a),this.popperDOM=a,this.contentDOM=o,i&&this.setContent(i),a;}}(0,f.default)(_,"conflictPopperList",[]);var b=((a=b||{}).ActiveOptionClassName="l7-select-control-item-active",a.OptionValueAttrKey="data-option-value",a.OptionIndexAttrKey="data-option-index",a),x=i("9b84be4b");o._(x);let E=n=>{let r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.classList.add("l7-iconfont"),r.setAttribute("aria-hidden","true");let i=document.createElementNS("http://www.w3.org/2000/svg","use");return i.setAttributeNS("http://www.w3.org/1999/xlink","href",`#${n}`),r.appendChild(i),r;},w=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],S=(()=>{if("undefined"==typeof document)return!1;let n=w[0],r={};for(let i of w)if((null==i?void 0:i[1])in document){for(let[a,o]of i.entries())r[n[a]]=o;return r;}return!1;})(),T={change:S.fullscreenchange,error:S.fullscreenerror},A={request:(n=document.documentElement,r)=>new Promise((i,a)=>{let o=()=>{A.off("change",o),i();};A.on("change",o);let s=n[S.requestFullscreen](r);s instanceof Promise&&s.then(o).catch(a);}),exit:()=>new Promise((n,r)=>{if(!A.isFullscreen){n();return;}let i=()=>{A.off("change",i),n();};A.on("change",i);let a=document[S.exitFullscreen]();a instanceof Promise&&a.then(i).catch(r);}),toggle:(n,r)=>A.isFullscreen?A.exit():A.request(n,r),onchange(n){A.on("change",n);},onerror(n){A.on("error",n);},on(n,r){let i=T[n];i&&document.addEventListener(i,r,!1);},off(n,r){let i=T[n];i&&document.removeEventListener(i,r,!1);},raw:S};Object.defineProperties(A,{isFullscreen:{get:()=>!!document[S.fullscreenElement]},element:{enumerable:!0,get:()=>{var n;return null!==(n=document[S.fullscreenElement])&&void 0!==n?n:void 0;}},isEnabled:{enumerable:!0,get:()=>!!document[S.fullscreenEnabled]}}),S||(A={isEnabled:!1});class C extends y{getDefault(){return{position:v.PositionType.BOTTOMLEFT,name:"logo",href:"https://l7.antv.antgroup.com/",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*GRb1TKp4HcMAAAAAAAAAAAAAARQnAQ"};}onAdd(){let n=d.DOM.create("div","l7-control-logo");return this.setLogoContent(n),n;}onRemove(){return null;}setOptions(n){super.setOptions(n),this.checkUpdateOption(n,["img","href"])&&(d.DOM.clearChildren(this.container),this.setLogoContent(this.container));}setLogoContent(n){let{href:r,img:i}=this.controlOption,a=d.DOM.create("img");if(a.setAttribute("src",i),a.setAttribute("aria-label","AntV logo"),d.DOM.setUnDraggable(a),r){let i=d.DOM.create("a","l7-control-logo-link");i.target="_blank",i.href=r,i.rel="noopener nofollow",i.setAttribute("rel","noopener nofollow"),i.appendChild(a),n.appendChild(i);}else n.appendChild(a);}}i("b55e4682");class O extends p.EventEmitter{get lngLat(){var n;return null!==(n=this.popupOption.lngLat)&&void 0!==n?n:{lng:0,lat:0};}set lngLat(n){this.popupOption.lngLat=n;}constructor(n){super(),(0,f.default)(this,"popupOption",void 0),(0,f.default)(this,"mapsService",void 0),(0,f.default)(this,"sceneService",void 0),(0,f.default)(this,"layerService",void 0),(0,f.default)(this,"scene",void 0),(0,f.default)(this,"closeButton",void 0),(0,f.default)(this,"container",void 0),(0,f.default)(this,"content",void 0),(0,f.default)(this,"contentTitle",void 0),(0,f.default)(this,"contentPanel",void 0),(0,f.default)(this,"tip",void 0),(0,f.default)(this,"isShow",!0),(0,f.default)(this,"onMouseMove",n=>{var r;let i=this.mapsService.getMapContainer(),{left:a=0,top:o=0}=null!==(r=null==i?void 0:i.getBoundingClientRect())&&void 0!==r?r:{};this.setPopupPosition(n.clientX-a,n.clientY-o);}),(0,f.default)(this,"updateLngLatPosition",()=>{if(!this.mapsService||this.popupOption.followCursor)return;let{lng:n,lat:r}=this.lngLat,{x:i,y:a}=this.mapsService.lngLatToContainer([n,r]);this.setPopupPosition(i,a);}),(0,f.default)(this,"updateLngLatPositionWhenZoom",n=>{if(!this.mapsService||this.popupOption.followCursor)return;let r=n.map,i=r.getSize();i.x=i.x/2,i.y=i.y/2;let a=n.center,o=n.zoom,s=r.DE(this.lngLat,o,a);s.x=Math.round(s.x),s.y=Math.round(s.y),this.setPopupPosition(s.x,s.y,!0);}),(0,f.default)(this,"onKeyDown",n=>{27===n.keyCode&&this.remove();}),(0,f.default)(this,"onCloseButtonClick",n=>{n.stopPropagation&&n.stopPropagation(),this.hide();}),(0,f.default)(this,"updatePosition",(n,r=!0)=>{let i=!!this.lngLat,{className:a,style:o,maxWidth:s,anchor:l,stopPropagation:u}=this.popupOption;if(!this.mapsService||!i||!this.content)return;let c=this.mapsService.getMarkerContainer();if(!this.container&&c&&(this.container=d.DOM.create("div",`l7-popup ${null!=a?a:""} ${this.isShow?"":"l7-popup-hide"}`,c),o&&this.container.setAttribute("style",o),this.tip=d.DOM.create("div","l7-popup-tip",this.container),this.container.appendChild(this.content),u&&["mousemove","mousedown","mouseup","click","dblclick"].forEach(n=>{this.container.addEventListener(n,n=>{n.stopPropagation();});}),this.container.style.whiteSpace="nowrap"),r?this.updateLngLatPositionWhenZoom(n):this.updateLngLatPosition(),d.DOM.setTransform(this.container,`${d.anchorTranslate[l]}`),(0,d.applyAnchorClass)(this.container,l,"popup"),s){let{width:n}=this.container.getBoundingClientRect();n>parseFloat(s)&&(this.container.style.width=s);}else this.container.style.removeProperty("width");}),(0,f.default)(this,"updateWhenZoom",n=>{this.updatePosition(n,!0);}),(0,f.default)(this,"update",()=>{this.updatePosition(null,!1);}),this.popupOption=(0,u.default)((0,u.default)({},this.getDefault(null!=n?n:{})),n);let{lngLat:r}=this.popupOption;r&&(this.lngLat=r);}getIsShow(){return this.isShow;}addTo(n){this.mapsService=n.mapService,this.sceneService=n.sceneService,this.layerService=n.layerService,this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.scene=n,this.update(),this.updateCloseOnClick(),this.updateCloseOnEsc(),this.updateFollowCursor();let{html:r,text:i,title:a}=this.popupOption;return r?this.setHTML(r):i&&this.setText(i),a&&this.setTitle(a),this.emit("open"),this;}remove(){if(this!==null&&void 0!==this&&this.isOpen())return this.content&&d.DOM.remove(this.content),this.container&&(d.DOM.remove(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.updateCloseOnClick(!0),this.updateCloseOnEsc(!0),this.updateFollowCursor(!0),delete this.mapsService),this.emit("close"),this;}getOptions(){return this.popupOption;}setOptions(n){var r,i;this.show();let{className:a}=this.popupOption;return this.popupOption=(0,u.default)((0,u.default)({},this.popupOption),n),this.checkUpdateOption(n,["html","text","title","closeButton","closeButtonOffsets","maxWidth","anchor","stopPropagation","lngLat","offsets"])&&(this.container&&(d.DOM.remove(this.container),this.container=void 0),this.popupOption.html?this.setHTML(this.popupOption.html):this.popupOption.text&&this.setText(this.popupOption.text),this.popupOption.title&&this.setTitle(this.popupOption.title)),this.checkUpdateOption(n,["closeOnEsc"])&&this.updateCloseOnEsc(),this.checkUpdateOption(n,["closeOnClick"])&&this.updateCloseOnClick(),this.checkUpdateOption(n,["followCursor"])&&this.updateFollowCursor(),this.checkUpdateOption(n,["html"])&&n.html?this.setHTML(n.html):this.checkUpdateOption(n,["text"])&&n.text&&this.setText(n.text),this.checkUpdateOption(n,["className"])&&(a&&this.container.classList.remove(null!=a?a:""),this.container.classList.add(null!==(r=n.className)&&void 0!==r?r:"")),this.checkUpdateOption(n,["style"])&&d.DOM.addStyle(this.container,null!==(i=n.style)&&void 0!==i?i:""),this.checkUpdateOption(n,["lngLat"])&&n.lngLat&&this.setLnglat(n.lngLat),this;}open(){return this.addTo(this.scene),this;}close(){return this.remove(),this;}show(){if(!this.isShow)return this.container&&d.DOM.removeClass(this.container,"l7-popup-hide"),this.isShow=!0,this.emit("show"),this;}hide(){if(this.isShow)return this.container&&d.DOM.addClass(this.container,"l7-popup-hide"),this.isShow=!1,this.emit("hide"),this;}setHTML(n){return this.popupOption.html=n,this.setDOMContent(n);}setText(n){return this.popupOption.text=n,this.setDOMContent(window.document.createTextNode(n));}setTitle(n){this.show(),this.popupOption.title=n,n?(this.contentTitle||(this.contentTitle=d.DOM.create("div","l7-popup-content__title"),this.content.firstChild?this.content.insertBefore(this.contentTitle,this.content.firstChild):this.content.append(this.contentTitle)),d.DOM.clearChildren(this.contentTitle),d.DOM.appendElementType(this.contentTitle,n)):this.contentTitle&&(d.DOM.remove(this.contentTitle),this.contentTitle=void 0);}panToPopup(){let{lng:n,lat:r}=this.lngLat;return this.popupOption.autoPan&&this.mapsService.panTo([n,r]),this;}setLngLat(n){return this.setLnglat(n);}setLnglat(n){return this.show(),this.lngLat=n,Array.isArray(n)&&(this.lngLat={lng:n[0],lat:n[1]}),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.update(),this.popupOption.autoPan&&setTimeout(()=>{this.panToPopup();},0),this;}getLnglat(){return this.lngLat;}setMaxWidth(n){return this.popupOption.maxWidth=n,this.update(),this;}isOpen(){return!!this.mapsService;}getDefault(n){return{closeButton:!0,closeOnClick:!1,maxWidth:"240px",offsets:[0,0],anchor:d.anchorType.BOTTOM,stopPropagation:!0,autoPan:!1,autoClose:!0,closeOnEsc:!1,followCursor:!1};}setDOMContent(n){return this.show(),this.createContent(),d.DOM.appendElementType(this.contentPanel,n),this.update(),this;}updateCloseOnClick(n){let r=this.mapsService;r&&(null==r||r.off("click",this.onCloseButtonClick),this.popupOption.closeOnClick&&!n&&requestAnimationFrame(()=>{null==r||r.on("click",this.onCloseButtonClick);}));}updateCloseOnEsc(n){window.removeEventListener("keydown",this.onKeyDown),this.popupOption.closeOnEsc&&!n&&window.addEventListener("keydown",this.onKeyDown);}updateFollowCursor(n){var r;let i=null===(r=this.mapsService)||void 0===r?void 0:r.getContainer();i&&(null==i||i.removeEventListener("mousemove",this.onMouseMove),this.popupOption.followCursor&&!n&&(null==i||i.addEventListener("mousemove",this.onMouseMove)));}createContent(){if(this.content&&d.DOM.remove(this.content),this.contentTitle=void 0,this.content=d.DOM.create("div","l7-popup-content",this.container),this.setTitle(this.popupOption.title),this.popupOption.closeButton){let n=E("l7-icon-guanbi");d.DOM.addClass(n,"l7-popup-close-button"),this.content.appendChild(n),this.popupOption.closeButtonOffsets&&(n.style.right=this.popupOption.closeButtonOffsets[0]+"px",n.style.top=this.popupOption.closeButtonOffsets[1]+"px"),n.setAttribute("aria-label","Close popup"),n.addEventListener("click",()=>{this.hide();}),n.addEventListener("pointerup",n=>{n.stopPropagation();}),n.addEventListener("pointerdown",n=>{n.stopPropagation();}),this.closeButton=n;}else this.closeButton=void 0;this.contentPanel=d.DOM.create("div","l7-popup-content__panel",this.content);}setPopupPosition(n,r,i=!1){if(this.container){let{offsets:a}=this.popupOption;this.container.style.left=n+a[0]+"px",this.container.style.top=r-a[1]+"px",i?this.container.style.transition="left 0.25s cubic-bezier(0,0,0.25,1), top 0.25s cubic-bezier(0,0,0.25,1)":this.container.style.transition="";}}checkUpdateOption(n,r){return r.some(r=>r in n);}}!function(n,r){var i="undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM,a="undefined"!=typeof wx&&null!==wx&&(void 0!==wx.request||void 0!==wx.miniProgram);if(!i&&!a&&(r||(r=document),r)){var o=r.head||r.getElementsByTagName("head")[0];if(!o){o=r.createElement("head");var s=r.body||r.getElementsByTagName("body")[0];s?s.parentNode.insertBefore(o,s):r.documentElement.appendChild(o);}var l=r.createElement("style");l.type="text/css",l.styleSheet?l.styleSheet.cssText=n:l.appendChild(r.createTextNode(n)),o.appendChild(l);}}(`.l7-marker-container {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
.l7-marker {
  position: absolute !important;
  top: 0;
  left: 0;
  z-index: 5;
  cursor: pointer;
}
.l7-marker-cluster {
  width: 40px;
  height: 40px;
  background-color: rgba(181, 226, 140, 0.6);
  background-clip: padding-box;
  border-radius: 20px;
}
.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-top: 5px;
  margin-left: 5px;
  font:
    12px 'Helvetica Neue',
    Arial,
    Helvetica,
    sans-serif;
  text-align: center;
  background-color: rgba(110, 204, 57, 0.6);
  border-radius: 15px;
}
.l7-marker-cluster span {
  line-height: 30px;
}
.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  box-shadow: none;
}
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  background-clip: padding-box;
  border: 2px solid rgba(0, 0, 0, 0.2);
}
.mapboxgl-ctrl-logo,
.amap-logo {
  display: none !important;
}
.l7-select-box {
  border: 3px dashed gray;
  border-radius: 2px;
  position: absolute;
  z-index: 999;
  box-sizing: border-box;
}
.l7-control-container {
  font:
    12px/1.5 'Helvetica Neue',
    Arial,
    Helvetica,
    sans-serif;
}
.l7-control-container .l7-control {
  position: relative;
  z-index: 999;
  float: left;
  clear: both;
  color: #595959;
  font-size: 12px;
  pointer-events: visiblePainted;
  /* IE 9-10 doesn't have auto */
  pointer-events: auto;
}
.l7-control-container .l7-control.l7-control--hide {
  display: none;
}
.l7-control-container .l7-top {
  top: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-top .l7-control:not(.l7-control--hide) {
  margin-top: 8px;
}
.l7-control-container .l7-right {
  right: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-right .l7-control:not(.l7-control--hide) {
  margin-right: 8px;
}
.l7-control-container .l7-bottom {
  bottom: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-bottom .l7-control:not(.l7-control--hide) {
  margin-bottom: 8px;
}
.l7-control-container .l7-left {
  left: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-left .l7-control:not(.l7-control--hide) {
  margin-left: 8px;
}
.l7-control-container .l7-center {
  position: absolute;
  display: flex;
  justify-content: center;
}
.l7-control-container .l7-center.l7-top,
.l7-control-container .l7-center.l7-bottom {
  width: 100%;
}
.l7-control-container .l7-center.l7-left,
.l7-control-container .l7-center.l7-right {
  height: 100%;
}
.l7-control-container .l7-center .l7-control {
  margin-right: 8px;
  margin-bottom: 8px;
}
.l7-control-container .l7-row {
  flex-direction: row;
}
.l7-control-container .l7-row.l7-top {
  align-items: flex-start;
}
.l7-control-container .l7-row.l7-bottom {
  align-items: flex-end;
}
.l7-control-container .l7-column {
  flex-direction: column;
}
.l7-control-container .l7-column.l7-left {
  align-items: flex-start;
}
.l7-control-container .l7-column.l7-right {
  align-items: flex-end;
}
.l7-button-control {
  min-width: 28px;
  height: 28px;
  background-color: #fff;
  border-width: 0;
  border-radius: 2px;
  outline: 0;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0 6px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  line-height: 16px;
}
.l7-button-control .l7-iconfont {
  fill: #595959;
  color: #595959;
  width: 16px;
  height: 16px;
}
.l7-button-control.l7-button-control--row {
  padding: 0 16px 0 13px;
}
.l7-button-control.l7-button-control--row * + .l7-button-control__text {
  margin-left: 8px;
}
.l7-button-control.l7-button-control--column {
  height: 44px;
  flex-direction: column;
}
.l7-button-control.l7-button-control--column .l7-iconfont {
  margin-top: 3px;
}
.l7-button-control.l7-button-control--column .l7-button-control__text {
  margin-top: 3px;
  font-size: 10px;
  -webkit-transform: scale(0.83333);
          transform: scale(0.83333);
}
.l7-button-control:not(:disabled):hover {
  background-color: #f3f3f3;
}
.l7-button-control:not(:disabled):active {
  background-color: #f3f3f3;
}
.l7-button-control:disabled {
  background-color: #fafafa;
  color: #bdbdbd;
  cursor: not-allowed;
}
.l7-button-control:disabled .l7-iconfont {
  fill: #bdbdbd;
  color: #bdbdbd;
}
.l7-button-control:disabled:hover {
  background-color: #fafafa;
}
.l7-button-control:disabled:active {
  background-color: #fafafa;
}
.l7-popper {
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 5;
  color: #595959;
}
.l7-popper.l7-popper-hide {
  display: none;
}
.l7-popper .l7-popper-content {
  min-height: 28px;
  background: #fff;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper .l7-popper-arrow {
  width: 0;
  height: 0;
  border-width: 4px;
  border-style: solid;
  border-top-color: transparent;
  border-bottom-color: transparent;
  border-left-color: transparent;
  border-right-color: transparent;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper.l7-popper-left {
  flex-direction: row;
}
.l7-popper.l7-popper-left .l7-popper-arrow {
  border-left-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-right {
  flex-direction: row-reverse;
}
.l7-popper.l7-popper-right .l7-popper-arrow {
  border-right-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-top {
  flex-direction: column;
}
.l7-popper.l7-popper-top .l7-popper-arrow {
  border-top-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-bottom {
  flex-direction: column-reverse;
}
.l7-popper.l7-popper-bottom .l7-popper-arrow {
  border-bottom-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-start {
  align-items: flex-start;
}
.l7-popper.l7-popper-end {
  align-items: flex-end;
}
.l7-select-control--normal {
  padding: 4px 0;
}
.l7-select-control--normal .l7-select-control-item {
  display: flex;
  align-items: center;
  height: 24px;
  padding: 0 16px;
  font-size: 12px;
  line-height: 24px;
}
.l7-select-control--normal .l7-select-control-item > * + * {
  margin-left: 6px;
}
.l7-select-control--normal .l7-select-control-item input[type='checkbox'] {
  width: 14px;
  height: 14px;
}
.l7-select-control--normal .l7-select-control-item:hover {
  background-color: #f3f3f3;
}
.l7-select-control--image {
  display: flex;
  flex-wrap: wrap;
  align-items: flex-start;
  box-sizing: content-box;
  max-width: 460px;
  max-height: 400px;
  margin: 12px 0 0 12px;
  overflow-x: hidden;
  overflow-y: auto;
}
.l7-select-control--image .l7-select-control-item {
  position: relative;
  display: flex;
  flex: 0 0 calc((100% - (12px + 9px) * 2) / 3);
  flex-direction: column;
  justify-content: center;
  box-sizing: content-box;
  margin-right: 12px;
  margin-bottom: 12px;
  overflow: hidden;
  font-size: 12px;
  border: 1px solid #fff;
  border-radius: 2px;
}
.l7-select-control--image .l7-select-control-item img {
  width: 100%;
  height: 80px;
}
.l7-select-control--image .l7-select-control-item input[type='checkbox'] {
  position: absolute;
  top: 0;
  right: 0;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row {
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 26px;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row > * + * {
  margin-left: 8px;
}
.l7-select-control--image .l7-select-control-item.l7-select-control-item-active {
  border-color: #0370fe;
}
.l7-select-control-item {
  cursor: pointer;
}
.l7-select-control-item input[type='checkbox'] {
  margin: 0;
  cursor: pointer;
}
.l7-select-control--multiple .l7-select-control-item:hover {
  background-color: transparent;
}
.l7-control-logo {
  width: 89px;
  height: 16px;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}
.l7-control-logo img {
  height: 100%;
  width: 100%;
}
.l7-control-logo .l7-control-logo-link {
  display: block;
  cursor: pointer;
}
.l7-control-logo .l7-control-logo-link img {
  cursor: pointer;
}
.l7-control-mouse-location {
  background-color: #fff;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  padding: 2px 4px;
  min-width: 130px;
}
.l7-control-zoom {
  overflow: hidden;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-control-zoom .l7-button-control {
  font-size: 16px;
  border-bottom: 1px solid #f0f0f0;
  border-radius: 0;
  box-shadow: 0 0 0;
}
.l7-control-zoom .l7-button-control .l7-iconfont {
  width: 14px;
  height: 14px;
}
.l7-control-zoom .l7-button-control:last-child {
  border-bottom: 0;
}
.l7-control-zoom .l7-control-zoom__number {
  color: #595959;
  padding: 0;
}
.l7-control-zoom .l7-control-zoom__number:hover {
  background-color: #fff;
}
.l7-control-scale {
  display: flex;
  flex-direction: column;
}
.l7-control-scale .l7-control-scale-line {
  box-sizing: border-box;
  padding: 2px 5px 1px;
  overflow: hidden;
  color: #595959;
  font-size: 10px;
  line-height: 1.1;
  white-space: nowrap;
  background: #fff;
  border: 2px solid #000;
  border-top: 0;
  transition: width 0.1s;
}
.l7-control-scale .l7-control-scale-line + .l7-control-scale .l7-control-scale-line {
  margin-top: -2px;
  border-top: 2px solid #777;
  border-bottom: none;
}
.l7-right .l7-control-scale {
  display: flex;
  align-items: flex-end;
}
.l7-right .l7-control-scale .l7-control-scale-line {
  text-align: right;
}
.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 5;
  display: flex;
  will-change: transform;
  pointer-events: none;
}
.l7-popup.l7-popup-hide {
  display: none;
}
.l7-popup .l7-popup-content {
  position: relative;
  padding: 16px;
  font-size: 14px;
  background: #fff;
  border-radius: 3px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.l7-popup .l7-popup-content .l7-popup-content__title {
  margin-bottom: 8px;
  font-weight: bold;
}
.l7-popup .l7-popup-content .l7-popup-close-button,
.l7-popup .l7-popup-content .l7-popup-content__title,
.l7-popup .l7-popup-content .l7-popup-content__panel {
  white-space: normal;
  -webkit-user-select: text;
     -moz-user-select: text;
      -ms-user-select: text;
          user-select: text;
  pointer-events: initial;
}
.l7-popup .l7-popup-content .l7-popup-close-button {
  position: absolute;
  top: 0;
  right: 0;
  width: 18px;
  height: 18px;
  padding: 0;
  font-size: 14px;
  line-height: 18px;
  text-align: center;
  background-color: transparent;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
}
.l7-popup .l7-popup-tip {
  position: relative;
  z-index: 1;
  width: 0;
  height: 0;
  border: 10px solid transparent;
}
.l7-popup.l7-popup-anchor-bottom,
.l7-popup.l7-popup-anchor-bottom-left,
.l7-popup.l7-popup-anchor-bottom-right {
  flex-direction: column-reverse;
}
.l7-popup.l7-popup-anchor-bottom .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-right .l7-popup-tip {
  bottom: 1px;
}
.l7-popup.l7-popup-anchor-top,
.l7-popup.l7-popup-anchor-top-left,
.l7-popup.l7-popup-anchor-top-right {
  flex-direction: column;
}
.l7-popup.l7-popup-anchor-top .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-right .l7-popup-tip {
  top: 1px;
}
.l7-popup.l7-popup-anchor-left {
  flex-direction: row;
}
.l7-popup.l7-popup-anchor-right {
  flex-direction: row-reverse;
}
.l7-popup-anchor-top .l7-popup-tip {
  position: relative;
  align-self: center;
  border-top: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-tip {
  align-self: flex-start;
  border-top: none;
  border-bottom-color: #fff;
  border-left: none;
}
.l7-popup-anchor-top-right .l7-popup-tip {
  align-self: flex-end;
  border-top: none;
  border-right: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-bottom .l7-popup-tip {
  align-self: center;
  border-top-color: #fff;
  border-bottom: none;
}
.l7-popup-anchor-bottom-left .l7-popup-tip {
  align-self: flex-start;
  border-top-color: #fff;
  border-bottom: none;
  border-left: none;
}
.l7-popup-anchor-bottom-right .l7-popup-tip {
  align-self: flex-end;
  border-top-color: #fff;
  border-right: none;
  border-bottom: none;
}
.l7-popup-anchor-left .l7-popup-tip {
  align-self: center;
  border-right-color: #fff;
  border-left: none;
}
.l7-popup-anchor-right .l7-popup-tip {
  right: 1px;
  align-self: center;
  border-right: none;
  border-left-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-content {
  border-top-left-radius: 0;
}
.l7-popup-anchor-top-right .l7-popup-content {
  border-top-right-radius: 0;
}
.l7-popup-anchor-bottom-left .l7-popup-content {
  border-bottom-left-radius: 0;
}
.l7-popup-anchor-bottom-right .l7-popup-content {
  border-bottom-right-radius: 0;
}
.l7-popup-track-pointer {
  display: none;
}
.l7-popup-track-pointer * {
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  pointer-events: none;
}
.l7-map:hover .l7-popup-track-pointer {
  display: flex;
}
.l7-map:active .l7-popup-track-pointer {
  display: none;
}
.l7-layer-popup__row {
  font-size: 12px;
}
.l7-layer-popup__row + .l7-layer-popup__row {
  margin-top: 4px;
}
.l7-control-swipe {
  position: absolute;
  top: 50%;
  left: 50%;
  z-index: 6;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  touch-action: none;
}
.l7-control-swipe_hide {
  display: none;
}
.l7-control-swipe:before {
  position: absolute;
  top: -5000px;
  bottom: -5000px;
  left: 50%;
  z-index: -1;
  width: 4px;
  background: #fff;
  -webkit-transform: translate(-2px, 0);
          transform: translate(-2px, 0);
  content: '';
}
.l7-control-swipe.horizontal:before {
  top: 50%;
  right: -5000px;
  bottom: auto;
  left: -5000px;
  width: auto;
  height: 4px;
}
.l7-control-swipe__button {
  display: block;
  width: 28px;
  height: 28px;
  margin: 0;
  padding: 0;
  color: #595959;
  font-weight: bold;
  font-size: inherit;
  text-align: center;
  text-decoration: none;
  background-color: #fff;
  border: none;
  border-radius: 2px;
  outline: none;
}
.l7-control-swipe,
.l7-control-swipe__button {
  cursor: ew-resize;
}
.l7-control-swipe.horizontal,
.l7-control-swipe.horizontal button {
  cursor: ns-resize;
}
.l7-control-swipe:after,
.l7-control-swipe__button:before,
.l7-control-swipe__button:after {
  position: absolute;
  top: 25%;
  bottom: 25%;
  left: 50%;
  width: 2px;
  background: currentColor;
  -webkit-transform: translate(-1px, 0);
          transform: translate(-1px, 0);
  content: '';
}
.l7-control-swipe__button:after {
  -webkit-transform: translateX(4px);
          transform: translateX(4px);
}
.l7-control-swipe__button:before {
  -webkit-transform: translateX(-6px);
          transform: translateX(-6px);
}
`);},df272f3d:function(n,r,i){"use strict";var a=i("89a0cb41").default,o=i("f5a08f97").default;Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=a(i("66a0ba1a")),l=a(i("3bbc6f6c")),u=o(i("609f48be")),c=i("2247dc85"),f=["icon","className","onClick","style","primaryColor","secondaryColor"],d={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1},h=function(n){var r=n.icon,i=n.className,a=n.onClick,o=n.style,h=n.primaryColor,p=n.secondaryColor,m=(0,s.default)(n,f),g=u.useRef(),v=d;if(h&&(v={primaryColor:h,secondaryColor:p||(0,c.getSecondaryColor)(h)}),(0,c.useInsertStyles)(g),(0,c.warning)((0,c.isIconDefinition)(r),"icon should be icon definiton, but got ".concat(r)),!(0,c.isIconDefinition)(r))return null;var y=r;return y&&"function"==typeof y.icon&&(y=(0,l.default)((0,l.default)({},y),{},{icon:y.icon(v.primaryColor,v.secondaryColor)})),(0,c.generate)(y.icon,"svg-".concat(y.name),(0,l.default)((0,l.default)({className:i,onClick:a,style:o,"data-icon":y.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},m),{},{ref:g}));};h.displayName="IconReact",h.getTwoToneColors=function(){return(0,l.default)({},d);},h.setTwoToneColors=function(n){var r=n.primaryColor,i=n.secondaryColor;d.primaryColor=r,d.secondaryColor=i||(0,c.getSecondaryColor)(r),d.calculated=!!i;},r.default=h;},df2e18b5:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"traverseElements",{enumerable:!0,get:function(){return function n(r,i){if(i(r))return!0;if("g"===r.tagName){let{childNodes:a=[]}=r;for(let r of a)if(n(r,i))return!0;}return!1;};}});},df50a282:function(n,r,i){var a=i("d03c096f").default;n.exports=function(n,r){if("object"!=a(n)||!n)return n;var i=n[Symbol.toPrimitive];if(void 0!==i){var o=i.call(n,r||"default");if("object"!=a(o))return o;throw TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(n);},n.exports.__esModule=!0,n.exports.default=n.exports;},df78806b:function(n,r,i){"use strict";var a,o,s,l;i.d(r,"__esModule",{value:!0}),i.e(r,{BlendType:function(){return u;},ILayerStage:function(){return d;},MaskOperation:function(){return f;},StencilType:function(){return c;}});let u=((a={}).normal="normal",a.additive="additive",a.subtractive="subtractive",a.min="min",a.max="max",a.none="none",a),c=((o={}).MULTIPLE="MULTIPLE",o.SINGLE="SINGLE",o),f=((s={}).AND="and",s.OR="or",s),d=((l={}).INIT="init",l.UPDATE="update",l);},df809dd2:function(n,r,i){"use strict";function a(n,r){return{type:n.type,field:"value",items:n.positions.map((i,a)=>({[r]:a>=n.colors.length?null:n.colors[a],value:i}))};}i.d(r,"__esModule",{value:!0}),i.d(r,"rampColor2legend",{enumerable:!0,get:function(){return a;}});},dfb73c9a:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return _;}});var a=i("777fffbe"),o=a._(i("e4870cf0")),s=a._(i("613f75ca")),l=i("1e1294ad"),u=i("dc508de3"),c=i("4701d2de"),f=a._(i("f34e933b")),d=a._(i("dfe6c97a")),h=a._(i("dd8ccb36")),p=i("609f48be"),m=i("11bba482"),g=i("dac8af92"),v=["name","originDependencies","children","ignoreFormListField"],y=function(n){var r=n.name,i=n.originDependencies,a=void 0===i?r:i,y=n.children,_=n.ignoreFormListField,b=(0,s.default)(n,v),x=(0,p.useContext)(c.ProFormContext),E=(0,p.useContext)(m.FormListContext),w=(0,p.useMemo)(function(){return r.map(function(n){var r,i=[n];return!_&&void 0!==E.name&&null!==(r=E.listName)&&void 0!==r&&r.length&&i.unshift(E.listName),i.flat(1);});},[E.listName,E.name,_,null==r?void 0:r.toString()]);return(0,g.jsx)(f.default.Item,(0,o.default)((0,o.default)({},b),{},{noStyle:!0,shouldUpdate:function(n,r,i){if("boolean"==typeof b.shouldUpdate)return b.shouldUpdate;if("function"==typeof b.shouldUpdate){var a;return null===(a=b.shouldUpdate)||void 0===a?void 0:a.call(b,n,r,i);}return w.some(function(i){return!(0,l.isDeepEqualReact)((0,d.default)(n,i),(0,d.default)(r,i));});},children:function(n){for(var i={},s=0;s<r.length;s++){var l,c,f=w[s],p=[a[s]].flat(1),m=null===(l=x.getFieldFormatValueObject)||void 0===l?void 0:l.call(x,f);m&&Object.keys(m).length?(i=(0,u.merge)({},i,m),(0,d.default)(m,f)&&(i=(0,h.default)(i,p,(0,d.default)(m,f)))):void 0!==(m=null===(c=n.getFieldValue)||void 0===c?void 0:c.call(n,f))&&(i=(0,h.default)(i,p,m));}return null==y?void 0:y(i,(0,o.default)((0,o.default)({},n),x));}}));};y.displayName="ProFormDependency";var _=y;},e027887d:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return p;},offsetPanelDate:function(){return d;}});var a=i("777fffbe"),o=i("852bbaa9"),s=a._(i("ee64167d")),l=i("e313b0e4"),u=a._(i("4b97d3c2")),c=o._(i("609f48be")),f=i("78b08bd4");function d(n,r,i,a){switch(r){case"date":case"week":return n.addMonth(i,a);case"month":case"quarter":return n.addYear(i,a);case"year":return n.addYear(i,10*a);case"decade":return n.addYear(i,100*a);default:return i;}}var h=[];function p(n,r,i,a,o,p,m,g){var v=arguments.length>8&&void 0!==arguments[8]?arguments[8]:h,y=arguments.length>9&&void 0!==arguments[9]?arguments[9]:h,_=arguments.length>10&&void 0!==arguments[10]?arguments[10]:h,b=arguments.length>11?arguments[11]:void 0,x=arguments.length>12?arguments[12]:void 0,E=arguments.length>13?arguments[13]:void 0,w="time"===m,S=p||0,T=function(r){var a=n.getNow();return w&&(a=(0,f.fillTime)(n,a)),v[r]||i[r]||a;},A=(0,s.default)(y,2),C=A[0],O=A[1],M=(0,l.useMergedState)(function(){return T(0);},{value:C}),R=(0,s.default)(M,2),P=R[0],k=R[1],I=(0,l.useMergedState)(function(){return T(1);},{value:O}),L=(0,s.default)(I,2),N=L[0],D=L[1],F=c.useMemo(function(){var r=[P,N][S];return w?r:(0,f.fillTime)(n,r,_[S]);},[w,P,N,S,n,_]),B=function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"panel";(0,[k,D][S])(i);var s=[P,N];s[S]=i,!b||(0,f.isSame)(n,r,P,s[0],m)&&(0,f.isSame)(n,r,N,s[1],m)||b(s,{source:o,range:1===S?"end":"start",mode:a});},j=function(i,a){if(g){var o={date:"month",week:"month",month:"year",quarter:"year"}[m];if(o&&!(0,f.isSame)(n,r,i,a,o)||"year"===m&&i&&Math.floor(n.getYear(i)/10)!==Math.floor(n.getYear(a)/10))return d(n,m,a,-1);}return a;},z=c.useRef(null);return(0,u.default)(function(){if(o&&!v[S]){var r=w?null:n.getNow();if(null!==z.current&&z.current!==S?r=[P,N][1^S]:i[S]?r=0===S?i[0]:j(i[0],i[1]):i[1^S]&&(r=i[1^S]),r){x&&n.isAfter(x,r)&&(r=x);var a=g?d(n,m,r,1):r;E&&n.isAfter(a,E)&&(r=g?d(n,m,E,-1):E),B(r,"reset");}}},[o,S,i[S]]),c.useEffect(function(){o?z.current=S:z.current=null;},[o,S]),(0,u.default)(function(){o&&v&&v[S]&&B(v[S],"reset");},[o,S]),[F,B];}},e104212d:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return p;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("7cfeda15"),l=a._(s),u=i("609f48be"),c=o._(u),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},d=i("887aaf6c"),h=a._(d),p=c.forwardRef(function(n,r){return c.createElement(h.default,(0,l.default)({},n,{ref:r,icon:f}));});},e10a1671:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{plotlib:function(){return H;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("d7948920"),l=a._(s),u=i("748c64cc"),c=a._(u),f=i("da8e1cea"),d=a._(f),h=i("ed744da7"),p=o._(h);function m(n,r){for(var i in r)r.hasOwnProperty(i)&&"constructor"!==i&&void 0!==r[i]&&(n[i]=r[i]);}var g=i("1daaa764"),v=a._(g),y=i("30f8b1e3"),_=a._(y),b=i("1f9d5621"),x=a._(b),E=i("b7fbe0e8"),w=a._(E),S=i("d0572d97"),T=a._(S);let A={field:"value",size:[1,1],round:!1,padding:0,sort:(n,r)=>r.value-n.value,as:["x","y"],ignoreParentValue:!0},C="childNodeCount",O="Invalid field: it must be a string!";var M=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};let R="sunburst",P="markType",k="path",I="ancestor-node",L={id:R,encode:{x:"x",y:"y",key:k,color:I,value:"value"},axis:{x:!1,y:!1},style:{[P]:R,stroke:"#fff",lineWidth:.5,fillOpacity:"fillOpacity",[C]:C,depth:"depth"},state:{active:{zIndex:2,stroke:"#000"},inactive:{zIndex:1,stroke:"#fff"}},legend:!1,interaction:{drillDown:!0},coordinate:{type:"polar",innerRadius:.2}},N=n=>{let{encode:r,data:i=[]}=n,a=M(n,["encode","data"]),o=Object.assign(Object.assign({},a.coordinate),{innerRadius:Math.max((0,d.default)(a,["coordinate","innerRadius"],.2),1e-5)}),s=Object.assign(Object.assign({},L.encode),r),{value:u}=s,f=function(n){let{data:r,encode:i}=n,{color:a,value:o}=i,s=function(n,r){var i,a;let o;i={},a=r,A&&m(i,A),a&&m(i,a);let s=(r=i).as;if(!(0,v.default)(s)||2!==s.length)throw TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');try{o=function(n,r){let{field:i,fields:a}=n;if((0,T.default)(i))return i;if((0,v.default)(i))return console.warn(O),i[0];if(console.warn(`${O} will try to get fields instead.`),(0,T.default)(a))return a;if((0,v.default)(a)&&a.length)return a[0];throw TypeError(O);}(r);}catch(n){console.warn(n);}let l=p.partition().size(r.size).round(r.round).padding(r.padding)(p.hierarchy(n).sum(n=>(0,x.default)(n.children)?r.ignoreParentValue?0:n[o]-(0,_.default)(n.children,(n,r)=>n+r[o],0):n[o]).sort(r.sort)),u=s[0],c=s[1];return l.each(n=>{var r,i;n[u]=[n.x0,n.x1,n.x1,n.x0],n[c]=[n.y1,n.y1,n.y0,n.y0],n.name=n.name||(null===(r=n.data)||void 0===r?void 0:r.name)||(null===(i=n.data)||void 0===i?void 0:i.label),n.data.name=n.name,["x0","x1","y0","y1"].forEach(r=>{-1===s.indexOf(r)&&delete n[r];});}),function(n){let r=[];if(n&&n.each){let i,a;n.each(n=>{var o,s;n.parent!==i?(i=n.parent,a=0):a+=1;let l=(0,w.default)(((null===(o=n.ancestors)||void 0===o?void 0:o.call(n))||[]).map(n=>r.find(r=>r.name===n.name)||n),({depth:r})=>r>0&&r<n.depth);n.nodeAncestor=l,n[C]=(null===(s=n.children)||void 0===s?void 0:s.length)||0,n.nodeIndex=a,r.push(n);});}else n&&n.eachNode&&n.eachNode(n=>{r.push(n);});return r;}(l);}(r,{field:o,type:"hierarchy.partition",as:["x","y"]}),l=[];return s.forEach(n=>{var r,i,s,u;if(0===n.depth)return null;let f=n.data.name,d=[f],h=Object.assign({},n);for(;h.depth>1;)f=`${null===(r=h.parent.data)||void 0===r?void 0:r.name} / ${f}`,d.unshift(null===(i=h.parent.data)||void 0===i?void 0:i.name),h=h.parent;let p=Object.assign(Object.assign(Object.assign({},(0,c.default)(n.data,[o])),{[k]:f,[I]:h.data.name}),n);a&&a!==I&&(p[a]=n.data[a]||(null===(u=null===(s=n.parent)||void 0===s?void 0:s.data)||void 0===u?void 0:u[a])),l.push(p);}),l.map(n=>{let r=n.x.slice(0,2),i=[n.y[2],n.y[0]];return r[0]===r[1]&&(i[0]=i[1]=(n.y[2]+n.y[0])/2),Object.assign(Object.assign({},n),{x:r,y:i,fillOpacity:Math.pow(.85,n.depth)});});}({encode:s,data:i});return[(0,l.default)({},L,Object.assign(Object.assign({type:"rect",data:f,encode:s,tooltip:{title:"path",items:[n=>({name:u,value:n[u]})]}},a),{coordinate:o}))];};N.props={};var D=i("3185db87"),F=a._(D),B=i("7d4c6398"),j=i("5b7abe3d"),z=this&&this.__awaiter||function(n,r,i,a){return new(i||(i=Promise))(function(o,s){function l(n){try{c(a.next(n));}catch(n){s(n);}}function u(n){try{c(a.throw(n));}catch(n){s(n);}}function c(n){var r;n.done?o(n.value):((r=n.value)instanceof i?r:new i(function(n){n(r);})).then(l,u);}c((a=a.apply(n,r||[])).next());});};let U=n=>n.querySelectorAll(".element").filter(n=>(0,d.default)(n,["style",P])===R),V={rootText:"root",style:{fill:"rgba(0, 0, 0, 0.85)",fontSize:12,y:1},active:{fill:"rgba(0, 0, 0, 0.5)"}};function G(n={}){let{breadCrumb:r={},isFixedColor:i=!1}=n,a=(0,l.default)({},V,r);return n=>{let{update:r,setState:o,container:s,view:u,options:f}=n,h=s.ownerDocument,p=(0,B.select)(s).select(`.${j.PLOT_CLASS_NAME}`).node(),{state:m}=f.marks.find(({id:n})=>n===R),g=h.createElement("g");p.appendChild(g);let v=(n,s)=>z(this,void 0,void 0,function*(){if(g.removeChildren(),n){let r=h.createElement("text",{style:Object.assign({x:0,text:a.rootText,depth:0},a.style)});g.appendChild(r);let i="",o=null==n?void 0:n.split(" / "),s=a.style.y,l=g.getBBox().width,u=p.getBBox().width,c=o.map((n,r)=>{let o=h.createElement("text",{style:Object.assign(Object.assign({x:l,text:" / "},a.style),{y:s})});g.appendChild(o),l+=o.getBBox().width,i=`${i}${n} / `;let c=h.createElement("text",{name:i.replace(/\s\/\s$/,""),style:Object.assign(Object.assign({text:n,x:l,depth:r+1},a.style),{y:s})});return g.appendChild(c),(l+=c.getBBox().width)>u&&(s=g.getBBox().height,l=0,o.attr({x:l,y:s}),l+=o.getBBox().width,c.attr({x:l,y:s}),l+=c.getBBox().width),c;});[r,...c].forEach((n,r)=>{if(r===c.length)return;let i=Object.assign({},n.attributes);n.attr("cursor","pointer"),n.addEventListener("mouseenter",()=>{n.attr(a.active);}),n.addEventListener("mouseleave",()=>{n.attr(i);}),n.addEventListener("click",()=>{v(n.name,(0,d.default)(n,["style","depth"]));});});}o("drillDown",r=>{let{marks:a}=r,o=a.map(r=>{if(r.id!==R&&"rect"!==r.type)return r;let{data:a}=r,o=Object.fromEntries(["color"].map(n=>[n,{domain:u.scale[n].getOptions().domain}])),c=a.filter(r=>{let a=r.path;return i||(r[I]=a.split(" / ")[s]),!n||RegExp(`^${n}.+`).test(a);});return(0,l.default)({},r,i?{data:c,scale:o}:{data:c});});return Object.assign(Object.assign({},r),{marks:o});}),yield r();}),y=n=>{let r=n.target;if((0,d.default)(r,["style",P])!==R||"rect"!==(0,d.default)(r,["markType"])||!(0,d.default)(r,["style",C]))return;let i=(0,d.default)(r,["__data__","key"]),a=(0,d.default)(r,["style","depth"]);r.style.cursor="pointer",v(i,a);};p.addEventListener("click",y);let _=(0,F.default)(Object.assign(Object.assign({},m.active),m.inactive)),b=()=>{U(p).forEach(n=>{let r=(0,d.default)(n,["style",C]);if("pointer"!==(0,d.default)(n,["style","cursor"])&&r){n.style.cursor="pointer";let r=(0,c.default)(n.attributes,_);n.addEventListener("mouseenter",()=>{n.attr(m.active);}),n.addEventListener("mouseleave",()=>{n.attr((0,l.default)(r,m.inactive));});}});};return p.addEventListener("mousemove",b),()=>{g.remove(),p.removeEventListener("click",y),p.removeEventListener("mousemove",b);};};}function H(){return{"interaction.drillDown":G,"mark.sunburst":N};}},e2a7a472:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return c;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("4b97d3c2"),l=a._(i("08800308")),u=o._(i("609f48be"));function c(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=u.useRef(r);a.current=r,(0,s.useLayoutUpdateEffect)(function(){if(n)a.current(n);else{var r=(0,l.default)(function(){a.current(n);},i);return function(){l.default.cancel(r);};}},[n]);}},e333157c:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return ri;}});var a,o,s,l,u,c,f=i("777fffbe"),d=i("852bbaa9"),h=i("613f75ca"),p=f._(h),m=i("9b84be4b"),g=f._(m),v=i("e4870cf0"),y=f._(v),_=i("a854094b"),b=f._(_),x=i("2569b57a"),E=i("553ee311"),w=i("8b24b58d"),S=d._(w),T=i("9479dab9"),A=i("cf4f8679");class C{constructor(){(0,b.default)(this,"mapService",void 0),(0,b.default)(this,"fontService",void 0);}apply(n,{styleAttributeService:r,mapService:i,fontService:a}){var o,s=this;this.mapService=i,this.fontService=a,n.hooks.init.tapPromise("DataMappingPlugin",(0,g.default)(function*(){n.log(E.IDebugLog.MappingStart,E.ILayerStage.INIT),s.generateMaping(n,{styleAttributeService:r}),n.log(E.IDebugLog.MappingEnd,E.ILayerStage.INIT);})),n.hooks.beforeRenderData.tapPromise("DataMappingPlugin",(o=(0,g.default)(function*(i){if(!i)return i;n.dataState.dataMappingNeedUpdate=!1,n.log(E.IDebugLog.MappingStart,E.ILayerStage.UPDATE);let a=s.generateMaping(n,{styleAttributeService:r});return n.log(E.IDebugLog.MappingEnd,E.ILayerStage.UPDATE),a;}),function(n){return o.apply(this,arguments);})),n.hooks.beforeRender.tap("DataMappingPlugin",()=>{let i=n.getSource();if(n.layerModelNeedUpdate||!i||!i.inited)return;let a=r.getLayerStyleAttributes()||[],o=r.getLayerStyleAttribute("filter"),{dataArray:s}=i.data;if(Array.isArray(s)&&0===s.length)return;let l=a.filter(n=>n.needRemapping),u=s;if(null!=o&&o.needRemapping&&null!=o&&o.scale&&(u=s.filter(n=>this.applyAttributeMapping(o,n)[0])),l.length){let r=this.mapping(n,l,u,n.getEncodedData());n.setEncodedData(r);}});}generateMaping(n,{styleAttributeService:r}){let i=r.getLayerStyleAttributes()||[],a=r.getLayerStyleAttribute("filter"),{dataArray:o}=n.getSource().data,s=o;null!=a&&a.scale&&(s=o.filter(n=>this.applyAttributeMapping(a,n)[0])),s=n.processData(s);let l=this.mapping(n,i,s,void 0);return n.setEncodedData(l),n.emit("dataUpdate",null),!0;}mapping(n,r,i,a){let o=r.filter(n=>void 0!==n.scale).filter(n=>"filter"!==n.name),s=i.map((n,r)=>{let i=a?a[r]:{},s=(0,y.default)({id:n._id,coordinates:n.coordinates},i);return o.forEach(r=>{let i=this.applyAttributeMapping(r,n);("color"===r.name||"stroke"===r.name)&&(i=i.map(n=>(0,T.rgb2arr)(n))),s[r.name]=Array.isArray(i)&&1===i.length?i[0]:i,"shape"===r.name&&(s.shape=this.fontService.getIconFontKey(s[r.name]));}),s;});return r.forEach(n=>{n.needRemapping=!1;}),this.adjustData2SimpleCoordinates(s),s;}adjustData2SimpleCoordinates(n){n.length>0&&"SIMPLE"===this.mapService.version&&n.map(n=>{n.simpleCoordinate||(n.coordinates=this.unProjectCoordinates(n.coordinates),n.simpleCoordinate=!0);});}unProjectCoordinates(n){if("number"==typeof n[0])return this.mapService.simpleMapCoord.unproject(n);if(n[0]&&n[0][0]instanceof Array){let r=[];return n.map(n=>{let i=[];n.map(n=>{i.push(this.mapService.simpleMapCoord.unproject(n));}),r.push(i);}),r;}{let r=[];return n.map(n=>{r.push(this.mapService.simpleMapCoord.unproject(n));}),r;}}applyAttributeMapping(n,r){var i;if(!n.scale)return[];let a=(null==n||null===(i=n.scale)||void 0===i?void 0:i.scalers)||[],o=[];return a.forEach(({field:i})=>{var a;(r.hasOwnProperty(i)||(null===(a=n.scale)||void 0===a?void 0:a.type)==="variable")&&o.push(r[i]);}),n.mapping?n.mapping(o):[];}getArrowPoints(n,r){let i=[r[0]-n[0],r[1]-n[1]],a=(0,T.normalize)(i);return[n[0]+1e-4*a[0],n[1]+1e-4*a[1]];}}class O{constructor(){(0,b.default)(this,"mapService",void 0);}apply(n){var r=this;this.mapService=n.getContainer().mapService,n.hooks.init.tapPromise("DataSourcePlugin",(0,g.default)(function*(){n.log(E.IDebugLog.SourceInitStart,E.ILayerStage.INIT);let i=n.getSource();if(!i){let{data:r,options:a}=n.sourceOption||n.defaultSourceConfig;i=new S.default(r,a),n.setSource(i);}i.inited?(r.updateClusterData(n),n.log(E.IDebugLog.SourceInitEnd,E.ILayerStage.INIT)):yield new Promise(a=>{i.on("update",i=>{"inited"===i.type&&(r.updateClusterData(n),n.log(E.IDebugLog.SourceInitEnd,E.ILayerStage.INIT)),a(null);});});})),n.hooks.beforeRenderData.tapPromise("DataSourcePlugin",(0,g.default)(function*(){let i=r.updateClusterData(n),a=n.dataState.dataSourceNeedUpdate;return n.dataState.dataSourceNeedUpdate=!1,i||a;}));}updateClusterData(n){if(n.isTileLayer||n.tileLayer||!n.getSource())return!1;let r=n.getSource(),i=r.cluster,{zoom:a=0}=r.clusterOptions,o=this.mapService.getZoom()-1,s=n.dataState.dataSourceNeedUpdate;return i&&s&&r.updateClusterData(Math.floor(o)),!!(i&&Math.abs(n.clusterZoom-o)>=1)&&(a!==Math.floor(o)&&r.updateClusterData(Math.floor(o)),n.clusterZoom=o,!0);}}var M=function(n,r){let i,a;if(void 0===r)for(let r of n)null!=r&&(void 0===i?r>=r&&(i=a=r):(i>r&&(i=r),a<r&&(a=r)));else{let o=-1;for(let s of n)null!=(s=r(s,++o,n))&&(void 0===i?s>=s&&(i=a=s):(i>s&&(i=s),a<s&&(a=s)));}return[i,a];},R=i("277e4603"),P=f._(R),k=i("34ab9b92");f._(k);var I=i("d4c76e17");f._(I);var L=i("4fb4672f");f._(L);var N=i("b5bf64b0");f._(N);var D=i("4017e4bc"),F=f._(D),B=i("01b2eefa");f._(B);var j=i("09b9e239");f._(j);var z=i("149f2852"),U=f._(z),V=i("02f16af6");f._(V);var G=i("63a88d49"),H=d._(G),W={};i.e(W,{interpolateRgbBasis:function(){return H.rgbBasis;}});var X=i("0a6d0fa0");function q(n,r){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(r).domain(n);}return this;}function $(n,r){switch(arguments.length){case 0:break;case 1:this.interpolator(n);break;default:this.interpolator(r).domain(n);}return this;}function Y(){}function Z(n,r){var i=new Y;if(n instanceof Y)n.each(function(n,r){i.set(r,n);});else if(Array.isArray(n)){var a,o=-1,s=n.length;if(null==r)for(;++o<s;)i.set(o,n[o]);else for(;++o<s;)i.set(r(a=n[o],o,n),a);}else if(n)for(var l in n)i.set(l,n[l]);return i;}function K(){}Y.prototype=Z.prototype={constructor:Y,has:function(n){return"$"+n in this;},get:function(n){return this["$"+n];},set:function(n,r){return this["$"+n]=r,this;},remove:function(n){var r="$"+n;return r in this&&delete this[r];},clear:function(){for(var n in this)"$"===n[0]&&delete this[n];},keys:function(){var n=[];for(var r in this)"$"===r[0]&&n.push(r.slice(1));return n;},values:function(){var n=[];for(var r in this)"$"===r[0]&&n.push(this[r]);return n;},entries:function(){var n=[];for(var r in this)"$"===r[0]&&n.push({key:r.slice(1),value:this[r]});return n;},size:function(){var n=0;for(var r in this)"$"===r[0]&&++n;return n;},empty:function(){for(var n in this)if("$"===n[0])return!1;return!0;},each:function(n){for(var r in this)"$"===r[0]&&n(this[r],r.slice(1),this);}};var Q=Z.prototype;K.prototype=(function(n,r){var i=new K;if(n instanceof K)n.each(function(n){i.add(n);});else if(n){var a=-1,o=n.length;if(null==r)for(;++a<o;)i.add(n[a]);else for(;++a<o;)i.add(r(n[a],a,n));}return i;}).prototype={constructor:K,has:Q.has,add:function(n){return this["$"+(n+="")]=n,this;},remove:Q.remove,clear:Q.clear,values:Q.keys,size:Q.size,empty:Q.empty,each:Q.each};var J=i("5bd7e4ea"),ee={name:"implicit"},et=i("70db0e1d"),en=f._(et),er=[0,1];function ei(n){return n;}function ea(n,r){var i;return(r-=n=+n)?function(i){return(i-n)/r;}:(i=isNaN(r)?NaN:.5,function(){return i;});}function eo(n){var r,i=n[0],a=n[n.length-1];return i>a&&(r=i,i=a,a=r),function(n){return Math.max(i,Math.min(a,n));};}function es(n,r,i){var a=n[0],o=n[1],s=r[0],l=r[1];return o<a?(a=ea(o,a),s=i(l,s)):(a=ea(a,o),s=i(s,l)),function(n){return s(a(n));};}function el(n,r,i){var a=Math.min(n.length,r.length)-1,o=Array(a),s=Array(a),l=-1;for(n[a]<n[0]&&(n=n.slice().reverse(),r=r.slice().reverse());++l<a;)o[l]=ea(n[l],n[l+1]),s[l]=i(r[l],r[l+1]);return function(r){var i=(0,X.bisect)(n,r,1,a)-1;return s[i](o[i](r));};}function eu(n,r){return r.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown());}function ec(){var n,r,i,a,o,s,l=er,u=er,c=P.default,f=ei;function d(){return a=Math.min(l.length,u.length)>2?el:es,o=s=null,h;}function h(r){return isNaN(r=+r)?i:(o||(o=a(l.map(n),u,c)))(n(f(r)));}return h.invert=function(i){return f(r((s||(s=a(u,l.map(n),F.default)))(i)));},h.domain=function(n){return arguments.length?(l=J.map.call(n,en.default),f===ei||(f=eo(l)),d()):l.slice();},h.range=function(n){return arguments.length?(u=J.slice.call(n),d()):u.slice();},h.rangeRound=function(n){return u=J.slice.call(n),c=U.default,d();},h.clamp=function(n){return arguments.length?(f=n?eo(l):ei,h):f!==ei;},h.interpolate=function(n){return arguments.length?(c=n,d()):c;},h.unknown=function(n){return arguments.length?(i=n,h):i;},function(i,a){return n=i,r=a,d();};}var ef=i("5559be6a"),ed=f._(ef),eh=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ep(n){var r;if(!(r=eh.exec(n)))throw Error("invalid format: "+n);return new em({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]});}function em(n){this.fill=void 0===n.fill?" ":n.fill+"",this.align=void 0===n.align?">":n.align+"",this.sign=void 0===n.sign?"-":n.sign+"",this.symbol=void 0===n.symbol?"":n.symbol+"",this.zero=!!n.zero,this.width=void 0===n.width?void 0:+n.width,this.comma=!!n.comma,this.precision=void 0===n.precision?void 0:+n.precision,this.trim=!!n.trim,this.type=void 0===n.type?"":n.type+"";}ep.prototype=em.prototype,em.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type;};var eg=function(n){n:for(var r,i=n.length,a=1,o=-1;a<i;++a)switch(n[a]){case".":o=r=a;break;case"0":0===o&&(o=a),r=a;break;default:if(!+n[a])break n;o>0&&(o=0);}return o>0?n.slice(0,o)+n.slice(r+1):n;},ev=i("ed8f1d23"),ey=d._(ev),e_=function(n,r){var i=(0,ey.formatDecimalParts)(n,r);if(!i)return n+"";var a=i[0],o=i[1];return o<0?"0."+Array(-o).join("0")+a:a.length>o+1?a.slice(0,o+1)+"."+a.slice(o+1):a+Array(o-a.length+2).join("0");},eb={"%":function(n,r){return(100*n).toFixed(r);},b:function(n){return Math.round(n).toString(2);},c:function(n){return n+"";},d:ey.default,e:function(n,r){return n.toExponential(r);},f:function(n,r){return n.toFixed(r);},g:function(n,r){return n.toPrecision(r);},o:function(n){return Math.round(n).toString(8);},p:function(n,r){return e_(100*n,r);},r:e_,s:function(n,r){var i=(0,ey.formatDecimalParts)(n,r);if(!i)return n+"";var o=i[0],s=i[1],l=s-(a=3*Math.max(-8,Math.min(8,Math.floor(s/3))))+1,u=o.length;return l===u?o:l>u?o+Array(l-u+1).join("0"):l>0?o.slice(0,l)+"."+o.slice(l):"0."+Array(1-l).join("0")+(0,ey.formatDecimalParts)(n,Math.max(0,r+l-1))[0];},X:function(n){return Math.round(n).toString(16).toUpperCase();},x:function(n){return Math.round(n).toString(16);}},ex=function(n){return n;},eE=Array.prototype.map,ew=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];s=(o=function(n){var r,i,o,s=void 0===n.grouping||void 0===n.thousands?ex:(r=eE.call(n.grouping,Number),i=n.thousands+"",function(n,a){for(var o=n.length,s=[],l=0,u=r[0],c=0;o>0&&u>0&&(c+u+1>a&&(u=Math.max(1,a-c)),s.push(n.substring(o-=u,o+u)),!((c+=u+1)>a));)u=r[l=(l+1)%r.length];return s.reverse().join(i);}),l=void 0===n.currency?"":n.currency[0]+"",u=void 0===n.currency?"":n.currency[1]+"",c=void 0===n.decimal?".":n.decimal+"",f=void 0===n.numerals?ex:(o=eE.call(n.numerals,String),function(n){return n.replace(/[0-9]/g,function(n){return o[+n];});}),d=void 0===n.percent?"%":n.percent+"",h=void 0===n.minus?"-":n.minus+"",p=void 0===n.nan?"NaN":n.nan+"";function m(n){var r=(n=ep(n)).fill,i=n.align,o=n.sign,m=n.symbol,g=n.zero,v=n.width,y=n.comma,_=n.precision,b=n.trim,x=n.type;"n"===x?(y=!0,x="g"):eb[x]||(void 0===_&&(_=12),b=!0,x="g"),(g||"0"===r&&"="===i)&&(g=!0,r="0",i="=");var E="$"===m?l:"#"===m&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",w="$"===m?u:/[%p]/.test(x)?d:"",S=eb[x],T=/[defgprs%]/.test(x);function A(n){var l,u,d,m=E,A=w;if("c"===x)A=S(n)+A,n="";else{var C=(n=+n)<0||1/n<0;if(n=isNaN(n)?p:S(Math.abs(n),_),b&&(n=eg(n)),C&&0==+n&&"+"!==o&&(C=!1),m=(C?"("===o?o:h:"-"===o||"("===o?"":o)+m,A=("s"===x?ew[8+a/3]:"")+A+(C&&"("===o?")":""),T){for(l=-1,u=n.length;++l<u;)if(48>(d=n.charCodeAt(l))||d>57){A=(46===d?c+n.slice(l+1):n.slice(l))+A,n=n.slice(0,l);break;}}}y&&!g&&(n=s(n,1/0));var O=m.length+n.length+A.length,M=O<v?Array(v-O+1).join(r):"";switch(y&&g&&(n=s(M+n,M.length?v-A.length:1/0),M=""),i){case"<":n=m+n+A+M;break;case"=":n=m+M+n+A;break;case"^":n=M.slice(0,O=M.length>>1)+m+n+A+M.slice(O);break;default:n=M+m+n+A;}return f(n);}return _=void 0===_?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_)),A.toString=function(){return n+"";},A;}return{format:m,formatPrefix:function(n,r){var i=m(((n=ep(n)).type="f",n)),a=3*Math.max(-8,Math.min(8,Math.floor((0,ed.default)(r)/3))),o=Math.pow(10,-a),s=ew[8+a/3];return function(n){return i(o*n)+s;};}};}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"})).format,l=o.formatPrefix;var eS=function(n,r,i,a){var o,u,c,f=(0,X.tickStep)(n,r,i);switch((a=ep(null==a?",f":a)).type){case"s":var d=Math.max(Math.abs(n),Math.abs(r));return null!=a.precision||isNaN(c=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor((0,ed.default)(d)/3)))-(0,ed.default)(Math.abs(f))))||(a.precision=c),l(a,d);case"":case"e":case"g":case"p":case"r":null!=a.precision||isNaN((o=f,u=Math.abs(u=Math.max(Math.abs(n),Math.abs(r)))-(o=Math.abs(o)),c=Math.max(0,(0,ed.default)(u)-(0,ed.default)(o))+1))||(a.precision=c-("e"===a.type));break;case"f":case"%":null!=a.precision||isNaN(c=Math.max(0,-(0,ed.default)(Math.abs(f))))||(a.precision=c-("%"===a.type)*2);}return s(a);};function eT(n){var r=n.domain;return n.ticks=function(n){var i=r();return(0,X.ticks)(i[0],i[i.length-1],null==n?10:n);},n.tickFormat=function(n,i){var a=r();return eS(a[0],a[a.length-1],null==n?10:n,i);},n.nice=function(i){null==i&&(i=10);var a,o=r(),s=0,l=o.length-1,u=o[s],c=o[l];return c<u&&(a=u,u=c,c=a,a=s,s=l,l=a),(a=(0,X.tickIncrement)(u,c,i))>0?(u=Math.floor(u/a)*a,c=Math.ceil(c/a)*a,a=(0,X.tickIncrement)(u,c,i)):a<0&&(u=Math.ceil(u*a)/a,c=Math.floor(c*a)/a,a=(0,X.tickIncrement)(u,c,i)),a>0?(o[s]=Math.floor(u/a)*a,o[l]=Math.ceil(c/a)*a,r(o)):a<0&&(o[s]=Math.ceil(u*a)/a,o[l]=Math.floor(c*a)/a,r(o)),n;},n;}var eA=function(n,r){n=n.slice();var i,a=0,o=n.length-1,s=n[a],l=n[o];return l<s&&(i=a,a=o,o=i,i=s,s=l,l=i),n[a]=r.floor(s),n[o]=r.ceil(l),n;};function eC(n){return Math.log(n);}function eO(n){return Math.exp(n);}function eM(n){return-Math.log(-n);}function eR(n){return-Math.exp(-n);}function eP(n){return isFinite(n)?+("1e"+n):n<0?0:n;}function ek(n){return function(r){return-n(-r);};}function eI(n){return function(r){return r<0?-Math.pow(-r,n):Math.pow(r,n);};}function eL(n){return n<0?-Math.sqrt(-n):Math.sqrt(n);}function eN(n){return n<0?-n*n:n*n;}var eD=new Date,eF=new Date;function eB(n,r,i,a){function o(r){return n(r=0==arguments.length?new Date:new Date(+r)),r;}return o.floor=function(r){return n(r=new Date(+r)),r;},o.ceil=function(i){return n(i=new Date(i-1)),r(i,1),n(i),i;},o.round=function(n){var r=o(n),i=o.ceil(n);return n-r<i-n?r:i;},o.offset=function(n,i){return r(n=new Date(+n),null==i?1:Math.floor(i)),n;},o.range=function(i,a,s){var l,u=[];if(i=o.ceil(i),s=null==s?1:Math.floor(s),!(i<a)||!(s>0))return u;do u.push(l=new Date(+i)),r(i,s),n(i);while(l<i&&i<a)return u;},o.filter=function(i){return eB(function(r){if(r>=r)for(;n(r),!i(r);)r.setTime(r-1);},function(n,a){if(n>=n){if(a<0)for(;++a<=0;)for(;r(n,-1),!i(n););else for(;--a>=0;)for(;r(n,1),!i(n););}});},i&&(o.count=function(r,a){return eD.setTime(+r),eF.setTime(+a),n(eD),n(eF),Math.floor(i(eD,eF));},o.every=function(n){return isFinite(n=Math.floor(n))&&n>0?n>1?o.filter(a?function(r){return a(r)%n==0;}:function(r){return o.count(0,r)%n==0;}):o:null;}),o;}var ej=eB(function(n){n.setMonth(0,1),n.setHours(0,0,0,0);},function(n,r){n.setFullYear(n.getFullYear()+r);},function(n,r){return r.getFullYear()-n.getFullYear();},function(n){return n.getFullYear();});ej.every=function(n){return isFinite(n=Math.floor(n))&&n>0?eB(function(r){r.setFullYear(Math.floor(r.getFullYear()/n)*n),r.setMonth(0,1),r.setHours(0,0,0,0);},function(r,i){r.setFullYear(r.getFullYear()+i*n);}):null;},ej.range;var ez=eB(function(n){n.setDate(1),n.setHours(0,0,0,0);},function(n,r){n.setMonth(n.getMonth()+r);},function(n,r){return r.getMonth()-n.getMonth()+(r.getFullYear()-n.getFullYear())*12;},function(n){return n.getMonth();});function eU(n){return eB(function(r){r.setDate(r.getDate()-(r.getDay()+7-n)%7),r.setHours(0,0,0,0);},function(n,r){n.setDate(n.getDate()+7*r);},function(n,r){return(r-n-(r.getTimezoneOffset()-n.getTimezoneOffset())*6e4)/6048e5;});}ez.range;var eV=eU(0),eG=eU(1),eH=eU(2),eW=eU(3),eX=eU(4),eq=eU(5),e$=eU(6);eV.range,eG.range,eH.range,eW.range,eX.range,eq.range,e$.range;var eY=eB(function(n){n.setHours(0,0,0,0);},function(n,r){n.setDate(n.getDate()+r);},function(n,r){return(r-n-(r.getTimezoneOffset()-n.getTimezoneOffset())*6e4)/864e5;},function(n){return n.getDate()-1;});eY.range;var eZ=eB(function(n){n.setTime(n-n.getMilliseconds()-1e3*n.getSeconds()-6e4*n.getMinutes());},function(n,r){n.setTime(+n+36e5*r);},function(n,r){return(r-n)/36e5;},function(n){return n.getHours();});eZ.range;var eK=eB(function(n){n.setTime(n-n.getMilliseconds()-1e3*n.getSeconds());},function(n,r){n.setTime(+n+6e4*r);},function(n,r){return(r-n)/6e4;},function(n){return n.getMinutes();});eK.range;var eQ=eB(function(n){n.setTime(n-n.getMilliseconds());},function(n,r){n.setTime(+n+1e3*r);},function(n,r){return(r-n)/1e3;},function(n){return n.getUTCSeconds();});eQ.range;var eJ=eB(function(){},function(n,r){n.setTime(+n+r);},function(n,r){return r-n;});eJ.every=function(n){return isFinite(n=Math.floor(n))&&n>0?n>1?eB(function(r){r.setTime(Math.floor(r/n)*n);},function(r,i){r.setTime(+r+i*n);},function(r,i){return(i-r)/n;}):eJ:null;},eJ.range;var e0=new Date,e1=new Date;function e2(n,r,i,a){function o(r){return n(r=0==arguments.length?new Date:new Date(+r)),r;}return o.floor=function(r){return n(r=new Date(+r)),r;},o.ceil=function(i){return n(i=new Date(i-1)),r(i,1),n(i),i;},o.round=function(n){var r=o(n),i=o.ceil(n);return n-r<i-n?r:i;},o.offset=function(n,i){return r(n=new Date(+n),null==i?1:Math.floor(i)),n;},o.range=function(i,a,s){var l,u=[];if(i=o.ceil(i),s=null==s?1:Math.floor(s),!(i<a)||!(s>0))return u;do u.push(l=new Date(+i)),r(i,s),n(i);while(l<i&&i<a)return u;},o.filter=function(i){return e2(function(r){if(r>=r)for(;n(r),!i(r);)r.setTime(r-1);},function(n,a){if(n>=n){if(a<0)for(;++a<=0;)for(;r(n,-1),!i(n););else for(;--a>=0;)for(;r(n,1),!i(n););}});},i&&(o.count=function(r,a){return e0.setTime(+r),e1.setTime(+a),n(e0),n(e1),Math.floor(i(e0,e1));},o.every=function(n){return isFinite(n=Math.floor(n))&&n>0?n>1?o.filter(a?function(r){return a(r)%n==0;}:function(r){return o.count(0,r)%n==0;}):o:null;}),o;}var e3=e2(function(n){n.setHours(0,0,0,0);},function(n,r){n.setDate(n.getDate()+r);},function(n,r){return(r-n-(r.getTimezoneOffset()-n.getTimezoneOffset())*6e4)/864e5;},function(n){return n.getDate()-1;});function e4(n){return e2(function(r){r.setDate(r.getDate()-(r.getDay()+7-n)%7),r.setHours(0,0,0,0);},function(n,r){n.setDate(n.getDate()+7*r);},function(n,r){return(r-n-(r.getTimezoneOffset()-n.getTimezoneOffset())*6e4)/6048e5;});}e3.range;var e5=e4(0),e6=e4(1),e8=e4(2),e7=e4(3),e9=e4(4),te=e4(5),tt=e4(6);e5.range,e6.range,e8.range,e7.range,e9.range,te.range,tt.range;var tn=e2(function(n){n.setMonth(0,1),n.setHours(0,0,0,0);},function(n,r){n.setFullYear(n.getFullYear()+r);},function(n,r){return r.getFullYear()-n.getFullYear();},function(n){return n.getFullYear();});tn.every=function(n){return isFinite(n=Math.floor(n))&&n>0?e2(function(r){r.setFullYear(Math.floor(r.getFullYear()/n)*n),r.setMonth(0,1),r.setHours(0,0,0,0);},function(r,i){r.setFullYear(r.getFullYear()+i*n);}):null;},tn.range;var tr=e2(function(n){n.setUTCHours(0,0,0,0);},function(n,r){n.setUTCDate(n.getUTCDate()+r);},function(n,r){return(r-n)/864e5;},function(n){return n.getUTCDate()-1;});function ti(n){return e2(function(r){r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-n)%7),r.setUTCHours(0,0,0,0);},function(n,r){n.setUTCDate(n.getUTCDate()+7*r);},function(n,r){return(r-n)/6048e5;});}tr.range;var ta=ti(0),to=ti(1),ts=ti(2),tl=ti(3),tu=ti(4),tc=ti(5),tf=ti(6);ta.range,to.range,ts.range,tl.range,tu.range,tc.range,tf.range;var td=e2(function(n){n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0);},function(n,r){n.setUTCFullYear(n.getUTCFullYear()+r);},function(n,r){return r.getUTCFullYear()-n.getUTCFullYear();},function(n){return n.getUTCFullYear();});function th(n){if(0<=n.y&&n.y<100){var r=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return r.setFullYear(n.y),r;}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L);}function tp(n){if(0<=n.y&&n.y<100){var r=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return r.setUTCFullYear(n.y),r;}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L));}function tm(n,r,i){return{y:n,m:r,d:i,H:0,M:0,S:0,L:0};}td.every=function(n){return isFinite(n=Math.floor(n))&&n>0?e2(function(r){r.setUTCFullYear(Math.floor(r.getUTCFullYear()/n)*n),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0);},function(r,i){r.setUTCFullYear(r.getUTCFullYear()+i*n);}):null;},td.range;var tg={"-":"",_:" ",0:"0"},tv=/^\s*\d+/,ty=/^%/,t_=/[\\^$*+?|[\]().{}]/g;function tb(n,r,i){var a=n<0?"-":"",o=(a?-n:n)+"",s=o.length;return a+(s<i?Array(i-s+1).join(r)+o:o);}function tx(n){return n.replace(t_,"\\$&");}function tE(n){return RegExp("^(?:"+n.map(tx).join("|")+")","i");}function tw(n){for(var r={},i=-1,a=n.length;++i<a;)r[n[i].toLowerCase()]=i;return r;}function tS(n,r,i){var a=tv.exec(r.slice(i,i+1));return a?(n.w=+a[0],i+a[0].length):-1;}function tT(n,r,i){var a=tv.exec(r.slice(i,i+1));return a?(n.u=+a[0],i+a[0].length):-1;}function tA(n,r,i){var a=tv.exec(r.slice(i,i+2));return a?(n.U=+a[0],i+a[0].length):-1;}function tC(n,r,i){var a=tv.exec(r.slice(i,i+2));return a?(n.V=+a[0],i+a[0].length):-1;}function tO(n,r,i){var a=tv.exec(r.slice(i,i+2));return a?(n.W=+a[0],i+a[0].length):-1;}function tM(n,r,i){var a=tv.exec(r.slice(i,i+4));return a?(n.y=+a[0],i+a[0].length):-1;}function tR(n,r,i){var a=tv.exec(r.slice(i,i+2));return a?(n.y=+a[0]+(+a[0]>68?1900:2e3),i+a[0].length):-1;}function tP(n,r,i){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(i,i+6));return a?(n.Z=a[1]?0:-(a[2]+(a[3]||"00")),i+a[0].length):-1;}function tk(n,r,i){var a=tv.exec(r.slice(i,i+1));return a?(n.q=3*a[0]-3,i+a[0].length):-1;}function tI(n,r,i){var a=tv.exec(r.slice(i,i+2));return a?(n.m=a[0]-1,i+a[0].length):-1;}function tL(n,r,i){var a=tv.exec(r.slice(i,i+2));return a?(n.d=+a[0],i+a[0].length):-1;}function tN(n,r,i){var a=tv.exec(r.slice(i,i+3));return a?(n.m=0,n.d=+a[0],i+a[0].length):-1;}function tD(n,r,i){var a=tv.exec(r.slice(i,i+2));return a?(n.H=+a[0],i+a[0].length):-1;}function tF(n,r,i){var a=tv.exec(r.slice(i,i+2));return a?(n.M=+a[0],i+a[0].length):-1;}function tB(n,r,i){var a=tv.exec(r.slice(i,i+2));return a?(n.S=+a[0],i+a[0].length):-1;}function tj(n,r,i){var a=tv.exec(r.slice(i,i+3));return a?(n.L=+a[0],i+a[0].length):-1;}function tz(n,r,i){var a=tv.exec(r.slice(i,i+6));return a?(n.L=Math.floor(a[0]/1e3),i+a[0].length):-1;}function tU(n,r,i){var a=ty.exec(r.slice(i,i+1));return a?i+a[0].length:-1;}function tV(n,r,i){var a=tv.exec(r.slice(i));return a?(n.Q=+a[0],i+a[0].length):-1;}function tG(n,r,i){var a=tv.exec(r.slice(i));return a?(n.s=+a[0],i+a[0].length):-1;}function tH(n,r){return tb(n.getDate(),r,2);}function tW(n,r){return tb(n.getHours(),r,2);}function tX(n,r){return tb(n.getHours()%12||12,r,2);}function tq(n,r){return tb(1+e3.count(tn(n),n),r,3);}function t$(n,r){return tb(n.getMilliseconds(),r,3);}function tY(n,r){return t$(n,r)+"000";}function tZ(n,r){return tb(n.getMonth()+1,r,2);}function tK(n,r){return tb(n.getMinutes(),r,2);}function tQ(n,r){return tb(n.getSeconds(),r,2);}function tJ(n){var r=n.getDay();return 0===r?7:r;}function t0(n,r){return tb(e5.count(tn(n)-1,n),r,2);}function t1(n){var r=n.getDay();return r>=4||0===r?e9(n):e9.ceil(n);}function t2(n,r){return n=t1(n),tb(e9.count(tn(n),n)+(4===tn(n).getDay()),r,2);}function t3(n){return n.getDay();}function t4(n,r){return tb(e6.count(tn(n)-1,n),r,2);}function t5(n,r){return tb(n.getFullYear()%100,r,2);}function t6(n,r){return tb((n=t1(n)).getFullYear()%100,r,2);}function t8(n,r){return tb(n.getFullYear()%1e4,r,4);}function t7(n,r){var i=n.getDay();return tb((n=i>=4||0===i?e9(n):e9.ceil(n)).getFullYear()%1e4,r,4);}function t9(n){var r=n.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+tb(r/60|0,"0",2)+tb(r%60,"0",2);}function ne(n,r){return tb(n.getUTCDate(),r,2);}function nt(n,r){return tb(n.getUTCHours(),r,2);}function nn(n,r){return tb(n.getUTCHours()%12||12,r,2);}function nr(n,r){return tb(1+tr.count(td(n),n),r,3);}function ni(n,r){return tb(n.getUTCMilliseconds(),r,3);}function na(n,r){return ni(n,r)+"000";}function no(n,r){return tb(n.getUTCMonth()+1,r,2);}function ns(n,r){return tb(n.getUTCMinutes(),r,2);}function nl(n,r){return tb(n.getUTCSeconds(),r,2);}function nu(n){var r=n.getUTCDay();return 0===r?7:r;}function nc(n,r){return tb(ta.count(td(n)-1,n),r,2);}function nf(n){var r=n.getUTCDay();return r>=4||0===r?tu(n):tu.ceil(n);}function nd(n,r){return n=nf(n),tb(tu.count(td(n),n)+(4===td(n).getUTCDay()),r,2);}function nh(n){return n.getUTCDay();}function np(n,r){return tb(to.count(td(n)-1,n),r,2);}function nm(n,r){return tb(n.getUTCFullYear()%100,r,2);}function ng(n,r){return tb((n=nf(n)).getUTCFullYear()%100,r,2);}function nv(n,r){return tb(n.getUTCFullYear()%1e4,r,4);}function ny(n,r){var i=n.getUTCDay();return tb((n=i>=4||0===i?tu(n):tu.ceil(n)).getUTCFullYear()%1e4,r,4);}function n_(){return"+0000";}function nb(){return"%";}function nx(n){return+n;}function nE(n){return Math.floor(+n/1e3);}function nw(n){return new Date(n);}function nS(n){return n instanceof Date?+n:+new Date(+n);}c=(u=function(n){var r=n.dateTime,i=n.date,a=n.time,o=n.periods,s=n.days,l=n.shortDays,u=n.months,c=n.shortMonths,f=tE(o),d=tw(o),h=tE(s),p=tw(s),m=tE(l),g=tw(l),v=tE(u),y=tw(u),_=tE(c),b=tw(c),x={a:function(n){return l[n.getDay()];},A:function(n){return s[n.getDay()];},b:function(n){return c[n.getMonth()];},B:function(n){return u[n.getMonth()];},c:null,d:tH,e:tH,f:tY,g:t6,G:t7,H:tW,I:tX,j:tq,L:t$,m:tZ,M:tK,p:function(n){return o[+(n.getHours()>=12)];},q:function(n){return 1+~~(n.getMonth()/3);},Q:nx,s:nE,S:tQ,u:tJ,U:t0,V:t2,w:t3,W:t4,x:null,X:null,y:t5,Y:t8,Z:t9,"%":nb},E={a:function(n){return l[n.getUTCDay()];},A:function(n){return s[n.getUTCDay()];},b:function(n){return c[n.getUTCMonth()];},B:function(n){return u[n.getUTCMonth()];},c:null,d:ne,e:ne,f:na,g:ng,G:ny,H:nt,I:nn,j:nr,L:ni,m:no,M:ns,p:function(n){return o[+(n.getUTCHours()>=12)];},q:function(n){return 1+~~(n.getUTCMonth()/3);},Q:nx,s:nE,S:nl,u:nu,U:nc,V:nd,w:nh,W:np,x:null,X:null,y:nm,Y:nv,Z:n_,"%":nb},w={a:function(n,r,i){var a=m.exec(r.slice(i));return a?(n.w=g[a[0].toLowerCase()],i+a[0].length):-1;},A:function(n,r,i){var a=h.exec(r.slice(i));return a?(n.w=p[a[0].toLowerCase()],i+a[0].length):-1;},b:function(n,r,i){var a=_.exec(r.slice(i));return a?(n.m=b[a[0].toLowerCase()],i+a[0].length):-1;},B:function(n,r,i){var a=v.exec(r.slice(i));return a?(n.m=y[a[0].toLowerCase()],i+a[0].length):-1;},c:function(n,i,a){return A(n,r,i,a);},d:tL,e:tL,f:tz,g:tR,G:tM,H:tD,I:tD,j:tN,L:tj,m:tI,M:tF,p:function(n,r,i){var a=f.exec(r.slice(i));return a?(n.p=d[a[0].toLowerCase()],i+a[0].length):-1;},q:tk,Q:tV,s:tG,S:tB,u:tT,U:tA,V:tC,w:tS,W:tO,x:function(n,r,a){return A(n,i,r,a);},X:function(n,r,i){return A(n,a,r,i);},y:tR,Y:tM,Z:tP,"%":tU};function S(n,r){return function(i){var a,o,s,l=[],u=-1,c=0,f=n.length;for(i instanceof Date||(i=new Date(+i));++u<f;)37===n.charCodeAt(u)&&(l.push(n.slice(c,u)),null!=(o=tg[a=n.charAt(++u)])?a=n.charAt(++u):o="e"===a?" ":"0",(s=r[a])&&(a=s(i,o)),l.push(a),c=u+1);return l.push(n.slice(c,u)),l.join("");};}function T(n,r){return function(i){var a,o,s=tm(1900,void 0,1);if(A(s,n,i+="",0)!=i.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(!r||"Z"in s||(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(a=(o=(a=tp(tm(s.y,0,1))).getUTCDay())>4||0===o?to.ceil(a):to(a),a=tr.offset(a,(s.V-1)*7),s.y=a.getUTCFullYear(),s.m=a.getUTCMonth(),s.d=a.getUTCDate()+(s.w+6)%7):(a=(o=(a=th(tm(s.y,0,1))).getDay())>4||0===o?e6.ceil(a):e6(a),a=e3.offset(a,(s.V-1)*7),s.y=a.getFullYear(),s.m=a.getMonth(),s.d=a.getDate()+(s.w+6)%7);}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),o="Z"in s?tp(tm(s.y,0,1)).getUTCDay():th(tm(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(o+5)%7:s.w+7*s.U-(o+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,tp(s)):th(s);};}function A(n,r,i,a){for(var o,s,l=0,u=r.length,c=i.length;l<u;){if(a>=c)return -1;if(37===(o=r.charCodeAt(l++))){if(!(s=w[(o=r.charAt(l++))in tg?r.charAt(l++):o])||(a=s(n,i,a))<0)return -1;}else if(o!=i.charCodeAt(a++))return -1;}return a;}return x.x=S(i,x),x.X=S(a,x),x.c=S(r,x),E.x=S(i,E),E.X=S(a,E),E.c=S(r,E),{format:function(n){var r=S(n+="",x);return r.toString=function(){return n;},r;},parse:function(n){var r=T(n+="",!1);return r.toString=function(){return n;},r;},utcFormat:function(n){var r=S(n+="",E);return r.toString=function(){return n;},r;},utcParse:function(n){var r=T(n+="",!0);return r.toString=function(){return n;},r;}};}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})).format,u.parse,u.utcFormat,u.utcParse;var nT=function(){return q.apply((function n(r,i,a,o,s,l,u,c,f){var d=ec()(ei,ei),h=d.invert,p=d.domain,m=f(".%L"),g=f(":%S"),v=f("%I:%M"),y=f("%I %p"),_=f("%a %d"),b=f("%b %d"),x=f("%B"),E=f("%Y"),w=[[u,1,1e3],[u,5,5e3],[u,15,15e3],[u,30,3e4],[l,1,6e4],[l,5,3e5],[l,15,9e5],[l,30,18e5],[s,1,36e5],[s,3,108e5],[s,6,216e5],[s,12,432e5],[o,1,864e5],[o,2,1728e5],[a,1,6048e5],[i,1,2592e6],[i,3,7776e6],[r,1,31536e6]];function S(n){return(u(n)<n?m:l(n)<n?g:s(n)<n?v:o(n)<n?y:i(n)<n?a(n)<n?_:b:r(n)<n?x:E)(n);}function T(n,i,a,o){if(null==n&&(n=10),"number"==typeof n){var s=Math.abs(a-i)/n,l=(0,X.bisector)(function(n){return n[2];}).right(w,s);l===w.length?(o=(0,X.tickStep)(i/31536e6,a/31536e6,n),n=r):l?(o=(l=w[s/w[l-1][2]<w[l][2]/s?l-1:l])[1],n=l[0]):(o=Math.max((0,X.tickStep)(i,a,n),1),n=c);}return null==o?n:n.every(o);}return d.invert=function(n){return new Date(h(n));},d.domain=function(n){return arguments.length?p(J.map.call(n,nS)):p().map(nw);},d.ticks=function(n,r){var i,a=p(),o=a[0],s=a[a.length-1],l=s<o;return l&&(i=o,o=s,s=i),i=(i=T(n,o,s,r))?i.range(o,s+1):[],l?i.reverse():i;},d.tickFormat=function(n,r){return null==r?S:f(r);},d.nice=function(n,r){var i=p();return(n=T(n,i[0],i[i.length-1],r))?p(eA(i,n)):d;},d.copy=function(){return eu(d,n(r,i,a,o,s,l,u,c,f));},d;})(ej,ez,eV,eY,eZ,eK,eQ,eJ,c).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments);};function nA(n,r){return r.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown());}var nC={};i.e(nC,{scaleDiverging:function(){return function n(){var r=eT((function(){var n,r,i,a,o,s,l,u=0,c=.5,f=1,d=ei,h=!1;function p(n){return isNaN(n=+n)?l:(n=.5+((n=+s(n))-r)*(n<r?a:o),d(h?Math.max(0,Math.min(1,n)):n));}return p.domain=function(l){return arguments.length?(n=s(u=+l[0]),r=s(c=+l[1]),i=s(f=+l[2]),a=n===r?0:.5/(r-n),o=r===i?0:.5/(i-r),p):[u,c,f];},p.clamp=function(n){return arguments.length?(h=!!n,p):h;},p.interpolator=function(n){return arguments.length?(d=n,p):d;},p.unknown=function(n){return arguments.length?(l=n,p):l;},function(l){return s=l,n=l(u),r=l(c),i=l(f),a=n===r?0:.5/(r-n),o=r===i?0:.5/(i-r),p;};})()(ei));return r.copy=function(){return nA(r,n());},$.apply(r,arguments);};},scaleLinear:function(){return function n(){var r=ec()(ei,ei);return r.copy=function(){return eu(r,n());},q.apply(r,arguments),eT(r);};},scaleLog:function(){return function n(){var r=(function(n){var r,i,a=n(eC,eO),o=a.domain,l=10;function u(){var s,u;return r=(s=l)===Math.E?Math.log:10===s&&Math.log10||2===s&&Math.log2||(s=Math.log(s),function(n){return Math.log(n)/s;}),i=10===(u=l)?eP:u===Math.E?Math.exp:function(n){return Math.pow(u,n);},o()[0]<0?(r=ek(r),i=ek(i),n(eM,eR)):n(eC,eO),a;}return a.base=function(n){return arguments.length?(l=+n,u()):l;},a.domain=function(n){return arguments.length?(o(n),u()):o();},a.ticks=function(n){var a,s=o(),u=s[0],c=s[s.length-1];(a=c<u)&&(p=u,u=c,c=p);var f,d,h,p=r(u),m=r(c),g=null==n?10:+n,v=[];if(!(l%1)&&m-p<g){if(p=Math.round(p)-1,m=Math.round(m)+1,u>0){for(;p<m;++p)for(d=1,f=i(p);d<l;++d)if(!((h=f*d)<u)){if(h>c)break;v.push(h);}}else for(;p<m;++p)for(d=l-1,f=i(p);d>=1;--d)if(!((h=f*d)<u)){if(h>c)break;v.push(h);}}else v=(0,X.ticks)(p,m,Math.min(m-p,g)).map(i);return a?v.reverse():v;},a.tickFormat=function(n,o){if(null==o&&(o=10===l?".0e":","),"function"!=typeof o&&(o=s(o)),n===1/0)return o;null==n&&(n=10);var u=Math.max(1,l*n/a.ticks().length);return function(n){var a=n/i(Math.round(r(n)));return a*l<l-.5&&(a*=l),a<=u?o(n):"";};},a.nice=function(){return o(eA(o(),{floor:function(n){return i(Math.floor(r(n)));},ceil:function(n){return i(Math.ceil(r(n)));}}));},a;})(ec()).domain([1,10]);return r.copy=function(){return eu(r,n()).base(r.base());},q.apply(r,arguments),r;};},scaleOrdinal:function(){return function n(){var r=Z(),i=[],a=[],o=ee;function s(n){var s=n+"",l=r.get(s);if(!l){if(o!==ee)return o;r.set(s,l=i.push(n));}return a[(l-1)%a.length];}return s.domain=function(n){if(!arguments.length)return i.slice();i=[],r=Z();for(var a,o,l=-1,u=n.length;++l<u;)r.has(o=(a=n[l])+"")||r.set(o,i.push(a));return s;},s.range=function(n){return arguments.length?(a=J.slice.call(n),s):a.slice();},s.unknown=function(n){return arguments.length?(o=n,s):o;},s.copy=function(){return n(i,a).unknown(o);},q.apply(s,arguments),s;};},scalePow:function(){return function n(){var r,i,a,o=(i=(r=ec())(ei,ei),a=1,i.exponent=function(n){return arguments.length?1==(a=+n)?r(ei,ei):.5===a?r(eL,eN):r(eI(a),eI(1/a)):a;},eT(i));return o.copy=function(){return eu(o,n()).exponent(o.exponent());},q.apply(o,arguments),o;};},scaleQuantile:function(){return function n(){var r,i=[],a=[],o=[];function s(){var n=0,r=Math.max(1,a.length);for(o=Array(r-1);++n<r;)o[n-1]=(0,X.quantile)(i,n/r);return l;}function l(n){return isNaN(n=+n)?r:a[(0,X.bisect)(o,n)];}return l.invertExtent=function(n){var r=a.indexOf(n);return r<0?[NaN,NaN]:[r>0?o[r-1]:i[0],r<o.length?o[r]:i[i.length-1]];},l.domain=function(n){if(!arguments.length)return i.slice();i=[];for(var r,a=0,o=n.length;a<o;++a)null==(r=n[a])||isNaN(r=+r)||i.push(r);return i.sort(X.ascending),s();},l.range=function(n){return arguments.length?(a=J.slice.call(n),s()):a.slice();},l.unknown=function(n){return arguments.length?(r=n,l):r;},l.quantiles=function(){return o.slice();},l.copy=function(){return n().domain(i).range(a).unknown(r);},q.apply(l,arguments);};},scaleQuantize:function(){return function n(){var r,i=0,a=1,o=1,s=[.5],l=[0,1];function u(n){return n<=n?l[(0,X.bisect)(s,n,0,o)]:r;}function c(){var n=-1;for(s=Array(o);++n<o;)s[n]=((n+1)*a-(n-o)*i)/(o+1);return u;}return u.domain=function(n){return arguments.length?(i=+n[0],a=+n[1],c()):[i,a];},u.range=function(n){return arguments.length?(o=(l=J.slice.call(n)).length-1,c()):l.slice();},u.invertExtent=function(n){var r=l.indexOf(n);return r<0?[NaN,NaN]:r<1?[i,s[0]]:r>=o?[s[o-1],a]:[s[r-1],s[r]];},u.unknown=function(n){return arguments.length&&(r=n),u;},u.thresholds=function(){return s.slice();},u.copy=function(){return n().domain([i,a]).range(l).unknown(r);},q.apply(eT(u),arguments);};},scaleSequential:function(){return function n(){var r=eT((function(){var n,r,i,a,o,s=0,l=1,u=ei,c=!1;function f(r){return isNaN(r=+r)?o:u(0===i?.5:(r=(a(r)-n)*i,c?Math.max(0,Math.min(1,r)):r));}return f.domain=function(o){return arguments.length?(n=a(s=+o[0]),r=a(l=+o[1]),i=n===r?0:1/(r-n),f):[s,l];},f.clamp=function(n){return arguments.length?(c=!!n,f):c;},f.interpolator=function(n){return arguments.length?(u=n,f):u;},f.unknown=function(n){return arguments.length?(o=n,f):o;},function(o){return a=o,n=o(s),r=o(l),i=n===r?0:1/(r-n),f;};})()(ei));return r.copy=function(){return nA(r,n());},$.apply(r,arguments);};},scaleThreshold:function(){return function n(){var r,i=[.5],a=[0,1],o=1;function s(n){return n<=n?a[(0,X.bisect)(i,n,0,o)]:r;}return s.domain=function(n){return arguments.length?(o=Math.min((i=J.slice.call(n)).length,a.length-1),s):i.slice();},s.range=function(n){return arguments.length?(a=J.slice.call(n),o=Math.min(i.length,a.length-1),s):a.slice();},s.invertExtent=function(n){var r=a.indexOf(n);return[i[r-1],i[r]];},s.unknown=function(n){return arguments.length?(r=n,s):r;},s.copy=function(){return n().domain(i).range(a).unknown(r);},q.apply(s,arguments);};},scaleTime:function(){return nT;}});let{isNil:nO,isString:nM,uniq:nR}=T.lodashUtil,nP=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,nk={[E.ScaleTypes.LINEAR]:nC.scaleLinear,[E.ScaleTypes.POWER]:nC.scalePow,[E.ScaleTypes.LOG]:nC.scaleLog,[E.ScaleTypes.IDENTITY]:function n(r){let i;let a=[];function o(n){return null==n?i:n;}return o.invert=o,o.domain=o.range=n=>n?(a=n,n):a,o.unknown=n=>n?(i=n,n):i,o.copy=()=>n(r).unknown(i),o;},[E.ScaleTypes.SEQUENTIAL]:nC.scaleSequential,[E.ScaleTypes.TIME]:nC.scaleTime,[E.ScaleTypes.QUANTILE]:nC.scaleQuantile,[E.ScaleTypes.QUANTIZE]:nC.scaleQuantize,[E.ScaleTypes.THRESHOLD]:nC.scaleThreshold,[E.ScaleTypes.CAT]:nC.scaleOrdinal,[E.ScaleTypes.DIVERGING]:nC.scaleDiverging};class nI{constructor(){(0,b.default)(this,"scaleOptions",{});}apply(n,{styleAttributeService:r}){var i,a=this;n.hooks.init.tapPromise("FeatureScalePlugin",(0,g.default)(function*(){var i;n.log(E.IDebugLog.ScaleInitStart,E.ILayerStage.INIT),a.scaleOptions=n.getScaleOptions();let o=r.getLayerStyleAttributes(),s=null===(i=n.getSource())||void 0===i?void 0:i.data.dataArray;Array.isArray(s)&&0===s.length||(a.caculateScalesForAttributes(o||[],s),n.log(E.IDebugLog.ScaleInitEnd,E.ILayerStage.INIT));})),n.hooks.beforeRenderData.tapPromise("FeatureScalePlugin",(i=(0,g.default)(function*(i){if(!i)return i;n.log(E.IDebugLog.ScaleInitStart,E.ILayerStage.UPDATE),a.scaleOptions=n.getScaleOptions();let o=r.getLayerStyleAttributes(),s=n.getSource().data.dataArray;return!!Array.isArray(s)&&0===s.length||(a.caculateScalesForAttributes(o||[],s),n.log(E.IDebugLog.ScaleInitEnd,E.ILayerStage.UPDATE),n.layerModelNeedUpdate=!0,!0);}),function(n){return i.apply(this,arguments);})),n.hooks.beforeRender.tap("FeatureScalePlugin",()=>{if(n.layerModelNeedUpdate)return;this.scaleOptions=n.getScaleOptions();let i=r.getLayerStyleAttributes(),a=n.getSource().data.dataArray;if((!Array.isArray(a)||0!==a.length)&&i){let n=i.filter(n=>n.needRescale);n.length&&this.caculateScalesForAttributes(n,a);}});}isNumber(n){return!isNaN(parseFloat(n))&&isFinite(n);}caculateScalesForAttributes(n,r){n.forEach(n=>{if(n.scale){let i=n.scale,a=n.scale.field;i.names=this.parseFields(nO(a)?[]:a);let o=[];i.names.forEach(i=>{var a;o.push(this.createScale(i,n.name,null===(a=n.scale)||void 0===a?void 0:a.values,r));}),o.some(n=>n.type===E.StyleScaleType.VARIABLE)?(i.type=E.StyleScaleType.VARIABLE,o.forEach(n=>{var r,a;if(!i.callback&&"text"!==i.values)switch(null===(r=n.option)||void 0===r?void 0:r.type){case E.ScaleTypes.LOG:case E.ScaleTypes.LINEAR:case E.ScaleTypes.POWER:if(i.values&&i.values.length>2){let r=n.scale.ticks(i.values.length);n.scale.domain(r);}i.values?n.scale.range(i.values):n.scale.range(n.option.domain);break;case E.ScaleTypes.QUANTILE:case E.ScaleTypes.QUANTIZE:case E.ScaleTypes.THRESHOLD:n.scale.range(i.values);break;case E.ScaleTypes.IDENTITY:break;case E.ScaleTypes.CAT:i.values?n.scale.range(i.values):n.scale.range(n.option.domain);break;case E.ScaleTypes.DIVERGING:case E.ScaleTypes.SEQUENTIAL:n.scale.interpolator(W.interpolateRgbBasis(i.values));}"text"===i.values&&n.scale.range(null===(a=n.option)||void 0===a?void 0:a.domain);})):(i.type=E.StyleScaleType.CONSTANT,i.defaultValues=o.map((n,r)=>n.scale(i.names[r]))),i.scalers=o.map(n=>({field:n.field,func:n.scale,option:n.option})),n.needRescale=!1;}});}parseFields(n){return Array.isArray(n)?n:nM(n)?n.split("*"):[n];}createScale(n,r,i,a){var o,s;let l=this.scaleOptions[r]&&(null===(o=this.scaleOptions[r])||void 0===o?void 0:o.field)===n?this.scaleOptions[r]:this.scaleOptions[n],u={field:n,scale:void 0,type:E.StyleScaleType.VARIABLE,option:l};if(!a||!a.length)return l&&l.type?u.scale=this.createDefaultScale(l):(u.scale=nC.scaleOrdinal([n]),u.type=E.StyleScaleType.CONSTANT),u;let c=null===(s=a.find(r=>!nO(r[n])))||void 0===s?void 0:s[n];if(this.isNumber(n)||nO(c)&&!l)u.scale=nC.scaleOrdinal([n]),u.type=E.StyleScaleType.CONSTANT;else{let r=l&&l.type||this.getDefaultType(c);"text"===i&&(r=E.ScaleTypes.CAT),void 0===i&&(r=E.ScaleTypes.IDENTITY);let o=this.createScaleConfig(r,n,l,a);u.scale=this.createDefaultScale(o),u.option=o;}return u;}getDefaultType(n){let r=E.ScaleTypes.LINEAR;return"string"==typeof n&&(r=nP.test(n)?E.ScaleTypes.TIME:E.ScaleTypes.CAT),r;}createScaleConfig(n,r,i,a){let o=(0,y.default)((0,y.default)({},i),{},{type:n});if(null!=o&&o.domain)return o;let s=[];if(n===E.ScaleTypes.QUANTILE){let n=new Map;null==a||a.forEach(i=>{n.set(i._id,i[r]);}),s=Array.from(n.values());}else s=(null==a?void 0:a.map(n=>n[r]))||[];if(n===E.ScaleTypes.CAT||n===E.ScaleTypes.IDENTITY)o.domain=nR(s);else if(n===E.ScaleTypes.QUANTILE)o.domain=s;else if(n===E.ScaleTypes.DIVERGING){let n=M(s),r=(null==i?void 0:i.neutral)!==void 0?null==i?void 0:i.neutral:(n[0]+n[1])/2;o.domain=[n[0],r,n[1]];}else o.domain=M(s);return o;}createDefaultScale({type:n,domain:r,unknown:i,clamp:a,nice:o}){let s=nk[n]();return r&&s.domain&&s.domain(r),i&&s.unknown(i),void 0!==a&&s.clamp&&s.clamp(a),void 0!==o&&s.nice&&s.nice(o),s;}}class nL{apply(n){n.hooks.beforeRender.tap("LayerAnimateStylePlugin",()=>{n.animateStatus&&n.models.forEach(r=>{r.addUniforms((0,y.default)({},n.layerModel.getAnimateUniforms()));});});}}class nN{apply(n){n.hooks.afterInit.tap("LayerMaskPlugin",()=>{let{maskLayers:r,enableMask:i}=n.getLayerConfig();!n.tileLayer&&r&&r.length>0&&n.updateLayerConfig({mask:i});});}}class nD{build(n){return(0,g.default)(function*(){n.prepareBuildModel(),yield n.buildModels();})();}initLayerModel(n){var r=this;return(0,g.default)(function*(){yield r.build(n),n.styleNeedUpdate=!1;})();}prepareLayerModel(n){var r=this;return(0,g.default)(function*(){yield r.build(n),n.styleNeedUpdate=!1;})();}apply(n){var r,i=this;n.hooks.init.tapPromise("LayerModelPlugin",(0,g.default)(function*(){if(n.getSource().isTile){n.prepareBuildModel();return;}n.log(E.IDebugLog.BuildModelStart,E.ILayerStage.INIT),yield i.initLayerModel(n),n.log(E.IDebugLog.BuildModelEnd,E.ILayerStage.INIT);})),n.hooks.beforeRenderData.tapPromise("LayerModelPlugin",(r=(0,g.default)(function*(r){return!!r&&!n.getSource().isTile&&(n.log(E.IDebugLog.BuildModelStart,E.ILayerStage.UPDATE),yield i.prepareLayerModel(n),n.log(E.IDebugLog.BuildModelEnd,E.ILayerStage.UPDATE),!0);}),function(n){return r.apply(this,arguments);}));}}class nF{apply(n){n.hooks.afterInit.tap("LayerStylePlugin",()=>{let{autoFit:r,fitBoundsOptions:i}=n.getLayerConfig();r&&n.fitBounds(i),n.styleNeedUpdate=!1;});}}let nB=["type"],nj={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},nz={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},nU={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},nV={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5};class nG{apply(n){n.hooks.beforeRender.tap("LightingPlugin",()=>{let{enableLighting:r}=n.getLayerConfig();r&&n.models.forEach(n=>n.addUniforms((0,y.default)({},function(n){let r={u_DirectionalLights:[,,,].fill((0,y.default)({},nU)),u_NumOfDirectionalLights:0,u_SpotLights:[,,,].fill((0,y.default)({},nV)),u_NumOfSpotLights:0};return n&&n.length||(n=[nz]),n.forEach(n=>{let{type:i="directional"}=n,a=(0,p.default)(n,nB),o=nj[i].lights,s=nj[i].num,l=r[s];r[o][l]=(0,y.default)((0,y.default)({},r[o][l]),a),r[s]++;}),r;}())));});}}function nH(n){return n.map(n=>("string"==typeof n&&(n=[n,{}]),n));}function nW(n,r,i,a){let o=n.multiPassRenderer;return o.add(a("render")),nH(r).forEach(n=>{let[r,a]=n;o.add(i(r),a);}),o.add(i("copy")),o;}class nX{constructor(){(0,b.default)(this,"enabled",void 0);}apply(n,{rendererService:r,postProcessingPassFactory:i,normalPassFactory:a}){n.hooks.init.tapPromise("MultiPassRendererPlugin",()=>{let{enableMultiPassRenderer:r,passes:o=[]}=n.getLayerConfig();this.enabled=!!r&&!1!==n.getLayerConfig().enableMultiPassRenderer,this.enabled&&(n.multiPassRenderer=nW(n,o,i,a),n.multiPassRenderer.setRenderFlag(!0));}),n.hooks.beforeRender.tap("MultiPassRendererPlugin",()=>{if(this.enabled){let{width:i,height:a}=r.getViewportSize();n.multiPassRenderer.resize(i,a);}});}}var nq=i("b278ecbe");let{isNumber:n$}=T.lodashUtil,nY={ENCODE:1,HIGHLIGHT:2};class nZ{constructor(){(0,b.default)(this,"pickingUniformMap",void 0);}pickOption2Array(){let n=[];return this.pickingUniformMap.forEach(r=>{n$(r)?n.push(r):n.push(...r);}),n;}updatePickOption(n,r){Object.keys(n).forEach(r=>{this.pickingUniformMap.set(r,n[r]);});let i=r.getLayerConfig().pickingBuffer||0,a=Number(r.getShaderPickStat());this.pickingUniformMap.set("u_PickingBuffer",i),this.pickingUniformMap.set("u_shaderPick",a),r.getPickingUniformBuffer().subData({offset:0,data:this.pickOption2Array()});}apply(n,{styleAttributeService:r}){this.pickingUniformMap=new Map([["u_HighlightColor",[1,0,0,1]],["u_SelectColor",[1,0,0,1]],["u_PickingColor",[0,0,0]],["u_PickingStage",0],["u_CurrentSelectedId",[0,0,0]],["u_PickingThreshold",10],["u_PickingBuffer",0],["u_shaderPick",0],["u_activeMix",0]]),n.hooks.init.tapPromise("PixelPickingPlugin",()=>{let{enablePicking:i}=n.getLayerConfig();r.registerStyleAttribute({name:"pickingColor",type:E.AttributeType.Attribute,descriptor:{name:"a_PickingColor",shaderLocation:nq.COMMON_ATTRIBUTE_LOCATION.PICKING_COLOR,buffer:{data:[],type:E.gl.FLOAT},size:3,update:n=>{let{id:r}=n;return i?(0,T.encodePickingColor)(r):[0,0,0];}}});}),n.hooks.beforePickingEncode.tap("PixelPickingPlugin",()=>{let{enablePicking:r}=n.getLayerConfig();r&&n.isVisible()&&(this.updatePickOption({u_PickingStage:nY.ENCODE},n),n.models.forEach(n=>n.addUniforms({u_PickingStage:nY.ENCODE})));}),n.hooks.afterPickingEncode.tap("PixelPickingPlugin",()=>{let{enablePicking:r}=n.getLayerConfig();r&&n.isVisible()&&(this.updatePickOption({u_PickingStage:nY.HIGHLIGHT},n),n.models.forEach(n=>n.addUniforms({u_PickingStage:nY.HIGHLIGHT})));}),n.hooks.beforeHighlight.tap("PixelPickingPlugin",r=>{let{highlightColor:i,activeMix:a=0}=n.getLayerConfig(),o="string"==typeof i?(0,T.rgb2arr)(i):i||[1,0,0,1];n.updateLayerConfig({pickedFeatureID:(0,T.decodePickingColor)(new Uint8Array(r))});let s={u_PickingStage:nY.HIGHLIGHT,u_PickingColor:r,u_HighlightColor:o.map(n=>255*n),u_activeMix:a};this.updatePickOption(s,n),n.models.forEach(n=>n.addUniforms(s));}),n.hooks.beforeSelect.tap("PixelPickingPlugin",r=>{let{selectColor:i,selectMix:a=0}=n.getLayerConfig(),o="string"==typeof i?(0,T.rgb2arr)(i):i||[1,0,0,1];n.updateLayerConfig({pickedFeatureID:(0,T.decodePickingColor)(new Uint8Array(r))});let s={u_PickingStage:nY.HIGHLIGHT,u_PickingColor:r,u_HighlightColor:o.map(n=>255*n),u_activeMix:a,u_CurrentSelectedId:r,u_SelectColor:o.map(n=>255*n)};this.updatePickOption(s,n),n.models.forEach(n=>n.addUniforms(s));});}}let nK=["mvt","geojsonvt","testTile"];class nQ{apply(n,{styleAttributeService:r}){n.hooks.init.tapPromise("RegisterStyleAttributePlugin",()=>{!function(n){let r=n.getSource();return nK.includes(r.parser.type);}(n)&&this.registerBuiltinAttributes(r,n);});}registerBuiltinAttributes(n,r){if("MaskLayer"===r.type){this.registerPositionAttribute(n);return;}this.registerPositionAttribute(n),this.registerColorAttribute(n);}registerPositionAttribute(n){n.registerStyleAttribute({name:"position",type:E.AttributeType.Attribute,descriptor:{name:"a_Position",shaderLocation:nq.COMMON_ATTRIBUTE_LOCATION.POSITION,buffer:{data:[],type:E.gl.FLOAT},size:3,update:(n,r,i)=>2===i.length?[i[0],i[1],0]:[i[0],i[1],i[2]]}});}registerColorAttribute(n){n.registerStyleAttribute({name:"color",type:E.AttributeType.Attribute,descriptor:{name:"a_Color",shaderLocation:nq.COMMON_ATTRIBUTE_LOCATION.COLOR,buffer:{usage:E.gl.DYNAMIC_DRAW,data:[],type:E.gl.FLOAT},size:4,update:n=>{let{color:r}=n;return r&&r.length?r:[1,1,1,1];}}});}}class nJ{constructor(){(0,b.default)(this,"cameraService",void 0),(0,b.default)(this,"coordinateSystemService",void 0),(0,b.default)(this,"rendererService",void 0),(0,b.default)(this,"mapService",void 0),(0,b.default)(this,"layerService",void 0);}apply(n,{rendererService:r,mapService:i,layerService:a,coordinateSystemService:o,cameraService:s}){let l;this.rendererService=r,this.mapService=i,this.layerService=a,this.coordinateSystemService=o,this.cameraService=s,this.rendererService.uniformBuffers[0]||(l=this.rendererService.createBuffer({data:new Float32Array(96),isUBO:!0,label:"renderUniformBuffer"}),this.rendererService.uniformBuffers[0]=l),n.hooks.beforeRender.tap("ShaderUniformPlugin",()=>{let r=n.getRelativeOrigin&&n.getRelativeOrigin()||[0,0];this.coordinateSystemService.refresh(),r&&(Math.abs(r[0])>1e-4||Math.abs(r[1])>1e-4)&&2===this.coordinateSystemService.getCoordinateSystem()&&this.coordinateSystemService.setViewportCenter(r);let{width:i,height:a}=this.rendererService.getViewportSize(),{data:o,uniforms:s}=this.generateUBO(i,a,r);this.layerService.alreadyInRendering&&this.rendererService.uniformBuffers[0]&&this.rendererService.uniformBuffers[0].subData({offset:0,data:o}),"WebGL1"===this.rendererService.queryVerdorInfo()&&n.models.forEach(r=>{r.addUniforms((0,y.default)((0,y.default)({},s),{},{u_PickingBuffer:n.getLayerConfig().pickingBuffer||0,u_shaderPick:Number(n.getShaderPickStat())}));});});}generateUBO(n,r,i){let a=this.cameraService.getProjectionMatrix(),o=this.cameraService.getViewMatrix(),s=this.cameraService.getViewProjectionMatrix(),l=this.cameraService.getModelMatrix(),u=this.coordinateSystemService.getViewportCenterProjection(),c=this.coordinateSystemService.getPixelsPerDegree(),f=this.cameraService.getZoom(),d=this.coordinateSystemService.getPixelsPerDegree2(),h=this.cameraService.getZoomScale(),p=this.coordinateSystemService.getPixelsPerMeter(),m=this.coordinateSystemService.getCoordinateSystem(),g=this.cameraService.getCameraPosition(),v=window.devicePixelRatio,y=this.coordinateSystemService.getViewportCenter(),_=[n,r],b=this.cameraService.getFocalDistance(),x=i&&i.length>=2?[i[0],i[1]]:[0,0];return{data:[...o,...a,...s,...l,...u,...c,f,...d,h,...p,m,...g,v,...y,..._,b,...x,0],uniforms:{[E.CameraUniform.ProjectionMatrix]:a,[E.CameraUniform.ViewMatrix]:o,[E.CameraUniform.ViewProjectionMatrix]:s,[E.CameraUniform.Zoom]:f,[E.CameraUniform.ZoomScale]:h,[E.CameraUniform.FocalDistance]:b,[E.CameraUniform.CameraPosition]:g,[E.CoordinateUniform.CoordinateSystem]:m,[E.CoordinateUniform.ViewportCenter]:y,[E.CoordinateUniform.ViewportCenterProjection]:u,[E.CoordinateUniform.PixelsPerDegree]:c,[E.CoordinateUniform.PixelsPerDegree2]:d,[E.CoordinateUniform.PixelsPerMeter]:p,u_ViewportSize:_,u_ModelMatrix:l,u_DevicePixelRatio:v,u_RelativeOrigin:x}};}}class n0{apply(n){n.hooks.beforeRender.tap("UpdateModelPlugin",()=>{n.layerModel&&n.layerModel.needUpdate().then(r=>{r&&n.renderLayers();});}),n.hooks.afterRender.tap("UpdateModelPlugin",()=>{n.layerModelNeedUpdate=!1;});}}class n1{apply(n,{styleAttributeService:r}){n.hooks.init.tapPromise("UpdateStyleAttributePlugin",()=>{this.initStyleAttribute(n,{styleAttributeService:r});}),n.hooks.beforeRender.tap("UpdateStyleAttributePlugin",()=>{!n.layerModelNeedUpdate&&n.inited&&this.updateStyleAttribute(n,{styleAttributeService:r});});}updateStyleAttribute(n,{styleAttributeService:r}){let i=r.getLayerStyleAttributes()||[],a=r.getLayerStyleAttribute("filter");if(a&&a.needRegenerateVertices){n.layerModelNeedUpdate=!0,i.forEach(n=>n.needRegenerateVertices=!1);return;}i.filter(n=>n.needRegenerateVertices).forEach(i=>{r.updateAttributeByFeatureRange(i.name,n.getEncodedData(),i.featureRange.startIndex,i.featureRange.endIndex,n),i.needRegenerateVertices=!1;});}initStyleAttribute(n,{styleAttributeService:r}){(r.getLayerStyleAttributes()||[]).filter(n=>n.needRegenerateVertices).forEach(i=>{r.updateAttributeByFeatureRange(i.name,n.getEncodedData(),i.featureRange.startIndex,i.featureRange.endIndex),i.needRegenerateVertices=!1;});}}var n2=i("2a0a75c8");class n3{constructor(n){(0,b.default)(this,"layer",void 0),this.layer=n;}pickRender(n){let r=this.layer.getContainer().layerService,i=this.layer;if(i.tileLayer)return i.tileLayer.pickRender(n);i.hooks.beforePickingEncode.call(),r.renderTileLayerMask(i),i.renderModels({ispick:!0}),i.hooks.afterPickingEncode.call();}pick(n,r){var i=this;return(0,g.default)(function*(){let a=i.layer.getContainer().pickingService;return"RasterLayer"===n.type?i.pickRasterLayer(n,r):(i.pickRender(r),a.pickFromPickingFBO(n,r));})();}pickRasterLayer(n,r,i){let a=this.layer.getContainer(),o=a.pickingService,s=a.mapService,l=this.layer.getSource().extent,u=(0,T.lngLatInExtent)(r.lngLat,l),c={x:r.x,y:r.y,type:r.type,lngLat:r.lngLat,target:r,rasterValue:null},f=i||n;if(!u)return c.type="mousemove"===r.type?"mouseout":"un"+r.type,o.triggerHoverOnLayer(f,(0,y.default)((0,y.default)({},c),{},{type:"unpick"})),o.triggerHoverOnLayer(f,c),!1;{let i=this.readRasterValue(n,l,s,r.x,r.y);return c.rasterValue=i,o.triggerHoverOnLayer(f,c),!0;}}readRasterValue(n,r,i,a,o){let s=n.getSource().data.dataArray[0],[l=0,u=0,c=10,f=-10]=r,d=i.lngLatToContainer([l,u]),h=i.lngLatToContainer([c,f]),p=h.x-d.x,m=d.y-h.y,g=[(a-d.x)/p,(o-h.y)/m],v=s.width||1,y=s.height||1,_=Math.floor(g[0]*v),b=Math.max(0,Math.floor(g[1]*y)-1)*v+_;return s.data[b];}selectFeature(n){let r=this.layer,[i,a,o]=n;r.hooks.beforeSelect.call([i,a,o]);}highlightPickedFeature(n){let[r,i,a]=n;this.layer.hooks.beforeHighlight.call([r,i,a]);}getFeatureById(n){return this.layer.getSource().getFeatureById(n);}}class n4{constructor(n){(0,b.default)(this,"layer",void 0),(0,b.default)(this,"rendererService",void 0),(0,b.default)(this,"colorTexture",void 0),(0,b.default)(this,"key",void 0),this.layer=n;let r=this.layer.getContainer();this.rendererService=r.rendererService;}getColorTexture(n,r){let i=this.getTextureKey(n,r);return this.key===i||(this.createColorTexture(n,r),this.key=i),this.colorTexture;}createColorTexture(n,r){let{createTexture2D:i}=this.rendererService,a=this.getColorRampBar(n,r),o=i({data:new Uint8Array(a.data),width:a.width,height:a.height,flipY:!1,unorm:!0});return this.colorTexture=o,o;}setColorTexture(n,r,i){this.key=this.getTextureKey(r,i),this.colorTexture=n;}destroy(){var n;null===(n=this.colorTexture)||void 0===n||n.destroy();}getColorRampBar(n,r){switch(n.type){case"cat":return(0,T.generateCatRamp)(n);case"quantize":return(0,T.generateQuantizeRamp)(n);case"custom":return(0,T.generateCustomRamp)(n,r);case"linear":return(0,T.generateLinearRamp)(n,r);default:return(0,T.generateColorRamp)(n);}}getTextureKey(n,r){var i;return`${n.colors.join("_")}_${null==n||null===(i=n.positions)||void 0===i?void 0:i.join("_")}_${n.type}_${null==r?void 0:r.join("_")}`;}}let n5=["passes"],n6=["moduleName","vertexShader","fragmentShader","defines","inject","triangulation","styleOption","pickingEnabled"],{isEqual:n8,isFunction:n7,isNumber:n9,isObject:re,isPlainObject:rt,isUndefined:rn}=T.lodashUtil,rr=0;class ri extends A.EventEmitter{get shaderModuleService(){return this.container.shaderModuleService;}get cameraService(){return this.container.cameraService;}get coordinateService(){return this.container.coordinateSystemService;}get iconService(){return this.container.iconService;}get fontService(){return this.container.fontService;}get pickingService(){return this.container.pickingService;}get rendererService(){return this.container.rendererService;}get layerService(){return this.container.layerService;}get debugService(){return this.container.debugService;}get interactionService(){return this.container.interactionService;}get mapService(){var n;return null===(n=this.container)||void 0===n?void 0:n.mapService;}get normalPassFactory(){return this.container.normalPassFactory;}constructor(n={}){super(),(0,b.default)(this,"id",`${rr++}`),(0,b.default)(this,"name",`${rr}`),(0,b.default)(this,"parent",void 0),(0,b.default)(this,"coordCenter",void 0),(0,b.default)(this,"type",void 0),(0,b.default)(this,"visible",!0),(0,b.default)(this,"zIndex",0),(0,b.default)(this,"minZoom",void 0),(0,b.default)(this,"maxZoom",void 0),(0,b.default)(this,"inited",!1),(0,b.default)(this,"layerModelNeedUpdate",!1),(0,b.default)(this,"pickedFeatureID",null),(0,b.default)(this,"selectedFeatureID",null),(0,b.default)(this,"styleNeedUpdate",!1),(0,b.default)(this,"rendering",void 0),(0,b.default)(this,"forceRender",!1),(0,b.default)(this,"clusterZoom",0),(0,b.default)(this,"layerType",void 0),(0,b.default)(this,"triangulation",void 0),(0,b.default)(this,"layerPickService",void 0),(0,b.default)(this,"textureService",void 0),(0,b.default)(this,"defaultSourceConfig",{data:[],options:{parser:{type:"json"}}}),(0,b.default)(this,"dataState",{dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1}),(0,b.default)(this,"hooks",{init:new x.AsyncSeriesBailHook,afterInit:new x.SyncBailHook,beforeRender:new x.SyncBailHook,beforeRenderData:new x.AsyncWaterfallHook,afterRender:new x.SyncHook,beforePickingEncode:new x.SyncHook,afterPickingEncode:new x.SyncHook,beforeHighlight:new x.SyncHook(["pickedColor"]),afterHighlight:new x.SyncHook,beforeSelect:new x.SyncHook(["pickedColor"]),afterSelect:new x.SyncHook,beforeDestroy:new x.SyncHook,afterDestroy:new x.SyncHook}),(0,b.default)(this,"models",[]),(0,b.default)(this,"multiPassRenderer",void 0),(0,b.default)(this,"plugins",void 0),(0,b.default)(this,"startInit",!1),(0,b.default)(this,"sourceOption",void 0),(0,b.default)(this,"layerModel",void 0),(0,b.default)(this,"shapeOption",void 0),(0,b.default)(this,"tileLayer",void 0),(0,b.default)(this,"layerChildren",[]),(0,b.default)(this,"masks",[]),(0,b.default)(this,"configService",E.globalConfigService),(0,b.default)(this,"styleAttributeService",void 0),(0,b.default)(this,"layerSource",void 0),(0,b.default)(this,"postProcessingPassFactory",void 0),(0,b.default)(this,"animateOptions",{enable:!1}),(0,b.default)(this,"relativeOrigin",[0,0]),(0,b.default)(this,"originalExtent",[0,0,0,0]),(0,b.default)(this,"absoluteDataArray",[]),(0,b.default)(this,"container",void 0),(0,b.default)(this,"encodedData",void 0),(0,b.default)(this,"currentPickId",null),(0,b.default)(this,"rawConfig",void 0),(0,b.default)(this,"needUpdateConfig",void 0),(0,b.default)(this,"encodeStyleAttribute",{}),(0,b.default)(this,"enableShaderEncodeStyles",[]),(0,b.default)(this,"enableDataEncodeStyles",[]),(0,b.default)(this,"pendingStyleAttributes",[]),(0,b.default)(this,"scaleOptions",{}),(0,b.default)(this,"animateStartTime",void 0),(0,b.default)(this,"animateStatus",!1),(0,b.default)(this,"isDestroyed",!1),(0,b.default)(this,"uniformBuffers",[]),(0,b.default)(this,"encodeDataLength",0),(0,b.default)(this,"sourceEvent",()=>{this.dataState.dataSourceNeedUpdate=!0,this.processRelativeCoordinates();let n=this.getLayerConfig();n&&n.autoFit&&this.fitBounds(n.fitBoundsOptions),this.layerSource.getSourceCfg().autoRender&&setTimeout(()=>{this.reRender();},10);}),this.name=n.name||this.id,this.zIndex=n.zIndex||0,this.rawConfig=n,this.masks=n.maskLayers||[];}addMask(n){this.masks.push(n),this.updateLayerConfig({maskLayers:this.masks}),this.enableMask();}removeMask(n){let r=this.masks.indexOf(n);r>-1&&this.masks.splice(r,1),this.updateLayerConfig({maskLayers:this.masks});}disableMask(){this.updateLayerConfig({enableMask:!1});}enableMask(){this.updateLayerConfig({enableMask:!0});}addMaskLayer(n){this.masks.push(n);}removeMaskLayer(n){let r=this.masks.indexOf(n);r>-1&&this.masks.splice(r,1),n.destroy();}getAttribute(n){return this.styleAttributeService.getLayerStyleAttribute(n);}getLayerConfig(){return this.configService.getLayerConfig(this.id);}updateLayerConfig(n){if(Object.keys(n).map(r=>{r in this.rawConfig&&(this.rawConfig[r]=n[r]);}),this.startInit){let r=this.container.id;this.configService.setLayerConfig(r,this.id,(0,y.default)((0,y.default)((0,y.default)({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),n)),this.needUpdateConfig={};}else this.needUpdateConfig=(0,y.default)((0,y.default)({},this.needUpdateConfig),n);}setContainer(n){this.container=n;}getContainer(){return this.container;}addPlugin(n){return this.plugins.push(n),this;}init(){var n=this;return(0,g.default)(function*(){let r=n.container.id;n.startInit=!0,n.configService.setLayerConfig(r,n.id,n.rawConfig),n.layerType=n.rawConfig.layerType;let{enableMultiPassRenderer:i,passes:a}=n.getLayerConfig();for(let r of(i&&null!=a&&a.length&&a.length>0&&n.mapService.on("mapAfterFrameChange",()=>{n.renderLayers();}),n.postProcessingPassFactory=n.container.postProcessingPassFactory,n.styleAttributeService=n.container.styleAttributeService,i&&(n.multiPassRenderer=n.container.multiPassRenderer,n.multiPassRenderer.setLayer(n)),n.pendingStyleAttributes.forEach(({attributeName:r,attributeField:i,attributeValues:a,updateOptions:o})=>{n.styleAttributeService.updateStyleAttribute(r,{scale:(0,y.default)({field:i},n.splitValuesAndCallbackInAttribute(a,i?void 0:n.getLayerConfig()[r]))},o);}),n.pendingStyleAttributes=[],n.plugins=[new O,new nQ,new nI,new C,new nF,new nN,new n1,new n0,new nX,new nJ,new nL,new nG,new nZ,new nD],n.plugins))r.apply(n,n.container);n.layerPickService=new n3(n),n.textureService=new n4(n),n.log(E.IDebugLog.LayerInitStart),yield n.hooks.init.promise(),n.log(E.IDebugLog.LayerInitEnd),n.inited=!0,n.emit("inited",{target:n,type:"inited"}),n.emit("add",{target:n,type:"add"}),n.hooks.afterInit.call();})();}log(n,r="init"){var i;if(this.tileLayer||this.isTileLayer)return;let a=`${this.id}.${r}.${n}`,o={id:this.id,type:this.type};null===(i=this.debugService)||void 0===i||i.log(a,o);}updateModelData(n){n.attributes&&n.elements?this.models.map(r=>{r.updateAttributesAndElements(n.attributes,n.elements);}):console.warn("data error");}setLayerPickService(n){this.layerPickService=n;}prepareBuildModel(){0!==Object.keys(this.needUpdateConfig||{}).length&&this.updateLayerConfig({});let{animateOption:n}=this.getLayerConfig();null!=n&&n.enable&&(this.layerService.startAnimate(),this.animateStatus=!0);}color(n,r,i){return this.updateStyleAttribute("color",n,r,i),this;}texture(n,r,i){return this.updateStyleAttribute("texture",n,r,i),this;}rotate(n,r,i){return this.updateStyleAttribute("rotate",n,r,i),this;}size(n,r,i){return this.updateStyleAttribute("size",n,r,i),this;}filter(n,r,i){let a=this.updateStyleAttribute("filter",n,r,i);return this.dataState.dataSourceNeedUpdate=a&&this.inited,this;}shape(n,r,i){this.shapeOption={field:n,values:r};let a=this.updateStyleAttribute("shape",n,r,i);return this.dataState.dataSourceNeedUpdate=a&&this.inited,this;}label(n,r,i){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:n,attributeValues:r,updateOptions:i}),this;}animate(n){let r={};return re(n)?(r.enable=!0,r=(0,y.default)((0,y.default)({},r),n)):r.enable=n,this.updateLayerConfig({animateOption:r}),this;}source(n,r){return(null==n?void 0:n.type)==="source"?this.setSource(n):(this.sourceOption={data:n,options:r},this.clusterZoom=0),this;}setData(n,r){return this.inited?(this.dataUpdatelog(),this.layerSource.setData(n,r)):this.on("inited",()=>{this.dataUpdatelog(),this.layerSource.setData(n,r);}),this;}dataUpdatelog(){this.log(E.IDebugLog.SourceInitStart,E.ILayerStage.UPDATE),this.layerSource.once("update",()=>{this.log(E.IDebugLog.SourceInitEnd,E.ILayerStage.UPDATE);});}style(n){let{passes:r}=n,i=(0,p.default)(n,n5);return r&&nH(r).forEach(n=>{let r=this.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(n[0]);r&&r.updateOptions(n[1]);}),i.borderColor&&(i.stroke=i.borderColor),i.borderWidth&&(i.strokeWidth=i.borderWidth),Object.keys(i).forEach(n=>{let r=i[n];!Array.isArray(r)||2!==r.length||n9(r[0])||n9(r[1])||(i[n]={field:r[0],value:r[1]});}),this.encodeStyle(i),this.updateLayerConfig(i),this;}encodeStyle(n){Object.keys(n).forEach(r=>{[...this.enableShaderEncodeStyles,...this.enableDataEncodeStyles].includes(r)&&rt(n[r])&&(n[r].field||n[r].value)&&!n8(this.encodeStyleAttribute[r],n[r])?(this.encodeStyleAttribute[r]=n[r],this.updateStyleAttribute(r,n[r].field,n[r].value),this.inited&&(this.dataState.dataMappingNeedUpdate=!0)):this.encodeStyleAttribute[r]&&(delete this.encodeStyleAttribute[r],this.dataState.dataSourceNeedUpdate=!0);});}scale(n,r){let i=(0,y.default)({},this.scaleOptions);if(re(n)?this.scaleOptions=(0,y.default)((0,y.default)({},this.scaleOptions),n):this.scaleOptions[n]=r,this.styleAttributeService&&!n8(i,this.scaleOptions)){let i=re(n)?n:{[n]:r};this.styleAttributeService.updateScaleAttribute(i);}return this;}renderLayers(){this.rendering=!0,this.layerService.reRender(),this.rendering=!1;}prerender(){}render(n={}){return this.tileLayer?this.tileLayer.render():(this.layerService.beforeRenderData(this),this.encodeDataLength<=0&&!this.forceRender||this.renderModels(n)),this;}renderMultiPass(){var n=this;return(0,g.default)(function*(){(!(n.encodeDataLength<=0)||n.forceRender)&&(n.multiPassRenderer&&n.multiPassRenderer.getRenderFlag()?yield n.multiPassRenderer.render():n.renderModels());})();}active(n){let r={};return r.enableHighlight=!!re(n)||n,re(n)?(r.enableHighlight=!0,n.color&&(r.highlightColor=n.color),n.mix&&(r.activeMix=n.mix)):r.enableHighlight=!!n,this.updateLayerConfig(r),this;}setActive(n,r){if(re(n)){let{x:i=0,y:a=0}=n;this.updateLayerConfig({highlightColor:re(r)?r.color:this.getLayerConfig().highlightColor,activeMix:re(r)?r.mix:this.getLayerConfig().activeMix}),this.pick({x:i,y:a});}else this.updateLayerConfig({pickedFeatureID:n,highlightColor:re(r)?r.color:this.getLayerConfig().highlightColor,activeMix:re(r)?r.mix:this.getLayerConfig().activeMix}),this.hooks.beforeHighlight.call((0,T.encodePickingColor)(n)).then(()=>{setTimeout(()=>{this.reRender();},1);});}select(n){let r={};return r.enableSelect=!!re(n)||n,re(n)?(r.enableSelect=!0,n.color&&(r.selectColor=n.color),n.mix&&(r.selectMix=n.mix)):r.enableSelect=!!n,this.updateLayerConfig(r),this;}setSelect(n,r){if(re(n)){let{x:i=0,y:a=0}=n;this.updateLayerConfig({selectColor:re(r)?r.color:this.getLayerConfig().selectColor,selectMix:re(r)?r.mix:this.getLayerConfig().selectMix}),this.pick({x:i,y:a});}else this.updateLayerConfig({pickedFeatureID:n,selectColor:re(r)?r.color:this.getLayerConfig().selectColor,selectMix:re(r)?r.mix:this.getLayerConfig().selectMix}),this.hooks.beforeSelect.call((0,T.encodePickingColor)(n)).then(()=>{setTimeout(()=>{this.reRender();},1);});}setBlend(n){return this.updateLayerConfig({blend:n}),this.reRender(),this;}show(){return this.updateLayerConfig({visible:!0}),this.reRender(),this.emit("show"),this;}hide(){return this.updateLayerConfig({visible:!1}),this.reRender(),this.emit("hide"),this;}setIndex(n){return this.zIndex=n,this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this;}setCurrentPickId(n){this.currentPickId=n;}getCurrentPickId(){return this.currentPickId;}setCurrentSelectedId(n){this.selectedFeatureID=n;}getCurrentSelectedId(){return this.selectedFeatureID;}isVisible(){let n=this.mapService.getZoom(),{visible:r,minZoom:i=-1/0,maxZoom:a=1/0}=this.getLayerConfig();return!!r&&n>=i&&n<a;}setMultiPass(n,r){if(this.updateLayerConfig({enableMultiPassRenderer:n}),r&&this.updateLayerConfig({passes:r}),n){let{passes:n=[]}=this.getLayerConfig();this.multiPassRenderer=nW(this,n,this.postProcessingPassFactory,this.normalPassFactory),this.multiPassRenderer.setRenderFlag(!0);let{width:r,height:i}=this.rendererService.getViewportSize();this.multiPassRenderer.resize(r,i);}return this;}setMinZoom(n){return this.updateLayerConfig({minZoom:n}),this;}getMinZoom(){let{minZoom:n}=this.getLayerConfig();return n;}getMaxZoom(){let{maxZoom:n}=this.getLayerConfig();return n;}get(n){return this.getLayerConfig()[n];}setMaxZoom(n){return this.updateLayerConfig({maxZoom:n}),this;}setAutoFit(n){return this.updateLayerConfig({autoFit:n}),this;}fitBounds(n){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;let r=this.getSource().extent;return r.some(n=>Math.abs(n)===1/0)||this.mapService.fitBounds([[r[0],r[1]],[r[2],r[3]]],n),this;}destroy(n=!0){var r,i,a,o,s;if(this.isDestroyed)return;null===(r=this.layerModel)||void 0===r||r.uniformBuffers.forEach(n=>{n.destroy();}),this.layerChildren.map(n=>n.destroy(!1)),this.layerChildren=[];let{maskfence:l}=this.getLayerConfig();l&&(this.masks.map(n=>n.destroy(!1)),this.masks=[]),this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),null===(i=this.multiPassRenderer)||void 0===i||i.destroy(),this.textureService.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),null===(a=this.layerModel)||void 0===a||a.clearModels(n),null===(o=this.tileLayer)||void 0===o||o.destroy(),this.models=[],null===(s=this.debugService)||void 0===s||s.removeLog(this.id),this.emit("remove",{target:this,type:"remove"}),this.emit("destroy",{target:this,type:"destroy"}),this.removeAllListeners(),this.isDestroyed=!0;}clear(){this.styleAttributeService.clearAllAttributes();}clearModels(){var n;this.models.forEach(n=>n.destroy()),null===(n=this.layerModel)||void 0===n||n.clearModels(),this.models=[];}isDirty(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(n=>n.needRescale||n.needRemapping||n.needRegenerateVertices).length;}setSource(n){if(this.layerSource&&this.layerSource.off("update",this.sourceEvent),this.layerSource=n,this.clusterZoom=0,this.inited&&this.layerSource.cluster){let n=this.mapService.getZoom();this.layerSource.updateClusterData(n);}this.layerSource.inited&&this.sourceEvent(),this.layerSource.on("update",({type:n})=>{if(void 0===this.coordCenter){let n=this.layerSource.center;this.coordCenter=n;}if("update"===n){if(this.tileLayer){this.tileLayer.reload();return;}this.sourceEvent();}"inited"===n&&this.processRelativeCoordinates();});}getSource(){return this.layerSource;}getScaleOptions(){return this.scaleOptions;}setEncodedData(n){this.encodedData=n,this.encodeDataLength=n.length;}getEncodedData(){return this.encodedData;}getScale(n){return this.styleAttributeService.getLayerAttributeScale(n);}getLegend(n){var r,i,a;let o=this.styleAttributeService.getLayerStyleAttribute(n);return{type:null===(i=((null==o||null===(r=o.scale)||void 0===r?void 0:r.scalers)||[])[0])||void 0===i||null===(i=i.option)||void 0===i?void 0:i.type,field:null==o||null===(a=o.scale)||void 0===a?void 0:a.field,items:this.getLegendItems(n)};}getLegendItems(n){let r=this.styleAttributeService.getLayerAttributeScale(n);return r?r.invertExtent?r.range().map(i=>({value:r.invertExtent(i),[n]:i})):r.ticks?r.ticks().map(i=>({value:i,[n]:r(i)})):null!=r&&r.domain?r.domain().filter(n=>!rn(n)).map(i=>({value:i,[n]:r(i)})):[]:[];}pick({x:n,y:r}){this.interactionService.triggerHover({x:n,y:r});}boxSelect(n,r){this.pickingService.boxPickLayer(this,n,r);}buildLayerModel(n){var r=this;return(0,g.default)(function*(){let{moduleName:i,vertexShader:a,fragmentShader:o,defines:s,inject:l,triangulation:u,styleOption:c,pickingEnabled:f=!0}=n,d=(0,p.default)(n,n6);r.shaderModuleService.registerModule(i,{vs:a,fs:o,defines:s,inject:l});let{vs:h,fs:m,uniforms:g}=r.shaderModuleService.getModule(i),{createModel:v}=r.rendererService;return new Promise(n=>{let{attributes:i,elements:a,count:o}=r.styleAttributeService.createAttributesAndIndices(r.encodedData,u,c,r),s=[...r.layerModel.uniformBuffers,...r.rendererService.uniformBuffers];f&&s.push(r.getPickingUniformBuffer());let l=(0,y.default)({attributes:i,uniforms:g,fs:m,vs:h,elements:a,blend:n2.BlendTypes[E.BlendType.normal],uniformBuffers:s,textures:r.layerModel.textures},d);o&&(l.count=o),n(v(l));});})();}createAttributes(n){let{triangulation:r}=n,{attributes:i}=this.styleAttributeService.createAttributes(this.encodedData,r);return i;}getTime(){return this.layerService.clock.getDelta();}setAnimateStartTime(){this.animateStartTime=this.layerService.clock.getElapsedTime();}stopAnimate(){this.animateStatus&&(this.layerService.stopAnimate(),this.animateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}));}getLayerAnimateTime(){return this.layerService.clock.getElapsedTime()-this.animateStartTime;}needPick(n){let{enableHighlight:r=!0,enableSelect:i=!0}=this.getLayerConfig(),a=-1!==this.eventNames().indexOf(n)||-1!==this.eventNames().indexOf("un"+n);return("click"===n||"dblclick"===n)&&i&&(a=!0),"mousemove"===n&&(r||-1!==this.eventNames().indexOf("mouseenter")||-1!==this.eventNames().indexOf("unmousemove")||-1!==this.eventNames().indexOf("mouseout"))&&(a=!0),this.isVisible()&&a;}buildModels(){return(0,g.default)(function*(){throw Error("Method not implemented.");})();}rebuildModels(){var n=this;return(0,g.default)(function*(){yield n.buildModels();})();}renderMulPass(n){return(0,g.default)(function*(){yield n.render();})();}renderModels(n={}){return this.encodeDataLength<=0&&!this.forceRender?this.clearModels():(this.hooks.beforeRender.call(),this.models.forEach(r=>{r.draw({uniforms:this.layerModel.getUninforms(),blend:this.layerModel.getBlend(),stencil:this.layerModel.getStencil(n),textures:this.layerModel.textures},(null==n?void 0:n.ispick)||!1);}),this.hooks.afterRender.call()),this;}updateStyleAttribute(n,r,i,a){return!n8((this.configService.getAttributeConfig(this.id)||{})[n],{field:r,values:i})&&(-1!==["color","size","texture","rotate","filter","label","shape"].indexOf(n)&&this.configService.setAttributeConfig(this.id,{[n]:{field:r,values:i}}),this.startInit?this.styleAttributeService.updateStyleAttribute(n,{scale:(0,y.default)({field:r},this.splitValuesAndCallbackInAttribute(i,this.getLayerConfig()[r]))},a):this.pendingStyleAttributes.push({attributeName:n,attributeField:r,attributeValues:i,updateOptions:a}),!0);}getLayerAttributeConfig(){return this.configService.getAttributeConfig(this.id);}getShaderPickStat(){return this.layerService.getShaderPickStat();}setEarthTime(n){console.warn("empty fn");}processData(n){return n;}getModelType(){throw Error("Method not implemented.");}getDefaultConfig(){return{};}processRelativeCoordinates(){if(!this.getLayerConfig().enableRelativeCoordinates||!this.layerSource||!this.layerSource.data)return;this.absoluteDataArray=[...this.layerSource.data.dataArray];let n=(0,S.processRelativeCoordinates)(this.layerSource.data.dataArray,{enableRelativeCoordinates:!0});this.layerSource.data.dataArray=n.dataArray,this.relativeOrigin=n.relativeOrigin,this.originalExtent=n.originalExtent;}getAbsoluteData(){return this.absoluteDataArray;}getRelativeOrigin(){return this.relativeOrigin;}getOriginalExtent(){return this.originalExtent;}initLayerModels(){var n=this;return(0,g.default)(function*(){n.models.forEach(n=>n.destroy()),n.models=[],n.uniformBuffers.forEach(n=>{n.destroy();}),n.uniformBuffers=[];let r=n.rendererService.createBuffer({data:new Float32Array(20).fill(0),isUBO:!0,label:"pickingUniforms"});n.uniformBuffers.push(r),n.models=yield n.layerModel.initModels();})();}getPickingUniformBuffer(){return this.uniformBuffers[0];}reRender(){this.inited&&this.layerService.reRender();}splitValuesAndCallbackInAttribute(n){return{values:n7(n)?void 0:n,callback:n7(n)?n:void 0};}}},e38deed2:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{operationsSchema:function(){return a;},percentile:function(){return o;}});var a={nd:{type:"operation",expression:["/",["-",["band",1],["band",0]],["+",["band",1],["band",0]]]},rgb:{type:"function",method:function(n,r){let i=n[0].rasterData,a=n[1].rasterData,s=n[2].rasterData,l=[],[u,c]=(null==r?void 0:r.countCut)||[2,98],f=(null==r?void 0:r.RMinMax)||o(i,u,c),d=(null==r?void 0:r.GMinMax)||o(a,u,c),h=(null==r?void 0:r.BMinMax)||o(s,u,c);for(let n=0;n<i.length;n++)l.push(Math.max(0,i[n]-f[0])),l.push(Math.max(0,a[n]-d[0])),l.push(Math.max(0,s[n]-h[0]));return{rasterData:l,rMinMax:f,gMinMax:d,bMinMax:h};}}};function o(n,r,i){let a=n.slice().sort((n,r)=>n-r),o=a.length;return[a[Math.ceil(o*r/100)],a[Math.ceil(o*i/100)]];}},e45ffa75:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),r.autoprefix=void 0;var a,o=(a=i("7d370577"))&&a.__esModule?a:{default:a},s=Object.assign||function(n){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a]);}return n;},l={borderRadius:function(n){return{msBorderRadius:n,MozBorderRadius:n,OBorderRadius:n,WebkitBorderRadius:n,borderRadius:n};},boxShadow:function(n){return{msBoxShadow:n,MozBoxShadow:n,OBoxShadow:n,WebkitBoxShadow:n,boxShadow:n};},userSelect:function(n){return{WebkitTouchCallout:n,KhtmlUserSelect:n,MozUserSelect:n,msUserSelect:n,WebkitUserSelect:n,userSelect:n};},flex:function(n){return{WebkitBoxFlex:n,MozBoxFlex:n,WebkitFlex:n,msFlex:n,flex:n};},flexBasis:function(n){return{WebkitFlexBasis:n,flexBasis:n};},justifyContent:function(n){return{WebkitJustifyContent:n,justifyContent:n};},transition:function(n){return{msTransition:n,MozTransition:n,OTransition:n,WebkitTransition:n,transition:n};},transform:function(n){return{msTransform:n,MozTransform:n,OTransform:n,WebkitTransform:n,transform:n};},absolute:function(n){var r=n&&n.split(" ");return{position:"absolute",top:r&&r[0],right:r&&r[1],bottom:r&&r[2],left:r&&r[3]};},extend:function(n,r){return r[n]||{extend:n};}},u=r.autoprefix=function(n){var r={};return(0,o.default)(n,function(n,i){var a={};(0,o.default)(n,function(n,r){var i=l[r];i?a=s({},a,i(n)):a[r]=n;}),r[i]=a;}),r;};r.default=u;},e4cbb1a3:function(n,r,i){n.exports=function(n,r){return function(i){return null!=i&&i[n]===r&&(void 0!==r||n in Object(i));};};},e5618c43:function(n,r,i){var a=i("6cf62d49"),o=i("d31ae15f"),s=Object.prototype.hasOwnProperty;n.exports=function(n){if(!a(n))return o(n);var r=[];for(var i in Object(n))s.call(n,i)&&"constructor"!=i&&r.push(i);return r;};},e60efa84:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i("d1751d7c")._(i("562f4065"),r),i("7f096b0c");},e63fc6cd:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return l;}});var a=i("777fffbe"),o=a._(i("3f3add3b")),s=a._(i("670b2160")),l=function(n){return null!=n&&(0,s.default)(n.length)&&!(0,o.default)(n);};},e717d1df:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"SceneConifg",{enumerable:!0,get:function(){return a;}});var a={REGISTERED_PROTOCOLS:{}};},e7513aab:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{applyToText:function(){return p;},getFont:function(){return d;},measureTextWidth:function(){return f;},textOf:function(){return h;}});var a,o,s,l,u=i("5e195043"),c=new Map,f=(a=function(n,r){var i=r.fontSize,a=r.fontFamily,o=r.fontWeight,c=r.fontStyle,f=r.fontVariant;return l?l(n,i):(s||(s=u.runtime.offscreenCanvasCreator.getOrCreateContext(void 0)),s.font=[c,f,o,"".concat(i,"px"),a].join(" "),s.measureText(n).width);},o=function(n,r){return[n,Object.values(r||d(n)).join()].join("");},function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=o?o.apply(this,n):n[0];c.has(a)||c.set(a,function(n){var r,i,a;function o(n,o){++r>4096&&(a=i,s(1),++r),i[n]=o;}function s(n){r=0,i=Object.create(null),n||(a=Object.create(null));}return s(),{clear:s,has:function(n){return void 0!==i[n]||void 0!==a[n];},get:function(n){var r=i[n];return void 0!==r?r:void 0!==(r=a[n])?(o(n,r),r):void 0;},set:function(n,r){void 0!==i[n]?i[n]=r:o(n,r);}};}(0));var s=c.get(a);if(s.has(i))return s.get(i);var l=a.apply(this,n);return s.set(i,l),l;}),d=function(n){var r=n.style.fontFamily||"sans-serif",i=n.style.fontWeight||"normal",a=n.style.fontStyle||"normal",o=n.style.fontVariant,s=n.style.fontSize;return{fontSize:s="object"==typeof s?s.value:s,fontFamily:r,fontWeight:i,fontStyle:a,fontVariant:o};};function h(n){return"text"===n.nodeName?n:"g"===n.nodeName&&1===n.children.length&&"text"===n.children[0].nodeName?n.children[0]:null;}function p(n,r){var i=h(n);i&&i.attr(r);}},e77a4c2e:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{CLASS_NAMES:function(){return u;},HANDLE_DEFAULT_CFG:function(){return l;},HANDLE_ICON_DEFAULT_CFG:function(){return o;},HANDLE_LABEL_DEFAULT_CFG:function(){return s;}});var a=i("fc81244b"),o={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},s={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},l={x:0,y:0,orientation:"horizontal",showLabel:!0,type:"start"},u=(0,a.classNames)({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider");},e7d75c90:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),r.default=function(n,r){var i=Object.assign({},n);return Array.isArray(r)&&r.forEach(function(n){delete i[n];}),i;};},e9168444:function(n,r,i){"use strict";var a;i.d(r,"__esModule",{value:!0}),r.default=void 0;let o=(a=i("5ca59c93"))&&a.__esModule?a:{default:a};r.default=o,n.exports=o;},e93228d6:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return c;}});var a=i("777fffbe"),o=a._(i("2f6833c8")),s=a._(i("62a7c4f2")),l=a._(i("d0572d97")),u=function(n,r){if(n===r)return!0;if(!n||!r||(0,l.default)(n)||(0,l.default)(r))return!1;if((0,s.default)(n)||(0,s.default)(r)){if(n.length!==r.length)return!1;for(var i=!0,a=0;a<n.length&&(i=u(n[a],r[a]));a++);return i;}if((0,o.default)(n)||(0,o.default)(r)){var c=Object.keys(n),f=Object.keys(r);if(c.length!==f.length)return!1;for(var i=!0,a=0;a<c.length&&(i=u(n[c[a]],r[c[a]]));a++);return i;}return!1;},c=u;},e93984e8:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return o;}});var a=i("777fffbe")._(i("bf98e12a")),o=function(){try{var n=(0,a.default)(Object,"defineProperty");return n({},"",{}),n;}catch(n){}}();},e956988f:function(n,r,i){n.exports=function(n){return void 0===n;};},e98d52c0:function(n,r,i){"use strict";function a(n,r){let i=0;if(void 0===r)for(let r of n)(r=+r)&&(i+=r);else{let a=-1;for(let o of n)(o=+r(o,++a,n))&&(i+=o);}return i;}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},e9b37d7e:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return l;}});var a=i("777fffbe"),o=a._(i("2f6833c8")),s=a._(i("06c64a8e")),l=function(n){if(!(0,o.default)(n)||!(0,s.default)(n,"Object"))return!1;if(null===Object.getPrototypeOf(n))return!0;for(var r=n;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r;};},e9c1e9c8:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{Checkbox:function(){return g;},default:function(){return v;}});var a=i("777fffbe"),o=i("852bbaa9"),s=a._(i("7cfeda15")),l=a._(i("e4870cf0")),u=a._(i("a854094b")),c=a._(i("ee64167d")),f=a._(i("613f75ca")),d=a._(i("064ecd09")),h=a._(i("ce03fd86")),p=o._(i("609f48be")),m=["prefixCls","className","style","checked","disabled","defaultChecked","type","title","onChange"],g=(0,p.forwardRef)(function(n,r){var i=n.prefixCls,a=void 0===i?"rc-checkbox":i,o=n.className,g=n.style,v=n.checked,y=n.disabled,_=n.defaultChecked,b=n.type,x=void 0===b?"checkbox":b,E=n.title,w=n.onChange,S=(0,f.default)(n,m),T=(0,p.useRef)(null),A=(0,p.useRef)(null),C=(0,h.default)(void 0!==_&&_,{value:v}),O=(0,c.default)(C,2),M=O[0],R=O[1];(0,p.useImperativeHandle)(r,function(){return{focus:function(n){var r;null===(r=T.current)||void 0===r||r.focus(n);},blur:function(){var n;null===(n=T.current)||void 0===n||n.blur();},input:T.current,nativeElement:A.current};});var P=(0,d.default)(a,o,(0,u.default)((0,u.default)({},"".concat(a,"-checked"),M),"".concat(a,"-disabled"),y));return p.createElement("span",{className:P,title:E,style:g,ref:A},p.createElement("input",(0,s.default)({},S,{className:"".concat(a,"-input"),ref:T,onChange:function(r){y||("checked"in n||R(r.target.checked),null==w||w({target:(0,l.default)((0,l.default)({},n),{},{type:x,checked:r.target.checked}),stopPropagation:function(){r.stopPropagation();},preventDefault:function(){r.preventDefault();},nativeEvent:r.nativeEvent}));},disabled:y,checked:!!M,type:x})),p.createElement("span",{className:"".concat(a,"-inner")}));}),v=g;},eb06400d:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{normalizePath:function(){return m;}});var a=i("3862611d"),o=i("8c7e4dff"),s=i("589c3a02"),l=i("b88503dc"),u=i("53def832"),c=i("fdf2eb4c");function f(n){for(var r=n.pathValue[n.segmentStart],i=r.toLowerCase(),a=n.data;a.length>=c.paramsCount[i]&&("m"===i&&a.length>2?(n.segments.push([r].concat(a.splice(0,2))),i="l",r="m"===r?"l":"L"):n.segments.push([r].concat(a.splice(0,c.paramsCount[i]))),c.paramsCount[i]););}function d(n){return n>=48&&n<=57;}function h(n){for(var r,i=n.pathValue,a=n.max;n.index<a&&(10===(r=i.charCodeAt(n.index))||13===r||8232===r||8233===r||32===r||9===r||11===r||12===r||160===r||r>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(r));)n.index+=1;}var p=function(n){this.pathValue=n,this.segments=[],this.max=n.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err="";};function m(n){if((0,o.isNormalizedArray)(n))return[].concat(n);for(var r=function(n){if((0,l.isAbsoluteArray)(n))return[].concat(n);var r=function(n){if((0,u.isPathArray)(n))return[].concat(n);var r=new p(n);for(h(r);r.index<r.max&&!r.err.length;)!function(n){var r=n.max,i=n.pathValue,a=n.index,o=i.charCodeAt(a),s=c.paramsCount[i[a].toLowerCase()];if(n.segmentStart=a,!function(n){switch(32|n){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1;}}(o)){n.err='[path-util]: Invalid path value "'.concat(i[a],'" is not a path command');return;}if(n.index+=1,h(n),n.data=[],!s){f(n);return;}for(;;){for(var l,u=s;u>0;u-=1){if((32|o)==97&&(3===u||4===u)?function(n){var r=n.index,i=n.pathValue,a=i.charCodeAt(r);if(48===a){n.param=0,n.index+=1;return;}if(49===a){n.param=1,n.index+=1;return;}n.err='[path-util]: invalid Arc flag "'.concat(i[r],'", expecting 0 or 1 at index ').concat(r);}(n):function(n){var r,i=n.max,a=n.pathValue,o=n.index,s=o,l=!1,u=!1,c=!1,f=!1;if(s>=i){n.err="[path-util]: Invalid path value at index ".concat(s,', "pathValue" is missing param');return;}if((43===(r=a.charCodeAt(s))||45===r)&&(s+=1,r=a.charCodeAt(s)),!d(r)&&46!==r){n.err="[path-util]: Invalid path value at index ".concat(s,', "').concat(a[s],'" is not a number');return;}if(46!==r){if(l=48===r,s+=1,r=a.charCodeAt(s),l&&s<i&&r&&d(r)){n.err="[path-util]: Invalid path value at index ".concat(o,', "').concat(a[o],'" illegal number');return;}for(;s<i&&d(a.charCodeAt(s));)s+=1,u=!0;r=a.charCodeAt(s);}if(46===r){for(f=!0,s+=1;d(a.charCodeAt(s));)s+=1,c=!0;r=a.charCodeAt(s);}if(101===r||69===r){if(f&&!u&&!c){n.err="[path-util]: Invalid path value at index ".concat(s,', "').concat(a[s],'" invalid float exponent');return;}if(s+=1,(43===(r=a.charCodeAt(s))||45===r)&&(s+=1),s<i&&d(a.charCodeAt(s)))for(;s<i&&d(a.charCodeAt(s));)s+=1;else{n.err="[path-util]: Invalid path value at index ".concat(s,', "').concat(a[s],'" invalid integer exponent');return;}}n.index=s,n.param=+n.pathValue.slice(o,s);}(n),n.err.length)return;n.data.push(n.param),h(n),n.index<r&&44===i.charCodeAt(n.index)&&(n.index+=1,h(n));}if(n.index>=n.max||!((l=i.charCodeAt(n.index))>=48&&l<=57||43===l||45===l||46===l))break;}f(n);}(r);return r.err?r.err:r.segments;}(n),i=0,a=0,o=0,s=0;return r.map(function(n){var r,l=n.slice(1).map(Number),u=n[0],c=u.toUpperCase();if("M"===u)return i=l[0],a=l[1],o=i,s=a,["M",i,a];if(u!==c)switch(c){case"A":r=[c,l[0],l[1],l[2],l[3],l[4],l[5]+i,l[6]+a];break;case"V":r=[c,l[0]+a];break;case"H":r=[c,l[0]+i];break;default:r=[c].concat(l.map(function(n,r){return n+(r%2?a:i);}));}else r=[c].concat(l);var f=r.length;switch(c){case"Z":i=o,a=s;break;case"H":i=r[1];break;case"V":a=r[1];break;default:i=r[f-2],a=r[f-1],"M"===c&&(o=i,s=a);}return r;});}(n),i=(0,a.__assign)({},s.paramsParser),m=0;m<r.length;m+=1){r[m]=function(n,r){var i=n[0],a=r.x1,o=r.y1,s=r.x2,l=r.y2,u=n.slice(1).map(Number),c=n;if("TQ".includes(i)||(r.qx=null,r.qy=null),"H"===i)c=["L",n[1],o];else if("V"===i)c=["L",a,n[1]];else if("S"===i){var f=2*a-s,d=2*o-l;r.x1=f,r.y1=d,c=["C",f,d].concat(u);}else if("T"===i){var h=2*a-r.qx,p=2*o-r.qy;r.qx=h,r.qy=p,c=["Q",h,p].concat(u);}else if("Q"===i){var m=u[0],g=u[1];r.qx=m,r.qy=g;}return c;}(r[m],i);var g=r[m],v=g.length;i.x1=+g[v-2],i.y1=+g[v-1],i.x2=+g[v-4]||i.x1,i.y2=+g[v-3]||i.y1;}return r;}},eb18128d:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return f;}});var a=i("777fffbe"),o=i("852bbaa9"),s=a._(i("e4870cf0"));i("e313b0e4");var l=a._(i("ae8eb856")),u=o._(i("609f48be")),c=i("78b08bd4");function f(n,r){var i=n.format,a=n.maskFormat,o=n.generateConfig,f=n.locale,d=n.preserveInvalidOnBlur,h=n.inputReadOnly,p=n.required,m=n["aria-required"],g=n.onSubmit,v=n.onFocus,y=n.onBlur,_=n.onInputChange,b=n.onInvalid,x=n.open,E=n.onOpenChange,w=n.onKeyDown,S=n.onChange,T=n.activeHelp,A=n.name,C=n.autoComplete,O=n.id,M=n.value,R=n.invalid,P=n.placeholder,k=n.disabled,I=n.activeIndex,L=n.allHelp,N=n.picker,D=function(n,r){var i=o.locale.parse(f.locale,n,[r]);return i&&o.isValidate(i)?i:null;},F=i[0],B=u.useCallback(function(n){return(0,c.formatValue)(n,{locale:f,format:F,generateConfig:o});},[f,o,F]),j=u.useMemo(function(){return M.map(B);},[M,B]),z=u.useMemo(function(){return Math.max("time"===N?8:10,"function"==typeof F?F(o.getNow()).length:F.length)+2;},[F,N,o]),U=function(n){for(var r=0;r<i.length;r+=1){var a=i[r];if("string"==typeof a){var o=D(n,a);if(o)return o;}}return!1;};return[function(i){function o(n){return void 0!==i?n[i]:n;}var u=(0,l.default)(n,{aria:!0,data:!0}),c=(0,s.default)((0,s.default)({},u),{},{format:a,validateFormat:function(n){return!!U(n);},preserveInvalidOnBlur:d,readOnly:h,required:p,"aria-required":m,name:A,autoComplete:C,size:z,id:o(O),value:o(j)||"",invalid:o(R),placeholder:o(P),active:I===i,helped:L||T&&I===i,disabled:o(k),onFocus:function(n){v(n,i);},onBlur:function(n){y(n,i);},onSubmit:g,onChange:function(n){_();var r=U(n);if(r){b(!1,i),S(r,i);return;}b(!!n,i);},onHelp:function(){E(!0,{index:i});},onKeyDown:function(n){var r=!1;if(null==w||w(n,function(){r=!0;}),!n.defaultPrevented&&!r)switch(n.key){case"Escape":E(!1,{index:i});break;case"Enter":x||E(!0);}}},null==r?void 0:r({valueTexts:j}));return Object.keys(c).forEach(function(n){void 0===c[n]&&delete c[n];}),c;},B];}},ed031284:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{interpolateBlues:function(){return em;},interpolateBrBG:function(){return C;},interpolateBuGn:function(){return W;},interpolateBuPu:function(){return q;},interpolateCividis:function(){return eA;},interpolateCool:function(){return eF;},interpolateCubehelixDefault:function(){return eN;},interpolateGnBu:function(){return Y;},interpolateGreens:function(){return ev;},interpolateGreys:function(){return e_;},interpolateInferno:function(){return e$;},interpolateMagma:function(){return eq;},interpolateOrRd:function(){return K;},interpolateOranges:function(){return eT;},interpolatePRGn:function(){return M;},interpolatePiYG:function(){return P;},interpolatePlasma:function(){return eY;},interpolatePuBu:function(){return et;},interpolatePuBuGn:function(){return J;},interpolatePuOr:function(){return I;},interpolatePuRd:function(){return er;},interpolatePurples:function(){return ex;},interpolateRainbow:function(){return ej;},interpolateRdBu:function(){return N;},interpolateRdGy:function(){return F;},interpolateRdPu:function(){return ea;},interpolateRdYlBu:function(){return j;},interpolateRdYlGn:function(){return U;},interpolateReds:function(){return ew;},interpolateSinebow:function(){return eG;},interpolateSpectral:function(){return G;},interpolateTurbo:function(){return eH;},interpolateViridis:function(){return eX;},interpolateWarm:function(){return eD;},interpolateYlGn:function(){return eu;},interpolateYlGnBu:function(){return es;},interpolateYlOrBr:function(){return ef;},interpolateYlOrRd:function(){return eh;},schemeAccent:function(){return u;},schemeBlues:function(){return ep;},schemeBrBG:function(){return A;},schemeBuGn:function(){return H;},schemeBuPu:function(){return X;},schemeCategory10:function(){return l;},schemeDark2:function(){return c;},schemeGnBu:function(){return $;},schemeGreens:function(){return eg;},schemeGreys:function(){return ey;},schemeObservable10:function(){return f;},schemeOrRd:function(){return Z;},schemeOranges:function(){return eS;},schemePRGn:function(){return O;},schemePaired:function(){return d;},schemePastel1:function(){return h;},schemePastel2:function(){return p;},schemePiYG:function(){return R;},schemePuBu:function(){return ee;},schemePuBuGn:function(){return Q;},schemePuOr:function(){return k;},schemePuRd:function(){return en;},schemePurples:function(){return eb;},schemeRdBu:function(){return L;},schemeRdGy:function(){return D;},schemeRdPu:function(){return ei;},schemeRdYlBu:function(){return B;},schemeRdYlGn:function(){return z;},schemeReds:function(){return eE;},schemeSet1:function(){return m;},schemeSet2:function(){return g;},schemeSet3:function(){return v;},schemeSpectral:function(){return V;},schemeTableau10:function(){return y;},schemeYlGn:function(){return el;},schemeYlGnBu:function(){return eo;},schemeYlOrBr:function(){return ec;},schemeYlOrRd:function(){return ed;}});var a,o=i("852bbaa9"),s=function(n){for(var r=n.length/6|0,i=Array(r),a=0;a<r;)i[a]="#"+n.slice(6*a,6*++a);return i;},l=s("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),u=s("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),c=s("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),f=s("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),d=s("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),h=s("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),p=s("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),m=s("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),g=s("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),v=s("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),y=s("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),_=i("5915d8e0");function b(n,r,i,a,o){var s=n*n,l=s*n;return((1-3*n+3*s-l)*r+(4-6*s+3*l)*i+(1+3*n+3*s-3*l)*a+l*o)/6;}var x=i("2fdb87bd"),E=o._(x);function w(n){return function(r){var i,a,o=r.length,s=Array(o),l=Array(o),u=Array(o);for(i=0;i<o;++i)a=(0,_.rgb)(r[i]),s[i]=a.r||0,l[i]=a.g||0,u[i]=a.b||0;return s=n(s),l=n(l),u=n(u),a.opacity=1,function(n){return a.r=s(n),a.g=l(n),a.b=u(n),a+"";};};}var S=w(function(n){var r=n.length-1;return function(i){var a=i<=0?i=0:i>=1?(i=1,r-1):Math.floor(i*r),o=n[a],s=n[a+1],l=a>0?n[a-1]:2*o-s,u=a<r-1?n[a+2]:2*s-o;return b((i-a/r)*r,l,o,s,u);};});w(function(n){var r=n.length;return function(i){var a=Math.floor(((i%=1)<0?++i:i)*r),o=n[(a+r-1)%r],s=n[a%r],l=n[(a+1)%r],u=n[(a+2)%r];return b((i-a/r)*r,o,s,l,u);};});var T=n=>S(n[n.length-1]),A=[,,,].concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(s),C=T(A),O=[,,,].concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(s),M=T(O),R=[,,,].concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(s),P=T(R),k=[,,,].concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(s),I=T(k),L=[,,,].concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(s),N=T(L),D=[,,,].concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(s),F=T(D),B=[,,,].concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(s),j=T(B),z=[,,,].concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(s),U=T(z),V=[,,,].concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(s),G=T(V),H=[,,,].concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(s),W=T(H),X=[,,,].concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(s),q=T(X),$=[,,,].concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(s),Y=T($),Z=[,,,].concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(s),K=T(Z),Q=[,,,].concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(s),J=T(Q),ee=[,,,].concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(s),et=T(ee),en=[,,,].concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(s),er=T(en),ei=[,,,].concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(s),ea=T(ei),eo=[,,,].concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(s),es=T(eo),el=[,,,].concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(s),eu=T(el),ec=[,,,].concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(s),ef=T(ec),ed=[,,,].concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(s),eh=T(ed),ep=[,,,].concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(s),em=T(ep),eg=[,,,].concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(s),ev=T(eg),ey=[,,,].concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(s),e_=T(ey),eb=[,,,].concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(s),ex=T(eb),eE=[,,,].concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(s),ew=T(eE),eS=[,,,].concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(s),eT=T(eS),eA=function(n){return"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-(n=Math.max(0,Math.min(1,n)))*(35.34-n*(2381.73-n*(6402.7-n*(7024.72-2710.57*n)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+n*(170.73+n*(52.82-n*(131.46-n*(176.58-67.37*n)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+n*(442.36-n*(2482.43-n*(6167.24-n*(6614.94-2475.67*n)))))))+")";},eC=i("6e17e91f"),eO=o._(eC);let eM=Math.PI/180,eR=180/Math.PI;var eP=-1.78277*.29227-.1347134789;function ek(n,r,i,a){return 1==arguments.length?function(n){if(n instanceof eI)return new eI(n.h,n.s,n.l,n.opacity);n instanceof _.Rgb||(n=(0,_.rgbConvert)(n));var r=n.r/255,i=n.g/255,a=n.b/255,o=(eP*a+-1.7884503806*r-3.5172982438*i)/(eP+-1.7884503806-3.5172982438),s=a-o,l=-((1.97294*(i-o)- -.29227*s)/.90649),u=Math.sqrt(l*l+s*s)/(1.97294*o*(1-o)),c=u?Math.atan2(l,s)*eR-120:NaN;return new eI(c<0?c+360:c,u,o,n.opacity);}(n):new eI(n,r,i,null==a?1:a);}function eI(n,r,i,a){this.h=+n,this.s=+r,this.l=+i,this.opacity=+a;}(0,eO.default)(eI,ek,(0,eO.extend)(_.Color,{brighter(n){return n=null==n?_.brighter:Math.pow(_.brighter,n),new eI(this.h,this.s,this.l*n,this.opacity);},darker(n){return n=null==n?_.darker:Math.pow(_.darker,n),new eI(this.h,this.s,this.l*n,this.opacity);},rgb(){var n=isNaN(this.h)?0:(this.h+120)*eM,r=+this.l,i=isNaN(this.s)?0:this.s*r*(1-r),a=Math.cos(n),o=Math.sin(n);return new _.Rgb(255*(r+i*(-.14861*a+1.78277*o)),255*(r+i*(-.29227*a+-.90649*o)),255*(r+1.97294*a*i),this.opacity);}}));var eL=(a=E.default,function n(r){function i(n,i){var o=a((n=ek(n)).h,(i=ek(i)).h),s=(0,E.default)(n.s,i.s),l=(0,E.default)(n.l,i.l),u=(0,E.default)(n.opacity,i.opacity);return function(i){return n.h=o(i),n.s=s(i),n.l=l(Math.pow(i,r)),n.opacity=u(i),n+"";};}return r=+r,i.gamma=n,i;}(1)),eN=eL(ek(300,.5,0),ek(-240,.5,1)),eD=eL(ek(-100,.75,.35),ek(80,1.5,.8)),eF=eL(ek(260,.75,.35),ek(80,1.5,.8)),eB=ek(),ej=function(n){(n<0||n>1)&&(n-=Math.floor(n));var r=Math.abs(n-.5);return eB.h=360*n-100,eB.s=1.5-1.5*r,eB.l=.8-.9*r,eB+"";},ez=(0,_.rgb)(),eU=Math.PI/3,eV=2*Math.PI/3,eG=function(n){var r;return n=(.5-n)*Math.PI,ez.r=255*(r=Math.sin(n))*r,ez.g=255*(r=Math.sin(n+eU))*r,ez.b=255*(r=Math.sin(n+eV))*r,ez+"";},eH=function(n){return"rgb("+Math.max(0,Math.min(255,Math.round(34.61+(n=Math.max(0,Math.min(1,n)))*(1172.33-n*(10793.56-n*(33300.12-n*(38394.49-14825.05*n)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+n*(557.33+n*(1225.33-n*(3574.96-n*(1073.77+707.56*n)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+n*(3211.1-n*(15327.97-n*(27814-n*(22569.18-6838.66*n)))))))+")";};function eW(n){var r=n.length;return function(i){return n[Math.max(0,Math.min(r-1,Math.floor(i*r)))];};}var eX=eW(s("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),eq=eW(s("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),e$=eW(s("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),eY=eW(s("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));},ed744da7:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{hierarchy:function(){return u.default;},partition:function(){return v;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("a5a44481");a._(s);var l=i("7b8bcee7"),u=o._(l),c=i("99b35fdd");a._(c);var f=i("6416e5f7");a._(f);var d=i("3316fbe3");a._(d);var h=i("6224e17e"),p=a._(h),m=i("a96a4c71"),g=a._(m),v=function(){var n=1,r=1,i=0,a=!1;function o(o){var s,l=o.height+1;return o.x0=o.y0=i,o.x1=n,o.y1=r/l,o.eachBefore((s=r,function(n){n.children&&(0,g.default)(n,n.x0,s*(n.depth+1)/l,n.x1,s*(n.depth+2)/l);var r=n.x0,a=n.y0,o=n.x1-i,u=n.y1-i;o<r&&(r=o=(r+o)/2),u<a&&(a=u=(a+u)/2),n.x0=r,n.y0=a,n.x1=o,n.y1=u;})),a&&o.eachBefore(p.default),o;}return o.round=function(n){return arguments.length?(a=!!n,o):a;},o.size=function(i){return arguments.length?(n=+i[0],r=+i[1],o):[n,r];},o.padding=function(n){return arguments.length?(i=+n,o):i;},o;},y=i("4c1ff8e6");a._(y);var _=i("8e1e429e");a._(_);var b=i("48fdc2f5");a._(b);var x=i("1df9042c");a._(x);var E=i("01c1137e");a._(E);var w=i("42fc1f40");a._(w);var S=i("3efd64b7");a._(S);var T=i("f0a50269");a._(T);},ed8f1d23:function(n,r,i){"use strict";function a(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10);}function o(n,r){if((i=(n=r?n.toExponential(r-1):n.toExponential()).indexOf("e"))<0)return null;var i,a=n.slice(0,i);return[a.length>1?a[0]+a.slice(2):a,+n.slice(i+1)];}i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return a;},formatDecimalParts:function(){return o;}});},ef12aaa0:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{formatImage:function(){return C;},getArrayBuffer:function(){return x;},getData:function(){return E;},getImage:function(){return A;},getProtocolAction:function(){return m;},makeXMLHttpRequestPromise:function(){return y;}});var a=i("e717d1df"),o=Object.defineProperty,s=Object.defineProperties,l=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,d=(n,r,i)=>r in n?o(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i,h=(n,r)=>{for(var i in r||(r={}))c.call(r,i)&&d(n,i,r[i]);if(u)for(var i of u(r))f.call(r,i)&&d(n,i,r[i]);return n;},p=(n,r)=>s(n,l(r)),m=n=>a.SceneConifg.REGISTERED_PROTOCOLS[n.substring(0,n.indexOf("://"))],g=class extends Error{constructor(n,r,i,a){super(`AJAXError: ${r} (${n}): ${i}`),this.status=n,this.statusText=r,this.url=i,this.body=a;}};function v(n,r){let i=new XMLHttpRequest,a=Array.isArray(n.url)?n.url[0]:n.url;for(let r in i.open(n.method||"GET",a,!0),"arrayBuffer"===n.type&&(i.responseType="arraybuffer"),n.headers)n.headers.hasOwnProperty(r)&&i.setRequestHeader(r,n.headers[r]);return"json"===n.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===n.credentials,i.onerror=()=>{r(Error(i.statusText));},i.onload=()=>{if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){let a=i.response;if("json"===n.type)try{a=JSON.parse(i.response);}catch(n){return r(n);}r(null,a,i.getResponseHeader("Cache-Control"),i.getResponseHeader("Expires"),i);}else{let n=new Blob([i.response],{type:i.getResponseHeader("Content-Type")});r(new g(i.status,i.statusText,a.toString(),n));}},i.cancel=i.abort,i.send(n.body),i;}function y(n){return new Promise((r,i)=>{v(n,(n,a,o,s,l)=>{n?i({err:n,data:null,xhr:l}):r({err:null,data:a,cacheControl:o,expires:s,xhr:l});});});}function _(n,r){return v(n,r);}var b=(n,r)=>(m(n.url)||_)(p(h({},n),{type:"json"}),r),x=(n,r)=>(m(n.url)||_)(p(h({},n),{type:"arrayBuffer"}),r),E=(n,r)=>v(p(h({},n),{method:"GET"}),r),w="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function S(n,r){let i=new window.Image,a=window.URL||window.webkitURL;i.crossOrigin="anonymous",i.onload=()=>{r(null,i),a.revokeObjectURL(i.src),i.onload=null,window.requestAnimationFrame(()=>{i.src=w;});},i.onerror=()=>r(Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let o=new Blob([new Uint8Array(n)],{type:"image/png"});i.src=n.byteLength?a.createObjectURL(o):w;}function T(n,r){createImageBitmap(new Blob([new Uint8Array(n)],{type:"image/png"})).then(n=>{r(null,n);}).catch(n=>{r(Error(`Could not load image because of ${n.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`));});}var A=(n,r,i)=>{let a=(n,a)=>{if(n)r(n);else if(a){let n="function"==typeof createImageBitmap,o=i?i(a):a;n?T(o,r):S(o,r);}};return"json"===n.type?b(n,a):x(n,a);},C=(n,r)=>{"function"==typeof createImageBitmap?T(n,r):S(n,r);};},ef4c46cd:function(n,r,i){"use strict";var a;i.d(r,"__esModule",{value:!0}),i.d(r,"PositionType",{enumerable:!0,get:function(){return o;}});let o=((a={}).TOPRIGHT="topright",a.TOPLEFT="topleft",a.BOTTOMRIGHT="bottomright",a.BOTTOMLEFT="bottomleft",a.TOPCENTER="topcenter",a.BOTTOMCENTER="bottomcenter",a.LEFTCENTER="leftcenter",a.RIGHTCENTER="rightcenter",a.LEFTTOP="lefttop",a.RIGHTTOP="righttop",a.LEFTBOTTOM="leftbottom",a.RIGHTBOTTOM="rightbottom",a);},ef77f514:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return X;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("a854094b"),l=a._(s),u=i("e4870cf0"),c=a._(u),f=i("613f75ca"),d=a._(f);i("91d30b86"),i("87ed5a26"),i("865cc100");var h=i("e7d0cdde"),p=i("a5a99096"),m=a._(p),g=i("f34e933b"),v=a._(g),y=i("ddaa0afd"),_=a._(y),b=i("609f48be"),x=o._(b),E=i("99c0cd4c"),w=a._(E),S=i("ee64167d"),T=a._(S),A=i("2a7c9880"),C=i("39eeb25c"),O=i("13e8e493"),M=i("995a46b6"),R=i("c5499b8c"),P=i("064ecd09"),k=a._(P),I=i("a3273044"),L=i("dac8af92"),N=["label","size","disabled","onChange","className","style","children","valuePropName","placeholder","labelFormatter","bordered","footerRender","allowClear","otherFieldProps","valueType","placement"],D=function(n){var r=n.label,i=n.size,a=n.disabled,o=n.onChange,s=n.className,u=n.style,f=n.children,h=n.valuePropName,p=n.placeholder,g=n.labelFormatter,v=n.bordered,y=n.footerRender,_=n.allowClear,b=n.otherFieldProps,E=n.valueType,S=n.placement,P=(0,d.default)(n,N),D=(0,(0,x.useContext)(m.default.ConfigContext).getPrefixCls)("pro-field-light-wrapper"),F=(0,I.useStyle)("LightWrapper",function(n){var r;return[(r=(0,c.default)((0,c.default)({},n),{},{componentCls:".".concat(D)}),(0,l.default)((0,l.default)({},"".concat(r.componentCls,"-collapse-label"),{paddingInline:1,paddingBlock:1}),"".concat(r.componentCls,"-container"),(0,l.default)({},"".concat(r.antCls,"-form-item"),{marginBlockEnd:0})))];}),B=F.wrapSSR,j=F.hashId,z=(0,x.useState)(n[h]),U=(0,T.default)(z,2),V=U[0],G=U[1],H=(0,R.useMountMergeState)(!1),W=(0,T.default)(H,2),X=W[0],q=W[1],$=function(){for(var n,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];null==b||null===(n=b.onChange)||void 0===n||n.call.apply(n,[b].concat(i)),null==o||o.apply(void 0,i);},Y=n[h],Z=(0,x.useMemo)(function(){var n;return Y?null!=E&&null!==(n=E.toLowerCase())&&void 0!==n&&n.endsWith("range")&&"digitRange"!==E&&!g?(0,A.dateArrayFormatter)(Y,C.dateFormatterMap[E]||"YYYY-MM-DD"):Array.isArray(Y)?Y.map(function(n){return"object"===(0,w.default)(n)&&n.label&&n.value?n.label:n;}):Y:Y;},[Y,E,g]);return B((0,L.jsx)(M.FilterDropdown,{disabled:a,open:X,onOpenChange:q,placement:S,label:(0,L.jsx)(O.FieldLabel,{ellipsis:!0,size:i,onClear:function(){null==$||$(),G(null);},bordered:v,style:u,className:s,label:r,placeholder:p,value:Z,disabled:a,formatter:g,allowClear:_}),footer:{onClear:function(){return G(null);},onConfirm:function(){null==$||$(V),q(!1);}},footerRender:y,children:(0,L.jsx)("div",{className:(0,k.default)("".concat(D,"-container"),j,s),style:u,children:x.default.cloneElement(f,(0,c.default)((0,c.default)({},P),{},(0,l.default)((0,l.default)({},h,V),"onChange",function(n){G(null!=n&&n.target?n.target.value:n);}),f.props))})}));},F=i("2faf3d77"),B=a._(F),j=i("11bba482"),z=["children","onChange","onBlur","ignoreFormItem","valuePropName"],U=["children","addonAfter","addonBefore","valuePropName","addonWarpStyle","convertValue","help"],V=["valueType","transform","dataFormat","ignoreFormItem","lightProps","children"],G=x.default.createContext({}),H=function(n){var r,i,a=n.children,o=n.onChange,s=n.onBlur,u=(n.ignoreFormItem,n.valuePropName),f=void 0===u?"value":u,p=(0,d.default)(n,z),m=(null==a||null===(r=a.type)||void 0===r?void 0:r.displayName)!=="ProFormComponent",g=!x.default.isValidElement(a),v=(0,h.useRefFunction)(function(){for(var n,r,i,s,l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];null==o||o.apply(void 0,u),!m&&(g||(null==a||null===(n=a.props)||void 0===n||null===(r=n.onChange)||void 0===r||r.call.apply(r,[n].concat(u)),null==a||null===(i=a.props)||void 0===i||null===(i=i.fieldProps)||void 0===i||null===(s=i.onChange)||void 0===s||s.call.apply(s,[i].concat(u))));}),y=(0,h.useRefFunction)(function(){var n,r,i,o;if(!m&&!g){for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];null==s||s.apply(void 0,u),null==a||null===(n=a.props)||void 0===n||null===(r=n.onBlur)||void 0===r||r.call.apply(r,[n].concat(u)),null==a||null===(i=a.props)||void 0===i||null===(i=i.fieldProps)||void 0===i||null===(o=i.onBlur)||void 0===o||o.call.apply(o,[i].concat(u));}}),b=(0,h.useDeepCompareMemo)(function(){var n;return(0,_.default)((null==a||null===(n=a.props)||void 0===n?void 0:n.fieldProps)||{},["onBlur","onChange"]);},[(0,_.default)((null==a||null===(i=a.props)||void 0===i?void 0:i.fieldProps)||{},["onBlur","onChange"])]),E=n[f],w=(0,x.useMemo)(function(){if(!m&&!g)return(0,h.omitUndefined)((0,c.default)((0,c.default)((0,l.default)({id:p.id},f,E),b),{},{onBlur:y,onChange:v}));},[E,b,y,v,p.id,f]),S=(0,x.useMemo)(function(){if(!w&&x.default.isValidElement(a))return function(){for(var n,r,i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];null==o||o.apply(void 0,s),null==a||null===(n=a.props)||void 0===n||null===(r=n.onChange)||void 0===r||r.call.apply(r,[n].concat(s));};},[w,a,o]);return x.default.isValidElement(a)?x.default.cloneElement(a,(0,h.omitUndefined)((0,c.default)((0,c.default)((0,c.default)({},p),{},(0,l.default)({},f,n[f]),a.props),{},{onChange:S,fieldProps:w,onBlur:m&&!g&&s}))):(0,L.jsx)(L.Fragment,{children:a});},W=function(n){var r=n.children,i=n.addonAfter,a=n.addonBefore,o=n.valuePropName,s=n.addonWarpStyle,u=n.convertValue,f=n.help,h=(0,d.default)(n,U),p=(0,x.useMemo)(function(){var n=function(n){var r,i=null!==(r=null==u?void 0:u(n,h.name))&&void 0!==r?r:n;return h.getValueProps?h.getValueProps(i):(0,l.default)({},o||"value",i);};return(u||h.getValueProps||(n=void 0),i||a)?(0,L.jsx)(v.default.Item,(0,c.default)((0,c.default)((0,c.default)({},h),{},{help:"function"!=typeof f?f:void 0,valuePropName:o,_internalItemRender:{mark:"pro_table_render",render:function(n,r){return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{style:(0,c.default)({display:"flex",alignItems:"center",flexWrap:"wrap"},s),children:[a?(0,L.jsx)("div",{style:{marginInlineEnd:8},children:a}):null,r.input,i?(0,L.jsx)("div",{style:{marginInlineStart:8},children:i}):null]}),"function"==typeof f?f({errors:n.errors,warnings:n.warnings}):r.errorList,r.extra]});}}},h),{},{getValueProps:n,children:r})):(0,L.jsx)(v.default.Item,(0,c.default)((0,c.default)({},h),{},{valuePropName:o,getValueProps:n,children:r}));},[i,a,r,null==u?void 0:u.toString(),h]);return(0,L.jsx)(G.Provider,{value:{name:h.name,label:h.label},children:p});},X=function(n){var r,i,a,o,s,l=((null===m.default||void 0===m.default||null===(r=m.default.useConfig)||void 0===r?void 0:r.call(m.default))||{componentSize:"middle"}).componentSize,u=n.valueType,f=n.transform,p=n.dataFormat,g=n.ignoreFormItem,v=n.lightProps,y=(n.children,(0,d.default)(n,V)),_=(0,x.useContext)(j.FormListContext),b=(0,x.useMemo)(function(){return void 0===n.name?n.name:void 0!==_.name?[_.name,n.name].flat(1):n.name;},[_.name,n.name]),E=x.default.useContext(B.default),w=E.setFieldValueType,S=E.formItemProps;(0,x.useEffect)(function(){w&&n.name&&w([_.listName,n.name].flat(1).filter(function(n){return void 0!==n;}),{valueType:u||"text",dateFormat:p,transform:f});},[_.listName,b,p,n.name,w,f,u]);var T=x.default.isValidElement(n.children)&&(0,h.isDropdownValueType)(u||n.children.props.valueType),A=(0,x.useMemo)(function(){return!(null!=v&&v.light)||null!=v&&!!v.customLightMode||!!T;},[null==v?void 0:v.customLightMode,T,null==v?void 0:v.light]);if("function"==typeof n.children)return(0,x.createElement)(W,(0,c.default)((0,c.default)({},y),{},{name:b,key:y.proFormFieldKey||(null===(s=y.name)||void 0===s?void 0:s.toString())}),n.children);var C=(0,L.jsx)(H,{valuePropName:n.valuePropName,children:n.children},y.proFormFieldKey||(null===(i=y.name)||void 0===i?void 0:i.toString())),O=A?C:(0,x.createElement)(D,(0,c.default)((0,c.default)({},v),{},{key:y.proFormFieldKey||(null===(a=y.name)||void 0===a?void 0:a.toString()),size:l}),C);return g?(0,L.jsx)(L.Fragment,{children:O}):(0,L.jsx)(W,(0,c.default)((0,c.default)((0,c.default)({},S),y),{},{name:b,isListField:void 0!==_.name,children:O}),y.proFormFieldKey||(null===(o=y.name)||void 0===o?void 0:o.toString()));};},efd8a033:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{StepFormProvide:function(){return D;},StepsForm:function(){return B;},StepsFormProvide:function(){return L;}});var a=i("777fffbe"),o=i("852bbaa9"),s=a._(i("a854094b")),l=a._(i("e4870cf0")),u=a._(i("23934e00")),c=a._(i("9b84be4b")),f=a._(i("f1020fa4")),d=a._(i("ee64167d")),h=a._(i("613f75ca")),p=i("64681837"),m=i("ca3807c9"),g=i("dc508de3"),v=i("865cc100"),y=a._(i("38ab0c18")),_=a._(i("78a22024")),b=a._(i("a5a99096")),x=a._(i("f34e933b")),E=a._(i("adf76174")),w=a._(i("8f0ec5f3")),S=a._(i("1efb38be")),T=a._(i("384da8f0")),A=a._(i("064ecd09")),C=a._(i("f3efd1e9")),O=a._(i("ce03fd86")),M=o._(i("609f48be")),R=a._(i("04ecc0fa")),P=i("7d573d25"),k=i("dac8af92"),I=["current","onCurrentChange","submitter","stepsFormRender","stepsRender","stepFormRender","stepsProps","onFinish","formProps","containerStyle","formRef","formMapRef","layoutRender"],L=M.default.createContext(void 0),N={horizontal:function(n){var r=n.stepsDom,i=n.formDom;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(E.default,{gutter:{xs:8,sm:16,md:24},children:(0,k.jsx)(_.default,{span:24,children:r})}),(0,k.jsx)(E.default,{gutter:{xs:8,sm:16,md:24},children:(0,k.jsx)(_.default,{span:24,children:i})})]});},vertical:function(n){var r=n.stepsDom,i=n.formDom;return(0,k.jsxs)(E.default,{align:"stretch",wrap:!0,gutter:{xs:8,sm:16,md:24},children:[(0,k.jsx)(_.default,{xxl:4,xl:6,lg:7,md:8,sm:10,xs:12,children:M.default.cloneElement(r,{style:{height:"100%"}})}),(0,k.jsx)(_.default,{children:(0,k.jsx)("div",{style:{display:"flex",alignItems:"center",width:"100%",height:"100%"},children:i})})]});}},D=M.default.createContext(null);function F(n){var r,i=(0,(0,M.useContext)(b.default.ConfigContext).getPrefixCls)("pro-steps-form"),a=(0,P.useStyle)(i),o=a.wrapSSR,_=a.hashId;n.current,n.onCurrentChange;var E=n.submitter,R=n.stepsFormRender,F=n.stepsRender,B=n.stepFormRender,j=n.stepsProps,z=n.onFinish,U=n.formProps,V=n.containerStyle,G=n.formRef,H=n.formMapRef,W=n.layoutRender,X=(0,h.default)(n,I),q=(0,M.useRef)(new Map),$=(0,M.useRef)(new Map),Y=(0,M.useRef)([]),Z=(0,M.useState)([]),K=(0,d.default)(Z,2),Q=K[0],J=K[1],ee=(0,M.useState)(!1),et=(0,d.default)(ee,2),en=et[0],er=et[1],ei=(0,p.useIntl)(),ea=(0,O.default)(0,{value:n.current,onChange:n.onCurrentChange}),eo=(0,d.default)(ea,2),es=eo[0],el=eo[1],eu=(0,M.useMemo)(function(){return N[(null==j?void 0:j.direction)||"horizontal"];},[null==j?void 0:j.direction]),ec=(0,M.useMemo)(function(){return es===Q.length-1;},[Q.length,es]),ef=(0,M.useCallback)(function(n,r){$.current.has(n)||J(function(r){return[].concat((0,f.default)(r),[n]);}),$.current.set(n,r);},[]),ed=(0,M.useCallback)(function(n){J(function(r){return r.filter(function(r){return r!==n;});}),$.current.delete(n),q.current.delete(n);},[]);(0,M.useImperativeHandle)(H,function(){return Y.current;},[Y.current]),(0,M.useImperativeHandle)(G,function(){var n;return null===(n=Y.current[es||0])||void 0===n?void 0:n.current;},[es,Y.current]);var eh=(0,M.useCallback)((r=(0,c.default)((0,u.default)().mark(function n(r,i){var a;return(0,u.default)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(q.current.set(r,i),!(!ec||!z)){n.next=3;break;}return n.abrupt("return");case 3:return er(!0),a=g.merge.apply(void 0,[{}].concat((0,f.default)(Array.from(q.current.values())))),n.prev=5,n.next=8,z(a);case 8:n.sent&&(el(0),Y.current.forEach(function(n){var r;return null===(r=n.current)||void 0===r?void 0:r.resetFields();})),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(5),console.log(n.t0);case 15:return n.prev=15,er(!1),n.finish(15);case 18:case"end":return n.stop();}},n,null,[[5,12,15,18]]);})),function(n,i){return r.apply(this,arguments);}),[ec,z,er,el]),ep=(0,M.useMemo)(function(){var n=(0,m.compareVersions)(T.default,"4.24.0")>-1,r=n?{items:Q.map(function(n){var r=$.current.get(n);return(0,l.default)({key:n,title:null==r?void 0:r.title},null==r?void 0:r.stepProps);})}:{};return(0,k.jsx)("div",{className:"".concat(i,"-steps-container ").concat(_).trim(),style:{maxWidth:Math.min(320*Q.length,1160)},children:(0,k.jsx)(S.default,(0,l.default)((0,l.default)((0,l.default)({},j),r),{},{current:es,onChange:void 0,children:!n&&Q.map(function(n){var r=$.current.get(n);return(0,k.jsx)(S.default.Step,(0,l.default)({title:null==r?void 0:r.title},null==r?void 0:r.stepProps),n);})}))});},[Q,_,i,es,j]),em=(0,v.useRefFunction)(function(){var n;null===(n=Y.current[es].current)||void 0===n||n.submit();}),eg=(0,v.useRefFunction)(function(){es<1||el(es-1);}),ev=(0,M.useMemo)(function(){return!1!==E&&(0,k.jsx)(y.default,(0,l.default)((0,l.default)({type:"primary",loading:en},null==E?void 0:E.submitButtonProps),{},{onClick:function(){var n;null==E||null===(n=E.onSubmit)||void 0===n||n.call(E),em();},children:ei.getMessage("stepsForm.next","\u4E0B\u4E00\u6B65")}),"next");},[ei,en,em,E]),ey=(0,M.useMemo)(function(){return!1!==E&&(0,k.jsx)(y.default,(0,l.default)((0,l.default)({},null==E?void 0:E.resetButtonProps),{},{onClick:function(){var n;eg(),null==E||null===(n=E.onReset)||void 0===n||n.call(E);},children:ei.getMessage("stepsForm.prev","\u4E0A\u4E00\u6B65")}),"pre");},[ei,eg,E]),e_=(0,M.useMemo)(function(){return!1!==E&&(0,k.jsx)(y.default,(0,l.default)((0,l.default)({type:"primary",loading:en},null==E?void 0:E.submitButtonProps),{},{onClick:function(){var n;null==E||null===(n=E.onSubmit)||void 0===n||n.call(E),em();},children:ei.getMessage("stepsForm.submit","\u63D0\u4EA4")}),"submit");},[ei,en,em,E]),eb=(0,v.useRefFunction)(function(){es>Q.length-2||el(es+1);}),ex=(0,M.useMemo)(function(){var n=[],r=es||0;if(r<1?1===Q.length?n.push(e_):n.push(ev):r+1===Q.length?n.push(ey,e_):n.push(ey,ev),n=n.filter(M.default.isValidElement),E&&E.render){var i,a={form:null===(i=Y.current[es])||void 0===i?void 0:i.current,onSubmit:em,step:es,onPre:eg};return E.render(a,n);}return E&&(null==E?void 0:E.render)===!1?null:n;},[Q.length,ev,em,ey,eg,es,e_,E]),eE=(0,M.useMemo)(function(){return(0,C.default)(n.children).map(function(n,r){var a=n.props,o=a.name||"".concat(r),u=es===r,c=u?{contentRender:B,submitter:!1}:{};return(0,k.jsx)("div",{className:(0,A.default)("".concat(i,"-step"),_,(0,s.default)({},"".concat(i,"-step-active"),u)),children:(0,k.jsx)(D.Provider,{value:(0,l.default)((0,l.default)((0,l.default)((0,l.default)({},c),U),a),{},{name:o,step:r}),children:n})},o);});},[U,_,i,n.children,es,B]),ew=(0,M.useMemo)(function(){return F?F(Q.map(function(n){var r;return{key:n,title:null===(r=$.current.get(n))||void 0===r?void 0:r.title};}),ep):ep;},[Q,ep,F]),eS=(0,M.useMemo)(function(){return(0,k.jsxs)("div",{className:"".concat(i,"-container ").concat(_).trim(),style:V,children:[eE,R?null:(0,k.jsx)(w.default,{children:ex})]});},[V,eE,_,i,R,ex]),eT=(0,M.useMemo)(function(){var n={stepsDom:ew,formDom:eS};return R?W?R(W(n),ex):R(eu(n),ex):W?W(n):eu(n);},[ew,eS,eu,R,ex,W]);return o((0,k.jsx)("div",{className:(0,A.default)(i,_),children:(0,k.jsx)(x.default.Provider,(0,l.default)((0,l.default)({},X),{},{children:(0,k.jsx)(L.Provider,{value:{loading:en,setLoading:er,regForm:ef,keyArray:Q,next:eb,formArrayRef:Y,formMapRef:$,lastStep:ec,unRegForm:ed,onFormFinish:eh},children:eT})}))}));}function B(n){return(0,k.jsx)(p.ProConfigProvider,{needDeps:!0,children:(0,k.jsx)(F,(0,l.default)({},n))});}B.StepForm=R.default,B.useForm=x.default.useForm;},f05d8806:function(n,r,i){"use strict";var a;i.d(r,"__esModule",{value:!0}),i.e(r,{CoordinateSystem:function(){return o;},CoordinateUniform:function(){return s;}});let o=((a={})[a.LNGLAT=1]="LNGLAT",a[a.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",a[a.VECTOR_TILE=3]="VECTOR_TILE",a[a.IDENTITY=4]="IDENTITY",a[a.METER_OFFSET=5]="METER_OFFSET",a),s={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter",RelativeOrigin:"u_RelativeOrigin"};},f0a50269:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return u;}});var a=i("777fffbe"),o=a._(i("a96a4c71")),s=a._(i("01c1137e")),l=i("3efd64b7"),u=function n(r){function i(n,i,a,u,c){if((f=n._squarify)&&f.ratio===r)for(var f,d,h,p,m,g=-1,v=f.length,y=n.value;++g<v;){for(h=(d=f[g]).children,p=d.value=0,m=h.length;p<m;++p)d.value+=h[p].value;d.dice?(0,o.default)(d,i,a,u,y?a+=(c-a)*d.value/y:c):(0,s.default)(d,i,a,y?i+=(u-i)*d.value/y:u,c),y-=d.value;}else n._squarify=f=(0,l.squarifyRatio)(r,n,i,a,u,c),f.ratio=r;}return i.ratio=function(r){return n((r=+r)>1?r:1);},i;}(l.phi);},f0d8c6f8:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return y;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("e4870cf0"),l=a._(s),u=i("ee64167d"),c=a._(u);i("e313b0e4");var f=i("609f48be"),d=o._(f),h=i("f1020fa4"),p=a._(h),m=i("4f68f1f3");function g(){return[];}function v(n,r){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2,l=[],u=i>=1?0|i:1,c=n;c<=r;c+=u){var f=o.includes(c);f&&a||l.push({label:(0,m.leftPad)(c,s),value:c,disabled:f});}return l;}function y(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,a=r||{},o=a.use12Hours,s=a.hourStep,u=void 0===s?1:s,f=a.minuteStep,h=void 0===f?1:f,y=a.secondStep,_=void 0===y?1:y,b=a.millisecondStep,x=void 0===b?100:b,E=a.hideDisabledOptions,w=a.disabledTime,S=a.disabledHours,T=a.disabledMinutes,A=a.disabledSeconds,C=d.useMemo(function(){return i||n.getNow();},[i,n]),O=d.useCallback(function(n){var r=(null==w?void 0:w(n))||{};return[r.disabledHours||S||g,r.disabledMinutes||T||g,r.disabledSeconds||A||g,r.disabledMilliseconds||g];},[w,S,T,A]),M=d.useMemo(function(){return O(C);},[C,O]),R=(0,c.default)(M,4),P=R[0],k=R[1],I=R[2],L=R[3],N=d.useCallback(function(n,r,i,a){var s=v(0,23,u,E,n());return[o?s.map(function(n){return(0,l.default)((0,l.default)({},n),{},{label:(0,m.leftPad)(n.value%12||12,2)});}):s,function(n){return v(0,59,h,E,r(n));},function(n,r){return v(0,59,_,E,i(n,r));},function(n,r,i){return v(0,999,x,E,a(n,r,i),3);}];},[E,u,o,x,h,_]),D=d.useMemo(function(){return N(P,k,I,L);},[N,P,k,I,L]),F=(0,c.default)(D,4),B=F[0],j=F[1],z=F[2],U=F[3];return[function(r,i){var a=function(){return B;},o=j,s=z,l=U;if(i){var u=O(i),f=(0,c.default)(u,4),d=N(f[0],f[1],f[2],f[3]),h=(0,c.default)(d,4),m=h[0],g=h[1],v=h[2],y=h[3];a=function(){return m;},o=g,s=v,l=y;}return function(n,r,i,a,o,s){var l=n;function u(n,r,i){var a=s[n](l),o=i.find(function(n){return n.value===a;});if(!o||o.disabled){var u=i.filter(function(n){return!n.disabled;}),c=(0,p.default)(u).reverse().find(function(n){return n.value<=a;})||u[0];c&&(a=c.value,l=s[r](l,a));}return a;}var c=u("getHour","setHour",r()),f=u("getMinute","setMinute",i(c)),d=u("getSecond","setSecond",a(c,f));return u("getMillisecond","setMillisecond",o(c,f,d)),l;}(r,a,o,s,l,n);},B,j,z,U];}},f1d8aa22:function(n,r,i){function a(n){s(n,!0);}function o(n){s(n,!1);}function s(n,r){var i=r?"visible":"hidden";!function n(r,i){i(r),r.children&&r.children.forEach(function(r){r&&n(r,i);});}(n,function(n){n.attr("visibility",i);});}i.d(r,"__esModule",{value:!0}),i.e(r,{hide:function(){return o;},show:function(){return a;},visibility:function(){return s;}});},f237cead:function(n,r,i){"use strict";var a;i.d(r,"__esModule",{value:!0}),i.d(r,"gl",{enumerable:!0,get:function(){return o;}});let o=((a={})[a.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",a[a.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",a[a.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",a[a.POINTS=0]="POINTS",a[a.LINES=1]="LINES",a[a.LINE_LOOP=2]="LINE_LOOP",a[a.LINE_STRIP=3]="LINE_STRIP",a[a.TRIANGLES=4]="TRIANGLES",a[a.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",a[a.TRIANGLE_FAN=6]="TRIANGLE_FAN",a[a.ZERO=0]="ZERO",a[a.ONE=1]="ONE",a[a.SRC_COLOR=768]="SRC_COLOR",a[a.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",a[a.SRC_ALPHA=770]="SRC_ALPHA",a[a.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",a[a.DST_ALPHA=772]="DST_ALPHA",a[a.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",a[a.DST_COLOR=774]="DST_COLOR",a[a.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",a[a.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",a[a.FUNC_ADD=32774]="FUNC_ADD",a[a.BLEND_EQUATION=32777]="BLEND_EQUATION",a[a.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",a[a.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",a[a.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",a[a.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",a[a.MAX_EXT=32776]="MAX_EXT",a[a.MIN_EXT=32775]="MIN_EXT",a[a.BLEND_DST_RGB=32968]="BLEND_DST_RGB",a[a.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",a[a.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",a[a.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",a[a.CONSTANT_COLOR=32769]="CONSTANT_COLOR",a[a.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",a[a.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",a[a.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",a[a.BLEND_COLOR=32773]="BLEND_COLOR",a[a.ARRAY_BUFFER=34962]="ARRAY_BUFFER",a[a.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",a[a.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",a[a.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",a[a.STREAM_DRAW=35040]="STREAM_DRAW",a[a.STATIC_DRAW=35044]="STATIC_DRAW",a[a.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",a[a.BUFFER_SIZE=34660]="BUFFER_SIZE",a[a.BUFFER_USAGE=34661]="BUFFER_USAGE",a[a.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",a[a.FRONT=1028]="FRONT",a[a.BACK=1029]="BACK",a[a.FRONT_AND_BACK=1032]="FRONT_AND_BACK",a[a.CULL_FACE=2884]="CULL_FACE",a[a.BLEND=3042]="BLEND",a[a.DITHER=3024]="DITHER",a[a.STENCIL_TEST=2960]="STENCIL_TEST",a[a.DEPTH_TEST=2929]="DEPTH_TEST",a[a.SCISSOR_TEST=3089]="SCISSOR_TEST",a[a.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",a[a.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",a[a.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",a[a.NO_ERROR=0]="NO_ERROR",a[a.INVALID_ENUM=1280]="INVALID_ENUM",a[a.INVALID_VALUE=1281]="INVALID_VALUE",a[a.INVALID_OPERATION=1282]="INVALID_OPERATION",a[a.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",a[a.CW=2304]="CW",a[a.CCW=2305]="CCW",a[a.LINE_WIDTH=2849]="LINE_WIDTH",a[a.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",a[a.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",a[a.CULL_FACE_MODE=2885]="CULL_FACE_MODE",a[a.FRONT_FACE=2886]="FRONT_FACE",a[a.DEPTH_RANGE=2928]="DEPTH_RANGE",a[a.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",a[a.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",a[a.DEPTH_FUNC=2932]="DEPTH_FUNC",a[a.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",a[a.STENCIL_FUNC=2962]="STENCIL_FUNC",a[a.STENCIL_FAIL=2964]="STENCIL_FAIL",a[a.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",a[a.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",a[a.STENCIL_REF=2967]="STENCIL_REF",a[a.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",a[a.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",a[a.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",a[a.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",a[a.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",a[a.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",a[a.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",a[a.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",a[a.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",a[a.VIEWPORT=2978]="VIEWPORT",a[a.SCISSOR_BOX=3088]="SCISSOR_BOX",a[a.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",a[a.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",a[a.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",a[a.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",a[a.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",a[a.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",a[a.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",a[a.RED_BITS=3410]="RED_BITS",a[a.GREEN_BITS=3411]="GREEN_BITS",a[a.BLUE_BITS=3412]="BLUE_BITS",a[a.ALPHA_BITS=3413]="ALPHA_BITS",a[a.DEPTH_BITS=3414]="DEPTH_BITS",a[a.STENCIL_BITS=3415]="STENCIL_BITS",a[a.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",a[a.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",a[a.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",a[a.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",a[a.SAMPLES=32937]="SAMPLES",a[a.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",a[a.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",a[a.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",a[a.DONT_CARE=4352]="DONT_CARE",a[a.FASTEST=4353]="FASTEST",a[a.NICEST=4354]="NICEST",a[a.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",a[a.BYTE=5120]="BYTE",a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",a[a.SHORT=5122]="SHORT",a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",a[a.INT=5124]="INT",a[a.UNSIGNED_INT=5125]="UNSIGNED_INT",a[a.FLOAT=5126]="FLOAT",a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",a[a.ALPHA=6406]="ALPHA",a[a.RGB=6407]="RGB",a[a.RGBA=6408]="RGBA",a[a.LUMINANCE=6409]="LUMINANCE",a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",a[a.RED=6403]="RED",a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",a[a.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",a[a.VERTEX_SHADER=35633]="VERTEX_SHADER",a[a.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",a[a.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",a[a.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",a[a.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",a[a.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",a[a.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",a[a.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",a[a.SHADER_TYPE=35663]="SHADER_TYPE",a[a.DELETE_STATUS=35712]="DELETE_STATUS",a[a.LINK_STATUS=35714]="LINK_STATUS",a[a.VALIDATE_STATUS=35715]="VALIDATE_STATUS",a[a.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",a[a.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",a[a.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",a[a.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",a[a.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",a[a.NEVER=512]="NEVER",a[a.LESS=513]="LESS",a[a.EQUAL=514]="EQUAL",a[a.LEQUAL=515]="LEQUAL",a[a.GREATER=516]="GREATER",a[a.NOTEQUAL=517]="NOTEQUAL",a[a.GEQUAL=518]="GEQUAL",a[a.ALWAYS=519]="ALWAYS",a[a.KEEP=7680]="KEEP",a[a.REPLACE=7681]="REPLACE",a[a.INCR=7682]="INCR",a[a.DECR=7683]="DECR",a[a.INVERT=5386]="INVERT",a[a.INCR_WRAP=34055]="INCR_WRAP",a[a.DECR_WRAP=34056]="DECR_WRAP",a[a.VENDOR=7936]="VENDOR",a[a.RENDERER=7937]="RENDERER",a[a.VERSION=7938]="VERSION",a[a.NEAREST=9728]="NEAREST",a[a.LINEAR=9729]="LINEAR",a[a.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",a[a.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",a[a.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",a[a.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",a[a.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",a[a.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",a[a.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",a[a.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",a[a.TEXTURE_2D=3553]="TEXTURE_2D",a[a.TEXTURE=5890]="TEXTURE",a[a.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",a[a.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",a[a.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",a[a.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",a[a.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",a[a.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",a[a.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",a[a.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",a[a.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",a[a.TEXTURE0=33984]="TEXTURE0",a[a.TEXTURE1=33985]="TEXTURE1",a[a.TEXTURE2=33986]="TEXTURE2",a[a.TEXTURE3=33987]="TEXTURE3",a[a.TEXTURE4=33988]="TEXTURE4",a[a.TEXTURE5=33989]="TEXTURE5",a[a.TEXTURE6=33990]="TEXTURE6",a[a.TEXTURE7=33991]="TEXTURE7",a[a.TEXTURE8=33992]="TEXTURE8",a[a.TEXTURE9=33993]="TEXTURE9",a[a.TEXTURE10=33994]="TEXTURE10",a[a.TEXTURE11=33995]="TEXTURE11",a[a.TEXTURE12=33996]="TEXTURE12",a[a.TEXTURE13=33997]="TEXTURE13",a[a.TEXTURE14=33998]="TEXTURE14",a[a.TEXTURE15=33999]="TEXTURE15",a[a.TEXTURE16=34e3]="TEXTURE16",a[a.TEXTURE17=34001]="TEXTURE17",a[a.TEXTURE18=34002]="TEXTURE18",a[a.TEXTURE19=34003]="TEXTURE19",a[a.TEXTURE20=34004]="TEXTURE20",a[a.TEXTURE21=34005]="TEXTURE21",a[a.TEXTURE22=34006]="TEXTURE22",a[a.TEXTURE23=34007]="TEXTURE23",a[a.TEXTURE24=34008]="TEXTURE24",a[a.TEXTURE25=34009]="TEXTURE25",a[a.TEXTURE26=34010]="TEXTURE26",a[a.TEXTURE27=34011]="TEXTURE27",a[a.TEXTURE28=34012]="TEXTURE28",a[a.TEXTURE29=34013]="TEXTURE29",a[a.TEXTURE30=34014]="TEXTURE30",a[a.TEXTURE31=34015]="TEXTURE31",a[a.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",a[a.REPEAT=10497]="REPEAT",a[a.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",a[a.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",a[a.FLOAT_VEC2=35664]="FLOAT_VEC2",a[a.FLOAT_VEC3=35665]="FLOAT_VEC3",a[a.FLOAT_VEC4=35666]="FLOAT_VEC4",a[a.INT_VEC2=35667]="INT_VEC2",a[a.INT_VEC3=35668]="INT_VEC3",a[a.INT_VEC4=35669]="INT_VEC4",a[a.BOOL=35670]="BOOL",a[a.BOOL_VEC2=35671]="BOOL_VEC2",a[a.BOOL_VEC3=35672]="BOOL_VEC3",a[a.BOOL_VEC4=35673]="BOOL_VEC4",a[a.FLOAT_MAT2=35674]="FLOAT_MAT2",a[a.FLOAT_MAT3=35675]="FLOAT_MAT3",a[a.FLOAT_MAT4=35676]="FLOAT_MAT4",a[a.SAMPLER_2D=35678]="SAMPLER_2D",a[a.SAMPLER_CUBE=35680]="SAMPLER_CUBE",a[a.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",a[a.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",a[a.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",a[a.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",a[a.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",a[a.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",a[a.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",a[a.COMPILE_STATUS=35713]="COMPILE_STATUS",a[a.LOW_FLOAT=36336]="LOW_FLOAT",a[a.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",a[a.HIGH_FLOAT=36338]="HIGH_FLOAT",a[a.LOW_INT=36339]="LOW_INT",a[a.MEDIUM_INT=36340]="MEDIUM_INT",a[a.HIGH_INT=36341]="HIGH_INT",a[a.FRAMEBUFFER=36160]="FRAMEBUFFER",a[a.RENDERBUFFER=36161]="RENDERBUFFER",a[a.RGBA4=32854]="RGBA4",a[a.RGB5_A1=32855]="RGB5_A1",a[a.RGB565=36194]="RGB565",a[a.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",a[a.STENCIL_INDEX=6401]="STENCIL_INDEX",a[a.STENCIL_INDEX8=36168]="STENCIL_INDEX8",a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL",a[a.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",a[a.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",a[a.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",a[a.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",a[a.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",a[a.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",a[a.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",a[a.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",a[a.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",a[a.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",a[a.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",a[a.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",a[a.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",a[a.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",a[a.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",a[a.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",a[a.NONE=0]="NONE",a[a.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",a[a.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",a[a.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",a[a.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",a[a.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",a[a.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",a[a.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",a[a.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",a[a.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",a[a.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",a[a.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",a[a.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",a[a.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",a[a.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",a);},f2763889:function(n,r,i){"use strict";function a(){let n=1;return()=>(n=(1664525*n+1013904223)%4294967296)/4294967296;}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});},f3a5fe38:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return c;}});var a=i("777fffbe")._(i("2713d2ad")),o=1/0,s=1/0,l=-1/0,u=l,c={point:function(n,r){n<o&&(o=n),n>l&&(l=n),r<s&&(s=r),r>u&&(u=r);},lineStart:a.default,lineEnd:a.default,polygonStart:a.default,polygonEnd:a.default,result:function(){var n=[[o,s],[l,u]];return l=u=-(s=o=1/0),n;}};},f3a8ca34:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{getArcValuePos:function(){return y;},getLinearValuePos:function(){return v;},getValuePos:function(){return _;},isAxisHorizontal:function(){return b;},isAxisVertical:function(){return x;},renderAxisLine:function(){return S;}});var a=i("777fffbe"),o=i("3862611d"),s=i("da8e1cea"),l=a._(s),u=i("7e9288b9"),c=i("5557e3b4");function f(n,r){var i={},a=Array.isArray(r)?r:[r];for(var o in n)a.includes(o)||(i[o]=n[o]);return i;}var d=i("611ea1fe"),h=i("33d6cd11"),p=i("a63b8d99"),m=i("a46fcb64"),g=i("3e5046a0");function v(n,r){var i=(0,o.__read)(r.startPos,2),a=i[0],s=i[1],l=(0,o.__read)(r.endPos,2),u=l[0],c=l[1],f=(0,o.__read)([u-a,c-s],2);return[a+f[0]*n,s+f[1]*n];}function y(n,r){var i=r.radius,a=(0,o.__read)(r.center,2),s=a[0],l=a[1],u=(0,c.degToRad)((0,g.getLineAngle)(n,r));return[s+i*Math.cos(u),l+i*Math.sin(u)];}function _(n,r){return"linear"===r.type?v(n,r):y(n,r);}function b(n){return 0===(0,g.getLineTangentVector)(0,n)[1];}function x(n){return 0===(0,g.getLineTangentVector)(0,n)[0];}function E(n,r,i,a,s){var l=r-n,u=(0,o.__read)([s,s],2),f=u[0],d=u[1],h=(0,o.__read)([(0,c.degToRad)(n),(0,c.degToRad)(r)],2),p=h[0],m=h[1],g=function(n){return[i+s*Math.cos(n),a+s*Math.sin(n)];},v=(0,o.__read)(g(p),2),y=v[0],_=v[1],b=(0,o.__read)(g(m),2),x=b[0],E=b[1];if(r-n==360){var w=(0,o.__read)(g((m+p)/2),2);return[["M",y,_],["A",f,d,0,1,0,w[0],w[1]],["A",f,d,0,1,0,x,E]];}return"M".concat(y,",").concat(_,",A").concat(f,",").concat(d,",0,").concat(l>180?1:0,",").concat(n>r?0:1,",").concat(x,",").concat(E);}function w(n){var r=(0,o.__read)(n,2),i=(0,o.__read)(r[0],2),a=i[0],s=i[1],l=(0,o.__read)(r[1],2);return{x1:a,y1:s,x2:l[0],y2:l[1]};}function S(n,r,i){var a,s,c,g,v,y,_=r.type,b=(0,p.subStyleProps)(r,"line");return"linear"===_?y=function(n,r,i,a){var s,l,c,f,d,h,p,g,v,y,_,b,x,E,S,T,A,C,O=r.showTrunc,M=r.startPos,R=r.endPos,P=r.truncRange,k=r.lineExtension,I=(0,o.__read)([M,R],2),L=(0,o.__read)(I[0],2),N=L[0],D=L[1],F=(0,o.__read)(I[1],2),B=F[0],j=F[1],z=(0,o.__read)(k?(void 0===(s=k)&&(s=[0,0]),l=(0,o.__read)([M,R,s],3),f=(c=(0,o.__read)(l[0],2))[0],d=c[1],p=(h=(0,o.__read)(l[1],2))[0],g=h[1],y=(v=(0,o.__read)(l[2],2))[0],_=v[1],S=Math.sqrt(Math.pow(x=(b=(0,o.__read)([p-f,g-d],2))[0],2)+Math.pow(E=b[1],2)),[(A=(T=(0,o.__read)([-y/S,_/S],2))[0])*x,A*E,(C=T[1])*x,C*E]):[,,,,].fill(0),4),U=z[0],V=z[1],G=z[2],H=z[3],W=function(r){return n.selectAll(m.CLASS_NAMES.line.class).data(r,function(n,r){return r;}).join(function(n){return n.append("line").attr("className",function(n){return"".concat(m.CLASS_NAMES.line.name," ").concat(n.className);}).styles(i).transition(function(n){return(0,u.transition)(this,w(n.line),!1);});},function(n){return n.styles(i).transition(function(n){var r=n.line;return(0,u.transition)(this,w(r),a.update);});},function(n){return n.remove();}).transitions();};if(!O||!P)return W([{line:[[N+U,D+V],[B+G,j+H]],className:m.CLASS_NAMES.line.name}]);var X=(0,o.__read)(P,2),q=X[0],$=X[1],Y=B-N,Z=j-D,K=(0,o.__read)([N+Y*q,D+Z*q],2),Q=K[0],J=K[1],ee=(0,o.__read)([N+Y*$,D+Z*$],2),et=ee[0],en=ee[1],er=W([{line:[[N+U,D+V],[Q,J]],className:m.CLASS_NAMES.lineFirst.name},{line:[[et,en],[B+G,j+H]],className:m.CLASS_NAMES.lineSecond.name}]);return r.truncRange,r.truncShape,r.lineExtension,er;}(n,r,f(b,"arrow"),i):(a=f(b,"arrow"),s=r.startAngle,c=r.endAngle,g=r.center,v=r.radius,y=n.selectAll(m.CLASS_NAMES.line.class).data([{d:E.apply(void 0,(0,o.__spreadArray)((0,o.__spreadArray)([s,c],(0,o.__read)(g),!1),[v],!1))}],function(n,r){return r;}).join(function(n){return n.append("path").attr("className",m.CLASS_NAMES.line.name).styles(r).styles({d:function(n){return n.d;}});},function(n){return n.transition(function(){var n,r,a,u,f,d=this,h=function(n,r,i,a){if(!a)return n.attr("__keyframe_data__",i),null;var s=a.duration,l=function n(r,i){var a,s,l,u,c,f;return"number"==typeof r&&"number"==typeof i?function(n){return r*(1-n)+i*n;}:Array.isArray(r)&&Array.isArray(i)?(a=i?i.length:0,s=r?Math.min(a,r.length):0,function(o){var l=Array(s),u=Array(a),c=0;for(c=0;c<s;++c)l[c]=n(r[c],i[c]);for(;c<a;++c)u[c]=i[c];for(c=0;c<s;++c)u[c]=l[c](o);return u;}):"object"==typeof r&&"object"==typeof i?(void 0===(l=r)&&(l={}),void 0===(u=i)&&(u={}),c={},f={},Object.entries(u).forEach(function(r){var i=(0,o.__read)(r,2),a=i[0],s=i[1];a in l?c[a]=n(l[a],s):f[a]=s;}),function(n){return Object.entries(c).forEach(function(r){var i=(0,o.__read)(r,2),a=i[0],s=i[1];return f[a]=s(n);}),f;}):function(n){return r;};}(r,i),u=Array(Math.ceil(+(void 0===s?0:s)/16)).fill(0).map(function(n,r,i){return{__keyframe_data__:l(r/(i.length-1))};});return n.animate(u,(0,o.__assign)({fill:"both"},a));}(this,(r=(n=this.attributes).startAngle,a=n.endAngle,u=n.center,f=n.radius,(0,o.__spreadArray)((0,o.__spreadArray)([r,a],(0,o.__read)(u),!1),[f],!1)),(0,o.__spreadArray)((0,o.__spreadArray)([s,c],(0,o.__read)(g),!1),[v],!1),i.update);if(h){var p=function(){var n=(0,l.default)(d.attributes,"__keyframe_data__");d.style.d=E.apply(void 0,(0,o.__spreadArray)([],(0,o.__read)(n),!1));};h.onframe=p,h.onfinish=p;}return h;}).styles(r);},function(n){return n.remove();}).styles(a).transitions()),!function(n,r,i,a){var o,s,l=i.showArrow,u=i.showTrunc,c=i.lineArrow,f=i.lineArrowOffset,p=i.lineArrowSize;if(s="arc"===r?n.select(m.CLASS_NAMES.line.class):u?n.select(m.CLASS_NAMES.lineSecond.class):n.select(m.CLASS_NAMES.line.class),!l||!c||"arc"===i.type&&(o=i.startAngle,i.endAngle-o==360)){var g=s.node();g&&(g.style.markerEnd=void 0);return;}var v=(0,d.renderExtDo)(c);v.attr(a),(0,h.scaleToPixel)(v,p,!0),s.style("markerEnd",v).style("markerEndOffset",-f);}(n,_,r,b),y;}},f4e6e17e:function(n,r,i){"use strict";function a(n,r){n&&s.hasOwnProperty(n.type)&&s[n.type](n,r);}i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return c;}});var o={Feature:function(n,r){a(n.geometry,r);},FeatureCollection:function(n,r){for(var i=n.features,o=-1,s=i.length;++o<s;)a(i[o].geometry,r);}},s={Sphere:function(n,r){r.sphere();},Point:function(n,r){n=n.coordinates,r.point(n[0],n[1],n[2]);},MultiPoint:function(n,r){for(var i=n.coordinates,a=-1,o=i.length;++a<o;)n=i[a],r.point(n[0],n[1],n[2]);},LineString:function(n,r){l(n.coordinates,r,0);},MultiLineString:function(n,r){for(var i=n.coordinates,a=-1,o=i.length;++a<o;)l(i[a],r,0);},Polygon:function(n,r){u(n.coordinates,r);},MultiPolygon:function(n,r){for(var i=n.coordinates,a=-1,o=i.length;++a<o;)u(i[a],r);},GeometryCollection:function(n,r){for(var i=n.geometries,o=-1,s=i.length;++o<s;)a(i[o],r);}};function l(n,r,i){var a,o=-1,s=n.length-i;for(r.lineStart();++o<s;)a=n[o],r.point(a[0],a[1],a[2]);r.lineEnd();}function u(n,r){var i=-1,a=n.length;for(r.polygonStart();++i<a;)l(n[i],r,1);r.polygonEnd();}function c(n,r){n&&o.hasOwnProperty(n.type)?o[n.type](n,r):a(n,r);}},f515d959:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return o;}});var a=i("777fffbe")._(i("30f8b1e3")),o=function(n,r){return(0,a.default)(n,function(n,i,a){return r.includes(a)||(n[a]=i),n;},{});};},f5373dff:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{appendTransform:function(){return E;},capitalizeFirst:function(){return v;},compose:function(){return m;},composeAsync:function(){return g;},copyAttributes:function(){return _;},dataOf:function(){return d;},deepAssign:function(){return function n(r,i,a=5,o=0){if(!(o>=a)){for(let l of Object.keys(i)){let u=i[l];(0,s.default)(u)&&(0,s.default)(r[l])?n(r[l],u,a,o+1):r[l]=u;}return r;}};},defined:function(){return b;},error:function(){return y;},filterPrefixObject:function(){return T;},getViewFromElement:function(){return f;},groupNameOf:function(){return h;},identity:function(){return p;},isStrictObject:function(){return O;},isUnset:function(){return M;},maybePercentage:function(){return C;},maybeSubObject:function(){return S;},omitPrefixObject:function(){return A;},subObject:function(){return w;},useMemo:function(){return x;}});var a=i("777fffbe"),o=a._(i("601eebff")),s=a._(i("e9b37d7e")),l=i("7da32405"),u=i("c25722f9"),c=this&&this.__awaiter||function(n,r,i,a){return new(i||(i=Promise))(function(o,s){function l(n){try{c(a.next(n));}catch(n){s(n);}}function u(n){try{c(a.throw(n));}catch(n){s(n);}}function c(n){var r;n.done?o(n.value):((r=n.value)instanceof i?r:new i(function(n){n(r);})).then(l,u);}c((a=a.apply(n,r||[])).next());});};function f(n){var r;let i=n;for(;i;){if((null===(r=i.attributes)||void 0===r?void 0:r.class)==="view")return i;i=i.parentNode;}return null;}function d(n,r){let i=null!=r?r:f(n).__data__,{markKey:a,index:o,seriesIndex:s}=n.__data__,{markState:l}=i,u=Array.from(l.keys()).find(n=>n.key===a);if(u)return s?s.map(n=>u.data[n]):u.data[o];}function h(n,r){let{color:i,series:a,facet:o=!1}=n,{color:s,series:c}=r;if(a&&a.invert&&!(a instanceof l.Band)&&!(a instanceof u.Constant))return a.clone().invert(c);if(c&&a instanceof l.Band&&a.invert(c)!==s&&!o)return a.invert(c);if(i&&i.invert&&!(i instanceof l.Band)&&!(i instanceof u.Constant)){let n=i.invert(s);return Array.isArray(n)?null:n;}return null;}function p(n){return n;}function m(n){return n.reduce((n,r)=>(i,...a)=>r(n(i,...a),...a),p);}function g(n){return n.reduce((n,r)=>i=>c(this,void 0,void 0,function*(){return r((yield n(i)));}),p);}function v(n){return n.replace(/( |^)[a-z]/g,n=>n.toUpperCase());}function y(n=""){throw Error(n);}function _(n,r){let{attributes:i}=r,a=new Set(["id","className"]);for(let[r,o]of Object.entries(i))a.has(r)||n.attr(r,o);}function b(n){return null!=n&&!Number.isNaN(n);}function x(n){let r=new Map;return i=>{if(r.has(i))return r.get(i);let a=n(i);return r.set(i,a),a;};}function E(n,r){let{transform:i}=n.style;n.style.transform=`${"none"===i||void 0===i?"":i} ${r}`.trimStart();}function w(n,r){return S(n,r)||{};}function S(n,r){let i=Object.entries(n||{}).filter(([n])=>n.startsWith(r)).map(([n,i])=>[(0,o.default)(n.replace(r,"").trim()),i]).filter(([n])=>!!n);return 0===i.length?null:Object.fromEntries(i);}function T(n,r){return Object.fromEntries(Object.entries(n).filter(([n])=>r.find(r=>n.startsWith(r))));}function A(n,...r){return Object.fromEntries(Object.entries(n).filter(([n])=>r.every(r=>!n.startsWith(r))));}function C(n,r){if(void 0===n)return null;if("number"==typeof n)return n;let i=+n.replace("%","");return Number.isNaN(i)?null:i/100*r;}function O(n){return"object"==typeof n&&!(n instanceof Date)&&null!==n&&!Array.isArray(n);}function M(n){return null===n||!1===n;}},f5a08f97:function(n,r,i){var a=i("d03c096f").default;function o(r,i){if("function"==typeof WeakMap)var s=new WeakMap,l=new WeakMap;return(n.exports=o=function(n,r){if(!r&&n&&n.__esModule)return n;var i,o,u={__proto__:null,default:n};if(null===n||"object"!=a(n)&&"function"!=typeof n)return u;if(i=r?l:s){if(i.has(n))return i.get(n);i.set(n,u);}for(var c in n)"default"!==c&&({}).hasOwnProperty.call(n,c)&&((o=(i=Object.defineProperty)&&Object.getOwnPropertyDescriptor(n,c))&&(o.get||o.set)?i(u,c,o):u[c]=n[c]);return u;},n.exports.__esModule=!0,n.exports.default=n.exports)(r,i);}n.exports=o,n.exports.__esModule=!0,n.exports.default=n.exports;},f5a71f8a:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return c;}});var a=i("777fffbe"),o=i("c03e7baa"),s=a._(o);function l(n,r){for(var i=n.length;i--;)if((0,s.default)(n[i][0],r))return i;return -1;}var u=Array.prototype.splice;function c(n){var r=-1,i=null==n?0:n.length;for(this.clear();++r<i;){var a=n[r];this.set(a[0],a[1]);}}c.prototype.clear=function(){this.__data__=[],this.size=0;},c.prototype.delete=function(n){var r=this.__data__,i=l(r,n);return!(i<0)&&(i==r.length-1?r.pop():u.call(r,i,1),--this.size,!0);},c.prototype.get=function(n){var r=this.__data__,i=l(r,n);return i<0?void 0:r[i][1];},c.prototype.has=function(n){return l(this.__data__,n)>-1;},c.prototype.set=function(n,r){var i=this.__data__,a=l(i,n);return a<0?(++this.size,i.push([n,r])):i[a][1]=r,this;};},f5e08e2b:function(n,r,i){"use strict";n.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};},f60aa243:function(n,r,i){n.exports=function(n){return null==n;};},f65342ee:function(n,r,i){"use strict";function a(n){var r=n.canvas,i=n.touches,a=n.offsetX,o=n.offsetY;if(r)return[r.x,r.y];if(i){var s=i[0];return[s.clientX,s.clientY];}return a&&o?[a,o]:[0,0];}i.d(r,"__esModule",{value:!0}),i.d(r,"getEventPos",{enumerable:!0,get:function(){return a;}});},f653f760:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return _;}});var a=i("777fffbe"),o=i("9b84be4b"),s=a._(o),l=i("a854094b"),u=a._(l),c=i("e333157c"),f=a._(c),d=i("553ee311"),h=i("9479dab9"),p=i("6654a076"),m=a._(p),g=i("8970bd89");class v extends m.default{constructor(...n){super(...n),(0,u.default)(this,"texture",void 0);}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9});}getCommonUniformsInfo(){let{opacity:n,brightness:r,contrast:i,saturation:a,gamma:o}=this.layer.getLayerConfig(),s={u_opacity:(0,h.defaultValue)(n,1),u_brightness:(0,h.defaultValue)(r,1),u_contrast:(0,h.defaultValue)(i,1),u_saturation:(0,h.defaultValue)(a,1),u_gamma:(0,h.defaultValue)(o,1)};return this.textures=[this.texture],this.getUniformsBufferInfo(s);}initModels(){var n=this;return(0,s.default)(function*(){return yield n.loadTexture(),n.buildModels();})();}clearModels(){var n;null===(n=this.texture)||void 0===n||n.destroy();}loadTexture(){var n=this;return(0,s.default)(function*(){let{createTexture2D:r}=n.rendererService,i=n.layer.getSource(),a=yield i.data.images;n.texture=r({data:a[0],width:a[0].width,height:a[0].height,mag:d.gl.LINEAR,min:d.gl.LINEAR});})();}buildModels(){var n=this;return(0,s.default)(function*(){return n.initUniformsBuffer(),[(yield n.layer.buildLayerModel({moduleName:"rasterImage",vertexShader:'layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\nlayout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;\nlayout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;\n\nlayout(std140) uniform commonUniforms {\n    float u_opacity:1.0;\n    float u_brightness:1.0;\n    float u_contrast:1.0;\n    float u_saturation:1.0;\n    float u_gamma:1.0;\n};\n\nout vec2 v_texCoord;\n#pragma include "projection"\n\nvoid main() {\n  v_texCoord = a_Uv;\n  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));\n}\n',fragmentShader:"uniform sampler2D u_texture;\nlayout(std140) uniform commonUniforms {\n    float u_opacity:1.0;\n    float u_brightness:1.0;\n    float u_contrast:1.0;\n    float u_saturation:1.0;\n    float u_gamma:1.0;\n};\n\nin vec2 v_texCoord;\nout vec4 outputColor;\nvec3 setContrast(vec3 rgb, float contrast) {\n  vec3 color = mix(vec3(0.5), rgb, contrast);\n  color = clamp(color, 0.0, 1.0);\n  return color;\n}\nvec3 setSaturation(vec3 rgb, float adjustment) {\n  const vec3 grayVector = vec3(0.2125, 0.7154, 0.0721);\n  vec3 intensity = vec3(dot(rgb, grayVector));\n  vec3 color = mix(intensity, rgb, adjustment);\n  color = clamp(color, 0.0, 1.0);\n  return color;\n}\nvoid main() {\n  vec4 color = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y));\n  //brightness\n  color.rgb = mix(vec3(0.0, 0.0, 0.0), color.rgb, u_brightness);\n  //contrast\n  color.rgb = setContrast(color.rgb, u_contrast);\n  // saturation\n  color.rgb = setSaturation(color.rgb, u_saturation);\n  // gamma\n  color.rgb = pow(color.rgb, vec3(u_gamma));\n  outputColor = color;\n  outputColor.a *= u_opacity;\n  if(outputColor.a < 0.01)\n    discard;\n}\n",defines:n.getDefines(),triangulation:g.RasterImageTriangulation,primitive:d.gl.TRIANGLES,blend:{enable:!0},depth:{enable:!1},pickingEnabled:!1}))];})();}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:d.AttributeType.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:d.gl.DYNAMIC_DRAW,data:[],type:d.gl.FLOAT},size:2,update:(n,r,i)=>[i[3],i[4]]}});}}let y={image:v};class _ extends f.default{constructor(...n){super(...n),(0,u.default)(this,"type","ImageLayer");}buildModels(){var n=this;return(0,s.default)(function*(){let r=n.getModelType();n.layerModel=new y[r](n),yield n.initLayerModels();})();}getDefaultConfig(){return({image:{}})[this.getModelType()];}getModelType(){return"image";}}},f6e5d622:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return y;}});var a=i("777fffbe"),o=a._(i("e4870cf0")),s=a._(i("613f75ca")),l=i("58fbde6a"),u=a._(i("cd4d52a4")),c=a._(i("609f48be")),f=i("7f173680"),d=a._(i("551ddf56")),h=i("dac8af92"),p=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],m=c.default.forwardRef(function(n,r){var i=n.fieldProps,a=n.options,u=n.radioType,c=n.layout,f=n.proFieldProps,m=n.valueEnum,g=(0,s.default)(n,p);return(0,h.jsx)(d.default,(0,o.default)((0,o.default)({valueType:"button"===u?"radioButton":"radio",ref:r,valueEnum:(0,l.runFunction)(m,void 0)},g),{},{fieldProps:(0,o.default)({options:a,layout:c},i),proFieldProps:f,filedConfig:{customLightMode:!0}}));}),g=c.default.forwardRef(function(n,r){var i=n.fieldProps,a=n.children;return(0,h.jsx)(u.default,(0,o.default)((0,o.default)({},i),{},{ref:r,children:a}));}),v=(0,f.createField)(g,{valuePropName:"checked",ignoreWidth:!0});v.Group=m,v.Button=u.default.Button,v.displayName="ProFormComponent";var y=v;},f6fedc10:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return g;}});var a=i("777fffbe"),o=i("bf98e12a"),s=(0,a._(o).default)(Object,"create"),l=Object.prototype.hasOwnProperty,u=Object.prototype.hasOwnProperty;function c(n){var r=-1,i=null==n?0:n.length;for(this.clear();++r<i;){var a=n[r];this.set(a[0],a[1]);}}c.prototype.clear=function(){this.__data__=s?s(null):{},this.size=0;},c.prototype.delete=function(n){var r=this.has(n)&&delete this.__data__[n];return this.size-=r?1:0,r;},c.prototype.get=function(n){var r=this.__data__;if(s){var i=r[n];return"__lodash_hash_undefined__"===i?void 0:i;}return l.call(r,n)?r[n]:void 0;},c.prototype.has=function(n){var r=this.__data__;return s?void 0!==r[n]:u.call(r,n);},c.prototype.set=function(n,r){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=s&&void 0===r?"__lodash_hash_undefined__":r,this;};var f=i("f5a71f8a"),d=a._(f),h=i("06753dad"),p=a._(h);function m(n,r){var i,a=n.__data__;return("string"==(i=typeof r)||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==r:null===r)?a["string"==typeof r?"string":"hash"]:a.map;}function g(n){var r=-1,i=null==n?0:n.length;for(this.clear();++r<i;){var a=n[r];this.set(a[0],a[1]);}}g.prototype.clear=function(){this.size=0,this.__data__={hash:new c,map:new(p.default||d.default),string:new c};},g.prototype.delete=function(n){var r=m(this,n).delete(n);return this.size-=r?1:0,r;},g.prototype.get=function(n){return m(this,n).get(n);},g.prototype.has=function(n){return m(this,n).has(n);},g.prototype.set=function(n,r){var i=m(this,n),a=i.size;return i.set(n,r),this.size+=i.size==a?0:1,this;};},f7112881:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{Color:function(){return h;},rect:function(){return d;}});var a=i("777fffbe")._(i("42996afe")),o=i("42fb15d0"),s=i("7d4c6398"),l=i("d70a5c58"),u=i("5120ac0c"),c=i("45669125"),f=this&&this.__rest||function(n,r){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>r.indexOf(a)&&(i[a]=n[a]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i;};function d(n,r,i,h,p={}){let{inset:m=0,radius:g=0,insetLeft:v=m,insetTop:y=m,insetRight:_=m,insetBottom:b=m,radiusBottomLeft:x=g,radiusBottomRight:E=g,radiusTopLeft:w=g,radiusTopRight:S=g,minWidth:T=-1/0,maxWidth:A=1/0,minHeight:C=-1/0}=p,O=f(p,["inset","radius","insetLeft","insetTop","insetRight","insetBottom","radiusBottomLeft","radiusBottomRight","radiusTopLeft","radiusTopRight","minWidth","maxWidth","minHeight"]);if(!(0,o.isPolar)(h)&&!(0,o.isHelix)(h)){let i=!!(0,o.isTranspose)(h),[a,,f]=i?(0,c.reorder)(r):r,[d,p]=a,[m,g]=(0,l.sub)(f,a),M=Math.abs(m),R=Math.abs(g),P=(m>0?d:d+m)+v,k=(g>0?p:p+g)+y,I=M-(v+_),L=R-(y+b),N=i?(0,u.clamp)(I,C,1/0):(0,u.clamp)(I,T,A),D=i?(0,u.clamp)(L,T,A):(0,u.clamp)(L,C,1/0),F=i?P:P-(N-I)/2,B=i?k-(D-L)/2:k-(D-L);return(0,s.select)(n.createElement("rect",{})).style("x",F).style("y",B).style("width",N).style("height",D).style("radius",[w,S,E,x]).call(c.applyStyle,O).node();}let{y:M,y1:R}=i,P=h.getCenter(),k=(0,c.getArcObject)(h,r,[M,R]),I=(0,a.default)().cornerRadius(g).padAngle(m*Math.PI/180);return(0,s.select)(n.createElement("path",{})).style("d",I(k)).style("transform",`translate(${P[0]}, ${P[1]})`).style("radius",g).style("inset",m).call(c.applyStyle,O).node();}let h=(n,r)=>{let{colorAttribute:i,opacityAttribute:a="fill",first:l=!0,last:u=!0}=n,h=f(n,["colorAttribute","opacityAttribute","first","last"]),{coordinate:p,document:m}=r;return(r,a,g)=>{let{color:v,radius:y=0}=g,_=f(g,["color","radius"]),b=_.lineWidth||1,{stroke:x,radius:E=y,radiusTopLeft:w=E,radiusTopRight:S=E,radiusBottomRight:T=E,radiusBottomLeft:A=E,innerRadius:C=0,innerRadiusTopLeft:O=C,innerRadiusTopRight:M=C,innerRadiusBottomRight:R=C,innerRadiusBottomLeft:P=C,lineWidth:k="stroke"===i||x?b:0,inset:I=0,insetLeft:L=I,insetRight:N=I,insetBottom:D=I,insetTop:F=I,minWidth:B,maxWidth:j,minHeight:z}=h,U=f(h,["stroke","radius","radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft","innerRadius","innerRadiusTopLeft","innerRadiusTopRight","innerRadiusBottomRight","innerRadiusBottomLeft","lineWidth","inset","insetLeft","insetRight","insetBottom","insetTop","minWidth","maxWidth","minHeight"]),{color:V=v,opacity:G}=a,H=[l?w:O,l?S:M,u?T:R,u?A:P],W=["radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft"];(0,o.isTranspose)(p)&&W.push(W.shift());let X=Object.assign(Object.assign({radius:E},Object.fromEntries(W.map((n,r)=>[n,H[r]]))),{inset:I,insetLeft:L,insetRight:N,insetBottom:D,insetTop:F,minWidth:B,maxWidth:j,minHeight:z});return(0,s.select)(d(m,r,a,p,X)).call(c.applyStyle,_).style("fill","transparent").style(i,V).style((0,c.toOpacityKey)(n),G).style("lineWidth",k).style("stroke",void 0===x?V:x).call(c.applyStyle,U).node();};};h.props={defaultEnterAnimation:"scaleInY",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};},f7ce5fcc:function(n,r,i){n.exports=function(n,r,i){return n==n&&(void 0!==i&&(n=n<=i?n:i),void 0!==r&&(n=n>=r?n:r)),n;};},fa0f50e8:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return o;}});var a=Function.prototype.toString,o=function(n){if(null!=n){try{return a.call(n);}catch(n){}try{return n+"";}catch(n){}}return"";};},fa737a40:function(n,r,i){"use strict";function a(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10);}function o(n,r){if((i=(n=r?n.toExponential(r-1):n.toExponential()).indexOf("e"))<0)return null;var i,a=n.slice(0,i);return[a.length>1?a[0]+a.slice(2):a,+n.slice(i+1)];}i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return a;},formatDecimalParts:function(){return o;}});},fa94063b:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});var a=i("852bbaa9")._(i("609f48be")).createContext(null);},fc6080b6:function(n,r,i){var a=i("12787c53"),o=i("78ccff10"),s=i("88ddf3cf");n.exports=function(n){return a(n,s,o);};},fc81244b:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"classNames",{enumerable:!0,get:function(){return o;}});var a=i("3862611d"),o=function(n,r){var i=function(n){return"".concat(r,"-").concat(n);},o=Object.fromEntries(Object.entries(n).map(function(n){var r=(0,a.__read)(n,2),o=r[0],s=i(r[1]);return[o,{name:s,class:".".concat(s),id:"#".concat(s),toString:function(){return s;}}];}));return Object.assign(o,{prefix:i}),o;};},fdd8b318:function(n,r,i){i.d(r,"__esModule",{value:!0}),i.e(r,{default:function(){return p;}});var a=i("777fffbe"),o=i("852bbaa9"),s=i("7cfeda15"),l=a._(s),u=i("609f48be"),c=o._(u),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.9 533.7c16.8-22.2 26.1-49.4 26.1-77.7 0-44.9-25.1-87.4-65.5-111.1a67.67 67.67 0 00-34.3-9.3H572.4l6-122.9c1.4-29.7-9.1-57.9-29.5-79.4A106.62 106.62 0 00471 99.9c-52 0-98 35-111.8 85.1l-85.9 311H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h601.3c9.2 0 18.2-1.8 26.5-5.4 47.6-20.3 78.3-66.8 78.3-118.4 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7-.2-12.6-2-25.1-5.6-37.1zM184 852V568h81v284h-81zm636.4-353l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 22.4-13.2 42.6-33.6 51.8H329V564.8l99.5-360.5a44.1 44.1 0 0142.2-32.3c7.6 0 15.1 2.2 21.1 6.7 9.9 7.4 15.2 18.6 14.6 30.5l-9.6 198.4h314.4C829 418.5 840 436.9 840 456c0 16.5-7.2 32.1-19.6 43z"}}]},name:"like",theme:"outlined"},d=i("887aaf6c"),h=a._(d),p=c.forwardRef(function(n,r){return c.createElement(h.default,(0,l.default)({},n,{ref:r,icon:f}));});},fdf2eb4c:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"paramsCount",{enumerable:!0,get:function(){return a;}});var a={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};},fdfa415f:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});var a=function(n,r){return function(i){return n(r(i));};};},fe2a53a5:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.e(r,{AXIS_LABEL_PADDING:function(){return s;},HORIZONTAL_MARGIN:function(){return o;},VERTICAL_MARGIN:function(){return a;}});var a=32,o=16,s=48;},ff2c8414:function(n,r,i){let a;i.d(r,"__esModule",{value:!0}),i.e(r,{GaodeMap:function(){return tu;},GaodeMapV1:function(){return tc;},GaodeMapV2:function(){return tf;},Map:function(){return tt;},Mapbox:function(){return tl;}});var o=i("777fffbe"),s=i("852bbaa9"),l=i("e4870cf0"),u=o._(l),c=i("a854094b"),f=o._(c);class d{constructor(n){(0,f.default)(this,"configService",void 0),(0,f.default)(this,"config",void 0),this.config=n;}setContainer(n,r){this.configService=n.globalConfigService,n.mapConfig=(0,u.default)((0,u.default)({},this.config),{},{id:r}),n.mapService=new(this.getServiceConstructor())(n);}getServiceConstructor(){throw Error("Method not implemented.");}}var h=i("613f75ca"),p=o._(h),m=i("9b84be4b"),g=o._(m),v=i("0c09091c"),y=o._(v),_=i("553ee311"),b=i("9479dab9"),x=i("da755037"),E=s._(x),w=i("377bcc16"),S=s._(w),T=i("84311e53"),A=i("7d3f4529");class C{constructor(n){(0,f.default)(this,"map",void 0),(0,f.default)(this,"simpleMapCoord",new A.SimpleMapCoord),(0,f.default)(this,"bgColor","rgba(0.0, 0.0, 0.0, 0.0)"),(0,f.default)(this,"config",void 0),(0,f.default)(this,"configService",void 0),(0,f.default)(this,"coordinateSystemService",void 0),(0,f.default)(this,"eventEmitter",void 0),(0,f.default)(this,"markerContainer",void 0),(0,f.default)(this,"mapContainer",void 0),(0,f.default)(this,"cameraChangedCallback",void 0),this.config=n.mapConfig,this.configService=n.globalConfigService,this.coordinateSystemService=n.coordinateSystemService,this.eventEmitter=new T.EventEmitter;}onCameraChanged(n){this.cameraChangedCallback=n;}updateView(n){var r;this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:n.bearing,center:n.center,viewportHeight:n.viewportHeight,pitch:n.pitch,viewportWidth:n.viewportWidth,zoom:n.zoom}),this.updateCoordinateSystemService(),null===(r=this.cameraChangedCallback)||void 0===r||r.call(this,this.viewport);}updateCoordinateSystemService(){let{offsetCoordinate:n=!0}=this.config;this.viewport.getZoom()>12&&n?this.coordinateSystemService.setCoordinateSystem(_.CoordinateSystem.LNGLAT_OFFSET):this.coordinateSystemService.setCoordinateSystem(_.CoordinateSystem.LNGLAT);}creatMapContainer(n){return"string"==typeof n?document.getElementById(n):n;}getMapStyleValue(n){var r;return null!==(r=this.getMapStyleConfig()[n])&&void 0!==r?r:n;}setBgColor(n){this.bgColor=n;}getMapContainer(){return this.mapContainer;}getMarkerContainer(){return this.markerContainer;}getOverlayContainer(){}getCanvasOverlays(){}emit(n,...r){this.eventEmitter.emit(n,...r);}once(n,r){this.eventEmitter.once(n,r);}meterToCoord(n,r){return 1;}destroy(){this.eventEmitter.removeAllListeners();}}var O=i("6881d6a9"),M=o._(O),R=i("bf5fe2c6");function P(n={}){if("number"==typeof n)return{top:n,right:n,bottom:n,left:n};if(Array.isArray(n)){if(4===n.length)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(2===n.length)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};}return(0,u.default)((0,u.default)({},{top:0,right:0,bottom:0,left:0}),n);}let k={normal:"amap://styles/normal",light:"amap://styles/c422f5c0cfced5be9fe3a83f05f28a68?isPublic=true",dark:"amap://styles/c9f1d10cae34f8ab05e425462c5a58d7?isPublic=true",blank:"amap://styles/07c17002b38775b32a7a76c66cf90e99?isPublic=true",fresh:"amap://styles/fresh",grey:"amap://styles/grey",graffiti:"amap://styles/graffiti",macaron:"amap://styles/macaron",darkblue:"amap://styles/darkblue",wine:"amap://styles/wine"},I=["id","style","minZoom","maxZoom","token","mapInstance","plugin"];!function(n,r){var i="undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM,a="undefined"!=typeof wx&&null!==wx&&(void 0!==wx.request||void 0!==wx.miniProgram);if(!i&&!a&&(r||(r=document),r)){var o=r.head||r.getElementsByTagName("head")[0];if(!o){o=r.createElement("head");var s=r.body||r.getElementsByTagName("body")[0];s?s.parentNode.insertBefore(o,s):r.documentElement.appendChild(o);}var l=r.createElement("style");l.type="text/css",l.styleSheet?l.styleSheet.cssText=n:l.appendChild(r.createTextNode(n)),o.appendChild(l);}}(`.amap-logo {
  display: none !important;
}

.amap-copyright {
  display: none !important;
}

.amap-overlays {
  z-index: 3 !important;
}
`);let L="f59bcf249433f8b05caaee19f349b3d7";window.forceWebGL=!0;let N={contextmenu:"rightclick",camerachange:"viewchange"};class D extends C{constructor(...n){super(...n),(0,f.default)(this,"viewport",new M.default),(0,f.default)(this,"version",R.MapType.GAODE),(0,f.default)(this,"handleCameraChanged",()=>{let n=this.getViewState();this.updateView(n);});}getType(){return"amap";}init(){var n=this;return(0,g.default)(function*(){let r=n.config,{id:i,style:a="light",minZoom:o=0,maxZoom:s=24,token:l=L,mapInstance:c,plugin:f=[]}=r,d=(0,p.default)(r,I);if(window.AMap||c||(f.push("Map3D"),yield y.default.load({key:l,version:"2.0",plugins:f})),c)n.map=c,n.mapContainer=n.map.getContainer(),n.map.on("viewchange",n.handleCameraChanged);else{let r=(0,u.default)({mapStyle:n.getMapStyleValue(a),zooms:[o,s],viewMode:"3D"},d);if(r.zoom&&(r.zoom+=1),l===L&&(window._AMapSecurityConfig={securityJsCode:"2653011adeb04230b3a26cc9a780a800"},console.warn(`%c${n.configService.getSceneWarninfo("MapToken")}!`,"color: #873bf4;font-weigh:900;font-size: 16px;")),!i)throw Error("No container id specified");window.forceWebGL=!0,n.mapContainer=n.creatMapContainer(i);let c=new AMap.Map(n.mapContainer,r);n.map=c,c.on("viewchange",n.handleCameraChanged);}n.syncInitViewPort();})();}syncInitViewPort(){let n=this.getViewState();this.updateView(n);}getViewState(){let{center:n,zoom:r}=function(n){let r=n._view.getOptions();return{center:r.center,zoom:r.zoom};}(this.map);return{center:n,viewportWidth:this.map.getContainer().clientWidth,viewportHeight:this.map.getContainer().clientHeight,bearing:-this.map.getRotation(),pitch:this.map.getPitch(),zoom:r-1};}creatMapContainer(n){let r=super.creatMapContainer(n),i=document.createElement("div");return i.style.cssText+=`
       position: absolute;
       top: 0;
       height: 100%;
       width: 100%;
     `,i.id=b.lodashUtil.uniqueId("l7_amap_div"),r.appendChild(i),i;}getContainer(){return this.map.getContainer();}addMarkerContainer(){if(!this.map)return;let n=this.map.getContainer();if(null!==n){let r=n.getElementsByClassName("amap-maps")[0];r.style.zIndex="auto",this.markerContainer=b.DOM.create("div","l7-marker-container2",r);}}getMarkerContainer(){return this.markerContainer;}getCanvasOverlays(){var n;return null===(n=this.mapContainer)||void 0===n?void 0:n.querySelector(".amap-overlays");}on(n,r){-1!==_.MapServiceEvent.indexOf(n)?this.eventEmitter.on(n,r):this.map.on(N[n]||n,r);}off(n,r){-1!==_.MapServiceEvent.indexOf(n)?this.eventEmitter.off(n,r):this.map.off(N[n]||n,r);}getSize(){let n=this.map.getSize();return[n.getWidth(),n.getHeight()];}getMinZoom(){return this.map.getZooms()[0]-1;}getMaxZoom(){return this.map.getZooms()[1]-1;}getZoom(){return this.map.getZoom()-1;}getCenter(n){if(null!=n&&n.padding){let r=this.getCenter(),i=P(n.padding),a=this.lngLatToPixel([r.lng,r.lat]),o=[(i.right-i.left)/2,(i.bottom-i.top)/2];return this.pixelToLngLat([a.x-o[0],a.y-o[1]]);}let r=this.map.getCenter();return{lng:r.getLng(),lat:r.getLat()};}getPitch(){return this.map.getPitch();}getRotation(){return 360-this.map.getRotation();}getBounds(){let n=this.map.getBounds(),r=n.getNorthEast(),i=n.getSouthWest(),a=this.getCenter(),o=a.lng>r.getLng()||a.lng<i.getLng()?180-r.getLng():r.getLng();return[[a.lng<i.getLng()?i.getLng()-180:i.getLng(),i.getLat()],[o,r.getLat()]];}getMapContainer(){return this.mapContainer;}getMapCanvasContainer(){var n;return null===(n=this.map.getContainer())||void 0===n?void 0:n.getElementsByClassName("amap-maps")[0];}getMapStyleConfig(){return k;}getMapStyleValue(n){return this.getMapStyleConfig()[n]||n;}getMapStyle(){return this.map.getMapStyle();}setMapStyle(n){this.map.setMapStyle(this.getMapStyleValue(n));}setRotation(n){return this.map.setRotation(n);}zoomIn(){this.map.zoomIn();}zoomOut(){this.map.zoomOut();}panTo(n){this.map.panTo(n);}panBy(n=0,r=0){this.map.panBy(n,r);}fitBounds(n){this.map.setBounds(new AMap.Bounds([n[0][0],n[0][1],n[1][0],n[1][1]]),!0);}setZoomAndCenter(n,r){this.map.setZoomAndCenter(n+1,r);}setCenter(n,r){if(null!=r&&r.padding){let i=P(r.padding),a=this.lngLatToPixel(n),o=[(i.right-i.left)/2,(i.bottom-i.top)/2],s=this.pixelToLngLat([a.x+o[0],a.y+o[1]]);this.map.setCenter([s.lng,s.lat]);}else this.map.setCenter(n);}setPitch(n){return this.map.setPitch(n);}setZoom(n){return this.map.setZoom(n+1);}setMaxZoom(n){throw Error("Method not implemented.");}setMinZoom(n){throw Error("Method not implemented.");}setMapStatus(n){this.map.setStatus(n);}meterToCoord(n,r){let i=AMap.GeometryUtil.distance(new AMap.LngLat(...n),new AMap.LngLat(...r)),[a,o]=(0,b.amap2Project)(...n),[s,l]=(0,b.amap2Project)(...r);return Math.sqrt(Math.pow(a-s,2)+Math.pow(o-l,2))/i;}pixelToLngLat(n){let r=this.map.pixelToLngLat(new AMap.Pixel(n[0],n[1]));return{lng:r.getLng(),lat:r.getLat()};}lngLatToPixel(n){let r=this.map.lnglatToPixel(n);return{x:r.getX(),y:r.getY()};}containerToLngLat(n){let r=new AMap.Pixel(n[0],n[1]),i=this.map.containerToLngLat(r);return{lng:null==i?void 0:i.getLng(),lat:null==i?void 0:i.getLat()};}lngLatToContainer(n){let r=this.map.lngLatToContainer(n);return{x:r.getX(),y:r.getY()};}lngLatToMercator([n,r],i){let[a,o]=(0,b.amap2Project)(n,r);return{x:a,y:o,z:i};}getModelMatrix(n,r,i,a=[1,1,1]){let o=this.viewport.projectFlat(n),s=E.create();return E.translate(s,s,S.fromValues(o[0],o[1],r)),E.scale(s,s,S.fromValues(a[0],a[1],a[2])),E.rotateX(s,s,i[0]),E.rotateY(s,s,i[1]),E.rotateZ(s,s,i[2]),s;}exportMap(n){var r;let i=null===(r=this.getContainer())||void 0===r?void 0:r.getElementsByClassName("amap-layer")[0];return"jpg"===n?null==i?void 0:i.toDataURL("image/jpeg"):null==i?void 0:i.toDataURL("image/png");}destroy(){var n;super.destroy(),null===(n=this.mapContainer)||void 0===n||null===(n=n.parentNode)||void 0===n||n.removeChild(this.mapContainer),delete window.initAMap;let r=document.getElementById("amap-script");r&&document.head.removeChild(r),this.map.destroy();}}class F extends d{getServiceConstructor(){return D;}}var B=i("9121315b"),j=i("016e8963"),z=o._(j),U=i("8e9bca0c");class V{constructor(n,r){(0,f.default)(this,"_ne",void 0),(0,f.default)(this,"_sw",void 0),n&&(r?this.setSouthWest(n).setNorthEast(r):Array.isArray(n)&&(4===n.length?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1])));}setNorthEast(n){return this._ne=n instanceof U.LngLat?new U.LngLat(n.lng,n.lat):U.LngLat.convert(n),this;}setSouthWest(n){return this._sw=n instanceof U.LngLat?new U.LngLat(n.lng,n.lat):U.LngLat.convert(n),this;}extend(n){let r,i;let a=this._sw,o=this._ne;if(n instanceof U.LngLat)r=n,i=n;else if(!(n instanceof V))return Array.isArray(n)?4===n.length||n.every(Array.isArray)?this.extend(V.convert(n)):this.extend(U.LngLat.convert(n)):n&&("lng"in n||"lon"in n)&&"lat"in n?this.extend(U.LngLat.convert(n)):this;else if(r=n._sw,i=n._ne,!r||!i)return this;return a||o?(a.lng=Math.min(r.lng,a.lng),a.lat=Math.min(r.lat,a.lat),o.lng=Math.max(i.lng,o.lng),o.lat=Math.max(i.lat,o.lat)):(this._sw=new U.LngLat(r.lng,r.lat),this._ne=new U.LngLat(i.lng,i.lat)),this;}getCenter(){return new U.LngLat((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2);}getSouthWest(){return this._sw;}getNorthEast(){return this._ne;}getNorthWest(){return new U.LngLat(this.getWest(),this.getNorth());}getSouthEast(){return new U.LngLat(this.getEast(),this.getSouth());}getWest(){return this._sw.lng;}getSouth(){return this._sw.lat;}getEast(){return this._ne.lng;}getNorth(){return this._ne.lat;}toArray(){return[this._sw.toArray(),this._ne.toArray()];}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`;}isEmpty(){return!(this._sw&&this._ne);}contains(n){let{lng:r,lat:i}=U.LngLat.convert(n),a=this._sw.lat<=i&&i<=this._ne.lat,o=this._sw.lng<=r&&r<=this._ne.lng;return this._sw.lng>this._ne.lng&&(o=this._sw.lng>=r&&r>=this._ne.lng),a&&o;}static convert(n){return n instanceof V?n:new V(n);}static fromLngLat(n,r=0){let i=360*r/40075017,a=i/Math.cos(Math.PI/180*n.lat);return new V(new U.LngLat(n.lng-a,n.lat-i),new U.LngLat(n.lng+a,n.lat+i));}}let G={now:"undefined"!=typeof performance&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:n=>new Promise((r,i)=>{let a=requestAnimationFrame(r);n.signal.addEventListener("abort",()=>{cancelAnimationFrame(a),i(Error("AbortError"));});}),get prefersReducedMotion(){if(!window.matchMedia)return!1;return null==a&&(a=window.matchMedia("(prefers-reduced-motion: reduce)")),a.matches;}};var H=i("078616b2");function W(n,r,i){i[n]&&-1!==i[n].indexOf(r)||(i[n]=i[n]||[],i[n].push(r));}function X(n,r,i){if(i&&i[n]){let a=i[n].indexOf(r);-1!==a&&i[n].splice(a,1);}}class q{constructor(n,r={}){(0,f.default)(this,"type",void 0),(0,H.extend)(this,r),this.type=n;}}class $ extends q{constructor(n,r={}){super("error",r),(0,f.default)(this,"error",void 0),this.error=n;}}class Y{constructor(){(0,f.default)(this,"_listeners",void 0),(0,f.default)(this,"_oneTimeListeners",void 0),(0,f.default)(this,"_eventedParent",void 0),(0,f.default)(this,"_eventedParentData",void 0);}on(n,r){return this._listeners=this._listeners||{},W(n,r,this._listeners),this;}off(n,r){return X(n,r,this._listeners),X(n,r,this._oneTimeListeners),this;}once(n,r){return r?(this._oneTimeListeners=this._oneTimeListeners||{},W(n,r,this._oneTimeListeners),this):new Promise(r=>this.once(n,r));}fire(n,r){"string"==typeof n&&(n=new q(n,r||{}));let i=n.type;if(this.listens(i)){for(let r of(n.target=this,this._listeners&&this._listeners[i]?this._listeners[i].slice():[]))r.call(this,n);for(let r of this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[])X(i,r,this._oneTimeListeners),r.call(this,n);let r=this._eventedParent;r&&((0,H.extend)(n,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),r.fire(n));}else n instanceof $&&console.error(n.error);return this;}emit(n,r){return this.fire(n,r);}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n);}setEventedParent(n,r){return n&&(this._eventedParent=n),this._eventedParentData=r,this;}}class Z extends Y{constructor(n,r){super(),(0,f.default)(this,"transform",void 0),(0,f.default)(this,"handlers",void 0),(0,f.default)(this,"_moving",void 0),(0,f.default)(this,"_zooming",void 0),(0,f.default)(this,"_rotating",void 0),(0,f.default)(this,"_pitching",void 0),(0,f.default)(this,"_padding",void 0),(0,f.default)(this,"_bearingSnap",void 0),(0,f.default)(this,"_easeStart",void 0),(0,f.default)(this,"_easeOptions",void 0),(0,f.default)(this,"_easeId",void 0),(0,f.default)(this,"_onEaseFrame",void 0),(0,f.default)(this,"_onEaseEnd",void 0),(0,f.default)(this,"_easeFrameId",void 0),(0,f.default)(this,"_requestedCameraState",void 0),(0,f.default)(this,"transformCameraUpdate",void 0),(0,f.default)(this,"_renderFrameCallback",()=>{let n=Math.min((G.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(n)),n<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop();}),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=r.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState;});}getCenter(){return new U.LngLat(this.transform.center.lng,this.transform.center.lat);}setCenter(n,r){return this.jumpTo({center:n},r);}panBy(n,r,i){return n=z.default.convert(n).mult(-1),this.panTo(this.transform.center,(0,H.extend)({offset:n},r),i);}panTo(n,r,i){return this.easeTo((0,H.extend)({center:n},r),i);}getZoom(){return this.transform.zoom;}setZoom(n,r){return this.jumpTo({zoom:n},r),this;}zoomTo(n,r,i){return this.easeTo((0,H.extend)({zoom:n},r),i);}zoomIn(n,r){return this.zoomTo(this.getZoom()+1,n,r),this;}zoomOut(n,r){return this.zoomTo(this.getZoom()-1,n,r),this;}getBearing(){return this.transform.bearing;}setBearing(n,r){return this.jumpTo({bearing:n},r),this;}getPadding(){return this.transform.padding;}setPadding(n,r){return this.jumpTo({padding:n},r),this;}rotateTo(n,r,i){return this.easeTo((0,H.extend)({bearing:n},r),i);}resetNorth(n,r){return this.rotateTo(0,(0,H.extend)({duration:1e3},n),r),this;}resetNorthPitch(n,r){return this.easeTo((0,H.extend)({bearing:0,pitch:0,duration:1e3},n),r),this;}snapToNorth(n,r){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,r):this;}getPitch(){return this.transform.pitch;}setPitch(n,r){return this.jumpTo({pitch:n},r),this;}cameraForBounds(n,r){n=V.convert(n);let i=r&&r.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),i,r);}_cameraForBoxAndBearing(n,r,i,a){let o={top:0,bottom:0,right:0,left:0};if("number"==typeof(a=(0,H.extend)({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},a)).padding){let n=a.padding;a.padding={top:n,bottom:n,right:n,left:n};}a.padding=(0,H.extend)(o,a.padding);let s=this.transform,l=s.padding,u=new V(n,r),c=s.project(u.getNorthWest()),f=s.project(u.getNorthEast()),d=s.project(u.getSouthEast()),h=s.project(u.getSouthWest()),p=(0,H.degreesToRadians)(-i),m=c.rotate(p),g=f.rotate(p),v=d.rotate(p),y=h.rotate(p),_=new z.default(Math.max(m.x,g.x,y.x,v.x),Math.max(m.y,g.y,y.y,v.y)),b=new z.default(Math.min(m.x,g.x,y.x,v.x),Math.min(m.y,g.y,y.y,v.y)),x=_.sub(b),E=(s.width-(l.left+l.right+a.padding.left+a.padding.right))/x.x,w=(s.height-(l.top+l.bottom+a.padding.top+a.padding.bottom))/x.y;if(w<0||E<0){(0,H.warnOnce)("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return;}let S=Math.min(s.scaleZoom(s.scale*Math.min(E,w)),a.maxZoom),T=z.default.convert(a.offset),A=(a.padding.left-a.padding.right)/2,C=(a.padding.top-a.padding.bottom)/2,O=new z.default(A,C).rotate((0,H.degreesToRadians)(i)),M=T.add(O).mult(s.scale/s.zoomScale(S));return{center:s.unproject(c.add(d).div(2).sub(M)),zoom:S,bearing:i};}fitBounds(n,r,i){return this._fitInternal(this.cameraForBounds(n,r),r,i);}fitScreenCoordinates(n,r,i,a,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(z.default.convert(n)),this.transform.pointLocation(z.default.convert(r)),i,a),a,o);}_fitInternal(n,r,i){return n?(r=(0,H.extend)(n,r),delete r.padding,r.linear?this.easeTo(r,i):this.flyTo(r,i)):this;}jumpTo(n,r){this.stop();let i=this._getTransformForUpdate(),a=!1,o=!1,s=!1;return"zoom"in n&&i.zoom!==+n.zoom&&(a=!0,i.zoom=+n.zoom),void 0!==n.center&&(i.center=U.LngLat.convert(n.center)),"bearing"in n&&i.bearing!==+n.bearing&&(o=!0,i.bearing=+n.bearing),"pitch"in n&&i.pitch!==+n.pitch&&(s=!0,i.pitch=+n.pitch),null==n.padding||i.isPaddingEqual(n.padding)||(i.padding=n.padding),this._applyUpdatedTransform(i),this.fire(new q("movestart",r)).fire(new q("move",r)),a&&this.fire(new q("zoomstart",r)).fire(new q("zoom",r)).fire(new q("zoomend",r)),o&&this.fire(new q("rotatestart",r)).fire(new q("rotate",r)).fire(new q("rotateend",r)),s&&this.fire(new q("pitchstart",r)).fire(new q("pitch",r)).fire(new q("pitchend",r)),this.fire(new q("moveend",r));}calculateCameraOptionsFromTo(n,r,i,a=0){let o=B.MercatorCoordinate.fromLngLat(n,r),s=B.MercatorCoordinate.fromLngLat(i,a),l=s.x-o.x,u=s.y-o.y,c=s.z-o.z,f=Math.hypot(l,u,c);if(0===f)throw Error("Can't calculate camera options with same From and To");let d=Math.hypot(l,u),h=this.transform.scaleZoom(this.transform.cameraToCenterDistance/f/this.transform.tileSize),p=180*Math.atan2(l,-u)/Math.PI,m=180*Math.acos(d/f)/Math.PI;return m=c<0?90-m:90+m,{center:s.toLngLat(),zoom:h,pitch:m,bearing:p};}easeTo(n,r){var i;let a,o;this._stop(!1,n.easeId),(!1===(n=(0,H.extend)({offset:[0,0],duration:500,easing:H.defaultEasing},n)).animate||!n.essential&&G.prefersReducedMotion)&&(n.duration=0);let s=this._getTransformForUpdate(),l=this.getZoom(),u=this.getBearing(),c=this.getPitch(),f=this.getPadding(),d="bearing"in n?this._normalizeBearing(n.bearing,u):u,h="pitch"in n?+n.pitch:c,p="padding"in n?n.padding:s.padding,m=z.default.convert(n.offset),g=s.centerPoint.add(m),v=s.pointLocation(g),{center:y,zoom:_}=s.getConstrained(U.LngLat.convert(n.center||v),null!==(i=n.zoom)&&void 0!==i?i:l);this._normalizeCenter(y);let b=s.project(v),x=s.project(y).sub(b),E=s.zoomScale(_-l);n.around&&(a=U.LngLat.convert(n.around),o=s.locationPoint(a));let w={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||_!==l,this._rotating=this._rotating||u!==d,this._pitching=this._pitching||h!==c,this._padding=!s.isPaddingEqual(p),this._easeId=n.easeId,this._prepareEase(r,n.noMoveStart,w),this._ease(n=>{if(this._zooming&&(s.zoom=H.interpolates.number(l,_,n)),this._rotating&&(s.bearing=H.interpolates.number(u,d,n)),this._pitching&&(s.pitch=H.interpolates.number(c,h,n)),this._padding&&(s.interpolatePadding(f,p,n),g=s.centerPoint.add(m)),a)s.setLocationAtPoint(a,o);else{let r=s.zoomScale(s.zoom-l),i=Math.pow(_>l?Math.min(2,E):Math.max(.5,E),1-n),a=s.unproject(b.add(x.mult(n*i)).mult(r));s.setLocationAtPoint(s.renderWorldCopies?a.wrap():a,g);}this._applyUpdatedTransform(s),this._fireMoveEvents(r);},n=>{this._afterEase(r,n);},n),this;}_prepareEase(n,r,i={}){this._moving=!0,r||i.moving||this.fire(new q("movestart",n)),this._zooming&&!i.zooming&&this.fire(new q("zoomstart",n)),this._rotating&&!i.rotating&&this.fire(new q("rotatestart",n)),this._pitching&&!i.pitching&&this.fire(new q("pitchstart",n));}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform;}_applyUpdatedTransform(n){if(!this.transformCameraUpdate)return;let r=n.clone(),{center:i,zoom:a,pitch:o,bearing:s,elevation:l}=this.transformCameraUpdate(r);i&&(r.center=i),void 0!==a&&(r.zoom=a),void 0!==o&&(r.pitch=o),void 0!==s&&(r.bearing=s),void 0!==l&&(r.elevation=l),this.transform.apply(r);}_fireMoveEvents(n){this.fire(new q("move",n)),this._zooming&&this.fire(new q("zoom",n)),this._rotating&&this.fire(new q("rotate",n)),this._pitching&&this.fire(new q("pitch",n));}_afterEase(n,r){if(this._easeId&&r&&this._easeId===r)return;delete this._easeId;let i=this._zooming,a=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,i&&this.fire(new q("zoomend",n)),a&&this.fire(new q("rotateend",n)),o&&this.fire(new q("pitchend",n)),this.fire(new q("moveend",n));}flyTo(n,r){var i;if(!n.essential&&G.prefersReducedMotion){let i=(0,H.pick)(n,["center","zoom","bearing","pitch","around"]);return this.jumpTo(i,r);}this.stop(),n=(0,H.extend)({offset:[0,0],speed:1.2,curve:1.42,easing:H.defaultEasing},n);let a=this._getTransformForUpdate(),o=this.getZoom(),s=this.getBearing(),l=this.getPitch(),u=this.getPadding(),c="bearing"in n?this._normalizeBearing(n.bearing,s):s,f="pitch"in n?+n.pitch:l,d="padding"in n?n.padding:a.padding,h=z.default.convert(n.offset),p=a.centerPoint.add(h),m=a.pointLocation(p),{center:g,zoom:v}=a.getConstrained(U.LngLat.convert(n.center||m),null!==(i=n.zoom)&&void 0!==i?i:o);this._normalizeCenter(g);let y=a.zoomScale(v-o),_=a.project(m),b=a.project(g).sub(_),x=n.curve,E=Math.max(a.width,a.height),w=E/y,S=b.mag();if("minZoom"in n){let r=(0,H.clamp)(Math.min(n.minZoom,o,v),a.minZoom,a.maxZoom);x=Math.sqrt(E/a.zoomScale(r-o)/S*2);}let T=x*x;function A(n){let r=(w*w-E*E+(n?-1:1)*T*T*S*S)/(2*(n?w:E)*T*S);return Math.log(Math.sqrt(r*r+1)-r);}function C(n){return(Math.exp(n)-Math.exp(-n))/2;}function O(n){return(Math.exp(n)+Math.exp(-n))/2;}let M=A(!1),R=function(n){return O(M)/O(M+x*n);},P=function(n){var r;return E*((O(M)*(C(r=M+x*n)/O(r))-C(M))/T)/S;},k=(A(!0)-M)/x;if(1e-6>Math.abs(S)||!isFinite(k)){if(1e-6>Math.abs(E-w))return this.easeTo(n,r);let i=w<E?-1:1;k=Math.abs(Math.log(w/E))/x,P=()=>0,R=n=>Math.exp(i*x*n);}if("duration"in n)n.duration=+n.duration;else{let r="screenSpeed"in n?+n.screenSpeed/x:+n.speed;n.duration=1e3*k/r;}return n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=s!==c,this._pitching=f!==l,this._padding=!a.isPaddingEqual(d),this._prepareEase(r,!1),this._ease(n=>{let i=n*k,m=1/R(i);a.zoom=1===n?v:o+a.scaleZoom(m),this._rotating&&(a.bearing=H.interpolates.number(s,c,n)),this._pitching&&(a.pitch=H.interpolates.number(l,f,n)),this._padding&&(a.interpolatePadding(u,d,n),p=a.centerPoint.add(h));let y=1===n?g:a.unproject(_.add(b.mult(P(i))).mult(m));a.setLocationAtPoint(a.renderWorldCopies?y.wrap():y,p),this._applyUpdatedTransform(a),this._fireMoveEvents(r);},()=>{this._afterEase(r);},n),this;}isEasing(){return!!this._easeFrameId;}stop(){return this._stop();}_stop(n,r){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let n=this._onEaseEnd;delete this._onEaseEnd,n.call(this,r);}if(!n){var i;null===(i=this.handlers)||void 0===i||i.stop(!1);}return this;}_ease(n,r,i){!1===i.animate||0===i.duration?(n(1),r()):(this._easeStart=G.now(),this._easeOptions=i,this._onEaseFrame=n,this._onEaseEnd=r,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback));}_normalizeBearing(n,r){let i=Math.abs((n=(0,H.wrap)(n,-180,180))-r);return Math.abs(n-360-r)<i&&(n-=360),Math.abs(n+360-r)<i&&(n+=360),n;}_normalizeCenter(n){let r=this.transform;if(!r.renderWorldCopies||r.lngRange)return;let i=n.lng-r.center.lng;n.lng+=i>180?-360:i<-180?360:0;}}var K=i("1cf5f081"),Q=s._(K);function J(){var n=new Q.ARRAY_TYPE(4);return Q.ARRAY_TYPE!=Float32Array&&(n[1]=0,n[2]=0),n[0]=1,n[3]=1,n;}function ee(n,r,i){var a=r[0],o=r[1],s=r[2],l=r[3],u=Math.sin(i),c=Math.cos(i);return n[0]=a*c+s*u,n[1]=o*c+l*u,n[2]=-(a*u)+s*c,n[3]=-(o*u)+l*c,n;}var et={};i.e(et,{create:function(){return J;},rotate:function(){return ee;}});var en=i("26429605"),er=s._(en);class ei{constructor(n=0,r=0,i=0,a=0){if((0,f.default)(this,"top",void 0),(0,f.default)(this,"bottom",void 0),(0,f.default)(this,"left",void 0),(0,f.default)(this,"right",void 0),isNaN(n)||n<0||isNaN(r)||r<0||isNaN(i)||i<0||isNaN(a)||a<0)throw Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=r,this.left=i,this.right=a;}interpolate(n,r,i){return null!=r.top&&null!=n.top&&(this.top=H.interpolates.number(n.top,r.top,i)),null!=r.bottom&&null!=n.bottom&&(this.bottom=H.interpolates.number(n.bottom,r.bottom,i)),null!=r.left&&null!=n.left&&(this.left=H.interpolates.number(n.left,r.left,i)),null!=r.right&&null!=n.right&&(this.right=H.interpolates.number(n.right,r.right,i)),this;}getCenter(n,r){let i=(0,H.clamp)((this.left+n-this.right)/2,0,n),a=(0,H.clamp)((this.top+r-this.bottom)/2,0,r);return new z.default(i,a);}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right;}clone(){return new ei(this.top,this.bottom,this.left,this.right);}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right};}}class ea{constructor(n,r,i,a,o){(0,f.default)(this,"tileSize",void 0),(0,f.default)(this,"tileZoom",void 0),(0,f.default)(this,"lngRange",void 0),(0,f.default)(this,"latRange",void 0),(0,f.default)(this,"scale",void 0),(0,f.default)(this,"width",void 0),(0,f.default)(this,"height",void 0),(0,f.default)(this,"angle",void 0),(0,f.default)(this,"rotationMatrix",void 0),(0,f.default)(this,"pixelsToGLUnits",void 0),(0,f.default)(this,"cameraToCenterDistance",void 0),(0,f.default)(this,"mercatorMatrix",void 0),(0,f.default)(this,"projMatrix",void 0),(0,f.default)(this,"invProjMatrix",void 0),(0,f.default)(this,"alignedProjMatrix",void 0),(0,f.default)(this,"pixelMatrix",void 0),(0,f.default)(this,"pixelMatrix3D",void 0),(0,f.default)(this,"pixelMatrixInverse",void 0),(0,f.default)(this,"glCoordMatrix",void 0),(0,f.default)(this,"labelPlaneMatrix",void 0),(0,f.default)(this,"minElevationForCurrentTile",void 0),(0,f.default)(this,"_fov",void 0),(0,f.default)(this,"_pitch",void 0),(0,f.default)(this,"_zoom",void 0),(0,f.default)(this,"_unmodified",void 0),(0,f.default)(this,"_renderWorldCopies",void 0),(0,f.default)(this,"_minZoom",void 0),(0,f.default)(this,"_maxZoom",void 0),(0,f.default)(this,"_minPitch",void 0),(0,f.default)(this,"_maxPitch",void 0),(0,f.default)(this,"_center",void 0),(0,f.default)(this,"_elevation",void 0),(0,f.default)(this,"_pixelPerMeter",void 0),(0,f.default)(this,"_edgeInsets",void 0),(0,f.default)(this,"_constraining",void 0),(0,f.default)(this,"_posMatrixCache",void 0),(0,f.default)(this,"_alignedPosMatrixCache",void 0),this.tileSize=512,this._renderWorldCopies=void 0===o||!!o,this._minZoom=n||0,this._maxZoom=r||22,this._minPitch=null==i?0:i,this._maxPitch=null==a?60:a,this.setMaxBounds(),this.width=0,this.height=0,this._center=new U.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ei,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0;}clone(){let n=new ea(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.apply(this),n;}apply(n){this.tileSize=n.tileSize,this.latRange=n.latRange,this.width=n.width,this.height=n.height,this._center=n._center,this._elevation=n._elevation,this.minElevationForCurrentTile=n.minElevationForCurrentTile,this.zoom=n.zoom,this.angle=n.angle,this._fov=n._fov,this._pitch=n._pitch,this._unmodified=n._unmodified,this._edgeInsets=n._edgeInsets.clone(),this._calcMatrices();}get minZoom(){return this._minZoom;}set minZoom(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n));}get maxZoom(){return this._maxZoom;}set maxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n));}get minPitch(){return this._minPitch;}set minPitch(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n));}get maxPitch(){return this._maxPitch;}set maxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n));}get renderWorldCopies(){return this._renderWorldCopies;}set renderWorldCopies(n){void 0===n?n=!0:null===n&&(n=!1),this._renderWorldCopies=n;}get worldSize(){return this.tileSize*this.scale;}get centerOffset(){return this.centerPoint._sub(this.size._div(2));}get size(){return new z.default(this.width,this.height);}get bearing(){return-this.angle/Math.PI*180;}set bearing(n){let r=-(0,H.wrap)(n,-180,180)*Math.PI/180;this.angle!==r&&(this._unmodified=!1,this.angle=r,this._calcMatrices(),this.rotationMatrix=et.create(),et.rotate(this.rotationMatrix,this.rotationMatrix,this.angle));}get pitch(){return this._pitch/Math.PI*180;}set pitch(n){let r=(0,H.clamp)(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==r&&(this._unmodified=!1,this._pitch=r,this._calcMatrices());}get fov(){return this._fov/Math.PI*180;}set fov(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices());}get zoom(){return this._zoom;}set zoom(n){let r=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==r&&(this._unmodified=!1,this._zoom=r,this.tileZoom=Math.max(0,Math.floor(r)),this.scale=this.zoomScale(r),this._constrain(),this._calcMatrices());}get center(){return this._center;}set center(n){(n.lat!==this._center.lat||n.lng!==this._center.lng)&&(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices());}get elevation(){return this._elevation;}set elevation(n){n!==this._elevation&&(this._elevation=n,this._constrain(),this._calcMatrices());}get padding(){return this._edgeInsets.toJSON();}set padding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices());}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height);}isPaddingEqual(n){return this._edgeInsets.equals(n);}interpolatePadding(n,r,i){this._unmodified=!1,this._edgeInsets.interpolate(n,r,i),this._constrain(),this._calcMatrices();}coveringZoomLevel(n){return Math.max(0,(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize)));}resize(n,r){this.width=n,this.height=r,this.pixelsToGLUnits=[2/n,-2/r],this._constrain(),this._calcMatrices();}get unmodified(){return this._unmodified;}zoomScale(n){return Math.pow(2,n);}scaleZoom(n){return Math.log(n)/Math.LN2;}project(n){let r=(0,H.clamp)(n.lat,-85.051129,85.051129);return new z.default((0,B.mercatorXfromLng)(n.lng)*this.worldSize,(0,B.mercatorYfromLat)(r)*this.worldSize);}unproject(n){return new B.MercatorCoordinate(n.x/this.worldSize,n.y/this.worldSize).toLngLat();}get point(){return this.project(this.center);}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation};}setLocationAtPoint(n,r){let i=this.pointCoordinate(r),a=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(n),s=new B.MercatorCoordinate(o.x-(i.x-a.x),o.y-(i.y-a.y));this.center=this.coordinateLocation(s),this._renderWorldCopies&&(this.center=this.center.wrap());}locationPoint(n){return this.coordinatePoint(this.locationCoordinate(n));}pointLocation(n){return this.coordinateLocation(this.pointCoordinate(n));}locationCoordinate(n){return B.MercatorCoordinate.fromLngLat(n);}coordinateLocation(n){return n&&n.toLngLat();}pointCoordinate(n){let r=[n.x,n.y,0,1],i=[n.x,n.y,1,1];er.transformMat4(r,r,this.pixelMatrixInverse),er.transformMat4(i,i,this.pixelMatrixInverse);let a=r[3],o=i[3],s=r[0]/a,l=i[0]/o,u=r[1]/a,c=i[1]/o,f=r[2]/a,d=i[2]/o,h=f===d?0:(0-f)/(d-f);return new B.MercatorCoordinate(H.interpolates.number(s,l,h)/this.worldSize,H.interpolates.number(u,c,h)/this.worldSize);}coordinatePoint(n,r=0,i=this.pixelMatrix){let a=[n.x*this.worldSize,n.y*this.worldSize,r,1];return er.transformMat4(a,a,i),new z.default(a[0]/a[3],a[1]/a[3]);}getBounds(){let n=Math.max(0,this.height/2-this.getHorizon());return new V().extend(this.pointLocation(new z.default(0,n))).extend(this.pointLocation(new z.default(this.width,n))).extend(this.pointLocation(new z.default(this.width,this.height))).extend(this.pointLocation(new z.default(0,this.height)));}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new V([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null;}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85;}setMaxBounds(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,85.051129]);}customLayerMatrix(){return this.mercatorMatrix.slice();}getConstrained(n,r){let i,a;r=(0,H.clamp)(+r,this.minZoom,this.maxZoom);let o={center:new U.LngLat(n.lng,n.lat),zoom:r},s=this.lngRange;this._renderWorldCopies||null!==s||(s=[-(180-1e-10),180-1e-10]);let l=this.tileSize*this.zoomScale(o.zoom),u=0,c=l,f=0,d=l,h=0,p=0,{x:m,y:g}=this.size;if(this.latRange){let n=this.latRange;u=(0,B.mercatorYfromLat)(n[1])*l,(c=(0,B.mercatorYfromLat)(n[0])*l)-u<g&&(h=g/(c-u));}s&&(f=(0,H.wrap)((0,B.mercatorXfromLng)(s[0])*l,0,l),(d=(0,H.wrap)((0,B.mercatorXfromLng)(s[1])*l,0,l))<f&&(d+=l),d-f<m&&(p=m/(d-f)));let{x:v,y:y}=this.project.call({worldSize:l},n),_=Math.max(p||0,h||0);if(_){let n=new z.default(p?(d+f)/2:v,h?(c+u)/2:y);return o.center=this.unproject.call({worldSize:l},n).wrap(),o.zoom+=this.scaleZoom(_),o;}if(this.latRange){let n=g/2;y-n<u&&(a=u+n),y+n>c&&(a=c-n);}if(s){let n=(f+d)/2,r=v;this._renderWorldCopies&&(r=(0,H.wrap)(v,n-l/2,n+l/2));let a=m/2;r-a<f&&(i=f+a),r+a>d&&(i=d-a);}if(void 0!==i||void 0!==a){var b,x;let n=new z.default(null!==(b=i)&&void 0!==b?b:v,null!==(x=a)&&void 0!==x?x:y);o.center=this.unproject.call({worldSize:l},n).wrap();}return o;}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let n=this._unmodified,{center:r,zoom:i}=this.getConstrained(this.center,this.zoom);this.center=r,this.zoom=i,this._unmodified=n,this._constraining=!1;}_calcMatrices(){if(!this.height)return;let n=this._fov/2,r=this.centerOffset,i=this.point.x,a=this.point.y;this.cameraToCenterDistance=.5/Math.tan(n)*this.height,this._pixelPerMeter=(0,B.mercatorZfromAltitude)(1,this.center.lat)*this.worldSize;let o=E.identity(new Float64Array(16));E.scale(o,o,[this.width/2,-this.height/2,1]),E.translate(o,o,[1,-1,0]),this.labelPlaneMatrix=o,o=E.identity(new Float64Array(16)),E.scale(o,o,[1,-1,1]),E.translate(o,o,[-1,-1,0]),E.scale(o,o,[2/this.width,2/this.height,1]),this.glCoordMatrix=o;let s=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),l=Math.min(this.elevation,this.minElevationForCurrentTile),u=s-l*this._pixelPerMeter/Math.cos(this._pitch),c=l<0?u:s,f=Math.PI/2+this._pitch,d=this._fov*(.5+r.y/this.height),h=Math.sin(d)*c/Math.sin((0,H.clamp)(Math.PI-f-d,.01,Math.PI-.01)),p=this.getHorizon(),m=2*Math.atan(p/this.cameraToCenterDistance)*(.5+r.y/(2*p)),g=Math.min(h,Math.sin(m)*c/Math.sin((0,H.clamp)(Math.PI-f-m,.01,Math.PI-.01))),v=(Math.cos(Math.PI/2-this._pitch)*g+c)*1.01,y=this.height/50;o=new Float64Array(16),E.perspective(o,this._fov,this.width/this.height,y,v),o[8]=-(2*r.x)/this.width,o[9]=2*r.y/this.height,E.scale(o,o,[1,-1,1]),E.translate(o,o,[0,0,-this.cameraToCenterDistance]),E.rotateX(o,o,this._pitch),E.rotateZ(o,o,this.angle),E.translate(o,o,[-i,-a,0]),this.mercatorMatrix=E.scale([],o,[this.worldSize,this.worldSize,this.worldSize]),E.scale(o,o,[1,1,this._pixelPerMeter]),this.pixelMatrix=E.multiply(new Float64Array(16),this.labelPlaneMatrix,o),E.translate(o,o,[0,0,-this.elevation]),this.projMatrix=o,this.invProjMatrix=E.invert([],o),this.pixelMatrix3D=E.multiply(new Float64Array(16),this.labelPlaneMatrix,o);let _=this.width%2/2,b=this.height%2/2,x=Math.cos(this.angle),w=Math.sin(this.angle),S=i-Math.round(i)+x*_+w*b,T=a-Math.round(a)+x*b+w*_,A=new Float64Array(o);if(E.translate(A,A,[S>.5?S-1:S,T>.5?T-1:T,0]),this.alignedProjMatrix=A,!(o=E.invert(new Float64Array(16),this.pixelMatrix)))throw Error("failed to invert matrix");this.pixelMatrixInverse=o,this._posMatrixCache={},this._alignedPosMatrixCache={};}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;let n=this.pointCoordinate(new z.default(0,0)),r=[n.x*this.worldSize,n.y*this.worldSize,0,1];return er.transformMat4(r,r,this.pixelMatrix)[3]/this.cameraToCenterDistance;}getCameraPoint(){let n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new z.default(0,n));}getCameraQueryGeometry(n){let r=this.getCameraPoint();if(1===n.length)return[n[0],r];{let i=r.x,a=r.y,o=r.x,s=r.y;for(let r of n)i=Math.min(i,r.x),a=Math.min(a,r.y),o=Math.max(o,r.x),s=Math.max(s,r.y);return[new z.default(i,a),new z.default(o,a),new z.default(o,s),new z.default(i,s),new z.default(i,a)];}}lngLatToCameraDepth(n,r){let i=this.locationCoordinate(n),a=[i.x*this.worldSize,i.y*this.worldSize,r,1];return er.transformMat4(a,a,this.projMatrix),a[2]/a[3];}}class eo{static testProp(n){if(!eo.docStyle)return n[0];for(let r=0;r<n.length;r++)if(n[r]in eo.docStyle)return n[r];return n[0];}static create(n,r,i){let a=window.document.createElement(n);return void 0!==r&&(a.className=r),i&&i.appendChild(a),a;}static createNS(n,r){return window.document.createElementNS(n,r);}static disableDrag(){eo.docStyle&&eo.selectProp&&(eo.userSelect=eo.docStyle[eo.selectProp],eo.docStyle[eo.selectProp]="none");}static enableDrag(){eo.docStyle&&eo.selectProp&&(eo.docStyle[eo.selectProp]=eo.userSelect);}static setTransform(n,r){n.style[eo.transformProp]=r;}static addEventListener(n,r,i,a={}){"passive"in a?n.addEventListener(r,i,a):n.addEventListener(r,i,a.capture);}static removeEventListener(n,r,i,a={}){"passive"in a?n.removeEventListener(r,i,a):n.removeEventListener(r,i,a.capture);}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",eo.suppressClickInternal,!0);}static suppressClick(){window.addEventListener("click",eo.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",eo.suppressClickInternal,!0);},0);}static getScale(n){let r=n.getBoundingClientRect();return{x:r.width/n.offsetWidth||1,y:r.height/n.offsetHeight||1,boundingClientRect:r};}static getPoint(n,r,i){let a=r.boundingClientRect;return new z.default((i.clientX-a.left)/r.x-n.clientLeft,(i.clientY-a.top)/r.y-n.clientTop);}static mousePos(n,r){let i=eo.getScale(n);return eo.getPoint(n,i,r);}static touchPos(n,r){let i=[],a=eo.getScale(n);for(let o=0;o<r.length;o++)i.push(eo.getPoint(n,a,r[o]));return i;}static mouseButton(n){return n.button;}static remove(n){n.parentNode&&n.parentNode.removeChild(n);}}(0,f.default)(eo,"docStyle","undefined"!=typeof window&&window.document&&window.document.documentElement.style),(0,f.default)(eo,"userSelect",void 0),(0,f.default)(eo,"selectProp",eo.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"])),(0,f.default)(eo,"transformProp",eo.testProp(["transform","WebkitTransform"]));class es{constructor(n){(0,f.default)(this,"_map",void 0),this._map=n;}get transform(){return this._map._requestedCameraState||this._map.transform;}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat};}get zoom(){return this.transform.zoom;}get pitch(){return this.transform.pitch;}get bearing(){return this.transform.bearing;}unproject(n){return this.transform.pointLocation(z.default.convert(n));}}class el{constructor(n,r){(0,f.default)(this,"_map",void 0),(0,f.default)(this,"_tr",void 0),(0,f.default)(this,"_el",void 0),(0,f.default)(this,"_container",void 0),(0,f.default)(this,"_enabled",void 0),(0,f.default)(this,"_active",void 0),(0,f.default)(this,"_startPos",void 0),(0,f.default)(this,"_lastPos",void 0),(0,f.default)(this,"_box",void 0),(0,f.default)(this,"_clickTolerance",void 0),this._map=n,this._tr=new es(n),this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=r.clickTolerance||1;}isEnabled(){return!!this._enabled;}isActive(){return!!this._active;}enable(){this.isEnabled()||(this._enabled=!0);}disable(){this.isEnabled()&&(this._enabled=!1);}mousedown(n,r){this.isEnabled()&&n.shiftKey&&0===n.button&&(eo.disableDrag(),this._startPos=this._lastPos=r,this._active=!0);}mousemoveWindow(n,r){if(!this._active||this._lastPos.equals(r)||!this._box&&r.dist(this._startPos)<this._clickTolerance)return;let i=this._startPos;this._lastPos=r,this._box||(this._box=eo.create("div","l7-boxzoom",this._container),this._container.classList.add("l7-crosshair"),this._fireEvent("boxzoomstart",n));let a=Math.min(i.x,r.x),o=Math.max(i.x,r.x),s=Math.min(i.y,r.y),l=Math.max(i.y,r.y);eo.setTransform(this._box,`translate(${a}px,${s}px)`),this._box.style.width=`${o-a}px`,this._box.style.height=`${l-s}px`;}mouseupWindow(n,r){if(!this._active||0!==n.button)return;let i=this._startPos;if(this.reset(),eo.suppressClick(),i.x!==r.x||i.y!==r.y)return this._map.fire(new q("boxzoomend",{originalEvent:n})),{cameraAnimation:n=>n.fitScreenCoordinates(i,r,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",n);}keydown(n){this._active&&27===n.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",n));}reset(){this._active=!1,this._container.classList.remove("l7-crosshair"),this._box&&(eo.remove(this._box),this._box=null),eo.enableDrag(),delete this._startPos,delete this._lastPos;}_fireEvent(n,r){return this._map.fire(new q(n,{originalEvent:r}));}}class eu{constructor(n){(0,f.default)(this,"_tr",void 0),(0,f.default)(this,"_enabled",void 0),(0,f.default)(this,"_active",void 0),this._tr=new es(n),this.reset();}reset(){this._active=!1;}dblclick(n,r){return n.preventDefault(),{cameraAnimation:i=>{i.easeTo({duration:300,zoom:this._tr.zoom+(n.shiftKey?-1:1),around:this._tr.unproject(r)},{originalEvent:n});}};}enable(){this._enabled=!0;}disable(){this._enabled=!1,this.reset();}isEnabled(){return this._enabled;}isActive(){return this._active;}}class ec{constructor(n,r){(0,f.default)(this,"_options",void 0),(0,f.default)(this,"_map",void 0),(0,f.default)(this,"_container",void 0),(0,f.default)(this,"_bypassKey",-1!==navigator.userAgent.indexOf("Mac")?"metaKey":"ctrlKey"),(0,f.default)(this,"_enabled",void 0),this._map=n,this._options=r,this._enabled=!1;}isActive(){return!1;}reset(){}_setupUI(){if(this._container)return;let n=this._map.getCanvasContainer();n.classList.add("l7-cooperative-gestures"),this._container=eo.create("div","l7-cooperative-gesture-screen",n);let r=document.createElement("div");r.className="l7-desktop-message",r.textContent="Missing UI string",this._container.appendChild(r);let i=document.createElement("div");i.className="l7-mobile-message",i.textContent="Missing UI string",this._container.appendChild(i),this._container.setAttribute("aria-hidden","true");}_destoryUI(){this._container&&(eo.remove(this._container),this._map.getCanvasContainer().classList.remove("l7-cooperative-gestures")),delete this._container;}enable(){this._setupUI(),this._enabled=!0;}disable(){this._enabled=!1,this._destoryUI();}isEnabled(){return this._enabled;}touchmove(n){this._onCooperativeGesture(1===n.touches.length);}wheel(n){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!n[this._bypassKey]);}_onCooperativeGesture(n){this._enabled&&n&&(this._container.classList.add("l7-show"),setTimeout(()=>{this._container.classList.remove("l7-show");},100));}}class ef{constructor(n){(0,f.default)(this,"_tr",void 0),(0,f.default)(this,"_enabled",void 0),(0,f.default)(this,"_active",void 0),(0,f.default)(this,"_panStep",void 0),(0,f.default)(this,"_bearingStep",void 0),(0,f.default)(this,"_pitchStep",void 0),(0,f.default)(this,"_rotationDisabled",void 0),this._tr=new es(n),this._panStep=100,this._bearingStep=15,this._pitchStep=10,this._rotationDisabled=!1;}reset(){this._active=!1;}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let r=0,i=0,a=0,o=0,s=0;switch(n.keyCode){case 61:case 107:case 171:case 187:r=1;break;case 189:case 109:case 173:r=-1;break;case 37:n.shiftKey?i=-1:(n.preventDefault(),o=-1);break;case 39:n.shiftKey?i=1:(n.preventDefault(),o=1);break;case 38:n.shiftKey?a=1:(n.preventDefault(),s=-1);break;case 40:n.shiftKey?a=-1:(n.preventDefault(),s=1);break;default:return;}return this._rotationDisabled&&(i=0,a=0),{cameraAnimation:l=>{let u=this._tr;l.easeTo({duration:300,easeId:"keyboardHandler",easing:ed,zoom:r?Math.round(u.zoom)+r*(n.shiftKey?2:1):u.zoom,bearing:u.bearing+i*this._bearingStep,pitch:u.pitch+a*this._pitchStep,offset:[-o*this._panStep,-s*this._panStep],center:u.center},{originalEvent:n});}};}enable(){this._enabled=!0;}disable(){this._enabled=!1,this.reset();}isEnabled(){return this._enabled;}isActive(){return this._active;}disableRotation(){this._rotationDisabled=!0;}enableRotation(){this._rotationDisabled=!1;}}function ed(n){return n*(2-n);}class eh{constructor(n){(0,f.default)(this,"size",1e4),this.size=n||1e4;}setSize(n){this.size=n;}getSize(){return[this.size,this.size];}mercatorXfromLng(n){return(180+n)/360*this.size;}mercatorYfromLat(n){return(1-(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360)*this.size;}lngFromMercatorX(n){return n/this.size*360-180;}latFromMercatorY(n){return 360/Math.PI*Math.atan(Math.exp((180-(1-n/this.size)*360)*Math.PI/180))-90;}project(n){return[this.mercatorXfromLng(n[0]),this.mercatorYfromLat(n[1])];}unproject(n){return[this.lngFromMercatorX(n[0]),this.latFromMercatorY(n[1])];}}class ep extends q{preventDefault(){this._defaultPrevented=!0;}get defaultPrevented(){return this._defaultPrevented;}constructor(n,r,i,a={}){super(n,a),(0,f.default)(this,"target",void 0),(0,f.default)(this,"originalEvent",void 0),(0,f.default)(this,"point",void 0),(0,f.default)(this,"lngLat",void 0),(0,f.default)(this,"_defaultPrevented",void 0);let o=eo.mousePos(r.getCanvasContainer(),i),s=r.unproject(o);if(this.point=o,this.lngLat=s,this.originalEvent=i,this._defaultPrevented=!1,this.target=r,"SIMPLE"===r.version){let[n,i]=new eh(r.mapSize).project([s.lng,s.lat]);this.lngLat={lng:n,lat:i};}}}class em extends q{preventDefault(){this._defaultPrevented=!0;}get defaultPrevented(){return this._defaultPrevented;}constructor(n,r,i){super(n),(0,f.default)(this,"target",void 0),(0,f.default)(this,"originalEvent",void 0),(0,f.default)(this,"lngLat",void 0),(0,f.default)(this,"point",void 0),(0,f.default)(this,"points",void 0),(0,f.default)(this,"lngLats",void 0),(0,f.default)(this,"_defaultPrevented",void 0);let a="touchend"===n?i.changedTouches:i.touches,o=eo.touchPos(r.getCanvasContainer(),a),s=o.map(n=>r.unproject(n)),l=o.reduce((n,r,i,a)=>n.add(r.div(a.length)),new z.default(0,0)),u=r.unproject(l);this.target=r,this.points=o,this.point=l,this.lngLats=s,this.lngLat=u,this.originalEvent=i,this._defaultPrevented=!1;}}class eg extends q{preventDefault(){this._defaultPrevented=!0;}get defaultPrevented(){return this._defaultPrevented;}constructor(n,r,i){super(n),(0,f.default)(this,"target",void 0),(0,f.default)(this,"originalEvent",void 0),(0,f.default)(this,"_defaultPrevented",void 0),this.target=r,this._defaultPrevented=!1,this.originalEvent=i;}}class ev{constructor(n,r){(0,f.default)(this,"_mousedownPos",void 0),(0,f.default)(this,"_clickTolerance",void 0),(0,f.default)(this,"_map",void 0),this._map=n,this._clickTolerance=r.clickTolerance;}reset(){delete this._mousedownPos;}wheel(n){return this._firePreventable(new eg(n.type,this._map,n));}mousedown(n,r){return this._mousedownPos=r,this._firePreventable(new ep(n.type,this._map,n));}mouseup(n){this._map.fire(new ep(n.type,this._map,n));}click(n,r){this._mousedownPos&&this._mousedownPos.dist(r)>=this._clickTolerance||this._map.fire(new ep(n.type,this._map,n));}dblclick(n){return this._firePreventable(new ep(n.type,this._map,n));}mouseover(n){this._map.fire(new ep(n.type,this._map,n));}mouseout(n){this._map.fire(new ep(n.type,this._map,n));}touchstart(n){return this._firePreventable(new em(n.type,this._map,n));}touchmove(n){this._map.fire(new em(n.type,this._map,n));}touchend(n){this._map.fire(new em(n.type,this._map,n));}touchcancel(n){this._map.fire(new em(n.type,this._map,n));}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{};}isEnabled(){return!0;}isActive(){return!1;}enable(){}disable(){}}class ey{constructor(n){(0,f.default)(this,"_map",void 0),(0,f.default)(this,"_delayContextMenu",void 0),(0,f.default)(this,"_ignoreContextMenu",void 0),(0,f.default)(this,"_contextMenuEvent",void 0),this._map=n;}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent;}mousemove(n){this._map.fire(new ep(n.type,this._map,n));}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1;}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ep("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent);}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._ignoreContextMenu||this._map.fire(new ep(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault();}isEnabled(){return!0;}isActive(){return!1;}enable(){}disable(){}}class e_{constructor(n){(0,f.default)(this,"contextmenu",void 0),(0,f.default)(this,"mousedown",void 0),(0,f.default)(this,"mousemoveWindow",void 0),(0,f.default)(this,"mouseup",void 0),(0,f.default)(this,"touchstart",void 0),(0,f.default)(this,"touchmoveWindow",void 0),(0,f.default)(this,"touchend",void 0),(0,f.default)(this,"_clickTolerance",void 0),(0,f.default)(this,"_moveFunction",void 0),(0,f.default)(this,"_activateOnStart",void 0),(0,f.default)(this,"_active",void 0),(0,f.default)(this,"_enabled",void 0),(0,f.default)(this,"_moved",void 0),(0,f.default)(this,"_lastPoint",void 0),(0,f.default)(this,"_moveStateManager",void 0),this._enabled=!!n.enable,this._moveStateManager=n.moveStateManager,this._clickTolerance=n.clickTolerance||1,this._moveFunction=n.move,this._activateOnStart=!!n.activateOnStart,n.assignEvents(this),this.reset();}reset(n){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(n);}_move(...n){let r=this._moveFunction(...n);if(r.bearingDelta||r.pitchDelta||r.around||r.panDelta)return this._active=!0,r;}dragStart(n,r){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(n)&&(this._moveStateManager.startMove(n),this._lastPoint=r.length?r[0]:r,this._activateOnStart&&this._lastPoint&&(this._active=!0));}dragMove(n,r){if(!this.isEnabled())return;let i=this._lastPoint;if(!i)return;if(n.preventDefault(),!this._moveStateManager.isValidMoveEvent(n)){this.reset(n);return;}let a=r.length?r[0]:r;if(!(!this._moved&&a.dist(i)<this._clickTolerance))return this._moved=!0,this._lastPoint=a,this._move(i,a);}dragEnd(n){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(n)&&(this._moved&&eo.suppressClick(),this.reset(n));}enable(){this._enabled=!0;}disable(){this._enabled=!1,this.reset();}isEnabled(){return this._enabled;}isActive(){return this._active;}getClickTolerance(){return this._clickTolerance;}}let eb={0:1,2:2};class ex{constructor(n){(0,f.default)(this,"_eventButton",void 0),(0,f.default)(this,"_correctEvent",void 0),this._correctEvent=n.checkCorrectEvent;}startMove(n){let r=eo.mouseButton(n);this._eventButton=r;}endMove(n){delete this._eventButton;}isValidStartEvent(n){return this._correctEvent(n);}isValidMoveEvent(n){return!function(n,r){let i=eb[r];return void 0===n.buttons||(n.buttons&i)!==i;}(n,this._eventButton);}isValidEndEvent(n){return eo.mouseButton(n)===this._eventButton;}}let eE=n=>{n.mousedown=n.dragStart,n.mousemoveWindow=n.dragMove,n.mouseup=n.dragEnd,n.contextmenu=n=>{n.preventDefault();};},ew=({enable:n,clickTolerance:r})=>new e_({clickTolerance:r,move:(n,r)=>({around:r,panDelta:r.sub(n)}),activateOnStart:!0,moveStateManager:new ex({checkCorrectEvent:n=>0===eo.mouseButton(n)&&!n.ctrlKey}),enable:n,assignEvents:eE}),eS=({enable:n,clickTolerance:r,bearingDegreesPerPixelMoved:i=.8})=>new e_({clickTolerance:r,move:(n,r)=>({bearingDelta:(r.x-n.x)*i}),moveStateManager:new ex({checkCorrectEvent:n=>0===eo.mouseButton(n)&&n.ctrlKey||2===eo.mouseButton(n)}),enable:n,assignEvents:eE}),eT=({enable:n,clickTolerance:r,pitchDegreesPerPixelMoved:i=-.5})=>new e_({clickTolerance:r,move:(n,r)=>({pitchDelta:(r.y-n.y)*i}),moveStateManager:new ex({checkCorrectEvent:n=>0===eo.mouseButton(n)&&n.ctrlKey||2===eo.mouseButton(n)}),enable:n,assignEvents:eE}),eA=1/450;class eC{constructor(n,r){(0,f.default)(this,"_map",void 0),(0,f.default)(this,"_tr",void 0),(0,f.default)(this,"_enabled",void 0),(0,f.default)(this,"_active",void 0),(0,f.default)(this,"_zooming",void 0),(0,f.default)(this,"_aroundCenter",void 0),(0,f.default)(this,"_around",void 0),(0,f.default)(this,"_aroundPoint",void 0),(0,f.default)(this,"_type",void 0),(0,f.default)(this,"_lastValue",void 0),(0,f.default)(this,"_timeout",void 0),(0,f.default)(this,"_finishTimeout",void 0),(0,f.default)(this,"_lastWheelEvent",void 0),(0,f.default)(this,"_lastWheelEventTime",void 0),(0,f.default)(this,"_startZoom",void 0),(0,f.default)(this,"_targetZoom",void 0),(0,f.default)(this,"_delta",void 0),(0,f.default)(this,"_easing",void 0),(0,f.default)(this,"_prevEase",void 0),(0,f.default)(this,"_frameId",void 0),(0,f.default)(this,"_triggerRenderFrame",void 0),(0,f.default)(this,"_defaultZoomRate",void 0),(0,f.default)(this,"_wheelZoomRate",void 0),(0,f.default)(this,"_onTimeout",n=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(n);}),this._map=n,this._tr=new es(n),this._triggerRenderFrame=r,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=eA;}setZoomRate(n){this._defaultZoomRate=n;}setWheelZoomRate(n){this._wheelZoomRate=n;}isEnabled(){return!!this._enabled;}isActive(){return!!this._active||void 0!==this._finishTimeout;}isZooming(){return!!this._zooming;}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!n&&"center"===n.around);}disable(){this.isEnabled()&&(this._enabled=!1);}wheel(n){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!n[this._map.cooperativeGestures._bypassKey])return;let r=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY,i=G.now(),a=i-(this._lastWheelEventTime||0);this._lastWheelEventTime=i,0!==r&&r%4.000244140625==0?this._type="wheel":0!==r&&4>Math.abs(r)?this._type="trackpad":a>400?(this._type=null,this._lastValue=r,this._timeout=setTimeout(this._onTimeout,40,n)):!this._type&&(this._type=200>Math.abs(a*r)?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,r+=this._lastValue)),n.shiftKey&&r&&(r/=4),this._type&&(this._lastWheelEvent=n,this._delta-=r,this._active||this._start(n)),n.preventDefault();}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let r=eo.mousePos(this._map.getCanvasContainer(),n),i=this._tr;r.y>i.transform.height/2-i.transform.getHorizon()?this._around=U.LngLat.convert(this._aroundCenter?i.center:i.unproject(r)):this._around=U.LngLat.convert(i.center),this._aroundPoint=i.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame());}renderFrame(){let n;if(!this._frameId||(this._frameId=null,!this.isActive()))return;let r=this._tr.transform;if(0!==this._delta){let n="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,i=2/(1+Math.exp(-Math.abs(this._delta*n)));this._delta<0&&0!==i&&(i=1/i);let a="number"==typeof this._targetZoom?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(a*i))),"wheel"===this._type&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0;}let i="number"==typeof this._targetZoom?this._targetZoom:r.zoom,a=this._startZoom,o=this._easing,s=!1;if("wheel"===this._type&&a&&o){let r=Math.min((G.now()-this._lastWheelEventTime)/200,1),l=o(r);n=H.interpolates.number(a,i,l),r<1?this._frameId||(this._frameId=!0):s=!0;}else n=i,s=!0;return this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout;},200)),{noInertia:!0,needsRenderFrame:!s,zoomDelta:n-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent};}_smoothOutEasing(n){let r=H.defaultEasing;if(this._prevEase){let n=this._prevEase,i=(G.now()-n.start)/n.duration,a=n.easing(i+.01)-n.easing(i),o=.27/Math.sqrt(a*a+1e-4)*.01,s=Math.sqrt(.0729-o*o);r=(0,H.bezier)(o,s,.25,1);}return this._prevEase={start:G.now(),duration:n,easing:r},r;}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);}}class eO{constructor(n,r){(0,f.default)(this,"_clickZoom",void 0),(0,f.default)(this,"_tapZoom",void 0),this._clickZoom=n,this._tapZoom=r;}enable(){this._clickZoom.enable(),this._tapZoom.enable();}disable(){this._clickZoom.disable(),this._tapZoom.disable();}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled();}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive();}}class eM{constructor(n,r,i){(0,f.default)(this,"_el",void 0),(0,f.default)(this,"_mousePan",void 0),(0,f.default)(this,"_touchPan",void 0),(0,f.default)(this,"_inertiaOptions",void 0),this._el=n,this._mousePan=r,this._touchPan=i;}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("l7-touch-drag-pan");}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("l7-touch-drag-pan");}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled();}isActive(){return this._mousePan.isActive()||this._touchPan.isActive();}}class eR{constructor(n,r,i){(0,f.default)(this,"_mouseRotate",void 0),(0,f.default)(this,"_mousePitch",void 0),(0,f.default)(this,"_pitchWithRotate",void 0),this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=r,this._mousePitch=i;}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable();}disable(){this._mouseRotate.disable(),this._mousePitch.disable();}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled());}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive();}}class eP{constructor(n,r,i,a){(0,f.default)(this,"_el",void 0),(0,f.default)(this,"_touchZoom",void 0),(0,f.default)(this,"_touchRotate",void 0),(0,f.default)(this,"_tapDragZoom",void 0),(0,f.default)(this,"_rotationDisabled",void 0),(0,f.default)(this,"_enabled",void 0),this._el=n,this._touchZoom=r,this._touchRotate=i,this._tapDragZoom=a,this._rotationDisabled=!1,this._enabled=!0;}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("l7-touch-zoom-rotate");}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("l7-touch-zoom-rotate");}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled();}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive();}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable();}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable();}}function ek(n,r){if(n.length!==r.length)throw Error(`The number of touches and points are not equal - touches ${n.length}, points ${r.length}`);let i={};for(let a=0;a<n.length;a++)i[n[a].identifier]=r[a];return i;}class eI{constructor(n){(0,f.default)(this,"numTouches",void 0),(0,f.default)(this,"centroid",void 0),(0,f.default)(this,"startTime",void 0),(0,f.default)(this,"aborted",void 0),(0,f.default)(this,"touches",void 0),this.reset(),this.numTouches=n.numTouches;}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1;}touchstart(n,r,i){(this.centroid||i.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=n.timeStamp),i.length===this.numTouches&&(this.centroid=function(n){let r=new z.default(0,0);for(let i of n)r._add(i);return r.div(n.length);}(r),this.touches=ek(i,r)));}touchmove(n,r,i){if(this.aborted||!this.centroid)return;let a=ek(i,r);for(let n in this.touches){let r=this.touches[n],i=a[n];(!i||i.dist(r)>30)&&(this.aborted=!0);}}touchend(n,r,i){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),0===i.length){let n=!this.aborted&&this.centroid;if(this.reset(),n)return n;}}}class eL{constructor(n){(0,f.default)(this,"singleTap",void 0),(0,f.default)(this,"numTaps",void 0),(0,f.default)(this,"lastTime",void 0),(0,f.default)(this,"lastTap",void 0),(0,f.default)(this,"count",void 0),this.singleTap=new eI(n),this.numTaps=n.numTaps,this.reset();}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset();}touchstart(n,r,i){this.singleTap.touchstart(n,r,i);}touchmove(n,r,i){this.singleTap.touchmove(n,r,i);}touchend(n,r,i){let a=this.singleTap.touchend(n,r,i);if(a){let r=n.timeStamp-this.lastTime<500,i=!this.lastTap||30>this.lastTap.dist(a);if(r&&i||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=a,this.count===this.numTaps)return this.reset(),a;}}}class eN{constructor(){(0,f.default)(this,"_enabled",void 0),(0,f.default)(this,"_active",void 0),(0,f.default)(this,"_swipePoint",void 0),(0,f.default)(this,"_swipeTouch",void 0),(0,f.default)(this,"_tapTime",void 0),(0,f.default)(this,"_tapPoint",void 0),(0,f.default)(this,"_tap",void 0),this._tap=new eL({numTouches:1,numTaps:1}),this.reset();}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset();}touchstart(n,r,i){if(!this._swipePoint){if(this._tapTime){let a=r[0],o=n.timeStamp-this._tapTime<500,s=30>this._tapPoint.dist(a);o&&s?i.length>0&&(this._swipePoint=a,this._swipeTouch=i[0].identifier):this.reset();}else this._tap.touchstart(n,r,i);}}touchmove(n,r,i){if(this._tapTime){if(this._swipePoint){if(i[0].identifier!==this._swipeTouch)return;let a=r[0],o=a.y-this._swipePoint.y;return this._swipePoint=a,n.preventDefault(),this._active=!0,{zoomDelta:o/128};}}else this._tap.touchmove(n,r,i);}touchend(n,r,i){if(this._tapTime)this._swipePoint&&0===i.length&&this.reset();else{let a=this._tap.touchend(n,r,i);a&&(this._tapTime=n.timeStamp,this._tapPoint=a);}}touchcancel(){this.reset();}enable(){this._enabled=!0;}disable(){this._enabled=!1,this.reset();}isEnabled(){return this._enabled;}isActive(){return this._active;}}class eD{constructor(n){(0,f.default)(this,"_tr",void 0),(0,f.default)(this,"_enabled",void 0),(0,f.default)(this,"_active",void 0),(0,f.default)(this,"_zoomIn",void 0),(0,f.default)(this,"_zoomOut",void 0),this._tr=new es(n),this._zoomIn=new eL({numTouches:1,numTaps:2}),this._zoomOut=new eL({numTouches:2,numTaps:1}),this.reset();}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset();}touchstart(n,r,i){this._zoomIn.touchstart(n,r,i),this._zoomOut.touchstart(n,r,i);}touchmove(n,r,i){this._zoomIn.touchmove(n,r,i),this._zoomOut.touchmove(n,r,i);}touchend(n,r,i){let a=this._zoomIn.touchend(n,r,i),o=this._zoomOut.touchend(n,r,i),s=this._tr;return a?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:r=>r.easeTo({duration:300,zoom:s.zoom+1,around:s.unproject(a)},{originalEvent:n})}):o?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:r=>r.easeTo({duration:300,zoom:s.zoom-1,around:s.unproject(o)},{originalEvent:n})}):void 0;}touchcancel(){this.reset();}enable(){this._enabled=!0;}disable(){this._enabled=!1,this.reset();}isEnabled(){return this._enabled;}isActive(){return this._active;}}class eF{constructor(n,r){(0,f.default)(this,"_enabled",void 0),(0,f.default)(this,"_active",void 0),(0,f.default)(this,"_touches",void 0),(0,f.default)(this,"_clickTolerance",void 0),(0,f.default)(this,"_sum",void 0),(0,f.default)(this,"_map",void 0),this._clickTolerance=n.clickTolerance||1,this._map=r,this.reset();}reset(){this._active=!1,this._touches={},this._sum=new z.default(0,0);}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1;}touchstart(n,r,i){return this._calculateTransform(n,r,i);}touchmove(n,r,i){if(!(!this._active||i.length<this.minTouchs()))return n.preventDefault(),this._calculateTransform(n,r,i);}touchend(n,r,i){this._calculateTransform(n,r,i),this._active&&i.length<this.minTouchs()&&this.reset();}touchcancel(){this.reset();}_calculateTransform(n,r,i){i.length>0&&(this._active=!0);let a=ek(i,r),o=new z.default(0,0),s=new z.default(0,0),l=0;for(let n in a){let r=a[n],i=this._touches[n];i&&(o._add(r),s._add(r.sub(i)),l++,a[n]=r);}if(this._touches=a,l<this.minTouchs()||!s.mag())return;let u=s.div(l);if(this._sum._add(u),!(this._sum.mag()<this._clickTolerance))return{around:o.div(l),panDelta:u};}enable(){this._enabled=!0;}disable(){this._enabled=!1,this.reset();}isEnabled(){return this._enabled;}isActive(){return this._active;}}class eB{constructor(){(0,f.default)(this,"_enabled",void 0),(0,f.default)(this,"_active",void 0),(0,f.default)(this,"_firstTwoTouches",void 0),(0,f.default)(this,"_vector",void 0),(0,f.default)(this,"_startVector",void 0),(0,f.default)(this,"_aroundCenter",void 0),this.reset();}reset(){this._active=!1,delete this._firstTwoTouches;}touchstart(n,r,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([r[0],r[1]]));}touchmove(n,r,i){if(!this._firstTwoTouches)return;n.preventDefault();let[a,o]=this._firstTwoTouches,s=ej(i,r,a),l=ej(i,r,o);if(!s||!l)return;let u=this._aroundCenter?null:s.add(l).div(2);return this._move([s,l],u,n);}touchend(n,r,i){if(!this._firstTwoTouches)return;let[a,o]=this._firstTwoTouches,s=ej(i,r,a),l=ej(i,r,o);s&&l||(this._active&&eo.suppressClick(),this.reset());}touchcancel(){this.reset();}enable(n){this._enabled=!0,this._aroundCenter=!!n&&"center"===n.around;}disable(){this._enabled=!1,this.reset();}isEnabled(){return!!this._enabled;}isActive(){return!!this._active;}}function ej(n,r,i){for(let a=0;a<n.length;a++)if(n[a].identifier===i)return r[a];}function ez(n,r){return Math.log(n/r)/Math.LN2;}class eU extends eB{constructor(...n){super(...n),(0,f.default)(this,"_distance",void 0),(0,f.default)(this,"_startDistance",void 0);}reset(){super.reset(),delete this._distance,delete this._startDistance;}_start(n){this._startDistance=this._distance=n[0].dist(n[1]);}_move(n,r){let i=this._distance;if(this._distance=n[0].dist(n[1]),!(!this._active&&.1>Math.abs(ez(this._distance,this._startDistance))))return this._active=!0,{zoomDelta:ez(this._distance,i),pinchAround:r};}}function eV(n,r){return 180*n.angleWith(r)/Math.PI;}class eG extends eB{constructor(...n){super(...n),(0,f.default)(this,"_minDiameter",void 0);}reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector;}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1]);}_move(n,r,i){let a=this._vector;if(this._vector=n[0].sub(n[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:eV(this._vector,a),pinchAround:r};}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());let r=Math.PI*this._minDiameter;return Math.abs(eV(n,this._startVector))<25/r*360;}}function eH(n){return Math.abs(n.y)>Math.abs(n.x);}class eW extends eB{constructor(n){super(),(0,f.default)(this,"_valid",void 0),(0,f.default)(this,"_firstMove",void 0),(0,f.default)(this,"_lastPoints",void 0),(0,f.default)(this,"_map",void 0),(0,f.default)(this,"_currentTouchCount",0),this._map=n;}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints;}touchstart(n,r,i){super.touchstart(n,r,i),this._currentTouchCount=i.length;}_start(n){this._lastPoints=n,eH(n[0].sub(n[1]))&&(this._valid=!1);}_move(n,r,i){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let a=n[0].sub(this._lastPoints[0]),o=n[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(a,o,i.timeStamp),this._valid)return this._lastPoints=n,this._active=!0,{pitchDelta:-.5*((a.y+o.y)/2)};}gestureBeginsVertically(n,r,i){if(void 0!==this._valid)return this._valid;let a=n.mag()>=2,o=r.mag()>=2;if(!a&&!o)return;if(!a||!o){if(void 0===this._firstMove&&(this._firstMove=i),i-this._firstMove<100)return;return!1;}let s=n.y>0==r.y>0;return eH(n)&&eH(r)&&s;}}let eX={linearity:.3,easing:(0,H.bezier)(0,0,.3,1)},eq=(0,H.extend)({deceleration:2500,maxSpeed:1400},eX),e$=(0,H.extend)({deceleration:20,maxSpeed:1400},eX),eY=(0,H.extend)({deceleration:1e3,maxSpeed:360},eX),eZ=(0,H.extend)({deceleration:1e3,maxSpeed:90},eX);class eK{constructor(n){(0,f.default)(this,"_map",void 0),(0,f.default)(this,"_inertiaBuffer",void 0),this._map=n,this.clear();}clear(){this._inertiaBuffer=[];}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:G.now(),settings:n});}_drainInertiaBuffer(){let n=this._inertiaBuffer,r=G.now();for(;n.length>0&&r-n[0].time>160;)n.shift();}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let r={zoom:0,bearing:0,pitch:0,pan:new z.default(0,0),pinchAround:void 0,around:void 0};for(let{settings:n}of this._inertiaBuffer)r.zoom+=n.zoomDelta||0,r.bearing+=n.bearingDelta||0,r.pitch+=n.pitchDelta||0,n.panDelta&&r.pan._add(n.panDelta),n.around&&(r.around=n.around),n.pinchAround&&(r.pinchAround=n.pinchAround);let i=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,a={};if(r.pan.mag()){let o=eJ(r.pan.mag(),i,(0,H.extend)({},eq,n||{}));a.offset=r.pan.mult(o.amount/r.pan.mag()),a.center=this._map.transform.center,eQ(a,o);}if(r.zoom){let n=eJ(r.zoom,i,e$);a.zoom=this._map.transform.zoom+n.amount,eQ(a,n);}if(r.bearing){let n=eJ(r.bearing,i,eY);a.bearing=this._map.transform.bearing+(0,H.clamp)(n.amount,-179,179),eQ(a,n);}if(r.pitch){let n=eJ(r.pitch,i,eZ);a.pitch=this._map.transform.pitch+n.amount,eQ(a,n);}if(a.zoom||a.bearing){let n=void 0===r.pinchAround?r.around:r.pinchAround;a.around=n?this._map.unproject(n):this._map.getCenter();}return this.clear(),(0,H.extend)(a,{noMoveStart:!0});}}function eQ(n,r){(!n.duration||n.duration<r.duration)&&(n.duration=r.duration,n.easing=r.easing);}function eJ(n,r,i){let{maxSpeed:a,linearity:o,deceleration:s}=i,l=(0,H.clamp)(n*o/(r/1e3),-a,a),u=Math.abs(l)/(s*o);return{easing:i.easing,duration:1e3*u,amount:u/2*l};}let e0=n=>n.zoom||n.drag||n.pitch||n.rotate;class e1 extends q{constructor(n,r){super(n),(0,f.default)(this,"type","renderFrame"),(0,f.default)(this,"timeStamp",void 0),this.timeStamp=r;}}function e2(n){return n.panDelta&&n.panDelta.mag()||n.zoomDelta||n.bearingDelta||n.pitchDelta;}class e3{constructor(n,r){(0,f.default)(this,"_map",void 0),(0,f.default)(this,"_el",void 0),(0,f.default)(this,"_handlers",void 0),(0,f.default)(this,"_eventsInProgress",void 0),(0,f.default)(this,"_frameId",void 0),(0,f.default)(this,"_inertia",void 0),(0,f.default)(this,"_bearingSnap",void 0),(0,f.default)(this,"_handlersById",void 0),(0,f.default)(this,"_updatingCamera",void 0),(0,f.default)(this,"_changes",void 0),(0,f.default)(this,"_zoom",void 0),(0,f.default)(this,"_previousActiveHandlers",void 0),(0,f.default)(this,"_listeners",void 0),(0,f.default)(this,"handleWindowEvent",n=>{this.handleEvent(n,`${n.type}Window`);}),(0,f.default)(this,"handleEvent",(n,r)=>{if("blur"===n.type){this.stop(!0);return;}this._updatingCamera=!0;let i="renderFrame"===n.type?void 0:n,a={needsRenderFrame:!1},o={},s={},l=n.touches,u=l?this._getMapTouches(l):void 0,c=u?eo.touchPos(this._map.getCanvasContainer(),u):eo.mousePos(this._map.getCanvasContainer(),n);for(let{handlerName:l,handler:f,allowed:d}of this._handlers){let h;f.isEnabled()&&(this._blockedByActive(s,d,l)?f.reset():f[r||n.type]&&(h=f[r||n.type](n,c,u),this.mergeHandlerResult(a,o,h,l,i),h&&h.needsRenderFrame&&this._triggerRenderFrame()),(h||f.isActive())&&(s[l]=f));}let f={};for(let n in this._previousActiveHandlers)s[n]||(f[n]=i);this._previousActiveHandlers=s,(Object.keys(f).length||e2(a))&&(this._changes.push([a,o,f]),this._triggerRenderFrame()),(Object.keys(s).length||e2(a))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:d}=a;d&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],d(this._map));}),this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new eK(n),this._bearingSnap=r.bearingSnap||7,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(r);let i=this._el;for(let[n,r,a]of(this._listeners=[[i,"touchstart",{passive:!0}],[i,"touchmove",{passive:!1}],[i,"touchend",void 0],[i,"touchcancel",void 0],[i,"mousedown",void 0],[i,"mousemove",void 0],[i,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[i,"mouseover",void 0],[i,"mouseout",void 0],[i,"dblclick",void 0],[i,"click",void 0],[i,"keydown",{capture:!1}],[i,"keyup",void 0],[i,"wheel",{passive:!1}],[i,"contextmenu",void 0],[window,"blur",void 0]],this._listeners))eo.addEventListener(n,r,n===document?this.handleWindowEvent:this.handleEvent,a);}destroy(){for(let[n,r,i]of this._listeners)eo.removeEventListener(n,r,n===document?this.handleWindowEvent:this.handleEvent,i);}_addDefaultHandlers(n){let r=this._map,i=r.getCanvasContainer();this._add("mapEvent",new ev(r,n));let a=r.boxZoom=new el(r,n);this._add("boxZoom",a),n.interactive&&n.boxZoom&&a.enable();let o=r.cooperativeGestures=new ec(r,n.cooperativeGestures);this._add("cooperativeGestures",o),n.cooperativeGestures&&o.enable();let s=new eD(r),l=new eu(r);r.doubleClickZoom=new eO(l,s),this._add("tapZoom",s),this._add("clickZoom",l),n.interactive&&n.doubleClickZoom&&r.doubleClickZoom.enable();let u=new eN;this._add("tapDragZoom",u);let c=r.touchPitch=new eW(r);this._add("touchPitch",c),n.interactive&&n.touchPitch&&r.touchPitch.enable(n.touchPitch);let f=eS(n),d=eT(n);r.dragRotate=new eR(n,f,d),this._add("mouseRotate",f,["mousePitch"]),this._add("mousePitch",d,["mouseRotate"]),n.interactive&&n.dragRotate&&r.dragRotate.enable();let h=ew(n),p=new eF(n,r);r.dragPan=new eM(i,h,p),this._add("mousePan",h),this._add("touchPan",p,["touchZoom","touchRotate"]),n.interactive&&n.dragPan&&r.dragPan.enable(n.dragPan);let m=new eG,g=new eU;r.touchZoomRotate=new eP(i,g,m,u),this._add("touchRotate",m,["touchPan","touchZoom"]),this._add("touchZoom",g,["touchPan","touchRotate"]),n.interactive&&n.touchZoomRotate&&r.touchZoomRotate.enable(n.touchZoomRotate);let v=r.scrollZoom=new eC(r,()=>this._triggerRenderFrame());this._add("scrollZoom",v,["mousePan"]),n.interactive&&n.scrollZoom&&r.scrollZoom.enable(n.scrollZoom);let y=r.keyboard=new ef(r);this._add("keyboard",y),n.interactive&&n.keyboard&&r.keyboard.enable(),this._add("blockableMapEvent",new ey(r));}_add(n,r,i){this._handlers.push({handlerName:n,handler:r,allowed:i}),this._handlersById[n]=r;}stop(n){if(!this._updatingCamera){for(let{handler:n}of this._handlers)n.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[];}}isActive(){for(let{handler:n}of this._handlers)if(n.isActive())return!0;return!1;}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming();}isRotating(){return!!this._eventsInProgress.rotate;}isMoving(){return!!e0(this._eventsInProgress)||this.isZooming();}_blockedByActive(n,r,i){for(let a in n)if(a!==i&&(!r||0>r.indexOf(a)))return!0;return!1;}_getMapTouches(n){let r=[];for(let i of n){let n=i.target;this._el.contains(n)&&r.push(i);}return r;}mergeHandlerResult(n,r,i,a,o){if(!i)return;(0,H.extend)(n,i);let s={handlerName:a,originalEvent:i.originalEvent||o};void 0!==i.zoomDelta&&(r.zoom=s),void 0!==i.panDelta&&(r.drag=s),void 0!==i.pitchDelta&&(r.pitch=s),void 0!==i.bearingDelta&&(r.rotate=s);}_applyChanges(){let n={},r={},i={};for(let[a,o,s]of this._changes)a.panDelta&&(n.panDelta=(n.panDelta||new z.default(0,0))._add(a.panDelta)),a.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+a.zoomDelta),a.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+a.bearingDelta),a.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+a.pitchDelta),void 0!==a.around&&(n.around=a.around),void 0!==a.pinchAround&&(n.pinchAround=a.pinchAround),a.noInertia&&(n.noInertia=a.noInertia),(0,H.extend)(r,o),(0,H.extend)(i,s);this._updateMapTransform(n,r,i),this._changes=[];}_updateMapTransform(n,r,i){let a=this._map,o=a._getTransformForUpdate();if(!e2(n))return this._fireEvents(r,i,!0);let{panDelta:s,zoomDelta:l,bearingDelta:u,pitchDelta:c,pinchAround:f}=n,{around:d}=n;void 0!==f&&(d=f),a._stop(!0),d=d||a.transform.centerPoint;let h=o.pointLocation(s?d.sub(s):d);u&&(o.bearing+=u),c&&(o.pitch+=c),l&&(o.zoom+=l),o.setLocationAtPoint(h,d),a._applyUpdatedTransform(o),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(r,i,!0);}_fireEvents(n,r,i){let a;let o=e0(this._eventsInProgress),s=e0(n),l={};for(let r in n){let{originalEvent:i}=n[r];this._eventsInProgress[r]||(l[`${r}start`]=i),this._eventsInProgress[r]=n[r];}for(let n in!o&&s&&this._fireEvent("movestart",s.originalEvent),l)this._fireEvent(n,l[n]);for(let r in s&&this._fireEvent("move",s.originalEvent),n){let{originalEvent:i}=n[r];this._fireEvent(r,i);}let u={};for(let n in this._eventsInProgress){let{handlerName:i,originalEvent:o}=this._eventsInProgress[n];this._handlersById[i].isActive()||(delete this._eventsInProgress[n],a=r[i]||o,u[`${n}end`]=a);}for(let n in u)this._fireEvent(n,u[n]);let c=e0(this._eventsInProgress),f=(o||s)&&!c;if(i&&f){this._updatingCamera=!0;let n=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions);if(n&&(n.essential||!G.prefersReducedMotion)){let r;0!==(r=n.bearing||this._map.getBearing())&&-this._bearingSnap<r&&r<this._bearingSnap&&(n.bearing=0),n.freezeElevation=!0,this._map.easeTo(n,{originalEvent:a});}else{let n;this._map.fire(new q("moveend",{originalEvent:a})),0!==(n=this._map.getBearing())&&-this._bearingSnap<n&&n<this._bearingSnap&&this._map.resetNorth();}this._updatingCamera=!1;}}_fireEvent(n,r){this._map.fire(new q(n,r?{originalEvent:r}:{}));}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(n=>{delete this._frameId,this.handleEvent(new e1("renderFrame",n)),this._applyChanges();});}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame());}}class e4{constructor(){(0,f.default)(this,"_queue",void 0),(0,f.default)(this,"_id",void 0),(0,f.default)(this,"_cleared",void 0),(0,f.default)(this,"_currentlyRunning",void 0),this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1;}add(n){let r=++this._id;return this._queue.push({callback:n,id:r,cancelled:!1}),r;}remove(n){let r=this._currentlyRunning;for(let i of r?this._queue.concat(r):this._queue)if(i.id===n){i.cancelled=!0;return;}}run(n=0){if(this._currentlyRunning)throw Error("Attempting to run(), but is already running.");let r=this._currentlyRunning=this._queue;for(let i of(this._queue=[],r))if(!i.cancelled&&(i.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1;}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[];}}!function(n,r){var i="undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM,a="undefined"!=typeof wx&&null!==wx&&(void 0!==wx.request||void 0!==wx.miniProgram);if(!i&&!a&&(r||(r=document),r)){var o=r.head||r.getElementsByTagName("head")[0];if(!o){o=r.createElement("head");var s=r.body||r.getElementsByTagName("body")[0];s?s.parentNode.insertBefore(o,s):r.documentElement.appendChild(o);}var l=r.createElement("style");l.type="text/css",l.styleSheet?l.styleSheet.cssText=n:l.appendChild(r.createTextNode(n)),o.appendChild(l);}}(`.l7-map {
  font:
    12px/20px 'Helvetica Neue',
    Arial,
    Helvetica,
    sans-serif;
  overflow: hidden;
  position: relative;
  -webkit-tap-highlight-color: rgb(0 0 0 / 0%);
}

.l7-canvas {
  position: absolute;
  left: 0;
  top: 0;
}

.l7-map:full-screen {
  width: 100%;
  height: 100%;
}

.l7-canary {
  background-color: salmon;
}

.l7-canvas-container.l7-interactive,
.l7-ctrl-group button.l7-ctrl-compass {
  cursor: grab;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}

.l7-canvas-container.l7-interactive.l7-track-pointer {
  cursor: pointer;
}

.l7-canvas-container.l7-interactive:active,
.l7-ctrl-group button.l7-ctrl-compass:active {
  cursor: grabbing;
}

.l7-canvas-container.l7-touch-zoom-rotate,
.l7-canvas-container.l7-touch-zoom-rotate .l7-canvas {
  touch-action: pan-x pan-y;
}

.l7-canvas-container.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-drag-pan .l7-canvas {
  touch-action: pinch-zoom;
}

.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan .l7-canvas {
  touch-action: none;
}

.l7-canvas-container.l7-touch-drag-pan.l7-cooperative-gestures,
.l7-canvas-container.l7-touch-drag-pan.l7-cooperative-gestures .l7-canvas {
  touch-action: pan-x pan-y;
}

.l7-cooperative-gesture-screen {
  background: rgba(0 0 0 / 40%);
  position: absolute;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  color: white;
  padding: 1rem;
  font-size: 1.4em;
  line-height: 1.2;
  opacity: 0;
  pointer-events: none;
  transition: opacity 1s ease 1s;
  z-index: 99999;
}

.l7-cooperative-gesture-screen.l7-show {
  opacity: 1;
  transition: opacity 0.05s;
}

.l7-cooperative-gesture-screen .l7-mobile-message {
  display: none;
}

@media (hover: none), (width <= 480px) {
  .l7-cooperative-gesture-screen .l7-desktop-message {
    display: none;
  }

  .l7-cooperative-gesture-screen .l7-mobile-message {
    display: block;
  }
}

.l7-ctrl-top-left,
.l7-ctrl-top-right,
.l7-ctrl-bottom-left,
.l7-ctrl-bottom-right {
  position: absolute;
  pointer-events: none;
  z-index: 2;
}

.l7-ctrl-top-left {
  top: 0;
  left: 0;
}

.l7-ctrl-top-right {
  top: 0;
  right: 0;
}

.l7-ctrl-bottom-left {
  bottom: 0;
  left: 0;
}

.l7-ctrl-bottom-right {
  right: 0;
  bottom: 0;
}

.l7-ctrl {
  clear: both;
  pointer-events: auto;

  /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */
  -webkit-transform: translate(0, 0);
          transform: translate(0, 0);
}

.l7-ctrl-top-left .l7-ctrl {
  margin: 10px 0 0 10px;
  float: left;
}

.l7-ctrl-top-right .l7-ctrl {
  margin: 10px 10px 0 0;
  float: right;
}

.l7-ctrl-bottom-left .l7-ctrl {
  margin: 0 0 10px 10px;
  float: left;
}

.l7-ctrl-bottom-right .l7-ctrl {
  margin: 0 10px 10px 0;
  float: right;
}

.l7-crosshair,
.l7-crosshair .l7-interactive,
.l7-crosshair .l7-interactive:active {
  cursor: crosshair;
}

.l7-boxzoom {
  position: absolute;
  top: 0;
  left: 0;
  width: 0;
  height: 0;
  background: #fff;
  border: 2px dotted #202020;
  opacity: 0.5;
  z-index: 10;
}
`);let e5={interactive:!0,bearingSnap:7,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,fadeDuration:300,clickTolerance:3,pitchWithRotate:!0};class e6 extends Z{constructor(n){let r=(0,u.default)((0,u.default)({},e5),n);if(null!=r.minZoom&&null!=r.maxZoom&&r.minZoom>r.maxZoom)throw Error("maxZoom must be greater than or equal to minZoom");if(null!=r.minPitch&&null!=r.maxPitch&&r.minPitch>r.maxPitch)throw Error("maxPitch must be greater than or equal to minPitch");if(null!=r.minPitch&&r.minPitch<0)throw Error("minPitch must be greater than or equal to 0");if(null!=r.maxPitch&&r.maxPitch>85)throw Error("maxPitch must be less than or equal to 85");if(super(new ea(r.minZoom,r.maxZoom,r.minPitch,r.maxPitch,r.renderWorldCopies),{bearingSnap:r.bearingSnap}),(0,f.default)(this,"_container",void 0),(0,f.default)(this,"_canvasContainer",void 0),(0,f.default)(this,"_interactive",void 0),(0,f.default)(this,"_frameRequest",void 0),(0,f.default)(this,"_loaded",void 0),(0,f.default)(this,"_idleTriggered",!1),(0,f.default)(this,"_fullyLoaded",void 0),(0,f.default)(this,"_trackResize",void 0),(0,f.default)(this,"_resizeObserver",void 0),(0,f.default)(this,"_preserveDrawingBuffer",void 0),(0,f.default)(this,"_failIfMajorPerformanceCaveat",void 0),(0,f.default)(this,"_fadeDuration",void 0),(0,f.default)(this,"_crossSourceCollisions",void 0),(0,f.default)(this,"_crossFadingFactor",1),(0,f.default)(this,"_collectResourceTiming",void 0),(0,f.default)(this,"_renderTaskQueue",new e4),(0,f.default)(this,"_mapId",(0,H.uniqueId)()),(0,f.default)(this,"_removed",void 0),(0,f.default)(this,"_clickTolerance",void 0),(0,f.default)(this,"version",void 0),(0,f.default)(this,"mapSize",void 0),(0,f.default)(this,"scrollZoom",void 0),(0,f.default)(this,"boxZoom",void 0),(0,f.default)(this,"dragRotate",void 0),(0,f.default)(this,"dragPan",void 0),(0,f.default)(this,"keyboard",void 0),(0,f.default)(this,"doubleClickZoom",void 0),(0,f.default)(this,"touchZoomRotate",void 0),(0,f.default)(this,"touchPitch",void 0),(0,f.default)(this,"cooperativeGestures",void 0),(0,f.default)(this,"_onMapScroll",n=>{if(n.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1;}),this._interactive=r.interactive,this._trackResize=!0===r.trackResize,this._bearingSnap=r.bearingSnap,this._fadeDuration=r.fadeDuration,this._clickTolerance=r.clickTolerance,this.version=n.version,this.mapSize=n.mapSize,"string"==typeof r.container){if(this._container=document.getElementById(r.container),!this._container)throw Error(`Container '${r.container}' not found.`);}else if(r.container instanceof HTMLElement)this._container=r.container;else throw Error("Invalid type: 'container' must be a String or HTMLElement.");if(r.maxBounds&&this.setMaxBounds(r.maxBounds),this._setupContainer(),this.on("move",()=>this._update()).on("moveend",()=>this._update()).on("zoom",()=>this._update()).once("idle",()=>{this._idleTriggered=!0;}),"undefined"!=typeof window){let n=!1,r=b.lodashUtil.throttle(n=>{this._trackResize&&!this._removed&&this.resize(n)._update();},50);this._resizeObserver=new ResizeObserver(i=>{if(!n){n=!0;return;}r(i);}),this._resizeObserver.observe(this._container);}this.handlers=new e3(this,r),this.jumpTo({center:r.center,zoom:r.zoom,bearing:r.bearing,pitch:r.pitch}),r.bounds&&(this.resize(),this.fitBounds(r.bounds,(0,H.extend)({},r.fitBoundsOptions,{duration:0}))),this.resize();}_getMapId(){return this._mapId;}calculateCameraOptionsFromTo(n,r,i,a){return super.calculateCameraOptionsFromTo(n,r,i,a);}resize(n){var r;let i=this._containerDimensions(),a=i[0],o=i[1];this.transform.resize(a,o),null===(r=this._requestedCameraState)||void 0===r||r.resize(a,o);let s=!this._moving;return s&&(this.stop(),this.fire(new q("movestart",n)).fire(new q("move",n))),this.fire(new q("resize",n)),s&&this.fire(new q("moveend",n)),this;}getBounds(){return this.transform.getBounds();}getMaxBounds(){return this.transform.getMaxBounds();}setMaxBounds(n){return this.transform.setMaxBounds(n&&V.convert(n)),this._update();}setMinZoom(n){if((n=null==n?-2:n)>=-2&&n<=this.transform.maxZoom)return this.transform.minZoom=n,this._update(),this.getZoom()<n&&this.setZoom(n),this;throw Error("minZoom must be between -2 and the current maxZoom, inclusive");}getMinZoom(){return this.transform.minZoom;}setMaxZoom(n){if((n=null==n?22:n)>=this.transform.minZoom)return this.transform.maxZoom=n,this.getZoom()>n&&this.setZoom(n),this;throw Error("maxZoom must be greater than the current minZoom");}getMaxZoom(){return this.transform.maxZoom;}setMinPitch(n){if((n=null==n?0:n)<0)throw Error("minPitch must be greater than or equal to 0");if(n>=0&&n<=this.transform.maxPitch)return this.transform.minPitch=n,this.getPitch()<n&&this.setPitch(n),this;throw Error("minPitch must be between 0 and the current maxPitch, inclusive");}getMinPitch(){return this.transform.minPitch;}setMaxPitch(n){if((n=null==n?60:n)>85)throw Error("maxPitch must be less than or equal to 85");if(n>=this.transform.minPitch)return this.transform.maxPitch=n,this.getPitch()>n&&this.setPitch(n),this;throw Error("maxPitch must be greater than the current minPitch");}getMaxPitch(){return this.transform.maxPitch;}getRenderWorldCopies(){return this.transform.renderWorldCopies;}setRenderWorldCopies(n){this.transform.renderWorldCopies=n;}project(n){return this.transform.locationPoint(U.LngLat.convert(n));}unproject(n){return this.transform.pointLocation(z.default.convert(n));}isMoving(){var n;return this._moving||(null===(n=this.handlers)||void 0===n?void 0:n.isMoving());}isZooming(){var n;return this._zooming||(null===(n=this.handlers)||void 0===n?void 0:n.isZooming());}isRotating(){var n;return this._rotating||(null===(n=this.handlers)||void 0===n?void 0:n.isRotating());}on(n,r){return super.on(n,r);}once(n,r){return super.once(n,r);}off(n,r){return super.off(n,r);}getContainer(){return this._container;}getCanvasContainer(){return this._canvasContainer;}_containerDimensions(){let n=0,r=0;return this._container&&(n=this._container.clientWidth||400,r=this._container.clientHeight||300),[n,r];}_setupContainer(){let n=this._container;n.classList.add("l7-map");let r=this._canvasContainer=eo.create("div","l7-canvas-container",n);this._interactive&&r.classList.add("l7-interactive"),this._container.addEventListener("scroll",this._onMapScroll,!1);}_update(){return this.triggerRepaint(),this;}_requestRenderFrame(n){return this._update(),this._renderTaskQueue.add(n);}_cancelRenderFrame(n){this._renderTaskQueue.remove(n);}_render(n){if(this._renderTaskQueue.run(n),!this._removed)return this.fire(new q("render")),this.isMoving()||this.fire(new q("idle")),this;}remove(){var n;this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.handlers.destroy(),delete this.handlers,null===(n=this._resizeObserver)||void 0===n||n.disconnect(),eo.remove(this._canvasContainer),this._container.classList.remove("l7-map"),this._removed=!0,this.fire(new q("remove"));}triggerRepaint(){this._frameRequest||(this._frameRequest=new AbortController,G.frameAsync(this._frameRequest).then(n=>{this._frameRequest=null,this._render(n);}).catch(()=>{}));}getCameraTargetElevation(){return this.transform.elevation;}}var e8=i("320db315"),e7=o._(e8);let e9=["id","style","rotation","mapInstance","version","mapSize","interactive"];class te extends e7.default{constructor(...n){super(...n),(0,f.default)(this,"version",R.MapType.DEFAULT),(0,f.default)(this,"viewport",void 0);}lngLatToCoord(n,r={x:0,y:0,z:0}){let{x:i,y:a}=this.lngLatToMercator(n,0);return[i-r.x,a-r.y];}lngLatToMercator(n,r){let{x:i=0,y:a=0,z:o=0}=B.MercatorCoordinate.fromLngLat(n,r);return{x:i,y:a,z:o};}getModelMatrix(n,r,i,a=[1,1,1],o={x:0,y:0,z:0}){let s=B.MercatorCoordinate.fromLngLat(n,r),l=s.meterInMercatorCoordinateUnits(),u=E.create();return E.translate(u,u,S.fromValues(s.x-o.x,s.y-o.y,s.z||0-o.z)),E.scale(u,u,S.fromValues(l*a[0],-l*a[1],l*a[2])),E.rotateX(u,u,i[0]),E.rotateY(u,u,i[1]),E.rotateZ(u,u,i[2]),u;}init(){var n=this;return(0,g.default)(function*(){let r=n.config,{id:i="map",style:a="light",rotation:o=0,mapInstance:s,version:l="DEFAULTMAP",mapSize:c=1e4,interactive:f=!0}=r,d=(0,p.default)(r,e9);n.viewport=new M.default,n.version=l,n.simpleMapCoord.setSize(c),"SIMPLE"===l&&d.center&&(d.center=n.simpleMapCoord.unproject(d.center)),s?(n.map=s,n.$mapContainer=n.map.getContainer()):(n.$mapContainer=n.creatMapContainer(i),n.map=new e6((0,u.default)({container:n.$mapContainer,bearing:o,version:l,mapSize:c},d))),n.map.on("load",()=>{n.handleCameraChanged();}),f&&n.map.on("move",n.handleCameraChanged),setTimeout(()=>{n.handleCameraChanged();},100),n.handleCameraChanged();})();}creatMapContainer(n){let r=n;"string"==typeof n&&(r=document.getElementById(n));let i=document.createElement("div");return i.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,r.appendChild(i),i;}exportMap(n){return"";}setMapStyle(n){}getCanvasOverlays(){return this.getContainer();}}class tt extends d{getServiceConstructor(){return te;}}var tn=i("99e31455"),tr=o._(tn);let ti=["id","attributionControl","style","token","rotation","mapInstance"];!function(n,r){var i="undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM,a="undefined"!=typeof wx&&null!==wx&&(void 0!==wx.request||void 0!==wx.miniProgram);if(!i&&!a&&(r||(r=document),r)){var o=r.head||r.getElementsByTagName("head")[0];if(!o){o=r.createElement("head");var s=r.body||r.getElementsByTagName("body")[0];s?s.parentNode.insertBefore(o,s):r.documentElement.appendChild(o);}var l=r.createElement("style");l.type="text/css",l.styleSheet?l.styleSheet.cssText=n:l.appendChild(r.createTextNode(n)),o.appendChild(l);}}(".mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;-webkit-transform:translate(0);transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E\")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E\");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E\")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{flex-direction:column-reverse}.mapboxgl-popup-anchor-left{flex-direction:row}.mapboxgl-popup-anchor-right{flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:\"\";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:\"\";height:19px;left:-2px;position:absolute;top:-2px;width:19px;box-sizing:border-box;box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);transform:scale(3);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}"),window.mapboxgl=tr.default;let ta=0,to="101MlGsZ2AmmA&access_token=pk.eyJ1IjoiZXhhbXBsZXMiLCJhIjoiY2p0MG01MXRqMW45cjQzb2R6b2ptc3J4MSJ9.zA2W0IkI0c6KaAhJfk9bWg";class ts extends e7.default{constructor(...n){super(...n),(0,f.default)(this,"version","MAPBOX"),(0,f.default)(this,"viewport",void 0);}getType(){return"mapbox";}lngLatToCoord(n,r={x:0,y:0,z:0}){let{x:i,y:a}=this.lngLatToMercator(n,0);return[i-r.x,a-r.y];}lngLatToMercator(n,r){let{x:i=0,y:a=0,z:o=0}=window.mapboxgl.MercatorCoordinate.fromLngLat(n,r);return{x:i,y:a,z:o};}getModelMatrix(n,r,i,a=[1,1,1],o={x:0,y:0,z:0}){let s=window.mapboxgl.MercatorCoordinate.fromLngLat(n,r),l=s.meterInMercatorCoordinateUnits(),u=E.create();return E.translate(u,u,S.fromValues(s.x-o.x,s.y-o.y,s.z||0-o.z)),E.scale(u,u,S.fromValues(l*a[0],-l*a[1],l*a[2])),E.rotateX(u,u,i[0]),E.rotateY(u,u,i[1]),E.rotateZ(u,u,i[2]),u;}init(){var n=this;return(0,g.default)(function*(){let r=n.config,{id:i="map",attributionControl:a=!1,style:o="light",token:s=to,rotation:l=0,mapInstance:c}=r,f=(0,p.default)(r,ti);n.viewport=new M.default,c||window.mapboxgl||console.error(n.configService.getSceneWarninfo("SDK")),s!==to||"blank"===o||window.mapboxgl.accessToken||c||console.warn(n.configService.getSceneWarninfo("MapToken")),c||window.mapboxgl.accessToken||(window.mapboxgl.accessToken=s),c?(n.map=c,n.$mapContainer=n.map.getContainer()):(n.$mapContainer=n.creatMapContainer(i),n.map=new window.mapboxgl.Map((0,u.default)({container:n.$mapContainer,style:n.getMapStyleValue(o),attributionControl:a,bearing:l},f))),n.map.on("load",()=>{n.handleCameraChanged();}),n.map.on("move",n.handleCameraChanged),n.handleCameraChanged();})();}destroy(){var n;null===(n=this.$mapContainer)||void 0===n||null===(n=n.parentNode)||void 0===n||n.removeChild(this.$mapContainer),this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null);}emit(n,...r){this.eventEmitter.emit(n,...r);}once(n,...r){this.eventEmitter.once(n,...r);}getMapContainer(){return this.$mapContainer;}getCanvasOverlays(){var n;return null===(n=this.getMapContainer())||void 0===n?void 0:n.querySelector(".mapboxgl-canvas-container");}meterToCoord(n,r){let i=new tr.default.LngLat(n[0],n[1]),a=new tr.default.LngLat(r[0],r[1]),o=i.distanceTo(a),s=tr.default.MercatorCoordinate.fromLngLat({lng:n[0],lat:n[1]}),l=tr.default.MercatorCoordinate.fromLngLat({lng:r[0],lat:r[1]}),{x:u,y:c}=s,{x:f,y:d}=l;return 8388608*Math.sqrt(Math.pow(u-f,2)+Math.pow(c-d,2))/o;}exportMap(n){let r=this.map.getCanvas();return"jpg"===n?null==r?void 0:r.toDataURL("image/jpeg"):null==r?void 0:r.toDataURL("image/png");}creatMapContainer(n){let r=n;"string"==typeof n&&(r=document.getElementById(n));let i=document.createElement("div");return i.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,i.id="l7_mapbox_div"+ta++,r.appendChild(i),i;}}!function(n,r){var i="undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM,a="undefined"!=typeof wx&&null!==wx&&(void 0!==wx.request||void 0!==wx.miniProgram);if(!i&&!a&&(r||(r=document),r)){var o=r.head||r.getElementsByTagName("head")[0];if(!o){o=r.createElement("head");var s=r.body||r.getElementsByTagName("body")[0];s?s.parentNode.insertBefore(o,s):r.documentElement.appendChild(o);}var l=r.createElement("style");l.type="text/css",l.styleSheet?l.styleSheet.cssText=n:l.appendChild(r.createTextNode(n)),o.appendChild(l);}}(`.mapboxgl-ctrl-logo {
  display: none !important;
}
`);class tl extends d{getServiceConstructor(){return ts;}}let tu=F,tc=F,tf=F;},ffac7795:function(n,r,i){"use strict";i.d(r,"__esModule",{value:!0}),i.d(r,"default",{enumerable:!0,get:function(){return a;}});var a=i("777fffbe")._(i("bf207cd8")).default;}}]);
//# sourceMappingURL=vendors_0-async.88a28419.js.map