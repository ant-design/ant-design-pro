{"version":3,"sources":["src/pages/form/step-form/style.style.ts","src/pages/form/step-form/index.tsx"],"sourcesContent":["import { createStyles } from 'antd-style';\n\nconst useStyles = createStyles(() => {\n  return {\n    card: {\n      marginBottom: '24px',\n    },\n    result: {\n      maxWidth: '560px',\n      margin: '0 auto',\n      padding: '24px 0 8px',\n    },\n  };\n});\nexport default useStyles;\n","import {\n  PageContainer,\n  ProForm,\n  ProFormDigit,\n  ProFormSelect,\n  ProFormText,\n  StepsForm,\n} from '@ant-design/pro-components';\nimport type { FormInstance } from 'antd';\nimport {\n  Alert,\n  Button,\n  Card,\n  Descriptions,\n  Divider,\n  Result,\n  Statistic,\n} from 'antd';\nimport React, { useRef, useState } from 'react';\nimport type { StepDataType } from './data.d';\nimport useStyles from './style.style';\n\nconst StepDescriptions: React.FC<{\n  stepData: StepDataType;\n  bordered?: boolean;\n}> = ({ stepData, bordered }) => {\n  const { payAccount, receiverAccount, receiverName, amount } = stepData;\n  return (\n    <Descriptions column={1} bordered={bordered}>\n      <Descriptions.Item label=\"付款账户\"> {payAccount}</Descriptions.Item>\n      <Descriptions.Item label=\"收款账户\"> {receiverAccount}</Descriptions.Item>\n      <Descriptions.Item label=\"收款人姓名\"> {receiverName}</Descriptions.Item>\n      <Descriptions.Item label=\"转账金额\">\n        <Statistic\n          value={amount}\n          suffix={\n            <span\n              style={{\n                fontSize: 14,\n              }}\n            >\n              元\n            </span>\n          }\n          precision={2}\n        />\n      </Descriptions.Item>\n    </Descriptions>\n  );\n};\nconst StepResult: React.FC<{\n  onFinish: () => Promise<void>;\n  children?: React.ReactNode;\n}> = (props) => {\n  const { styles } = useStyles();\n  return (\n    <Result\n      status=\"success\"\n      title=\"操作成功\"\n      subTitle=\"预计两小时内到账\"\n      extra={\n        <>\n          <Button type=\"primary\" onClick={props.onFinish}>\n            再转一笔\n          </Button>\n          <Button>查看账单</Button>\n        </>\n      }\n      className={styles.result}\n    >\n      {props.children}\n    </Result>\n  );\n};\nconst StepForm: React.FC<Record<string, any>> = () => {\n  const { styles } = useStyles();\n  const [stepData, setStepData] = useState<StepDataType>({\n    payAccount: 'ant-design@alipay.com',\n    receiverAccount: 'test@example.com',\n    receiverName: 'Alex',\n    amount: '500',\n    receiverMode: 'alipay',\n  });\n  const [current, setCurrent] = useState(0);\n  const formRef = useRef<FormInstance>(null);\n  return (\n    <PageContainer content=\"将一个冗长或用户不熟悉的表单任务分成多个步骤，指导用户完成。\">\n      <Card variant=\"borderless\">\n        <StepsForm\n          current={current}\n          onCurrentChange={setCurrent}\n          submitter={{\n            render: (props, dom) => {\n              if (props.step === 2) {\n                return null;\n              }\n              return dom;\n            },\n          }}\n        >\n          <StepsForm.StepForm<StepDataType>\n            formRef={formRef}\n            title=\"填写转账信息\"\n            initialValues={stepData}\n            onFinish={async (values) => {\n              setStepData(values);\n              return true;\n            }}\n          >\n            <ProFormSelect\n              label=\"付款账户\"\n              width=\"md\"\n              name=\"payAccount\"\n              rules={[\n                {\n                  required: true,\n                  message: '请选择付款账户',\n                },\n              ]}\n              valueEnum={{\n                'ant-design@alipay.com': 'ant-design@alipay.com',\n              }}\n            />\n\n            <ProForm.Group title=\"收款账户\" size={8}>\n              <ProFormSelect\n                name=\"receiverMode\"\n                rules={[\n                  {\n                    required: true,\n                    message: '请选择付款账户',\n                  },\n                ]}\n                valueEnum={{\n                  alipay: '支付宝',\n                  bank: '银行账户',\n                }}\n              />\n              <ProFormText\n                name=\"receiverAccount\"\n                rules={[\n                  {\n                    required: true,\n                    message: '请输入收款人账户',\n                  },\n                  {\n                    type: 'email',\n                    message: '账户名应为邮箱格式',\n                  },\n                ]}\n                placeholder=\"test@example.com\"\n              />\n            </ProForm.Group>\n            <ProFormText\n              label=\"收款人姓名\"\n              width=\"md\"\n              name=\"receiverName\"\n              rules={[\n                {\n                  required: true,\n                  message: '请输入收款人姓名',\n                },\n              ]}\n              placeholder=\"请输入收款人姓名\"\n            />\n            <ProFormDigit\n              label=\"转账金额\"\n              name=\"amount\"\n              width=\"md\"\n              rules={[\n                {\n                  required: true,\n                  message: '请输入转账金额',\n                },\n                {\n                  pattern: /^(\\d+)((?:\\.\\d+)?)$/,\n                  message: '请输入合法金额数字',\n                },\n              ]}\n              placeholder=\"请输入金额\"\n              fieldProps={{\n                prefix: '￥',\n              }}\n            />\n          </StepsForm.StepForm>\n\n          <StepsForm.StepForm title=\"确认转账信息\">\n            <div className={styles.result}>\n              <Alert\n                closable\n                showIcon\n                message=\"确认转账后，资金将直接打入对方账户，无法退回。\"\n                style={{\n                  marginBottom: 24,\n                }}\n              />\n              <StepDescriptions stepData={stepData} bordered />\n              <Divider\n                style={{\n                  margin: '24px 0',\n                }}\n              />\n              <ProFormText.Password\n                label=\"支付密码\"\n                width=\"md\"\n                name=\"password\"\n                required={false}\n                rules={[\n                  {\n                    required: true,\n                    message: '需要支付密码才能进行支付',\n                  },\n                ]}\n              />\n            </div>\n          </StepsForm.StepForm>\n          <StepsForm.StepForm title=\"完成\">\n            <StepResult\n              onFinish={async () => {\n                setCurrent(0);\n                formRef.current?.resetFields();\n              }}\n            >\n              <StepDescriptions stepData={stepData} />\n            </StepResult>\n          </StepsForm.StepForm>\n        </StepsForm>\n        <Divider\n          style={{\n            margin: '40px 0 24px',\n          }}\n        />\n        <div>\n          <h3>说明</h3>\n          <h4>转账到支付宝账户</h4>\n          <p>\n            如果需要，这里可以放一些关于产品的常见问题说明。如果需要，这里可以放一些关于产品的常见问题说明。如果需要，这里可以放一些关于产品的常见问题说明。\n          </p>\n          <h4>转账到银行卡</h4>\n          <p>\n            如果需要，这里可以放一些关于产品的常见问题说明。如果需要，这里可以放一些关于产品的常见问题说明。如果需要，这里可以放一些关于产品的常见问题说明。\n          </p>\n        </div>\n      </Card>\n    </PageContainer>\n  );\n};\nexport default StepForm;\n"],"names":[],"mappings":"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"}